"use strict";(self.webpackChunknutrition_genius=self.webpackChunknutrition_genius||[]).push([[179],{2011:(Wi,kt,ne)=>{ne.d(kt,{Dh:()=>ut,GT:()=>pt,cc:()=>wt,hO:()=>Lt,on:()=>Ce,pX:()=>ht,xv:()=>dt});var v=ne(4650),ue=ne(127),ee=ne(880);Wi=ne.hmd(Wi);const qe=["ngOnDestroy"],ht=(nt,xi,hi,Ot={})=>new Proxy(nt,{get:(Mt,yt)=>hi.runOutsideAngular(()=>{var ii;if(nt[yt])return!(null===(ii=Ot?.spy)||void 0===ii)&&ii.get&&Ot.spy.get(yt,nt[yt]),nt[yt];if(qe.indexOf(yt)>-1)return()=>{};const je=xi.toPromise().then(Qe=>{const mt=Qe&&Qe[yt];return"function"==typeof mt?mt.bind(Qe):mt&&mt.then?mt.then(Fe=>hi.run(()=>Fe)):hi.run(()=>mt)});return new Proxy(()=>{},{get:(Qe,mt)=>je[mt],apply:(Qe,mt,Fe)=>je.then(Be=>{var st;const $e=Be&&Be(...Fe);return!(null===(st=Ot?.spy)||void 0===st)&&st.apply&&Ot.spy.apply(yt,Fe,$e),$e})})})}),pt=(nt,xi)=>{xi.forEach(hi=>{Object.getOwnPropertyNames(hi.prototype||hi).forEach(Ot=>{Object.defineProperty(nt.prototype,Ot,Object.getOwnPropertyDescriptor(hi.prototype||hi,Ot))})})};class it{constructor(xi){return xi}}const ut=new v.OlP("angularfire2.app.options"),dt=new v.OlP("angularfire2.app.name");function Ce(nt,xi,hi){const Mt="object"==typeof hi&&hi||{};Mt.name=Mt.name||"string"==typeof hi&&hi||"[DEFAULT]";const ii=ue.Z.apps.filter(je=>je&&je.name===Mt.name)[0]||xi.runOutsideAngular(()=>ue.Z.initializeApp(nt,Mt));try{JSON.stringify(nt)!==JSON.stringify(ii.options)&&we("error",`${ii.name} Firebase App already initialized with different options${Wi.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new it(ii)}const we=(nt,...xi)=>{(0,v.X6Q)()&&typeof console<"u"&&console[nt](...xi)},Pe={provide:it,useFactory:Ce,deps:[ut,v.R0b,[new v.FiY,dt]]};let Lt=(()=>{class nt{constructor(hi){ue.Z.registerVersion("angularfire",ee.q4.full,"core"),ue.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),ue.Z.registerVersion("angular",v.q4F.full,hi.toString())}static initializeApp(hi,Ot){return{ngModule:nt,providers:[{provide:ut,useValue:hi},{provide:dt,useValue:Ot}]}}}return nt.\u0275fac=function(hi){return new(hi||nt)(v.LFG(v.Lbi))},nt.\u0275mod=v.oAB({type:nt}),nt.\u0275inj=v.cJS({providers:[Pe]}),nt})();function wt(nt,xi,hi,Ot,Mt){const[,yt,ii]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===nt)||[];if(yt)return function St(nt,xi){try{return nt.toString()===xi.toString()}catch{return nt===xi}}(Mt,ii)||(gt("error",`${xi} was already initialized on the ${hi} Firebase App with different settings.${ci?" You may need to reload as Firebase is not HMR aware.":""}`),gt("warn",{is:Mt,was:ii})),yt;{const je=Ot();return globalThis.\u0275AngularfireInstanceCache.push([nt,je,Mt]),je}}const ci=!!Wi.hot,gt=(nt,...xi)=>{(0,v.X6Q)()&&typeof console<"u"&&console[nt](...xi)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(Wi,kt,ne)=>{ne.d(kt,{q4:()=>Xv,iC:()=>ey,fc:()=>jC,HU:()=>Jv,vb:()=>Qv,JM:()=>Ws});var v=ne(4650),ue=ne(5867),ee=ne(5861),qe=ne(9681),ht=ne(2090),pt=ne(4859),it=ne(1877);ne(2833);const dt="@firebase/remote-config",wt=new ht.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vi{constructor(se,Ie,rt,Wt){this.client=se,this.storage=Ie,this.storageCache=rt,this.logger=Wt}isCachedDataFresh(se,Ie){if(!Ie)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const rt=Date.now()-Ie,Wt=rt<=se;return this.logger.debug(`Config fetch cache check. Cache age millis: ${rt}. Cache max age millis (minimumFetchIntervalMillis setting): ${se}. Is cache hit: ${Wt}.`),Wt}fetch(se){var Ie=this;return(0,ee.Z)(function*(){const[rt,Wt]=yield Promise.all([Ie.storage.getLastSuccessfulFetchTimestampMillis(),Ie.storage.getLastSuccessfulFetchResponse()]);if(Wt&&Ie.isCachedDataFresh(se.cacheMaxAgeMillis,rt))return Wt;se.eTag=Wt&&Wt.eTag;const ai=yield Ie.client.fetch(se),qi=[Ie.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ai.status&&qi.push(Ie.storage.setLastSuccessfulFetchResponse(ai)),yield Promise.all(qi),ai})()}}function Jn(X=navigator){return X.languages&&X.languages[0]||X.language}class bn{constructor(se,Ie,rt,Wt,ai,qi){this.firebaseInstallations=se,this.sdkVersion=Ie,this.namespace=rt,this.projectId=Wt,this.apiKey=ai,this.appId=qi}fetch(se){var Ie=this;return(0,ee.Z)(function*(){var rt,Wt,ai;const[qi,Yn]=yield Promise.all([Ie.firebaseInstallations.getId(),Ie.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Ie.projectId}/namespaces/${Ie.namespace}:fetch?key=${Ie.apiKey}`,Xi={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":se.eTag||"*"},On={sdk_version:Ie.sdkVersion,app_instance_id:qi,app_instance_id_token:Yn,app_id:Ie.appId,language_code:Jn()},Xl={method:"POST",headers:Xi,body:JSON.stringify(On)},to=fetch(It,Xl),gc=new Promise((jh,Ep)=>{se.signal.addEventListener(()=>{const mc=new Error("The operation was aborted.");mc.name="AbortError",Ep(mc)})});let Iu;try{yield Promise.race([to,gc]),Iu=yield to}catch(jh){let Ep="fetch-client-network";throw"AbortError"===(null===(rt=jh)||void 0===rt?void 0:rt.name)&&(Ep="fetch-timeout"),wt.create(Ep,{originalErrorMessage:null===(Wt=jh)||void 0===Wt?void 0:Wt.message})}let ia=Iu.status;const am=Iu.headers.get("ETag")||void 0;let hd,Sp;if(200===Iu.status){let jh;try{jh=yield Iu.json()}catch(Ep){throw wt.create("fetch-client-parse",{originalErrorMessage:null===(ai=Ep)||void 0===ai?void 0:ai.message})}hd=jh.entries,Sp=jh.state}if("INSTANCE_STATE_UNSPECIFIED"===Sp?ia=500:"NO_CHANGE"===Sp?ia=304:("NO_TEMPLATE"===Sp||"EMPTY_CONFIG"===Sp)&&(hd={}),304!==ia&&200!==ia)throw wt.create("fetch-status",{httpStatus:ia});return{status:ia,eTag:am,config:hd}})()}}class Ds{constructor(se,Ie){this.client=se,this.storage=Ie}fetch(se){var Ie=this;return(0,ee.Z)(function*(){const rt=(yield Ie.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Ie.attemptFetch(se,rt)})()}attemptFetch(se,{throttleEndTimeMillis:Ie,backoffCount:rt}){var Wt=this;return(0,ee.Z)(function*(){yield function ti(X,se){return new Promise((Ie,rt)=>{const Wt=Math.max(se-Date.now(),0),ai=setTimeout(Ie,Wt);X.addEventListener(()=>{clearTimeout(ai),rt(wt.create("fetch-throttle",{throttleEndTimeMillis:se}))})})}(se.signal,Ie);try{const ai=yield Wt.client.fetch(se);return yield Wt.storage.deleteThrottleMetadata(),ai}catch(ai){if(!function Er(X){if(!(X instanceof ht.ZR&&X.customData))return!1;const se=Number(X.customData.httpStatus);return 429===se||500===se||503===se||504===se}(ai))throw ai;const qi={throttleEndTimeMillis:Date.now()+(0,ht.$s)(rt),backoffCount:rt+1};return yield Wt.storage.setThrottleMetadata(qi),Wt.attemptFetch(se,qi)}})()}}class _n{constructor(se,Ie,rt,Wt,ai){this.app=se,this._client=Ie,this._storageCache=rt,this._storage=Wt,this._logger=ai,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function rn(X,se){var Ie;const rt=X.target.error||void 0;return wt.create(se,{originalErrorMessage:rt&&(null===(Ie=rt)||void 0===Ie?void 0:Ie.message)})}const Xr="app_namespace_store";class Xs{constructor(se,Ie,rt,Wt=function ys(){return new Promise((X,se)=>{var Ie;try{const rt=indexedDB.open("firebase_remote_config",1);rt.onerror=Wt=>{se(rn(Wt,"storage-open"))},rt.onsuccess=Wt=>{X(Wt.target.result)},rt.onupgradeneeded=Wt=>{0===Wt.oldVersion&&Wt.target.result.createObjectStore(Xr,{keyPath:"compositeKey"})}}catch(rt){se(wt.create("storage-open",{originalErrorMessage:null===(Ie=rt)||void 0===Ie?void 0:Ie.message}))}})}()){this.appId=se,this.appName=Ie,this.namespace=rt,this.openDbPromise=Wt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(se){return this.set("last_fetch_status",se)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(se){return this.set("last_successful_fetch_timestamp_millis",se)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(se){return this.set("last_successful_fetch_response",se)}getActiveConfig(){return this.get("active_config")}setActiveConfig(se){return this.set("active_config",se)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(se){return this.set("active_config_etag",se)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(se){return this.set("throttle_metadata",se)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(se){var Ie=this;return(0,ee.Z)(function*(){const rt=yield Ie.openDbPromise;return new Promise((Wt,ai)=>{var qi;const eo=rt.transaction([Xr],"readonly").objectStore(Xr),It=Ie.createCompositeKey(se);try{const Xi=eo.get(It);Xi.onerror=On=>{ai(rn(On,"storage-get"))},Xi.onsuccess=On=>{const Xl=On.target.result;Wt(Xl?Xl.value:void 0)}}catch(Xi){ai(wt.create("storage-get",{originalErrorMessage:null===(qi=Xi)||void 0===qi?void 0:qi.message}))}})})()}set(se,Ie){var rt=this;return(0,ee.Z)(function*(){const Wt=yield rt.openDbPromise;return new Promise((ai,qi)=>{var Yn;const It=Wt.transaction([Xr],"readwrite").objectStore(Xr),Xi=rt.createCompositeKey(se);try{const On=It.put({compositeKey:Xi,value:Ie});On.onerror=Xl=>{qi(rn(Xl,"storage-set"))},On.onsuccess=()=>{ai()}}catch(On){qi(wt.create("storage-set",{originalErrorMessage:null===(Yn=On)||void 0===Yn?void 0:Yn.message}))}})})()}delete(se){var Ie=this;return(0,ee.Z)(function*(){const rt=yield Ie.openDbPromise;return new Promise((Wt,ai)=>{var qi;const eo=rt.transaction([Xr],"readwrite").objectStore(Xr),It=Ie.createCompositeKey(se);try{const Xi=eo.delete(It);Xi.onerror=On=>{ai(rn(On,"storage-delete"))},Xi.onsuccess=()=>{Wt()}}catch(Xi){ai(wt.create("storage-delete",{originalErrorMessage:null===(qi=Xi)||void 0===qi?void 0:qi.message}))}})})()}createCompositeKey(se){return[this.appId,this.appName,this.namespace,se].join()}}class Sa{constructor(se){this.storage=se}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var se=this;return(0,ee.Z)(function*(){const Ie=se.storage.getLastFetchStatus(),rt=se.storage.getLastSuccessfulFetchTimestampMillis(),Wt=se.storage.getActiveConfig(),ai=yield Ie;ai&&(se.lastFetchStatus=ai);const qi=yield rt;qi&&(se.lastSuccessfulFetchTimestampMillis=qi);const Yn=yield Wt;Yn&&(se.activeConfig=Yn)})()}setLastFetchStatus(se){return this.lastFetchStatus=se,this.storage.setLastFetchStatus(se)}setLastSuccessfulFetchTimestampMillis(se){return this.lastSuccessfulFetchTimestampMillis=se,this.storage.setLastSuccessfulFetchTimestampMillis(se)}setActiveConfig(se){return this.activeConfig=se,this.storage.setActiveConfig(se)}}function Oa(){return fi.apply(this,arguments)}function fi(){return(fi=(0,ee.Z)(function*(){if(!(0,ht.hl)())return!1;try{return yield(0,ht.eu)()}catch{return!1}})).apply(this,arguments)}!function Us(){(0,qe._registerComponent)(new pt.wA("remote-config",function X(se,{instanceIdentifier:Ie}){const rt=se.getProvider("app").getImmediate(),Wt=se.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw wt.create("registration-window");if(!(0,ht.hl)())throw wt.create("indexed-db-unavailable");const{projectId:ai,apiKey:qi,appId:Yn}=rt.options;if(!ai)throw wt.create("registration-project-id");if(!qi)throw wt.create("registration-api-key");if(!Yn)throw wt.create("registration-app-id");const eo=new Xs(Yn,rt.name,Ie=Ie||"firebase"),It=new Sa(eo),Xi=new it.Yd(dt);Xi.logLevel=it.in.ERROR;const On=new bn(Wt,qe.SDK_VERSION,Ie,ai,qi,Yn),Xl=new Ds(On,eo),to=new Vi(Xl,eo,It,Xi),gc=new _n(rt,to,It,eo,Xi);return function ii(X){const se=(0,ht.m9)(X);se._initializePromise||(se._initializePromise=se._storageCache.loadFromStorage().then(()=>{se._isInitializationComplete=!0}))}(gc),gc},"PUBLIC").setMultipleInstances(!0)),(0,qe.registerVersion)(dt,"0.3.15"),(0,qe.registerVersion)(dt,"0.3.15","esm2017")}();var Nr=ne(8766);const Is="/firebase-messaging-sw.js",_r="/firebase-cloud-messaging-push-scope",lo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ur="google.c.a.c_id",Qr="google.c.a.c_l",or="google.c.a.ts",Fi="google.c.a.e";var Oi=(()=>{return(X=Oi||(Oi={})).PUSH_RECEIVED="push-received",X.NOTIFICATION_CLICKED="notification-clicked",Oi;var X})();function Kr(X){const se=new Uint8Array(X);return btoa(String.fromCharCode(...se)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qs(X){const Ie=(X+"=".repeat((4-X.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),rt=atob(Ie),Wt=new Uint8Array(rt.length);for(let ai=0;ai<rt.length;++ai)Wt[ai]=rt.charCodeAt(ai);return Wt}const ho="fcm_token_details_db",uo="fcm_token_object_Store";function vn(X){return xo.apply(this,arguments)}function xo(){return xo=(0,ee.Z)(function*(X){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ai=>ai.name).includes(ho))return null;let se=null;return(yield(0,Nr.X3)(ho,5,{upgrade:(rt=(0,ee.Z)(function*(Wt,ai,qi,Yn){var eo;if(ai<2||!Wt.objectStoreNames.contains(uo))return;const It=Yn.objectStore(uo),Xi=yield It.index("fcmSenderId").get(X);if(yield It.clear(),Xi)if(2===ai){const On=Xi;if(!On.auth||!On.p256dh||!On.endpoint)return;se={token:On.fcmToken,createTime:null!==(eo=On.createTime)&&void 0!==eo?eo:Date.now(),subscriptionOptions:{auth:On.auth,p256dh:On.p256dh,endpoint:On.endpoint,swScope:On.swScope,vapidKey:"string"==typeof On.vapidKey?On.vapidKey:Kr(On.vapidKey)}}}else if(3===ai){const On=Xi;se={token:On.fcmToken,createTime:On.createTime,subscriptionOptions:{auth:Kr(On.auth),p256dh:Kr(On.p256dh),endpoint:On.endpoint,swScope:On.swScope,vapidKey:Kr(On.vapidKey)}}}else if(4===ai){const On=Xi;se={token:On.fcmToken,createTime:On.createTime,subscriptionOptions:{auth:Kr(On.auth),p256dh:Kr(On.p256dh),endpoint:On.endpoint,swScope:On.swScope,vapidKey:Kr(On.vapidKey)}}}}),function(ai,qi,Yn,eo){return rt.apply(this,arguments)})})).close(),yield(0,Nr.Lj)(ho),yield(0,Nr.Lj)("fcm_vapid_details_db"),yield(0,Nr.Lj)("undefined"),Fn(se)?se:null;var rt}),xo.apply(this,arguments)}function Fn(X){if(!X||!X.subscriptionOptions)return!1;const{subscriptionOptions:se}=X;return"number"==typeof X.createTime&&X.createTime>0&&"string"==typeof X.token&&X.token.length>0&&"string"==typeof se.auth&&se.auth.length>0&&"string"==typeof se.p256dh&&se.p256dh.length>0&&"string"==typeof se.endpoint&&se.endpoint.length>0&&"string"==typeof se.swScope&&se.swScope.length>0&&"string"==typeof se.vapidKey&&se.vapidKey.length>0}const di="firebase-messaging-store";let xt=null;function vi(){return xt||(xt=(0,Nr.X3)("firebase-messaging-database",1,{upgrade:(X,se)=>{0===se&&X.createObjectStore(di)}})),xt}function Zi(X){return an.apply(this,arguments)}function an(){return(an=(0,ee.Z)(function*(X){const se=Y(X),rt=yield(yield vi()).transaction(di).objectStore(di).get(se);if(rt)return rt;{const Wt=yield vn(X.appConfig.senderId);if(Wt)return yield Bn(X,Wt),Wt}})).apply(this,arguments)}function Bn(X,se){return be.apply(this,arguments)}function be(){return(be=(0,ee.Z)(function*(X,se){const Ie=Y(X),Wt=(yield vi()).transaction(di,"readwrite");return yield Wt.objectStore(di).put(se,Ie),yield Wt.done,se})).apply(this,arguments)}function fe(X){return J.apply(this,arguments)}function J(){return(J=(0,ee.Z)(function*(X){const se=Y(X),rt=(yield vi()).transaction(di,"readwrite");yield rt.objectStore(di).delete(se),yield rt.done})).apply(this,arguments)}function Y({appConfig:X}){return X.appId}const Z=new ht.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ye(X,se){return et.apply(this,arguments)}function et(){return(et=(0,ee.Z)(function*(X,se){var Ie;const rt=yield zn(X),Wt=Ln(se),ai={method:"POST",headers:rt,body:JSON.stringify(Wt)};let qi;try{qi=yield(yield fetch(Mi(X.appConfig),ai)).json()}catch(Yn){throw Z.create("token-subscribe-failed",{errorInfo:null===(Ie=Yn)||void 0===Ie?void 0:Ie.toString()})}if(qi.error)throw Z.create("token-subscribe-failed",{errorInfo:qi.error.message});if(!qi.token)throw Z.create("token-subscribe-no-token");return qi.token})).apply(this,arguments)}function Pt(X,se){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,ee.Z)(function*(X,se){var Ie;const rt=yield zn(X),Wt=Ln(se.subscriptionOptions),ai={method:"PATCH",headers:rt,body:JSON.stringify(Wt)};let qi;try{qi=yield(yield fetch(`${Mi(X.appConfig)}/${se.token}`,ai)).json()}catch(Yn){throw Z.create("token-update-failed",{errorInfo:null===(Ie=Yn)||void 0===Ie?void 0:Ie.toString()})}if(qi.error)throw Z.create("token-update-failed",{errorInfo:qi.error.message});if(!qi.token)throw Z.create("token-update-no-token");return qi.token})).apply(this,arguments)}function ct(X,se){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,ee.Z)(function*(X,se){var Ie;const Wt={method:"DELETE",headers:yield zn(X)};try{const qi=yield(yield fetch(`${Mi(X.appConfig)}/${se}`,Wt)).json();if(qi.error)throw Z.create("token-unsubscribe-failed",{errorInfo:qi.error.message})}catch(ai){throw Z.create("token-unsubscribe-failed",{errorInfo:null===(Ie=ai)||void 0===Ie?void 0:Ie.toString()})}})).apply(this,arguments)}function Mi({projectId:X}){return`https://fcmregistrations.googleapis.com/v1/projects/${X}/registrations`}function zn(X){return un.apply(this,arguments)}function un(){return(un=(0,ee.Z)(function*({appConfig:X,installations:se}){const Ie=yield se.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":X.apiKey,"x-goog-firebase-installations-auth":`FIS ${Ie}`})})).apply(this,arguments)}function Ln({p256dh:X,auth:se,endpoint:Ie,vapidKey:rt}){const Wt={web:{endpoint:Ie,auth:se,p256dh:X}};return rt!==lo&&(Wt.web.applicationPubKey=rt),Wt}const ll=6048e5;function ss(X){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,ee.Z)(function*(X){const se=yield Hn(X.swRegistration,X.vapidKey),Ie={vapidKey:X.vapidKey,swScope:X.swRegistration.scope,endpoint:se.endpoint,auth:Kr(se.getKey("auth")),p256dh:Kr(se.getKey("p256dh"))},rt=yield Zi(X.firebaseDependencies);if(rt){if(fs(rt.subscriptionOptions,Ie))return Date.now()>=rt.createTime+ll?ze(X,{token:rt.token,createTime:Date.now(),subscriptionOptions:Ie}):rt.token;try{yield ct(X.firebaseDependencies,rt.token)}catch(Wt){console.warn(Wt)}return qt(X.firebaseDependencies,Ie)}return qt(X.firebaseDependencies,Ie)})).apply(this,arguments)}function Cu(X){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,ee.Z)(function*(X){const se=yield Zi(X.firebaseDependencies);se&&(yield ct(X.firebaseDependencies,se.token),yield fe(X.firebaseDependencies));const Ie=yield X.swRegistration.pushManager.getSubscription();return!Ie||Ie.unsubscribe()})).apply(this,arguments)}function ze(X,se){return vt.apply(this,arguments)}function vt(){return(vt=(0,ee.Z)(function*(X,se){try{const Ie=yield Pt(X.firebaseDependencies,se),rt=Object.assign(Object.assign({},se),{token:Ie,createTime:Date.now()});return yield Bn(X.firebaseDependencies,rt),Ie}catch(Ie){throw yield Cu(X),Ie}})).apply(this,arguments)}function qt(X,se){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,ee.Z)(function*(X,se){const rt={token:yield ye(X,se),createTime:Date.now(),subscriptionOptions:se};return yield Bn(X,rt),rt.token})).apply(this,arguments)}function Hn(X,se){return yr.apply(this,arguments)}function yr(){return(yr=(0,ee.Z)(function*(X,se){return(yield X.pushManager.getSubscription())||X.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qs(se)})})).apply(this,arguments)}function fs(X,se){return se.vapidKey===X.vapidKey&&se.endpoint===X.endpoint&&se.auth===X.auth&&se.p256dh===X.p256dh}function os(X){const se={from:X.from,collapseKey:X.collapse_key,messageId:X.fcmMessageId};return function Pa(X,se){if(!se.notification)return;X.notification={};const Ie=se.notification.title;Ie&&(X.notification.title=Ie);const rt=se.notification.body;rt&&(X.notification.body=rt);const Wt=se.notification.image;Wt&&(X.notification.image=Wt);const ai=se.notification.icon;ai&&(X.notification.icon=ai)}(se,X),function Ea(X,se){!se.data||(X.data=se.data)}(se,X),function Br(X,se){var Ie,rt,Wt,ai,qi;if(!(se.fcmOptions||null!==(Ie=se.notification)&&void 0!==Ie&&Ie.click_action))return;X.fcmOptions={};const Yn=null!==(Wt=null===(rt=se.fcmOptions)||void 0===rt?void 0:rt.link)&&void 0!==Wt?Wt:null===(ai=se.notification)||void 0===ai?void 0:ai.click_action;Yn&&(X.fcmOptions.link=Yn);const eo=null===(qi=se.fcmOptions)||void 0===qi?void 0:qi.analytics_label;eo&&(X.fcmOptions.analyticsLabel=eo)}(se,X),se}function BC(X){return"object"==typeof X&&!!X&&Ur in X}function mp(X,se){const Ie=[];for(let rt=0;rt<X.length;rt++)Ie.push(X.charAt(rt)),rt<se.length&&Ie.push(se.charAt(rt));return Ie.join("")}function cc(X){return Z.create("missing-app-config-values",{valueName:X})}mp("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),mp("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class wu{constructor(se,Ie,rt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Wt=function vp(X){if(!X||!X.options)throw cc("App Configuration Object");if(!X.name)throw cc("App Name");const se=["projectId","apiKey","appId","messagingSenderId"],{options:Ie}=X;for(const rt of se)if(!Ie[rt])throw cc(rt);return{appName:X.name,projectId:Ie.projectId,apiKey:Ie.apiKey,appId:Ie.appId,senderId:Ie.messagingSenderId}}(se);this.firebaseDependencies={app:se,appConfig:Wt,installations:Ie,analyticsProvider:rt}}_delete(){return Promise.resolve()}}function Su(X){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,ee.Z)(function*(X){var se;try{X.swRegistration=yield navigator.serviceWorker.register(Is,{scope:_r}),X.swRegistration.update().catch(()=>{})}catch(Ie){throw Z.create("failed-service-worker-registration",{browserErrorMessage:null===(se=Ie)||void 0===se?void 0:se.message})}})).apply(this,arguments)}function Bo(X,se){return nm.apply(this,arguments)}function nm(){return(nm=(0,ee.Z)(function*(X,se){if(!se&&!X.swRegistration&&(yield Su(X)),se||!X.swRegistration){if(!(se instanceof ServiceWorkerRegistration))throw Z.create("invalid-sw-registration");X.swRegistration=se}})).apply(this,arguments)}function ta(X,se){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,ee.Z)(function*(X,se){se?X.vapidKey=se:X.vapidKey||(X.vapidKey=lo)})).apply(this,arguments)}function rd(){return(rd=(0,ee.Z)(function*(X,se){if(!navigator)throw Z.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Z.create("permission-blocked");return yield ta(X,se?.vapidKey),yield Bo(X,se?.serviceWorkerRegistration),ss(X)})).apply(this,arguments)}function sd(X,se,Ie){return Il.apply(this,arguments)}function Il(){return(Il=(0,ee.Z)(function*(X,se,Ie){const rt=qf(se);(yield X.firebaseDependencies.analyticsProvider.get()).logEvent(rt,{message_id:Ie[Ur],message_name:Ie[Qr],message_time:Ie[or],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function qf(X){switch(X){case Oi.NOTIFICATION_CLICKED:return"notification_open";case Oi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function yp(){return(yp=(0,ee.Z)(function*(X,se){const Ie=se.data;if(!Ie.isFirebaseMessaging)return;X.onMessageHandler&&Ie.messageType===Oi.PUSH_RECEIVED&&("function"==typeof X.onMessageHandler?X.onMessageHandler(os(Ie)):X.onMessageHandler.next(os(Ie)));const rt=Ie.data;BC(rt)&&"1"===rt[Fi]&&(yield sd(X,Ie.messageType,rt))})).apply(this,arguments)}const od="@firebase/messaging",Al=X=>{const se=new wu(X.getProvider("app").getImmediate(),X.getProvider("installations-internal").getImmediate(),X.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Ie=>function tE(X,se){return yp.apply(this,arguments)}(se,Ie)),se},iE=X=>{const se=X.getProvider("messaging").getImmediate();return{getToken:rt=>function Eu(X,se){return rd.apply(this,arguments)}(se,rt)}};function HC(){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,ee.Z)(function*(){try{yield(0,ht.eu)()}catch{return!1}return typeof window<"u"&&(0,ht.hl)()&&(0,ht.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Hh(){(0,qe._registerComponent)(new pt.wA("messaging",Al,"PUBLIC")),(0,qe._registerComponent)(new pt.wA("messaging-internal",iE,"PRIVATE")),(0,qe.registerVersion)(od,"0.11.0"),(0,qe.registerVersion)(od,"0.11.0","esm2017")}();var $v=ne(6148),rm=ne(4408),dI=ne(7565);const Ta=new class Yv extends dI.v{}(class Yf extends rm.o{constructor(se,Ie){super(se,Ie),this.scheduler=se,this.work=Ie}schedule(se,Ie=0){return Ie>0?super.schedule(se,Ie):(this.delay=Ie,this.state=se,this.scheduler.flush(this),this)}execute(se,Ie){return Ie>0||this.closed?super.execute(se,Ie):this._execute(se,Ie)}requestAsyncId(se,Ie,rt=0){return null!=rt&&rt>0||null==rt&&this.delay>0?super.requestAsyncId(se,Ie,rt):se.flush(this)}});var dc=ne(4986),Zv=ne(8505),Zf=ne(5363),sm=ne(9468);const Xv=new v.GfV("7.5.0"),xu="__angularfire_symbol__analyticsIsSupportedValue",Vh="__angularfire_symbol__analyticsIsSupported",zh="__angularfire_symbol__remoteConfigIsSupportedValue",om="__angularfire_symbol__remoteConfigIsSupported",Na="__angularfire_symbol__messagingIsSupportedValue",pc="__angularfire_symbol__messagingIsSupported";function Ws(X,se,Ie){if(se){if(1===se.length)return se[0];const ai=se.filter(qi=>qi.app===Ie);if(1===ai.length)return ai[0]}return Ie.container.getProvider(X).getImmediate({optional:!0})}globalThis[Vh]||(globalThis[Vh]=(0,$v.Gb)().then(X=>globalThis[xu]=X).catch(()=>globalThis[xu]=!1)),globalThis[pc]||(globalThis[pc]=HC().then(X=>globalThis[Na]=X).catch(()=>globalThis[Na]=!1)),globalThis[om]||(globalThis[om]=Oa().then(X=>globalThis[zh]=X).catch(()=>globalThis[zh]=!1));const Qv=(X,se)=>{const Ie=se?[se]:(0,ue.C6)(),rt=[];return Ie.forEach(Wt=>{Wt.container.getProvider(X).instances.forEach(qi=>{rt.includes(qi)||rt.push(qi)})}),rt};function ad(){}class ld{constructor(se,Ie=Ta){this.zone=se,this.delegate=Ie}now(){return this.delegate.now()}schedule(se,Ie,rt){const Wt=this.zone;return this.delegate.schedule(function(qi){Wt.runGuarded(()=>{se.apply(this,[qi])})},Ie,rt)}}class Ya{constructor(se){this.zone=se,this.task=null}call(se,Ie){const rt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ad,{},ad,ad)),Ie.pipe((0,Zv.b)({next:rt,complete:rt,error:rt})).subscribe(se).add(rt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jv=(()=>{class X{constructor(Ie){this.ngZone=Ie,this.outsideAngular=Ie.runOutsideAngular(()=>new ld(Zone.current)),this.insideAngular=Ie.run(()=>new ld(Zone.current,dc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return X.\u0275fac=function(Ie){return new(Ie||X)(v.LFG(v.R0b))},X.\u0275prov=v.Yz7({token:X,factory:X.\u0275fac,providedIn:"root"}),X})();function _l(){const X=globalThis.\u0275AngularFireScheduler;if(!X)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return X}function jC(X){return X.pipe((0,Zf.Q)(_l().outsideAngular))}function ey(X){return _l(),function Sh(X){return function(Ie){return(Ie=Ie.lift(new Ya(X.ngZone))).pipe((0,sm.R)(X.outsideAngular),(0,Zf.Q)(X.insideAngular))}}(_l())(X)}},8247:(Wi,kt,ne)=>{ne.d(kt,{$:()=>qi,A:()=>we,B:()=>wt,G:()=>vt,H:()=>fs,J:()=>Hh,L:()=>be,M:()=>Yv,N:()=>Zv,P:()=>en,Q:()=>Zf,R:()=>rP,T:()=>sm,U:()=>dc,V:()=>zh,W:()=>om,X:()=>pI,Y:()=>wp,Z:()=>X,_:()=>Ie,a:()=>cd,a0:()=>On,a1:()=>to,a2:()=>Iu,a3:()=>am,a4:()=>Sp,a5:()=>Ep,a6:()=>na,a7:()=>Au,a8:()=>hm,a9:()=>ud,aA:()=>fe,aB:()=>og,aC:()=>vy,aD:()=>CE,aE:()=>Ki,aI:()=>eg,aL:()=>xu,aa:()=>tP,ab:()=>UC,ac:()=>qC,af:()=>mI,ag:()=>vI,ah:()=>aE,ak:()=>ld,al:()=>SI,an:()=>EI,ao:()=>hE,ap:()=>mt,aq:()=>Dt,ar:()=>Pt,as:()=>hi,at:()=>wd,au:()=>bd,av:()=>Mi,aw:()=>Ot,ax:()=>je,ay:()=>lg,az:()=>Be,b:()=>Dp,c:()=>LI,d:()=>PI,e:()=>OI,f:()=>wE,g:()=>SE,h:()=>Dm,i:()=>cy,j:()=>by,k:()=>m0,l:()=>MI,m:()=>wc,n:()=>Dy,o:()=>ut,r:()=>bc,s:()=>Za,u:()=>fd,v:()=>cm});var v=ne(5861),ue=ne(2090),ee=ne(9681),qe=ne(1877),ht=ne(655),pt=ne(4859);const ut={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},we={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const wt=function Pe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},St=function Lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ci=new ue.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),nt=new qe.Yd("@firebase/auth");function xi(R,...D){nt.logLevel<=qe.in.ERROR&&nt.error(`Auth (${ee.SDK_VERSION}): ${R}`,...D)}function hi(R,...D){throw ii(R,...D)}function Ot(R,...D){return ii(R,...D)}function Mt(R,D,A){const P=Object.assign(Object.assign({},St()),{[D]:A});return new ue.LL("auth","Firebase",P).create(D,{appName:R.name})}function yt(R,D,A){if(!(D instanceof A))throw A.name!==D.constructor.name&&hi(R,"argument-error"),Mt(R,"argument-error",`Type of ${D.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ii(R,...D){if("string"!=typeof R){const A=D[0],P=[...D.slice(1)];return P[0]&&(P[0].appName=R.name),R._errorFactory.create(A,...P)}return ci.create(R,...D)}function je(R,D,...A){if(!R)throw ii(D,...A)}function Qe(R){const D="INTERNAL ASSERTION FAILED: "+R;throw xi(D),new Error(D)}function mt(R,D){R||Qe(D)}const Fe=new Map;function Be(R){mt(R instanceof Function,"Expected a class definition");let D=Fe.get(R);return D?(mt(D instanceof R,"Instance stored in cache mismatched with class"),D):(D=new R,Fe.set(R,D),D)}function zt(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.href)||""}function Ht(){return"http:"===Vi()||"https:"===Vi()}function Vi(){var R;return typeof self<"u"&&(null===(R=self.location)||void 0===R?void 0:R.protocol)||null}class ti{constructor(D,A){this.shortDelay=D,this.longDelay=A,mt(A>D,"Short delay should be less than long delay!"),this.isMobile=(0,ue.uI)()||(0,ue.b$)()}get(){return function Jn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ht()||(0,ue.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Er(R,D){mt(R.emulator,"Emulator should always be set here");const{url:A}=R.emulator;return D?`${A}${D.startsWith("/")?D.slice(1):D}`:A}class Ds{static initialize(D,A,P){this.fetchImpl=D,A&&(this.headersImpl=A),P&&(this.responseImpl=P)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},er=new ti(3e4,6e4);function _n(R,D){return R.tenantId&&!D.tenantId?Object.assign(Object.assign({},D),{tenantId:R.tenantId}):D}function rn(R,D,A,P){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,v.Z)(function*(R,D,A,P,K={}){return La(R,K,(0,v.Z)(function*(){let te={},Ge={};P&&("GET"===D?Ge=P:te={body:JSON.stringify(P)});const Rt=(0,ue.xO)(Object.assign({key:R.config.apiKey},Ge)).slice(1),Di=yield R._getAdditionalHeaders();return Di["Content-Type"]="application/json",R.languageCode&&(Di["X-Firebase-Locale"]=R.languageCode),Ds.fetch()(Sa(R,R.config.apiHost,A,Rt),Object.assign({method:D,headers:Di,referrerPolicy:"no-referrer"},te))}))})).apply(this,arguments)}function La(R,D,A){return $a.apply(this,arguments)}function $a(){return($a=(0,v.Z)(function*(R,D,A){R._canInitEmulator=!1;const P=Object.assign(Object.assign({},vr),D);try{const K=new Us(R),te=yield Promise.race([A(),K.promise]);K.clearNetworkTimeout();const Ge=yield te.json();if("needConfirmation"in Ge)throw Ms(R,"account-exists-with-different-credential",Ge);if(te.ok&&!("errorMessage"in Ge))return Ge;{const Rt=te.ok?Ge.errorMessage:Ge.error.message,[Di,pn]=Rt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Di)throw Ms(R,"credential-already-in-use",Ge);if("EMAIL_EXISTS"===Di)throw Ms(R,"email-already-in-use",Ge);if("USER_DISABLED"===Di)throw Ms(R,"user-disabled",Ge);const tr=P[Di]||Di.toLowerCase().replace(/[_\s]+/g,"-");if(pn)throw Mt(R,tr,pn);hi(R,tr)}}catch(K){if(K instanceof ue.ZR)throw K;hi(R,"network-request-failed")}})).apply(this,arguments)}function ys(R,D,A,P){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,v.Z)(function*(R,D,A,P,K={}){const te=yield rn(R,D,A,P,K);return"mfaPendingCredential"in te&&hi(R,"multi-factor-auth-required",{_serverResponse:te}),te})).apply(this,arguments)}function Sa(R,D,A,P){const K=`${D}${A}?${P}`;return R.config.emulator?Er(R.config,K):`${R.config.apiScheme}://${K}`}class Us{constructor(D){this.auth=D,this.timer=null,this.promise=new Promise((A,P)=>{this.timer=setTimeout(()=>P(Ot(this.auth,"network-request-failed")),er.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ms(R,D,A){const P={appName:R.name};A.email&&(P.email=A.email),A.phoneNumber&&(P.phoneNumber=A.phoneNumber);const K=Ot(R,D,P);return K.customData._tokenResponse=A,K}function Oa(){return(Oa=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:delete",D)})).apply(this,arguments)}function fi(R,D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:update",D)})).apply(this,arguments)}function Is(R,D){return _r.apply(this,arguments)}function _r(){return(_r=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:lookup",D)})).apply(this,arguments)}function lo(R){if(R)try{const D=new Date(Number(R));if(!isNaN(D.getTime()))return D.toUTCString()}catch{}}function Qr(){return(Qr=(0,v.Z)(function*(R,D=!1){const A=(0,ue.m9)(R),P=yield A.getIdToken(D),K=Fi(P);je(K&&K.exp&&K.auth_time&&K.iat,A.auth,"internal-error");const te="object"==typeof K.firebase?K.firebase:void 0,Ge=te?.sign_in_provider;return{claims:K,token:P,authTime:lo(or(K.auth_time)),issuedAtTime:lo(or(K.iat)),expirationTime:lo(or(K.exp)),signInProvider:Ge||null,signInSecondFactor:te?.sign_in_second_factor||null}})).apply(this,arguments)}function or(R){return 1e3*Number(R)}function Fi(R){var D;const[A,P,K]=R.split(".");if(void 0===A||void 0===P||void 0===K)return xi("JWT malformed, contained fewer than 3 sections"),null;try{const te=(0,ue.tV)(P);return te?JSON.parse(te):(xi("Failed to decode base64 JWT payload"),null)}catch(te){return xi("Caught error parsing JWT payload as JSON",null===(D=te)||void 0===D?void 0:D.toString()),null}}function Oi(R,D){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,v.Z)(function*(R,D,A=!1){if(A)return D;try{return yield D}catch(P){throw P instanceof ue.ZR&&Qs(P)&&R.auth.currentUser===R&&(yield R.auth.signOut()),P}})).apply(this,arguments)}function Qs({code:R}){return"auth/user-disabled"===R||"auth/user-token-expired"===R}class ho{constructor(D){this.user=D,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(D){var A;if(D){const P=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),P}{this.errorBackoff=3e4;const K=(null!==(A=this.user.stsTokenManager.expirationTime)&&void 0!==A?A:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(D=!1){var A=this;if(!this.isRunning)return;const P=this.getInterval(D);this.timerId=setTimeout((0,v.Z)(function*(){yield A.iteration()}),P)}iteration(){var D=this;return(0,v.Z)(function*(){var A;try{yield D.user.getIdToken(!0)}catch(P){return void("auth/network-request-failed"===(null===(A=P)||void 0===A?void 0:A.code)&&D.schedule(!0))}D.schedule()})()}}class hn{constructor(D,A){this.createdAt=D,this.lastLoginAt=A,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(D){this.createdAt=D.createdAt,this.lastLoginAt=D.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function uo(R){return vn.apply(this,arguments)}function vn(){return(vn=(0,v.Z)(function*(R){var D;const A=R.auth,P=yield R.getIdToken(),K=yield Oi(R,Is(A,{idToken:P}));je(K?.users.length,A,"internal-error");const te=K.users[0];R._notifyReloadListener(te);const Ge=null!==(D=te.providerUserInfo)&&void 0!==D&&D.length?ps(te.providerUserInfo):[],Rt=Js(R.providerData,Ge),tr=!!R.isAnonymous&&!(R.email&&te.passwordHash||Rt?.length),bs={uid:te.localId,displayName:te.displayName||null,photoURL:te.photoUrl||null,email:te.email||null,emailVerified:te.emailVerified||!1,phoneNumber:te.phoneNumber||null,tenantId:te.tenantId||null,providerData:Rt,metadata:new hn(te.createdAt,te.lastLoginAt),isAnonymous:tr};Object.assign(R,bs)})).apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(R){const D=(0,ue.m9)(R);yield uo(D),yield D.auth._persistUserIfCurrent(D),D.auth._notifyListenersIfCurrent(D)})).apply(this,arguments)}function Js(R,D){return[...R.filter(P=>!D.some(K=>K.providerId===P.providerId)),...D]}function ps(R){return R.map(D=>{var{providerId:A}=D,P=(0,ht._T)(D,["providerId"]);return{providerId:A,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}function xt(){return(xt=(0,v.Z)(function*(R,D){const A=yield La(R,{},(0,v.Z)(function*(){const P=(0,ue.xO)({grant_type:"refresh_token",refresh_token:D}).slice(1),{tokenApiHost:K,apiKey:te}=R.config,Ge=Sa(R,K,"/v1/token",`key=${te}`),Rt=yield R._getAdditionalHeaders();return Rt["Content-Type"]="application/x-www-form-urlencoded",Ds.fetch()(Ge,{method:"POST",headers:Rt,body:P})}));return{accessToken:A.access_token,expiresIn:A.expires_in,refreshToken:A.refresh_token}})).apply(this,arguments)}class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(D){je(D.idToken,"internal-error"),je(typeof D.idToken<"u","internal-error"),je(typeof D.refreshToken<"u","internal-error");const A="expiresIn"in D&&typeof D.expiresIn<"u"?Number(D.expiresIn):function Li(R){const D=Fi(R);return je(D,"internal-error"),je(typeof D.exp<"u","internal-error"),je(typeof D.iat<"u","internal-error"),Number(D.exp)-Number(D.iat)}(D.idToken);this.updateTokensAndExpiration(D.idToken,D.refreshToken,A)}getToken(D,A=!1){var P=this;return(0,v.Z)(function*(){return je(!P.accessToken||P.refreshToken,D,"user-token-expired"),A||!P.accessToken||P.isExpired?P.refreshToken?(yield P.refresh(D,P.refreshToken),P.accessToken):null:P.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(D,A){var P=this;return(0,v.Z)(function*(){const{accessToken:K,refreshToken:te,expiresIn:Ge}=yield function di(R,D){return xt.apply(this,arguments)}(D,A);P.updateTokensAndExpiration(K,te,Number(Ge))})()}updateTokensAndExpiration(D,A,P){this.refreshToken=A||null,this.accessToken=D||null,this.expirationTime=Date.now()+1e3*P}static fromJSON(D,A){const{refreshToken:P,accessToken:K,expirationTime:te}=A,Ge=new vi;return P&&(je("string"==typeof P,"internal-error",{appName:D}),Ge.refreshToken=P),K&&(je("string"==typeof K,"internal-error",{appName:D}),Ge.accessToken=K),te&&(je("number"==typeof te,"internal-error",{appName:D}),Ge.expirationTime=te),Ge}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(D){this.accessToken=D.accessToken,this.refreshToken=D.refreshToken,this.expirationTime=D.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Zi(R,D){je("string"==typeof R||typeof R>"u","internal-error",{appName:D})}class an{constructor(D){var{uid:A,auth:P,stsTokenManager:K}=D,te=(0,ht._T)(D,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ho(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=A,this.auth=P,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=te.displayName||null,this.email=te.email||null,this.emailVerified=te.emailVerified||!1,this.phoneNumber=te.phoneNumber||null,this.photoURL=te.photoURL||null,this.isAnonymous=te.isAnonymous||!1,this.tenantId=te.tenantId||null,this.providerData=te.providerData?[...te.providerData]:[],this.metadata=new hn(te.createdAt||void 0,te.lastLoginAt||void 0)}getIdToken(D){var A=this;return(0,v.Z)(function*(){const P=yield Oi(A,A.stsTokenManager.getToken(A.auth,D));return je(P,A.auth,"internal-error"),A.accessToken!==P&&(A.accessToken=P,yield A.auth._persistUserIfCurrent(A),A.auth._notifyListenersIfCurrent(A)),P})()}getIdTokenResult(D){return function Ur(R){return Qr.apply(this,arguments)}(this,D)}reload(){return function xo(R){return Fn.apply(this,arguments)}(this)}_assign(D){this!==D&&(je(this.uid===D.uid,this.auth,"internal-error"),this.displayName=D.displayName,this.photoURL=D.photoURL,this.email=D.email,this.emailVerified=D.emailVerified,this.phoneNumber=D.phoneNumber,this.isAnonymous=D.isAnonymous,this.tenantId=D.tenantId,this.providerData=D.providerData.map(A=>Object.assign({},A)),this.metadata._copy(D.metadata),this.stsTokenManager._assign(D.stsTokenManager))}_clone(D){return new an(Object.assign(Object.assign({},this),{auth:D,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(D){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=D,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(D){this.reloadListener?this.reloadListener(D):this.reloadUserInfo=D}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(D,A=!1){var P=this;return(0,v.Z)(function*(){let K=!1;D.idToken&&D.idToken!==P.stsTokenManager.accessToken&&(P.stsTokenManager.updateFromServerResponse(D),K=!0),A&&(yield uo(P)),yield P.auth._persistUserIfCurrent(P),K&&P.auth._notifyListenersIfCurrent(P)})()}delete(){var D=this;return(0,v.Z)(function*(){const A=yield D.getIdToken();return yield Oi(D,function No(R,D){return Oa.apply(this,arguments)}(D.auth,{idToken:A})),D.stsTokenManager.clearRefreshToken(),D.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(D=>Object.assign({},D)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(D,A){var P,K,te,Ge,Rt,Di,pn,tr;const bs=null!==(P=A.displayName)&&void 0!==P?P:void 0,Kh=null!==(K=A.email)&&void 0!==K?K:void 0,Sc=null!==(te=A.phoneNumber)&&void 0!==te?te:void 0,y0=null!==(Ge=A.photoURL)&&void 0!==Ge?Ge:void 0,Iy=null!==(Rt=A.tenantId)&&void 0!==Rt?Rt:void 0,Mm=null!==(Di=A._redirectEventId)&&void 0!==Di?Di:void 0,kE=null!==(pn=A.createdAt)&&void 0!==pn?pn:void 0,VI=null!==(tr=A.lastLoginAt)&&void 0!==tr?tr:void 0,{uid:b0,emailVerified:Bp,isAnonymous:Ru,providerData:Ay,stsTokenManager:Lm}=A;je(b0&&Lm,D,"internal-error");const Sd=vi.fromJSON(this.name,Lm);je("string"==typeof b0,D,"internal-error"),Zi(bs,D.name),Zi(Kh,D.name),je("boolean"==typeof Bp,D,"internal-error"),je("boolean"==typeof Ru,D,"internal-error"),Zi(Sc,D.name),Zi(y0,D.name),Zi(Iy,D.name),Zi(Mm,D.name),Zi(kE,D.name),Zi(VI,D.name);const Io=new an({uid:b0,auth:D,email:Kh,emailVerified:Bp,displayName:bs,isAnonymous:Ru,photoURL:y0,phoneNumber:Sc,tenantId:Iy,stsTokenManager:Sd,createdAt:kE,lastLoginAt:VI});return Ay&&Array.isArray(Ay)&&(Io.providerData=Ay.map(zI=>Object.assign({},zI))),Mm&&(Io._redirectEventId=Mm),Io}static _fromIdTokenResponse(D,A,P=!1){return(0,v.Z)(function*(){const K=new vi;K.updateFromServerResponse(A);const te=new an({uid:A.localId,auth:D,stsTokenManager:K,isAnonymous:P});return yield uo(te),te})()}}const be=(()=>{class R{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(A,P){var K=this;return(0,v.Z)(function*(){K.storage[A]=P})()}_get(A){var P=this;return(0,v.Z)(function*(){const K=P.storage[A];return void 0===K?null:K})()}_remove(A){var P=this;return(0,v.Z)(function*(){delete P.storage[A]})()}_addListener(A,P){}_removeListener(A,P){}}return R.type="NONE",R})();function fe(R,D,A){return`firebase:${R}:${D}:${A}`}class J{constructor(D,A,P){this.persistence=D,this.auth=A,this.userKey=P;const{config:K,name:te}=this.auth;this.fullUserKey=fe(this.userKey,K.apiKey,te),this.fullPersistenceKey=fe("persistence",K.apiKey,te),this.boundEventHandler=A._onStorageEvent.bind(A),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(D){return this.persistence._set(this.fullUserKey,D.toJSON())}getCurrentUser(){var D=this;return(0,v.Z)(function*(){const A=yield D.persistence._get(D.fullUserKey);return A?an._fromJSON(D.auth,A):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(D){var A=this;return(0,v.Z)(function*(){if(A.persistence===D)return;const P=yield A.getCurrentUser();return yield A.removeCurrentUser(),A.persistence=D,P?A.setCurrentUser(P):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(D,A,P="authUser"){return(0,v.Z)(function*(){if(!A.length)return new J(Be(be),D,P);const K=(yield Promise.all(A.map(function(){var pn=(0,v.Z)(function*(tr){if(yield tr._isAvailable())return tr});return function(tr){return pn.apply(this,arguments)}}()))).filter(pn=>pn);let te=K[0]||Be(be);const Ge=fe(P,D.config.apiKey,D.name);let Rt=null;for(const pn of A)try{const tr=yield pn._get(Ge);if(tr){const bs=an._fromJSON(D,tr);pn!==te&&(Rt=bs),te=pn;break}}catch{}const Di=K.filter(pn=>pn._shouldAllowMigration);return te._shouldAllowMigration&&Di.length?(te=Di[0],Rt&&(yield te._set(Ge,Rt.toJSON())),yield Promise.all(A.map(function(){var pn=(0,v.Z)(function*(tr){if(tr!==te)try{yield tr._remove(Ge)}catch{}});return function(tr){return pn.apply(this,arguments)}}())),new J(te,D,P)):new J(te,D,P)})()}}function Y(R){const D=R.toLowerCase();if(D.includes("opera/")||D.includes("opr/")||D.includes("opios/"))return"Opera";if(et(D))return"IEMobile";if(D.includes("msie")||D.includes("trident/"))return"IE";if(D.includes("edge/"))return"Edge";if(q(D))return"Firefox";if(D.includes("silk/"))return"Silk";if(Kt(D))return"Blackberry";if(ct(D))return"Webos";if(Z(D))return"Safari";if((D.includes("chrome/")||ye(D))&&!D.includes("edge/"))return"Chrome";if(Pt(D))return"Android";{const P=R.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===P?.length)return P[1]}return"Other"}function q(R=(0,ue.z$)()){return/firefox\//i.test(R)}function Z(R=(0,ue.z$)()){const D=R.toLowerCase();return D.includes("safari/")&&!D.includes("chrome/")&&!D.includes("crios/")&&!D.includes("android")}function ye(R=(0,ue.z$)()){return/crios\//i.test(R)}function et(R=(0,ue.z$)()){return/iemobile/i.test(R)}function Pt(R=(0,ue.z$)()){return/android/i.test(R)}function Kt(R=(0,ue.z$)()){return/blackberry/i.test(R)}function ct(R=(0,ue.z$)()){return/webos/i.test(R)}function Dt(R=(0,ue.z$)()){return/iphone|ipad|ipod/i.test(R)||/macintosh/i.test(R)&&/mobile/i.test(R)}function Mi(R=(0,ue.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(R)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(R)}function Ln(R=(0,ue.z$)()){return Dt(R)||Pt(R)||ct(R)||Kt(R)||/windows phone/i.test(R)||et(R)}function ss(R,D=[]){let A;switch(R){case"Browser":A=Y((0,ue.z$)());break;case"Worker":A=`${Y((0,ue.z$)())}-${R}`;break;default:A=R}const P=D.length?D.join(","):"FirebaseCore-web";return`${A}/JsCore/${ee.SDK_VERSION}/${P}`}class Nh{constructor(D){this.auth=D,this.queue=[]}pushCallback(D,A){const P=te=>new Promise((Ge,Rt)=>{try{Ge(D(te))}catch(Di){Rt(Di)}});P.onAbort=A,this.queue.push(P);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(D){var A=this;return(0,v.Z)(function*(){var P;if(A.auth.currentUser===D)return;const K=[];try{for(const te of A.queue)yield te(D),te.onAbort&&K.push(te.onAbort)}catch(te){K.reverse();for(const Ge of K)try{Ge()}catch{}throw A.auth._errorFactory.create("login-blocked",{originalMessage:null===(P=te)||void 0===P?void 0:P.message})}})()}}class Cu{constructor(D,A,P){this.app=D,this.heartbeatServiceProvider=A,this.config=P,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ze(this),this.idTokenSubscription=new ze(this),this.beforeStateQueue=new Nh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ci,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=D.name,this.clientVersion=P.sdkClientVersion}_initializeWithPersistence(D,A){var P=this;return A&&(this._popupRedirectResolver=Be(A)),this._initializationPromise=this.queue((0,v.Z)(function*(){var K,te;if(!P._deleted&&(P.persistenceManager=yield J.create(P,D),!P._deleted)){if(null!==(K=P._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield P._popupRedirectResolver._initialize(P)}catch{}yield P.initializeCurrentUser(A),P.lastNotifiedUid=(null===(te=P.currentUser)||void 0===te?void 0:te.uid)||null,!P._deleted&&(P._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var D=this;return(0,v.Z)(function*(){if(D._deleted)return;const A=yield D.assertedPersistence.getCurrentUser();if(D.currentUser||A){if(D.currentUser&&A&&D.currentUser.uid===A.uid)return D._currentUser._assign(A),void(yield D.currentUser.getIdToken());yield D._updateCurrentUser(A,!0)}})()}initializeCurrentUser(D){var A=this;return(0,v.Z)(function*(){var P;const K=yield A.assertedPersistence.getCurrentUser();let te=K,Ge=!1;if(D&&A.config.authDomain){yield A.getOrInitRedirectPersistenceManager();const Rt=null===(P=A.redirectUser)||void 0===P?void 0:P._redirectEventId,Di=te?._redirectEventId,pn=yield A.tryRedirectSignIn(D);(!Rt||Rt===Di)&&pn?.user&&(te=pn.user,Ge=!0)}if(!te)return A.directlySetCurrentUser(null);if(!te._redirectEventId){if(Ge)try{yield A.beforeStateQueue.runMiddleware(te)}catch(Rt){te=K,A._popupRedirectResolver._overrideRedirectResult(A,()=>Promise.reject(Rt))}return te?A.reloadAndSetCurrentUserOrClear(te):A.directlySetCurrentUser(null)}return je(A._popupRedirectResolver,A,"argument-error"),yield A.getOrInitRedirectPersistenceManager(),A.redirectUser&&A.redirectUser._redirectEventId===te._redirectEventId?A.directlySetCurrentUser(te):A.reloadAndSetCurrentUserOrClear(te)})()}tryRedirectSignIn(D){var A=this;return(0,v.Z)(function*(){let P=null;try{P=yield A._popupRedirectResolver._completeRedirectFn(A,D,!0)}catch{yield A._setRedirectUser(null)}return P})()}reloadAndSetCurrentUserOrClear(D){var A=this;return(0,v.Z)(function*(){var P;try{yield uo(D)}catch(K){if("auth/network-request-failed"!==(null===(P=K)||void 0===P?void 0:P.code))return A.directlySetCurrentUser(null)}return A.directlySetCurrentUser(D)})()}useDeviceLanguage(){this.languageCode=function bn(){if(typeof navigator>"u")return null;const R=navigator;return R.languages&&R.languages[0]||R.language||null}()}_delete(){var D=this;return(0,v.Z)(function*(){D._deleted=!0})()}updateCurrentUser(D){var A=this;return(0,v.Z)(function*(){const P=D?(0,ue.m9)(D):null;return P&&je(P.auth.config.apiKey===A.config.apiKey,A,"invalid-user-token"),A._updateCurrentUser(P&&P._clone(A))})()}_updateCurrentUser(D,A=!1){var P=this;return(0,v.Z)(function*(){if(!P._deleted)return D&&je(P.tenantId===D.tenantId,P,"tenant-id-mismatch"),A||(yield P.beforeStateQueue.runMiddleware(D)),P.queue((0,v.Z)(function*(){yield P.directlySetCurrentUser(D),P.notifyAuthListeners()}))})()}signOut(){var D=this;return(0,v.Z)(function*(){return yield D.beforeStateQueue.runMiddleware(null),(D.redirectPersistenceManager||D._popupRedirectResolver)&&(yield D._setRedirectUser(null)),D._updateCurrentUser(null,!0)})()}setPersistence(D){var A=this;return this.queue((0,v.Z)(function*(){yield A.assertedPersistence.setPersistence(Be(D))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(D){this._errorFactory=new ue.LL("auth","Firebase",D())}onAuthStateChanged(D,A,P){return this.registerStateListener(this.authStateSubscription,D,A,P)}beforeAuthStateChanged(D,A){return this.beforeStateQueue.pushCallback(D,A)}onIdTokenChanged(D,A,P){return this.registerStateListener(this.idTokenSubscription,D,A,P)}toJSON(){var D;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(D=this._currentUser)||void 0===D?void 0:D.toJSON()}}_setRedirectUser(D,A){var P=this;return(0,v.Z)(function*(){const K=yield P.getOrInitRedirectPersistenceManager(A);return null===D?K.removeCurrentUser():K.setCurrentUser(D)})()}getOrInitRedirectPersistenceManager(D){var A=this;return(0,v.Z)(function*(){if(!A.redirectPersistenceManager){const P=D&&Be(D)||A._popupRedirectResolver;je(P,A,"argument-error"),A.redirectPersistenceManager=yield J.create(A,[Be(P._redirectPersistence)],"redirectUser"),A.redirectUser=yield A.redirectPersistenceManager.getCurrentUser()}return A.redirectPersistenceManager})()}_redirectUserForId(D){var A=this;return(0,v.Z)(function*(){var P,K;return A._isInitialized&&(yield A.queue((0,v.Z)(function*(){}))),(null===(P=A._currentUser)||void 0===P?void 0:P._redirectEventId)===D?A._currentUser:(null===(K=A.redirectUser)||void 0===K?void 0:K._redirectEventId)===D?A.redirectUser:null})()}_persistUserIfCurrent(D){var A=this;return(0,v.Z)(function*(){if(D===A.currentUser)return A.queue((0,v.Z)(function*(){return A.directlySetCurrentUser(D)}))})()}_notifyListenersIfCurrent(D){D===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var D,A;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=null!==(A=null===(D=this.currentUser)||void 0===D?void 0:D.uid)&&void 0!==A?A:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(D,A,P,K){if(this._deleted)return()=>{};const te="function"==typeof A?A:A.next.bind(A),Ge=this._isInitialized?Promise.resolve():this._initializationPromise;return je(Ge,this,"internal-error"),Ge.then(()=>te(this.currentUser)),"function"==typeof A?D.addObserver(A,P,K):D.addObserver(A)}directlySetCurrentUser(D){var A=this;return(0,v.Z)(function*(){A.currentUser&&A.currentUser!==D&&A._currentUser._stopProactiveRefresh(),D&&A.isProactiveRefreshEnabled&&D._startProactiveRefresh(),A.currentUser=D,D?yield A.assertedPersistence.setCurrentUser(D):yield A.assertedPersistence.removeCurrentUser()})()}queue(D){return this.operations=this.operations.then(D,D),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(D){!D||this.frameworks.includes(D)||(this.frameworks.push(D),this.frameworks.sort(),this.clientVersion=ss(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var D=this;return(0,v.Z)(function*(){var A;const P={"X-Client-Version":D.clientVersion};D.app.options.appId&&(P["X-Firebase-gmpid"]=D.app.options.appId);const K=yield null===(A=D.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===A?void 0:A.getHeartbeatsHeader();return K&&(P["X-Firebase-Client"]=K),P})()}}function Ki(R){return(0,ue.m9)(R)}class ze{constructor(D){this.auth=D,this.observer=null,this.addObserver=(0,ue.ne)(A=>this.observer=A)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vt(R,D,A){const P=Ki(R);je(P._canInitEmulator,P,"emulator-config-failed"),je(/^https?:\/\//.test(D),P,"invalid-emulator-scheme");const K=!!A?.disableWarnings,te=qt(D),{host:Ge,port:Rt}=function Ni(R){const D=qt(R),A=/(\/\/)?([^?#/]+)/.exec(R.substr(D.length));if(!A)return{host:"",port:null};const P=A[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(P);if(K){const te=K[1];return{host:te,port:Hn(P.substr(te.length+1))}}{const[te,Ge]=P.split(":");return{host:te,port:Hn(Ge)}}}(D);P.config.emulator={url:`${te}//${Ge}${null===Rt?"":`:${Rt}`}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:Ge,port:Rt,protocol:te.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function yr(){function R(){const D=document.createElement("p"),A=D.style;D.innerText="Running in emulator mode. Do not use with production credentials.",A.position="fixed",A.width="100%",A.backgroundColor="#ffffff",A.border=".1em solid #000000",A.color="#b50000",A.bottom="0px",A.left="0px",A.margin="0px",A.zIndex="10000",A.textAlign="center",D.classList.add("firebase-emulator-warning"),document.body.appendChild(D)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",R):R())}()}function qt(R){const D=R.indexOf(":");return D<0?"":R.substr(0,D+1)}function Hn(R){if(!R)return null;const D=Number(R);return isNaN(D)?null:D}class fs{constructor(D,A){this.providerId=D,this.signInMethod=A}toJSON(){return Qe("not implemented")}_getIdTokenResponse(D){return Qe("not implemented")}_linkToIdToken(D,A){return Qe("not implemented")}_getReauthenticationResolver(D){return Qe("not implemented")}}function os(R,D){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:resetPassword",_n(R,D))})).apply(this,arguments)}function Ea(R,D){return Br.apply(this,arguments)}function Br(){return(Br=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:update",D)})).apply(this,arguments)}function BC(R,D){return mp.apply(this,arguments)}function mp(){return(mp=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:update",_n(R,D))})).apply(this,arguments)}function cc(){return(cc=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithPassword",_n(R,D))})).apply(this,arguments)}function wu(R,D){return Su.apply(this,arguments)}function Su(){return(Su=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:sendOobCode",_n(R,D))})).apply(this,arguments)}function Bh(R,D){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,v.Z)(function*(R,D){return wu(R,D)})).apply(this,arguments)}function nm(R,D){return ta.apply(this,arguments)}function ta(){return(ta=(0,v.Z)(function*(R,D){return wu(R,D)})).apply(this,arguments)}function Fa(R,D){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,v.Z)(function*(R,D){return wu(R,D)})).apply(this,arguments)}function rd(R,D){return sd.apply(this,arguments)}function sd(){return(sd=(0,v.Z)(function*(R,D){return wu(R,D)})).apply(this,arguments)}function qf(){return(qf=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithEmailLink",_n(R,D))})).apply(this,arguments)}function yp(){return(yp=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithEmailLink",_n(R,D))})).apply(this,arguments)}class od extends fs{constructor(D,A,P,K=null){super("password",P),this._email=D,this._password=A,this._tenantId=K}static _fromEmailAndPassword(D,A){return new od(D,A,"password")}static _fromEmailAndCode(D,A,P=null){return new od(D,A,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(D){const A="string"==typeof D?JSON.parse(D):D;if(A?.email&&A?.password){if("password"===A.signInMethod)return this._fromEmailAndPassword(A.email,A.password);if("emailLink"===A.signInMethod)return this._fromEmailAndCode(A.email,A.password,A.tenantId)}return null}_getIdTokenResponse(D){var A=this;return(0,v.Z)(function*(){switch(A.signInMethod){case"password":return function vp(R,D){return cc.apply(this,arguments)}(D,{returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function Il(R,D){return qf.apply(this,arguments)}(D,{email:A._email,oobCode:A._password});default:hi(D,"internal-error")}})()}_linkToIdToken(D,A){var P=this;return(0,v.Z)(function*(){switch(P.signInMethod){case"password":return Ea(D,{idToken:A,returnSecureToken:!0,email:P._email,password:P._password});case"emailLink":return function tE(R,D){return yp.apply(this,arguments)}(D,{idToken:A,email:P._email,oobCode:P._password});default:hi(D,"internal-error")}})()}_getReauthenticationResolver(D){return this._getIdTokenResponse(D)}}function Tu(R,D){return Al.apply(this,arguments)}function Al(){return(Al=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithIdp",_n(R,D))})).apply(this,arguments)}class Hh extends fs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(D){const A=new Hh(D.providerId,D.signInMethod);return D.idToken||D.accessToken?(D.idToken&&(A.idToken=D.idToken),D.accessToken&&(A.accessToken=D.accessToken),D.nonce&&!D.pendingToken&&(A.nonce=D.nonce),D.pendingToken&&(A.pendingToken=D.pendingToken)):D.oauthToken&&D.oauthTokenSecret?(A.accessToken=D.oauthToken,A.secret=D.oauthTokenSecret):hi("argument-error"),A}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(D){const A="string"==typeof D?JSON.parse(D):D,{providerId:P,signInMethod:K}=A,te=(0,ht._T)(A,["providerId","signInMethod"]);if(!P||!K)return null;const Ge=new Hh(P,K);return Ge.idToken=te.idToken||void 0,Ge.accessToken=te.accessToken||void 0,Ge.secret=te.secret,Ge.nonce=te.nonce,Ge.pendingToken=te.pendingToken||null,Ge}_getIdTokenResponse(D){return Tu(D,this.buildRequest())}_linkToIdToken(D,A){const P=this.buildRequest();return P.idToken=A,Tu(D,P)}_getReauthenticationResolver(D){const A=this.buildRequest();return A.autoCreate=!1,Tu(D,A)}buildRequest(){const D={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)D.pendingToken=this.pendingToken;else{const A={};this.idToken&&(A.id_token=this.idToken),this.accessToken&&(A.access_token=this.accessToken),this.secret&&(A.oauth_token_secret=this.secret),A.providerId=this.providerId,this.nonce&&!this.pendingToken&&(A.nonce=this.nonce),D.postBody=(0,ue.xO)(A)}return D}}function HC(R,D){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:sendVerificationCode",_n(R,D))})).apply(this,arguments)}function $f(){return($f=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithPhoneNumber",_n(R,D))})).apply(this,arguments)}function VC(){return(VC=(0,v.Z)(function*(R,D){const A=yield ys(R,"POST","/v1/accounts:signInWithPhoneNumber",_n(R,D));if(A.temporaryProof)throw Ms(R,"account-exists-with-different-credential",A);return A})).apply(this,arguments)}const cI={USER_NOT_FOUND:"user-not-found"};function zC(){return(zC=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithPhoneNumber",_n(R,Object.assign(Object.assign({},D),{operation:"REAUTH"})),cI)})).apply(this,arguments)}class bp extends fs{constructor(D){super("phone","phone"),this.params=D}static _fromVerification(D,A){return new bp({verificationId:D,verificationCode:A})}static _fromTokenResponse(D,A){return new bp({phoneNumber:D,temporaryProof:A})}_getIdTokenResponse(D){return function Kf(R,D){return $f.apply(this,arguments)}(D,this._makeVerificationRequest())}_linkToIdToken(D,A){return function nE(R,D){return VC.apply(this,arguments)}(D,Object.assign({idToken:A},this._makeVerificationRequest()))}_getReauthenticationResolver(D){return function Kv(R,D){return zC.apply(this,arguments)}(D,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:D,phoneNumber:A,verificationId:P,verificationCode:K}=this.params;return D&&A?{temporaryProof:D,phoneNumber:A}:{sessionInfo:P,code:K}}toJSON(){const D={providerId:this.providerId};return this.params.phoneNumber&&(D.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(D.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(D.verificationCode=this.params.verificationCode),this.params.verificationId&&(D.verificationId=this.params.verificationId),D}static fromJSON(D){"string"==typeof D&&(D=JSON.parse(D));const{verificationId:A,verificationCode:P,phoneNumber:K,temporaryProof:te}=D;return P||A||K||te?new bp({verificationId:A,verificationCode:P,phoneNumber:K,temporaryProof:te}):null}}class Yf{constructor(D){var A,P,K,te,Ge,Rt;const Di=(0,ue.zd)((0,ue.pd)(D)),pn=null!==(A=Di.apiKey)&&void 0!==A?A:null,tr=null!==(P=Di.oobCode)&&void 0!==P?P:null,bs=function $v(R){switch(R){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=Di.mode)&&void 0!==K?K:null);je(pn&&tr&&bs,"argument-error"),this.apiKey=pn,this.operation=bs,this.code=tr,this.continueUrl=null!==(te=Di.continueUrl)&&void 0!==te?te:null,this.languageCode=null!==(Ge=Di.languageCode)&&void 0!==Ge?Ge:null,this.tenantId=null!==(Rt=Di.tenantId)&&void 0!==Rt?Rt:null}static parseLink(D){const A=function rm(R){const D=(0,ue.zd)((0,ue.pd)(R)).link,A=D?(0,ue.zd)((0,ue.pd)(D)).deep_link_id:null,P=(0,ue.zd)((0,ue.pd)(R)).deep_link_id;return(P?(0,ue.zd)((0,ue.pd)(P)).link:null)||P||A||D||R}(D);try{return new Yf(A)}catch{return null}}}let Yv=(()=>{class R{constructor(){this.providerId=R.PROVIDER_ID}static credential(A,P){return od._fromEmailAndPassword(A,P)}static credentialWithLink(A,P){const K=Yf.parseLink(P);return je(K,"argument-error"),od._fromEmailAndCode(A,K.code,K.tenantId)}}return R.PROVIDER_ID="password",R.EMAIL_PASSWORD_SIGN_IN_METHOD="password",R.EMAIL_LINK_SIGN_IN_METHOD="emailLink",R})();class Ta{constructor(D){this.providerId=D,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(D){this.defaultLanguageCode=D}setCustomParameters(D){return this.customParameters=D,this}getCustomParameters(){return this.customParameters}}class Cp extends Ta{constructor(){super(...arguments),this.scopes=[]}addScope(D){return this.scopes.includes(D)||this.scopes.push(D),this}getScopes(){return[...this.scopes]}}class dc extends Cp{static credentialFromJSON(D){const A="string"==typeof D?JSON.parse(D):D;return je("providerId"in A&&"signInMethod"in A,"argument-error"),Hh._fromParams(A)}credential(D){return this._credential(Object.assign(Object.assign({},D),{nonce:D.rawNonce}))}_credential(D){return je(D.idToken||D.accessToken,"argument-error"),Hh._fromParams(Object.assign(Object.assign({},D),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(D){return dc.oauthCredentialFromTaggedObject(D)}static credentialFromError(D){return dc.oauthCredentialFromTaggedObject(D.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{oauthIdToken:A,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:te,nonce:Ge,providerId:Rt}=D;if(!P&&!K&&!A&&!te||!Rt)return null;try{return new dc(Rt)._credential({idToken:A,accessToken:P,nonce:Ge,pendingToken:te})}catch{return null}}}let Zv=(()=>{class R extends Cp{constructor(){super("facebook.com")}static credential(A){return Hh._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.FACEBOOK_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return R.credentialFromTaggedObject(A)}static credentialFromError(A){return R.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return R.credential(A.oauthAccessToken)}catch{return null}}}return R.FACEBOOK_SIGN_IN_METHOD="facebook.com",R.PROVIDER_ID="facebook.com",R})(),Zf=(()=>{class R extends Cp{constructor(){super("google.com"),this.addScope("profile")}static credential(A,P){return Hh._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GOOGLE_SIGN_IN_METHOD,idToken:A,accessToken:P})}static credentialFromResult(A){return R.credentialFromTaggedObject(A)}static credentialFromError(A){return R.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthIdToken:P,oauthAccessToken:K}=A;if(!P&&!K)return null;try{return R.credential(P,K)}catch{return null}}}return R.GOOGLE_SIGN_IN_METHOD="google.com",R.PROVIDER_ID="google.com",R})(),sm=(()=>{class R extends Cp{constructor(){super("github.com")}static credential(A){return Hh._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.GITHUB_SIGN_IN_METHOD,accessToken:A})}static credentialFromResult(A){return R.credentialFromTaggedObject(A)}static credentialFromError(A){return R.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A||!("oauthAccessToken"in A)||!A.oauthAccessToken)return null;try{return R.credential(A.oauthAccessToken)}catch{return null}}}return R.GITHUB_SIGN_IN_METHOD="github.com",R.PROVIDER_ID="github.com",R})();class xu extends fs{constructor(D,A){super(D,D),this.pendingToken=A}_getIdTokenResponse(D){return Tu(D,this.buildRequest())}_linkToIdToken(D,A){const P=this.buildRequest();return P.idToken=A,Tu(D,P)}_getReauthenticationResolver(D){const A=this.buildRequest();return A.autoCreate=!1,Tu(D,A)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(D){const A="string"==typeof D?JSON.parse(D):D,{providerId:P,signInMethod:K,pendingToken:te}=A;return P&&K&&te&&P===K?new xu(P,te):null}static _create(D,A){return new xu(D,A)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zh extends Ta{constructor(D){je(D.startsWith("saml."),"argument-error"),super(D)}static credentialFromResult(D){return zh.samlCredentialFromTaggedObject(D)}static credentialFromError(D){return zh.samlCredentialFromTaggedObject(D.customData||{})}static credentialFromJSON(D){const A=xu.fromJSON(D);return je(A,"argument-error"),A}static samlCredentialFromTaggedObject({_tokenResponse:D}){if(!D)return null;const{pendingToken:A,providerId:P}=D;if(!A||!P)return null;try{return xu._create(P,A)}catch{return null}}}let om=(()=>{class R extends Cp{constructor(){super("twitter.com")}static credential(A,P){return Hh._fromParams({providerId:R.PROVIDER_ID,signInMethod:R.TWITTER_SIGN_IN_METHOD,oauthToken:A,oauthTokenSecret:P})}static credentialFromResult(A){return R.credentialFromTaggedObject(A)}static credentialFromError(A){return R.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{oauthAccessToken:P,oauthTokenSecret:K}=A;if(!P||!K)return null;try{return R.credential(P,K)}catch{return null}}}return R.TWITTER_SIGN_IN_METHOD="twitter.com",R.PROVIDER_ID="twitter.com",R})();function Na(R,D){return pc.apply(this,arguments)}function pc(){return(pc=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signUp",_n(R,D))})).apply(this,arguments)}class hl{constructor(D){this.user=D.user,this.providerId=D.providerId,this._tokenResponse=D._tokenResponse,this.operationType=D.operationType}static _fromIdTokenResponse(D,A,P,K=!1){return(0,v.Z)(function*(){const te=yield an._fromIdTokenResponse(D,P,K),Ge=Xf(P);return new hl({user:te,providerId:Ge,_tokenResponse:P,operationType:A})})()}static _forOperation(D,A,P){return(0,v.Z)(function*(){yield D._updateTokensIfNecessary(P,!0);const K=Xf(P);return new hl({user:D,providerId:K,_tokenResponse:P,operationType:A})})()}}function Xf(R){return R.providerId?R.providerId:"phoneNumber"in R?"phone":null}function pI(R){return rE.apply(this,arguments)}function rE(){return(rE=(0,v.Z)(function*(R){var D;const A=Ki(R);if(yield A._initializationPromise,null!==(D=A.currentUser)&&void 0!==D&&D.isAnonymous)return new hl({user:A.currentUser,providerId:null,operationType:"signIn"});const P=yield Na(A,{returnSecureToken:!0}),K=yield hl._fromIdTokenResponse(A,"signIn",P,!0);return yield A._updateCurrentUser(K.user),K})).apply(this,arguments)}class Ws extends ue.ZR{constructor(D,A,P,K){var te;super(A.code,A.message),this.operationType=P,this.user=K,Object.setPrototypeOf(this,Ws.prototype),this.customData={appName:D.name,tenantId:null!==(te=D.tenantId)&&void 0!==te?te:void 0,_serverResponse:A.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(D,A,P,K){return new Ws(D,A,P,K)}}function Qv(R,D,A,P){return("reauthenticate"===D?A._getReauthenticationResolver(R):A._getIdTokenResponse(R)).catch(te=>{throw"auth/multi-factor-auth-required"===te.code?Ws._fromErrorAndOperation(R,te,D,P):te})}function ad(R){return new Set(R.map(({providerId:D})=>D).filter(D=>!!D))}function ld(R,D){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,v.Z)(function*(R,D){const A=(0,ue.m9)(R);yield Du(!0,A,D);const{providerUserInfo:P}=yield fi(A.auth,{idToken:yield A.getIdToken(),deleteProvider:[D]}),K=ad(P||[]);return A.providerData=A.providerData.filter(te=>K.has(te.providerId)),K.has("phone")||(A.phoneNumber=null),yield A.auth._persistUserIfCurrent(A),A})).apply(this,arguments)}function Jv(R,D){return _l.apply(this,arguments)}function _l(){return(_l=(0,v.Z)(function*(R,D,A=!1){const P=yield Oi(R,D._linkToIdToken(R.auth,yield R.getIdToken()),A);return hl._forOperation(R,"link",P)})).apply(this,arguments)}function Du(R,D,A){return ar.apply(this,arguments)}function ar(){return(ar=(0,v.Z)(function*(R,D,A){yield uo(D);const K=!1===R?"provider-already-linked":"no-such-provider";je(ad(D.providerData).has(A)===R,D.auth,K)})).apply(this,arguments)}function jC(R,D){return fc.apply(this,arguments)}function fc(){return(fc=(0,v.Z)(function*(R,D,A=!1){var P;const{auth:K}=R,te="reauthenticate";try{const Ge=yield Oi(R,Qv(K,te,D,R),A);je(Ge.idToken,K,"internal-error");const Rt=Fi(Ge.idToken);je(Rt,K,"internal-error");const{sub:Di}=Rt;return je(R.uid===Di,K,"user-mismatch"),hl._forOperation(R,te,Ge)}catch(Ge){throw"auth/user-not-found"===(null===(P=Ge)||void 0===P?void 0:P.code)&&hi(K,"user-mismatch"),Ge}})).apply(this,arguments)}function ey(R,D){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,v.Z)(function*(R,D,A=!1){const P="signIn",K=yield Qv(R,P,D),te=yield hl._fromIdTokenResponse(R,P,K);return A||(yield R._updateCurrentUser(te.user)),te})).apply(this,arguments)}function wp(R,D){return Qf.apply(this,arguments)}function Qf(){return(Qf=(0,v.Z)(function*(R,D){return ey(Ki(R),D)})).apply(this,arguments)}function X(R,D){return se.apply(this,arguments)}function se(){return(se=(0,v.Z)(function*(R,D){const A=(0,ue.m9)(R);return yield Du(!1,A,D.providerId),Jv(A,D)})).apply(this,arguments)}function Ie(R,D){return rt.apply(this,arguments)}function rt(){return(rt=(0,v.Z)(function*(R,D){return jC((0,ue.m9)(R),D)})).apply(this,arguments)}function Wt(R,D){return ai.apply(this,arguments)}function ai(){return(ai=(0,v.Z)(function*(R,D){return ys(R,"POST","/v1/accounts:signInWithCustomToken",_n(R,D))})).apply(this,arguments)}function qi(R,D){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,v.Z)(function*(R,D){const A=Ki(R),P=yield Wt(A,{token:D,returnSecureToken:!0}),K=yield hl._fromIdTokenResponse(A,"signIn",P);return yield A._updateCurrentUser(K.user),K})).apply(this,arguments)}class eo{constructor(D,A){this.factorId=D,this.uid=A.mfaEnrollmentId,this.enrollmentTime=new Date(A.enrolledAt).toUTCString(),this.displayName=A.displayName}static _fromServerResponse(D,A){return"phoneInfo"in A?It._fromServerResponse(D,A):hi(D,"internal-error")}}class It extends eo{constructor(D){super("phone",D),this.phoneNumber=D.phoneInfo}static _fromServerResponse(D,A){return new It(A)}}function Xi(R,D,A){var P;je((null===(P=A.url)||void 0===P?void 0:P.length)>0,R,"invalid-continue-uri"),je(typeof A.dynamicLinkDomain>"u"||A.dynamicLinkDomain.length>0,R,"invalid-dynamic-link-domain"),D.continueUrl=A.url,D.dynamicLinkDomain=A.dynamicLinkDomain,D.canHandleCodeInApp=A.handleCodeInApp,A.iOS&&(je(A.iOS.bundleId.length>0,R,"missing-ios-bundle-id"),D.iOSBundleId=A.iOS.bundleId),A.android&&(je(A.android.packageName.length>0,R,"missing-android-pkg-name"),D.androidInstallApp=A.android.installApp,D.androidMinimumVersionCode=A.android.minimumVersion,D.androidPackageName=A.android.packageName)}function On(R,D,A){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R),K={requestType:"PASSWORD_RESET",email:D};A&&Xi(P,K,A),yield nm(P,K)})).apply(this,arguments)}function to(R,D,A){return gc.apply(this,arguments)}function gc(){return(gc=(0,v.Z)(function*(R,D,A){yield os((0,ue.m9)(R),{oobCode:D,newPassword:A})})).apply(this,arguments)}function Iu(R,D){return ia.apply(this,arguments)}function ia(){return(ia=(0,v.Z)(function*(R,D){yield BC((0,ue.m9)(R),{oobCode:D})})).apply(this,arguments)}function am(R,D){return hd.apply(this,arguments)}function hd(){return(hd=(0,v.Z)(function*(R,D){const A=(0,ue.m9)(R),P=yield os(A,{oobCode:D}),K=P.requestType;switch(je(K,A,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":je(P.newEmail,A,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":je(P.mfaInfo,A,"internal-error");default:je(P.email,A,"internal-error")}let te=null;return P.mfaInfo&&(te=eo._fromServerResponse(Ki(A),P.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.newEmail:P.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===P.requestType?P.email:P.newEmail)||null,multiFactorInfo:te},operation:K}})).apply(this,arguments)}function Sp(R,D){return jh.apply(this,arguments)}function jh(){return(jh=(0,v.Z)(function*(R,D){const{data:A}=yield am((0,ue.m9)(R),D);return A.email})).apply(this,arguments)}function Ep(R,D,A){return mc.apply(this,arguments)}function mc(){return(mc=(0,v.Z)(function*(R,D,A){const P=Ki(R),K=yield Na(P,{returnSecureToken:!0,email:D,password:A}),te=yield hl._fromIdTokenResponse(P,"signIn",K);return yield P._updateCurrentUser(te.user),te})).apply(this,arguments)}function na(R,D,A){return wp((0,ue.m9)(R),Yv.credential(D,A))}function Au(R,D,A){return lm.apply(this,arguments)}function lm(){return(lm=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R),K={requestType:"EMAIL_SIGNIN",email:D};je(A.handleCodeInApp,P,"argument-error"),A&&Xi(P,K,A),yield Fa(P,K)})).apply(this,arguments)}function hm(R,D){return"EMAIL_SIGNIN"===Yf.parseLink(D)?.operation}function ud(R,D,A){return sE.apply(this,arguments)}function sE(){return(sE=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R),K=Yv.credentialWithLink(D,A||zt());return je(K._tenantId===(P.tenantId||null),P,"tenant-id-mismatch"),wp(P,K)})).apply(this,arguments)}function fI(R,D){return oE.apply(this,arguments)}function oE(){return(oE=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:createAuthUri",_n(R,D))})).apply(this,arguments)}function tP(R,D){return ty.apply(this,arguments)}function ty(){return(ty=(0,v.Z)(function*(R,D){const P={identifier:D,continueUri:Ht()?zt():"http://localhost"},{signinMethods:K}=yield fI((0,ue.m9)(R),P);return K||[]})).apply(this,arguments)}function UC(R,D){return WC.apply(this,arguments)}function WC(){return(WC=(0,v.Z)(function*(R,D){const A=(0,ue.m9)(R),K={requestType:"VERIFY_EMAIL",idToken:yield R.getIdToken()};D&&Xi(A.auth,K,D);const{email:te}=yield Bh(A.auth,K);te!==R.email&&(yield R.reload())})).apply(this,arguments)}function qC(R,D,A){return GC.apply(this,arguments)}function GC(){return(GC=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R),te={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield R.getIdToken(),newEmail:D};A&&Xi(P.auth,te,A);const{email:Ge}=yield rd(P.auth,te);Ge!==R.email&&(yield R.reload())})).apply(this,arguments)}function gI(R,D){return iy.apply(this,arguments)}function iy(){return(iy=(0,v.Z)(function*(R,D){return rn(R,"POST","/v1/accounts:update",D)})).apply(this,arguments)}function mI(R,D){return KC.apply(this,arguments)}function KC(){return(KC=(0,v.Z)(function*(R,{displayName:D,photoURL:A}){if(void 0===D&&void 0===A)return;const P=(0,ue.m9)(R),te={idToken:yield P.getIdToken(),displayName:D,photoUrl:A,returnSecureToken:!0},Ge=yield Oi(P,gI(P.auth,te));P.displayName=Ge.displayName||null,P.photoURL=Ge.photoUrl||null;const Rt=P.providerData.find(({providerId:Di})=>"password"===Di);Rt&&(Rt.displayName=P.displayName,Rt.photoURL=P.photoURL),yield P._updateTokensIfNecessary(Ge)})).apply(this,arguments)}function vI(R,D){return Jf((0,ue.m9)(R),D,null)}function aE(R,D){return Jf((0,ue.m9)(R),null,D)}function Jf(R,D,A){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,v.Z)(function*(R,D,A){const{auth:P}=R,te={idToken:yield R.getIdToken(),returnSecureToken:!0};D&&(te.email=D),A&&(te.password=A);const Ge=yield Oi(R,Ea(P,te));yield R._updateTokensIfNecessary(Ge,!0)})).apply(this,arguments)}class io{constructor(D,A,P={}){this.isNewUser=D,this.providerId=A,this.profile=P}}class vc extends io{constructor(D,A,P,K){super(D,A,P),this.username=K}}class no extends io{constructor(D,A){super(D,"facebook.com",A)}}class bI extends vc{constructor(D,A){super(D,"github.com",A,"string"==typeof A?.login?A?.login:null)}}class CI extends io{constructor(D,A){super(D,"google.com",A)}}class wI extends vc{constructor(D,A,P){super(D,"twitter.com",A,P)}}function SI(R){const{user:D,_tokenResponse:A}=R;return D.isAnonymous&&!A?{providerId:null,isNewUser:!1,profile:null}:function yI(R){var D,A;if(!R)return null;const{providerId:P}=R,K=R.rawUserInfo?JSON.parse(R.rawUserInfo):{},te=R.isNewUser||"identitytoolkit#SignupNewUserResponse"===R.kind;if(!P&&R?.idToken){const Ge=null===(A=null===(D=Fi(R.idToken))||void 0===D?void 0:D.firebase)||void 0===A?void 0:A.sign_in_provider;if(Ge)return new io(te,"anonymous"!==Ge&&"custom"!==Ge?Ge:null)}if(!P)return null;switch(P){case"facebook.com":return new no(te,K);case"github.com":return new bI(te,K);case"google.com":return new CI(te,K);case"twitter.com":return new wI(te,K,R.screenName||null);case"custom":case"anonymous":return new io(te,null);default:return new io(te,P,K)}}(A)}function cm(R,D,A,P){return(0,ue.m9)(R).onAuthStateChanged(D,A,P)}class Eh{constructor(D,A,P){this.type=D,this.credential=A,this.auth=P}static _fromIdtoken(D,A){return new Eh("enroll",D,A)}static _fromMfaPendingCredential(D){return new Eh("signin",D)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(D){var A,P;if(D?.multiFactorSession){if(null!==(A=D.multiFactorSession)&&void 0!==A&&A.pendingCredential)return Eh._fromMfaPendingCredential(D.multiFactorSession.pendingCredential);if(null!==(P=D.multiFactorSession)&&void 0!==P&&P.idToken)return Eh._fromIdtoken(D.multiFactorSession.idToken)}return null}}class XC{constructor(D,A,P){this.session=D,this.hints=A,this.signInResolver=P}static _fromError(D,A){const P=Ki(D),K=A.customData._serverResponse,te=(K.mfaInfo||[]).map(Rt=>eo._fromServerResponse(P,Rt));je(K.mfaPendingCredential,P,"internal-error");const Ge=Eh._fromMfaPendingCredential(K.mfaPendingCredential);return new XC(Ge,te,function(){var Rt=(0,v.Z)(function*(Di){const pn=yield Di._process(P,Ge);delete K.mfaInfo,delete K.mfaPendingCredential;const tr=Object.assign(Object.assign({},K),{idToken:pn.idToken,refreshToken:pn.refreshToken});switch(A.operationType){case"signIn":const bs=yield hl._fromIdTokenResponse(P,A.operationType,tr);return yield P._updateCurrentUser(bs.user),bs;case"reauthenticate":return je(A.user,P,"internal-error"),hl._forOperation(A.user,A.operationType,tr);default:hi(P,"internal-error")}});return function(Di){return Rt.apply(this,arguments)}}())}resolveSignIn(D){var A=this;return(0,v.Z)(function*(){return A.signInResolver(D)})()}}function EI(R,D){var A;const P=(0,ue.m9)(R),K=D;return je(D.customData.operationType,P,"argument-error"),je(null===(A=K.customData._serverResponse)||void 0===A?void 0:A.mfaPendingCredential,P,"argument-error"),XC._fromError(P,K)}function dm(R,D){return rn(R,"POST","/v2/accounts/mfaEnrollment:start",_n(R,D))}class sy{constructor(D){this.user=D,this.enrolledFactors=[],D._onReload(A=>{A.mfaInfo&&(this.enrolledFactors=A.mfaInfo.map(P=>eo._fromServerResponse(D.auth,P)))})}static _fromUser(D){return new sy(D)}getSession(){var D=this;return(0,v.Z)(function*(){return Eh._fromIdtoken(yield D.user.getIdToken(),D.user.auth)})()}enroll(D,A){var P=this;return(0,v.Z)(function*(){const K=D,te=yield P.getSession(),Ge=yield Oi(P.user,K._process(P.user.auth,te,A));return yield P.user._updateTokensIfNecessary(Ge),P.user.reload()})()}unenroll(D){var A=this;return(0,v.Z)(function*(){var P;const K="string"==typeof D?D:D.uid,te=yield A.user.getIdToken(),Ge=yield Oi(A.user,function ry(R,D){return rn(R,"POST","/v2/accounts/mfaEnrollment:withdraw",_n(R,D))}(A.user.auth,{idToken:te,mfaEnrollmentId:K}));A.enrolledFactors=A.enrolledFactors.filter(({uid:Rt})=>Rt!==K),yield A.user._updateTokensIfNecessary(Ge);try{yield A.user.reload()}catch(Rt){if("auth/user-token-expired"!==(null===(P=Rt)||void 0===P?void 0:P.code))throw Rt}})()}}const TI=new WeakMap;function hE(R){const D=(0,ue.m9)(R);return TI.has(D)||TI.set(D,sy._fromUser(D)),TI.get(D)}const yc="__sak";class JC{constructor(D,A){this.storageRetriever=D,this.type=A}_isAvailable(){try{return this.storage?(this.storage.setItem(yc,"1"),this.storage.removeItem(yc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(D,A){return this.storage.setItem(D,JSON.stringify(A)),Promise.resolve()}_get(D){const A=this.storage.getItem(D);return Promise.resolve(A?JSON.parse(A):null)}_remove(D){return this.storage.removeItem(D),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dp=(()=>{class R extends JC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(A,P)=>this.onStorageEvent(A,P),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function e0(){const R=(0,ue.z$)();return Z(R)||Dt(R)}()&&function ll(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ln(),this._shouldAllowMigration=!0}forAllChangedKeys(A){for(const P of Object.keys(this.listeners)){const K=this.storage.getItem(P),te=this.localCache[P];K!==te&&A(P,te,K)}}onStorageEvent(A,P=!1){if(!A.key)return void this.forAllChangedKeys((Rt,Di,pn)=>{this.notifyListeners(Rt,pn)});const K=A.key;if(P?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Rt=this.storage.getItem(K);if(A.newValue!==Rt)null!==A.newValue?this.storage.setItem(K,A.newValue):this.storage.removeItem(K);else if(this.localCache[K]===A.newValue&&!P)return}const te=()=>{const Rt=this.storage.getItem(K);!P&&this.localCache[K]===Rt||this.notifyListeners(K,Rt)},Ge=this.storage.getItem(K);!function un(){return(0,ue.w1)()&&10===document.documentMode}()||Ge===A.newValue||A.newValue===A.oldValue?te():setTimeout(te,10)}notifyListeners(A,P){this.localCache[A]=P;const K=this.listeners[A];if(K)for(const te of Array.from(K))te(P&&JSON.parse(P))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((A,P,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:A,oldValue:P,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(A,P){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[A]||(this.listeners[A]=new Set,this.localCache[A]=this.storage.getItem(A)),this.listeners[A].add(P)}_removeListener(A,P){this.listeners[A]&&(this.listeners[A].delete(P),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(A,P){var K=()=>super._set,te=this;return(0,v.Z)(function*(){yield K().call(te,A,P),te.localCache[A]=JSON.stringify(P)})()}_get(A){var P=()=>super._get,K=this;return(0,v.Z)(function*(){const te=yield P().call(K,A);return K.localCache[A]=JSON.stringify(te),te})()}_remove(A){var P=()=>super._remove,K=this;return(0,v.Z)(function*(){yield P().call(K,A),delete K.localCache[A]})()}}return R.type="LOCAL",R})(),cd=(()=>{class R extends JC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(A,P){}_removeListener(A,P){}}return R.type="SESSION",R})();let oy=(()=>{class R{constructor(A){this.eventTarget=A,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(A){const P=this.receivers.find(te=>te.isListeningto(A));if(P)return P;const K=new R(A);return this.receivers.push(K),K}isListeningto(A){return this.eventTarget===A}handleEvent(A){var P=this;return(0,v.Z)(function*(){const K=A,{eventId:te,eventType:Ge,data:Rt}=K.data,Di=P.handlersMap[Ge];if(!Di?.size)return;K.ports[0].postMessage({status:"ack",eventId:te,eventType:Ge});const pn=Array.from(Di).map(function(){var bs=(0,v.Z)(function*(Kh){return Kh(K.origin,Rt)});return function(Kh){return bs.apply(this,arguments)}}()),tr=yield function t0(R){return Promise.all(R.map(function(){var D=(0,v.Z)(function*(A){try{return{fulfilled:!0,value:yield A}}catch(P){return{fulfilled:!1,reason:P}}});return function(A){return D.apply(this,arguments)}}()))}(pn);K.ports[0].postMessage({status:"done",eventId:te,eventType:Ge,response:tr})})()}_subscribe(A,P){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[A]||(this.handlersMap[A]=new Set),this.handlersMap[A].add(P)}_unsubscribe(A,P){this.handlersMap[A]&&P&&this.handlersMap[A].delete(P),(!P||0===this.handlersMap[A].size)&&delete this.handlersMap[A],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return R.receivers=[],R})();function eg(R="",D=10){let A="";for(let P=0;P<D;P++)A+=Math.floor(10*Math.random());return R+A}class II{constructor(D){this.target=D,this.handlers=new Set}removeMessageHandler(D){D.messageChannel&&(D.messageChannel.port1.removeEventListener("message",D.onMessage),D.messageChannel.port1.close()),this.handlers.delete(D)}_send(D,A,P=50){var K=this;return(0,v.Z)(function*(){const te=typeof MessageChannel<"u"?new MessageChannel:null;if(!te)throw new Error("connection_unavailable");let Ge,Rt;return new Promise((Di,pn)=>{const tr=eg("",20);te.port1.start();const bs=setTimeout(()=>{pn(new Error("unsupported_event"))},P);Rt={messageChannel:te,onMessage(Kh){const Sc=Kh;if(Sc.data.eventId===tr)switch(Sc.data.status){case"ack":clearTimeout(bs),Ge=setTimeout(()=>{pn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ge),Di(Sc.data.response);break;default:clearTimeout(bs),clearTimeout(Ge),pn(new Error("invalid_response"))}}},K.handlers.add(Rt),te.port1.addEventListener("message",Rt.onMessage),K.target.postMessage({eventType:D,eventId:tr,data:A},[te.port2])}).finally(()=>{Rt&&K.removeMessageHandler(Rt)})})()}}function ra(){return window}function Wh(){return typeof ra().WorkerGlobalScope<"u"&&"function"==typeof ra().importScripts}function Ip(){return(Ip=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const fm="firebaseLocalStorageDb",mm="firebaseLocalStorage",ly="fbase_key";class tg{constructor(D){this.request=D}toPromise(){return new Promise((D,A)=>{this.request.addEventListener("success",()=>{D(this.request.result)}),this.request.addEventListener("error",()=>{A(this.request.error)})})}}function hy(R,D){return R.transaction([mm],D?"readwrite":"readonly").objectStore(mm)}function pE(){const R=indexedDB.open(fm,1);return new Promise((D,A)=>{R.addEventListener("error",()=>{A(R.error)}),R.addEventListener("upgradeneeded",()=>{const P=R.result;try{P.createObjectStore(mm,{keyPath:ly})}catch(K){A(K)}}),R.addEventListener("success",(0,v.Z)(function*(){const P=R.result;P.objectStoreNames.contains(mm)?D(P):(P.close(),yield function dE(){const R=indexedDB.deleteDatabase(fm);return new tg(R).toPromise()}(),D(yield pE()))}))})}function vm(R,D,A){return dd.apply(this,arguments)}function dd(){return(dd=(0,v.Z)(function*(R,D,A){const P=hy(R,!0).put({[ly]:D,value:A});return new tg(P).toPromise()})).apply(this,arguments)}function uy(){return(uy=(0,v.Z)(function*(R,D){const A=hy(R,!1).get(D),P=yield new tg(A).toPromise();return void 0===P?null:P.value})).apply(this,arguments)}function fE(R,D){const A=hy(R,!0).delete(D);return new tg(A).toPromise()}const cy=(()=>{class R{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var A=this;return(0,v.Z)(function*(){return A.db||(A.db=yield pE()),A.db})()}_withRetries(A){var P=this;return(0,v.Z)(function*(){let K=0;for(;;)try{const te=yield P._openDb();return yield A(te)}catch(te){if(K++>3)throw te;P.db&&(P.db.close(),P.db=void 0)}})()}initializeServiceWorkerMessaging(){var A=this;return(0,v.Z)(function*(){return Wh()?A.initializeReceiver():A.initializeSender()})()}initializeReceiver(){var A=this;return(0,v.Z)(function*(){A.receiver=oy._getInstance(function ay(){return Wh()?self:null}()),A.receiver._subscribe("keyChanged",function(){var P=(0,v.Z)(function*(K,te){return{keyProcessed:(yield A._poll()).includes(te.key)}});return function(K,te){return P.apply(this,arguments)}}()),A.receiver._subscribe("ping",function(){var P=(0,v.Z)(function*(K,te){return["keyChanged"]});return function(K,te){return P.apply(this,arguments)}}())})()}initializeSender(){var A=this;return(0,v.Z)(function*(){var P,K;if(A.activeServiceWorker=yield function AI(){return Ip.apply(this,arguments)}(),!A.activeServiceWorker)return;A.sender=new II(A.activeServiceWorker);const te=yield A.sender._send("ping",{},800);!te||(null===(P=te[0])||void 0===P?void 0:P.fulfilled)&&(null===(K=te[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(A.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(A){var P=this;return(0,v.Z)(function*(){if(P.sender&&P.activeServiceWorker&&function n0(){var R;return(null===(R=navigator?.serviceWorker)||void 0===R?void 0:R.controller)||null}()===P.activeServiceWorker)try{yield P.sender._send("keyChanged",{key:A},P.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const A=yield pE();return yield vm(A,yc,"1"),yield fE(A,yc),!0}catch{}return!1})()}_withPendingWrite(A){var P=this;return(0,v.Z)(function*(){P.pendingWrites++;try{yield A()}finally{P.pendingWrites--}})()}_set(A,P){var K=this;return(0,v.Z)(function*(){return K._withPendingWrite((0,v.Z)(function*(){return yield K._withRetries(te=>vm(te,A,P)),K.localCache[A]=P,K.notifyServiceWorker(A)}))})()}_get(A){var P=this;return(0,v.Z)(function*(){const K=yield P._withRetries(te=>function _I(R,D){return uy.apply(this,arguments)}(te,A));return P.localCache[A]=K,K})()}_remove(A){var P=this;return(0,v.Z)(function*(){return P._withPendingWrite((0,v.Z)(function*(){return yield P._withRetries(K=>fE(K,A)),delete P.localCache[A],P.notifyServiceWorker(A)}))})()}_poll(){var A=this;return(0,v.Z)(function*(){const P=yield A._withRetries(Ge=>{const Rt=hy(Ge,!1).getAll();return new tg(Rt).toPromise()});if(!P)return[];if(0!==A.pendingWrites)return[];const K=[],te=new Set;for(const{fbase_key:Ge,value:Rt}of P)te.add(Ge),JSON.stringify(A.localCache[Ge])!==JSON.stringify(Rt)&&(A.notifyListeners(Ge,Rt),K.push(Ge));for(const Ge of Object.keys(A.localCache))A.localCache[Ge]&&!te.has(Ge)&&(A.notifyListeners(Ge,null),K.push(Ge));return K})()}notifyListeners(A,P){this.localCache[A]=P;const K=this.listeners[A];if(K)for(const te of Array.from(K))te(P)}startPolling(){var A=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return A._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(A,P){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[A]||(this.listeners[A]=new Set,this._get(A)),this.listeners[A].add(P)}_removeListener(A,P){this.listeners[A]&&(this.listeners[A].delete(P),0===this.listeners[A].size&&delete this.listeners[A]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return R.type="LOCAL",R})();function kI(R,D){return rn(R,"POST","/v2/accounts/mfaSignIn:start",_n(R,D))}function Ap(){return(Ap=(0,v.Z)(function*(R){return(yield rn(R,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ig(R){return new Promise((D,A)=>{const P=document.createElement("script");P.setAttribute("src",R),P.onload=D,P.onerror=K=>{const te=Ot("internal-error");te.customData=K,A(te)},P.type="text/javascript",P.charset="UTF-8",function bm(){var R,D;return null!==(D=null===(R=document.getElementsByTagName("head"))||void 0===R?void 0:R[0])&&void 0!==D?D:document}().appendChild(P)})}function r0(R){return`__${R}${Math.floor(1e6*Math.random())}`}const vE=1e12;class iP{constructor(D){this.auth=D,this.counter=vE,this._widgets=new Map}render(D,A){const P=this.counter;return this._widgets.set(P,new As(D,this.auth.name,A||{})),this.counter++,P}reset(D){var A;const P=D||vE;null===(A=this._widgets.get(P))||void 0===A||A.delete(),this._widgets.delete(P)}getResponse(D){var A;return(null===(A=this._widgets.get(D||vE))||void 0===A?void 0:A.getResponse())||""}execute(D){var A=this;return(0,v.Z)(function*(){var P;return null===(P=A._widgets.get(D||vE))||void 0===P||P.execute(),""})()}}class As{constructor(D,A,P){this.params=P,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof D?document.getElementById(D):D;je(K,"argument-error",{appName:A}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function nP(R){const D=[],A="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let P=0;P<R;P++)D.push(A.charAt(Math.floor(Math.random()*A.length)));return D.join("")}(50);const{callback:D,"expired-callback":A}=this.params;if(D)try{D(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,A)try{A()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const RI=r0("rcb"),_j=new ti(3e4,6e4);class Rj{constructor(){var D;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(D=ra().grecaptcha)||void 0===D||!D.render)}load(D,A=""){return je(function Mj(R){return R.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(R)}(A),D,"argument-error"),this.shouldResolveImmediately(A)?Promise.resolve(ra().grecaptcha):new Promise((P,K)=>{const te=ra().setTimeout(()=>{K(Ot(D,"network-request-failed"))},_j.get());ra()[RI]=()=>{ra().clearTimeout(te),delete ra()[RI];const Rt=ra().grecaptcha;if(!Rt)return void K(Ot(D,"internal-error"));const Di=Rt.render;Rt.render=(pn,tr)=>{const bs=Di(pn,tr);return this.counter++,bs},this.hostLanguage=A,P(Rt)},ig(`https://www.google.com/recaptcha/api.js??${(0,ue.xO)({onload:RI,render:"explicit",hl:A})}`).catch(()=>{clearTimeout(te),K(Ot(D,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(D){var A;return!(null===(A=ra().grecaptcha)||void 0===A||!A.render)&&(D===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Lj{load(D){return(0,v.Z)(function*(){return new iP(D)})()}clearedOneInstance(){}}const wm="recaptcha",Oj={theme:"light",type:"image"};class rP{constructor(D,A=Object.assign({},Oj),P){this.parameters=A,this.type=wm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ki(P),this.isInvisible="invisible"===this.parameters.size,je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof D?document.getElementById(D):D;je(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Lj:new Rj,this.validateStartingState()}verify(){var D=this;return(0,v.Z)(function*(){D.assertNotDestroyed();const A=yield D.render(),P=D.getAssertedRecaptcha();return P.getResponse(A)||new Promise(te=>{const Ge=Rt=>{!Rt||(D.tokenChangeListeners.delete(Ge),te(Rt))};D.tokenChangeListeners.add(Ge),D.isInvisible&&P.execute(A)})})()}render(){try{this.assertNotDestroyed()}catch(D){return Promise.reject(D)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(D=>{throw this.renderPromise=null,D})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(D=>{this.container.removeChild(D)})}validateStartingState(){je(!this.parameters.sitekey,this.auth,"argument-error"),je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),je(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(D){return A=>{if(this.tokenChangeListeners.forEach(P=>P(A)),"function"==typeof D)D(A);else if("string"==typeof D){const P=ra()[D];"function"==typeof P&&P(A)}}}assertNotDestroyed(){je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var D=this;return(0,v.Z)(function*(){if(yield D.init(),!D.widgetId){let A=D.container;if(!D.isInvisible){const P=document.createElement("div");A.appendChild(P),A=P}D.widgetId=D.getAssertedRecaptcha().render(A,D.parameters)}return D.widgetId})()}init(){var D=this;return(0,v.Z)(function*(){je(Ht()&&!Wh(),D.auth,"internal-error"),yield function xa(){let R=null;return new Promise(D=>{"complete"!==document.readyState?(R=()=>D(),window.addEventListener("load",R)):D()}).catch(D=>{throw R&&window.removeEventListener("load",R),D})}(),D.recaptcha=yield D._recaptchaLoader.load(D.auth,D.auth.languageCode||void 0);const A=yield function py(R){return Ap.apply(this,arguments)}(D.auth);je(A,D.auth,"internal-error"),D.parameters.sitekey=A})()}getAssertedRecaptcha(){return je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Hr{constructor(D,A){this.verificationId=D,this.onConfirmation=A}confirm(D){const A=bp._fromVerification(this.verificationId,D);return this.onConfirmation(A)}}function Za(R,D,A){return yE.apply(this,arguments)}function yE(){return(yE=(0,v.Z)(function*(R,D,A){const P=Ki(R),K=yield _p(P,D,(0,ue.m9)(A));return new Hr(K,te=>wp(P,te))})).apply(this,arguments)}function MI(R,D,A){return ul.apply(this,arguments)}function ul(){return(ul=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R);yield Du(!1,P,"phone");const K=yield _p(P.auth,D,(0,ue.m9)(A));return new Hr(K,te=>X(P,te))})).apply(this,arguments)}function bc(R,D,A){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R),K=yield _p(P.auth,D,(0,ue.m9)(A));return new Hr(K,te=>Ie(P,te))})).apply(this,arguments)}function _p(R,D,A){return qh.apply(this,arguments)}function qh(){return(qh=(0,v.Z)(function*(R,D,A){var P;const K=yield A.verify();try{let te;if(je("string"==typeof K,R,"argument-error"),je(A.type===wm,R,"argument-error"),te="string"==typeof D?{phoneNumber:D}:D,"session"in te){const Ge=te.session;if("phoneNumber"in te)return je("enroll"===Ge.type,R,"internal-error"),(yield dm(R,{idToken:Ge.credential,phoneEnrollmentInfo:{phoneNumber:te.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{je("signin"===Ge.type,R,"internal-error");const Rt=(null===(P=te.multiFactorHint)||void 0===P?void 0:P.uid)||te.multiFactorUid;return je(Rt,R,"missing-multi-factor-info"),(yield kI(R,{mfaPendingCredential:Ge.credential,mfaEnrollmentId:Rt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ge}=yield HC(R,{phoneNumber:te.phoneNumber,recaptchaToken:K});return Ge}}finally{A._reset()}})).apply(this,arguments)}function fd(R,D){return co.apply(this,arguments)}function co(){return(co=(0,v.Z)(function*(R,D){yield Jv((0,ue.m9)(R),D)})).apply(this,arguments)}let en=(()=>{class R{constructor(A){this.providerId=R.PROVIDER_ID,this.auth=Ki(A)}verifyPhoneNumber(A,P){return _p(this.auth,A,(0,ue.m9)(P))}static credential(A,P){return bp._fromVerification(A,P)}static credentialFromResult(A){return R.credentialFromTaggedObject(A)}static credentialFromError(A){return R.credentialFromTaggedObject(A.customData||{})}static credentialFromTaggedObject({_tokenResponse:A}){if(!A)return null;const{phoneNumber:P,temporaryProof:K}=A;return P&&K?bp._fromTokenResponse(P,K):null}}return R.PROVIDER_ID="phone",R.PHONE_SIGN_IN_METHOD="phone",R})();function ng(R,D){return D?Be(D):(je(R._popupRedirectResolver,R,"argument-error"),R._popupRedirectResolver)}class bE extends fs{constructor(D){super("custom","custom"),this.params=D}_getIdTokenResponse(D){return Tu(D,this._buildIdpRequest())}_linkToIdToken(D,A){return Tu(D,this._buildIdpRequest(A))}_getReauthenticationResolver(D){return Tu(D,this._buildIdpRequest())}_buildIdpRequest(D){const A={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return D&&(A.idToken=D),A}}function s0(R){return ey(R.auth,new bE(R),R.bypassAuthState)}function kl(R){const{auth:D,user:A}=R;return je(A,D,"internal-error"),jC(A,new bE(R),R.bypassAuthState)}function o0(R){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,v.Z)(function*(R){const{auth:D,user:A}=R;return je(A,D,"internal-error"),Jv(A,new bE(R),R.bypassAuthState)})).apply(this,arguments)}class kp{constructor(D,A,P,K,te=!1){this.auth=D,this.resolver=P,this.user=K,this.bypassAuthState=te,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(A)?A:[A]}execute(){var D=this;return new Promise(function(){var A=(0,v.Z)(function*(P,K){D.pendingPromise={resolve:P,reject:K};try{D.eventManager=yield D.resolver._initialize(D.auth),yield D.onExecution(),D.eventManager.registerConsumer(D)}catch(te){D.reject(te)}});return function(P,K){return A.apply(this,arguments)}}())}onAuthEvent(D){var A=this;return(0,v.Z)(function*(){const{urlResponse:P,sessionId:K,postBody:te,tenantId:Ge,error:Rt,type:Di}=D;if(Rt)return void A.reject(Rt);const pn={auth:A.auth,requestUri:P,sessionId:K,tenantId:Ge||void 0,postBody:te||void 0,user:A.user,bypassAuthState:A.bypassAuthState};try{A.resolve(yield A.getIdpTask(Di)(pn))}catch(tr){A.reject(tr)}})()}onError(D){this.reject(D)}getIdpTask(D){switch(D){case"signInViaPopup":case"signInViaRedirect":return s0;case"linkViaPopup":case"linkViaRedirect":return o0;case"reauthViaPopup":case"reauthViaRedirect":return kl;default:hi(this.auth,"internal-error")}}resolve(D){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(D),this.unregisterAndCleanUp()}reject(D){mt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(D),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ho=new ti(2e3,1e4);function LI(R,D,A){return fy.apply(this,arguments)}function fy(){return(fy=(0,v.Z)(function*(R,D,A){const P=Ki(R);yt(R,D,Ta);const K=ng(P,A);return new Em(P,"signInViaPopup",D,K).executeNotNull()})).apply(this,arguments)}function OI(R,D,A){return a0.apply(this,arguments)}function a0(){return(a0=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R);yt(P.auth,D,Ta);const K=ng(P.auth,A);return new Em(P.auth,"reauthViaPopup",D,K,P).executeNotNull()})).apply(this,arguments)}function PI(R,D,A){return rg.apply(this,arguments)}function rg(){return(rg=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R);yt(P.auth,D,Ta);const K=ng(P.auth,A);return new Em(P.auth,"linkViaPopup",D,K,P).executeNotNull()})).apply(this,arguments)}let Em=(()=>{class R extends kp{constructor(A,P,K,te,Ge){super(A,P,te,Ge),this.provider=K,this.authWindow=null,this.pollId=null,R.currentPopupAction&&R.currentPopupAction.cancel(),R.currentPopupAction=this}executeNotNull(){var A=this;return(0,v.Z)(function*(){const P=yield A.execute();return je(P,A.auth,"internal-error"),P})()}onExecution(){var A=this;return(0,v.Z)(function*(){mt(1===A.filter.length,"Popup operations only handle one event");const P=eg();A.authWindow=yield A.resolver._openPopup(A.auth,A.provider,A.filter[0],P),A.authWindow.associatedEvent=P,A.resolver._originValidation(A.auth).catch(K=>{A.reject(K)}),A.resolver._isIframeWebStorageSupported(A.auth,K=>{K||A.reject(Ot(A.auth,"web-storage-unsupported"))}),A.pollUserCancellation()})()}get eventId(){var A;return(null===(A=this.authWindow)||void 0===A?void 0:A.associatedEvent)||null}cancel(){this.reject(Ot(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,R.currentPopupAction=null}pollUserCancellation(){const A=()=>{var P,K;this.pollId=null!==(K=null===(P=this.authWindow)||void 0===P?void 0:P.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ot(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(A,Ho.get())};A()}}return R.currentPopupAction=null,R})();const Tm=new Map;class Vo extends kp{constructor(D,A,P=!1){super(D,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],A,void 0,P),this.eventId=null}execute(){var D=()=>super.execute,A=this;return(0,v.Z)(function*(){let P=Tm.get(A.auth._key());if(!P){try{const te=(yield function _u(R,D){return sg.apply(this,arguments)}(A.resolver,A.auth))?yield D().call(A):null;P=()=>Promise.resolve(te)}catch(K){P=()=>Promise.reject(K)}Tm.set(A.auth._key(),P)}return A.bypassAuthState||Tm.set(A.auth._key(),()=>Promise.resolve(null)),P()})()}onAuthEvent(D){var A=()=>super.onAuthEvent,P=this;return(0,v.Z)(function*(){if("signInViaRedirect"===D.type)return A().call(P,D);if("unknown"!==D.type){if(D.eventId){const K=yield P.auth._redirectUserForId(D.eventId);if(K)return P.user=K,A().call(P,D);P.resolve(null)}}else P.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function sg(){return(sg=(0,v.Z)(function*(R,D){const A=gd(D),P=Rp(R);if(!(yield P._isAvailable()))return!1;const K="true"===(yield P._get(A));return yield P._remove(A),K})).apply(this,arguments)}function gy(R,D){return my.apply(this,arguments)}function my(){return(my=(0,v.Z)(function*(R,D){return Rp(R)._set(gd(D),"true")})).apply(this,arguments)}function CE(){Tm.clear()}function vy(R,D){Tm.set(R._key(),D)}function Rp(R){return Be(R._redirectPersistence)}function gd(R){return fe("pendingRedirect",R.config.apiKey,R.name)}function wE(R,D,A){return function Do(R,D,A){return xm.apply(this,arguments)}(R,D,A)}function xm(){return(xm=(0,v.Z)(function*(R,D,A){const P=Ki(R);yt(R,D,Ta);const K=ng(P,A);return yield gy(K,P),K._openRedirect(P,D,"signInViaRedirect")})).apply(this,arguments)}function Dm(R,D,A){return function yy(R,D,A){return md.apply(this,arguments)}(R,D,A)}function md(){return(md=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R);yt(P.auth,D,Ta);const K=ng(P.auth,A);yield gy(K,P.auth);const te=yield Cy(P);return K._openRedirect(P.auth,D,"reauthViaRedirect",te)})).apply(this,arguments)}function SE(R,D,A){return function EE(R,D,A){return l0.apply(this,arguments)}(R,D,A)}function l0(){return(l0=(0,v.Z)(function*(R,D,A){const P=(0,ue.m9)(R);yt(P.auth,D,Ta);const K=ng(P.auth,A);yield Du(!1,P,D.providerId),yield gy(K,P.auth);const te=yield Cy(P);return K._openRedirect(P.auth,D,"linkViaRedirect",te)})).apply(this,arguments)}function by(R,D){return vd.apply(this,arguments)}function vd(){return(vd=(0,v.Z)(function*(R,D){return yield Ki(R)._initializationPromise,og(R,D,!1)})).apply(this,arguments)}function og(R,D){return yd.apply(this,arguments)}function yd(){return(yd=(0,v.Z)(function*(R,D,A=!1){const P=Ki(R),K=ng(P,D),Ge=yield new Vo(P,K,A).execute();return Ge&&!A&&(delete Ge.user._redirectEventId,yield P._persistUserIfCurrent(Ge.user),yield P._setRedirectUser(null,D)),Ge})).apply(this,arguments)}function Cy(R){return Im.apply(this,arguments)}function Im(){return(Im=(0,v.Z)(function*(R){const D=eg(`${R.uid}:::`);return R._redirectEventId=D,yield R.auth._setRedirectUser(R),yield R.auth._persistUserIfCurrent(R),D})).apply(this,arguments)}class lg{constructor(D){this.auth=D,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(D){this.consumers.add(D),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,D)&&(this.sendToConsumer(this.queuedRedirectEvent,D),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(D){this.consumers.delete(D)}onEvent(D){if(this.hasEventBeenHandled(D))return!1;let A=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(D,P)&&(A=!0,this.sendToConsumer(D,P),this.saveEventToCache(D))}),this.hasHandledPotentialRedirect||!function TE(R){switch(R.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _m(R);default:return!1}}(D)||(this.hasHandledPotentialRedirect=!0,A||(this.queuedRedirectEvent=D,A=!0)),A}sendToConsumer(D,A){var P;if(D.error&&!_m(D)){const K=(null===(P=D.error.code)||void 0===P?void 0:P.split("auth/")[1])||"internal-error";A.onError(Ot(this.auth,K))}else A.onAuthEvent(D)}isEventForConsumer(D,A){const P=null===A.eventId||!!D.eventId&&D.eventId===A.eventId;return A.filter.includes(D.type)&&P}hasEventBeenHandled(D){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Am(D))}saveEventToCache(D){this.cachedEventUids.add(Am(D)),this.lastProcessedEventTime=Date.now()}}function Am(R){return[R.type,R.eventId,R.sessionId,R.tenantId].filter(D=>D).join("-")}function _m({type:R,error:D}){return"unknown"===R&&"auth/no-auth-event"===D?.code}function bd(R){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,v.Z)(function*(R,D={}){return rn(R,"GET","/v1/projects",D)})).apply(this,arguments)}const cl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mp=/^https?/;function xE(){return(xE=(0,v.Z)(function*(R){if(R.config.emulator)return;const{authorizedDomains:D}=yield bd(R);for(const A of D)try{if(Pj(A))return}catch{}hi(R,"unauthorized-domain")})).apply(this,arguments)}function Pj(R){const D=zt(),{protocol:A,hostname:P}=new URL(D);if(R.startsWith("chrome-extension://")){const Ge=new URL(R);return""===Ge.hostname&&""===P?"chrome-extension:"===A&&R.replace("chrome-extension://","")===D.replace("chrome-extension://",""):"chrome-extension:"===A&&Ge.hostname===P}if(!Mp.test(A))return!1;if(cl.test(R))return P===R;const K=R.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(P)}const DE=new ti(3e4,6e4);function hg(){const R=ra().___jsl;if(R?.H)for(const D of Object.keys(R.H))if(R.H[D].r=R.H[D].r||[],R.H[D].L=R.H[D].L||[],R.H[D].r=[...R.H[D].L],R.CP)for(let A=0;A<R.CP.length;A++)R.CP[A]=null}let ku=null;function IE(R){return ku=ku||function u0(R){return new Promise((D,A)=>{var P,K,te;function Ge(){hg(),gapi.load("gapi.iframes",{callback:()=>{D(gapi.iframes.getContext())},ontimeout:()=>{hg(),A(Ot(R,"network-request-failed"))},timeout:DE.get()})}if(null!==(K=null===(P=ra().gapi)||void 0===P?void 0:P.iframes)&&void 0!==K&&K.Iframe)D(gapi.iframes.getContext());else{if(null===(te=ra().gapi)||void 0===te||!te.load){const Rt=r0("iframefcb");return ra()[Rt]=()=>{gapi.load?Ge():A(Ot(R,"network-request-failed"))},ig(`https://apis.google.com/js/api.js?onload=${Rt}`).catch(Di=>A(Di))}Ge()}}).catch(D=>{throw ku=null,D})}(R),ku}const c0=new ti(5e3,15e3),FI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _E(R){const D=R.config;je(D.authDomain,R,"auth-domain-config-required");const A=D.emulator?Er(D,"emulator/auth/iframe"):`https://${R.config.authDomain}/__/auth/iframe`,P={apiKey:D.apiKey,appName:R.name,v:ee.SDK_VERSION},K=Nj.get(R.config.apiHost);K&&(P.eid=K);const te=R._getFrameworks();return te.length&&(P.fw=te.join(",")),`${A}?${(0,ue.xO)(P).slice(1)}`}function d0(){return d0=(0,v.Z)(function*(R){const D=yield IE(R),A=ra().gapi;return je(A,R,"internal-error"),D.open({where:document.body,url:_E(R),messageHandlersFilter:A.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FI,dontclear:!0},P=>new Promise(function(){var K=(0,v.Z)(function*(te,Ge){yield P.restyle({setHideOnLeave:!1});const Rt=Ot(R,"network-request-failed"),Di=ra().setTimeout(()=>{Ge(Rt)},c0.get());function pn(){ra().clearTimeout(Di),te(P)}P.ping(pn).then(pn,()=>{Ge(Rt)})});return function(te,Ge){return K.apply(this,arguments)}}()))}),d0.apply(this,arguments)}const p0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class HI{constructor(D){this.window=D,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wd(R,D,A,P,K,te){je(R.config.authDomain,R,"auth-domain-config-required"),je(R.config.apiKey,R,"invalid-api-key");const Ge={apiKey:R.config.apiKey,appName:R.name,authType:A,redirectUrl:P,v:ee.SDK_VERSION,eventId:K};if(D instanceof Ta){D.setDefaultLanguage(R.languageCode),Ge.providerId=D.providerId||"",(0,ue.xb)(D.getCustomParameters())||(Ge.customParameters=JSON.stringify(D.getCustomParameters()));for(const[Di,pn]of Object.entries(te||{}))Ge[Di]=pn}if(D instanceof Cp){const Di=D.getScopes().filter(pn=>""!==pn);Di.length>0&&(Ge.scopes=Di.join(","))}R.tenantId&&(Ge.tid=R.tenantId);const Rt=Ge;for(const Di of Object.keys(Rt))void 0===Rt[Di]&&delete Rt[Di];return`${function wy({config:R}){return R.emulator?Er(R,"emulator/auth/handler"):`https://${R.authDomain}/__/auth/handler`}(R)}?${(0,ue.xO)(Rt).slice(1)}`}const Sy="webStorageSupport",m0=class g0{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cd,this._completeRedirectFn=og,this._overrideRedirectResult=vy}_openPopup(D,A,P,K){var te=this;return(0,v.Z)(function*(){var Ge;mt(null===(Ge=te.eventManagers[D._key()])||void 0===Ge?void 0:Ge.manager,"_initialize() not called before _openPopup()");const Rt=wd(D,A,P,zt(),K);return function ug(R,D,A,P=500,K=600){const te=Math.max((window.screen.availHeight-K)/2,0).toString(),Ge=Math.max((window.screen.availWidth-P)/2,0).toString();let Rt="";const Di=Object.assign(Object.assign({},p0),{width:P.toString(),height:K.toString(),top:te,left:Ge}),pn=(0,ue.z$)().toLowerCase();A&&(Rt=ye(pn)?"_blank":A),q(pn)&&(D=D||"http://localhost",Di.scrollbars="yes");const tr=Object.entries(Di).reduce((Kh,[Sc,y0])=>`${Kh}${Sc}=${y0},`,"");if(function zn(R=(0,ue.z$)()){var D;return Dt(R)&&!(null===(D=window.navigator)||void 0===D||!D.standalone)}(pn)&&"_self"!==Rt)return function Op(R,D){const A=document.createElement("a");A.href=R,A.target=D;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),A.dispatchEvent(P)}(D||"",Rt),new HI(null);const bs=window.open(D||"",Rt,tr);je(bs,R,"popup-blocked");try{bs.focus()}catch{}return new HI(bs)}(D,Rt,eg())})()}_openRedirect(D,A,P,K){var te=this;return(0,v.Z)(function*(){return yield te._originValidation(D),function cE(R){ra().location.href=R}(wd(D,A,P,zt(),K)),new Promise(()=>{})})()}_initialize(D){const A=D._key();if(this.eventManagers[A]){const{manager:K,promise:te}=this.eventManagers[A];return K?Promise.resolve(K):(mt(te,"If manager is not set, promise should be"),te)}const P=this.initAndGetManager(D);return this.eventManagers[A]={promise:P},P.catch(()=>{delete this.eventManagers[A]}),P}initAndGetManager(D){var A=this;return(0,v.Z)(function*(){const P=yield function sP(R){return d0.apply(this,arguments)}(D),K=new lg(D);return P.register("authEvent",te=>(je(te?.authEvent,D,"invalid-auth-event"),{status:K.onEvent(te.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),A.eventManagers[D._key()]={manager:K},A.iframes[D._key()]=P,K})()}_isIframeWebStorageSupported(D,A){this.iframes[D._key()].send(Sy,{type:Sy},K=>{var te;const Ge=null===(te=K?.[0])||void 0===te?void 0:te[Sy];void 0!==Ge&&A(!!Ge),hi(D,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(D){const A=D._key();return this.originValidationPromises[A]||(this.originValidationPromises[A]=function h0(R){return xE.apply(this,arguments)}(D)),this.originValidationPromises[A]}get _shouldInitProactively(){return Ln()||Z()||Dt()}};class Ty extends class Ey{constructor(D){this.factorId=D}_process(D,A,P){switch(A.type){case"enroll":return this._finalizeEnroll(D,A.credential,P);case"signin":return this._finalizeSignIn(D,A.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(D){super("phone"),this.credential=D}static _fromCredential(D){return new Ty(D)}_finalizeEnroll(D,A,P){return function QC(R,D){return rn(R,"POST","/v2/accounts/mfaEnrollment:finalize",_n(R,D))}(D,{idToken:A,displayName:P,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(D,A){return function dy(R,D){return rn(R,"POST","/v2/accounts/mfaSignIn:finalize",_n(R,D))}(D,{mfaPendingCredential:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wc=(()=>{class R{constructor(){}static assertion(A){return Ty._fromCredential(A)}}return R.FACTOR_ID="phone",R})();var Fp="@firebase/auth",Rm="0.20.11";class Bj{constructor(D){this.auth=D,this.internalListeners=new Map}getUid(){var D;return this.assertAuthConfigured(),(null===(D=this.auth.currentUser)||void 0===D?void 0:D.uid)||null}getToken(D){var A=this;return(0,v.Z)(function*(){return A.assertAuthConfigured(),yield A.auth._initializationPromise,A.auth.currentUser?{accessToken:yield A.auth.currentUser.getIdToken(D)}:null})()}addAuthTokenListener(D){if(this.assertAuthConfigured(),this.internalListeners.has(D))return;const A=this.auth.onIdTokenChanged(P=>{var K;D((null===(K=P)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(D,A),this.updateProactiveRefresh()}removeAuthTokenListener(D){this.assertAuthConfigured();const A=this.internalListeners.get(D);!A||(this.internalListeners.delete(D),A(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const v0=(0,ue.Pz)("authIdTokenMaxAge")||300;let Np=null;const xy=R=>function(){var D=(0,v.Z)(function*(A){const P=A&&(yield A.getIdTokenResult()),K=P&&((new Date).getTime()-Date.parse(P.issuedAtTime))/1e3;if(K&&K>v0)return;const te=P?.token;Np!==te&&(Np=te,yield fetch(R,{method:te?"POST":"DELETE",headers:te?{Authorization:`Bearer ${te}`}:{}}))});return function(A){return D.apply(this,arguments)}}();function Dy(R=(0,ee.getApp)()){const D=(0,ee._getProvider)(R,"auth");if(D.isInitialized())return D.getImmediate();const A=function st(R,D){const A=(0,ee._getProvider)(R,"auth");if(A.isInitialized()){const K=A.getImmediate(),te=A.getOptions();if((0,ue.vZ)(te,D??{}))return K;hi(K,"already-initialized")}return A.initialize({options:D})}(R,{popupRedirectResolver:m0,persistence:[cy,Dp,cd]}),P=(0,ue.Pz)("authTokenSyncURL");if(P){const te=xy(P);(function um(R,D,A){(0,ue.m9)(R).beforeAuthStateChanged(D,A)})(A,te,()=>te(A.currentUser)),function ny(R,D,A,P){(0,ue.m9)(R).onIdTokenChanged(D,A,P)}(A,Ge=>te(Ge))}const K=(0,ue.q4)("auth");return K&&vt(A,`http://${K}`),A}!function oP(R){(0,ee._registerComponent)(new pt.wA("auth",(D,{options:A})=>{const P=D.getProvider("app").getImmediate(),K=D.getProvider("heartbeat"),{apiKey:te,authDomain:Ge}=P.options;return((Rt,Di)=>{je(te&&!te.includes(":"),"invalid-api-key",{appName:Rt.name}),je(!Ge?.includes(":"),"argument-error",{appName:Rt.name});const pn={apiKey:te,authDomain:Ge,clientPlatform:R,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ss(R)},tr=new Cu(Rt,Di,pn);return function $e(R,D){const A=D?.persistence||[],P=(Array.isArray(A)?A:[A]).map(Be);D?.errorMap&&R._updateErrorMap(D.errorMap),R._initializeWithPersistence(P,D?.popupRedirectResolver)}(tr,A),tr})(P,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((D,A,P)=>{D.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new pt.wA("auth-internal",D=>{const A=Ki(D.getProvider("auth").getImmediate());return new Bj(A)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Fp,Rm,function Hj(R){switch(R){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(R)),(0,ee.registerVersion)(Fp,Rm,"esm2017")}("Browser")},2090:(Wi,kt,ne)=>{ne.d(kt,{$s:()=>vi,BH:()=>bn,DV:()=>Ms,Dv:()=>Kr,G6:()=>yt,GJ:()=>Sa,L:()=>ut,LL:()=>vr,P0:()=>Ht,Pz:()=>Jn,Sg:()=>ti,UG:()=>St,UI:()=>Oa,US:()=>pt,Wj:()=>hn,Wl:()=>Xr,Yr:()=>Mt,ZB:()=>we,ZR:()=>Ds,aH:()=>Vi,b$:()=>nt,cI:()=>rn,dS:()=>vn,eu:()=>je,g5:()=>ee,gK:()=>Qs,gQ:()=>Ur,h$:()=>it,hl:()=>ii,hu:()=>ue,jU:()=>ci,lb:()=>uo,m9:()=>Bn,ne:()=>Qr,p$:()=>Ce,pd:()=>ea,q4:()=>zt,r3:()=>Us,ru:()=>gt,tV:()=>dt,uI:()=>wt,ug:()=>xo,vZ:()=>fi,w1:()=>hi,w9:()=>Xs,xO:()=>_r,xb:()=>No,z$:()=>Lt,zI:()=>Qe,zd:()=>lo});const ue=function(be,fe){if(!be)throw ee(fe)},ee=function(be){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+be)},qe=function(be){const fe=[];let J=0;for(let Y=0;Y<be.length;Y++){let q=be.charCodeAt(Y);q<128?fe[J++]=q:q<2048?(fe[J++]=q>>6|192,fe[J++]=63&q|128):55296==(64512&q)&&Y+1<be.length&&56320==(64512&be.charCodeAt(Y+1))?(q=65536+((1023&q)<<10)+(1023&be.charCodeAt(++Y)),fe[J++]=q>>18|240,fe[J++]=q>>12&63|128,fe[J++]=q>>6&63|128,fe[J++]=63&q|128):(fe[J++]=q>>12|224,fe[J++]=q>>6&63|128,fe[J++]=63&q|128)}return fe},pt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(be,fe){if(!Array.isArray(be))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let q=0;q<be.length;q+=3){const Z=be[q],ye=q+1<be.length,et=ye?be[q+1]:0,Pt=q+2<be.length,Kt=Pt?be[q+2]:0;let Mi=(15&et)<<2|Kt>>6,zn=63&Kt;Pt||(zn=64,ye||(Mi=64)),Y.push(J[Z>>2],J[(3&Z)<<4|et>>4],J[Mi],J[zn])}return Y.join("")},encodeString(be,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(be):this.encodeByteArray(qe(be),fe)},decodeString(be,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(be):function(be){const fe=[];let J=0,Y=0;for(;J<be.length;){const q=be[J++];if(q<128)fe[Y++]=String.fromCharCode(q);else if(q>191&&q<224){const Z=be[J++];fe[Y++]=String.fromCharCode((31&q)<<6|63&Z)}else if(q>239&&q<365){const Pt=((7&q)<<18|(63&be[J++])<<12|(63&be[J++])<<6|63&be[J++])-65536;fe[Y++]=String.fromCharCode(55296+(Pt>>10)),fe[Y++]=String.fromCharCode(56320+(1023&Pt))}else{const Z=be[J++],ye=be[J++];fe[Y++]=String.fromCharCode((15&q)<<12|(63&Z)<<6|63&ye)}}return fe.join("")}(this.decodeStringToByteArray(be,fe))},decodeStringToByteArray(be,fe){this.init_();const J=fe?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let q=0;q<be.length;){const Z=J[be.charAt(q++)],et=q<be.length?J[be.charAt(q)]:0;++q;const Kt=q<be.length?J[be.charAt(q)]:64;++q;const Dt=q<be.length?J[be.charAt(q)]:64;if(++q,null==Z||null==et||null==Kt||null==Dt)throw Error();Y.push(Z<<2|et>>4),64!==Kt&&(Y.push(et<<4&240|Kt>>2),64!==Dt&&Y.push(Kt<<6&192|Dt))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let be=0;be<this.ENCODED_VALS.length;be++)this.byteToCharMap_[be]=this.ENCODED_VALS.charAt(be),this.charToByteMap_[this.byteToCharMap_[be]]=be,this.byteToCharMapWebSafe_[be]=this.ENCODED_VALS_WEBSAFE.charAt(be),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[be]]=be,be>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(be)]=be,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(be)]=be)}}},it=function(be){const fe=qe(be);return pt.encodeByteArray(fe,!0)},ut=function(be){return it(be).replace(/\./g,"")},dt=function(be){try{return pt.decodeString(be,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function Ce(be){return we(void 0,be)}function we(be,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===be&&(be={});break;case Array:be=[];break;default:return fe}for(const J in fe)!fe.hasOwnProperty(J)||!Pe(J)||(be[J]=we(be[J],fe[J]));return be}function Pe(be){return"__proto__"!==be}function Lt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function wt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function St(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ci(){return"object"==typeof self&&self.self===self}function gt(){const be="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof be&&void 0!==be.id}function nt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hi(){const be=Lt();return be.indexOf("MSIE ")>=0||be.indexOf("Trident/")>=0}function Mt(){return!1}function yt(){return!St()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ii(){return"object"==typeof indexedDB}function je(){return new Promise((be,fe)=>{try{let J=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Y);q.onsuccess=()=>{q.result.close(),J||self.indexedDB.deleteDatabase(Y),be(!0)},q.onupgradeneeded=()=>{J=!1},q.onerror=()=>{var Z;fe((null===(Z=q.error)||void 0===Z?void 0:Z.message)||"")}}catch(J){fe(J)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const $e=()=>{try{return function mt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const be=process.env.__FIREBASE_DEFAULTS__;return be?JSON.parse(be):void 0})()||(()=>{if(typeof document>"u")return;let be;try{be=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const fe=be&&dt(be[1]);return fe&&JSON.parse(fe)})()}catch(be){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${be}`)}},zt=be=>{var fe,J;return null===(J=null===(fe=$e())||void 0===fe?void 0:fe.emulatorHosts)||void 0===J?void 0:J[be]},Ht=be=>{const fe=zt(be);if(!fe)return;const J=fe.lastIndexOf(":");if(J<=0||J+1===fe.length)throw new Error(`Invalid host ${fe} with no separate hostname and port!`);const Y=parseInt(fe.substring(J+1),10);return"["===fe[0]?[fe.substring(1,J-1),Y]:[fe.substring(0,J),Y]},Vi=()=>{var be;return null===(be=$e())||void 0===be?void 0:be.config},Jn=be=>{var fe;return null===(fe=$e())||void 0===fe?void 0:fe[`_${be}`]};class bn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,J)=>{this.resolve=fe,this.reject=J})}wrapCallback(fe){return(J,Y)=>{J?this.reject(J):this.resolve(Y),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(J):fe(J,Y))}}}function ti(be,fe){if(be.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=fe||"demo-project",q=be.iat||0,Z=be.sub||be.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ye=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:q,exp:q+3600,auth_time:q,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},be);return[ut(JSON.stringify({alg:"none",type:"JWT"})),ut(JSON.stringify(ye)),""].join(".")}class Ds extends Error{constructor(fe,J,Y){super(J),this.code=fe,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,Ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vr.prototype.create)}}class vr{constructor(fe,J,Y){this.service=fe,this.serviceName=J,this.errors=Y}create(fe,...J){const Y=J[0]||{},q=`${this.service}/${fe}`,Z=this.errors[fe],ye=Z?function er(be,fe){return be.replace(_n,(J,Y)=>{const q=fe[Y];return null!=q?String(q):`<${Y}?>`})}(Z,Y):"Error";return new Ds(q,`${this.serviceName}: ${ye} (${q}).`,Y)}}const _n=/\{\$([^}]+)}/g;function rn(be){return JSON.parse(be)}function Xr(be){return JSON.stringify(be)}const La=function(be){let fe={},J={},Y={},q="";try{const Z=be.split(".");fe=rn(dt(Z[0])||""),J=rn(dt(Z[1])||""),q=Z[2],Y=J.d||{},delete J.d}catch{}return{header:fe,claims:J,data:Y,signature:q}},Xs=function(be){const J=La(be).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Sa=function(be){const fe=La(be).claims;return"object"==typeof fe&&!0===fe.admin};function Us(be,fe){return Object.prototype.hasOwnProperty.call(be,fe)}function Ms(be,fe){if(Object.prototype.hasOwnProperty.call(be,fe))return be[fe]}function No(be){for(const fe in be)if(Object.prototype.hasOwnProperty.call(be,fe))return!1;return!0}function Oa(be,fe,J){const Y={};for(const q in be)Object.prototype.hasOwnProperty.call(be,q)&&(Y[q]=fe.call(J,be[q],q,be));return Y}function fi(be,fe){if(be===fe)return!0;const J=Object.keys(be),Y=Object.keys(fe);for(const q of J){if(!Y.includes(q))return!1;const Z=be[q],ye=fe[q];if(Nr(Z)&&Nr(ye)){if(!fi(Z,ye))return!1}else if(Z!==ye)return!1}for(const q of Y)if(!J.includes(q))return!1;return!0}function Nr(be){return null!==be&&"object"==typeof be}function _r(be){const fe=[];for(const[J,Y]of Object.entries(be))Array.isArray(Y)?Y.forEach(q=>{fe.push(encodeURIComponent(J)+"="+encodeURIComponent(q))}):fe.push(encodeURIComponent(J)+"="+encodeURIComponent(Y));return fe.length?"&"+fe.join("&"):""}function lo(be){const fe={};return be.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[q,Z]=Y.split("=");fe[decodeURIComponent(q)]=decodeURIComponent(Z)}}),fe}function ea(be){const fe=be.indexOf("?");if(!fe)return"";const J=be.indexOf("#",fe);return be.substring(fe,J>0?J:void 0)}class Ur{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,J){J||(J=0);const Y=this.W_;if("string"==typeof fe)for(let Dt=0;Dt<16;Dt++)Y[Dt]=fe.charCodeAt(J)<<24|fe.charCodeAt(J+1)<<16|fe.charCodeAt(J+2)<<8|fe.charCodeAt(J+3),J+=4;else for(let Dt=0;Dt<16;Dt++)Y[Dt]=fe[J]<<24|fe[J+1]<<16|fe[J+2]<<8|fe[J+3],J+=4;for(let Dt=16;Dt<80;Dt++){const Mi=Y[Dt-3]^Y[Dt-8]^Y[Dt-14]^Y[Dt-16];Y[Dt]=4294967295&(Mi<<1|Mi>>>31)}let Kt,ct,q=this.chain_[0],Z=this.chain_[1],ye=this.chain_[2],et=this.chain_[3],Pt=this.chain_[4];for(let Dt=0;Dt<80;Dt++){Dt<40?Dt<20?(Kt=et^Z&(ye^et),ct=1518500249):(Kt=Z^ye^et,ct=1859775393):Dt<60?(Kt=Z&ye|et&(Z|ye),ct=2400959708):(Kt=Z^ye^et,ct=3395469782);const Mi=(q<<5|q>>>27)+Kt+Pt+ct+Y[Dt]&4294967295;Pt=et,et=ye,ye=4294967295&(Z<<30|Z>>>2),Z=q,q=Mi}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+Z&4294967295,this.chain_[2]=this.chain_[2]+ye&4294967295,this.chain_[3]=this.chain_[3]+et&4294967295,this.chain_[4]=this.chain_[4]+Pt&4294967295}update(fe,J){if(null==fe)return;void 0===J&&(J=fe.length);const Y=J-this.blockSize;let q=0;const Z=this.buf_;let ye=this.inbuf_;for(;q<J;){if(0===ye)for(;q<=Y;)this.compress_(fe,q),q+=this.blockSize;if("string"==typeof fe){for(;q<J;)if(Z[ye]=fe.charCodeAt(q),++ye,++q,ye===this.blockSize){this.compress_(Z),ye=0;break}}else for(;q<J;)if(Z[ye]=fe[q],++ye,++q,ye===this.blockSize){this.compress_(Z),ye=0;break}}this.inbuf_=ye,this.total_+=J}digest(){const fe=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&J,J/=256;this.compress_(this.buf_);let Y=0;for(let q=0;q<5;q++)for(let Z=24;Z>=0;Z-=8)fe[Y]=this.chain_[q]>>Z&255,++Y;return fe}}function Qr(be,fe){const J=new or(be,fe);return J.subscribe.bind(J)}class or{constructor(fe,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{fe(this)}).catch(Y=>{this.error(Y)})}next(fe){this.forEachObserver(J=>{J.next(fe)})}error(fe){this.forEachObserver(J=>{J.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,J,Y){let q;if(void 0===fe&&void 0===J&&void 0===Y)throw new Error("Missing Observer.");q=function Li(be,fe){if("object"!=typeof be||null===be)return!1;for(const J of fe)if(J in be&&"function"==typeof be[J])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:J,complete:Y},void 0===q.next&&(q.next=Oi),void 0===q.error&&(q.error=Oi),void 0===q.complete&&(q.complete=Oi);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Z}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,fe)}sendOne(fe,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{J(this.observers[fe])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Oi(){}const Kr=function(be,fe,J,Y){let q;if(Y<fe?q="at least "+fe:Y>J&&(q=0===J?"none":"no more than "+J),q)throw new Error(be+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+q+".")};function Qs(be,fe){return`${be} failed: ${fe} argument `}function hn(be,fe,J,Y){if((!Y||J)&&"function"!=typeof J)throw new Error(Qs(be,fe)+"must be a valid function.")}function uo(be,fe,J,Y){if((!Y||J)&&("object"!=typeof J||null===J))throw new Error(Qs(be,fe)+"must be a valid context object.")}const vn=function(be){const fe=[];let J=0;for(let Y=0;Y<be.length;Y++){let q=be.charCodeAt(Y);if(q>=55296&&q<=56319){const Z=q-55296;Y++,ue(Y<be.length,"Surrogate pair missing trail surrogate."),q=65536+(Z<<10)+(be.charCodeAt(Y)-56320)}q<128?fe[J++]=q:q<2048?(fe[J++]=q>>6|192,fe[J++]=63&q|128):q<65536?(fe[J++]=q>>12|224,fe[J++]=q>>6&63|128,fe[J++]=63&q|128):(fe[J++]=q>>18|240,fe[J++]=q>>12&63|128,fe[J++]=q>>6&63|128,fe[J++]=63&q|128)}return fe},xo=function(be){let fe=0;for(let J=0;J<be.length;J++){const Y=be.charCodeAt(J);Y<128?fe++:Y<2048?fe+=2:Y>=55296&&Y<=56319?(fe+=4,J++):fe+=3}return fe};function vi(be,fe=1e3,J=2){const Y=fe*Math.pow(J,be),q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+q)}function Bn(be){return be&&be._delegate?be._delegate:be}},237:(Wi,kt,ne)=>{var v=ne(4650);let ue=null;function ee(){return ue}const it=new v.OlP("DocumentToken");let ut=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return function dt(){return(0,v.LFG)(we)}()},providedIn:"platform"}),r})();const Ce=new v.OlP("Location Initialized");let we=(()=>{class r extends ut{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(e){const i=ee().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=ee().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,n){Pe()?this._history.pushState(e,i,n):this.location.hash=n}replaceState(e,i,n){Pe()?this._history.replaceState(e,i,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it))},r.\u0275prov=v.Yz7({token:r,factory:function(){return function Lt(){return new we((0,v.LFG)(it))}()},providedIn:"platform"}),r})();function Pe(){return!!window.history.pushState}function wt(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function St(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function ci(r){return r&&"?"!==r[0]?"?"+r:r}let gt=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return(0,v.f3M)(xi)},providedIn:"root"}),r})();const nt=new v.OlP("appBaseHref");let xi=(()=>{class r extends gt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return wt(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+ci(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${i}${n}`:i}pushState(e,i,n,s){const o=this.prepareExternalUrl(n+ci(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){const o=this.prepareExternalUrl(n+ci(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(ut),v.LFG(nt,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),hi=(()=>{class r extends gt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=wt(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,n,s){let o=this.prepareExternalUrl(n+ci(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){let o=this.prepareExternalUrl(n+ci(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(ut),v.LFG(nt,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),Ot=(()=>{class r{constructor(e){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=St(ii(i)),this._locationStrategy.onPopState(n=>{this._subject.emit({url:this.path(!0),pop:!0,state:n.state,type:n.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+ci(i))}normalize(e){return r.stripTrailingSlash(function yt(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,ii(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",n=null){this._locationStrategy.pushState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ci(i)),n)}replaceState(e,i="",n=null){this._locationStrategy.replaceState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+ci(i)),n)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(n=>n(e,i))}subscribe(e,i,n){return this._subject.subscribe({next:e,error:i,complete:n})}}return r.normalizeQueryParams=ci,r.joinWithSlash=wt,r.stripTrailingSlash=St,r.\u0275fac=function(e){return new(e||r)(v.LFG(gt))},r.\u0275prov=v.Yz7({token:r,factory:function(){return function Mt(){return new Ot((0,v.LFG)(gt))}()},providedIn:"root"}),r})();function ii(r){return r.replace(/\/index.html$/,"")}function Ea(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const i=e.indexOf("="),[n,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(n.trim()===t)return decodeURIComponent(s)}return null}let Br=(()=>{class r{constructor(e,i,n,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=n,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,v.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,v.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(n=>{i?this._renderer.addClass(this._ngEl.nativeElement,n):this._renderer.removeClass(this._ngEl.nativeElement,n)})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},r.\u0275dir=v.lG2({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class iE{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class Hh{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const HC=new Hh,Gf=new iE;let Kf=(()=>{class r{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,v.QGY)(e))return HC;if((0,v.F4k)(e))return Gf;throw function Al(r,t){return new v.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.sBO,16))},r.\u0275pipe=v.Yjl({name:"async",type:r,pure:!1,standalone:!0}),r})(),Vh=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})();function Xf(r){return"server"===r}let Qv=(()=>{class r{}return r.\u0275prov=(0,v.Yz7)({token:r,providedIn:"root",factory:()=>new ad((0,v.LFG)(it),window)}),r})();class ad{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Ya(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let n=i.currentNode;for(;n;){const s=n.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}n=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],n-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=ld(this.window.history)||ld(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ld(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class _l{}class Jf extends class aE extends class pt{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ht(r){ue||(ue=r)}(new Jf)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function yI(){return Tp=Tp||document.querySelector("base"),Tp?Tp.getAttribute("href"):null}();return null==e?null:function vc(r){io=io||document.createElement("a"),io.setAttribute("href",r);const t=io.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Tp=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Ea(document.cookie,t)}}let io,Tp=null;const no=new v.OlP("TRANSITION_ID"),CI=[{provide:v.ip1,useFactory:function bI(r,t,e){return()=>{e.get(v.CZH).donePromise.then(()=>{const i=ee(),n=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<n.length;s++)i.remove(n[s])})}},deps:[no,it,v.zs3],multi:!0}];let SI=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const $C=new v.OlP("EventManagerPlugins");let ny=(()=>{class r{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(n=>n.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,n){return this._findPluginFor(i).addEventListener(e,i,n)}addGlobalEventListener(e,i,n){return this._findPluginFor(i).addGlobalEventListener(e,i,n)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const n=this._plugins;for(let s=0;s<n.length;s++){const o=n[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG($C),v.LFG(v.R0b))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class um{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const n=ee().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,i)}}let cm=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(n=>{this._stylesSet.has(n)||(this._stylesSet.add(n),i.add(n))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),xp=(()=>{class r extends cm{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,n){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,n.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(YC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,n)=>{this._addStylesToHost(e,n,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(YC))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();function YC(r){ee().remove(r)}const ZC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lE=/%COMP%/g;function ry(r,t,e){for(let i=0;i<t.length;i++){let n=t[i];Array.isArray(n)?ry(r,n,e):(n=n.replace(lE,r),e.push(n))}return e}function sy(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let hE=(()=>{class r{constructor(e,i,n){this.eventManager=e,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new yc(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case v.ifc.Emulated:{let n=this.rendererByCompId.get(i.id);return n||(n=new uE(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,n)),n.applyToHost(e),n}case 1:case v.ifc.ShadowDom:return new xI(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const n=ry(i.id,i.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(ny),v.LFG(xp),v.LFG(v.AFp))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class yc{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(ZC[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(pm(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(pm(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;const s=ZC[n];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const n=ZC[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&(v.JOm.DashCase|v.JOm.Important)?t.style.setProperty(e,i,n&v.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&v.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,sy(i)):this.eventManager.addEventListener(t,e,sy(i))}}function pm(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class uE extends yc{constructor(t,e,i,n){super(t),this.component=i;const s=ry(n+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function dm(r){return"_ngcontent-%COMP%".replace(lE,r)}(n+"-"+i.id),this.hostAttr=function QC(r){return"_nghost-%COMP%".replace(lE,r)}(n+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class xI extends yc{constructor(t,e,i,n){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ry(n.id,n.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Dp=(()=>{class r extends um{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,n){return e.addEventListener(i,n,!1),()=>this.removeEventListener(e,i,n)}removeEventListener(e,i,n){return e.removeEventListener(i,n)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const DI=["alt","control","meta","shift"],cd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},t0={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let oy=(()=>{class r extends um{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,i,n){const s=r.parseEventName(i),o=r.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ee().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const s=r._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),DI.forEach(h=>{const u=i.indexOf(h);u>-1&&(i.splice(u,1),o+=h+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=n,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let n=cd[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(n=e.code,s="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),DI.forEach(o=>{o!==n&&(0,t0[o])(e)&&(s+=o+".")}),s+=n,s===i)}static eventCallback(e,i,n){return s=>{r.matchEventFullKeyCode(s,e)&&n.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const fm=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function AI(){Jf.makeCurrent()},multi:!0},{provide:it,useFactory:function n0(){return(0,v.RDi)(document),document},deps:[]}]),gm=new v.OlP(""),mm=[{provide:v.rWj,useClass:class wI{addToWindow(t){v.dqk.getAngularTestability=(i,n=!0)=>{const s=t.findTestabilityInTree(i,n);if(null==s)throw new Error("Could not find testability for element.");return s},v.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(i=>{const n=v.dqk.getAllAngularTestabilities();let s=n.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};n.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?ee().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],ly=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Ip(){return new v.qLn},deps:[]},{provide:$C,useClass:Dp,multi:!0,deps:[it,v.R0b,v.Lbi]},{provide:$C,useClass:oy,multi:!0,deps:[it]},{provide:hE,useClass:hE,deps:[ny,xp,v.AFp]},{provide:v.FYo,useExisting:hE},{provide:cm,useExisting:xp},{provide:xp,useClass:xp,deps:[it]},{provide:ny,useClass:ny,deps:[$C,v.R0b]},{provide:_l,useClass:SI,deps:[]},[]];let tg=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:v.AFp,useValue:e.appId},{provide:no,useExisting:v.AFp},CI]}}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(gm,12))},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[...ly,...mm],imports:[Vh,v.hGG]}),r})(),dd=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it))},r.\u0275prov=v.Yz7({token:r,factory:function(e){let i=null;return i=e?new e:function vm(){return new dd((0,v.LFG)(it))}(),i},providedIn:"root"}),r})();typeof window<"u"&&window;var Hr=ne(8996),Za=ne(9751);const{isArray:yE}=Array,{getPrototypeOf:MI,prototype:ul,keys:bc}=Object;function Sm(r){if(1===r.length){const t=r[0];if(yE(t))return{args:t,keys:null};if(function _p(r){return r&&"object"==typeof r&&MI(r)===ul}(t)){const e=bc(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:r,keys:null}}var qh=ne(8421),fd=ne(7669),co=ne(5403),en=ne(4004);const{isArray:ng}=Array;function s0(r){return(0,en.U)(t=>function bE(r,t){return ng(t)?r(...t):r(t)}(r,t))}function kl(r,t){return r.reduce((e,i,n)=>(e[i]=t[n],e),{})}let Cc=(()=>{class r{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.Qsj),v.Y36(v.SBq))},r.\u0275dir=v.lG2({type:r}),r})(),kp=(()=>{class r extends Cc{}return r.\u0275fac=function(){let t;return function(i){return(t||(t=v.n5z(r)))(i||r)}}(),r.\u0275dir=v.lG2({type:r,features:[v.qOj]}),r})();const Ho=new v.OlP("NgValueAccessor"),OI={provide:Ho,useExisting:(0,v.Gpc)(()=>rg),multi:!0},PI=new v.OlP("CompositionEventMode");let rg=(()=>{class r extends Cc{constructor(e,i,n){super(e,i),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function a0(){const r=ee()?ee().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(PI,8))},r.\u0275dir=v.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&v.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[v._Bn([OI]),v.qOj]}),r})();function Gh(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function Tm(r){return null!=r&&"number"==typeof r.length}const Vo=new v.OlP("NgValidators"),_u=new v.OlP("NgAsyncValidators"),sg=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class gy{static min(t){return function my(r){return t=>{if(Gh(t.value)||Gh(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function CE(r){return t=>{if(Gh(t.value)||Gh(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function vy(r){return Gh(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function Rp(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function gd(r){return Gh(r.value)||sg.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function wE(r){return t=>Gh(t.value)||!Tm(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Do(r){return t=>Tm(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function xm(r){if(!r)return Dm;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),i=>{if(Gh(i.value))return null;const n=i.value;return t.test(n)?null:{pattern:{requiredPattern:e,actualValue:n}}}}(t)}static nullValidator(t){return null}static compose(t){return vd(t)}static composeAsync(t){return yd(t)}}function Dm(r){return null}function yy(r){return null!=r}function md(r){return(0,v.QGY)(r)?(0,Hr.D)(r):r}function SE(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function EE(r,t){return t.map(e=>e(r))}function by(r){return r.map(t=>function l0(r){return!r.validate}(t)?t:e=>t.validate(e))}function vd(r){if(!r)return null;const t=r.filter(yy);return 0==t.length?null:function(e){return SE(EE(e,t))}}function og(r){return null!=r?vd(by(r)):null}function yd(r){if(!r)return null;const t=r.filter(yy);return 0==t.length?null:function(e){return function o0(...r){const t=(0,fd.jO)(r),{args:e,keys:i}=Sm(r),n=new Za.y(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,h=o;for(let u=0;u<o;u++){let d=!1;(0,qh.Xf)(e[u]).subscribe((0,co.x)(s,m=>{d||(d=!0,h--),a[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(h||s.next(i?kl(i,a):a),s.complete())}))}});return t?n.pipe(s0(t)):n}(EE(e,t).map(md)).pipe((0,en.U)(SE))}}function Cy(r){return null!=r?yd(by(r)):null}function Im(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function ag(r){return r._rawValidators}function lg(r){return r._rawAsyncValidators}function Am(r){return r?Array.isArray(r)?r:[r]:[]}function _m(r,t){return Array.isArray(r)?r.includes(t):r===t}function TE(r,t){const e=Am(t);return Am(r).forEach(n=>{_m(e,n)||e.push(n)}),e}function bd(r,t){return Am(t).filter(e=>!_m(r,e))}class Cd{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=og(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Cy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class cl extends Cd{get formDirective(){return null}get path(){return null}}class Mp extends Cd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class h0{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let DE=(()=>{class r extends h0{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Mp,2))},r.\u0275dir=v.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&v.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[v.qOj]}),r})(),hg=(()=>{class r extends h0{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(cl,10))},r.\u0275dir=v.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&v.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[v.qOj]}),r})();const Op="VALID",km="INVALID",Pp="PENDING",wd="DISABLED";function wy(r){return(Ey(r)?r.validators:r)||null}function Sy(r){return Array.isArray(r)?og(r):r||null}function g0(r,t){return(Ey(t)?t.asyncValidators:r)||null}function m0(r){return Array.isArray(r)?Cy(r):r||null}function Ey(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Fp{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Sy(this._rawValidators),this._composedAsyncValidatorFn=m0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Op}get invalid(){return this.status===km}get pending(){return this.status==Pp}get disabled(){return this.status===wd}get enabled(){return this.status!==wd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Sy(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=m0(t)}addValidators(t){this.setValidators(TE(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(TE(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(bd(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(bd(t,this._rawAsyncValidators))}hasValidator(t){return _m(this._rawValidators,t)}hasAsyncValidator(t){return _m(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Pp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wd,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Op,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Op||this.status===Pp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wd:Op}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Pp,this._hasOwnPendingAsyncValidator=!0;const e=md(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,n)=>i&&i._find(n),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new v.vpe,this.statusChanges=new v.vpe}_calculateStatus(){return this._allControlsDisabled()?wd:this.errors?km:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pp)?Pp:this._anyControlsHaveStatus(km)?km:Op}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ey(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class Rm extends Fp{constructor(t,e,i){super(wy(e),g0(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function wc(r,t,e){r._forEachChild((i,n)=>{if(void 0===e[n])throw new v.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function Ty(r,t,e){const i=r.controls;if(!(t?Object.keys(i):i).length)throw new v.vHH(1e3,"");if(!i[e])throw new v.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const n=this.controls[i];n&&n.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,n)=>{i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,n)=>((i.enabled||this.disabled)&&(e[n]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((n,s)=>{i=e(i,n,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function Np(r,t){D(r,t),t.valueAccessor.writeValue(r.value),r.disabled&&t.valueAccessor.setDisabledState?.(!0),function P(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&te(r,t)})}(r,t),function Ge(r,t){const e=(i,n)=>{t.valueAccessor.writeValue(i),n&&t.viewToModelUpdate(i)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function K(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&te(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function R(r,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function xy(r,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),A(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Dy(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function D(r,t){const e=ag(r);null!==t.validator?r.setValidators(Im(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const i=lg(r);null!==t.asyncValidator?r.setAsyncValidators(Im(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const n=()=>r.updateValueAndValidity();Dy(t._rawValidators,n),Dy(t._rawAsyncValidators,n)}function A(r,t){let e=!1;if(null!==r){if(null!==t.validator){const n=ag(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.validator);s.length!==n.length&&(e=!0,r.setValidators(s))}}if(null!==t.asyncValidator){const n=lg(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.asyncValidator);s.length!==n.length&&(e=!0,r.setAsyncValidators(s))}}}const i=()=>{};return Dy(t._rawValidators,i),Dy(t._rawAsyncValidators,i),e}function te(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Rt(r,t){D(r,t)}function Iy(r,t){r._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const b0={provide:cl,useExisting:(0,v.Gpc)(()=>Ru)},Bp=(()=>Promise.resolve())();let Ru=(()=>{class r extends cl{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new v.vpe,this.form=new Rm({},og(e),Cy(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Bp.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Np(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Bp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Bp.then(()=>{const i=this._findContainer(e.path),n=new Rm({});Rt(n,e),i.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Bp.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Bp.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Iy(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Vo,10),v.Y36(_u,10))},r.\u0275dir=v.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&v.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([b0]),v.qOj]}),r})();function Ay(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function Lm(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const Sd=class extends Fp{constructor(t=null,e,i){super(wy(e),g0(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ey(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Lm(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Ay(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Ay(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Lm(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let cg=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),cP=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})();const GI=new v.OlP("NgModelWithFormControlWarning"),pP={provide:cl,useExisting:(0,v.Gpc)(()=>Ed)};let Ed=(()=>{class r extends cl{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new v.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(A(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Np(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){xy(e.control||null,e,!1),function kE(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,Iy(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,n=this.form.get(e.path);i!==n&&(xy(i||null,e),(r=>r instanceof Sd)(n)&&(Np(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Rt(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Di(r,t){return A(r,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){D(this.form,this),this._oldForm&&A(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Vo,10),v.Y36(_u,10))},r.\u0275dir=v.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&v.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([pP]),v.qOj,v.TTD]}),r})();const LE={provide:Mp,useExisting:(0,v.Gpc)(()=>Hp)};let Hp=(()=>{class r extends Mp{constructor(e,i,n,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new v.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=function Mm(r,t){if(!t)return null;let e,i,n;return Array.isArray(t),t.forEach(s=>{s.constructor===rg?e=s:function y0(r){return Object.getPrototypeOf(r.constructor)===kp}(s)?i=s:n=s}),n||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Sc(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function v0(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(v.Y36(cl,13),v.Y36(Vo,10),v.Y36(_u,10),v.Y36(Ho,10),v.Y36(GI,8))},r.\u0275dir=v.lG2({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[v._Bn([LE]),v.qOj,v.TTD]}),r})(),i5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[cP]}),r})(),lZ=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[i5]}),r})(),iA=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:GI,useValue:e.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[i5]}),r})();function $i(...r){const t=(0,fd.yG)(r);return(0,Hr.D)(r,t)}var Rl=ne(5577),FE=ne(576);function Td(r,t){return(0,FE.m)(t)?(0,Rl.z)(r,t,1):(0,Rl.z)(r,1)}var Xa=ne(4482);function Th(r,t){return(0,Xa.e)((e,i)=>{let n=0;e.subscribe((0,co.x)(i,s=>r.call(t,s,n++)&&i.next(s)))})}class My{}class TP{}class Vp{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const n=e.slice(0,i),s=n.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(n,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const n=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(n,i),this.maybeSetNormalizedName(e,n))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Vp?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Vp;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Vp?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const n=("a"===t.op?this.headers.get(e):void 0)||[];n.push(...i),this.headers.set(e,n);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class xP{encodeKey(t){return DP(t)}encodeValue(t){return DP(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const s5=/%(\d[a-f0-9])/gi,o5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function DP(r){return encodeURIComponent(r).replace(s5,(t,e)=>o5[e]??t)}function Ly(r){return`${r}`}class dg{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new xP,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function r5(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(n=>{const s=n.indexOf("="),[o,a]=-1==s?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,s)),t.decodeValue(n.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],n=Array.isArray(i)?i.map(Ly):[Ly(i)];this.map.set(e,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const n=t[i];Array.isArray(n)?n.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:n,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new dg({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Ly(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const n=i.indexOf(Ly(t.value));-1!==n&&i.splice(n,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class a5{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function AP(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function _P(r){return typeof Blob<"u"&&r instanceof Blob}function Ml(r){return typeof FormData<"u"&&r instanceof FormData}class Oy{constructor(t,e,i,n){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function IP(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Vp),this.context||(this.context=new a5),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new dg,this.urlWithParams=e}serializeBody(){return null===this.body?null:AP(this.body)||_P(this.body)||Ml(this.body)||function nA(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Ml(this.body)?null:_P(this.body)?this.body.type||null:AP(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,h=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,m)=>d.set(m,t.setHeaders[m]),l)),t.setParams&&(h=Object.keys(t.setParams).reduce((d,m)=>d.set(m,t.setParams[m]),h)),new Oy(e,i,s,{params:h,headers:l,context:u,reportProgress:a,responseType:n,withCredentials:o})}}var zo=(()=>((zo=zo||{})[zo.Sent=0]="Sent",zo[zo.UploadProgress=1]="UploadProgress",zo[zo.ResponseHeader=2]="ResponseHeader",zo[zo.DownloadProgress=3]="DownloadProgress",zo[zo.Response=4]="Response",zo[zo.User=5]="User",zo))();class Qa{constructor(t,e=200,i="OK"){this.headers=t.headers||new Vp,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Fm extends Qa{constructor(t={}){super(t),this.type=zo.ResponseHeader}clone(t={}){return new Fm({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class w0 extends Qa{constructor(t={}){super(t),this.type=zo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new w0({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class kP extends Qa{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function rA(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let RP=(()=>{class r{constructor(e){this.handler=e}request(e,i,n={}){let s;if(e instanceof Oy)s=e;else{let l,h;l=n.headers instanceof Vp?n.headers:new Vp(n.headers),n.params&&(h=n.params instanceof dg?n.params:new dg({fromObject:n.params})),s=new Oy(e,i,void 0!==n.body?n.body:null,{headers:l,context:n.context,params:h,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const o=$i(s).pipe(Td(l=>this.handler.handle(l)));if(e instanceof Oy||"events"===n.observe)return o;const a=o.pipe(Th(l=>l instanceof w0));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe((0,en.U)(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe((0,en.U)(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe((0,en.U)(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe((0,en.U)(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new dg).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,n={}){return this.request("PATCH",e,rA(n,i))}post(e,i,n={}){return this.request("POST",e,rA(n,i))}put(e,i,n={}){return this.request("PUT",e,rA(n,i))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(My))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class MP{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const sA=new v.OlP("HTTP_INTERCEPTORS");let l5=(()=>{class r{intercept(e,i){return i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const u5=/^\)\]\}',?\n/;let c5=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Za.y(i=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((y,C)=>n.setRequestHeader(y,C.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const y=e.detectContentTypeHeader();null!==y&&n.setRequestHeader("Content-Type",y)}if(e.responseType){const y=e.responseType.toLowerCase();n.responseType="json"!==y?y:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const y=n.statusText||"OK",C=new Vp(n.getAllResponseHeaders()),S=function bZ(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(n)||e.url;return o=new Fm({headers:C,status:n.status,statusText:y,url:S}),o},l=()=>{let{headers:y,status:C,statusText:S,url:I}=a(),k=null;204!==C&&(k=typeof n.response>"u"?n.responseText:n.response),0===C&&(C=k?200:0);let O=C>=200&&C<300;if("json"===e.responseType&&"string"==typeof k){const L=k;k=k.replace(u5,"");try{k=""!==k?JSON.parse(k):null}catch(B){k=L,O&&(O=!1,k={error:B,text:k})}}O?(i.next(new w0({body:k,headers:y,status:C,statusText:S,url:I||void 0})),i.complete()):i.error(new kP({error:k,headers:y,status:C,statusText:S,url:I||void 0}))},h=y=>{const{url:C}=a(),S=new kP({error:y,status:n.status||0,statusText:n.statusText||"Unknown Error",url:C||void 0});i.error(S)};let u=!1;const d=y=>{u||(i.next(a()),u=!0);let C={type:zo.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(C.total=y.total),"text"===e.responseType&&!!n.responseText&&(C.partialText=n.responseText),i.next(C)},m=y=>{let C={type:zo.UploadProgress,loaded:y.loaded};y.lengthComputable&&(C.total=y.total),i.next(C)};return n.addEventListener("load",l),n.addEventListener("error",h),n.addEventListener("timeout",h),n.addEventListener("abort",h),e.reportProgress&&(n.addEventListener("progress",d),null!==s&&n.upload&&n.upload.addEventListener("progress",m)),n.send(s),i.next({type:zo.Sent}),()=>{n.removeEventListener("error",h),n.removeEventListener("abort",h),n.removeEventListener("load",l),n.removeEventListener("timeout",h),e.reportProgress&&(n.removeEventListener("progress",d),null!==s&&n.upload&&n.upload.removeEventListener("progress",m)),n.readyState!==n.DONE&&n.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(_l))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const NE=new v.OlP("XSRF_COOKIE_NAME"),LP=new v.OlP("XSRF_HEADER_NAME");class Ec{}let oA=(()=>{class r{constructor(e,i,n){this.doc=e,this.platform=i,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Ea(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(it),v.LFG(v.Lbi),v.LFG(NE))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),E0=(()=>{class r{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Ec),v.LFG(LP))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),d5=(()=>{class r{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(sA,[]);this.chain=i.reduceRight((n,s)=>new MP(n,s),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(TP),v.LFG(v.zs3))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),T0=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:E0,useClass:l5}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:NE,useValue:e.cookieName}:[],e.headerName?{provide:LP,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[E0,{provide:sA,useExisting:E0,multi:!0},{provide:Ec,useClass:oA},{provide:NE,useValue:"XSRF-TOKEN"},{provide:LP,useValue:"X-XSRF-TOKEN"}]}),r})(),f5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[RP,{provide:My,useClass:d5},c5,{provide:TP,useExisting:c5}],imports:[T0.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),r})();var Mu=ne(7579);class Lu extends Mu.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const zp=(0,ne(3888).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var fg=ne(4671),PP=ne(9672);function FP(...r){const t=(0,fd.yG)(r),e=(0,fd.jO)(r),{args:i,keys:n}=Sm(r);if(0===i.length)return(0,Hr.D)([],t);const s=new Za.y(function aA(r,t,e=fg.y){return i=>{NP(t,()=>{const{length:n}=r,s=new Array(n);let o=n,a=n;for(let l=0;l<n;l++)NP(t,()=>{const h=(0,Hr.D)(r[l],t);let u=!1;h.subscribe((0,co.x)(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,n?o=>kl(n,o):fg.y));return e?s.pipe(s0(e)):s}function NP(r,t,e){r?(0,PP.f)(e,r,t):t()}var x0=ne(8189);function lA(...r){return function g5(){return(0,x0.J)(1)}()((0,Hr.D)(r,(0,fd.yG)(r)))}function BP(r){return new Za.y(t=>{(0,qh.Xf)(r()).subscribe(t)})}var m5=ne(9635);function Py(r,t){const e=(0,FE.m)(r)?r:()=>r,i=n=>n.error(e());return new Za.y(t?n=>t.schedule(i,0,n):i)}var jp=ne(515),hA=ne(727);function D0(){return(0,Xa.e)((r,t)=>{let e=null;r._refCount++;const i=(0,co.x)(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const n=r._connection,s=e;e=null,n&&(!s||n===s)&&n.unsubscribe(),t.unsubscribe()});r.subscribe(i),i.closed||(e=r.connect())})}class HP extends Za.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Xa.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new hA.w0;const e=this.getSubject();t.add(this.source.subscribe((0,co.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=hA.w0.EMPTY)}return t}refCount(){return D0()(this)}}function sa(r,t){return(0,Xa.e)((e,i)=>{let n=null,s=0,o=!1;const a=()=>o&&!n&&i.complete();e.subscribe((0,co.x)(i,l=>{n?.unsubscribe();let h=0;const u=s++;(0,qh.Xf)(r(l,u)).subscribe(n=(0,co.x)(i,d=>i.next(t?t(l,d,u,h++):d),()=>{n=null,a()}))},()=>{o=!0,a()}))})}function Fy(r){return r<=0?()=>jp.E:(0,Xa.e)((t,e)=>{let i=0;t.subscribe((0,co.x)(e,n=>{++i<=r&&(e.next(n),r<=i&&e.complete())}))})}function I0(...r){const t=(0,fd.yG)(r);return(0,Xa.e)((e,i)=>{(t?lA(r,e,t):lA(r,e)).subscribe(i)})}function xd(r){return(0,Xa.e)((t,e)=>{let i=!1;t.subscribe((0,co.x)(e,n=>{i=!0,e.next(n)},()=>{i||e.next(r),e.complete()}))})}function uA(r=VP){return(0,Xa.e)((t,e)=>{let i=!1;t.subscribe((0,co.x)(e,n=>{i=!0,e.next(n)},()=>i?e.complete():e.error(r())))})}function VP(){return new zp}function Up(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Th((n,s)=>r(n,s,i)):fg.y,Fy(1),e?xd(t):uA(()=>new zp))}var Ql=ne(8505);function Tc(r){return(0,Xa.e)((t,e)=>{let s,i=null,n=!1;i=t.subscribe((0,co.x)(e,void 0,void 0,o=>{s=(0,qh.Xf)(r(o,Tc(r)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(e))})}function v5(r,t,e,i,n){return(s,o)=>{let a=e,l=t,h=0;s.subscribe((0,co.x)(o,u=>{const d=h++;l=a?r(l,u,d):(a=!0,u),i&&o.next(l)},n&&(()=>{a&&o.next(l),o.complete()})))}}function gg(r,t){return(0,Xa.e)(v5(r,t,arguments.length>=2,!0))}function BE(r){return r<=0?()=>jp.E:(0,Xa.e)((t,e)=>{let i=[];t.subscribe((0,co.x)(e,n=>{i.push(n),r<i.length&&i.shift()},()=>{for(const n of i)e.next(n);e.complete()},void 0,()=>{i=null}))})}function cA(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Th((n,s)=>r(n,s,i)):fg.y,BE(1),e?xd(t):uA(()=>new zp))}function Ny(r){return(0,Xa.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}const Zn="primary",By=Symbol("RouteTitle");class pA{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Nm(r){return new pA(r)}function fA(r,t,e){const i=e.path.split("/");if(i.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const n={};for(let s=0;s<i.length;s++){const o=i[s],a=r[s];if(o.startsWith(":"))n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function Dd(r,t){const e=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let n;for(let s=0;s<e.length;s++)if(n=e[s],!gA(r[n],t[n]))return!1;return!0}function gA(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),i=[...t].sort();return e.every((n,s)=>i[s]===n)}return r===t}function jP(r){return Array.prototype.concat.apply([],r)}function UP(r){return r.length>0?r[r.length-1]:null}function Ba(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Wp(r){return(0,v.CqO)(r)?r:(0,v.QGY)(r)?(0,Hr.D)(Promise.resolve(r)):$i(r)}const b5={exact:function Ou(r,t,e){if(!Hm(r.segments,t.segments)||!HE(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!Ou(r.children[i],t.children[i],e))return!1;return!0},subset:vA},mA={exact:function C5(r,t){return Dd(r,t)},subset:function w5(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>gA(r[e],t[e]))},ignored:()=>!0};function GP(r,t,e){return b5[e.paths](r.root,t.root,e.matrixParams)&&mA[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function vA(r,t,e){return KP(r,t,t.segments,e)}function KP(r,t,e,i){if(r.segments.length>e.length){const n=r.segments.slice(0,e.length);return!(!Hm(n,e)||t.hasChildren()||!HE(n,e,i))}if(r.segments.length===e.length){if(!Hm(r.segments,e)||!HE(r.segments,e,i))return!1;for(const n in t.children)if(!r.children[n]||!vA(r.children[n],t.children[n],i))return!1;return!0}{const n=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!!(Hm(r.segments,n)&&HE(r.segments,n,i)&&r.children[Zn])&&KP(r.children[Zn],t,s,i)}}function HE(r,t,e){return t.every((i,n)=>mA[e](r[n].parameters,i.parameters))}class Bm{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nm(this.queryParams)),this._queryParamMap}toString(){return $P.serialize(this)}}class br{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ba(e,(i,n)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _0(this)}}class Hy{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Nm(this.parameters)),this._parameterMap}toString(){return x5(this)}}function Hm(r,t){return r.length===t.length&&r.every((e,i)=>e.path===t[i].path)}let Vn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return new VE},providedIn:"root"}),r})();class VE{parse(t){const e=new TZ(t);return new Bm(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${k0(t.root,!0)}`,i=function QP(r){const t=Object.keys(r).map(e=>{const i=r[e];return Array.isArray(i)?i.map(n=>`${R0(e)}=${R0(n)}`).join("&"):`${R0(e)}=${R0(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function T5(r){return encodeURI(r)}(t.fragment)}`:""}`}}const $P=new VE;function _0(r){return r.segments.map(t=>x5(t)).join("/")}function k0(r,t){if(!r.hasChildren())return _0(r);if(t){const e=r.children[Zn]?k0(r.children[Zn],!1):"",i=[];return Ba(r.children,(n,s)=>{s!==Zn&&i.push(`${s}:${k0(n,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function E5(r,t){let e=[];return Ba(r.children,(i,n)=>{n===Zn&&(e=e.concat(t(i,n)))}),Ba(r.children,(i,n)=>{n!==Zn&&(e=e.concat(t(i,n)))}),e}(r,(i,n)=>n===Zn?[k0(r.children[Zn],!1)]:[`${n}:${k0(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[Zn]?`${_0(r)}/${e[0]}`:`${_0(r)}/(${e.join("//")})`}}function YP(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function R0(r){return YP(r).replace(/%3B/gi,";")}function zE(r){return YP(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jE(r){return decodeURIComponent(r)}function ZP(r){return jE(r.replace(/\+/g,"%20"))}function x5(r){return`${zE(r.path)}${function XP(r){return Object.keys(r).map(t=>`;${zE(t)}=${zE(r[t])}`).join("")}(r.parameters)}`}const Vm=/^[^\/()?;=#]+/;function UE(r){const t=r.match(Vm);return t?t[0]:""}const yA=/^[^=?&#]+/,D5=/^[^&#]+/;class TZ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new br([],{}):new br([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Zn]=new br(t,e)),i}parseSegment(){const t=UE(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(t),new Hy(jE(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=UE(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const n=UE(this.remaining);n&&(i=n,this.capture(i))}t[jE(e)]=jE(i)}parseQueryParam(t){const e=function bA(r){const t=r.match(yA);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function EZ(r){const t=r.match(D5);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const n=ZP(e),s=ZP(i);if(t.hasOwnProperty(n)){let o=t[n];Array.isArray(o)||(o=[o],t[n]=o),o.push(s)}else t[n]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=UE(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new v.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Zn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Zn]:new br([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new v.vHH(4011,!1)}}function JP(r){return r.segments.length>0?new br([],{[Zn]:r}):r}function WE(r){const t={};for(const i of Object.keys(r.children)){const s=WE(r.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function e1(r){if(1===r.numberOfChildren&&r.children[Zn]){const t=r.children[Zn];return new br(r.segments.concat(t.segments),t.children)}return r}(new br(r.segments,t))}function Vy(r){return r instanceof Bm}function qE(r,t,e,i,n){if(0===e.length)return jy(t.root,t.root,t.root,i,n);const s=function r1(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new n1(!0,0,r);let t=0,e=!1;const i=r.reduce((n,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ba(s.outlets,(l,h)=>{a[h]="string"==typeof l?l.split("/"):l}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return"string"!=typeof s?[...n,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&n.push(a))}),n):[...n,s]},[]);return new n1(e,t,i)}(e);return s.toRoot()?jy(t.root,t.root,new br([],{}),i,n):function o(l){const h=function A5(r,t,e,i){if(r.isAbsolute)return new Uy(t.root,!0,0);if(-1===i)return new Uy(e,e===t.root,0);return function wA(r,t,e){let i=r,n=t,s=e;for(;s>n;){if(s-=n,i=i.parent,!i)throw new v.vHH(4005,!1);n=i.segments.length}return new Uy(i,!1,n-s)}(e,i+(L0(r.commands[0])?0:1),r.numberOfDoubleDots)}(s,t,r.snapshot?._urlSegment,l),u=h.processChildren?GE(h.segmentGroup,h.index,s.commands):O0(h.segmentGroup,h.index,s.commands);return jy(t.root,h.segmentGroup,u,i,n)}(r.snapshot?._lastPathIndex)}function L0(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function zy(r){return"object"==typeof r&&null!=r&&r.outlets}function jy(r,t,e,i,n){let o,s={};i&&Ba(i,(l,h)=>{s[h]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=r===t?e:i1(r,t,e);const a=JP(WE(o));return new Bm(a,s,n)}function i1(r,t,e){const i={};return Ba(r.children,(n,s)=>{i[s]=n===t?e:i1(n,t,e)}),new br(r.segments,i)}class n1{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&L0(i[0]))throw new v.vHH(4003,!1);const n=i.find(zy);if(n&&n!==UP(i))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Uy{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function O0(r,t,e){if(r||(r=new br([],{})),0===r.segments.length&&r.hasChildren())return GE(r,t,e);const i=function SA(r,t,e){let i=0,n=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=e.length)return s;const o=r.segments[n],a=e[i];if(zy(a))break;const l=`${a}`,h=i<e.length-1?e[i+1]:null;if(n>0&&void 0===l)break;if(l&&h&&"object"==typeof h&&void 0===h.outlets){if(!TA(l,h,o))return s;i+=2}else{if(!TA(l,{},o))return s;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}(r,t,e),n=e.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const s=new br(r.segments.slice(0,i.pathIndex),{});return s.children[Zn]=new br(r.segments.slice(i.pathIndex),r.children),GE(s,0,n)}return i.match&&0===n.length?new br(r.segments,{}):i.match&&!r.hasChildren()?EA(r,t,e):i.match?GE(r,0,n):EA(r,t,e)}function GE(r,t,e){if(0===e.length)return new br(r.segments,{});{const i=function o1(r){return zy(r[0])?r[0].outlets:{[Zn]:r}}(e),n={};return Ba(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(n[o]=O0(r.children[o],t,s))}),Ba(r.children,(s,o)=>{void 0===i[o]&&(n[o]=s)}),new br(r.segments,n)}}function EA(r,t,e){const i=r.segments.slice(0,t);let n=0;for(;n<e.length;){const s=e[n];if(zy(s)){const l=xZ(s.outlets);return new br(i,l)}if(0===n&&L0(e[0])){i.push(new Hy(r.segments[t].path,zm(e[0]))),n++;continue}const o=zy(s)?s.outlets[Zn]:`${s}`,a=n<e.length-1?e[n+1]:null;o&&a&&L0(a)?(i.push(new Hy(o,zm(a))),n+=2):(i.push(new Hy(o,{})),n++)}return new br(i,{})}function xZ(r){const t={};return Ba(r,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=EA(new br([],{}),0,e))}),t}function zm(r){const t={};return Ba(r,(e,i)=>t[i]=`${e}`),t}function TA(r,t,e){return r==e.path&&Dd(t,e.parameters)}class Id{constructor(t,e){this.id=t,this.url=e}}class Wy extends Id{constructor(t,e,i="imperative",n=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class dl extends Id{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class P0 extends Id{constructor(t,e,i,n){super(t,e),this.reason=i,this.code=n,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class a1 extends Id{constructor(t,e,i,n){super(t,e),this.error=i,this.target=n,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xA extends Id{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qp extends Id{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DA extends Id{constructor(t,e,i,n,s){super(t,e),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class l1 extends Id{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IA extends Id{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DZ{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class h1{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IZ{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KE{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $E{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AA{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class YE{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _5{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=kA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=kA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=RA(t,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return RA(t,this._root).map(e=>e.value)}}function kA(r,t){if(r===t.value)return t;for(const e of t.children){const i=kA(r,e);if(i)return i}return null}function RA(r,t){if(r===t.value)return[t];for(const e of t.children){const i=RA(r,e);if(i.length)return i.unshift(t),i}return[]}class Gp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function qy(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class MA extends _5{constructor(t,e){super(t),this.snapshot=e,c1(this,t)}toString(){return this.snapshot.toString()}}function k5(r,t){const e=function R5(r,t){const o=new ZE([],{},{},"",{},Zn,t,null,r.root,-1,{});return new XE("",new Gp(o,[]))}(r,t),i=new Lu([new Hy("",{})]),n=new Lu({}),s=new Lu({}),o=new Lu({}),a=new Lu(""),l=new Gy(i,n,o,a,s,Zn,t,e.root);return l.snapshot=e.root,new MA(new Gp(l,[]),e)}class Gy{constructor(t,e,i,n,s,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe((0,en.U)(h=>h[By]))??$i(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,en.U)(t=>Nm(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,en.U)(t=>Nm(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LA(r,t="emptyOnly"){const e=r.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const n=e[i],s=e[i-1];if(n.routeConfig&&""===n.routeConfig.path)i--;else{if(s.component)break;i--}}return function u1(r){return r.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class ZE{constructor(t,e,i,n,s,o,a,l,h,u,d,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[By],this.routeConfig=l,this._urlSegment=h,this._lastPathIndex=u,this._correctedLastPathIndex=m??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XE extends _5{constructor(t,e){super(e),this.url=t,c1(this,e)}toString(){return M5(this._root)}}function c1(r,t){t.value._routerState=r,t.children.forEach(e=>c1(r,e))}function M5(r){const t=r.children.length>0?` { ${r.children.map(M5).join(", ")} } `:"";return`${r.value}${t}`}function d1(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Dd(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),Dd(t.params,e.params)||r.params.next(e.params),function A0(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Dd(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),Dd(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function p1(r,t){const e=Dd(r.params,t.params)&&function S5(r,t){return Hm(r,t)&&r.every((e,i)=>Dd(e.parameters,t[i].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||p1(r.parent,t.parent))}function QE(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const n=function _Z(r,t,e){return t.children.map(i=>{for(const n of e.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return QE(r,i,n);return QE(r,i)})}(r,t,e);return new Gp(i,n)}{if(r.shouldAttach(t.value)){const s=r.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>QE(r,a)),o}}const i=function kZ(r){return new Gy(new Lu(r.url),new Lu(r.params),new Lu(r.queryParams),new Lu(r.fragment),new Lu(r.data),r.outlet,r.component,r)}(t.value),n=t.children.map(s=>QE(r,s));return new Gp(i,n)}}const f1="ngNavigationCancelingError";function L5(r,t){const{redirectTo:e,navigationBehaviorOptions:i}=Vy(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=Kp(!1,0,t);return n.url=e,n.navigationBehaviorOptions=i,n}function Kp(r,t,e){const i=new Error("NavigationCancelingError: "+(r||""));return i[f1]=!0,i.cancellationCode=t,e&&(i.url=e),i}function JE(r){return g1(r)&&Vy(r.url)}function g1(r){return r&&r[f1]}class m1{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new jm,this.attachRef=null}}let jm=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const n=this.getOrCreateContext(e);n.outlet=i,this.contexts.set(e,n)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new m1,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const F0=!1;let N0=(()=>{class r{constructor(e,i,n,s,o){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=n||Zn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,F0);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,F0);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,F0);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new v.vHH(4013,F0);this._activatedRoute=e;const n=this.location,o=e._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new O5(e,a,n.injector);if(i&&function mg(r){return!!r.resolveComponentFactory}(i)){const h=i.resolveComponentFactory(o);this.activated=n.createComponent(h,n.length,l)}else this.activated=n.createComponent(o,{index:n.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(jm),v.Y36(v.s_b),v.$8M("name"),v.Y36(v.sBO),v.Y36(v.lqb))},r.\u0275dir=v.lG2({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),r})();class O5{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Gy?this.route:t===jm?this.childContexts:this.parent.get(t,e)}}let eT=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(e,i){1&e&&v._UZ(0,"router-outlet")},dependencies:[N0],encapsulation:2}),r})();function v1(r,t){return r.providers&&!r._injector&&(r._injector=(0,v.MMx)(r.providers,t,`Route: ${r.path}`)),r._injector??t}function B0(r){const t=r.children&&r.children.map(B0),e=t?{...r,children:t}:{...r};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Zn&&(e.component=eT),e}function Jl(r){return r.outlet||Zn}function PA(r,t){const e=r.filter(i=>Jl(i)===t);return e.push(...r.filter(i=>Jl(i)!==t)),e}function Zy(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class NA{constructor(t,e,i,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=n}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),d1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const n=qy(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,n[o],i),delete n[o]}),Ba(n,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(n===s)if(n.component){const o=i.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=qy(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=qy(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const n=qy(e);t.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],i),this.forwardEvent(new AA(s.value.snapshot))}),t.children.length&&this.forwardEvent(new KE(t.value.snapshot))}activateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(d1(n),n===s)if(n.component){const o=i.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(n.component){const o=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),d1(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=Zy(n.snapshot),l=a?.get(v._Vd)??null;o.attachRef=null,o.route=n,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class BA{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Xy{constructor(t,e){this.component=t,this.route=e}}function F5(r,t,e){const i=r._root;return Jy(i,t?t._root:null,e,[i.value])}function Qy(r,t){const e=Symbol(),i=t.get(r,e);return i===e?"function"!=typeof r||(0,v.Z0I)(r)?t.get(r):r:i}function Jy(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=qy(t);return r.children.forEach(o=>{(function N5(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,o=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function y1(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!Hm(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Hm(r.url,t.url)||!Dd(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!p1(r,t)||!Dd(r.queryParams,t.queryParams);default:return!p1(r,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new BA(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Jy(r,t,s.component?a?a.children:null:e,i,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new Xy(a.outlet.component,o))}else o&&eb(t,a,n),n.canActivateChecks.push(new BA(i)),Jy(r,null,s.component?a?a.children:null:e,i,n)})(o,s[o.value.outlet],e,i.concat([o.value]),n),delete s[o.value.outlet]}),Ba(s,(o,a)=>eb(o,e.getContext(a),n)),n}function eb(r,t,e){const i=qy(r),n=r.value;Ba(i,(s,o)=>{eb(s,n.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new Xy(n.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,n))}function H0(r){return"function"==typeof r}function VA(r){return r instanceof zp||"EmptyError"===r?.name}const tT=Symbol("INITIAL_VALUE");function Um(){return sa(r=>FP(r.map(t=>t.pipe(Fy(1),I0(tT)))).pipe((0,en.U)(t=>{for(const e of t)if(!0!==e){if(e===tT)return tT;if(!1===e||e instanceof Bm)return e}return!0}),Th(t=>t!==tT),Fy(1)))}function E1(r){return(0,m5.z)((0,Ql.b)(t=>{if(Vy(t))throw L5(0,t)}),(0,en.U)(t=>!0===t))}const T1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jA(r,t,e,i,n){const s=UA(r,t,e);return s.matched?function G5(r,t,e,i){const n=t.canMatch;return n&&0!==n.length?$i(n.map(o=>{const a=Qy(o,r);return Wp(function HA(r){return r&&H0(r.canMatch)}(a)?a.canMatch(t,e):r.runInContext(()=>a(t,e)))})).pipe(Um(),E1()):$i(!0)}(i=v1(t,i),t,e).pipe((0,en.U)(o=>!0===o?s:{...T1})):$i(s)}function UA(r,t,e){if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?{...T1}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const n=(t.matcher||fA)(e,r,t);if(!n)return{...T1};const s={};Ba(n.posParams,(a,l)=>{s[l]=a.path});const o=n.consumed.length>0?{...s,...n.consumed[n.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function iT(r,t,e,i,n="corrected"){if(e.length>0&&function $5(r,t,e){return e.some(i=>Wm(r,t,i)&&Jl(i)!==Zn)}(r,e,i)){const o=new br(t,function WA(r,t,e,i){const n={};n[Zn]=i,i._sourceSegment=r,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Jl(s)!==Zn){const o=new br([],{});o._sourceSegment=r,o._segmentIndexShift=t.length,n[Jl(s)]=o}return n}(r,t,i,new br(e,r.children)));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function Y5(r,t,e){return e.some(i=>Wm(r,t,i))}(r,e,i)){const o=new br(r.segments,function K5(r,t,e,i,n,s){const o={};for(const a of i)if(Wm(r,e,a)&&!n[Jl(a)]){const l=new br([],{});l._sourceSegment=r,l._segmentIndexShift="legacy"===s?r.segments.length:t.length,o[Jl(a)]=l}return{...n,...o}}(r,t,e,i,r.children,n));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new br(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function Wm(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function nT(r,t,e,i){return!!(Jl(r)===i||i!==Zn&&Wm(t,e,r))&&("**"===r.path||UA(t,r,e).matched)}function V0(r,t,e){return 0===t.length&&!r.children[e]}const qA=!1;class tb{constructor(t){this.segmentGroup=t||null}}class Z5{constructor(t){this.urlTree=t}}function ib(r){return Py(new tb(r))}function GA(r){return Py(new Z5(r))}class $p{constructor(t,e,i,n,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=n,this.config=s,this.allowRedirects=!0}apply(){const t=iT(this.urlTree.root,[],[],this.config).segmentGroup,e=new br(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Zn).pipe((0,en.U)(s=>this.createUrlTree(WE(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Tc(s=>{if(s instanceof Z5)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof tb?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Zn).pipe((0,en.U)(n=>this.createUrlTree(WE(n),t.queryParams,t.fragment))).pipe(Tc(n=>{throw n instanceof tb?this.noMatchError(n):n}))}noMatchError(t){return new v.vHH(4002,qA)}createUrlTree(t,e,i){const n=JP(t);return new Bm(n,e,i)}expandSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,en.U)(s=>new br([],s))):this.expandSegment(t,i,e,i.segments,n,!0)}expandChildren(t,e,i){const n=[];for(const s of Object.keys(i.children))"primary"===s?n.unshift(s):n.push(s);return(0,Hr.D)(n).pipe(Td(s=>{const o=i.children[s],a=PA(e,s);return this.expandSegmentGroup(t,a,o,s).pipe((0,en.U)(l=>({segment:l,outlet:s})))}),gg((s,o)=>(s[o.outlet]=o.segment,s),{}),cA())}expandSegment(t,e,i,n,s,o){return(0,Hr.D)(i).pipe(Td(a=>this.expandSegmentAgainstRoute(t,e,i,a,n,s,o).pipe(Tc(h=>{if(h instanceof tb)return $i(null);throw h}))),Up(a=>!!a),Tc((a,l)=>{if(VA(a))return V0(e,n,s)?$i(new br([],{})):ib(e);throw a}))}expandSegmentAgainstRoute(t,e,i,n,s,o,a){return nT(n,e,s,o)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o):ib(e):ib(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,n,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,n){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?GA(s):this.lineralizeSegments(i,s).pipe((0,Rl.z)(o=>{const a=new br(o,{});return this.expandSegment(t,a,e,o,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){const{matched:a,consumedSegments:l,remainingSegments:h,positionalParamSegments:u}=UA(e,n,s);if(!a)return ib(e);const d=this.applyRedirectCommands(l,n.redirectTo,u);return n.redirectTo.startsWith("/")?GA(d):this.lineralizeSegments(n,d).pipe((0,Rl.z)(m=>this.expandSegment(t,e,i,m.concat(h),o,!1)))}matchSegmentAgainstRoute(t,e,i,n,s){return"**"===i.path?(t=v1(i,t),i.loadChildren?(i._loadedRoutes?$i({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,en.U)(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new br(n,{})))):$i(new br(n,{}))):jA(e,i,n,t).pipe(sa(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=i._injector??t,i,n).pipe((0,Rl.z)(u=>{const d=u.injector??t,m=u.routes,{segmentGroup:y,slicedSegments:C}=iT(e,a,l,m),S=new br(y.segments,y.children);if(0===C.length&&S.hasChildren())return this.expandChildren(d,m,S).pipe((0,en.U)(L=>new br(a,L)));if(0===m.length&&0===C.length)return $i(new br(a,{}));const I=Jl(i)===s;return this.expandSegment(d,S,m,C,I?Zn:s,!0).pipe((0,en.U)(O=>new br(a.concat(O.segments),O.children)))})):ib(e)))}getChildConfig(t,e,i){return e.children?$i({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?$i({routes:e._loadedRoutes,injector:e._loadedInjector}):function zA(r,t,e,i){const n=t.canLoad;return void 0===n||0===n.length?$i(!0):$i(n.map(o=>{const a=Qy(o,r);return Wp(function b1(r){return r&&H0(r.canLoad)}(a)?a.canLoad(t,e):r.runInContext(()=>a(t,e)))})).pipe(Um(),E1())}(t,e,i).pipe((0,Rl.z)(n=>n?this.configLoader.loadChildren(t,e).pipe((0,Ql.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function D1(r){return Py(Kp(qA,3))}())):$i({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],n=e.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return $i(i);if(n.numberOfChildren>1||!n.children[Zn])return Py(new v.vHH(4e3,qA));n=n.children[Zn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,n){const s=this.createSegmentGroup(t,e.root,i,n);return new Bm(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Ba(t,(n,s)=>{if("string"==typeof n&&n.startsWith(":")){const a=n.substring(1);i[s]=e[a]}else i[s]=n}),i}createSegmentGroup(t,e,i,n){const s=this.createSegments(t,e.segments,i,n);let o={};return Ba(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,n)}),new br(s,o)}createSegments(t,e,i,n){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,n):this.findOrReturn(s,i))}findPosParam(t,e,i){const n=i[e.path.substring(1)];if(!n)throw new v.vHH(4001,qA);return n}findOrReturn(t,e){let i=0;for(const n of e){if(n.path===t.path)return e.splice(i),n;i++}return t}}class z0{}class I1{constructor(t,e,i,n,s,o,a,l){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=n,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=iT(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Zn).pipe((0,en.U)(e=>{if(null===e)return null;const i=new ZE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zn,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Gp(i,e),s=new XE(this.url,n);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=LA(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,n)}processChildren(t,e,i){return(0,Hr.D)(Object.keys(i.children)).pipe(Td(n=>{const s=i.children[n],o=PA(e,n);return this.processSegmentGroup(t,o,s,n)}),gg((n,s)=>n&&s?(n.push(...s),n):null),function dA(r,t=!1){return(0,Xa.e)((e,i)=>{let n=0;e.subscribe((0,co.x)(i,s=>{const o=r(s,n++);(o||t)&&i.next(s),!o&&i.complete()}))})}(n=>null!==n),xd(null),cA(),(0,en.U)(n=>{if(null===n)return null;const s=A1(n);return function Q5(r){r.sort((t,e)=>t.value.outlet===Zn?-1:e.value.outlet===Zn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,n,s){return(0,Hr.D)(e).pipe(Td(o=>this.processSegmentAgainstRoute(o._injector??t,o,i,n,s)),Up(o=>!!o),Tc(o=>{if(VA(o))return V0(i,n,s)?$i([]):$i(null);throw o}))}processSegmentAgainstRoute(t,e,i,n,s){if(e.redirectTo||!nT(e,i,n,s))return $i(null);let o;if("**"===e.path){const a=n.length>0?UP(n).parameters:{},l=e3(i)+n.length;o=$i({snapshot:new ZE(n,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R1(e),Jl(e),e.component??e._loadedComponent??null,e,_1(i),l,M1(e),l),consumedSegments:[],remainingSegments:[]})}else o=jA(i,e,n,t).pipe((0,en.U)(({matched:a,consumedSegments:l,remainingSegments:h,parameters:u})=>{if(!a)return null;const d=e3(i)+l.length;return{snapshot:new ZE(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,R1(e),Jl(e),e.component??e._loadedComponent??null,e,_1(i),d,M1(e),d),consumedSegments:l,remainingSegments:h}}));return o.pipe(sa(a=>{if(null===a)return $i(null);const{snapshot:l,consumedSegments:h,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,m=function J5(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(e),{segmentGroup:y,slicedSegments:C}=iT(i,h,u,m.filter(I=>void 0===I.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren())return this.processChildren(d,m,y).pipe((0,en.U)(I=>null===I?null:[new Gp(l,I)]));if(0===m.length&&0===C.length)return $i([new Gp(l,[])]);const S=Jl(e)===s;return this.processSegment(d,m,y,C,S?Zn:s).pipe((0,en.U)(I=>null===I?null:[new Gp(l,I)]))}))}}function j0(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function A1(r){const t=[],e=new Set;for(const i of r){if(!j0(i)){t.push(i);continue}const n=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==n?(n.children.push(...i.children),e.add(n)):t.push(i)}for(const i of e){const n=A1(i.children);t.push(new Gp(i.value,n))}return t.filter(i=>!e.has(i))}function _1(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function e3(r){let t=r,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function R1(r){return r.data||{}}function M1(r){return r.resolve||{}}function O1(r){return"string"==typeof r.title||null===r.title}function XA(r){return sa(t=>{const e=r(t);return e?(0,Hr.D)(e).pipe((0,en.U)(()=>t)):$i(t)})}let P1=(()=>{class r{buildTitle(e){let i,n=e.root;for(;void 0!==n;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(s=>s.outlet===Zn);return i}getResolvedTitleForRoute(e){return e.data[By]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return(0,v.f3M)(F1)},providedIn:"root"}),r})(),F1=(()=>{class r extends P1{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(dd))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class Gm{}class U0 extends class NZ{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const sT=new v.OlP("",{providedIn:"root",factory:()=>({})}),JA=new v.OlP("ROUTES");let Pu=(()=>{class r{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return $i(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Wp(e.loadComponent()).pipe((0,Ql.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Ny(()=>{this.componentLoaders.delete(e)})),n=new HP(i,()=>new Mu.x).pipe(D0());return this.componentLoaders.set(e,n),n}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return $i({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,en.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,h,u=!1;Array.isArray(a)?h=a:(l=a.create(e).injector,h=jP(l.get(JA,[],v.XFs.Self|v.XFs.Optional)));return{routes:h.map(B0),injector:l}}),Ny(()=>{this.childrenLoaders.delete(i)})),o=new HP(s,()=>new Mu.x).pipe(D0());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(e){return Wp(e()).pipe((0,Rl.z)(i=>i instanceof v.YKP||Array.isArray(i)?$i(i):(0,Hr.D)(this.compiler.compileModuleAsync(i))))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(v.zs3),v.LFG(v.Sil))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class W0{}class Ll{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function aT(r){throw r}function Fu(r,t,e){return t.parse("/")}const e_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},nb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Km(){const r=(0,v.f3M)(Vn),t=(0,v.f3M)(jm),e=(0,v.f3M)(Ot),i=(0,v.f3M)(v.zs3),n=(0,v.f3M)(v.Sil),s=(0,v.f3M)(JA,{optional:!0})??[],o=(0,v.f3M)(sT,{optional:!0})??{},a=(0,v.f3M)(F1),l=(0,v.f3M)(P1,{optional:!0}),h=(0,v.f3M)(W0,{optional:!0}),u=(0,v.f3M)(Gm,{optional:!0}),d=new jo(null,r,t,e,i,n,jP(s));return h&&(d.urlHandlingStrategy=h),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function rb(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(o,d),d}let jo=(()=>{class r{constructor(e,i,n,s,o,a,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=n,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mu.x,this.errorHandler=aT,this.malformedUriErrorHandler=Fu,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>$i(void 0),this.urlHandlingStrategy=new Ll,this.routeReuseStrategy=new U0,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(Pu),this.configLoader.onLoadEndListener=m=>this.triggerEvent(new h1(m)),this.configLoader.onLoadStartListener=m=>this.triggerEvent(new DZ(m)),this.ngModule=o.get(v.h0i),this.console=o.get(v.c2e);const d=o.get(v.R0b);this.isNgZoneEnabled=d instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function qP(){return new Bm(new br([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=k5(this.currentUrlTree,this.rootComponentType),this.transitions=new Lu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Th(n=>0!==n.id),(0,en.U)(n=>({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),sa(n=>{let s=!1,o=!1;return $i(n).pipe((0,Ql.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),sa(a=>{const l=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return $m(a.source)&&(this.browserUrlTree=a.extractedUrl),$i(a).pipe(sa(d=>{const m=this.transitions.getValue();return i.next(new Wy(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?jp.E:Promise.resolve(d)}),function rT(r,t,e,i){return sa(n=>function KA(r,t,e,i,n){return new $p(r,t,e,i,n).apply()}(r,t,e,n.extractedUrl,i).pipe((0,en.U)(s=>({...n,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ql.b)(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},n.urlAfterRedirects=d.urlAfterRedirects}),function L1(r,t,e,i,n,s){return(0,Rl.z)(o=>function $A(r,t,e,i,n,s,o="emptyOnly",a="legacy"){return new I1(r,t,e,i,n,o,a,s).recognize().pipe(sa(l=>null===l?function X5(r){return new Za.y(t=>t.error(r))}(new z0):$i(l)))}(r,t,e,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,n,s).pipe((0,en.U)(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ql.b)(d=>{if(n.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(y,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new xA(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(m)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:y,source:C,restoredState:S,extras:I}=a,k=new Wy(m,this.serializeUrl(y),C,S);i.next(k);const O=k5(y,this.rootComponentType).snapshot;return $i(n={...a,targetSnapshot:O,urlAfterRedirects:y,extras:{...I,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),jp.E}),(0,Ql.b)(a=>{const l=new qp(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),(0,en.U)(a=>n={...a,guards:F5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function j5(r,t){return(0,Rl.z)(e=>{const{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?$i({...e,guardsResult:!0}):function C1(r,t,e,i){return(0,Hr.D)(r).pipe((0,Rl.z)(n=>function Ad(r,t,e,i,n){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?$i(s.map(a=>{const l=Zy(t)??n,h=Qy(a,l);return Wp(function H5(r){return r&&H0(r.canDeactivate)}(h)?h.canDeactivate(r,t,e,i):l.runInContext(()=>h(r,t,e,i))).pipe(Up())})).pipe(Um()):$i(!0)}(n.component,n.route,e,t,i)),Up(n=>!0!==n,!0))}(o,i,n,r).pipe((0,Rl.z)(a=>a&&function $h(r){return"boolean"==typeof r}(a)?function U5(r,t,e,i){return(0,Hr.D)(t).pipe(Td(n=>lA(function w1(r,t){return null!==r&&t&&t(new IZ(r)),$i(!0)}(n.route.parent,i),function W5(r,t){return null!==r&&t&&t(new $E(r)),$i(!0)}(n.route,i),function q5(r,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function OZ(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(o)).filter(o=>null!==o).map(o=>BP(()=>$i(o.guards.map(l=>{const h=Zy(o.node)??e,u=Qy(l,h);return Wp(function PZ(r){return r&&H0(r.canActivateChild)}(u)?u.canActivateChild(i,r):h.runInContext(()=>u(i,r))).pipe(Up())})).pipe(Um())));return $i(s).pipe(Um())}(r,n.path,e),function S1(r,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return $i(!0);const n=i.map(s=>BP(()=>{const o=Zy(t)??e,a=Qy(s,o);return Wp(function B5(r){return r&&H0(r.canActivate)}(a)?a.canActivate(t,r):o.runInContext(()=>a(t,r))).pipe(Up())}));return $i(n).pipe(Um())}(r,n.route,e))),Up(n=>!0!==n,!0))}(i,s,r,t):$i(a)),(0,en.U)(a=>({...e,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,Ql.b)(a=>{if(n.guardsResult=a.guardsResult,Vy(a.guardsResult))throw L5(0,a.guardsResult);const l=new DA(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Th(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),XA(a=>{if(a.guards.canActivateChecks.length)return $i(a).pipe((0,Ql.b)(l=>{const h=new l1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}),sa(l=>{let h=!1;return $i(l).pipe(function YA(r,t){return(0,Rl.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:n}}=e;if(!n.length)return $i(e);let s=0;return(0,Hr.D)(n).pipe(Td(o=>function t3(r,t,e,i){const n=r.routeConfig,s=r._resolve;return void 0!==n?.title&&!O1(n)&&(s[By]=n.title),function ZA(r,t,e,i){const n=function i3(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===n.length)return $i({});const s={};return(0,Hr.D)(n).pipe((0,Rl.z)(o=>function n3(r,t,e,i){const n=Zy(t)??i,s=Qy(r,n);return Wp(s.resolve?s.resolve(t,e):n.runInContext(()=>s(t,e)))}(r[o],t,e,i).pipe(Up(),(0,Ql.b)(a=>{s[o]=a}))),BE(1),function zP(r){return(0,en.U)(()=>r)}(s),Tc(o=>VA(o)?jp.E:Py(o)))}(s,r,t,i).pipe((0,en.U)(o=>(r._resolvedData=o,r.data=LA(r,e).resolve,n&&O1(n)&&(r.data[By]=n.title),null)))}(o.route,i,r,t)),(0,Ql.b)(()=>s++),BE(1),(0,Rl.z)(o=>s===n.length?$i(e):jp.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ql.b)({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),(0,Ql.b)(l=>{const h=new IA(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}))}),XA(a=>{const l=h=>{const u=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,Ql.b)(d=>{h.component=d}),(0,en.U)(()=>{})));for(const d of h.children)u.push(...l(d));return u};return FP(l(a.targetSnapshot.root)).pipe(xd(),Fy(1))}),XA(()=>this.afterPreactivation()),(0,en.U)(a=>{const l=function AZ(r,t,e){const i=QE(r,t._root,e?e._root:void 0);return new MA(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return n={...a,targetRouterState:l}}),(0,Ql.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((r,t,e)=>(0,en.U)(i=>(new NA(t,i.targetRouterState,i.currentRouterState,e).activate(r),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,Ql.b)({next(){s=!0},complete(){s=!0}}),Ny(()=>{s||o||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Tc(a=>{if(o=!0,g1(a)){JE(a)||(this.navigated=!0,this.restoreHistory(n,!0));const l=new P0(n.id,this.serializeUrl(n.extractedUrl),a.message,a.cancellationCode);if(i.next(l),JE(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||$m(n.source)};this.scheduleNavigation(h,"imperative",null,u,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{this.restoreHistory(n,!0);const l=new a1(n.id,this.serializeUrl(n.extractedUrl),a,n.targetSnapshot??void 0);i.next(l);try{n.resolve(this.errorHandler(a))}catch(h){n.reject(h)}}return jp.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const n={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(n.state=a)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,i,s,n)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(B0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:n,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,h=n||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),qE(h,this.currentUrlTree,e,d,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){const n=Vy(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function sb(r){for(let t=0;t<r.length;t++){if(null==r[t])throw new v.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(n){i=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return i}isActive(e,i){let n;if(n=!0===i?{...e_}:!1===i?{...nb}:i,Vy(e))return GP(this.currentUrlTree,e,n);const s=this.parseUrl(e);return GP(this.currentUrlTree,s,n)}removeEmptyProps(e){return Object.keys(e).reduce((i,n)=>{const s=e[n];return null!=s&&(i[n]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new dl(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,n,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,h;o?(a=o.resolve,l=o.reject,h=o.promise):h=new Promise((m,y)=>{a=m,l=y});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}setBrowserUrl(e,i){const n=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl?this.location.replaceState(n,"",s):this.location.go(n,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const n=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===n?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===n&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(n)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,n){const s=new P0(e.id,this.serializeUrl(e.extractedUrl),i,n);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return r.\u0275fac=function(e){v.$Z()},r.\u0275prov=v.Yz7({token:r,factory:function(){return Km()},providedIn:"root"}),r})();function $m(r){return"imperative"!==r}let xc=(()=>{class r{constructor(e,i,n){this.router=e,this.route=i,this.locationStrategy=n,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Mu.x,this.subscription=e.events.subscribe(s=>{s instanceof dl&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,v.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,v.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,v.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,n,s,o){return!!(0!==e||i||n||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(jo),v.Y36(Gy),v.Y36(gt))},r.\u0275dir=v.lG2({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&v.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&v.uIk("target",i.target)("href",i.href,v.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[v.TTD]}),r})();class t_{}let B1=(()=>{class r{constructor(e,i,n,s,o){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Th(e=>e instanceof dl),Td(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const n=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,v.MMx)(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?n.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&n.push(this.processRoutes(a,s.children??s._loadedRoutes))}return(0,Hr.D)(n).pipe((0,x0.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let n;n=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):$i(null);const s=n.pipe((0,Rl.z)(o=>null===o?$i(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){const o=this.loader.loadComponent(i);return(0,Hr.D)([s,o]).pipe((0,x0.J)())}return s})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(jo),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(t_),v.LFG(Pu))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lT=new v.OlP("");let i_=(()=>{class r{constructor(e,i,n={}){this.router=e,this.viewportScroller=i,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Wy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof dl&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof YE&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new YE(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){v.$Z()},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();function ab(r,t){return{\u0275kind:r,\u0275providers:t}}function hT(r){return[{provide:JA,multi:!0,useValue:r}]}function n_(){const r=(0,v.f3M)(v.zs3);return t=>{const e=r.get(v.z2F);if(t!==e.components[0])return;const i=r.get(jo),n=r.get(uT);1===r.get(G0)&&i.initialNavigation(),r.get(pT,null,v.XFs.Optional)?.setUpPreloading(),r.get(lT,null,v.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),n.next(),n.complete()}}const uT=new v.OlP("",{factory:()=>new Mu.x}),G0=new v.OlP("",{providedIn:"root",factory:()=>1});const pT=new v.OlP("");function h3(r){return ab(0,[{provide:pT,useExisting:B1},{provide:t_,useExisting:r}])}const r_=new v.OlP("ROUTER_FORROOT_GUARD"),s_=[Ot,{provide:Vn,useClass:VE},{provide:jo,useFactory:Km},jm,{provide:Gy,useFactory:function H1(r){return r.routerState.root},deps:[jo]},Pu];function z1(){return new v.PXZ("Router",jo)}let o_=(()=>{class r{constructor(e){}static forRoot(e,i){return{ngModule:r,providers:[s_,[],hT(e),{provide:r_,useFactory:U1,deps:[[jo,new v.FiY,new v.tp0]]},{provide:sT,useValue:i||{}},i?.useHash?{provide:gt,useClass:hi}:{provide:gt,useClass:xi},{provide:lT,useFactory:()=>{const r=(0,v.f3M)(jo),t=(0,v.f3M)(Qv),e=(0,v.f3M)(sT);return e.scrollOffset&&t.setOffset(e.scrollOffset),new i_(r,t,e)}},i?.preloadingStrategy?h3(i.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:z1},i?.initialNavigation?W1(i):[],[{provide:l_,useFactory:n_},{provide:v.tb,multi:!0,useExisting:l_}]]}}static forChild(e){return{ngModule:r,providers:[hT(e)]}}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(r_,8))},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[eT]}),r})();function U1(r){return"guarded"}function W1(r){return["disabled"===r.initialNavigation?ab(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const t=(0,v.f3M)(jo);return()=>{t.setUpLocationChangeListener()}}},{provide:G0,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?ab(2,[{provide:G0,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:t=>{const e=t.get(Ce,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const o=t.get(jo),a=t.get(uT);(function n(s){t.get(jo).events.pipe(Th(a=>a instanceof dl||a instanceof P0||a instanceof a1),(0,en.U)(a=>a instanceof dl||a instanceof P0&&(0===a.code||1===a.code)&&null),Th(a=>null!==a),Fy(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?$i(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const l_=new v.OlP("");let d3=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-home-page"]],decls:82,vars:0,consts:[[1,"d-flex","justify-content-center","container-fluid"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-success"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],[1,"container"],[1,"main-body"],[1,"features"],[1,"card-deck"],[1,"card"],["src","https://i.pinimg.com/474x/f0/db/e6/f0dbe691e4eaeb926b622a7cd9abfda2.jpg","alt","...","height","65.3%",1,"card-img-top"],[1,"text-muted"],["src","https://i.pinimg.com/474x/b2/02/a5/b202a5b11b6672344ba225a8c5889dc7.jpg","alt","...","height","65.3%",1,"card-img-top"],["src","https://assets-global.website-files.com/625d2a5ca1316da92392fd13/627085282b05ab11b9cfcdd2_Marco%20Lavalle.jpeg","loading","lazy","id","circle"],["src","https://i.pinimg.com/474x/fa/b1/74/fab174dc39b51001b31600ab52555c78.jpg","alt","... ","height","65.3%",1,"card-img-top"],[1,"container-b"],[1,"row"],[1,"card","card-circle"],[1,"card-icon"],[1,"fas","fa-apple-alt"],[1,"card-b"],["routerLink","Ingredients","href","#",1,"btn","btn-primary"],[1,"fas","fa-cookie"],["routerLink","Recipes","href","#",1,"btn","btn-primary"],[1,"fas","fa-carrot"],["routerLink","Meals","href","#",1,"btn","btn-primary"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"h1"),v._uU(2,"Welcome to Nutrition Genius"),v.qZA()(),v.TgZ(3,"div",1)(4,"div",2),v._uU(5," New to Nutrition Genius? Find Out What's New! "),v.qZA(),v.TgZ(6,"div",3)(7,"h5",4),v._uU(8,"Recipes Made Uniquely For You"),v.qZA(),v.TgZ(9,"p",5),v._uU(10,"Nutrition Genius formulates new recipes based on ingredients found in your home. Click Login / Sign up to get started on your nutrition journey! "),v.qZA(),v.TgZ(11,"button",6)(12,"a",7),v._uU(13,"Login"),v.qZA()()()(),v.TgZ(14,"div",8)(15,"div",9)(16,"h2",10),v._uU(17,"This Weeks Features:"),v.qZA(),v.TgZ(18,"div",11)(19,"div",12),v._UZ(20,"img",13),v.TgZ(21,"div",3)(22,"h5",4),v._uU(23,"Chicken Fajita Bowl"),v.qZA(),v.TgZ(24,"p",5),v._uU(25,"This healthy alternative to fast-food bowls, makes you never want to eat out again! Give this recipe and many other recipes a try when you sign up today!"),v.qZA(),v.TgZ(26,"p",5)(27,"small",14),v._uU(28,"Last updated 3 mins ago"),v.qZA()()()(),v.TgZ(29,"div",12),v._UZ(30,"img",15),v.TgZ(31,"div",3)(32,"h5",4),v._uU(33,"Salmon and Rice Bowl"),v.qZA(),v.TgZ(34,"p",5),v._UZ(35,"img",16),v._uU(36," Feeling like you want something fresh but tastes just so good? Try this recipe and more when you sign up to get personalized meals and recipes just for you!"),v.qZA(),v.TgZ(37,"p",5)(38,"small",14),v._uU(39,"Last updated 3 mins ago"),v.qZA()()()(),v.TgZ(40,"div",12),v._UZ(41,"img",17),v.TgZ(42,"div",3)(43,"h5",4),v._uU(44,"Meatball Chowmein"),v.qZA(),v.TgZ(45,"p",5),v._uU(46,"Looking for something filling and unique? Over 30,000 users just like you have favorited and tried this recipe. Sign up today to get started!"),v.qZA(),v.TgZ(47,"p",5)(48,"small",14),v._uU(49,"Last updated 3 mins ago"),v.qZA()()()()(),v.TgZ(50,"div",18)(51,"div",19)(52,"div",20)(53,"div",21),v._UZ(54,"i",22),v.qZA(),v.TgZ(55,"div",23)(56,"h5",4),v._uU(57,"Ingredients"),v.qZA(),v.TgZ(58,"p",5),v._uU(59,"Add any inhgredients to generate what meals are available"),v.qZA(),v.TgZ(60,"a",24),v._uU(61,"Add me"),v.qZA()()(),v.TgZ(62,"div",20)(63,"div",21),v._UZ(64,"em",25),v.qZA(),v.TgZ(65,"div",23)(66,"h5",4),v._uU(67,"Recipes"),v.qZA(),v.TgZ(68,"p",5),v._uU(69,"Check out some quick and easy recipes to make for the week"),v.qZA(),v.TgZ(70,"a",26),v._uU(71,"Eat me"),v.qZA()()(),v.TgZ(72,"div",20)(73,"div",21),v._UZ(74,"i",27),v.qZA(),v.TgZ(75,"div",23)(76,"h5",4),v._uU(77,"Meals"),v.qZA(),v.TgZ(78,"p",5),v._uU(79,"Look at feautured meals for the week"),v.qZA(),v.TgZ(80,"a",28),v._uU(81,"See me"),v.qZA()()()()()()())},dependencies:[xc],styles:["HEAD[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#556b2fa0}.heading[_ngcontent-%COMP%], .slogan[_ngcontent-%COMP%]{text-align:center}.features[_ngcontent-%COMP%]{text-align:center;font-weight:lighter;margin:20px}.card-deck[_ngcontent-%COMP%]{display:flex;height:50%}#circle[_ngcontent-%COMP%]{float:left;width:80px;height:80px;margin:20px;shape-outside:circle();clip-path:circle();background:transparent;align-items:left}.card-header[_ngcontent-%COMP%]{background-color:#556b2fb1}.card-body[_ngcontent-%COMP%]{background-color:#f0f8ff}.card-b[_ngcontent-%COMP%]{background-color:transparent}.card-circle[_ngcontent-%COMP%]{text-align:center;margin-top:50px;background:rgba(85,107,47,.626);border:10px solid transparent;color:#000;font-family:Montserrat;padding:70px;border-radius:50%}.card-circle[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600;font-size:26px}.card-circle[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-weight:400}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;display:block}.card-circle[_ngcontent-%COMP%]:nth-child(2){background:rgba(40,51,22,.626)}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{Font-family:Montserrat;background:transparent;border:1px solid #fff;text-transform:uppercase;padding:5px 30px;border-radius:0;font-weight:600}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]{transition:all ease-in-out .2s}.card-circle[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background:#ebf2f3;color:#000;border:1px solid transparent}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.card-circle[_ngcontent-%COMP%]:hover{border:10px solid #bff2ff}.card-circle[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{text-shadow:0px -1px 10px #00A8CC;transform:scale(1.2)rotate(20deg)}@media only screen and (min-width: 1200px){.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-40px;z-index:0}.card-circle[_ngcontent-%COMP%]{width:410px;height:410px}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;box-shadow:1px 2px 20px 8px #f1ebeb1f;transform:scale(1.2);z-index:1}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:20px}}@media only screen and (min-width: 991px) and (max-width: 1200px){.card-circle[_ngcontent-%COMP%]{width:340px;height:340px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:-25px}.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-50px;z-index:0}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;z-index:1}}.container-b[_ngcontent-%COMP%]{padding:70px;position:relative}"]}),r})();var hb=ne(8247),re=ne(2090),Ha=ne(9681),Nu=ne(1877),Bu=ne(4859);let h_=(()=>{class r{signup(e,i){const n=(0,hb.n)();(0,hb.a5)(n,e,i).then(s=>{(0,hb.v)(n,a=>{})}).catch(s=>{})}signin(e,i){const n=(0,hb.n)();(0,hb.a6)(n,e,i).then(s=>{(0,hb.v)(n,a=>{})}).catch(s=>{const a=s.message;console.log(s.code),console.log(a)})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),G1=(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authService.signin(e.value.email,e.value.password),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(h_))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-profile-page"]],decls:39,vars:1,consts:[[1,"card",2,"max-width","900px"],[1,"row","g-0"],[1,"col-md-4"],["src","\\assets\\images\\NutritionLogInBackground.jpg","alt","...",1,"img-fluid","rounded-start"],[3,"ngSubmit"],["authForm","ngForm"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"mb-3","row"],["for","inputEmail",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","email","id","inputEmail","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["for","inputPassword",1,"col-sm-2","col-form-label"],["type","password","id","inputPassword","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],["type","submit",1,"btn","btn-outline-success",3,"disabled","click"],["routerLink","../SignUpPage","href","#",1,"nav-item","nav-link","active"],[1,"forgot-password"],[1,"card-text",2,"transform","rotate(0)"],["href","#",1,"text-success","stretched-link"],[1,"create-account"],["routerLink","../SignUpPage","href","#",1,"text-success","stretched-link"]],template:function(e,i){if(1&e){const n=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"div",2),v._UZ(3,"img",3),v.qZA(),v.TgZ(4,"form",4,5),v.NdJ("ngSubmit",function(){v.CHM(n);const o=v.MAs(5);return v.KtG(i.onSubmit(o))}),v.TgZ(6,"div",6)(7,"div",7)(8,"h5",8),v._uU(9,"Welcome Back, Please Login To Get Started"),v.qZA(),v.TgZ(10,"div",9)(11,"label",10),v._uU(12,"Email"),v.qZA(),v.TgZ(13,"div",11),v._UZ(14,"input",12),v.qZA()(),v.TgZ(15,"div",9)(16,"label",13),v._uU(17,"Password"),v.qZA(),v.TgZ(18,"div",11),v._UZ(19,"input",14),v.qZA()(),v.TgZ(20,"button",15),v.NdJ("click",function(){return i.buttonClicked="SignUp"}),v.TgZ(21,"a",16),v._uU(22,"Login"),v.qZA()(),v.TgZ(23,"div",17)(24,"p",18),v._uU(25," Forgot your Username / Password? "),v.TgZ(26,"a",19),v._uU(27,"Click Here"),v.qZA(),v._uU(28," to Get Back In"),v._UZ(29,"code"),v._uU(30,". "),v.qZA()(),v.TgZ(31,"div",20)(32,"p",18),v._uU(33," Don't Have an Account? "),v.TgZ(34,"a",21),v._uU(35,"Click Here"),v.qZA(),v._uU(36," to Get Started"),v._UZ(37,"code"),v._uU(38,". "),v.qZA()()()()()()()}if(2&e){const n=v.MAs(5);v.xp6(20),v.Q6J("disabled",!n.valid)}},dependencies:[xc,cg,hg,Ru],styles:[".card[_ngcontent-%COMP%]{margin:50px auto;float:none}.inputEmail[_ngcontent-%COMP%]{margin:200px}.card-body[_ngcontent-%COMP%]{margin-top:100px;text-align:center}.create-account[_ngcontent-%COMP%]{margin:10px auto}"]}),r})(),K1=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-about-us"]],decls:16,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6"],[1,"title"],[1,"card","text-white"],["src","https://i.pinimg.com/originals/de/ce/46/dece46917eb2d9ed453a9d3265837665.jpg",1,"card-img"],[1,"card-img-overlay"],[1,"card-title"],[1,"card-text"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v._uU(4,"About Us"),v.qZA(),v.TgZ(5,"p"),v._uU(6," Nutrition genius serves as a database where we help our users achieve their nutrition goals. We were founded in 2022 in a small town named Morgantown. Our team consists of 6 individual who all play a big role on helping this site run. "),v.qZA(),v.TgZ(7,"p"),v._uU(8," Eating habits are defined as \u201cconscious, collective, and repetitive behaviors, which lead people to select, consume, and use certain foods or diets, in response to social and cultural influences\u201d "),v.qZA()(),v.TgZ(9,"div",2)(10,"div",4),v._UZ(11,"img",5),v.TgZ(12,"div",6),v._UZ(13,"h5",7)(14,"p",8)(15,"p",8),v.qZA()()()()())},styles:[".title[_ngcontent-%COMP%]{font-size:120px;font-weight:700;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}p[_ngcontent-%COMP%]{align-items:right}"]}),r})();var zi=ne(655),ub="ej2_instances",$1=0;function fT(r,t){var e=t;return e.unshift(void 0),new(Function.prototype.bind.apply(r,e))}function ie(r,t){for(var e=t,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<i.length&&!$t(e);n++)e=e[i[n]];return e}function jt(r,t,e){var o,l,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=n,a=i.length;for(o=0;o<a;o++)l=i[o],o+1===a?s[l]=void 0===t?{}:t:f(s[l])&&(s[l]={}),s=s[l];return n}function Yh(r,t){delete r[t]}var gT=typeof window<"u"?window:{};function Hu(r){return!f(r)&&r.constructor==={}.constructor}function pl(r,t){return r[t]}function po(r,t){if(!f(t))for(var e=r,i=t,s="deepMerge",o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];f(e[s])||-1===e[s].indexOf(l)||!Hu(i[l])&&!Array.isArray(i[l])?e[l]=i[l]:de(e[l],e[l],i[l],!0)}}function de(r,t,e,i){var n=r&&"object"==typeof r?r:{},s=arguments.length;i&&(s-=1);for(var o=function(h){if(!a[h])return"continue";var u=a[h];Object.keys(u).forEach(function(d){var C,m=n[d],y=u[d],S=Array.isArray(y)&&Array.isArray(m)&&y.length!==m.length,I=!ni()||!(m instanceof Event||S);i&&I&&(Hu(y)||Array.isArray(y))?Hu(y)?(C=m||{},Array.isArray(C)&&C.hasOwnProperty("isComplexArray")?de(C,{},y,i):n[d]=de(C,{},y,i)):(C=ni()?m&&Object.keys(y).length:m||[],n[d]=de([],C,y,C&&C.length||y&&y.length)):n[d]=y})},a=arguments,l=1;l<s;l++)o(l);return n}function f(r){return null==r}function $t(r){return typeof r>"u"}function Gi(r){return r+"_"+$1++}function mT(r,t){var e;return function(){var i=this,n=arguments,s=function(){return e=null,r.apply(i,n)};clearTimeout(e),e=setTimeout(s,t)}}function K0(r,t){return r===t||!(r===document||!r)&&K0(r.parentNode,t)}function $0(r){try{throw new Error(r)}catch(t){throw t.message+"\n"+t.stack}}function ot(r){var t=r+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function ni(){return false}function Q1(r){return Node,r}function Wr(r,t){var e="string"==typeof r?document.querySelector(r):r;if(e[ub])for(var i=0,n=e[ub];i<n.length;i++){var s=n[i];if(s instanceof t)return s}return null}var eh,r,t,eF={latn:{_digits:"0123456789",_type:"numeric"}},tF={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},iF=[0,1,2,3,4,5,6,7,8,9],ro=function(){function r(){}return r.getMainObject=function(t,e){return ie("main."+e,t)},r.getNumberingSystem=function(t){return ie("supplemental.numberingSystems",t)||this.numberingSystems},r.reverseObject=function(t,e){for(var n={},s=0,o=e||Object.keys(t);s<o.length;s++){var a=o[s];n.hasOwnProperty(t[a])||(n[t[a]]=a)}return n},r.getSymbolRegex=function(t){var e=t.map(function(i){return i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},r.getSymbolMatch=function(t){for(var i={},n=0,s=Object.keys(tF);n<s.length;n++){var o=s[n];i[t[o]]=tF[o]}return i},r.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[n]+"|":t[n];return i},r.convertValueParts=function(t,e,i){return t.replace(e,function(n){return i[n]})},r.getDefaultNumberingSystem=function(t){var e={};return e.obj=ie("numbers",t),e.nSystem=ie("defaultNumberingSystem",e.obj),e},r.getCurrentNumericOptions=function(t,e,i,n){var s={},o=this.getDefaultNumberingSystem(t);if(!$t(o.nSystem)||n){var a=n?ie("obj.mapperDigits",o):ie(o.nSystem+"._digits",e);$t(a)||(s.numericPair=this.reverseObject(a,iF),s.numberParseRegex=new RegExp(this.constructRegex(a),"g"),s.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(s.numericRegex=a[0]+"-"+a[9],s.symbolNumberSystem=ie(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=o.nSystem))}return s},r.getNumberMapper=function(t,e,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(t);if(!$t(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=ie("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=ie("timeSeparator",n.numberSymbols);var o=ie(s.nSystem+"._digits",e);if(!$t(o))for(var a=0,l=iF;a<l.length;a++){var h=l[a];n.mapper[h]=o[h]}}return n},r.nPair="numericPair",r.nRegex="numericRegex",r.numberingSystems=eF,r}(),f3={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};r=eh||(eh={}),t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],r.getHijriDate=function e(n){var s=n.getDate(),o=n.getMonth(),a=n.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);var u=Math.floor(h/100),d=u-Math.floor(u/4)-2,m=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+s-d-1524,y=m+(d=(u=Math.floor((m-1867216.25)/36524.25))-Math.floor(u/4)+1)+1524,C=Math.floor((y-122.1)/365.25),S=Math.floor(365.25*C),I=Math.floor((y-S)/30.6001);s=y-S-Math.floor(30.6001*I),(o=Math.floor((y-S)/20.6001))>13&&(C+=1,o-=12),o-=1,a=C-4716;var k=m-24e5,O=10631/30,L=m-1948084,B=Math.floor(L/10631);L-=10631*B;var j=Math.floor((L-.1335)/O),G=30*B+j;L-=Math.floor(j*O+.1335);var ae=Math.floor((L+28.5001)/29.5);13===ae&&(ae=12);for(var ve=L-Math.floor(29.5001*ae-29),xe=0;xe<t.length&&!(t[xe]>k);xe++);var Le=xe+16260,oe=Math.floor((Le-1)/12),Ae=oe+1,De=Le-12*oe,ge=k-t[xe-1]+1;return(ge+"").length>2&&(ge=ve,De=ae,Ae=G),{year:Ae,month:De,date:ge}},r.toGregorian=function i(n,s,o){var S=Math.floor(o+t[12*(n-1)+1+(s-1)-16260-1]-1+24e5+.5),I=Math.floor((S-1867216.25)/36524.25),k=1524+(I=S+1+I-Math.floor(I/4)),O=Math.floor((k-122.1)/365.25),L=Math.floor(365.25*O),B=Math.floor((k-L)/30.6001),j=k-L-Math.floor(30.6001*B),G=B-(B>13.5?13:1),ae=O-(G>2.5?4716:4715);return ae<=0&&G--,new Date(ae+"/"+G+"/"+j)};var g3=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,c_="stand-alone",m3=["sun","mon","tue","wed","thu","fri","sat"],d_={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},nF={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},rF=function(){function r(){}return r.dateFormat=function(t,e,i){var n=this,s=tn.getDependables(i,t,e.calendar),a=(ie("parserObject.numbers",s),s.dateObject),l={isIslamic:tn.islamicRegex.test(e.calendar)},h=e.format||tn.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,"");if(l.dateSeperator=tn.getDateSeparator(s.dateObject),$t(h))$0("Format options or type given must be invalid");else{h=tn.ConvertDateToWeekFormat(h),l.pattern=h,l.numMapper=ro.getNumberMapper(s.parserObject,ro.getNumberingSystem(i));for(var d=0,m=h.match(g3)||[];d<m.length;d++){var y=m[d],C=y.length,S=y[0];switch("K"===S&&(S="h"),S){case"E":case"c":l.weekday=s.dateObject[tn.days][c_][tn.monthIndex[C]];break;case"M":case"L":l.month=s.dateObject[tn.month][c_][tn.monthIndex[C]];break;case"a":l.designator=ie("dayPeriods.format.wide",a);break;case"G":l.era=ie("eras."+(C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow"),s.dateObject);break;case"z":l.timeZone=ie("dates.timeZoneNames",s.parserObject)}}}return function(k){return isNaN(k.getDate())?null:n.intDateFormatter(k,l)}},r.intDateFormatter=function(t,e){for(var n="",s=e.pattern.match(tn.dateParseRegex),o=this.getCurrentDateValue(t,e.isIslamic),a=0,l=s;a<l.length;a++){var h=l[a],u=h.length,d=h[0];"K"===d&&(d="h");var m=void 0,y="",C=void 0,S=void 0,I="";switch(d){case"M":case"L":m=o.month,u>2?n+=e.month[m]:C=!0;break;case"E":case"c":n+=e.weekday[m3[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(C=!0,"d"===d)m=o.date;else if("f"===d){C=!1,S=!0;var k=(y=(y=t[d_[d]]().toString()).substring(0,u)).length;if(u!==k){if(u>3)continue;for(var O=0;O<u-k;O++)y="0"+y.toString()}I+=y}else m=t[d_[d]]();"h"===d&&(m=m%12||12);break;case"y":S=!0,I+=o.year,2===u&&(I=I.substr(I.length-2));break;case"a":var L=t.getHours()<12?"am":"pm";n+=e.designator[L];break;case"G":var B=t.getFullYear()<0?0:1,j=e.era[B];f(j)&&(j=e.era[B?0:1]),n+=j||"";break;case"'":n+="''"===h?"'":h.replace(/'/g,"");break;case"z":var G=t.getTimezoneOffset(),ae=u<4?"+H;-H":e.timeZone.hourFormat;ae=ae.replace(/:/g,e.numMapper.timeSeparator),0===G?n+=e.timeZone.gmtZeroFormat:(S=!0,I=this.getTimeZoneValue(G,ae)),I=e.timeZone.gmtFormat.replace(/\{0\}/,I);break;case":":n+=e.numMapper.numberSymbols.timeSeparator;break;case"/":n+=e.dateSeperator;break;case"W":C=!0,m=tn.getWeekOfYear(t);break;default:n+=h}C&&(S=!0,I=this.checkTwodigitNumber(m,u)),S&&(n+=ro.convertValueParts(I,tn.latnParseRegex,e.numMapper.mapper))}return n},r.getCurrentDateValue=function(t,e){return e?eh.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},r.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},r.getTimeZoneValue=function(t,e){var i=this,s=e.split(";")[t>0?1:0],o=Math.abs(t);return s.replace(/HH?|mm/g,function(a){var l=a.length,h=-1!==a.indexOf("H");return i.checkTwodigitNumber(Math.floor(h?o/60:o%60),l)})},r}(),p_={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},yg=["infinity","nan","group","decimal","exponential"],f_=function(){function r(){}return r.numberFormatter=function(t,e,i){var l,n=this,s=de({},e),o={},a={},h=tn.getDependables(i,t,"",!0);a.numberMapper=ro.getNumberMapper(h.parserObject,ro.getNumberingSystem(i),!0),a.currencySymbol=tn.getCurrencySymbol(h.numericObject,s.currency||Z0,e.altSymbol),a.percentSymbol=a.numberMapper.numberSymbols.percentSign,a.minusSymbol=a.numberMapper.numberSymbols.minusSign;var d=a.numberMapper.numberSymbols;if(e.format&&!tn.formatRegex.test(e.format))o=tn.customFormat(e.format,a,h.numericObject);else{de(s,tn.getProperNumericSkeleton(e.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,l=tn.getSymbolPattern(s.type,a.numberMapper.numberSystem,h.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),$t(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),$t(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(l=l.replace(/\u00A4/g,tn.defaultCurrency));var m=l.split(";");if(o.nData=tn.getFormatData(m[1]||"-"+m[0],!0,a.currencySymbol),o.pData=tn.getFormatData(m[0],!1,a.currencySymbol),s.useGrouping&&(s.groupSeparator=d[yg[2]],s.groupData=this.getGroupingDetails(m[0])),$t(s.minimumFractionDigits)&&(s.minimumFractionDigits=o.nData.minimumFraction),$t(s.maximumFractionDigits)){var C=o.nData.maximumFraction;s.maximumFractionDigits=$t(C)&&s.isPercent?0:C}var S=s.minimumFractionDigits,I=s.maximumFractionDigits;!$t(S)&&!$t(I)&&S>I&&(s.maximumFractionDigits=S)}return de(o.nData,s),de(o.pData,s),function(k){return isNaN(k)?d[yg[1]]:isFinite(k)?n.intNumberFormatter(k,o,a):d[yg[0]]}},r.getGroupingDetails=function(t){var e={},i=t.match(tn.negativeDataRegex);if(i&&i[4]){var n=i[4],s=n.lastIndexOf(",");if(-1!==s){var o=n.split(".")[0];e.primary=o.length-s-1;var a=n.lastIndexOf(",",s-1);-1!==a&&(e.secondary=s-1-a)}}return e},r.checkValueRange=function(t,e,i,n){var s=n?"f":"s",o=0,a=p_["l"+s],l=p_["m"+s];if($t(t)||(this.checkRange(t,a,n),o++),$t(e)||(this.checkRange(e,l,n),o++),2===o){if(!(t<e))return!0;$0(l+"specified must be less than the"+a)}else i&&1===o&&$0("Both"+l+"and"+l+"must be present");return!1},r.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&$0(e+"value must be within the range"+n[0]+"to"+n[1])},r.intNumberFormatter=function(t,e,i){var n;if(!$t(e.nData.type)){t<0?(t*=-1,n=e.nData):n=0===t&&e.zeroData||e.pData;var s="";return n.isPercent&&(t*=100),n.groupOne?s=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits):(s=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(s=this.processMinimumIntegers(s,n.minimumIntegerDigits))),"scientific"===n.type&&(s=(s=t.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[yg[4]])),s=s.replace(".",i.numberMapper.numberSymbols[yg[3]]),n.useGrouping&&(s=this.groupNumbers(s,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[yg[3]]||".",n.groupData.secondary)),s=ro.convertValueParts(s,tn.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+s+n.nend}},r.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},r.groupNumbers=function(t,e,i,n,s){for(var o=!f(s)&&0!==s,a=t.split(n),l=a[0],h=l.length,u="";h>e;)u=l.slice(h-e,h)+(u.length?i+u:""),h-=e,o&&(e=s,o=!1);return a[0]=l.slice(0,h)+(u.length?i:"")+u,a.join(n)},r.processFraction=function(t,e,i){var n=(t+"").split(".")[1],s=n?n.length:0;if(e&&s<e){var o="";if(0!==s){o+=t;for(var a=0;a<e-s;a++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}return!f(i)&&(s>i||0===i)?t.toFixed(i):t+""},r.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],s=n.length;if(s<e){for(var o=0;o<e-s;o++)n="0"+n;i[0]=n}return i.join(".")},r}(),g_="stand-alone",aF=/^[0-9]*$/,m_={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},hF=function(){function r(){}return r.dateParser=function(t,e,i){var u,n=this,s=tn.getDependables(i,t,e.calendar),o=ro.getCurrentNumericOptions(s.parserObject,ro.getNumberingSystem(i),!1,!1),a={},l=e.format||tn.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,""),h="";if($t(l))$0("Format options or type given must be invalid");else{l=tn.ConvertDateToWeekFormat(l),a={isIslamic:tn.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var d=l.match(tn.dateParseRegex)||[],m=d.length,y=0,C=0,S=!1,I=o.numericRegex,k=ro.getNumberMapper(s.parserObject,ro.getNumberingSystem(i)),O=0;O<m;O++){var L=d[O],B=L.length,j="K"===L[0]?"h":L[0],G=void 0,ae=void 0,ve=nF[j],xe=2===B?"":"?";switch(S&&(y=C,S=!1),j){case"E":case"c":var oe=ro.reverseObject(s.dateObject[tn.days][g_][tn.monthIndex[B]]);h+="("+Object.keys(oe).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(ae=!0,("M"===j||"L"===j)&&B>2){a[ve]=ro.reverseObject(s.dateObject.months[g_][tn.monthIndex[B]]),h+="("+Object.keys(a[ve]).join("|")+")"}else if("f"===j){if(B>3)continue;G=!0,h+="("+I+I+"?"+I+"?)"}else G=!0,h+="("+I+I+xe+")";"h"===j&&(a.hour12=!0);break;case"W":h+="("+I+(1===B?"?":"")+I+")";break;case"y":ae=G=!0,h+=2===B?"("+I+I+")":"("+I+"{"+B+",})";break;case"a":ae=!0;var ge=ie("dayPeriods.format.wide",s.dateObject);a[ve]=ro.reverseObject(ge),h+="("+Object.keys(a[ve]).join("|")+")";break;case"G":ae=!0,a[ve]=ro.reverseObject(ie("eras."+(B<=3?"eraAbbr":4===B?"eraNames":"eraNarrow"),s.dateObject)),h+="("+Object.keys(a[ve]).join("|")+"?)";break;case"z":ae=0!==(new Date).getTimezoneOffset(),a[ve]=ie("dates.timeZoneNames",s.parserObject);var Se=a[ve],Oe=(u=B<4)?"+H;-H":Se.hourFormat;Oe=Oe.replace(/:/g,k.timeSeparator),h+="("+this.parseTimeZoneRegx(Oe,Se,I)+")?",S=!0,C=u?6:12;break;case"'":h+="("+L.replace(/'/g,"")+")?";break;default:h+="([\\D])"}ae&&(a.evalposition[ve]={isNumber:G,pos:O+1+y,hourOnly:u}),O===m-1&&!f(h)&&(a.parserRegex=new RegExp("^"+h+"$","i"))}}return function(Gt){var Yt=n.internalDateParse(Gt,a,o);if(f(Yt)||!Object.keys(Yt).length)return null;if(a.isIslamic){var ei={},Ci=Yt.year,Ri=Yt.day,Ji=Yt.month,oi=Ci?Ci+"":"",sr=2===oi.length;(!Ci||!Ji||!Ri||sr)&&(ei=eh.getHijriDate(new Date)),sr&&(Ci=parseInt((ei.year+"").slice(0,2)+oi,10));var ds=eh.toGregorian(Ci||ei.year,Ji||ei.month,Ri||ei.date);Yt.year=ds.getFullYear(),Yt.month=ds.getMonth()+1,Yt.day=ds.getDate()}return n.getDateObject(Yt)}},r.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var s=t.year,o=t.designator,a=t.timeZone;$t(s)||((s+"").length<=2&&(s+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(s));for(var u=0,d=["hour","minute","second","milliseconds","month","day"];u<d.length;u++){var m=d[u],y=t[m];if($t(y)&&"day"===m&&i.setDate(1),!$t(y))if("month"===m){if((y-=1)<0||y>11)return new Date("invalid");var C=i.getDate();i.setDate(1),i[m_[m]](y);var S=new Date(i.getFullYear(),y+1,0).getDate();i.setDate(C<S?C:S)}else{if("day"===m){var I=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(y<1||y>I)return null}i[m_[m]](y)}}if(!$t(o)){var k=i.getHours();"pm"===o?i.setHours(k+(12===k?0:12)):12===k&&i.setHours(0)}if(!$t(a)){var O=a-i.getTimezoneOffset();0!==O&&i.setMinutes(i.getMinutes()+O)}return i},r.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),s={hour:0,minute:0,second:0};if(f(n))return null;for(var a=0,l=Object.keys(e.evalposition);a<l.length;a++){var h=l[a],u=e.evalposition[h],d=n[u.pos];if(u.isNumber)s[h]=this.internalNumberParser(d,i);else if("timeZone"!==h||$t(d))d="month"!==h||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),s[h]=e[h][d];else{var m=u.pos,y=void 0,C=n[m+1],S=!$t(C);u.hourOnly?y=60*this.getZoneValue(S,C,n[m+4],i):(y=60*this.getZoneValue(S,C,n[m+7],i),y+=this.getZoneValue(S,n[m+4],n[m+10],i)),f(y)||(s[h]=y)}}return e.hour12&&(s.hour12=!0),s},r.internalNumberParser=function(t,e){return t=ro.convertValueParts(t,e.numberParseRegex,e.numericPair),aF.test(t)?+t:null},r.parseTimeZoneRegx=function(t,e,i){var s,n=e.gmtFormat,o="("+i+")("+i+")";return s=t.replace("+","\\+"),(s=-1!==t.indexOf("HH")?s.replace(/HH|mm/g,"("+o+")"):s.replace(/H|m/g,"("+o+"?)")).split(";").map(function(l){return n.replace("{0}",l)}).join("|")+"|"+e.gmtZeroFormat},r.getZoneValue=function(t,e,i,n){var s=t?e:i;if(!s)return 0;var o=this.internalNumberParser(s,n);return t?-o:o},r}(),uF=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,cF=/,/g,v3=["minusSign","infinity"],y3=function(){function r(){}return r.numberParser=function(t,e,i){var a,n=this,s=tn.getDependables(i,t,"",!0),o={custom:!0};tn.formatRegex.test(e.format)||!e.format?(de(o,tn.getProperNumericSkeleton(e.format||"N")),o.custom=!1,o.fractionDigits||e.maximumFractionDigits&&(o.maximumFractionDigits=e.maximumFractionDigits)):de(o,tn.customFormat(e.format,null,null));var h;ie("numbers",s.parserObject);if(a=ro.getCurrentNumericOptions(s.parserObject,ro.getNumberingSystem(i),!0,!1),o.symbolRegex=ro.getSymbolRegex(Object.keys(a.symbolMatch)),o.infinity=a.symbolNumberSystem[v3[1]],h=tn.getSymbolPattern(o.type,a.numberSystem,s.numericObject,o.isAccount)){var u=(h=h.replace(/\u00A4/g,tn.defaultCurrency)).split(";");o.nData=tn.getFormatData(u[1]||"-"+u[0],!0,""),o.pData=tn.getFormatData(u[0],!0,"")}return function(d){return n.getParsedNumber(d,o,a)}},r.getParsedNumber=function(t,e,i){var n,s,o,a,l,h;if(-1!==t.indexOf(e.infinity))return 1/0;t=ro.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=ro.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var u=t.match(uF);if(f(u))return NaN;a=u[1],o=u[2];var d=u[5];return l=u[6],s=(n=e.custom?a===e.nData.nlead&&l===e.nData.nend:-1!==a.indexOf(e.nData.nlead)&&-1!==l.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,o=o.replace(cF,""),d&&(o+=d),h=+o,("percent"===e.type||s)&&(h/=100),(e.custom||e.fractionDigits)&&(h=parseFloat(h.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,e,h,n)),n&&(h*=-1),h},r.convertMaxFracDigits=function(t,e,i,n){var s=t.split(".");return s[1]&&s[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},r}(),Zp=function(){function r(t){this.ranArray=[],this.boundedEvents={},!f(t)&&(this.context=t)}return r.prototype.on=function(t,e,i,n){if(!f(e)){var s=i||this.context;if(this.notExist(t))return void(this.boundedEvents[t]=[{handler:e,context:s}]);f(n)?this.isHandlerPresent(this.boundedEvents[t],e)||this.boundedEvents[t].push({handler:e,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[t].push({handler:e,context:s,id:n}))}},r.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=ie(t,this.boundedEvents);if(e){for(var s=0;s<n.length;s++)if(i){if(n[s].id===i){n.splice(s,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(e===n[s].handler){n.splice(s,1);break}}else delete this.boundedEvents[t]}},r.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var o=ie(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,e,i,n,0);for(var a=0,l=o;a<l.length;a++){var h=l[a];h.handler.call(h.context,e)}i&&i.call(this,e)}},r.prototype.blazorCallback=function(t,e,i,n,s){var o=this,a=s===t.length-1;if(s<t.length){var l=t[s],h=l.handler.call(l.context,e);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(u){if(u="string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u,de(e,e,u,!0),!i||!a)return o.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}).catch(function(u){n&&n.call(l.context,"string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u)})}else{if(!i||!a)return this.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}}},r.prototype.dateReviver=function(t,e){return ni&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},r.prototype.isJson=function(t){try{JSON.parse(t)}catch{return!1}return!0},r.prototype.destroy=function(){this.boundedEvents=this.context=void 0},r.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},r.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++)if(n[i].handler===e)return!0;return!1},r}(),Ym=new Zp,oa={},Y0="en-US",Z0="USD",y_=["numericObject","dateObject"],qr=function(){function r(t){t&&(this.culture=t)}return r.prototype.getDateFormat=function(t){return rF.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},oa)},r.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=Z0),f_.numberFormatter(this.getCulture(),t||{},oa)},r.prototype.getDateParser=function(t){return hF.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},oa)},r.prototype.getNumberParser=function(t){return y3.numberParser(this.getCulture(),t||{format:"N"},oa)},r.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},r.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},r.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},r.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},r.prototype.getDatePattern=function(t,e){return tn.getActualDateTimeFormat(this.getCulture(),t,oa,e)},r.prototype.getNumberPattern=function(t,e){return tn.getActualNumberFormat(this.getCulture(),t,oa,e)},r.prototype.getFirstDayOfWeek=function(){return tn.getWeekData(this.getCulture(),oa)},r.prototype.getCulture=function(){return this.culture||Y0},r}();function X0(r,t){var e=tn.getDependables(oa,r,"",!0)[y_[0]],i=tn.getDependables(oa,r,"")[y_[1]],n=ie("defaultNumberingSystem",e),s=ie("symbols-numberSystem-"+n,e),o=tn.getSymbolPattern(t||"decimal",n,e,!1);return de(s,tn.getFormatData(o,!0,"",!0),{dateSeparator:tn.getDateSeparator(i)})}function Xp(r){return tn.getDependables(oa,"",r,!1)[y_[1]]}var tn,dF={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(r){r.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;r.defaultCurrency="$";var e=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r.dateConverterMapper=/dddd|ddd/gi,r.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};r.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,r.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,r.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(ge,Re,We,Se,Oe){var Ve,Gt=We||"date";if(Oe)Ve=m({skeleton:ge},Oe).format||m({skeleton:"d"},"en-US").format;else{if(-1!==r.basicPatterns.indexOf(ge)){if(Ve=ie(Gt+"Formats."+ge,Re),"dateTime"===Gt){var Yt=ie("dateFormats."+ge,Re),ei=ie("timeFormats."+ge,Re);Ve=Ve.replace("{1}",Yt).replace("{0}",ei)}}else Ve=ie("dateTimeFormats.availableFormats."+ge,Re);$t(Ve)&&"yMd"===ge&&(Ve="M/d/y")}return Ve}function h(ge,Re,We,Se){var Oe={},Ve=We||"gregorian";(Oe.parserObject=ro.getMainObject(ge,Re)||r.defaultObject,Se)?Oe.numericObject=ie("numbers",Oe.parserObject):Oe.dateObject=ie("dates.calendars."+Ve,Oe.parserObject);return Oe}function u(ge,Re,We,Se){return ie(ge+"Formats-numberSystem-"+Re+(Se?".accounting":".standard"),We)||(Se?ie(ge+"Formats-numberSystem-"+Re+".standard",We):"")}function d(ge){ge.match(r.dateConverterMapper);return ge}function m(ge,Re){var We=ge.format||ge.skeleton,Se=ie((Re||"en-US")+"."+We,dF);return Se||(Se=ie("en-US."+We,dF)),Se&&(Se=d(Se),ge.format=Se.replace(/tt/,"a")),ge}function y(ge){var Re=ge.match(r.formatRegex),We={},Se=Re[1].toUpperCase();return We.isAccount="A"===Se,We.type=r.patternMatcher[Se],ge.length>1&&(We.fractionDigits=parseInt(Re[2],10)),We}function C(ge,Re,We,Se){var Oe=Se?{}:{nlead:"",nend:""},Ve=ge.match(r.customRegex);if(Ve){Se||(Oe.nlead=S(Ve[1],We),Oe.nend=S(Ve[10],We),Oe.groupPattern=Ve[4]);var Gt=Ve[7];if(Gt&&Re){var Yt=Gt.match(t);Oe.minimumFraction=f(Yt)?0:Yt.length,Oe.maximumFraction=Gt.length-1}}return Oe}function S(ge,Re){return ge?ge.replace(r.defaultCurrency,Re):""}function I(ge,Re,We){return ie("currencies."+Re+(We?"."+We:".symbol"),ge)||ie("currencies."+Re+".symbol-alt-narrow",ge)||"$"}function O(ge,Re,We){var Se={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},Oe=ge.match(r.customRegex);if(f(Oe)||""===Oe[5]&&"N/A"!==ge)return Se.type=void 0,Se;Se.nlead=Oe[1],Se.nend=Oe[10];var Ve=Oe[6],Gt=!!Ve.match(/\ $/g),Yt=-1!==Ve.replace(/\ $/g,"").indexOf(" ");Se.useGrouping=-1!==Ve.indexOf(",")||Yt,Ve=Ve.replace(/,/g,"");var ei=Oe[7];if(-1!==Ve.indexOf("0")&&(Se.minimumIntegerDigits=Ve.length-Ve.indexOf("0")),f(ei)||(Se.minimumFractionDigits=ei.lastIndexOf("0"),Se.maximumFractionDigits=ei.lastIndexOf("#"),-1===Se.minimumFractionDigits&&(Se.minimumFractionDigits=0),(-1===Se.maximumFractionDigits||Se.maximumFractionDigits<Se.minimumFractionDigits)&&(Se.maximumFractionDigits=Se.minimumFractionDigits)),f(Re)?de(Se,L([Se.nlead,Se.nend],"%","%")):(de(Se,L([Se.nlead,Se.nend],"$",Re.currencySymbol)),Se.isCurrency||de(Se,L([Se.nlead,Se.nend],"%",Re.percentSymbol))),!f(We)){var Ci=u(Se.type,Re.numberMapper.numberSystem,We,!1);Se.useGrouping&&(Se.groupSeparator=Yt?" ":Re.numberMapper.numberSymbols[e[2]],Se.groupData=f_.getGroupingDetails(Ci.split(";")[0])),Se.nlead=Se.nlead.replace(/'/g,""),Se.nend=Gt?" "+Se.nend.replace(/'/g,""):Se.nend.replace(/'/g,"")}return Se}function L(ge,Re,We){for(var Se={nlead:ge[0],nend:ge[1]},Oe=0;Oe<2;Oe++){var Ve=ge[Oe],Gt=Ve.indexOf(Re);if(-1!==Gt&&(Gt<Ve.indexOf("'")||Gt>Ve.lastIndexOf("'"))){Se[a[Oe]]=Ve.substr(0,Gt)+We+Ve.substr(Gt+1),Se[a[Re]]=!0,Se.type=Se.isCurrency?"currency":"percent";break}}return Se}function ve(ge,Re,We){ge+=".";for(var Se=0;Se<Re;Se++)ge+="0";if(Re<We)for(var Oe=We-Re,Ve=0;Ve<Oe;Ve++)ge+="#";return ge}function xe(ge,Re){for(var We=ge.split("."),Se="",Oe=0;Oe<Re;Oe++)Se+="0";return We[1]?Se+"."+We[1]:Se}function Le(ge){var Re=ge.split("."),We=Re[0],Se=3-We.length%3;ge="";for(var Ve=(We=(Se&&1===Se?"#":2===Se?"##":"")+We).length-1;Ve>0;Ve-=3)ge=","+We[Ve-2]+We[Ve-1]+We[Ve]+ge;return ge=ge.slice(1),Re[1]?ge+"."+Re[1]:ge}r.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,r.basicPatterns=["short","medium","long","full"],r.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},r.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},r.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},r.month="months",r.days="days",r.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},r.getResultantPattern=l,r.getDependables=h,r.getSymbolPattern=u,r.ConvertDateToWeekFormat=d,r.compareBlazorDateFormats=m,r.getProperNumericSkeleton=y,r.getFormatData=C,r.changeCurrencySymbol=S,r.getCurrencySymbol=I,r.customFormat=function k(ge,Re,We){for(var Se={},Oe=ge.split(";"),Ve=["pData","nData","zeroData"],Gt=0;Gt<Oe.length;Gt++)Se[Ve[Gt]]=O(Oe[Gt],Re,We);return f(Se.nData)&&(Se.nData=de({},Se.pData),Se.nData.nlead=f(Re)?"-"+Se.nData.nlead:Re.minusSymbol+Se.nData.nlead),Se},r.customNumberFormat=O,r.isCurrencyPercent=L,r.getDateSeparator=function B(ge){var Re=(ie("dateFormats.short",ge)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return Re?Re[1]:"/"},r.getActualDateTimeFormat=function j(ge,Re,We,Se){var Oe=h(We,ge,Re.calendar),Ve=Re.format||l(Re.skeleton,Oe.dateObject,Re.type);if(Se){if(-1!==(Ve=Ve.replace(i,function(oi){return n[oi]})).indexOf("z")){var Gt=Ve.match(/z/g).length,Yt=void 0,ei={timeZone:{}};ei.numMapper=ro.getNumberMapper(Oe.parserObject,ro.getNumberingSystem(We)),ei.timeZone=ie("dates.timeZoneNames",Oe.parserObject);var Ri=(new Date).getTimezoneOffset(),Ji=Gt<4?"+H;-H":ei.timeZone.hourFormat;Ji=Ji.replace(/:/g,ei.numMapper.timeSeparator),0===Ri?Yt=ei.timeZone.gmtZeroFormat:(Yt=rF.getTimeZoneValue(Ri,Ji),Yt=ei.timeZone.gmtFormat.replace(/\{0\}/,Yt)),Ve=Ve.replace(/[z]+/,'"'+Yt+'"')}Ve=Ve.replace(/ $/,"")}return Ve},r.getActualNumberFormat=function ae(ge,Re,We,Se){var Yt,pe,Oe=h(We,ge,"",!0),Ve={custom:!0},ei={},Ci=(Re.format||"").match(r.currencyFormatRegex),Ji=(r.formatRegex.test(Re.format)&&y(Re.format||"N"),{});if(Ci){Ji.numberMapper=ro.getNumberMapper(Oe.parserObject,ro.getNumberingSystem(We),!0);var oi=I(Oe.numericObject,Re.currency||Z0,Re.altSymbol),sr=u("currency",Ji.numberMapper.numberSystem,Oe.numericObject,/a/i.test(Re.format)),ds=(sr=sr.replace(/\u00A4/g,oi)).split(";");ei.hasNegativePattern=ds.length>1,ei.nData=C(ds[1]||"-"+ds[0],!0,oi),ei.pData=C(ds[0],!1,oi),!Ci[2]&&!Re.minimumFractionDigits&&!Re.maximumFractionDigits&&(Yt=C(sr.split(";")[0],!0,"",!0).minimumFraction)}if(r.formatRegex.test(Re.format)||!Re.format){if(de(Ve,y(Re.format||"N")),Ve.custom=!1,pe="###0",(Ve.fractionDigits||Re.minimumFractionDigits||Re.maximumFractionDigits||Yt)&&(Ve.fractionDigits&&(Re.minimumFractionDigits=Re.maximumFractionDigits=Ve.fractionDigits),pe=ve(pe,Yt||Ve.fractionDigits||Re.minimumFractionDigits||0,Re.maximumFractionDigits||0)),Re.minimumIntegerDigits&&(pe=xe(pe,Re.minimumIntegerDigits)),Re.useGrouping&&(pe=Le(pe)),"currency"===Ve.type){var Tt=pe;pe=ei.pData.nlead+Tt+ei.pData.nend,ei.hasNegativePattern&&(pe+=";"+ei.nData.nlead+Tt+ei.nData.nend)}"percent"===Ve.type&&(pe+=" %")}else pe=Re.format.replace(/'/g,'"');return Object.keys(Ji).length>0&&(pe=Se?pe:function G(ge,Re){if(-1!==ge.indexOf(",")){var We=ge.split(",");ge=We[0]+ie("numberMapper.numberSymbols.group",Re)+We[1].replace(".",ie("numberMapper.numberSymbols.decimal",Re))}else ge=ge.replace(".",ie("numberMapper.numberSymbols.decimal",Re));return ge}(pe,Ji)),pe},r.fractionDigitsPattern=ve,r.minimumIntegerPattern=xe,r.groupingPattern=Le,r.getWeekData=function oe(ge,Re){var We="sun",Se=ie("supplemental.weekData.firstDay",Re),Oe=ge;return/en-/.test(Oe)&&(Oe=Oe.slice(3)),Oe=Oe.slice(0,2).toUpperCase()+Oe.substr(2),Se&&(We=Se[Oe]||Se[Oe.slice(0,2)]||"sun"),o[We]},r.replaceBlazorCurrency=function Ae(ge,Re,We){var Se=function u_(r){return ie(r||"",f3)}(We);if(Re!==Se)for(var Oe=0,Ve=ge;Oe<Ve.length;Oe++){var Gt=Ve[Oe];Gt.nend=Gt.nend.replace(Re,Se),Gt.nlead=Gt.nlead.replace(Re,Se)}},r.getWeekOfYear=function De(ge){var Se,Re=new Date(ge.getFullYear(),0,1),We=Re.getDay();We=We>=0?We:We+7;var Oe=Math.floor((ge.getTime()-Re.getTime()-6e4*(ge.getTimezoneOffset()-Re.getTimezoneOffset()))/864e5)+1;if(We<4){if((Se=Math.floor((Oe+We-1)/7)+1)>52){var Gt=new Date(ge.getFullYear()+1,0,1).getDay();Se=(Gt=Gt>=0?Gt:Gt+7)<4?1:53}}else Se=Math.floor((Oe+We-1)/7);return Se}}(tn||(tn={}));var b_=/^(.*?):[ \t]*([^\r\n]*)$/gm,Qp=function(){function r(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():"GET",this.mode=!!f(i)||i):"object"==typeof t&&(this.options=t,po(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return r.prototype.send=function(t){var e=this;this.data=f(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(s,o){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(s,o)},f(e.onLoad)||(e.httpRequest.onload=e.onLoad),f(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),f(e.onAbort)||(e.httpRequest.onabort=e.onAbort),f(e.onError)||(e.httpRequest.onerror=e.onError),f(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),!f(e.data)&&null!==e.contentType&&e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(f(e.data)?null:e.data)})},r.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},r.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},r.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},r.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=b_.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=b_.exec(this.httpRequest.getAllResponseHeaders());return f(i=e[t.toLowerCase()])?null:i},r}(),pF=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,fF=/msie|trident/i,gF=/Trident\/7\./,mF=/(ipad|iphone|ipod touch)/i,vF=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,yF=/android/i,bF=/trident|windows phone|edge/i,Zm=/(version)[ /]([\w.]+)/i,CF={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var Q=function(){function r(){}return r.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,s=Object.keys(CF);n<s.length;n++)if(i=r.userAgent.match(CF[s[n]])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,r.userAgent.match(gF)){t.name="msie";break}var a=r.userAgent.match(Zm);"safari"===t.name&&a&&(t.version=a[2]);break}return t},r.getEvent=function(t){var e={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return r.isPointer?e[t].isPointer:r.isTouch?e[t].isTouch+(r.isDevice?"":" "+e[t].isDevice):e[t].isDevice},r.getTouchStartEvent=function(){return r.getEvent("start")},r.getTouchEndEvent=function(){return r.getEvent("end")},r.getTouchMoveEvent=function(){return r.getEvent("move")},r.getTouchCancelEvent=function(){return r.getEvent("cancel")},r.getValue=function(t,e){var i=window.browserDetails;return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===r.isTouch&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),typeof i[t]>"u"?i[t]=e.test(r.userAgent):i[t]},Object.defineProperty(r,"userAgent",{get:function(){return r.uA},set:function(t){r.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(r,"info",{get:function(){return $t(window.browserDetails.info)?window.browserDetails.info=r.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIE",{get:function(){return r.getValue("isIE",fF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isTouch",{get:function(){return $t(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isPointer",{get:function(){return $t(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isMSPointer",{get:function(){return $t(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isDevice",{get:function(){return r.getValue("isDevice",pF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos",{get:function(){return r.getValue("isIos",mF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos7",{get:function(){return r.getValue("isIos7",vF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isAndroid",{get:function(){return r.getValue("isAndroid",yF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWebView",{get:function(){return $t(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!($t(window.cordova)&&$t(window.PhoneGap)&&$t(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWindows",{get:function(){return r.getValue("isWindows",bF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchStartEvent",{get:function(){return $t(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=r.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchMoveEvent",{get:function(){return $t(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=r.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchEndEvent",{get:function(){return $t(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=r.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchCancelEvent",{get:function(){return $t(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=r.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),r.uA=typeof navigator<"u"?navigator.userAgent:"",r}(),T=function(){function r(){}return r.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},r.add=function(t,e,i,n,s){var a,o=r.addOrGetEventData(t);a=s?mT(i,s):i,n&&(a=a.bind(n));for(var l=e.split(" "),h=0;h<l.length;h++)o.push({name:l[h],listener:i,debounce:a}),Q.isIE?t.addEventListener(l[h],a):t.addEventListener(l[h],a,{passive:!1});return a},r.remove=function(t,e,i){for(var n=r.addOrGetEventData(t),s=e.split(" "),o=function(l){var u,h=-1;n&&0!==n.length&&n.some(function(d,m){return d.name===s[l]&&d.listener===i&&(h=m,u=d.debounce,!0)}),-1!==h&&n.splice(h,1),u&&t.removeEventListener(s[l],u)},a=0;a<s.length;a++)o(a)},r.clearEvents=function(t){var e,i;i=de([],i,e=r.addOrGetEventData(t));for(var n=0;n<i.length;n++)t.removeEventListener(i[n].name,i[n].debounce),e.shift()},r.trigger=function(t,e,i){for(var s=0,o=r.addOrGetEventData(t);s<o.length;s++){var a=o[s];a.name===e&&a.debounce.call(this,i)}},r}(),GZ=/^svg|^path|^g/;function ri(r,t){var e=GZ.test(r)?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);return typeof t>"u"||(e.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(e.className=t.className),void 0!==t.id&&(e.id=t.id),void 0!==t.styles&&e.setAttribute("style",t.styles),void 0!==t.attrs&&Ue(e,t.attrs)),e}function N(r,t){for(var e=w_(t),i=0,n=r;i<n.length;i++)for(var s=n[i],o=0,a=e;o<a.length;o++){var l=a[o];if(Hu(s)){var h=ie("attributes.className",s);f(h)?jt("attributes.className",l,s):new RegExp("\\b"+l+"\\b","i").test(h)||jt("attributes.className",h+" "+l,s)}else s.classList.contains(l)||s.classList.add(l)}return r}function z(r,t){for(var e=w_(t),i=0,n=r;i<n.length;i++){var s=n[i],o=Hu(s);if(o?ie("attributes.className",s):""!==s.className)for(var l=0,h=e;l<h.length;l++){var u=h[l];if(o){var m=ie("attributes.className",s).split(" "),y=m.indexOf(u);-1!==y&&m.splice(y,1),jt("attributes.className",m.join(" "),s)}else s.classList.remove(u)}}return r}function w_(r){var t=[];return"string"==typeof r?t.push(r):t=r,t}function so(r){return""===r.style.visibility&&r.offsetWidth>0}function bi(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.insertBefore(i,t.firstElementChild),e&&wF(t),r}function Zt(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.appendChild(i),e&&wF(t),r}function wF(r){r.querySelectorAll("script").forEach(function(e){var i=document.createElement("script");i.text=e.innerHTML,document.head.appendChild(i),ce(i)})}function ce(r){var t=r.parentNode;if(t)return t.removeChild(r)}function He(r){var t=r.parentNode;T.clearEvents(r),t.removeChild(r)}function Ue(r,t){for(var i=r,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(Hu(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[a]=t[o]}else i.setAttribute(o,t[o])}return i}function le(r,t,e){return void 0===t&&(t=document),r=Ao(r),t.querySelector(r)}function Ze(r,t,e){return void 0===t&&(t=document),r=Ao(r),t.querySelectorAll(r)}function Ao(r){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(r.match(/#[0-9]/g)||r.match(t)){for(var e=r.split(","),i=0;i<e.length;i++){for(var n=e[i].split(" "),s=0;s<n.length;s++)if(n[s].indexOf("#")>-1&&!n[s].match(/\[.*\]/)){var o=n[s].split("#");if(o[1].match(/^\d/)||o[1].match(t)){var a=n[s].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[s]=a.join(".")}}e[i]=n.join(" ")}return e.join(",")}return r}function U(r,t){var e=r;if("function"==typeof e.closest)return e.closest(t);for(;e&&1===e.nodeType;){if(Xm(e,t))return e;e=e.parentNode}return null}function Vt(r,t){void 0!==t&&Object.keys(t).forEach(function(e){r.style[e]=t[e]})}function li(r,t,e){N([r],t),z([r],e)}function Xm(r,t){var e=r.matches||r.msMatchesSelector||r.webkitMatchesSelector;return e?e.call(r,t):-1!==[].indexOf.call(document.querySelectorAll(t),r)}var T3=new RegExp("]"),Jp=function(){function r(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Zp(this),$t(e)||(this.element="string"==typeof e?document.querySelector(e):e,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),$t(t)||this.setProperties(t,!0),this.isDestroyed=!1}return r.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,po(this,t),!0!==e&&(po(this.changedProperties,t),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},r.callChildDataBind=function(t,e){for(var n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(e[o]instanceof Array)for(var a=0,l=e[o];a<l.length;a++){var h=l[a];void 0!==h.dataBind&&h.dataBind()}else e[o].dataBind()}},r.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},r.prototype.dataBind=function(){if(r.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,e=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(e,i),this.isProtectedOnChange=t}},r.prototype.serverDataBind=function(t){},r.prototype.saveChanges=function(t,e,i){this.isProtectedOnChange||(this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate(),this.finalUpdate=function Z1(r){var t,e=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(e);var n="ej2"+function J1(r){for(var t="",e=0;e<5;e++)t+=(e?",":"")+r[e];return t}(e),s=function(o){o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===n&&(r(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",s),r=s=n=void 0}}(this.dataBind.bind(this)))},r.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},r.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},r.prototype.trigger=function(t,e,i,n){var s=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,n);if(T3.test(t)){var l=ie(t,this);if(l)if(window.Blazor){var u=l.call(this,e);u&&"function"==typeof u.then?i?u.then(function(d){i&&(d="string"==typeof d&&s.modelObserver.isJson(d)?JSON.parse(d):d,i.call(s,d))}).catch(function(d){n&&(d="string"==typeof d&&s.modelObserver.isJson(d)?JSON.parse(d):d,n.call(s,d))}):a=u:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e);else i&&i.call(this,e)}return this.isProtectedOnChange=o,a}},r.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();N([this.element],["e-lib",t]),f(this.element.ej2_instances)?jt("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},r.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),z([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&z([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},r}();function Uo(r,t){var e,i,n="string"==typeof r?document.getElementById(r):r;for(i=0;i<n.ej2_instances.length;i++)if(e=n.ej2_instances[i],"string"==typeof t){if(t===e.getModuleName())return e}else if(e instanceof t)return e}function yT(r,t,e,i){return(!r.properties.hasOwnProperty(t)||!(r.properties[t]instanceof i))&&(r.properties[t]=fT(i,[r,t,e])),r.properties[t]}function Q0(r,t,e,i,n,s){for(var o=[],a=e?e.length:0,l=0;l<a;l++){var h=i;if(s&&(h=i(e[l],r)),n){var u=fT(h,[r,t,{},!0]);u.setProperties(e[l],!0),o.push(u)}else o.push(fT(h,[r,t,e[l],!1]))}return o}function J0(r,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=r),this.properties[t]}}function SF(r,t){return function(e){if(this.properties[t]!==e){var i=this.properties.hasOwnProperty(t)?this.properties[t]:r;this.saveChanges(t,e,i),this.properties[t]=e}}}function EF(r,t,e){return function(){return yT(this,t,r,e)}}function TF(r,t,e){return function(i){yT(this,t,r,e).setProperties(i)}}function tw(r,t,e){return function(){var i=this;if(!this.properties.hasOwnProperty(t)){var n=Q0(this,t,r,e,!1);this.properties[t]=n}var s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[t].hasOwnProperty("push")&&!s&&["push","pop"].forEach(function(o){var a={value:xF(o,t,0,i.properties[t]).bind(i),configurable:!0};Object.defineProperty(i.properties[t],o,a)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function D3(r,t,e){return function(i){this.isComplexArraySetter=!0;var n=Q0(this,t,r,e,!1),s=Q0(this,t,i,e,!0);this.isComplexArraySetter=!1,this.saveChanges(t,s,n),this.properties[t]=s}}function xF(r,t,e,i){return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(r){case"push":for(var a=0;a<n.length;a++){Array.prototype[r].apply(i,[n[a]]);var l=S_(o+(i.length-1),n[a],!this.controlParent,r);this.serverDataBind(l,n[a],!1,r)}break;case"pop":Array.prototype[r].apply(i);var h=S_(o+i.length,null,!this.controlParent,r);this.serverDataBind(h,{ejsAction:"pop"},!1,r)}return i}}function S_(r,t,e,i){var n=r;return e&&((n={})[r]=t,t&&"object"==typeof t)&&(n[r].ejsAction=i),n}function E(r){return function(t,e){var i={set:SF(r,e),get:J0(r,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),iw(t,e,"prop",r)}}function ln(r,t){return function(e,i){var n={set:TF(r,i,t),get:EF(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),iw(e,i,"complexProp",r,t)}}function _o(r,t){return function(e,i){var n={set:D3(r,i,t),get:tw(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),iw(e,i,"colProp",r,t)}}function W(){return function(r,t){var e={set:function(i){var n=this.properties[t];if(n!==i){var s=nw(this,t);!1===$t(n)&&s.context.removeEventListener(s.prefix,n),s.context.addEventListener(s.prefix,i),this.properties[t]=i}},get:J0(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(r,t,e),iw(r,t,"event")}}function ui(r){}function iw(r,t,e,i,n){$t(r.propList)&&(r.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),r.propList[e+"s"].push({propertyName:t,defaultValue:i,type:n}),r.propList[e+"Names"].push(t)}function nw(r,t){if(!1===r.hasOwnProperty("parentObj"))return{context:r,prefix:t};var e=ie("propName",r);return e&&(t=e+"-"+t),nw(ie("parentObj",r),t)}var M3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ef=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Cr=function(r){function t(i){var n=r.call(this,i,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var e;return M3(t,r),e=t,t.prototype.animate=function(i,n){var s=this.getModel(n=n||{});if("string"==typeof i)for(var a=0,l=Array.prototype.slice.call(Ze(i,document));a<l.length;a++)s.element=l[a],e.delayAnimation(s);else s.element=i,e.delayAnimation(s)},t.stop=function(i,n){i.style.animation="",i.removeAttribute("e-animate");var s=i.getAttribute("e-animation-id");if(s){var o=parseInt(s,10);cancelAnimationFrame(o),i.removeAttribute("e-animation-id")}n&&n.end&&n.end.call(this,n)},t.delayAnimation=function(i){"Disable"===_F?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){e.applyAnimation(i)},i.delay):e.applyAnimation(i)},t.applyAnimation=function(i){var n=this;i.timeStamp=0;var s=0,o=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(u){try{u?(i.timeStamp=u+i.timeStamp-(a=0===a?u:a),a=u,!s&&i.begin&&i.begin.call(n,i),s+=1,i.timeStamp<l&&i.timeStamp+i.timeStamp/s<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(n,i),requestAnimationFrame(h)):(cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(n,i))):(o=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",o.toString()))}catch(m){cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(n,m)}};h()},t.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:void 0!==i.duration?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},ef([E("FadeIn")],t.prototype,"name",void 0),ef([E(400)],t.prototype,"duration",void 0),ef([E("ease")],t.prototype,"timingFunction",void 0),ef([E(0)],t.prototype,"delay",void 0),ef([W()],t.prototype,"progress",void 0),ef([W()],t.prototype,"begin",void 0),ef([W()],t.prototype,"end",void 0),ef([W()],t.prototype,"fail",void 0),e=ef([ui],t)}(Jp);function Qi(r,t,e){var i=function L3(r){return{selector:r&&r.selector?r.selector:null,ignore:r&&r.ignore?r.ignore:null,rippleFlag:r&&r.rippleFlag,isCenterRipple:r&&r.isCenterRipple,duration:r&&r.duration?r.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!lr?function(){}:(r.setAttribute("data-ripple","true"),T.add(r,"mousedown",DF,{parent:r,rippleOptions:i}),T.add(r,"mouseup",IF,{parent:r,rippleOptions:i,done:e}),T.add(r,"mouseleave",cb,{parent:r,rippleOptions:i}),Q.isPointer&&T.add(r,"transitionend",cb,{parent:r,rippleOptions:i}),function(){r.removeAttribute("data-ripple"),T.remove(r,"mousedown",DF),T.remove(r,"mouseup",IF),T.remove(r,"mouseleave",cb),T.remove(r,"transitionend",cb)})}function DF(r){var t=r.target,e=this.rippleOptions.selector,i=e?U(t,e):t;if(!(!i||this.rippleOptions&&U(t,this.rippleOptions.ignore))){var n=i.getBoundingClientRect(),s=r.pageX-document.body.scrollLeft,o=r.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(s-n.left),Math.abs(s-n.right)),l=Math.max(Math.abs(o-n.top),Math.abs(o-n.bottom)),h=Math.sqrt(a*a+l*l),u=2*h+"px",d=s-n.left-h,m=o-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,m=0,u="100%"),i.classList.add("e-ripple");var S=ri("div",{className:"e-ripple-element",styles:"width: "+u+";height: "+u+";left: "+d+"px;top: "+m+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(S),window.getComputedStyle(S).getPropertyValue("opacity"),S.style.transform="scale(1)",i!==this.parent&&T.add(i,"mouseleave",cb,{parent:this.parent,rippleOptions:this.rippleOptions})}}function IF(r){AF(r,this)}function cb(r){AF(r,this)}function AF(r,t){var e=t.rippleOptions.duration,i=r.target,n=t.rippleOptions.selector,s=n?U(i,n):i;if(s&&(!s||-1!==s.className.indexOf("e-ripple"))){var o=Ze(".e-ripple-element",s),a=o[o.length-1];a&&(a.style.opacity="0.5"),t.parent!==s&&T.remove(s,"mouseleave",cb),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),s.getElementsByClassName("e-ripple-element").length||s.classList.remove("e-ripple"),t.done&&t.done(r)},e)}}var lr=!1,_F="",kF=function(){function r(t){this.loadedModules=[],this.parent=t}return r.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var s=t[n],o=0,a=e;o<a.length;o++){var l=a[o],h=s.member;if(l.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var u=fT(l,s.args),d=this.getMemberName(h);jt(d,s.isProperty?l:u,this.parent);var m=s;m.member=d,this.loadedModules.push(m)}}}else this.clean()},r.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||ie(i.member,this.parent).destroy()}this.loadedModules=[]},r.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(l){return e.getMemberName(l.member)}),s=0,o=this.loadedModules.filter(function(l){return-1===i.indexOf(l.member)});s<o.length;s++){var a=o[s];a.isProperty||ie(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),Yh(this.parent,a.member)}},r.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},r.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++)if(i[e].member===this.getMemberName(t))return!0;return!1},r}(),Ti=function(){function r(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=ie("callChildDataBind",Jp),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return r.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[e]=t:delete this.parentObj.childChangedProperties[e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},r.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},r.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},r.prototype.setProperties=function(t,e){!0===e?(po(this,t),this.updateChange(!1,this.propName),this.clearChanges()):po(this,t)},r.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(jt(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),jt(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},r.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[t]=i,this.changedProperties[t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},r.prototype.serverDataBind=function(t,e,i,n){},r.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},r}(),E_=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],RF=function(){function r(t){var e;this.isValidated=!1,this.version="20.3",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:'This application was built using a trial version of Syncfusion Essential Studio. Please include a valid license to permanently remove this license validation message. You can also obtain a free 30 day evaluation license to temporarily remove this message during the evaluation period. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing">help topic</a> for more information.',trailExpired:'Your Syncfusion trial license has expired. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#trial-expired">help topic</a> for more information.',versionMismatched:'The included Syncfusion license (v##LicenseVersion) is invalid for version ##Requireversion. Please refer to this <a class="e-license" href="https://help.syncfusion.com/es/licensing/version-mismatch/">help topic</a> for more information.',platformMismatched:'The included Syncfusion license is invalid (Platform mismatch). Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#platform-mismatch">help topic</a> for more information.',invalidKey:'The included Syncfusion license is invalid. Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#invalid-key">help topic</a> for more information.'},this.manager=(e=null,{setKey:function i(s){e=s},getKey:function n(){return e}}),this.npxManager={getKey:function i(){return"npxKeyReplace"}},this.manager.setKey(t)}return r.prototype.validate=function(){if(!this.isValidated&&gT&&!ie(MF(E_),gT)&&!ie("Blazor",gT)){var t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var e=this.getInfoFromKey();if(e&&e.length)for(var i=0,n=e;i<n.length;i++){var s=n[i];if(!this.platform.test(s.platform)||s.invalidPlatform)t=this.errors.platformMismatched;else if(-1===s.version.indexOf(this.version))t=(t=(t=this.errors.versionMismatched).replace("##LicenseVersion",s.version)).replace("##Requireversion",this.version+".x");else if(s.expiryDate){var o=new Date(s.expiryDate),a=new Date;if(!(o!==a&&o<a))break;t=this.errors.trailExpired}}else t=this.errors.invalidKey}else t=this.errors.noLicense;if(t&&typeof document<"u"&&!f(document)){var l=ri("div",{innerHTML:t+'<span id="license-banner-event" class="e-license-banner" ><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><line x1="5" y1="5" x2="15" y2="15" stroke="yellow" stroke-width="2.5" stroke-miterlimit="10" stroke-linecap="round"></line><line x1="15" y1="5" x2="5" y2="15" stroke="yellow" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10"></line></svg></span>',styles:'position:fixed;top:0;left:0;right:0;font-family:"Segoe UI";font-size:16px;background:repeating-linear-gradient(45deg,#d70f0f,#d70f0f 10px,#e12121 10px,#e12121 17px);color:#ffffff;z-index:999999999;text-align:center;padding:10px 50px 10px 25px;'});l.setAttribute("id","js-licensing"),document.body.appendChild(l),document.getElementById("license-banner-event").addEventListener("click",function(){document.getElementById("js-licensing").remove()})}this.isValidated=!0,jt(MF(E_),this.isValidated,gT)}},r.prototype.getDecryptedData=function(t){try{return atob(t)}catch{return""}},r.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,o=!1;this.manager.getKey()?t=this.manager.getKey():(o=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=t.split(";"),l=0,h=a;l<h.length;l++){var d=this.getDecryptedData(h[l]);if(d){var m=0,y="";if(o){for(var I=d[d.length-1],k=[],C=0;C<d.length;C++)k[C]=d[C].charCodeAt(0)-I.charCodeAt(0);for(C=0;C<k.length;C++)y+=String.fromCharCode(k[C])}else for(C=0;C<d.length;C++,m++){m===e.length&&(m=0);var S=d.charCodeAt(C);y+=String.fromCharCode(S^e[m]>>16)}this.platform.test(y)?(i=y.split(";"),s=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):y&&y.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch{return null}},r}(),CT=new RF;function MF(r){for(var t="",e=0,i=r;e<i.length;e++)t+=String.fromCharCode(i[e]);return t}function wT(r){CT=new RF(r)}var x_,LF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ST=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},T_=0,ET=0,nn=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.randomId=function Dc(){if(!(typeof window>"u")){var r=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(r)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,f(n.enableRtl)&&n.setProperties({enableRtl:false},!0),f(n.locale)&&n.setProperties({locale:Y0},!0),n.moduleLoader=new kF(n),n.localObserver=new Zp(n),Ym.on("notifyExternalChange",n.detectFunction,n,n.randomId),CT.validate(),$t(i)||n.appendTo(),n}return LF(t,r),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(z([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),r.prototype.destroy.call(this),this.moduleLoader.clean(),Ym.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Zp(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},t.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=le(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();N([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=ie("ej2_instances",this.element);(!n||-1===n.indexOf(this))&&r.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),r.prototype.dataBind.call(this)},t.prototype.on=function(e,i,n){if("string"==typeof e)this.localObserver.on(e,i,n);else for(var s=0,o=e;s<o.length;s++){var a=o[s];this.localObserver.on(a.event,a.handler,a.context)}},t.prototype.off=function(e,i){if("string"==typeof e)this.localObserver.off(e,i);else for(var n=0,s=e;n<s.length;n++){var o=s[n];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,i){!0!==this.isDestroyed&&this.localObserver.notify(e,i)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.createElement=function(e,i,n){return ri(e,i)},t.prototype.triggerStateChange=function(e,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:i})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var i=Object.keys(e);i.length&&(this[i[0]]=e[i[0]])},t.prototype.mergePersistData=function(){var e;f(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.renderReactTemplates=function(e){f(e)||e()},t.prototype.clearTemplate=function(e,i){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(T_=0),x_=this.pageID(location.href),ET=history.length,e+"_"+x_+"_"+T_++},t.prototype.pageID=function(e){var i=0;if(0===e.length)return i;for(var n=0;n<e.length;n++)i=(i<<5)-i+e.charCodeAt(n),i&=i;return Math.abs(i)},t.prototype.isHistoryChanged=function(){return x_!==this.pageID(location.href)||ET!==history.length},t.prototype.addOnPersist=function(e){for(var i=this,n={},s=0,o=e;s<o.length;s++){var l,a=o[s];$t(l=ie(a,this))||jt(a,this.getActualProperties(l),n)}return JSON.stringify(n,function(h,u){return i.getActualProperties(u)})},t.prototype.getActualProperties=function(e){return e instanceof Ti?ie("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,i){for(var n={},s=function(u){if(-1===i.indexOf(u)){var d=e[u];if("object"!=typeof d||d instanceof Array)n[u]=d;else{var m=i.filter(function(y){return new RegExp(u+".").test(y)}).map(function(y){return y.replace(u+".","")});n[u]=o.iterateJsonProperties(o.getActualProperties(d),m)}}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a]);return n},ST([E(!1)],t.prototype,"enablePersistence",void 0),ST([E()],t.prototype,"enableRtl",void 0),ST([E()],t.prototype,"locale",void 0),ST([ui],t)}(Jp);typeof window<"u"&&window.addEventListener("popstate",function(){T_=0});var OF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ls=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},B3={left:0,top:0,bottom:0,right:0},D_={isDragged:!1},H3=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return OF(t,r),Ls([E(0)],t.prototype,"left",void 0),Ls([E(0)],t.prototype,"top",void 0),t}(Ti),tf=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.dragLimit=e.getDefaultPosition(),s.borderWidth=e.getDefaultPosition(),s.padding=e.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var e;return OF(t,r),e=t,t.prototype.bind=function(){this.toggleEvents(),Q.isIE&&N([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return de({},B3)},t.prototype.toggleEvents=function(i){var n;$t(this.handle)||(n=le(this.handle,this.element));var s=this.enableTapHold&&Q.isDevice&&Q.isTouch?this.mobileInitialize:this.initialize;i?T.remove(n||this.element,Q.touchStartEvent,s):T.add(n||this.element,Q.touchStartEvent,s,this)},t.prototype.mobileInitialize=function(i){var n=this,s=i.currentTarget;this.tapHoldTimer=setTimeout(function(){n.externalInitialize=!0,n.removeTapholdTimer(),n.initialize(i,s)},this.tapHoldThreshold),T.add(document,Q.touchMoveEvent,this.removeTapholdTimer,this),T.add(document,Q.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),T.remove(document,Q.touchMoveEvent,this.removeTapholdTimer),T.remove(document,Q.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(i,n){return f(i)?null:i[{vertical:"scrollHeight",horizontal:"scrollWidth"}[n]]>i[{vertical:"clientHeight",horizontal:"clientWidth"}[n]]&&("vertical"===n?i.scrollTop>0:i.scrollLeft>0)?("vertical"===n?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),f(i)?i:this.getScrollableParent(i.parentNode,n)):this.getScrollableParent(i.parentNode,n)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(i,n){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||n,this.dragProcessStarted=!1,this.abort){var s=this.abort;"string"==typeof s&&(s=[s]);for(var o=0;o<s.length;o++)if(!f(U(i.target,s[o])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!$t(i.changedTouches)&&"touchstart"!==i.type&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(T.add(document,Q.touchMoveEvent,this.intDragStart,this),T.add(document,Q.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==i.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,T.trigger(document.documentElement,Q.touchStartEvent,i)}},t.prototype.intDragStart=function(i){this.removeTapholdTimer();var n=!$t(i.changedTouches);if(!n||1===i.changedTouches.length){var o,s=this.getCoordinates(i),a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=U(i.target,this.dragTarget);f(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var u=this.initialPosition.x-s.pageX,d=this.initialPosition.y-s.pageY;if(Math.sqrt(u*u+d*d)>=this.distance||this.externalInitialize){var y=this.getHelperElement(i);if(!y||f(y))return;n&&i.preventDefault();var C=this.helperElement=y;if(this.parentClientRect=this.calculateParentPosition(C.offsetParent),this.dragStart){var I={event:i,element:l,target:this.getProperTargetElement(i),bindEvents:null,dragElement:C};this.trigger("dragStart",I)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),o={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var k=getComputedStyle(l),O=parseFloat(k.marginTop);this.clone&&0!==O&&(o.top+=O),this.eleTop=isNaN(parseFloat(k.top))?0:parseFloat(k.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(o.top-=this.parentScrollY,o.left-=this.parentScrollX);var L=this.getProcessedPositionValue({top:o.top-this.diffY+"px",left:o.left-this.diffX+"px"});this.dragElePosition={top:o.top,left:o.left},Vt(C,this.getDragPosition({position:"absolute",left:L.left,top:L.top})),T.remove(document,Q.touchMoveEvent,this.intDragStart),T.remove(document,Q.touchEndEvent,this.intDestroy),this.bindDragEvents(C)}}},t.prototype.bindDragEvents=function(i){so(i)?(T.add(document,Q.touchMoveEvent,this.intDrag,this),T.add(document,Q.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)this.top+=(i=i.offsetParent).offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},t.prototype.calculateParentPosition=function(i){if(f(i))return{left:0,top:0};var n=i.getBoundingClientRect(),s=getComputedStyle(i);return{left:n.left+window.pageXOffset-parseInt(s.marginLeft,10),top:n.top+window.pageYOffset-parseInt(s.marginTop,10)}},t.prototype.intDrag=function(i){if($t(i.changedTouches)||1===i.changedTouches.length){var n,s;this.clone&&i.changedTouches&&Q.isDevice&&Q.isTouch&&i.preventDefault(),this.position=this.getMousePosition(i,this.isDragScroll);var o=this.getDocumentWidthHeight("Height");o<this.position.top&&(this.position.top=o);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var u=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):u=!1),u&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var d=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var m=this.parentClientRect.left,y=this.parentClientRect.top,C=this.getCoordinates(i),S=C.pageX,I=C.pageY,k=this.position.left-this.diffX,O=this.position.top-this.diffY,L=getComputedStyle(d);if(this.dragArea){if(this.pageX!==S||this.skipDistanceCheck){var B=d.offsetWidth+(parseFloat(L.marginLeft)+parseFloat(L.marginRight));n=this.dragLimit.left>k&&k>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<k+B&&k>0?k-(k-this.dragLimit.right)+window.pageXOffset-B:k<0?this.dragLimit.left:k}if(this.pageY!==I||this.skipDistanceCheck){var j=d.offsetHeight+(parseFloat(L.marginTop)+parseFloat(L.marginBottom));s=this.dragLimit.top>O&&O>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<O+j&&O>0?O-(O-this.dragLimit.bottom)+window.pageYOffset-j:O<0?this.dragLimit.top:O}}else n=k,s=O;var ve,xe,G=y+this.borderWidth.top,ae=m+this.borderWidth.left;this.dragProcessStarted&&(f(s)&&(s=this.prevTop),f(n)&&(n=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,ve=s-G<0?this.dragLimit.top:s-this.borderWidth.top,xe=n-ae<0?this.dragLimit.left:n-this.borderWidth.left):(ve=s-this.borderWidth.top,xe=n-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,ve=s-G<0?this.dragLimit.top:s-G,xe=n-ae<0?this.dragElePosition.left:n-ae):(ve=s-G,xe=n-ae);var Le=parseFloat(getComputedStyle(this.element).marginTop);if(Le>0&&(this.clone&&(ve+=Le,O<0&&(Le+O>=0?ve=Le+O:ve-=Le),ve=this.dragLimit.bottom<ve?this.dragLimit.bottom:ve),s-G<0))if(O+Le+(d.offsetHeight-G)>=0){var oe=this.dragLimit.top+O-G;oe+Le+G<0?ve-=Le+G:ve=oe}else ve-=Le+G;this.dragArea&&this.helperElement.classList.contains("e-treeview")&&(ve=ve+(j=d.offsetHeight+(parseFloat(L.marginTop)+parseFloat(L.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-j:ve),this.enableScrollHandler&&!this.clone&&(ve-=this.parentScrollY,xe-=this.parentScrollX);var Ae=this.getProcessedPositionValue({top:ve+"px",left:xe+"px"});Vt(d,this.getDragPosition(Ae)),!this.elementInViewport(d)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var De=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===De.length&&(De=this.getPathElements(i));var ge=this.getScrollParent(De,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(ge,ve):this.elementInViewport(this.helperElement)||(0===(De=[].slice.call(document.querySelectorAll(":hover"))).length&&(De=this.getPathElements(i)),ge=this.getScrollParent(De,!0),this.getScrollPosition(ge,ve))}this.dragProcessStarted=!0,this.prevLeft=n,this.prevTop=s,this.position.left=n,this.position.top=s,this.pageX=S,this.pageY=I}},t.prototype.getScrollParent=function(i,n){for(var o,s=n?i.reverse():i,a=s.length-1;a>=0;a--)if(("auto"===(o=window.getComputedStyle(s[a])["overflow-y"])||"scroll"===o)&&s[a].scrollHeight>s[a].clientHeight)return s[a];if("visible"===(o=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(i,n){i&&i===document.scrollingElement?i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<n&&i.getBoundingClientRect().height+this.parentClientRect.top>n?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>n-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight):i&&i!==document.scrollingElement&&(i.clientHeight+i.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<n?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>n-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(i.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(i){return document.elementsFromPoint(i.clientX>0?i.clientX:0,i.clientY>0?i.clientY:0)},t.prototype.triggerOutFunction=function(i,n){this.hoverObject.instance.intOut(i,n.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(i){var n=de({},i);return this.axis&&("x"===this.axis?delete n.top:"y"===this.axis&&delete n.left),n},t.prototype.getDocumentWidthHeight=function(i){var n=document.body,s=document.documentElement;return Math.max(n["scroll"+i],s["scroll"+i],n["offset"+i],s["offset"+i],s["client"+i])},t.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,$t(i.changedTouches)||1===i.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(i.type)){if(this.dragStop){var s=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:s,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var o=this.checkTargetElement(i);o.target&&o.instance&&(o.instance.dragStopCalled=!0,o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intDrop(i,o.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),T.remove(document,Q.touchMoveEvent,this.intDragStart),T.remove(document,Q.touchEndEvent,this.intDragStop),T.remove(document,Q.touchEndEvent,this.intDestroy),T.remove(document,Q.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(i){return i&&(D_.isDragged=!D_.isDragged),D_.isDragged},t.prototype.setDragArea=function(){var i,n,a,s=0,o=0;if(a="string"==typeof this.dragArea?le(this.dragArea):this.dragArea){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,n=a.scrollHeight?this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var u=["Top","Left","Bottom","Right"],d=getComputedStyle(a),m=0;m<u.length;m++){var y=u[m],C=d["border"+y+"Width"],S=d["padding"+y],I=y.toLowerCase();this.borderWidth[I]=isNaN(parseFloat(C))?0:parseFloat(C),this.padding[I]=isNaN(parseFloat(S))?0:parseFloat(S)}s=this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?h.top+document.scrollingElement.scrollTop:h.top,this.dragLimit.left=(o=h.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+n-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(i){var s,n=this.getCoordinates(i),o=this.helperElement.style.pointerEvents||"";return K0(i.target,this.helperElement)||-1!==i.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",s=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=o):s=i.target,s},t.prototype.currentStateCheck=function(i,n){return f(this.currentStateTarget)||this.currentStateTarget===i?f(n)?i:n:this.currentStateTarget},t.prototype.getMousePosition=function(i,n){var a,l,s=void 0!==i.srcElement?i.srcElement:i.target,o=this.getCoordinates(i),h=f(s.offsetParent);return n?(a=this.clone?o.pageX:o.pageX+(h?0:s.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+(h?0:s.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},t.prototype.getHelperElement=function(i){var n;return this.clone?this.helper?n=this.helper({sender:i,element:this.target}):(n=ri("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(n)):n=this.element,n},t.prototype.setGlobalDroppables=function(i,n,s){this.droppables[this.scope]=i?null:{draggable:n,helper:s,draggedElement:this.element}},t.prototype.checkTargetElement=function(i){var n=this.getProperTargetElement(i),s=this.getDropInstance(n);if(!s&&n&&!f(n.parentNode)){var o=U(n.parentNode,".e-droppable")||n.parentElement;o&&(s=this.getDropInstance(o))}return{target:n,instance:s}},t.prototype.getDropInstance=function(i){var s,o=i&&i.ej2_instances;if(o)for(var a=0,l=o;a<l.length;a++){var h=l[a];if("droppable"===h.getModuleName()){s=h;break}}return s},t.prototype.destroy=function(){this.toggleEvents(!0),r.prototype.destroy.call(this)},Ls([ln({},H3)],t.prototype,"cursorAt",void 0),Ls([E(!0)],t.prototype,"clone",void 0),Ls([E()],t.prototype,"dragArea",void 0),Ls([E()],t.prototype,"isDragScroll",void 0),Ls([E()],t.prototype,"isReplaceDragEle",void 0),Ls([E(!0)],t.prototype,"isPreventSelect",void 0),Ls([W()],t.prototype,"drag",void 0),Ls([W()],t.prototype,"dragStart",void 0),Ls([W()],t.prototype,"dragStop",void 0),Ls([E(1)],t.prototype,"distance",void 0),Ls([E()],t.prototype,"handle",void 0),Ls([E()],t.prototype,"abort",void 0),Ls([E()],t.prototype,"helper",void 0),Ls([E("default")],t.prototype,"scope",void 0),Ls([E("")],t.prototype,"dragTarget",void 0),Ls([E()],t.prototype,"axis",void 0),Ls([E()],t.prototype,"queryPositionInfo",void 0),Ls([E(!1)],t.prototype,"enableTailMode",void 0),Ls([E(!1)],t.prototype,"skipDistanceCheck",void 0),Ls([E(!0)],t.prototype,"preventDefault",void 0),Ls([E(!1)],t.prototype,"enableAutoScroll",void 0),Ls([E(!1)],t.prototype,"enableTapHold",void 0),Ls([E(750)],t.prototype,"tapHoldThreshold",void 0),Ls([E(!1)],t.prototype,"enableScrollHandler",void 0),e=Ls([ui],t)}(Jp),V3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qm=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},rw=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return V3(t,r),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){T.add(this.element,Q.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,i){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,i){this.mouseOver||(this.trigger("over",{event:e,target:i,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},t.prototype.intOut=function(e,i){this.mouseOver&&(this.trigger("out",{evt:e,target:i}),this.mouseOver=!1)},t.prototype.intDrop=function(e,i){if(this.dragStopCalled){this.dragStopCalled=!1;var a,n=!0,s=this.dragData[this.scope],o=!!s&&s.helper&&so(s.helper);o&&(a=this.isDropArea(e,s.helper,i),this.accept&&(n=Xm(s.helper,this.accept))),o&&this.drop&&a.canDrop&&n&&this.trigger("drop",{event:e,target:a.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,i,n){var s={canDrop:!0,target:n||e.target},o="touchend"===e.type;if(o||s.target===i){i.style.display="none";var a=o?e.changedTouches[0]:e,l=document.elementFromPoint(a.clientX,a.clientY);s.canDrop=!1,s.canDrop=K0(l,this.element),s.canDrop&&(s.target=l),i.style.display=""}return s},t.prototype.destroy=function(){T.remove(this.element,Q.touchEndEvent,this.intDrop),r.prototype.destroy.call(this)},Qm([E()],t.prototype,"accept",void 0),Qm([E("default")],t.prototype,"scope",void 0),Qm([W()],t.prototype,"drop",void 0),Qm([W()],t.prototype,"over",void 0),Qm([W()],t.prototype,"out",void 0),Qm([ui],t)}(Jp),z3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xT=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},PF={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},An=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.keyPressHandler=function(o){for(var a=o.altKey,l=o.ctrlKey,h=o.shiftKey,u=o.which,m=0,y=Object.keys(s.keyConfigs);m<y.length;m++)for(var C=y[m],I=0,k=s.keyConfigs[C].split(",");I<k.length;I++){var L=e.getKeyConfigData(k[I].trim());a===L.altKey&&l===L.ctrlKey&&h===L.shiftKey&&u===L.keyCode&&(o.action=C,s.keyAction&&s.keyAction(o))}},s.bind(),s}var e;return z3(t,r),e=t,t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[i];var n=i.toLowerCase().split("+"),s={altKey:-1!==n.indexOf("alt"),ctrlKey:-1!==n.indexOf("ctrl"),shiftKey:-1!==n.indexOf("shift"),keyCode:null};return s.keyCode=n[n.length-1].length>1&&Number(n[n.length-1])?Number(n[n.length-1]):e.getKeyCode(n[n.length-1]),e.configCache[i]=s,s},t.getKeyCode=function(i){return PF[i]||i.toUpperCase().charCodeAt(0)},t.configCache={},xT([E({})],t.prototype,"keyConfigs",void 0),xT([E("keyup")],t.prototype,"eventName",void 0),xT([W()],t.prototype,"keyAction",void 0),e=xT([ui],t)}(Jp),as=function(){function r(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||Y0)}return r.prototype.setLocale=function(t){var e=this.intGetControlConstant(r.locale,t);this.currentLocale=e||this.localeStrings},r.load=function(t){this.locale=de(this.locale,t,{},!0)},r.prototype.getConstant=function(t){return f(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]},r.prototype.intGetControlConstant=function(t,e){return t[e]?t[e][this.controlName]:null},r.locale={},r}(),FF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ic=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},I_=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return FF(t,r),Ic([E(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Ti),NF=/(Up|Down)/,Ja=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(s){if(!0===n.touchAction){var o=n.updateChangeTouches(s);void 0!==s.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY},n.startEventData=o,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(s)},n.tapHoldThreshold),T.add(n.element,Q.touchMoveEvent,n.moveEvent,n),T.add(n.element,Q.touchEndEvent,n.endEvent,n),T.add(n.element,Q.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(s){var o=n.updateChangeTouches(s);n.movedPoint=o,n.isTouchMoved=!(o.clientX===n.startPoint.clientX&&o.clientY===n.startPoint.clientY);var a={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(s),a=de(a,{},{startEvents:n.startEventData,originalEvent:s,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(o)}),n.trigger("scroll",a),n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY})},n.cancelEvent=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(s),T.remove(n.element,Q.touchCancelEvent,n.cancelEvent)},n.endEvent=function(s){n.swipeFn(s),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:s,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var o=n.updateChangeTouches(s),a=o.clientX-n.startPoint.clientX,l=o.clientY-n.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),n.isTouchMoved=a>1||l>1,/Firefox/.test(Q.userAgent)&&0===o.clientX&&0===o.clientY&&"mouseup"===s.type&&(n.isTouchMoved=!1),n.endPoint=o,n.calcPoints(s);var u={originalEvent:s,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(o)};if(n.isTouchMoved){var d=void 0,m=n.swipeSettings.swipeThresholdDistance;d=de(d,n.defaultArgs,u);var y=!1,C=n.element,S=n.isScrollable(C),I=NF.test(n.movedDirection);(m<n.distanceX&&!I||m<n.distanceY&&I)&&(y=!S||n.checkSwipe(C,I)),y&&n.trigger("swipe",d)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),T.remove(n.element,Q.touchMoveEvent,n.moveEvent),T.remove(n.element,Q.touchEndEvent,n.endEvent),T.remove(n.element,Q.touchCancelEvent,n.cancelEvent)},n.bind(),n}return FF(t,r),t.prototype.onPropertyChanged=function(e,i){},t.prototype.bind=function(){this.wireEvents(),Q.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.wireEvents=function(){T.add(this.element,Q.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){T.remove(this.element,Q.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var i=getComputedStyle(e);return!!/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,T.remove(this.element,Q.touchMoveEvent,this.moveEvent),T.remove(this.element,Q.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),T.remove(this.element,Q.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?i.clientX>this.startPoint.clientX?"Right":"Left":i.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var i=e.clientX,n=e.clientY,s=Date.now(),o=i-this.startPoint.clientX,a=n-this.startPoint.clientX,l=s-this.tStampStart;return Math.sqrt(o*o+a*a)/l},t.prototype.checkSwipe=function(e,i){var n=["scroll","offset"],s=i?["Height","Top"]:["Width","Left"];return e[n[0]+s[0]]<=e[n[1]+s[0]]||0===e[n[0]+s[1]]||e[n[1]+s[0]]+e[n[0]+s[1]]>=e[n[0]+s[0]]},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Ic([W()],t.prototype,"tap",void 0),Ic([W()],t.prototype,"tapHold",void 0),Ic([W()],t.prototype,"swipe",void 0),Ic([W()],t.prototype,"scroll",void 0),Ic([E(350)],t.prototype,"tapThreshold",void 0),Ic([E(750)],t.prototype,"tapHoldThreshold",void 0),Ic([ln({},I_)],t.prototype,"swipeSettings",void 0),Ic([ui],t)}(Jp),j3=new RegExp("\\n|\\r|\\s\\s+","g"),U3=new RegExp(/'|"/g),A_=new RegExp("if ?\\("),W3=new RegExp("else if ?\\("),__=new RegExp("else"),db=new RegExp("for ?\\("),k_=new RegExp("(/if|/for)"),q3=new RegExp("\\((.*)\\)",""),BF=new RegExp("^[0-9]+$","g"),HF=new RegExp("[\\w\"'.\\s+]+","g"),R_=new RegExp('"(.*?)"',"g"),G3=new RegExp("[\\w\"'@#$.\\s-+]+","g"),M_=new RegExp("\\${([^}]*)}","g"),K3=/^\..*/gm,DT=/\\/gi,L_=/\\\\/gi,VF=new RegExp("[\\w\"'@#$.\\s+]+","g"),zF=/\window\./gm;function pb(r,t,e,i,n){return!t||BF.test(r)||-1!==i.indexOf(r.split(".")[0])||n?r:e+"."+r}function O_(r,t,e,i){return t&&!BF.test(r)&&-1===i.indexOf(r.split(".")[0])?e+'["'+r:r}function WF(r){return r.match(L_)||(r=r.replace(DT,"\\\\")),r}function P_(r,t,e,i){if(r=r.trim(),/\window\./gm.test(r))return r;var s=/'|"/gm;return/@|\$|#/gm.test(r)&&(r=O_(r,-1===e.indexOf(r),t,e)+'"]'),K3.test(r)?function $3(r,t,e,i){return!t||BF.test(r)||-1!==i.indexOf(r.split(".")[0])||/^\..*/gm.test(r)?r:e+"."+r}(r,!s.test(r)&&-1===e.indexOf(r),t,e):pb(r,!s.test(r)&&-1===e.indexOf(r),t,e,i)}var XZ=/^[\n\r.]+<tr|^<tr/,qF=/^[\n\r.]+<svg|^<path|^<g/,Rd={};function Pi(r,t,e){var i=F_.compile(r,t,e);return function(n,s,o,a,l,h,u,d){var m=i(n,s,o,u,d);return"string"==typeof m?qF.test(m)?ri("svg",{innerHTML:m}).childNodes:ri(XZ.test(m)?"table":"div",{innerHTML:m}).childNodes:m}}function fb(r,t,e,i,n){0}function Ac(r,t,e){var i=document.getElementById(r);if(i)for(var n=i.getElementsByClassName("blazor-inner-template"),s=0;s<n.length;s++){var o;o=f(e)?n[s].getAttribute("data-templateId"):n[e].getAttribute("data-templateId");var a=document.getElementById(o);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)f(e)?n[s].appendChild(a.childNodes[0]):(n[e].appendChild(a.childNodes[0]),s=n.length)}}var KF=function(){function r(){}return r.prototype.compile=function(t,e,i){return void 0===e&&(e={}),function jF(r,t,e){var i="data",n=function UF(r,t,e,i){var n=0,s=[],o=r.match(/class="([^"]+|)\s{2}/g),a="";return o&&o.forEach(function(l){a=l.replace(/\s\s+/g," "),r=r.replace(l,a)}),r.replace(j3,"").replace(R_,"'$1'").replace(M_,function(l,h,u,d){var y=h.match(q3);if(y){var C=y[1];if(W3.test(h))h='";} '+h.replace(y[1],C.replace(HF,function(G){return pb(G=G.trim(),!U3.test(G)&&-1===s.indexOf(G),t,s,i)}))+'{ \n str = str + "';else if(A_.test(h))h='"; '+h.replace(y[1],C.replace(G3,function(G){return P_(G,t,s,i)}))+'{ \n str = str + "';else if(db.test(h)){var S=y[1].split(" of ");h='"; '+h.replace(y[1],function(G){return s.push(S[0]),s.push(S[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+pb(S[1],!0,t,s,i)+".length; i"+n+"++"})+"{ \n "+S[0]+"= "+pb(S[1],!0,t,s,i)+"[i"+n+"]; \n var "+S[0]+"Index=i"+n+'; \n str = str + "'}else{var I=h.split("("),k=e&&e.hasOwnProperty(I[0])?"this.":"global";k=/\./.test(I[0])?"":k;var O=y[1].split(",");0!==y[1].length&&!/data/.test(O[0])&&!/window./.test(O[0])&&(y[1]="global"===k?t+"."+y[1]:y[1]),zF.test(h)&&/\]\./gm.test(h)||/@|\$|#/gm.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===k?"":k)+h.replace(y[1],C.replace(VF,function(G){return P_(G,t,s,i)}))+'+ "'):h='" + '+("global"===k?"":k)+h.replace(C,pb(y[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==k,t,s,i))+'+"'}}else __.test(h)?h='"; '+h.replace(__,'} else { \n str = str + "'):h.match(k_)?h=h.replace(k_,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(DT)&&(h=WF(h)),h='"+'+O_(h,-1===s.indexOf(h),t,s)+'"]+"'):h=h.match(DT)?'"+'+O_(h=WF(h),-1===s.indexOf(h),t,s)+'"]+"':'"+'+pb(h.replace(/,/gi,"+"+t+"."),-1===s.indexOf(h),t,s,i)+'+"';return h})}(r,i,t,e);return new Function(i,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}(t,e)},r}(),F_={compile:(new KF).compile},X3=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Q3=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],$F=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],jn=function(){function r(){}return r.beforeSanitize=function(){return{selectors:{tags:X3,attributes:Q3}}},r.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},r.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},r.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[e].attributes,n=0;n<i.length;n++)this.wrapElement.children[e].removeAttribute(i[n].localName)},r.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(e){ce(e)})},r.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+$F.join("],[")+"]");t.length>0&&t.forEach(function(e){$F.forEach(function(i){e.hasAttribute(i)&&e.removeAttribute(i)})})},r.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(s){s.removeAttribute(e.attribute)})})},r}();function Md(r){return function(t){!function J3(r,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!r.prototype.hasOwnProperty(i)||e.isFormBase)&&(r.prototype[i]=e.prototype[i])})})}(t,r)}}function YF(r,t,e){var i={};if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var o=s[n];!0===e?(t.propCollection[o]=new v.vpe(!1),t[o]=t.propCollection[o]):i[o]=new v.vpe(!1)}!0!==e&&t.setProperties(i,!0)}}function gb(r,t,e){var i=Object.keys(r.registeredTemplate);if(i.length)for(var n=t&&t.filter(function(L){return!/\./g.test(L)}),s=0,o=n&&n||i;s<o.length;s++){var a=o[s];if(e&&e.length)for(var l=0;l<e.length;l++)for(var h=0;h<r.registeredTemplate.template.length;h++)r.registeredTemplate.template[h].rootNodes[0]===e[l]&&(d=r.registeredTemplate[a])[h].destroy();else if(r.registeredTemplate[a])for(var m=0,y=r.registeredTemplate[a];m<y.length;m++){var d;if(!(d=y[m]).destroyed){if(d._view){var C=d._view.renderer.parentNode(d.rootNodes[0]);if(!f(C))for(h=0;h<d.rootNodes.length;h++)C.appendChild(d.rootNodes[h])}d.destroy()}}delete r.registeredTemplate[a]}for(var S=function(L){L.instance&&L.instance.clearTemplate(t&&t.filter(function(B){return!!new RegExp(L.name).test(B)}))},I=0,k=r.tagObjects;I<k.length;I++)S(k[I])}function th(r,t,e){for(var i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=0;s<i.length;s++){var o=i[s];s+1===i.length?n[o]=void 0===t?{}:t:void 0===n[o]&&(n[o]={}),n=n[o]}return n}var ZF=/Ref$/,sw=function(){function r(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return r.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],n=ie("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var s=Object.keys(this),o=0;o<s.length;o++){var a=ie(s[o],this);"object"==typeof a&&a&&a.elementRef&&(ie(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",this)||jt(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",a,this),ie("viewContainerRef",this)&&!ie("_viewContainerRef",a.elementRef.nativeElement)&&!ie("propName",a.elementRef.nativeElement)&&(jt("_viewContainerRef",ie("viewContainerRef",this),a.elementRef.nativeElement),jt("propName",s[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=s=(s=Object.keys(this)).filter(function(S){return/Ref$/i.test(S)});l<h.length;l++){var d=h[l].replace("Ref","");jt(d.replace("_","."),ie(d,this),this.propCollection)}var m=Object.keys(this);if(this.directivePropList){for(var y=0;y<this.directivePropList.length;y++){var C=this.directivePropList[y];-1!==m.indexOf(C)&&(!1===ie(C,this)||ie(C,this))&&jt(C,ie(C,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},r.prototype.registerEvents=function(t){YF(t,this,!0)},r.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.propCollection[n]=t[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},r.prototype.clearTemplate=function(t){gb(this,t)},r.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},r.prototype.isChanged=function(){var t=this.hasChanges;if(!f(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),n=0;n<i.length;n++)if(!f(this.propCollection[i[n]])){var s=ie(i[n],this),o=this.propCollection[this.property][0][i[n]];!f(s)&&this.propCollection[i[n]]!==s&&o!==s&&(jt(i[n],s,this.propCollection[this.property][0]),jt(i[n],s,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)t=t||l[a].instance.hasChanges;return t||this.hasChanges},r.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var t=Object.keys(this),e=0,i=t=t.filter(function(o){return ZF.test(o)});e<i.length;e++){var s=i[e].replace("Ref","");jt(s.replace("_","."),ie(s,this),this.propCollection)}},r.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.directivePropList=[]},r}(),ow=function(){function r(t){this.list=[],this.hasChanges=!1,this.propertyName=t}return r.prototype.ngOnInit=function(){this.isInitChanges=!0},r.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},r.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++)t.push(i[e].getProperties());return t},r.prototype.isChanged=function(){var t=this,e=!1,i=0,n=!1,s=this.children.map(function(u){return u});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),n=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(s[o].propCollection.dataSource)),n=this.list[o].hasChanges!==s[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(u){return u.dirIndex=i++,u.property=t.propertyName,u}));for(var a=0,l=this.list;a<l.length;a++)e=e||l[a].hasChanges;return!!this.list.length&&e},r.prototype.clearTemplate=function(t){for(var e=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(t&&t.map(function(o){return new RegExp(e.propertyName).test(o)?o.replace(e.propertyName+".",""):o}))},r.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)ie("childColumns",this.list[t])&&"columns"===ie("property",this.list[t])&&jt("columns",ie("childColumns",this.list[t]).getProperties(),this.list[t].propCollection),this.list[t].isUpdated=!0},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.list=[]},r}(),aa=function(){function r(){this.isProtectedOnChange=!0,this.isFormInit=!0}return r.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},r.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(S,I){var k=e.srenderer?e.srenderer.createElement(S):ri(S);return typeof I>"u"||(k.innerHTML=I.innerHTML?I.innerHTML:"",void 0!==I.className&&(k.className=I.className),void 0!==I.id&&(k.id=I.id),void 0!==I.styles&&k.setAttribute("style",I.styles),void 0!==e.ngAttr&&k.setAttribute(e.ngAttr,""),void 0!==I.attrs&&Ue(k,I.attrs)),k};for(var i=0,n=e.tags;i<n.length;i++){var s=n[i],o={instance:ie("child"+s.substring(0,1).toUpperCase()+s.substring(1),e),name:s};e.tagObjects.push(o)}for(var a=Object.keys(e),l=0;l<a.length;l++){var h=ie(a[l],e);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&jt(a[l]+"Ref",h,e),e.viewContainerRef&&!ie("_viewContainerRef",h.elementRef.nativeElement)&&!ie("propName",h.elementRef.nativeElement)&&(jt("_viewContainerRef",e.viewContainerRef,h.elementRef.nativeElement),jt("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var u=0,d=a=(a=Object.keys(e)).filter(function(S){return/Ref$/i.test(S)&&/\_/i.test(S)});u<d.length;u++){var y=d[u].replace("Ref",""),C={};jt(y.replace("_","."),ie(y,e),C),e.setProperties(C,!0)}},r.prototype.getAngularAttr=function(t){for(var n,e=t.attributes,i=e.length,s=0;s<i;s++)/_ngcontent/g.test(e[s].name)&&(n=e[s].name);return n},r.prototype.ngAfterViewInit=function(t){var e=t||this;/ejs-tab|ejs-accordion/g.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");for(var n=Object.keys(e),s=0,o=n=n.filter(function(h){return/Ref$/i.test(h)});s<o.length;s++){var l=o[s].replace("Ref","");jt(l.replace("_","."),ie(l+"Ref",e),e)}setTimeout(function(){(typeof window<"u"&&e.element||e.getModuleName().includes("btn"))&&(e.appendTo(e.element),e.ngEle.nativeElement.style.visibility="")})},r.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){typeof window<"u"&&e.element.classList.contains("e-control")&&(e.destroy(),e.clearTemplate(null),e.ngBoundedEvents={},e.tagObjects={},e.ngEle=null)})},r.prototype.clearTemplate=function(t,e){gb(this,t,e)},r.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,n=e.tagObjects;i<n.length;i++){var s=n[i];if(!$t(s.instance)&&(s.instance.isInitChanges||s.instance.hasChanges||s.instance.hasNewChildren))if(s.instance.isInitChanges){var o={},a=void 0;(l=ie("instance.list",s))&&l.length&&(a=l[0].directivePropList);var h=!0;if(e.getModuleName&&"gantt"===e.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(s.instance.propertyName))for(var u=Object.keys(s.instance.list[0].propCollection),d=0;d<s.instance.list.length;d++){s.instance.list[d].propCollection[s.instance.propertyName]=[];for(var m={},y=0;y<u.length;y++)m[C=u[y]]=s.instance.list[d].propCollection[C];for(var S=0;S<s.instance.list[d].tags.length;S++){var I=s.instance.list[d].tags[S],k=ie("child"+I.substring(0,1).toUpperCase()+I.substring(1),s.instance.list[d]);if(k){var O=s.instance.list[d]["child"+I.substring(0,1).toUpperCase()+I.substring(1)];if(O)for(var L=0;L<O.list.length;L++){var B=O.list[0].tags[0];if(B){var j=ie("child"+B.substring(0,1).toUpperCase()+B.substring(1),O.list[L]);j&&O.list[L].tagObjects.push({instance:j,name:B})}}s.instance.list[d].tagObjects.push({instance:k,name:I})}}s.instance.list[d].propCollection[s.instance.propertyName].push(m)}o[s.name]=s.instance.getProperties(),e.setProperties(o,s.instance.isInitChanges)}else{(e[s.name].length!==s.instance.list.length||/diagram|tab|DashboardLayout/.test(e.getModuleName()))&&(e[s.name]=s.instance.list);for(var G=0,ae=s.instance.list;G<ae.length;G++){var l,ve=s.instance.list.indexOf(l=ae[G]),xe=ie(s.name,e)[ve],Le=Object.keys(xe);if(Le=Le.filter(function(ge){return/Ref$/i.test(ge)}),xe.properties&&0!==Object.keys(xe.properties).length)for(var oe=0,Ae=Le;oe<Ae.length;oe++){var C;C=(C=Ae[oe]).replace(/Ref/,""),xe.properties[C]=xe.properties[C]?xe.properties[C]:xe.propCollection[C]}!$t(xe)&&!$t(xe.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?xe.setProperties(l.getProperties(),!0):xe.setProperties(l.getProperties())),l.isUpdated=!0}}}},r.prototype.registerEvents=function(t){YF(t,this)},r.prototype.twoWaySetter=function(t,e){var i=ie(e,this.properties);i!==t&&(this.saveChanges(e,t,i),jt(e,f(t)?null:t,this.properties),ie(e+"Change",this).emit(t))},r.prototype.addTwoWay=function(t){for(var e=this,i=function(l){ie(l,n),Object.defineProperty(n,l,{get:function(){return ie(l,e.properties)},set:function(h){return e.twoWaySetter(h,l)}}),jt(l+"Change",new v.vpe,n)},n=this,s=0,o=t;s<o.length;s++)i(o[s])},r.prototype.addEventListener=function(t,e){var i=ie(t,this);$t(i)||(this.ngBoundedEvents[t]||(this.ngBoundedEvents[t]=new Map),this.ngBoundedEvents[t].set(e,i.subscribe(e)))},r.prototype.removeEventListener=function(t,e){$t(ie(t,this))||this.ngBoundedEvents[t].get(e).unsubscribe()},r.prototype.trigger=function(t,e,i){var n=ie(t,this),s=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),$t(n)||n.next(e);var o=ie("local"+t.charAt(0).toUpperCase()+t.slice(1),this);$t(o)||o.call(this,e),this.isProtectedOnChange=s,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},r}(),el=function(){function r(){}return r.prototype.propagateChange=function(t){},r.prototype.propagateTouch=function(){},r.prototype.localChange=function(t){var e=void 0===t.checked?t.value:t.checked;this.objCheck=Hu(e),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)):e!==this.angularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)},r.prototype.registerOnChange=function(t){this.propagateChange=t},r.prototype.registerOnTouched=function(t){this.propagateTouch=t},r.prototype.twoWaySetter=function(t,e){var i=this.oldValue||ie(e,this.properties),n=this.inputElement||this.element;n&&i===t&&this.value===t&&(void 0===n.value||""===n.value)||(this.saveChanges(e,t,i),jt(e,f(t)?null:t,this.properties),ie(e+"Change",this).emit(t))},r.prototype.ngAfterViewInit=function(t){var e=this,i=t||this;setTimeout(function(){if(typeof window<"u"){i.appendTo(i.element);var n=i.inputElement||i.element;n.addEventListener("focus",i.ngOnFocus.bind(i)),n.addEventListener("blur",i.ngOnBlur.bind(i))}e.isFormInit=!1})},r.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},r.prototype.writeValue=function(t){void 0===this.checked?this.value=t:this.ngEle&&(this.checked="boolean"==typeof t?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?t===this.value:t:t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit},r.prototype.ngOnFocus=function(t){!0!==this.skipFromEvent&&this.focus.emit(t)},r.prototype.ngOnBlur=function(t){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(t)},r.isFormBase=!0,r}(),QZ=function Z3(){return F_.compile}();function yn(r){return function(t,e){var i={set:t6(e),get:i6(e,r),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}}function t6(r){return function(t){void 0!==t&&(jt(r+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=r):this.saveChanges&&(this.saveChanges(r,t,void 0),this.dataBind()))}}function i6(r,t){return function(){return ie(r+"Ref",this)||t}}!function Y3(r){F_.compile=r.compile}({compile:function XF(r,t){if("string"==typeof r)return QZ(r,t);var e=r.elementRef.nativeElement._viewContainerRef,i=r.elementRef.nativeElement.propName;return function(n,s,o){var l=e||s.viewContainerRef,h=l.createEmbeddedView(r,{$implicit:n});h.detectChanges();var u=s&&s.registeredTemplate?s.registeredTemplate:ie("currentInstance.registeredTemplate",l);return typeof u[o=o&&s.registeredTemplate?o:i]>"u"&&(u[o]=[]),u[o].push(h),h.rootNodes}}});var si=function(){function r(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return r.prototype.setKey=function(t){return this.key=t,this},r.prototype.using=function(t){return this.dataManager=t,this},r.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):Ye.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):Ye.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.clone=function(){var t=new r;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},r.prototype.from=function(t){return this.fromTable=t,this},r.prototype.addParams=function(t,e){return this.params.push("function"==typeof e?{key:t,fn:e}:{key:t,value:e}),this},r.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.where=function(t,e,i,n,s,o){e=e?e.toLowerCase():null;var a=null;return"string"==typeof t?a=new kn(t,e,i,n,s,o):t instanceof kn&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},r.prototype.search=function(t,e,i,n,s){return"string"==typeof e&&(e=[e]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:s,comparer:Ye.fnOperators[i]}}),this},r.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},r.prototype.sortByForeignKey=function(t,e,i,n){var o,a,s=f(n)?"ascending":n;if("string"==typeof t&&Ye.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||"string"==typeof e)&&(s=e?e.toLowerCase():"ascending",e=Ye.fnSort(e)),i){o=r.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(a=o[l].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:s}}),this},r.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},r.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},r.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},r.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},r.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},r.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},r.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},r.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},r.prototype.foreignKey=function(t){return this.fKey=t,this},r.prototype.requiresCount=function(){return this.isCountRequired=!0,this},r.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},r.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},r.filterQueryLists=function(t,e){for(var i=t.filter(function(o){return-1!==e.indexOf(o.fn)}),n={},s=0;s<i.length;s++)n[i[s].fn]||(n[i[s].fn]=i[s].e);return n},r}(),kn=function(){function r(t,e,i,n,s,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=n,this.ignoreAccent=s,this.isComplex=!1,this.comparer=Ye.fnOperators.processOperator(this.operator)):(t instanceof r&&i instanceof r||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return r.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"and")},r.prototype.and=function(t,e,i,n,s){return r.combine(this,t,e,i,"and",n,s)},r.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"or")},r.prototype.or=function(t,e,i,n,s){return r.combine(this,t,e,i,"or",n,s)},r.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}return this.fromJSONData(t)},r.prototype.validate=function(t){var i,n,e=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Ye.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var s=0;s<e.length;s++)if(n=e[s].validate(t),i){if(!n)return!1}else if(n)return!0;return i},r.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},r.combinePredicates=function(t,e){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new r(t[0],e,t.slice(1))},r.combine=function(t,e,i,n,s,o,a){return e instanceof r?r[s](t,e):"string"==typeof e?r[s](t,new r(e,i,n,o,a)):Ye.throwError("Predicate - "+s+" : invalid arguments")},r.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,n=[],o=0;o<i;o++)n.push(this.fromJSONData(e[o]));return t.isComplex?new r(n[0],t.condition,n.slice(1)):new r(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},r}(),QF={GroupGuid:"{271bbba0-1ee7}"},Ye=function(){function r(){}return r.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},r.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},r.startsWith=function(t,e){return t.slice(0,e.length)===e},r.fnSort=function(t){return"ascending"===(t=t?r.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},r.fnAscending=function(t,e){return f(t)&&f(e)||null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},r.fnDescending=function(t,e){return f(t)&&f(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},r.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},r.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},r.group=function(t,e,i,n,s,o,a){n=n||1;var l=t,h="GroupGuid";if(l.GroupGuid===QF[h]){for(var u=function(L){if(f(s))l[L].items=d.group(l[L].items,e,i,l.level+1,null,o,a),l[L].count=l[L].items.length;else{var B,j=s.filter(function(G){return G.key===l[L].key});B=s.indexOf(j[0]),l[L].items=d.group(l[L].items,e,i,l.level+1,s[B].items,o,a),l[L].count=s[B].count}},d=this,m=0;m<l.length;m++)u(m);return l.childLevels+=1,l}var y={},C=[];C.GroupGuid=QF[h],C.level=n,C.childLevels=0,C.records=l;for(var S=function(L){var B=I.getVal(l,L,e);if(f(o)||(B=o(B,e)),!y[B]&&(y[B]={key:B,count:0,items:[],aggregates:{},field:e},C.push(y[B]),!f(s))){var j=s.filter(function(G){return G.key===y[B].key});y[B].count=j[0].count}y[B].count=f(s)?y[B].count+=1:y[B].count,(!a||a&&i.length)&&y[B].items.push(l[L])},I=this,k=0;k<l.length;k++)S(k);if(i&&i.length){var O=function(L){for(var B={},j=void 0,G=i,ae=0;ae<i.length;ae++)if(j=r.aggregates[i[ae].type],f(s))j&&(B[G[ae].field+" - "+G[ae].type]=j(C[L].items,G[ae].field));else{var ve=s.filter(function(xe){return xe.key===C[L].key});j&&(B[G[ae].field+" - "+G[ae].type]=j(ve[0].items,G[ae].field))}C[L].aggregates=B};for(k=0;k<C.length;k++)O(k)}if(a&&C.length&&i.length)for(k=0;k<C.length;k++)C[k].items=[];return l.length&&C||l},r.buildHierarchy=function(t,e,i,n,s){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[h=this.getObject(t,n[o])]||(a[h]=[])).push(n[o]);for(o=0;o<i.length;o++){var h=this.getObject(s||t,i[o]);i[o][e]=a[h]}},r.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];"object"!=typeof n[l]||n[l]instanceof Array?e.push(i+l):this.getFieldList(n[l],e,i+l+".")}return e},r.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf("."))return e[t];for(var i=e,n=t.split("."),s=0;s<n.length&&null!=i;s++)i=i[n[s]];return i}},r.setValue=function(t,e,i){var a,h,n=t.toString().split("."),s=i||{},o=s,l=n.length;for(a=0;a<l;a++)h=n[a],a+1===l?o[h]=void 0===e?void 0:e:f(o[h])&&(o[h]={}),o=o[h];return s},r.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),s=t.slice(0,n),o=t.slice(n);return s=this.sort(s,e,i),o=this.sort(o,e,i),this.merge(s,o,e,i)},r.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(n){return n in r.diacritics?r.diacritics[n]:n}).join("")},r.merge=function(t,e,i,n){for(var o,s=[];t.length>0||e.length>0;)o=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,s.push(o.shift());return s},r.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},r.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},r.callAdaptorFunction=function(t,e,i,n){if(e in t){var s=t[e](i,n);f(s)||(i=s)}return i},r.getAddParams=function(t,e,i){var n={};return r.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i.params,reqParams:n}),n},r.isPlainObject=function(t){return!!t&&t.constructor===Object},r.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch{}return!!t&&"withCredentials"in t},r.getGuid=function(t){var i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,s){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===s?3&i|8:i]})},r.isNull=function(t){return null==t},r.getItemFromComparer=function(t,e,i){var n,s,o,a=0,l="string"==typeof r.getVal(t,0,e);if(t.length)for(;f(n)&&a<t.length;)n=r.getVal(t,a,e),o=t[a++];for(;a<t.length;a++)!f(s=r.getVal(t,a,e))&&(l&&(n=+n,s=+s),i(n,s)>0&&(n=s,o=t[a]));return o},r.distinct=function(t,e,i){i=!f(i)&&i;var s,n=[],o={};return t.forEach(function(a,l){(s="object"==typeof t[l]?r.getVal(t,l,e):t[l])in o||(n.push(i?t[l]:s),o[s]=1)}),n},r.processData=function(t,e){var i=this.prepareQuery(t),n=new Je(e);t.requiresCounts&&i.requiresCount();var s=n.executeLocal(i),o={result:t.requiresCounts?s.result:s,count:s.count,aggregates:JSON.stringify(s.aggregates)};return t.requiresCounts?o:s},r.prepareQuery=function(t){var e=this,i=new si;return t.select&&i.select(t.select),t.where&&r.parse.parseJson(t.where).filter(function(o){if(f(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var a=[];o.field?a.push(new kn(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):a=a.concat(e.getPredicate(o.predicates)),"or"==o.condition?i.where(kn.or(a)):"and"==o.condition&&i.where(kn.and(a))}}),t.search&&r.parse.parseJson(t.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),t.aggregates&&t.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),t.sorted&&t.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(o){return i.group(o)}),i},r.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new kn(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var s=[],o=this.getPredicate(n.predicates),a=0,l=Object.keys(o);a<l.length;a++)s.push(o[l[a]]);e.push("or"==n.condition?kn.or(s):kn.and(s))}}return e},r.serverTimezoneOffset=null,r.timeZoneHandling=!0,r.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},r.aggregates={sum:function(t,e){for(var n,i=0,s="number"!=typeof r.getVal(t,0,e),o=0;o<t.length;o++)n=r.getVal(t,o,e),!isNaN(n)&&null!==n&&(s&&(n=+n),i+=n);return i},average:function(t,e){return r.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnAscending))},max:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnDescending))},truecount:function(t,e){return new Je(t).executeLocal((new si).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new Je(t).executeLocal((new si).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},r.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},r.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},r.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},r.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},r.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},r.fnOperators={equal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?r.toLowerCase(t)===r.toLowerCase(e):t===e},notequal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),!r.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?r.toLowerCase(t)<r.toLowerCase(e):(f(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?r.toLowerCase(t)>r.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?r.toLowerCase(t)<=r.toLowerCase(e):(f(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?r.toLowerCase(t)>=r.toLowerCase(e):t>=e},contains:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?!f(t)&&!f(e)&&-1!==r.toLowerCase(t).indexOf(r.toLowerCase(e)):!f(t)&&!f(e)&&-1!==t.toString().indexOf(e)},notnull:function(t){return null!==t},isnull:function(t){return null===t},startswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.startsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.startsWith(t,e)},endswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.endsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.endsWith(t,e)},processSymbols:function(t){var e=r.operatorSymbols[t];return e?r.fnOperators[e]:r.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return r.fnOperators[t]||r.fnOperators.processSymbols(t)}},r.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,r.parse.jsonReviver):t instanceof Array?r.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&r.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&null!==t[e]?r.parse.iterateAndReviveJson(t[e]):t[e]="string"!=typeof t[e]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])?r.parse.parseJson(t[e]):r.parse.jsonReviver("",t[e])},iterateAndReviveJson:function(t){for(var e,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];r.startsWith(o,"__")||("object"==typeof(e=t[o])?e instanceof Array?r.parse.iterateAndReviveArray(e):e&&r.parse.iterateAndReviveJson(e):t[o]=r.parse.jsonReviver(t[o],e))}},jsonReviver:function(t,e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),n=r.timeZoneHandling?r.serverTimezoneOffset:null;if(i)return r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.indexOf("Z")>-1||e.indexOf("z")>-1,o=e.split(/[^0-9.]/);if(s){if(o[5].indexOf(".")>-1){var a=o[5].split(".");o[5]=a[0],o[6]=a[1]}else o[6]="00";e=r.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10),parseInt(o[6],10)),r.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),h=parseInt(o[6],10),u=parseInt(o[7],10);if(isNaN(h)&&isNaN(u))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-u):l.setHours(l.getHours()+h,l.getMinutes()+u),e=r.dateParse.toTimeZone(l,r.serverTimezoneOffset,!1)}null==r.serverTimezoneOffset&&(e=r.dateParse.addSelfOffset(e))}}return e},isJson:function(t){return"string"==typeof t[0]?t:r.parse.parseJson(t)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(t,e){return r.isPlainObject(t)?r.parse.jsonReplacer(t,e):t instanceof Array?r.parse.arrayReplacer(t):t instanceof Date?r.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,s=0,o=Object.keys(t);s<o.length;s++){var a=o[s];if((i=t[a])instanceof Date){var l=i;null==r.serverTimezoneOffset?t[a]=r.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*r.serverTimezoneOffset),t[a]=r.dateParse.toTimeZone(r.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)r.isPlainObject(t[e])?t[e]=r.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=r.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if("value"===t&&e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.split(/[^0-9]/);e=r.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(e instanceof Date)return e=r.dateParse.addSelfOffset(e),null===r.serverTimezoneOffset?r.dateParse.toTimeZone(r.dateParse.addSelfOffset(e),null).toJSON():(e=r.dateParse.toTimeZone(e,e.getTimezoneOffset()/60*2-r.serverTimezoneOffset,!1)).toJSON()}return e}},r.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(t,e,i){if(null===e)return t;var n=i?r.dateParse.toUTC(t):t;return new Date(+n-36e5*e)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",s=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+n+s(i/60)+":"+s(i%60)}},r}(),Va=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),n6={GroupGuid:"{271bbba0-1ee7}"},IT=function(){function r(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=r,this.dataSource=t,this.pvt={}}return r.prototype.processResponse=function(t,e,i,n){return t},r}(),Jm=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Va(t,r),t.prototype.processQuery=function(e,i){for(var a,l,m,n=e.dataSource.json.slice(0),s=n.length,o=!0,h={},u=0,d=[],y=0;y<i.lazyLoad.length;y++)u++,h[i.lazyLoad[y].key]=i.lazyLoad[y].value;var C={};for(y=0;y<i.queries.length;y++)"onPage"!==(l=i.queries[y]).fn&&"onGroup"!==l.fn||!i.lazyLoad.length?(a=this[l.fn].call(this,n,l.e,i),"onAggregates"===l.fn?C[l.e.field+" - "+l.e.type]=a:n=void 0!==a?a:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(o=!1),o&&(s=n.length)):("onGroup"===l.fn&&d.push(l.e),"onPage"===l.fn&&(m=l.e));if(u){var I=this.lazyLoadGroup({query:i,lazyLoad:h,result:n,group:d,page:m});n=I.result,s=I.count}return i.isCountRequired&&(n={result:n,count:s,aggregates:C}),n},t.prototype.lazyLoadGroup=function(e){var i=0,n=this.getAggregate(e.query),s=e.result;if(f(e.lazyLoad.onDemandGroupInfo)){i=(s=Ye.group(s,e.group[0].fieldName,n,null,null,e.group[0].comparer,!0)).length;var h=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,h)}else{for(var o=e.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)s=this.onWhere(s,o.where[a]);e.group.length!==o.level&&(s=Ye.group(s,e.group[o.level].fieldName,n,null,null,e.group[0].comparer,!0)),i=s.length,h=s,s=(s=s.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(s,h)}return{result:s,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var n="GroupGuid",s="childLevels",o="level",a="records";e[n]=i[n],e[s]=i[s],e[o]=i[o],e[a]=i[a]}return e},t.prototype.getAggregate=function(e){var i=si.filterQueries(e.queries,"onAggregates"),n=[];if(i.length)for(var s=void 0,o=0;o<i.length;o++)n.push({type:(s=i[o].e).type,field:Ye.getValue(s.field,e)});return n},t.prototype.batchRequest=function(e,i,n){var s,o=i.deletedRecords.length;for(s=0;s<i.addedRecords.length;s++)this.insert(e,i.addedRecords[s]);for(s=0;s<i.changedRecords.length;s++)this.update(e,n.key,i.changedRecords[s]);for(s=0;s<o;s++)this.remove(e,n.key,i.deletedRecords[s]);return i},t.prototype.onWhere=function(e,i){return e&&e.length?e.filter(function(n){if(i)return i.validate(n)}):e},t.prototype.onAggregates=function(e,i){var n=Ye.aggregates[i.type];return e&&n&&0!==e.length?n(e,i.field):null},t.prototype.onSearch=function(e,i){return e&&e.length?(0===i.fieldNames.length&&Ye.getFieldList(e[0],i.fieldNames),e.filter(function(n){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(n,Ye.getObject(i.fieldNames[s],n),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,i,n){if(!e||!e.length)return e;var s,o=Ye.getValue(i.fieldName,n);if(!o)return e.sort(i.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)!o[a]||(s=i.comparer,Ye.endsWith(o[a]," desc")&&(s=Ye.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=Ye.sort(e,o[a],s));return e}return Ye.sort(e,o,i.comparer)},t.prototype.onGroup=function(e,i,n){if(!e||!e.length)return e;var s=this.getAggregate(n);return Ye.group(e,Ye.getValue(i.fieldName,n),s,null,null,i.comparer)},t.prototype.onPage=function(e,i,n){var s=Ye.getValue(i.pageSize,n),o=(Ye.getValue(i.pageIndex,n)-1)*s;return e&&e.length?e.slice(o,o+s):e},t.prototype.onRange=function(e,i){return e&&e.length?e.slice(Ye.getValue(i.start),Ye.getValue(i.end)):e},t.prototype.onTake=function(e,i){return e&&e.length?e.slice(0,Ye.getValue(i.nos)):e},t.prototype.onSkip=function(e,i){return e&&e.length?e.slice(Ye.getValue(i.nos)):e},t.prototype.onSelect=function(e,i){return e&&e.length?Ye.select(e,Ye.getValue(i.fieldNames)):e},t.prototype.insert=function(e,i,n,s,o){return f(o)?e.dataSource.json.push(i):e.dataSource.json.splice(o,0,i)},t.prototype.remove=function(e,i,n,s){var a,o=e.dataSource.json;for("object"==typeof n&&!(n instanceof Date)&&(n=Ye.getObject(i,n)),a=0;a<o.length&&Ye.getObject(i,o[a])!==n;a++);return a!==o.length?o.splice(a,1):null},t.prototype.update=function(e,i,n,s){var a,l,o=e.dataSource.json;for(f(i)||(l=ie(i,n)),a=0;a<o.length&&(f(i)||ie(i,o[a])!==l);a++);return a<o.length?po(o[a],n):null},t}(IT),Zh=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Va(t,r),t.prototype.processQuery=function(e,i,n){var h,u,s=this.getQueryRequest(i),o=si.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=e.dataSource.url,d=null,m=this.options,y={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?u=((u=Ye.getValue((h=o.onPage).pageIndex,i))-1)*(d=Ye.getValue(h.pageSize,i)):"onRange"in o&&(u=(h=o.onRange).start,d=h.end-h.start);for(var C=0;C<s.sorts.length;C++)h=Ye.getValue(s.sorts[C].e.fieldName,i),y.sorts.push(Ye.callAdaptorFunction(this,"onEachSort",{name:h,direction:s.sorts[C].e.direction},i));for(n&&(h=this.getFiltersFrom(n,i))&&y.filters.push(Ye.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)),C=0;C<s.filters.length;C++){var S=Ye.callAdaptorFunction(this,"onEachWhere",s.filters[C].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!f(s.filters[C].e.key)&&s.filters.length>1&&(S="("+S+")"),y.filters.push(S);for(var k=0,O="object"==typeof y.filters[C]?Object.keys(y.filters[C]):[];k<O.length;k++)Ye.isNull(y[L=O[k]])&&delete y[L]}for(C=0;C<s.searches.length;C++)y.searches.push(Ye.callAdaptorFunction(this,"onEachSearch",{fields:(h=s.searches[C].e).fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(C=0;C<s.groups.length;C++)y.groups.push(Ye.getValue(s.groups[C].e.fieldName,i));for(C=0;C<s.aggregates.length;C++)y.aggregates.push({type:(h=s.aggregates[C].e).type,field:Ye.getValue(h.field,i)});var B={};if(this.getRequestQuery(m,i,o,y,B),Ye.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:a,reqParams:B}),i.lazyLoad.length)for(C=0;C<i.lazyLoad.length;C++)B[i.lazyLoad[C].key]=i.lazyLoad[C].value;for(var G=0,ae=Object.keys(B);G<ae.length;G++){var L;(Ye.isNull(B[L=ae[G]])||""===B[L]||0===B[L].length)&&delete B[L]}(!(m.skip in B)||!(m.take in B))&&null!==d&&(B[m.skip]=Ye.callAdaptorFunction(this,"onSkip",u,i),B[m.take]=Ye.callAdaptorFunction(this,"onTake",d,i));var ve=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(B,Ye.parse.jsonDateReplacer),url:l,pvtData:ve,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(B,i,e),{type:"GET",url:(h=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+h).length?l.replace(/\/*$/,h):l,pvtData:ve})},t.prototype.getRequestQuery=function(e,i,n,s,o){var l=o;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?Ye.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in n?Ye.callAdaptorFunction(this,"onExpand",{selects:Ye.getValue(n.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in n&&!i.distincts.length?Ye.callAdaptorFunction(this,"onSelect",Ye.getValue(n.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?Ye.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=s.searches.length?Ye.callAdaptorFunction(this,"onSearch",s.searches,i):"",l[e.skip]="onSkip"in n?Ye.callAdaptorFunction(this,"onSkip",Ye.getValue(n.onSkip.nos,i),i):"",l[e.take]="onTake"in n?Ye.callAdaptorFunction(this,"onTake",Ye.getValue(n.onTake.nos,i),i):"",l[e.where]=s.filters.length||s.searches.length?Ye.callAdaptorFunction(this,"onWhere",s.filters,i):"",l[e.sortBy]=s.sorts.length?Ye.callAdaptorFunction(this,"onSortBy",s.sorts,i):"",l[e.group]=s.groups.length?Ye.callAdaptorFunction(this,"onGroup",s.groups,i):"",l[e.aggregates]=s.aggregates.length?Ye.callAdaptorFunction(this,"onAggregates",s.aggregates,i):"",l.param=[]},t.prototype.convertToQueryString=function(e,i,n){return""},t.prototype.processResponse=function(e,i,n,s,o,a){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){var l=Ye.timeZoneHandling;i&&!i.timeZoneHandling&&(Ye.timeZoneHandling=!1),e=Ye.parse.parseJson(e),Ye.timeZoneHandling=l}var h=o,u=h.pvtData||{},d=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var m=JSON.parse(h.data);if(m&&"batch"===m.action&&e&&e.addedRecords)return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var y={};e&&"count"in e&&(y.count=e.count),y.result=e&&e.result?e.result:e;var C=!1;if(Array.isArray(e.result)&&e.result.length&&(f(e.result[0].key)||(y.result=this.formRemoteGroupedData(y.result,1,u.groups.length-1)),n&&n.lazyLoad.length&&u.groups.length))for(var O=0;O<n.lazyLoad.length;O++)"onDemandGroupInfo"===n.lazyLoad[O].key&&u.groups.length===n.lazyLoad[O].value.level&&(C=!0);return C||this.getAggregateResult(u,e,y,d,n),Ye.isNull(y.count)?y.result:{result:y.result,count:y.count,aggregates:y.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,n){for(var s=0;s<e.length;s++)e[s].items.length&&Object.keys(e[s].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[s].items,i+1,n-1);var o="GroupGuid",h="records";return e[o]=n6[o],e.level=i,e.childLevels=n,e[h]=e[0].items.length?this.getGroupedRecords(e,!f(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var n=[],o=0;o<e.length;o++)if(i)n=n.concat(e[o].items.records);else for(var a=0;a<e[o].items.length;a++)n.push(e[o].items[a]);return n},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(de({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},Ye.getAddParams(this,e,s)))}},t.prototype.beforeSend=function(e,i){},t.prototype.insert=function(e,i,n,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:i,table:n,action:"insert"},Ye.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{key:n,keyColumn:i,table:s,action:"remove"},Ye.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:n,action:"update",keyColumn:i,key:Ye.getObject(i,n),table:s},Ye.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,i){var s,n=i.fKey,o=n,a=i.key,l=[];"object"!=typeof e[0]&&(o=null);for(var h=0;h<e.length;h++)s="object"==typeof e[0]?Ye.getObject(a||o,e[h]):e[h],l.push(new kn(n,"equal",s));return kn.or(l)},t.prototype.getAggregateResult=function(e,i,n,s,o){var a=i;if(i&&i.result&&(a=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,u=a,d={};i.aggregate&&(u=i.aggregate);for(var m=0;m<l.length;m++)(h=Ye.aggregates[l[m].type])&&(d[l[m].field+" - "+l[m].type]=h(u,l[m].field));n.aggregates=d}var C=Array.isArray(i.result)&&i.result.length&&!f(i.result[0].key);if(e&&e.groups&&e.groups.length&&!C){var S=e.groups;for(m=0;m<S.length;m++){f(s)||(s=Ye.group(s,S[m]));var k=si.filterQueries(o.queries,"onGroup")[m].e;a=Ye.group(a,S[m],e.aggregates,null,s,k.comparer)}n.result=a}return n},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=si.filterQueries(e.queries,"onSortBy"),i.groups=si.filterQueries(e.queries,"onGroup"),i.filters=si.filterQueries(e.queries,"onWhere"),i.searches=si.filterQueries(e.queries,"onSearch"),i.aggregates=si.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var n=0,s=e.params;n<s.length;n++){var o=s[n];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),i.params[o.key]=i[o.key]}},t}(IT),mb=function(r){function t(e){var i=r.call(this)||this;return i.options=de({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),de(i.options,e||{}),i}return Va(t,r),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var o,a,s="",l=e.value,h=typeof l,u=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+Ye.parse.replacer(l)+"'"),"string"===h&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),l=encodeURIComponent(l),n&&(u="cast("+u+", 'Edm.String')"),Ye.parse.isGuid(l="'"+l+"'")&&(a="guid"),e.ignoreCase&&(a||(u="tolower("+u+")"),l=l.toLowerCase())),o=Ye.odBiOperator[e.operator])return s+=u,s+=o,a&&(s+=a),s+l;if("substringof"===(o=f(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Ye.odUniOperator[e.operator]:Ye.odv4UniOperator[e.operator])){var d=l;l=u,u=d}return s+=o+"(",s+=u+",",a&&(s+=a),s+(l+")")},t.prototype.addParams=function(e){r.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,n){for(var s=[],o=0;o<e.predicates.length;o++)s.push("("+this.onEachWhere(e.predicates[o],i,n)+")");return s.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,n){return e.isComplex?this.onComplexPredicate(e,i,n):this.onPredicate(e,i,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&Ye.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],n=0;n<e.fields.length;n++)i.push(new kn(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=kn.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,i,n){Ye.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(i.setRequestHeader("Accept",this.options.multipartAccept),i.setRequestHeader("DataServiceVersion","2.0"),i.overrideMimeType("text/plain; charset=x-user-defined")):i.setRequestHeader("Accept",this.options.accept),i.setRequestHeader("DataServiceVersion","2.0"),i.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,n,s,o,a){var l="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}if(!f(e.d)){var d=n&&n.isCountRequired?e.d.results:e.d,m="__metadata";if(!f(d))for(var y=0;y<d.length;y++)f(d[y][m])||delete d[y][m]}var C=o&&o.pvtData,S=this.processBatchResponse(e,n,s,o,a);if(S)return S;var I=s&&o.getResponseHeader("DataServiceVersion"),k=null,O=I&&parseInt(I,10)||2;if(n&&n.isCountRequired){var L="__count";(e[L]||e["odata.count"])&&(k=e[L]||e["odata.count"]),e.d&&(e=e.d),(e[L]||e["odata.count"])&&(k=e[L]||e["odata.count"])}3===O&&e.value&&(e=e.value),e.d&&(e=e.d),O<3&&e.results&&(e=e.results);var B={};return B.count=k,B.result=e,this.getAggregateResult(C,e,B,null,n),Ye.isNull(k)?B.result:{result:B.result,count:B.count,aggregates:B.aggregates}},t.prototype.convertToQueryString=function(e,i,n){var s=[],o="table",a=e[o]||"";delete e[o],n.dataSource.requiresFormat&&(e.$format="json");for(var u=0,d=Object.keys(e);u<d.length;u++){var m=d[u];s.push(m+"="+e[m])}return s=s.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},t.prototype.localTimeReplacer=function(e,i){for(var n=0,s=f(i)?[]:Object.keys(i);n<s.length;n++){var o=s[n];i[o]instanceof Date&&(i[o]=Ye.dateParse.toLocalTime(i[o]))}return i},t.prototype.insert=function(e,i,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,n,s){var o;return o="string"!=typeof n||Ye.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+o}},t.prototype.update=function(e,i,n,s,o,a){var l;return"PATCH"===this.options.updateType&&!f(a)&&(n=this.compareAndRemove(n,a,i)),l="string"!=typeof n[i]||Ye.parse.isGuid(n[i])?"("+n[i]+")":"('"+n[i]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+l,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,n,s,o){var a=n.guid=Ye.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var h={url:n.url,key:n.key,cid:1,cSet:Ye.getGuid(this.options.changeSet)},u="--"+a+"\n";return u+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.addedRecords,h,e),u+=this.generateUpdateRequest(i.changedRecords,h,e,o?o.changedRecords:[]),u+=this.generateDeleteRequest(i.deletedRecords,h,e),u+=h.cSet+"--\n",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:u+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"DELETE ",url:function(a,l,h){var u=Ye.getObject(h,a[l]);return"number"==typeof u||Ye.parse.isGuid(u)?"("+u+")":u instanceof Date?"("+a[l][h].toJSON()+")":"('"+u+"')"},data:function(a,l){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,i,n,s){var o=this;return e?(e.forEach(function(h){return h=o.compareAndRemove(h,s.filter(function(u){return Ye.getObject(i.key,u)===Ye.getObject(i.key,h)})[0],i.key)}),this.generateBodyContent(e,i,{method:this.options.updateType+" ",url:function(h,u,d){return"number"==typeof h[u][d]||Ye.parse.isGuid(h[u][d])?"("+h[u][d]+")":h[u][d]instanceof Date?"("+h[u][d].toJSON()+")":"('"+h[u][d]+"')"},data:function(h,u){return JSON.stringify(h[u])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,n,s){for(var o="",a=0;a<e.length;a++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(s.dataSource.insertUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(s.dataSource.updateUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(s.dataSource.removeUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",f(e[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),o+=n.data(e,a);return o},t.prototype.processBatchResponse=function(e,i,n,s,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&Ye.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){var a=n.getResponseHeader("Content-Type"),l=void 0,h=void 0,u=e+"";if(a=a.substring(a.indexOf("=batchresponse")+1),(u=u.split(a)).length<2)return{};var d=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(u=u[1]);d&&u.replace(d[0],"");for(var y=(u=u.split(d?d[1]:"")).length;y>-1;y--)!/\bContent-ID:/i.test(u[y])||!/\bHTTP.+201/.test(u[y])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(u[y])[1],10),o.addedRecords[l]&&(h=Ye.parse.parseJson(/^\{.+\}/m.exec(u[y])[0]),de({},o.addedRecords[l],this.processResponse(h))));return o}return null},t.prototype.compareAndRemove=function(e,i,n){var s=this;return f(i)||Object.keys(e).forEach(function(o){o!==n&&"@odata.etag"!==o&&(Ye.isPlainObject(e[o])?(s.compareAndRemove(e[o],i[o]),0===Object.keys(e[o]).filter(function(l){return"@odata.etag"!==l}).length&&delete e[o]):(e[o]===i[o]||e[o]&&i[o]&&e[o].valueOf()===i[o].valueOf())&&delete e[o])}),e},t}(Zh),r6=function(r){function t(){var e=r.call(this)||this;return jt("beforeSend",Zh.prototype.beforeSend,e),e}return Va(t,r),t.prototype.insert=function(e,i,n,s,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:i,table:n,action:"insert"},Ye.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return r.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{key:n,keyColumn:i,table:s,action:"remove"},Ye.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:n,action:"update",keyColumn:i,key:n[i],table:s},Ye.getAddParams(this,e,o)))}},t.prototype.processResponse=function(e,i,n,s,o,a,l){var h;if(e="batch"===(o?JSON.parse(o.data):e).action?Ye.parse.parseJson(e):e,"add"===this.updateType&&r.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&r.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)r.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)r.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)r.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(de({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n.url,key:n.key},Ye.getAddParams(this,e,s)))}},t.prototype.addParams=function(e){(new Zh).addParams(e)},t}(Jm),s6=function(r){function t(e){var i=r.call(this)||this;return i.options=de({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),de(i.options,e||{}),i}return Va(t,r),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Zh),JF=function(r){function t(e,i,n){var s=r.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,f(e)||(s.cacheAdaptor=e),s.pageSize=n,s.guidId=Ye.getGuid("cacheAdaptor"),window.localStorage.setItem(s.guidId,JSON.stringify({keys:[],results:[]}));var a=s.guidId;return f(i)||setInterval(function(){var l;l=Ye.parse.parseJson(window.localStorage.getItem(a));for(var h=[],u=0;u<l.results.length;u++){var d=+new Date,m=+new Date(l.results[u].timeStamp);l.results[u].timeStamp=d-m,d-m>i&&h.push(u)}for(u=0;u<h.length;u++)l.results.splice(h[u],1),l.keys.splice(h[u],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),s}return Va(t,r),t.prototype.generateKey=function(e,i){var n=this.getQueryRequest(i),s=si.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,a="onPage";a in s&&(o+=s[a].pageIndex),n.sorts.forEach(function(m){o+=m.e.direction+m.e.fieldName}),n.groups.forEach(function(m){o+=m.e.fieldName}),n.searches.forEach(function(m){o+=m.e.searchKey});for(var l=0;l<n.filters.length;l++){var h=n.filters[l];if(h.e.isComplex){var u=i.clone();u.queries=[];for(var d=0;d<h.e.predicates.length;d++)u.queries.push({fn:"onWhere",e:h.e.predicates[d],filter:i.queries.filter});o+=h.e.condition+this.generateKey(e,u)}else o+=h.e.field+h.e.operator+h.e.value}return o},t.prototype.processQuery=function(e,i,n){var o,s=this.generateKey(e.dataSource.url,i),a=(o=Ye.parse.parseJson(window.localStorage.getItem(this.guidId)))?o.results[o.keys.indexOf(s)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,i,n,s,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&Ye.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,i,n,s,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=n?this.generateKey(i.dataSource.url,n):i.dataSource.url,h={},u=(h=Ye.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(l);for(-1!==u&&(h.results.splice(u,1),h.keys.splice(u,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,n){!f(this.cacheAdaptor.options.batch)&&Ye.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&i.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,n,s)},t.prototype.insert=function(e,i,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,n)},t.prototype.remove=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,n,s)},t.prototype.batchRequest=function(e,i,n){return this.cacheAdaptor.batchRequest(e,i,n)},t}(Zh),Je=function(){function r(t,e,i){var s,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?s={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),s={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof r6||t.adaptor instanceof s6||t.url),requiresFormat:t.requiresFormat}):Ye.throwError("DataManager: Invalid arguments"),void 0===s.requiresFormat&&!Ye.isCors()&&(s.requiresFormat=!!f(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=e,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new mb,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new si),this.ready.then(function(o){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=o.result,n.adaptor=new Jm})):this.adaptor=s.offline?new Jm:new mb,!s.jsonp&&this.adaptor instanceof mb&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new JF(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}return r.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},r.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof si)&&Ye.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Ye.throwError("DataManager - executeLocal() : Json data is required to execute");var e=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,n=t.subQuery.lookups,s=t.isCountRequired?e.result:e;n&&n instanceof Array&&Ye.buildHierarchy(t.subQuery.fKey,i,s,n,t.subQuery.key);for(var o=0;o<s.length;o++)s[o][i]instanceof Array&&(s[o]=de({},{},s[o]),s[o][i]=this.adaptor.processResponse(t.subQuery.using(new r(s[o][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},r.prototype.executeQuery=function(t,e,i,n){var s=this,o="makeRequest";"function"==typeof t&&(n=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof si||Ye.throwError("DataManager - executeQuery() : A query is required to execute");var a=new fl,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!f(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,t);f(this.adaptor[o])?!f(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=r.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[o](h,a,l,t)}else r.nextTick(function(){var u=s.executeLocal(t);l=r.getDeferedArgs(t,u,l),a.resolve(l)});return(e||i)&&a.promise.then(e,i),n&&a.promise.then(n,n),a.promise},r.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},r.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},r.prototype.extendRequest=function(t,e,i){return de({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},r.prototype.makeRequest=function(t,e,i,n){var s=this,o=!!n.subQuerySelector,a=function(I){i.error=I,e.reject(i)},l=function(I,k,O,L,B,j,G){i.xhr=O,i.count=k?parseInt(k.toString(),10):0,i.result=I,i.request=L,i.aggregates=j,i.actual=B,i.virtualSelectRecords=G,e.resolve(i)},h=function(I,k){var O=new fl,L={parent:i};n.subQuery.isChild=!0;var B=s.adaptor.processQuery(s,n.subQuery,I?s.adaptor.processResponse(I):k),j=s.makeRequest(B,O,L,n.subQuery);return o||O.then(function(G){I&&(Ye.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,I,G,n.subQuery.key),l(I,G.count,G.xhr))},a),j},d=this.extendRequest(t,function(I,k){if(s.isGraphQLAdaptor(s.adaptor)&&!f(I.errors))return a(I.errors);s.isCustomDataAdaptor(s.adaptor)&&(k=de({},s.ajaxReqOption,k)),-1===k.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&s.dateParse&&(I=Ye.parse.parseJson(I));var O=s.adaptor.processResponse(I,s,n,k.httpRequest,k),L=0,B=null,G=I.virtualSelectRecords;n.isCountRequired&&(L=O.count,B=O.aggregates,O=O.result),n.subQuery?o||h(O,k):l(O,L,k.httpRequest,k.type,I,B,G)},a);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=d,this.adaptor.options.getData({data:d.data,onSuccess:d.onSuccess,onFailure:d.onFailure});else{var m=new Qp(d);m.beforeSend=function(){s.beforeSend(m.httpRequest,m)},(d=m.send()).catch(function(I){return!0}),this.requests.push(m)}if(o){var S=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});S&&S.length?Promise.all([d,h(null,S)]).then(function(){for(var I=[],k=0;k<arguments.length;k++)I[k]=arguments[k];var O=I[0],L=s.adaptor.processResponse(O[0],s,n,s.requests[0].httpRequest,s.requests[0]),B=0;n.isCountRequired&&(B=L.count,L=L.result);var j=s.adaptor.processResponse(O[1],s,n.subQuery,s.requests[1].httpRequest,s.requests[1]);B=0,n.subQuery.isCountRequired&&(B=j.count,j=j.result),Ye.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,L,j,n.subQuery.key),o=!1,l(L,B,s.requests[0].httpRequest)}):o=!1}return d},r.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var n,i=this.dataSource.headers,s=0;i&&s<i.length;s++){n=[];for(var a=0,l=Object.keys(i[s]);a<l.length;a++){var h=l[a];n.push(h),t.setRequestHeader(h,i[s][h])}}},r.prototype.saveChanges=function(t,e,i,n,s){var o=this;i instanceof si&&(n=i,i=null);var a={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,n||new si,s),h="doAjaxRequest";if(this.dataSource.offline)return l;if(f(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var u=new fl,d=new Qp(l);return d.beforeSend=function(){o.beforeSend(d.httpRequest,d)},d.onSuccess=function(m,y){o.isGraphQLAdaptor(o.adaptor)&&(f(m.errors)||d.onFailure(JSON.stringify(m.errors))),u.resolve(o.adaptor.processResponse(m,o,null,y.httpRequest,y,t,a))},d.onFailure=function(m){u.reject([{error:m}])},d.send().catch(function(m){return!0}),u.promise}return this.adaptor[h](l)},r.prototype.insert=function(t,e,i,n){e instanceof si&&(i=e,e=null);var s=this.adaptor.insert(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.addRecord):this.adaptor[o](s)},r.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=Ye.getObject(t,e)),i instanceof si&&(n=i,i=null);var s=this.adaptor.remove(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.deleteRecord):this.adaptor[o](s)},r.prototype.update=function(t,e,i,n,s){i instanceof si&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,s),a="doAjaxRequest";return this.dataSource.offline?o:f(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)},r.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},r.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},r.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);f(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=de({},this.ajaxReqOption,e));try{Ye.parse.parseJson(t)}catch{t=[]}t=this.adaptor.processResponse(Ye.parse.parseJson(t),this,null,e.httpRequest,e),this.ajaxDeffered.resolve(t)},r.prototype.failureFunc=function(t){this.ajaxDeffered.reject([{error:t}])},r.prototype.doAjaxRequest=function(t,e){var i=this;if(t=de({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.ajaxDeffered=new fl,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new Qp(t);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(s){return!0})}return this.ajaxDeffered.promise},r}(),fl=function(){return function r(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}();function a6(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}var Fd,ev,bb,Cb,tv,Qh,z_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_c=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Vu_RTL=(new Zp,"e-rtl"),j_=function(r){function t(e,i){return r.call(this,e,i)||this}return z_(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=Qi(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?jn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Vu_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Vu_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&ce(i),this.unWireEvents(),lr&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):ce(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&ce(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Vu_RTL):this.element.classList.remove(Vu_RTL);break;case"content":a6(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=jn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},_c([E("Left")],t.prototype,"iconPosition",void 0),_c([E("")],t.prototype,"iconCss",void 0),_c([E(!1)],t.prototype,"disabled",void 0),_c([E(!1)],t.prototype,"isPrimary",void 0),_c([E("")],t.prototype,"cssClass",void 0),_c([E("")],t.prototype,"content",void 0),_c([E(!1)],t.prototype,"isToggle",void 0),_c([E()],t.prototype,"locale",void 0),_c([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),_c([W()],t.prototype,"created",void 0),_c([ui],t)}(nn),$T=!1;function YT(r,t){var e=!1,i={left:0,top:0},n=r;if(!r||!t)return i;for(f(t.offsetParent)&&"fixed"===t.style.position&&(e=!0);(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left+=r.offsetLeft,i.top+=r.offsetTop,r=r.offsetParent;for(r=n;(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left-=r.scrollLeft,i.top-=r.scrollTop,r=r.parentElement;return i}function ko(r,t,e,i,n){return ev=void 0,ev=n,$T=!!i,r?(t||(t="left"),e||(e="top"),Cb=r.ownerDocument,bb=r,function DN(r,t,e){switch(Fd=bb.getBoundingClientRect(),t+r){case"topcenter":Nd(AN(),e),nf(wb(),e);break;case"topright":Nd(lk(),e),nf(wb(),e);break;case"centercenter":Nd(AN(),e),nf(XT(),e);break;case"centerright":Nd(lk(),e),nf(XT(),e);break;case"centerleft":Nd(Wu(),e),nf(XT(),e);break;case"bottomcenter":Nd(AN(),e),nf(Bd(),e);break;case"bottomright":Nd(lk(),e),nf(Bd(),e);break;case"bottomleft":Nd(Wu(),e),nf(Bd(),e);break;default:Nd(Wu(),e),nf(wb(),e)}return e}(t.toLowerCase(),e.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function Nd(r,t){t.left=r}function nf(r,t){t.top=r}function IN(){return Cb.documentElement.scrollTop||Cb.body.scrollTop}function ZT(){return Cb.documentElement.scrollLeft||Cb.body.scrollLeft}function Bd(){return $T?Fd.bottom:Fd.bottom+IN()}function XT(){return wb()+Fd.height/2}function wb(){return $T?Fd.top:Fd.top+IN()}function Wu(){return Fd.left+ZT()}function lk(){var r=bb&&bb.classList.contains("e-date-range-wrapper")?ev?ev.width:0:ev&&Fd.width>=ev.width?ev.width:0;return Fd.right+ZT()-r}function AN(){return Wu()+Fd.width/2}function hk(r,t,e,i){if(void 0===t&&(t=null),void 0===e&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var n=r.getBoundingClientRect();if(Qh=t,tv=r.ownerDocument,i||(i=ko(r,"left","top")),e.X){var s=Qh?pk():MN(),o=Eb(),a=JT(),l=o-i.left,h=i.left+n.width-a;n.width>s?i.left=l>0&&h<=0?a-n.width:h>0&&l<=0?o:l>h?a-n.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var u=Qh?fk():RN(),d=Sb(),m=vk(),y=d-i.top,C=i.top+n.height-m;n.height>u?i.top=y>0&&C<=0?m-n.height:C>0&&y<=0?d:y>C?m-n.height:d:y>0?i.top+=y:C>0&&(i.top-=C)}return i}function rf(r,t,e,i){void 0===t&&(t=null);var n=ko(r,"left","top");e&&(n.left=e),i&&(n.top=i);var s=[];Qh=t,tv=r.ownerDocument;var o=r.getBoundingClientRect(),l=n.left,h=n.left+o.width,d=dk(n.top,n.top+o.height),m=ck(l,h);return d.topSide&&s.push("top"),m.rightSide&&s.push("right"),m.leftSide&&s.push("left"),d.bottomSide&&s.push("bottom"),s}function _N(r,t,e,i,n,s,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),t&&r&&n&&s&&(a.X||a.Y)){var d,h={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(r).display){var m=r.style.visibility;r.style.visibility="hidden",r.style.display="block",d=r.getBoundingClientRect(),r.style.removeProperty("display"),r.style.visibility=m}else d=r.getBoundingClientRect();var y={posX:n,posY:s,offsetX:e,offsetY:i,position:{left:0,top:0}};Qh=o,tv=t.ownerDocument,function kN(r,t,e,i,n){e.position=ko(r,e.posX,e.posY,i,n),t.TL=ko(r,"left","top",i,n),t.TR=ko(r,"right","top",i,n),t.BR=ko(r,"left","bottom",i,n),t.BL=ko(r,"right","bottom",i,n)}(t,h,y,l,d),uk(u,y,d),a.X&&C6(t,u,h,y,d,!0),a.Y&&h.TL.top>-1&&QT(t,u,h,y,d,!0),function lX(r,t,e){var i=0,n=0;if(null!=r.offsetParent&&("absolute"===getComputedStyle(r.offsetParent).position||"relative"===getComputedStyle(r.offsetParent).position)){var s=ko(r.offsetParent,"left","top",!1,e);i=s.left,n=s.top}r.style.top=t.position.top+t.offsetY-n+"px",r.style.left=t.position.left+t.offsetX-i+"px"}(r,y,d)}}function uk(r,t,e){r.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},r.TR={top:r.TL.top,left:r.TL.left+e.width},r.BL={top:r.TL.top+e.height,left:r.TL.left},r.BR={top:r.TL.top+e.height,left:r.TL.left+e.width}}function ck(r,t){var e=!1,i=!1;return r-Cw()<Eb()&&(e=!0),t>JT()&&(i=!0),{leftSide:e,rightSide:i}}function C6(r,t,e,i,n,s){var o=ck(t.TL.left,t.TR.left);e.TL.left-Cw()<=Eb()&&(o.leftSide=!1),e.TR.left>JT()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+n.width,i.offsetX=-1*i.offsetX,i.position=ko(r,i.posX,i.posY,!1),uk(t,i,n),s&&C6(r,t,e,i,n,!1))}function QT(r,t,e,i,n,s){var o=dk(t.TL.top,t.BL.top);e.TL.top-bw()<=Sb()&&(o.topSide=!1),e.BL.top>=vk()&&r.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+n.height,i.offsetY=-1*i.offsetY,i.position=ko(r,i.posX,i.posY,!1,n),uk(t,i,n),s&&QT(r,t,e,i,n,!1))}function dk(r,t){var e=!1,i=!1;return r-bw()<Sb()&&(e=!0),t>vk()&&(i=!0),{topSide:e,bottomSide:i}}function pk(){return Qh.getBoundingClientRect().width}function fk(){return Qh.getBoundingClientRect().height}function gk(){return Qh.getBoundingClientRect().left}function mk(){return Qh.getBoundingClientRect().top}function Sb(){return Qh?mk():0}function Eb(){return Qh?gk():0}function JT(){return Qh?Cw()+gk()+pk():Cw()+MN()}function vk(){return Qh?bw()+mk()+fk():bw()+RN()}function bw(){return tv.documentElement.scrollTop||tv.body.scrollTop}function Cw(){return tv.documentElement.scrollLeft||tv.body.scrollLeft}function RN(){return window.innerHeight}function MN(){var r=window.innerWidth,t=document.documentElement.getBoundingClientRect();return r-(r-(f(document.documentElement)?0:t.width))}var w6=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Da=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},yk=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return w6(t,r),Da([E("left")],t.prototype,"X",void 0),Da([E("top")],t.prototype,"Y",void 0),t}(Ti),za_OPEN="e-popup-open",za_CLOSE="e-popup-close",Ol=function(r){function t(e,i){return r.call(this,i,e)||this}return w6(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"width":Vt(this.element,{width:ot(e.width)});break;case"height":Vt(this.element,{height:ot(e.height)});break;case"zIndex":Vt(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",za_OPEN,za_CLOSE),r.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=ot(this.width)),"auto"!==this.height&&(e.height=ot(this.height)),Vt(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){Q.isDevice&&T.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)T.add(i[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){Q.isDevice&&T.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)T.remove(i[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||f(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?!f(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,i){for(var n=this.getScrollableParent(e),s=0;s<n.length;s++)if(!this.isElementVisible(e,n[s]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(f(this.checkGetBoundingClientRect(i))){var o=window,a={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},l=ko(e),h={top:l.top,left:l.left,right:l.left+n.width,bottom:l.top+n.height},u={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return u.top>0&&u.left>0&&u.right>0&&u.bottom>0}var s=i.getBoundingClientRect();return!(n.bottom<s.top||n.bottom>s.bottom||n.right>s.right||n.left<s.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){if(!f(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||f(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){f(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var s=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else n?(o=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=o):e={left:0,top:0};f(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch{return null}},t.prototype.getAnchorPosition=function(e,i,n,s,o){var a=this.checkGetBoundingClientRect(i),l=this.checkGetBoundingClientRect(e);if(f(a)||f(l))return null;var h=e,u={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===e.tagName?u=ko(e):(i.classList.contains("e-dlg-modal")&&"BODY"!==h.tagName&&(i=i.parentElement),u=YT(h,i)),n.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth/2-a.width/2:u.left+="container"===this.targetType?l.width/2-a.width/2:l.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth-a.width:u.left+="container"===this.targetType?l.width-a.width:l.width}switch(n.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight/2-a.height/2:u.top+="container"===this.targetType?l.height/2-a.height/2:l.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight-a.height:u.top+="container"===this.targetType?l.height-a.height:l.height}return u.left+=s,u.top+=o,u},t.prototype.callFlip=function(e){var i=this.getRelateToElement();_N(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==rf(this.element,this.viewPortElement).length)if(f(this.viewPortElement)){var i=hk(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(f(n)||f(s))return null;e&&!0===e.Y&&(s.top>n.top?this.element.style.top="0px":s.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-s.bottom)+"px")),e&&!0===e.X&&(s.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-s.right)+"px":s.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;"none"===e&&"none"===i||("flip"===e&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var n=this;if(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0],this.wireEvents(),this.fmDialogContainer&&Q.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!f(i)){var s=f(i)?this.element:i;this.zIndex=iv(s),Vt(this.element,{zIndex:this.zIndex})}e=f(e)||"object"!=typeof e?this.showAnimation:e,("none"!==this.collision.X||"none"!==this.collision.Y)&&(z([this.element],za_CLOSE),N([this.element],za_OPEN),this.checkCollision(),z([this.element],za_OPEN),N([this.element],za_CLOSE)),f(e)?(z([this.element],za_CLOSE),N([this.element],za_OPEN),this.trigger("open")):(e.begin=function(){n.isDestroyed||(z([n.element],za_CLOSE),N([n.element],za_OPEN))},e.end=function(){n.isDestroyed||n.trigger("open")},new Cr(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=f(e)||"object"!=typeof e?this.hideAnimation:e,f(e)?(z([this.element],za_OPEN),N([this.element],za_CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(z([i.element],za_OPEN),N([i.element],za_CLOSE),i.trigger("close"))},new Cr(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),function bk(r,t){for(var e=getComputedStyle(r),i=[],n=/(auto|scroll)/,s=r.parentElement;s&&"HTML"!==s.tagName;){var o=getComputedStyle(s);!("absolute"===e.position&&"static"===o.position)&&n.test(o.overflow+o.overflowY+o.overflowX)&&i.push(s),s=s.parentElement}return t||i.push(document),i}(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&"HTML"!==i.tagName;){var n=getComputedStyle(i);"fixed"===n.position&&!f(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?ot(window.scrollY-parseInt(this.element.style.top)):ot(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!f(this.element)&&f(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Da([E("auto")],t.prototype,"height",void 0),Da([E("auto")],t.prototype,"width",void 0),Da([E(null)],t.prototype,"content",void 0),Da([E("container")],t.prototype,"targetType",void 0),Da([E(null)],t.prototype,"viewPortElement",void 0),Da([E({X:"none",Y:"none"})],t.prototype,"collision",void 0),Da([E("")],t.prototype,"relateTo",void 0),Da([ln({},yk)],t.prototype,"position",void 0),Da([E(0)],t.prototype,"offsetX",void 0),Da([E(0)],t.prototype,"offsetY",void 0),Da([E(1e3)],t.prototype,"zIndex",void 0),Da([E(!1)],t.prototype,"enableRtl",void 0),Da([E("reposition")],t.prototype,"actionOnScroll",void 0),Da([E(null)],t.prototype,"showAnimation",void 0),Da([E(null)],t.prototype,"hideAnimation",void 0),Da([W()],t.prototype,"open",void 0),Da([W()],t.prototype,"close",void 0),Da([W()],t.prototype,"targetExitViewport",void 0),Da([ui],t)}(nn);function iv(r){for(var t=r.parentElement,e=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==n&&e.push(i),t=t.parentElement}for(var s=[],o=0;o<document.body.children.length;o++)r.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&s.push(i));s.push("999");var a=[];if(!f(r.parentElement)&&"BODY"!==r.parentElement.tagName){var l=[].slice.call(r.parentElement.children);for(o=0;o<l.length;o++)r.isEqualNode(l[o])||(i=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&a.push(i))}var h=e.concat(s,a),u=Math.max.apply(Math,h)+1;return u>2147483647?2147483647:u}var Jr,Pl,sf,sv,FN,bg,Tr,Cg,LN=["north-west","north","north-east","west","east","south-west","south","south-east"],Ck="e-resize-handle",Tb="e-focused-handle",ww=["e-restrict-left"],ON="e-resize-viewport",E6=["north","west","east","south"],ex=0,Sw=0,tx=0,PN=0,nv=0,rv=0,xb=null,wk=null,Sk=null,ix=!0,Ek=0,nx=!0;function x6(r){Dk();var t=ri("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+r),"south"===r&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===r&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===r&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===r&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Jr.appendChild(t)}function Tk(r){var t;return f(r)||(t="string"==typeof r?document.querySelector(r):r),t}function rx(r){f(r)&&(r=this);for(var t=Jr.querySelectorAll("."+Ck),e=0;e<t.length;e++)T.add(Pl=t[e],"mousedown",xk,r),T.add(Pl,"msie"===Q.info.name?"pointerdown":"touchstart",NN,r);var n=Jr.querySelectorAll(".e-dialog-border-resize");if(!f(n))for(e=0;e<n.length;e++)T.add(Pl=n[e],"mousedown",xk,r),T.add(Pl,"msie"===Q.info.name?"pointerdown":"touchstart",NN,r)}function D6(r){return r.indexOf("mouse")>-1?"mouse":"touch"}function xk(r){if(r.preventDefault(),Jr=r.target.parentElement,Dk(),nv=r.pageX,rv=r.pageY,r.target.classList.add(Tb),f(xb)||!0!==xb(r,this)){this.targetEle&&Jr&&Jr.querySelector(".e-dlg-resizable")&&(Tr=null,bg=this.targetEle.clientWidth,sv=this.targetEle.clientHeight);var t=f(Tr)?document:Tr;T.add(t,"mousemove",sx,this),T.add(document,"mouseup",Db,this);for(var e=0;e<ww.length;e++)ix=!Jr.classList.contains(ww[e])}}function Db(r){var t="msie"===Q.info.name?"pointermove":"touchmove",e="msie"===Q.info.name?"pointerup":"touchend",i=f(Tr)?document:Tr,n="msie"===Q.info.name?"pointerdown":"touchstart";T.remove(i,"mousemove",sx),T.remove(i,t,sx),T.remove(i,n,sx),f(document.body.querySelector("."+Tb))||document.body.querySelector("."+Tb).classList.remove(Tb),f(Sk)||Sk(r,this),T.remove(document,"mouseup",Db),T.remove(document,e,Db)}function Dk(){ex=parseFloat(getComputedStyle(Jr,null).getPropertyValue("width").replace("px","")),Sw=parseFloat(getComputedStyle(Jr,null).getPropertyValue("height").replace("px","")),tx=Jr.getBoundingClientRect().left,PN=Jr.getBoundingClientRect().top}function NN(r){Jr=r.target.parentElement,Dk();var t=r.touches?r.changedTouches[0]:r;if(nv=t.pageX,rv=t.pageY,f(xb)||!0!==xb(r,this)){var e="msie"===Q.info.name?"pointermove":"touchmove",i="msie"===Q.info.name?"pointerup":"touchend",n=f(Tr)?document:Tr;T.add(n,e,sx,this),T.add(document,i,Db)}}function sx(r){if(r.target.classList.contains(Ck)&&r.target.classList.contains(Tb)?Pl=r.target:f(document.body.querySelector("."+Tb))||(Pl=document.body.querySelector("."+Tb)),!f(Pl)){for(var t="",e=0;e<LN.length;e++)Pl.classList.contains("e-"+LN[e])&&(t=LN[e]);switch(f(wk)||wk(r,this),t){case"south":Ik(r);break;case"north":Ak(r);break;case"west":_k(r);break;case"east":BN(r);break;case"south-east":Ik(r),BN(r);break;case"south-west":Ik(r),_k(r);break;case"north-east":Ak(r),BN(r);break;case"north-west":Ak(r),_k(r)}}}function ov(r){return r.getBoundingClientRect()}function Ik(r){var o,t=document.documentElement.clientHeight,e=!1,n=(r.touches?r.changedTouches[0]:r).pageY,s=ov(Jr);f(Tr)||(o=ov(Tr)),f(Tr)?f(Tr)&&(t-n>=0||s.top<0)&&(e=!0):e=!0;var a=Sw+(n-rv);a=a>sf?a:sf;var l=0;f(Tr)||(l=o.top);var h=f(Tr)?0:Tr.offsetHeight-Tr.clientHeight,u=s.top-l-h/2;if(u=u<0?0:u,s.top>0&&u+a>sv){if(e=!1,Jr.classList.contains(ON))return;Jr.style.height=sv-parseInt(u.toString(),10)+"px"}else{var d=0;if(e){s.top<0&&t+(s.height+s.top)>0&&a+(d=s.top)<=30&&(a=s.height-(s.height+s.top)+30),a+s.top>=sv&&(Jr.style.height=s.height+(t-(s.height+s.top))+"px");var m=f(Tr)?d:u;a>=sf&&a+m<=sv&&(Jr.style.height=a+"px")}}}function Ak(r){var e,t=!1,i="mouse"===D6(r.type)?r.pageY:r.touches[0].pageY,n=ov(Jr);f(Tr)||(e=ov(Tr)),(!f(Tr)&&n.top-e.top>0||f(Tr)&&i>0)&&(t=!0);var s=Sw-(i-rv);if(t&&s>=sf&&s<=sv){var o=0;f(Tr)||(o=e.top);var a=PN-o+(i-rv);a=a>0?a:1,Jr.style.height=s+"px",Jr.style.top=a+"px"}}function _k(r){var i,t=document.documentElement.clientWidth,e=!1;f(Tr)||(i=ov(Tr));var n="mouse"===D6(r.type)?r.pageX:r.touches[0].pageX,s=ov(Jr),o=f(Tr)?0:Tr.offsetWidth-Tr.clientWidth,a=f(Tr)?0:i.left,l=f(Tr)?0:i.width;f(Cg)&&(f(Tr)?Cg=t:(Cg=s.left-a-o/2+s.width,Cg+=l-o-Cg)),(!f(Tr)&&Math.floor(s.left-i.left+s.width+(i.right-s.right))-o<=bg||f(Tr)&&n>=0)&&(e=!0);var h=ex-(n-nv);if(ix&&(h=h>Cg?Cg:h),e&&h>=FN&&h<=bg){var u=0;f(Tr)||(u=i.left);var d=tx-u+(n-nv);d=d>0?d:1,h!==Ek&&nx&&(Jr.style.width=h+"px"),ix&&(Jr.style.left=d+"px",nx=1!==d)}Ek=h}function BN(r){var i,t=document.documentElement.clientWidth,e=!1;f(Tr)||(i=ov(Tr));var s=(r.touches?r.changedTouches[0]:r).pageX,o=ov(Jr);(!f(Tr)&&(o.left-i.left+o.width<=bg||o.right-i.left>=o.width)||f(Tr)&&t-s>0)&&(e=!0);var a=ex+(s-nv),l=0;if(f(Tr)||(l=i.left),o.left-l+a>bg){if(e=!1,Jr.classList.contains(ON))return;Jr.style.width=bg-(o.left-l)+"px"}e&&a>=FN&&a<=bg&&(Jr.style.width=a+"px")}function I6(){for(var r=Jr.querySelectorAll("."+Ck),t=0;t<r.length;t++)ce(r[t]);var e=Jr.querySelectorAll(".e-dialog-border-resize");if(!f(e))for(t=0;t<e.length;t++)ce(e[t])}var ox,kk=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ir=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},dX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return kk(t,r),ir([E(!0)],t.prototype,"isFlat",void 0),ir([E()],t.prototype,"buttonModel",void 0),ir([E("Button")],t.prototype,"type",void 0),ir([W()],t.prototype,"click",void 0),t}(Ti),pX=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return kk(t,r),ir([E("Fade")],t.prototype,"effect",void 0),ir([E(400)],t.prototype,"duration",void 0),ir([E(0)],t.prototype,"delay",void 0),t}(Ti),Rk="e-dialog",HN="e-rtl",VN="e-dlg-header-content",c="e-dlg-header",p="e-footer-content",g="e-dlg-modal",w="e-icon-dlg-close",_="e-dlg-target",F="e-scroll-disabled",Te="e-device",Ke="e-dlg-fullscreen",Et="e-dlg-closeicon-btn",gi="e-popup-open",Bi="Information",mn="e-scroll-disabled",Ft="e-alert-dialog",In="e-confirm-dialog",$r="e-dlg-resizable",Os="e-restrict-left",wg="e-resize-viewport",Ew="user action",Hd=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.needsID=!0,n}return kk(t,r),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=ot(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=Ew},t.prototype.preRender=function(){var e=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(s){e.dlgClosedBy="close icon",e.hide(s)},this.dlgOverlayClickEventHandler=function(s){e.dlgClosedBy="overlayClick",s.preventFocus=!1,e.trigger("overlayClick",s,function(o){o.preventFocus||e.focusContent(),e.dlgClosedBy=Ew})},this.l10n=new as("dialog",{close:"Close"},this.locale),this.checkPositionData(),f(this.target)){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=n}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!f(this.position)){if(!f(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}f(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},t.prototype.getEle=function(e,i){for(var n=void 0,s=0;s<e.length;s++)if(e[s].classList.contains(i)){n=e[s];break}return n},t.prototype.getMinHeight=function(){var e="0px",i="0px";f(this.element.querySelector("."+VN))||(e=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,p);f(n)||(i=getComputedStyle(n).height);var s=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function hX(r){sf=r}(s+30+(isNaN(o)?0:o)),s+30+o},t.prototype.onResizeStart=function(e,i){return i.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!f(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add($r);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,n="",s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[s].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[s].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Os):this.isModal&&this.target===document.body&&this.element.classList.add(wg),function T6(r){xb=r.resizeBegin,wk=r.resizing,Sk=r.resizeComplete,Jr=Tk(r.element),Tr=Tk(r.boundary);for(var t=r.direction.split(" "),e=0;e<t.length;e++)if(E6.indexOf(t[e])>=0&&t[e])x6(t[e]);else if(""!==t[e].trim()){var i=ri("div",{className:"e-icons "+Ck+" e-"+t[e]});Jr.appendChild(i)}sf=r.minHeight,FN=r.minWidth,bg=r.maxWidth,sv=r.maxHeight,r.proxy&&r.proxy.element&&r.proxy.element.classList.contains("e-dialog")?rx(r.proxy):rx()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else I6(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Os:wg),this.element.classList.remove($r)},t.prototype.getFocusElement=function(e){var n=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:n[n.length-1]}},t.prototype.keyDown=function(e){var i=this;if(9===e.keyCode&&this.isModal){var n=void 0;f(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),f(this.btnObj)&&!f(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),f(this.btnObj)&&f(this.ftrTemplateContent)&&!f(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),!f(n)&&document.activeElement===n.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),f(n)||n.element.focus())}var l,s=document.activeElement,o=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,a=!1;o||(a=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(e)),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&o&&!f(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===s.tagName.toLowerCase()||a)&&!f(this.primaryButtonEle))&&this.buttons.some(function(u,d){l=d;var m=u.buttonModel;return!f(m)&&!0===m.isPrimary})&&"function"==typeof this.buttons[l].click&&setTimeout(function(){i.buttons[l].click.call(i,e)})},t.prototype.initialize=function(){f(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||N([this.element],Rk),Q.isDevice&&N([this.element],Te),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||Ue(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&f(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&f(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!f(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||f(this.footerTemplate)?f(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Ue(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&f(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,n=this.dlgContainer.children;i<n.length;i++)n[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[i])}if(!0!==this.element.classList.contains(Ft)&&!0!==this.element.classList.contains(In)&&!f(this.element.parentElement)){var s=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),s.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}f(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Ol(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",a,function(l){l.preventFocus||e.focusContent()})},close:function(o){e.isModal&&N([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var a=document.activeElement;!f(a)&&!f(a.blur)&&a.blur(),!f(e.storeActiveElement)&&!f(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(N([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var n=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));f(n)||(n.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;i=f(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.element.classList.contains("e-draggable")||(this.dragObj=new tf(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(n){e.trigger("dragStart",n,function(s){})},dragStop:function(n){e.isModal&&(f(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",n),e.element.classList.remove(Os)},drag:function(n){e.trigger("drag",n)}}),f(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var i=f(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}e=0;for(var s,o=this.element.children;e<o.length;e++)o[e].classList.contains(p)&&(s=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new j_(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+p)),!f(this.ftrTemplateContent)&&s.length>0&&("function"==typeof this.buttons[e].click&&T.add(s[e],"click",this.buttons[e].click,this),"object"==typeof this.buttons[e].click&&T.add(s[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!f(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){Ue(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!f(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),f(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&Q.isIE&&""===this.element.style.width&&!f(this.width)&&(this.element.style.width=ot(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,n){var s,o;o=i.classList.contains(c)?this.element.id+"header":i.classList.contains(p)?this.element.id+"footerTemplate":this.element.id+"content",f(e.outerHTML)?("string"==typeof e||"string"!=typeof e)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!=typeof e?s=Pi(e):i.innerHTML=e):i.appendChild(e);var l=[];if(!f(s)){for(var u=0,d=s({},this,n,o,!0);u<d.length;u++)l.push(d[u]);Zt([].slice.call(l),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=jn.beforeSanitize();de(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!f(i.helper)?e=i.helper(e):i.cancel||(e=jn.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!f(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,Q.isIE&&"auto"===this.height&&!f(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?N([this.element],HN):z([this.element],HN)),f(this.element.querySelector(".e-resize-handle"))||(I6(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(f(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(n){8!==n.nodeType&&e.innerContentElement.appendChild(n)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:c}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Ue(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:p}),""===this.footerTemplate||f(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){f(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:VN}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:Et,attrs:{type:"button"}}),this.closeIconBtnObj=new j_({cssClass:"e-flat",iconCss:w+" e-icons"}),this.closeIconTitle(),f(this.headerContent)?(this.createHeaderContent(),bi([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):bi([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(z([this.element],e.split(" ")),this.isModal&&!f(this.dlgContainer)&&z([this.dlgContainer],e.split(" "))),this.cssClass&&(N([this.element],this.cssClass.split(" ")),this.isModal&&!f(this.dlgContainer)&&N([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(gi),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),N([this.element],g),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,n=0;n<e.length;n++){if(((i=e[n]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!f(e)){var n=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(n)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+Et),s=e.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(s);if(f(o)){if(!f(o=this.focusableElements(this.contentEle)))return o;if(!f(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},t.prototype.disableElement=function(e,i){var n=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,i))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=f(e)?this.element:e,n=Q.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){T.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){T.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return!1},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(Rk))for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"content":f(this.content)||""===this.content?f(this.contentEle)||(ce(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),f(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),ce(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||f(this.header)?this.headerEle&&(ce(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||f(this.footerTemplate)){if(!this.ftrTemplateContent)return;ce(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||f(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(w).length>0?this.showCloseIcon||""!==this.header&&!f(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():ce(this.closeIcon):(ce(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Vt(this.element,{height:ot(e.height)});break;case"width":Vt(this.element,{width:ot(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var a=this.buttons.length;!f(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(ce(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)f(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!f(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=f(i.position.X)?this.position.X:i.position.X,u=f(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+u)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+u)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=ot(this.minHeight))}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)f(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",f(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(z([this.element],g),z([document.body],[_,F]),ce(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&T.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0;var s=iv(e);this.zIndex=s>this.zIndex?s:this.zIndex,this.isProtectedOnChange=n,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){(function uX(r){bg=r})(this.targetEle.clientWidth),function cX(r){sv=r}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[HN,g,$r,Os,Ke,Te],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(z([this.targetEle],[_,F]),!f(this.element)&&this.element.classList.contains(Ke)&&z([document.body],[_,F]),this.isModal&&z([f(this.targetEle)?document.body:this.targetEle],F),this.unWireEvents(),!f(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(f(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),f(this.dragObj)||this.dragObj.destroy(),!f(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),z([this.element],e),!f(this.cssClass)&&""!==this.cssClass&&z([this.element],this.cssClass.split(" ")),!f(this.refElement)&&!f(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),ce(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(ce(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),ce(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!f(this.element.children))for(n=0;n<=this.element.children.length;n++)ce(this.element.children[n-=n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:r.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&T.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&T.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&T.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&T.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&T.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(Rk)){if(!this.element.classList.contains(gi)||!f(e)){f(e)||this.fullScreen(e);var n={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(s){if(!s.cancel){i.element.style.maxHeight!==n.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=n.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!f(i.dlgOverlay)&&(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",z([i.dlgOverlay],"e-fade"),f(i.targetEle)?N([document.body],[_,F]):(i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute",i.element.style.position="relative",N([i.targetEle],[_,F])));var o={name:i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),Vt(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(o),i.dialogOpen=!0;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=l}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(Rk)&&this.preventVisibility){var n={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=n,this.trigger("beforeClose",n,function(s){if(!s.cancel){i.isModal&&(f(i.targetEle)||z([i.targetEle],[_,F])),document.body.classList.contains(_)&&document.body.classList.contains(F)&&z([document.body],[_,F]);var o={name:i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=Ew})}},t.prototype.fullScreen=function(e){if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",N([this.element],Ke);var s=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=f(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=s,N([document.body],[_,F]),this.allowDragging&&!f(this.dragObj)&&this.dragObj.destroy()}else z([this.element],Ke),z([document.body],[_,F]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return f(e)?this.btnObj:this.btnObj[e]},ir([E("")],t.prototype,"content",void 0),ir([E(!0)],t.prototype,"enableHtmlSanitizer",void 0),ir([E(!1)],t.prototype,"showCloseIcon",void 0),ir([E(!1)],t.prototype,"isModal",void 0),ir([E("")],t.prototype,"header",void 0),ir([E(!0)],t.prototype,"visible",void 0),ir([E(!1)],t.prototype,"enableResize",void 0),ir([E(["South-East"])],t.prototype,"resizeHandles",void 0),ir([E("auto")],t.prototype,"height",void 0),ir([E("")],t.prototype,"minHeight",void 0),ir([E("100%")],t.prototype,"width",void 0),ir([E("")],t.prototype,"cssClass",void 0),ir([E(1e3)],t.prototype,"zIndex",void 0),ir([E(null)],t.prototype,"target",void 0),ir([E("")],t.prototype,"footerTemplate",void 0),ir([E(!1)],t.prototype,"allowDragging",void 0),ir([_o([{}],dX)],t.prototype,"buttons",void 0),ir([E(!0)],t.prototype,"closeOnEscape",void 0),ir([ln({},pX)],t.prototype,"animationSettings",void 0),ir([ln({X:"center",Y:"center"},yk)],t.prototype,"position",void 0),ir([W()],t.prototype,"created",void 0),ir([W()],t.prototype,"open",void 0),ir([W()],t.prototype,"beforeSanitizeHtml",void 0),ir([W()],t.prototype,"beforeOpen",void 0),ir([W()],t.prototype,"close",void 0),ir([W()],t.prototype,"beforeClose",void 0),ir([W()],t.prototype,"dragStart",void 0),ir([W()],t.prototype,"dragStop",void 0),ir([W()],t.prototype,"drag",void 0),ir([W()],t.prototype,"overlayClick",void 0),ir([W()],t.prototype,"resizeStart",void 0),ir([W()],t.prototype,"resizing",void 0),ir([W()],t.prototype,"resizeStop",void 0),ir([W()],t.prototype,"destroyed",void 0),ir([ui],t)}(nn);!function(r){function i(u,d){var m=new Hd(u);return m.appendTo(d),m}function o(u,d){return u.header=f(d.title)?Bi:d.title,u.content=f(d.content)?"":d.content,u.isModal=!!f(d.isModal)||d.isModal,u.showCloseIcon=!f(d.showCloseIcon)&&d.showCloseIcon,u.allowDragging=!f(d.isDraggable)&&d.isDraggable,u.closeOnEscape=!f(d.closeOnEscape)&&d.closeOnEscape,u.position=f(d.position)?{X:"center",Y:"top"}:d.position,u.animationSettings=f(d.animationSettings)?{effect:"Fade",duration:400,delay:0}:d.animationSettings,u.cssClass=f(d.cssClass)?"":d.cssClass,u.zIndex=f(d.zIndex)?1e3:d.zIndex,u.open=f(d.open)?null:d.open,u.width=f(d.width)?"auto":d.width,u.height=f(d.height)?"auto":d.height,u}function h(u,d,m){var y=m;return f(d.text)||(y.buttonModel.content=d.text),f(d.icon)||(y.buttonModel.iconCss=d.icon),f(d.cssClass)||(y.buttonModel.cssClass=d.cssClass),f(d.click)||(y.click=d.click),y}r.alert=function t(u){var m,d=ri("div",{className:Ft});return document.body.appendChild(d),m=i("string"==typeof u?{content:u,position:{X:"center",Y:"top"},isModal:!0,header:Bi,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function n(u){var d={buttons:[]};return function a(u,d){var m=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return f(d.okButton)?u.buttons=m:u.buttons[0]=h(0,d.okButton,m[0]),u}(d=o(d,u),u)}(u),d),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(mn)):m.element.remove()},m},r.confirm=function e(u){var m,d=ri("div",{className:In});return document.body.appendChild(d),m=i("string"==typeof u?{position:{X:"center",Y:"top"},content:u,isModal:!0,header:Bi,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function s(u){var d={buttons:[]};return function l(u,d){var m={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},y={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u.buttons[0]=f(d.okButton)?m:h(0,d.okButton,m),u.buttons[1]=f(d.cancelButton)?y:h(0,d.cancelButton,y),u}(d=o(d,u),u)}(u),d),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(mn)):m.element.remove()},m}}(ox||(ox={}));var ax=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cs=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},A6="e-tooltip",_6="e-tooltip-wrap",gX="e-tip-content",Nk="e-arrow-tip",mX="e-arrow-tip-outer",zN="e-arrow-tip-inner",Bk="e-tip-bottom",k6="e-tip-top",vX="e-tip-left",R6="e-tip-right",M6="e-popup",jN="e-popup-open",L6="e-popup-close",UN="e-lib",yX="e-tooltip-popup-container",Oge=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ax(t,r),Cs([E({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Cs([E({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Ti),WN=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return ax(t,r),t.prototype.initialize=function(){this.formatPosition(),N([this.element],A6),this.element.setAttribute("tabindex","0")},t.prototype.formatPosition=function(){var e,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:Nk+" "+this.tipClass});e.appendChild(this.createElement("div",{className:mX+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:zN+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?vX:0===e.indexOf("Bottom")?k6:0===e.indexOf("Left")?R6:Bk},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(UN),this.popupObj=new Ol(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=ko(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.calculateTooltipOffset(this.position),s=this.calculateElementPosition(i,n),l=this.collisionFlipFit(e,s[0],s[1]);return this.tooltipEle.style.display="",l},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var i={top:0,left:0},n=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,o=le("."+Nk,this.tooltipEle),a=o?o.offsetWidth:0,l=o?o.offsetHeight:0,h=this.showTipPointer?0:8,u=l/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(h+=2),e){case"RightTop":i.left+=a+h,i.top-=s-u;break;case"RightCenter":i.left+=a+h,i.top-=s/2;break;case"RightBottom":i.left+=a+h,i.top-=u;break;case"BottomRight":i.top+=l+h,i.left-=d;break;case"BottomCenter":i.top+=l+h,i.left-=n/2;break;case"BottomLeft":i.top+=l+h,i.left-=n-d;break;case"LeftBottom":i.left-=a+n+h,i.top-=u;break;case"LeftCenter":i.left-=a+n+h,i.top-=s/2;break;case"LeftTop":i.left-=a+n+h,i.top-=s-u;break;case"TopLeft":i.top-=s+l+h,i.left-=n-d;break;case"TopRight":i.top-=s+l+h,i.left-=d;break;default:i.top-=s+l+h,i.left-=n/2}return i.left+=this.offsetX,i.top+=this.offsetY,i},t.prototype.updateTipPosition=function(e){var i=Ze("."+Nk+",."+mX+",."+zN,this.tooltipEle);z(i,[Bk,k6,vX,R6]),this.setTipClass(e),N(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,n,s){if(!1!==this.showTipPointer){var o,a;this.updateTipPosition(i),this.tooltipEle.style.display="block";var C,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,u=le("."+Nk,this.tooltipEle),d=le("."+zN,this.tooltipEle),m=u.offsetWidth,y=u.offsetHeight;this.tooltipEle.style.display="",this.tipClass===Bk||this.tipClass===k6?(this.tipClass===Bk?(a="99.9%",d.style.top="-"+(y-2)+"px"):(a=-(y-1)+"px",d.style.top="-"+(y-6)+"px"),e&&(o=(C="Center"!==n||l>e.offsetWidth||this.mouseTrail)&&"Left"===n||!C&&"End"===this.tipPointerPosition?l-m-2+"px":C&&"Right"===n||!C&&"Start"===this.tipPointerPosition?"2px":!C||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-m/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2+2+"px")):(this.tipClass===R6?(o="99.9%",d.style.left="-"+(m-2)+"px"):(o=-(m-1)+"px",d.style.left=m-2-m+"px"),a=(C="Center"!==s||h>e.offsetHeight||this.mouseTrail)&&"Top"===s||!C&&"End"===this.tipPointerPosition?h-y-2+"px":C&&"Bottom"===s||!C&&"Start"===this.tipPointerPosition?"2px":h/2-y/2+"px"),u.style.top=a,u.style.left=o}},t.prototype.renderContent=function(e){var i=le("."+gX,this.tooltipEle);if(this.cssClass&&N([this.tooltipEle],this.cssClass.split(" ")),e&&!f(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),f(this.content))e&&!f(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:jn.sanitize(this.content)},!0),s=Pi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))if(this.enableHtmlParse)for(var o=s.length,a=0;a<o;a++)i[(Zt(s,i),"innerHTML")]=this.content;else i.textContent=this.content}else{var s;(s=Pi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&Zt(s,i),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),T.add(e,Q.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,i){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(i)<0&&n.push(i),Ue(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),n=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=n.indexOf(i);-1!==s&&n.splice(s,1),e.removeAttribute("data-tooltip-id");var o=n.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},t.prototype.targetClick=function(e){var i;!f(i=this.target?U(e.target,this.target):this.element)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i))},t.prototype.targetHover=function(e){var i;if(!(f(i=this.target?U(e.target,this.target):this.element)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var s=0,o=[].slice.call(Ze('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));s<o.length;s++)this.restoreElement(o[s]);this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&T.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,n){var s=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,T.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!f(n)},this.trigger("beforeRender",this.tooltipEventArgs,function(a){s.beforeRenderCallback(a,e,n,i)}.bind(this))},t.prototype.beforeRenderCallback=function(e,i,n,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,f(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Gi(this.element.getAttribute("id")):Gi("tooltip"),this.tooltipEle=this.createElement("div",{className:_6+" "+M6+" "+UN,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+ot(this.width)+";height:"+ot(this.height)+";position:absolute;"}),this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,n,s,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),Cr.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,n,s,this)))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=le(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||N([this.containerElement],yX),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(Q.isDevice&&N([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=ot(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:gX})),this.appendContainer(i),z([i.tooltipEle],"e-hidden"),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),N([i.tooltipEle],jN),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),Cr.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,n,s){e&&(z([s.tooltipEle],jN),N([s.tooltipEle],L6),s.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:s.tooltipEle,isInteracted:!f(i)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none"),s.trigger("beforeOpen",s.tooltipEventArgs,function(a){s.beforeOpenCallback(a,e,n,i)}.bind(s)))},t.prototype.beforeOpenCallback=function(e,i,n,s){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&T.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(a,i)}s&&this.wireMouseEvents(s,i)},t.prototype.needTemplateReposition=function(){return!f(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},t.prototype.checkCollision=function(e,i,n){var s={left:i,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=rf(this.tooltipEle,this.checkCollideTarget(),i,n);return o.length>0&&(s.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,n){var s=this.checkCollision(e,i,n),o=s.position;this.tooltipPositionY!==s.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===o.indexOf("Left")&&(s.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=s.vertical+"Left"),0===o.indexOf("Right")&&(s.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs);var a=s.vertical,l=s.horizontal;if(s.position!==o){var h=ko(e,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,l,a);var u=this.calculateTooltipOffset(o);u.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),u.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),s.position=o;var d=this.calculateElementPosition(h,u);s.left=d[0],s.top=d[1]}else this.adjustArrow(e,o,l,a);var m={left:s.left,top:s.top},y=this.isBodyContainer?hk(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},m).left:m.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var C=le("."+Nk,this.tooltipEle),S=parseInt(C.style.left,10)-(y-s.left);S<0?S=0:S+C.offsetWidth>this.tooltipEle.clientWidth&&(S=this.tooltipEle.clientWidth-C.offsetWidth),C.style.left=S.toString()+"px"}return this.tooltipEle.style.display="",m.left=y,m},t.prototype.getOffSetPosition=function(e,i,n){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(i.split(/(?=[A-Z])/)[0])?2*n:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,n){var s=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){s.closeDelay&&s.tooltipEle&&s.isTooltipOpen||s.tooltipHide(e,i,n)},this.closeDelay)):this.tooltipHide(e,i,n)},t.prototype.tooltipHide=function(e,i,n){var o,s=this;o=i?this.target?n||i.target:this.element:le('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!f(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?s.isHidden=!1:(s.mouseMoveBeforeRemove(),s.popupHide(e,o))})},t.prototype.popupHide=function(e,i){i&&this.restoreElement(i),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),f(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(z([this.tooltipEle],L6),N([this.tooltipEle],jN)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&He(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var n=U(i,"."+_6+"."+UN+"."+M6);n?T.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),T.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var i=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,n=e.touches[0].pageY):(i=e.pageX,n=e.pageY),Cr.stop(this.tooltipEle),z([this.tooltipEle],L6),N([this.tooltipEle],jN),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.calculateTooltipOffset(this.position),l=this.checkCollision(e.target,i+s.left+this.offsetX,n+s.top+this.offsetY);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(e.target,l.position,l.horizontal,l.vertical);var u=this.calculateTooltipOffset(l.position);l.left=i+u.left-this.offsetX,l.top=n+u.top-this.offsetY}this.tooltipEle.style.left=l.left+"px",this.tooltipEle.style.top=l.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===U(e.target,"."+A6)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(U(e.target,"."+_6+"."+UN+"."+M6)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=Bk,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.wireFocusEvents(),T.add(this.element,"DOMNodeInserted",this.updateTarget,this)),"Click"===o&&T.add(this.element,Q.touchStartEvent,this.targetClick,this),"Hover"===o&&(Q.isDevice?(this.touchModule=new Ja(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),T.add(this.element,Q.touchEndEvent,this.touchEndHandler,this)):T.add(this.element,"mouseover",this.targetHover,this))}T.add(document,"touchend",this.touchEnd,this),T.add(document,"scroll wheel",this.scrollHandler,this),T.add(window,"resize",this.windowResize,this),T.add(document,"keydown",this.keyDown,this)},t.prototype.updateTarget=function(e){f(this.targetsList)||f(this.target)||[].slice.call(Ze(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=Q.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(f(this.target))T.add(this.element,"focus",this.targetHover,this);else{var e=[].slice.call(Ze(this.target,this.element));this.targetsList=e;for(var i=0,n=e;i<n.length;i++){var s=n[i];s.setAttribute("tabindex","0"),T.add(s,"focus",this.targetHover,this)}}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||("focus"===e.type&&T.add(i,"blur",this.onMouseOut,this),"mouseover"===e.type&&T.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(T.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),T.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&T.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this),i.setAttribute("tabindex","0"))},t.prototype.unwireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.unwireFocusEvents(),T.remove(this.element,"DOMNodeInserted",this.updateTarget)),"Click"===o&&T.remove(this.element,Q.touchStartEvent,this.targetClick),"Hover"===o&&(Q.isDevice?(this.touchModule&&this.touchModule.destroy(),T.remove(this.element,Q.touchEndEvent,this.touchEndHandler)):T.remove(this.element,"mouseover",this.targetHover))}T.remove(document,"touchend",this.touchEnd),T.remove(document,"scroll wheel",this.scrollHandler),T.remove(window,"resize",this.windowResize),T.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(f(this.target))T.remove(this.element,"focus",this.targetHover);else for(var i=0,n=[].slice.call(Ze(this.target,this.element));i<n.length;i++){var s=n[i];s.removeAttribute("tabindex"),T.remove(s,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var n=0,s=this.getTriggerList(this.opensOn);n<s.length;n++){var o=s[n];"Focus"===o&&T.remove(e,"blur",this.onMouseOut),"Hover"===o&&!Q.isDevice&&T.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(T.remove(e,"mouseenter",this.tooltipHover),T.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&T.remove(e,"mousemove touchstart mouseenter",this.onMouseMove),e.removeAttribute("tabindex")},t.prototype.findTarget=function(){return le('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var n=this.findTarget(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ot(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=ot(e.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var l=le("."+zN,this.tooltipEle);l.style.top=l.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var u=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+u).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&z([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&N([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?N([this.tooltipEle],"e-rtl"):z([this.tooltipEle],"e-rtl"));break;case"container":f(this.containerElement)||z([this.containerElement],yX),this.container=e.container,this.tooltipEle&&n&&(this.appendContainer(this),this.reposition(n))}},t.prototype.open=function(e,i){f(i)&&(i=this.animation.open),f(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltipEle&&He(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),z([this.element],A6),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Cs([E("auto")],t.prototype,"width",void 0),Cs([E("auto")],t.prototype,"height",void 0),Cs([E()],t.prototype,"content",void 0),Cs([E("body")],t.prototype,"container",void 0),Cs([E()],t.prototype,"target",void 0),Cs([E("TopCenter")],t.prototype,"position",void 0),Cs([E(0)],t.prototype,"offsetX",void 0),Cs([E(0)],t.prototype,"offsetY",void 0),Cs([E(!0)],t.prototype,"showTipPointer",void 0),Cs([E(!0)],t.prototype,"enableHtmlParse",void 0),Cs([E(!1)],t.prototype,"windowCollision",void 0),Cs([E("Auto")],t.prototype,"tipPointerPosition",void 0),Cs([E("Auto")],t.prototype,"opensOn",void 0),Cs([E(!1)],t.prototype,"mouseTrail",void 0),Cs([E(!1)],t.prototype,"isSticky",void 0),Cs([ln({},Oge)],t.prototype,"animation",void 0),Cs([E(0)],t.prototype,"openDelay",void 0),Cs([E(0)],t.prototype,"closeDelay",void 0),Cs([E()],t.prototype,"cssClass",void 0),Cs([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Cs([W()],t.prototype,"beforeRender",void 0),Cs([W()],t.prototype,"beforeOpen",void 0),Cs([W()],t.prototype,"afterOpen",void 0),Cs([W()],t.prototype,"beforeClose",void 0),Cs([W()],t.prototype,"afterClose",void 0),Cs([W()],t.prototype,"beforeCollision",void 0),Cs([W()],t.prototype,"created",void 0),Cs([W()],t.prototype,"destroyed",void 0),Cs([ui],t)}(nn),Fl={},Hk="e-spin-show",Vk="e-spin-hide",CX="e-spin-material",wX="e-spin-fabric",SX="e-spin-fluent",EX="e-spin-tailwind",Vge="e-spin-bootstrap",TX="e-spin-bootstrap4",xX="e-spin-bootstrap5",DX="e-spin-high-contrast",qN="e-spinner-pane",O6="e-spinner-inner",GN="e-path-circle",KN="e-spin-template";function kc(r,t){if(r.target){var e,i=f(t)?ri:t,n=function ame(r,t){var e=t("div",{}),i=t("div",{});return e.classList.add(qN),i.classList.add(O6),r.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}(r.target,i);if(f(r.cssClass)||n.wrap.classList.add(r.cssClass),f(r.template)&&f(null)){var o=f(r.type)?function Qge(r){return window.getComputedStyle(r,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):r.type;e=function sme(r,t){var e;switch(t){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":case"Fluent":default:e=30;break;case"Bootstrap4":case"Bootstrap5":e=36}return r=r?parseFloat(r+""):e,"Bootstrap"===t?r:r/2}(f(r.width)?void 0:r.width,o),function IX(r,t,e,i){var n=t.querySelector("."+O6),s=n.querySelector("svg");switch(f(s)||n.removeChild(s),r){case"Material":!function Wge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Material",radius:t},F6(r,i,0,CX),N6(t,r,"Material",CX)}(n,e);break;case"Fabric":!function $ge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Fabric",radius:t},YN(r,i,wX),ZN(t,r,wX)}(n,e);break;case"Fluent":!function Yge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Fluent",radius:t},YN(r,i,SX),ZN(t,r,SX)}(n,e);break;case"Bootstrap":!function Jge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Bootstrap",radius:t},function eme(r,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,s=32,o=2;i.setAttribute("id",t),i.setAttribute("class",Vge),i.setAttribute("viewBox","0 0 "+n+" "+n),r.insertBefore(i,r.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",GN+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+s+","+s+")"),i.appendChild(l)}}(r,i),function tme(r,t){var e=r.querySelector("svg.e-spin-bootstrap"),i=0,n=0,s=24;e.style.width=e.style.height=t+"px";for(var o=90,a=0;a<=7;a++){var l=B6(i,n,s,o),h=e.querySelector("."+GN+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(r,t)}(n,e);break;case"HighContrast":!function Xge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"HighContrast",radius:t},YN(r,i,DX),ZN(t,r,DX)}(n,e);break;case"Bootstrap4":!function qge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Bootstrap4",radius:t},F6(r,i,0,TX),N6(t,r,"Bootstrap4",TX)}(n,e);break;case"Bootstrap5":!function Gge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Bootstrap5",radius:t},F6(r,i,0,xX),N6(t,r,"Bootstrap5",xX)}(n,e);break;case"Tailwind":case"Tailwind-dark":!function Zge(r,t,e){var i=Ab();Fl[i]={timeOut:0,type:"Tailwind",radius:t},YN(r,i,EX),ZN(t,r,EX)}(n,e)}}(o,n.wrap,e),f(r.label)||function Uge(r,t,e){var i=e("div",{});i.classList.add("e-spin-label"),i.innerHTML=t,r.appendChild(i)}(n.inner_wrap,r.label,i)}else{var s=f(r.template)?null:r.template;n.wrap.classList.add(KN),function rme(r,t,e){f(e)||r.classList.add(e),r.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,s,null)}n.wrap.classList.add(Vk),n=null}}function ime(r,t){var e=[],i=r,n=t,s=!1,o=1;return function a(l){e.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!s?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),s=!0):l<8&&s?8===(l=parseFloat((l+.2).toFixed(2)))&&(s=!1):l<=8&&!s&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),e}function Ab(){for(var r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function YN(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",e);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",GN);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),r.insertBefore(n,r.firstChild),n.appendChild(s),n.appendChild(o)}function F6(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",i),n.setAttribute("id",t),s.setAttribute("class",GN),r.insertBefore(n,r.firstChild),n.appendChild(s)}function AX(r){(function lme(r,t,e,i,n,s,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=t-r,u=function hme(r){return parseFloat(r)}(2*o.globalInfo[o.uniqueID].radius+""),d=_X(u),m=-90*(o.globalInfo[o.uniqueID].count||0);!function y(S){var I=Math.max(0,Math.min((new Date).getTime()-l,i));(function C(S,I){if(!f(I.querySelector("svg.e-spin-material"))&&!f(I.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var O=I.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");O.setAttribute("stroke-dashoffset",kX(u,d,S,s)+""),O.setAttribute("transform","rotate("+m+" "+u/2+" "+u/2+")")}})(e(I,r,h,i),S.container),a===S.globalInfo[S.uniqueID].previousId&&I<i?Fl[S.uniqueID].timeOut=setTimeout(y.bind(null,S),1):AX(S)}(o)})(1,149,cme,1333,0,75,r),r.globalInfo[r.uniqueID].count=++r.globalInfo[r.uniqueID].count%4}function N6(r,t,e,i){var n=2*r,s=t.querySelector("svg."+i),o=s.querySelector("path.e-path-circle"),a=_X(n),l=n/2+"px";s.setAttribute("viewBox","0 0 "+n+" "+n),s.style.width=s.style.height=n+"px",s.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function ume(r,t){var e=r/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}(n,a)),"Material"===e&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",kX(n,a,1,75)+""))}function _X(r){return.1*r}function kX(r,t,e,i){return(r-t)*Math.PI*(3*i/100-e/100)}function cme(r,t,e,i){var n=(r/=i)*r,s=n*r;return t+e*(6*s*n+-15*n*n+10*s)}function ZN(r,t,e){var i=r,n=r,s=2*r,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),u=l.querySelector(".e-path-arc"),d=s/2+"px";h.setAttribute("d",function pme(r,t,e){return["M",r,t,"m",-e,0,"a",e,e,0,1,0,2*e,0,"a",e,e,0,1,0,2*-e,0].join(" ")}(i,n,r)),u.setAttribute("d",function dme(r,t,e,i,n){var s=B6(r,t,e,n),o=B6(r,t,e,i);return["M",s.x,s.y,"A",e,e,0,0,0,o.x,o.y].join(" ")}(i,n,r,315,45)),l.setAttribute("viewBox","0 0 "+s+" "+s),l.style.transformOrigin=d+" "+d+" "+d,l.style.width=l.style.height=s+"px"}function B6(r,t,e,i){var n=(i-90)*Math.PI/180;return{x:r+e*Math.cos(n),y:t+e*Math.sin(n)}}function rh(r){RX(r,!1),r=null}function RX(r,t){var e;if(r&&(e=r.classList.contains(qN)?r:r.querySelector("."+qN)),r&&e){var i=e.querySelector("."+O6);if(t?!e.classList.contains(KN)&&!e.classList.contains(Vk):!e.classList.contains(KN)&&!e.classList.contains(Hk)){var s=e.querySelector("svg");if(f(s))return;var o=s.getAttribute("id");switch(Fl[o].isAnimate=!t,Fl[o].type){case"Material":t?clearTimeout(Fl[o].timeOut):function Kge(r,t,e){var i={};Fl[t].timeOut=0,i[t]=function ome(r,t,e,i){return{radius:t,count:e,previousId:i}}(0,e,0,0),AX({uniqueID:t,container:r,globalInfo:i,timeOutVar:0})}(i,o,Fl[o].radius);break;case"Bootstrap":t?clearTimeout(Fl[o].timeOut):function nme(r){for(var e=r.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)s(r.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,ime(i,i),e);function s(o,a,l,h,u){var d=0;!function m(y){Fl[u].isAnimate&&(++d,o.setAttribute("r",y+""),d>=h.length&&(d=0),Fl[u].timeOut=setTimeout(m.bind(null,h[d]),18))}(a)}}(i)}}t?li(e,[Vk],[Hk]):li(e,[Hk],[Vk]),r=null}}function Nl(r){RX(r,!0),r=null}function vme(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}function _b(r,t,e){void 0===t&&(t=!1),void 0===e&&(e={});var i=r("div",{className:"e-checkbox-wrapper e-css"});if(e.cssClass&&N([i],e.cssClass.split(" ")),e.enableRtl&&i.classList.add("e-rtl"),t){var n=r("span",{className:"e-ripple-container"});Qi(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var s=r("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),i.appendChild(s),e.label){var o=r("span",{className:"e-label"});e.disableHtmlEncode?o.textContent=e.label:o.innerHTML=e.label,i.appendChild(o)}return i}function XN(r,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(r.type,!1,!0),t.dispatchEvent(e)}}var Cme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lf=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Vd_RTL=(new Zp,"e-rtl"),Tw=function(r){function t(e,i){return r.call(this,e,i)||this}return Cme(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=Qi(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?jn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Vd_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Vd_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&ce(i),this.unWireEvents(),lr&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):ce(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&ce(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Vd_RTL):this.element.classList.remove(Vd_RTL);break;case"content":vme(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=jn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},lf([E("Left")],t.prototype,"iconPosition",void 0),lf([E("")],t.prototype,"iconCss",void 0),lf([E(!1)],t.prototype,"disabled",void 0),lf([E(!1)],t.prototype,"isPrimary",void 0),lf([E("")],t.prototype,"cssClass",void 0),lf([E("")],t.prototype,"content",void 0),lf([E(!1)],t.prototype,"isToggle",void 0),lf([E()],t.prototype,"locale",void 0),lf([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),lf([W()],t.prototype,"created",void 0),lf([ui],t)}(nn),wme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rc=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},V6="e-check",LX="e-checkbox-disabled",zk="e-frame",z6="e-stop",j6="e-label",QN="e-ripple-container",U6="e-ripple-check",W6="e-ripple-stop",q6="e-rtl",G6="e-checkbox-wrapper",Sme=["title","class","style","disabled","readonly","name","value"],OX=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return wme(t,r),t.prototype.changeState=function(e){var i,n=this.getWrapper().getElementsByClassName(zk)[0];lr&&(i=this.getWrapper().getElementsByClassName(QN)[0]),"check"===e?(n.classList.remove(z6),n.classList.add(V6),i&&(i.classList.remove(W6),i.classList.add(U6)),this.element.checked=!0,this.element.required&&this.validCheck?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(z([n],[V6,z6]),i&&z([i],[U6,W6]),this.element.checked=!1,this.element.required&&this.validCheck?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(n.classList.remove(V6),n.classList.add(z6),i&&(i.classList.remove(U6),i.classList.add(W6)),this.element.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();r.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),ce(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(n){e.element.removeAttribute(n)})):(["class"].forEach(function(n){i.removeAttribute(n)}),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(G6)||(e=this.createElement("div",{className:G6}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),n=this.createElement("span",{className:"e-icons "+zk});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(q6),this.cssClass&&N([e],this.cssClass.split(" ")),e.appendChild(i),i.appendChild(this.element),function MX(r,t){r.element.getAttribute("ejs-for")&&t.appendChild(r.createElement("input",{attrs:{name:r.name||r.element.name,value:"false",type:"hidden"}}))}(this,i),i.appendChild(n),lr){var s=this.createElement("span",{className:QN});"Before"===this.labelPosition?i.appendChild(s):i.insertBefore(s,n),Qi(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,XN(e,this.getWrapper().getElementsByClassName(QN)[0])},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(QN)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element"),s=0;s<n.length-1;s++)i.removeChild(i.childNodes[s]);XN(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,n.classList.remove(LX),n.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&z([n],i.cssClass.split(" ")),e.cssClass&&N([n],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?n.classList.add(q6):n.classList.remove(q6);break;case"label":this.setText(e.label);break;case"labelPosition":var l=n.getElementsByClassName(j6)[0],h=n.getElementsByTagName("label")[0];ce(l),"After"===e.labelPosition?h.appendChild(l):h.insertBefore(l,n.getElementsByClassName(zk)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=function H6(r,t,e,i,n,s){var o=i;if(i.tagName===t){var a=ie("ej2_instances",i);o=r("input",{attrs:{type:e}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,u=i.attributes.length;h<u;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);Ue(i,{class:n}),i.appendChild(o),jt("ej2_instances",a,o),Yh(i,"ej2_instances")}return o}(this.createElement,"EJS-CHECKBOX","checkbox",e,G6),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Gi("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(LX),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var n=i.getElementsByClassName(j6)[0];if(n)n.textContent=e;else{e=this.enableHtmlSanitizer?jn.sanitize(e):e,n=this.createElement("span",{className:j6,innerHTML:e});var s=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(n,i.getElementsByClassName(zk)[0]):s.appendChild(n)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;T.remove(e,"click",this.clickHandler),T.remove(this.element,"keyup",this.keyUpHandler),T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"focusout",this.focusOutHandler);var i=e.getElementsByTagName("label")[0];T.remove(i,"mousedown",this.labelMouseDownHandler),T.remove(i,"mouseup",this.labelMouseUpHandler);var n=U(this.element,"form");n&&T.remove(n,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&T.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();T.add(e,"click",this.clickHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];T.add(i,"mousedown",this.labelMouseDownHandler,this),T.add(i,"mouseup",this.labelMouseUpHandler,this);var n=U(this.element,"form");n&&T.add(n,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&T.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!e){var s=this.value.indexOf(i);return this.checked?s<0&&this.value.push(i):s>-1&&this.value.splice(s,1),this.value}for(var n=0;n<this.value.length;n++)i===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(Sme.indexOf(n)>-1){var s=this.getWrapper();"class"===n?N([s],this.htmlAttributes[n].split(" ")):"title"===n?s.setAttribute(n,this.htmlAttributes[n]):"style"===n?this.getWrapper().getElementsByClassName(zk)[0].setAttribute(n,this.htmlAttributes[n]):this.element.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Rc([W()],t.prototype,"change",void 0),Rc([W()],t.prototype,"created",void 0),Rc([E(!1)],t.prototype,"checked",void 0),Rc([E("")],t.prototype,"cssClass",void 0),Rc([E(!1)],t.prototype,"disabled",void 0),Rc([E(!1)],t.prototype,"indeterminate",void 0),Rc([E("")],t.prototype,"label",void 0),Rc([E("After")],t.prototype,"labelPosition",void 0),Rc([E("")],t.prototype,"name",void 0),Rc([E("")],t.prototype,"value",void 0),Rc([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Rc([E({})],t.prototype,"htmlAttributes",void 0),Rc([ui],t)}(nn);function bU(r,t,e,i,n,s){var o=i;if(i.tagName===t){var a=ie("ej2_instances",i);o=r("input",{attrs:{type:e}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,u=i.attributes.length;h<u;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);Ue(i,{class:n}),i.appendChild(o),jt("ej2_instances",a,o),Yh(i,"ej2_instances")}return o}function Hme(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}function rB(r,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(r.type,!1,!0),t.dispatchEvent(e)}}function lQ(r,t){r.element.getAttribute("ejs-for")&&t.appendChild(r.createElement("input",{attrs:{name:r.name||r.element.name,value:"false",type:"hidden"}}))}var ke,jme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),uf=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},jd_RTL=(new Zp,"e-rtl"),Kk=function(r){function t(e,i){return r.call(this,e,i)||this}return jme(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=Qi(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?jn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(jd_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",jd_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&ce(i),this.unWireEvents(),lr&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):ce(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&ce(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(jd_RTL):this.element.classList.remove(jd_RTL);break;case"content":Hme(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=jn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},uf([E("Left")],t.prototype,"iconPosition",void 0),uf([E("")],t.prototype,"iconCss",void 0),uf([E(!1)],t.prototype,"disabled",void 0),uf([E(!1)],t.prototype,"isPrimary",void 0),uf([E("")],t.prototype,"cssClass",void 0),uf([E("")],t.prototype,"content",void 0),uf([E(!1)],t.prototype,"isToggle",void 0),uf([E()],t.prototype,"locale",void 0),uf([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),uf([W()],t.prototype,"created",void 0),uf([ui],t)}(nn),Ume=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Mc=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},wU="e-check",hQ="e-checkbox-disabled",$k="e-frame",SU="e-stop",EU="e-label",sB="e-ripple-container",TU="e-ripple-check",xU="e-ripple-stop",DU="e-rtl",IU="e-checkbox-wrapper",Wme=["title","class","style","disabled","readonly","name","value"],qme=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return Ume(t,r),t.prototype.changeState=function(e){var i,n=this.getWrapper().getElementsByClassName($k)[0];lr&&(i=this.getWrapper().getElementsByClassName(sB)[0]),"check"===e?(n.classList.remove(SU),n.classList.add(wU),i&&(i.classList.remove(xU),i.classList.add(TU)),this.element.checked=!0,this.element.required&&this.validCheck?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(z([n],[wU,SU]),i&&z([i],[TU,xU]),this.element.checked=!1,this.element.required&&this.validCheck?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(n.classList.remove(wU),n.classList.add(SU),i&&(i.classList.remove(TU),i.classList.add(xU)),this.element.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();r.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),ce(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(n){e.element.removeAttribute(n)})):(["class"].forEach(function(n){i.removeAttribute(n)}),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(IU)||(e=this.createElement("div",{className:IU}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),n=this.createElement("span",{className:"e-icons "+$k});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(DU),this.cssClass&&N([e],this.cssClass.split(" ")),e.appendChild(i),i.appendChild(this.element),lQ(this,i),i.appendChild(n),lr){var s=this.createElement("span",{className:sB});"Before"===this.labelPosition?i.appendChild(s):i.insertBefore(s,n),Qi(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,rB(e,this.getWrapper().getElementsByClassName(sB)[0])},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(sB)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element"),s=0;s<n.length-1;s++)i.removeChild(i.childNodes[s]);rB(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,n.classList.remove(hQ),n.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&z([n],i.cssClass.split(" ")),e.cssClass&&N([n],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?n.classList.add(DU):n.classList.remove(DU);break;case"label":this.setText(e.label);break;case"labelPosition":var l=n.getElementsByClassName(EU)[0],h=n.getElementsByTagName("label")[0];ce(l),"After"===e.labelPosition?h.appendChild(l):h.insertBefore(l,n.getElementsByClassName($k)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=bU(this.createElement,"EJS-CHECKBOX","checkbox",e,IU),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Gi("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(hQ),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var n=i.getElementsByClassName(EU)[0];if(n)n.textContent=e;else{e=this.enableHtmlSanitizer?jn.sanitize(e):e,n=this.createElement("span",{className:EU,innerHTML:e});var s=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(n,i.getElementsByClassName($k)[0]):s.appendChild(n)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;T.remove(e,"click",this.clickHandler),T.remove(this.element,"keyup",this.keyUpHandler),T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"focusout",this.focusOutHandler);var i=e.getElementsByTagName("label")[0];T.remove(i,"mousedown",this.labelMouseDownHandler),T.remove(i,"mouseup",this.labelMouseUpHandler);var n=U(this.element,"form");n&&T.remove(n,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&T.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();T.add(e,"click",this.clickHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];T.add(i,"mousedown",this.labelMouseDownHandler,this),T.add(i,"mouseup",this.labelMouseUpHandler,this);var n=U(this.element,"form");n&&T.add(n,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&T.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!e){var s=this.value.indexOf(i);return this.checked?s<0&&this.value.push(i):s>-1&&this.value.splice(s,1),this.value}for(var n=0;n<this.value.length;n++)i===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(Wme.indexOf(n)>-1){var s=this.getWrapper();"class"===n?N([s],this.htmlAttributes[n].split(" ")):"title"===n?s.setAttribute(n,this.htmlAttributes[n]):"style"===n?this.getWrapper().getElementsByClassName($k)[0].setAttribute(n,this.htmlAttributes[n]):this.element.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Mc([W()],t.prototype,"change",void 0),Mc([W()],t.prototype,"created",void 0),Mc([E(!1)],t.prototype,"checked",void 0),Mc([E("")],t.prototype,"cssClass",void 0),Mc([E(!1)],t.prototype,"disabled",void 0),Mc([E(!1)],t.prototype,"indeterminate",void 0),Mc([E("")],t.prototype,"label",void 0),Mc([E("After")],t.prototype,"labelPosition",void 0),Mc([E("")],t.prototype,"name",void 0),Mc([E("")],t.prototype,"value",void 0),Mc([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Mc([E({})],t.prototype,"htmlAttributes",void 0),Mc([ui],t)}(nn),Gme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ud=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},AU="e-label",uQ="e-ripple-container",_U="e-rtl",kU="e-radio-wrapper",Kme=["title","class","style","disabled","readonly","name","value"],$me=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isFocused=!1,s}var e;return Gme(t,r),e=t,t.prototype.changeHandler=function(i){this.checked=!0,this.dataBind();var n=this.element.getAttribute("value");this.trigger("change",{value:n=this.isVue&&n?this.element.value:this.value,event:i}),"EJS-RADIOBUTTON"===this.tagName&&i.stopPropagation()},t.prototype.updateChange=function(){for(var i,n,s=this.getRadioGroup(),o=0;o<s.length;o++)(i=s[o])!==this.element&&((n=Wr(i,e)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(n.angularValue=this.value))},t.prototype.destroy=function(){var i=this,n=this.wrapper;r.prototype.destroy.call(this),n&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(n.parentNode&&n.parentNode.insertBefore(this.element,n),ce(n),this.element.checked=!1,["name","value","disabled"].forEach(function(s){i.element.removeAttribute(s)})):(["role","aria-checked","class"].forEach(function(s){n.removeAttribute(s)}),n.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var i=this.getLabel();i&&i.classList.remove("e-focus")},t.prototype.getModuleName=function(){return"radio"},t.prototype.getSelectedValue=function(){for(var i,n=this.getRadioGroup(),s=0,o=n.length;s<o;s++)if((i=n[s]).checked)return i.value;return""},t.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element?this.element.parentElement:null},t.prototype.getLabel=function(){return this.element?this.element.nextElementSibling:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var i=this.element.getAttribute("value");this.isVue&&i&&i===this.value&&(this.checked=!0),(this.isVue?this.value&&!i:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var i,n=this.element.parentElement;n.classList.contains(kU)||(n=this.createElement("div",{className:kU}),this.element.parentNode.insertBefore(n,this.element));var s=this.createElement("label",{attrs:{for:this.element.id}});n.appendChild(this.element),n.appendChild(s),lr&&(i=this.createElement("span",{className:uQ}),s.appendChild(i),Qi(i,{duration:400,isCenterRipple:!0})),n.classList.add("e-wrapper"),this.enableRtl&&s.classList.add(_U),this.cssClass&&N([n],this.cssClass.split(" ")),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},t.prototype.labelRippleHandler=function(i){rB(i,this.getLabel().getElementsByClassName(uQ)[0])},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&Ue(this.element,{checked:"true"})},t.prototype.onPropertyChanged=function(i,n){for(var s=this.getWrapper(),o=this.getLabel(),a=0,l=Object.keys(i);a<l.length;a++)switch(l[a]){case"checked":i.checked&&this.updateChange(),this.element.checked=i.checked;break;case"disabled":i.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":n.cssClass&&z([s],n.cssClass.split(" ")),i.cssClass&&N([s],i.cssClass.split(" "));break;case"enableRtl":i.enableRtl?o.classList.add(_U):o.classList.remove(_U);break;case"label":this.setText(i.label);break;case"labelPosition":"Before"===i.labelPosition?o.classList.add("e-right"):o.classList.remove("e-right");break;case"name":this.element.setAttribute("name",i.name);break;case"value":if(!f(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",i.value);break;case"htmlAttributes":this.updateHtmlAttribute()}},t.prototype.preRender=function(){var i=this.element;if(this.formElement=U(this.element,"form"),this.tagName=this.element.tagName,i=bU(this.createElement,"EJS-RADIOBUTTON","radio",i,kU),this.element=i,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=Gi("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var n=this.element.getAttribute("formcontrolname");n&&(this.setProperties({name:n},!0),this.element.setAttribute("name",n))}},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){this.element.disabled=!0},t.prototype.setText=function(i){var n=this.getLabel(),s=n.getElementsByClassName(AU)[0];s?s.textContent=i:(i=this.enableHtmlSanitizer?jn.sanitize(i):i,s=this.createElement("span",{className:AU,innerHTML:i}),n.appendChild(s)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},t.prototype.updateHtmlAttribute=function(){if(!f(this.htmlAttributes))for(var i=0,n=Object.keys(this.htmlAttributes);i<n.length;i++){var s=n[i];if(Kme.indexOf(s)>-1){var o=this.element.parentElement;"class"===s?N([o],this.htmlAttributes[s].split(" ")):"title"===s||"style"===s?o.setAttribute(s,this.htmlAttributes[s]):this.element.setAttribute(s,this.htmlAttributes[s])}}},t.prototype.unWireEvents=function(){var i=this.wrapper;T.remove(this.element,"change",this.changeHandler),T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"focusout",this.focusOutHandler),T.remove(this.element,"keyup",this.keyUpHandler);var n=i.getElementsByTagName("label")[0];n&&(T.remove(n,"mousedown",this.labelRippleHandler),T.remove(n,"mouseup",this.labelRippleHandler)),this.formElement&&T.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.wireEvents=function(){var i=this.getLabel();T.add(this.element,"change",this.changeHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this);var n=i.getElementsByClassName(AU)[0];n&&(T.add(n,"mousedown",this.labelRippleHandler,this),T.add(n,"mouseup",this.labelRippleHandler,this)),this.formElement&&T.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Ud([W()],t.prototype,"change",void 0),Ud([W()],t.prototype,"created",void 0),Ud([E(!1)],t.prototype,"checked",void 0),Ud([E("")],t.prototype,"cssClass",void 0),Ud([E(!1)],t.prototype,"disabled",void 0),Ud([E("")],t.prototype,"label",void 0),Ud([E("After")],t.prototype,"labelPosition",void 0),Ud([E("")],t.prototype,"name",void 0),Ud([E("")],t.prototype,"value",void 0),Ud([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ud([E({})],t.prototype,"htmlAttributes",void 0),e=Ud([ui],t)}(nn),Yme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Eg=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},cQ="e-switch-disabled",oB="e-ripple-container",dQ="e-ripple-check",RU="e-rtl",MU="e-switch-wrapper",pQ="e-switch-active",Zme=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isDrag=!1,n.isWireEvents=!1,n}return Yme(t,r),t.prototype.changeState=function(e){var i,n,s=this.getWrapper(),o=s.querySelector(".e-switch-inner"),a=s.querySelector(".e-switch-handle");lr&&(n=s.getElementsByClassName(oB)[0]),e?(N([o,a],pQ),i="true",this.element.checked=!0,this.checked=!0,n&&N([n],[dQ])):(z([o,a],pQ),i="false",this.element.checked=!1,this.checked=!1,n&&z([n],[dQ])),s.setAttribute("aria-checked",i)},t.prototype.clickHandler=function(e){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus(),this.trigger("change",{checked:this.element.checked,event:e})},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.disabled||this.unWireEvents(),function Vme(r,t,e){"INPUT"===e?(t.parentNode.insertBefore(r.element,t),ce(t),r.element.checked=!1,["name","value","disabled"].forEach(function(i){r.element.removeAttribute(i)})):(["role","aria-checked","class"].forEach(function(i){t.removeAttribute(i)}),t.innerHTML="")}(this,this.getWrapper(),this.tagName)},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus")},t.prototype.getModuleName=function(){return"switch"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.initialize=function(){f(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(MU)||(e=this.createElement("div",{className:MU,attrs:{"aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("span",{className:"e-switch-inner"}),n=this.createElement("span",{className:"e-switch-on"}),s=this.createElement("span",{className:"e-switch-off"}),o=this.createElement("span",{className:"e-switch-handle"});if(e.appendChild(this.element),lQ(this,e),i.appendChild(n),i.appendChild(s),e.appendChild(i),e.appendChild(o),lr){var a=this.createElement("span",{className:oB});o.appendChild(a),Qi(a,{duration:400,isCenterRipple:!0})}e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(RU),this.cssClass&&N([e],this.cssClass.split(" "))},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.changeState(e.checked);break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents(),this.isWireEvents=!1):(this.element.disabled=!1,n.classList.remove(cQ),n.setAttribute("aria-disabled","false"),this.isWireEvents||(this.wireEvents(),this.isWireEvents=!0));break;case"value":this.element.setAttribute("value",e.value);break;case"name":this.element.setAttribute("name",e.name);break;case"onLabel":case"offLabel":this.setLabel(e.onLabel,e.offLabel);break;case"enableRtl":e.enableRtl?n.classList.add(RU):n.classList.remove(RU);break;case"cssClass":i.cssClass&&z([n],i.cssClass.split(" ")),e.cssClass&&N([n],e.cssClass.split(" "))}},t.prototype.preRender=function(){var e=this.element;this.formElement=U(this.element,"form"),this.tagName=this.element.tagName,function zme(r,t,e,i,n){i=bU(r.createElement,t,"checkbox",i,e),r.element=i,"checkbox"!==r.element.getAttribute("type")&&r.element.setAttribute("type","checkbox"),r.element.id||(r.element.id=Gi("e-"+n))}(this,"EJS-SWITCH",MU,e,this.getModuleName())},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.rippleHandler=function(e){rB(e,this.getWrapper().getElementsByClassName(oB)[0]),"mousedown"===e.type&&e.currentTarget.classList.contains("e-switch-wrapper")&&1===e.which&&(this.isDrag=!0,this.isFocused=!1)},t.prototype.rippleTouchHandler=function(e){var i=this.getWrapper().getElementsByClassName(oB)[0];if(i){var n=document.createEvent("MouseEvents");n.initEvent(e,!1,!0),i.dispatchEvent(n)}},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(cQ),e.setAttribute("aria-disabled","true")},t.prototype.setLabel=function(e,i){var n=this.getWrapper();e&&(n.querySelector(".e-switch-on").textContent=e),i&&(n.querySelector(".e-switch-off").textContent=i)},t.prototype.switchFocusHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.switchMouseUp=function(e){var i=e.target;"touchmove"===e.type&&e.preventDefault(),"touchstart"===e.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===e.type&&i.className.indexOf("e-switch")<0||"touchend"===e.type)&&(this.clickHandler(e),this.rippleTouchHandler("mouseup"),e.preventDefault())},t.prototype.formResetHandler=function(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue},t.prototype.toggle=function(){this.clickHandler()},t.prototype.wireEvents=function(){var e=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),T.add(e,"click",this.clickHandler,this),T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this),T.add(this.element,"mouseup",this.delegateMouseUpHandler,this),T.add(this.element,"keyup",this.delegateKeyUpHandler,this),T.add(e,"mousedown mouseup",this.rippleHandler,this),T.add(e,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&T.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.unWireEvents=function(){var e=this.getWrapper();T.remove(e,"click",this.clickHandler),T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"focusout",this.focusOutHandler),T.remove(this.element,"mouseup",this.delegateMouseUpHandler),T.remove(this.element,"keyup",this.delegateKeyUpHandler),T.remove(e,"mousedown mouseup",this.rippleHandler),T.remove(e,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&T.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Eg([W()],t.prototype,"change",void 0),Eg([W()],t.prototype,"created",void 0),Eg([E(!1)],t.prototype,"checked",void 0),Eg([E("")],t.prototype,"cssClass",void 0),Eg([E(!1)],t.prototype,"disabled",void 0),Eg([E("")],t.prototype,"name",void 0),Eg([E("")],t.prototype,"onLabel",void 0),Eg([E("")],t.prototype,"offLabel",void 0),Eg([E("")],t.prototype,"value",void 0),Eg([ui],t)}(nn);!function(r){var t,e=!0;function n(pe){s(pe.floatLabelType,pe.element),pe.element.addEventListener("focus",function(){var _e=S(this);(_e.classList.contains("e-input-group")||_e.classList.contains("e-outline")||_e.classList.contains("e-filled"))&&_e.classList.add("e-input-focus"),setTimeout(function(){r.calculateWidth(pe.element,_e)},80)}),pe.element.addEventListener("blur",function(){var _e=S(this);(_e.classList.contains("e-input-group")||_e.classList.contains("e-outline")||_e.classList.contains("e-filled"))&&_e.classList.remove("e-input-focus"),setTimeout(function(){r.calculateWidth(pe.element,_e)},80)}),pe.element.addEventListener("input",function(){s(t,pe.element)})}function s(pe,_e){var Tt=_e.value;""!==Tt&&!f(Tt)&&_e.parentElement?_e.parentElement.classList.add("e-valid-input"):"Always"!==pe&&_e.parentElement&&_e.parentElement.classList.remove("e-valid-input")}function o(){var pe=S(this).getElementsByClassName("e-float-text")[0];f(pe)||(N([pe],"e-label-top"),pe.classList.contains("e-label-bottom")&&z([pe],"e-label-bottom"))}function a(){var pe=S(this);if(pe.getElementsByTagName("textarea")[0]?""===pe.getElementsByTagName("textarea")[0].value:""===pe.getElementsByTagName("input")[0].value){var _e=pe.getElementsByClassName("e-float-text")[0];f(_e)||(_e.classList.contains("e-label-top")&&z([_e],"e-label-top"),N([_e],"e-label-bottom"))}}function l(pe){pe.addEventListener("focus",o),pe.addEventListener("blur",a)}function u(pe,_e,Tt){var wi=f(Tt)?ri:Tt;"Auto"===pe.floatLabelType&&l(pe.element),f(_e.container)?(_e.container=L(pe,"e-float-input","e-float-custom-tag","div",wi),pe.element.parentNode&&pe.element.parentNode.insertBefore(_e.container,pe.element)):(f(pe.customTag)||_e.container.classList.add("e-float-custom-tag"),_e.container.classList.add("e-float-input"));var Si=wi("span",{className:"e-float-line"}),pi=wi("label",{className:"e-float-text"});if(!f(pe.element.id)&&""!==pe.element.id&&(pi.id="label_"+pe.element.id.replace(/ /g,"_"),Ue(pe.element,{"aria-labelledby":pi.id})),!f(pe.element.placeholder)&&""!==pe.element.placeholder&&(pi.innerText=B(pe.element.placeholder),pe.element.removeAttribute("placeholder")),!f(pe.properties)&&!f(pe.properties.placeholder)&&""!==pe.properties.placeholder&&(pi.innerText=B(pe.properties.placeholder)),pi.innerText||_e.container.classList.add("e-no-float-label"),_e.container.classList.contains("e-float-icon-left")){var Ar=_e.container.querySelector(".e-input-in-wrap");Ar.appendChild(pe.element),Ar.appendChild(Si),Ar.appendChild(pi)}else _e.container.appendChild(pe.element),_e.container.appendChild(Si),_e.container.appendChild(pi);C(pe.element.value,pi),"Always"===pe.floatLabelType&&(pi.classList.contains("e-label-bottom")&&z([pi],"e-label-bottom"),N([pi],"e-label-top")),"Auto"===pe.floatLabelType&&(pe.element.addEventListener("input",function(wa){C(pe.element.value,pi,pe.element)}),pe.element.addEventListener("blur",function(wa){C(pe.element.value,pi)})),f(pe.element.getAttribute("id"))||pi.setAttribute("for",pe.element.getAttribute("id"))}function d(pe,_e){"Always"===pe&&_e.classList.contains("e-outline")&&_e.classList.add("e-valid-input")}function y(pe,_e,Tt){pe&&!Tt?z([_e],"e-clear-icon-hide"):N([_e],"e-clear-icon-hide")}function C(pe,_e,Tt){void 0===Tt&&(Tt=null),pe?(N([_e],"e-label-top"),_e.classList.contains("e-label-bottom")&&z([_e],"e-label-bottom")):(null==Tt||Tt!==document.activeElement)&&(_e.classList.contains("e-label-top")&&z([_e],"e-label-top"),N([_e],"e-label-bottom"))}function S(pe){var _e=f(pe.parentNode)?pe:pe.parentNode;return _e&&_e.classList.contains("e-input-in-wrap")&&(_e=_e.parentNode),_e}function k(pe,_e,Tt){(null==e||e)&&_e.addEventListener("click",function(wi){pe.classList.contains("e-disabled")||pe.readOnly||(wi.preventDefault(),pe!==document.activeElement&&pe.focus(),pe.value="",N([_e],"e-clear-icon-hide"))}),pe.addEventListener("input",function(wi){y(pe.value,_e)}),pe.addEventListener("focus",function(wi){y(pe.value,_e,pe.readOnly)}),pe.addEventListener("blur",function(wi){setTimeout(function(){N([_e],"e-clear-icon-hide")},200)})}function O(pe,_e){if(S(pe).classList.contains("e-float-input")&&"Auto"===_e){var wi=S(pe).getElementsByClassName("e-float-text")[0];C(pe.value,wi,pe)}}function L(pe,_e,Tt,wi,Si){var Ar,pi=f(Si)?ri:Si;return f(pe.customTag)?Ar=pi(wi,{className:_e}):(Ar=pi(pe.customTag,{className:_e})).classList.add(Tt),Ar.classList.add("e-control-wrapper"),Ar}function B(pe){var _e="";if(!f(pe)&&""!==pe){var Tt=document.createElement("span");Tt.innerHTML='<input  placeholder="'+pe+'"/>',_e=Tt.children[0].placeholder}return _e}function G(pe,_e,Tt){!f(Tt)&&""!==Tt&&z(_e,Tt.split(" ")),!f(pe)&&""!==pe&&N(_e,pe.split(" "))}function ae(pe,_e){var Tt=pe.clientWidth-parseInt(getComputedStyle(pe,null).getPropertyValue("padding-left"));f(_e.getElementsByClassName("e-float-text-content")[0])||(_e.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&_e.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(Tt<_e.getElementsByClassName("e-float-text-content")[0].clientWidth||Tt===_e.getElementsByClassName("e-float-text-content")[0].clientWidth)&&_e.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function xe(pe,_e){pe=B(pe);var Tt=S(_e);Tt.classList.contains("e-float-input")?f(pe)||""===pe?(Tt.classList.add("e-no-float-label"),Tt.getElementsByClassName("e-float-text-content")[0]?Tt.getElementsByClassName("e-float-text")[0].children[0].textContent="":Tt.getElementsByClassName("e-float-text")[0].textContent=""):(Tt.getElementsByClassName("e-float-text-content")[0]?Tt.getElementsByClassName("e-float-text")[0].children[0].textContent=pe:Tt.getElementsByClassName("e-float-text")[0].textContent=pe,Tt.classList.remove("e-no-float-label"),_e.removeAttribute("placeholder")):f(pe)||""===pe?_e.removeAttribute("placeholder"):Ue(_e,{placeholder:pe})}function Le(pe,_e,Tt){pe?Ue(_e,{readonly:""}):_e.removeAttribute("readonly"),f(Tt)||O(_e,Tt)}function oe(pe,_e){pe?N(_e,"e-rtl"):z(_e,"e-rtl")}function Ae(pe,_e,Tt,wi){var Si={disabled:"disabled","aria-disabled":"true"},pi=!f(wi);pe?(_e.classList.remove("e-disabled"),ge(Si,_e),pi&&z([wi],"e-disabled")):(_e.classList.add("e-disabled"),Re(Si,_e),pi&&N([wi],"e-disabled")),f(Tt)||O(_e,Tt)}function De(pe,_e,Tt,wi,Si){var pi=f(Si)?ri:Si;pe?Tt.clearButton=function I(pe,_e,Tt,wi){var pi=(f(wi)?ri:wi)("span",{className:"e-clear-icon"}),Ar=_e.container;return f(Tt)?(_e.container.classList.contains("e-float-input")?_e.container.querySelector(".e-float-text"):pe).insertAdjacentElement("afterend",pi):Ar.appendChild(pi),!f(Ar)&&Ar.classList.contains("e-float-input")&&N([Ar],"e-input-group"),N([pi],"e-clear-icon-hide"),k(pe,pi),pi.setAttribute("aria-label","close"),pi}(_e,Tt,wi,pi):(He(Tt.clearButton),Tt.clearButton=null)}function ge(pe,_e){for(var Tt=0,wi=Object.keys(pe);Tt<wi.length;Tt++){var Si=wi[Tt],pi=S(_e);"disabled"===Si&&_e.classList.remove("e-disabled"),"disabled"===Si&&pi.classList.contains("e-input-group")&&pi.classList.remove("e-disabled"),"placeholder"===Si&&pi.classList.contains("e-float-input")?pi.getElementsByClassName("e-float-text")[0].textContent="":_e.removeAttribute(Si)}}function Re(pe,_e){for(var Tt=0,wi=Object.keys(pe);Tt<wi.length;Tt++){var Si=wi[Tt],pi=S(_e);"disabled"===Si&&_e.classList.add("e-disabled"),"disabled"===Si&&pi.classList.contains("e-input-group")&&pi.classList.add("e-disabled"),"placeholder"===Si&&pi.classList.contains("e-float-input")?pi.getElementsByClassName("e-float-text")[0].textContent=pe[Si]:_e.setAttribute(Si,pe[Si])}}function Oe(pe,_e){if(pe.classList.contains("e-outline")&&pe.getElementsByClassName("e-float-text")[0]){var Tt=_e("span",{className:"e-float-text-content"});Tt.innerHTML=pe.getElementsByClassName("e-float-text")[0].innerHTML,pe.getElementsByClassName("e-float-text")[0].innerHTML="",pe.getElementsByClassName("e-float-text")[0].appendChild(Tt)}}function Gt(pe,_e,Tt){var wi=[];wi.push(Tt);var Si=f(Tt)?_e.querySelectorAll(".e-input-group-icon"):wi;if(pe&&Si.length>0)for(var pi=0;pi<Si.length;pi++)Si[pi].addEventListener("mousedown",ei,!1),Si[pi].addEventListener("mouseup",Ci,!1);else if(Si.length>0)for(pi=0;pi<Si.length;pi++)Si[pi].removeEventListener("mousedown",ei,this),Si[pi].removeEventListener("mouseup",Ci,this)}function ei(){for(var _e=this.parentElement;!_e.classList.contains("e-input-group");)_e=_e.parentElement;!function Yt(pe,_e){!pe.classList.contains("e-disabled")&&!pe.querySelector("input").readOnly&&_e.classList.add("e-input-btn-ripple")}(_e,this)}function Ci(){var pe=this;setTimeout(function(){pe.classList.remove("e-input-btn-ripple")},500)}function Ri(pe,_e){var Tt=_e("span",{className:pe});return Tt.classList.add("e-input-group-icon"),Tt}function oi(pe,_e,Tt,wi){var Si=f(wi)?ri:wi,pi=Ri(pe,Si);_e.classList.add("e-float-icon-left");var Ar=_e.querySelector(".e-input-in-wrap");if(f(Ar)){Ar=Si("span",{className:"e-input-in-wrap"}),Tt.parentNode.insertBefore(Ar,Tt);var wa=_e.querySelectorAll(Tt.tagName+" ~ *");Ar.appendChild(Tt);for(var Fo=0;Fo<wa.length;Fo++)Ar.appendChild(wa[Fo])}return Ar.parentNode.insertBefore(pi,Ar),_e.classList.contains("e-input-group")||_e.classList.add("e-input-group"),Gt(!0,_e,pi),pi}function sr(pe,_e,Tt){var Si=Ri(pe,f(Tt)?ri:Tt);return _e.classList.contains("e-input-group")||_e.classList.add("e-input-group"),(_e.classList.contains("e-float-icon-left")?_e.querySelector(".e-input-in-wrap"):_e).appendChild(Si),Gt(!0,_e,Si),Si}function ds(pe,_e){"hidden"===_e.type?pe.classList.add("e-hidden"):pe.classList.contains("e-hidden")&&pe.classList.remove("e-hidden")}r.createInput=function i(pe,_e){var Tt=f(_e)?ri:_e,wi={container:null,buttons:[],clearButton:null};if(t=pe.floatLabelType,e=pe.bindClearAction,f(pe.floatLabelType)||"Never"===pe.floatLabelType?(wi.container=L(pe,"e-input-group","e-input-custom-tag","span",Tt),pe.element.parentNode.insertBefore(wi.container,pe.element),N([pe.element],"e-input"),wi.container.appendChild(pe.element)):u(pe,wi,Tt),n(pe),!f(pe.properties)&&!f(pe.properties.showClearButton)&&pe.properties.showClearButton&&"TEXTAREA"!==pe.element.tagName&&(De(pe.properties.showClearButton,pe.element,wi,!0,Tt),wi.clearButton.setAttribute("role","button"),wi.container.classList.contains("e-float-input")&&N([wi.container],"e-input-group")),!f(pe.buttons)&&"TEXTAREA"!==pe.element.tagName)for(var Si=0;Si<pe.buttons.length;Si++)wi.buttons.push(sr(pe.buttons[Si],wi.container,Tt));return!f(pe.element)&&"TEXTAREA"===pe.element.tagName&&N([wi.container],"e-multi-line-input"),ds(wi.container,pe.element),wi=function m(pe,_e){if(!f(pe.properties))for(var Tt=0,wi=Object.keys(pe.properties);Tt<wi.length;Tt++)switch(wi[Tt]){case"cssClass":G(pe.properties.cssClass,[_e.container]),d(pe.floatLabelType,_e.container);break;case"enabled":Ae(pe.properties.enabled,pe.element,pe.floatLabelType,_e.container);break;case"enableRtl":oe(pe.properties.enableRtl,[_e.container]);break;case"placeholder":xe(pe.properties.placeholder,pe.element);break;case"readonly":Le(pe.properties.readonly,pe.element)}return _e}(pe,wi),Oe(wi.container,Tt),wi},r.bindInitialEvent=n,r.wireFloatingEvents=l,r.wireClearBtnEvents=k,r.setValue=function j(pe,_e,Tt,wi){if(_e.value=pe,ae(_e,_e.parentElement),!f(Tt)&&"Auto"===Tt&&O(_e,Tt),!f(wi)&&wi){var Si=S(_e);if(!f(Si)){var pi=Si.getElementsByClassName("e-clear-icon")[0];f(pi)||(_e.value&&Si.classList.contains("e-input-focus")?z([pi],"e-clear-icon-hide"):N([pi],"e-clear-icon-hide"))}}s(Tt,_e)},r.setCssClass=G,r.calculateWidth=ae,r.setWidth=function ve(pe,_e){"number"==typeof pe?_e.style.width=ot(pe):"string"==typeof pe&&(_e.style.width=pe.match(/px|%|em/)?pe:ot(pe)),ae(_e.firstChild,_e)},r.setPlaceholder=xe,r.setReadonly=Le,r.setEnableRtl=oe,r.setEnabled=Ae,r.setClearButton=De,r.removeAttributes=ge,r.addAttributes=Re,r.removeFloating=function We(pe){var _e=pe.container;if(!f(_e)&&_e.classList.contains("e-float-input")){var Tt=_e.querySelector("textarea")?_e.querySelector("textarea"):_e.querySelector("input"),wi=_e.querySelector(".e-float-text").textContent,Si=null!==_e.querySelector(".e-clear-icon");ce(_e.querySelector(".e-float-line")),ce(_e.querySelector(".e-float-text")),li(_e,["e-input-group"],["e-float-input"]),function h(pe){pe.removeEventListener("focus",o),pe.removeEventListener("blur",a)}(Tt),Ue(Tt,{placeholder:wi}),Tt.classList.add("e-input"),!Si&&"INPUT"===Tt.tagName&&Tt.removeAttribute("required")}},r.addFloating=function Se(pe,_e,Tt,wi){var Si=f(wi)?ri:wi,pi=U(pe,".e-input-group");if(t=_e,"Never"!==_e){var Ar=pi.tagName,wa={element:pe,floatLabelType:_e,customTag:Ar="DIV"!==Ar&&"SPAN"!==Ar?Ar:null,properties:{placeholder:Tt}},Fo=pi.querySelector(".e-clear-icon"),im={container:pi};pe.classList.remove("e-input"),u(wa,im,Si),Oe(im.container,Si),ae(wa.element,im.container);var Wf=pi.classList.contains("e-float-icon-left");if(f(Fo)&&(Fo=Wf?pi.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):pi.querySelector(".e-input-group-icon")),f(Fo))Wf&&(Fo=pi.querySelector(".e-input-group-icon")),f(Fo)&&pi.classList.remove("e-input-group");else{var eZ=pi.querySelector(".e-float-line"),tZ=pi.querySelector(".e-float-text"),Aj=Wf?pi.querySelector(".e-input-in-wrap"):pi;Aj.insertBefore(pe,Fo),Aj.insertBefore(eZ,Fo),Aj.insertBefore(tZ,Fo)}}d(_e,pe.parentElement)},r.createSpanElement=Oe,r.setRipple=function Ve(pe,_e){for(var Tt=0;Tt<_e.length;Tt++)Gt(pe,_e[Tt].container)},r.addIcon=function Ji(pe,_e,Tt,wi,Si){var pi="string"==typeof _e?_e.split(","):_e;if("append"===pe.toLowerCase())for(var Ar=0,wa=pi;Ar<wa.length;Ar++)sr(wa[Ar],Tt,Si);else for(var im=0,Wf=pi;im<Wf.length;im++)oi(Wf[im],Tt,wi,Si);Tt.getElementsByClassName("e-input-group-icon")[0]&&Tt.getElementsByClassName("e-float-text-overflow")[0]&&Tt.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},r.prependSpan=oi,r.appendSpan=sr,r.validateInputType=ds}(ke||(ke={}));var fn,vve=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},rW="e-input-group-icon",sW="e-spin-up",oW="e-error",hx="increment",iR="decrement",Cve=new RegExp("^(-)?(\\d*)$"),HQ="e-input-focus",VQ=["title","style","class"],ux=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return vve(t,r),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=ie("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),z([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=U(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++){var s=this.element.attributes[n].nodeName;"id"!==s&&"class"!==s?(i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(a){return 0!==a.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,jt("ej2_instances",e,this.element)}Ue(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new as("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Gi("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.numericOptions)||void 0===this.numericOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.numericOptions)||void 0===this.numericOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(f(this.numericOptions)||void 0===this.numericOptions.value||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties(jt(o,h,{}),!e)}break;case"min":if(f(this.numericOptions)||void 0===this.numericOptions.min||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties(jt(o,u,{}),!e)}break;case"max":if(f(this.numericOptions)||void 0===this.numericOptions.max||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==d&&!isNaN(d)&&this.setProperties(jt(o,d,{}),!e)}break;case"step":if(f(this.numericOptions)||void 0===this.numericOptions.step||e){var m=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==m&&!isNaN(m)&&this.setProperties(jt(o,m,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var y=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==y&&!isNaN(y)||"value"===o)&&this.setProperties(jt(o,y,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new qr(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==ie("currency",this)&&(jt("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getNumericValidClassList(this.cssClass));var i=ke.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&Ue(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),Ue(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&Ue(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var n=0;n<this.element.attributes.length;n++)i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name);for(var s=0,o=Object.keys(i);s<o.length;s++){var a=o[s];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,i[a])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];VQ.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(VQ.indexOf(n)>-1)if("class"===n){var s=this.getNumericValidClassList(this.htmlAttributes[n]);""!==s&&N([this.container],s.split(" "))}else if("style"===n){var o=this.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.container.setAttribute(n,o)}else this.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.setElementWidth=function(e){f(e)||("number"==typeof e?this.container.style.width=ot(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:ot(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=ke.appendSpan(rW+" e-spin-down",this.container,this.createElement),Ue(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=ke.appendSpan(rW+" "+sW,this.container,this.createElement),Ue(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&Ue(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&Ue(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var n=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(n,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?z([this.container],oW):N([this.container],oW),Ue(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",U(this.element,"form")){var n=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},t.prototype.setSpinButton=function(){f(this.spinDown)||Ue(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),f(this.spinUp)||Ue(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"blur",this.focusOutHandler,this),T.add(this.element,"keydown",this.keyDownHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"input",this.inputHandler,this),T.add(this.element,"keypress",this.keyPressHandler,this),T.add(this.element,"change",this.changeHandler,this),T.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&T.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){T.add(this.spinUp,Q.touchStartEvent,this.mouseDownOnSpinner,this),T.add(this.spinDown,Q.touchStartEvent,this.mouseDownOnSpinner,this),T.add(this.spinUp,Q.touchEndEvent,this.mouseUpOnSpinner,this),T.add(this.spinDown,Q.touchEndEvent,this.mouseUpOnSpinner,this),T.add(this.spinUp,Q.touchMoveEvent,this.touchMoveOnSpinner,this),T.add(this.spinDown,Q.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"blur",this.focusOutHandler),T.remove(this.element,"keyup",this.keyUpHandler),T.remove(this.element,"input",this.inputHandler),T.remove(this.element,"keydown",this.keyDownHandler),T.remove(this.element,"keypress",this.keyPressHandler),T.remove(this.element,"change",this.changeHandler),T.remove(this.element,"paste",this.pasteHandler),this.formEle&&T.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){T.remove(this.spinUp,Q.touchStartEvent,this.mouseDownOnSpinner),T.remove(this.spinDown,Q.touchStartEvent,this.mouseDownOnSpinner),T.remove(this.spinUp,Q.touchEndEvent,this.mouseUpOnSpinner),T.remove(this.spinDown,Q.touchEndEvent,this.mouseUpOnSpinner),T.remove(this.spinUp,Q.touchMoveEvent,this.touchMoveOnSpinner),T.remove(this.spinDown,Q.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),po(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var n=e.element.selectionStart,s=e.element.selectionStart-1,a=e.element.value.split(""),h=ie("decimal",X0(e.locale)),u=h.charCodeAt(0);" "===e.element.value[s]&&e.element.selectionStart>0&&!i?(f(e.prevVal)?e.element.value=e.element.value.trim():0!==s?e.element.value=e.prevVal:0===s&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===u||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==u)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===u||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==u)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=f(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&Q.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,U(this.element,"form")){var s=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),s.dispatchEvent(o)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||n)&&Q.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==ie("decimal",X0(this.locale))&&this.element.value!==ie("minusSign",X0(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(a=this.value);var u={event:e,value:null===a||isNaN(a)?null:a,previousValue:null===l||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",u)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(hx,e);break;case 40:e.preventDefault(),this.action(iR,e)}},t.prototype.performAction=function(e,i,n){(null===e||isNaN(e))&&(e=0);var s=n===hx?e+i:e-i;return s=this.correctRounding(e,i,s),this.strictMode?this.trimValue(s):s},t.prototype.correctRounding=function(e,i,n){var s=new RegExp("[,.](.*)"),o=s.test(e.toString()),a=s.test(i.toString());if(o||a){var l=o?s.exec(e.toString())[0].length:0,h=a?s.exec(i.toString())[0].length:0,u=Math.max(l,h);return this.roundValue(n,u)}return n},t.prototype.roundValue=function(e,i){i=i||0;var n=Math.pow(10,i);return Math.round(e*=n)/n},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),null!==e&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){jt(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),Ue(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){ke.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,n=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(n.test(s)){var o=n.exec(s);f(o)||(s=e.toFixed(Math.min(parseInt(o[1],10),20)))}var a=s.split(".")[1];return i=a&&a.length?a.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var n=e,s=i||0,o=n.toString().split("e"),a=(n=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+s:s)))).toString().split("e");return n=Number(a[0]+"e"+(a[1]?Number(a[1])-s:-s)),Number(n.toFixed(s))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!Q.isDevice&&"11.0"===Q.info.version&&13===e.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var n=String.fromCharCode(e.which),s=ie("decimal",X0(this.locale)),o="NumpadDecimal"===e.code&&n!==s;o&&(n=s);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+n+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(o){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var i=ie("decimal",X0(this.locale)),n="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?Cve:(this.decimals&&this.validateDecimalOnType&&(n="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+n+")?)|("+i+"\\d"+n+")))?$"))},t.prototype.mouseWheel=function(e){var i;e.preventDefault(),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i>0?this.action(hx,e):i<0&&this.action(iR,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,z([this.container],oW),this.prevValue=this.value,this.value||0===this.value){var n=this.formatNumber();this.setElementValue(n),this.isPrevFocused||(Q.isDevice||"11.0"!==Q.info.version?setTimeout(function(){i.element.setSelectionRange(0,n.length)},Q.isDevice&&Q.isIos?600:0):this.element.setSelectionRange(0,n.length))}Q.isDevice||T.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),Q.isDevice){var n=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){i.setElementValue(n,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),Q.isDevice||T.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(U(this.element,"form")){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var s=e.currentTarget,o=s.classList.contains(sW)?hx:iR;T.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,e)},150),T.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if("touchmove"===e.type){var n=e.touches;i=n.length&&document.elementFromPoint(n[0].pageX,n[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(rW)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),Q.isDevice||(this.isPrevFocused=!1)),Q.isDevice||e.preventDefault(),this.getElementData(e)){var i=e.currentTarget,n=i.classList.contains(sW)?hx:iR;if(T.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(n,e),this.isCalled=!1,T.remove(document,"mouseup",this.mouseUpClick),U(this.element,"form")){var o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},t.prototype.floatLabelTypeUpdate=function(){ke.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),ke.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,T.remove(this.spinUp,"mouseleave",this.mouseUpClick),T.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,hx)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,iR)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),ce(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),ce(this.spinUp),ce(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),ce(this.container),r.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),N([this.container],[HQ]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),z([this.container],[HQ]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"width":this.setElementWidth(e.width),ke.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":ke.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":ke.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":ke.setReadonly(e.readonly,this.element),this.readonly?Ue(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),ke.validateInputType(this.container,this.element);break;case"placeholder":ke.setPlaceholder(e.placeholder,this.element),ke.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":jt(o,ie(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ke.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=ie(o,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(o,a);break;case"currencyCode":var l=ie(o,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":jt(o,ie(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){ke.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(ce(this.spinUp),ce(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},fo([E("")],t.prototype,"cssClass",void 0),fo([E(null)],t.prototype,"value",void 0),fo([E(-Number.MAX_VALUE)],t.prototype,"min",void 0),fo([E(Number.MAX_VALUE)],t.prototype,"max",void 0),fo([E(1)],t.prototype,"step",void 0),fo([E(null)],t.prototype,"width",void 0),fo([E(null)],t.prototype,"placeholder",void 0),fo([E({})],t.prototype,"htmlAttributes",void 0),fo([E(!0)],t.prototype,"showSpinButton",void 0),fo([E(!1)],t.prototype,"readonly",void 0),fo([E(!0)],t.prototype,"enabled",void 0),fo([E(!1)],t.prototype,"showClearButton",void 0),fo([E(!1)],t.prototype,"enablePersistence",void 0),fo([E("n2")],t.prototype,"format",void 0),fo([E(null)],t.prototype,"decimals",void 0),fo([E(null)],t.prototype,"currency",void 0),fo([E(null)],t.prototype,"currencyCode",void 0),fo([E(!0)],t.prototype,"strictMode",void 0),fo([E(!1)],t.prototype,"validateDecimalOnType",void 0),fo([E("Never")],t.prototype,"floatLabelType",void 0),fo([W()],t.prototype,"created",void 0),fo([W()],t.prototype,"destroyed",void 0),fo([W()],t.prototype,"change",void 0),fo([W()],t.prototype,"focus",void 0),fo([W()],t.prototype,"blur",void 0),fo([ui],t)}(nn),$ve=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),oh=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},cx={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},rR=(()=>(function(r){r[r.Message=0]="Message",r[r.Label=1]="Label"}(rR||(rR={})),rR))(),Yve=function(r){function t(i,n){var s=r.call(this,n,i)||this;if(s.validated=[],s.errorRules=[],s.allowSubmit=!1,s.required="required",s.infoElement=null,s.inputElement=null,s.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",s.localyMessage={},s.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof s.rules>"u"&&(s.rules={}),s.l10n=new as("formValidator",s.defaultMessages,s.locale),s.locale&&s.localeFunc(),Ym.on("notifyExternalChange",s.afterLocalization,s),i="string"==typeof i?le(i,document):i,null!=s.element)return s.element.setAttribute("novalidate",""),s.inputElements=Ze(s.selectQuery,s.element),s.createHTML5Rules(),s.wireEvents(),s}var e;return $ve(t,r),e=t,t.prototype.addRules=function(i,n){i&&(this.rules.hasOwnProperty(i)?de(this.rules[i],n,{}):this.rules[i]=n)},t.prototype.removeRules=function(i,n){if(i||n)if(this.rules[i]&&!n)delete this.rules[i];else{if(f(this.rules[i]&&n))return;for(var s=0;s<n.length;s++)delete this.rules[i][n[s]]}else this.rules={}},t.prototype.validate=function(i){var n=Object.keys(this.rules);if(i&&n.length)return this.validateRules(i),-1!==n.indexOf(i)&&0===this.errorRules.filter(function(l){return l.name===i}).length;this.errorRules=[];for(var s=0,o=n;s<o.length;s++)this.validateRules(o[s]);return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(i){return this.inputElement=le('[name="'+i+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var n=0,s=Ze("."+this.errorClass+", ."+this.validClass,this.element);n<s.length;n++)ce(s[n]);r.prototype.destroy.call(this),Ym.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)"locale"===o[s]&&this.localeFunc()},t.prototype.localeFunc=function(){for(var i=0,n=Object.keys(this.defaultMessages);i<n.length;i++){var s=n[i];this.l10n.setLocale(this.locale);var o=this.l10n.getConstant(s);this.localyMessage[s]=o}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(i){this.locale=i.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=Ze(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var n=0,s=Ze(this.selectQuery,this.element);n<s.length;n++){var a=s[n];a.removeAttribute("aria-invalid"),a.classList.remove(this.errorClass),a.name.length>0&&(this.getInputElement(a.name),this.getErrorElement(a.name),this.hideMessage(a.name)),a.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var i=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],n=["hidden","email","url","date","number","tel"],s=0,o=this.inputElements;s<o.length;s++){for(var a=o[s],l={},h=0,u=i;h<u.length;h++){var d=u[h];if(null!==a.getAttribute(d))switch(d){case"required":this.defRule(a,l,d,a.required);break;case"data-validation":d=a.getAttribute(d),this.defRule(a,l,d,!0);break;case"type":-1!==n.indexOf(a.type)&&this.defRule(a,l,a.type,!0);break;case"rangeLength":case"range":this.defRule(a,l,d,JSON.parse(a.getAttribute(d)));break;case"equalTo":var m=a.getAttribute(d);this.defRule(a,l,d,m);break;default:"true"===a.getAttribute("data-val")?this.annotationRule(a,l,d,a.getAttribute(d)):this.defRule(a,l,d,a.getAttribute(d))}}0!==Object.keys(l).length&&this.addRules(a.name,l)}},t.prototype.annotationRule=function(i,n,s,o){var a=s.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=a[a.length-1],u=a[a.length-2];if(-1!==l.indexOf(h))switch(h){case"required":this.defRule(i,n,"required",o);break;case"creditcard":this.defRule(i,n,"creditcard",o);break;case"phone":this.defRule(i,n,"tel",o)}else if(-1!==l.indexOf(u))switch(u){case"maxlength":this.defRule(i,n,"maxLength",o);break;case"minlength":this.defRule(i,n,"minLength",o);break;case"range":var d=i.getAttribute("data-val-range-min"),m=i.getAttribute("data-val-range-max");this.defRule(i,n,"range",[d,m]);break;case"equalto":var y=i.getAttribute(s).split(".");this.defRule(i,n,"equalTo",y[y.length-1]);break;case"regex":this.defRule(i,n,"regex",o)}},t.prototype.defRule=function(i,n,s,o){var h,a=i.getAttribute("data-"+s+"-message"),l=i.getAttribute("data-val-"+s);this.rules[i.name]&&"validateHidden"!==s&&"hidden"!==s&&(this.getInputElement(i.name),h=this.getErrorMessage(this.rules[i.name][s],s)),a?o=[o,a]:l?o=[o,l]:h&&(o=[o,h]),n[s]=o},t.prototype.wireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++){var s=n[i];e.isCheckable(s)?T.add(s,"click",this.clickHandler,this):"SELECT"===s.tagName?T.add(s,"change",this.changeHandler,this):(T.add(s,"focusout",this.focusOutHandler,this),T.add(s,"keyup",this.keyUpHandler,this))}T.add(this.element,"submit",this.submitHandler,this),T.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++)T.clearEvents(n[i]);T.remove(this.element,"submit",this.submitHandler),T.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(i){this.trigger("focusout",i);var n=i.target;this.rules[n.name]&&(this.rules[n.name][this.required]||n.value.length>0?this.validate(n.name):-1===this.validated.indexOf(n.name)&&this.validated.push(n.name))},t.prototype.keyUpHandler=function(i){this.trigger("keyup",i);var n=i.target;9===i.which&&(!this.rules[n.name]||this.rules[n.name]&&!this.rules[n.name][this.required])||-1!==this.validated.indexOf(n.name)&&this.rules[n.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(i.which)&&this.validate(n.name)},t.prototype.clickHandler=function(i){this.trigger("click",i);var n=i.target;"submit"!==n.type?this.validate(n.name):null!==n.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(i){this.trigger("change",i),this.validate(i.target.name)},t.prototype.submitHandler=function(i){this.trigger("submit",i),this.allowSubmit||this.validate()?this.allowSubmit=!1:i.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(i){if(this.rules[i]){var n=Object.keys(this.rules[i]),s=!1,o=!1,a=n.indexOf("validateHidden"),l=n.indexOf("hidden");if(this.getInputElement(i),-1!==l&&(s=!0),-1!==a&&(o=!0),!(!s||s&&o))return;-1!==a&&n.splice(a,1),-1!==l&&n.splice(l-1,1),this.getErrorElement(i);for(var h=0,u=n;h<u.length;h++){var d=u[h],m=this.getErrorMessage(this.rules[i][d],d),y={name:i,message:m},C={inputName:i,element:this.inputElement,message:m};if(!this.isValid(i,d)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(i),this.errorRules.push(y),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(y):this.createErrorElement(i,y.message,this.inputElement),C.errorElement=this.infoElement,C.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(i,C),this.trigger("validationComplete",C),"required"===d&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(i),C.status="success",this.trigger("validationComplete",C)}}},t.prototype.optionalValidationStatus=function(i,n){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),n.status="",this.hideMessage(i))},t.prototype.isValid=function(i,n){var s=this.rules[i][n],a=this.rules[i][n],l={value:this.inputElement.value,param:s instanceof Array&&"string"==typeof s[1]?s[0]:s,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",l),!l.param&&"required"===n||(a&&"function"==typeof a[0]?a[0].call(this,{element:this.inputElement,value:this.inputElement.value}):e.isCheckable(this.inputElement)?"required"!==n||Ze('input[name="'+i+'"]:checked',this.element).length>0:e.checkValidator[n](l))},t.prototype.getErrorMessage=function(i,n){var s=this.inputElement.getAttribute("data-"+n+"-message")?this.inputElement.getAttribute("data-"+n+"-message"):i instanceof Array&&"string"==typeof i[1]?i[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[n]:this.defaultMessages[n],o=s.match(/{(\d)}/g);if(!f(o))for(var a=0;a<o.length;a++)s=s.replace(o[a],i instanceof Array?i[a]:i);return s},t.prototype.createErrorElement=function(i,n,s){var o=ri(this.errorElement,{className:this.errorClass,innerHTML:n,attrs:{for:i}});this.errorOption===rR.Message&&(o.classList.remove(this.errorClass),o.classList.add("e-message"),o=ri(this.errorContainer,{className:this.errorClass,innerHTML:o.outerHTML})),o.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+s.id+'"]')?this.element.querySelector('[data-valmsg-for="'+s.id+'"]').appendChild(o):!0===s.hasAttribute("data-msg-containerid")?le("#"+s.getAttribute("data-msg-containerid"),this.element).appendChild(o):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,o):this.inputElement.parentNode.insertBefore(o,this.inputElement.nextSibling),o.style.display="block",this.getErrorElement(i),this.validated.push(i),this.checkRequired(i)},t.prototype.getErrorElement=function(i){return this.infoElement=le(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=le(this.errorElement+"."+this.errorClass+'[for="'+i+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(i){for(var n=0;n<this.errorRules.length;n++)this.errorRules[n].name===i&&this.errorRules.splice(n,1)},t.prototype.showMessage=function(i){this.infoElement.style.display="block",this.infoElement.innerHTML=i.message,this.checkRequired(i.name)},t.prototype.hideMessage=function(i){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(i),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(i){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(i))},t.isCheckable=function(i){var n=i.getAttribute("type");return n&&("checkbox"===n||"radio"===n||"submit"===n)},t.checkValidator={required:function(i){return isNaN(Date.parse(i.value))?i.value.toString().length>0:!isNaN(new Date(i.value).getTime())},email:function(i){return cx.EMAIL.test(i.value)},url:function(i){return cx.URL.test(i.value)},dateIso:function(i){return cx.DATE_ISO.test(i.value)},tel:function(i){return cx.PHONE.test(i.value)},creditcard:function(i){return cx.CREDITCARD.test(i.value)},number:function(i){return!isNaN(Number(i.value))&&-1===i.value.indexOf(" ")},digits:function(i){return cx.DIGITS.test(i.value)},maxLength:function(i){return i.value.length<=i.param},minLength:function(i){return i.value.length>=i.param},rangeLength:function(i){var n=i.param;return i.value.length>=n[0]&&i.value.length<=n[1]},range:function(i){var n=i.param;return!isNaN(Number(i.value))&&Number(i.value)>=n[0]&&Number(i.value)<=n[1]},date:function(i){return!isNaN(new Date(i.value).getTime())},max:function(i){return isNaN(Number(i.value))?new Date(i.value).getTime()<=new Date(JSON.parse(JSON.stringify(i.param))).getTime():+i.value<=i.param},min:function(i){if(isNaN(Number(i.value))){if(-1!==i.value.indexOf(",")){var n=i.value.replace(/,/g,"");return parseFloat(n)>=i.param}return new Date(i.value).getTime()>=new Date(JSON.parse(JSON.stringify(i.param))).getTime()}return+i.value>=i.param},regex:function(i){return new RegExp(i.param).test(i.value)},equalTo:function(i){var n=i.formElement.querySelector("#"+i.param);return i.param=n.value,i.param===i.value}},oh([E("")],t.prototype,"locale",void 0),oh([E("e-hidden")],t.prototype,"ignore",void 0),oh([E()],t.prototype,"rules",void 0),oh([E("e-error")],t.prototype,"errorClass",void 0),oh([E("e-valid")],t.prototype,"validClass",void 0),oh([E("label")],t.prototype,"errorElement",void 0),oh([E("div")],t.prototype,"errorContainer",void 0),oh([E(rR.Label)],t.prototype,"errorOption",void 0),oh([W()],t.prototype,"focusout",void 0),oh([W()],t.prototype,"keyup",void 0),oh([W()],t.prototype,"click",void 0),oh([W()],t.prototype,"change",void 0),oh([W()],t.prototype,"submit",void 0),oh([W()],t.prototype,"validationBegin",void 0),oh([W()],t.prototype,"validationComplete",void 0),oh([W()],t.prototype,"customPlacement",void 0),e=oh([ui],t)}(Jp),cye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tl=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},RJ="e-input-focus",DW=["title","style","class"],MJ=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=e,n}return cye(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"floatLabelType":ke.removeFloating(this.textboxWrapper),ke.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ke.setWidth(e.width,this.textboxWrapper.container);break;case"value":var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(f(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&f(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),ke.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ke.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),ke.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(ke.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ke.setPlaceholder(this.placeholder,this.respectiveElement),ke.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"locale":this.globalize=new qr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=U(this.element,"form"),f(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=ie("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input"),n=0;n<this.element.attributes.length;n++)"id"!==(s=this.element.attributes[n].nodeName)&&"class"!==s?(i.setAttribute(s,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML,"name"===s&&this.element.removeAttribute("name")):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(l){return 0!==l.indexOf("ng-")}).join(" "));this.element.appendChild(i),this.element=i,jt("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),(f(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new qr(this.locale),this.l10n=new as("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Gi("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Gi("textarea"));var a=["placeholder","disabled","value","readonly","type","autocomplete"];for(n=0;n<this.element.attributes.length;n++){var s;this.element.hasAttribute(s=this.element.attributes[n].nodeName)&&DW.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[n].nodeValue),a.indexOf(s)<0&&(this.element.removeAttribute(s),n--))}}},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(f(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(f(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":(f(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ke.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),f(this.value)||(ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),f(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!f(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ke.setWidth(this.width,this.textboxWrapper.container),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(DW.indexOf(n)>-1)if("class"===n){var s=this.getInputValidClassList(this.htmlAttributes[n]);""!==s&&N([this.textboxWrapper.container],s.split(" "))}else if("style"===n){var o=this.textboxWrapper.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.textboxWrapper.container.setAttribute(n,o)}else this.textboxWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];DW.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(i))},t.prototype.getInputValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){T.add(this.respectiveElement,"focus",this.focusHandler,this),T.add(this.respectiveElement,"blur",this.focusOutHandler,this),T.add(this.respectiveElement,"input",this.inputHandler,this),T.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&T.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&T.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");f(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=i},t.prototype.resetForm=function(){if(this.resetValue(this.isAngular?"":this.initialValue),!f(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!f(e)&&"Always"!==this.floatLabelType&&(f(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.focusOutHandler=function(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.inputHandler=function(e){var n={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",n),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,i){var n={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",n),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===Q.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?T.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):T.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(ke.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),U(this.element,"form"))){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.unWireEvents=function(){T.remove(this.respectiveElement,"focus",this.focusHandler),T.remove(this.respectiveElement,"blur",this.focusOutHandler),T.remove(this.respectiveElement,"input",this.inputHandler),T.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&T.remove(this.formElement,"reset",this.resetForm),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&T.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(ce(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),f(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),ce(this.textboxWrapper.container)),this.textboxWrapper=null,r.prototype.destroy.call(this)},t.prototype.addIcon=function(e,i){ke.addIcon(e,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!1},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!0},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"class"===s?this.respectiveElement.classList.add(e[s]):"placeholder"===s?(this.setProperties({placeholder:e[s]},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(s,e[s])}},t.prototype.removeAttributes=function(e){for(var i=0,n=e;i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!0},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!1},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===s?(this.setProperties({placeholder:null},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(s)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&N([this.textboxWrapper.container],[RJ]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&z([this.textboxWrapper.container],[RJ]))},tl([E("text")],t.prototype,"type",void 0),tl([E(!1)],t.prototype,"readonly",void 0),tl([E(null)],t.prototype,"value",void 0),tl([E("Never")],t.prototype,"floatLabelType",void 0),tl([E("")],t.prototype,"cssClass",void 0),tl([E(null)],t.prototype,"placeholder",void 0),tl([E("on")],t.prototype,"autocomplete",void 0),tl([E({})],t.prototype,"htmlAttributes",void 0),tl([E(!1)],t.prototype,"multiline",void 0),tl([E(!0)],t.prototype,"enabled",void 0),tl([E(!1)],t.prototype,"showClearButton",void 0),tl([E(!1)],t.prototype,"enablePersistence",void 0),tl([E(null)],t.prototype,"width",void 0),tl([W()],t.prototype,"created",void 0),tl([W()],t.prototype,"destroyed",void 0),tl([W()],t.prototype,"change",void 0),tl([W()],t.prototype,"blur",void 0),tl([W()],t.prototype,"focus",void 0),tl([W()],t.prototype,"input",void 0),tl([ui],t)}(nn),cn={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Vl(r,t){var e={};if(f(r)||"string"==typeof r||"number"==typeof r||!f(r.isHeader))return r;for(var i=0,n=Object.keys(t);i<n.length;i++){var o=t[n[i]],a=f(o)||"string"!=typeof o?void 0:ie(o,r);f(a)||(e[o]=a)}return e}function xB(r){if(r)try{return document.querySelector(r)?Pi(document.querySelector(r).innerHTML.trim()):Pi(r)}catch{return Pi(r)}}!function(r){r.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:r.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(oe,Ae,De,ge,Re){return xe(oe,s(oe,Ae,De,ge,Re),null,ge)}function s(oe,Ae,De,ge,Re){var We=[],Se=de({},e,ge);cn=G(Se.moduleName);for(var Oe=L(),Ve=0;Ve<Ae.length;Ve++)if(!f(Ae[Ve])){var Gt;Se.itemCreating&&"function"==typeof Se.itemCreating&&Se.itemCreating({dataSource:Ae,curData:Ae[Ve],text:Ae[Ve],options:Se}),Gt=De?j(oe,Ae[Ve],void 0,null,null,[],null,Oe,Ve,ge):ve(oe,Ae[Ve],void 0,null,null,ge,Re),Se.itemCreated&&"function"==typeof Se.itemCreated&&Se.itemCreated({dataSource:Ae,curData:Ae[Ve],text:Ae[Ve],item:Gt,options:Se}),We.push(Gt)}return We}function o(oe,Ae,De,ge,Re,We){var Se=de({},e,De);cn=G(Se.moduleName);var Gt,Oe=!We||"listview"!==We.getModuleName()&&"multiselect"!==We.getModuleName()?de({},r.defaultMappedFields,Se.fields):Se.fields,Ve=de({},t,Se.ariaAttributes),Yt=[];ge&&(Ve.level=ge);var Ci,Ri,ei=[];Ae&&Ae.length&&!f(C(Ae).item)&&!C(Ae).item.hasOwnProperty(Oe.id)&&(Gt=L());for(var Ji=0;Ji<Ae.length;Ji++){var oi=Vl(Ae[Ji],Oe);if(!f(Ae[Ji])){Se.itemCreating&&"function"==typeof Se.itemCreating&&Se.itemCreating({dataSource:Ae,curData:Ae[Ji],text:oi[Oe.text],options:Se,fields:Oe});var ds=Ae[Ji];Se.itemCreating&&"function"==typeof Se.itemCreating&&(oi=Vl(Ae[Ji],Oe)),oi.hasOwnProperty(Oe.id)&&!f(oi[Oe.id])&&(Gt=oi[Oe.id]);var pe=[];if(Se.showCheckBox&&(Se.itemNavigable&&(oi[Oe.url]||oi[Oe.urlAttributes])?Yt.push(oe("input",{className:cn.check,attrs:{type:"checkbox"}})):pe.push(oe("input",{className:cn.check,attrs:{type:"checkbox"}}))),!0===Re)Se.showIcon&&oi.hasOwnProperty(Oe.iconCss)&&!f(oi[Oe.iconCss])&&pe.push(oe("span",{className:cn.icon+" "+oi[Oe.iconCss]})),Ri=(Ci=j(oe,ds,oi,Oe,Se.itemClass,pe,!(!ds.hasOwnProperty("isHeader")||!ds.isHeader),Gt,Ji,De)).querySelector("."+cn.anchorWrap),Se.itemNavigable&&Yt.length&&bi(Yt,Ci.firstElementChild);else{if((Ci=ve(oe,ds,oi,Oe,Se.itemClass,De,We)).classList.add(cn.level+"-"+Ve.level),Ci.setAttribute("aria-level",Ve.level.toString()),Ri=Ci.querySelector("."+cn.anchorWrap),oi.hasOwnProperty(Oe.tooltip)&&Ci.setAttribute("title",oi[Oe.tooltip]),oi.hasOwnProperty(Oe.htmlAttributes)&&oi[Oe.htmlAttributes]&&S(Ci,oi[Oe.htmlAttributes]),oi.hasOwnProperty(Oe.enabled)&&!1===oi[Oe.enabled]&&Ci.classList.add(cn.disabled),oi.hasOwnProperty(Oe.isVisible)&&!1===oi[Oe.isVisible]&&(Ci.style.display="none"),oi.hasOwnProperty(Oe.imageUrl)&&!f(oi[Oe.imageUrl])&&!Se.template){var _e={src:oi[Oe.imageUrl]};po(_e,oi[Oe.imageAttributes]);var Tt=oe("img",{className:cn.image,attrs:_e});Ri?Ri.insertAdjacentElement("afterbegin",Tt):bi([Tt],Ci.firstElementChild)}if(Se.showIcon&&oi.hasOwnProperty(Oe.iconCss)&&!f(oi[Oe.iconCss])&&!Se.template){var wi=oe("div",{className:cn.icon+" "+oi[Oe.iconCss]});Ri?Ri.insertAdjacentElement("afterbegin",wi):bi([wi],Ci.firstElementChild)}pe.length&&bi(pe,Ci.firstElementChild),Se.itemNavigable&&Yt.length&&bi(Yt,Ci.firstElementChild),B(oe,oi,Oe,0,Se,Ci,Ve.level)}Ri&&N([Ci],[cn.navigable]),Se.itemCreated&&"function"==typeof Se.itemCreated&&Se.itemCreated({dataSource:Ae,curData:Ae[Ji],text:oi[Oe.text],item:Ci,options:Se,fields:Oe}),Yt=[],ei.push(Ci)}}return ei}function a(oe,Ae,De,ge,Re,We){var Se=de({},e,De);return xe(oe,o(oe,Ae,De,ge,Re,We),Se.listClass,De)}function h(oe,Ae){if(Ae&&oe)return Array.prototype.slice.call(Ae).indexOf(oe)}function d(oe,Ae,De){if(void 0===De&&(De=new si),"Ascending"===oe)De.sortBy(Ae,"ascending",!0);else if("Descending"===oe)De.sortBy(Ae,"descending",!0);else for(var ge=0;ge<De.queries.length;ge++)"onSortBy"===De.queries[ge].fn&&De.queries.splice(ge,1);return De}function m(oe,Ae){return new Je(oe).executeLocal(Ae)}function C(oe){for(var De=0;De<oe.length;De++)if(!f(oe[De]))return{typeof:typeof oe[De],item:oe[De]};return{typeof:null,item:null}}function S(oe,Ae){var De={};po(De,Ae),De.class&&(N([oe],De.class.split(" ")),delete De.class),Ue(oe,De)}function I(oe){for(var Ae={},De=oe.attributes,ge=0;ge<De.length;ge++)Ae[De[ge].nodeName]=De[ge].nodeValue;return Ae}function L(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function B(oe,Ae,De,ge,Re,We,Se){var Oe=Ae[De.child]||[],Ve=Ae[De.hasChildren];if(Oe.length&&(Ve=!0,We.classList.add(cn.hasChild),Re.processSubChild)){var Gt=a(oe,Oe,Re,++Se);We.appendChild(Gt)}Re.expandCollapse&&Ve&&!Re.template&&(We.firstElementChild.classList.add(cn.iconWrapper),("Left"===Re.expandIconPosition?bi:Zt)([oe("div",{className:"e-icons "+Re.expandIconClass})],We.querySelector("."+cn.textContent)))}function j(oe,Ae,De,ge,Re,We,Se,Oe,Ve,Gt){var Ji,oi,Yt=de({},e,Gt),ei=de({},t,Yt.ariaAttributes),Ci=Ae,Ri=Ae;"string"!=typeof Ae&&"number"!=typeof Ae&&"boolean"!=typeof Ae&&(Ji=Ae,Ci="boolean"==typeof De[ge.text]||"number"==typeof De[ge.text]?De[ge.text]:De[ge.text]||"",Ri=De[ge.value]),oi=f(Ji)||f(De[ge.id])||""===De[ge.id]?Oe+"-"+Ve:Oe;var sr=oe("li",{className:(!0===Se?cn.group:cn.li)+" "+(f(Re)?"":Re),id:oi,attrs:""!==ei.groupItemRole&&""!==ei.itemRole?{role:!0===Se?ei.groupItemRole:ei.itemRole}:{}});return Ji&&De.hasOwnProperty(ge.enabled)&&"false"===De[ge.enabled].toString()&&sr.classList.add(cn.disabled),Se?sr.innerText=Ci:(sr.setAttribute("data-value",f(Ri)?"null":Ri),sr.setAttribute("role","option"),Ji&&De.hasOwnProperty(ge.htmlAttributes)&&De[ge.htmlAttributes]&&S(sr,De[ge.htmlAttributes]),We.length&&!Yt.itemNavigable&&Zt(We,sr),Ji&&(De[ge.url]||De[ge.urlAttributes]&&De[ge.urlAttributes].href)?sr.appendChild(ae(oe,Ji,ge,Ci,We,Yt.itemNavigable)):(We.length&&Yt.itemNavigable&&Zt(We,sr),sr.appendChild(document.createTextNode(Ci)))),sr}function G(oe){return{li:"e-"+oe+"-item",ul:"e-"+oe+"-parent e-ul",group:"e-"+oe+"-group-item",icon:"e-"+oe+"-icon",text:"e-"+oe+"-text",check:"e-"+oe+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+oe+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+oe+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function ae(oe,Ae,De,ge,Re,We){var Ve,Se=Vl(Ae,De),Oe={href:Se[De.url]};if(Se.hasOwnProperty(De.urlAttributes)&&Se[De.urlAttributes]&&(po(Oe,Se[De.urlAttributes]),Oe.href=Se[De.url]?Se[De.url]:Se[De.urlAttributes].href),We){Ve=oe("a",{className:cn.text+" "+cn.url});var Gt=oe("div",{className:cn.anchorWrap});Re&&Re.length&&Zt(Re,Gt),Gt.appendChild(document.createTextNode(ge)),Zt([Gt],Ve)}else Ve=oe("a",{className:cn.text+" "+cn.url,innerHTML:ge});return S(Ve,Oe),Ve}function ve(oe,Ae,De,ge,Re,We,Se){var Yt,ei,Ci,Oe=de({},e,We),Ve=de({},t,Oe.ariaAttributes),Gt=Ae;"string"!=typeof Ae&&"number"!=typeof Ae&&(Ci=Ae,Gt=De[ge.text]||"",Yt=f(De._id)?De[ge.id]:De._id,ei=!(!Ae.hasOwnProperty("isHeader")||!Ae.isHeader));var Ri=oe("li",{className:(!0===ei?cn.group:cn.li)+" "+(f(Re)?"":Re),attrs:""!==Ve.groupItemRole&&""!==Ve.itemRole?{role:!0===ei?Ve.groupItemRole:Ve.itemRole}:{}});if(f(Yt)?Ri.setAttribute("data-uid",L()):Ri.setAttribute("data-uid",Yt),ei&&We&&We.groupTemplate){var Ji=xB(We.groupTemplate);Se&&"listview"!==Se.getModuleName()?(oi=Ji(Ae,Se,"groupTemplate",Oe.groupTemplateID,!!Oe.isStringTemplate,null,Ri))&&Zt(oi,Ri):Zt(Ji(Ae,Se,"groupTemplate",Oe.groupTemplateID,!!Oe.isStringTemplate),Ri)}else if(!ei&&We&&We.template){var oi;Ji=xB(We.template),Se&&"listview"!==Se.getModuleName()?(oi=Ji(Ae,Se,"template",Oe.templateID,!!Oe.isStringTemplate,null,Ri))&&Zt(oi,Ri):Zt(Ji(Ae,Se,"template",Oe.templateID,!!Oe.isStringTemplate),Ri)}else{var sr=oe("div",{className:cn.textContent,attrs:""!==Ve.wrapperRole?{role:Ve.wrapperRole}:{}});if(Ci&&(De[ge.url]||De[ge.urlAttributes]&&De[ge.urlAttributes].href))sr.appendChild(ae(oe,Ci,ge,Gt,null,Oe.itemNavigable));else{var ds=oe("span",{className:cn.text,attrs:""!==Ve.itemText?{role:Ve.itemText}:{}});We&&We.enableHtmlSanitizer?ds.innerText=Gt:ds.innerHTML=Gt,sr.appendChild(ds)}Ri.appendChild(sr)}return Ri}function xe(oe,Ae,De,ge){var Re=de({},e,ge),We=de({},t,Re.ariaAttributes),Se=oe("ul",{className:(cn=G(Re.moduleName)).ul+" "+(f(De)?"":De),attrs:""!==We.listRole?{role:We.listRole}:{}});return Zt(Ae,Se),Se}r.createList=function i(oe,Ae,De,ge,Re){var We=de({},e,De),Se=de({},t,We.ariaAttributes),Oe=C(Ae).typeof;return"string"===Oe||"number"===Oe?n(oe,Ae,ge,De,Re):a(oe,Ae,De,Se.level,ge,Re)},r.createListFromArray=n,r.createListItemFromArray=s,r.createListItemFromJson=o,r.createListFromJson=a,r.getSiblingLI=function l(oe,Ae,De){if(cn=G(e.moduleName),oe&&oe.length){var ge,Re,We=Array.prototype.slice.call(oe);for(ge=We[(Re=Ae?h(Ae,We):!0===De?We.length:-1)+(!0===De?-1:1)];ge&&(!so(ge)||ge.classList.contains(cn.disabled));)ge=We[Re+=!0===De?-1:1];return ge}},r.indexOf=h,r.groupDataSource=function u(oe,Ae,De){void 0===De&&(De="None");var ge=de({},r.defaultMappedFields,Ae),Re=(new si).group(ge.groupBy),We=m(oe,Re=d(De,"key",Re));oe=[];for(var Se=0;Se<We.length;Se++){var Oe=We[Se].items,Ve={};Ve[ge.text]=We[Se].key,Ve.isHeader=!0;var Yt=ge.text;"id"===Yt&&(Ve[Yt="text"]=We[Se].key),Ve._id="group-list-item-"+(We[Se].key?We[Se].key.toString().trim():"undefined"),Ve.items=Oe,oe.push(Ve);for(var ei=0;ei<Oe.length;ei++)oe.push(Oe[ei])}return oe},r.addSorting=d,r.getDataSource=m,r.createJsonFromElement=function y(oe,Ae){var De=de({},e,Ae),ge=de({},r.defaultMappedFields,De.fields),Re=oe.cloneNode(!0),We=[];Re.classList.add("json-parent");var Se=Re.querySelectorAll(".json-parent>li");Re.classList.remove("json-parent");for(var Oe=0;Oe<Se.length;Oe++){for(var Ve=Se[Oe],Gt=Ve.querySelector("a"),Yt=Ve.querySelector("ul"),ei={},Ci=Gt?Gt.childNodes:Ve.childNodes,Ri=Object.keys(Ci),Ji=0;Ji<Ci.length;Ji++)Ci[Number(Ri[Ji])].hasChildNodes()||(ei[ge.text]=Ci[Number(Ri[Ji])].textContent);var oi=I(Ve);oi.id?(ei[ge.id]=oi.id,delete oi.id):ei[ge.id]=L(),Object.keys(oi).length&&(ei[ge.htmlAttributes]=oi),Gt&&(oi=I(Gt),Object.keys(oi).length&&(ei[ge.urlAttributes]=oi)),Yt&&(ei[ge.child]=y(Yt,Ae)),We.push(ei)}return We},r.renderContentTemplate=function k(oe,Ae,De,ge,Re,We){for(var ei,Se=oe("ul",{className:(cn=G(e.moduleName)).ul,attrs:{role:"presentation"}}),Oe=de({},e,Re),Ve=de({},r.defaultMappedFields,ge),Gt=xB(Ae),Yt=[],Ci=L(),Ri=0;Ri<De.length;Ri++){var Ji=Vl(De[Ri],Ve),oi=De[Ri],sr=oi.isHeader;ei="string"==typeof De[Ri]||"number"==typeof De[Ri]?oi:Ji[Ve.value],Oe.itemCreating&&"function"==typeof Oe.itemCreating&&Oe.itemCreating({dataSource:De,curData:oi,text:ei,options:Oe,fields:Ve}),Oe.itemCreating&&"function"==typeof Oe.itemCreating&&(Ji=Vl(De[Ri],Ve),ei="string"==typeof De[Ri]||"number"==typeof De[Ri]?oi:Ji[Ve.value]);var pe=oe("li",{id:Ci+"-"+Ri,className:sr?cn.group:cn.li,attrs:{role:"presentation"}});if(sr)pe.innerText="string"==typeof De[Ri]||"number"==typeof De[Ri]?oi:Ji[Ve.text];else{var _e=sr?Oe.groupTemplateID:Oe.templateID;if(sr)We&&"listview"!=We.getModuleName()?(Tt=Gt(oi,We,"headerTemplate",_e,!!Oe.isStringTemplate,null,pe))&&Zt(Tt,pe):Zt(Gt(oi,We,"headerTemplate",_e,!!Oe.isStringTemplate),pe);else if(We&&"listview"!==We.getModuleName()){var Tt;(Tt=Gt(oi,We,"template",_e,!!Oe.isStringTemplate,null,pe))&&Zt(Tt,pe)}else Zt(Gt(oi,We,"template",_e,!!Oe.isStringTemplate),pe);pe.setAttribute("data-value",f(ei)?"null":ei),pe.setAttribute("role","option")}Oe.itemCreated&&"function"==typeof Oe.itemCreated&&Oe.itemCreated({dataSource:De,curData:oi,text:ei,item:pe,options:Oe,fields:Ve}),Yt.push(pe)}return Zt(Yt,Se),Se},r.renderGroupTemplate=function O(oe,Ae,De,ge,Re,We){for(var Se=xB(oe),Oe=de({},r.defaultMappedFields,De),Ve=de({},e,Re),Gt=Oe.groupBy,Yt=0,ei=ge;Yt<ei.length;Yt++){var Ci=ei[Yt],Ri={};if(Ri[Gt]=Ci.textContent,Ci.innerHTML="",We&&"listview"!==We.getModuleName()){var Ji=Se(Ri,We,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate,null,Ci);Ji&&Zt(Ji,Ci)}else Zt(Se(Ri,We,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate),Ci)}return ge},r.generateId=L,r.generateUL=xe,r.generateIcon=function Le(oe,Ae,De,ge){var Re=de({},e,ge);return cn=G(Re.moduleName),("Left"===Re.expandIconPosition?bi:Zt)([oe("div",{className:"e-icons "+Re.expandIconClass+" "+(f(De)?"":De)})],Ae.querySelector("."+cn.textContent)),Ae}}(fn||(fn={}));var wye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ff=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Sye=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.getHelper=function(o){var l,a=s.getSortableElement(o.sender.target);return!!s.isValidTarget(a,s)&&(s.helper?l=s.helper({sender:a,element:o.element}):((l=a.cloneNode(!0)).style.width=a.offsetWidth+"px",l.style.height=a.offsetHeight+"px"),N([l],["e-sortableclone"]),document.body.appendChild(l),l)},s.onDrag=function(o){if(o.target){s.trigger("drag",{event:o.event,element:s.element,target:o.target});var S,a=s.getSortableInstance(o.target),l=s.getSortableElement(o.target,a);if(!(s.isValidTarget(l,a)||o.target.className.indexOf("e-list-group-item")>-1)||s.curTarget===l&&f(a.placeHolder)||a.placeHolderElement&&a.placeHolderElement===o.target)s.curTarget!==s.target&&s.scope&&s.curTarget!==l&&!f(a.placeHolder)&&(He(s.getSortableInstance(s.curTarget).placeHolderElement),s.curTarget=s.target);else{if(o.target.className.indexOf("e-list-group-item")>-1&&(l=o.target),s.curTarget=l,s.target===l)return;var h=s.getIndex(a.placeHolderElement,a),u=s.getPlaceHolder(l,a),d=void 0;if(u){h=f(h)?s.getIndex(s.target):h,d=s.getIndex(l,a,o.event);var m=s.isPlaceHolderPresent(a);if(m&&h===d)return;m&&He(a.placeHolderElement),a.placeHolderElement=u,o.target.className.indexOf("e-list-group-item")>-1?a.element.insertBefore(a.placeHolderElement,a.element.children[d]):a.element!==s.element&&d===a.element.childElementCount?a.element.appendChild(a.placeHolderElement):a.element.insertBefore(a.placeHolderElement,a.element.children[d]),s.refreshDisabled(h,d,a)}else{h=f(h)?s.getIndex(s.target):s.getIndex(l,a)<h||!h?h:h-1,d=s.getIndex(l,a);var y=a.element!==s.element?d:h<d?d+1:d;s.updateItemClass(a),a.element.insertBefore(s.target,a.element.children[y]),s.refreshDisabled(h,d,a),s.curTarget=s.target,s.trigger("drop",{droppedElement:s.target,element:a.element,previousIndex:h,currentIndex:d,target:o.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:o.event,scope:s.scope})}}a=s.getSortableInstance(s.curTarget),f(l)&&o.target!==a.placeHolderElement?s.isPlaceHolderPresent(a)&&s.removePlaceHolder(a):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(I){(S=s.getSortableInstance(I)).element&&S!==a&&s.removePlaceHolder(S)})}},s.onDragStart=function(o){s.target=s.getSortableElement(o.target);var a=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,o.helper=document.getElementsByClassName("e-sortableclone")[0],s.trigger("beforeDragStart",{cancel:!1,element:s.element,target:s.target},function(h){h.cancel&&(a=h.cancel,s.onDragStop(o))}),!a&&s.trigger("dragStart",ni?{event:o.event,element:s.element,target:s.target,bindEvents:o.bindEvents,dragElement:o.dragElement}:{event:o.event,element:s.element,target:s.target})},s.onDragStop=function(o){var l,h,u,a=s.getSortableInstance(s.curTarget);l=s.getIndex(s.target);var d=s.isPlaceHolderPresent(a);if(d){var m=s.getIndex(a.placeHolderElement,a);s.trigger("beforeDrop",{previousIndex:l,currentIndex:m,target:o.target,droppedElement:s.target,helper:o.helper,cancel:!1,handled:!1},function(S){if(!S.cancel){if(u=S.handled,s.updateItemClass(a),S.handled){var I=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=I}a.element.insertBefore(s.target,a.placeHolderElement);var k=s.getIndex(s.target,a);s.trigger("drop",{event:o.event,element:a.element,previousIndex:l=s===a&&l-k>1?l-1:l,currentIndex:k,target:o.target,helper:o.helper,droppedElement:s.target,scopeName:s.scope,handled:u})}He(a.placeHolderElement)})}a=s.getSortableInstance(o.target),h=a.element.childElementCount,l=s.getIndex(s.target),(a.element===o.target||!d&&s.curTarget===s.target)&&s.trigger("beforeDrop",{previousIndex:l,currentIndex:s.curTarget===s.target?l:h,target:o.target,droppedElement:s.target,helper:o.helper,cancel:!1},function(S){a.element===o.target&&!S.cancel&&(s.updateItemClass(a),a.element.appendChild(s.target),s.trigger("drop",{event:o.event,element:a.element,previousIndex:l,currentIndex:h,target:o.target,helper:o.helper,droppedElement:s.target,scopeName:s.scope}))}),s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,He(o.helper),Uo(s.element,tf).intDestroy(o.event)},s.bind(),s}var e;return wye(t,r),e=t,t.prototype.bind=function(){this.element.id||(this.element.id=Gi("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new tf(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})},t.prototype.getPlaceHolder=function(i,n){if(n.placeHolder){var s=n.placeHolder({element:n.element,grabbedElement:this.target,target:i});return s.classList.add("e-sortable-placeholder"),s}return null},t.prototype.isValidTarget=function(i,n){return i&&K0(i,n.element)&&i.classList.contains(n.itemClass)&&!i.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(i){He(i.placeHolderElement),i.placeHolderElement=null},t.prototype.updateItemClass=function(i){this!==i&&(this.target.classList.remove(this.itemClass),this.target.classList.add(i.itemClass))},t.prototype.getSortableInstance=function(i){if(i=U(i,".e-"+this.getModuleName())){var n=Uo(i,e);return n.scope&&this.scope&&n.scope===this.scope?n:this}return this},t.prototype.refreshDisabled=function(i,n,s){if(s===this)for(var o=void 0,a=i<n,l=void 0,h=a?i:n,u=a?n:i;h<=u;)(o=this.element.children[h]).classList.contains("e-disabled")?(l=this.getIndex(o),this.element.insertBefore(o,this.element.children[a?l+2:l-1]),h=a?l+2:l+1):h++},t.prototype.getIndex=function(i,n,s){var o,a;return void 0===n&&(n=this),[].slice.call(n.element.children).forEach(function(l,h){if(l.classList.contains("e-sortable-placeholder")&&(a=!0),l!==i);else if(o=h,!f(s)){a&&(o-=1);var u=i.getBoundingClientRect();o=s.clientY<=u.bottom-(u.bottom-u.top)/2?o:o+1}}),o},t.prototype.getSortableElement=function(i,n){return void 0===n&&(n=this),U(i,"."+n.itemClass)},t.prototype.queryPositionInfo=function(i){return i.left=pageXOffset?parseFloat(i.left)-pageXOffset+"px":i.left,i.top=pageYOffset?parseFloat(i.top)-pageYOffset+"px":i.top,i},t.prototype.isPlaceHolderPresent=function(i){return i.placeHolderElement&&!!U(i.placeHolderElement,"#"+i.element.id)},t.prototype.moveTo=function(i,n,s){DB(this.element,i,n,s)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),Uo(this.element,tf).destroy(),r.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)"itemClass"===o[s]&&[].slice.call(this.element.children).forEach(function(l){l.classList.contains(n.itemClass)&&l.classList.remove(n.itemClass),i.itemClass&&l.classList.add(i.itemClass)})},ff([E(!1)],t.prototype,"enableAnimation",void 0),ff([E(null)],t.prototype,"itemClass",void 0),ff([E(null)],t.prototype,"scope",void 0),ff([E()],t.prototype,"helper",void 0),ff([E()],t.prototype,"placeHolder",void 0),ff([W()],t.prototype,"drag",void 0),ff([W()],t.prototype,"beforeDragStart",void 0),ff([W()],t.prototype,"dragStart",void 0),ff([W()],t.prototype,"beforeDrop",void 0),ff([W()],t.prototype,"drop",void 0),e=ff([ui],t)}(Jp);function DB(r,t,e,i){var n=[];if(t||(t=r),e&&e.length?e.forEach(function(o){n.push(r.children[o])}):n=[].slice.call(r.children),f(i))n.forEach(function(o){t.appendChild(o)});else{var s=t.children[i];n.forEach(function(o){t.insertBefore(o,s)})}}function Eye(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}var Iye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gf=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Kd_RTL=(new Zp,"e-rtl"),mf=function(r){function t(e,i){return r.call(this,e,i)||this}return Iye(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=Qi(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?jn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Kd_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Kd_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&ce(i),this.unWireEvents(),lr&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):ce(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&ce(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Kd_RTL):this.element.classList.remove(Kd_RTL);break;case"content":Eye(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=jn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},gf([E("Left")],t.prototype,"iconPosition",void 0),gf([E("")],t.prototype,"iconCss",void 0),gf([E(!1)],t.prototype,"disabled",void 0),gf([E(!1)],t.prototype,"isPrimary",void 0),gf([E("")],t.prototype,"cssClass",void 0),gf([E("")],t.prototype,"content",void 0),gf([E(!1)],t.prototype,"isToggle",void 0),gf([E()],t.prototype,"locale",void 0),gf([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),gf([W()],t.prototype,"created",void 0),gf([ui],t)}(nn),qye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dee=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},_w="e-rtl",Mb="e-overlay",vR="e-nav-arrow",yR="e-nav-right-arrow",LB="e-nav-left-arrow",kw="e-scroll-nav",aq="e-scroll-right-nav",pee="e-scroll-left-nav",fee="e-scroll-device",OB="e-scroll-overlay",lq="e-scroll-right-overlay",hq="e-scroll-left-overlay",PB=function(r){function t(e,i){return r.call(this,e,i)||this}return qye(t,r),t.prototype.preRender=function(){this.browser=Q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Q.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Gi("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(_w)},t.prototype.render=function(){this.touchModule=new Ja(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),T.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(fee),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(fee);var i=Ze(".e-"+e.id+"_nav."+kw,e),n=Ze("."+OB,e);[].slice.call(n).forEach(function(l){ce(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),ce(this.scrollEle),i.length>0&&(ce(i[0]),f(i[1])||ce(i[1])),T.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ze(".e-scroll-nav:not(."+Mb+")",this.element);e?this.element.classList.add(Mb):this.element.classList.remove(Mb),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),n=this.createElement("div",{className:OB+" "+lq}),s="e-"+e.id.concat("_nav "+kw+" "+aq),o=this.createElement("div",{id:i.concat("_right"),className:s}),a=this.createElement("div",{className:yR+" "+vR+" e-icons"});o.appendChild(a);var l=this.createElement("div",{className:OB+" "+hq});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+kw+" "+aq),s={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:n,attrs:s});o.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:yR+" "+vR+" e-icons"}),l="e-"+e.id.concat("_nav "+kw+" "+pee),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},u=this.createElement("div",{className:l+" "+Mb,attrs:h});u.setAttribute("aria-disabled","true");var d=this.createElement("div",{className:LB+" "+vR+" e-icons"});u.appendChild(d),o.appendChild(a),e.appendChild(o),e.insertBefore(u,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),u.classList.add("e-ie-align")),this.eventBinding([o,u])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Ja(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),T.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,kw)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=this.element,o=i.classList;o.contains(kw)&&(o=i.querySelector("."+vR).classList),this.contains(s,_w)&&this.browserCheck&&(e=-e),!this.contains(s,_w)||this.browserCheck||this.ieCheck?o.contains(yR)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):o.contains(LB)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Left"===e.swipeDirection?i.scrollLeft+=n*a:"Right"===e.swipeDirection&&(i.scrollLeft-=n*a),s-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Ze("."+OB,this.element)).forEach(function(l){e-=l.offsetWidth});var a=function(){var l,h;s.contains(s.element,_w)&&s.browserCheck?(l=-e,h=-10):(l=e,h=10),l<10?window.cancelAnimationFrame(h):(s.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceX;this.ieCheck&&this.contains(this.element,_w)&&(n=-n),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+n:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+vR);f(e)?li(s,[yR],[LB]):li(s,[LB],[yR])}else e&&i&&(e.classList.add(Mb),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Mb),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,n=i.offsetWidth,o=this.element.querySelector("."+pee),a=this.element.querySelector("."+aq),l=this.element.querySelector("."+hq),h=this.element.querySelector("."+lq),u=i.scrollLeft;if(u<=0&&(u=-u),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+lq),h=this.element.querySelector("."+hq)),l.style.width=u<40?u+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(n+u)<40?i.scrollWidth-Math.ceil(n+u)+"px":"40px"),0===u)this.arrowDisabling(o,a);else if(Math.ceil(n+u+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{var d=this.element.querySelector("."+kw+"."+Mb);d&&(d.classList.remove(Mb),d.setAttribute("aria-disabled","false"),d.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(_w):this.element.classList.remove(_w)}},dee([E(null)],t.prototype,"scrollStep",void 0),dee([ui],t)}(nn),Yye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),mee=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},uq="e-rtl",Lb="e-overlay",bR="e-nav-arrow",FB="e-nav-up-arrow",CR="e-nav-down-arrow",Rw="e-scroll-nav",vee="e-scroll-up-nav",cq="e-scroll-down-nav",yee="e-scroll-device",NB="e-scroll-overlay",bee="e-scroll-up-overlay",Cee="e-scroll-down-overlay",mx=function(r){function t(e,i){return r.call(this,e,i)||this}return Yye(t,r),t.prototype.preRender=function(){this.browser=Q.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Q.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Gi("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(uq)},t.prototype.render=function(){this.touchModule=new Ja(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),T.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(yee),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),T.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=ri("div",{className:"e-vscroll-content"}),i=ri("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",z([this.element],["e-vscroll",yee]);var i=Ze(".e-"+e.id+"_nav."+Rw,e),n=Ze("."+NB,e);[].slice.call(n).forEach(function(l){ce(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),ce(this.scrollEle),i.length>0&&(ce(i[0]),f(i[1])||ce(i[1])),T.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ze(".e-scroll-nav:not(."+Lb+")",this.element);e?this.element.classList.add(Lb):this.element.classList.remove(Lb),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),n=ri("div",{className:NB+" "+Cee}),s="e-"+e.id.concat("_nav "+Rw+" "+cq),o=ri("div",{id:i.concat("down"),className:s}),a=ri("div",{className:CR+" "+bR+" e-icons"});o.appendChild(a);var l=ri("div",{className:NB+" "+bee});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+Rw+" "+cq),s=ri("div",{id:i.concat("_down"),className:n});s.setAttribute("aria-disabled","false");var o=ri("div",{className:CR+" "+bR+" e-icons"}),a="e-"+e.id.concat("_nav "+Rw+" "+vee),l=ri("div",{id:i.concat("_up"),className:a+" "+Lb});l.setAttribute("aria-disabled","true");var h=ri("div",{className:FB+" "+bR+" e-icons"});l.appendChild(h),s.appendChild(o),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Ja(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),T.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,Rw)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=i.classList;s.contains(Rw)&&(s=i.querySelector("."+bR).classList),s.contains(CR)?this.frameScrollRequest(e,"add",n):s.contains(FB)&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Up"===e.swipeDirection?i.scrollTop+=n*a:"Down"===e.swipeDirection&&(i.scrollTop-=n*a),s-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Ze("."+NB,this.element)).forEach(function(l){e-=l.offsetHeight});var a=function(){e<10?window.cancelAnimationFrame(10):(s.scrollUpdating(10,i),e-=10,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceY;"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+n:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+bR);f(e)?li(s,[CR],[FB]):li(s,[FB],[CR])}else e.classList.add(Lb),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Lb),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,n=i.offsetHeight,s=this.element.querySelector("."+vee),o=this.element.querySelector("."+cq),a=this.element.querySelector("."+bee),l=this.element.querySelector("."+Cee),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(a.style.height=h<40?h+"px":"40px",l.style.height=i.scrollHeight-Math.ceil(n+h)<40?i.scrollHeight-Math.ceil(n+h)+"px":"40px"),0===h)this.arrowDisabling(s,o);else if(Math.ceil(n+h+.1)>=i.scrollHeight)this.arrowDisabling(o,s);else{var u=this.element.querySelector("."+Rw+"."+Lb);u&&(u.classList.remove(Lb),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(uq):this.element.classList.remove(uq)}},mee([E(null)],t.prototype,"scrollStep",void 0),mee([ui],t)}(nn),Aee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ws=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},gq="e-vertical",mo="e-toolbar-items",Aa="e-toolbar-item",Dg="e-rtl",da="e-separator",WB="e-popup-up-icon",TR="e-popup-down-icon",_ee="e-popup-open",kee="e-template",yf="e-overlay",Ree="e-toolbar-text",mq="e-popup-text",bf="e-overflow-show",qB="e-overflow-hide",Jh="e-hor-nav",Mee="e-scroll-nav",Lee="e-toolbar-center",Cf="e-tbar-pos",Oee="e-hscroll-bar",xR="e-toolbar-pop",cv="e-toolbar-popup",DR="e-nav-active",IR="e-ignore",vq="e-popup-alone",AR="e-hidden",Pee="e-toolbar-multirow",Fee="e-multirow-pos",yq="e-multirow-separator",bq="e-extended-separator",Nee="e-extended-toolbar",GB="e-toolbar-extended",Cq="e-tbar-extended",hbe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Aee(t,r),ws([E("")],t.prototype,"id",void 0),ws([E("")],t.prototype,"text",void 0),ws([E("auto")],t.prototype,"width",void 0),ws([E("")],t.prototype,"cssClass",void 0),ws([E(!1)],t.prototype,"showAlwaysInPopup",void 0),ws([E(!1)],t.prototype,"disabled",void 0),ws([E("")],t.prototype,"prefixIcon",void 0),ws([E("")],t.prototype,"suffixIcon",void 0),ws([E(!0)],t.prototype,"visible",void 0),ws([E("None")],t.prototype,"overflow",void 0),ws([E("")],t.prototype,"template",void 0),ws([E("Button")],t.prototype,"type",void 0),ws([E("Both")],t.prototype,"showTextOn",void 0),ws([E(null)],t.prototype,"htmlAttributes",void 0),ws([E("")],t.prototype,"tooltipText",void 0),ws([E("Left")],t.prototype,"align",void 0),ws([W()],t.prototype,"click",void 0),t}(Ti),Bee=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return Aee(t,r),t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!f(n)&&!f(n.ej2_instances)&&!f(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){f(e.element.querySelector(n))||(document.body.appendChild(e.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),ce(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&z([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(n){return e.element.removeAttribute(n)}),r.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(gq),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,Dg)},t.prototype.wireEvents=function(){T.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new An(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),T.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(T.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var i=!f(this.popObj)&&so(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){T.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),T.remove(document,"scroll",this.docEvent),T.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=U(e.target,".e-popup");this.popObj&&so(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,Cf),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Aa)).forEach(function(i){ce(i)}),this.tbarAlign){var e=this.element.querySelector("."+mo);[].slice.call(e.children).forEach(function(i){ce(i)}),this.tbarAlign=!1,this.remove(e,Cf)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,Dg),this.destroyScroll()),this.remove(this.element,Cq),this.remove(this.element,Nee);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,Pee),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){return e&&this.popObj&&so(this.popObj.element)?this.popObj.element.querySelector("."+Aa):this.element===i||e?this.element.querySelector("."+Aa+":not(."+yf+" ):not(."+da+" ):not(."+AR+" )"):U(i,"."+Aa)},t.prototype.keyHandling=function(e,i,n,s,o){var d,m,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},u="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var y=U(e,".e-popup"),C=this.element.querySelector("."+GB);"Extended"===this.overflowMode&&C&&C.classList.contains("e-popup-open")&&(y="end"===i.action?C:null),y?so(this.popObj.element)&&(m=[].slice.call(y.children),d="home"===i.action?m[0]:m[m.length-1]):(m=this.element.querySelectorAll("."+mo+" ."+Aa+":not(."+da+")"),d="home"===i.action?m[0]:m[m.length-1]),d&&this.elementFocus(d)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===i.action?"previous":"next");else if(a&&U(n,".e-popup")){var S=a.element;if("previous"===u&&S.firstElementChild===e||"next"===u&&S.lastElementChild===e)return;this.eleFocus(e,u)}else"moveDown"===i.action&&a&&so(a.element)&&this.elementFocus(e);break;case"tab":if(!o&&!s){var k=e.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(k),k.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!s)return;a&&!so(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},t.prototype.keyActionHandler=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(yf)){e.preventDefault();var n=i.classList.contains(Jh),s=i.classList.contains(Mee),o=this.clstElement(n,i);(o||s)&&this.keyHandling(o,e,i,n,s)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(yf):i.classList.remove(yf),i.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(so(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(da)||e.classList.contains(yf)||e.getAttribute("disabled")||e.classList.contains(AR)||!so(e)},t.prototype.eleFocus=function(e,i){var n=Object(e)[i+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,i);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(e.parentElement)[i+"ElementSibling"];if(!f(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!f(o)&&o.children.length>0)if("next"===i){var a=o.querySelector("."+Aa);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else this.eleContains(a=o.lastElementChild)?this.eleFocus(a,i):this.elementFocus(a)}},t.prototype.clickHandler=function(e){var i=this,n=e.target,s=this.element,o=!f(U(n,"."+xR)),a=n.classList,l=U(n,"."+Jh);l||(l=n),!s.children[0].classList.contains("e-hscroll")&&!s.children[0].classList.contains("e-vscroll")&&a.contains(Jh)&&(a=n.querySelector(".e-icons").classList),(a.contains(WB)||a.contains(TR))&&this.popupClickHandler(s,l,Dg);var h,u=U(e.target,"."+Aa);if(!f(u)&&!u.classList.contains(yf)||l.classList.contains(Jh)){u&&(h=this.items[this.tbarEle.indexOf(u)]);var m={originalEvent:e,item:h};h&&!f(h.click)&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",m),m.cancel||this.trigger("clicked",m,function(y){!f(i.popObj)&&o&&!y.cancel&&"Popup"===i.overflowMode&&y.item&&"Input"!==y.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,n){var s=this.popObj;so(s.element)?(i.classList.remove(DR),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0===s.offsetX&&!e.classList.contains(n)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),i.classList.add(DR),s.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=ot(this.width),i=ot(this.height);("msie"!==Q.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&Vt(this.element,{height:i}),Vt(this.element,{width:e}),Ue(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&N([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var n,s;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)n=this.renderSubComponent(e[o],o),-1===this.tbarEle.indexOf(n)&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(e[o],i,o),(s=i.querySelector(".e-toolbar-"+e[o].align.toLowerCase()))?(e[o].showAlwaysInPopup&&"Show"!==e[o].overflow||this.tbarAlgEle[(e[o].align+"s").toLowerCase()].push(n),s.appendChild(n)):i.appendChild(n);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(gq),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(gq),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Vt(this.element,{height:ot(this.height),width:ot(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){!this.scrollModule&&this.checkOverflow(e,i[0])&&(this.tbarAlign&&this.element.querySelector("."+mo+" ."+Lee).removeAttribute("style"),this.scrollModule=this.isVertical?new mx({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new PB({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&N([i[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,Cf),Vt(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var s,i=this,n=0;return[].slice.call(Ze("."+Aa,e)).forEach(function(o){so(o)&&(s=window.getComputedStyle(o),n+=i.isVertical?o.offsetHeight:o.offsetWidth,n+=parseFloat(i.isVertical?s.marginTop:s.marginRight),n+=parseFloat(i.isVertical?s.marginBottom:s.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,i){if(f(e)||f(i)||!so(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,s=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=e.querySelector("."+Jh),a=e.querySelector("."+Mee),l=0;return o?l=this.isVertical?o.offsetHeight:o.offsetWidth:a&&(l=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),s>n-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,Cf),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+mo),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===Q.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":f(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(mo)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||n)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,Pee),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,Fee)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===Q.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,Nee),(this.checkOverflow(e,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Ze("."+mo+" ."+Aa,e))),this.element.querySelector("."+Jh).setAttribute("tabIndex","0"),this.element.querySelector("."+Jh).setAttribute("role","list")},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+da)),n=e.querySelector("."+yq),s=e.querySelector("."+bq),o="MultiRow"===this.overflowMode?n:s;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(yq):"Extended"===this.overflowMode&&o.classList.remove(bq));for(var a=0;a<=i.length-1;a++)i[a].offsetLeft<30&&0!==i[a].offsetLeft&&("MultiRow"===this.overflowMode?i[a].classList.add(yq):"Extended"===this.overflowMode&&i[a].classList.add(bq))},t.prototype.createPopupEle=function(e,i){var n=e.querySelector("."+Jh),s=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector("."+Jh);var a=(s?e.offsetHeight:e.offsetWidth)-(s?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),Vt(this.element,{direction:"initial"}),this.checkPriority(e,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,n,s,o){var a=e.element,l=[].slice.call(Ze("."+cv,a.querySelector("."+mo))),h=Ze("."+bf,n),u=0,d=0;l.forEach(function(S,I){h=Ze("."+bf,n),S.classList.contains(bf)&&h.length>0?e.tbResize&&h.length>I?(n.insertBefore(S,h[I]),++d):(n.insertBefore(S,n.children[h.length]),++d):S.classList.contains(bf)||e.tbResize&&S.classList.contains(qB)&&n.children.length>0&&0===h.length?(n.insertBefore(S,n.firstChild),++d):S.classList.contains(qB)?i.push(S):e.tbResize?(n.insertBefore(S,n.childNodes[u+d]),++u):n.appendChild(S),S.classList.contains(da)?Vt(S,{display:"",height:o+"px"}):Vt(S,{display:"",height:s+"px"})}),i.forEach(function(S){n.appendChild(S)});for(var m=Ze("."+Aa,a.querySelector("."+mo)),y=m.length-1;y>=0;y--){var C=m[y];if(!C.classList.contains(da)||"Extended"===this.overflowMode)break;Vt(C,{display:"none"})}},t.prototype.createPopup=function(){var i,n,e=this.element;"Extended"===this.overflowMode&&(n=e.querySelector("."+da+":not(."+cv+")"),i="auto"===e.style.height||""===e.style.height?null:n.offsetHeight);var a,s=e.querySelector("."+Aa+":not(."+da+"):not(."+cv+")"),o="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;if(le("#"+e.id+"_popup."+xR,e))a=le("#"+e.id+"_popup."+xR,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:xR+" "+GB}),u=this.createElement("div",{id:e.id+"_popup",className:xR});a="Extended"===this.overflowMode?h:u}this.pushingPoppedEle(this,[],a,o,i),this.popupInit(e,a)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){var a=this.popObj.element;Vt(a,{maxHeight:"",display:"block"}),Vt(a,{maxHeight:a.offsetHeight+"px",display:""})}else{e.appendChild(i),this.cssClass&&N([i],this.cssClass.split(" ")),Vt(this.element,{overflow:""});var n=window.getComputedStyle(this.element),s=new Ol(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(i),"Extended"===this.overflowMode&&(s.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),s.offsetX=0),T.add(document,"scroll",this.docEvent.bind(this)),T.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+Jh);o.classList.add(DR),li(o.firstElementChild,[WB],[TR]),this.element.querySelector("."+GB).classList.add(_ee)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,Cq):this.remove(this.element,Cq))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,s=this.popObj.element.parentElement,o=s.querySelector("."+Jh);Vt(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var a=n.offsetTop+n.offsetHeight+ko(s).top,l=o.firstElementChild;o.classList.add(DR),li(l,[WB],[TR]),this.tbarPopupHandler(!0);var h=f(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<n.offsetHeight){var u=n.offsetHeight-(a-window.innerHeight-h+5);i.height=u+"px";for(var d=0;d<=n.childElementCount;d++){var m=n.children[d];if(m.offsetTop+m.offsetHeight>u){u=m.offsetTop;break}}Vt(i.element,{maxHeight:u+"px"})}else if(this.isVertical){var y=this.element.getBoundingClientRect();Vt(i.element,{maxHeight:y.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var C=n.getBoundingClientRect();C.right>document.documentElement.clientWidth&&C.width>s.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var n=this.element.querySelector("."+Jh),s=n.firstElementChild;n.classList.remove(DR),li(s,[TR],[WB]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,n,s){for(var h,o=this.popupPriCount>0,l=n,d=0,m=0,y=0,C=function(G,ae){var ve=!1;return ae.forEach(function(xe){G.classList.contains(xe)&&(ve=!0)}),ve},S=i.length-1;S>=0;S--){var I=void 0,k=window.getComputedStyle(i[S]);this.isVertical?(I=parseFloat(k.marginTop),I+=parseFloat(k.marginBottom)):(I=parseFloat(k.marginRight),I+=parseFloat(k.marginLeft));var O=i[S]===this.tbarEle[0];O&&(this.tbarEleMrgn=I),h=this.isVertical?i[S].offsetHeight:i[S].offsetWidth;var L=O?h+I:h;if(C(i[S],[vq])&&o&&(i[S].classList.add(cv),Vt(i[S],this.isVertical?{display:"none",minHeight:L+"px"}:{display:"none",minWidth:L+"px"}),y++),this.isVertical?i[S].offsetTop+i[S].offsetHeight+I>n:i[S].offsetLeft+i[S].offsetWidth+I>n){if(i[S].classList.contains(da)){if("Extended"===this.overflowMode)m===y&&C(B=i[S],[da,IR])&&(i[S].classList.add(cv),y++),m++;else if("Popup"===this.overflowMode){var B;d>0&&m===y&&C(B=i[S+m+(d-1)],[da,IR])&&Vt(B,{display:"none"}),d++,m=0,y=0}}else m++;i[S].classList.contains(bf)&&s||C(i[S],[da,IR])?n-=(this.isVertical?i[S].offsetHeight:i[S].offsetWidth)+I:(i[S].classList.add(cv),Vt(i[S],this.isVertical?{display:"none",minHeight:L+"px"}:{display:"none",minWidth:L+"px"}),y++)}}if(s){var j=Ze("."+Aa+":not(."+cv+")",this.element);this.checkPriority(e,j,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-hor-nav"),s=this.createElement("div",{id:i,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});("msie"===Q.info.name||"edge"===Q.info.name)&&s.classList.add("e-ie-align");var o=this.createElement("div",{className:TR+" e-icons"});s.appendChild(o),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)},t.prototype.tbarPriRef=function(e,i,n,s,o,a,l,h){var u=h,y=Ze("."+cv+":not(."+bf+")",this.popObj.element).length,C=function(B,j){return B.classList.contains(j)};if(0===Ze(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var S=e.children[i-(i-n)-1],I=!f(S)&&C(S,IR);if(!f(S)&&C(S,da)&&!so(S)||I){S.style.display="inherit";var O=S.offsetWidth+2*parseFloat(window.getComputedStyle(S).marginRight),L=S.previousElementSibling;a+O<l||o?(e.insertBefore(s,e.children[i+u-(i-n)]),f(L)||(L.style.display="")):L.classList.contains(da)&&(L.style.display="none"),S.style.display=""}else e.insertBefore(s,e.children[i+u-(i-n)])}else e.insertBefore(s,e.children[i+u-y])},t.prototype.popupRefresh=function(e,i){var n=this,s=this.element,o=this.isVertical,a=s.querySelector("."+mo),l=s.querySelector("."+Jh);if(!f(l)){var h;a.removeAttribute("style"),e.style.display="block",h=o?s.offsetHeight-(l.offsetHeight+a.offsetHeight):s.offsetWidth-(l.offsetWidth+a.offsetWidth);var u=0;[].slice.call(e.children).forEach(function(d){u+=n.popupEleWidth(d),Vt(d,{position:""})}),h+(o?l.offsetHeight:l.offsetWidth)>u&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(h,e,i),e.style.display="",0===e.children.length&&l&&this.popObj&&(ce(l),l=null,this.popObj.destroy(),ce(this.popObj.element),this.popObj=null,s.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,i){var n=[].slice.call(i.querySelectorAll("."+IR)),s=[],o=0;return n.length>0?(n.forEach(function(a){s.push([].slice.call(i.children).indexOf(a))}),s.forEach(function(a){a<=e&&o++}),o):0},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var s=e.offsetWidth-e.querySelector("."+Jh).offsetWidth,o=e.querySelector("."+mo).offsetWidth;return i.style.removeProperty("display"),s>n+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(mq)){var s=e.children[0];!f(n)&&e.classList.contains(mq)?n.style.display="none":!f(n)&&e.classList.contains(Ree)&&(n.style.display="block"),s.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",f(n)||(n.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,n){for(var a,l,s=this.popupPriCount>0,o=this.tbarEle,h=this.element.querySelector("."+mo),u=0,d=function(O){if(O.classList.contains(vq)&&s&&!n)return"continue";var L=m.popupEleWidth(O);if(O===m.tbarEle[0]&&(L+=m.tbarEleMrgn),O.style.position="",!(L<e||n))return"break";if(Vt(O,{minWidth:"",height:"",minHeight:""}),O.classList.contains(qB)||O.classList.remove(cv),l=m.tbarEle.indexOf(O),m.tbarAlign){var B=m.items[l].align;l=m.tbarAlgEle[(B+"s").toLowerCase()].indexOf(O),o=m.tbarAlgEle[(B+"s").toLowerCase()],h=m.element.querySelector("."+mo+" .e-toolbar-"+B.toLowerCase())}var j=0;"Extended"!==m.overflowMode&&o.slice(0,l).forEach(function(G){(G.classList.contains(bf)||G.classList.contains(da))&&(G.classList.contains(da)&&(G.style.display="",e-=G.offsetWidth),j++)}),u=m.ignoreEleFetch(l,h),O.classList.contains(bf)?(m.tbarPriRef(h,l,j,O,n,L,e,u),e-=O.offsetWidth):0===l?(h.insertBefore(O,h.firstChild),e-=O.offsetWidth):(a=Ze("."+bf,m.popObj.element).length,h.insertBefore(O,h.children[l+u-a]),e-=O.offsetWidth),O.style.height=""},m=this,y=0,C=[].slice.call(i.children);y<C.length&&"break"!==d(C[y]);y++);this.checkOverflow(this.element,this.element.getElementsByClassName(mo)[0])&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+mo);if(!f(e)&&e.classList.contains(Cf)){this.remove(e,Cf);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+mo);this.add(e,Cf),this.itemPositioning()},t.prototype.itemPositioning=function(){var i,e=this.element.querySelector("."+mo);if(!f(e)&&e.classList.contains(Cf)){var s,n=this.element.querySelector("."+Jh);s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),i=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){a-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=l:s[2].style.bottom=l:this.enableRtl?s[2].style.left=l:s[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");var u=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=u:s[1].style.marginTop=u:this.enableRtl?s[1].style.marginRight=u:s[1].style.marginLeft=u}}},t.prototype.tbarItemAlign=function(e,i,n){var s=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:Lee})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==e.align)o.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,Cf);else if("Left"!==e.align){var l=o[0];[].slice.call(i.childNodes).forEach(function(h){s.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,Cf)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,mo),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(n){"DIV"===n.tagName&&(e.tbarEle.push(n),n.setAttribute("aria-disabled","false"),e.add(n,Aa))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&i.length>0){var n=void 0;e&&e.children.length>0&&(n=e.querySelector("."+mo)),n||(n=this.createElement("div",{className:mo})),this.itemsAlign(i,n),e.appendChild(n)}},t.prototype.setAttr=function(e,i){for(var s,n=Object.keys(e),o=0;o<n.length;o++)"class"===(s=n[o])?this.add(i,e[s]):i.setAttribute(s,e[s])},t.prototype.enableItems=function(e,i){var o,n=e,s=n.length;f(i)&&(i=!0);var a=function(d,m){d?(m.classList.remove(yf),m.setAttribute("aria-disabled","false")):(m.classList.add(yf),m.setAttribute("aria-disabled","true"))};if(!f(s)&&s>=1){for(var l=0,h=[].slice.call(n);l<s;l++){var u=h[l];if("number"==typeof u){if(f(o=this.getElementByIndex(u)))return;n[l]=o}else o=u;a(i,o)}i?z(n,yf):N(n,yf)}else{if("number"==typeof n){if(f(o=this.getElementByIndex(n)))return}else o=e;a(i,o)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[e]?this.tbarEle[e]:null},t.prototype.addItems=function(e,i){var n;this.extendedOpen();var s=this.element.querySelector("."+mo);if(f(s))this.itemsRerender(e);else{var o,a="Left";f(i)&&(i=0),e.forEach(function(y){!f(y.align)&&"Left"!==y.align&&"Left"===a&&(a=y.align)});for(var l=0,h=e;l<h.length;l++){var u=h[l];if(f(u.type)&&(u.type="Button"),n=Ze("."+Aa,this.element),u.align=a,o=this.renderSubComponent(u,i),this.tbarEle.length>=i&&n.length>=0){f(this.scrollModule)&&this.destroyMode();var d="L"===u.align[0]?0:"C"===u.align[0]?1:2,m=void 0;this.tbarAlign||"Left"===a?this.tbarAlign?((m=U(n[0],"."+mo).children[d]).insertBefore(o,m.children[i]),this.tbarAlgEle[(u.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===n.length?(n=Ze("."+mo,this.element))[0].appendChild(o):n[0].parentNode.insertBefore(o,n[i]):(this.tbarItemAlign(u,s,1),this.tbarAlign=!0,(m=U(n[0],"."+mo).children[d]).appendChild(o),this.tbarAlgEle[(u.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,u),u.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=s.offsetWidth}}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var n,i=e,s=[].slice.call(Ze("."+Aa,this.element));if("number"==typeof i)n=parseInt(e.toString(),10),this.removeItemByIndex(n,s);else if(i&&i.length>1)for(var o=0,a=[].slice.call(i);o<a.length;o++)n=this.tbarEle.indexOf(a[o]),this.removeItemByIndex(n,s),s=Ze("."+Aa,this.element);else n=s.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(n,s);this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[e]&&i[e]){var n=this.tbarEle.indexOf(i[e]);if(this.tbarAlign){var s=this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].indexOf(this.tbarEle[n]);this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].splice(s,1)}this.isReact&&this.clearTemplate();var o=i[e].querySelector(".e-control.e-btn");!f(o)&&!f(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),ce(i[e]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},t.prototype.templateRender=function(e,i,n,s){var l,a=e;if("object"==typeof e&&(l="function"==typeof a.appendTo),"string"!=typeof e&&l)"Input"===n.type&&((m=this.createElement("input")).id=n.id?n.id:Gi("tbr-ipt"),i.appendChild(m),a.appendTo(m));else{var u,h=void 0,d=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);u="string"==typeof e?e.trim():e;try{if("object"!=typeof e||f(e.tagName))if("string"==typeof e&&d.test(u))i.innerHTML=u;else if(document.querySelectorAll(u).length){var m,y=(m=document.querySelector(u)).outerHTML.trim();i.appendChild(m),m.style.display="",f(y)||this.tempId.push(u)}else h=Pi(u);else i.appendChild(e)}catch{h=Pi(u)}var C=void 0;f(h)||(C=h({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!f(C)&&C.length>0&&[].slice.call(C).forEach(function(I){f(I.tagName)||(I.style.display=""),i.appendChild(I)})}this.add(i,kee),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var o,a,s=e.text;n.id=e.id?e.id:Gi("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});s?(l.innerHTML=this.enableHtmlSanitizer?jn.sanitize(s):s,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(o=e.prefixIcon+" e-icons",a="Left"):(o=e.suffixIcon+" e-icons",a="Right"));var h=new mf({iconCss:o,iconPosition:a});return h.createElement=this.createElement,h.appendTo(n),e.width&&Vt(n,{width:ot(e.width)}),n},t.prototype.renderSubComponent=function(e,i){var n,s=this.createElement("div",{className:Aa});s.setAttribute("aria-disabled","false");var o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?jn.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",o.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,i);else switch(e.type){case"Button":(n=this.buttonRendering(e,s)).setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(n),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,da)}if(e.showTextOn){var a=e.showTextOn;"Toolbar"===a?(this.add(s,Ree),this.add(s,"e-tbtn-align")):"Overflow"===a&&this.add(s,mq)}if(e.overflow){var l=e.overflow;"Show"===l?this.add(s,bf):"Hide"===l&&(s.classList.contains(da)||this.add(s,qB))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(da)&&(this.add(s,vq),this.popupPriCount++),e.disabled&&this.add(s,yf),!1===e.visible&&this.add(s,AR),s},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){f(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,f(this.trgtEle)&&!e.parentElement.classList.contains(kee)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(mo)[0]);if(!i){this.destroyScroll();var n=e.querySelector("."+mo);f(n)||(this.remove(n,Fee),this.tbarAlign&&this.add(n,Cf))}if(!i||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+Oee)&&(this.scrollStep=this.element.querySelector("."+Oee).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+GB);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(_ee))},t.prototype.onPropertyChanged=function(e,i){var n=this.element,s=n.offsetWidth;this.extendedOpen();for(var o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var h=Object.keys(e.items),u=0;u<h.length;u++){var d=parseInt(Object.keys(e.items)[u],10),m=Object.keys(e.items[d])[0],y=Object(e.items[d])[m];if("function"!=typeof y){if(this.tbarAlign||"align"===m){this.refresh(),this.trigger("created");break}("showAlwaysInPopup"===m&&!y||this.items[d].showAlwaysInPopup&&"overflow"===m&&0!==this.popupPriCount)&&--this.popupPriCount,f(this.scrollModule)&&this.destroyMode();var I=[].slice.call(Ze("."+mo+" ."+Aa,n));this.isReact&&this.clearTemplate(),ce(I[d]),this.tbarEle.splice(d,1),this.addItems([this.items[d]],d),this.items.splice(d,1),this.items[d].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":Vt(n,{width:ot(e.width)}),this.renderOverflowMode(),this.popObj&&s<n.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Vt(this.element,{height:ot(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,Dg),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,Dg):this.remove(n,Dg),f(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,Dg):this.remove(this.scrollModule.element,Dg)),f(this.popObj)||(e.enableRtl?this.add(this.popObj.element,Dg):this.remove(this.popObj.element,Dg)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}},t.prototype.hideItem=function(e,i){var o,a,n="object"==typeof e,s=e,l=[].slice.call(Ze("."+Aa,this.element));if(n?a=e:this.tbarEle[s]&&(a=[].slice.call(Ze("."+Aa,this.element))[s]),a){if(i?a.classList.add(AR):a.classList.remove(AR),i&&f(this.element.getAttribute("tabindex"))&&!a.classList.contains(da)){if(f(a.firstElementChild.getAttribute("tabindex"))){a.firstElementChild.setAttribute("tabindex","-1");var u=[].slice.call(Ze("."+Aa,this.element));n&&(s=u.indexOf(a));for(var d=u[++s];d;){if(!this.eleContains(d)){d.firstElementChild.removeAttribute("tabindex");break}d=u[++s]}}}else if(f(this.element.getAttribute("tabindex"))&&!a.classList.contains(da))for(var y=!1,C=!1,S=l[o=0];S;)if(S.classList.contains(da))S=l[++o];else if(f(S.firstElementChild.getAttribute("tabindex")))S.firstElementChild.setAttribute("tabindex","-1"),y=!0;else{if(y&&C)break;this.eleContains(S)||(S.firstElementChild.removeAttribute("tabindex"),C=!0),S=l[++o]}this.refreshOverflow()}},ws([_o([],hbe)],t.prototype,"items",void 0),ws([E("auto")],t.prototype,"width",void 0),ws([E("auto")],t.prototype,"height",void 0),ws([E("")],t.prototype,"cssClass",void 0),ws([E("Scrollable")],t.prototype,"overflowMode",void 0),ws([E()],t.prototype,"scrollStep",void 0),ws([E(!0)],t.prototype,"enableCollision",void 0),ws([E(!0)],t.prototype,"enableHtmlSanitizer",void 0),ws([E(!0)],t.prototype,"allowKeyboard",void 0),ws([W()],t.prototype,"clicked",void 0),ws([W()],t.prototype,"created",void 0),ws([W()],t.prototype,"destroyed",void 0),ws([W()],t.prototype,"beforeCreate",void 0),ws([ui],t)}(nn),rH=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ji=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ef="e-treeview",Cl="e-icon-collapsible",Ss="e-icon-expandable",wn="e-list-item",Ow="e-list-text",Sr="e-list-parent",Ig="e-hover",$u="e-active",Nq="e-icons-spinner",fv="e-process",qo="e-icons",nl="e-text-content",sH="e-input",Qee="e-input-group",oH="e-tree-input",Bq="e-editing",ete="e-interaction",tte="e-droppable",Hq="e-dragging",PR="e-sibling",aH="e-drop-in",FR="e-drop-next",Vq="e-drop-out",zq="e-no-drop",gv="e-fullrow",wx="e-selected",lH="e-expanded",ite="e-node-collapsed",lh="e-check",Xd="e-stop",Fc="e-checkbox-wrapper",mv="e-frame",Sx="e-node-focus",ste="e-list-img",hH="e-animation-active",ote="e-disabled",ate={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},Vbe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return rH(t,r),ji([E("child")],t.prototype,"child",void 0),ji([E([])],t.prototype,"dataSource",void 0),ji([E("expanded")],t.prototype,"expanded",void 0),ji([E("hasChildren")],t.prototype,"hasChildren",void 0),ji([E("htmlAttributes")],t.prototype,"htmlAttributes",void 0),ji([E("iconCss")],t.prototype,"iconCss",void 0),ji([E("id")],t.prototype,"id",void 0),ji([E("imageUrl")],t.prototype,"imageUrl",void 0),ji([E("isChecked")],t.prototype,"isChecked",void 0),ji([E("parentID")],t.prototype,"parentID",void 0),ji([E(null)],t.prototype,"query",void 0),ji([E("selected")],t.prototype,"selected",void 0),ji([E(null)],t.prototype,"tableName",void 0),ji([E("text")],t.prototype,"text",void 0),ji([E("tooltip")],t.prototype,"tooltip",void 0),ji([E("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(Ti),lte=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return rH(t,r),ji([E("SlideDown")],t.prototype,"effect",void 0),ji([E(400)],t.prototype,"duration",void 0),ji([E("linear")],t.prototype,"easing",void 0),t}(Ti),zbe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return rH(t,r),ji([ln({effect:"SlideUp",duration:400,easing:"linear"},lte)],t.prototype,"collapse",void 0),ji([ln({effect:"SlideDown",duration:400,easing:"linear"},lte)],t.prototype,"expand",void 0),t}(Ti),jbe=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.validNodes=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.hasTemplate=!1,s.isFirstRender=!1,s.isNodeDropped=!1,s.mouseDownStatus=!1,s}var e;return rH(t,r),e=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var i=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Ss,ariaAttributes:ate,expandIconPosition:"Left",itemCreated:function(n){i.beforeNodeCreate(n)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new Cr({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),f(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),f(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),f(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add(ote):this.element.classList.remove(ote)},t.prototype.setEnableRtl=function(){(this.enableRtl?N:z)([this.element],"e-rtl")},t.prototype.setRipple=function(){this.rippleFn=Qi(this.element,{selector:".e-fullrow,.e-text-content",ignore:"."+nl+" > ."+qo+",."+Qee+",."+sH+", ."+Fc}),this.rippleIconFn=Qi(this.element,{selector:"."+nl+" > ."+qo,isCenterRipple:!0})},t.prototype.setFullRow=function(i){(i?N:z)([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(i){var n=le("."+Sr,this.element);i?n.setAttribute("aria-multiselectable","true"):n.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(i){if(i){this.hasTemplate=!0,this.element.classList.add(ete);try{return document.querySelectorAll(i).length?Pi(document.querySelector(i).innerHTML.trim()):Pi(i)}catch{return Pi(i)}}this.element.classList.remove(ete)},t.prototype.setDataBinding=function(i){var n=this;this.treeList.push("false"),this.fields.dataSource instanceof Je?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(s){n.isOffline=n.fields.dataSource.dataSource.offline,n.fields.dataSource instanceof Je&&n.isOffline&&(n.treeList.pop(),n.treeData=s.result,n.isNumberTypeId=n.getType(),n.setRootData(),n.renderItems(!0),0===n.treeList.length&&!n.isLoaded&&n.finalize())}).catch(function(s){n.trigger("actionFailure",{error:s})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(s){n.treeList.pop(),n.treeData=s.result,n.isNumberTypeId=n.getType(),n.setRootData(),i&&(n.changeDataSource=!0),n.renderItems(!0),n.changeDataSource=!1,0===n.treeList.length&&!n.isLoaded&&n.finalize()}).catch(function(s){n.trigger("actionFailure",{error:s})})):(this.treeList.pop(),f(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()},t.prototype.getQuery=function(i,n){void 0===n&&(n=null);var o,s=[];if(i.query)o=i.query.clone();else{o=new si;for(var a=this.getActualProperties(i),l=0,h=Object.keys(a);l<h.length;l++){var u=h[l];"dataSource"!==u&&"tableName"!==u&&"child"!==u&&i[u]&&"url"!==u&&-1===s.indexOf(i[u])&&s.push(i[u])}o.select(s),a.hasOwnProperty("tableName")&&o.from(i.tableName)}return fn.addSorting(this.sortOrder,i.text,o),!f(n)&&!f(i.parentID)&&o.where(i.parentID,"equal",this.isNumberTypeId?parseFloat(n):n),o},t.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof ie(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var i=this.getChildNodes(this.treeData,void 0,!0);this.rootData=f(i)?[]:i}else this.rootData=this.treeData},t.prototype.renderItems=function(i){this.listBaseOption.ariaAttributes.level=1;var n=this.getSortedData(this.rootData);this.ulElement=fn.createList(this.createElement,i?this.rootData:n,this.listBaseOption),this.element.appendChild(this.ulElement);var s=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var o=0;o<s.length;)this.renderChildNodes(s[o],!0,null,!0),o++;(1===Ze("."+Sr,this.element).length&&s&&0!==s.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(i){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var n=this.fields,s=new Je(this.treeData).executeLocal((new si).where(n.isChecked,"equal",!0,!1)),o=0;o<s.length;o++){var a=s[o][this.fields.id]?s[o][this.fields.id].toString():null;if(s[o][this.fields.parentID]&&s[o][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(a)&&!this.isLoaded&&this.checkedNodes.push(a),s[o][this.fields.hasChildren])for(var h=s[o][this.fields.id],u=new Je(this.treeData).executeLocal((new si).where(n.parentID,"equal",h,!1)),d=0;d<u.length;d++){var m=u[d][this.fields.id]?u[d][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(m)&&this.autoCheck&&this.checkedNodes.push(m)}}for(o=0;o<this.checkedNodes.length;o++){var y=this.fields,C=new Je(this.treeData).executeLocal((new si).where(y.id,"equal",this.checkedNodes[o],!0));if(C[0]&&this.autoCheck&&(this.getCheckedNodeDetails(y,C),this.checkIndeterminateState(C[0])),C.length>0){var S=C[0][this.fields.id]?C[0][this.fields.id].toString():null;this.checkedNodes.indexOf(S)>-1&&-1===this.validNodes.indexOf(S)&&this.validNodes.push(S)}for(var I=new Je(this.treeData).executeLocal((new si).where(y.parentID,"equal",this.checkedNodes[o],!0)),k=0;k<I.length;k++)S=I[k][this.fields.id]?I[k][this.fields.id].toString():null,-1===this.checkedNodes.indexOf(S)&&this.autoCheck&&this.checkedNodes.push(S),this.checkedNodes.indexOf(S)>-1&&-1===this.validNodes.indexOf(S)&&this.validNodes.push(S)}}else if(2===this.dataType||this.fields.dataSource instanceof Je&&this.isOffline){for(k=0;k<this.treeData.length;k++){var O=this.treeData[k][this.fields.id]?this.treeData[k][this.fields.id].toString():"";this.treeData[k][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(O)&&this.checkedNodes.push(O),this.checkedNodes.indexOf(O)>-1&&-1===this.validNodes.indexOf(O)&&this.validNodes.push(O);var L=ie(this.fields.child.toString(),this.treeData[k]);L&&this.updateChildCheckState(L,this.treeData[k])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},t.prototype.getCheckedNodeDetails=function(i,n){var s=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=0,a=this.element.querySelector('[data-uid="'+n[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+n[0][this.fields.parentID]+'"]');if(a||l)l&&(le("."+lh,l)||this.changeState(l,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.push(s);for(var u=this.getChildNodes(this.treeData,s),d=0;d<u.length;d++){var m=u[d][this.fields.id]?u[d][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&o++,o===u.length&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s)}var y=new Je(this.treeData).executeLocal((new si).where(i.id,"equal",s,!0));this.getCheckedNodeDetails(i,y)}},t.prototype.updateParentCheckState=function(){for(var n,i=Ze("."+Xd,this.element),s=0;s<i.length;s++){var o=U(i[s],"."+wn),a=o.getAttribute("data-uid").toString(),l=0;if(n=1===this.dataType?new Je(this.treeData).executeLocal((new si).where(this.fields.parentID,"equal",a,!0)):this.getChildNodes(this.treeData,a)){for(var h=0;h<n.length;h++){var u=n[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&l++}if(l===n.length){var d=o.getAttribute("data-uid");-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d),this.changeState(o,"check",null,!0,!0)}else 0===l&&0===this.checkedNodes.length&&this.changeState(o,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(i){var n;(n=this.element.querySelector(1===this.dataType?'[data-uid="'+i[this.fields.parentID]+'"]':'[data-uid="'+i[this.fields.id]+'"]'))?"true"!==n.querySelector("."+Fc).getAttribute("aria-checked")&&this.changeState(n,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(i[this.fields.id].toString())&&this.parentNodeCheck.push(i[this.fields.id].toString())},t.prototype.updateChildCheckState=function(i,n){for(var s=0,o=n[this.fields.id]?n[this.fields.id].toString():"",a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"";i[a][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&s++,this.checkedNodes.indexOf(l)>-1&&-1===this.validNodes.indexOf(l)&&this.validNodes.push(l);var h=ie(this.fields.child.toString(),i[a]);h&&h.length&&(-1===this.parentCheckData.indexOf(n)&&this.parentCheckData.push(n),this.updateChildCheckState(h,i[a])),s===i.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o)}if(0!==s&&this.autoCheck){this.checkIndeterminateState(n);for(var u=0;u<this.parentCheckData.length;u++)n!==this.parentCheckData[u]&&this.parentCheckData[u]&&this.checkIndeterminateState(this.parentCheckData[u])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(i){if(this.showCheckBox){var n=function Dye(r,t,e){void 0===t&&(t=!1),void 0===e&&(e={});var i=r("div",{className:"e-checkbox-wrapper e-css"});if(e.cssClass&&N([i],e.cssClass.split(" ")),e.enableRtl&&i.classList.add("e-rtl"),t){var n=r("span",{className:"e-ripple-container"});Qi(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var s=r("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),i.appendChild(s),e.label){var o=r("span",{className:"e-label"});e.disableHtmlEncode?o.textContent=e.label:o.innerHTML=e.label,i.appendChild(o)}return i}(this.createElement,!0,{cssClass:this.touchClass});n.setAttribute("role","checkbox"),n.setAttribute("aria-label","checkbox");var s=le("div."+qo,i.item),o=i.item.getAttribute("data-uid");i.item.childNodes[0].insertBefore(n,i.item.childNodes[0].childNodes[f(s)?0:1]);var a=ie(i.fields.isChecked,i.curData);this.checkedNodes.indexOf(o)>-1?(le("."+mv,n).classList.add(lh),n.setAttribute("aria-checked","true"),this.addCheck(i.item)):f(a)||"true"!==a.toString()?n.setAttribute("aria-checked","false"):(le("."+mv,n).classList.add(lh),n.setAttribute("aria-checked","true"),this.addCheck(i.item));var l=le("."+mv,n);T.add(l,"mousedown",this.frameMouseHandler,this),T.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(i.item),this.allowMultiSelection&&!i.item.classList.contains(wx)&&i.item.setAttribute("aria-selected","false");var h=i.fields;if(this.addActionClass(i,h.selected,wx),this.addActionClass(i,h.expanded,lH),!f(this.nodeTemplateFn)){var u=i.item.querySelector("."+Ow),d=i.item.getAttribute("data-uid");u.innerHTML="",this.renderNodeTemplate(i.curData,u,d)}this.isRefreshed||this.trigger("drawNode",{node:i.item,nodeData:i.curData,text:i.text})},t.prototype.frameMouseHandler=function(i){!function uR(r,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(r.type,!1,!0),t.dispatchEvent(e)}}(i,le(".e-ripple-container",i.target.parentElement))},t.prototype.addActionClass=function(i,n,s){var a=ie(n,i.curData);!f(a)&&"false"!==a.toString()&&i.item.classList.add(s)},t.prototype.getDataType=function(i,n){if(this.fields.dataSource instanceof Je){for(var s=0;s<i.length;s++)if(this.isOffline){if("string"==typeof n.child&&f(ie(n.child,i[s]))&&!f(ie(n.parentID,i[s])))return 1}else if("string"==typeof n.child&&f(ie(n.child,i[s])))return 1;return 2}s=0;for(var o=i.length;s<o;s++){if("string"==typeof n.child&&!f(ie(n.child,i[s])))return 2;if(!f(ie(n.parentID,i[s]))||!f(ie(n.hasChildren,i[s])))return 1}return 1},t.prototype.getGroupedData=function(i,n){for(var s=(new si).group(n),o=fn.getDataSource(i,s),a=[],l=0;l<o.length;l++)a.push(o[l].items);return a},t.prototype.getSortedData=function(i){return i&&"None"!==this.sortOrder&&(i=fn.getDataSource(i,fn.addSorting(this.sortOrder,this.fields.text))),i},t.prototype.finalizeNode=function(i){for(var n=Ze("."+ste,i),s=0;s<n.length;s++)n[s].setAttribute("alt",ste);if(this.isLoaded){for(var o=Ze("."+wx,i),a=0;a<o.length;a++){this.selectNode(o[a],null);break}z(o,wx)}for(var l=Ze("."+wn+":not(."+lH+")",i),h=0;h<l.length;h++){var u=le("div."+qo,l[h]);u&&u.classList.contains(Ss)&&this.disableExpandAttr(l[h])}var d=Ze("."+lH,i);if(!this.isInitalExpand)for(a=0;a<d.length;a++)this.renderChildNodes(d[a]);z(d,lH),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var i=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:i},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var i=Ze("li",this.element),s=0;s<i.length;s++)i[s].classList.contains(wn)&&(le("."+Sr,i[s])?this.ensureParentCheckState(i[s]):this.ensureChildCheckState(i[s]));else{var o=Ze("."+Xd,this.element);for(s=0;s<o.length;s++)o[s].classList.remove(Xd)}},t.prototype.ensureParentCheckState=function(i){if(!f(i)){if(i.classList.contains(Ef))return;var n=i;i.classList.contains(wn)&&(n=le("."+Sr,i));var s=Ze("."+lh,n),o=Ze("."+Xd,n),a=Ze("."+wn,n),l=i.getElementsByClassName(Fc)[0];a.length===s.length?this.changeState(l,"check",null,!0,!0):s.length>0||o.length>0?this.changeState(l,"indeterminate",null,!0,!0):0===s.length&&this.changeState(l,"uncheck",null,!0,!0);var h=U(i,"."+Sr);if(!f(h)){var u=U(h,"."+wn);this.ensureParentCheckState(u)}}},t.prototype.ensureChildCheckState=function(i,n){if(!f(i)){var s=le("."+Sr,i),o=void 0;if(!f(s)){o=Ze("."+Fc,s);for(var a=i.getElementsByClassName(mv)[0].classList.contains(lh),l=i.getElementsByClassName(mv)[0].classList.contains(Xd),h=s.querySelectorAll("li"),d=void s.parentElement.getAttribute("aria-expanded"),m=0;m<o.length;m++){var y=h[m].getAttribute("data-uid");if(f(this.currentLoadData)||f(ie(this.fields.isChecked,this.currentLoadData[m]))){var C=o[m].getElementsByClassName(mv)[0].classList.contains(lh);a||C&&!this.isLoaded||-1!==this.checkedNodes.indexOf(y)&&this.isLoaded&&(l||a)?d="check":h[m].classList.contains("e-has-child")&&!$t(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(y)||1===this.dataType&&!$t(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(y)?(d="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(y),1)):d="uncheck"}else d=ie(this.fields.isChecked,this.currentLoadData[m])?"check":"uncheck",-1!==this.ele&&(d=a?"check":"uncheck"),"uncheck"===d&&!$t(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(y)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(y),1),d="indeterminate");this.changeState(o[m],d,n,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(i,n){if(Ze("."+wn,this.element),f(i)){var C=Ze("."+Fc,this.element);if(this.loadOnDemand)for(var S=0;S<C.length;S++)this.updateFieldChecked(C[S],n),this.changeState(C[S],n?"check":"uncheck",null,null,null,n);else for(S=0;S<C.length;S++)this.updateFieldChecked(C[S],n),this.changeState(C[S],n?"check":"uncheck")}else for(var o=i.length;o>=0;o--){var a;if(f(a=this.getElement(1===i.length?i[o-1]:i[o]))){var l=void 0;if(""!==(l=i[o-i.length]?i[o-i.length].toString():i[o]?i[o].toString():null)&&n&&l)this.setValidCheckedNode(l),this.dynamicCheckState(l,n);else if(-1!==this.checkedNodes.indexOf(l)&&""!==l&&!n){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var h=this.getChildNodes(this.treeData,l);if(h){for(var u=0;u<h.length;u++){var d=h[u][this.fields.id]?h[u][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(d)){this.checkedNodes.splice(this.checkedNodes.indexOf(d),1);var m=this.element.querySelector('[data-uid="'+d+'"]');m&&this.changeState(m,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}l&&this.dynamicCheckState(l,n),this.updateField(this.treeData,this.fields,l,"isChecked",null)}}else{var y=le("."+Sr+" ."+Fc,a);this.validateCheckNode(y,!n,a,null)}}if(i)for(var I=0;I<i.length;I++)l=i[I]?i[I].toString():"",n||this.updateField(this.treeData,this.fields,l,"isChecked",null);this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(i,n){var s=U(i,"."+wn),o=s.getAttribute("data-uid");"true"===this.getNodeData(s).isChecked&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null)},t.prototype.dynamicCheckState=function(i,n){if(1===this.dataType){var s=0,o=new Je(this.treeData).executeLocal((new si).where(this.fields.id,"equal",i,!0));if(o[0]){var a=o[0][this.fields.id]?o[0][this.fields.id].toString():null,l=o[0][this.fields.parentID]?o[0][this.fields.parentID].toString():null,d=((h=this.element.querySelector('[data-uid="'+l+'"]'))&&le("."+Xd,h),h?le("."+lh,h):null),m=this.element.querySelector('[data-uid="'+a+'"]'),y=this.getChildNodes(this.treeData,l);if(y)for(var C=0;C<y.length;C++){var S=y[C][this.fields.id]?y[C][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(S)&&s++}-1!==this.checkedNodes.indexOf(i)&&h&&a===i&&this.autoCheck?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&m&&a===i&&!n?this.changeState(m,"uncheck",null):-1!==this.checkedNodes.indexOf(i)&&m&&a===i&&n?this.changeState(m,"check",null):-1===this.checkedNodes.indexOf(i)&&!m&&h&&a===i&&this.autoCheck&&0!==s?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&!m&&h&&a===i&&this.autoCheck&&0===s?this.changeState(h,"uncheck",null):!m&&!h&&a===i&&this.autoCheck&&this.updateIndeterminate(i,n)}}else if(2===this.dataType||this.fields.dataSource instanceof Je&&this.isOffline){a=void 0;var h=void 0;for(d=void 0,C=0;C<this.treeData.length;C++){a=this.treeData[C][this.fields.id]?this.treeData[C][this.fields.id].toString():"",d=(h=this.element.querySelector('[data-uid="'+a+'"]'))?le("."+lh,h):null,-1===this.checkedNodes.indexOf(a)&&h&&d&&!n&&this.changeState(h,"uncheck",null);var I=ie(this.fields.child.toString(),this.treeData[C]);I&&this.updateChildIndeterminate(I,a,i,n,a)}}},t.prototype.updateIndeterminate=function(i,n){var a,s=this.getTreeData(i),o=0;1===this.dataType&&(a=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,a);if(l)for(var h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&o++}var d=this.element.querySelector('[data-uid="'+a+'"]');d&&n||!n&&d&&-1===this.parentNodeCheck.indexOf(a)&&0!==o?this.changeState(d,"indeterminate",null):!n&&d&&-1===this.parentNodeCheck.indexOf(a)&&0===o?this.changeState(d,"uncheck",null):d||(n||-1!==this.checkedNodes.indexOf(a)||-1===this.parentNodeCheck.indexOf(a)?(n&&-1===this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)||!n&&-1!==this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)&&0!==o)&&this.parentNodeCheck.push(a):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1),this.updateIndeterminate(a,n),-1!==this.checkedNodes.indexOf(a)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1))},t.prototype.updateChildIndeterminate=function(i,n,s,o,a){for(var l=0,h=0;h<i.length;h++){var u=i[h][this.fields.id]?i[h][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(u)&&l++;var d=this.element.querySelector('[data-uid="'+n+'"]'),m=d?le("."+Xd,d):null,y=d?le("."+lh,d):null,C=this.element.querySelector('[data-uid="'+u+'"]'),S=C?le("."+lh,C):null;if(-1!==this.checkedNodes.indexOf(s)&&d&&u===s&&this.autoCheck)this.changeState(d,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(s)||!d||C||u!==s||o){if(-1===this.checkedNodes.indexOf(s)&&C&&u===s&&!o)this.changeState(C,"uncheck",null);else if(-1===this.checkedNodes.indexOf(s)&&m&&u===s&&this.autoCheck&&0===l&&!o)m.classList.remove(Xd);else if(-1===this.checkedNodes.indexOf(s)&&!C&&y&&u===s&&0===l)this.changeState(d,"uncheck",null);else if(-1===this.checkedNodes.indexOf(u)&&C&&S&&0===l)this.changeState(C,"uncheck",null);else if(!C&&!d&&u===s||-1!==this.parentNodeCheck.indexOf(n)&&this.autoCheck){var I=this.element.querySelector('[data-uid="'+a+'"]');o&&0!==l?this.changeState(I,"indeterminate",null):o&&l===i.length&&-1===this.checkedNodes.indexOf(n)?this.checkedNodes.push(n):!o&&0===l&&-1!==this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n)),-1===this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.push(n)}}else this.changeState(d,this.autoCheck?"uncheck":0!==l?"indeterminate":"uncheck",null);var k=ie(this.fields.child.toString(),i[h]);k&&this.updateChildIndeterminate(k,u,s,o,a)}},t.prototype.changeState=function(i,n,s,o,a,l){var u,h=this,d=U(i,"."+wn);i===d&&(i=le("."+Fc,d)),o?this.nodeCheckAction(i,n,d,u,s,o,a,l):(this.checkActionNodes=[],u=this.getCheckEvent(d,n,s),this.trigger("nodeChecking",u,function(m){m.cancel||h.nodeCheckAction(i,n,d,m,s,o,a,l)}))},t.prototype.nodeCheckAction=function(i,n,s,o,a,l,h,u){var d,m=i.getElementsByClassName(mv)[0];if("check"!==n||m.classList.contains(lh)?"uncheck"===n&&(m.classList.contains(lh)||m.classList.contains(Xd))?(z([m],[lh,Xd]),this.removeCheck(s),d="false"):"indeterminate"===n&&this.autoCheck&&(m.classList.remove(lh),m.classList.add(Xd),this.removeCheck(s),d="mixed"):(m.classList.remove(Xd),m.classList.add(lh),this.addCheck(s),d="true"),f(d="check"===n?"true":"uncheck"===n?"false":d)||i.setAttribute("aria-checked",d),h){var y=[].concat([],this.checkActionNodes);o=this.getCheckEvent(s,n,a),$t(l)&&(o.data=y)}void 0!==u&&this.ensureStateChange(s,u),l||f(d)||(i.setAttribute("aria-checked",d),o.data[0].checked=d,this.trigger("nodeChecked",o),this.checkActionNodes=[])},t.prototype.addCheck=function(i){var n=i.getAttribute("data-uid");!f(n)&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)},t.prototype.removeCheck=function(i){var n=this.checkedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.checkedNodes.splice(n,1)},t.prototype.getCheckEvent=function(i,n,s){this.checkActionNodes.push(this.getNodeData(i));var o=this.checkActionNodes;return{action:n,cancel:!1,isInteracted:!f(s),node:i,data:o}},t.prototype.finalize=function(){var i=le("."+Sr,this.element);if(!f(i)){i.setAttribute("role",ate.treeRole),this.setMultiSelect(this.allowMultiSelection);var n=le("."+wn,this.element);n&&(N([n],Sx),this.updateIdAttr(null,n)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},t.prototype.setTextWrap=function(){(this.allowTextWrap?N:z)([this.element],"e-text-wrap"),Q.isIE&&(this.allowTextWrap?N:z)([this.element],"e-ie-wrap")},t.prototype.updateWrap=function(i){if(this.fullRowSelect)for(var n=i?Ze("."+wn,i):this.liList,s=n.length,o=0;o<s;o++)this.calculateWrap(n[o])},t.prototype.calculateWrap=function(i){var n=le("."+gv,i);n&&n.nextElementSibling&&(n.style.height=this.allowTextWrap?n.nextElementSibling.offsetHeight+"px":"")},t.prototype.doExpandAction=function(){var i=this.expandedNodes;if(this.isInitalExpand&&i.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof Je)this.expandGivenNodes(i);else{for(var n=0;n<i.length;n++){var s=le('[data-uid="'+i[n]+'"]',this.element);if(f(s))i[n]&&-1===this.expandChildren.indexOf(i[n])&&this.expandChildren.push(i[n].toString());else{var o=le("."+Ss,le("."+nl,s));f(o)||this.expandAction(s,o,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(i){var n=this;this.expandCallback(i[this.index],function(){n.index++,n.index<i.length?n.expandGivenNodes(i):n.afterFinalized()})},t.prototype.expandCallback=function(i,n){var s=le('[data-uid="'+i+'"]',this.element);if(f(s))n();else{var o=le("."+Ss,le("."+nl,s));f(o)?n():this.expandAction(s,o,null,!1,n)}},t.prototype.afterFinalized=function(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,this.isLoaded&&!this.isFieldChange||this.isNodeDropped||this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0,this.isNodeDropped=!1},t.prototype.doSelectionAction=function(){var i=Ze("."+wx,this.element),n=this.selectedNodes;if(n.length>0){this.setProperties({selectedNodes:[]},!0);for(var s=0;s<n.length;s++){var o=le('[data-uid="'+n[s]+'"]',this.element);if(o&&!o.classList.contains("e-active")?this.selectNode(o,null,!0):this.selectedNodes.push(n[s]),!this.allowMultiSelection)break}}else this.selectGivenNodes(i);z(i,wx)},t.prototype.selectGivenNodes=function(i){for(var n=0;n<i.length&&(i[n].classList.contains("e-disable")||this.selectNode(i[n],null,!0),this.allowMultiSelection);n++);},t.prototype.clickHandler=function(i){var n=i.originalEvent.target;if(T.remove(this.element,"contextmenu",this.preventContextMenu),n&&!this.dragStartAction){var s=n.classList,o=U(n,"."+wn);if(!o)return;if(3!==i.originalEvent.which){var a=le(".e-ripple-element",o),l=le("."+qo,o);if(this.removeHover(),this.setFocusElement(o),this.showCheckBox&&!o.classList.contains("e-disable")){var h=U(n,"."+Fc);if(!f(h)){var u=le("."+mv,h);return this.validateCheckNode(h,u.classList.contains(lh),o,i.originalEvent),void this.triggerClickEvent(i.originalEvent,o)}}s.contains(Ss)?this.expandAction(o,n,i):s.contains(Cl)?this.collapseNode(o,n,i):a&&l?l.classList.contains("e-ripple")&&l.classList.contains(Ss)?this.expandAction(o,l,i):l.classList.contains("e-ripple")&&l.classList.contains(Cl)?this.collapseNode(o,l,i):!s.contains(Sr)&&!s.contains(wn)&&this.toggleSelect(o,i.originalEvent,!1):!s.contains(Sr)&&!s.contains(wn)&&this.toggleSelect(o,i.originalEvent,!1)}this.triggerClickEvent(i.originalEvent,o)}},t.prototype.nodeCheckedEvent=function(i,n,s){U(i,"."+wn);var a=this.getCheckEvent(i,n?"uncheck":"check",s);a.data=a.data.splice(0,a.data.length-1),this.trigger("nodeChecked",a)},t.prototype.triggerClickEvent=function(i,n){this.trigger("nodeClicked",{event:i,node:n})},t.prototype.expandNode=function(i,n,s){var o=this;if(this.renderReactTemplates(),n.classList.contains(Nq)&&this.hideSpinner(n),this.initialRender||n.classList.add("interaction"),!0!==s||!0===s&&i.classList.contains("e-expanded")){if(!0!==this.preventExpand){z([n],Ss),N([n],Cl);var a=0,l=0,h=this,u=le("."+Sr,i),d=i;this.setHeight(d,u);var m=le("."+wn+"."+$u,i);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(u,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(C){d.style.overflow="hidden",!f(m)&&m instanceof HTMLElement&&m.classList.add(hH),a=d.offsetHeight,l=le("."+nl,i).offsetHeight},progress:function(C){C.element.style.display="block",h.animateHeight(C,a,l)},end:function(C){C.element.style.display="block",!f(m)&&m instanceof HTMLElement&&m.classList.remove(hH),o.expandedNode(d,u,n)}}):this.expandedNode(d,u,n)}}else le("."+Sr,i).style.display="none",this.fields.dataSource instanceof Je&&(this.preventExpand=!1);this.initialRender&&n.classList.add("interaction")},t.prototype.expandedNode=function(i,n,s){n.style.display="block",i.style.display="block",i.style.overflow="",i.style.height="",z([s],fv),this.addExpand(i),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(i),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(i,null),this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(i){i.setAttribute("aria-expanded","true"),z([i],ite);var n=i.getAttribute("data-uid");!f(n)&&-1===this.expandedNodes.indexOf(n)&&this.expandedNodes.push(n)},t.prototype.collapseNode=function(i,n,s){var a,o=this;n.classList.contains(fv)||(N([n],fv),this.isLoaded?(a=this.getExpandEvent(i,s),this.trigger("nodeCollapsing",a,function(l){l.cancel?z([n],fv):o.nodeCollapseAction(i,n,l)})):this.nodeCollapseAction(i,n,a))},t.prototype.nodeCollapseAction=function(i,n,s){var o=this;z([n],Cl),N([n],Ss);var a=0,l=0,h=this,u=le("."+Sr,i),d=i,m=le("."+wn+"."+$u,i);this.isAnimate?this.aniObj.animate(u,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(y){d.style.overflow="hidden",!f(m)&&m instanceof HTMLElement&&m.classList.add(hH),a=le("."+nl,i).offsetHeight,l=d.offsetHeight},progress:function(y){h.animateHeight(y,a,l)},end:function(y){y.element.style.display="none",!f(m)&&m instanceof HTMLElement&&m.classList.remove(hH),o.collapsedNode(d,u,n,s)}}):this.collapsedNode(d,u,n,s)},t.prototype.collapsedNode=function(i,n,s,o){n.style.display="none",i.style.overflow="",i.style.height="",z([s],fv),this.removeExpand(i),this.isLoaded&&(o=this.getExpandEvent(i,null),this.trigger("nodeCollapsed",o))},t.prototype.removeExpand=function(i,n){n?i.removeAttribute("aria-expanded"):this.disableExpandAttr(i);var s=this.expandedNodes.indexOf(i.getAttribute("data-uid"));s>-1&&this.expandedNodes.splice(s,1)},t.prototype.disableExpandAttr=function(i){i.setAttribute("aria-expanded","false"),N([i],ite)},t.prototype.setHeight=function(i,n){n.style.display="block",n.style.visibility="hidden",i.style.height=i.offsetHeight+"px",n.style.display="none",n.style.visibility=""},t.prototype.animateHeight=function(i,n,s){i.element.parentElement.style.height=(i.duration-i.timeStamp)/i.duration*(s-n)+n+"px"},t.prototype.renderChildNodes=function(i,n,s,o){var h,a=this,l=le("div."+qo,i);if(!f(l))if(this.showSpinner(l),this.fields.dataSource instanceof Je){var u=this.parents(i,"."+Sr).length,d=this.getChildFields(this.fields,u,1);if(f(d)||f(d.dataSource))return ce(l),void this.removeExpand(i,!0);this.treeList.push("false"),this.fields.dataSource instanceof Je&&this.isOffline?(this.treeList.pop(),h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.loadChild(h,d,l,i,n,s,o)):d.dataSource.executeQuery(this.getQuery(d,i.getAttribute("data-uid"))).then(function(m){a.treeList.pop(),h=m.result,1===a.dataType&&(a.dataType=2),a.loadChild(h,d,l,i,n,s,o)}).catch(function(m){a.trigger("actionFailure",{error:m})})}else{if(h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(h),f(h)||0===h.length)return ce(l),void this.removeExpand(i,!0);this.listBaseOption.ariaAttributes.level=parseFloat(i.getAttribute("aria-level"))+1,i.appendChild(fn.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(i,l,o),this.setSelectionForChildNodes(h),this.ensureCheckNode(i),this.finalizeNode(i),this.disableTreeNodes(h),this.renderSubChild(i,n,o)}},t.prototype.loadChild=function(i,n,s,o,a,l,h){if(this.currentLoadData=i,f(i)||0===i.length)ce(s),this.removeExpand(o,!0);else{if(this.updateListProp(n),this.fields.dataSource instanceof Je&&!this.isOffline){var u=o.getAttribute("data-uid");jt("child",i,this.getNodeObject(u))}this.listBaseOption.ariaAttributes.level=parseFloat(o.getAttribute("aria-level"))+1,o.appendChild(fn.createList(this.createElement,i,this.listBaseOption)),this.expandNode(o,s,h),this.setSelectionForChildNodes(i),this.ensureCheckNode(o),this.finalizeNode(o),this.disableTreeNodes(i),this.renderSubChild(o,a,h)}l&&l(),0===this.treeList.length&&!this.isLoaded&&this.finalize()},t.prototype.disableTreeNodes=function(i){for(var n=0;n<i.length;){var s=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(s)&&this.doDisableAction([s]),n++}},t.prototype.setSelectionForChildNodes=function(i){var n;for(n=0;n<i.length;n++){var s=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(s)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(i){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(i.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(i),this.ensureParentCheckState(i))),this.currentLoadData=null},t.prototype.getFields=function(i,n,s){return n===s?i:this.getFields(this.getChildMapper(i),n,s+1)},t.prototype.getChildFields=function(i,n,s){return n===s?this.getChildMapper(i):this.getChildFields(this.getChildMapper(i),n,s+1)},t.prototype.getChildMapper=function(i){return"string"==typeof i.child||f(i.child)?i:i.child},t.prototype.getChildNodes=function(i,n,s){var a,o=this;if(void 0===s&&(s=!1),f(i))return a;if(1===this.dataType)return this.getChildGroup(this.groupedData,n,s);if("string"==typeof this.fields.child){var l=i.findIndex(function(y){return y[o.fields.id]&&y[o.fields.id].toString()===n});if(-1!==l)return ie(this.fields.child,i[l]);if(-1===l)for(var h=0,u=i.length;h<u;h++){var d=ie(this.fields.child,i[h]),m=f(d)?-1:d.findIndex(function(y){return y[o.fields.id]&&y[o.fields.id].toString()===n});if(-1!==m)return ie(this.fields.child,d[m]);if(!f(d)&&void 0!==(a=this.getChildNodes(d,n)))break}}return a},t.prototype.getChildGroup=function(i,n,s){var o;if(f(i))return o;for(var a=0,l=i.length;a<l;a++){if(f(i[a][0])||f(ie(this.fields.parentID,i[a][0])))return s?i[a]:[];if(ie(this.fields.parentID,i[a][0]).toString()===n)return i[a]}return o},t.prototype.renderSubChild=function(i,n,s){if(n)for(var o=Ze("."+Ss,i),a=0,l=o.length;a<l;a++){var h=o[a];if(i.querySelector(".e-icons")!==o[a]){var u=U(h,"."+wn);this.expandArgs=this.getExpandEvent(u,null),!0!==s&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(u,n,null,s)}}},t.prototype.toggleSelect=function(i,n,s){i.classList.contains("e-disable")||(this.allowMultiSelection&&(n&&n.ctrlKey||s)&&this.isActive(i)?this.unselectNode(i,n):this.selectNode(i,n,s))},t.prototype.isActive=function(i){return!!i.classList.contains($u)},t.prototype.selectNode=function(i,n,s){var a,o=this;f(i)||!this.allowMultiSelection&&this.isActive(i)&&!f(n)?this.setFocusElement(i):this.isLoaded?(a=this.getSelectEvent(i,"select",n),this.trigger("nodeSelecting",a,function(l){l.cancel||o.nodeSelectAction(i,n,l,s)})):this.nodeSelectAction(i,n,a,s)},t.prototype.nodeSelectAction=function(i,n,s,o){if((!this.allowMultiSelection||!o&&(!n||n&&!n.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&n&&n.shiftKey){this.startNode||(this.startNode=i);var a=this.liList.indexOf(this.startNode),l=this.liList.indexOf(i);if(a>l){var h=a;a=l,l=h}for(var u=a;u<=l;u++){var d=this.liList[u];so(d)&&!d.classList.contains("e-disable")&&this.addSelect(d)}}else this.startNode=i,this.addSelect(i);this.setFocusElement(i),this.isLoaded&&(s.nodeData=this.getNodeData(i),this.trigger("nodeSelected",s))},t.prototype.unselectNode=function(i,n){var o,s=this;this.isLoaded?(o=this.getSelectEvent(i,"un-select",n),this.trigger("nodeSelecting",o,function(a){a.cancel||s.nodeUnselectAction(i,a)})):this.nodeUnselectAction(i,o)},t.prototype.nodeUnselectAction=function(i,n){this.removeSelect(i),this.setFocusElement(i),this.isLoaded&&(n.nodeData=this.getNodeData(i),this.trigger("nodeSelected",n))},t.prototype.setFocusElement=function(i){if(!f(i)){var n=this.getFocusedNode();n&&z([n],Sx),N([i],Sx),this.updateIdAttr(n,i)}},t.prototype.addSelect=function(i){i.setAttribute("aria-selected","true"),N([i],$u);var n=i.getAttribute("data-uid");!f(n)&&-1===this.selectedNodes.indexOf(n)&&this.selectedNodes.push(n)},t.prototype.removeSelect=function(i){this.allowMultiSelection?i.setAttribute("aria-selected","false"):i.removeAttribute("aria-selected"),z([i],$u);var n=this.selectedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.selectedNodes.splice(n,1)},t.prototype.removeSelectAll=function(){for(var i=this.element.querySelectorAll("."+$u),n=0,s=i;n<s.length;n++){var o=s[n];this.allowMultiSelection?o.setAttribute("aria-selected","false"):o.removeAttribute("aria-selected")}z(i,$u),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(i,n,s){var o=this.getNodeData(i);return{action:n,cancel:!1,isInteracted:!f(s),node:i,nodeData:o}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?Q.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains(sH)||n.classList.contains(Ef)||n.classList.contains(Sr)||n.classList.contains(wn)||n.classList.contains(qo)||this.showCheckBox&&U(n,"."+Fc)||this.expandCollapseAction(U(n,"."+wn),i)},t.prototype.expandCollapseAction=function(i,n){var s=le("div."+qo,i);if(s&&!s.classList.contains(fv)){var o=s.classList;o.contains(Ss)?this.expandAction(i,s,n):o.contains(Cl)&&this.collapseNode(i,s,n)}},t.prototype.expandAction=function(i,n,s,o,a){var l=this;n.classList.contains(fv)||(N([n],fv),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(i,s),this.trigger("nodeExpanding",this.expandArgs,function(h){h.cancel?z([n],fv):l.nodeExpandAction(i,n,o,a)})):this.nodeExpandAction(i,n,o,a))},t.prototype.nodeExpandAction=function(i,n,s,o){var a=le("."+Sr,i);if(a&&"UL"===a.nodeName)this.expandNode(i,n);else{this.isFirstRender=!0,this.renderChildNodes(i,s,o);for(var l=Ze("."+wn,i),h=0;h<l.length;h++){var u=this.getId(l[h]);if(-1!==this.expandChildren.indexOf(u)&&void 0!==this.expandChildren){var d=le("."+Ss,le("."+nl,l[h]));f(d)||this.expandAction(l[h],d,null),this.expandChildren.splice(this.expandChildren.indexOf(u),1)}}}},t.prototype.keyActionHandler=function(i){var n=this,s=i.target,o=this.getFocusedNode();if(s&&s.classList.contains(sH)){var a=s;"enter"===i.action?(a.blur(),this.element.focus(),N([o],Ig)):"escape"===i.action&&(a.value=this.oldText,a.blur(),this.element.focus(),N([o],Ig))}else i.preventDefault(),this.trigger("keyPress",{cancel:!1,event:i,node:o},function(h){if(!h.cancel)switch(i.action){case"space":n.showCheckBox&&n.checkNode(i);break;case"moveRight":n.openNode(!n.enableRtl,i);break;case"moveLeft":n.openNode(!!n.enableRtl,i);break;case"shiftDown":n.shiftKeySelect(!0,i);break;case"moveDown":case"ctrlDown":case"csDown":n.navigateNode(!0);break;case"shiftUp":n.shiftKeySelect(!1,i);break;case"moveUp":case"ctrlUp":case"csUp":n.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":n.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":n.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":n.toggleSelect(o,i);break;case"f2":n.allowEditing&&!o.classList.contains("e-disable")&&n.createTextbox(o,i);break;case"ctrlA":if(n.allowMultiSelection){var u=Ze("."+wn+":not(."+$u+")",n.element);n.selectGivenNodes(u)}}})},t.prototype.navigateToFocus=function(i){var n=this.getFocusedNode().querySelector("."+nl),s=n.getBoundingClientRect(),o=this.getScrollParent(this.element);if(!f(o)){var a=o.getBoundingClientRect();s.bottom>a.bottom?o.scrollTop+=s.bottom-a.bottom:s.top<a.top&&(o.scrollTop-=a.top-s.top)}this.isVisibleInViewport(n)||n.scrollIntoView(i)},t.prototype.isVisibleInViewport=function(i){var n=i.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(i){return f(i)?null:i.scrollHeight>i.clientHeight?i:this.getScrollParent(i.parentElement)},t.prototype.shiftKeySelect=function(i,n){if(this.allowMultiSelection){var s=this.getFocusedNode(),o=i?this.getNextNode(s):this.getPrevNode(s);this.removeHover(),this.setFocusElement(o),this.toggleSelect(o,n,!1),this.navigateToFocus(!i)}else this.navigateNode(i)},t.prototype.checkNode=function(i){var n=this.getFocusedNode(),s=le("."+Fc,n),o=le(" ."+mv,s).classList.contains(lh);n.classList.contains("e-disable")||0==n.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(s,o,n,i)},t.prototype.validateCheckNode=function(i,n,s,o){var a=this,l=U(i,"."+wn);this.checkActionNodes=[];var h=n?"false":"true";f(h)||i.setAttribute("aria-checked",h);var u=this.getCheckEvent(l,n?"uncheck":"check",o);this.trigger("nodeChecking",u,function(d){d.cancel||a.nodeCheckingAction(i,n,s,d,o)})},t.prototype.nodeCheckingAction=function(i,n,s,o,a){if(-1===this.checkedElement.indexOf(s.getAttribute("data-uid"))&&(this.checkedElement.push(s.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,s.getAttribute("data-uid"));null!==l?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(i,n?"uncheck":"check",a,!0),this.autoCheck){this.ensureChildCheckState(s),this.ensureParentCheckState(U(U(s,"."+Sr),"."+wn));var h=void 0;"check"===o.action?h=!0:"uncheck"===o.action&&(h=!1),this.ensureStateChange(s,h)}this.nodeCheckedEvent(i,n,a)},t.prototype.ensureStateChange=function(i,n){var s=le("."+Sr,i),o=i.getAttribute("data-uid"),a=this.fields;if(1===this.dataType&&this.autoCheck)for(var l=new Je(this.treeData).executeLocal((new si).where(a.parentID,"equal",o,!0)),h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null,d=l[h][this.fields.isChecked]?l[h][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(u)){this.checkedNodes.push(u);var m=this.getChildNodes(this.treeData,u);this.getChildItems(m,n),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}else if(-1===this.checkedNodes.indexOf(o)&&null===s&&-1!==this.checkedNodes.indexOf(u)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),"true"===d&&this.updateField(this.treeData,this.fields,u,"isChecked",null),-1===this.checkedNodes.indexOf(o)&&null===s||-1!==this.parentNodeCheck.indexOf(u)){var y=this.getChildNodes(this.treeData,u);this.getChildItems(y,n),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}}else m=this.getChildNodes(this.treeData,u),this.getChildItems(m,n)}else if(1!==this.dataType||this.autoCheck)(m=this.getChildNodes(this.treeData,o))&&this.childStateChange(m,o,s,n);else if(n)for(h=0;h<this.treeData.length;h++){var I=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(I)&&this.checkedNodes.push(I)}else{var C=new Je(this.treeData).executeLocal((new si).where(a.isChecked,"equal",!0,!1));for(h=0;h<C.length;h++){var S=C[h][this.fields.id]?C[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(S)&&this.checkedNodes.splice(this.checkedNodes.indexOf(S),1),this.updateField(this.treeData,this.fields,S,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(i,n){for(var s=0;s<i.length;s++){var o=i[s][this.fields.id]?i[s][this.fields.id].toString():null,a=i[s][this.fields.isChecked]?i[s][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(o)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),-1===this.checkedNodes.indexOf(o)&&n&&this.checkedNodes.push(o),"true"===a&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null);var l=this.getChildNodes(this.treeData,o);l.length>0&&this.getChildItems(l,n)}},t.prototype.childStateChange=function(i,n,s,o){for(var a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"",h=i[a][this.fields.isChecked]?i[a][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(l)?(this.checkedNodes.push(l),-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):-1===this.checkedNodes.indexOf(n)&&-1!==this.checkedNodes.indexOf(l)&&!o&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),"true"===h&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(o?-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l):(-1!==this.checkedNodes.indexOf(l)&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var u=this.getChildNodes([i[a]],l);u&&this.childStateChange(u,n,s,o)}},t.prototype.allCheckNode=function(i,n,s,o,a){if(i)for(var l=0;l<i.length;l++){var h=ie(this.fields.id,i[l]),u=this.element.querySelector('[data-uid="'+h+'"]');!1!==a&&-1===this.checkedElement.indexOf(h.toString())&&(null===u&&!f(i[l][this.fields.isChecked])&&-1===n.indexOf(h.toString())||0===o||2===s)&&(!1!==i[l][this.fields.isChecked]||2===s?n.push(h.toString()):o=null,o=!1!==i[l][this.fields.isChecked]||2===s?0:null),-1===n.indexOf(h.toString())&&f(s)&&n.push(h.toString());var d=ie(this.fields.child.toString(),i[l]);if(!0===ie(this.fields.hasChildren,i[l])||d){var y,m=ie(this.fields.id,i[l]);(y=1===this.dataType?this.getChildNodes(this.treeData,m.toString()):d)&&(f(a)?this.allCheckNode(y,n,s,o):this.allCheckNode(y,n,s,o,a),o=null)}o=null}},t.prototype.openNode=function(i,n){var s=this.getFocusedNode(),o=le("div."+qo,s);if(i){if(!o)return;o.classList.contains(Ss)?this.expandAction(s,o,n):this.focusNextNode(s,!0)}else if(o&&o.classList.contains(Cl))this.collapseNode(s,o,n);else{var a=U(U(s,"."+Sr),"."+wn);if(!a)return;a.classList.contains("e-disable")||(this.setFocus(s,a),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(i){var n=this.getFocusedNode();this.focusNextNode(n,i)},t.prototype.navigateRootNode=function(i){var n=this.getFocusedNode(),s=i?this.getRootNode():this.getEndNode();s.classList.contains("e-disable")||(this.setFocus(n,s),this.navigateToFocus(i))},t.prototype.getFocusedNode=function(){var i,n=le("."+wn+"."+Sx,this.element);return f(n)&&(i=le("."+wn,this.element)),f(n)?f(i)?this.element.firstElementChild:i:n},t.prototype.focusNextNode=function(i,n){var s=n?this.getNextNode(i):this.getPrevNode(i);if(this.setFocus(i,s),this.navigateToFocus(!n),s.classList.contains("e-disable")){var o=s.lastChild;null==s.previousSibling&&s.classList.contains("e-level-1")?this.focusNextNode(s,!0):null==s.nextSibling&&s.classList.contains("e-node-collapsed")||null==s.nextSibling&&o.classList.contains(nl)?this.focusNextNode(s,!1):this.focusNextNode(s,n)}},t.prototype.getNextNode=function(i){var s,n=this.liList.indexOf(i);do{if(n++,f(s=this.liList[n]))return i}while(!so(s));return s},t.prototype.getPrevNode=function(i){var s,n=this.liList.indexOf(i);do{if(n--,f(s=this.liList[n]))return i}while(!so(s));return s},t.prototype.getRootNode=function(){var n,i=0;do{n=this.liList[i],i++}while(!so(n));return n},t.prototype.getEndNode=function(){var n,i=this.liList.length-1;do{n=this.liList[i],i--}while(!so(n));return n},t.prototype.setFocus=function(i,n){z([i],[Ig,Sx]),n.classList.contains("e-disable")||(N([n],[Ig,Sx]),this.updateIdAttr(i,n))},t.prototype.updateIdAttr=function(i,n){this.element.removeAttribute("aria-activedescendant"),i&&i.removeAttribute("id"),n.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){this.mouseDownStatus||N([this.getFocusedNode()],Ig),this.mouseDownStatus=!1},t.prototype.focusOut=function(){z([this.getFocusedNode()],Ig)},t.prototype.onMouseOver=function(i){var n=i.target,s=n.classList,o=U(n,"."+wn);!o||s.contains(Sr)||s.contains(wn)?this.removeHover():o&&!o.classList.contains("e-disable")&&this.setHover(o)},t.prototype.setHover=function(i){i.classList.contains(Ig)||(this.removeHover(),N([i],Ig))},t.prototype.onMouseLeave=function(i){this.removeHover()},t.prototype.removeHover=function(){var i=Ze("."+Ig,this.element);i&&i.length&&z(i,Ig)},t.prototype.getNodeData=function(i,n){if(!f(i)&&i.classList.contains(wn)&&!f(U(i,".e-control"))&&U(i,".e-control").classList.contains(Ef)){var s=i.getAttribute("data-uid"),o=this.getText(i,n),a=U(i.parentNode,"."+wn),l=a?a.getAttribute("data-uid"):null,h=i.classList.contains($u),u="true"===i.getAttribute("aria-expanded"),d=null!==i.getAttribute("aria-expanded")||null!=(le("."+Ss,i)||le("."+Cl,i)),m=null,y=le("."+Fc,i);return this.showCheckBox&&y&&(m=y.getAttribute("aria-checked")),{id:s,text:o,parentID:l,selected:h,expanded:u,isChecked:m,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(i,n){if(n){var s=this.getNodeObject(i.getAttribute("data-uid")),o=parseFloat(i.getAttribute("aria-level"));return ie(this.getFields(this.fields,o,1).text,s)}return le("."+Ow,i).textContent},t.prototype.getExpandEvent=function(i,n){var s=this.getNodeData(i);return{cancel:!1,isInteracted:!f(n),node:i,nodeData:s,event:n}},t.prototype.renderNodeTemplate=function(i,n,s){var o=this.nodeTemplateFn(i,this,"nodeTemplate"+s,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,n,this.root);o&&Zt(o=Array.prototype.slice.call(o),n)},t.prototype.destroyTemplate=function(i){this.clearTemplate(["nodeTemplate"+i.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),Q.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",f(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(i,n){!f(i)&&""!==i&&z([this.element],i.split(" ")),!f(n)&&""!==n&&N([this.element],n.split(" "))},t.prototype.editingHandler=function(i){var n=i.target;if(!(!n||n.classList.contains(Ef)||n.classList.contains(Sr)||n.classList.contains(wn)||n.classList.contains(qo)||n.classList.contains(sH)||n.classList.contains(Qee))){var s=U(n,"."+wn);this.createTextbox(s,i)}},t.prototype.createTextbox=function(i,n){var s=this,o=le("."+oH,this.element);o&&o.blur();var a=le("."+Ow,i);this.updateOldText(i);var l=this.createElement("input",{className:oH,attrs:{value:this.oldText}}),h=this.getEditEvent(i,null,l.outerHTML);this.trigger("nodeEditing",h,function(u){if(!u.cancel){var m="width:"+(a.offsetWidth+5)+"px";N([i],Bq),f(s.nodeTemplateFn)||s.destroyTemplate(i),s.isReact?setTimeout(function(){s.renderTextBox(h,a,m)},5):s.renderTextBox(h,a,m)}})},t.prototype.renderTextBox=function(i,n,s){n.innerHTML=i.innerHtml;var o=le("."+oH,n);this.inputObj=ke.createInput({element:o,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",s),o.focus(),o.setSelectionRange(0,o.value.length),this.wireInputEvents(o)},t.prototype.updateOldText=function(i){var n=i.getAttribute("data-uid");this.editData=this.getNodeObject(n);var s=parseFloat(i.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,s,1),this.oldText=ie(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(i){if(le("."+oH,this.element)){var n=i.target,s=n.value,o=U(n,"."+Ow),a=U(n,"."+wn);ce(this.inputObj.container),this.fields.dataSource instanceof Je&&!this.isOffline?this.crudOperation("update",null,a,s,null,null,!0):this.appendNewText(a,o,s,!0)}},t.prototype.appendNewText=function(i,n,s,o){var a=this,l=this.getEditEvent(i,s,null);this.trigger("nodeEdited",l,function(h){a.updateText(i,n,s=h.cancel?h.oldText:h.newText,o),h.oldText!==s&&a.triggerEvent()})},t.prototype.updateText=function(i,n,s,o){var a=jt(this.editFields.text,s,this.editData);if(f(this.nodeTemplateFn))n.innerText=s;else{n.innerText="";var l=i.getAttribute("data-uid");this.renderNodeTemplate(a,n,l),this.renderReactTemplates()}o&&(z([i],Bq),n.focus()),this.allowTextWrap&&this.calculateWrap(i)},t.prototype.getElement=function(i){return f(i)?null:"string"==typeof i?this.element.querySelector('[data-uid="'+i+'"]'):"object"==typeof i?Q1(i):null},t.prototype.getId=function(i){return f(i)?null:"string"==typeof i?i:"object"==typeof i?Q1(i).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(i,n,s){return{cancel:!1,newText:n,node:i,nodeData:this.getNodeData(i),oldText:this.oldText,innerHtml:s}},t.prototype.getNodeObject=function(i){var n;if(f(i))return n;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,i);for(var s=0,o=this.treeData.length;s<o;s++){var a=ie(this.fields.id,this.treeData[s]);if(!f(this.treeData[s])&&!f(a)&&a.toString()===i)return this.treeData[s]}return n},t.prototype.getChildNodeObject=function(i,n,s){var o;if(f(i))return o;for(var a=0,l=i.length;a<l;a++){var h=ie(n.id,i[a]);if(i[a]&&h&&h.toString()===s)return i[a];if("string"!=typeof n.child||f(ie(n.child,i[a]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",i[a]))&&void 0!==(o=this.getChildNodeObject(ie("child",i[a]),this.getChildMapper(n),s)))break}else{var u=ie(n.child,i[a]);if(void 0!==(o=this.getChildNodeObject(u,this.getChildMapper(n),s)))break}}return o},t.prototype.setDragAndDrop=function(i){i&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var n,i=this,s=this;this.dragObj=new tf(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+nl,helper:function(o){i.dragTarget=o.sender.target;var a=U(i.dragTarget,"."+Ef),l=U(i.dragTarget,"."+nl);if(i.dragLi=U(i.dragTarget,"."+wn),i.fullRowSelect&&!l&&i.dragTarget.classList.contains(gv)&&(l=i.dragTarget.nextElementSibling),!i.dragTarget||!o.element.isSameNode(a)||!l||i.dragTarget.classList.contains(Ef)||i.dragTarget.classList.contains(Sr)||i.dragTarget.classList.contains(wn)||i.dragLi.classList.contains("e-disable"))return!1;var h=l.cloneNode(!0);if(f(le("div."+qo,h))){var u=s.createElement("div",{className:qo+" "+Ss});h.insertBefore(u,h.children[0])}(n=s.createElement("div",{className:"e-drag-item "+Ef+" "+i.cssClass+" "+(i.enableRtl?"e-rtl":"")})).appendChild(h);var m=i.selectedNodes.length;if(m>1&&i.allowMultiSelection&&i.dragLi.classList.contains($u)){var y=s.createElement("span",{className:"e-drop-count",innerHTML:""+m});n.appendChild(y)}return document.body.appendChild(n),document.body.style.cursor="",i.dragData=i.getNodeData(i.dragLi),n},dragStart:function(o){N([i.element],Hq);var l,a=U(o.target,".e-list-item");a&&(l=parseInt(a.getAttribute("aria-level"),10));var h=i.getDragEvent(o.event,i,null,o.target,null,n,l);h.draggedNode.classList.contains(Bq)?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.trigger("nodeDragStart",h,function(u){u.cancel?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.dragStartAction=!0})},drag:function(o){i.dragObj.setProperties({cursorAt:{top:!f(o.event.targetTouches)||Q.isDevice?60:-20}}),i.dragAction(o,n)},dragStop:function(o){z([i.element],Hq),i.removeVirtualEle();var a=o.target,h=U(a,"."+tte);(!a||!h)&&(ce(o.helper),document.body.style.cursor="");var d,u=U(a,".e-list-item");u&&(d=parseInt(u.getAttribute("aria-level"),10));var m=i.getDragEvent(o.event,i,a,a,null,o.helper,d);m.preventTargetExpand=!1,i.trigger("nodeDragStop",m,function(y){i.dragParent=y.draggedParentNode,i.preventExpand=y.preventTargetExpand,y.cancel&&(o.helper.parentNode&&ce(o.helper),document.body.style.cursor=""),i.dragStartAction=!1})}}),this.dropObj=new rw(this.element,{out:function(o){!f(o)&&!o.target.classList.contains(PR)&&(document.body.style.cursor="not-allowed")},over:function(o){document.body.style.cursor=""},drop:function(o){i.dropAction(o)}})},t.prototype.dragCancelAction=function(i){ce(i),z([this.element],Hq),this.dragStartAction=!1},t.prototype.dragAction=function(i,n){var s=U(i.target,"."+tte),o=U(i.target,"."+nl),a=le("div."+qo,n);z([a],[aH,FR,Vq,zq]),this.removeVirtualEle(),document.body.style.cursor="";var l=i.target.classList;if(this.fullRowSelect&&!o&&!f(l)&&l.contains(gv)&&(o=i.target.nextElementSibling),s){var h=U(i.target,"."+wn),u=U(i.target,"."+Fc),d=U(i.target,"."+Cl),m=U(i.target,"."+Ss);if(!s.classList.contains(Ef)||o&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h))if(this.hasTemplate&&h){var y=le(this.fullRowSelect?"."+gv:"."+nl,h);i&&!m&&!d&&i.event.offsetY<7&&!u||m&&i.event.offsetY<5||d&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):i&&!m&&!d&&!u&&y&&i.event.offsetY>y.offsetHeight-10||m&&i.event.offsetY>19||d&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):N([a],aH)}else h&&i&&!m&&!d&&i.event.offsetY<7&&!u||m&&i.event.offsetY<5||d&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):h&&i&&!m&&!d&&i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-10&&!u||m&&i.event.offsetY>19||d&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):N([a],aH);else"LI"!==i.target.nodeName||h.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,h)?i.target.classList.contains(PR)?N([a],FR):N([a],Vq):(N([a],FR),this.renderVirtualEle(i))}else N([a],zq),document.body.style.cursor="not-allowed";var I,S=U(i.target,".e-list-item");S&&(I=parseInt(S.getAttribute("aria-level"),10));var k=this.getDragEvent(i.event,this,i.target,i.target,null,n,I);k.dropIndicator&&z([a],k.dropIndicator),this.trigger("nodeDragging",k),k.dropIndicator&&N([a],k.dropIndicator)},t.prototype.appendIndicator=function(i,n,s){N([n],FR);var o=this.createElement("div",{className:PR});i.insertBefore(o,i.children[s])},t.prototype.dropAction=function(i){var o,a,h,n=i.event.offsetY,s=i.target,l=!1;h=i.dragData.draggable;for(var u=0;u<h.ej2_instances.length;u++)if(h.ej2_instances[u]instanceof e){o=h.ej2_instances[u];break}if(o&&o.dragTarget){var m=U(o.dragTarget,"."+wn),y=U(s,"."+wn);if(null==y&&s.classList.contains(Ef)&&(y=s.firstElementChild),ce(i.droppedElement),document.body.style.cursor="",!y||y.isSameNode(m)||this.isDescendant(m,y))return void(this.fields.dataSource instanceof Je||(this.preventExpand=!1));if(o.allowMultiSelection&&m.classList.contains($u)){var C=Ze("."+$u,o.element);if(i.target.offsetHeight<=33&&n>i.target.offsetHeight-10&&n>6)for(u=C.length-1;u>=0;u--)y.isSameNode(C[u])||this.isDescendant(C[u],y)||this.appendNode(s,C[u],y,i,o,n);else for(u=0;u<C.length;u++)y.isSameNode(C[u])||this.isDescendant(C[u],y)||this.appendNode(s,C[u],y,i,o,n)}else this.appendNode(s,m,y,i,o,n);a=parseInt(m.getAttribute("aria-level"),10),l=!0}this.fields.dataSource instanceof Je||(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(i.event,o,s,i.target,i.dragData.draggedElement,null,a,l)),o.element.id!==this.element.id&&(o.triggerEvent(),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent()},t.prototype.appendNode=function(i,n,s,o,a,l){var h=U(i,"."+Fc),u=U(o.target,"."+Cl),d=U(o.target,"."+Ss);n.classList.contains("e-disable")||h||!(d&&o.event.offsetY<5||u&&o.event.offsetX<3||d&&o.event.offsetY>19||u&&o.event.offsetX>19||!d&&!u)?this.dropAsChildNode(n,s,a,null,o,l,!0):"LI"===i.nodeName?this.dropAsSiblingNode(n,s,o,a):i.firstElementChild&&i.classList.contains(Ef)?"UL"===i.firstElementChild.nodeName&&this.dropAsSiblingNode(n,s,o,a):i.classList.contains("e-icon-collapsible")||i.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(n,s,o,a):this.dropAsChildNode(n,s,a,null,o,l)},t.prototype.dropAsSiblingNode=function(i,n,s,o){var u,a=U(n,"."+Sr),l=U(i,"."+Sr),h=U(l,"."+wn);if(s.target.offsetHeight>0&&s.event.offsetY>s.target.offsetHeight-2?u=!1:s.event.offsetY<2?u=!0:(s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible"))&&(s.event.offsetY<5||s.event.offsetX<3?u=!0:(s.event.offsetY>15||s.event.offsetX>17)&&(u=!1)),s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible")){var d=s.target.closest("li");a.insertBefore(i,u?d:d.nextElementSibling)}else a.insertBefore(i,u?s.target:s.target.nextElementSibling);this.moveData(i,n,a,u,o),this.updateElement(l,h),this.updateAriaLevel(i),o.element.id===this.element.id?this.updateList():(o.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(i,n,s,o,a,l,h){var y,u=U(i,"."+Sr),d=U(u,"."+wn),m=U(n,"."+Sr);if(a&&a.target&&(y=le(this.fullRowSelect?"."+gv:"."+nl,n)),a&&l<7&&!h)m.insertBefore(i,n),this.moveData(i,n,m,!0,s);else if(a&&a.target.offsetHeight>0&&l>a.target.offsetHeight-10&&!h&&!this.hasTemplate)m.insertBefore(i,n.nextElementSibling),this.moveData(i,n,m,!1,s);else if(this.hasTemplate&&y&&l>y.offsetHeight-10&&!h)m.insertBefore(i,n.nextElementSibling),this.moveData(i,n,m,!1,s);else{var C=this.expandParent(n),S=C.childNodes[o];C.insertBefore(i,S),this.moveData(i,S,C,!0,s)}this.updateElement(u,d),this.updateAriaLevel(i),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},t.prototype.moveData=function(i,n,s,o,a){var l=U(s,"."+wn),h=this.getId(i),u=a.updateChildField(a.treeData,a.fields,h,null,null,!0),d=this.getId(n),m=this.getDataPos(this.treeData,this.fields,d),y=this.getId(l);if(1===this.dataType){this.updateField(this.treeData,this.fields,y,"hasChildren",!0);var C=f(m)?this.treeData.length:o?m:m+1;if(f(y)&&!this.hasPid)delete u[0][this.fields.parentID];else{var S=this.isNumberTypeId?parseFloat(y):y;jt(this.fields.parentID,S,u[0])}if(this.treeData.splice(C,0,u[0]),a.element.id!==this.element.id){var I=a.removeChildNodes(h);C++;for(var k=0,O=I.length;k<O;k++)this.treeData.splice(C,0,I[k]),C++;a.groupedData=a.getGroupedData(a.treeData,a.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,y,u,o?m:m+1)},t.prototype.expandParent=function(i){var n=le("div."+qo,i);n&&n.classList.contains(Ss)&&!0!==this.preventExpand&&this.expandAction(i,n,null);var o,s=le("."+Sr,i);return!0===this.preventExpand&&!s&&n&&this.renderChildNodes(i),!f(s=le("."+Sr,i))&&!0===this.preventExpand&&(s.style.display="none"),!f(s)&&!1===this.preventExpand&&(s.style.display="block"),f(s)&&!0===this.preventExpand&&(f(n)&&fn.generateIcon(this.createElement,i,Ss,this.listBaseOption),(o=le("div."+qo,i))&&o.classList.add("e-icon-expandable"),s=fn.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(s),o?z([o],Cl):fn.generateIcon(this.createElement,i,Ss,this.listBaseOption),i.setAttribute("aria-expanded","false"),s.style.display="none"),f(s)&&(this.trigger("nodeExpanding",this.getExpandEvent(i,null)),f(n)&&fn.generateIcon(this.createElement,i,Cl,this.listBaseOption),(o=le("div."+qo,i))||(fn.generateIcon(this.createElement,i,Cl,this.listBaseOption),o=le("div."+qo,i)),z([o],Ss),s=fn.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(s),this.addExpand(i),this.trigger("nodeExpanded",this.getExpandEvent(i,null))),s},t.prototype.updateElement=function(i,n){if(n&&0===i.childElementCount){var s=le("div."+qo,n);ce(i),ce(s);var o=this.getId(n);this.updateField(this.treeData,this.fields,o,"hasChildren",!1),this.removeExpand(n,!0)}},t.prototype.updateAriaLevel=function(i){var n=this.parents(i,"."+Sr).length;i.setAttribute("aria-level",""+n),this.updateChildAriaLevel(le("."+Sr,i),n+1)},t.prototype.updateChildAriaLevel=function(i,n){if(!f(i))for(var s=i.childNodes,o=0,a=s.length;o<a;o++){var l=s[o];l.setAttribute("aria-level",""+n),this.updateChildAriaLevel(le("."+Sr,l),n+1)}},t.prototype.renderVirtualEle=function(i){var n;i.event.offsetY>i.target.offsetHeight-2?n=!1:i.event.offsetY<2&&(n=!0);var s=this.createElement("div",{className:PR});i.target.insertBefore(s,i.target.children[this.fullRowSelect?n?1:2:n?0:1])},t.prototype.removeVirtualEle=function(){var i=le("."+PR);i&&ce(i)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(i,n,s,o,a,l,h,u){var d=s?U(s,"."+wn):null,m=d?this.getNodeData(d):null,y=n?n.dragLi:a,C=n?n.dragData:null,S=s?this.parents(s,"."+wn):null,I=n.dragLi.parentElement,k=n.dragLi?U(I,"."+wn):null,O=null,L=null,B=[FR,aH,Vq,zq],j=null,G=!0===u?y:d,ae=G?U(G,".e-list-parent"):null,ve=0,xe=null;if(k=n.dragLi&&null===k?U(I,"."+Ef):k,k=!0===u?this.dragParent:k,l)for(;ve<4;){if(le("."+qo,l).classList.contains(B[ve])){j=B[ve];break}ve++}if(ae){var Le=0;for(ve=0;ve<ae.childElementCount;ve++){if(Le=!0!==u&&ae.children[ve]===y&&d!==y?++Le:Le,!0!==u&&ae.children[ve].classList.contains("e-hover")){L=i.offsetY>=23?ve+1:ve;break}if(ae.children[ve]===G){L=ve;break}}L=0!==Le?--L:L,xe="e-drop-in"==j?"Inside":i.offsetY<7?"Before":"After"}if(s&&(O=0===S.length?null:s.classList.contains(wn)?S[0]:S[1]),d===y&&(O=d),s&&o.offsetHeight<=33&&i.offsetY<o.offsetHeight-10&&i.offsetY>6&&(O=d,!0!==u)){h=++h;var oe=O?le(".e-list-parent",O):null;if(L=oe?oe.children.length:0,!(this.fields.dataSource instanceof Je)&&null===oe&&O){var Ae=O.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,O.getAttribute("data-uid").toString()):null;L=Ae?Ae.length:0}}return{cancel:!1,clonedNode:l,event:i,draggedNode:y,draggedNodeData:C,droppedNode:d,droppedNodeData:m,dropIndex:L,dropLevel:h,draggedParentNode:k,dropTarget:O,dropIndicator:j,target:o,position:xe}},t.prototype.addFullRow=function(i){var n=this.liList.length;if(i)for(var s=0;s<n;s++)this.createFullRow(this.liList[s]);else for(s=0;s<n;s++)ce(le("."+gv,this.liList[s]))},t.prototype.createFullRow=function(i){var n=this.createElement("div",{className:gv});i.insertBefore(n,i.childNodes[0])},t.prototype.addMultiSelect=function(i){if(i)for(var s=0,o=Ze("."+wn+':not([aria-selected="true"])',this.element);s<o.length;s++)o[s].setAttribute("aria-selected","false");else for(var l=0,h=Ze("."+wn+'[aria-selected="false"]',this.element);l<h.length;l++)h[l].removeAttribute("aria-selected")},t.prototype.collapseByLevel=function(i,n,s){if(n>0&&!f(i))for(var o=this.getVisibleNodes(s,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],u=le("."+Cl,le("."+nl,h));f(u)||this.collapseNode(h,u,null),this.collapseByLevel(le("."+Sr,h),n-1,s)}},t.prototype.collapseAllNodes=function(i){for(var n=this.getVisibleNodes(i,Ze("."+Cl,this.element)),s=0,o=n.length;s<o;s++){var a=n[s],l=U(a,"."+wn);this.collapseNode(l,a,null)}},t.prototype.expandByLevel=function(i,n,s){if(n>0&&!f(i))for(var o=this.getVisibleNodes(s,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],u=le("."+Ss,le("."+nl,h));f(u)||this.expandAction(h,u,null),this.expandByLevel(le("."+Sr,h),n-1,s)}},t.prototype.expandAllNodes=function(i){for(var n=this.getVisibleNodes(i,Ze("."+Ss,this.element)),s=0,o=n.length;s<o;s++){var a=n[s],l=U(a,"."+wn);this.expandAction(l,a,null,!0)}},t.prototype.getVisibleNodes=function(i,n){var s=Array.prototype.slice.call(n);if(i)for(var o=0;o<s.length;o++)so(s[o])||(s.splice(o,1),o--);return s},t.prototype.removeNode=function(i){var n=U(i,"."+Sr),s=U(n,"."+wn);f(this.nodeTemplateFn)||this.destroyTemplate(i),ce(i),this.updateElement(n,s),this.removeData(i)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(Ze("."+wn,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var i=Ze("."+$u,this.element);this.selectGivenNodes(i)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var i=Ze('[aria-expanded="true"]',this.element),n=0,s=i.length;n<s;n++)this.addExpand(i[n])},t.prototype.removeData=function(i){if(1===this.dataType){var n=new Je(this.treeData),s=this.getId(i),o={},a=this.isNumberTypeId?parseFloat(s):s;o[this.fields.id]=a,n.remove(this.fields.id,o),this.removeChildNodes(s)}else s=this.getId(i),this.updateChildField(this.treeData,this.fields,s,null,null,!0)},t.prototype.removeChildNodes=function(i){var n=this.getChildGroup(this.groupedData,i,!1),s=[];if(n)for(var o=0,a=n.length;o<a;o++){var l=new Je(this.treeData),h=ie(this.fields.id,n[o]).toString(),u={},d=this.isNumberTypeId?parseFloat(h):h;u[this.fields.id]=d;var m=l.remove(this.fields.id,u);s.push(m[0]),this.removeChildNodes(h)}return s},t.prototype.doGivenAction=function(i,n,s){for(var o=0,a=i.length;o<a;o++){var l=this.getElement(i[o]);if(!f(l)){var h=le("."+n,le("."+nl,l));f(h)||(s?this.expandAction(l,h,null):this.collapseNode(l,h,null))}}},t.prototype.addGivenNodes=function(i,n,s,o,a){if(0!==i.length){var l=this.getSortedData(i),h=n?parseFloat(n.getAttribute("aria-level"))+1:1;o&&this.updateMapper(h);var m,y,C,u=fn.createListItemFromJson(this.createElement,l,this.listBaseOption,h),d=this.getId(n);if(f(n)||(y=le("div."+qo,n)),1===this.dataType&&y&&y.classList.contains(Ss)&&!f(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,d,i,s),this.isFirstRender=!1),m=(C=a||(n?this.expandParent(n):le("."+Sr,this.element))).childNodes[s],!this.isFirstRender||1===this.dataType){if(m||"None"===this.sortOrder){for(var S=0;S<u.length;S++)C.insertBefore(u[S],m);if(1===this.dataType&&!f(n)&&!f(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var I=le("div."+qo,n);I&&I.classList.contains(Ss)&&this.expandAction(n,I,null)}}if(!m&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder)){var k=C.childNodes;for(S=0;S<u.length;S++)for(var O=0;O<k.length;O++){if("Ascending"===this.sortOrder?k[O].textContent.toUpperCase()>u[S].innerText.toUpperCase():k[O].textContent.toUpperCase()<u[S].innerText.toUpperCase()){C.insertBefore(u[S],k[O]);break}C.insertBefore(u[S],k[k.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,d,"hasChildren",!0);var B=this.getId(m),j=f(B)?this.treeData.length:this.getDataPos(this.treeData,this.fields,B);for(O=0;O<i.length;O++){if(!f(d)){var G=this.isNumberTypeId?parseFloat(d):d;jt(this.fields.parentID,G,i[O])}this.treeData.splice(j,0,i[O]),j++}}this.finalizeNode(C)}},t.prototype.updateMapper=function(i){var n=1===i?this.fields:this.getChildFields(this.fields,i-1,1);this.updateListProp(n)},t.prototype.updateListProp=function(i){var n=this.getActualProperties(i);this.listBaseOption.fields=n,this.listBaseOption.fields.url=n.hasOwnProperty("navigateUrl")?n.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(i,n,s){for(var o=null,a=0,l=i.length;a<l;a++){var h=ie(n.id,i[a]);if(i[a]&&h&&h.toString()===s)return a;if("string"!=typeof n.child||f(ie(n.child,i[a]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",i[a]))){var d=ie("child",i[a]);if(null!==(o=this.getDataPos(d,this.getChildMapper(n),s)))break}}else{var u=ie(n.child,i[a]);if(null!==(o=this.getDataPos(u,this.getChildMapper(n),s)))break}}return o},t.prototype.addChildData=function(i,n,s,o,a){var l;if(f(s)){a=f(a)?i.length:a;for(var h=0,u=o.length;h<u;h++)i.splice(a,0,o[h]),a++;return l}for(var d=0,m=i.length;d<m;d++){var y=ie(n.id,i[d]);if(i[d]&&y&&y.toString()===s){if("string"==typeof n.child&&i[d].hasOwnProperty(n.child)&&null!==i[d][n.child]||this.fields.dataSource instanceof Je&&i[d].hasOwnProperty("child"))for(f(S=ie("string"==typeof n.child?n.child:"child",i[d]))&&(S=[]),a=f(a)?S.length:a,h=0,u=o.length;h<u;h++)S.splice(a,0,o[h]),a++;else i[d]["string"==typeof n.child?n.child:"child"]=o;return!0}if("string"!=typeof n.child||f(ie(n.child,i[d]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",i[d]))){var S=ie("child",i[d]);if(void 0!==(l=this.addChildData(S,this.getChildMapper(n),s,o,a)))break}}else{var I=ie(n.child,i[d]);if(void 0!==(l=this.addChildData(I,this.getChildMapper(n),s,o,a)))break}}return l},t.prototype.doDisableAction=function(i){var n=this.nodeType(i),s=this.checkValidId(n);this.validArr=[];for(var o=0,a=s.length;o<a;o++){var l=s[o][this.fields.id].toString();l&&-1===this.disableNode.indexOf(l)&&this.disableNode.push(l);var h=this.getElement(l);h&&(h.setAttribute("aria-disabled","true"),N([h],"e-disable"))}},t.prototype.doEnableAction=function(i){for(var n=this.nodeType(i),s=0,o=n.length;s<o;s++){var a=this.getElement(n[s]),l=n[s];l&&-1!==this.disableNode.indexOf(l)&&this.disableNode.splice(this.disableNode.indexOf(l),1),a&&(a.removeAttribute("aria-disabled"),z([a],"e-disable"))}},t.prototype.nodeType=function(i){for(var n=[],s=0,o=i.length;s<o;s++){var a=void 0;"string"==typeof i[s]?a=i[s]?i[s].toString():null:"object"==typeof i[s]&&(a=i[s]?i[s].getAttribute("data-uid").toString():null),-1==n.indexOf(a)&&n.push(a)}return n},t.prototype.checkValidId=function(i){var n=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(l){return-1!==i.indexOf(l[n.fields.id]?l[n.fields.id].toString():null)});else if(2===this.dataType)for(var s=0;s<this.treeData.length;s++){var o=this.treeData[s][this.fields.id]?this.treeData[s][this.fields.id].toString():null;-1!==i.indexOf(o)&&this.validArr.push(this.treeData[s]);var a=ie(this.fields.child.toString(),this.treeData[s]);a&&this.filterNestedChild(a,i)}return this.validArr},t.prototype.filterNestedChild=function(i,n){for(var s=0;s<i.length;s++){var o=i[s][this.fields.id]?i[s][this.fields.id].toString():null;-1!==n.indexOf(o)&&this.validArr.push(i[s]);var a=ie(this.fields.child.toString(),i[s]);a&&this.filterNestedChild(a,n)}},t.prototype.setTouchClass=function(){var i=U(this.element,".e-bigger");this.touchClass=f(i)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var i=this.selectedNodes,n=0,s=i.length;n<s;n++)this.updateField(this.treeData,this.fields,i[n],"selected",!0);for(var o=this.expandedNodes,a=0,l=o.length;a<l;a++)this.updateField(this.treeData,this.fields,o[a],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var h=this.checkedNodes,u=0;for(l=h.length;u<l;u++)this.updateField(this.treeData,this.fields,h[u],"isChecked",!0)}},t.prototype.removeField=function(i,n,s){if(!f(i)&&!f(n))for(var o=0,a=i.length;o<a;o++){for(var l=0;l<s.length;l++){var h=this.getMapperProp(n,s[l]);f(i[o][h])||delete i[o][h]}"string"!=typeof n.child||f(ie(n.child,i[o]))?this.fields.dataSource instanceof Je&&!f(ie("child",i[o]))&&this.removeField(ie("child",i[o]),this.getChildMapper(n),s):this.removeField(ie(n.child,i[o]),this.getChildMapper(n),s)}},t.prototype.getMapperProp=function(i,n){switch(n){case"selected":return f(i.selected)?"selected":i.selected;case"expanded":return f(i.expanded)?"expanded":i.expanded;case"isChecked":return f(i.isChecked)?"isChecked":i.isChecked;case"hasChildren":return f(i.hasChildren)?"hasChildren":i.hasChildren;default:return n}},t.prototype.updateField=function(i,n,s,o,a){if(!f(s))if(1===this.dataType){var l=this.isNumberTypeId?parseFloat(s):s,h=new Je(this.treeData).executeLocal((new si).where(n.id,"equal",l,!1));jt(this.getMapperProp(n,o),a,h[0])}else this.updateChildField(i,n,s,o,a)},t.prototype.updateChildField=function(i,n,s,o,a,l){var h;if(f(i))return h;for(var u=0,d=i.length;u<d;u++){var m=ie(n.id,i[u]);if(i[u]&&m&&m.toString()===s)return l?h=i.splice(u,1):(jt(this.getMapperProp(n,o),a,i[u]),h=[]),h;if("string"!=typeof n.child||f(ie(n.child,i[u]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",i[u]))){var C=ie("child",i[u]);if(void 0!==(h=this.updateChildField(C,this.getChildMapper(n),s,o,a,l)))break}}else{var y=ie(n.child,i[u]);if(void 0!==(h=this.updateChildField(y,this.getChildMapper(n),s,o,a,l)))break}}return h},t.prototype.triggerEvent=function(){this.renderReactTemplates(),this.trigger("dataSourceChanged",{data:this.treeData})},t.prototype.wireInputEvents=function(i){T.add(i,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(i){var n=this;if(i&&!this.disabled){var s=this;this.touchEditObj=new Ja(this.element,{tap:function(o){n.isDoubleTapped(o)&&2===o.tapCount&&(o.originalEvent.preventDefault(),s.editingHandler(o.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(i){if(i){var n=this;this.touchClickObj=new Ja(this.element,{tap:function(s){n.clickHandler(s)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(i){var n=this;if(i){var s=this;this.touchExpandObj=new Ja(this.element,{tap:function(o){("Click"===n.expandOnType||"DblClick"===n.expandOnType&&n.isDoubleTapped(o)&&2===o.tapCount)&&3!==o.originalEvent.which&&s.expandHandler(o)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(i){this.mouseDownStatus=!0,(i.shiftKey||i.ctrlKey)&&i.preventDefault(),i.ctrlKey&&this.allowMultiSelection&&T.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(i){i.preventDefault()},t.prototype.wireEvents=function(){T.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),T.add(this.element,"focus",this.focusIn,this),T.add(this.element,"blur",this.focusOut,this),T.add(this.element,"mouseover",this.onMouseOver,this),T.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new An(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){T.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),T.remove(this.element,"focus",this.focusIn),T.remove(this.element,"blur",this.focusOut),T.remove(this.element,"mouseover",this.onMouseOver),T.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(i,n){for(var s=[],o=i.parentNode;!f(o);)Xm(o,n)&&s.push(o),o=o.parentNode;return s},t.prototype.isDoubleTapped=function(i){var s,n=i.originalEvent.target;return n&&i.tapCount&&(1===i.tapCount?this.firstTap=U(n,"."+wn):2===i.tapCount&&(s=U(n,"."+wn))),this.firstTap===s},t.prototype.isDescendant=function(i,n){for(var s=n.parentNode;!f(s);){if(s===i)return!0;s=s.parentNode}return!1},t.prototype.showSpinner=function(i){N([i],Nq),kc({target:i,width:Q.isDevice?16:14},this.createElement),rh(i)},t.prototype.hideSpinner=function(i){Nl(i),i.innerHTML="",z([i],Nq)},t.prototype.setCheckedNodes=function(i){i=JSON.parse(JSON.stringify(i)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(i),i.length>0&&this.checkAll(i)},t.prototype.setValidCheckedNode=function(i){if(1===this.dataType){var n=this.fields,s=new Je(this.treeData).executeLocal((new si).where(n.id,"equal",i,!0));if(s[0]&&(this.setChildCheckState(s,i,s[0]),this.autoCheck)){for(var o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,a=this.getChildNodes(this.treeData,o),l=0,h=0;h<a.length;h++){var u=a[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&l++}l===a.length&&-1===this.checkedNodes.indexOf(o)&&o&&this.checkedNodes.push(o)}}else if(2===this.dataType)for(var d=0;d<this.treeData.length;d++){if((this.treeData[d][this.fields.id]?this.treeData[d][this.fields.id].toString():"")===i&&-1===this.checkedNodes.indexOf(i)){this.checkedNodes.push(i);break}var y=ie(this.fields.child.toString(),this.treeData[d]);y&&this.setChildCheckState(y,i,this.treeData[d])}},t.prototype.setChildCheckState=function(i,n,s){var o,a=0;if(1===this.dataType){s&&(o=s[this.fields.id]?s[this.fields.id].toString():null);for(var l=0;l<i.length;l++){var h=i[l][this.fields.id]?i[l][this.fields.id].toString():null;s&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(h)&&this.checkedNodes.push(h),h===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(u=this.getChildNodes(this.treeData,h))&&this.setChildCheckState(u,n,s)}}else for(s&&(o=s[this.fields.id]?s[this.fields.id].toString():""),l=0;l<i.length;l++){var u,d=i[l][this.fields.id]?i[l][this.fields.id].toString():"";s&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(d)&&this.checkedNodes.push(d),d===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(u=ie(this.fields.child.toString(),i[l]))&&this.setChildCheckState(u,n,i[l]),-1!==this.checkedNodes.indexOf(d)&&this.autoCheck&&a++,a===i.length&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o)}},t.prototype.setIndeterminate=function(i){for(var n=0;n<i.length;n++)this.setValidCheckedNode(i[n])},t.prototype.updatePosition=function(i,n,s,o){if(1===this.dataType){var a=this.getDataPos(this.treeData,this.fields,i);if(this.treeData.splice(a,1,n),s){this.removeChildNodes(i);for(var l=0;l<o.length;l++)this.treeData.splice(a,0,o[l]),a++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,i,[n],void 0)},t.prototype.updateChildPosition=function(i,n,s,o,a){for(var l,h=0,u=i.length;h<u;h++){var d=ie(n.id,i[h]);if(i[h]&&d&&d.toString()===s)return i[h]=o[0],!0;if("string"!=typeof n.child||f(ie(n.child,i[h]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",i[h]))){var y=ie("child",i[h]);if(void 0!==(l=this.updateChildPosition(y,this.getChildMapper(n),s,o,a)))break}}else{var m=ie(n.child,i[h]);if(void 0!==(l=this.updateChildPosition(m,this.getChildMapper(n),s,o,a)))break}}return l},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(i,n,s,o,a,l,h){var S,u=this,d=this.fields.dataSource,m=[],y=this.getQuery(this.fields),C=this.fields.id,I={addedRecords:[],deletedRecords:[],changedRecords:[]},k=[];n?k=this.nodeType(n):s&&("string"==typeof s?k[0]=s.toString():"object"==typeof s&&(k[0]=s.getAttribute("data-uid").toString()));for(var O=0,L=k.length;O<L;O++)if(!f(this.getElement(k[O]))){var j=this.getNodeObject(k[O]);m.push(j)}switch(i){case"delete":1==n.length?S=d.remove(C,m[0],y.fromTable,y):(I.deletedRecords=m,S=d.saveChanges(I,C,y.fromTable,y)),S.then(function(ae){return u.deleteSuccess(k)}).catch(function(ae){return u.dmFailure(ae)});break;case"update":m[0][this.fields.text]=o,(S=d.update(C,m[0],y.fromTable,y)).then(function(ae){return u.editSucess(s,o,h)}).catch(function(ae){return u.dmFailure(ae,s,h)});break;case"insert":if(1==a.length)S=d.insert(a[0],y.fromTable,y);else{var G=[];for(O=0,L=a.length;O<L;O++)G.push(a[O]);I.addedRecords=G,S=d.saveChanges(I,C,y.fromTable,y)}S.then(function(ae){var ve=u.getElement(s);u.addSuccess(a,ve,l),u.preventExpand=!1}).catch(function(ae){return u.dmFailure(ae)})}},t.prototype.deleteSuccess=function(i){for(var n=0,s=i.length;n<s;n++){var o=this.getElement(i[n]);f(o)||this.removeNode(o)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()},t.prototype.editSucess=function(i,n,s){var o=this.getElement(i),a=le("."+Ow,o);this.appendNewText(o,a,n,s)},t.prototype.addSuccess=function(i,n,s){var o,a=n?n.querySelector("."+qo):null,l=this;n&&a&&a.classList.contains(Ss)&&null===n.querySelector("."+Sr)?l.renderChildNodes(n,null,function(){o=n.querySelector("."+Sr),l.addGivenNodes(i,n,s,!0,o),l.triggerEvent()}):(this.addGivenNodes(i,n,s,!0),this.triggerEvent())},t.prototype.dmFailure=function(i,n,s){n&&this.updatePreviousText(n,s),this.trigger("actionFailure",{error:i})},t.prototype.updatePreviousText=function(i,n){var s=this.getElement(i),o=le("."+Ow,s);this.updateText(s,o,this.oldText,n)},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)switch(o[s]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=n.checkedNodes,this.setCheckedNodes(i.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=i.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(n.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:f(i.expandedNodes)?[]:i.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var h=this.element.querySelectorAll("li"),u=0;u<h.length;)"true"!==h[u].getAttribute("aria-expanded")&&this.renderChildNodes(h[u],!0,null,!0),u++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:i.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:i.fullRowNavigable},!0),this.listBaseOption.itemNavigable=i.fullRowNavigable,this.reRenderNodes()}},t.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),r.prototype.destroy.call(this)},t.prototype.addNodes=function(i,n,s,o){if(!f(i)){i=JSON.parse(JSON.stringify(i));var a=this.getElement(n);if(this.preventExpand=o,this.fields.dataSource instanceof Je)this.isOffline?this.addSuccess(i,a,s):this.crudOperation("insert",null,n,null,i,s,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(i,a,s);else{if(a)this.addGivenNodes(i,a,s);else{i=this.getSortedData(i);for(var l=0;l<i.length;l++){var h=ie(this.fields.parentID,i[l]);a=h&&this.getElement(h.toString()),this.addGivenNodes([i[l]],a,s)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&a&&this.ensureParentCheckState(a),this.fields.dataSource instanceof Je||(this.preventExpand=!1,this.triggerEvent())}},t.prototype.beginEdit=function(i){var n=this.getElement(i);f(n)||this.disabled||this.createTextbox(n,null)},t.prototype.checkAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!0)},t.prototype.collapseAll=function(i,n,s){f(i)?n>0?this.collapseByLevel(le("."+Sr,this.element),n,s):this.collapseAllNodes(s):this.doGivenAction(i,Cl,!1)},t.prototype.disableNodes=function(i){f(i)||this.doDisableAction(i)},t.prototype.enableNodes=function(i){f(i)||this.doEnableAction(i)},t.prototype.ensureVisible=function(i){var n=this.getElement(i);if(!f(n)){var s=this.parents(n,"."+wn);this.expandAll(s),setTimeout(function(){n.scrollIntoView(!0)},450)}},t.prototype.expandAll=function(i,n,s){f(i)?n>0?this.expandByLevel(le("."+Sr,this.element),n,s):this.expandAllNodes(s):this.doGivenAction(i,Ss,!0)},t.prototype.getAllCheckedNodes=function(){return this.checkedNodes},t.prototype.getDisabledNodes=function(){return this.disableNode},t.prototype.getNode=function(i){var n=this.getElement(i);return this.getNodeData(n,!0)},t.prototype.getTreeData=function(i){var n=this.getId(i);if(this.updatePersistProp(),f(n))return this.treeData;var s=this.getNodeObject(n);return f(s)?[]:[s]},t.prototype.moveNodes=function(i,n,s,o){var a=this.getElement(n);if(!f(a)){for(var l=0;l<i.length;l++){var h=this.getElement(i[l]);f(h)||a.isSameNode(h)||this.isDescendant(h,a)||(this.preventExpand=o,this.dropAsChildNode(h,a,this,s))}this.fields.dataSource instanceof Je||(this.preventExpand=!1),this.triggerEvent()}},t.prototype.refreshNode=function(i,n){if(!f(i)&&!f(n)){var s,o=!1;1==this.dataType&&n.length>1?o=!0:2==this.dataType&&1===n.length&&(f(ie(this.fields.child.toString(),n[0]))||(o=!0));var h,u,l=this.getElement(i);if(s=l?l.getAttribute("data-uid"):i?i.toString():null,this.refreshData=this.getNodeObject(s),n=JSON.parse(JSON.stringify(n)),1==this.dataType&&o){for(var d=0;d<n.length;d++)if(f(n[d][this.fields.parentID])){u=n[d],n.splice(d,1);break}h=de({},this.refreshData,u)}else h=de({},this.refreshData,n[0]);if(f(l))return void this.updatePosition(s,h,o,n);this.isRefreshed=!0;var m=parseFloat(l.getAttribute("aria-level")),y=fn.createListItemFromJson(this.createElement,[h],this.listBaseOption,m),C=le("."+Sr,l),S=ie(this.fields.child.toString(),h);if(o&&C||o&&!f(S)){var I=l.parentElement,k=Array.prototype.indexOf.call(I.childNodes,l);He(l),I.insertBefore(y[0],I.childNodes[k]),this.updatePosition(s,h,o,n),o&&C&&this.expandAll([s])}else{var O=le("."+nl,l),L=le("."+nl,y[0]),B=le("div."+qo,O),j=le("div."+qo,L);B&&j&&(j.classList.contains(Ss)&&B.classList.contains(Cl)?(z([j],Ss),N([j],Cl)):j.classList.contains(Cl)&&B.classList.contains(Ss)?(z([j],Cl),N([j],Ss)):B.classList.contains("interaction")&&N([j],"interaction")),He(O);var G=le("."+gv,l);G.parentNode.insertBefore(L,G.nextSibling),this.updatePosition(s,h,o,n)}if(l=this.getElement(i),h[this.fields.tooltip]&&l.setAttribute("title",h[this.fields.tooltip]),h.hasOwnProperty(this.fields.htmlAttributes)&&h[this.fields.htmlAttributes]){var ae={};po(ae,h[this.fields.htmlAttributes]),ae.class?(N([l],ae.class.split(" ")),delete ae.class):Ue(l,ae)}-1!==this.selectedNodes.indexOf(s)&&(l.setAttribute("aria-selected","true"),N([l],$u)),this.isRefreshed=!1,this.triggerEvent()}},t.prototype.removeNodes=function(i){f(i)||(this.fields.dataSource instanceof Je&&!this.isOffline?this.crudOperation("delete",i):this.deleteSuccess(i))},t.prototype.updateNode=function(i,n){var s=this;if(!f(i)&&!f(n)&&this.allowEditing){var o=this.getElement(i);if(!f(o)){var a=le("."+Ow,o);this.updateOldText(o);var l=this.getEditEvent(o,null,null);this.trigger("nodeEditing",l,function(h){h.cancel||(s.fields.dataSource instanceof Je&&!s.isOffline?s.crudOperation("update",null,i,n,null,null,!1):s.appendNewText(o,a,n,!1))})}}},t.prototype.uncheckAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!1)},ji([E(!1)],t.prototype,"allowDragAndDrop",void 0),ji([E(!1)],t.prototype,"allowEditing",void 0),ji([E(!1)],t.prototype,"allowMultiSelection",void 0),ji([E(!1)],t.prototype,"allowTextWrap",void 0),ji([ln({},zbe)],t.prototype,"animation",void 0),ji([E()],t.prototype,"checkedNodes",void 0),ji([E("")],t.prototype,"cssClass",void 0),ji([E(!1)],t.prototype,"disabled",void 0),ji([E(null)],t.prototype,"dragArea",void 0),ji([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),ji([E(!1)],t.prototype,"enablePersistence",void 0),ji([E()],t.prototype,"expandedNodes",void 0),ji([E("Auto")],t.prototype,"expandOn",void 0),ji([ln({},Vbe)],t.prototype,"fields",void 0),ji([E(!0)],t.prototype,"fullRowSelect",void 0),ji([E(!0)],t.prototype,"loadOnDemand",void 0),ji([E()],t.prototype,"locale",void 0),ji([E()],t.prototype,"nodeTemplate",void 0),ji([E()],t.prototype,"selectedNodes",void 0),ji([E("None")],t.prototype,"sortOrder",void 0),ji([E(!1)],t.prototype,"showCheckBox",void 0),ji([E(!0)],t.prototype,"autoCheck",void 0),ji([E(!1)],t.prototype,"fullRowNavigable",void 0),ji([W()],t.prototype,"actionFailure",void 0),ji([W()],t.prototype,"created",void 0),ji([W()],t.prototype,"dataBound",void 0),ji([W()],t.prototype,"dataSourceChanged",void 0),ji([W()],t.prototype,"drawNode",void 0),ji([W()],t.prototype,"destroyed",void 0),ji([W()],t.prototype,"keyPress",void 0),ji([W()],t.prototype,"nodeChecked",void 0),ji([W()],t.prototype,"nodeChecking",void 0),ji([W()],t.prototype,"nodeClicked",void 0),ji([W()],t.prototype,"nodeCollapsed",void 0),ji([W()],t.prototype,"nodeCollapsing",void 0),ji([W()],t.prototype,"nodeDragging",void 0),ji([W()],t.prototype,"nodeDragStart",void 0),ji([W()],t.prototype,"nodeDragStop",void 0),ji([W()],t.prototype,"nodeDropped",void 0),ji([W()],t.prototype,"nodeEdited",void 0),ji([W()],t.prototype,"nodeEditing",void 0),ji([W()],t.prototype,"nodeExpanded",void 0),ji([W()],t.prototype,"nodeExpanding",void 0),ji([W()],t.prototype,"nodeSelected",void 0),ji([W()],t.prototype,"nodeSelecting",void 0),e=ji([ui],t)}(nn),_g="",n4="",yv=[],wH="";function Nw(r,t,e,i,n,s,o){var a=t;i=i??!0;var l={item:null,index:null};if(r&&r.length){var h=r.length,u=i?r.toLocaleLowerCase():r;u=function oCe(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(u);for(var d=function(S,I){var L,k=I[S],O=void 0;if(t&&n){var B=k,j=s.text.split(".");n.filter(function(G){Array.prototype.slice.call(j).forEach(function(ae){("object"===o&&-1!==B.textContent.toString().indexOf(G[ae])&&B.getAttribute("data-value")===G[s.value]||"string"===o&&-1!==B.textContent.toString().indexOf(G))&&(L="object"===o?G[ae]:G)})})}if(O=n&&L?(i?L.toLocaleLowerCase():L).replace(/^\s+|\s+$/g,""):(i?k.textContent.toLocaleLowerCase():k.textContent).replace(/^\s+|\s+$/g,""),"Equal"===e&&O===u||"StartsWith"===e&&O.substr(0,h)===u||"EndsWith"===e&&O.substr(O.length-u.length)===u||"Contains"===e&&new RegExp(u,"g").test(O))return l.item=k,l.index=S,{value:{item:k,index:S}}},m=0,y=a;m<y.length;m++){var C=d(m,y);if("object"==typeof C)return C.value}return l}return l}function Fb(r,t,e,i){if(""!==t){var n=e?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),Mte(r,new RegExp("StartsWith"===i?"^("+t+")":"EndsWith"===i?"("+t+")$":"("+t+")",n))}}function Mte(r,t){for(var e=0;r.childNodes&&e<r.childNodes.length;e++){if(3===r.childNodes[e].nodeType&&""!==r.childNodes[e].textContent.trim()){var i=r.childNodes[e].nodeValue.trim().replace(t,'<span class="e-highlight">$1</span>');r.childNodes[e].nodeValue="",r.innerHTML=r.innerHTML.trim()+i;break}Mte(r.childNodes[e],t)}}function Lte(r){for(var t=r.querySelectorAll(".e-highlight"),e=t.length-1;e>=0;e--){var i=t[e].parentNode,n=document.createTextNode(t[e].textContent);i.replaceChild(n,t[e])}}var Ote=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gs=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},SH=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ote(t,r),Gs([E()],t.prototype,"text",void 0),Gs([E()],t.prototype,"value",void 0),Gs([E()],t.prototype,"iconCss",void 0),Gs([E()],t.prototype,"groupBy",void 0),Gs([E()],t.prototype,"htmlAttributes",void 0),t}(Ti),tt_root="e-dropdownbase",tt_focus="e-item-focus",tt_li="e-list-item",tt_group="e-list-group-item",EH=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.preventChange=!1,n.isAngular=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n}return Ote(t,r),t.prototype.getPropObject=function(e,i,n){var s=new Object,o=new Object;s[e]=i[e],o[e]=n[e];var l=new Object;return l.newProperty=s,l.oldProperty=o,l},t.prototype.getValueByText=function(e,i,n){var s=null;return f(this.listData)||(s=this.checkValueCase(e,!!i,n)),s},t.prototype.checkValueCase=function(e,i,n,s){var o=this,a=null;s&&(a=e);var l=this.listData,h=this.fields,u=this.typeOfData(l).typeof;if("string"===u||"number"===u||"boolean"===u)for(var d=0,m=l;d<m.length;d++){var y=m[d];f(y)||(n?a=this.checkingAccent(String(y),e,i):i?this.checkIgnoreCase(String(y),e)&&(a=this.getItemValue(String(y),e,i)):this.checkNonIgnoreCase(String(y),e)&&(a=this.getItemValue(String(y),e,i,s)))}else if(i)l.filter(function(S){!f(ie(h.value,S))&&o.checkIgnoreCase(ie(h.text,S).toString(),e)&&(a=ie(h.value,S))});else if(s){var C=null;C=a,l.filter(function(S){var I=ie(h.value,S);!f(I)&&!f(a)&&I.toString()===C.toString()&&(a=ie(h.text,S))})}else l.filter(function(S){o.checkNonIgnoreCase(ie(h.text,S),e)&&(a=ie(h.value,S))});return a},t.prototype.checkingAccent=function(e,i,n){var s=Ye.ignoreDiacritics(String(e)),o=Ye.ignoreDiacritics(i.toString()),a=null;return n?this.checkIgnoreCase(s,o)&&(a=this.getItemValue(String(e),i,n)):this.checkNonIgnoreCase(String(e),i)&&(a=this.getItemValue(String(e),i,n)),a},t.prototype.checkIgnoreCase=function(e,i){return String(e).toLowerCase()===i.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,i){return String(e)===i.toString()},t.prototype.getItemValue=function(e,i,n,s){var l=this.typeOfData(this.listData).typeof;return s?e.toString():n?"string"===l?String(e):this.getFormattedValue(String(e)):"string"===l?i:this.getFormattedValue(i)},t.prototype.templateCompiler=function(e){var i=!1;if(e)try{i=!!Ze(e,document).length}catch{i=!1}return i},t.prototype.l10nUpdate=function(e){var i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var n=e?this.actionFailureTemplate:this.noRecordsTemplate,o=e?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var h=Pi(this.templateCompiler(n)?le(n,document).innerHTML.trim():n)({},this,e?"actionFailureTemplate":"noRecordsTemplate",o,this.isStringTemplate,null,i);if(h&&h.length>0)for(var u=0;u<h.length;u++)i.appendChild(h[u]);this.renderReactTemplates()}else{var m=new as(this.getLocaleName(),{},this.locale);this.l10n=""!==m.getConstant("actionFailureTemplate")?m:new as("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var y=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){var C=this.createElement("li");C.textContent=y,i.appendChild(C),C.classList.add("e-list-nrt"),C.setAttribute("role","option")}else i.innerHTML=y}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=this.typeOfData(this.listData);if("number"==typeof ie(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(e);if("boolean"==typeof ie(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===e||""+e=="true"}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?N(this.enableRtlElements,"e-rtl"):z(this.enableRtlElements,"e-rtl")},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var i=fn.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],n={},s=0;s<this.element.attributes.length;s++)-1===i.indexOf(this.element.attributes[s].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[s].name)&&(n[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));de(n,e,n),this.setProperties({htmlAttributes:n},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,i={value:"value",text:"text"},n=[],s=e.querySelectorAll("select>optgroup"),o=e.querySelectorAll("select>option");if(this.getJSONfromOption(n,o,i),s.length){for(var a=0;a<s.length;a++){var l=s[a],h={};h[i.text]=l.label,h.isHeader=!0;var u=l.querySelectorAll("option");n.push(h),this.getJSONfromOption(n,u,i)}e.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(n,i)},t.prototype.updateFields=function(e,i,n,s,o){var a={fields:{text:e,value:i,groupBy:f(n)?this.fields&&this.fields.groupBy:n,htmlAttributes:f(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:f(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)},t.prototype.getJSONfromOption=function(e,i,n){for(var s=0,o=i;s<o.length;s++){var a=o[s],l={};l[n.text]=a.innerText,l[n.value]=f(a.getAttribute(n.value))?a.innerText:a.getAttribute(n.value),e.push(l)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,i,n,s){var a,o=this;i=i||this.fields,this.isActive=!0;var l={cancel:!1,data:e,query:n};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",l,function(h){if(!h.cancel)if(o.showSpinner(),e instanceof Je){if(o.isRequested=!0,o.isDataFetched)return void o.emptyDataRequest(i);h.data.executeQuery(o.getQuery(h.query)).then(function(y){o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",y,function(C){if(!C.cancel){var S=C.result;0===S.length&&(o.isDataFetched=!0),a=o.renderItems(S,i),o.groupTemplate&&o.renderGroupTemplate(a),o.onActionComplete(a,S,C),o.isRequested=!1,o.bindChildItems(S,a,i,C)}})}).catch(function(y){o.isRequested=!1,o.onActionFailure(y),o.hideSpinner()})}else{var u=new Je(h.data),m={cancel:!1,result:o.getQuery(h.query).executeLocal(u)};o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",m,function(y){y.cancel||(a=o.renderItems(y.result,i),o.onActionComplete(a,y.result,s),o.groupTemplate&&o.renderGroupTemplate(a),o.bindChildItems(y.result,a,i),setTimeout(function(){"multiselect"===o.getModuleName()&&null!=o.itemTemplate&&a.childElementCount>0&&(a.children[0].childElementCount>0||o.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&o.updateDataList()}))})}})},t.prototype.bindChildItems=function(e,i,n,s){var o=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){Zt(o.remainingItems(o.sortedData,n),i),o.liCollections=o.list.querySelectorAll("."+tt_li),o.updateListValues(),o.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,i,n,s){var o=null;if(e)for(var a=[].slice.call(e.querySelectorAll(i)),l=0;l<a.length;l++)if(a[l].getAttribute(n)===s+""){o=a[l];break}return o},t.prototype.raiseDataBound=function(e,i){this.hideSpinner(),this.trigger("dataBound",{items:e,e:i})},t.prototype.remainingItems=function(e,i){var n=new Je(e).executeLocal((new si).skip(100));if(this.itemTemplate){var s=this.templateListItem(n,i);return[].slice.call(s.childNodes)}var o=this.typeOfData(n).typeof;return"string"===o||"number"===o||"boolean"===o?fn.createListItemFromArray(this.createElement,n,!0,this.listOption(n,i),this):fn.createListItemFromJson(this.createElement,n,this.listOption(n,i),1,!0,this)},t.prototype.emptyDataRequest=function(e){var i=[];this.onActionComplete(this.renderItems(i,e),i),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),N([this.list],"e-nodata")},t.prototype.onActionComplete=function(e,i,n){if(this.listData=i,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=f(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var s=0;s<e.childElementCount;s++)e.children[s].classList.contains("e-list-group-item")&&(f(e.children[s].innerHTML)||""==e.children[s].innerHTML)&&N([e.children[s]],"e-hide-group-header");f(this.list)||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+tt_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},t.prototype.postRender=function(e,i,n){var s=e.querySelector("."+tt_li),o=e.querySelector(".e-active");s&&!o&&s.classList.add(tt_focus),i.length<=0?(this.l10nUpdate(),N([e],"e-nodata")):e.classList.remove("e-nodata")},t.prototype.getQuery=function(e){return e||(this.query?this.query:new si)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+tt_group)){var i=this.dataSource,n={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+tt_group);if(this.templateCompiler(this.groupTemplate)){var a=le(this.groupTemplate,document).innerHTML.trim(),l=fn.renderGroupTemplate(a,i,this.fields.properties,s,n,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else if(l=fn.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,s,n,this),this.isGroupChecking)for(h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]});this.renderReactTemplates()}},t.prototype.createListItems=function(e,i){e&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=fn.groupDataSource(e,i.properties,this.sortOrder)),N([this.list],"e-dd-group")):e=this.getSortedDataSource(e);var n=this.listOption(e,i),s=e.length>100?new Je(e).executeLocal((new si).take(100)):e;return this.sortedData=e,fn.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,n,!0,this)},t.prototype.listOption=function(e,i){var n=!f(i.iconCss),s=f(i.properties)?i:i.properties;return de({},null!==i.text||null!==i.value?{fields:s,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)},t.prototype.setFloatingHeader=function(e){!f(this.list)&&!this.list.classList.contains("e-nodata")&&(f(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(tt_group)||(this.fixedHeaderElement.style.display="none"),bi([this.fixedHeaderElement],this.list),this.setFixedHeader()),!f(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e){for(var i=f(e)?this.list:e.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),s=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),a=s;a>-1;a--){if(!f(o[a])&&o[a].classList.contains(tt_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(e,i){var n;if(this.itemTemplate&&e){var s=e;s&&i.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=fn.groupDataSource(s,i.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var o=s.length>100?new Je(s).executeLocal((new si).take(100)):s;n=this.templateListItem("autocomplete"===this.getModuleName()?o:s,i)}else n=this.createListItems(e,i);return n},t.prototype.templateListItem=function(e,i){var n=this.listOption(e,i);if(n.templateID=this.itemTemplateId,n.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var o=le(this.itemTemplate,document).innerHTML.trim();return fn.renderContentTemplate(this.createElement,o,e,i.properties,n,this)}return fn.renderContentTemplate(this.createElement,this.itemTemplate,e,i.properties,n,this)},t.prototype.typeOfData=function(e){for(var n=0;!f(e)&&n<e.length;n++)if(!f(e[n])&&!f("string"==typeof e[n]||"number"==typeof e[n]||"boolean"==typeof e[n]?e[n]:ie(this.fields.value?this.fields.value:"value",e[n])))return{typeof:typeof e[n],item:e[n]};return{typeof:null,item:null}},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));var a=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=a.toString()+"px",Vt(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+tt_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(e).typeof||"number"===this.typeOfData(e).typeof||"boolean"===this.typeOfData(e).typeof)&&(i=""),e=fn.getDataSource(e,fn.addSorting(this.sortOrder,i))}return e},t.prototype.getIndexByValue=function(e){for(var i,n=this.getItems(),s=0;s<n.length;s++)if(!f(e)&&n[s].getAttribute("data-value")===e.toString()){i=s;break}return i},t.prototype.dispatchEvent=function(e,i){var n=document.createEvent("HTMLEvents");n.initEvent(i,!1,!0),e.dispatchEvent(n)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},t.prototype.resetList=function(e,i,n,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!f(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),e="combobox"===this.getModuleName()&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,i,n,s))},t.prototype.updateSelectElementData=function(e){e&&f(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,i){this.isDataFetched=!1;for(var n={},s=0;e.length>s;s++)i[e[s]]&&"fields"===e[s]?(this.setFields(),n[e[s]]=i[e[s]]):i[e[s]]&&(n[e[s]]=i[e[s]]);Object.keys(n).length>0&&(-1===Object.keys(n).indexOf("dataSource")&&(n.dataSource=this.dataSource),this.updateDataSource(n))},t.prototype.onPropertyChanged=function(e,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+tt_group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!f(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}},t.prototype.render=function(e,i){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(tt_root),this.setFields(),this.rippleFun=Qi(this.list,{duration:300,selector:"."+tt_li});var s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!f(s))&&!this.isGroupChecking&&T.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),z([this.element],tt_root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),i||this.initialize(e)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+tt_li)},t.prototype.addItem=function(e,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&f(i)){var n=[].slice.call(this.listData);n.push(e),n=this.getSortedDataSource(n),this.fields.groupBy&&(n=fn.groupDataSource(n,this.fields.properties,this.sortOrder)),i=n.indexOf(e)}var a,s=this.getItems().length,o=this.list.querySelector(".e-active");e=e instanceof Array?e:[e],a=f(i)||i<0||i>s-1?s:i;var l=this.fields;e&&l.groupBy&&(e=fn.groupDataSource(e,l.properties));for(var h=[],u=0;u<e.length;u++){var d=e[u],m=d.isHeader,y=this.createElement("li",{className:m?tt_group:tt_li,id:"option-add-"+u}),C=d instanceof Object?ie(l.text,d):d;if(m&&(y.innerText=C),this.itemTemplate&&!m){var k=Pi(this.templateCompiler(this.itemTemplate)?le(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,y);k&&Zt(k,y)}else m||y.appendChild(document.createTextNode(C));y.setAttribute("data-value",d instanceof Object?ie(l.value,d):d),y.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:y}),h.push(y),this.listData.push(d),"None"===this.sortOrder&&f(i)&&0===a&&(a=null),this.updateActionCompleteData(y,d,a),this.trigger("beforeItemRender",{element:y,item:d})}if(0===s&&f(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=h,Zt(h,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");var O=[];for(u=0;u<e.length;u++){for(var L=this.ulElement.querySelectorAll(".e-list-group-item"),B=0;B<L.length;B++)O[B]=L[B].innerText;if(O.indexOf(h[u].innerText)>-1&&l.groupBy){for(B=0;B<L.length;B++)if(O[B]===h[u].innerText){this.ulElement.insertBefore(h[u+1],"None"===this.sortOrder?L[B+1]:this.ulElement.childNodes[i]),u+=1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(h[u],this.liCollections[a]):this.ulElement.appendChild(h[u]);var j=[].slice.call(this.liCollections);j.splice(a,0,h[u]),this.liCollections=j,a+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(o||0===i)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(e.getAttribute(s[o])){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,i,n){},t.prototype.updateAddItemList=function(e,i){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!f(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(var n=0,s=this.listData;n<s.length;n++)if(!f(o=s[n])&&o===e)return o}else for(var a=0,l=this.listData;a<l.length;a++){var o;if(!f(o=l[a])&&ie(this.fields.value?this.fields.value:"value",o)===e)return o}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(T.remove(this.list,"scroll",this.setFloatingHeader),f(this.rippleFun)||this.rippleFun(),ce(this.list)),r.prototype.destroy.call(this)},Gs([ln({text:null,value:null,iconCss:null,groupBy:null},SH)],t.prototype,"fields",void 0),Gs([E(!1)],t.prototype,"enablePersistence",void 0),Gs([E(null)],t.prototype,"itemTemplate",void 0),Gs([E(null)],t.prototype,"groupTemplate",void 0),Gs([E("No records found")],t.prototype,"noRecordsTemplate",void 0),Gs([E("Request failed")],t.prototype,"actionFailureTemplate",void 0),Gs([E("None")],t.prototype,"sortOrder",void 0),Gs([E(!0)],t.prototype,"enabled",void 0),Gs([E([])],t.prototype,"dataSource",void 0),Gs([E(null)],t.prototype,"query",void 0),Gs([E("StartsWith")],t.prototype,"filterType",void 0),Gs([E(!0)],t.prototype,"ignoreCase",void 0),Gs([E(1e3)],t.prototype,"zIndex",void 0),Gs([E(!1)],t.prototype,"ignoreAccent",void 0),Gs([E()],t.prototype,"locale",void 0),Gs([W()],t.prototype,"actionBegin",void 0),Gs([W()],t.prototype,"actionComplete",void 0),Gs([W()],t.prototype,"actionFailure",void 0),Gs([W()],t.prototype,"select",void 0),Gs([W()],t.prototype,"dataBound",void 0),Gs([W()],t.prototype,"created",void 0),Gs([W()],t.prototype,"destroyed",void 0),Gs([ui],t)}(nn),yCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},_i={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:tt_li,disable:"e-disabled",base:tt_root,focus:tt_focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},bCe={container:null,buttons:[]},Nb=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isAngular=!1,n}return yCe(t,r),t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),r.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(e,i){r.prototype.render.call(this,e,i),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?li(e,["e-label-top"],["e-label-bottom"]):li(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!f(this.ulElement)){var e=this.ulElement.querySelector("."+_i.li);e&&e.classList.add(_i.focus)}},t.prototype.clearAll=function(e,i){this.previousItemData=f(this.itemData)?null:this.itemData,(f(i)||!f(i)&&(f(i.dataSource)||!(i.dataSource instanceof Je)&&0===i.dataSource.length))&&(this.isActive=!0,this.resetSelection(i));var n=this.getItemData();this.previousValue!==n.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){this.list&&(f(e)||!f(e.dataSource)&&(e.dataSource instanceof Je||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(ce(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&N([this.inputWrapper.container],s.split(" "))}else if("disabled"===n&&"disabled"===this.htmlAttributes[n])this.enabled=!1,this.setEnable();else if("readonly"!==n||f(this.htmlAttributes[n]))if("style"===n)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[n]);else{var o=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&o.push("tabindex"),["name","required"].indexOf(n)>-1||0===n.indexOf("data")?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):o.indexOf(n)>-1?"placeholder"===n?ke.setPlaceholder(this.htmlAttributes[n],this.inputElement):this.inputElement.setAttribute(n,this.htmlAttributes[n]):this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){ke.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){ke.setEnabled(this.enabled,this.inputElement),this.enabled?(z([this.inputWrapper.container],_i.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),N([this.inputWrapper.container],_i.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var i,s=0,o=this.getItems();s<o.length;s++){var a=o[s];if(this.getFormattedValue(a.getAttribute("data-value"))===e){i=a;break}}return i},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof Je?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(f(this.value))if(this.text&&f(this.value)){var e=this.getElementByText(this.text);if(f(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var i=e.relatedTarget,n=e.target,s=this.isPreventBlur;if(this.isPreventBlur=!1,s&&!this.isDocumentClick&&this.isPopupOpen&&(!f(n)||!this.isFilterLayout()&&f(i)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(_i.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&n.classList.contains(_i.inputFocus))||f(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&n!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&N([this.inputWrapper.clearButton],_i.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()},t.prototype.resetValueHandler=function(e){var i=U(this.inputElement,"form");if(i&&e.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=n}},t.prototype.wireEvent=function(){T.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),T.add(this.inputWrapper.container,"focus",this.focusIn,this),T.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){T.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=U(this.inputElement,"form");e&&T.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new An(this.targetElement(),Q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&T.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){this.targetElement()&&T.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&U(this.inputElement,"form");e&&T.remove(e,"reset",this.resetValueHandler),Q.isDevice||this.keyboardModule.destroy(),this.showClearButton&&T.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?N([this.inputWrapper.clearButton],_i.clearIconHide):z([this.inputWrapper.clearButton],_i.clearIconHide))},t.prototype.wireListEvents=function(){T.add(this.list,"click",this.onMouseClick,this),T.add(this.list,"mouseover",this.onMouseOver,this),T.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){!this.isRequested&&!f(this.list)&&!f(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var n=U(e.target,"."+tt_li);this.isValidLI(n)&&(this.setSelection(n,e),Q.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,e))},t.prototype.onMouseOver=function(e){var i=U(e.target,"."+tt_li);this.setHover(i)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),N([e],"e-hover"))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&z(e,"e-hover")}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var i=function sCe(r,t,e,i,n){var s;if(_g+=String.fromCharCode(r),setTimeout(function(){_g=""},1e3),_g=i?_g.toLowerCase():_g,wH===n&&n4===_g){for(var o=0;o<yv.length;o++)if(yv[o].classList.contains("e-active")){s=o;break}return yv[s+=1]?yv[s]:yv[0]}var a=t,l=_g.length,u=void 0;o=e=e?e+1:0,yv=[];do{o===a.length&&(o=-1),u=a[s=-1===o?0:o],(i?u.innerText.toLowerCase():u.innerText).substr(0,l)===_g&&yv.push(a[s]),o++}while(o!==e);return n4=_g,wH=n,yv[0]}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);f(i)||(this.setSelection(i,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Nl(this.spinnerElement),z([this.spinnerElement],_i.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){f(this.spinnerElement)&&(this.spinnerElement=Q.isDevice&&!f(this.filterInputObj)&&this.filterInputObj.buttons[1]||!f(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],N([this.spinnerElement],_i.disableIcon),kc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),rh(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var i="pageUp"===e.action||"pageDown"===e.action,n="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var o="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||i||n)||this.isPopupOpen)&&!this.readonly){var a="tab"===e.action||"close"===e.action;if(void 0===this.list&&!this.isRequested&&!a&&"escape"!==e.action&&(this.searchKeyEvent=e,this.renderList(e)),f(this.list)||!f(this.liCollections)&&o&&0===this.liCollections.length||this.isRequested)return;switch((a&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!o&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){var i=this.list.querySelector("."+_i.focus);if(this.isSelectFocusItem(i))this.setSelection(i,e);else if(!f(this.liCollections)){var n="down"===e.action?this.activeIndex+1:this.activeIndex-1,s=0;"autocomplete"===this.getModuleName()&&(s="down"===e.action&&f(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n);var o=f(this.activeIndex)?this.liCollections[s]:this.liCollections[n];f(o)||this.setSelection(o,e)}e.preventDefault()},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName()){var i;if(i="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===i)return;this.setSelection(this.liCollections[i],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),f(this.list)||!f(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var i=this.list.querySelector("."+_i.focus);i&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!f(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,i){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],i)},t.prototype.pageDownSelection=function(e,i){var n=this.getItems();this.setSelection(e<=n.length?this.liCollections[e-1]:this.liCollections[n.length-1],i)},t.prototype.unWireEvent=function(){T.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),T.remove(this.inputWrapper.container,"keypress",this.onSearch),T.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){T.remove(this.list,"click",this.onMouseClick),T.remove(this.list,"mouseover",this.onMouseOver),T.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var i=e.target;if(!f(this.popupObj)&&U(i,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))i!==this.inputElement&&(!this.allowFiltering||i!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!Q.isDevice||i!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(Q.isIE||"edge"===Q.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(_i.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var n=this.isRequested;this.isInteracted=!1,this.hidePopup(e),n||(this.onFocusOut(),this.inputWrapper.container.classList.remove(_i.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(_i.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(_i.disable)&&this.inputWrapper.clearButton!==e.target){var i=e.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&"combobox"!==this.getModuleName()&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var n=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){n.cloneElements(),n.isSecondClick=!0},s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,i,n,s){var o=this;this.removeSelection(),e.classList.add("e-active"),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),l=this.getDataByValue(a);if(this.initial||n||f(i))this.selectEventCallback(e,i,n,l,a),s&&this.setSelectOptions(e,i);else{var h=this.detachChanges(l);this.isSelected=!0,this.trigger("select",{e:i,item:e,itemData:h,isInteracted:!!i,cancel:!1},function(d){d.cancel?e.classList.remove("e-active"):(o.selectEventCallback(e,i,n,l,a),s&&o.setSelectOptions(e,i))})}},t.prototype.selectEventCallback=function(e,i,n,s,o){this.previousItemData=f(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;var a=this.list.querySelector("."+tt_focus);a&&z([a],tt_focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(o)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var i=this.getItemData();ke.setValue(null===i.value?null:i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!f(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(ce(this.valueTempElement),this.inputElement.style.display="block");var n=_i.clearIcon,o=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+n);return this.isFiltering()&&o&&o.style.removeProperty("visibility"),this.previousValue===i.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,i){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,i,!1,!0):this.setSelectOptions(e,i)},t.prototype.setSelectOptions=function(e,i){this.list&&this.removeHover(),this.previousSelectedLI=f(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(i)&&((!this.isPopupOpen&&!f(e)||this.isPopupOpen&&!f(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!f(this.selectedLI)&&null!==this.itemData&&(!i||"click"!==i.type)&&this.setScrollPosition(i),"mozilla"!==Q.info.name&&(Ue(this.targetElement(),{"aria-label":this.inputElement.value}),Ue(this.targetElement(),{"aria-describedby":""!=this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||f(this.ulElement)||f(this.ulElement.getElementsByClassName("e-item-focus")[0])?this.isPopupOpen&&!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-active")[0])&&Ue(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):Ue(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.dropdownCompiler=function(e){var i=!1;if(e)try{i=!!document.querySelectorAll(e).length}catch{i=!1}return i},t.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(ce(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:_i.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var n=Pi(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.valueTempElement.appendChild(n[s]);this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll(".e-active");e.length&&(z(e,"e-active"),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var i,n,s,e=this.fields;return f(i=this.itemData)||(n=ie(e.value,i),s=ie(e.text,i)),{value:f(i)||$t(n)?i:n,text:f(i)||$t(n)?i:s}},t.prototype.onChangeEvent=function(e){var i=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:i.text,value:i.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=f(this.text)?"":this.text,!this.initial){var n,i=this.detachChanges(this.itemData);n="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:n,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(f(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&z([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(f(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString());else{var e;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,"autocomplete"===this.getModuleName()&&!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-item-focus")[0])&&Ue(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=e?e.clone():this.query?this.query.clone():new si;var n=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;i.where((this.dataSource instanceof Je||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",n,this.typedString,this.ignoreCase,this.ignoreAccent)}else i=e?e.clone():this.query?this.query.clone():new si;return i},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+_i.clearIcon)&&(this.filterInput.parentElement.querySelector("."+_i.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(o,a,l){s.cancel||(i.isCustomFilter=!0,i.filteringAction(o,a,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",s,function(o){!o.cancel&&!i.isCustomFilter&&!o.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},t.prototype.filter=function(e,i,n){this.isCustomFilter=!0,this.filteringAction(e,i,n)},t.prototype.filteringAction=function(e,i,n){f(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,i=""===this.filterInput.value.trim()?null:i,this.resetList(e,n,i)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!f(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=e.querySelector("."+_i.filterParent)?e.querySelector("."+_i.filterParent):this.createElement("span",{className:_i.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:_i.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var n=!1;return Q.isDevice&&(n=!0),this.filterInputObj=ke.createInput({element:this.filterInput,buttons:n?[_i.backIcon,_i.filterBarClearIcon]:[_i.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),f(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?N([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&N([this.filterInputObj.container],"e-filled")),Zt([this.filterInputObj.container],i),bi([i],e),Ue(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+_i.clearIcon),!Q.isDevice&&this.clearIconElement&&(T.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new An(this.filterInput,Q.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),T.add(this.filterInput,"input",this.onInput,this),T.add(this.filterInput,"keyup",this.onFilterUp,this),T.add(this.filterInput,"keydown",this.onFilterDown,this),T.add(this.filterInput,"blur",this.onBlurHandler,this),T.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return bCe},t.prototype.onInput=function(e){this.isValidKey=!0,Q.isDevice&&"mozilla"===Q.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.searchLists(e)})},t.prototype.onActionFailure=function(e){r.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(e,i,n,s){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(r.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!f(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!f(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,f(e)||Ue(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initRemoteRender=!1,this.value&&this.dataSource instanceof Je){var l=f(this.fields.value)?this.fields.text:this.fields.value,h=this.fields.value.split(".");i.some(function(d){return f(d[l])&&h.length>1?o.checkFieldValue(d,h)===o.value:d[l]===o.value})?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new kn(l,"equal",this.value))).then(function(d){d.result.length>0&&o.addItem(d.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||f(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Je||!f(this.dataSource)&&!f(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&("EJS-COMBOBOX"===this.element.tagName||"EJS-DROPDOWNLIST"===this.element.tagName)&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.addNewItem(i,a),f(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup(n)}},t.prototype.checkFieldValue=function(e,i){var n=e;return i.forEach(function(s){n=n[s]}),n},t.prototype.updateActionCompleteDataValues=function(e,i){this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,i){var n=this;if(!f(this.itemData)&&!f(i)){var s=this.getItemData().value;e.some(function(a){return("string"==typeof a||"number"==typeof a)&&a===s||ie(n.fields.value,a)===s})||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,i,n){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,i,n)},0):this.actionCompleteDataUpdate(e,i,n))},t.prototype.actionCompleteDataUpdate=function(e,i,n){null!=n?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[n]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var i=this.findListElement(this.list,"li","data-value",e);this.selectedLI=i,this.activeItem(i),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+tt_li).classList.add(_i.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+_i.focus);e&&e.length&&z(e,_i.focus)},t.prototype.renderPopup=function(e){var i=this;this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},function(s){if(s.cancel)i.beforePopupOpen=!1;else{var o=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(null!=i.cssClass?i.cssClass:"")}),a=i.setSearchBox(o);if(i.listHeight=ot(i.popupHeight),i.headerTemplate&&i.setHeaderTemplate(o),Zt([i.list],o),i.footerTemplate&&i.setFooterTemplate(o),document.body.appendChild(o),o.style.visibility="hidden","auto"!==i.popupHeight){if(i.searchBoxHeight=0,f(a.container)||(i.searchBoxHeight=a.container.parentElement.getBoundingClientRect().height,i.listHeight=(parseInt(i.listHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:o.querySelector(".e-ddl-header");var l=Math.round(i.header.getBoundingClientRect().height);i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"}i.footerTemplate&&(i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer"),l=Math.round(i.footer.getBoundingClientRect().height),i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"),i.list.style.maxHeight=(parseInt(i.listHeight,10)-2).toString()+"px",o.style.maxHeight=ot(i.popupHeight)}else o.style.height="auto";var h=0,u=void 0;if(!f(i.selectedLI)&&!f(i.activeIndex)&&i.activeIndex>=0?i.setScrollPosition():i.list.scrollTop=0,Q.isDevice&&!i.allowFiltering&&("dropdownlist"===i.getModuleName()||i.isDropDownClick&&"combobox"===i.getModuleName())){h=i.getOffsetValue(o);var d=i.isEmptyList()?i.list:i.liCollections[0];u=-(parseInt(getComputedStyle(d).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10))}i.getFocusElement(),i.createPopup(o,h,u),i.checkCollision(o),Q.isDevice&&(i.popupObj.element.classList.add(_i.device),("dropdownlist"===i.getModuleName()||"combobox"===i.getModuleName()&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&(i.popupObj.element.classList.add(_i.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),Ue(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),N([document.body,i.popupObj.element],_i.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=a.container.querySelector(".e-back-icon"),i.clearIconElement=a.container.querySelector("."+_i.clearIcon),T.add(i.backIconElement,"click",i.clickOnBackIcon,i),T.add(i.clearIconElement,"click",i.clearText,i))),o.style.visibility="visible",N([o],"e-popup-close");for(var y=0,C=i.popupObj.getScrollableParent(i.inputWrapper.container);y<C.length;y++)T.add(C[y],"scroll",i.scrollHandler,i);f(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,Ue(i.targetElement(),{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.inputElement.setAttribute("aria-expanded","true"),N([i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container],[_i.inputFocus]),i.beforePopupOpen=!0,i.trigger("open",{popup:i.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}},function(B){B.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(N([i.inputWrapper.container],[_i.iconAnimation]),i.renderReactTemplates(),i.popupObj.show(new Cr(B.animation),1e3===i.zIndex?i.element:null))})}})},t.prototype.checkCollision=function(e){(!Q.isDevice||Q.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(rf(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())},t.prototype.getOffsetValue=function(e){var i=getComputedStyle(e),n=parseInt(i.borderTopWidth,10),s=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(n+s)},t.prototype.createPopup=function(e,i,n){var s=this;this.popupObj=new Ol(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]),s.getModuleName(),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup(),s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list[0]&&(s.isActive=!0,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0))},open:function(){T.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var o=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),a=s.list.querySelector("ul li");f(s.ulElement)||f(s.ulElement.getElementsByClassName("e-item-focus")[0])?!f(s.ulElement)&&!f(s.ulElement.getElementsByClassName("e-active")[0])&&Ue(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-active")[0].id}):Ue(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-item-focus")[0].id}),s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&o&&a&&o.textContent!==a.textContent&&"EJS-COMBOBOX"!==s.element.tagName&&s.cloneElements(),s.isFilterLayout()&&(z([s.inputWrapper.container],[_i.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&N([s.inputWrapper.clearButton],_i.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){Q.isDevice||s.hidePopup()}})},t.prototype.isEmptyList=function(){return!f(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){Q.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+_i.clearIcon);ce(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},t.prototype.setPopupPosition=function(e){var i,n=e,s=this.list.querySelector("."+_i.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=o.getBoundingClientRect().height,h=this.list.offsetHeight/2,u=f(s)?o.offsetTop:s.offsetTop;if(a.offsetTop-h<u&&!f(this.liCollections)&&this.liCollections.length>0&&!f(s)){var m=this.list.offsetHeight/l,y=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(m-(this.liCollections.length-this.activeIndex))*l-n+y,this.list.scrollTop=s.offsetTop}else u>h?(i=h-l/2,this.list.scrollTop=u-h+l/2):i=u;return-(i=i+l+n-(l-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=ot(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),Q.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var n=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(n).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!f(this.selectedLI)){var i=this.list.offsetHeight,n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+n-i;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!f(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(n>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=s)}},t.prototype.scrollTop=function(){if(!f(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!f(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!f(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(f(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},t.prototype.setEleWidth=function(e){f(e)||("number"==typeof e?this.inputWrapper.container.style.width=ot(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:ot(e)))},t.prototype.closePopup=function(e,i){var n=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){T.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=0,a=this.popupObj.getScrollableParent(this.inputWrapper.container);o<a.length;o++)T.remove(a[o],"scroll",this.scrollHandler);Q.isDevice&&this.isFilterLayout()&&z([document.body,this.popupObj.element],_i.popupFullScreen),this.isFilterLayout()&&(Q.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&T.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(T.remove(this.backIconElement,"click",this.clickOnBackIcon),T.remove(this.clearIconElement,"click",this.clearText)),T.remove(this.filterInput,"input",this.onInput),T.remove(this.filterInput,"keyup",this.onFilterUp),T.remove(this.filterInput,"keydown",this.onFilterDown),T.remove(this.filterInput,"blur",this.onBlurHandler),T.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),Ue(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(_i.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0},event:i||null},function(m){if(!f(n.popupObj)&&!f(n.popupObj.element.querySelector(".e-fixed-head"))){var y=n.popupObj.element.querySelector(".e-fixed-head");y.parentNode.removeChild(y),n.fixedHeaderElement=null}m.cancel||("autocomplete"===n.getModuleName()&&n.rippleFun(),n.isPopupOpen?n.popupObj.hide(new Cr(m.animation)):n.destroyPopup())})}},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),ce(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,f(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),f(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.cssClass.replace(/\s+/g," ").trim()),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=ke.createInput({element:this.inputElement,buttons:this.isPopupButton()?[_i.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:_i.hiddenElement}}),bi([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=ot(this.width),this.inputWrapper.container.classList.add("e-ddl"),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):Gi("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),Ue(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var n=this.element;this.value=n.options[n.selectedIndex].value,this.text=f(this.value)?null:n.options[n.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(o){o.stopImmediatePropagation()},this.inputElement.onchange=function(o){o.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),f(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var s=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!f(this.element.id)&&""!==this.element.id&&!f(s)&&(s.id="label_"+this.element.id.replace(/ /g,"_"),Ue(this.inputElement,{"aria-labelledby":s.id})),this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.isReact?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),N([this.footer],_i.footer));var s=Pi(this.dropdownCompiler(this.footerTemplate)?le(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(s&&s.length>0)for(var o=0;o<s.length;o++)this.footer.appendChild(s[o]);Zt([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),N([this.header],_i.header));var s=Pi(this.dropdownCompiler(this.headerTemplate)?le(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(s&&s.length)for(var o=0;o<s.length;o++)this.header.appendChild(s[o]);var a=e.querySelector("div.e-content");e.insertBefore(this.header,a)},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!Q.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(z([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){e.dataSource&&!f(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof Je)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=-1!==Object.keys(e).indexOf("value")&&f(e.value),n=-1!==Object.keys(e).indexOf("text")&&f(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(i||n)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!f(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!f(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e){(""!==this.inputElement.value||!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Je)&&0===e.dataSource.length))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(T.remove(this.list,"scroll",this.setFloatingHeader),T.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Je)&&0===e.dataSource.length))||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({text:e.text,value:e.value})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(e,i){var n=this;"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=function(u){switch(u){case"query":case"dataSource":break;case"htmlAttributes":o.setHTMLAttributes();break;case"width":o.setEleWidth(e.width),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"placeholder":ke.setPlaceholder(e.placeholder,o.inputElement);break;case"filterBarPlaceholder":o.filterInput&&ke.setPlaceholder(e.filterBarPlaceholder,o.filterInput);break;case"readonly":"dropdownlist"!==o.getModuleName()&&ke.setReadonly(e.readonly,o.inputElement),o.setReadOnly();break;case"cssClass":o.setCssClass(e.cssClass,i.cssClass),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"enableRtl":o.setEnableRtl();break;case"enabled":o.setEnable();break;case"text":if(null===e.text){o.clearAll();break}if(o.list||(o.dataSource instanceof Je&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var d=o.getElementByText(e.text);if(!o.checkValidLi(d))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.text,i.text,"text");else if(e.text&&o.dataSource instanceof Je){var m=o.getItems().length,y=f(o.fields.text)?o.fields.value:o.fields.text;o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new kn(y,"equal",e.text))).then(function(O){O.result.length>0?(n.addItem(O.result,m),n.updateValues()):n.setOldText(i.text)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldText(i.text);o.updateInputFields()}break;case"value":if(null===e.value){o.clearAll();break}if(o.notify("beforeValueChange",{newProp:e}),o.list||(o.dataSource instanceof Je&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var C=o.getElementByValue(e.value);if(!o.checkValidLi(C))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.value,i.value,"value");else if(e.value&&o.dataSource instanceof Je){var S=o.getItems().length;y=f(o.fields.value)?o.fields.text:o.fields.value,o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new kn(y,"equal",e.value))).then(function(L){L.result.length>0?(n.addItem(L.result,S),n.updateValues()):n.setOldValue(i.value)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldValue(i.value);o.updateInputFields(),o.preventChange=o.isAngular&&o.preventChange?!o.preventChange:o.preventChange}break;case"index":if(null===e.index){o.clearAll();break}o.list||(o.dataSource instanceof Je&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender&&o.liCollections&&(o.checkValidLi(o.liCollections[e.index])||(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100?o.setSelectionData(e.index,i.index,"index"):o.index=i.index),o.updateInputFields());break;case"footerTemplate":o.popupObj&&o.setFooterTemplate(o.popupObj.element);break;case"headerTemplate":o.popupObj&&o.setHeaderTemplate(o.popupObj.element);break;case"valueTemplate":!f(o.itemData)&&null!=o.valueTemplate&&o.setValueTemplate();break;case"allowFiltering":o.allowFiltering&&(o.actionCompleteData={ulElement:o.ulElement,list:o.listData,isUpdated:!0},o.actionData=o.actionCompleteData,o.updateSelectElementData(o.allowFiltering));break;case"floatLabelType":ke.removeFloating(o.inputWrapper),ke.addFloating(o.inputElement,e.floatLabelType,o.placeholder,o.createElement),!f(o.inputWrapper.buttons[0])&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==o.floatLabelType&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":ke.setClearButton(e.showClearButton,o.inputElement,o.inputWrapper,null,o.createElement),o.bindClearEvent();break;default:var k=o.getPropObject(u,e,i);r.prototype.onPropertyChanged.call(o,k.newProperty,k.oldProperty)}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a])},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,i,n){var o,s=this;this.updateListValues=function(){"text"===n?(o=s.getElementByText(e),s.checkValidLi(o)||s.setOldText(i)):"value"===n?(o=s.getElementByValue(e),s.checkValidLi(o)||s.setOldValue(i)):"index"===n&&(s.checkValidLi(o=s.liCollections[e])||(s.index=i))}},t.prototype.setReadOnly=function(){this.readonly?N([this.inputWrapper.container],["e-readonly"]):z([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,i){},t.prototype.setCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupObj&&ke.setCssClass(e,[this.popupObj.element],i)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof Je&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(f(this.list)||!$t(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+tt_li).length<=0))&&this.renderList(e),this.invokeRenderPopup(e)}},t.prototype.invokeRenderPopup=function(e){if(Q.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}(!f(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,f(this.index))this.resetSelection();else{var i=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,e);var n=this.getItemData(),s=!f(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(_i.disable)){var i=!1;this.preventFocus&&Q.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),N([this.inputWrapper.container],[_i.inputFocus]),this.onFocus(e),ke.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){!this.enabled||(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),z([this.inputWrapper.container],[_i.inputFocus]),ke.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){if(this.isActive=!1,function aCe(r){wH===r&&(wH="",n4="",_g="",yv=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ke.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),ce(this.inputWrapper.container),r.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof Je&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?r.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(e){return r.prototype.getDataByValue.call(this,e)},t.prototype.clear=function(){this.value=null},vo([E(null)],t.prototype,"cssClass",void 0),vo([E("100%")],t.prototype,"width",void 0),vo([E("300px")],t.prototype,"popupHeight",void 0),vo([E("100%")],t.prototype,"popupWidth",void 0),vo([E(null)],t.prototype,"placeholder",void 0),vo([E(null)],t.prototype,"filterBarPlaceholder",void 0),vo([E({})],t.prototype,"htmlAttributes",void 0),vo([E(null)],t.prototype,"query",void 0),vo([E(null)],t.prototype,"valueTemplate",void 0),vo([E(null)],t.prototype,"headerTemplate",void 0),vo([E(null)],t.prototype,"footerTemplate",void 0),vo([E(!1)],t.prototype,"allowFiltering",void 0),vo([E(!1)],t.prototype,"readonly",void 0),vo([E(null)],t.prototype,"text",void 0),vo([E(null)],t.prototype,"value",void 0),vo([E(null)],t.prototype,"index",void 0),vo([E("Never")],t.prototype,"floatLabelType",void 0),vo([E(!1)],t.prototype,"showClearButton",void 0),vo([W()],t.prototype,"filtering",void 0),vo([W()],t.prototype,"change",void 0),vo([W()],t.prototype,"beforeOpen",void 0),vo([W()],t.prototype,"open",void 0),vo([W()],t.prototype,"close",void 0),vo([W()],t.prototype,"blur",void 0),vo([W()],t.prototype,"focus",void 0),vo([ui],t)}(EH),r4=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hi=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Fte="e-ddt-hidden",Nte="e-input-group-icon e-ddt-icon e-icons",Nc="e-show-chip",Bw="e-show-clear",s4="e-show-dd-icon",zl="e-chip-input",Rx="e-input-focus",Bte="e-input-group",Hte="e-icon-anim",o4="e-chips",Vte="e-chipcontent",a4="e-chips-close",hs="e-icon-hide",TH="e-ddt-icon-hide",zte="e-list-parent",jte="e-dropdown",Ute="e-disabled",xH="e-selectall-parent",DH="e-hide-selectall",Wte="e-all-text",l4="e-frame",UR="e-check",h4="e-checkbox-wrapper",qte="e-filter-wrap",Gte="e-ddt-icon",Kte="e-ddt-footer",$te="e-ddt-header",Mx="e-no-data",u4="e-remain",c4="e-overflow",Lx="e-show-text",WR="e-total-count",Ox="e-wrap-count",PCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return r4(t,r),Hi([E("child")],t.prototype,"child",void 0),Hi([E([])],t.prototype,"dataSource",void 0),Hi([E("expanded")],t.prototype,"expanded",void 0),Hi([E("hasChildren")],t.prototype,"hasChildren",void 0),Hi([E("htmlAttributes")],t.prototype,"htmlAttributes",void 0),Hi([E("iconCss")],t.prototype,"iconCss",void 0),Hi([E("imageUrl")],t.prototype,"imageUrl",void 0),Hi([E("parentValue")],t.prototype,"parentValue",void 0),Hi([E(null)],t.prototype,"query",void 0),Hi([E("selected")],t.prototype,"selected",void 0),Hi([E(null)],t.prototype,"tableName",void 0),Hi([E("text")],t.prototype,"text",void 0),Hi([E("tooltip")],t.prototype,"tooltip",void 0),Hi([E("value")],t.prototype,"value",void 0),t}(Ti),FCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return r4(t,r),Hi([E(!1)],t.prototype,"autoCheck",void 0),Hi([E("Auto")],t.prototype,"expandOn",void 0),Hi([E(!1)],t.prototype,"loadOnDemand",void 0),t}(Ti),NCe=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.filterTimer=null,n.isFilteredData=!1,n.isFilterRestore=!1,n.selectedData=[],n.filterDelayTime=300,n.isClicked=!1,n}return r4(t,r),t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-tree"},t.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.customTemplateId=this.element.id+"CustomTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},t.prototype.render=function(){var e=le("#"+this.element.id+"_tree",document);e&&ce(le("#"+this.element.id+"_popup",document)||e.parentElement),this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,f(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),f(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=ke.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[Nte]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(Bte)||this.inputWrapper.classList.add(Bte),this.showDropDownIcon&&this.inputWrapper.classList.add(s4),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.classList.add(jte),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),N([this.popupDiv],TH),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof Je,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),!this.wrapText&&"Custom"!==this.mode&&(this.overFlowWrapper=this.createElement("span",{className:c4+" "+hs}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&N([this.overFlowWrapper],Lx))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var n=le("."+zte,this.treeObj.element);n&&n.getAttribute("aria-multiselectable")&&n.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()},t.prototype.ensureAutoCheck=function(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)},t.prototype.hideCheckAll=function(e){var i=f(this.popupEle)?null:this.popupEle.querySelector("."+xH);f(i)||(e&&!i.classList.contains(DH)?N([i],DH):!e&&i.classList.contains(DH)&&z([i],DH))},t.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:qte});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),bi([this.filterContainer],this.popupEle),this.filterObj=new MJ({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},t.prototype.filterChangeHandler=function(e){var i=this;f(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){i.filterHandler(e.value,e.event)},this.filterDelayTime))},t.prototype.filterHandler=function(e,i){var n=this;this.isFilteredData||(this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields);this.trigger("filtering",{cancel:!1,preventDefaultAction:!1,event:i,text:e,fields:s},function(a){if(!a.cancel){var l=!1,h=void 0;if(n.isFilteredData=!0,""===e?(n.isFilteredData=!1,n.isFilterRestore=!0,h=n.cloneFields(n.fields)):a.preventDefaultAction?h=a.fields:1===n.treeDataType?h=n.selfReferencefilter(e,a.fields):n.fields.dataSource instanceof Je?l=!0:h=n.nestedFilter(e,a.fields),n.hideCheckAll(n.isFilteredData),l)return;n.treeObj.fields=n.getTreeFields(h),n.treeObj.dataBind()}})},t.prototype.nestedFilter=function(e,i){for(var n=[],s=0;s<this.treeData.length;s++){var o=this.nestedChildFilter(e,this.treeData[s]);f(o)||n.push(o)}return i.dataSource=n,i},t.prototype.nestedChildFilter=function(e,i){var n=i[this.fields.child];if(f(n))return this.isMatchedNode(e,i)?i:null;for(var s=[],o=0;o<n.length;o++){var a=this.nestedChildFilter(e,n[o]);f(a)||s.push(a)}var l=Object.assign({},i);return 0!==s.length?(l[this.fields.child]=s,l):(l[this.fields.child]=null,this.isMatchedNode(e,l)?l:null)},t.prototype.selfReferencefilter=function(e,i){for(var n=[],s=[],o=0;o<this.treeData.length;o++)this.isMatchedNode(e,this.treeData[o])&&n.push(this.treeData[o]);for(o=0;o<n.length;o++)if(-1===s.indexOf(n[o])){s.push(n[o]);for(var a=n[o][this.fields.parentValue];!f(a);){for(var l=null,h=0;h<this.treeData.length;h++){var u=this.treeData[h][this.fields.value];if(!f(u)&&u===a){l=this.treeData[h];break}}if(f(l)||-1!==s.indexOf(l))break;s.push(l),a=l[this.fields.parentValue]}}return i.dataSource=s,i},t.prototype.isMatchedNode=function(e,i){var n=i[this.fields.text];return this.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(n=Ye.ignoreDiacritics(n),e=Ye.ignoreDiacritics(e)),"StartsWith"===this.filterType?n.slice(0,e.length)===e:"EndsWith"===this.filterType?n.slice(-e.length)===e:-1!==n.indexOf(e)},t.prototype.wireEvents=function(){T.add(this.inputWrapper,"mouseup",this.dropDownClick,this),T.add(this.inputWrapper,"focus",this.focusIn,this),T.add(this.inputWrapper,"blur",this.focusOut,this),T.add(this.inputWrapper,"mousemove",this.mouseIn,this),T.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),T.add(this.overAllClear,"mousedown",this.clearAll,this),T.add(window,"resize",this.windowResize,this);var e=U(this.inputWrapper,"form");e&&T.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new An(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireTreeEvents=function(){this.keyboardModule=new An(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new An(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){T.remove(this.inputWrapper,"mouseup",this.dropDownClick),T.remove(this.inputWrapper,"focus",this.focusIn),T.remove(this.inputWrapper,"blur",this.focusOut),T.remove(this.inputWrapper,"mousemove",this.mouseIn),T.remove(this.inputWrapper,"mouseout",this.onMouseLeave),T.remove(this.overAllClear,"mousedown",this.clearAll),T.remove(window,"resize",this.windowResize);var e=U(this.inputWrapper,"form");e&&T.remove(e,"reset",this.resetValueHandler)},t.prototype.dropDownClick=function(e){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}},t.prototype.mouseIn=function(){(this.enabled||!this.readonly)&&this.showOverAllClear()},t.prototype.onMouseLeave=function(){this.inputFocus||(N([this.overAllClear],hs),z([this.inputWrapper],Bw))},t.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},t.prototype.focusOut=function(e){if(this.enabled&&!this.readonly&&this.inputFocus&&(!Q.isIE&&"edge"!==Q.info.name||e.target!==this.inputWrapper)){var i=e.relatedTarget;i!==this.inputEle&&f(i)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}},t.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=le(".e-clear-icon",this.inputWrapper).offsetWidth,N([this.overAllClear],hs),z([this.inputWrapper],Bw)),z([this.inputWrapper],[Rx]),this.allowMultiSelection||this.showCheckBox){var i=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(N([this.chipWrapper],hs),z([this.inputWrapper],Nc),z([this.inputEle],zl)),!this.wrapText&&i&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},t.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?N([this.inputWrapper,this.overFlowWrapper],Lx):N([this.inputWrapper],Nc),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&N([this.chipWrapper],hs),N([this.inputEle],zl),this.updateOverFlowView(),this.ensurePlaceHolder()))},t.prototype.triggerChangeEvent=function(e){this.ddtCompareValues(this.oldValue,this.value)&&!this.isChipDelete||this.removeValue||(this.trigger("change",{e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element}),this.oldValue=this.value)},t.prototype.ddtCompareValues=function(e,i){if(null===e||null===i)return(null===e||0===e.length)&&i===e;if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==i[s])return!1;return!0},t.prototype.focusIn=function(e){!this.enabled||this.readonly||this.inputFocus||(this.showOverAllClear(),this.inputFocus=!0,N([this.inputWrapper],[Rx]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(z([this.chipWrapper],hs),N([this.inputEle],zl)),N([this.inputWrapper],Nc),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&"Custom"!==this.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&N([this.overFlowWrapper],hs),"Delimiter"===this.mode?(z([this.inputWrapper],Nc),z([this.inputEle],zl)):N([this.inputWrapper],Nc),z([this.inputWrapper],Lx),this.ensurePlaceHolder())),this.trigger("focus",{isInteracted:!!e,event:e}))},t.prototype.treeAction=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(s.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":i.inputWrapper.focus(),e.preventDefault(),i.isPopupOpen&&i.hidePopup();break;case"tab":case"shiftTab":i.isPopupOpen&&i.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":i.showCheckBox||(i.isValueChange=!0,i.keyEventArgs=e);break;case"space":i.isValueChange=!0,i.keyEventArgs=e;break;case"ctrlA":i.allowMultiSelection&&i.selectAll(!0)}})},t.prototype.keyActionHandler=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(!s.cancel)switch(e.action){case"escape":case"altUp":i.isPopupOpen&&i.hidePopup();break;case"shiftTab":case"tab":i.isPopupOpen&&i.hidePopup(),i.inputFocus&&i.onFocusOut();break;case"altDown":i.isPopupOpen||(i.showPopup(),e.preventDefault());break;case"moveDown":i.showSelectAll&&i.showCheckBox&&i.checkAllParent.focus()}})},t.prototype.checkAllAction=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(!s.cancel)switch(e.action){case"space":i.clickHandler(e);break;case"moveDown":i.treeObj.element.focus()}})},t.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},t.prototype.resetValueHandler=function(e){var i=U(this.inputWrapper,"form");i&&e.target===i&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},t.prototype.getAriaAttributes=function(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},t.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove(WR),z([this.overFlowWrapper],hs),this.value&&this.value.length){var e="",i=void 0,n=void 0,s=void 0,o=1,a=void 0,l=void 0,h=0;this.overFlowWrapper.innerHTML="",this.l10n=new as(this.getLocaleName(),{overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale);var d=this.l10n.getConstant("overflowCountTemplate"),m=this.l10n.getConstant("totalCountTemplate"),y=this.createElement("span",{className:u4});this.overFlowWrapper.appendChild(y),y.innerText=d.replace("${count}",this.value.length.toString());var C=y.offsetWidth;if(He(y),this.showDropDownIcon&&(h=le("."+Gte,this.inputWrapper).offsetWidth),!f(this.value))if("Box"!==this.mode)for(var S=0;!f(this.value[S]);S++){if(e+=0===S?"":this.delimiterChar+" ",e+=n=this.getOverflowVal(S),n=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=e,(a=this.overFlowWrapper.offsetWidth)+h+this.clearIconWidth>(i=this.inputWrapper.offsetWidth)){for(void 0!==s&&""!==s&&(n=s,S=o+1),this.overFlowWrapper.innerHTML=n,l=this.value.length-S,a=this.overFlowWrapper.offsetWidth;a+C+h+this.clearIconWidth>=i&&0!==a&&""!==this.overFlowWrapper.innerHTML;){var I=this.overFlowWrapper.innerHTML.split(this.delimiterChar);I.pop(),this.overFlowWrapper.innerHTML=I.join(this.delimiterChar),l++,a=this.overFlowWrapper.offsetWidth}break}a+C+h+this.clearIconWidth<=i?(s=e,o=S):0===S&&(s="",o=-1)}else{N([this.chipWrapper],hs);for(var k=this.chipWrapper.cloneNode(!0),O=Ze("."+o4,k),L=0;L<O.length;L++){if(n=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(O[L]),e=this.overFlowWrapper.innerHTML,(a=this.overFlowWrapper.offsetWidth)+h+this.clearIconWidth>(i=this.inputWrapper.offsetWidth)){for(void 0!==s&&""!==s&&(n=s,L=o+1),this.overFlowWrapper.innerHTML=n,l=this.value.length-L,a=this.overFlowWrapper.offsetWidth;a+C+h+this.clearIconWidth>=i&&0!==a&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),l++,a=this.overFlowWrapper.offsetWidth;break}a+C+h+this.clearIconWidth<=i?(s=e,o=L):0===L&&(s="",o=-1)}}l>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(y,l,d,m)),"Box"===this.mode&&!this.overFlowWrapper.classList.contains(WR)&&N([y],Ox)}else this.overFlowWrapper.innerHTML="",N([this.overFlowWrapper],hs);this.updateDelimMode()},t.prototype.updateRemainTemplate=function(e,i,n,s){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?s.replace("${count}",i.toString()):n.replace("${count}",i.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(N([this.overFlowWrapper],WR),z([this.overFlowWrapper],Ox)):z([this.overFlowWrapper],WR),e},t.prototype.getOverflowVal=function(e){var i=this.getSelectedData(this.value[e]);return ie(this.treeSettings.loadOnDemand?this.fields.text:"text",i)},t.prototype.updateDelimMode=function(){"Box"!==this.mode?le("."+u4,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(WR)?(N([this.overFlowWrapper],Ox),N([this.overFlowWrapper],Lx)):(this.overFlowWrapper.classList.remove(Ox),z([this.overFlowWrapper],Ox)):le("."+u4,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(Ox)},t.prototype.createHiddenElement=function(){this.hiddenElement=this.createElement("select",this.allowMultiSelection||this.showCheckBox?{attrs:{"aria-hidden":"true",class:Fte,tabindex:"-1",multiple:""}}:{attrs:{"aria-hidden":"true",tabindex:"-1",class:Fte}}),bi([this.hiddenElement],this.inputWrapper),this.validationAttribute()},t.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),N([this.overAllClear],hs),z([this.inputWrapper],Bw),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var i=["required","aria-required","form"],n=0;n<i.length;n++){var s=this.inputEle.getAttribute(i[n]);s&&(this.hiddenElement.setAttribute(i[n],s),this.inputEle.removeAttribute(i[n]))}},t.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),N([this.inputWrapper],Nc),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?N([this.inputEle],zl):(null===this.value||this.value&&0===this.value.length)&&N([this.chipWrapper],hs))},t.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox||"Box"!==this.mode&&("Default"!==this.mode||!this.inputFocus))},t.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:xH,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:Wte}),this.selectAllSpan.textContent="";var i=f(U(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=function CU(r,t,e){void 0===t&&(t=!1),void 0===e&&(e={});var i=r("div",{className:"e-checkbox-wrapper e-css"});if(e.cssClass&&N([i],e.cssClass.split(" ")),e.enableRtl&&i.classList.add("e-rtl"),t){var n=r("span",{className:"e-ripple-container"});Qi(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var s=r("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),i.appendChild(s),e.label){var o=r("span",{className:"e-label"});e.disableHtmlEncode?o.textContent=e.label:o.innerHTML=e.label,i.appendChild(o)}return i}(this.createElement,!0,{cssClass:i}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),T.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},t.prototype.clickHandler=function(e){var i;if(i=e.currentTarget&&e.currentTarget.classList.contains(xH)?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=U(i,"."+h4),!f(this.checkWrapper)){this.isClicked=!0;var n=le("."+l4,this.checkWrapper);this.changeState(this.checkWrapper,n.classList.contains(UR)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()},t.prototype.changeState=function(e,i,n){var s,o=e.getElementsByClassName(l4)[0];"check"!==i||o.classList.contains(UR)?"uncheck"===i&&o.classList.contains(UR)&&(o.classList.remove(UR),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(n)),this.setLocale(!1)):(o.classList.add(UR),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(n)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),f(s="check"===i?"true":"false")||e.setAttribute("aria-checked",s)},t.prototype.setLocale=function(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var i=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var o=0,a=Pi(i)({},this,e?"unSelectAllText":"selectAllText",null,!this.isStringTemplate);o<a.length;o++)this.selectAllSpan.textContent=a[o].textContent}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},t.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),Ue(this.inputWrapper,this.getAriaAttributes())},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];"class"===n?this.inputWrapper.classList.add(this.htmlAttributes[n]):"disabled"===n&&"disabled"===this.htmlAttributes[n]?(this.setProperties({enabled:!1},!0),this.setEnable()):"readonly"!==n||f(this.htmlAttributes[n])?"style"===n?this.inputWrapper.setAttribute("style",this.htmlAttributes[n]):0===n.indexOf("data")||["name","required"].indexOf(n)>-1?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(n)>-1?"placeholder"===n?ke.setPlaceholder(this.htmlAttributes[n],this.inputEle):this.inputEle.setAttribute(n,this.htmlAttributes[n]):this.inputWrapper.setAttribute(n,this.htmlAttributes[n]):(this.setProperties({readonly:!0},!0),this.dataBind())}},t.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,i=["class","style","id","type"],n={},s=0;s<this.element.attributes.length;s++)-1===i.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(n[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));de(n,e,n),this.setProperties({htmlAttributes:n},!0)},t.prototype.showOverAllClear=function(){this.enabled&&!this.readonly&&this.overAllClear&&(this.value&&this.value.length&&this.showClearButton?(z([this.overAllClear],hs),N([this.inputWrapper],Bw)):(N([this.overAllClear],hs),z([this.inputWrapper],Bw)))},t.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var i=0;i<this.value.length;i++)f(e=this.treeObj.getTreeData(this.value[i])[0])&&this.value.splice(this.value.indexOf(this.value[i]),1);0!==this.value.length&&this.setValidValue()}else f(e=this.treeObj.getTreeData(this.value[0])[0])?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},t.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var e=void 0,i=[];if(this.showCheckBox||this.allowMultiSelection){for(var n=this.text.split(this.delimiterChar),s=0;s<n.length;s++)f(e=this.getItems(n[s]))||i.push(e[this.fields.value].toString());0!==i.length?(this.oldValue=this.value,this.setProperties({value:i},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else f(e=this.getItems(this.text))?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},t.prototype.setSelectedValue=function(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),jt("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},t.prototype.setValidValue=function(){var e=this;if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.value.filter(function(s){return-1===e.treeObj.checkedNodes.indexOf(s)}).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{ke.setValue(this.text,this.inputEle,this.floatLabelType);var i=this.value[0].toString();this.treeObj.selectedNodes[0]!==i&&jt("selectedNodes",[i],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},t.prototype.getItems=function(e){var i;if(1===this.treeDataType)for(var n=0;n<this.treeItems.length;n++){var s=ie(this.fields.text,this.treeItems[n]);if(!f(this.treeItems[n])&&!f(s)&&s===e){i=this.treeItems[n];break}}else i=this.getNestedItems(this.treeItems,this.fields,e);return i},t.prototype.getNestedItems=function(e,i,n){for(var s,o=0,a=e.length;o<a;o++){var l=ie(this.fields.text,e[o]);if(e[o]&&l&&l.toString()===n)return e[o];if("string"!=typeof i.child||f(ie(i.child,e[o]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",e[o]))&&void 0!==(s=this.getNestedItems(ie("child",e[o]),this.getChildType(i),n)))break}else{var h=ie(i.child,e[o]);if(void 0!==(s=this.getNestedItems(h,this.getChildType(i),n)))break}}return s},t.prototype.getChildType=function(e){return"string"==typeof e.child||f(e.child)?e:e.child},t.prototype.renderTree=function(){this.treeObj=new jbe({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo("#"+this.tree.id)},t.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var i=!1;this.trigger("beforeOpen",{cancel:!1},function(s){if(s.cancel?i=!0:(N([e.inputWrapper],[Hte]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddt e-popup "+(null!=e.cssClass?e.cssClass:"")}),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):e.popupEle=e.popupObj.element),e.isFirstRender&&!i&&(bi([e.popupDiv],e.popupEle),z([e.popupDiv],TH),e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(Mx)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.portals=e.portals.concat(e.treeObj.portals),e.renderReactTemplates())),!i){if(Ue(e.inputWrapper,{"aria-expanded":"true"}),e.popupObj.show(null,1e3===e.zIndex?e.inputEle:null),z([e.popupEle],TH),e.updatePopupHeight(),e.popupObj.refreshPosition(),!(e.showCheckBox&&e.showSelectAll)&&!e.popupDiv.classList.contains(Mx)&&e.treeItems.length>0&&e.treeObj.element.focus(),e.checkSelectAll&&e.checkBoxElement){var o=U(e.checkBoxElement,"."+h4);e.changeState(o,"check"),e.checkSelectAll=!1}e.allowFiltering&&(z([e.inputWrapper],[Rx]),e.filterObj.element.focus()),e.trigger("open",{popup:e.popupObj})}})},t.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var i=Math.round(this.filterContainer.getBoundingClientRect().height);e=ot(parseInt(e,10)-i+"px")}this.headerTemplate&&(i=Math.round(this.header.getBoundingClientRect().height),e=ot(parseInt(e,10)-i+"px")),this.showCheckBox&&this.showSelectAll&&(i=Math.round(this.checkAllParent.getBoundingClientRect().height),e=ot(parseInt(e,10)-i+"px")),this.footerTemplate&&(i=Math.round(this.footer.getBoundingClientRect().height),e=ot(parseInt(e,10)-i+"px"));var n=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);n+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=ot(parseInt(e,10)-n+"px"),this.popupDiv.style.maxHeight=e}},t.prototype.createPopup=function(e){var i=this;this.isFirstRender&&(this.popupObj=new Ol(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){i.isPopupOpen=!1},open:function(){T.add(document,"mousedown",i.onDocumentClick,i),i.isPopupOpen=!0},targetExitViewport:function(){Q.isDevice||i.hidePopup()}}))},t.prototype.setElementWidth=function(e){var i=this.inputWrapper;f(e)||("number"==typeof e?i.style.width=ot(e):"string"==typeof e&&(i.style.width=e.match(/px|%|em/)?e:ot(e)))},t.prototype.setWidth=function(){var e=ot(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e},t.prototype.getHeight=function(){var e=ot(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e},t.prototype.onDocumentClick=function(e){var i=e.target,n=U(i,"."+zte),s=U(i,"."+qte),o=U(i,"."+$te),a=U(i,"."+Kte),l=!!i.classList.contains(jte)||Xm(i,".e-ddt .e-popup")||Xm(i,".e-ddt .e-treeview");this.isPopupOpen&&(this.inputWrapper.contains(i)||n||l||o||a)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&i.classList.contains(a4)||this.isPopupOpen&&(i.classList.contains(xH)||i.classList.contains(Wte)||i.classList.contains(l4)))?(this.isDocumentClick=!1,e.preventDefault()):!this.inputWrapper.contains(i)&&this.inputFocus&&!s&&this.focusOut(e)},t.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),N([this.popupDiv],Mx)},t.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),N([this.popupDiv],Mx),this.hideCheckAll(!0)):this.popupDiv.classList.contains(Mx)&&this.treeItems.length>=1&&(z([this.popupDiv],Mx),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus()),this.trigger("dataBound",{data:e.data}),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},t.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},t.prototype.setCssClass=function(e,i){var n=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!f(i)&&""!==i&&z(n,i.split(" ")),!f(e)&&""!==e&&N(n,e.split(" "))},t.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},t.prototype.setEnable=function(){ke.setEnabled(this.enabled,this.inputEle),this.enabled?(z([this.inputWrapper],Ute),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),N([this.inputWrapper],Ute),this.inputWrapper&&this.inputWrapper.classList.contains(Rx)&&z([this.inputWrapper],[Rx]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},t.prototype.cloneFields=function(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.cloneChildField=function(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeFields=function(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeChildren=function(e){if("string"==typeof e)return e;if(!f(e)){var i=e=this.getActualProperties(e);return e.value&&(i.id=e.value),e.parentValue&&(i.parentID=e.parentValue),e.child&&(i.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(i.isChecked=e.selected),i}return null},t.prototype.getTreeDataType=function(e,i){if(this.fields.dataSource instanceof Je){for(var n=0;n<e.length;n++)if("string"==typeof i.child&&f(ie(i.child,e[n])))return 1;return 2}f(this.fields.dataSource)&&(this.fields.dataSource=[]),n=0;for(var s=this.fields.dataSource.length;n<s;n++){if("string"==typeof i.child&&!f(ie(i.child,this.fields.dataSource[n])))return 2;if(!f(ie(i.parentValue,this.fields.dataSource[n]))||!f(ie(i.hasChildren,this.fields.dataSource[n])))return 1}return 1},t.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},t.prototype.getEventArgs=function(e){var s;return this.showCheckBox&&("check"===e.action?s="select":"uncheck"===e.action&&(s="un-select")),{action:this.showCheckBox?s:e.action,isInteracted:!!this.isClicked||e.isInteracted,item:e.node,itemData:this.showCheckBox?e.data[0]:e.nodeData}},t.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))},t.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.hiddenElement.innerHTML=this.value&&this.value.length?'<option selected value ="'+this.value[0]+'">'+this.text+"</option>":"")},t.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var i;if(e.isInteracted){var n=ie("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[n]},!0),i=this.itemTemplate?ie("text",this.treeObj.getNode(n)):ie("text",e.nodeData).toString(),ke.setValue(i,this.inputEle,this.floatLabelType),this.setProperties({text:i},!0),this.currentText=this.text,this.currentValue=this.value,Ue(this.inputWrapper,{"aria-describedby":this.element.id}),Ue(this.inputWrapper,{"aria-activedescendant":n.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var s=this.getEventArgs(e);this.trigger("select",s),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},t.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var i=e.event.target;(i.classList.contains("e-fullrow")||i.classList.contains("e-list-text"))&&this.showCheckBox&&(this.isClicked=!0,"true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()),!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)},t.prototype.onNodeChecked=function(e){var i=this.getEventArgs(e);if(this.trigger("select",i),this.isFilteredData&&"uncheck"===e.action){var n=ie("id",e.data[0]).toString();this.removeSelectedData(n,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li"),o=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),a=U(this.checkBoxElement,"."+h4);a&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(a,"uncheck"),this.isReverseUpdate=!1):a&&"check"===e.action&&o.length===s.length&&(this.isReverseUpdate=!0,this.changeState(a,"check"),this.isReverseUpdate=!1)}},t.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},t.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(z([this.overAllClear],hs),N([this.inputWrapper],Bw)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(N([this.overAllClear],hs),z([this.inputWrapper],Bw)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var i=Ze("."+a4,this.chipWrapper),n=0;n<i.length;n++)e?z([i[n]],hs):N([i[n]],hs)},t.prototype.updateDropDownIconState=function(e){var i=le("."+Gte,this.inputWrapper);e?(i?z([i],hs):ke.appendSpan(Nte,this.inputWrapper,this.createElement),N([this.inputWrapper],s4)):(N([i],hs),z([this.inputWrapper],s4))},t.prototype.updateMode=function(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(hs)&&e?(z([this.chipWrapper],hs),N([this.inputWrapper],Nc)):e||(N([this.chipWrapper],hs),z([this.inputWrapper],Nc)),e&&null!==this.value&&0!==this.value.length?N([this.inputEle],zl):z([this.inputEle],zl)}else this.inputEle.classList.contains(zl)&&(z([this.inputEle],zl),this.chipWrapper&&(N([this.chipWrapper],hs),z([this.inputWrapper],Nc)))},t.prototype.ensurePlaceHolder=function(){this.value&&0===this.value.length&&(z([this.inputEle],zl),this.chipWrapper&&N([this.chipWrapper],hs))},t.prototype.ensureClearIconPosition=function(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.setMultiSelectValue=function(e){if(this.isFilteredData){for(var i=f(this.value)?[]:this.value,n=0;n<e.length;n++)(f(this.value)||-1===this.value.indexOf(e[n]))&&i.push(e[n]);this.setProperties({value:i},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},t.prototype.setMultiSelect=function(){this.showCheckBox&&!this.isDynamicChange?this.setMultiSelectValue(this.treeObj.checkedNodes.slice()):(this.setMultiSelectValue(this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())),this.selectedText=[];var i=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!i&&(z([this.inputEle],zl),ce(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(N([this.inputEle],zl),this.chipWrapper&&z([this.chipWrapper],hs)),this.chipWrapper&&"Box"===this.mode&&!(this.value&&this.value.length)&&(N([this.chipWrapper],hs),z([this.inputEle],zl)),this.updateSelectedValues()},t.prototype.getSelectedData=function(e){var i=null;if(this.isFilteredData)for(var n=0;n<this.selectedData.length;n++)if(ie(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[n]).toString()===e){i=this.selectedData[n];break}return f(i)&&(f(i=this.treeSettings.loadOnDemand?this.getNodeData(e):this.treeObj.getNode(e))||this.selectedData.push(i)),i},t.prototype.getNodeData=function(e){var i;if(f(e))return i;if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,e);for(var n=0,s=this.treeItems.length;n<s;n++){var o=ie(this.fields.value,this.treeItems[n]);if(!f(this.treeItems[n])&&!f(o)&&o.toString()===e)return this.treeItems[n]}return i},t.prototype.getChildNodeData=function(e,i,n){var s;if(f(e))return s;for(var o=0,a=e.length;o<a;o++){var l=ie(i.value,e[o]);if(e[o]&&l&&l.toString()===n)return e[o];if("string"!=typeof i.child||f(ie(i.child,e[o]))){if(this.fields.dataSource instanceof Je&&!f(ie("child",e[o]))&&void 0!==(s=this.getChildNodeData(ie("child",e[o]),this.getChildMapperFields(i),n)))break}else{var h=ie(i.child,e[o]);if(void 0!==(s=this.getChildNodeData(h,this.getChildMapperFields(i),n)))break}}return s},t.prototype.getChildMapperFields=function(e){return"string"==typeof e.child||f(e.child)?e:e.child},t.prototype.removeSelectedData=function(e,i){var n=f(this.value)?[]:this.value.slice();n.splice(n.indexOf(e),1),this.setProperties({value:n},i);for(var s=0;s<this.selectedData.length;s++)if(ie(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},t.prototype.updateSelectedValues=function(){this.dataValue="";var e,i,s,n="";this.hiddenElement.innerHTML="";var o="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!f(this.value)){for(var a=0,l=this.value.length;a<l;a++)s=this.getSelectedData(this.value[a]),i=ie(this.treeSettings.loadOnDemand?this.fields.text:"text",s),this.selectedText.push(i),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,n+=","+e):(this.dataValue+=e,n+=e),"Custom"!==this.mode&&"Delimiter"!==this.mode&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(e,this.value[a]),o+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:n},!0),this.hiddenElement.innerHTML=o,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var h=this.getValidMode();"Custom"!==this.mode&&"Box"!==this.mode&&(this.allowMultiSelection||this.showCheckBox)&&!h&&this.chipWrapper&&(N([this.chipWrapper],hs),z([this.inputWrapper],Nc)),ke.setValue(this.dataValue,this.inputEle,this.floatLabelType),this.setProperties(""===n?{text:null}:{text:n},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},t.prototype.setChipValues=function(e,i){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var n=this.createElement("span",{className:o4,attrs:{"data-value":i}}),s=this.createElement("span",{className:Vte}),o=this.createElement("span",{className:a4+" e-icons"});s.innerHTML=e,n.appendChild(s),this.chipCollection.appendChild(n),this.showClearButton&&(n.appendChild(o),T.add(o,"mousedown",this.removeChip,this))},t.prototype.setTagValues=function(){if(null!==this.value&&null!=this.text){this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(Nc)||N([this.inputWrapper],Nc);var e=this.createElement("span",{className:o4});this.inputEle.classList.contains(zl)||N([this.inputEle],zl),this.chipWrapper.classList.contains(hs)&&z([this.chipWrapper],hs);var i=this.createElement("span",{className:Vte}),s=this.customTemplateId,l=this.templateComplier(this.customTemplate)({value:this.value,text:this.text},this,"customTemplate",s,this.isStringTemplate,void 0,i);l&&Zt(l=Array.prototype.slice.call(l),i),e.appendChild(i),this.chipCollection.appendChild(e)}},t.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(ce(this.checkAllParent),this.checkAllParent=null))},t.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),N([this.header],$te));var i=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);i&&Zt(i=Array.prototype.slice.call(i),this.header),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},t.prototype.templateComplier=function(e){if(e)try{return document.querySelectorAll(e).length?Pi(document.querySelector(e).innerHTML.trim()):Pi(e)}catch{return Pi(e)}return Pi(e)},t.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),N([this.footer],Kte));var i=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);i&&Zt(i=Array.prototype.slice.call(i),this.footer),Zt([this.footer],this.popupEle)},t.prototype.clearAll=function(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},t.prototype.removeChip=function(e){if(this.enabled&&!this.readonly){var i=e.target.parentElement,n=i.getAttribute("data-value");this.chipCollection&&i&&He(i),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(n,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([n]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},t.prototype.resetValue=function(e){this.value==[]&&null==this.text||(ke.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],jt("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.checkedNodes=[],this.treeObj.dataBind(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},t.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)},t.prototype.selectAllItems=function(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){for(var i=Ze("li",this.treeObj.element),n=void 0,s=[],o=0;o<i.length;o++)n=i[o].getAttribute("data-uid").toString(),s.push(n);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},t.prototype.updateTreeSettings=function(e){var i=Object.keys(e.treeSettings)[0];if("autoCheck"===i)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===i)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===i)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},t.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},t.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},t.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),N([this.noRecord],"e-ddt-nodata"),bi([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var n=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate",a=this.templateComplier(e?this.actionFailureTemplate:this.noRecordsTemplate)({},this,s,n,this.isStringTemplate,void 0,this.noRecord);a&&Zt(a=Array.prototype.slice.call(a),this.noRecord)}else this.l10n=new as(this.getLocaleName(),{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.noRecord.innerHTML=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate")},t.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},t.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:c4+" "+hs}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},t.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},t.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()},t.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},t.prototype.updateValue=function(e){this.isDynamicChange=!0,f(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},t.prototype.updateText=function(e){f(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},t.prototype.updateModelMode=function(){if(this.allowMultiSelection||this.showCheckBox){if(!this.wrapText){var i=le("."+c4,this.inputWrapper);i&&(i.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),N([this.inputEle],zl),"Box"===this.mode?z([this.overFlowWrapper,this.inputWrapper],Lx):N([this.overFlowWrapper,this.inputWrapper],Lx))}},t.prototype.updateOption=function(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":ke.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":ke.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":ke.removeFloating(this.inputObj),ke.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=i.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&ce(this.overFlowWrapper),this.chipWrapper&&ce(this.chipWrapper),this.setTagValues()):("Custom"===i.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(N([this.overFlowWrapper],hs),this.chipWrapper&&"Box"===this.mode?z([this.chipWrapper],hs):(z([this.inputWrapper],Nc),z([this.inputEle],zl)),this.ensurePlaceHolder()):this.updateView()}},t.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},t.prototype.destroy=function(){this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),ce(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),ke.setValue(null,this.inputEle,this.floatLabelType),ce(this.inputWrapper),ce(this.popupDiv),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(zl),r.prototype.destroy.call(this)},t.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),ce(this.filterObj.element),ce(this.filterContainer),this.filterObj=null)},t.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},t.prototype.getData=function(e){return this.treeObj.getTreeData(e)},t.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove(Hte),this.popupEle&&N([this.popupEle],TH),Ue(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&N([this.inputWrapper],[Rx])),this.trigger("close",e))},t.prototype.selectAll=function(e){this.selectAllItems(e)},t.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},t.prototype.getModuleName=function(){return"dropdowntree"},Hi([E("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),Hi([E(!1)],t.prototype,"allowFiltering",void 0),Hi([E(!1)],t.prototype,"allowMultiSelection",void 0),Hi([E(!0)],t.prototype,"changeOnBlur",void 0),Hi([E("")],t.prototype,"cssClass",void 0),Hi([E("${value.length} item(s) selected")],t.prototype,"customTemplate",void 0),Hi([E(",")],t.prototype,"delimiterChar",void 0),Hi([E(!0)],t.prototype,"enabled",void 0),Hi([ln({},PCe)],t.prototype,"fields",void 0),Hi([E(null)],t.prototype,"filterBarPlaceholder",void 0),Hi([E("StartsWith")],t.prototype,"filterType",void 0),Hi([E("Never")],t.prototype,"floatLabelType",void 0),Hi([E(null)],t.prototype,"footerTemplate",void 0),Hi([E(!1)],t.prototype,"ignoreAccent",void 0),Hi([E(!0)],t.prototype,"ignoreCase",void 0),Hi([E(null)],t.prototype,"headerTemplate",void 0),Hi([E({})],t.prototype,"htmlAttributes",void 0),Hi([E(null)],t.prototype,"itemTemplate",void 0),Hi([E("Default")],t.prototype,"mode",void 0),Hi([E("No Records Found")],t.prototype,"noRecordsTemplate",void 0),Hi([E(null)],t.prototype,"placeholder",void 0),Hi([E("300px")],t.prototype,"popupHeight",void 0),Hi([E("100%")],t.prototype,"popupWidth",void 0),Hi([E(!1)],t.prototype,"readonly",void 0),Hi([E(!1)],t.prototype,"showSelectAll",void 0),Hi([E("Select All")],t.prototype,"selectAllText",void 0),Hi([E(!1)],t.prototype,"showCheckBox",void 0),Hi([E(!0)],t.prototype,"showClearButton",void 0),Hi([E(!0)],t.prototype,"showDropDownIcon",void 0),Hi([E("None")],t.prototype,"sortOrder",void 0),Hi([E(null)],t.prototype,"text",void 0),Hi([ln({},FCe)],t.prototype,"treeSettings",void 0),Hi([E("Unselect All")],t.prototype,"unSelectAllText",void 0),Hi([E(null)],t.prototype,"value",void 0),Hi([E("100%")],t.prototype,"width",void 0),Hi([E(1e3)],t.prototype,"zIndex",void 0),Hi([E(!1)],t.prototype,"wrapText",void 0),Hi([W()],t.prototype,"actionFailure",void 0),Hi([W()],t.prototype,"beforeOpen",void 0),Hi([W()],t.prototype,"change",void 0),Hi([W()],t.prototype,"close",void 0),Hi([W()],t.prototype,"blur",void 0),Hi([W()],t.prototype,"created",void 0),Hi([W()],t.prototype,"dataBound",void 0),Hi([W()],t.prototype,"destroyed",void 0),Hi([W()],t.prototype,"filtering",void 0),Hi([W()],t.prototype,"focus",void 0),Hi([W()],t.prototype,"keyPress",void 0),Hi([W()],t.prototype,"open",void 0),Hi([W()],t.prototype,"select",void 0),Hi([ui],t)}(nn),BCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Go=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Yte="e-atc-spinner-icon";_i.root="e-combobox";var HCe={container:null,buttons:[]},d4=function(r){function t(e,i){return r.call(this,e,i)||this}return BCe(t,r),t.prototype.preRender=function(){r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(T.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),T.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),f(this.inputWrapper.buttons[0])||T.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),T.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(T.add(this.inputElement,"input",this.onInput,this),T.add(this.inputElement,"keyup",this.onFilterUp,this),T.add(this.inputElement,"keydown",this.onFilterDown,this),T.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(_i.input)&&Q.isDevice||!Q.isDevice)&&e.preventDefault()},t.prototype.onBlurHandler=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!f(this.listData)&&!f(i)&&i!==this.text&&this.customValue(e),r.prototype.onBlurHandler.call(this,e)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var i=f(e)?null:e.toString();ke.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var n=this.fields,s={};s[n.text]=f(e)?null:e.toString(),s[n.value]=f(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(f(this.value))if(this.text&&f(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.valueMuteChange(this.allowCustom?this.value:null);this.setHiddenValue(),ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?z([this.inputWrapper.clearButton],_i.clearIconHide):N([this.inputWrapper.clearButton],_i.clearIconHide))},t.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(e){this.isTyped=!0,this.isFiltering()?(r.prototype.searchLists.call(this,e),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+_i.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+_i.li)),this.incrementalSearch(e))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:HCe},t.prototype.onActionComplete=function(e,i,n,s){var o=this;r.prototype.onActionComplete.call(this,e,i,n),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(function(){o.inlineSearch()})},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+_i.selected);if(e.text===this.inputElement.value&&!f(i))return i;if((Q.isDevice&&!this.isDropDownClick||!Q.isDevice)&&!f(this.liCollections)&&this.liCollections.length>0){var s=this.inputElement.value,o=this.sortedData,a=this.typeOfData(o).typeof,h=Nw(s,this.liCollections,this.filterType,!0,o,this.fields,a).item;if(f(h))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var u=this.getIndexByValue(h.getAttribute("data-value"))-1,d=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(d)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=u*d+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),N([h],_i.focus))}return h}return null},t.prototype.setValue=function(e){return e&&"keydown"===e.type&&"enter"===e.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):r.prototype.setValue.call(this,e)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&f(e.value)&&f(e.text)||this.setProperties({value:e.value},!this.allowCustom)},t.prototype.showSpinner=function(){f(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||ke.appendSpan("e-input-group-icon "+Yte,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,N([this.spinnerElement],_i.disableIcon),kc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),rh(this.spinnerElement))},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Nl(this.spinnerElement),z([this.spinnerElement],_i.disableIcon),this.spinnerElement.classList.contains(Yte)?ce(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,i){if(i||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var n=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(n)||this.setAutoFillSelection(n,i)}},t.prototype.isAndroidAutoFill=function(e){if(Q.isAndroid){var i=this.getSelectionPoints(),n=this.prevSelectPoints.end,s=i.end,o=this.prevSelectPoints.start,a=i.start;return 0!==n&&(n===e.length&&o===e.length||o>a&&n>s||n===s&&o===a)}return!1},t.prototype.clearAll=function(e,i){(f(i)||!f(i)&&f(i.dataSource))&&r.prototype.clearAll.call(this,e),this.isFiltering()&&!f(e)&&e.target===this.inputWrapper.clearButton&&this.searchLists(e)},t.prototype.isSelectFocusItem=function(e){return!f(e)},t.prototype.inlineSearch=function(e){var i=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),n=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(f(n))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var o=this.list.querySelector("."+_i.li);this.setHoverList(o)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!i){var s=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.activeIndex=f(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(n,i)}},t.prototype.incrementalSearch=function(e){this.showPopup(e),f(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e,i){void 0===i&&(i=!1);var n=this.getSelectionPoints(),s=this.inputElement.value.substr(0,n.start);if(s&&s.toLowerCase()===e.substr(0,n.start).toLowerCase()){var o=s+e.substr(s.length,e.length);ke.setValue(o,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(n.start,this.inputElement.value.length)}else i&&(ke.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.getValueByText=function(e){return r.prototype.getValueByText.call(this,e,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(T.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),T.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),f(this.inputWrapper.buttons[0])||T.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(T.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(T.remove(this.inputElement,"input",this.onInput),T.remove(this.inputElement,"keyup",this.onFilterUp),T.remove(this.inputElement,"keydown",this.onFilterDown),T.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()},t.prototype.setSelection=function(e,i){r.prototype.setSelection.call(this,e,i),!f(e)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()},t.prototype.selectCurrentItem=function(e){var i;this.isPopupOpen&&((i=this.list.querySelector(this.isSelected?"."+_i.selected:"."+_i.focus))&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&f(i)&&this.customValue(e),this.hidePopup(e)},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(_i.selected)&&(this.removeFocus(),e.classList.add(_i.focus))},t.prototype.targetFocus=function(e){Q.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e),ke.calculateWidth(this.inputElement,this.inputWrapper.container)},t.prototype.dropDownClick=function(e){e.preventDefault(),Q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),r.prototype.dropDownClick.call(this,e)},t.prototype.customValue=function(e){var i=this,n=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var a=this.value;if(f(n)){var l=""===this.inputElement.value?null:this.inputElement.value,h={text:l,item:{}};this.initial?this.updateCustomValueCallback(l,h,a):this.trigger("customValueSpecifier",h,function(u){i.updateCustomValueCallback(l,u,a,e)})}else this.isSelectCustom=!1,this.setProperties({value:n}),a!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var s=this.previousValue,o=this.value;this.setProperties({value:n}),f(this.value)&&ke.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&s===this.value&&o!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,i,n,s){var o=this.fields,a=i.item,l={};a&&ie(o.text,a)&&ie(o.value,a)?l=a:(jt(o.text,e,l),jt(o.value,e,l)),this.itemData=l;var h={text:ie(o.text,this.itemData),value:ie(o.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0,n!==this.value&&this.onChangeEvent(s)},t.prototype.onPropertyChanged=function(e,i){"combobox"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"readonly":ke.setReadonly(this.readonly,this.inputElement),this.readonly?(T.remove(this.inputElement,"input",this.onInput),T.remove(this.inputElement,"keyup",this.onFilterUp),T.remove(this.inputElement,"keydown",this.onFilterDown)):(T.add(this.inputElement,"input",this.onInput,this),T.add(this.inputElement,"keyup",this.onFilterUp,this),T.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&r.prototype.renderList.call(this);break;case"allowCustom":break;default:var a=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty),this.isFiltering()&&"dataSource"===o&&f(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&r.prototype.renderList.call(this)}}},t.prototype.render=function(){r.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&r.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(e,i){r.prototype.addItem.call(this,e,i)},t.prototype.filter=function(e,i,n){r.prototype.filter.call(this,e,i,n)},t.prototype.showPopup=function(e){r.prototype.showPopup.call(this,e)},t.prototype.hidePopup=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!f(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(ke.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var s=this.isSelectCustom?{text:""}:this.getItemData(),o=this.list.querySelector("."+_i.selected);if(this.inputElement&&s.text===this.inputElement.value&&!f(o))return this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),void r.prototype.hidePopup.call(this,e);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var a=this.sortedData,l=this.typeOfData(a).typeof,h=Nw(this.inputElement.value,this.liCollections,"Equal",!0,a,this.fields,l);this.selectedLI=h.item,f(h.index)&&(h.index=Nw(this.inputElement.value,this.liCollections,"StartsWith",!0,a,this.fields,l).index),this.activeIndex=h.index,f(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(e)}f(this.listData)&&this.allowCustom&&!f(i)&&i!==this.value&&this.customValue(),r.prototype.hidePopup.call(this,e)},t.prototype.focusIn=function(){!this.enabled||(Q.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),r.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(e){r.prototype.focusOut.call(this,e)},t.prototype.getItems=function(){return r.prototype.getItems.call(this)},t.prototype.getDataByValue=function(e){return r.prototype.getDataByValue.call(this,e)},t.prototype.renderHightSearch=function(){},Go([E(!1)],t.prototype,"autofill",void 0),Go([E(!0)],t.prototype,"allowCustom",void 0),Go([E({})],t.prototype,"htmlAttributes",void 0),Go([E(!1)],t.prototype,"allowFiltering",void 0),Go([E(null)],t.prototype,"query",void 0),Go([E(null)],t.prototype,"index",void 0),Go([E(!0)],t.prototype,"showClearButton",void 0),Go([E(!1)],t.prototype,"enableRtl",void 0),Go([W()],t.prototype,"customValueSpecifier",void 0),Go([W()],t.prototype,"filtering",void 0),Go([E(null)],t.prototype,"valueTemplate",void 0),Go([E("Never")],t.prototype,"floatLabelType",void 0),Go([E(null)],t.prototype,"filterBarPlaceholder",void 0),Go([E(null)],t.prototype,"cssClass",void 0),Go([E(null)],t.prototype,"headerTemplate",void 0),Go([E(null)],t.prototype,"footerTemplate",void 0),Go([E(null)],t.prototype,"placeholder",void 0),Go([E("100%")],t.prototype,"width",void 0),Go([E("300px")],t.prototype,"popupHeight",void 0),Go([E("100%")],t.prototype,"popupWidth",void 0),Go([E(!1)],t.prototype,"readonly",void 0),Go([E(null)],t.prototype,"text",void 0),Go([E(null)],t.prototype,"value",void 0),Go([ui],t)}(Nb),VCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hh=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};_i.root="e-autocomplete",_i.icon="e-input-group-icon e-ddl-icon e-search-icon";var IH=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFiltered=!1,n.searchList=!1,n}return VCe(t,r),t.prototype.preRender=function(){r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new si,n=""!==this.queryString||f(this.value)?this.filterType:"equal",s=""!==this.queryString||f(this.value)?this.queryString:this.value;if(this.isFiltered)return i;if(null!==this.queryString&&""!==this.queryString){var o=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Je||"string"!==o)&&"number"!==o){var a=f(this.fields.value)?"":this.fields.value;i.where(a,n,s,this.ignoreCase,this.ignoreAccent)}else i.where("",n,s,this.ignoreCase,this.ignoreAccent)}if(!f(this.suggestionCount)){if(20!==this.suggestionCount)for(var l=0;l<i.queries.length;l++)"onTake"===i.queries[l].fn&&i.queries.splice(l,1);i.take(this.suggestionCount)}return i},t.prototype.searchLists=function(e){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,f(this.list)&&r.prototype.renderList.call(this,e,!0),this.queryString=this.filterInput.value,"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields,null,e);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(s,o,a){n.cancel||(i.isFiltered=!0,i.filterAction(s,o,a))},cancel:!1};this.trigger("filtering",n,function(s){!s.cancel&&!i.isFiltered&&!s.preventDefaultAction&&(i.searchList=!0,i.filterAction(i.dataSource,null,i.fields,e))})},t.prototype.filter=function(e,i,n){this.isFiltered=!0,this.filterAction(e,i,n)},t.prototype.filterAction=function(e,i,n,s){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,n,i,s):(this.hidePopup(s),this.beforePopupOpen=!1),this.renderReactTemplates()},t.prototype.clearAll=function(e,i){(f(i)||!f(i)&&f(i.dataSource))&&r.prototype.clearAll.call(this,e),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(e,i,n,s){this.fixedHeaderElement=null,r.prototype.onActionComplete.call(this,e,i,n);var o=this.list.querySelector("."+_i.li);f(o)||z([o],_i.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!f(this.liCollections[0])&&this.searchList){var e=[this.liCollections[0]],i=this.listData,n=this.typeOfData(i).typeof,s=Nw(this.inputElement.value,e,"StartsWith",this.ignoreCase,i,this.fields,n);this.searchList=!1,f(s.item)||r.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(e,i){if(this.isValidLI(e))if(!f(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(e)){var n=this.getFormattedValue(e.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(i),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,r.prototype.setAutoFill.call(this,e,i&&"down"===i.action||"up"===i.action||"home"===i.action||"end"===i.action||"pageUp"===i.action||"pageDown"===i.action))}else r.prototype.setSelection.call(this,e,i);else this.selectedLI=e},t.prototype.listOption=function(e,i){var n=this,s=r.prototype.listOption.call(this,e,i);if(f(s.itemCreated))s.itemCreated=function(a){n.highlight&&(n.element.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout(function(){Fb(a.item,n.queryString,n.ignoreCase,n.filterType)},0):Fb(a.item,n.queryString,n.ignoreCase,n.filterType))};else{var o=s.itemCreated;s.itemCreated=function(a){n.highlight&&Fb(a.item,n.queryString,n.ignoreCase,n.filterType),o.apply(n,[a])}}return s},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(e){this.list.scrollTop=0,r.prototype.renderPopup.call(this,e)},t.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.setInputValue=function(e,i){var n=i&&i.text?i.text:i&&i.value,s=e&&e.text?e.text:e&&e.value?e.value:this.value;if(!s||""!==this.typedString||this.allowCustom||this.dataSource instanceof Je)e&&(e.text?this.setOldText(n):this.setOldValue(n));else{var o="string"===this.typeOfData(this.dataSource).typeof?"":this.fields.value,a=this.getItems().length,l=new si,h=this;new Je(this.dataSource).executeQuery(l.where(new kn(o,"equal",s))).then(function(u){u.result.length>0?(h.value=""!==o?u.result[0][h.fields.value].toString():u.result[0].toString(),h.addItem(u.result,a),h.updateValues()):e&&e.text?h.setOldText(n):e&&e.value?h.setOldValue(n):h.updateValues()})}},t.prototype.showPopup=function(e){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,f(this.list)?this.renderList(e):this.resetList(this.dataSource,this.fields,null,e)}},t.prototype.hidePopup=function(e){r.prototype.hidePopup.call(this,e),this.activeIndex=-1},t.prototype.onPropertyChanged=function(e,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e);for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];if("showPopupButton"===o)if(this.showPopupButton){var a=ke.appendSpan(_i.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=a,ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&T.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else ce(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;else{var l=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++)this.ulElement.querySelector(".e-active")||(Lte(this.liCollections[e]),Fb(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){r.prototype.render.call(this)},hh([ln({value:null,iconCss:null,groupBy:null},SH)],t.prototype,"fields",void 0),hh([E(!0)],t.prototype,"ignoreCase",void 0),hh([E(!1)],t.prototype,"showPopupButton",void 0),hh([E(!1)],t.prototype,"highlight",void 0),hh([E(20)],t.prototype,"suggestionCount",void 0),hh([E({})],t.prototype,"htmlAttributes",void 0),hh([E(null)],t.prototype,"query",void 0),hh([E(1)],t.prototype,"minLength",void 0),hh([E("Contains")],t.prototype,"filterType",void 0),hh([W()],t.prototype,"filtering",void 0),hh([E(null)],t.prototype,"index",void 0),hh([E("Never")],t.prototype,"floatLabelType",void 0),hh([E(null)],t.prototype,"valueTemplate",void 0),hh([E(null)],t.prototype,"filterBarPlaceholder",void 0),hh([E(!1)],t.prototype,"allowFiltering",void 0),hh([E(null)],t.prototype,"text",void 0),hh([ui],t)}(d4),p4="e-float-line",qR="e-float-text",Px="e-label-top",Hw="e-label-bottom";function Zte(r,t,e,i,n,s,o){var a=ri("span",{className:p4}),l=ri("label",{className:qR}),h=e.getAttribute("id")?e.getAttribute("id"):Gi("ej2_multiselect");e.id=h,!f(e.id)&&""!==e.id&&(l.id="label_"+e.id.replace(/ /g,"_"),Ue(i,{"aria-labelledby":l.id})),!f(i.placeholder)&&""!==i.placeholder&&(l.innerText=f4(i.placeholder),i.removeAttribute("placeholder")),l.innerText=f4(o),t.appendChild(a),t.appendChild(l),r.classList.add("e-float-input"),function zCe(r,t){r&&r.length>0?(N([t],Px),z([t],Hw)):(z([t],Px),N([t],Hw))}(n,l),"Always"===s&&(l.classList.contains(Hw)&&z([l],Hw),N([l],Px))}function Xte(r,t,e){t.placeholder=r&&r.length?"":e}function f4(r){var t="";if(!f(r)&&""!==r){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+r+'"/>',t=e.children[0].placeholder}return t}var qCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sn=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Vw="e-input-focus",Qte="e-disabled",oo="e-hide-listitem",Fx="e-chips",AH="e-chips-close",Nx="e-chip-selected",Jte="e-delimiter",_H="e-zero-size",eie="e-chips-close e-close-hooker",tie="e-delim-values",g4="e-close-icon-hide",nie="e-ddl-disable-icon",rie="e-ms-spinner-icon",sie="e-input-group-icon e-ddl-icon",oie="e-icon-anim",kH="e-delim-total",aie="e-search-custom-width",RH="e-input-filter",lie=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.clearIconWidth=0,n.previousFilterText="",n.isValidKey=!1,n.selectAllEventData=[],n.selectAllEventEle=[],n.scrollFocusStatus=!1,n.keyDownStatus=!1,n}return qCe(t,r),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=i}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];switch(n){case"class":var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&(N([this.overAllWrapper],s.split(" ")),N([this.popupWrapper],s.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(n,this.htmlAttributes[n]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(n)>-1?this.element.setAttribute(n,this.htmlAttributes[n]):0===n.indexOf("data")||["name","required","aria-required","form"].indexOf(n)>-1?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):["title","role","style","class"].indexOf(n)>-1?this.overAllWrapper.setAttribute(n,this.htmlAttributes[n]):"size"!==n&&this.inputElement.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(g4)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(g4))},t.prototype.updateCssClass=function(){if(!f(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(N([this.overAllWrapper],e.split(" ")),N([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){!f(e)&&""!==e&&""!==(e=e.replace(/\s+/g," ").trim())&&(z([this.overAllWrapper],e.split(" ")),z([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(e){var i=this;if(Q.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var n=this;window.onpopstate=function(){n.hidePopup(),n.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}},function(a){a.cancel||(i.focusAtFirstListItem(),document.body.appendChild(i.popupObj.element),"CheckBox"===i.mode&&i.enableGroupCheckBox&&!f(i.fields.groupBy)&&i.updateListItems(i.list.querySelectorAll("li.e-list-item"),i.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===i.mode||i.showDropDownIcon)&&N([i.overAllWrapper],[oie]),i.refreshPopup(),i.renderReactTemplates(),i.popupObj.show(a.animation,1e3===i.zIndex?i.element:null),Ue(i.inputElement,{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.updateAriaActiveDescendant(),i.isFirstClick&&i.loadTemplate())})},t.prototype.updateListItems=function(e,i){for(var n=0;n<e.length;n++)this.findGroupStart(e[n]),this.findGroupStart(i[n]);this.deselectHeader()},t.prototype.loadTemplate=function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!f(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);f(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+tt_li)){var e;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+tt_li+":not(."+oo+")"))&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var i;e?i=Nw(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?Nw(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):i=null,i&&null!==i.item&&(this.addListFocus(i.item),this.scrollBottom(i.item,i.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false"}},t.prototype.updateListARIA=function(){f(this.ulElement)||Ue(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;this.isPopupOpen()||Ue(this.inputElement,this.getAriaAttributes()),e&&Ue(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var i=this.htmlAttributes;de(i,{"aria-disabled":e},i),this.setProperties({htmlAttributes:i},!0)}},t.prototype.removelastSelection=function(e){var i=this.chipCollectionWrapper.querySelectorAll("span."+Fx),n=i[i.length-1].getAttribute("data-value");f(this.value)||(this.tempValues=this.value.slice());var s=this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=n),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(e){r.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var i,n=f(this.fields.value)?this.fields.text:this.fields.value,s=0;s<e.length;s++)i=0===s?new kn(n,"equal",e[s]):i.or(n,"equal",e[s]);return this.getQuery(this.query).where(i)},t.prototype.onActionComplete=function(e,i,n,s){if(r.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),!f(this.value)&&!this.allowCustomValue)for(var a=0;a<this.value.length;a++)!this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",this.value[a])&&!(this.dataSource instanceof Je)&&(this.value.splice(a,1),a-=1);var h=[];!f(this.value)&&!this.allowCustomValue&&(h=this.presentItemValue(this.ulElement)),h.length>0&&this.dataSource instanceof Je&&!f(this.value)&&null!=this.listData?this.addNonPresentItems(h,this.ulElement,this.listData):this.updateActionList(e,i,n),this.dataSource instanceof Je&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()},t.prototype.updateActionList=function(e,i,n,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(f(this.mainData)||0===this.mainData.length)&&(this.mainData=i):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=i,this.mainListCollection=this.liCollections),(this.remoteCustomValue||i.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof Je&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),f(this.setInitialValue)||this.setInitialValue(),f(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(n)))},t.prototype.refreshSelection=function(){var e,i,n=this.hideSelectedItem?oo:"e-active";if(!f(this.value))for(var s=0;!f(this.value[s]);s++)if(i=this.findListElement(this.list,"li","data-value",e=this.value[s])){if(N([i],n),this.hideSelectedItem&&i.previousSibling&&i.previousElementSibling.classList.contains(tt_group)&&(!i.nextElementSibling||i.nextElementSibling.classList.contains(tt_group))&&N([i.previousElementSibling],n),this.hideSelectedItem&&this.fields.groupBy&&!i.previousElementSibling.classList.contains(oo)&&this.hideGroupItem(e),this.hideSelectedItem&&i.classList.contains(tt_focus)){z([i],tt_focus);var o=i.parentElement.querySelectorAll("."+tt_li+":not(."+oo+")");o.length>0?(N([o[0]],tt_focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+tt_li).length>0||(this.l10nUpdate(),N([this.list],"e-nodata"))}if(i.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&i.classList.contains("e-active")){var a=i.firstElementChild.getAttribute("aria-checked");(f(a)||"false"===a)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:i,e:null})}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var i,n,s=this.hideSelectedItem?oo:"e-active";n=i=this.findListElement(this.ulElement,"li","data-value",e);var o=0,a=0,l=!0,h=!0;do{i&&i.previousElementSibling&&!i.previousElementSibling.classList.contains(oo)&&i.previousElementSibling.classList.contains(tt_li)&&(l=!1),!l||!i||i.previousElementSibling&&i.previousElementSibling.classList.contains(tt_group)?o=10:i=i.previousElementSibling,n&&n.nextElementSibling&&!n.nextElementSibling.classList.contains(oo)&&n.nextElementSibling.classList.contains(tt_li)&&(h=!1),!h||!n||n.nextElementSibling&&n.nextElementSibling.classList.contains(tt_group)?a=10:n=n.nextElementSibling}while(o<10||a<10);l&&h&&!i.previousElementSibling.classList.contains(oo)?N([i.previousElementSibling],s):l&&h&&i.previousElementSibling.classList.contains(oo)&&z([i.previousElementSibling],s)},t.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+tt_li+":not(."+oo+")");return f(e)?this.liCollections[0]:e},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,i=this.list.querySelectorAll("li.e-list-item"),n=this.list.querySelectorAll("li."+tt_li).length,s=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(s-=e),n!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?n!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var o=0;o<i.length;o++)this.findGroupStart(i[o]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?!this.openOnClick&&"CheckBox"===this.mode&&!this.isPopupOpen()&&this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup(e)},t.prototype.keyUp=function(e){"CheckBox"!==this.mode||this.openOnClick||f(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))},t.prototype.filter=function(e,i,n){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,i,n)},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new si;if(this.isFiltered)return i;if(this.filterAction){if(null!==this.targetElement()){var n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Je||"string"!==n)&&"number"!==n){var s=this.fields;i.where(f(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else i.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return i}return e||(this.query?this.query:new si)},t.prototype.dataUpdater=function(e,i,n){if(this.isDataFetched=!1,""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0==s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,n,i),this.allowCustomValue&&(e instanceof Je?(this.remoteCustomValue=!0,this.tempQuery=i):this.checkForCustomValue(i,n));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,i){var n=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&n){var s=this.inputElement.value,o=i||this.fields,a=!f(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a){var l={};jt(o.text,s,l),"number"==typeof ie(this.fields.value?this.fields.value:"value",a)?jt(o.value,Math.random(),l):jt(o.value,s,l),(h=JSON.parse(JSON.stringify(this.listData))).splice(0,0,l),this.resetList(h,o,e)}else{var h;(h=JSON.parse(JSON.stringify(this.listData))).splice(0,0,this.inputElement.value),h[0]="number"!=typeof a||isNaN(parseFloat(h[0]))?h[0]:parseFloat(h[0]),h[0]="boolean"==typeof a?"true"===h[0]||"false"!==h[0]&&h[0]:h[0],this.resetList(h,o)}}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf(AH))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===sie)?this.showPopup(e):(this.hidePopup(e),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(Vw)||this.overAllWrapper.classList.add(Vw)))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(Qte),this.inputElement.removeAttribute("disabled"),Ue(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(Qte),this.inputElement.setAttribute("disabled","true"),Ue(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlurHandler=function(e,i){var n;if(f(e)||(n=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(n))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&N([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(f(this.value)||0===this.value.length)&&z([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&Q.isIE&&!f(e)&&!i)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(Vw);if(this.scrollFocusStatus)return f(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(Vw),this.addTagOnBlur){var s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),o=this.findListElement(this.list,"li","data-value",s);o&&!o.classList.contains(this.hideSelectedItem?oo:"e-active")&&(this.updateListSelection(o,e),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,Q.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function WCe(r,t,e,i,n){r.classList.remove("e-input-focus");var s=t.querySelector("."+qR);e&&e.length<=0&&"Auto"===i&&!f(s)&&(s.classList.contains(Px)&&z([s],Px),N([s],Hw))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!f(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon")}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else f(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){f(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":N([this.searchWrapper],aie):f(this.value)||(this.searchWrapper.removeAttribute("style"),z([this.searchWrapper],aie))},t.prototype.refreshInputHight=function(){this.value&&this.value.length||!f(this.text)&&""!==this.text?this.searchWrapper.classList.add(_H):this.searchWrapper.classList.remove(_H)},t.prototype.validateValues=function(e,i){return JSON.stringify(e.slice().sort())!==JSON.stringify(i.slice().sort())},t.prototype.updateValueState=function(e,i,n){if(this.initStatus&&this.validateValues(i||[],n||[])){var a={e,oldValue:n,value:i,isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",a),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.tempValues=this.value?this.value.slice():this.value},t.prototype.updateAriaActiveDescendant=function(){!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-item-focus")[0])&&Ue(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},t.prototype.getPagingCount=function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var i=this.list.querySelectorAll("li."+tt_li+":not(."+oo+"):not(.e-reorder-hide)"),n=e>=0?i[e+1]:i[0];this.addListFocus(n),this.scrollBottom(n,this.getIndexByValue(n.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){this.getItems();var n=this.list.querySelectorAll("li."+tt_li+":not(."+oo+"):not(.e-reorder-hide)"),s=e<=n.length?n[e-1]:n[n.length-1];this.addListFocus(s),this.scrollBottom(s,this.getIndexByValue(s.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||r.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+tt_li).length>0?this.ulElement.querySelectorAll("."+tt_li+":not(."+oo+")"):[]},t.prototype.focusInHandler=function(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(_H),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains(Vw)||this.overAllWrapper.classList.add(Vw),function UCe(r,t){r.classList.add("e-input-focus");var e=t.querySelector("."+qR);f(e)||(N([e],Px),e.classList.contains(Hw)&&z([e],Hw))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),ke.calculateWidth(this.inputElement,this.overAllWrapper),!0)},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(Jte)},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(Jte)},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+tt_focus);if(!f(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var i=this.popupWrapper.querySelector("."+RH);i&&i.setAttribute("aria-activedescendant",e.id)}else"CheckBox"==this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var i=this.ulElement.querySelectorAll("li."+tt_li+":not(."+oo+"):not(.e-reorder-hide)");if(i.length>0){var n=i[e?0:i.length-1];n.classList.add(tt_focus),this.scrollBottom(n),this.updateAriaActiveDescendant()}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){var i=this.list.querySelector("."+tt_focus),n=void 0;switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageUpSelection(n-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageDownSelection(n+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(e),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(Vw)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains(RH)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&T.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+tt_li+":not(."+oo+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+tt_li+",li."+tt_group+":not(."+oo+"):not(.e-reorder-hide)"));var n=this.list.querySelector("li."+tt_focus);Array.prototype.slice.call(i).indexOf(n)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains(RH)||(e.preventDefault(),this.keyAction=!0),this.selectByKey(e)),this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){this.backCommand=8===e.keyCode&&this.allowFiltering?this.targetElement()===this.previousFilterText:""!==this.targetElement()},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var i=this.value[this.value.length-1];this.removeValue(i,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(i)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,i){var n=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,o=this.list.scrollTop+s-n,a=e.offsetTop+e.offsetHeight-this.list.scrollTop;a=this.fields.groupBy&&!f(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===i?this.list.scrollTop=0:s>n?this.list.scrollTop=o:a>0&&this.list.offsetHeight>a||(this.list.scrollTop=o)},t.prototype.scrollTop=function(e,i){var n=e.offsetTop-this.list.scrollTop;n=this.fields.groupBy&&!$t(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===i?this.list.scrollTop=0:n<0?this.list.scrollTop=this.list.scrollTop+n:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!$t(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var i=this.list.querySelector("li."+tt_focus),n=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(this.findGroupStart(i.firstElementChild.lastElementChild),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&n<this.maximumSelectionLength&&(i.firstElementChild.lastElementChild.classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e)),this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var i=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(i,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},t.prototype.removeSelectedChip=function(e){var n,i=this.chipCollectionWrapper.querySelector("span."+Nx);null!==i&&(f(this.value)||(this.tempValues=this.value.slice()),null!==(n=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(n,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var n,i=this.list.querySelectorAll("li."+tt_li);i.length>1&&(this.removeFocus(),this.addListFocus(i[n=e?0:i.length-1]),this.scrollBottom(i[n],n)),this.updateAriaAttribute()},t.prototype.moveByList=function(e){if(this.list){var i=this.list.querySelectorAll("li."+tt_li+":not(."+oo+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+tt_li+",li."+tt_group+":not(."+oo+"):not(.e-reorder-hide)"));var n=this.list.querySelector("li."+tt_focus),s=-1;if(i.length){for(var o=0;o<i.length;o++)if(i[o]===n){s=o;break}e>0?s<i.length-1&&(this.removeFocus(),this.addListFocus(i[++s]),this.updateCheck(i[s]),this.scrollBottom(i[s],s)):s>0&&(this.removeFocus(),this.addListFocus(i[--s]),this.updateCheck(i[s]),this.scrollTop(i[s],s))}}},t.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},t.prototype.moveBy=function(e,i){var n,s=this.chipCollectionWrapper.querySelectorAll("span."+Fx),o=this.chipCollectionWrapper.querySelector("span."+Nx);null===o?e<0&&this.addChipSelection(s[s.length-1],i):e<0?null!==(n=o.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(n,i)):(n=o.nextElementSibling,this.removeChipSelection(),null!==n&&this.addChipSelection(n,i))},t.prototype.chipClick=function(e){if(this.enabled){var i=U(e.target,"."+Fx);this.removeChipSelection(),this.addChipSelection(i,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,i){N([e],Nx),this.trigger("chipSelection",i)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var n=e.target.parentElement.getAttribute("data-value"),s=this.getFormattedValue(n);if(this.allowCustomValue&&("false"!==n&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=n),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),f(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var o=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(o,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!f(this.text)&&""!==this.text?"":f4(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeAllItems=function(e,i,n,s,o){var a=this.value.indexOf(e),l=this.value.slice(0);l.splice(a,1),this.setProperties({value:[].concat([],l)},!0),s.setAttribute("aria-selected","false"),z([s],this.hideSelectedItem?oo:"e-active"),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:s,e:this,index:a}),this.invokeCheckboxSelection(s,i,n),this.updateMainList(!0,e,o),this.updateChipStatus()},t.prototype.invokeCheckboxSelection=function(e,i,n){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:i}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!n&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})},t.prototype.removeValue=function(e,i,n,s){var o=this,a=this.value.indexOf(this.getFormattedValue(e));-1===a&&this.allowCustomValue&&!f(e)&&(a=this.value.indexOf(e.toString()));var l=i&&i.target;s=!!(s||l&&l.classList.contains("e-close-hooker"))||null;var h=this.hideSelectedItem?oo:"e-active";if(-1!==a){var u=this.findListElement(this.list,"li","data-value",e),d=this.getDataByValue(e);this.trigger("removing",{e:i,item:u,itemData:d,isInteracted:!!i,cancel:!1},function(y){if(y.cancel)o.removeIndex++;else{var C=o.value.slice(0);if(C.splice(a,1),o.setProperties({value:[].concat([],C)},!0),null!==u){var S=o.findListElement(o.mainList,"li","data-value",e);u.setAttribute("aria-selected","false"),z([u],h),S&&(S.setAttribute("aria-selected","false"),z([u,S],h)),o.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===o.mode,li:u,e:o,index:a}),o.invokeCheckboxSelection(u,i,s)}o.hideSelectedItem&&o.fields.groupBy&&u&&o.hideGroupItem(e),o.hideSelectedItem&&o.fixedHeaderElement&&o.fields.groupBy&&"CheckBox"!==o.mode&&o.isPopupOpen()&&r.prototype.scrollStop.call(o),o.updateMainList(!0,e),o.removeChip(e),o.updateChipStatus(),(o.value&&o.value.length?o.value.length:0)<o.maximumSelectionLength&&z(o.list.querySelectorAll("li."+tt_li+":not(.e-active)"),"e-disable"),o.trigger("removed",y);var O=i&&i.currentTarget,L=!(!O||!O.classList.contains("e-selectall-parent"))||null;!o.changeOnBlur&&!s&&i&&n&&!L&&o.updateValueState(i,o.value,o.tempValues),n&&(o.selectAllEventData.push(d),o.selectAllEventEle.push(u)),1===n&&(o.changeOnBlur||o.updateValueState(i,o.value,o.tempValues),o.trigger("selectedAll",{event:i,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!i,isChecked:!1}),o.selectAllEventData=[],o.selectAllEventEle=[]),s&&(1===n||null===n)&&o.clearAllCallback(i,s)}})}},t.prototype.updateMainList=function(e,i,n){if(this.allowFiltering||"CheckBox"===this.mode){var s=n||this.findListElement(this.mainList,"li","data-value",i);s&&(e?(s.setAttribute("aria-selected","false"),z([s],this.hideSelectedItem?oo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),z([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),N([s],this.hideSelectedItem?oo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),N([s.firstElementChild.lastElementChild],"e-check"))))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);i&&He(i)}},t.prototype.setWidth=function(e){f(e)||("number"==typeof e?this.overAllWrapper.style.width=ot(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ot(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper(),this.showOverAllClear()):(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),f(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,i,n){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(i,e,n),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&N(this.list.querySelectorAll("li."+tt_li+":not(.e-active)"),"e-disable")},t.prototype.dispatchSelect=function(e,i,n,s,o){var a=this,l=this.listData;if(this.initStatus&&!s){var h=this.getDataByValue(e);this.trigger("select",{e:i,item:n,itemData:h,isInteracted:!!i,cancel:!1},function(d){d.cancel||(o&&(a.selectAllEventData.push(h),a.selectAllEventEle.push(n)),1===o&&(a.trigger("selectedAll",{event:i,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!i,isChecked:!0}),a.selectAllEventData=[]),a.allowCustomValue&&a.isServerRendered&&a.listData!==l&&(a.listData=l),a.updateListSelectEventCallback(e,n,i),a.hideSelectedItem&&a.fixedHeaderElement&&a.fields.groupBy&&"CheckBox"!==a.mode&&r.prototype.scrollStop.call(a))})}},t.prototype.addChip=function(e,i,n){this.chipCollectionWrapper&&this.getChip(e,i,n)},t.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+Fx),i=this.chipCollectionWrapper.querySelectorAll("span."+AH.split(" ")[0]);if(z(e,Nx),Q.isDevice)for(var n=0;n<i.length;n++)i[n].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var i=U(e.target,"."+Fx),n=i.querySelector("span."+AH.split(" ")[0]);this.enabled&&!this.readonly&&(i.classList.contains(Nx)||(this.removeChipFocus(),n.style.display="",i.classList.add(Nx)),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var i=!1;if(e)try{i=!!Ze(e,document).length}catch{i=!1}return i},t.prototype.getChip=function(e,i,n){var s=this,o={text:i,value:i},a=this.createElement("span",{className:Fx,attrs:{"data-value":i,title:e}}),h=this.createElement("span",{className:"e-chipcontent"}),u=this.createElement("span",{className:AH});if(this.mainData&&(o=this.getDataByValue(i)),this.valueTemplate&&!f(o)){var m=Pi(this.multiCompiler(this.valueTemplate)?le(this.valueTemplate,document).innerHTML.trim():this.valueTemplate)(o,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);if(m&&m.length>0)for(var y=0;y<m.length;y++)h.appendChild(m[y]);this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=e;a.appendChild(h);var C={isInteracted:!!n,itemData:o,e:n,setClass:function(S){N([a],S)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",C,function(S){S.cancel||(Q.isDevice?(a.classList.add("e-mob-chip"),Zt([u],a),u.style.display="none",T.add(a,"click",s.onMobileChipInteraction,s)):(T.add(a,"mousedown",s.chipClick,s),s.showClearButton&&a.appendChild(u)),T.add(u,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(a),!s.changeOnBlur&&n&&s.updateValueState(n,s.value,s.tempValues))})},t.prototype.calcPopupWidth=function(){var e=ot(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,i){var n=!f(i.iconCss),s=f(i.properties)?i:i.properties;return this.listCurrentOptions=null!==i.text||null!==i.value?{fields:s,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},de(this.listCurrentOptions,this.listCurrentOptions,i,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions},t.prototype.renderPopup=function(){var e=this;if(this.list||r.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var n=parseInt(this.popupHeight,10);this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),n-=this.header.offsetHeight),Zt([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),n-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"===this.mode&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(n-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(n-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10)),"CheckBox"===this.mode&&(this.allowFiltering&&(this.notify("searchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper}),n-=this.searchBoxHeight),N([this.popupWrapper],"e-checkbox")),"auto"!==this.popupHeight?(this.list.style.maxHeight=ot(n),this.popupWrapper.style.maxHeight=ot(this.popupHeight)):this.list.style.maxHeight=ot(this.popupHeight),this.popupObj=new Ol(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var o=e.popupWrapper.querySelector("."+RH);"CheckBox"===e.mode&&o&&document.activeElement===o&&o.blur(),ce(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var o=e.list.querySelector("ul");o&&("CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||(e.mainList=o.cloneNode?o.cloneNode(!0):o)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),"CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||e.loadTemplate(),e.setScrollPosition(),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"focus"})},targetExitViewport:function(){Q.isDevice||e.hidePopup()}}),"CheckBox"===this.mode&&Q.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),N([this.header],"e-ddl-header");var n=Pi(this.multiCompiler(this.headerTemplate)?le(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.header.appendChild(n[s]);"CheckBox"===this.mode&&this.showSelectAll?bi([this.header],this.popupWrapper):Zt([this.header],this.popupWrapper),T.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),N([this.footer],"e-ddl-footer");var n=Pi(this.multiCompiler(this.footerTemplate)?le(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.footer.appendChild(n[s]);Zt([this.footer],this.popupWrapper),T.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var i=void 0;if(this.value&&this.value.length>0){var n=this.list&&this.list.querySelectorAll("li.e-list-item");if(n&&n.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,i=this.value[this.removeIndex];this.removeIndex<this.value.length;i=this.value[this.removeIndex])this.removeValue(i,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,i){var n=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"!==this.mode&&(!this.inputFocus||"CheckBox"===this.mode)&&this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,n),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&i&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&i&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||"CheckBox"===this.mode)&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},t.prototype.resetValueHandler=function(e){var i=U(this.inputElement,"form");if(i&&e.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=n}},t.prototype.wireEvent=function(){T.add(this.componentWrapper,"mousedown",this.wrapperClick,this),T.add(window,"resize",this.windowResize,this),T.add(this.inputElement,"focus",this.focusInHandler,this),T.add(this.inputElement,"keydown",this.onKeyDown,this),T.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&T.add(this.inputElement,"input",this.onInput,this),T.add(this.inputElement,"blur",this.onBlurHandler,this),T.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=U(this.inputElement,"form");e&&T.add(e,"reset",this.resetValueHandler,this),T.add(this.componentWrapper,"mouseout",this.mouseOut,this),T.add(this.overAllClear,"mouseup",this.clearAll,this),T.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,Q.isDevice&&"mozilla"===Q.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.expandTextbox(),i.search(e)})},t.prototype.search=function(e){var i=this;if(f(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),!this.checkTextLength()||this.allowFiltering||f(e)||8===e.keyCode){var n=this.targetElement();if(this.allowFiltering){var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(h,u,d){s.cancel||(i.isFiltered=!0,i.remoteFilterAction=!0,i.dataUpdater(h,u,d))},event:e,cancel:!1};this.trigger("filtering",s,function(h){h.cancel||!i.isFiltered&&!h.preventDefaultAction&&(i.filterAction=!0,i.dataUpdater(i.dataSource,null,i.fields))})}else if(this.allowCustomValue){var o=new si;o=""!==n?o.where(this.fields.text,"startswith",n,this.ignoreCase,this.ignoreAccent):o,this.dataUpdater(this.mainData,o,this.fields)}else{var a=this.list.querySelectorAll("li."+tt_li+":not(.e-hide-listitem)"),l=Nw(this.targetElement(),a,"StartsWith",this.ignoreCase);l&&null!==l.item?(this.addListFocus(l.item),this.list.scrollTop=l.item.offsetHeight*l.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},t.prototype.updateData=function(e,i){var a,n="",s="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],l=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!f(this.value))for(var h=0;!f(this.value[h]);h++){var u=this.findListElement(f(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[h]);f(u)&&!this.allowCustomValue?(this.value.splice(h,1),h-=1):(n+=(a=this.listData?this.getTextByValue(this.value[h]):this.value[h])+e+" ",o.push(a)),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[h]+'">'+h+"</option>"}this.setProperties({text:o.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",Gi("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id));var d=i&&i.target,m=!(!d||!d.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&i&&!m||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(i,this.value,this.tempValues)),this.listData=l,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(f(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),i=[],n=0;e.length>n;n++){var s=this.getValueByText(e[n]);f(s)?this.allowCustomValue&&i.push(e[n]):i.push(s)}i&&i.length&&this.setProperties({value:i},!0)}},t.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),r.prototype.render.call(this,null,e),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,i=void 0,n=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!f(this.value))for(var s=0;!f(this.value[s]);s++)if(i=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n=this.value[s]),e=this.getTextByValue(n),i&&"true"!==i.getAttribute("aria-selected")||i&&"true"===i.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,n),this.addListSelection(i);else if(n&&this.allowCustomValue){var o=this.listData.length,a={};jt(this.fields.text,n,a),jt(this.fields.value,n,a);var l=this.popupWrapper.querySelector(".e-nodata");this.addItem(a,o),i=i||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n),this.popupWrapper.contains(l)&&(this.list.setAttribute("style",l.getAttribute("style")),this.popupWrapper.replaceChild(this.list,l),this.wireListEvents()),this.addChip(e,n),this.addListSelection(i)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&(f(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,i){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&N([e],oo))},t.prototype.updateAddItemList=function(e,i){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),He(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},t.prototype.updateDataList=function(){this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())&&(this.mainList.childElementCount<this.ulElement.childElementCount||this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount||this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0))&&(this.mainList=this.ulElement)},t.prototype.isValidLI=function(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains(tt_group)&&e.classList.contains(tt_li)},t.prototype.updateListSelection=function(e,i,n){var s=e.getAttribute("data-value"),o=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===o||!f(o)&&"NaN"===o.toString())&&(o=s),this.removeHover(),this.value&&-1!==this.value.indexOf(o)?this.removeValue(o,i,n):this.dispatchSelect(o,i,e,"true"===e.getAttribute("aria-selected"),n)},t.prototype.updateListSelectEventCallback=function(e,i,n){var s=this,o=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,o,n);else{var a=i.cloneNode(!0);this.allowCustomValue&&this.mainData.length&&"number"==typeof ie(this.fields.value?this.fields.value:"value",this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var h=this.getDataByValue(e);this.trigger("customValueSelection",{newData:h,cancel:!1},function(d){d.cancel||(Zt([a],s.mainList),s.mainData.push(h),s.remoteCustomValue=!1,s.addValue(e,o,n))})}},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?oo:"e-active",i=this.list.querySelectorAll("."+e),n=i.length;if(i&&i.length)for(z(i,e);n>0;)i[n-1].setAttribute("aria-selected","false"),n--;if(!f(this.mainList)){var s=this.mainList.querySelectorAll("."+e),o=s.length;if(s&&s.length)for(z(s,e);o>0;)s[o-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(i&&i.length>o-1&&(i[o-1].firstElementChild.setAttribute("aria-checked","false"),z([i[o-1].firstElementChild.lastElementChild],"e-check")),s[o-1].firstElementChild.setAttribute("aria-checked","false"),z([s[o-1].firstElementChild.lastElementChild],"e-check")),o--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&z(e,"e-hover")},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+tt_focus),i=this.mainList.querySelectorAll("."+tt_focus);e&&e.length&&(z(e,tt_focus),z(i,tt_focus))}},t.prototype.addListHover=function(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy))&&(this.removeHover(),N([e],"e-hover"))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),N([e],tt_focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&(N([e],tt_focus),this.updateAriaActiveDescendant())},t.prototype.addListSelection=function(e,i){var n=this.hideSelectedItem?oo:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(N([e],n),this.updateMainList(!1,e.getAttribute("data-value"),i),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var s=e.firstElementChild.getAttribute("aria-checked");("false"===s||f(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},t.prototype.updateDelimeter=function(e,i){this.updateData(e,i)},t.prototype.onMouseClick=function(e){var i=this;this.keyCode=null,this.scrollFocusStatus=!1;var n=e.target,s=U(n,"."+tt_li);if(U(n,"."+tt_group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(n=n.classList.contains("e-list-group-item")?n.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),n.classList.remove("e-check"),n.classList.remove("e-stop"),U(n,".e-list-group-item").classList.remove("e-active"),n.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),n.classList.remove("e-stop"),n.classList.add("e-check"),U(n,".e-list-group-item").classList.add("e-active"),n.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var a=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(a-=1),a<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){i.updateDelimeter(i.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(n),"CheckBox"!==this.mode&&this.refreshListItems(f(s)?null:s.textContent)}else e.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){var o=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),o=this.findGroupAttrtibutes(e,0,0,0,0),o=this.findGroupAttrtibutes(e,o[0],o[1],o[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,o[0],o[1],o[2])}},t.prototype.findGroupAttrtibutes=function(e,i,n,s,o){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?i++:e.classList.contains("e-list-item")&&n++,s++,null!=(e=o?e.nextElementSibling:e.previousElementSibling)););return[i,n,s]},t.prototype.updateCheckBox=function(e,i,n,s){if(null!==e){var o=e.getElementsByClassName("e-frame")[0];s===i?(o.classList.remove("e-stop"),o.classList.add("e-check"),U(o,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===n?(o.classList.remove("e-check"),o.classList.remove("e-stop"),U(o,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===i-1?(o.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),U(o,".e-list-group-item").classList.add("e-active"),o.classList.add("e-check")):(o.classList.remove("e-check"),o.classList.add("e-stop"),U(o,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,i=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&z(i,"e-disable"),e===this.maximumSelectionLength&&N(i,"e-disable")},t.prototype.onMouseOver=function(e){var i=U(e.target,"."+tt_li);null===i&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&this.enableGroupCheckBox&&(i=U(e.target,"."+tt_group)),this.addListHover(i)},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var i=e.target;this.scrollFocusStatus=!!(!f(this.popupObj)&&U(i,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target))&&(Q.isIE||"edge"===Q.info.name)&&document.activeElement===this.inputElement}},t.prototype.wireListEvents=function(){f(this.list)||(T.add(document,"mousedown",this.onDocumentClick,this),T.add(this.list,"mousedown",this.onListMouseDown,this),T.add(this.list,"mouseup",this.onMouseClick,this),T.add(this.list,"mouseover",this.onMouseOver,this),T.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.unwireListEvents=function(){T.remove(document,"mousedown",this.onDocumentClick),this.list&&(T.remove(this.list,"mousedown",this.onListMouseDown),T.remove(this.list,"mouseup",this.onMouseClick),T.remove(this.list,"mouseover",this.onMouseOver),T.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||""===this.inputElement.value)&&(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){if(f(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:eie+" "+rie}),this.componentWrapper.appendChild(this.spinnerElement)),kc({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),N([this.spinnerElement],nie),rh(this.spinnerElement)}},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Nl(this.spinnerElement),z([this.spinnerElement],nie),this.spinnerElement.classList.contains(rie)?ce(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,i){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=i:e.innerText=jn.sanitize(i)},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(kH),this.value&&this.value.length){var e="",i=void 0,n=void 0,s=1,o=void 0,a=void 0,l=0,h=void 0;this.updateWrapperText(this.viewWrapper,e);var u={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},d=new as(this.getLocaleName(),u,this.locale);""===d.getConstant("actionFailureTemplate")&&(d=new as("dropdowns",u,this.locale)),""===d.getConstant("noRecordsTemplate")&&(d=new as("dropdowns",u,this.locale));var m=d.getConstant("overflowCountTemplate"),y=d.getConstant("totalCountTemplate"),C=this.createElement("span",{className:"e-remain"}),S=m.replace("${count}",this.value.length.toString());C.innerText=S,this.viewWrapper.appendChild(C),this.renderReactTemplates();var I=C.offsetWidth;if(He(C),this.showDropDownIcon&&(l=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!f(this.value))for(var k=0;!f(this.value[k]);k++){if(e+=0===k?"":this.delimiterChar+" ",e+=i=this.getOverflowVal(k),i=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o+l+this.clearIconWidth>h){for(void 0!==n&&""!==n&&(i=n,k=s+1),this.updateWrapperText(this.viewWrapper,i),a=this.value.length-k,o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);o+I+l+this.clearIconWidth>h&&0!==o&&""!==this.viewWrapper.innerHTML;)this.viewWrapper.innerHTML=[].join(this.delimiterChar),a=this.value.length,o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);break}o+I+l+this.clearIconWidth<=h?(n=e,s=k):0===k&&(n="",s=-1)}if(a>0){var L=h-l-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(C,this.viewWrapper,a,m,y,L)),this.updateRemainWidth(this.viewWrapper,L),this.updateRemainingText(C,l,a,m,y)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,i){e.classList.contains(kH)&&i<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=i+"px")},t.prototype.updateRemainTemplate=function(e,i,n,s,o,a){i.firstChild&&3===i.firstChild.nodeType&&""===i.firstChild.nodeValue&&i.removeChild(i.firstChild),e.innerHTML="";var l=s.replace("${count}",n.toString()),h=o.replace("${count}",n.toString());return e.innerText=i.firstChild&&3===i.firstChild.nodeType?l:h,i.firstChild&&3===i.firstChild.nodeType?i.classList.remove(kH):(i.classList.add(kH),this.updateRemainWidth(i,a)),e},t.prototype.updateRemainingText=function(e,i,n,s,o){var a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(l+i>=a&&0!==l&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;l+i>a&&0!==l&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),n++,l=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,n,s,o,a-i)}},t.prototype.getOverflowVal=function(e){var i;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var n=this.listData;this.listData=this.mainData,i=this.getTextByValue(this.value[e]),this.listData=n}else i=this.getTextByValue(this.value[e]);else i=this.value[e];return i},t.prototype.unWireEvent=function(){T.remove(this.componentWrapper,"mousedown",this.wrapperClick),T.remove(window,"resize",this.windowResize),T.remove(this.inputElement,"focus",this.focusInHandler),T.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&T.remove(this.inputElement,"input",this.onInput),T.remove(this.inputElement,"keyup",this.keyUp);var e=U(this.inputElement,"form");e&&T.remove(e,"reset",this.resetValueHandler),T.remove(this.inputElement,"blur",this.onBlurHandler),T.remove(this.componentWrapper,"mouseover",this.mouseIn),T.remove(this.componentWrapper,"mouseout",this.mouseOut),T.remove(this.overAllClear,"mousedown",this.clearAll),T.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,i,n){var s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&i&&i.target&&U(i.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){var o=i?this.groupTemplate?U(i.target,".e-list-group-item"):i.target:null;if((o=(o=i&&32===i.keyCode?n:o)&&o.classList.contains("e-frame")?o.parentElement.parentElement:o)&&o.classList.contains("e-list-group-item")){var a=o.nextElementSibling;if(f(a))return;for(;a.classList.contains("e-list-item");){if(e){if(!a.firstElementChild.lastElementChild.classList.contains("e-check")){var l=this.value&&this.value.length?this.value.length:0;a.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&this.updateListSelection(a,i)}}else a.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(a,i);if(null==(a=a.nextElementSibling))break}if(o.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?o.classList.add("e-active"):o.classList.remove("e-active"),o.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues)}else this.updateValue(i,s,e)}else this.updateValue(i,s,e)},t.prototype.updateValue=function(e,i,n){var s=this,o=i.length,a={event:e,items:n?i:[],itemData:n?this.listData:[],isInteracted:!!e,isChecked:n,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",a),i&&i.length){var h,l=0;if(h=this.enableGroupCheckBox?n?this.maximumSelectionLength-(this.value?this.value.length:0):i.length:n?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,a.preventSelectEvent){for(var u=0;u<i.length&&u<h;u++){this.removeHover();var d=i[u].getAttribute("data-value"),m=this.getFormattedValue(d),y=this.mainList?this.mainList.querySelectorAll(n?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[u]:null;n?(this.value=this.value?this.value:[],this.value.indexOf(m)<0&&this.setProperties({value:[].concat([],this.value,[m])},!0),this.removeFocus(),this.addListSelection(i[u],y),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(m,e,!1,i[u],y),this.enableGroupCheckBox&&this.findGroupStart(i[u])}n||(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&z(this.list.querySelectorAll("li."+tt_li+":not(.e-active)"),"e-disable"),this.trigger("selectedAll",{event:e,items:n?i:[],itemData:n?this.listData:[],isInteracted:!!e,isChecked:n})}else{for(;l<o&&l<=50&&l<h;)this.updateListSelection(i[l],e,o-l),this.enableGroupCheckBox&&this.findGroupStart(i[l]),l++;o>50&&setTimeout(function(){for(;l<o&&l<h;)s.updateListSelection(i[l],e,o-l),s.enableGroupCheckBox&&s.findGroupStart(i[l]),l++;s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement()},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),o<=50&&!a.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())},t.prototype.updateHiddenElement=function(){var e=this,i="",n="",s="",o=[];"CheckBox"===this.mode&&(this.value.map(function(a,l){i+='<option selected value ="'+a+'">'+l+"</option>",s=e.listData?e.getTextByValue(a):a,n+=s+e.delimiterChar+" ",o.push(s)}),this.hiddenElement.innerHTML=i,this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",Gi("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id),this.setProperties({text:o.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){var i=e&&e.target&&(U(e.target,".e-selectall-parent")||U(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||i)?this.searchWrapper.classList.remove(_H):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),i||this.isSelectAll||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){f(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(e,i){var n=this;f(this.list)?(this.selectAllAction=function(){"CheckBox"===n.mode&&n.showSelectAll&&n.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:e?"check":"uncheck"}),n.selectAllItem(e,i),n.selectAllAction=null},r.prototype.render.call(this)):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,i))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){(e.dataSource&&!f(Object.keys(e.dataSource))||e.query&&!f(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(f(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,i.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass(),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper);break;case"enableRtl":this.enableRTL(e.enableRtl),r.prototype.onPropertyChanged.call(this,e,i);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var a=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=ot(a),this.popupWrapper.style.maxHeight=ot(this.popupHeight)):this.list.style.maxHeight=ot(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var l=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty)}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.presentItemValue=function(e){for(var i=[],n=0;n<this.value.length;n++)this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",this.value[n])||i.push(this.value[n]);return i},t.prototype.addNonPresentItems=function(e,i,n,s){var o=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(a){a.result.length>0&&o.addItem(a.result,n.length),o.updateActionList(i,n,s)})},t.prototype.updateVal=function(e,i,n){if(this.list)if(!(this.dataSource instanceof Je)||this.listData&&this.mainList&&this.mainData){var s=[];if(!f(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),"value"==n&&s.length>0&&this.dataSource instanceof Je&&!f(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(s,this.ulElement,this.listData);else{if("text"===n&&(this.initialTextUpdate(),e=this.value),(f(this.value)||0===this.value.length)&&(this.tempValues=i),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var o=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(o,this.mainData)}this.initialValueUpdate(),"Box"!==this.mode&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,i),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,e,i)},t.prototype.addItem=function(e,i){r.prototype.addItem.call(this,e,i)},t.prototype.hidePopup=function(e){var i=this;this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100},event:e||null},function(a){a.cancel||(i.fields.groupBy&&"CheckBox"!==i.mode&&i.fixedHeaderElement&&(He(i.fixedHeaderElement),i.fixedHeaderElement=null),i.beforePopupOpen=!1,i.overAllWrapper.classList.remove(oie),i.popupObj.hide(new Cr(a.animation)),Ue(i.inputElement,{"aria-expanded":"false"}),i.inputElement.removeAttribute("aria-owns"),i.inputElement.removeAttribute("aria-activedescendant"),i.allowFiltering&&i.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode,value:"clear"}),i.popupObj.hide(),z([document.body,i.popupObj.element],"e-popup-full-page"),T.remove(i.list,"keydown",i.onKeyDown))})},t.prototype.showPopup=function(e){var i=this;this.enabled&&this.trigger("beforeOpen",{cancel:!1},function(s){if(!s.cancel){if(!i.ulElement)return i.beforePopupOpen=!0,r.prototype.render.call(i,e),void("CheckBox"===i.mode&&Q.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}));"CheckBox"===i.mode&&Q.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode});var o=i.ulElement.querySelectorAll("li.e-list-item").length,a=i.ulElement.querySelectorAll("li."+tt_li+"."+oo).length;if(o>0&&o===a&&a===i.mainData.length&&(""===i.targetElement()||!i.allowCustomValue))return void(i.beforePopupOpen=!1);i.onPopupShown(e)}})},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},t.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+tie,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:eie,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&N([this.overAllWrapper],"e-checkbox"),Q.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:tie,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",Gi("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",Gi("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!Q.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(g4),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),("Default"===this.mode||"Box"===this.mode)&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?Zte(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):Gi("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},t.prototype.checkInitialValue=function(){var e=this,i=this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource);if((!this.value||!this.value.length)&&f(this.text)&&!i&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var n=this.element.options,s=[],o="",a=0,l=n.length;a<l;a++){var h=n[a];f(h.getAttribute("selected"))||(h.getAttribute("value")?s.push(h.getAttribute("value")):o+=h.text+this.delimiterChar)}s.length>0?this.setProperties({value:s},!0):""!==o&&this.setProperties({text:o},!0),(s.length>0||""!==o)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!f(this.text))&&(this.list||r.prototype.render.call(this)),!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof Je?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),f(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){(function jCe(r,t,e,i,n,s,o){var h,a=t.querySelector("."+qR),l=t.querySelector("."+p4);f(a)?Xte(n,i,h=null!==o?o:""):(h=a.innerText,ce(e.querySelector("."+qR)),Xte(n,i,h),f(l)||ce(e.querySelector("."+p4))),r.classList.remove("e-float-input")})(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&Zte(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){!f(this.value)&&this.value.length||"Always"===this.floatLabelType?N([this.overAllWrapper],"e-valid-input"):z([this.overAllWrapper],"e-valid-input")},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:sie}),this.componentWrapper.appendChild(this.dropIcon),N([this.componentWrapper],["e-down-icon"])):f(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),z([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"!==this.mode&&!(this.setDynValue&&"Default"===this.mode&&this.inputFocus)&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,r.prototype.destroy.call(this);for(var e=["readonly","aria-disabled","placeholder"],i=e.length;i>0;)this.inputElement.removeAttribute(e[i-1]),i--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),He(this.overAllWrapper))},sn([ln({text:null,value:null,iconCss:null,groupBy:null},SH)],t.prototype,"fields",void 0),sn([E(!1)],t.prototype,"enablePersistence",void 0),sn([E(null)],t.prototype,"groupTemplate",void 0),sn([E("No records found")],t.prototype,"noRecordsTemplate",void 0),sn([E("Request failed")],t.prototype,"actionFailureTemplate",void 0),sn([E("None")],t.prototype,"sortOrder",void 0),sn([E(!0)],t.prototype,"enabled",void 0),sn([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),sn([E([])],t.prototype,"dataSource",void 0),sn([E(null)],t.prototype,"query",void 0),sn([E("StartsWith")],t.prototype,"filterType",void 0),sn([E(1e3)],t.prototype,"zIndex",void 0),sn([E(!1)],t.prototype,"ignoreAccent",void 0),sn([E()],t.prototype,"locale",void 0),sn([E(!1)],t.prototype,"enableGroupCheckBox",void 0),sn([E(null)],t.prototype,"cssClass",void 0),sn([E("100%")],t.prototype,"width",void 0),sn([E("300px")],t.prototype,"popupHeight",void 0),sn([E("100%")],t.prototype,"popupWidth",void 0),sn([E(null)],t.prototype,"placeholder",void 0),sn([E(null)],t.prototype,"filterBarPlaceholder",void 0),sn([E({})],t.prototype,"htmlAttributes",void 0),sn([E(null)],t.prototype,"valueTemplate",void 0),sn([E(null)],t.prototype,"headerTemplate",void 0),sn([E(null)],t.prototype,"footerTemplate",void 0),sn([E(null)],t.prototype,"itemTemplate",void 0),sn([E(null)],t.prototype,"allowFiltering",void 0),sn([E(!0)],t.prototype,"changeOnBlur",void 0),sn([E(!1)],t.prototype,"allowCustomValue",void 0),sn([E(!0)],t.prototype,"showClearButton",void 0),sn([E(1e3)],t.prototype,"maximumSelectionLength",void 0),sn([E(!1)],t.prototype,"readonly",void 0),sn([E(null)],t.prototype,"text",void 0),sn([E(null)],t.prototype,"value",void 0),sn([E(!0)],t.prototype,"hideSelectedItem",void 0),sn([E(!0)],t.prototype,"closePopupOnSelect",void 0),sn([E("Default")],t.prototype,"mode",void 0),sn([E(",")],t.prototype,"delimiterChar",void 0),sn([E(!0)],t.prototype,"ignoreCase",void 0),sn([E(!1)],t.prototype,"showDropDownIcon",void 0),sn([E("Never")],t.prototype,"floatLabelType",void 0),sn([E(!1)],t.prototype,"showSelectAll",void 0),sn([E("Select All")],t.prototype,"selectAllText",void 0),sn([E("Unselect All")],t.prototype,"unSelectAllText",void 0),sn([E(!0)],t.prototype,"enableSelectionOrder",void 0),sn([E(!0)],t.prototype,"openOnClick",void 0),sn([E(!1)],t.prototype,"addTagOnBlur",void 0),sn([W()],t.prototype,"change",void 0),sn([W()],t.prototype,"removing",void 0),sn([W()],t.prototype,"removed",void 0),sn([W()],t.prototype,"beforeSelectAll",void 0),sn([W()],t.prototype,"selectedAll",void 0),sn([W()],t.prototype,"beforeOpen",void 0),sn([W()],t.prototype,"open",void 0),sn([W()],t.prototype,"close",void 0),sn([W()],t.prototype,"blur",void 0),sn([W()],t.prototype,"focus",void 0),sn([W()],t.prototype,"chipSelection",void 0),sn([W()],t.prototype,"filtering",void 0),sn([W()],t.prototype,"tagging",void 0),sn([W()],t.prototype,"customValueSelection",void 0),sn([ui],t)}(EH),v4=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Es=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},v0e=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return v4(t,r),Es([E("Multiple")],t.prototype,"mode",void 0),Es([E(!1)],t.prototype,"showCheckbox",void 0),Es([E(!1)],t.prototype,"showSelectAll",void 0),Es([E("Left")],t.prototype,"checkboxPosition",void 0),t}(Ti),y0e=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return v4(t,r),Es([E([])],t.prototype,"items",void 0),Es([E("Right")],t.prototype,"position",void 0),t}(Ti),b0e=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isValidKey=!1,s.isDataSourceUpdate=!1,s.keyDownStatus=!1,s}var e;return v4(t,r),e=t,t.prototype.addItem=function(i,n){r.prototype.addItem.call(this,i,n)},t.prototype.render=function(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,r.prototype.render.call(this),this.renderComplete()},t.prototype.initWrapper=function(){var i=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});i.style.visibility="hidden",this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(i,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(tt_focus),this.itemTemplate&&this.renderReactTemplates(),z([this.list],["e-content",tt_root]),this.validationAttribute(this.element,i),this.list.setAttribute("role","listbox"),Ue(this.list,{role:"listbox","aria-label":"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var i=new as(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=i.getConstant("selectAllText"),this.unSelectAllText=i.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var i=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new Sye(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return i.createElement("span",{className:"e-placeholder"})},helper:function(n){var s=i.list.cloneNode(),o=n.sender.cloneNode(!0);s.appendChild(o);var a=i.getItems()[0];return s.style.width=a.offsetWidth+"px",s.style.height=a.offsetHeight+"px",(i.value&&i.value.length)>1&&i.isSelected(o)&&o.appendChild(i.createElement("span",{className:"e-list-badge",innerHTML:i.value.length+""})),s.style.zIndex=iv(i.element)+"",s}})},t.prototype.updateActionCompleteData=function(i,n,s){this.jsonData.splice(s,0,n)},t.prototype.initToolbar=function(){var i=this.toolbarSettings.position,n=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),o=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+i.toLowerCase()});this.list.parentElement.insertBefore(o,this.list),o.appendChild("Right"===i?this.list:s),o.appendChild("Right"===i?s:this.list),this.createButtons(s),this.element.id||(this.element.id=Gi("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}var a=this.element.getAttribute("data-value");n&&a&&n!==a?(this.tBListBox=Uo(document.getElementById(n),this.getModuleName()),this.tBListBox.updateToolBarState()):a&&(this.tBListBox=Uo(document.getElementById(a),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(i){var o,a,n=this,l=new as(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(h){a=l.getConstant(h),o=n.createElement("button",{attrs:{type:"button","data-value":h,title:a,"aria-label":a}}),i.appendChild(o),new Kk({iconCss:"e-icons e-"+h.toLowerCase()},o).createElement=n.createElement})},t.prototype.validationAttribute=function(i,n){r.prototype.validationAttribute.call(this,i,n),n.required=i.required,i.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=ot(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?N([this.list],"e-filter-list"):z([this.list],"e-filter-list")},t.prototype.setCssClass=function(){this.cssClass&&N([this.toolbarSettings.items.length?this.list.parentElement:this.list],this.cssClass.split(" ")),this.enableRtl&&N([this.list],"e-rtl")},t.prototype.setEnable=function(){var i=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?z([i],cn.disabled):N([i],cn.disabled)},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=ot(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),kc({target:this.spinner},this.createElement),rh(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&Nl(this.spinner),this.spinner.parentElement&&ce(this.spinner)},t.prototype.onInput=function(){this.isDataSourceUpdate=!1,this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var i=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(i)},t.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+Bx.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Bx.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},t.prototype.onActionComplete=function(i,n,s){var o;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(o=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===n.length){var a=i.childNodes[0];a&&i.removeChild(a)}if(r.prototype.onActionComplete.call(this,i,n,s),this.allowFiltering&&!f(o)&&(this.list.insertBefore(o,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(o)),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],de(this.jsonData,n,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],de(this.jsonData,n,[]),this.isDataSourceUpdate=!1),this.allowFiltering){var l=this.list.getElementsByClassName("e-input-filter")[0],h=this.filterInput.value.length;l.selectionStart=h,l.selectionEnd=h,l.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!f(s)){var u=this.scope.replace("#","");Uo(document.getElementById(u),this.getModuleName()).initToolbar()}this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(i){var s,n=this;i=de(this.getDragArgs(i),{dragSelected:!0}),Q.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",i,function(o){n.allowDragAll=o.dragSelected,n.allowDragAll||(s=n.ulElement.getElementsByClassName("e-list-badge")[0])&&ce(s)})},t.prototype.triggerDrag=function(i){var n,s,l,a=i.event;if(i.target&&(i.target.classList.contains("e-listbox-wrapper")||i.target.classList.contains("e-list-item")||i.target.classList.contains("e-filter-parent")||i.target.classList.contains("e-input-group"))&&(l=i.target.classList.contains("e-list-item")||i.target.classList.contains("e-filter-parent")||i.target.classList.contains("e-input-group")?i.target.closest(".e-listbox-wrapper"):i.target,(s=(n=this.allowFiltering?l.querySelector(".e-list-parent"):l).getBoundingClientRect()).y+n.offsetHeight-(a.pageY+36)<1?n.scrollTop=n.scrollTop+10:a.pageY-36-s.y<1&&(n.scrollTop=n.scrollTop-10)),null!==i.target){this.trigger("drag",this.getDragArgs(i));var h=this.getComponent(i.target);if(h&&0===h.listData.length){var u=h.ulElement.childNodes[0];u&&h.ulElement.removeChild(u)}}},t.prototype.beforeDragEnd=function(i){this.dragValue=this.getFormattedValue(i.droppedElement.getAttribute("data-value")),i.items=this.value.indexOf(this.dragValue)>-1?this.getDataByValues(this.value):this.getDataByValues([this.dragValue]),this.trigger("beforeDrop",i)},t.prototype.dragEnd=function(i){var s,o,a,l,h,u,n=this,d=this.getFormattedValue(i.droppedElement.getAttribute("data-value")),m=this.getComponent(i.droppedElement),y=this.getDragArgs({target:i.droppedElement},!0),C={previousData:this.dataSource},S={previousData:m.dataSource},I=de({},y,{target:i.target,source:{previousData:this.dataSource},previousIndex:i.previousIndex,currentIndex:i.currentIndex});if(m!==this){var k=de(C,{currentData:this.listData});I=de(I,{source:k,destination:S})}if(Q.isIos&&(this.list.style.overflow=""),m===this){var O=this.ulElement;s=[].slice.call(this.listData),o=[].slice.call(this.liCollections),a=[].slice.call(this.jsonData),u=[].slice.call(this.sortedData);var L=i.currentIndex,B=i.currentIndex=this.getCurIdx(this,i.currentIndex),j=s.indexOf(this.getDataByValue(d)),G=a.indexOf(this.getDataByValue(d)),ae=u.indexOf(this.getDataByValue(d));s.splice(B,0,s.splice(j,1)[0]),u.splice(L,0,u.splice(ae,1)[0]),a.splice(B,0,a.splice(G,1)[0]),o.splice(B,0,o.splice(j,1)[0]),this.allowDragAll&&(h=this.value&&Array.prototype.indexOf.call(this.value,d)>-1?this.value:[d]).forEach(function(Ve){if(Ve!==d){var Gt=s.indexOf(n.getDataByValue(Ve)),Yt=a.indexOf(n.getDataByValue(Ve)),ei=u.indexOf(n.getDataByValue(Ve));Gt>B&&B++,a.splice(B,0,a.splice(Yt,1)[0]),s.splice(B,0,s.splice(Gt,1)[0]),u.splice(L,0,u.splice(ei,1)[0]),o.splice(B,0,o.splice(Gt,1)[0]),O.insertBefore(n.getItems()[n.getIndexByValue(Ve)],O.getElementsByClassName("e-placeholder")[0])}}),this.listData=s,this.jsonData=a,this.sortedData=u,this.liCollections=o}else{var ve,xe=[].slice.call(this.liCollections),Le=i.currentIndex=this.getCurIdx(m,i.currentIndex),oe=m.ulElement;s=[].slice.call(m.listData),o=[].slice.call(m.liCollections),a=[].slice.call(m.jsonData),u=[].slice.call(m.sortedData),h=this.value&&Array.prototype.indexOf.call(this.value,d)>-1&&this.allowDragAll?this.value:[d];var Ae=[].slice.call(this.listData),De=[].slice.call(this.sortedData);if(h.forEach(function(Ve,Gt){l=n.getDataByValue(Ve);var Yt=n.listData.indexOf(l),ei=n.jsonData.indexOf(l),Ci=n.sortedData.indexOf(l);Ae.splice(Yt,1),n.jsonData.splice(ei,1),De.splice(Ci,1),n.listData=Ae,n.sortedData=De;var Ri=Ve===d?i.currentIndex:Le;if(s.splice(Ri,0,l),a.splice(Ri,0,l),u.splice(Ri,0,l),o.splice(Ri,0,xe.splice(Yt,1)[0]),Ve)ve=n.getItems()[n.getIndexByValue(Ve)];else for(var Ji=n.getItems(),oi=0;oi<Ji.length;oi++)if(null===Ji[oi].getAttribute("data-value")&&Ji[oi].classList.contains("e-list-item")){ve=Ji[oi];break}ve||(ve=i.helper),n.removeSelected(n,Ve===d?[i.droppedElement]:[ve]),oe.insertBefore(ve,oe.getElementsByClassName("e-placeholder")[0]),Le++}),this.fields.groupBy){var ge=this.renderItems(this.listData,this.fields);this.updateListItems(ge,this.ulElement),this.setSelection()}if("None"!==m.sortOrder||this.selectionSettings.showCheckbox!==m.selectionSettings.showCheckbox||m.fields.groupBy||m.itemTemplate||this.itemTemplate){var Re=Uo(oe,"sortable");ge=m.renderItems(s,m.fields),m.updateListItems(ge,oe),this.setSelection(),Re.placeHolderElement&&oe.appendChild(Re.placeHolderElement),oe.appendChild(i.helper),m.setSelection()}this.liCollections=xe,m.liCollections=o,m.jsonData=de([],[],a,!1),m.listData=de([],[],s,!1),m.sortedData=de([],[],u,!1),0===this.listData.length&&this.l10nUpdate()}if(this===m)k=de(C,{currentData:s}),I=de(I,{source:k});else{var We=de(S,{currentData:s});I=de(I,{destination:We})}this.trigger("drop",I);var Se=I.elements;if(Se.length)for(var Oe=0;Oe<Se.length;Oe++)Se[Oe].classList.remove("e-grabbed")},t.prototype.updateListItems=function(i,n){for(n.innerHTML="";0<i.childNodes.length;)n.appendChild(i.childNodes[0])},t.prototype.removeSelected=function(i,n){i.selectionSettings.showCheckbox?n.forEach(function(s){s.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):z(n,cn.selected)},t.prototype.getCurIdx=function(i,n){return i.fields.groupBy&&(n-=[].slice.call(i.ulElement.children).slice(0,n).filter(function(s){return s.classList.contains(cn.group)}).length),n},t.prototype.getComponent=function(i){var n,s="EJS-LISTBOX"===this.element.tagName?U(i,".e-listbox"):U(i,".e-listbox-wrapper")&&U(i,".e-listbox-wrapper").querySelector(".e-listbox");return s&&(n=Uo(s,this.getModuleName())),n},t.prototype.listOption=function(i,n){return this.listCurrentOptions=r.prototype.listOption.call(this,i,n),this.listCurrentOptions=de({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(i){i.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:i.item,item:i.curData})},t.prototype.requiredModules=function(){var i=[];return this.selectionSettings.showCheckbox&&i.push({member:"CheckBoxSelection",args:[this]}),i},t.prototype.enableItems=function(i,n,s){var a,o=this;void 0===n&&(n=!0),i.forEach(function(l){(a=o.findListElement(o.list,"li","data-value",s?l:o.getValueByText(l)))&&(n?(z([a],cn.disabled),a.removeAttribute("aria-disabled")):(N([a],cn.disabled),a.setAttribute("aria-disabled","true")))})},t.prototype.selectItems=function(i,n,s){void 0===n&&(n=!0),this.setSelection(i,n,!s),this.updateSelectedOptions()},t.prototype.selectAll=function(i){void 0===i&&(i=!0),this.selectAllItems(i)},t.prototype.addItems=function(i,n){r.prototype.addItem.call(this,i,n)},t.prototype.removeItems=function(i,n){this.removeItem(i,n)},t.prototype.removeItem=function(i,n){var s=[],o=this.list.querySelectorAll("."+tt_li);if(i){i=i instanceof Array?i:[i];var a=this.fields,l=void 0,u=[],d=void 0;de(u,[],this.jsonData);for(var m=[],y=[],C=0;C<i.length;C++){l=i[C]instanceof Object?ie(a.value,i[C]):i[C].toString();for(var S=0,I=u.length;S<I;S++)if((u[S]instanceof Object?ie(a.value,u[S]):u[S].toString())===l){var k=(d=this.getIndexByValue(l))===S?d:S;s.push(o[k]),m.push(k),y.push(k)}}for(var O=m.length-1;O>=0;O--)this.listData.splice(m[O],1);for(O=m.length-1;O>=0;O--)this.jsonData.splice(m[O],1);for(O=y.length-1;O>=0;O--)this.updateLiCollection(y[O])}else s.push(o[n=n||0]),this.listData.splice(n,1),this.jsonData.splice(n,1),this.updateLiCollection(n);for(S=0;S<s.length;S++)this.ulElement.removeChild(s[S]);0===this.listData.length&&this.l10nUpdate(),this.value=[],this.updateToolBarState()},t.prototype.getDataByValues=function(i){for(var n=[],s=0;s<i.length;s++)n.push(this.getDataByValue(i[s]));return n},t.prototype.moveUp=function(i){var n=i?this.getElemByValue(i):this.getSelectedItems();this.moveUpDown(!0,!1,n)},t.prototype.moveDown=function(i){var n=i?this.getElemByValue(i):this.getSelectedItems();this.moveUpDown(!1,!1,n)},t.prototype.moveTo=function(i,n,s){var o=i?this.getElemByValue(i):this.getSelectedItems(),a=s?Uo(s,e):this.getScopedListBox();this.moveData(this,a,!1,o,n)},t.prototype.moveAllTo=function(i,n){if(this.listData.length>0){var s=i?Uo(i,e):this.getScopedListBox();this.moveAllData(this,s,!1,n)}},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var i,n;if(i=n=this.sortedData,this.fields.groupBy){i=[];for(var s=0;s<n.length;s++)n[s].isHeader||i.push(n[s])}return i},t.prototype.getElemByValue=function(i){for(var n=[],s=0;s<i.length;s++)n.push(this.ulElement.querySelector('[data-value ="'+i[s]+'"]'));return n},t.prototype.updateLiCollection=function(i){var n=[].slice.call(this.liCollections);n.splice(i,1),this.liCollections=n},t.prototype.selectAllItems=function(i,n){var s=this;if([].slice.call(this.getItems()).forEach(function(m){if(!m.classList.contains(cn.disabled))if(s.selectionSettings.showCheckbox){var y=m.getElementsByClassName("e-check")[0];(!y&&i||y&&!i)&&(s.notify("updatelist",{li:m,module:"listbox"}),s.maximumSelectionLength>=s.list.querySelectorAll(".e-list-item span.e-check").length&&s.checkMaxSelection())}else i?m.classList.add(cn.selected):m.classList.remove(cn.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var o=this.list.getElementsByTagName("li"),a=0;if(i){var l=function(){var m=h.getFormattedValue(o[a].getAttribute("data-value"));h.value.some(function(y){return y===m})||h.value.push(h.getFormattedValue(o[a].getAttribute("data-value")))},h=this;for(a=0;a<o.length;a++)l()}else{var u=function(){var m=d.getFormattedValue(o[a].getAttribute("data-value"));d.value=d.value.filter(function(y){return y!==m})},d=this;for(a=0;a<o.length;a++)u()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),n)},t.prototype.updateMainList=function(){var i=this.mainList.querySelectorAll(".e-list-item"),n=this.ulElement.querySelectorAll(".e-list-item"),s=i.length,o=n.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||s!==o)for(var a=0,l=0,h=0;a<s;){if(this.value)for(;l<this.value.length;l++)i[a].getAttribute("data-value")===this.value[l]&&h++;!h&&this.selectionSettings.showCheckbox&&i[a].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&h&&s!==o?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[a]),a=0):a++,h=0,l=0}},t.prototype.wireEvents=function(){var i=U(this.element,"form"),n="EJS-LISTBOX"===this.element.tagName?this.element:this.list;T.add(this.list,"click",this.clickHandler,this),T.add(n,"keydown",this.keyDownHandler,this),T.add(n,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&T.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&T.remove(this.list,"scroll",this.setFloatingHeader),i&&T.add(i,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&T.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var i=U(this.element,"form"),n="EJS-LISTBOX"===this.element.tagName?this.element:this.list;T.remove(this.list,"click",this.clickHandler),T.remove(n,"keydown",this.keyDownHandler),T.remove(n,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&T.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&T.remove(this.getToolElem(),"click",this.toolbarClickHandler),i&&T.remove(i,"reset",this.formResetHandler)},t.prototype.clickHandler=function(i){this.selectHandler(i)},t.prototype.checkSelectAll=function(){for(var i=0,n=this.list.querySelectorAll("li."+tt_li),s=0;s<n.length;s++)n[s].classList.contains("e-disabled")||i++;var o=this.getSelectedItems().length;this.showSelectAll&&i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:i===o?"check":0===o?"uncheck":"indeterminate"})},t.prototype.getQuery=function(i){var n=i?i.clone():this.query?this.query.clone():new si;if(this.allowFiltering){var s=""===this.inputString?"contains":this.filterType,o=this.typeOfData(this.dataSource).typeof;null===o&&(o=this.typeOfData(this.jsonData).typeof),n.where((this.dataSource instanceof Je||"string"!==o)&&"number"!==o&&this.fields.text?this.fields.text:"",s,this.inputString,this.ignoreCase,this.ignoreAccent)}else n=i||(this.query?this.query:new si);return n},t.prototype.setFiltering=function(){var i;if(this.initLoad||f(this.filterParent))return this.filterParent=this.createElement("span",{className:Bx.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Bx.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),Zt([(i=ke.createInput({element:this.filterInput,buttons:[Bx.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement)).container],this.filterParent),bi([this.filterParent],this.list),Ue(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.height.toString().indexOf("%")<0&&N([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),i},t.prototype.filterWireEvents=function(i){i&&(this.filterInput=i.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+Bx.clearIcon),this.clearFilterIconElem&&(T.add(this.clearFilterIconElem,"click",this.clearText,this),i||(this.clearFilterIconElem.style.visibility="hidden")),T.add(this.filterInput,"input",this.onInput,this),T.add(this.filterInput,"keyup",this.KeyUp,this),T.add(this.filterInput,"keydown",this.onKeyDown,this)},t.prototype.selectHandler=function(i,n){var o,s=!0,a=U(i.target,".e-list-item"),l=[a];if(a&&a.parentElement){if(o=[].slice.call(a.parentElement.children).indexOf(a),this.selectionSettings.showCheckbox?s=!a.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(i.ctrlKey||i.metaKey||Q.isDevice)&&this.isSelected(a)?(a.classList.remove(cn.selected),a.removeAttribute("aria-selected"),s=!1):"Multiple"===this.selectionSettings.mode&&(i.ctrlKey||i.metaKey||Q.isDevice)||(this.getSelectedItems().forEach(function(d){d.removeAttribute("aria-selected")}),z(this.getSelectedItems(),cn.selected)),i.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?l=[].slice.call(a.parentElement.children).slice(Math.min(o,this.prevSelIdx),Math.max(o,this.prevSelIdx)+1).filter(function(d){return d.classList.contains("e-list-item")}):this.prevSelIdx=[].slice.call(a.parentElement.children).indexOf(a),s?(this.selectionSettings.showCheckbox||N(l,cn.selected),l.forEach(function(d){d.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",a.id)):l.forEach(function(d){d.setAttribute("aria-selected","false")}),!n&&(this.maximumSelectionLength>(this.value&&this.value.length)||!s)&&(this.maximumSelectionLength>=(this.value&&this.value.length)||!s)&&!(this.maximumSelectionLength<(this.value&&this.value.length))&&this.notify("updatelist",{li:a,e:i,module:"listbox"}),this.allowFiltering&&!n){var h=this.getFormattedValue(a.getAttribute("data-value"));if(s){var u=[];de(u,this.value),u.push(h),this.value=u}else this.value=this.value.filter(function(d){return d!==h});document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),i),this.checkMaxSelection()}},t.prototype.triggerChange=function(i,n){this.trigger("change",{elements:i,items:this.getDataByElements(i),value:this.value,event:n})},t.prototype.getDataByElems=function(i){for(var n=[],s=0,o=i.length;s<o;s++)n.push(this.getDataByValue(this.getFormattedValue(i[s].getAttribute("data-value"))));return n},t.prototype.getDataByElements=function(i){var s,n=[],o=0;if(!f(this.listData)){var a=this.typeOfData(this.listData).typeof;if("string"===a||"number"===a||"boolean"===a)for(var l=0,h=this.listData;l<h.length;l++){for(var u=h[l],d=o,m=i.length;d<m;d++)if(s=this.getFormattedValue(i[d].getAttribute("data-value")),!f(u)&&u===s){o=d,n.push(u);break}if(i.length===n.length)break}else for(var y=0,C=this.listData;y<C.length;y++){for(u=C[y],d=o,m=i.length;d<m;d++)if(s=this.getFormattedValue(i[d].getAttribute("data-value")),!f(u)&&ie(this.fields.value?this.fields.value:"value",u)===s){o=d,n.push(u);break}if(i.length===n.length)break}return n}return null},t.prototype.checkMaxSelection=function(){var i=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox)for(var n=0,s=this.list.getElementsByClassName("e-list-item");n<s.length;n++)s[n].querySelector(".e-frame.e-check")||(i===this.maximumSelectionLength?s[n].classList.add("e-disable"):s[n].classList.contains("e-disable")&&s[n].classList.remove("e-disable"))},t.prototype.toolbarClickHandler=function(i){var n=U(i.target,"button");if(n){if(this.toolbarAction=n.getAttribute("data-value"),n.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}},t.prototype.moveUpDown=function(i,n,s){var o=this,a=this.getSelectedItems();if(s&&(a=s),!(i&&this.isSelected(this.ulElement.firstElementChild)||!i&&this.isSelected(this.ulElement.lastElementChild))||s){var l=this.getDataByElems(a),h={cancel:!1,items:l,eventName:this.toolbarAction};this.trigger("actionBegin",h),!h.cancel&&((i?a:a.reverse()).forEach(function(u){var d=Array.prototype.indexOf.call(o.ulElement.querySelectorAll(".e-list-item"),u),m=Array.prototype.indexOf.call(o.ulElement.children,u);DB(o.ulElement,o.ulElement,[m],i?m-1:m+2),o.changeData(m,i?m-1:m+1,i?d-1:d+1,u)}),this.trigger("actionComplete",{items:l,eventName:this.toolbarAction}),a[0].focus(),!n&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(i?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(i,n,s,o,a){var l=[],h=[],u=[],d=[],m=[].slice.call(i.listData),y=[].slice.call(n.listData),C=[].slice.call(i.sortedData),S=[].slice.call(n.sortedData),I=[].slice.call(i.liCollections),k=[],O=[].slice.call(n.liCollections),L=[],B=[],j=i.getSelectedItems();o&&(j=o);var G="None"!==n.sortOrder||n.selectionSettings.showCheckbox!==i.selectionSettings.showCheckbox||n.fields.groupBy||n.itemTemplate||i.itemTemplate;if(i.value=[],j.length){this.removeSelected(i,j),j.forEach(function(ge){l.push(Array.prototype.indexOf.call(i.ulElement.children,ge)),k.push(Array.prototype.indexOf.call(i.ulElement.querySelectorAll(".e-list-item"),ge)),h.push(Array.prototype.indexOf.call(i.listData,i.getDataByElems([ge])[0])),d.push(Array.prototype.indexOf.call(i.sortedData,i.getDataByElems([ge])[0])),u.push(Array.prototype.indexOf.call(i.jsonData,i.getDataByElems([ge])[0]))}),"None"!==this.sortOrder?d.forEach(function(ge){L.push(i.sortedData[ge])}):u.forEach(function(ge){L.push(i.jsonData[ge])});var ae={cancel:!1,items:L,eventName:this.toolbarAction};if(i.trigger("actionBegin",ae),ae.cancel)return;var ve=[];if(k.sort(function(ge,Re){return ge-Re}).reverse().forEach(function(ge){ve.push(I.splice(ge,1)[0])}),i.liCollections=I,a){var xe=O.splice(0,a);n.liCollections=xe.concat(ve.reverse()).concat(O)}else n.liCollections=O.concat(ve.reverse());if(0===n.listData.length){var Le=n.ulElement.childNodes[0];Le&&n.ulElement.removeChild(Le)}if(h.sort(function(ge,Re){return Re-ge}).forEach(function(ge){m.splice(ge,1)}),d.sort(function(ge,Re){return Re-ge}).forEach(function(ge){C.splice(ge,1)}),u.slice().reverse().forEach(function(ge){B.push(i.jsonData.splice(ge,1)[0])}),G)if(i.fields.groupBy){var oe=i.renderItems(m,i.fields);i.updateListItems(oe,i.ulElement)}else j.forEach(function(ge){ce(ge)});else DB(i.ulElement,n.ulElement,l,a),i.trigger("actionComplete",{items:L,eventName:this.toolbarAction});n.mainList.childElementCount!==n.jsonData.length&&(n.mainList=n.ulElement),i.updateMainList();var Ae=[].slice.call(n.jsonData);S=[].slice.call(n.sortedData),this.selectNextList(j,k,h,i),s&&this.list.focus(),i.listData=m,i.sortedData=C,a=a||y.length;for(var De=L.length-1;De>=0;De--)y.splice(a,0,L[De]),Ae.splice(a,0,L[De]),S.splice(a,0,L[De]);n.listData=y,n.jsonData=Ae,n.sortedData=S,G&&(oe=n.renderItems(y,n.fields),n.updateListItems(oe,n.ulElement),n.setSelection(),i.trigger("actionComplete",{items:L,eventName:this.toolbarAction})),i.updateSelectedOptions(),0===i.listData.length&&i.l10nUpdate()}1===i.value.length&&i.getSelectedItems().length&&(i.value[0]=i.getFormattedValue(i.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.selectNextList=function(i,n,s,o){var l,h,a=o.ulElement.querySelectorAll(".e-list-item").length,u=-1;1===i.length&&a&&!o.selectionSettings.showCheckbox&&(h=a<=n[0]?a-1:n[0],l=o.ulElement.querySelectorAll(".e-list-item")[h],(u=o.getValidIndex(l,h,a===s[0]?38:40))>-1&&o.ulElement.querySelectorAll(".e-list-item")[u].classList.add(cn.selected))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(i,n,s,o){var a=[].slice.call(n.listData),l=[].slice.call(n.jsonData),h="None"!==n.sortOrder||n.selectionSettings.showCheckbox!==i.selectionSettings.showCheckbox||n.fields.groupBy||n.itemTemplate||i.itemTemplate;this.removeSelected(i,i.getSelectedItems());var u=[].slice.call(i.jsonData),d={cancel:!1,items:u,eventName:this.toolbarAction};if(i.trigger("actionBegin",d),!d.cancel){var m;0===n.listData.length&&(m=n.ulElement.childNodes[0])&&n.ulElement.removeChild(m),h&&(m=i.ulElement.childNodes[0])&&i.ulElement.removeChild(m),DB(i.ulElement,n.ulElement,Array.apply(null,{length:i.ulElement.childElementCount}).map(Number.call,Number),o),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction}),s&&this.list.focus(),o=o||a.length;for(var y=0;y<i.listData.length;y++)a.splice(o+y,0,i.listData[y]);for(y=0;y<i.jsonData.length;y++)l.splice(o+y,0,i.jsonData[y]);var C=[].slice.call(i.liCollections),S=[].slice.call(n.liCollections);if(i.liCollections=[],o){var I=S.splice(0,o);n.liCollections=I.concat(C).concat(S)}else n.liCollections=S.concat(C);if(i.value=[],a=a.filter(function(L){return!0!==L.isHeader}),n.listData=n.jsonData=a,i.listData.length==i.jsonData.length)i.listData=i.sortedData=i.jsonData=[];else if(this.allowFiltering){for(y=0;y<i.listData.length;y++)for(var k=0;k<i.jsonData.length;k++)i.listData[y]===i.jsonData[k]&&i.jsonData.splice(k,1);i.listData=i.sortedData=[]}if(h){var O=n.renderItems(a,n.fields);n.updateListItems(O,n.ulElement),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction})}else n.sortedData=a;i.updateSelectedOptions(),0===i.listData.length&&i.l10nUpdate()}},t.prototype.changeData=function(i,n,s,o){var a=[].slice.call(this.listData),l=[].slice.call(this.jsonData),h=[].slice.call(this.sortedData),u=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([o])[0]),d=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([o])[0]),m=[].slice.call(this.liCollections);a.splice(n,0,a.splice(i,1)[0]),l.splice(s,0,l.splice(u,1)[0]),h.splice(n,0,h.splice(d,1)[0]),m.splice(n,0,m.splice(i,1)[0]),this.listData=a,this.jsonData=l,this.liCollections=m,this.sortedData=h},t.prototype.getSelectedItems=function(){var i=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(n){i.push(U(n,".e-list-item"))}):i=[].slice.call(this.ulElement.getElementsByClassName(cn.selected)),i},t.prototype.getScopedListBox=function(){var n,i=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(s){Uo(s,i.getModuleName())&&(n=Uo(s,i.getModuleName()))}),n},t.prototype.getGrabbedItems=function(i){for(var n=!1,s=0;s<this.value.length;s++)if(this.value[s]===this.getFormattedValue(i.target.getAttribute("data-value"))){n=!0;break}if(n)for(s=0;s<this.value.length;s++)for(var o=this.list.querySelectorAll('[aria-selected="true"]'),a=0;a<o.length;a++)this.value[s]===this.getFormattedValue(o[a].getAttribute("data-value"))&&o[a].classList.add("e-grabbed");return Array.prototype.slice.call(this.isAngular?this.element.getElementsByClassName("e-list-parent")[0].querySelectorAll(".e-grabbed"):this.element.nextElementSibling.querySelectorAll(".e-grabbed"))},t.prototype.getDragArgs=function(i,n){var s=this.getGrabbedItems(i);return s.length?n&&s.push(i.target):s=[i.target],{elements:s,items:this.getDataByElems(s)}},t.prototype.onKeyDown=function(i){this.keyDownHandler(i),i.stopPropagation()},t.prototype.keyDownHandler=function(i){if([32,35,36,37,38,39,40,65].indexOf(i.keyCode)>-1&&!this.allowFiltering){if(i.target&&i.target.className.indexOf("e-edit-template")>-1)return;if(i.preventDefault(),32===i.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey});else if(65===i.keyCode&&i.ctrlKey)this.selectAll();else if((38===i.keyCode||40===i.keyCode)&&i.ctrlKey&&i.shiftKey)this.moveUpDown(38===i.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==i.keyCode&&37!==i.keyCode||!i.ctrlKey)37!==i.keyCode&&39!==i.keyCode&&"KeyA"!==i.code&&this.upDownKeyHandler(i);else{var n=this.tBListBox||this.getScopedListBox();39===i.keyCode?i.shiftKey?this.moveAllData(this,n,!0):this.moveData(this,n,!0):i.shiftKey?this.moveAllData(n,this,!0):this.moveData(n,this,!0)}}else this.allowFiltering&&(40===i.keyCode||38===i.keyCode)&&this.upDownKeyHandler(i)},t.prototype.upDownKeyHandler=function(i){var n=this.ulElement,o=40===i.keyCode||36===i.keyCode?0:n.childElementCount-1,a=n.getElementsByClassName("e-focused")[0]||n.getElementsByClassName(cn.selected)[0];if(a){if(35!==i.keyCode&&36!==i.keyCode&&(o=Array.prototype.indexOf.call(n.children,a),40===i.keyCode?o++:o--,o<0||o>n.childElementCount-1))return;z([a],"e-focused")}var l=n.children[o];if(l){if(-1===(o=this.getValidIndex(l,o,i.keyCode)))return void N([a],"e-focused");if(n.children[o].focus(),n.children[o].classList.add("e-focused"),(!i.ctrlKey||!this.selectionSettings.showCheckbox&&i.shiftKey&&(36===i.keyCode||35===i.keyCode))&&this.selectHandler({target:n.children[o],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},!0),this.selectionSettings.showCheckbox&&i.ctrlKey&&i.shiftKey&&(36===i.keyCode||35===i.keyCode))for(var h=Array.prototype.indexOf.call(n.children,a),d="Home"===i.code?h:n.children.length-1,m="Home"===i.code?0:h;m<=d;m++)this.notify("updatelist",{li:n.children[m],e:{target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},module:"listbox"})}},t.prototype.KeyUp=function(i){var n=this;if(f(String.fromCharCode(i.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=8===i.keyCode||46===i.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.allowFiltering)){var a={preventDefaultAction:!1,text:this.targetElement(),updateData:function(l,h,u){a.cancel||(n.isFiltered=!0,n.remoteFilterAction=!0,n.dataUpdater(l,h,u))},event:i,cancel:!1};this.trigger("filtering",a,function(l){n.isDataFetched=!1,!(l.cancel||""!==n.filterInput.value&&n.isFiltered)&&(!l.cancel&&!n.isCustomFiltering&&!l.preventDefaultAction&&(n.inputString=n.filterInput.value,n.filteringAction(n.jsonData,new si,n.fields)),!n.isFiltered&&!n.isCustomFiltering&&!l.preventDefaultAction&&n.dataUpdater(n.jsonData,new si,n.fields))})}},t.prototype.filter=function(i,n,s){this.isCustomFiltering=!0,this.filteringAction(i,n,s)},t.prototype.filteringAction=function(i,n,s){this.resetList(i,s,n)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(i,n,s){if(this.isDataFetched=!1,""===this.targetElement().trim()){var a=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(a,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(i,s,n)},t.prototype.focusOutHandler=function(){var i=this.list.getElementsByClassName("e-focused")[0];i&&i.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(i,n,s){var o=this.ulElement;return(i.classList.contains("e-disabled")||i.classList.contains(cn.group))&&(40===s||36===s?n++:n--),n<0||n===o.childElementCount?-1:(((i=o.querySelectorAll(".e-list-item")[n]).classList.contains("e-disabled")||i.classList.contains(cn.group))&&(n=this.getValidIndex(i,n,s)),n)},t.prototype.updateSelectedOptions=function(){var i=this,n=[],s=[];if(de(s,this.value),this.getSelectedItems().forEach(function(a){a.classList.contains("e-grabbed")||n.push(i.getFormattedValue(a.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var o=0;o<n.length;o++)s.indexOf(n[o])>-1||s.push(n[o]);this.setProperties({value:s},!0)}else this.setProperties({value:n},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(i){var s,n=this;void 0===i&&(i=this.value),this.selectionSettings.showCheckbox&&this.getSelectedItems().forEach(function(o){s=n.getFormattedValue(o.getAttribute("data-value")),i.indexOf(s)<0&&(o.getElementsByClassName("e-check")[0].classList.remove("e-check"),o.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),o.removeAttribute("aria-selected"))})},t.prototype.setSelection=function(i,n,s){var a,l,o=this;void 0===i&&(i=this.value),void 0===n&&(n=!0),void 0===s&&(s=!1),i&&i.forEach(function(h){var u;u=s?o.getValueByText(h):h,(a=o.list.querySelector('[data-value="'+u+'"]'))&&(l=o.selectionSettings.showCheckbox?a.getElementsByClassName("e-frame")[0].classList.contains("e-check"):a.classList.contains("e-selected"),(!n&&l||n&&!l&&a)&&(o.selectionSettings.showCheckbox?o.notify("updatelist",{li:a,module:"listbox"}):n?(a.classList.add(cn.selected),a.setAttribute("aria-selected","true")):(a.classList.remove(cn.selected),a.removeAttribute("aria-selected"))))}),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var i=this.getSelectTag(),n="";if(i.innerHTML="",this.value){for(var s=0,o=this.value.length;s<o;s++)n+='<option selected value="'+this.value[s]+'"></option>';i.innerHTML+=n}this.checkSelectAll()},t.prototype.checkDisabledState=function(i){return 0===i.ulElement.querySelectorAll("."+cn.li).length},t.prototype.updateToolBarState=function(){var i=this;if(this.toolbarSettings.items.length){var n=this.getScopedListBox(),s=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(o){var a=s.querySelector('[data-value="'+o+'"]');switch(o){case"moveAllTo":a.disabled=i.checkDisabledState(i);break;case"moveAllFrom":a.disabled=i.checkDisabledState(n);break;case"moveFrom":a.disabled=!(n.value&&n.value.length);break;case"moveUp":a.disabled=!(i.value&&i.value.length&&!i.isSelected(i.ulElement.children[0]));break;case"moveDown":a.disabled=!(i.value&&i.value.length&&!i.isSelected(i.ulElement.children[i.ulElement.childElementCount-1]));break;default:a.disabled=!(i.value&&i.value.length)}})}},t.prototype.setCheckboxPosition=function(){var i=this.list;!this.initLoad&&"Left"===this.selectionSettings.checkboxPosition&&i.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&i.classList.add("e-right")},t.prototype.showCheckbox=function(i){var n=0,s=this.list.lastElementChild.querySelectorAll("li"),o=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(i){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var a=new as(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=a.getConstant("selectAllText"),this.unSelectAllText=a.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);n<o;n++)s[n].classList.contains("e-list-item")&&s[n].removeChild(s[n].getElementsByClassName("e-checkbox-wrapper")[0]),s[n].hasAttribute("aria-selected")&&s[n].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(i){return!f(i)&&(i.classList.contains(cn.selected)||null!==i.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),ce(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),r.prototype.destroy.call(this),this.enableRtlElements=[],this.liCollections=null,this.list=null,this.ulElement=null,this.mainList=null,this.spinner=null,this.rippleFun=null,this.itemTemplate&&this.clearTemplate()},t.prototype.onPropertyChanged=function(i,n){var s=this.toolbarSettings.items.length?this.list.parentElement:this.list;r.prototype.onPropertyChanged.call(this,i,n),this.setUpdateInitial(["fields","query","dataSource"],i);for(var o=0,a=Object.keys(i);o<a.length;o++)switch(a[o]){case"cssClass":n.cssClass&&z([s],n.cssClass.split(" ")),i.cssClass&&N([s],i.cssClass.split(" "));break;case"enableRtl":i.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":z(this.list.querySelectorAll("."+cn.selected),cn.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":i.allowDragAndDrop?this.initDraggable():Uo(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,z([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&ke.setPlaceholder(i.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(Uo(this.ulElement,"sortable").scope=i.scope),this.toolbarSettings.items.length&&(n.scope&&(Uo(document.querySelector(n.scope),this.getModuleName()).tBListBox=null),i.scope&&(Uo(document.querySelector(i.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var h=void 0,u=i.toolbarSettings.position,d=this.getToolElem();u&&(z([s],["e-right","e-left"]),s.classList.add("e-"+u.toLowerCase()),"Left"===u?s.insertBefore(d,this.list):s.appendChild(d)),i.toolbarSettings.items&&(n.toolbarSettings&&n.toolbarSettings.items.length&&((h=this.list.parentElement).parentElement.insertBefore(this.list,h),ce(h)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var m=i.selectionSettings.showSelectAll,y=i.selectionSettings.showCheckbox;if(!f(m)){if(this.showSelectAll=m,this.showSelectAll){var C=new as(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=C.getConstant("selectAllText"),this.unSelectAllText=C.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}f(y)||this.showCheckbox(y),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}},Es([E("")],t.prototype,"cssClass",void 0),Es([E([])],t.prototype,"value",void 0),Es([E("")],t.prototype,"height",void 0),Es([E(!1)],t.prototype,"allowDragAndDrop",void 0),Es([E(1e3)],t.prototype,"maximumSelectionLength",void 0),Es([E(!1)],t.prototype,"allowFiltering",void 0),Es([E("")],t.prototype,"scope",void 0),Es([E(!0)],t.prototype,"ignoreCase",void 0),Es([E(null)],t.prototype,"filterBarPlaceholder",void 0),Es([W()],t.prototype,"beforeItemRender",void 0),Es([W()],t.prototype,"filtering",void 0),Es([W()],t.prototype,"select",void 0),Es([W()],t.prototype,"change",void 0),Es([W()],t.prototype,"beforeDrop",void 0),Es([W()],t.prototype,"dragStart",void 0),Es([W()],t.prototype,"drag",void 0),Es([W()],t.prototype,"drop",void 0),Es([W()],t.prototype,"dataBound",void 0),Es([E(null)],t.prototype,"groupTemplate",void 0),Es([E("Request failed")],t.prototype,"actionFailureTemplate",void 0),Es([E(1e3)],t.prototype,"zIndex",void 0),Es([E(!1)],t.prototype,"ignoreAccent",void 0),Es([ln({},y0e)],t.prototype,"toolbarSettings",void 0),Es([ln({},v0e)],t.prototype,"selectionSettings",void 0),e=Es([ui],t)}(EH),Bx={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"};new Zp;var p8,zie=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ro=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Af="e-other-month",Q4="e-other-year",eM="e-calendar",J4="e-year",e8="e-month",fa="e-disabled",Bb="e-overlay",t8="e-week-number",jl="e-selected",uh="e-focused-date",VH="e-month-hide",zH="e-zoomin",Yie="e-calendar-day-header-lg",i8=864e5,Zie=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return zie(t,r),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new qr(this.locale),(f(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(eM),this.enableRtl&&this.element.classList.add("e-rtl"),Q.isDevice&&this.element.classList.add("e-device"),Ue(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(eM),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),Q.isDevice&&this.calendarElement.classList.add("e-device"),Ue(this.calendarElement,{"data-role":"calendar"})),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,i){f(e)&&this.setProperties({min:new Date(1900,0,1)},!0),f(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!f(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,i,n,s){if(s&&!f(i)&&!f(n)&&!f(e)){var o=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;n.style.zIndex=(o-1).toString(),e.style.zIndex=o.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?z([this.element],Bb):(this.setProperties({min:this.min},!0),N([this.element],Bb)),this.min=f(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=f(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var s=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),Qi(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),Ue(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),Qi(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(Ue(this.previousIcon,{tabIndex:"-1"}),Ue(this.nextIcon,{tabIndex:"-1"})),Ue(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),Ue(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),s.appendChild(this.previousIcon),s.appendChild(this.nextIcon),this.headerElement.appendChild(s),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var i,e=[],n="days.stand-alone."+this.dayHeaderFormat.toLowerCase();i="en"===this.locale||"en-US"===this.locale?ie(n,Xp()):this.getCultureObjects(oa,""+this.locale);for(var s=0,o=Object.keys(i);s<o.length;s++)e.push(ie(o[s],i));return e},t.prototype.toCapitalize=function(e){return!f(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content .e-week-header")[0])||ce(this.element.querySelectorAll(".e-content .e-week-header")[0]):f(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||ce(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(i+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?N([this.element],""+t8):N([this.calendarElement],""+t8));for(var n=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek),s=0;s<=6;s++)i+='<th  class="">'+this.toCapitalize(n[s])+"</th>";this.tableHeadElement.innerHTML=i="<tr>"+i+"</tr>",this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content tbody")[0])||ce(this.element.querySelectorAll(".e-content tbody")[0]):f(this.calendarElement.querySelectorAll(".e-content tbody")[0])||ce(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),i=new Date(+this.max);this.globalize=new qr(this.locale),this.l10=new as(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Qi(this.todayElement),this.updateFooter(),N([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&N([this.todayElement],fa),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(fa)||T.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,i,n,s){T.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new An(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new An(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,i,n,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=de(this.defaultKeyConfigs,n),this.serverModuleName=s},t.prototype.todayButtonClick=function(e,i,n){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),n):this.navigateTo("Month",new Date(this.checkValue(i)),n))},t.prototype.resetCalendar=function(){this.calendarElement&&ce(this.calendarElement),this.tableBodyElement&&ce(this.tableBodyElement),this.table&&ce(this.table),this.tableHeadElement&&ce(this.tableHeadElement),this.nextIcon&&ce(this.nextIcon),this.previousIcon&&ce(this.previousIcon),this.footer&&ce(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,i,n){var o,s=this.tableBodyElement.querySelector("tr td.e-focused-date");o=n?f(s)||+i!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.keyboardNavigate(0===a?-7:-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.keyboardNavigate(0===a?7:4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,i);else{var u=f(s)?o:s;if(!f(u)&&!u.classList.contains(fa))if(h){var d=new Date(parseInt(""+u.id,0));this.selectDate(e,d,u)}else this.contentClick(null,--a,u,i)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!f(s)||!f(o)&&!h)&&this.contentClick(null,--a,s||o,i),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),ce(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),ce(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.keyboardNavigate=function(e,i,n,s,o){var a=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(ce(this.tableBodyElement),this.renderDecades(n)):this.currentDate=a;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(ce(this.tableBodyElement),this.renderYears(n)):this.currentDate=a;break;case 0:this.addDay(this.currentDate,e,n,s,o),this.isMinMaxRange(this.currentDate)?(ce(this.tableBodyElement),this.renderMonths(n)):this.currentDate=a}},t.prototype.preRender=function(e){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(n){i.triggerNavigate(n)}},t.prototype.minMaxDate=function(e){var i=new Date(new Date(+e).setHours(0,0,0,0)),n=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+n||+i==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,i,n){var o,s=this.weekNumber?8:7;o="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,i,null,null,n,e):this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(o,s,e8,e,i):this.islamicModule.islamicRenderTemplate(o,s,e8,e,i)},t.prototype.renderDays=function(e,i,n,s,o,a){var m,l=[],u=o?new Date(+e):this.getDate(new Date,this.timezone),d=new Date(this.checkValue(e)),y=d.getMonth();this.titleUpdate(e,"days");var C=d;for(d=new Date(C.getFullYear(),C.getMonth(),0,C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds());d.getDay()!==this.firstDayOfWeek;)this.setStartDate(d,-1*i8);for(var S=0;S<42;++S){var I=this.createElement("td",{className:"e-cell"}),k=this.createElement("span");if(S%7==0&&this.weekNumber){var O="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,L=new Date(d.getFullYear(),d.getMonth(),d.getDate()+O);k.textContent=""+this.getWeek(L),I.appendChild(k),N([I],""+t8),l.push(I)}m=new Date(+d),d=this.minMaxDate(d);var B={type:"dateTime",skeleton:"full"},j=this.globalize.parseDate(this.globalize.formatDate(d,B),B),G=this.dayCell(d),ae=this.globalize.formatDate(d,{type:"date",skeleton:"full"}),ve=this.createElement("span");ve.textContent=this.globalize.formatDate(d,{format:"d",type:"date",skeleton:"yMd"});var xe=this.min>d||this.max<d;xe?(N([G],fa),N([G],Bb)):ve.setAttribute("title",""+ae),y!==d.getMonth()&&N([G],Af),(0===d.getDay()||6===d.getDay())&&N([G],"e-weekend"),G.appendChild(ve),this.renderDayCellArgs={date:d,isDisabled:!1,element:G,isOutOfRange:xe};var Le=this.renderDayCellArgs;if(this.renderDayCellEvent(Le),Le.isDisabled){var oe=new Date(this.checkValue(i)),Ae=new Date(this.checkValue(Le.date));if(n){if(!f(s)&&s.length>0)for(var De=0;De<s.length;De++)+new Date(this.globalize.formatDate(Le.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[De],{type:"date",skeleton:"yMd"}))&&(s.splice(De,1),De=-1)}else oe&&+oe==+Ae&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!G.classList.contains(jl)&&(N([G],fa),N([G],Bb),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var We=G.classList.contains(Af),Se=G.classList.contains(fa);Se||T.add(G,"click",this.clickHandler,this);var Oe=void 0;if(!f(a)&&"click"==a.type&&(Oe=a.currentTarget),!n||f(s)||Se)!Se&&this.getDateVal(d,i)&&N([G],jl);else{for(var Ve=0;Ve<s.length;Ve++){var Yt={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(d,Yt)===this.globalize.formatDate(s[Ve],Yt)&&this.getDateVal(d,s[Ve])||this.getDateVal(d,i))&&N([G],jl),!f(Oe)&&Oe.innerText===G.innerText&&this.previousDates&&G.classList.contains(jl)&&Oe.classList.contains(jl)){z([G],jl),this.previousDates=!1;for(var ei=this.copyValues(s),Ci=0;Ci<ei.length;Ci++){var Ji={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(j,Ji)===this.globalize.formatDate(ei[Ci],Ji)&&(De=ei.indexOf(ei[Ci]),ei.splice(De,1),s.splice(De,1))}this.setProperties({values:ei},!0)}else this.updateFocus(We,Se,d,G,e)}s.length<=0&&this.updateFocus(We,Se,d,G,e)}this.updateFocus(We,Se,d,G,e),j.getFullYear()===u.getFullYear()&&j.getMonth()===u.getMonth()&&j.getDate()===u.getDate()&&N([G],"e-today"),l.push(this.renderDayCellArgs.element),d=new Date(+m),this.addDay(d,1,null,this.max,this.min)}return l},t.prototype.updateFocus=function(e,i,n,s,o){o.getDate()!==n.getDate()||e||i?(o>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!i&&N([s],uh),o<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!i&&N([s],uh)):N([s],uh)},t.prototype.renderYears=function(e,i){this.removeTableHeadElement();var s=[],o=f(i),a=new Date(this.checkValue(this.currentDate)),l=a.getMonth(),h=a.getFullYear(),u=a,d=u.getFullYear(),m=new Date(this.checkValue(this.min)).getFullYear(),y=new Date(this.checkValue(this.min)).getMonth(),C=new Date(this.checkValue(this.max)).getFullYear(),S=new Date(this.checkValue(this.max)).getMonth();u.setMonth(0),this.titleUpdate(this.currentDate,"months"),u.setDate(1);for(var I=0;I<12;++I){var k=this.dayCell(u),O=this.createElement("span"),L=i&&i.getMonth()===u.getMonth(),B=i&&i.getFullYear()===h&&L;O.textContent=this.toCapitalize(this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(d<m||I<y&&d===m)||this.max&&(d>C||I>S&&d>=C)?N([k],fa):!o&&B?N([k],jl):u.getMonth()===l&&this.currentDate.getMonth()===l&&N([k],uh),u.setDate(1),u.setMonth(u.getMonth()+1),k.classList.contains(fa)||T.add(k,"click",this.clickHandler,this),k.appendChild(O),s.push(k)}this.renderTemplate(s,4,J4,e,i)},t.prototype.renderDecades=function(e,i){this.removeTableHeadElement();var o=[],a=new Date(this.checkValue(this.currentDate));a.setMonth(0),a.setDate(1);var l=a.getFullYear(),h=new Date(a.setFullYear(l-l%10)),u=new Date(a.setFullYear(l-l%10+9)),d=h.getFullYear(),m=u.getFullYear(),y=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),C=this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=y+" - "+C;for(var I=new Date(l-l%10-1,0,1).getFullYear(),k=0;k<12;++k){var O=I+k;a.setFullYear(O);var L=this.dayCell(a),B=this.createElement("span");B.textContent=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"}),O<d||O>m?(N([L],Q4),!f(i)&&a.getFullYear()===i.getFullYear()&&N([L],jl),(O<new Date(this.checkValue(this.min)).getFullYear()||O>new Date(this.checkValue(this.max)).getFullYear())&&N([L],fa)):O<new Date(this.checkValue(this.min)).getFullYear()||O>new Date(this.checkValue(this.max)).getFullYear()?N([L],fa):f(i)||a.getFullYear()!==i.getFullYear()?a.getFullYear()===this.currentDate.getFullYear()&&!L.classList.contains(fa)&&N([L],uh):N([L],jl),L.classList.contains(fa)||T.add(L,"click",this.clickHandler,this),L.appendChild(B),o.push(L)}this.renderTemplate(o,4,"e-decade",e,i)},t.prototype.dayCell=function(e){var n={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a={className:"e-cell",attrs:{id:""+Gi(""+this.globalize.parseDate(this.globalize.formatDate(e,n),n).valueOf()),"aria-selected":"false"}};return this.createElement("td",a)},t.prototype.firstDay=function(e){var i="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Af):this.tableBodyElement.querySelectorAll("td:not(."+Q4);if(i.length)for(var n=0;n<i.length;n++)if(!i[n].classList.contains(fa)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.lastDay=function(e,i){var n=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==i){var s=Math.abs(n.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&n.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(n)}return this.findLastDay(this.firstDay(n))},t.prototype.checkDateValue=function(e){return!f(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var i="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Q4):this.tableBodyElement.querySelectorAll("td:not(."+Af);if(i.length)for(var n=i.length-1;n>=0;n--)if(!i[n].classList.contains(fa)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content table thead")[0])||ce(this.tableHeadElement):f(this.calendarElement.querySelectorAll(".e-content table thead")[0])||ce(this.tableHeadElement)},t.prototype.renderTemplate=function(e,i,n,s,o){var l,a=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),z([this.contentElement,this.headerElement],[e8,"e-decade",J4]),N([this.contentElement,this.headerElement],[n]);for(var m=i,y=0,C=0;C<e.length/i;++C){for(l=this.createElement("tr"),y=0+y;y<m;y++)!e[y].classList.contains("e-week-number")&&!f(e[y].children[0])&&(N([e[y].children[0]],["e-day"]),Qi(e[y].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[y]),this.weekNumber&&7===y&&e[7].classList.contains(Af)&&N([l],VH),!this.weekNumber&&6===y&&e[6].classList.contains(Af)&&N([l],VH),this.weekNumber?41===y&&e[41].classList.contains(Af)&&N([l],VH):35===y&&e[35].classList.contains(Af)&&N([l],VH);m+=i,y+=0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(a!==this.getViewNumber(this.currentView())||0===a&&a!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,i){this.clickEventEmitter(e);var n=e.currentTarget,s=this.getViewNumber(this.currentView());n.classList.contains(Af)?this.contentClick(e,0,null,i):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===s?this.contentClick(e,1,null,i):n.classList.contains(Af)||0!==s?this.contentClick(e,0,n,i):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,i,n,s){var o=this.getViewNumber(this.currentView()),a=this.getIdValue(e,n);switch(i){case 0:o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(ce(this.tableBodyElement),this.currentDate=a,this.effect=zH,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(a.getMonth()),a.getMonth()>0&&this.currentDate.getMonth()!==a.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(a.getFullYear())):this.currentDate=a,this.effect=zH,ce(this.tableBodyElement),this.renderMonths(e));break;case 1:if(o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,a,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(a.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(a);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=zH,ce(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,i,n,s){switch(e){case 0:ce(this.tableBodyElement),this.renderMonths(i,null,s),n&&!f(this.tableBodyElement.querySelectorAll("."+uh)[0])&&this.tableBodyElement.querySelectorAll("."+uh)[0].classList.remove(uh);break;case 1:ce(this.tableBodyElement),this.renderYears(i);break;case 2:ce(this.tableBodyElement),this.renderDecades(i)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i,n,s){this.effect="";for(var o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];switch(l){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===l?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&ce(this.tableBodyElement),this.minMaxUpdate(),n&&this.validateValues(n,s),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(ce(this.todayElement),ce(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(z([this.todayElement],fa),ce(this.todayElement),ce(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new qr(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!f(this.todayElement)&&!f(this.footer)&&(ce(this.todayElement),ce(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,i){if(e&&!f(i)&&i.length>0){for(var n=this.copyValues(i),s=0;s<n.length;s++){var l,a="Gregorian"===this.calendarMode?"gregorian":"islamic";l=this.globalize.formatDate(n[s],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});var d=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:a}),C=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:a});(+new Date(l)<+new Date(d)||+new Date(l)>+new Date(C))&&(n.splice(s,1),s=-1)}this.setProperties({values:n},!0)}},t.prototype.setValueUpdate=function(){f(this.tableBodyElement)||(ce(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var i=[];if(!f(e)&&e.length>0)for(var n=0;n<e.length;n++)i.push(new Date(+e[n]));return i},t.prototype.titleUpdate=function(e,i){var s,o,n=new qr(this.locale),a="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(s=n.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:a}),o=n.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:a})):(s=n.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:a}),o=n.formatDate(e,{type:"dateTime",format:"y",calendar:a})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=o}},t.prototype.setActiveDescendant=function(){var e,o,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic",a=this.currentView();return o=this.globalize.formatDate(this.currentDate,"Month"===a?{type:"date",skeleton:"full",calendar:s}:"Year"===a?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(n||i)&&(f(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",o),e=(i||n).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&z([this.element],[eM]),"calendar"===this.getModuleName()&&this.element&&(T.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&T.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),f(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),r.prototype.destroy.call(this)},t.prototype.title=function(e){var i=this.getViewNumber(this.currentView());this.effect=zH,this.switchView(++i,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,i,n){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,n)},t.prototype.currentView=function(){return this.contentElement.classList.contains(J4)?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"},t.prototype.getDateVal=function(e,i){return!f(i)&&e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()},t.prototype.getCultureObjects=function(e,i){var n=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return ie("Gregorian"===this.calendarMode?"main."+this.locale+n:"main."+this.locale+s,e)},t.prototype.getWeek=function(e){var i=new Date(this.checkValue(e)).valueOf(),n=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((i-n+i8)/i8/7)},t.prototype.setStartDate=function(e,i){var n=e.getTimezoneOffset(),s=new Date(e.getTime()+i),o=s.getTimezoneOffset()-n;e.setTime(s.getTime()+6e4*o)},t.prototype.addMonths=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+i,1)}},t.prototype.addYears=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+i,s.month,1)}},t.prototype.getIdValue=function(e,i){var o={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a=this.globalize.formatDate(new Date(parseInt(""+(e?e.currentTarget:i).getAttribute("id"),0)),o),l=this.globalize.parseDate(a,o),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},t.prototype.adjustLongHeaderSize=function(){z([this.element],Yie),"Wide"===this.dayHeaderFormat&&N(["calendar"===this.getModuleName()?this.element:this.calendarElement],Yie)},t.prototype.selectDate=function(e,i,n,s,o){var a=n||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,i.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,i);else{if(s&&!this.checkPresentDate(i,o)){var l=this.copyValues(o);!f(o)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:o[o.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=U(a,"."+eM);if(f(h)&&(h=this.tableBodyElement),!s&&!f(h.querySelector("."+jl))&&z([h.querySelector("."+jl)],jl),!s&&!f(h.querySelector("."+uh))&&z([h.querySelector("."+uh)],uh),s){l=this.copyValues(o);for(var u=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),d=0;d<u.length;d++){var m=h.querySelectorAll("td."+uh)[0],y=h.querySelectorAll("td."+jl)[0];u[d]===m&&z([u[d]],uh),u[d]===y&&!this.checkPresentDate(new Date(parseInt(y.getAttribute("id").split("_")[0],10)),o)&&z([u[d]],jl)}if(a.classList.contains(jl)){z([a],jl);for(var C=0;C<l.length;C++){var I={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(i,I)===this.globalize.formatDate(l[C],I)&&(d=l.indexOf(l[C]),l.splice(d,1),N([a],uh))}this.setProperties({values:l},!0)}else N([a],jl)}else N([a],jl);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,i){var n=!1;if(!f(i))for(var s=0;s<i.length;s++){var o="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:o})===this.globalize.formatDate(i[s],{format:null,type:"date",skeleton:"short",calendar:o})&&(n=!0)}return n},t.prototype.setAriaActiveDescendant=function(){Ue(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?(T.remove(this.previousIcon,"click",this.navigatePreviousHandler),N([this.previousIcon],""+fa),N([this.previousIcon],""+Bb),this.previousIcon.setAttribute("aria-disabled","true")):(T.add(this.previousIcon,"click",this.navigatePreviousHandler),z([this.previousIcon],""+fa),z([this.previousIcon],""+Bb),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){de(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){de(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?(T.remove(this.nextIcon,"click",this.navigateNextHandler),N([this.nextIcon],fa),N([this.nextIcon],Bb),this.nextIcon.setAttribute("aria-disabled","true")):(T.add(this.nextIcon,"click",this.navigateNextHandler),z([this.nextIcon],fa),z([this.nextIcon],Bb),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,i,n){var o,a,s=i.getFullYear();return o=s,a=0,n&&(o=(s-=s%n)-s%n+n-1),e.getFullYear()>o?a=1:e.getFullYear()<s&&(a=-1),a},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(e);return i.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,i){return this.compare(e,i,0)},t.prototype.compareDecade=function(e,i){return this.compare(e,i,10)},t.prototype.shiftArray=function(e,i){return e.slice(i).concat(e.slice(0,i))},t.prototype.addDay=function(e,i,n,s,o){var a=i,l=new Date(+e);if(!f(this.tableBodyElement)&&!f(n)){for(;this.findNextTD(new Date(+e),a,s,o);)a+=i;var h=new Date(l.setDate(l.getDate()+a));a=+h>+s||+h<+o?a===i?i-i:i:a}e.setDate(e.getDate()+a)},t.prototype.findNextTD=function(e,i,n,s){var o=new Date(e.setDate(e.getDate()+i)),a=[],l=!1;if(a=(!f(o)&&o.getMonth())===(!f(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(o):this.islamicModule.islamicRenderDays(this.currentDate,o)).filter(function(d){return d.classList.contains(fa)}):this.tableBodyElement.querySelectorAll("td."+fa),+o<=+n&&+o>=+s&&a.length)for(var u=0;u<a.length&&!(l=+o==+new Date(parseInt(a[u].id,0)));u++);return l},t.prototype.getMaxDays=function(e){var i,n=new Date(this.checkValue(e));i=28;for(var s=n.getMonth();n.getMonth()===s;)++i,n.setDate(i);return i-1},t.prototype.setDateDecade=function(e,i){e.setFullYear(i),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,i){e.setFullYear(i.getFullYear(),i.getMonth(),e.getDate()),i.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,i){return e.getFullYear()>i.getFullYear()?1:e.getFullYear()<i.getFullYear()?-1:e.getMonth()===i.getMonth()?0:e.getMonth()>i.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,i){return i&&(e=new Date(e.toLocaleString("en-US",{timeZone:i}))),e},Ro([E(new Date(1900,0,1))],t.prototype,"min",void 0),Ro([E(!0)],t.prototype,"enabled",void 0),Ro([E(null)],t.prototype,"cssClass",void 0),Ro([E(new Date(2099,11,31))],t.prototype,"max",void 0),Ro([E(null)],t.prototype,"firstDayOfWeek",void 0),Ro([E("Gregorian")],t.prototype,"calendarMode",void 0),Ro([E("Month")],t.prototype,"start",void 0),Ro([E("Month")],t.prototype,"depth",void 0),Ro([E(!1)],t.prototype,"weekNumber",void 0),Ro([E("FirstDay")],t.prototype,"weekRule",void 0),Ro([E(!0)],t.prototype,"showTodayButton",void 0),Ro([E("Short")],t.prototype,"dayHeaderFormat",void 0),Ro([E(!1)],t.prototype,"enablePersistence",void 0),Ro([E(null)],t.prototype,"keyConfigs",void 0),Ro([E(null)],t.prototype,"serverTimezoneOffset",void 0),Ro([W()],t.prototype,"created",void 0),Ro([W()],t.prototype,"destroyed",void 0),Ro([W()],t.prototype,"navigated",void 0),Ro([W()],t.prototype,"renderDayCell",void 0),Ro([ui],t)}(nn),rwe=function(r){function t(e,i){return r.call(this,e,i)||this}return zie(t,r),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&$0("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!f(this.values)&&this.values.length>0){for(var e=[],i=[],n=0;n<this.values.length;n++)-1===e.indexOf(+this.values[n])&&(e.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if("string"==typeof this.values[s]&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var o=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,o)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),r.prototype.render.call(this),"calendar"===this.getModuleName()){var a=U(this.element,"form");a&&T.add(a,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?z([this.element],fa):N([this.element],fa)},t.prototype.setClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),!f(i)&&""!==i&&z([this.element],i.split(" ")),f(e)||N([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,e)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),r.prototype.validateDate.call(this,this.value),!f(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!f(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||f(this.value)?r.prototype.minMaxUpdate.call(this,this.value):!f(this.value)&&this.value<this.min&&this.min<=this.max?r.prototype.minMaxUpdate.call(this,this.min):!f(this.value)&&this.value>this.max&&this.min<=this.max&&r.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(e){var i=new Date;return f(this.timezone)||(i=r.prototype.getDate.call(this,i,this.timezone)),e&&f(this.timezone)?(i.setHours(e.getHours()),i.setMinutes(e.getMinutes()),i.setSeconds(e.getSeconds()),i.setMilliseconds(e.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(e){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var n=this.copyValues(this.values);r.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}r.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},t.prototype.keyActionHandle=function(e){r.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var e=this;this.changeHandler=function(i){e.triggerChange(i)},this.checkView(),r.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,r.prototype.createContent.call(this)},t.prototype.minMaxDate=function(e){return r.prototype.minMaxDate.call(this,e)},t.prototype.renderMonths=function(e,i,n){r.prototype.renderMonths.call(this,e,this.value,n)},t.prototype.renderDays=function(e,i,n,s,o,a){var l=r.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,o,a);return this.isMultiSelection&&r.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},t.prototype.renderYears=function(e){"Gregorian"===this.calendarMode?r.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},t.prototype.renderDecades=function(e){"Gregorian"===this.calendarMode?r.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},t.prototype.renderTemplate=function(e,i,n,s){"Gregorian"===this.calendarMode?r.prototype.renderTemplate.call(this,e,i,n,s,this.value):this.islamicModule.islamicRenderTemplate(e,i,n,s,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(e){var i=e.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(Af))if(this.isMultiSelection){var n=this.copyValues(this.values);-1===n.toString().indexOf(this.getIdValue(e,null).toString())?(n.push(this.getIdValue(e,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();r.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!f(this.tableBodyElement.querySelectorAll("."+uh)[0])&&"Year"===s&&this.tableBodyElement.querySelectorAll("."+uh)[0].classList.remove(uh)},t.prototype.switchView=function(e,i,n,s){r.prototype.switchView.call(this,e,i,this.isMultiSelection,s)},t.prototype.getModuleName=function(){return r.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){return r.prototype.getPersistData.call(this),this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(e,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),l=0;l<a.length;l++){var h=a[l];this.checkDateValue(h)&&!r.prototype.checkPresentDate.call(this,h,a)&&a.push(h)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(e.cssClass,i.cssClass);break;default:r.prototype.onPropertyChanged.call(this,e,i,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(r.prototype.destroy.call(this),"calendar"===this.getModuleName()){var e=U(this.element,"form");e&&T.remove(e,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(e,i,n){this.minMaxUpdate(),r.prototype.navigateTo.call(this,e,i,n)},t.prototype.currentView=function(){return r.prototype.currentView.call(this)},t.prototype.addDate=function(e){if("string"!=typeof e&&"number"!=typeof e){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)this.checkDateValue(n[s])&&!r.prototype.checkPresentDate.call(this,n[s],i)&&(!f(i)&&i.length>0?i.push(n[s]):i=[new Date(+n[s])]);else this.checkDateValue(e)&&!r.prototype.checkPresentDate.call(this,e,i)&&(!f(i)&&i.length>0?i.push(e):i=[new Date(+e)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!f(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)for(var o=0;o<i.length;o++)+i[o]==+n[s]&&i.splice(o,1);else for(o=0;o<i.length;o++)+i[o]==+e&&i.splice(o,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(e){var i=new Date(+e);this.setProperties({value:i},!0),r.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),r.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(e,i,n){r.prototype.selectDate.call(this,e,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!f(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!f(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!f(e),f(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(f(this.value)||f(this.previousDate)||+new Date(this.value.toDateString())==+new Date(this.previousDate.toDateString()))&&(null!=this.previousDate||isNaN(+this.value))?!f(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},Ro([E(null)],t.prototype,"value",void 0),Ro([E(null)],t.prototype,"values",void 0),Ro([E(!1)],t.prototype,"isMultiSelection",void 0),Ro([W()],t.prototype,"change",void 0),Ro([ui],t)}(Zie),fwe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bs=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},UH="e-datepicker",tne="e-popup-wrapper",n8="e-input-focus",WH="e-active",nne="e-date-overflow",qH="e-selected",r8="e-non-edit",rne=["title","class","style"],GH=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousElementValue="",n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.datepickerOptions=e,n}return fwe(t,r),t.prototype.render=function(){this.initialize(),this.bindEvents(),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,i)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):Ue(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&z([this.inputWrapper.container],[r8]):""===this.inputElement.value?z([this.inputWrapper.container],[r8]):N([this.inputWrapper.container],[r8])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=f(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var i={placeholder:this.placeholder};this.globalize=new qr(this.locale),this.l10n=new as("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var n=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(n=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ke.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:n,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),Ue(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),ke.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),N([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(e){if(void 0===e&&(e=!1),this.value&&!this.isCalendar()&&!e&&this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(r.prototype.validateDate.call(this),this.minMaxUpdates(),r.prototype.minMaxUpdate.call(this)),!f(this.value)){var n=this.value,s=void 0,o=f(this.formatString)?this.dateTimeFormat:this.formatString;s="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:o,type:"dateTime",skeleton:"yMd"}:{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),(+n<=+this.max&&+n>=+this.min||!this.strictMode&&(+n>=+this.max||!+this.value||!+this.value||+n<=+this.min))&&this.updateInputValue(s)}f(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&f(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!f(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var i=null,n=null,s=null;if("datetimepicker"===this.getModuleName()){var o=new qr(this.locale);"Gregorian"===this.calendarMode?(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return f(i=this.checkDateValue(this.globalize.parseDate(e,n)))&&"datetimepicker"===this.getModuleName()&&(i=this.checkDateValue(this.globalize.parseDate(e,s))),i},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||f(e))){var i=null,n=e;if("number"==typeof e&&(n=e.toString()),"datetimepicker"===this.getModuleName()){var a=new qr(this.locale);a.getDatePattern({skeleton:"yMd"})}var l=!1;if("string"!=typeof n)n=null,l=!0;else if("string"==typeof n&&(n=n.trim()),!(i=this.checkStringValue(n))){var u=null;u=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(n)&&!u.test(n)||/^[a-zA-Z0-9- ]*$/.test(n)||isNaN(+new Date(this.checkValue(n)))?l=!0:i=new Date(n)}l?(this.strictMode||(this.invalidValueString=n),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},t.prototype.bindInputEvent=function(){(!f(this.formatString)||this.enableMask)&&(this.enableMask||-1===this.formatString.indexOf("y")?T.add(this.inputElement,"input",this.inputHandler,this):T.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){T.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),T.add(this.inputElement,"mouseup",this.mouseUpHandler,this),T.add(this.inputElement,"focus",this.inputFocusHandler,this),T.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&T.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),T.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&T.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new An(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}))}},t.prototype.unBindEvents=function(){T.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),T.remove(this.inputElement,"mouseup",this.mouseUpHandler),T.remove(this.inputElement,"focus",this.inputFocusHandler),T.remove(this.inputElement,"blur",this.inputBlurHandler),T.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&T.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&T.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&T.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=f(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){!this.enabled||e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){!this.enabled||(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),U(this.element,"form")){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){ke.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){!this.enabled||(this.isIconClicked=!0,Q.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),N([this.inputWrapper.container],[n8]),N(this.inputWrapper.buttons,WH))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(!f(this.htmlAttributes[n])&&rne.indexOf(n)>-1)if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&N([this.inputWrapper.container],s.split(" "))}else if("style"===n){var o=this.inputWrapper.container.getAttribute(n);f(o)?o=this.htmlAttributes[n]:";"===o.charAt(o.length-1)?o+=this.htmlAttributes[n]:o=o+";"+this.htmlAttributes[n],this.inputWrapper.container.setAttribute(n,o)}else this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHtmlAttributeToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];rne.indexOf(n)<0&&this.inputElement.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupWrapper&&ke.setCssClass(e,[this.popupWrapper],i)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){if(this.isFocused=!0,this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.inputBlurHandler=function(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&f(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value==this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new An(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)},t.prototype.documentHandler=function(e){!f(this.popupObj)&&(this.inputWrapper.container.contains(e.target)&&"mousedown"!==e.type||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var i=e.target;U(i,".e-datepicker.e-popup-wrapper")||U(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?U(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!f(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&U(i,".e-content")&&U(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||U(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+r.prototype.generateTodayVal.call(this,this.value))&&this.hide(e):(this.hide(e),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var i=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":var n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var o=this.inputElement.value.length;(0==n&&s==o||s!==o&&"tab"==e.action||0!==n&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=n,this.inputElement.selectionEnd=s),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&i===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(e){this.previousDate=!f(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(r.prototype.keyActionHandle.call(this,e),this.isCalendar()&&Ue(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((f(this.value)&&!f(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+qH).length>0&&z(this.popupObj.element.querySelectorAll("."+qH),[qH]),!f(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));r.prototype.navigateTo.call(this,"Month",e)}},t.prototype.strictModeUpdate=function(){var e,s,o;e="datetimepicker"===this.getModuleName()?f(this.formatString)?this.dateTimeFormat:this.formatString:f(this.formatString)?this.formatString:this.formatString.replace("dd","d"),f(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),s="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?o=this.checkDateValue(this.globalize.parseDate(this.inputElement.value,s))?this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),s):this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(o=!f(o=this.globalize.parseDate(this.inputElement.value,s))&&isNaN(+o)?null:o,!f(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&o.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&o&&o.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&o?(this.updateInputValue(this.globalize.formatDate(o,s)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0),this.strictMode&&!o&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),f(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:UH+" "+tne}),f(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),Q.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=UH+" e-date-modal",document.body.className+=" "+nne,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Ol(this.popupWrapper,{content:this.calendarElement,relateTo:Q.isDevice?document.body:this.inputWrapper.container,position:Q.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:Q.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=de(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new An(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new An(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),ce(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){Q.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,i=this.createElement("div",{className:"e-model-header"}),n=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),o=this.createElement("span",{className:"e-model-day"}),a=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},o.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e),i.appendChild(n),s.appendChild(o),s.appendChild(a),i.appendChild(s),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!f(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var i,n;n="datetimepicker"===this.getModuleName()&&f(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&(i="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:n,type:"dateTime",skeleton:"yMd"}:{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),f(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+tne))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?ot(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:ot(this.width):"100%"},t.prototype.show=function(e,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,o=void 0;f(this.value)||+this.value>=+this.min&&+this.value<=+this.max?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(r.prototype.render.call(this),this.setProperties({value:o||null},!0),this.previousDate=o,this.createCalendar()),Q.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:Q.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,function(l){(n.preventArgs=l,s&&!n.preventArgs.cancel)?(N(n.inputWrapper.buttons,WH),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement),n.popupObj.show(new Cr({name:"FadeIn",duration:Q.isDevice?0:300}),1e3===n.zIndex?n.element:null),r.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,Q.isDevice),n.setAriaAttributes()):(n.popupObj.destroy(),n.popupWrapper=n.popupObj=null);!f(n.inputElement)&&""===n.inputElement.value&&!f(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(N([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),z(n.tableBodyElement.querySelectorAll("td.e-selected"),qH)),T.add(document,"mousedown touchstart",n.documentHandler,n)})}},t.prototype.hide=function(e){var i=this;if(f(this.popupWrapper))Q.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var n=!0;this.preventArgs={preventDefault:function(){n=!1},popup:this.popupObj,event:e||null,cancel:!1},z(this.inputWrapper.buttons,WH),z([document.body],nne);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(o){i.closeEventCallback(n,o)}):this.closeEventCallback(n,s)}},t.prototype.closeEventCallback=function(e,i){this.preventArgs=i,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),z(this.inputWrapper.buttons,WH)),this.setAriaAttributes(),Q.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),Q.isDevice&&(f(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),T.remove(document,"mousedown touchstart",this.documentHandler),Q.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),N([this.inputWrapper.container],[n8]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(z([this.inputWrapper.container],[n8]),this.inputElement.blur())},t.prototype.currentView=function(){var e;return this.calendarElement&&(e=r.prototype.currentView.call(this)),e},t.prototype.navigateTo=function(e,i){this.calendarElement&&r.prototype.navigateTo.call(this,e,i)},t.prototype.destroy=function(){this.unBindEvents(),r.prototype.destroy.call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&r.prototype.destroy.call(this),this.inputElement&&(ke.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),f(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),T.remove(this.inputElement,"blur",this.inputBlurHandler),T.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&ce(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),z([this.inputElement],["e-input"])),z([this.element],[UH]),ce(this.inputWrapper.container)),this.formElement&&T.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.ensureInputAttribute=function(){for(var e=[],i=0;i<this.inputElement.attributes.length;i++)e[i]=this.inputElement.attributes[i].name;for(i=0;i<e.length;i++)f(this.inputElementCopy.getAttribute(e[i]))?("value"===e[i].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[i])):("value"===e[i].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[i])),this.inputElement.setAttribute(e[i],this.inputElementCopy.getAttribute(e[i])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),z([this.inputElementCopy],[UH,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=U(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=Gi("ej2-datetimepicker"),null!==this.ngTag&&Ue(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=Gi("ej2-datepicker"),null!==this.ngTag&&Ue(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),r.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(!f(e.getAttribute(s[o]))){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.checkFormat=function(){var e=new qr(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||f(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{var i=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:i,type:"dateTime"}):e.getDatePattern({skeleton:i,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new qr(this.locale),this.checkFormat(),this.checkView();var n,i=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];n="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){var l=!("disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a));this.setProperties({enabled:l},!e)}break;case"readonly":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){var h="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:h},!e)}break;case"placeholder":(f(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){var u=this.inputElement.getAttribute(a);this.setProperties(jt(a,this.globalize.parseDate(u,n),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var d=this.inputElement.getAttribute(a);this.setProperties(jt(a,this.globalize.parseDate(d),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var m=this.inputElement.getAttribute(a);this.setProperties(jt(a,this.globalize.parseDate(m),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(){var n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),s=this.previousDate;this.minMaxUpdates(),r.prototype.render.call(this),this.previousDate=s;var l,a='*[id^="/id"]'.replace("/id",""+(n&&+n));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+n)&&this.setProperties({value:n},!0),f(this.calendarElement.querySelectorAll(a)[0])||this.calendarElement.querySelectorAll(a)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),l="datetimepicker"===this.getModuleName()?this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.popupObj||(this.updateInputValue(l),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(ke.addAttributes({"aria-expanded":"true"},this.inputElement),Ue(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&Ue(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(ke.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!f(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&f(this.value)||i?(N([this.inputWrapper.container],"e-error"),Ue(this.inputElement,{"aria-invalid":"true"})):(z([this.inputWrapper.container],"e-error"),Ue(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,f(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":ke.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new qr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&r.prototype.onPropertyChanged.call(this,e,i);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"showClearButton":ke.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},Bs([E(null)],t.prototype,"width",void 0),Bs([E(null)],t.prototype,"value",void 0),Bs([E(null)],t.prototype,"cssClass",void 0),Bs([E(!1)],t.prototype,"strictMode",void 0),Bs([E(null)],t.prototype,"format",void 0),Bs([E(!0)],t.prototype,"enabled",void 0),Bs([E({})],t.prototype,"htmlAttributes",void 0),Bs([E(null)],t.prototype,"values",void 0),Bs([E(!1)],t.prototype,"isMultiSelection",void 0),Bs([E(!0)],t.prototype,"showClearButton",void 0),Bs([E(!0)],t.prototype,"allowEdit",void 0),Bs([E(null)],t.prototype,"keyConfigs",void 0),Bs([E(!1)],t.prototype,"enablePersistence",void 0),Bs([E(1e3)],t.prototype,"zIndex",void 0),Bs([E(!1)],t.prototype,"readonly",void 0),Bs([E(null)],t.prototype,"placeholder",void 0),Bs([E("Never")],t.prototype,"floatLabelType",void 0),Bs([E(null)],t.prototype,"serverTimezoneOffset",void 0),Bs([E(!1)],t.prototype,"openOnFocus",void 0),Bs([E(!1)],t.prototype,"enableMask",void 0),Bs([E({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Bs([W()],t.prototype,"open",void 0),Bs([W()],t.prototype,"cleared",void 0),Bs([W()],t.prototype,"close",void 0),Bs([W()],t.prototype,"blur",void 0),Bs([W()],t.prototype,"focus",void 0),Bs([W()],t.prototype,"created",void 0),Bs([W()],t.prototype,"destroyed",void 0),Bs([ui],t)}(rwe);(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),function(r){r.createListItems=function t(e,i,n,s,o,a){var l,h=6e4*a,u=[],d=[];l=+i.setMilliseconds(0);for(var m=+n.setMilliseconds(0);m>=l;)d.push(l),u.push(s.formatDate(new Date(l),{format:o,type:"time"})),l+=h;return{collection:d,list:fn.createList(e,u,null,!0)}}}(p8||(p8={}));var pM,nSe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zr=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},aSe=(new Date).getDate(),lSe=(new Date).getMonth(),hSe=(new Date).getFullYear(),uSe=(new Date).getHours(),cSe=(new Date).getMinutes(),dSe=(new Date).getSeconds(),pSe=(new Date).getMilliseconds(),oM="e-datetimepicker",Dne="e-datetimepopup-wrapper",aM="e-input-focus",_ne="e-icon-anim",f8="e-disabled",Vb="e-active",g8="e-hover",zb="e-list-item",Lne="e-time-overflow",m8=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=e,n}return nSe(t,r),t.prototype.focusHandler=function(){!this.enabled||N([this.inputWrapper.container],aM)},t.prototype.focusIn=function(){r.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),z([this.inputWrapper.container],[aM]))},t.prototype.blurHandler=function(e){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();z([this.inputWrapper.container],aM);var i={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",i)}},t.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),ce(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],f(this.rippleFn)||this.rippleFn()),this.inputElement&&ke.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&ce(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),r.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),r.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1),this.l10n=new as("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),r.prototype.render.call(this),this.createInputElement(),r.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},t.prototype.setValue=function(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var e=this.validateMinMaxRange(this.initValue);ke.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else f(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,r.prototype.updateInput.call(this)},t.prototype.validateMinMaxRange=function(e){var i=e;return this.isDateObject(e)?i=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?z([this.inputWrapper.container],"e-error"):N([this.inputWrapper.container],"e-error"),Ue(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.validateValue=function(e){var i=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+e<+this.min?i=this.min:+e>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=e),i},t.prototype.disablePopupButton=function(e){e?(N([this.inputWrapper.buttons[0],this.timeIcon],f8),this.hide()):z([this.inputWrapper.buttons[0],this.timeIcon],f8)},t.prototype.getFormattedValue=function(e){var i;return f(e)?null:(i="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,i))},t.prototype.isDateObject=function(e){return!f(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){z([this.inputElement],"e-datepicker"),z([this.inputWrapper.container],"e-date-wrapper"),N([this.inputWrapper.container],"e-datetime-wrapper"),N([this.inputElement],oM),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=ke.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},t.prototype.bindInputEvents=function(){T.add(this.timeIcon,"mousedown",this.timeHandler,this),T.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),T.add(this.inputElement,"blur",this.blurHandler,this),T.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new An(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){T.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),T.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(T.remove(this.inputElement,"blur",this.blurHandler),T.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?ie("timeFormats.short",Xp()):this.getCultureTimeObject(oa,""+this.locale):this.timeFormat},t.prototype.cldrDateTimeFormat=function(){var n=new qr(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?n+" "+this.getCldrFormat("time"):this.formatString},t.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?ie("timeFormats.short",Xp()):this.getCultureTimeObject(oa,""+this.locale)},t.prototype.isNullOrEmpty=function(e){return!!(f(e)||"string"==typeof e&&""===e.trim())},t.prototype.getCultureTimeObject=function(e,i){return ie("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(e){!this.enabled||(this.isIconClicked=!0,Q.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&r.prototype.hide.call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),N([this.inputWrapper.container],[aM]))),this.isIconClicked=!1)},t.prototype.dateHandler=function(e){!this.enabled||(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),f(this.popupWrapper)||this.popupCreation("date",e)))},t.prototype.show=function(e,i){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),r.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},t.prototype.toggle=function(e){this.isDatePopupOpen()?(r.prototype.hide.call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),r.prototype.show.call(this,null,e),this.popupCreation("date",null)):this.show(null,e)},t.prototype.listCreation=function(){var e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=f(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=ri("div",{className:"e-content",attrs:{tabindex:"0"}});var n=this.startTime(i),s=this.endTime(i),o=p8.createListItems(this.createElement,n,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=o.collection,this.listTag=o.list,Ue(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Zt([o.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=Qi(this.listWrapper,{duration:300,selector:"."+zb}),this.liCollections=this.listWrapper.querySelectorAll("."+zb)},t.prototype.popupCreation=function(e,i){Q.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(N([this.popupWrapper],Dne),Ue(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=ri("div",{className:oM+" e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),f(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!f(this.step)&&this.step>0&&(this.listCreation(),Zt([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),this.popupObject.refreshPosition(this.inputElement))},t.prototype.openPopup=function(e){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,function(s){if(i.preventArgs=s,!i.preventArgs.cancel&&!i.readonly){i.popupObject.show(new Cr({name:"FadeIn",duration:100}),1e3===i.zIndex?i.element:null),N([i.inputWrapper.container],[_ne]),Ue(i.inputElement,{"aria-expanded":"true"}),Ue(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),T.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},t.prototype.documentClickHandler=function(e){var i=e.target;!f(this.popupObject)&&(this.inputWrapper.container.contains(i)&&"mousedown"!==e.type||this.popupObject.element&&this.popupObject.element.contains(i))&&"touchstart"!==e.type&&e.preventDefault(),U(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||i===this.inputElement||i===this.timeIcon||i===this.inputWrapper.container?i!==this.inputElement&&(Q.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(Q.isIE||"edge"===Q.info.name)&&i===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())},t.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+oM))},t.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+Dne))},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),Q.isDevice&&(this.timeModal=ri("div"),this.timeModal.className=oM+" e-time-modal",document.body.className+=" "+Lne,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new Ol(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:Q.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:Q.isDevice?document.body:this.inputWrapper.container,position:Q.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",N([e.timeIcon],Vb),Q.isDevice||(e.timekeyConfigure=de(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new An(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){z([e.timeIcon],Vb),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),He(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){Q.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight="250px"},t.prototype.setDimension=function(e){return"number"==typeof e?e=ot(e):"string"==typeof e||(e="100%"),e},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e},t.prototype.wireTimeListEvents=function(){T.add(this.listWrapper,"click",this.onMouseClick,this),Q.isDevice||(T.add(this.listWrapper,"mouseover",this.onMouseOver,this),T.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(T.remove(this.listWrapper,"click",this.onMouseClick),T.remove(document,"mousedown touchstart",this.documentClickHandler),Q.isDevice||(T.add(this.listWrapper,"mouseover",this.onMouseOver,this),T.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var i=U(e.target,"."+zb);this.setTimeHover(i,g8)},t.prototype.onMouseLeave=function(){this.removeTimeHover(g8)},t.prototype.setTimeHover=function(e,i){this.enabled&&this.isValidLI(e)&&!e.classList.contains(i)&&(this.removeTimeHover(i),N([e],i))},t.prototype.getPopupHeight=function(){var e=parseInt("250px",10),i=this.dateTimeWrapper.getBoundingClientRect().height;return i>e?e:i},t.prototype.changeEvent=function(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(r.prototype.changeEvent.call(this,e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!f(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},t.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;f(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var i=this.getPopupHeight(),n=e.nextElementSibling,s=n?n.offsetTop:e.offsetTop,o=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=s+e.offsetTop>i?n?s-(i/2+o/2):s:0},t.prototype.setScrollTo=function(){var e,i=this.dateTimeWrapper.querySelectorAll("."+zb);if(i.length>=0){this.scrollInvoked=!0;var n=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=i[Math.round((s-n)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;f(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));ke.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},t.prototype.getFullDateTime=function(){var e;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var i=this.previousDate.getDate(),n=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return new Date(s,n,i,o,a,l)}return this.previousDate},t.prototype.onMouseClick=function(e){var n=this.selectedElement=U(e.target,"."+zb);n&&n.classList.contains(zb)&&(this.timeValue=n.getAttribute("data-value"),this.hide(e)),this.setSelection(n,e)},t.prototype.setSelection=function(e,i){if(this.isValidLI(e)&&!e.classList.contains(Vb)){this.selectedElement=e;var n=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=n,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),N([this.selectedElement],Vb),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},t.prototype.setTimeActiveClass=function(){var e=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!f(e)){var i=e.querySelectorAll("."+zb);if(i.length)for(var n=0;n<i.length;n++)if(this.timeCollections[n]===+this.valueWithMinutes){i[n].setAttribute("aria-selected","true"),this.selectedElement=i[n],this.activeIndex=n,this.setTimeActiveDescendant();break}}},t.prototype.setTimeActiveDescendant=function(){!f(this.selectedElement)&&this.value?Ue(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),f(this.selectedElement)||(N([this.selectedElement],Vb),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover(g8),!f(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+Vb);e.length&&(z(e,Vb),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var i=this.getTimeHoverItem(e);i&&i.length&&z(i,e)},t.prototype.getTimeHoverItem=function(e){var n,i=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return f(i)||(n=i.querySelectorAll("."+e)),n},t.prototype.isValidLI=function(e){return e&&e.classList.contains(zb)&&!e.classList.contains(f8)},t.prototype.calculateStartEnd=function(e,i,n){var s=e.getDate(),o=e.getMonth(),a=e.getFullYear(),l=e.getHours(),h=e.getMinutes(),u=e.getSeconds(),d=e.getMilliseconds();return i?"starttime"===n?new Date(a,o,s,0,0,0):new Date(a,o,s,23,59,59):new Date(a,o,s,l,h,u,d)},t.prototype.startTime=function(e){var i,n,s=this.min,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getFullYear(),o.getMonth(),o.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.min):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o>=+this.max&&(n=!0,i=this.max),this.calculateStartEnd(i,n,"starttime")},t.prototype.endTime=function(e){var i,n,s=this.max,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getUTCFullYear(),o.getMonth(),o.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.max):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o<=+this.min&&(n=!0,i=this.min),this.calculateStartEnd(i,n,"endtime")},t.prototype.hide=function(e){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var n=this.preventArgs;f(this.popupObj)?this.trigger("close",n,function(s){i.dateTimeCloseEventCallback(e,s)}):this.dateTimeCloseEventCallback(e,n)}else Q.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(e,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?r.prototype.hide.call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),z([document.body],Lne),Q.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),Q.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new Cr({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(_ne),Ue(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),T.remove(document,"mousedown touchstart",this.documentClickHandler))},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.preRender.call(this),z([this.inputElementCopy],[oM])},t.prototype.getProperty=function(e,i){this.setProperties("min"===i?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var n,s=0,o=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"readonly":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var l="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"min":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({min:n},!e));break;case"disabled":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var h=!("disabled"===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a));this.setProperties({enabled:h},!e)}break;case"value":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({value:n},!e));break;case"max":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({max:n},!e))}}},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},t.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},t.prototype.getTimeActiveElement=function(){return f(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+Vb)},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var i=this.createDateObj(e),n=this.valueWithMinutes,s=!f(n);if(this.checkDateValue(i)){var o=s?n.getDate():aSe,a=s?n.getMonth():lSe,l=s?n.getFullYear():hSe,h=s?n.getHours():uSe,u=s?n.getMinutes():cSe,d=s?n.getSeconds():dSe,m=s?n.getMilliseconds():pSe;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,a,o,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,a,o,h,u,d,m)}}return null},t.prototype.findNextTimeElement=function(e){var i=this.inputElement.value,n=f(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),s=null,o=this.liCollections.length;if(!f(this.activeIndex)||!f(this.checkDateValue(n))){if("home"===e.action)s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var a=0;a<o;a++)if(+n<this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(a=o-1;a>=0;a--)if(+n>this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(f(s)?null:new Date(s))}},t.prototype.setTimeValue=function(e,i){var n,s,o=this.validateMinMaxRange(i),a=this.createDateObj(o);return this.getFormattedValue(a)!==(f(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=f(a)?null:a,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),n=this.globalize.formatDate(s,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&f(s),ke.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),s},t.prototype.timeElementValue=function(e){if(!f(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var i=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(i,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(f(this.step)||this.step<=0)){var i=this.timeCollections.length;if(f(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(f(this.value)&&f(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var n=void 0;if(e.keyCode>=37&&e.keyCode<=40){var s=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===i?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?i-1:this.activeIndex,n=f(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else"home"===e.action?(this.activeIndex=0,n=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=i-1,n=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(n))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&null!==this.selectedElement&&(!e||"click"!==e.type)&&this.setTimeScrollPosition()}},t.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),N([this.inputWrapper.container],aM),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},t.prototype.inputKeyAction=function(e){"altDownArrow"===e.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(e))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),ke.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,o),this.updateInput();break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":f(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),f(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),ke.setCssClass(e.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&ke.setCssClass(e.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new qr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":ke.setPlaceholder(e.placeholder,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=f(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Zr([E(null)],t.prototype,"timeFormat",void 0),Zr([E(30)],t.prototype,"step",void 0),Zr([E(null)],t.prototype,"scrollTo",void 0),Zr([E(1e3)],t.prototype,"zIndex",void 0),Zr([E(null)],t.prototype,"value",void 0),Zr([E(null)],t.prototype,"keyConfigs",void 0),Zr([E({})],t.prototype,"htmlAttributes",void 0),Zr([E(!1)],t.prototype,"enablePersistence",void 0),Zr([E(!0)],t.prototype,"allowEdit",void 0),Zr([E(!1)],t.prototype,"isMultiSelection",void 0),Zr([E(null)],t.prototype,"values",void 0),Zr([E(!0)],t.prototype,"showClearButton",void 0),Zr([E(null)],t.prototype,"placeholder",void 0),Zr([E(!1)],t.prototype,"strictMode",void 0),Zr([E(null)],t.prototype,"serverTimezoneOffset",void 0),Zr([E(new Date(1900,0,1))],t.prototype,"min",void 0),Zr([E(new Date(2099,11,31))],t.prototype,"max",void 0),Zr([E(null)],t.prototype,"firstDayOfWeek",void 0),Zr([E("Gregorian")],t.prototype,"calendarMode",void 0),Zr([E("Month")],t.prototype,"start",void 0),Zr([E("Month")],t.prototype,"depth",void 0),Zr([E(!1)],t.prototype,"weekNumber",void 0),Zr([E(!0)],t.prototype,"showTodayButton",void 0),Zr([E("Short")],t.prototype,"dayHeaderFormat",void 0),Zr([E(!1)],t.prototype,"openOnFocus",void 0),Zr([E(!1)],t.prototype,"enableMask",void 0),Zr([E({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Zr([W()],t.prototype,"open",void 0),Zr([W()],t.prototype,"close",void 0),Zr([W()],t.prototype,"cleared",void 0),Zr([W()],t.prototype,"blur",void 0),Zr([W()],t.prototype,"focus",void 0),Zr([W()],t.prototype,"created",void 0),Zr([W()],t.prototype,"destroyed",void 0),Zr([ui],t)}(GH);new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(r){var i;(i=r.ForceEncoding||(r.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode"}(pM||(pM={}));var Jw=function(){function r(t){this.intl=new qr,f(t)||(this.intl.culture=t)}return r.prototype.getFormatFunction=function(t){return t.type?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},r.prototype.getParserFunction=function(t){return t.type?this.intl.getDateParser(t):this.intl.getNumberParser(t)},r.prototype.fromView=function(t,e,i){return"date"!==i&&"datetime"!==i&&"number"!==i||f(e)?t:e(t)},r.prototype.toView=function(t,e){var i=t;return!f(e)&&!f(t)&&(i=e(t)),i},r.prototype.setCulture=function(t){f(t)||function b3(r){Ym.notify("notifyExternalChange",{locale:Y0=r})}(t)},r}(),_h=function(){function r(t,e){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},po(this,t),this.parent=e,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),f(this.uid)&&(this.uid=op("grid-column"));var n=new Jw;if(t.format&&(t.format.skeleton||t.format.format&&"string"==typeof t.format.format)&&(this.setFormatter(n.getFormatFunction(de({},t.format))),this.setParser(n.getParserFunction(t.format))),this.toJSON=function(){for(var o={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if("columns"===l[h]){o[l[h]]=[];for(var u=0;u<i[l[h]].length;u++)o[l[h]].push(i[l[h]][u].toJSON())}else a.indexOf(l[h])<0&&(o[l[h]]=i[l[h]]);return o},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(o){return o.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=El(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=El(this.headerTemplate)),!f(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=El(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=El(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=El(this.filterTemplate)),this.isForeignColumn()&&(f(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=de({dataSource:this.dataSource,query:new si,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var s=this.sortComparer;this.sortComparer=function(o,a,l,h){if("string"==typeof s&&(s=xs(s,window)),"Descending"===i.sortDirection){var u=o;o=a,a=u;var d=l;l=h,h=d}return s(o,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(o,a){return o=xs(i.foreignKeyValue,iC(i,{},o)[0]),a=xs(i.foreignKeyValue,iC(i,{},a)[0]),"Descending"===i.sortDirection?Ye.fnDescending(o,a):Ye.fnAscending(o,a)})}return r.prototype.getSortDirection=function(){return this.sortDirection},r.prototype.setSortDirection=function(t){this.sortDirection=t},r.prototype.getFreezeTableName=function(){return this.freezeTable},r.prototype.setProperties=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)this[e[i]]=t[e[i]],this.parent&&this.parent.isReact&&("template"===e[i]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===e[i]?(this.headerTemplateFn=El(t[e[i]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)):"editTemplate"===e[i]&&(this.editTemplateFn=El(t[e[i]])))},r.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},r.prototype.getFormatter=function(){return this.formatFn},r.prototype.setFormatter=function(t){this.formatFn=t},r.prototype.getParser=function(){return this.parserFn},r.prototype.setParser=function(t){this.parserFn=t},r.prototype.getColumnTemplate=function(){return this.templateFn},r.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},r.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},r.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},r}(),Nre="rowDataBound",R8="queryCellInfo",Bre="headerCellInfo",mr="actionBegin",Ui="actionComplete",$x="actionFailure",ph="dataBound",M8="rowSelecting",Yx="rowSelected",Hre="rowDeselecting",dV="rowDeselected",AM="cellSelecting",pV="cellSelected",Vre="cellDeselecting",zre="cellDeselected",L8="columnSelecting",O8="columnSelected",Zx="columnDragStart",eS="columnDrag",Xx="columnDrop",jre="beforePrint",Ure="printComplete",tS="batchAdd",Ng="batchCancel",fV="batchDelete",gV="beforeDataBound",Wre="beforeOpenAdaptiveDialog",Gre="filterchoicerequest",Lf="initial-load",Ua="initial-end",Uc="data-ready",is="content-ready",jr="ui-update",np="on-empty",Wa="inbound-model-changed",Yo="model-changed",mV="colgroup-refresh",Mo="header-refreshed",F8="sorting-complete",Xre="searching-complete",N8="grouping-complete",ese="ungrouping-complete",Zb="group-aggregates",Av="refresh-footer-rendered",Qx="beforecellfocused",vV="cellfocused",_s="key-pressed",ol="click",gn="destroy",Wc="column-visible-changed",_M="column-width-changed",Jx="column-position-changed",H8="rows-added",yV="rows-removed",eD="header-drop",kM="datasource-modified",RM="dblclick",_v="toolbar-refresh",iS="auto-col",nS="tooltip-destroy",MM="update-data",lu="prevent-batch",CV="dialog-destroy",sse="crud-Action",ose="add-delete-Action",j8="destroy-form",U8="double-tap",hu="freezerender",q8="initForeignKeyColumn",wV="getForeignKeyData",tD="generateQuery",hse="showEmptyGrid",use="foreignKeyData",OM="dataStateChange",cse="dataSourceChanged",dse="beforeFragAppend",PM="frozenHeight",K8="textWrapRefresh",$8="recordAdded",SV="cancel-Begin",EV="editNextValCell",Y8="hierarchyprint",FM="partial-refresh",X8="columns-prepared",iD="cbox-filter-complete",NM="filter-Prevent",rS="restore-Focus",vse="detail-indentcell-info",BM="virtual-scroll-edit-success",kv="get-virtual-data",AV="infinite-scroll-handler",_V="infinite-edit-handler",lG="group-collapse",HM="refreshResizeHandlers",uG="before-refresh-on-data-change",kV="filter-dialog-close",pG="refresh-cutsom-filter-ok-button",VM="set-fullscreen-dialog",sS="refresh-Expand-and-Collapse",gG="row-mode-change",RV="enter-key-handler",Rse="close-edit",LV="create-virtual-validation-form",wG="refresh-infinite-persist-selection",Nt=(()=>(function(r){r[r.Data=0]="Data",r[r.Header=1]="Header",r[r.Summary=2]="Summary",r[r.GroupSummary=3]="GroupSummary",r[r.CaptionSummary=4]="CaptionSummary",r[r.Filter=5]="Filter",r[r.Indent=6]="Indent",r[r.GroupCaption=7]="GroupCaption",r[r.GroupCaptionEmpty=8]="GroupCaptionEmpty",r[r.Expand=9]="Expand",r[r.HeaderIndent=10]="HeaderIndent",r[r.StackedHeader=11]="StackedHeader",r[r.DetailHeader=12]="DetailHeader",r[r.DetailExpand=13]="DetailExpand",r[r.CommandColumn=14]="CommandColumn",r[r.DetailFooterIntent=15]="DetailFooterIntent",r[r.RowDragIcon=16]="RowDragIcon",r[r.RowDragHIcon=17]="RowDragHIcon"}(Nt||(Nt={})),Nt))(),Ks=(()=>(function(r){r[r.Header=0]="Header",r[r.Content=1]="Content",r[r.Summary=2]="Summary"}(Ks||(Ks={})),Ks))(),ur=(()=>(function(r){r[r.isEdit=0]="isEdit",r[r.isAdd=1]="isAdd",r[r.isSort=2]="isSort",r[r.isFilter=3]="isFilter"}(ur||(ur={})),ur))(),Xb=(()=>(function(r){r[r.isInitial=0]="isInitial",r[r.isSearch=1]="isSearch"}(Xb||(Xb={})),Xb))(),PV=function(){function r(t,e){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=t,this.serviceLocator=e,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(H8,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(yV,this.removeRows,this),this.parent.on(kM,this.initDataManager,this),this.parent.on(gn,this.destroy,this),this.parent.on(MM,this.crudActions,this),this.parent.on(ose,this.getData,this),this.parent.on(iS,this.refreshFilteredCols,this),this.parent.on(X8,this.refreshFilteredCols,this))}return r.prototype.reorderRows=function(t){this.dataManager.dataSource.json.splice(t.toIndex,0,this.dataManager.dataSource.json.splice(t.fromIndex,1)[0])},r.prototype.getModuleName=function(){return"data"},r.prototype.initDataManager=function(){var t=this.parent;this.dataManager=t.dataSource instanceof Je?t.dataSource:f(t.dataSource)?new Je:new Je(t.dataSource),!t.isAngular||t.query instanceof si?(this.isQueryInvokedFromData=!0,t.query=t.query instanceof si?t.query:new si):t.setProperties({query:new si},!0)},r.prototype.generateQuery=function(t){var i=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(function(a){return!(!0!==a.isPrimaryKey&&!1===a.visible||void 0===a.field)}).map(function(a){return a.field}));else if("Schema"===this.parent.columnQueryMode){for(var n=[],s=this.parent.columns,o=0;o<s.length;o++)n.push(s[o].field);i.select(n)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),ks(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,t),this.groupQuery(i),i},r.prototype.aggregateQuery=function(t){for(var e=this.parent.aggregates,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.columns.length;s++)for(var o=n.columns[s],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)t.aggregate(a[l].toLowerCase(),o.field);return t},r.prototype.virtualGroupPageQuery=function(t){if(t.queries.length)for(var i=0;i<t.queries.length;i++)"onPage"===t.queries[i].fn&&t.queries.splice(i,1);return t},r.prototype.pageQuery=function(t,e){var i=this.parent,s={query:t,skipPage:!1};if(i.notify("set-virtual-page-query",s),s.skipPage)return t;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==e){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),t.queries.length)for(var o=0;o<t.queries.length;o++)"onPage"===t.queries[o].fn&&t.queries.splice(o,1);!f(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",t):t.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:i.pageSettings.pageSize)}return t},r.prototype.groupQuery=function(t){var e=this.parent;if(e.allowGrouping&&e.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&t.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=e.groupSettings.columns,n=0,s=i.length;n<s;n++){var o=this.getColumnByField(i[n]);o||this.parent.log("initial_action",{moduleName:"group",columnName:i[n]});var l=o.format;o.enableGroupByFormat?t.group(i[n],this.formatGroupColumn.bind(this),l):t.group(i[n],null)}}return t},r.prototype.sortQuery=function(t){var e=this.parent;if((e.allowSorting||e.allowGrouping)&&e.sortSettings.columns.length){for(var i=e.sortSettings.columns,n=[],s=i.length-1;s>-1;s--){if(!(o=this.getColumnByField(i[s].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[s].field}),t;o.setSortDirection(i[s].direction);var a=i[s].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[s].direction:o.sortComparer.bind(o)),-1===e.groupSettings.columns.indexOf(i[s].field)?o.isForeignColumn()||o.sortComparer?t.sortByForeignKey(o.field,a,void 0,i[s].direction.toLowerCase()):t.sortBy(o.field,a):n.push({direction:a,field:o.field})}s=0;for(var l=n.length;s<l;s++)if("string"==typeof n[s].direction)t.sortBy(n[s].field,n[s].direction);else{var o=this.getColumnByField(n[s].field);t.sortByForeignKey(n[s].field,n[s].direction,void 0,o.getSortDirection().toLowerCase())}}return t},r.prototype.searchQuery=function(t,e,i){var n=this.parent.searchSettings,s=n.fields.length?n.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(m){return s.indexOf(m.field)>-1});var l=i?e.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){s=i?[e.foreignKeyValue]:s;for(var h=0;h<s.length;h++){var u=i?e:this.getColumnByField(s[h]);u.isForeignColumn()&&!i?o=this.fGeneratePredicate(u,o):o.push(new kn(s[h],n.operator,n.key,n.ignoreCase,n.ignoreAccent))}var d=kn.or(o);d.key=n.key,t.where(d)}else t.search(n.key,s,n.operator,n.ignoreCase,n.ignoreAccent)}return t},r.prototype.filterQuery=function(t,e,i){var l,n=this.parent,s=[],o=[],a=this.parent.getForeignKeyColumns();if(n.allowFiltering&&n.filterSettings.columns.length){for(var h=e||n.filterSettings.columns,u={},d=0,m=n.getColumns();d<m.length;d++)u[(y=m[d]).field]=y.filter.type?y.filter.type:n.filterSettings.type;for(var C=[],S=[],I=0,k=h;I<k.length;I++){var O=n.getColumnByField((y=k[I]).field);f(y.type)&&O&&("date"===O.type||"datetime"===O.type)&&(y.type=n.getColumnByField(y.field).type),y.isForeignKey?C.push(y):S.push(y)}if(S.length){for(var L=0,B=S.length;L<B;L++)S[L].uid=S[L].uid||this.parent.grabColumnByFieldFromAllCols(S[L].field).uid;for(var j=sC.getPredicate(S),G=0,ae=Object.keys(j);G<ae.length;G++)s.push(j[ae[G]])}if(C.length)for(var xe=0,Le=C;xe<Le.length;xe++){var y;(y=Le[xe]).uid=y.uid||this.parent.grabColumnByFieldFromAllCols(y.field).uid;var oe=this.parent.grabColumnByUidFromAllCols(y.uid);if(oe||this.parent.log("initial_action",{moduleName:"filter",columnName:y.field}),oe.isForeignColumn()&&JM(y.field,a)&&!i)o.push(y),oe.columnData.length||(l=!0),s=this.fGeneratePredicate(oe,s);else{j=sC.getPredicate(h);for(var Ae=0,De=Object.keys(j);Ae<De.length;Ae++)s.push(j[De[Ae]])}}s.length&&!l?t.where(kn.and(s)):this.parent.notify(hse,{})}return t},r.prototype.fGeneratePredicate=function(t,e){var i={};return t&&(this.parent.notify(tD,{predicate:i,column:t}),i.predicate.predicates.length&&e.push(i.predicate)),e},r.prototype.getData=function(t,e){var i=this;void 0===t&&(t={requestType:""});var n=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(t,e,n).promise;var o=void 0;switch(t.requestType){case"delete":if(e=e||this.generateQuery(),1===Object.keys(t.data).length)o=this.dataManager.remove(n,t.data[0],e.fromTable,e);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=t.data,o=this.dataManager.saveChanges(l,n,e.fromTable,e.requiresCount())}break;case"save":e=e||this.generateQuery(),t.index=f(t.index)?0:t.index,o=this.dataManager.insert(t.data,e.fromTable,e,t.index)}return t.promise=o,!o||Array.isArray(o)||o.hasOwnProperty("deletedRecords")?this.insert(e,t):o.then(function(){return i.insert(e,t)})},r.prototype.insert=function(t,e){return"save"===e.requestType&&this.parent.notify($8,e),this.executeQuery(t)},r.prototype.executeQuery=function(t){var e=this;if(this.dataManager.ready){var i=new fl;return this.dataManager.ready.then(function(){e.dataManager.executeQuery(t).then(function(s){i.resolve(s)})}).catch(function(s){i.reject(s)}),i.promise}return this.dataManager.executeQuery(t)},r.prototype.formatGroupColumn=function(t,e){var i=this.serviceLocator,n=this.getColumnByField(e),s=t;return n.type||(n.type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":typeof t),f(n.getFormatter())&&ioe(i,n),Jw.prototype.toView(t,n.getFormatter())},r.prototype.crudActions=function(t){var e=this.generateQuery(),i=null,n="promise",s=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(t,e,s),t.requestType)&&(i=this.dataManager.update(s,t.data,e.fromTable,e,t.previousData)),t[n]=i||t[n],this.parent.notify(sse,t)},r.prototype.saveChanges=function(t,e,i,n){if(void 0===n&&(n=this.generateQuery()),n.requiresCount(),"result"in this.parent.dataSource){var s=new fl,o={requestType:"batchsave",changes:t,key:e,query:n,endEdit:s.resolve};return this.setState({isPending:!0,resolver:s.resolve}),this.parent.trigger(cse,o),s.promise}return this.dataManager.saveChanges(t,e,n.fromTable,n,i)},r.prototype.getKey=function(t){if(t&&t.length)return t[0]},r.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},r.prototype.addRows=function(t){for(var e=t.records.length;e>0;e--)this.dataManager.dataSource.json.splice(t.toIndex,0,t.records[e-1])},r.prototype.removeRows=function(t){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(function(i){return-1===t.records.indexOf(i)})},r.prototype.getColumnByField=function(t){var e;return this.parent.columnModel.some(function(i){return e=i,i.field===t})&&e},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(H8,this.addRows),this.parent.off(yV,this.removeRows),this.parent.off(kM,this.initDataManager),this.parent.off(gn,this.destroy),this.parent.off(MM,this.crudActions),this.parent.off(ose,this.getData),this.parent.off(iS,this.refreshFilteredCols),this.parent.off(X8,this.refreshFilteredCols))},r.prototype.getState=function(){return this.dataState},r.prototype.setState=function(t){return this.dataState=t},r.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},r.prototype.setForeignKeyDataState=function(t){this.foreignKeyDataState=t},r.prototype.getStateEventArgument=function(t){var e=new Zh,i=new Je({url:"",adaptor:new Zh}),n=e.processQuery(i,t);return de(JSON.parse(n.data),n.pvtData)},r.prototype.eventPromise=function(t,e,i){var n=this,s=t,o=this.getStateEventArgument(e),a=new fl,l=new fl;if(void 0!==t.requestType&&!1!==this.dataState.isDataChanged)if(o.action=t,"save"===t.requestType||"delete"===t.requestType){var h=t;h.key=i,h.promise=l.promise,h.state=o,this.setState({isPending:!0,resolver:l.resolve}),s.endEdit=l.resolve,s.cancelEdit=l.reject,this.parent.trigger(cse,h),l.promise.then(function(){n.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),"save"===h.requestType&&n.parent.notify($8,h),n.parent.trigger(OM,o)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(OM,o);else this.setState({}),a.resolve(this.parent.dataSource);return a},r.prototype.getSearchColumnFieldNames=function(){for(var t=[],i=0,n=this.parent.getColumns();i<n.length;i++){var s=n[i];s.allowSearching&&!f(s.field)&&t.push(s.field)}return t},r.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function _Ie(r,t){for(var e=0;e<t.length;e++)t[e].uid=t[e].isForeignKey?JM(t[e].field,r.getForeignKeyColumns()).uid:r.enableColumnVirtualization?doe(r,t[e].field).uid:r.getColumnByField(t[e].field).uid}(this.parent,this.parent.filterSettings.columns)},r}(),Of=function(){function r(t,e){po(this,t),this.parent=e}return r.prototype.clone=function(){var t=new r({});return po(t,this),t.cells=this.cells.map(function(e){return e.clone()}),t},r.prototype.setRowValue=function(t){if(this.parent){var e=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(e,t)}},r.prototype.setCellValue=function(t,e){if(this.parent){if(this.data[t].toString()===e.toString())return;var n=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[n],t,e),this.makechanges(n,this.data)}},r.prototype.makechanges=function(t,e){this.parent&&this.parent.getDataModule().dataManager.update(t,e)},r}(),ic=function(){function r(t){this.isSpanned=!1,this.isRowSpanned=!1,po(this,t)}return r.prototype.clone=function(){var t=new r({});return po(t,this),t},r}(),Pse=function(){function r(t,e){this.serviceLocator=t,this.parent=e}return r.prototype.render=function(t,e,i,n){var u,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(e.cells[i].cellType||Nt.Data),a=e.cells[i].cellSpan?e.cells[i].cellSpan:t.colSpan+i<=e.cells.length?t.colSpan:e.cells.length-i,l=t.rowSpan,h=0;if(e.index>0){var d=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,m=e.cells[i];u=d.filter(function(I){return I.column.uid===m.column.uid})[0]}for(var C=u&&u.colSpanRange>1&&u.rowSpanRange>1?u.colSpanRange:a,S=i+1;S<i+C&&S<e.cells.length;S++)!1===e.cells[S].visible?h++:e.cells[S].isSpanned=!0;if(h>0){for(S=i+a;S<i+a+h&&S<e.cells.length;S++)e.cells[S].isSpanned=!0;i+a+h>=e.cells.length&&(a-=i+a+h-e.cells.length)}return e.cells[i].cellSpan&&(e.data[t.column.field]=e.cells[i].spanText,n=o.render(e.cells[i],e.data,{index:f(e.index)?"":e.index.toString()})),a>1&&Ue(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(Ue(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),e.cells[i].isRowSpanned=!0,e.cells[i].rowSpanRange=Number(l),a>1&&(e.cells[i].colSpanRange=Number(a))),e.index>0&&u.rowSpanRange>1&&(e.cells[i].isSpanned=!0,e.cells[i].rowSpanRange=Number(u.rowSpanRange-1),e.cells[i].colSpanRange=u.rowSpanRange>0?u.colSpanRange:1),this.parent.enableColumnVirtualization&&!e.cells[i].cellSpan&&!this.containsKey(t.column.field,t.data[t.column.field])&&this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),n},r.prototype.backupMergeCells=function(t,e,i){this.setMergeCells(this.generteKey(t,e),i)},r.prototype.generteKey=function(t,e){return t+"__"+e.toString()},r.prototype.splitKey=function(t){return t.split("__")},r.prototype.containsKey=function(t,e){return this.getMergeCells().hasOwnProperty(this.generteKey(t,e))},r.prototype.getMergeCells=function(){return this.parent.mergeCells},r.prototype.setMergeCells=function(t,e){this.parent.mergeCells[t]=e},r.prototype.updateVirtualCells=function(t){for(var e=this.getMergeCells(),i=0,n=Object.keys(e);i<n.length;i++){var s=n[i],o=e[s],a=this.splitKey(s),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),u=o-(h[0]-l);if(l<h[0]&&u>1)for(var d=0,m=t;d<m.length;d++){var y=m[d];if(y.data[a[0]].toString()===a[1].toString()){y.cells[0].cellSpan=u,y.cells[0].spanText=a[1];break}}}return t},r.prototype.getIndexFromAllColumns=function(t){return uS(this.parent.getVisibleColumns(),function(i,n){if(i.field===t)return n})[0]},r}(),on="e-rowcell",$s="e-gridheader",zs="e-gridcontent",Qb="e-gridfooter",js="e-headercontent",Gn="e-movablecontent",nr="e-movableheader",nc="e-frozencontent",rp="e-frozenheader",gs="e-content",cr="e-table",Sn="e-row",oS="e-gridchkbox",qa="e-editedrow",Ul="e-addedrow",Pf="addedRecords",Jb="deletedRecords",Jt="Left-Right",dr="frozen-right",cs="frozen-left",Ys="data-colindex",Fse="aria-colindex",ki="data-rowindex",zM="aria-rowindex",lt="tbody",Ai="colgroup",FV="created",Nse="beforeOpen",kh=function(){function r(t,e,i){this.isSpan=!1,this.cellType=e,this.serviceLocator=t,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return r.prototype.render=function(t,e,i,n,s){return this.refreshRow(t,e,i,n,s)},r.prototype.refresh=function(t,e,i,n,s){var o=this;i&&(t.data=YV({},t.changes),this.refreshMergeCells(t));var a=this.parent.element.querySelector("[data-uid="+t.uid+"]"),l=this.refreshRow(t,e,n,s,null,i),h=[].slice.call(l.cells),u=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&u.length)for(var d=function(L){if(L.template)return setTimeout(function(){o.parent.refreshReactColumnTemplateByUid(L.uid)},0),"break"},m=0,y=e;m<y.length&&"break"!==d(y[m]);m++);a.innerHTML="";for(var I=0,k=h;I<k.length;I++)a.appendChild(k[I])},r.prototype.refreshRow=function(t,e,i,n,s,o){var a=f(s)?this.element.cloneNode():s,l={data:t.data},h={data:t.data},u=this.parent.getColumns().filter(function(Ve){return"checkbox"===Ve.type&&Ve.field})[0],d=!1;u&&(d=xs(u.field,l.data));var m=this.parent.getSelectedRowIndexes();t.isDataRow&&(t.isSelected=m.indexOf(t.index)>-1||d),t.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0,-1===m.indexOf(t.index)&&m.push(t.index)),this.buildAttributeFromRow(a,t),Ue(a,de({},i,{})),Ff(a,t.attributes);for(var y=this.serviceLocator.getService("cellRendererFactory"),C=function(Ve,Gt){var Yt=t.cells[Ve];Yt.isSelected=t.isSelected,Yt.isColumnSelected=Yt.column.isSelected;var ei=y.getCellRenderer(t.cells[Ve].cellType||Nt.Data),Ci={index:f(t.index)?"":t.index.toString()};t.isExpand&&t.cells[Ve].cellType===Nt.DetailExpand&&(Ci.class=S.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var Ri=ei.render(t.cells[Ve],t.data,Ci,t.isExpand,o);if(t.cells[Ve].cellType!==Nt.Filter){if(t.cells[Ve].cellType===Nt.Data||t.cells[Ve].cellType===Nt.CommandColumn){S.parent.trigger(R8,de(h,{cell:Ri,column:Yt.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[Ve].foreignKeyData,requestType:S.parent.requestTypeAction}));var Ji=!1;if(t.index>0&&S.isSpan){var ds=(S.parent.groupSettings.columns.length>0&&!S.parent.getRowsObject()[t.index-1].isDataRow?S.parent.getRowsObject()[t.index].cells:S.parent.getRowsObject()[t.index-1].cells).filter(function(_e){return _e.column.uid===t.cells[Ve].column.uid})[0];Ji=ds.isRowSpanned?ds.isRowSpanned:ds.rowSpanRange>1}(h.colSpan>1||t.cells[Ve].cellSpan>1||h.rowSpan>1||Ji)&&(S.isSpan=!0,Ri=new Pse(S.serviceLocator,S.parent).render(h,t,Ve,Ri))}t.cells[Ve].isSpanned||a.appendChild(Ri)}},S=this,I=0,k=t.cells.length;I<k;I++)C(I);var O={row:a,rowHeight:this.parent.rowHeight};if(t.isDataRow){var L=de(l,O);L.isSelectable=!0,this.parent.trigger(Nre,L),t.isSelectable=L.isSelectable;var B=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var j=this.parent.getPrimaryKeyFieldNames()[0],G=t.data?t.data[j]:null,ae=L.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;ae.some(function(Ve){return Ve[j]===G})||ae.push(t.data)}if(!L.isSelectable){this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1;var ve=O.row.querySelectorAll(".e-rowcell.e-gridchkbox"),xe=L.row.querySelector(".e-rowdragdrop"),Le=this.parent.groupSettings.columns.length+(xe||this.parent.isDetail()?1:0);for(I=0;I<ve.length;I++)ve[I].firstElementChild.classList.add("e-checkbox-disabled"),ve[I].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(I=Le;I<t.cells.length;I++){var oe=L.row.querySelector('.e-rowcell[data-colindex="'+t.cells[I].index+'"]');oe&&z([oe],["e-selectionbackground","e-active"])}xe&&z([xe],["e-selectionbackground","e-active"])}if(this.parent.childGrid||B||this.parent.detailTemplate){var Ae=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];Ae&&Ae.classList.add("e-detailrowvisible")}}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),t.cssClass&&a.classList.add(t.cssClass),t.lazyLoadCssClass&&a.classList.add(t.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(I=0;I<this.parent.aggregates.length;I++)if(this.parent.aggregates[I].properties.columns[0].footerTemplate){var We=[].slice.call(a.getElementsByClassName("e-summarycell"));We.length&&(N([We[We.length-1]],["e-lastsummarycell"]),N([We[0]],["e-firstsummarycell"]))}return a},r.prototype.refreshMergeCells=function(t){for(var e=0,i=t.cells;e<i.length;e++)i[e].isSpanned=!1;return t},r.prototype.buildAttributeFromRow=function(t,e){var i={},s=[];e.isDataRow&&s.push(Sn),e.isAltRow&&s.push("e-altrow"),f(e.index)||(i[zM]=e.index+1,i["data-rowindex"]=e.index),e.rowSpan&&(i.rowSpan=e.rowSpan),e.uid&&(i["data-uid"]=e.uid),e.isSelected&&(i["aria-selected"]=!0),!1===e.visible&&s.push("e-hide"),i.class=s,Ff(t,i)},r}(),sp=function(){function r(t){this.parent=t}return r.prototype.generateRows=function(t,e){var i=[],n=this.parent.enableVirtualization&&e?e.startIndex:0;n=this.parent.enableInfiniteScrolling&&e?this.getInfiniteIndex(e):n;for(var s=0,o=Object.keys(t).length;s<o;s++,n++)i[s]=this.generateRow(t[s],n);return i},r.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var e={};this.parent.notify(vse,e),t.push(this.generateCell(e,null,Nt.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,Nt.RowDragIcon)),t},r.prototype.generateRow=function(t,e,i,n,s,o,a){var l={foreignKeyData:{}};l.uid=op("grid-row"),l.data=t,l.index=e,l.indent=n,l.tIndex=o,l.isDataRow=!0,l.parentGid=s,l.parentUid=a,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[e]&&(l.isExpand=this.parent.expandedRows[e].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(e)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),u=new Of(l,this.parent);return u.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),u},r.prototype.refreshForeignKeyRow=function(t){for(var e=this.parent.getForeignKeyColumns(),i=0;i<e.length;i++)jt(e[i].field,iC(e[i],t.data),t.foreignKeyData)},r.prototype.generateCells=function(t){for(var e=this.parent.getColumns(),i=[],n=0;n<e.length;n++)i.push(this.generateCell(e[n],t.uid,f(e[n].commands)?void 0:Nt.CommandColumn,null,n,t.foreignKeyData));return i},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!f(t.field||t.template),isTemplate:!f(t.template),rowID:e,column:t,cellType:f(i)?Nt.Data:i,colSpan:n,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&ie(t.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=s),new ic(a)},r.prototype.refreshRows=function(t){for(var e=0;e<t.length;e++)this.refreshForeignKeyRow(t[e]),t[e].cells=this.generateCells(t[e]);return t},r.prototype.getInfiniteIndex=function(t){return"infiniteScroll"===t.requestType||"delete"===t.requestType||"add"===t.action?t.startIndex:0},r}(),Bse=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),UM=function(){function r(t){this.parent=t}return r.prototype.getData=function(){for(var t=this,e=[],i=this.parent.aggregates.slice(),n=0;n<i.length;n++){var s=i[n].columns.filter(function(o){return!(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate)||t.columnSelector(o)});s.length&&e.push({columns:s})}return e},r.prototype.columnSelector=function(t){return void 0!==t.footerTemplate},r.prototype.getColumns=function(t,e){var i=[];if((this.parent.detailTemplate||!f(this.parent.childGrid))&&i.push(new _h({})),this.parent.allowGrouping)for(var n=0;n<this.parent.groupSettings.columns.length;n++)i.push(new _h({}));return this.parent.isRowDragable()&&!t&&i.push(new _h({})),i.push.apply(i,this.parent.getColumns()),e=e&&!t?e+this.parent.getIndentCount():e,f(t)?i:i.slice(t,e)},r.prototype.generateRows=function(t,e,i,n,s){if(0===t.length&&(void 0===e||!e.count))return[];for(var o=this.buildSummaryData(t,e),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[h],o[h],e?e.level:void 0,i,n,e?e.parentUid:void 0,s));return a},r.prototype.getGeneratedRow=function(t,e,i,n,s,o,a){var l=[],h=this.getIndentByLevel(),u=!f(this.parent.childGrid),d=n?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!n&&(h=["e-indentcelltop"]);for(var m=a||this.getColumns(n,s),y=0;y<m.length;y++)l.push(this.getGeneratedCell(m[y],t,y>=d?this.getCellType():0===y&&this.parent.childGrid?Nt.DetailFooterIntent:Nt.Indent,h[y],u));var C=new Of({data:e,attributes:{class:"e-summaryrow"}});return C.cells=l,C.uid=op("grid-row"),C.parentUid=o,C.isAggregateRow=!0,C.visible=l.some(function(S){return S.isDataCell&&S.visible}),C},r.prototype.getGeneratedCell=function(t,e,i,n,s){var o=e.columns.filter(function(h){return h.columnName===t.field})[0],a={style:{textAlign:t.textAlign},"e-mappinguid":t.uid,index:t.index};n&&(a.class=n),f(n)&&s&&(a.class="e-detailindentcelltop");var l={visible:t.visible,isDataCell:!f(o),isTemplate:o&&!f(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:i};return l.column.headerText=t.headerText,new ic(l)},r.prototype.buildSummaryData=function(t,e){for(var i=[],n=this.getData(),s={},o=0;o<n.length;o++){s={};for(var a=n[o].columns,l=0;l<a.length;l++)s=this.setTemplate(a[l],e&&e.aggregates?e:t,s);i.push(s)}return i},r.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},r.prototype.setTemplate=function(t,e,i){var n=t.type,s={},o=t.getFormatter()||function(m){return m},a=e;n instanceof Array||(n=[t.type]);for(var l=0;l<n.length;l++){var h=t.field+" - "+n[l].toLowerCase(),u=t.columnName,d="Custom"!==n[l]&&a.aggregates&&h in a.aggregates?a.aggregates[h]:toe(n[l],a.aggregates?a:e,t,this.parent);i[u]=i[u]||{},i[u][h]=d,i[u][n[l]]=f(d)?" ":o(d),a.field&&(i[u].field=a.field,i[u].key=a.key)}return s.format=t.getFormatter(),t.setTemplate(s),i},r.prototype.getCellType=function(){return Nt.Summary},r}(),oD=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Bse(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},t.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(i,n){return n<=e-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return Nt.GroupSummary},t}(UM),WM=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Bse(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},t.prototype.getData=function(){return[r.prototype.getData.call(this).reduce(function(i,n){return i.columns=i.columns.concat(n.columns),i},{columns:[]})]},t.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},t.prototype.getCellType=function(){return Nt.CaptionSummary},t}(UM),SDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),BV=function(r){function t(e){var i=r.call(this,e)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=e,i.summaryModelGen=new oD(e),i.captionModelGen=new WM(e),i}return SDe(t,r),t.prototype.generateRows=function(e,i){if(0===this.parent.groupSettings.columns.length)return r.prototype.generateRows.call(this,e,i);this.isInfiniteScroll="infiniteScroll"===i.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var n=0,s=e.length;n<s;n++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[n],e.level,n,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},t.prototype.getGroupedRecords=function(e,i,n,s,o,a,l){var h,u=n;if(f(i.items))if(f(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,e,s,this.rows.length,l));else for(var d=0,m=i.length;d<m;d++)this.getGroupedRecords(e,i[d],i.level,s,e,this.rows.length,l);else{var y=void 0,C=this.generateCaptionRow(i,e,s,o,a,l);if(this.isInfiniteScroll&&(y=this.getPreCaption(e,C.data.key)),y?C.uid=y.uid:this.rows=this.rows.concat(C),i.items&&i.items.length&&this.getGroupedRecords(e+1,i.items,i.items.level,s,e+1,this.rows.length,C.uid),this.parent.aggregates.length&&this.isRenderAggregate(C)){var S=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:u,parentUid:C.uid}));for(var I=S-1;I>=0;I--)if(this.rows[I].isCaptionRow)this.rows[I].aggregatesCount=this.rows.length-S;else if(!this.rows[I].isCaptionRow&&!this.rows[I].isDataRow)break}y&&this.setInfiniteRowVisibility(y)}},t.prototype.isRenderAggregate=function(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},t.prototype.getPreCaption=function(e,i){var s,n=this.parent.getRowsObject().concat(this.rows);this.infiniteChildCount=0;for(var o=n.length;o--&&(n[o].isCaptionRow&&n[o].indent===e&&n[o].data.key===i&&(s=n[o]),!(n[o].indent===e||n[o].indent<e));)n[o].indent===e+1&&this.infiniteChildCount++;return s},t.prototype.getCaptionRowCells=function(e,i,n){var s=[],o=[],a=this.parent.getColumnByField(e),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(L){return L.field===e})[0]);var h=this.parent.groupSettings.columns.length,u=this.parent;if(!this.parent.enableColumnVirtualization||-1!==l.indexOf(i)){for(var d=0;d<i;d++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,Nt.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(u.detailTemplate||u.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var m=this.captionModelGen.generateRows(n)[0];de(n,m.data);var y=0;m.cells.some(function(L,B){return y=B,L.visible&&L.isDataCell}),o=m.cells.slice(y).filter(function(L){return L.visible}),m.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),1===this.parent.getVisibleColumns().length&&(o=[]),i-=o.length}for(var C=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],S=!0,I=0;I<C.length;I++){var k=S&&-1!==l.indexOf(i);k&&(S=!1);var O=!this.parent.enableColumnVirtualization||k?Nt.GroupCaption:Nt.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&O===Nt.GroupCaption?i+h:i,u.isRowDragable()&&i++,s.push(this.generateCell(a,null,O,i))}return s.push.apply(s,o),s},t.prototype.generateCaptionRow=function(e,i,n,s,o,a){var l={},h="records",u=this.parent.getColumnByField(e.field);l.data=de({},e),u&&(l.data.field=e.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=n,l.childGid=s,l.tIndex=o,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=f(e.items[h])?e.items.length:e.items[h].length,l.uid=op("grid-row");var d=new Of(l);return d.indent=i,this.getForeignKeyData(d),d.cells=this.getCaptionRowCells(e.field,i,d.data),d},t.prototype.getForeignKeyData=function(e){var i=e.data,n=this.parent.getColumnByField(i.field);n&&n.isForeignColumn&&n.isForeignColumn()&&jt("foreignKey",f(i.key)?"":n.valueAccessor(n.foreignKeyValue,iC(n,{},i.key)[0],n),e.data)},t.prototype.generateDataRows=function(e,i,n,s,o){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,u=e.length;h<u;h++,s++){a[h]=this.generateRow(e[h],this.index,h?void 0:"e-firstchildrow",i,n,s,o);for(var d=0;d<i;d++)this.parent.enableColumnVirtualization&&-1===l.indexOf(i)||a[h].cells.unshift(this.generateIndentCell());this.index++}return a},t.prototype.generateIndentCell=function(){return this.generateCell({},null,Nt.Indent)},t.prototype.refreshRows=function(e){for(var i=this.parent.getColumnIndexesInView(),n=0;n<e.length;n++)if(e[n].isDataRow){e[n].cells=this.generateCells(e[n]);for(var s=0;s<e[n].indent;s++)this.parent.enableColumnVirtualization&&-1===i.indexOf(e[n].indent)||e[n].cells.unshift(this.generateIndentCell())}else{var o=this.generateCaptionRow(e[n].data,e[n].indent);e[n].cells=o.cells}return e},t.prototype.setInfiniteRowVisibility=function(e){if(!e.isExpand||!1===e.visible)for(var i=0,n=this.rows;i<n.length;i++){var s=n[i];s.parentUid===e.uid&&(s.visible=!1,s.isCaptionRow&&this.setInfiniteRowVisibility(s))}},t.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var i=this.rows[e];if(i.isCaptionRow)for(var n=e+1;n<this.rows.length;n++)i.uid===this.rows[n].parentUid&&(this.rows[n].visible=i.isExpand)}},t}(sp),qM=function(){function r(t,e){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(n){i.parent.notify(Xx,{target:n.target,droppedElement:n.droppedElement}),He(n.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=function(n){var s=n;return function(){if(i.parent.isFrozenGrid()&&i.parent.enableVirtualization){var o=n.tableName;if(i.isLoaded=i.parent.getFrozenMode()===Jt?"frozen-right"===o:"movable"===o,i.parent.enableColumnVirtualization&&"virtualscroll"===n.requestType&&i.isLoaded){var a=[].slice.call(i.parent.getMovableVirtualHeader().getElementsByClassName(Sn)),l=[].slice.call(i.parent.getFrozenVirtualHeader().getElementsByClassName(Sn));i.isLoaded=a.length===l.length}}if(i.ariaService.setBusy(i.getPanel().querySelector("."+gs),!1),!i.parent.isDestroyed){var h=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var u=0;u<i.visibleRows.length;u++)i.setRowsInLazyGroup(i.visibleRows[u],u);if(h=i.parent.getRowsObject(),i.parent.infiniteScrollSettings.enableCache&&s.prevPage){var m=i.parent.infiniteScrollSettings.maxBlocks;h=[];for(var y=parseInt(i.rowElements[0].getAttribute("data-rowindex"),10)+1,S=(u=0,Math.ceil(y/i.parent.pageSettings.pageSize));u<m;u++,S++)i.infiniteCache[S]&&(h=h.concat(i.infiniteCache[S]))}}if(i.parent.isFrozenGrid()&&(h=n.isFrozen?i.freezeRows:n.renderFrozenRightContent?i.parent.getFrozenRightRowsObject():i.movableRows),i.parent.notify(is,{rows:h,args:s}),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded&&(i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&"sorting"===n.requestType&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0),i.parent.trigger(ph,{},function(){i.parent.allowTextWrap&&i.parent.notify(hu,{case:"textwrap"})})),s){var I=(s.requestType||"").toLowerCase()+"-complete";i.parent.notify(I,s),"batchsave"===n.requestType&&(n.cancel=!1,i.parent.trigger(Ui,n))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(Wc,this.setVisible,this),this.parent.on(mV,this.colGroupRefresh,this),this.parent.on(jr,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(Qx,this.beforeCellFocused,this),this.parent.on(gn,this.droppableDestroy,this))}return r.prototype.beforeCellFocused=function(t){this.pressedKey=!t.byKey||"upArrow"!==t.keyArgs.action&&"downArrow"!==t.keyArgs.action?void 0:t.keyArgs.action},r.prototype.renderPanel=function(){var t=this.parent,e=this.parent.element.querySelector("."+zs);if(e)return this.ariaService.setOptions(this.parent.element.querySelector("."+gs),{busy:!1}),void this.setPanel(e);e=this.parent.createElement("div",{className:zs});var i=this.parent.createElement("div",{className:gs});this.ariaService.setOptions(i,{busy:!1}),e.appendChild(i),this.setPanel(e),t.element.appendChild(e)},r.prototype.renderTable=function(){var t=this.getPanel(),e=t.querySelector(".e-virtualtable"),i=t.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!f(e)&&!f(i)&&(He(e),He(i)),t.appendChild(this.createContentTable("_content_table")),this.setTable(t.querySelector("."+cr)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},r.prototype.createContentTable=function(t){var e=this.getPanel().firstElementChild;this.getTable()&&He(this.getTable());var i=e.querySelector("."+cr)?e.querySelector("."+cr):this.parent.createElement("table",{className:cr,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+t}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Ai).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(lt,{attrs:{role:"rowgroup"}})),e.appendChild(i),e},r.prototype.refreshContentRows=function(t){var e=this;void 0===t&&(t={});var i=this.parent;if(0!==i.currentViewData.length){var n=this.currentMovableRows||i.currentViewData,s=this.parent.contentModule,o=i.isReact&&!f(i.rowTemplate),a=o?i.createElement(lt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=de([],n));var u,d,C,l=o?i.createElement(lt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h=i.getColumns(),m=i.getFrozenColumns(),y=this.parent.isFrozenGrid(),S=new kh(this.serviceLocator,null,this.parent),I=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;i.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];var B,j,G,k=this.getPanel().querySelector("."+nc),O=this.getPanel().querySelector("."+Gn),L=this.getPanel().querySelector("."+gs);ks(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(wa){return t.requestType===wa})&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis&&(G=this.parent.contentModule.generateRows(n,t),t.renderMovableContent=!0),G=this.parent.contentModule.generateRows(n,t)):(G=this.checkCache(G,t),!this.isAddRows&&!this.useGroupCache&&(G=this.generator.generateRows(n,t))),this.setGroupCache(G,t),this.parent.notify("set-infinite-cache",{isInfiniteScroll:I,modelData:G,args:t});var ae=G[0].cells[0].index;y&&(j=s.setTbody(G,t),B=s.getTbody(j));var ve=this.parent.getFrozenMode()===Jt&&j===dr;if("infiniteScroll"!==t.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!t.isFrozen&&!ve){for(var xe=[],Le=0;Le<this.parent.registeredTemplate.template.length;Le++)for(var oe=0;oe<this.parent.registeredTemplate.template[Le].rootNodes.length;oe++)f(this.parent.registeredTemplate.template[Le].rootNodes[oe].parentNode)&&xe.push(this.parent.registeredTemplate.template[Le]);this.parent.destroyTemplate(["template"],xe)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===t.requestType||t.isFrozen||nL(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new Pse(this.serviceLocator,this.parent).updateVirtualCells(G),y||(this.tbody=this.getTable().querySelector(lt));var ge=0,Re=!0;if(ks(i)&&i.vcRows.length){var Se=f(t.virtualInfo.offsets)?f(t.scrollTop)?0:t.scrollTop.top:t.virtualInfo.offsets.top;if(0!==Se){for(var Oe=i.vGroupOffsets,Ve=i.pageSettings.pageSize/2,Gt=Object.keys(Oe).map(function(wa){return Oe[wa]}),Yt=0;Yt<Gt.length;Yt++)if(Se<Gt[Yt]){if(f(t.virtualInfo)||"up"!==t.virtualInfo.direction){ge=Yt*Ve,(this.parent.contentModule.isEndBlock(Yt)||this.parent.contentModule.isEndBlock(Yt+1))&&(t.virtualInfo.blockIndexes=[Yt,Yt+1]);break}ge=Yt>0?(Yt-1)*Ve:Yt*Ve;break}Math.round(Se+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!t.rowObject&&(Re=!1)}}var ei=i.frozenRows&&!i.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===t.requestType;if(i.frozenRows&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis||ei){var Ci=t.virtualInfo.blockIndexes,Ri=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],ei&&(t.virtualInfo.page=1);var oi=this.vgenerator.generateRows(ei?this.initialPageRecords:n,t);for(oi.splice(this.parent.frozenRows),Le=0;Le<this.parent.frozenRows;Le++)oi[Le].cells.splice(0,this.parent.getFrozenColumns()),u=S.render(oi[Le],h),l.appendChild(u);t.virtualInfo.blockIndexes=Ci,t.virtualInfo.page=Ri,ei&&1===t.virtualInfo.page&&G.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,G,S,t,n,h),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===t.requestType&&(this.visibleRows=[]),Le=ge;for(var sr=G.length;Le<sr;Le++)if(this.rows.push(G[Le]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(G[Le]),this.setRowsInLazyGroup(G[Le],Le),!f(G[Le].indent))){if(this.setInfiniteVisibleRows(t,G[Le],j),ks(i)&&t.virtualInfo&&t.virtualInfo.blockIndexes&&this.rowElements.length>=t.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&Re){this.parent.currentViewData.records=this.rows.map(function(Fo){return Fo.data});break}if(i.rowTemplate){var pe=i.element.id+"rowTemplate",_e=void 0;if(i.isReact){var Tt=i.frozenRows&&Le<i.frozenRows,wi=de({index:Le},n[Le]);i.getRowTemplate()(wi,i,"rowTemplate",pe,null,null,Tt?l:a),i.renderTemplates()}else _e=i.getRowTemplate()(de({index:Le},n[Le]),i,"rowTemplate",pe,void 0,void 0,void 0,this.parent.root);if(i.isReact||"TBODY"!==_e[0].tagName)i.frozenRows&&Le<i.frozenRows?u=i.isReact?l.lastElementChild:ya(l,_e):(i.isReact||(u=ya(a,_e)),C=i.isReact?a.lastElementChild:u.lastElementChild);else{for(oe=0;oe<_e.length;oe++){var Si="tr"===_e[oe].nodeName.toLowerCase();(Si||_e[oe].querySelectorAll&&_e[oe].querySelectorAll("tr").length)&&(u=Si?_e[oe]:_e[oe].querySelector("tr"))}i.frozenRows&&Le<i.frozenRows?l.appendChild(u):a.appendChild(u)}this.parent.trigger(Nre,{data:G[Le].data,row:C||u})}else{u=S.render(G[Le],h);var ds=this.ensureFrozenHeaderRender(t);i.frozenRows&&Le<i.frozenRows&&!I&&"virtualscroll"!==t.requestType&&ds&&this.ensureVirtualFrozenHeaderRender(t)?l.appendChild(u):a.appendChild(u),G[Le].isExpand&&i.notify("expandchildgrid",u.cells[i.groupSettings.columns.length])}G[Le].isDataRow&&this.rowElements.push(u),this.ariaService.setOptions(this.getTable(),{colcount:i.getColumns().length.toString()})}if(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(sS,{rows:this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]}),y&&s.splitRows(j),i.removeMaskRow(),i.frozenRows&&"virtualscroll"!==t.requestType&&!I&&this.ensureVirtualFrozenHeaderRender(t)||"virtualscroll"===t.requestType&&t.virtualInfo.sentinelInfo&&"X"===t.virtualInfo.sentinelInfo.axis)if(d=y?s.getFrozenHeader(j):i.getHeaderTable().querySelector(lt),o){var Ar=d.parentElement;He(d),Ar.appendChild(l)}else d.innerHTML="",d.appendChild(l);!i.enableVirtualization&&i.frozenRows&&0===ae&&L.offsetHeight===Number(i.height)&&(L.style.height=L.offsetHeight-d.offsetHeight+"px"),t.rows=this.rows.slice(0),y&&s.setIsFrozen(t,j),this.index=ae,Xse(function(){e.parent.notify(dse,t);var wa=e.parent.enableVirtualization&&e.parent.isFrozenGrid();if(!e.parent.enableVirtualization&&!I&&(e.parent.isFrozenGrid()?(He(s.getTbody(j)),B=e.parent.createElement(lt,{attrs:{role:"rowgroup"}})):(e.tbody.innerHTML="",f(e.tbody.parentElement)?He(i.getContentTable().querySelector(lt)):He(e.tbody),e.tbody=e.parent.createElement(lt,{attrs:{role:"rowgroup"}}))),!y||wa||e.parent.enableInfiniteScrolling)if(i.rowTemplate&&fb(),wa){if(t.renderFrozenRightContent){var Fo=i.getContent().querySelector(".e-frozen-right-content").querySelector(lt);e.appendContent(Fo,a,t)}else t.renderMovableContent?(e.appendContent(O.querySelector(lt),a,t),t.renderMovableContent=!1):e.appendContent(k.querySelector(lt),a,t);e.parent.getFrozenColumns()||s.renderNextFrozentPart(t,j)}else!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling?(e.isAddRows=!1,e.parent.notify("remove-infinite-rows",{args:t}),e.parent.notify("append-infinite-content",{tbody:B||e.tbody,frag:a,args:t,rows:e.rows,rowElements:e.rowElements,visibleRows:e.visibleRows,tableName:j}),!m&&y&&(i.getFrozenMode()!==Jt&&(j===cs||j===dr)||i.getFrozenMode()===Jt&&(j===cs||"movable"===j))&&e.refreshContentRows(de({},t))):(e.useGroupCache=!1,e.appendContent(e.tbody,a,t));else e.appendContent(B,a,t,j);m&&s.renderNextFrozentPart(t,j),a=null},this.rafCallback(de({},t)))}},r.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},r.prototype.appendContent=function(t,e,i,n){this.parent.isReact&&!f(this.parent.rowTemplate)?this.getTable().appendChild(e):(t.appendChild(e),this.getTable().appendChild(t))},r.prototype.setRowsInLazyGroup=function(t,e){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(t,e)},r.prototype.setGroupCache=function(t,e){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:e,data:t})},r.prototype.ensureFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&("reorder"===t.requestType||"refresh"===t.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},r.prototype.ensureVirtualFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&"delete"===t.requestType)},r.prototype.checkCache=function(t,e){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===e.requestType){var i=e.isFrozen?1:0,n=this.parent.isFrozenGrid();if(this.isAddRows=!f(this.infiniteCache[this.parent.pageSettings.currentPage]),n&&!f(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){var s=n?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];t=1===this.parent.pageSettings.currentPage?s.slice(this.parent.frozenRows):s}return t}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===e.requestType)):null},r.prototype.setInfiniteVisibleRows=function(t,e,i){var n=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(n?i===cs||"Right"===this.parent.getFrozenMode()&&i===dr?this.visibleFrozenRows.push(e):"movable"===i?this.visibleRows.push(e):this.rightFreezeRows.push(e):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(e))},r.prototype.getCurrentBlockInfiniteRecords=function(t){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.isFrozenGrid(),n=this.parent.getRows(),s=parseInt(n[this.parent.frozenRows].getAttribute(ki),10),o=Math.ceil((s+1)/this.parent.pageSettings.pageSize);s=parseInt(n[n.length-1].getAttribute(ki),10);var a=Math.ceil(s/this.parent.pageSettings.pageSize);if(i){for(var l=t?0:1,h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h][l]):this.infiniteCache[h][l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1][l].slice(0,this.parent.frozenRows).concat(e))}else{for(h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h]):this.infiniteCache[h];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}}return e},r.prototype.getReorderedVFRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.getReorderedRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.virtualFrozenHdrRefresh=function(t,e,i,n,s,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)){var a=void 0,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=s,l=this.getReorderedVFRows(n)):l=this.getReorderedRows(n);for(var h=0;h<l.length;h++)a=i.render(l[h],o),t.appendChild(a);1===n.virtualInfo.page&&e.splice(0,this.parent.frozenRows),n.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},r.prototype.getInfiniteRows=function(){var t=[],e=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),n=0;n<i.length;n++)t=t.concat(e?this.infiniteCache[i[n]][0]:this.infiniteCache[i[n]]);else t=e?this.visibleFrozenRows:this.visibleRows;return t},r.prototype.getInfiniteMovableRows=function(){var t=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?t.length?t:this.visibleRows:[]},r.prototype.getPanel=function(){return this.contentPanel},r.prototype.setPanel=function(t){this.contentPanel=t},r.prototype.getTable=function(){return this.contentTable},r.prototype.setTable=function(t){this.contentTable=t},r.prototype.getRows=function(){var t=this.getInfiniteRows();return t.length?t:this.parent.getFrozenColumns()?this.freezeRows:this.rows},r.prototype.getMovableRows=function(){var t=this.getInfiniteMovableRows();return t.length?t:this.movableRows},r.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},r.prototype.getMovableRowElements=function(){return this.rowElements},r.prototype.setRowElements=function(t){this.rowElements=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return f(t)||(t.id="content-"+t.id),this.colgroup=t},r.prototype.setVisible=function(t){var I,e=this.parent,i=this.parent.isFrozenGrid(),n=e.getFrozenColumns(),s=[];if(i){var o=this.freezeRows,a=this.movableRows,l=o.length,h=void 0,u=[];e.getFrozenMode()===Jt&&(u=e.getFrozenRightRowsObject());for(var d=0,m=void 0;d<l;d++){h=a[d].cells.length;var y=u.length?u[d].cells.length:0;m=o[d].clone();for(var C=0;C<h;C++)m.cells.push(a[d].cells[C]);for(var S=0;S<y;S++)m.cells.push(u[d].cells[S]);s.push(m)}}else s=this.getRows();s.some(function(Oe){return Oe.isDataRow&&(I=Oe),Oe.isDataRow});var k=!0;!e.groupSettings.columns.length&&I&&(k=!1);for(var O=e.getDataRows(),j=this.infiniteRowVisibility()||this.rows.filter(function(Oe){return!Oe.isDetailRow}),G=0,ae=t.length;G<ae;G++){var ve=t[G],xe=this.parent.getNormalizedColumnIndex(ve.uid),Le=this.parent.getColumnIndexByUid(ve.uid),oe=!0===ve.visible?"":"none";if(-1!==xe&&I&&xe<I.cells.length)if(i)if("movable"!==ve.getFreezeTableName())ve.getFreezeTableName()===dr?(Le=xe-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount(),Vt(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(Ai).childNodes[xe],{display:oe}),j=e.getFrozenRightRowsObject(),O=e.getFrozenRightDataRows()):(Vt(this.getColGroup().childNodes[xe],{display:oe}),j=this.infiniteRowVisibility(!0)||this.freezeRows,O=e.getDataRows());else{var We=e.getContent().querySelector("."+Gn).querySelector(Ai);Le=xe=xe-n-this.parent.getFrozenLeftColumnsCount(),Vt(We.childNodes[xe],{display:oe}),O=e.getMovableDataRows(),j=this.infiniteRowVisibility()||this.movableRows}else Vt(this.getColGroup().childNodes[xe],{display:oe});k||(this.setDisplayNone(O,Le,oe,j),i&&this.parent.notify(hu,{case:"refreshHeight",isModeChg:!0})),!this.parent.invokedFromMedia&&ve.hideAtMedia&&this.parent.updateMediaColumns(ve),this.parent.invokedFromMedia=!1}k?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(FM,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(FM,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(FM,{rows:j,args:{}})},r.prototype.setDisplayNone=function(t,e,i,n){(function coe(r,t,e,i,n,s){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=r[o[a]].querySelectorAll("td.e-rowcell")[t];if(r[o[a]].querySelectorAll("td.e-rowcell").length&&l)if(Vt(r[o[a]].querySelectorAll("td.e-rowcell")[t],{display:e}),r[o[a]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&z([r[o[a]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),s&&n.isRowDragable()){var h=n.getFrozenColumns()?t:t+1;i[o[a]].cells[h].visible=""===e}else i[o[a]].cells[t].visible=""===e}})(t,e,i,n,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:e,isFreeze:this.isInfiniteFreeze})},r.prototype.infiniteRowVisibility=function(t){var e;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=t,e=this.parent.infiniteScrollSettings.enableCache?t?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():t?this.visibleFrozenRows:this.visibleRows),e},r.prototype.colGroupRefresh=function(){if(this.getColGroup()){var t;t=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(Ai+":not(.e-masked-colgroup)").cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(t,this.getColGroup()),this.setColGroup(t)}},r.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+$s).querySelector(Ai+":not(.e-masked-colgroup)").cloneNode(!0)},r.prototype.initializeContentDrop=function(){this.droppable=new rw(this.parent.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},r.prototype.canSkip=function(t,e,i){return f(e)||f(t.visible)||e.cells[i].visible===t.visible},r.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new BV(this.parent):new sp(this.parent)},r.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(lt).innerHTML="")},r.prototype.setSelection=function(t,e,i){this.parent.notify("set-freeze-selection",{uid:t,set:e,clearAll:i});var n=this.parent.isFrozenGrid();if(!n||!this.parent.enableVirtualization){if(n)for(var s=this.getMovableRows().filter(function(d){return i||t===d.uid}),o=0;o<s.length;o++)s[o].isSelected=e;for(var a=this.getRows().filter(function(d){return i||t===d.uid}),l=0;l<a.length;l++){a[l].isSelected=e;for(var h=a[l].cells,u=0;u<h.length;u++)h[u].isSelected=e}}},r.prototype.getRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getDataRows()[t]},r.prototype.getInfiniteRowIndex=function(t){if(this.parent.infiniteScrollSettings.enableCache){var e=this.parent.frozenRows,i=e>t?0:e,n=parseInt(this.parent.getRows()[i].getAttribute(ki),10);t=e>t?t:t-n+e}return t},r.prototype.getVirtualRowIndex=function(t){return t},r.prototype.getMovableRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getMovableDataRows()[t]},r.prototype.enableAfterRender=function(t){"group"===t.module&&t.enable&&(this.generator=this.getModelGenerator())},r.prototype.setRowObjects=function(t){this.rows=t},r.prototype.immutableModeRendering=function(t){var e=this;void 0===t&&(t={});var i=this.parent;i.hideSpinner();var n=i.getPrimaryKeyFieldNames()[0],s={},o={},a=[],l={},h=i.getRowsObject().slice(),u=this.getBatchEditedRecords(n,h),d={},m=0!==Object.keys(u).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===t.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(t);else{if(0===i.currentViewData.length)return;var y={},C=i.createElement(lt,{attrs:{role:"rowgroup"}}),S=i.currentViewData,I=[].slice.call(this.getTable().querySelector(lt).children);if(this.prevCurrentView.length){var k=this.prevCurrentView.length,O=S.length;if(k===O)for(var L=0;L<O;L++)"Batch"===this.parent.editSettings.mode&&I[L].classList.contains("e-insertedrow")?(I.splice(L,1),--L):(o[S[L][n]]=s[this.prevCurrentView[L][n]]=L,d[L]=S[L][n],y[h[L].uid]=I[L],l[L]=this.prevCurrentView[L][n]);else{for(L=0;L<O;L++)o[S[L][n]]=L,d[L]=S[L][n];for(L=0;L<k;L++)"Batch"===this.parent.editSettings.mode&&I[L].classList.contains("e-insertedrow")?(I.splice(L,1),--L):(y[h[L].uid]=I[L],s[this.prevCurrentView[L][n]]=L,l[L]=this.prevCurrentView[L][n])}}for(L=0;L<S.length;L++){var B=s[S[L][n]];if(f(B)){var ae=new kh(this.serviceLocator,null,i),ve=this.generator.generateRows([S[L]]);a.push(ve[0]);var G=ae.render(ve[0],i.getColumns());C.appendChild(G),this.refreshImmutableContent(L,G,a[L])}else{var j=!1;if(this.parent.enableDeepCompare&&(j=this.objectEqualityChecker(this.prevCurrentView[B],S[L])),G=y[h[B].uid],a.push(h[B]),this.rowElements[B]&&this.rowElements[B].getAttribute("data-uid")===a[L].uid&&(m&&f(u[d[L]])||!m&&(j||this.prevCurrentView[B]===S[L]))){B!==L&&this.refreshImmutableContent(L,G,a[L]),C.appendChild(G);continue}(m&&!f(u[d[L]])||!this.parent.enableDeepCompare&&S[L]!==this.prevCurrentView[B]||this.parent.enableDeepCompare&&!j)&&h[B].setRowValue(S[L]),C.appendChild(G),this.refreshImmutableContent(L,G,a[L])}}if(this.rows=a,this.rowElements=[].slice.call(C.children),He(this.getTable().querySelector(lt)),this.getTable().appendChild(C),this.parent.trigger(ph,{},function(){e.parent.allowTextWrap&&e.parent.notify(hu,{case:"textwrap"})}),t){var xe=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(xe,t)}}},r.prototype.objectEqualityChecker=function(t,e){for(var i=Object.keys(t),n=!0,s=0;s<i.length;s++)if(!(t[i[s]]===e[i[s]]||t[i[s]]instanceof Date&&e[i[s]]instanceof Date&&t[i[s]].getTime()===e[i[s]].getTime())){n=!1;break}return n},r.prototype.getBatchEditedRecords=function(t,e){var i={},n=this.parent.getBatchChanges(),s=[],o=[];Object.keys(n).length&&(s=n.changedRecords,o=n.addedRecords);var a={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:e,args:a}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?e.splice(e.length-1,o.length):a.cancel||e.splice(0,o.length));for(var l=0;l<s.length;l++)i[s[l][t]]=l;return i},r.prototype.refreshImmutableContent=function(t,e,i){i.isAltRow=!!this.parent.enableAltRow&&t%2!=0,i.isAltRow?e.classList.add("e-altrow"):e.classList.remove("e-altrow"),i.index=t,i.edit=void 0,i.isDirty=!1,e.setAttribute(ki,t.toString()),e.setAttribute(zM,(t+1).toString()),this.updateCellIndex(e,t)},r.prototype.updateCellIndex=function(t,e){for(var i=0;i<t.cells.length;i++)t.cells[i].setAttribute("index",e.toString())},r}(),DG=function(){function r(t,e){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(n){var s=i.parent,o=i.draggable.currentStateTarget,a=me(o,"e-headercell");if(!s.allowReordering&&!s.allowGrouping||!f(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=o.classList.contains("e-headercell")?o:a;if(!h||!s.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var m,u=h.offsetHeight,d=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv");if(d){if(m=h.querySelector(".e-stackedheadercelldiv")?s.getStackedHeaderColumnByHeaderText(d.innerText.trim(),s.columns):s.getColumnByUid(d.getAttribute("e-mappinguid")),i.column=m,i.column.lockColumn)return!1;l.setAttribute("e-mappinguid",i.column.uid)}if(m&&!f(m.headerTemplate))if(f(m.headerTemplate))l.innerHTML=m.headerTemplate;else{var y=s.getColumnIndexByField(m.field);ya(l,m.getHeaderTemplate()(de({index:y},m),s,"headerTemplate"))}else l.innerHTML=d?m.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(u-6).toString()+"px",s.element.appendChild(l),l},this.dragStart=function(n){var s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",s.notify(Zx,{target:i.draggable.currentStateTarget,column:i.column,event:n.event})},this.drag=function(n){var s=i.parent,o=n.target;if(o){var a=U(o,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if(!(a&&a.getAttribute("id")===s.element.getAttribute("id")||(li(l,["e-notallowedcur"],["e-defaultcur"]),s.allowReordering&&(s.element.querySelector(".e-reorderuparrow").style.display="none",s.element.querySelector(".e-reorderdownarrow").style.display="none"),s.groupSettings.allowReordering)))return;s.notify(eS,{target:n.target,column:i.column,event:n.event})}},this.dragStop=function(n){var o,s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",(!me(n.target,"e-headercell")&&!me(n.target,"e-groupdroparea")||!s.allowReordering&&me(n.target,"e-headercell")||!n.helper.getAttribute("e-mappinguid")&&me(n.target,"e-groupdroparea"))&&(He(n.helper),o=!0),s.notify("column-drag-stop",{target:n.target,event:n.event,column:i.column,cancel:o})},this.drop=function(n){var s=i.parent,o=n.droppedElement.getAttribute("e-mappinguid"),a=U(n.target,".e-grid");He(n.droppedElement),!(a&&a.getAttribute("id")!==s.element.getAttribute("id")||!s.allowReordering&&!s.allowGrouping)&&s.notify(eD,{target:n.target,uid:o,droppedElement:n.droppedElement})},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(Wc,this.setVisible,this),this.parent.on(Jx,this.colPosRefresh,this),this.parent.on(Ua,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(jr,this.updateCustomResponsiveToolbar,this))}return r.prototype.renderPanel=function(){var t=this.parent.element.querySelector("."+$s),e=null!=t;t=e?t:this.parent.createElement("div",{className:"e-gridheader"});var i=e?t.querySelector("."+js):this.parent.createElement("div",{className:js});this.toggleStackClass(t),t.appendChild(i),this.setPanel(t),e||this.parent.element.appendChild(t)},r.prototype.renderTable=function(){var t=this.getPanel();t.appendChild(this.createHeaderTable()),this.setTable(t.querySelector("."+cr)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(Mo,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})},r.prototype.getPanel=function(){return this.headerPanel},r.prototype.setPanel=function(t){this.headerPanel=t},r.prototype.getTable=function(){return this.headerTable},r.prototype.setTable=function(t){this.headerTable=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return this.colgroup=t},r.prototype.getRows=function(){return this.getTable().tHead.rows},r.prototype.createHeaderTable=function(){var t=this.createTable(),e=this.getPanel().querySelector("."+js);return e.appendChild(t),e},r.prototype.createHeader=function(t,e){void 0===t&&(t=null);var i=this.parent,n=i.isFrozenGrid();this.getTable()&&!n&&He(this.getTable());var s=this.parent.createElement("table",{className:cr,attrs:{cellspacing:"0.25px",role:"grid"}}),o=e||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),a=this.createHeaderContent(o),l=a.thead,h=this.parent.createElement(lt,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var m,u=this.parent.createElement(Ai),d=this.parent.createElement("tr",{attrs:{role:"row"}}),y=this.rows=a.rows,C=0,S=y.length;C<S;C++)for(var I=0,k=y[C].cells.length;I<k;I++)m=this.parent.createElement("td"),d.appendChild(m);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&s.classList.add("e-sortfilter"),this.updateColGroup(u),h.appendChild(d),s.appendChild(this.setColGroup(u)),s.appendChild(l),s.appendChild(h),s.appendChild(this.caption),this.ariaService.setOptions(s,{colcount:i.getColumns().length.toString()}),s},r.prototype.createTable=function(t){return void 0===t&&(t=null),this.createHeader(t)},r.prototype.createHeaderContent=function(t){var e=this.parent,i=1,n=e.getFrozenMode(),s=e.getColumns(),o=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),a=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),l=new kh(this.serviceLocator,Nt.Header,e);l.element=a;var u,h=[];this.colDepth=function ZV(r){for(var t=0,e=0;e<r.length;e++){var i=ooe(r[e],0);t<i&&(t=i)}return t+1}(e.columns);for(var d=0,m=this.colDepth;d<m;d++)h[d]=this.generateRow(d),h[d].cells=[];"Right"!==n&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,t),"Right"===n&&(i=0,h=this.ensureColumns(h));var y=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){var C=h[0].cells[i].column.getFreezeTableName();"movable"===C||n===Jt&&C===dr?"Right"===n?h[0].cells.pop():h[0].cells.shift():y||C!==cs?"Right"===n&&C===dr&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=C===cs?"Left":"Right"}for(d=0,m=this.colDepth;d<m;d++)u=l.render(h[d],s),this.parent.rowHeight&&u.querySelector(".e-headercell")&&(u.style.height=this.parent.rowHeight+"px"),o.appendChild(u);return{thead:o,rows:h}},r.prototype.updateColGroup=function(t){var i,e=this.parent.getColumns(),n=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(e=de([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),t.id=this.parent.element.id+Ai,this.parent.allowGrouping)for(var s=0,o=this.parent.groupSettings.columns.length;s<o;s++)this.parent.enableColumnVirtualization&&-1===n.indexOf(s)||(i=this.parent.createElement("col",{className:"e-group-intent"}),t.appendChild(i));for((this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),t.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),s=0,o=e.length;s<o;s++)i=this.parent.createElement("col"),!1===e[s].visible&&Vt(i,{display:"none"}),t.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),t},r.prototype.ensureColumns=function(t){for(var e=this.parent,i=this.parent.getColumnIndexesInView(),n=0,s=t.length;n<s;n++){if(e.allowGrouping)for(var o=0,a=e.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||t[n].cells.push(this.generateCell({},Nt.HeaderIndent));if(e.detailTemplate||e.childGrid){var l={};this.parent.notify(vse,l),t[n].cells.push(this.generateCell(l,Nt.DetailHeader))}e.isRowDragable()&&t[n].cells.push(this.generateCell({},Nt.RowDragHIcon))}return t},r.prototype.getHeaderCells=function(t,e){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var s=0;s<n.length;s++)this.lockColsRendered=!1,t=this.appendCells(n[s],t,0,0===s,!1,s===n.length-1,i,e,!1);s=0;for(var o=n.length;s<o;s++)this.notfrzIdx=0,this.lockColsRendered=!0,t=this.appendCells(n[s],t,0,0===s,!1,s===o-1,i,e,!1);return t},r.prototype.appendCells=function(t,e,i,n,s,o,a,l,h){var S,u=o?h?"e-laststackcell":"e-lastcell":"",d=this.parent.isFrozenGrid(),m=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,y=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,C=this.parent.getContent().querySelector(".e-movablescrollbar");if(d&&C&&this.parent.enableColumnVirtualization&&(S=C.scrollLeft),t.columns){this.isFirstCol=!1;var I=this.getCellCnt(t,0);if(I){var k=this.getStackedLockColsCount(t,0),O=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==k||this.lockColsRendered&&I-k!=0,L=d&&this.ensureStackedFrozen(t.columns,l,!1);(!d&&O||L)&&e[i].cells.push(new ic({cellType:Nt.StackedHeader,column:t,colSpan:this.getColSpan(I,k,t.columns,l,d),className:n?"":s?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var B=0;B<t.columns.length;B++)e=this.appendCells(t.columns[B],e,i+1,n,0===B,B===t.columns.length-1&&o,a,l,!1);if(this.lockColsRendered){B=0;for(var j=t.columns.length;B<j;B++){n=n&&0===B;var G=this.isFirstCol=t.columns[B].visible&&!n,ae=B===j-1&&o;e=this.appendCells(t.columns[B],e,i+1,n,G&&!ae,ae,a,l,!0)}}}else(S&&S>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===t.getFreezeTableName()||!d&&m||d&&t.getFreezeTableName()===l&&y)&&e[i].cells.push(this.generateCell(t,Nt.Header,this.colDepth-i,(n?"":s?"e-firstcell":"")+u,i,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return e},r.prototype.ensureStackedFrozen=function(t,e,i){for(var n=t.length,s=0;s<n;s++)if(t[s].columns)i=this.ensureStackedFrozen(t[s].columns,e,i);else if(t[s].getFreezeTableName()===e){i=!0;break}return i},r.prototype.getStackedLockColsCount=function(t,e){if(t.columns)for(var i=0;i<t.columns.length;i++)e=this.getStackedLockColsCount(t.columns[i],e);else t.lockColumn&&e++;return e},r.prototype.getColSpan=function(t,e,i,n,s){return s?t=this.getFrozenColSpan(i,n,0):this.parent.lockcolPositionCount&&(t=this.lockColsRendered?t-e:e),t},r.prototype.getFrozenColSpan=function(t,e,i){for(var n=t.length,s=0;s<n;s++)t[s].columns?i=this.getFrozenColSpan(t[s].columns,e,i):t[s].getFreezeTableName()===e&&t[s].visible&&i++;return i},r.prototype.generateRow=function(t){return new Of({})},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!1,isTemplate:!f(t.headerTemplate),rowID:"",column:t,cellType:e,rowSpan:i,className:n,index:s,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new ic(a)},r.prototype.setVisible=function(t){for(var i,n,e=this.parent,s=e.getFrozenColumns(),o=0,a=t.length;o<a;o++){var l=t[o];if(n=e.getNormalizedColumnIndex(l.uid),i=l.visible?"":"none",s){var h=this.parent.isRowDragable()?s+1:s;Vt(n<h?this.getColGroup().children[n]:e.getHeaderContent().querySelector("."+nr).querySelector(Ai).children[n-h],{display:i})}else Vt(this.getColGroup().children[n],{display:i})}this.refreshUI()},r.prototype.colPosRefresh=function(){this.refreshUI()},r.prototype.refreshUI=function(){var t=this.parent.isFrozenGrid(),e=this.parent.enableColumnVirtualization&&t,i=this.getPanel();this.toggleStackClass(i);var n=this.freezeReorder?this.headerPanel.querySelector("."+nr).querySelector("."+cr):this.getTable(),s=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(e&&(n=this.parent.contentModule.getVirtualFreezeHeader(),s=this.parent.contentModule.isXaxis()?"movable":s),n){He(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]);var o=this.parent.createElement(Ai),a=this.createHeaderContent(s);this.rows=a.rows,n.insertBefore(a.thead,n.firstChild),this.updateColGroup(o),n.insertBefore(this.setColGroup(o),n.firstChild),e||this.setTable(n),this.appendContent(n),this.parent.notify(mV,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!t||this.parent.enableColumnVirtualization&&t)&&this.initializeHeaderDrag();for(var l=[].slice.call(i.querySelectorAll("tr.e-columnheader")),h=0,u=l;h<u.length;h++){var m=[].slice.call(u[h].getElementsByClassName("e-grouptopleftcell"));m.length&&m[m.length-1].classList.add("e-lastgrouptopleftcell")}t||this.parent.notify(Mo,{rows:this.rows,args:{isFrozen:t}}),this.parent.enableColumnVirtualization&&me(n,nr)&&this.parent.notify(Mo,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&uu(l,!0)}},r.prototype.toggleStackClass=function(t){this.parent.columns.some(function(n){return!f(n.columns)})?t.classList.add("e-stackedheader"):t.classList.remove("e-stackedheader")},r.prototype.appendContent=function(t){this.getPanel().querySelector("."+js).appendChild(t)},r.prototype.getCellCnt=function(t,e){if(t.columns)for(var i=0,n=t.columns.length;i<n;i++)e=this.getCellCnt(t.columns[i],e);else t.visible&&e++;return e},r.prototype.initializeHeaderDrag=function(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new tf(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))},r.prototype.initializeHeaderDrop=function(){new rw(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},r.prototype.renderCustomToolbar=function(){var t=this,e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){for(var i=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),n=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<o;a++){var l=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=1===o?this.parent.allowSorting?"sort":"filter":1===a?"sort":"filter",u=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),d=e.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});u.appendChild(d),new Tw({cssClass:this.parent.cssClass?this.parent.cssClass:""}).appendTo(u),u.onclick=function(y){y.target.classList.contains("e-ressort-btn")||y.target.classList.contains("e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},l.appendChild(u),s.appendChild(l)}n.appendChild(s),i.appendChild(n),e.element.insertBefore(i,this.parent.element.querySelector("."+$s))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")},r.prototype.updateCustomResponsiveToolbar=function(t){var e=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===t.module&&(e?He(e):this.renderCustomToolbar())},r}(),fh=function(){function r(t,e){this.localizer=e.getService("localization"),this.formatter=e.getService("valueFormatter"),this.parent=t,this.element=this.parent.createElement("TD",{className:on,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("CheckBoxLabel")}})}return r.prototype.getGui=function(){return""},r.prototype.format=function(t,e,i){return f(t.format)||("number"===t.type&&isNaN(parseInt(e,10))&&(e=null),e=this.formatter.toView(e,t.getFormatter())),f(e)?"":e.toString()},r.prototype.evaluate=function(t,e,i,n,s,o){var a,l;if(e.column.template){var h=this.parent.isReact&&"string"!=typeof e.column.template,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=["index"],m=YV({},i,((a={})[use]=s,a.column=e.column,a)),y=this.parent.element.id+e.column.uid,C="isStringTemplate";if(h||u){var S={index:n[d[0]]};e.column.getColumnTemplate()(de(S,m),this.parent,"columnTemplate",y,this.parent[C],null,t),this.parent.renderTemplates()}else l=e.column.getColumnTemplate()(de({index:n[d[0]]},m),this.parent,"template",y,this.parent[C],void 0,void 0,this.parent.root);return!h&&!u&&ya(t,l),this.parent.notify("template-result",{template:l}),l=null,t.setAttribute("aria-label",t.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+e.column.headerText),!1}return!0},r.prototype.invokeFormatter=function(t,e,i){return f(t.formatter)||(e=function yIe(r,t){return r.prototype&&t in r.prototype}(t.formatter,"getValue")?(new(0,t.formatter)).getValue(t,i):"function"==typeof t.formatter?t.formatter(t,i):t.formatter.getValue(t,i)),e},r.prototype.render=function(t,e,i,n,s){return this.refreshCell(t,e,i,s)},r.prototype.refreshTD=function(t,e,i,n){var s="Batch"===this.parent.editSettings.mode&&t.classList.contains("e-editedbatchcell");if(this.parent.isReact){t.innerHTML="";var o=t.cellIndex,a=t.parentElement;He(t);var l=this.refreshCell(e,i,n,s);this.cloneAttributes(l,t),a.cells.length!==o-1?a.insertBefore(l,a.cells[o]):a.appendChild(l)}else{var h=this.refreshCell(e,i,n,s);t.innerHTML="",t.setAttribute("aria-label",h.getAttribute("aria-label"));for(var d=0,m=[].slice.call(h.childNodes);d<m.length;d++)t.appendChild(m[d])}},r.prototype.cloneAttributes=function(t,e){for(var s,i=e.attributes,n=i.length;n--;)t.setAttribute((s=i[n]).name,s.value)},r.prototype.refreshCell=function(t,e,i,n){var s,l,o=this.element.cloneNode(),a=t.column;t.isForeignKey&&(l=t.foreignKeyData[0]||((s={})[a.foreignKeyValue]=a.format?null:"",s));var h=this.getGui(),u=t.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,e,a);if(("date"===a.type||"datetime"===a.type)&&!f(u)&&(u=new Date(u)),h=(u=this.format(a,u,e)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var d="true"!==u&&"false"!==u?null:"true"===u?"True":"False";h=d?this.localizer.getConstant(d):h}var m=this.invokeFormatter(a,u,e);if(h=f(a.formatter)?h:f(m)?"":m.toString(),o.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+t.column.headerText),this.evaluate(o,t,e,i,l,n)&&"checkbox"!==a.type)this.appendHtml(o,h,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add(oS),o.setAttribute("aria-label",this.localizer.getConstant("CheckBoxLabel"));var y=_b(this.parent.createElement,!1,{checked:u=!!this.parent.selectionSettings.persistSelection&&"true"===u,label:" "});this.parent.cssClass&&N([y],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+t.rowID,y.insertBefore(this.rowChkBox.cloneNode(),y.firstChild),o.appendChild(y)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0),this.setAttributes(o,t,i),"boolean"===a.type&&a.displayAsCheckBox){var C=isNaN(parseInt(u.toString(),10))?"true"===u:parseInt(u.toString(),10)>0;y=_b(this.parent.createElement,!1,{checked:C,label:" "}),o.innerHTML="",o.classList.add("e-gridchkbox-cell"),y.classList.add("e-checkbox-disabled"),this.parent.cssClass&&N([y],[this.parent.cssClass]),o.appendChild(y),o.setAttribute("aria-label",C+this.localizer.getConstant("ColumnHeader")+t.column.headerText)}return o},r.prototype.appendHtml=function(t,e,i){return void 0===i&&(i="innerHTML"),t[i]=e,t},r.prototype.setAttributes=function(t,e,i){var n=e.column;this.buildAttributeFromCell(t,e,"checkbox"===n.type),Ff(t,i),Ff(t,e.attributes),n.customAttributes&&Ff(t,n.customAttributes),"Vertical"===this.parent.rowRenderingMode&&Ff(t,{"data-cell":n.headerText}),n.textAlign&&(t.style.textAlign=n.textAlign),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&t.classList.add("e-ellipsistooltip")},r.prototype.buildAttributeFromCell=function(t,e,i){var n={},o=[];e.colSpan&&(n.colSpan=e.colSpan),e.rowSpan&&(n.rowSpan=e.rowSpan),e.isTemplate&&o.push("e-templatecell"),e.isSelected&&(o.push.apply(o,["e-selectionbackground","e-active"]),i&&t.querySelector(".e-frame").classList.add("e-check")),e.isColumnSelected&&o.push.apply(o,["e-columnselection"]),e.cellType===Nt.Header?(n["data-colindex"]=e.colIndex,n[Fse]=e.colIndex+1):f(e.index)||(n["data-colindex"]=e.index,n[Fse]=e.index+1),e.visible||o.push("e-hide"),n.class=o,Ff(t,n)},r.prototype.getValue=function(t,e,i){return i.valueAccessor(t,e,i)},r}(),GM=function(){function r(){}return r.prototype.setOptions=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)aS(t,lS[i[n]],e[i[n]])},r.prototype.setExpand=function(t,e){aS(t,lS.expand,e)},r.prototype.setSort=function(t,e){aS(t,lS.sort,e,"boolean"==typeof e)},r.prototype.setBusy=function(t,e){aS(t,lS.busy,e),aS(t,lS.invalid,null,!0)},r.prototype.setGrabbed=function(t,e,i){aS(t,lS.grabbed,e,i)},r.prototype.setDropTarget=function(t,e){aS(t,lS.dropeffect,"copy",!e)},r}();function aS(r,t,e,i){i&&r?r.removeAttribute(t):r&&r.setAttribute(t,e)}var lS={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},EDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Hse=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),e.ariaService=new GM,e.hTxtEle=e.parent.createElement("span",{className:"e-headertext"}),e.sortEle=e.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),e.gui=e.parent.createElement("div"),e.chkAllBox=e.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":e.localizer.getConstant("CheckBoxLabel")}}),e}return EDe(t,r),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,s,o)},t.prototype.refresh=function(e,i){this.clean(i);var n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,i,n)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,i,n){var h,s=e.column,o={},a="",l=this.getGui();if(Ue(l,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),f(s.headerValueAccessor)||(h=this.getValue(s.headerText,s)),"checkbox"!==s.type){var u=s.headerText;f(h)||(u=h);var d=this.hTxtEle.cloneNode();d[s.getDomSetter()]=u,l.appendChild(d)}else{s.editType="booleanedit";var m=_b(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+s.uid,m.insertBefore(this.chkAllBox.cloneNode(),m.firstChild),this.parent.cssClass&&N([m],[this.parent.cssClass]),l.appendChild(m),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,e),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!f(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){Ue(n,{"e-mappinguid":"e-flmenu-"+s.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var y=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==y.length)for(var C=this.parent.getForeignKeyColumns(),S=0;S<this.parent.columns.length;S++)for(var I=0;I<this.parent.filterSettings.columns.length;I++)if(this.parent.filterSettings.columns[I].field===s.field||C.length&&s.foreignKeyValue===this.parent.filterSettings.columns[I].field){n.classList.add("e-filtered"),y.push(s.field);break}i.appendChild(n.cloneNode())}e.className&&i.classList.add(e.className),s.customAttributes&&Ff(i,s.customAttributes),this.parent.allowSorting&&s.allowSorting&&(o.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&s.allowGrouping||this.parent.allowReordering&&s.allowReordering)&&(o.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(s,i);var k,O=this.parent,L=O.getColumnIndexByField(s.field);if(!f(s.headerTemplate)){var B=O.element.id+s.uid+"headerTemplate",j="isStringTemplate",G=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact){var xe={index:L};i.firstElementChild.innerHTML="",s.getHeaderTemplate()(de(xe,G),O,"headerTemplate",B,this.parent[j],null,i.firstElementChild),this.parent.renderTemplates()}else k=s.getHeaderTemplate()(de({index:L},G),O,"headerTemplate",B,this.parent[j],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",ya(i.firstElementChild,k)}if(this.ariaService.setOptions(i,o),!f(s.headerTextAlign)||!f(s.textAlign)){var Le=s.headerTextAlign||s.textAlign;l.style.textAlign=Le,"Right"===Le||"Left"===Le?i.classList.add("Right"===Le?"e-rightalign":"e-leftalign"):"Center"===Le&&i.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&i.classList.add("e-ellipsistooltip"),a&&i.setAttribute("aria-description",a),i.setAttribute("aria-rowspan",(f(e.rowSpan)?1:e.rowSpan).toString()),i.setAttribute("aria-colspan","1"),this.parent.trigger(Bre,{cell:e,node:i}),i},t.prototype.getValue=function(e,i){return i.headerValueAccessor(e,i)},t.prototype.extendPrepareHeader=function(e,i){if(this.parent.showColumnMenu&&e.showColumnMenu&&!f(e.field)){var n=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(var o=0;o<this.parent.columns.length;o++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[a].field===e.field){n.classList.add("e-filtered"),s.push(e.field);break}i.classList.add("e-fltr-icon"),i.appendChild(n)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},t.prototype.appendHtml=function(e,i){return e.appendChild(i),e},t}(fh),TDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vse=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),e}return TDe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),a=e.column;if(s.appendChild(o),f(a.headerTemplate)?this.appendHtml(o,a.headerText,a.getDomSetter()):ya(o,a.getHeaderTemplate()(a,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===a.clipMode||!a.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===a.clipMode||!a.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),f(e.column.textAlign)||(o.style.textAlign=e.column.textAlign),e.column.customAttributes&&Ff(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(l)}return e.className&&s.classList.add(e.className),this.parent.trigger(Bre,{cell:e,node:s}),s},t}(fh),xDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IG=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-indentcell"}),e}return xDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return Ff(n,e.attributes),n},t}(fh),zse=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),DDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cellUid=0,e.element=e.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:e.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),e}return zse(t,r),t.prototype.render=function(e,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var o,a,l,n=this.element.cloneNode(),s=this.parent;i.headerText=e.column.headerText,e.isForeignKey&&(a=this.format(e.column,e.column.valueAccessor("foreignKey",i,e.column)));for(var h=e.isForeignKey?a:e.column.enableGroupByFormat?i.key:this.format(e.column,e.column.valueAccessor("key",i,e.column)),u=0;u<s.aggregates.length;u++)for(var d=0;d<s.aggregates[u].columns.length;d++)if(s.getVisibleColumns()[0].field===s.aggregates[u].columns[d].field&&s.aggregates[u].columns[d].groupCaptionTemplate){l=s.aggregates[u].columns[d].groupCaptionTemplate.includes("$")?s.aggregates[u].columns[d].groupCaptionTemplate.split("$")[0]+i[s.getVisibleColumns()[0].field][s.aggregates[u].columns[d].type]+s.aggregates[u].columns[d].groupCaptionTemplate.split("}")[1]:s.aggregates[u].columns[d].groupCaptionTemplate;break}if(f(s.groupSettings.captionTemplate))n.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+h+(l?"   "+l:""):e.column.headerText+": "+h+" - "+i.count+" "+this.localizer.getConstant(i.count<2?"Item":"Items")+(l?"   "+l:"");else{var m=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate,y=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(m||y){var C=s.element.id+"captionTemplate";El(s.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",C,null,null,n),this.parent.renderTemplates()}else o=this.parent.isVue?El(s.groupSettings.captionTemplate)(i,this.parent):El(s.groupSettings.captionTemplate)(i);!m&&!y&&ya(n,o)}return n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-label",n.innerHTML+this.localizer.getConstant("GroupCaption")),n.setAttribute("title",n.innerHTML),n},t}(fh),IDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-groupcaption"}),e}return zse(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.innerHTML="&nbsp;",n.setAttribute("colspan",e.colSpan.toString()),n},t}(fh),ADe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_De=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ADe(t,r),t.prototype.render=function(e,i,n,s){var o=this.element.cloneNode();return o.setAttribute("ej-mappingname",i.field),o.setAttribute("ej-mappingvalue",i.key),o.setAttribute("aria-expanded",s?"true":"false"),o.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache?(e.cellType=Nt.Indent,o.className=s?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(o.className=s?"e-recordplusexpand":"e-recordpluscollapse",o.appendChild(this.parent.createElement("a",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:s?"expanded":"collapsed"}}))),o},t}(IG),kDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),RDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-grouptopleftcell"}),e}return kDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),n},t}(fh),MDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),LDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-detailheadercell"}),e}return MDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),n},t}(fh),ODe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),PDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),e}return ODe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode();return n&&!f(n.class)?(s.className="",s.className=n.class,s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"javascript:void(0);",title:"expanded"}}))):s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:"collapsed"}})),s},t}(fh),FDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),NDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}}),e}return FDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),e.isSelected&&(n.classList.add("e-selectionbackground"),n.classList.add("e-active")),n},t}(fh),BDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),HDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-rowdragheader"}),e}return BDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(ri("div",{className:"e-emptycell"})),n},t}(fh),VDe=function(){function r(t,e){this.emptyGrid=!1,this.counter=0,this.parent=t,this.locator=e,this.data=new PV(t,e),this.l10n=e.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return r.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(Ks.Header),this.contentRenderer=this.renderer.getRenderer(Ks.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},r.prototype.refresh=function(t){var e=this;void 0===t&&(t={requestType:"refresh"});var i=this.parent;i.notify(t.requestType+"-begin",t),i.trigger(mr,t,function(n){if(void 0===n&&(n={requestType:"refresh"}),n.cancel)i.notify(SV,n);else{if("delete"===n.requestType&&i.allowPaging){var s=n.data.length,o=i.pageSettings.totalRecordsCount-s;!(i.getCurrentViewRecords().length-s)&&o&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===o&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:o,currentPage:Math.ceil(o/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=o)}"reorder"===n.requestType&&e.parent.dataSource&&"result"in e.parent.dataSource||("paging"===n.requestType||"columnstate"===n.requestType||"reorder"===n.requestType)&&e.parent.groupSettings.enableLazyLoading&&e.parent.groupSettings.columns.length&&e.parent.contentModule.getGroupCache()[e.parent.pageSettings.currentPage]?e.contentRenderer.refreshContentRows(n):e.refreshDataManager(n)}})},r.prototype.resetTemplates=function(){var t=this.parent,e=t.getColumns();if(t.detailTemplate){var i=t.element.id+"detailTemplate";Rd[i]=[],Ac(i)}t.groupSettings.captionTemplate&&Ac(t.element.id+"captionTemplate"),t.rowTemplate&&Ac(t.element.id+"rowTemplate"),t.toolbarTemplate&&Ac(t.element.id+"toolbarTemplate"),t.pageSettings.template&&Ac(t.element.id+"_template");for(var n=0;n<e.length;n++)e[n].template&&(Rd[t.element.id+e[n].uid]=[],Ac(t.element.id+e[n].uid)),e[n].headerTemplate&&Ac(t.element.id+e[n].uid+"headerTemplate"),e[n].filterTemplate&&Ac(t.element.id+e[n].uid+"filterTemplate");for(var s="guid",o=0;o<t.aggregates.length;o++)for(var a=0;a<t.aggregates[o].columns.length;a++)t.aggregates[o].columns[a].footerTemplate&&Ac(t.element.id+t.aggregates[o].columns[a][s]+"footerTemplate"),t.aggregates[o].columns[a].groupFooterTemplate&&Ac(t.element.id+t.aggregates[o].columns[a][s]+"groupFooterTemplate"),t.aggregates[o].columns[a].groupCaptionTemplate&&Ac(t.element.id+t.aggregates[o].columns[a][s]+"groupCaptionTemplate")},r.prototype.refreshComplete=function(t){this.parent.trigger(Ui,t)},r.prototype.refreshDataManager=function(t){var e=this;void 0===t&&(t={});var i=this.parent,n="Shimmer"===i.loadingIndicator.indicatorType&&"virtualscroll"!==t.requestType&&"infiniteScroll"!==t.requestType||("virtualscroll"===t.requestType||"infiniteScroll"===t.requestType)&&i.enableVirtualMaskRow;"virtualscroll"!==t.requestType&&!t.isCaptionCollapse&&!n&&this.parent.showSpinner(),n&&i.showMaskRow("virtualscroll"===t.requestType?t.virtualInfo.sentinelInfo.axis:"infiniteScroll"===t.requestType?t.direction:void 0),this.parent.notify("reset-infinite-blocks",t),this.emptyGrid=!1;var s,o=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+gs),!0),o){var a=new fl;s=this.getFData(a,t)}if(s=s?s.then(function(h){var u=e.data.generateQuery().requiresCount();if(e.emptyGrid){var d=new fl;return d.resolve({result:[],count:0}),d.promise}return e.data.getData(t,u)}):this.data.getData(t,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!o||this.parent.searchSettings.key.length)){var l=new fl;s=s.then(function(h){return e.parent.notify(wV,{dataManager:s,result:h,promise:l,action:t}),l.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(s=s.then(function(h){return e.validateGroupRecords(h)})),s.then(function(h){return e.dataManagerSuccess(h,t)}).catch(function(h){return e.dataManagerFailure(h,t)})},r.prototype.getFData=function(t,e){return this.parent.notify(wV,{isComplex:!0,promise:t,action:e}),t.promise},r.prototype.isNeedForeignAction=function(){var t=this.parent;return!!(t.allowFiltering&&t.filterSettings.columns.length||t.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},r.prototype.foreignKey=function(t){var e=this;return t.some(function(i){return!(!e.parent.filterSettings.columns.some(function(s){return i.uid===s.uid})&&!e.parent.searchSettings.key.length)})},r.prototype.sendBulkRequest=function(t){var e=this;t.requestType="batchsave";var i=this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original),n=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):i.then(function(s){e.data.getData(t,n).then(function(o){return e.dmSuccess(o,t)}).catch(function(o){return e.dmFailure(o,t)})}).catch(function(s){return e.dmFailure(s,t)})},r.prototype.dmSuccess=function(t,e){this.dataManagerSuccess(t,e)},r.prototype.dmFailure=function(t,e){this.dataManagerFailure(t,e)},r.prototype.renderEmptyRow=function(){this.emptyRow(!0)},r.prototype.emptyRow=function(t){var e=this.parent,i=this.contentRenderer.getTable().querySelector(lt);f(i)||He(i),i=this.parent.createElement(lt,{attrs:{role:"rowgroup"}});var n=0;(e.detailTemplate||e.childGrid)&&++n;var s=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}});s.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(e.getVisibleColumns().length+n+e.groupSettings.columns.length).toString()}})),i.appendChild(s),this.contentRenderer.renderEmpty(i),t&&(this.parent.trigger(ph,{}),this.parent.notify(np,{rows:[new Of({isDataRow:!0,cells:[new ic({isDataCell:!0,visible:!0})]})]}))},r.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},r.prototype.updateColumnType=function(t){for(var i,e=this.parent.getColumns(),n="customFormat",s="equalTo",o=t&&t.items?t.items[0]:t,a=this.locator.getService("valueFormatter"),l=0,h=e.length;l<h;l++){i=xs(e[l].field||"",o),f(e[l][n])||(e[l].format=e[l][n]),!f(e[l].validationRules)&&!f(e[l].validationRules[s])&&(e[l].validationRules[s][0]=this.parent.element.id+e[l].validationRules[s][0]),e[l].isForeignColumn()&&e[l].columnData&&(i=xs(e[l].foreignKeyValue||"",e[l].columnData[0])),f(i)?e[l].type=e[l].type||null:(this.isColTypeDef=!0,e[l].type||(e[l].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var u=new Jw;e[l].format&&(e[l].format.skeleton||e[l].format.format&&"string"==typeof e[l].format.format)&&(e[l].setFormatter(u.getFormatFunction(de({},e[l].format))),e[l].setParser(u.getParserFunction(e[l].format))),"string"==typeof e[l].format?ioe(this.locator,e[l]):!e[l].format&&"number"===e[l].type&&e[l].setParser(a.getParserFunction({format:"n2"}))}},r.prototype.dataManagerSuccess=function(t,e){var i=this,n=this.parent;this.contentRenderer=this.renderer.getRenderer(Ks.Content),this.headerRenderer=this.renderer.getRenderer(Ks.Header),t.actionArgs=e;var s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!n.groupSettings.enableLazyLoading&&("delete"===e.requestType||"save"===e.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(n.sortSettings.columns.length||n.filterSettings.columns.length||this.parent.groupSettings.columns.length||n.searchSettings.key));n.trigger(gV,t,function(o){if(!o.cancel){o.result=f(o.result)?[]:o.result;var a=Object.keys(o.result).length;if(!i.parent.isDestroyed){if(!(n.getColumns().length||a||n.columns.length&&n.columns[0]instanceof _h))return void n.hideSpinner();if(i.isInfiniteEnd(e)&&!a)return void i.parent.notify(_V,{e,result:t.result,count:t.count,agg:t.aggregates});if(i.parent.isEdit=!1,i.parent.notify("edit-reset",{}),i.parent.notify(nS,{}),e&&"infiniteScroll"!==e.requestType&&i.parent.notify("commandColumnDestroy",{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=i.parent.currentViewData.slice(),n.currentViewData=o.result,n.notify("refresh-infinite-current-view-data",{args:e,data:o.result}),o.count&&!n.allowPaging&&(n.enableVirtualization||n.enableInfiniteScrolling)&&(n.totalDataRecordsCount=o.count),!a&&o.count&&n.allowPaging&&e&&"delete"!==e.requestType)return i.parent.groupSettings.enableLazyLoading&&("grouping"===e.requestType||"ungrouping"===e.requestType)&&i.parent.notify(N8,e),n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=o.count,"paging"!==e.requestType&&(n.pageSettings.currentPage=Math.ceil(o.count/n.pageSettings.pageSize)),void n.dataBind();if((!n.getColumns().length&&a||!i.isLayoutRendered)&&!ks(n)&&(n.removeMaskRow(),i.updatesOnInitialRender(o)),!i.isColTypeDef&&n.getCurrentViewRecords()&&i.updateColumnType(i.data.dataManager.dataSource.offline&&n.dataSource&&n.dataSource.length?n.dataSource[0]:n.getCurrentViewRecords()[0]),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(o.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!f(e)&&"infiniteScroll"!==e.requestType&&!e.isFrozen&&nL(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!f(e)&&"infiniteScroll"===e.requestType)&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(Uc,de({count:o.count,result:o.result,aggregates:o.aggregates},e)),(n.groupSettings.columns.length||e&&"ungrouping"===e.requestType)&&e&&"filtering"!==e.requestType&&i.headerRenderer.refreshUI(),a)ks(n)&&(e.scrollTop={top:i.contentRenderer.content.scrollTop}),s?i.parent.notify(_V,{e,result:t.result,count:t.count,agg:t.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(e):i.contentRenderer.refreshContentRows(e);else{if(e&&e.isCaptionCollapse)return;if(!n.getColumns().length)return n.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+gs),!1),n.removeMaskRow(),i.renderEmptyRow(),e){var h=(e.requestType||"").toLowerCase()+"-complete";i.parent.notify(h,e),"batchsave"===e.requestType&&(e.cancel=!1,e.rows=[],e.isFrozen=0!==i.parent.getFrozenColumns()&&!e.isFrozen,i.parent.trigger(Ui,e))}i.parent.hideSpinner()}i.parent.notify(_v,{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in t&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},r.prototype.dataManagerFailure=function(t,e){this.ariaService.setOptions(this.parent.getContent().querySelector("."+gs),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger($x,{error:t}),this.parent.hideSpinner(),this.parent.removeMaskRow(),"save"!==e.requestType&&"delete"!==e.requestType&&"bulk-save"!==e.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:t}))},r.prototype.setRowCount=function(t){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:t?t.toString():"1"})},r.prototype.isInfiniteEnd=function(t){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===t.requestType},r.prototype.updatesOnInitialRender=function(t){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(t.result[0]),aD(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(iS,{})},r.prototype.iterateComplexColumns=function(t,e,i){for(var n=Object.keys(t),s=0;s<n.length;s++)("object"!=typeof t[n[s]]||!t[n[s]]||t[n[s]]instanceof Date?[]:Object.keys(t[n[s]])).length?this.iterateComplexColumns(t[n[s]],e+(n[s]+"."),i):(i[this.counter]=e+n[s],this.counter++)},r.prototype.buildColumns=function(t){var e=[],i={};this.iterateComplexColumns(t,"",i);for(var n=Object.keys(i).filter(function(a){return"BlazId"!==i[a]}).map(function(a){return i[a]}),s=0,o=n.length;s<o;s++)e[s]={field:n[s]},this.parent.enableColumnVirtualization&&(e[s].width=f(e[s].width)?200:e[s].width);this.parent.setProperties({columns:e},!0)},r.prototype.instantiateRenderer=function(){this.renderer.addRenderer(Ks.Header,new DG(this.parent,this.locator)),this.renderer.addRenderer(Ks.Content,new qM(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(Nt.Header,new Hse(this.parent,this.locator)),t.addCellRenderer(Nt.Data,new fh(this.parent,this.locator)),t.addCellRenderer(Nt.StackedHeader,new Vse(this.parent,this.locator)),t.addCellRenderer(Nt.Indent,new IG(this.parent,this.locator)),t.addCellRenderer(Nt.GroupCaption,new DDe(this.parent,this.locator)),t.addCellRenderer(Nt.GroupCaptionEmpty,new IDe(this.parent,this.locator)),t.addCellRenderer(Nt.Expand,new _De(this.parent,this.locator)),t.addCellRenderer(Nt.HeaderIndent,new RDe(this.parent,this.locator)),t.addCellRenderer(Nt.StackedHeader,new Vse(this.parent,this.locator)),t.addCellRenderer(Nt.DetailHeader,new LDe(this.parent,this.locator)),t.addCellRenderer(Nt.RowDragHIcon,new HDe(this.parent,this.locator)),t.addCellRenderer(Nt.DetailExpand,new PDe(this.parent,this.locator)),t.addCellRenderer(Nt.DetailFooterIntent,new IG(this.parent,this.locator)),t.addCellRenderer(Nt.RowDragIcon,new NDe(this.parent,this.locator))},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(this.parent.on(Lf,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(Yo,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on(hse,function(){t.emptyGrid=!0},this),this.parent.on(iS,this.dynamicColumnChange,this))},r.prototype.validateGroupRecords=function(t){var e=this,i=t.result.length-1;if(i<0)return Promise.resolve(t);var n=t.result[0],s=t.result[i],o=[],a=function(I){for(var k=[n,s],O=0;O<k.length;O++)o.push(new kn("field","==",k[O].field).and(e.getPredicate("key","equal",k[O].key)));I.where(kn.or(o))},l=new si;a(l);var u=new Je(t.result).executeLocal(l),d=this.data.generateQuery(!0),m=[];if(this.data.isRemote()){for(var y=[n,s],C=0;C<y.length;C++)m.push(this.getPredicate(y[C].field,"equal",y[C].key));d.where(kn.or(m))}else a(d);var S=new fl;return this.data.getData({},d).then(function(I){e.updateGroupInfo(u,I.result),S.resolve(t)}).catch(function(I){return S.reject(I)}),S.promise},r.prototype.getPredicate=function(t,e,i){return i instanceof Date?nC({field:t,operator:e,value:i}):new kn(t,e,i)},r.prototype.updateGroupInfo=function(t,e){for(var i=new Je(e),n=t,s=0;s<n.length;s++){var o=i.executeLocal((new si).where(new kn("field","==",n[s].field).and(this.getPredicate("key","equal",n[s].key))))[0];n[s].count=o.count;var a=n[s].items,l=o.items;a.GroupGuid&&(n[s].items=this.updateGroupInfo(n[s].items,o.items));for(var h=this.parent.aggregates,u=0;u<h.length;u++)for(var d=h[u],m=0;m<d.columns.length;m++)for(var y=d.columns[m].type instanceof Array?d.columns[m].type:[d.columns[m].type],C=0;C<y.length;C++){var S=d.columns[m].field+" - "+y[C].toLowerCase(),I=a.level?l.records:o.items,k=this.parent;if("Custom"===y[C]){var O=a.level?l:o,L=d.columns[m].customAggregate;"string"==typeof L&&(L=ie(L,window)),n[s].aggregates[S]=L?L.call(k,O,d.columns[m]):""}else n[s].aggregates[S]=Ye.aggregates[y[C].toLowerCase()](I,d.columns[m].field)}}return t},r}(),zDe=function(){function r(){this.cellRenderMap={}}return r.prototype.addCellRenderer=function(t,e){t="string"==typeof t?t:pl(Nt,t),f(this.cellRenderMap[t])&&(this.cellRenderMap[t]=e)},r.prototype.getCellRenderer=function(t){if(t="string"==typeof t?t:pl(Nt,t),f(this.cellRenderMap[t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[t]},r}(),jse=function(){function r(t,e){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.evtHandlers=[{event:kV,handler:this.closeCustomDialog},{event:pG,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],wo(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Ui,this.onActionCompleteFn)},r.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},r.prototype.renderCustomFilterDiv=function(){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),e=t.querySelector(".e-dlg-custom-header"),i=t.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",e.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var n=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),n.appendChild(this.customExcelFilterParent)},r.prototype.renderResponsiveContextMenu=function(t){if(this.action===ur.isFilter){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),n=i.querySelector(".e-dlg-closeicon-btn"),s=i.querySelector(".e-dlg-custom-header");if(t.isOpen){e.firstChild.style.display="none",e.appendChild(t.target),n.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",s.innerHTML=t.header;var o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new Tw({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),s.parentElement.insertBefore(o,s)}else this.backBtn&&!this.isCustomDlgRender&&(e.firstChild.style.display="",He(this.backBtn.element),n.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),s.innerHTML=this.getHeaderTitle({action:ur.isFilter},t.col))}},r.prototype.refreshCustomFilterClearBtn=function(t){this.filterClearBtn&&(this.isFiltered=t.isFiltered,this.filterClearBtn.element.style.display=t.isFiltered?"":"none")},r.prototype.refreshCustomFilterOkBtn=function(t){this.saveBtn&&(this.saveBtn.disabled=t.disabled)},r.prototype.renderResponsiveContent=function(t){var e=this,i=this.parent;if(t)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:t.uid+"-main-filter"}),this.filterParent;var n=i.getColumns();this.customColumnDiv=i.createElement("div",{className:"columndiv",styles:"width: 100%"});var s=i.createElement("div",{className:"e-ressortbutton-parent"}),o=[],a=this.action===ur.isSort,l=this.action===ur.isFilter;if(l)for(var h=0;h<i.filterSettings.columns.length;h++)o.push(i.filterSettings.columns[h].field);for(h=0;h<n.length;h++)if(!(!n[h].visible||!n[h].allowSorting&&a||!n[h].allowFiltering&&l)){var u=i.createElement("div",{className:"e-responsivecoldiv"});u.setAttribute("data-e-mappingname",n[h].field),u.setAttribute("data-e-mappinguid",n[h].uid);var d=i.createElement("span",{innerHTML:n[h].headerText,className:"e-res-header-text"});if(u.appendChild(d),this.customColumnDiv.appendChild(u),a){var y=this.getSortedFieldsAndDirections("field").indexOf(n[h].field),C=i.createElement("button",{id:i.element.id+n[h].field+"sortbutton"}),S=s.cloneNode();S.appendChild(C),u.appendChild(S),new Tw({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(C);var k=void 0;f(this.parent.sortSettings.columns[y])||(k=this.parent.localeObj.getConstant("Ascending"===this.parent.sortSettings.columns[y].direction?"AscendingText":"DescendingText")),C.innerHTML=y>-1?k:this.parent.localeObj.getConstant("NoneText"),C.onclick=function(j){e.sortButtonClickHandler(j.target)}}if(l&&o.indexOf(n[h].field)>-1){var O=i.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),L=i.createElement("span",{className:"e-icons e-res-icon e-filterset"});L.setAttribute("colType",n[h].type),O.appendChild(L),u.appendChild(O)}}return T.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},r.prototype.getSortedFieldsAndDirections=function(t){for(var e=[],i=0;i<this.parent.sortSettings.columns.length;i++)e.push(this.parent.sortSettings.columns[i][t]);return e},r.prototype.sortButtonClickHandler=function(t){if(t){var i=me(t,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(t));var n=t.textContent,s=n===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):n===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),o=s===this.parent.localeObj.getConstant("AscendingText")?"Ascending":s===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";t.innerHTML=s,this.setSortedCols(i,o)}},r.prototype.resetSortButtons=function(t){for(var e=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<e.length;i++)e[i]!==t&&(e[i].innerHTML="None")},r.prototype.setSortedCols=function(t,e){var n=this.getCurrentSortedFields().indexOf(t);this.parent.allowMultiSorting&&n>-1&&(this.sortedCols.splice(n,1),this.sortPredicate.splice(n,1)),this.isSortApplied=!0,"None"!==e&&(this.sortedCols.push(t),this.sortPredicate.push({field:t,direction:e}))},r.prototype.getCurrentSortedFields=function(){for(var t=[],e=0;e<this.sortedCols.length;e++)t.push(this.sortedCols[e]);return t},r.prototype.customFilterColumnClickHandler=function(t){if(this.action===ur.isFilter){var e=this.parent,i=t.target;if("FilterBar"!==e.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){if((n=i.getAttribute("data-e-mappingname"))||(n=i.parentElement.getAttribute("data-e-mappingname")),n){var s=e.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=me(i,"e-responsivecoldiv");if(o){var n=o.getAttribute("data-e-mappingname");("Menu"===(s=e.getColumnByField(n)).filter.type||!s.filter.type&&"Menu"===e.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(i)}}}},r.prototype.showResponsiveDialog=function(t){if(this.isCustomDialog&&this.action===ur.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=t,this.renderResponsiveDialog(t),this.parent.enableAdaptiveUI&&t&&(this.parent.filterModule.setFilterModel(t),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(t,void 0))),this.action===ur.isSort){var e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Wre,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},r.prototype.setTopToChildDialog=function(t){var e=t.querySelector(".e-dialog");if(e){var i=t.querySelector(".e-dlg-header-content").getBoundingClientRect().height;e.style.top=i+"px"}},r.prototype.renderCustomFilterDialog=function(t){var e=this.parent;if(this.action!==ur.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.parent.createElement("div",{id:e.element.id+"customfilter",className:this.parent.cssClass?"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(t,!0);var n={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Wre,n),!n.cancel&&(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},r.prototype.getDialogOptions=function(t,e,i){var n=new Hd({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(t),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});return n.isStringTemplate=!0,e?(n.header=this.renderResponsiveHeader(t,void 0,!0),n.cssClass="e-customfilter"):(n.header=this.renderResponsiveHeader(t),n.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===ur.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),n},r.prototype.renderResponsiveDialog=function(t){var e=this.parent;if(this.action!==ur.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.action===ur.isFilter?"filter":"sort",n=this.parent.createElement("div",{id:e.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(n),this.customResponsiveDlg=this.getDialogOptions(t,!1,i),this.customResponsiveDlg.appendTo(n)}},r.prototype.dialogCreated=function(){uoe(this.parent)},r.prototype.dialogOpen=function(){if(this.action===ur.isSort&&this.parent.allowMultiSorting)for(var t=0;t<this.parent.sortSettings.columns.length;t++)this.sortedCols.push(this.parent.sortSettings.columns[t].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[t].field,direction:this.parent.sortSettings.columns[t].direction})},r.prototype.beforeDialogClose=function(t){this.isDialogClose=t.element&&!t.element.querySelector(".e-xl-customfilterdiv")&&t.element.classList.contains("e-resfilterdiv"),this.action===ur.isFilter?t.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):t.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===ur.isSort&&this.closeCustomDialog(),this.parent.off(RV,this.keyHandler)},r.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var t=0;t<this.sortPredicate.length;t++)this.parent.sortColumn(this.sortPredicate[t].field,this.sortPredicate[t].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()},r.prototype.getHeaderTitle=function(t,e){var n,i=this.parent;return this.action===ur.isEdit?n=i.localeObj.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.action===ur.isAdd?n=i.localeObj.getConstant("AddFormTitle"):this.action===ur.isFilter?n=e?e.headerText||e.field:i.localeObj.getConstant("FilterButton"):this.action===ur.isSort&&(n=i.localeObj.getConstant("Sort")),n},r.prototype.getDialogName=function(t){var e;return t===ur.isAdd||t===ur.isEdit?e="dialogEdit_wrapper_title":t===ur.isFilter&&(e="responsive_filter_dialog_wrapper"),e},r.prototype.getButtonText=function(t){var e;return t===ur.isAdd||t===ur.isEdit?e="Save":(t===ur.isFilter||this.action===ur.isSort)&&(e="OKButton"),e},r.prototype.renderResponsiveHeader=function(t,e,i){var n=this,s=this.parent;s.on(RV,this.keyHandler,this);var o=s.element.id+this.getDialogName(this.action),a=s.createElement("div",{className:"e-res-custom-element"}),l=s.createElement("div",{className:"e-dlg-custom-header",id:o});l.innerHTML=this.getHeaderTitle(e,t),a.appendChild(l);var h=s.createElement("button");i||(this.saveBtn=new Tw({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(S){n.dialogHdrBtnClickHandler()});var u=this.action===ur.isSort,d=this.action===ur.isFilter;if(d||u){var m=u?"sort":"filter",y=s.createElement("button");if(this.filterClearBtn=new Tw({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+m+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+m+"-clear-btn"}),d){var C=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});y.appendChild(C)}else y.innerHTML=s.localeObj.getConstant("Clear");a.appendChild(y),this.filterClearBtn.appendTo(y),y.onclick=function(S){me(S.target,"e-customfilter")?(n.parent.filterModule.clearFiltering(),n.removeCustomDlgFilterEle()):d?n.filterClear():(n.resetSortButtons(),n.sortedCols=[],n.sortPredicate=[],n.isSortApplied=!0)},a.appendChild(y)}return i||a.appendChild(h),a},r.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},r.prototype.dialogHdrBtnClickHandler=function(){this.action===ur.isEdit||this.action===ur.isAdd?this.parent.endEdit():this.action===ur.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===ur.isSort&&this.sortColumn()},r.prototype.closeCustomDialog=function(){this.isCustomDlgRender?He(this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv")):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())},r.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var t=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&t&&(this.customResponsiveDlg.destroy(),He(t)),this.closeCustomFilter(),this.action===ur.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},r.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var t=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&t&&(this.customFilterDlg.destroy(),He(t))}this.isCustomDialog=!1,this.isDialogClose=!1},r.prototype.removeCustomDlgFilterEle=function(t){if(t)t.parentElement.classList.contains("e-filtersetdiv")?He(t.parentElement):He(t);else for(var e=this.customColumnDiv.children,i=0;i<e.length;i++)(t=e[i].querySelector(".e-filtersetdiv"))&&(He(t),i--)},r.prototype.keyHandler=function(t){13===t.keyCode&&(this.action===ur.isFilter&&t.target.classList.contains("e-searchinput")||this.action===ur.isEdit||this.action===ur.isAdd)&&this.dialogHdrBtnClickHandler()},r.prototype.editComplate=function(t){("save"===t.requestType||"cancel"===t.requestType)&&this.parent.off(RV,this.keyHandler)},r.prototype.removeEventListener=function(){this.customColumnDiv&&T.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),wo(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Ui,this.onActionCompleteFn)},r}(),jDe=function(){function r(){this.services={}}return r.prototype.register=function(t,e){f(this.services[t])&&(this.services[t]=e)},r.prototype.getService=function(t){if(f(this.services[t]))throw"The service "+t+" is not registered";return this.services[t]},r.prototype.registerAdaptiveService=function(t,e,i){e?(t.responsiveDialogRenderer=new jse(t.parent,t.serviceLocator),t.responsiveDialogRenderer.action=i):t.responsiveDialogRenderer&&(t.responsiveDialogRenderer.removeEventListener(),t.responsiveDialogRenderer=void 0)},r}(),UDe=function(){function r(){this.rendererMap={}}return r.prototype.addRenderer=function(t,e){var i=pl(Ks,t);f(this.rendererMap[i])&&(this.rendererMap[i]=e)},r.prototype.getRenderer=function(t){var e=pl(Ks,t);if(f(this.rendererMap[e]))throw"The renderer "+e+" is not found";return this.rendererMap[e]},r}(),AG=function(){function r(t){this.parent=t}return r.prototype.setWidthToColumns=function(){var n,t=0,e=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var s=this.parent.groupSettings.columns.length;t<s;t++)this.parent.enableColumnVirtualization&&-1===e.indexOf(t)?i=!1:this.setColumnWidth(new _h({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new _h({width:"30px"}),t),t++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new _h({width:"30px"}),t),t++);for(var o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[a],i&&this.parent.enableColumnVirtualization?void 0:a+t);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new _h({width:"30px"}),o.length),n=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(n)},r.prototype.setMinwidthBycalculation=function(t){var e=0,i=this.parent.getColumns().filter(function(u){return f(u.width)||"auto"===u.width});if(i.length){e=f(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-t:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-t;for(var n=0,s=0,o=i;s<o.length;s++){var a=o[s];n+=f(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l=0;l<i.length;l++){0===t&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==i.length-1&&this.setUndefinedColumnWidth(i);var h=this.parent.getColumnIndexByField(i[l].field)+this.parent.getIndentCount();0!==t&&e<n?this.setWidth(i[l].minWidth,h):0!==t&&e>n&&this.setWidth("",h,!0)}}},r.prototype.setUndefinedColumnWidth=function(t){for(var e=0;e<t.length;e++)e!==t.length-1&&(t[e].width=200,this.setWidth(200,this.parent.getColumnIndexByField(t[e].field)))},r.prototype.setColumnWidth=function(t,e,i){if(!(this.parent.getColumns().length<1)){var n=f(e)?this.parent.getNormalizedColumnIndex(t.uid):e,s=this.getWidth(t),o=this.getTableWidth(this.parent.getColumns());null!==s&&(this.setWidth(s,n),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(_M,{index:n,width:s,column:t,module:i}))}},r.prototype.setWidth=function(t,e,i){this.parent.groupSettings.columns.length>e&&BG(this.parent)&&(t=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var l,s=this.parent.getHeaderTable(),o=this.parent.getContentTable(),a=ot(t),h=this.parent.getFrozenColumns(),u=this.parent.isRowDragable();h=h&&u?h+1:h;var B,d=this.parent.getHeaderContent().querySelector("."+nr),m=this.parent.getContent().querySelector("."+Gn),y=this.parent.getFrozenLeftColumnsCount(),C=this.parent.getFrozenRightColumnsCount(),S=this.parent.getMovableColumnsCount(),I=0!==y||0!==C;if(h&&e>=h){if(!d||!d.querySelector(Ai))return;l=d.querySelector(Ai+":not(.e-masked-colgroup)").children[e-h]}else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&d.scrollLeft>0)l=(k=d.querySelector(Ai)).children[k.children.length-1-e];else if(I){var O=void 0;if(y&&!C)O=(e=u?e-1:e)<y?s:d;else if(!y&&C)O=e>=S?s:d;else if(y&&C){e=u?e-1:e;var L=this.parent.getFrozenRightHeader();O=e<y?s:e<y+S?d:L}if(!(l=this.getColumnLevelFrozenColgroup(e,y,S,O)))return}else l=s.querySelector(Ai).children[e];if(l&&!i?l.style.width=a:l&&i&&(l.style.width=""),h&&e>=h)B=this.parent.getContent().querySelector("."+Gn).querySelector(Ai+":not(.e-masked-colgroup)").children[e-h];else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&m.scrollLeft>0){var k;B=(k=this.parent.getContent().querySelector("."+Gn).querySelector(Ai)).children[k.children.length-1-e]}else if(I){if(O=void 0,y&&!C&&(O=e<y?o:m),!y&&C&&(O=e>=S?o:m),y&&C){var j=this.parent.getContent().querySelector(".e-frozen-right-content");O=e<y?o:e<y+S?m:j}B=this.getColumnLevelFrozenColgroup(e,y,S,O)}else B=o.querySelector(Ai).children[e];if(B&&!i?B.style.width=a:B&&i&&(B.style.width=""),!this.parent.enableColumnVirtualization){for(var G=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),ae=[],ve=0;ve<G.length;ve++)if(me(G[ve],"e-grid").id===this.parent.element.id)for(var xe=0;xe<G[ve].querySelector("colgroup").children.length;xe++)ae.push(G[ve].querySelector("colgroup").children[xe]);G.length&&ae.length&&(ae[e].style.width=a)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()},r.prototype.getColumnLevelFrozenColgroup=function(t,e,i,n){if(!n||!n.querySelector(Ai))return null;var s=this.parent.getColumns(),o=this.parent.isRowDragable(),a=this.parent.getFrozenMode(),h=[].slice.call(n.querySelector(Ai+":not(.e-masked-colgroup)").children);return"Right"===a&&o&&t===i+this.parent.getFrozenRightColumnsCount()?h[h.length-1]:o&&-1===t?h[0]:"Left"===s[t].freeze?h[o?t+1:t]:"Right"===s[t].freeze?h[t-(e+i)]:h[t-e]},r.prototype.refreshFrozenScrollbar=function(){var t={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",t),!t.cancel){var e=tC(),i=this.parent.element.querySelector(".e-frozenscrollbar"),n=this.parent.element.querySelector(".e-movablescrollbar"),s=this.parent.getContent().querySelector("."+nc),o=this.parent.getContent().querySelector("."+Gn),a=s.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(a+=e),i.style.width=a+"px",this.parent.getFrozenMode()===Jt){var h=this.parent.element.querySelector(".e-frozen-right-scrollbar"),u=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(u+=e),h.style.width=u+"px"}else{if(this.parent.enableColumnVirtualization){var d=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");d&&(l=d.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=e)}n.firstElementChild.style.width=l+"px"}},r.prototype.getSiblingsHeight=function(t){return this.getHeightFromDirection(t,"previous")+this.getHeightFromDirection(t,"next")},r.prototype.getHeightFromDirection=function(t,e){for(var i=t[e+"ElementSibling"],n=0,s=[$s,Qb,"e-groupdroparea","e-gridpager","e-toolbar"];i;)s.some(function(o){return i.classList.contains(o)})&&(n+=i.offsetHeight),i=i[e+"ElementSibling"];return n},r.prototype.isWidthUndefined=function(){var t=this.parent.getColumns().filter(function(e){return f(e.width)&&f(e.minWidth)}).length;return this.parent.getColumns().length===t},r.prototype.getWidth=function(t){if(f(t.width)&&this.parent.allowResizing&&f(t.minWidth)&&!this.isWidthUndefined()&&(t.width=200),this.parent.isFrozenGrid()&&f(t.width)&&(t.getFreezeTableName()===cs||t.getFreezeTableName()===dr)&&(t.width=200),!t.width)return null;var e=parseInt(t.width.toString(),10);return t.minWidth&&e<parseInt(t.minWidth.toString(),10)?t.minWidth:t.maxWidth&&e>parseInt(t.maxWidth.toString(),10)?t.maxWidth:t.width},r.prototype.getTableWidth=function(t){for(var e=0,i=0,n=t;i<n.length;i++){var s=n[i],o=this.getWidth(s);"auto"===s.width&&(o=0),!1!==s.visible&&null!==o&&(e+=parseInt(o.toString(),10))}return e},r.prototype.calcMovableOrFreezeColWidth=function(t){var e=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenRightColumnsCount();return"movable"===t?(s&&e.splice(i+n,e.length),i&&e.splice(0,i)):"freeze-left"===t?e.splice(i,e.length):"freeze-right"===t&&e.splice(0,i+n),ot(this.getTableWidth(e))},r.prototype.setWidthToFrozenRightTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-right");t=this.isAutoResize()?"100%":t;var e=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+cr+":not(.e-masked-table)"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+cr+":not(.e-masked-table)");e.style.width=t,i.style.width=t},r.prototype.setWidthToFrozenLeftTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-left");t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t},r.prototype.setWidthToMovableTable=function(){var t="",e=this.parent.getColumns().filter(function(o){return f(o.width)}).length>=1,i=this.parent.getColumns().filter(function(o){return"auto"===o.width}).length>=1,n=this.parent.getHeaderContent().querySelector("."+nr),s=this.parent.getContent().querySelector("."+Gn);"number"!=typeof this.parent.width||e||i?!e&&!i&&(t=this.calcMovableOrFreezeColWidth("movable")):t=ot(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),t=this.isAutoResize()?"100%":t,n.firstElementChild&&(n.firstElementChild.classList.contains("e-masked-table")?n.childNodes[1].style.width=t:n.firstElementChild.style.width=t),s.firstElementChild.classList.contains("e-masked-table")?s.childNodes[1].style.width=t:s.firstElementChild.style.width=t},r.prototype.setWidthToFrozenEditTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=t},r.prototype.setWidthToMovableEditTable=function(){var t=this.calcMovableOrFreezeColWidth("movable");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=t},r.prototype.setWidthToTable=function(){var t=ot(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new _h({width:"30px"})),t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t);var e=this.parent.element.querySelector(".e-table.e-inline-edit");e&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):e&&(e.style.width=t)},r.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},r}(),KM=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),WDe=function(){function r(t){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=t,this.rowModelGen=new sp(this.parent),this.addEventListener()}return r.prototype.focusCheck=function(t){var e=t.target;this.focusByClick=!0,this.skipFocus=e.classList.contains("e-grid")},r.prototype.onFocus=function(t){if(!(this.parent.isDestroyed||Q.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&t&&t.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[Pf].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new Of({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(!t||t.target!==this.parent.element)&&(this.focus(t),this.skipFocus=!1)}},r.prototype.passiveFocus=function(t){this.parent.isDestroyed||t.target&&t.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,N([this.currentInfo.element],["e-focused","e-focus"]))},r.prototype.onBlur=function(t){(this.parent.isEdit||t&&(!t.relatedTarget||U(t.relatedTarget,".e-grid"))&&(!this.parent.element.classList.contains("e-childgrid")||this.parent.element.matches(":focus-within")))&&(!f(t.relatedTarget)||0!==parseInt(t.target.getAttribute("data-colindex"),10)||0!==parseInt(t.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex())},r.prototype.setFirstFocusableTabIndex=function(){var t=this.parent;if(t.element.tabIndex=-1,t.allowGrouping&&t.groupSettings.showDropArea){var e=t.groupModule,i=e.getFocusableGroupedItems();i.length>0?(e.element.tabIndex=-1,i[0].tabIndex=0):e.element.tabIndex=0}else if(t.toolbar||t.toolbarTemplate){var n=t.toolbarModule.element,s=n.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");s.length>0?(n.tabIndex=-1,s[0].querySelector(".e-btn,.e-input").tabIndex=0):n.tabIndex=0}else if(t.getColumns().length&&(t.getHeaderContent().querySelector(".e-headercell").tabIndex=0,!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Jt?this.setActive(!1):this.setActive(!1,!0),!f(this.active))){var a=[0,0];0===this.active.matrix.matrix[a[0]][a[1]]&&(a=Hg(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}},r.prototype.setLastContentCellTabIndex=function(){var t=this.parent.getContentTable();t.rows[t.rows.length-1].lastElementChild.tabIndex=0},r.prototype.onClick=function(t,e){if(!me(t.target,"e-filterbarcell")||!me(t.target,"e-multiselect")&&!t.target.classList.contains("e-input-group-icon")){var i=!f(U(t.target,"."+zs)),n=!f(U(t.target,"."+$s));i=i&&n?!i:i;var s=!f(U(t.target,"."+nc))||!f(U(t.target,"."+rp)),o=!1;if(this.parent.getFrozenMode()===Jt&&(o=!f(U(t.target,".e-frozen-right-content"))||!f(U(t.target,".e-frozen-right-header")),s=s&&!o),!(!i&&f(U(t.target,"."+$s))||t.target.classList.contains(gs))&&f(U(t.target,".e-unboundcell"))){if(this.setActive(i,s,o),!i&&f(U(t.target,"."+$s)))return void this.clearOutline();var a={cancel:!1,byKey:!1,byClick:!f(t.target),clickArgs:t};if(this.parent.notify(Qx,a),!a.cancel&&!U(t.target,".e-inline-edit")&&(this.setActive(i,s,o),this.getContent())){if(!1===this.getContent().onClick(t,e))return;this.parent.isFrozenGrid()&&n&&t.target===this.parent.getHeaderContent().firstChild&&-1===this.active.matrix.current[0]&&this.active.matrix.current[1]===this.active.matrix.columns&&(this.active.matrix.current=[0,0]),this.focus()}}}},r.prototype.onKeyPress=function(t){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(this.parent.pagerModule.pagerObj.element,[]);if(this.parent.childGrid&&this.allowToPaging(t)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===t.action&&i.length&&i[0]===t.target)return this.setActive(!0),0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Hg(this.active.matrix.matrix,n,!1)),this.active.matrix.current=n,t.preventDefault(),void this.focus(t);if("tab"!==t.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!i.length||i[i.length-1]!==t.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==t.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(t);var s=me(this.parent.element,"e-detailcell");z([this.parent.element],["e-focus"]),z([s],["e-focused"]),s.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===t.keyCode||t.shiftKey&&9===t.keyCode))return t.preventDefault(),void this.getFocusedElement().focus();if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===t.keyCode)return t.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(!this.skipOn(t)){if(t.target&&me(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()){var l=[].slice.call(this.parent.getContentTable().rows);t.target===l[l.length-1].lastElementChild&&(this.setActive(!0),this.setLastContentCellActive())}if("shiftTab"===t.action&&t.target&&(t.target===this.parent.element||me(t.target,"e-toolbar")||me(t.target,"e-groupdroparea"))){if(t.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t));if(me(t.target,"e-groupdroparea"))return void(this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus()));if(me(t.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var d=(u=this.parent.groupModule).getFocusableGroupedItems();t.preventDefault(),d.length>0?d[d.length-1].focus():u.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}}var m=!1;if("tab"===t.action&&t.target&&(t.target===this.parent.element||me(t.target,"e-toolbar")||me(t.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(t.target===this.parent.element||t.target.classList.contains("e-groupdroparea"))){var u;if((d=(u=this.parent.groupModule).getFocusableGroupedItems()).length>0)return t.preventDefault(),void d[0].focus();if(!t.target.classList.contains("e-groupdroparea"))return t.preventDefault(),void u.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(t.target===this.parent.element||me(t.target,"e-groupdroparea")||t.target.classList.contains("e-toolbar"))){var y=this.parent.toolbarModule.element,C=y.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(C.length>0)return t.preventDefault(),void C[0].querySelector(".e-btn,.e-input").focus();if(!t.target.classList.contains("e-toolbar"))return t.preventDefault(),void y.focus()}(t.target===this.parent.element||me(t.target,"e-toolbar")||me(t.target,"e-groupdroparea"))&&(m=!0)}m&&(!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Jt?this.setActive(!(!this.parent.allowGrouping||this.parent.groupSettings.columns.length!==this.parent.columns.length)):this.setActive(!1,!0),this.active.matrix.current=[0,-1]),this.activeKey=t.action;var S={cancel:!1,byKey:!0,byClick:!1,keyArgs:t};if(this.parent.notify(Qx,S),!S.cancel){var I=this.getContent().matrix.current;this.currentInfo.outline=!0;var k=this.getContent().jump(t.action,I);this.swap=k,k.swap&&(this.setActive(!k.toHeader,k.toFrozen,k.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(I,k,this.active,t.action),this.prevIndexes={}),this.setActiveByKey(t.action,this.getContent());var O=!this.content.lastIdxCell&&this.getContent().onKeyPress(t);if(t.target&&me(t.target,"e-gridheader"))if(this.parent.isFrozenGrid()){if("shiftTab"===t.action&&I.toString()===this.active.matrix.current.toString()&&!k.swap)return void this.focusOutFromHeader(t)}else{if("tab"===t.action&&I.toString()===this.active.matrix.current.toString()){var n,L=Hg(this.active.matrix.matrix,this.active.matrix.current,!0);0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Hg(this.active.matrix.matrix,n,!1)),this.active.matrix.current.toString()===n.toString()?(O=!0,this.setActive(!0),0===this.active.matrix.matrix[(B=[0,0])[0]][B[1]]&&(B=Hg(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=B):this.active.matrix.current.toString()!==L.toString()&&(this.active.matrix.current=L)}if("shiftTab"===t.action&&I.toString()===this.active.matrix.current.toString()){var j=Hg(this.active.matrix.matrix,this.active.matrix.current,!1);if(j.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(t);this.active.matrix.current.toString()!==j.toString()&&!O&&(O=!0,this.active.matrix.current=j)}}if(t.target&&me(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()&&"shiftTab"===t.action&&I.toString()===this.active.matrix.current.toString()){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(t);var B;0===this.active.matrix.matrix[(B=[0,0])[0]][B[1]]&&(B=Hg(this.active.matrix.matrix,[0,0],!0)),!O&&B.toString()===this.active.matrix.current.toString()&&(O=!0,this.setActive(!1),this.setLastContentCellActive())}if(!1===O){if(this.clearIndicator(),"shiftTab"===t.action&&I.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(t)&&I.toString()!==[0,0].toString()){if(t.preventDefault(),40===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t))}t.preventDefault(),this.focus(t)}}},r.prototype.setLastContentCellActive=function(){var t=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];0===this.active.matrix.matrix[t[0]][t[1]]&&(t=Hg(this.active.matrix.matrix,t,!1)),this.active.matrix.current=t},r.prototype.focusOutFromChildGrid=function(t){var e=me(this.parent.element,"e-table"),i=me(e,"e-grid").ej2_instances[0],n=me(this.parent.element,"e-detailcell"),s=me(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=[].slice.call(i.getContentTable().rows),a=o.map(function(m){return m.getAttribute("data-uid")}).indexOf(s);if(!("tab"===t.action&&a>=o.length-1)){var l;if(z([this.parent.element],["e-focus"]),z([n],["e-focused"]),n.tabIndex=-1,t.preventDefault(),i.focusModule.removeFocus(),"shiftTab"===t.action){for(var u=o[a-1].cells,d=u.length-1;d>=0;d--)if(!(l=u[d]).classList.contains("e-hide")){i.focusModule.active.matrix.current=[a-1,d];break}}else l=o[a+1].cells[0],i.focusModule.active.matrix.current=[a+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,N([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},r.prototype.focusOutFromHeader=function(t){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var e=this.parent.toolbarModule.element,i=e.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");return t.preventDefault(),void(i.length>0?i[i.length-1].querySelector(".e-btn,.e-input").focus():e.focus())}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var n=this.parent.groupModule,s=n.getFocusableGroupedItems();return t.preventDefault(),void(s.length>0?s[s.length-1].focus():n.element.focus())}this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus())},r.prototype.allowToPaging=function(t){return!("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40!==t.keyCode)},r.prototype.skipOn=function(t){var e=t.target;if(!e)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(t.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(me(t.target,"e-groupheadercell")&&!(t.target===i[0]&&"shiftTab"===t.action||t.target===i[i.length-1]&&"tab"===t.action))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var s=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(me(t.target,"e-toolbar-item")&&!(s.length>0&&(me(t.target,"e-toolbar-item")===s[0]&&"shiftTab"===t.action||me(t.target,"e-toolbar-item")===s[s.length-1]&&"tab"===t.action)))return!0}var o=U(e,"th")&&!U(e,"th").tabIndex;!t.target.classList.contains("e-filterbaroperator")||13!==t.keyCode&&27!==t.keyCode||U(t.target,".e-filterbarcell").querySelector("input").focus(),o&&null!==U(document.activeElement,".e-filterbarcell")&&this.removeFocus();var l=null!==U(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&l){var h=this.active.matrix,u=h.current;l=h.matrix[u[0]].lastIndexOf(1)!==u[1]}return"delete"===t.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(t.action)>-1)||l&&this.parent.enableHeaderFocus||l&&"tab"!==t.action&&"shiftTab"!==t.action||null!==U(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(t.action)>-1||null===U(e,"."+zs)&&null===U(e,"."+$s)&&!(t.target===this.parent.element||me(t.target,"e-toolbar")||me(t.target,"e-groupdroparea"))||"space"===t.action&&!e.classList.contains(oS)&&null===U(e,"."+oS)&&null===U(e,".e-headerchkcelldiv")||null!==U(e,".e-filter-popup")},r.prototype.focusVirtualElement=function(t){var e=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(kv,i);var n=this.actions.some(function(o){return o===e.activeKey}),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;i.isAdd||Object.keys(i.virtualData).length||n||i.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,n&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",t)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},r.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},r.prototype.getContent=function(){return this.active||this.content},r.prototype.setActive=function(t,e,i){this.active=t?e?this.fContent:i?this.frContent:this.content:e?this.fHeader:i?this.frHeader:this.header},r.prototype.setFocusedElement=function(t,e){var i=this;this.currentInfo.elementToFocus=t,setTimeout(function(){f(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(e):i.currentInfo.elementToFocus.focus())},0)},r.prototype.focus=function(t){this.parent.notify("virtaul-cell-focus",t),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)},r.prototype.removeFocus=function(t){!this.currentInfo.element||(z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},r.prototype.addOutline=function(){var t=this.getContent().getFocusInfo();t.element&&(N([t.element],["e-focused"]),N([t.elementToFocus],["e-focus"]))},r.prototype.focusHeader=function(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.focusContent=function(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.resetFocus=function(){var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.focus()},r.prototype.addFocus=function(t,e){if(this.currentInfo=t,this.currentInfo.outline=t.outline&&!f(e),this.isInfiniteScroll&&(this.currentInfo.outline=!0),t.element){var i=t.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&N([t.element],["e-focused"]),N([t.elementToFocus],["e-focus"]),t.element.tabIndex=0,i||this.setFocusedElement(t.elementToFocus,e),this.parent.notify(vV,{element:t.elementToFocus,parent:t.element,indexes:this.getContent().matrix.current,byKey:!f(e),byClick:f(e),keyArgs:e,isJump:this.swap.swap,container:this.getContent().getInfo(e),outline:!f(e),swapInfo:this.swap});var n=this.getContent().matrix.current,o=n[1];this.prevIndexes={rowIndex:n[0],cellIndex:o},this.focusedColumnUid=this.parent.getColumnByIndex(o).uid,this.focusByClick=!1}}},r.prototype.refreshMatrix=function(t){var e=this;return function(i){t&&i.args&&i.args.isFrozen&&!e.fContent?e.fContent=new GDe(e.parent):t&&!e.frContent&&i.args&&i.args.renderFrozenRightContent?e.frContent=new $De(e.parent):t&&!e.content&&(e.content=new HV(e.parent)),!t&&i.args&&i.args.isFrozen&&!e.fHeader?e.fHeader=new KDe(e.parent):!t&&i.args&&i.args.renderFrozenRightContent&&!e.frHeader?e.frHeader=new YDe(e.parent):!t&&!e.header&&(e.header=new _G(e.parent));var n=t?i.args&&i.args.isFrozen?e.fContent:i.args&&i.args.renderFrozenRightContent?e.frContent:e.content:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header,s=t?i.rows.slice(e.parent.frozenRows):i.rows,o=t?i.rows.slice(0,e.parent.frozenRows):i.rows;e.parent.isCollapseStateEnabled()&&t&&(s=s.filter(function(L){return!1!==L.visible}));var C,a=!f(e.parent.rowTemplate),l=n.matrix.generate(o,n.selector,a);if("batchAdd"===i.name&&e.parent.isFrozenGrid()){var u=e.parent.getMovableRowsObject().map(function(L){return L.clone()}),d=s.map(function(L){return L.clone()});if(e.fContent.matrix.generate(d,e.fContent.selector,a),e.content.matrix.generate(u,e.content.selector,a),e.parent.getFrozenMode()===Jt){var y=e.parent.getFrozenRightRowsObject().map(function(L){return L.clone()});e.frContent.matrix.generate(y,e.frContent.selector,a)}}else n.matrix.generate(s,n.selector,a);if(e.parent.isFrozenGrid()&&i.args&&"sorting"===i.args.requestType||n.generateRows(o,{matrix:l,handlerInstance:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header}),!Q.isDevice&&i&&i.args&&(!e.focusByClick&&"paging"===i.args.requestType&&!e.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(e.skipFocus=!1,e.parent.element.focus()),"grouping"===i.args.requestType&&(e.skipFocus=!0)),i&&i.args&&"virtualscroll"===i.args.requestType)if(e.currentInfo.uid){if(i.rows.some(function(L,B){return C=B,L.uid===e.currentInfo.uid})&&(e.content.matrix.current[0]=C,e.content.matrix.current[1]=e.parent.getColumnIndexByUid(e.focusedColumnUid)||0,I=e.getContent().getFocusInfo().elementToFocus)){var k=I.getBoundingClientRect(),O=e.parent.element.getBoundingClientRect();k.top>=0&&k.left>=0&&k.right<=Math.min(O.right,window.innerWidth||document.documentElement.clientWidth)&&k.bottom<=Math.min(O.bottom,window.innerHeight||document.documentElement.clientHeight)&&(e.isVirtualScroll=!0,e.focus())}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var I;(I=e.parent.element.querySelector("#"+i.args.focusElement.id))&&I.focus()}i&&i.args&&"infiniteScroll"===i.args.requestType&&(e.isInfiniteScroll=!0)}},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(T.add(this.parent.element,"mousedown",this.focusCheck,this),T.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(e){return t.passiveFocus(e)},!0),T.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:_s,handler:this.onKeyPress},{event:ol,handler:this.onClick},{event:is,handler:this.refMatrix},{event:FM,handler:this.refMatrix},{event:sS,handler:this.refMatrix},{event:Mo,handler:this.refreshMatrix()},{event:Rse,handler:this.restoreFocus},{event:rS,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:tS,handler:this.refMatrix},{event:Ng,handler:this.refMatrix},{event:fV,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:np,handler:this.refMatrix},{event:vV,handler:this.internalCellFocus}],wo(this.parent,this.evtHandlers,!0,this))},r.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(T.remove(this.parent.element,"mousedown",this.focusCheck),T.remove(this.parent.element,"focus",this.onFocus),T.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),wo(this.parent,this.evtHandlers,!1))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.restoreFocus=function(){var t=this.parent.groupModule;this.parent.allowGrouping&&t&&t.groupSortFocus?t.groupSortFocus=!1:this.addFocus(this.getContent().getFocusInfo())},r.prototype.restoreFocusWithAction=function(t){if(!this.parent.enableInfiniteScrolling){var e=this.getContent().matrix,i=e.current;switch(t.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||f(e.matrix[i[0]])?"grouping"===t.requestType?i[1]+1:i[1]-1:e.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i;var n=this.parent.groupModule;if(this.parent.allowGrouping&&n&&n.groupCancelFocus){var s=n.getFocusableGroupedItems();return s.length?s[0].parentElement.getAttribute("ej-mappingname")===t.columnName?s[3].focus():s[0].focus():n.element.focus(),void(n.groupCancelFocus=!1)}this.addFocus(this.getContent().getFocusInfo())}},r.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},r.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},r.prototype.getPrevIndexes=function(){var t=this.forget;return this.forget=!1,t||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},r.prototype.forgetPrevious=function(){this.forget=!0},r.prototype.setActiveByKey=function(t,e){var i=this;if(this.parent.isFrozenGrid()||0!==this.parent.frozenRows){var n,s={home:function(){return{toHeader:!n.isContent,toFrozen:!0}},end:function(){return{toHeader:!n.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:i.parent.isFrozenGrid()}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(t in s){n=e.getInfo();var o=s[t]();this.setActive(!o.toHeader,o.toFrozen),this.getContent().matrix.current=e.matrix.current}}},r.prototype.internalCellFocus=function(t){if(t.byKey&&t.container.isContent&&"enter"===t.keyArgs.action&&(t.parent.classList.contains("e-detailcell")||t.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var e=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(e),this.currentInfo.skipAction=!0}},r}(),qDe=function(){function r(){this.matrix=[],this.current=[]}return r.prototype.set=function(t,e,i){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.columns)),this.matrix[t]=this.matrix[t]||[],this.matrix[t][e]=i?1:0},r.prototype.get=function(t,e,i,n,s){var o=e;if(t+i[0]<0)return[t,e];t=Math.max(0,Math.min(t+i[0],this.rows));var a=!0;if(f(this.matrix[t]))return null;if(e=Math.max(0,Math.min(e+i[1],this.matrix[t].length-1)),o+i[1]>this.matrix[t].length-1&&s(t,e,n))return[t,o];var l=this.first(this.matrix[t],e,i,!0,n),h=ie(t+"."+(e=null===l?o:l),this.matrix);if(t===this.rows&&("downArrow"===n||"enter"===n)&&(i[0]=-1),null===l){for(var u=0;u<this.rows;u++)if(this.matrix[u].some(function(d){return 1===d})){a=!1;break}if(a)return[t=this.current[0],e]}return this.inValid(h)||!s(t,e,n)?this.get(t,o,i,n,s):[t,e]},r.prototype.first=function(t,e,i,n,s){return(e<0||e===t.length)&&this.inValid(t[e])&&"upArrow"!==s&&"downArrow"!==s||!t.some(function(o){return 1===o})?null:this.inValid(t[e])?this.first(t,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(s)?n?0:++e:e+i[1],i,!1,s):e},r.prototype.select=function(t,e){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.matrix[t].length-1)),this.current=[t,e]},r.prototype.generate=function(t,e,i){this.rows=t.length-1,this.matrix=[];for(var n=0;n<t.length;n++){var s=t[n].cells.filter(function(l){return!0!==l.isSpanned});this.columns=Math.max(s.length-1,0|this.columns);for(var o=0,a=0;a<s.length;a++)s[a].column&&s[a].column.columns?o=this.columnsCount(s[a].column.columns,o):o++,this.set(n,a,!1!==t[n].visible&&e(t[n],s[a],i));this.columns=Math.max(o-1,0|this.columns)}return this.matrix},r.prototype.columnsCount=function(t,e){for(var i=t,n=e,s=0;s<i.length;s++)i[s].columns?n=this.columnsCount(i[s].columns,n):n++;return n},r.prototype.inValid=function(t){return 0===t||void 0===t},r}(),HV=function(){function r(t){var e=this;this.matrix=new qDe,this.lastIdxCell=!1,this.parent=t,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){return{home:[e.matrix.current[0],-1,0,1],end:[e.matrix.current[0],e.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[e.matrix.rows,e.matrix.columns+1,0,-1]}[i]||null}}return r.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},r.prototype.onKeyPress=function(t){var i=this.getCurrentFromAction(t.action,this.keyActions[t.action],t.action in this.keyActions,t);if(i){if((["tab","shiftTab"].indexOf(t.action)>-1&&this.matrix.current||[]).toString()===i.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===t.keyCode||40===t.keyCode)){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&i.toString()===[0,1].toString())return!1;i=this.editNextRow(i[0],i[1],t.action)}this.matrix.select(i[0],i[1])}},r.prototype.editNextRow=function(t,e,i){var n=this.parent,s=n.editSettings.allowNextRowEdit&&(n.isEdit||n.isLastCellPrimaryKey),o=n.getColumnIndexByField(n.getVisibleColumns()[0].field),a=this.getTable().rows[t].cells[e];return"tab"===i&&s&&(t++,e=o+(this.getTable().rows[t].getElementsByClassName("e-indentcell").length+this.getTable().rows[t].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&s&&(t--,e=n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length-1].field)),a.classList.contains(on)||a.classList.contains("e-headercell")||a.classList.contains("e-groupcaption")||a.classList.contains("e-filterbarcell")?[t,e]:this.editNextRow(t,e,i)},r.prototype.getCurrentFromAction=function(t,e,i,n){if(void 0===e&&(e=[0,0]),!i&&!this.indexesByKey(t)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(n))return this.matrix.current;var s=this.indexesByKey(t)||this.matrix.current.concat(e),o=s[0],a=s[1],l=s[2],h=s[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===t)for(var u=o;u<this.matrix.matrix.length;u++){var d=this.getTable().rows[u+1];if(d&&d.cells[a]&&d.cells[a].classList.contains("e-rowcell"))return[u+1,a];if(u===this.matrix.matrix.length-1)return[o,a]}if("ctrlEnd"===t){var m=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];0===this.matrix.matrix[m[0]][m[1]]&&(m=Hg(this.matrix.matrix,m,!1)),o=m[0],a=m[1]+1}return this.matrix.get(o,a,[l,h],t,this.validator())},r.prototype.onClick=function(t,e){var i=t.target;if(this.target=i,i=(i=i.classList.contains(on)?i:U(i,"td"))||U(t.target,"td.e-detailrowcollapse")||U(t.target,"td.e-detailrowexpand"),!(i=(i=U(t.target,"td.e-detailcell")&&f(U(U(t.target,".e-grid"),"td.e-detailcell"))?null:i)&&U(i,"table").classList.contains(cr)?i:null))return!1;var n=[i.parentElement.rowIndex,i.cellIndex],s=n[0],o=n[1],a=this.matrix.current,l=a[0],h=a[1],u=ie(s+"."+o,this.matrix.matrix);if(this.matrix.inValid(u)||!e&&l===s&&h===o||!me(t.target,on)&&!me(t.target,"e-groupcaption")&&!me(t.target,"e-recordpluscollapse")&&!me(t.target,"e-recordplusexpand")&&!me(t.target,"e-detailrowcollapse")&&!me(t.target,"e-detailrowexpand")&&!me(t.target,"e-templatecell"))return!1;this.matrix.select(s,o)},r.prototype.getFocusInfo=function(){var t={},e=this.matrix.current,i=e[0],n=void 0===i?0:i,s=e[1],o=void 0===s?0:s;return this.matrix.current=[n,o],t.element=f(this.getTable().rows[n])?null:this.getTable().rows[n].cells[o],t.element&&(t.elementToFocus=t.element.classList.contains("e-unboundcell")||t.element.classList.contains("e-detailcell")?t.element:this.getFocusable(t.element),t.elementToFocus=t.element.classList.contains("e-detailcell")&&t.element.querySelector(".e-childgrid")?t.element.querySelector(".e-childgrid"):t.elementToFocus,t.outline=!0,t.uid=t.element.parentElement.getAttribute("data-uid")),t},r.prototype.getFocusable=function(t){var e='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!f(U(t,".e-templatecell"));this.parent.isEdit&&(e='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var n=[].slice.call(t.querySelectorAll(e));return n.length?i&&n.length>1?this.target?this.target:t:n[0]:t},r.prototype.selector=function(t,e,i){var n=[Nt.Expand,Nt.GroupCaption,Nt.CaptionSummary,Nt.GroupSummary];return(t.isDataRow&&e.visible&&(e.isDataCell||e.isTemplate)||t.isDataRow&&e.cellType===Nt.DetailExpand&&f(e.visible)||!t.isDataRow&&n.indexOf(e.cellType)>-1&&!!(e.cellType!==Nt.GroupSummary&&e.cellType!==Nt.CaptionSummary||e.isDataCell&&e.visible)||e.column&&e.visible&&"checkbox"===e.column.type||e.cellType===Nt.CommandColumn||t.isDataRow&&i)&&!("delete"===t.edit&&t.isDirty)},r.prototype.nextRowFocusValidate=function(t){for(var e=t,i=t,n=this.matrix.rows;i<=n;i++){if(-1!==this.matrix.matrix[t].indexOf(1))return t;t+=1}return this.lastIdxCell=!0,e},r.prototype.previousRowFocusValidate=function(t){for(var e=t,i=t;i>=0;i--){if(-1!==this.matrix.matrix[t].indexOf(1))return t;if((t-=1)<0)return this.lastIdxCell=!0,e}return e},r.prototype.jump=function(t,e){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===t||"shiftTab"===t)&&0===e[1]||e[0]<this.matrix.matrix.length-1&&"tab"===t&&"Left"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1),n=("rightArrow"===t||"tab"===t)&&e[1]===this.matrix.columns||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].indexOf(1),s=this.parent.getFrozenMode()===Jt&&n;"Right"===this.parent.getFrozenMode()&&(i=n),this.lastIdxCell=!1;var o=0!==this.parent.frozenRows&&"shiftEnter"===t,a=("upArrow"===t||o)&&0===e[0]||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1);!this.parent.isFrozenGrid()&&"tab"===t&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==e[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),!this.parent.isFrozenGrid()&&"shiftTab"===t&&0!==e[0]&&this.matrix.matrix[e[0]].indexOf(1)===e[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[e[0]].length);var l=!1,h=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&h.classList.contains(Sn)&&(l=parseInt(h.getAttribute(ki),10)>0),"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:!l&&(("upArrow"===t||o)&&0===e[0]||i||s),toHeader:a,toFrozen:i,toFrozenRight:s}},r.prototype.getNextCurrent=function(t,e,i,n){void 0===t&&(t=[]);var s=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jt?(("leftArrow"===n||"shiftTab"===n)&&(s[0]=t[0],s[1]=this.matrix.matrix[s[0]].length),this.parent.getFrozenMode()===Jt&&("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),"Right"===this.parent.getFrozenMode()&&"tab"===n&&(s[0]=t[0]+1,s[1]=-1)):("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),("downArrow"===n||"enter"===n)&&(s[0]=-1,s[1]=t[1]),"shiftTab"===n&&"Left"===this.parent.getFrozenMode()&&(s[0]=t[0]-1,s[1]=this.matrix.matrix[s[0]].length),s},r.prototype.generateRows=function(t,e){var i,n=e.matrix,s=e.handlerInstance,o=s.matrix.matrix.length,a=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?o+1:o;s.matrix.matrix=s.matrix.matrix.slice(0,a),s.matrix.rows=a,(i=s.matrix.matrix).push.apply(i,n),s.matrix.rows+=n.length},r.prototype.getInfo=function(t){var e=this.getFocusInfo(),i=this.matrix.current,n=i[0],s=i[1],o=e.element.classList.contains(on),a=o||t&&"enter"!==t.action&&(e.element.classList.contains("e-detailrowcollapse")||e.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(e.element.parentElement.getAttribute(ki),10),n),Math.min(parseInt(e.element.getAttribute(Ys),10),s)],h=l[0],u=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&o&&(h=this.parent.getDataRows().indexOf(e.element.parentElement)),{isContent:!0,isDataCell:o,indexes:[h,u],isSelectable:a}},r.prototype.validator=function(){var t=this.getTable();return function(e,i,n){if(!f(t.rows[e])){var s=void 0;i=t.querySelector(".e-emptyrow")?0:i;var o=0!==(s=t.rows[e].cells[0].classList.contains("e-editcell")?t.rows[e].cells[0].querySelectorAll("td")[i]:t.rows[e].cells[i]).getBoundingClientRect().width;if("enter"===n||"shiftEnter"===n)return o&&s.classList.contains(on);if(("shiftUp"===n||"shiftDown"===n)&&s.classList.contains(on))return o;if("shiftUp"!==n&&"shiftDown"!==n)return o}return!1}},r.prototype.shouldFocusChange=function(t){var e=this.matrix.current,i=e[0],n=void 0===i?-1:i,s=e[1],o=void 0===s?-1:s;if(n<0||o<0)return!0;var a=ie(n+".cells."+o,this.getTable().rows);return!a||"enter"!==t.action&&"shiftEnter"!==t.action||a.classList.contains(on)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell")},r.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},r}(),_G=function(r){function t(e){return r.call(this,e)||this}return KM(t,r),t.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},t.prototype.onClick=function(e){var i=e.target;if(this.target=i,!(i=i.classList.contains("e-headercell")?i:U(i,"th"))&&0!==this.parent.frozenRows&&(i=e.target.classList.contains(on)?e.target:U(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(i){var n=[i.parentElement.rowIndex,i.cellIndex],a=ie(n[0]+"."+n[1],this.matrix.matrix);if(this.matrix.inValid(a))return!1;this.matrix.select(i.parentElement.rowIndex,i.cellIndex)}},t.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,n=i[0],s=void 0===n?0:n,o=i[1],a=void 0===o?0:o;return e.element=this.getTable().rows[s].cells[a],f(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},t.prototype.selector=function(e,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!f(i.column.template))||"checkbox"===i.column.type||i.cellType===Nt.StackedHeader},t.prototype.jump=function(e,i){var n=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||"Left"===this.parent.getFrozenMode()&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||i[0]>0&&"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=this.parent.getFrozenMode()===Jt&&s;"Right"===this.parent.getFrozenMode()&&(n=s);var l,h,a=0!==this.parent.frozenRows&&"enter"===e,u=n&&!("Left"===this.parent.getFrozenMode()&&"tab"===e&&i[0]===this.matrix.matrix.length-1)||o,d=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,m=d&&!f(d[i[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(h=this.matrix.matrix.length-1===i[0],(l=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&(this.matrix.current[0]=h?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&h&&l&&(n=!0,u=!1)),"tab"===e&&"Left"===this.parent.getFrozenMode()&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:("downArrow"===e||a)&&i[0]===this.matrix.matrix.length-1||m&&(n||o)||"tab"===e&&h&&l,toHeader:u,toFrozen:n,toFrozenRight:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jt?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),this.parent.getFrozenMode()===Jt&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"Left"===this.parent.getFrozenMode()&&"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),"Right"===this.parent.getFrozenMode()&&"tab"===s&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.generateRows=function(e){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var n=e[0].cells,s=0,o="FixedHeaderFocus"===this.getHeaderType()&&"Right"!==this.parent.getFrozenMode()?cs:"FixedHeaderFocus"===this.getHeaderType()||"FixedRightHeaderFocus"===this.getHeaderType()?dr:"movable",a=0;a<n.length;a++)n[a].column&&n[a].column.columns?s=this.checkFilterColumn(n[a].column.columns,i,s,o):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&n[a].column.freezeTable===o)&&(this.matrix.set(i,s,n[a].visible&&!1!==n[a].column.allowFiltering),s++)}},t.prototype.checkFilterColumn=function(e,i,n,s){for(var o=e,a=n,l=0;l<o.length;l++)o[l].columns?a=this.checkFilterColumn(o[l].columns,i,a,s):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&o[l].freezeTable===s)&&(this.matrix.set(i,a,o[l].visible&&!1!==o[l].allowFiltering),a++);return a},t.prototype.getInfo=function(e){return de(r.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(e){var i=this.matrix.current,n=i[0],s=i[1];if(n<0||s<0)return!0;var o=ie(n+".cells."+s,this.getTable().rows);return!o||"enter"!==e.action&&"altDownArrow"!==e.action||!o.classList.contains("e-headercell")},t.prototype.getHeaderType=function(){return"HeaderFocus"},t}(HV),GDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return KM(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"shiftEnter"===e,s=("upArrow"===e||n)&&0===i[0]||"shiftTab"===e&&"Right"!==this.parent.getFrozenMode()&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=("upArrow"===e||n)&&0===i[0],a="shiftTab"===e&&this.parent.getFrozenMode()===Jt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return"Right"===this.parent.getFrozenMode()?{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozen:o}:("shiftTab"===e&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:s||("tab"===e||"rightArrow"===e)&&i[1]===this.matrix.columns||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1),toHeader:s,toFrozen:o,toFrozenRight:a})},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("tab"===s&&this.parent.enableHeaderFocus&&(o[0]=e[0],o[1]=-1),("leftArrow"===s||"shiftTab"===s)&&(o[0]=e[0],o[1]=n.matrix.columns+1)),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t}(HV),KDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return KM(t,r),t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,o=s&&!f(s[i[0]]);if("Right"===this.parent.getFrozenMode()){var a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||n||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||o&&a,h=("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h}}var u=i[0]>0&&"shiftTab"===e&&this.parent.getFrozenMode()===Jt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return{swap:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toFrozen:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.getHeaderType=function(){return"FixedHeaderFocus"},t}(_G),Use=function(){function r(t){this.searchBox=t}return r.prototype.searchFocus=function(t){t.target.parentElement.classList.add("e-input-focus"),t.target.classList.contains("e-input")&&t.target.classList.contains("e-search")&&t.target.value&&t.target.parentElement.querySelector(".e-clear-icon").classList.remove("e-clear-icon-hide")},r.prototype.searchBlur=function(t){t.target.parentElement.classList.remove("e-input-focus"),t.target.classList.contains("e-search")&&t.relatedTarget&&!t.relatedTarget.classList.contains("e-sicon e-clear-icon")&&!t.relatedTarget.classList.contains("e-sicon")&&t.target.parentElement.querySelector(".e-clear-icon").classList.add("e-clear-icon-hide")},r.prototype.wireEvent=function(){this.searchBox&&(T.add(this.searchBox,"focus",this.searchFocus,this),T.add(this.searchBox,"blur",this.searchBlur,this))},r.prototype.unWireEvent=function(){this.searchBox&&(T.remove(this.searchBox,"focus",this.searchFocus),T.remove(this.searchBox,"blur",this.searchBlur))},r}(),$De=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return KM(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")},t.prototype.jump=function(e,i){var s=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===i[0],o=this.parent.getFrozenMode()===Jt&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1);return{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozenRight:s,toFrozen:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t}(HV),YDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return KM(t,r),t.prototype.jump=function(e,i){var n=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=n&&!f(n[i[0]]),o=0!==this.parent.frozenRows&&"enter"===e,a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||s&&a,h="tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),u=("downArrow"===e||o)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t.prototype.getHeaderType=function(){return"FixedRightHeaderFocus"},t}(_G),ZDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hS=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},XDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return ZDe(t,r),hS([E(12)],t.prototype,"pageSize",void 0),hS([E(8)],t.prototype,"pageCount",void 0),hS([E(1)],t.prototype,"currentPage",void 0),hS([E()],t.prototype,"totalRecordsCount",void 0),hS([E(!1)],t.prototype,"enableQueryString",void 0),hS([E(!1)],t.prototype,"pageSizes",void 0),hS([E(null)],t.prototype,"template",void 0),t}(Ti),QDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Wse=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},JDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return QDe(t,r),Wse([E("startsWith")],t.prototype,"operator",void 0),Wse([E(!1)],t.prototype,"ignoreAccent",void 0),t}(Ti),VV=function(){return VV=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},VV.apply(this,arguments)},qse=function(){function r(t,e,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=t,this.selectionSettings=e,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return r.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},r.prototype.onActionBegin=function(t,e){this.parent.trigger(e,this.fDataUpdate(t))},r.prototype.fDataUpdate=function(t){if(!(this.isMultiSelection||f(t.cellIndex)&&f(t.rowIndex))){var e=this.getRowObj(f(t.rowIndex)?f(t.cellIndex)?this.currentIndex:t.cellIndex.rowIndex:t.rowIndex);t.foreignKeyData=e.foreignKeyData}return t},r.prototype.onActionComplete=function(t,e){this.parent.trigger(e,this.fDataUpdate(t)),this.isMultiSelection=!1},r.prototype.getModuleName=function(){return"selection"},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+$s)&&!t.querySelector("."+zs)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),T.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),T.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},r.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},r.prototype.getSelectedMovableRow=function(t){var e=this.parent;return e.isFrozenGrid()&&this.parent.getContent().querySelector("."+Gn)?e.getMovableRowByIndex(t):null},r.prototype.getSelectedFrozenRightRow=function(t){var e=this.parent;return e.isFrozenGrid()&&e.getFrozenMode()===Jt&&e.getFrozenRightContent()?e.getFrozenRightRowByIndex(t):null},r.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent;if("Batch"===t.editSettings.mode&&t.editModule){var e=$M(this.parent.getCurrentViewRecords());e="Bottom"===t.editSettings.newRowPosition?e.concat(this.parent.editModule.getBatchChanges()[Pf]):this.parent.editModule.getBatchChanges()[Pf].concat(e);for(var i=this.parent.editModule.getBatchChanges()[Jb],n=this.parent.getPrimaryKeyFieldNames()[0],s=0;s<i.length;s++)for(var o=0;o<e.length;o++)if(i[s][n]===e[o][n]){e.splice(o,1);break}return e}return t.getCurrentViewRecords()},r.prototype.selectRow=function(t,e){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([t]);else{var i=this.parent,n=i.getRowByIndex(t),s=n&&i.getRowObjectFromUID(n.getAttribute("data-uid"));if(!(this.isPartialSelection&&s&&s.isDataRow)||s.isSelectable){var l,o=this.getSelectedMovableRow(t),a=this.getSelectedFrozenRightRow(t);if(i.enableVirtualization&&t>-1){var u={selectedIndex:t,isAvailable:!0};this.parent.notify("select-virtual-Row",u);var d=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(t):null;if(!n||!i.getRowObjectFromUID(n.getAttribute("data-uid"))&&!d)return void(u.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());l=d||i.getRowObjectFromUID(n.getAttribute("data-uid")).data}else l=this.getRowObj(t).data;if(this.isRowType()&&n&&!this.isEditing()){var y=n.hasAttribute("aria-selected");this.activeTarget(),e=e&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&t===this.selectedRowIndexes[0],this.isKeyAction=!1;var C,S="cancel";e?this.rowSelectingCallBack(C,e,t,l,!1,y,S)(C):(C={data:l,rowIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},C=this.addMovableArgs(C,o,a),this.parent.trigger(M8,this.fDataUpdate(C),this.rowSelectingCallBack(C,e,t,l,!1,y,S)))}}}},r.prototype.rowSelectingCallBack=function(t,e,i,n,s,o,a){var l=this;return function(h){f(h)||!0!==h[a]?(l.index=i,l.toggle=e,l.data=n,l.removed=s,o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode?(l.clearSelectedRow(i),l.selectRowCallBack()):!o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode&&l.selectRowCallBack(),"ResetOnRowClick"===l.selectionSettings.checkboxMode&&l.clearSelection(),(!l.selectionSettings.persistSelection||"ResetOnRowClick"===l.selectionSettings.checkboxMode||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())):l.disableInteracted()}},r.prototype.selectRowCallBack=function(){var e,t=this.parent,i=this.index,n=this.toggle,s=this.data,o=this.removed,a=t.getRowByIndex(i),l=this.getSelectedMovableRow(i),h=this.getSelectedFrozenRightRow(i);!n&&!o&&(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(a,i),this.selectMovableRow(l,h,i)),this.selectRowIndex(i)),n||(e={data:s,rowIndex:i,row:a,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},e=this.addMovableArgs(e,l,h),this.onActionComplete(e,Yx)),this.isInteracted=!1,this.updateRowProps(i)},r.prototype.selectMovableRow=function(t,e,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(t,i),this.parent.getFrozenMode()===Jt&&e&&this.updateRowSelection(e,i))},r.prototype.addMovableArgs=function(t,e,i){if(this.parent.isFrozenGrid()){var n={mRow:e,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};this.parent.getFrozenMode()===Jt&&i&&(n.frozenRightRow=i,n.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),t=VV({},t,n)}return t},r.prototype.selectRowsByRange=function(t,e){this.selectRows(this.getCollectionFromIndexes(t,e)),this.selectRowIndex(e)},r.prototype.selectedDataUpdate=function(t,e,i,n,s){for(var o=0,a=n.length;o<a;o++){var l=this.parent.getDataRows()[n[o]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(n[o]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(t.push(h.data),i.push(l),e.push(h.foreignKeyData)):this.isPartialSelection&&s&&s.splice(s.indexOf(n[o]),1)}},r.prototype.selectRows=function(t){var e=this,i=this.parent,n=t.slice(),s=this.isSingleSel()?t[t.length-1]:t[0];this.isMultiSelection=!0;var o=[],a=[],l=this.getSelectedMovableRow(s),h=this.getSelectedFrozenRightRow(s),d=[];if(this.isRowType()&&!this.isEditing()){this.selectedDataUpdate(d,a,o,t,n),this.activeTarget();var m={cancel:!1,rowIndexes:n,row:o,rowIndex:s,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:d,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};m=this.addMovableArgs(m,l,h),this.parent.trigger(M8,this.fDataUpdate(m),function(y){if(f(y)||!0!==y.cancel){e.clearRow(),e.selectRowIndex(n.slice(-1)[0]);var C=function(O){if(e.updateRowSelection(i.getRowByIndex(O),O),i.isFrozenGrid()){var L=e.parent.getFrozenMode()===Jt?i.getFrozenRightRowByIndex(O):void 0;e.selectMovableRow(i.getMovableRowByIndex(O),L,O)}e.updateRowProps(s)};if(e.isSingleSel())C(s);else for(var S=0,I=n;S<I.length;S++)C(I[S]);y={rowIndexes:n,row:o,rowIndex:s,target:e.actualTarget,prevRow:i.getRows()[e.prevRowIndex],previousRowIndex:e.prevRowIndex,data:e.getSelectedRecords(),isInteracted:e.isInteracted,isHeaderCheckboxClicked:e.isHeaderCheckboxClicked,foreignKeyData:a},y=e.addMovableArgs(y,l,h),e.isRowSelected&&e.onActionComplete(y,Yx),e.isInteracted=!1}else e.disableInteracted()})}},r.prototype.addRowsToSelection=function(t){var e=this.parent,n=this.target;this.isMultiSelection=!0;var s=[],o=[],a=[],l=e.getSelectedRowIndexes().concat(t),h=this.isSingleSel()?e.getRowByIndex(t[t.length-1]):e.getRowByIndex(t[0]),u=this.isSingleSel()?this.getSelectedMovableRow(t[t.length-1]):this.getSelectedMovableRow(t[0]),d=this.isSingleSel()?this.getSelectedFrozenRightRow(t[t.length-1]):this.getSelectedFrozenRightRow(t[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly){var m,y=this.parent.getColumns().filter(function(L){return"checkbox"===L.type});this.isMultiCtrlRequest&&!y.length&&this.selectedDataUpdate(a,o,s,l);for(var C=0,S=t;C<S.length;C++){var I=S[C],k=this.getRowObj(I),O=this.selectedRowIndexes.indexOf(I)>-1;if(!(this.isPartialSelection&&k&&k.isDataRow)||k.isSelectable){if(this.selectRowIndex(I),O&&(y.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(Hre,[I],[k.data],[h],[k.foreignKeyData],n),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(I),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),u&&(this.selectedRecords.splice(this.selectedRecords.indexOf(u),1),u.removeAttribute("aria-selected"),this.addRemoveClassesForRow(u,!1,null,"e-selectionbackground","e-active")),d&&(this.selectedRecords.splice(this.selectedRecords.indexOf(d),1),d.removeAttribute("aria-selected"),this.addRemoveClassesForRow(d,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(dV,[I],[k.data],[h],[k.foreignKeyData],n,[u],void 0,[d]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),m={cancel:!1,data:a.length?a:k.data,rowIndex:I,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:k.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,d),this.parent.trigger(M8,this.fDataUpdate(m)),!f(m)&&!0===m.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,I),this.selectMovableRow(u,d,I)}if(O||(m={data:a.length?a:k.data,rowIndex:I,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:k.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,d),this.onActionComplete(m,Yx)),this.isInteracted=!1,this.updateRowProps(I),this.isSingleSel())break}}}},r.prototype.getCollectionFromIndexes=function(t,e){for(var i=[],n=t<=e?{i:t,max:e}:{i:e,max:t},s=n.i,o=n.max;s<=o;s++)i.push(s);return t>e&&i.reverse(),i},r.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},r.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},r.prototype.clearSelectedRow=function(t){if(this.toggle){var e=this.parent.getRowByIndex(t);this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(e,!1),this.updateCheckBoxes(e),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(t),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(t)),1)}},r.prototype.updateRowProps=function(t){this.prevRowIndex=t,this.isRowSelected=this.selectedRowIndexes.length&&!0},r.prototype.getPkValue=function(t,e){return t&&Gc(t)?xs(t,e):e[t]},r.prototype.updatePersistCollection=function(t,e){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!f(t)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var n=this.getRowObj(t),s=n.data?this.getPkValue(this.primaryKey,n.data):null;if(null===s)return;n.isSelected=e,e&&!this.isPartialSelection||this.isPartialSelection&&n.isSelectable&&n.isSelected?(this.selectedRowState[s]=e,delete this.unSelectedRowState[s],this.persistSelectedData.some(function(o){return i.getPkValue(i.primaryKey,o)===s})||this.persistSelectedData.push(n.data)):this.updatePersistDelete(s)}},r.prototype.updatePersistDelete=function(t,e){var n,i=this;delete this.selectedRowState[t],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[t]=!0),this.persistSelectedData.some(function(o,a){return n=a,i.getPkValue(i.primaryKey,o)===t})&&(this.persistSelectedData.splice(n,1),e&&this.parent.partialSelectedRecords.splice(n,1))},r.prototype.updateCheckBoxes=function(t,e,i){if(!f(t)){var n=t.querySelector(".e-checkselect");f(n)||(QM(n.nextElementSibling,e),dS(n,e),(f(this.checkedTarget)||!f(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},r.prototype.updateRowSelection=function(t,e){if(t){this.selectedRowIndexes.push(e);var i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(t),t.setAttribute("aria-selected","true"),this.updatePersistCollection(t,!0),this.updateCheckBoxes(t,!0),this.addRemoveClassesForRow(t,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var n=this.focus.getPrevIndexes().cellIndex?t.cells[this.focus.getPrevIndexes().cellIndex]:t.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(n=this.parent.contextMenuModule.cell),!n)return;this.focus.onClick({target:n},!0)}}},r.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=$M(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!f(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var t=this.parent.element.querySelector(".e-gridpopup").querySelector("span");t.classList.contains("e-rowselect")&&t.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},r.prototype.clearRowSelection=function(){var t=this;if(this.isRowSelected){for(var e=this.parent,i=this.parent.getDataRows(),n=[],s=[],o=[],a=[],l=[],h=[],u=this.target,d=0,m=this.selectedRowIndexes.length;d<m;d++){var y="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[d]]:this.parent.getDataRows()[this.selectedRowIndexes[d]],C=this.getRowObj(y);if(C&&(n.push(C.data),s.push(y),l.push(this.selectedRowIndexes[d]),h.push(C.foreignKeyData)),e.isFrozenGrid()){var S=e.getMovableRows();if(S&&S.length&&o.push(S[this.selectedRowIndexes[d]]),e.getFrozenMode()===Jt){var I=e.getFrozenRightRows();I&&I.length&&a.push(I[this.selectedRowIndexes[d]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(Hre,l,n,s,h,u,o,function(){if(t.isCancelDeSelect&&(t.isRowClicked||t.checkSelectAllClicked||t.isInteracted&&!t.parent.isPersistSelection)){if(t.parent.isPersistSelection)if("Intermediate"===t.getCheckAllStatus(t.parent.element.querySelector(".e-checkselectall")))for(var k=0;k<t.selectedRecords.length;k++)t.updatePersistCollection(t.selectedRecords[k],!0);else t.parent.checkAllRows="Check",t.updatePersistSelectedData(!0);t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}else{for(var O=[].slice.call(i.filter(function(ae){return ae.hasAttribute("aria-selected")})),L=0;L<O.length;L++)t.disableUI||(O[L].removeAttribute("aria-selected"),t.addRemoveClassesForRow(O[L],!1,!0,"e-selectionbackground","e-active")),t.isPrevRowSelection||t.updatePersistCollection(O[L],!1),t.updateCheckBoxes(O[L]);k=0;for(var B=t.selectedRowIndexes.length;k<B;k++){var j=t.getSelectedMovableRow(t.selectedRowIndexes[k]);j&&(t.disableUI||(j.removeAttribute("aria-selected"),t.addRemoveClassesForRow(j,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(j),t.isPrevRowSelection||t.updatePersistCollection(j,!1));var G=t.getSelectedFrozenRightRow(t.selectedRowIndexes[k]);G&&(t.disableUI||(G.removeAttribute("aria-selected"),t.addRemoveClassesForRow(G,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(G),t.isPrevRowSelection||t.updatePersistCollection(G,!1))}t.selectedRowIndexes=[],t.selectedRecords=[],t.isRowSelected=!1,t.selectRowIndex(-1),t.isPrevRowSelection=!1,t.rowDeselect(dV,l,n,s,h,u,o,void 0,a),t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}},a)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},r.prototype.rowDeselect=function(t,e,i,n,s,o,a,l,h){var u=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){var y={rowIndex:e[0],data:!this.selectionSettings.persistSelection||"Uncheck"!==this.parent.checkAllRows||1===e.length&&1===this.deSelectedData.length||"ResetOnRowClick"===this.selectionSettings.checkboxMode?i:this.deSelectedData,foreignKeyData:s,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===t&&delete y.cancel;var C="row",k="rowIndexes",O="data",L="foreignKeyData";y[C]=n,y.target=this.actualTarget,this.actualTarget&&!f(U(this.actualTarget,"thead"))||e.length>1?(y.rowIndex=e[0],y[k]=e):1===e.length&&(y[O]=y[O][0],y[C]=y[C][0],y[L]=y[L][0],this.isAddRowsToSelection&&(y[k]=e)),this.parent.trigger(t,this.parent.isFrozenGrid()?VV({},y,{mRow:a,frozenRightRow:h}):y,function(j){u.isCancelDeSelect=j.cancel,(!u.isCancelDeSelect||!u.isRowClicked&&!u.isInteracted&&!u.checkSelectAllClicked)&&(u.updatePersistCollection(n[0],!1),u.updateCheckBoxes(n[0],void 0,e[0]),a&&u.updateCheckBoxes(a[0],void 0,e[0]),h&&u.updateCheckBoxes(h[0],void 0,e[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()},r.prototype.getRowObj=function(t){return void 0===t&&(t=this.currentIndex),f(t)?{}:("number"==typeof t&&(t=this.parent.getRowByIndex(t)),t&&this.parent.getRowObjectFromUID(t.getAttribute("data-uid"))||{})},r.prototype.getSelectedMovableCell=function(t){var e=this.parent,i=e.getColumnByIndex(t.cellIndex);return e.isFrozenGrid()&&"movable"===i.getFreezeTableName()?e.getMovableCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex)):null},r.prototype.selectCell=function(t,e){if(this.isCellType()){var s,i=this.parent,n=this.getSelectedMovableCell(t);n||(n=i.getCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex))),this.currentIndex=t.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var a=n.classList.contains("e-cellselectionbackground");(e=e&&!$t(this.prevCIdxs)&&t.rowIndex===this.prevCIdxs.rowIndex&&t.cellIndex===this.prevCIdxs.cellIndex&&a)?this.successCallBack(s,e,t,n,o)(s):((s={data:o,cellIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=n,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(AM,this.fDataUpdate(s),this.successCallBack(s,e,t,n,o)),this.cellselected=!0)}}},r.prototype.successCallBack=function(t,e,i,n,s){var o=this;return function(a){var h="currentCell";if((f(a)||!0!==a.cancel)&&(e||(a[h]=a[h]?a[h]:n),o.clearCell(),e||o.updateCellSelection(n,i.rowIndex,i.cellIndex),!e)){var u={data:s,cellIndex:i,currentCell:n,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};u.previousRowCellIndex=o.prevECIdxs,o.updateCellProps(i,i),o.onActionComplete(u,pV)}}},r.prototype.getCellIndex=function(t,e){return this.parent.getFrozenColumns()&&e>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(t,e):this.parent.getCellFromIndex(t,e)},r.prototype.selectCellsByRange=function(t,e){var i=this;if(this.isCellType()){var n=this.parent,s=this.getSelectedMovableCell(t),o=n.getFrozenColumns();s||(s=n.getCellFromIndex(t.rowIndex,t.cellIndex));var a,l,d,h=t,u=e=e||t;this.currentIndex=t.rowIndex;var y=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var C={data:y,cellIndex:t,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};C.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(AM,this.fDataUpdate(C),function(I){if(f(I)||!0!==I.cancel){if(i.clearCell(),t.rowIndex>e.rowIndex){var k=t;t=e,e=k}for(var O=t.rowIndex;O<=e.rowIndex;O++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(a=O===t.rowIndex?t.cellIndex:0,l=O===e.rowIndex?e.cellIndex:i.getLastColIndex(O)):(a=t.cellIndex,l=e.cellIndex),d=[];for(var L=a<l?a:l,B=a>l?a:l;L<=B;L++)(s=o?L<o?n.getCellFromIndex(O,L):n.getMovableCellFromIndex(O,L):n.getCellFromIndex(O,L))&&(d.push(L),i.updateCellSelection(s),i.addAttribute(s));i.selectedRowCellIndexes.push({rowIndex:O,cellIndexes:d})}var j={data:y,cellIndex:u,currentCell:n.getCellFromIndex(u.rowIndex,u.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0};j.previousRowCellIndex=i.prevECIdxs,i.isDragged||(i.onActionComplete(j,pV),i.cellselected=!0),i.updateCellProps(h,u)}})}}},r.prototype.selectCells=function(t){if(this.isCellType()){var e=this.parent,i=this.getSelectedMovableCell(t[0]),n=e.getFrozenColumns();i||(i=e.getCellFromIndex(t[0].rowIndex,t[0].cellIndexes[0])),this.currentIndex=t[0].rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var o={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,AM);for(var l=0,h=t.length;l<h;l++)for(var u=0,d=t[l].cellIndexes.length;u<d;u++)(i=n?t[l].cellIndexes[u]<n?e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getMovableCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:t[l].rowIndex,cellIndex:t[l].cellIndexes[u]}));this.updateCellProps({rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]},{rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]});var m={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};m.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(m,pV)}}},r.prototype.addCellsToSelection=function(t){if(this.isCellType()){var i,n,e=this.parent;this.currentIndex=t[0].rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex],a=e.getFrozenLeftCount(),l=e.getMovableColumnsCount();if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill();var u,h=e.getColumnByIndex(t[0].cellIndex);rC(this.parent,function(ae,ve){u=ve[t[0].rowIndex]},[h.getFreezeTableName()&&h.getFreezeTableName()!==cs?[]:e.getRowsObject(),"movable"===h.getFreezeTableName()?e.getMovableRowsObject():[],h.getFreezeTableName()===dr?e.getFrozenRightRowsObject():[]]),e.groupSettings.columns.length>0&&(u=e.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var d=[],m=0,y=t;m<y.length;m++){for(var C=y[m],S=0,I=this.selectedRowCellIndexes.length;S<I;S++)if(this.selectedRowCellIndexes[S].rowIndex===C.rowIndex){n=S;break}(i=this.getSelectedMovableCell(C))||(i=e.getCellFromIndex(C.rowIndex,this.getColIndex(C.rowIndex,C.cellIndex)));var k="movable"===h.getFreezeTableName()?C.cellIndex-a:h.getFreezeTableName()===dr?C.cellIndex-(a+l):C.cellIndex;d.push(e.groupSettings.columns.length>0?u.cells[k+e.groupSettings.columns.length].foreignKeyData:u.cells[k].foreignKeyData);var O={cancel:!1,data:o,cellIndex:t[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?e.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},L="previousRowCellIndex";O[L]=this.prevECIdxs;var B=n>-1;if(B){var j=this.selectedRowCellIndexes[n].cellIndexes;j.indexOf(C.cellIndex)>-1?(this.cellDeselect(Vre,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],d),j.splice(j.indexOf(C.cellIndex),1),0===j.length&&this.selectedRowCellIndexes.splice(n,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(zre,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],d)):(B=!1,this.onActionBegin(O,AM),this.addRowCellIndex({rowIndex:C.rowIndex,cellIndex:C.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(O,AM),!f(O)&&!0===O.cancel)return;this.updateCellSelection(i,C.rowIndex,C.cellIndex)}if(!B){var G={data:o,cellIndex:t[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};G[L]=this.prevECIdxs,this.onActionComplete(G,pV),this.cellselected=!0}this.updateCellProps(C,C)}}}},r.prototype.getColIndex=function(t,e){var i=this.parent.isFrozenGrid(),n=this.parent.getColumnByIndex(e),s=aoe(this.parent,n,t);if(s)for(var o=0;o<s.length;o++)if(parseInt(s[o].getAttribute(Ys),10)===e)return i&&("movable"===n.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():n.getFreezeTableName()===dr&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1},r.prototype.getLastColIndex=function(t){var e=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[t].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[t].querySelectorAll("td.e-rowcell");return parseInt(e[e.length-1].getAttribute(Ys),10)},r.prototype.clearCell=function(){this.clearCellSelection()},r.prototype.cellDeselect=function(t,e,i,n,s){n[0]&&n[0].classList.contains(oS)&&this.updateCheckBoxes(U(n[0],"tr"));var a={cells:n,data:i,cellIndexes:e,foreignKeyData:s,cancel:!1};this.parent.trigger(t,a),this.isPreventCellSelect=a.cancel},r.prototype.updateCellSelection=function(t,e,i){f(e)||this.addRowCellIndex({rowIndex:e,cellIndex:i}),t.classList.add("e-cellselectionbackground"),t.classList.contains(oS)&&this.updateCheckBoxes(U(t,"tr"),!0),this.addAttribute(t)},r.prototype.addAttribute=function(t){this.target=t,f(t)||(t.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:t},!0))},r.prototype.updateCellProps=function(t,e){this.prevCIdxs=t,this.prevECIdxs=e,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},r.prototype.addRowCellIndex=function(t){for(var e,i,n=0,s=this.selectedRowCellIndexes.length;n<s;n++)if(this.selectedRowCellIndexes[n].rowIndex===t.rowIndex){e=!0,i=n;break}e?this.selectedRowCellIndexes[i].cellIndexes.indexOf(t.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(t.cellIndex):this.selectedRowCellIndexes.push({rowIndex:t.rowIndex,cellIndexes:[t.cellIndex]})},r.prototype.clearCellSelection=function(){if(this.isCellSelected){var t=this.parent,e=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,n=[],s=[],o=[],a=this.getCurrentBatchRecordChanges(),l=t.isFrozenGrid();this.hideAutoFill();for(var h=0,u=i.length;h<u;h++){n.push(a[i[h].rowIndex]);for(var d=this.getRowObj(i[h].rowIndex),m=0,y=i[h].cellIndexes.length;m<y;m++)if(l){var C=t.getColumnByIndex(i[h].cellIndexes[m]);s.push(VG(this.parent,C,i[h].rowIndex,i[h].cellIndexes[m]))}else d.cells&&o.push(d.cells[i[h].cellIndexes[m]].foreignKeyData),s.push(t.getCellFromIndex(i[h].rowIndex,i[h].cellIndexes[m]))}if(this.cellDeselect(Vre,i,n,s,o),!0===this.isPreventCellSelect)return;for(h=0,u=e.length;h<u;h++)e[h].classList.remove("e-cellselectionbackground"),e[h].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(zre,i,n,s,o)}},r.prototype.getSelectedCellsElement=function(){var i,t=this.parent,e=t.getDataRows();t.isFrozenGrid()&&(i=t.getMovableDataRows(),e=t.addMovableRows(e,i),t.getFrozenMode()===Jt&&(e=t.addMovableRows(e,t.getFrozenRightDataRows())));for(var n=[],s=0,o=e.length;s<o;s++)n=n.concat([].slice.call(e[s].getElementsByClassName("e-cellselectionbackground")));return n},r.prototype.mouseMoveHandler=function(t){t.preventDefault();var l,e=this.parent.element.getBoundingClientRect(),i=this.x,n=this.y,s=eC(t),o=s.x-e.left,a=s.y-e.top,h=U(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=U(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),i>o&&(l=o,o=i,i=l),n>a&&(l=a,a=n,n=l),this.element.style.left=i+"px",this.element.style.top=n+"px",this.element.style.width=o-i+"px",this.element.style.height=a-n+"px"),h&&!t.ctrlKey&&!t.shiftKey){var u=parseInt(h.getAttribute(ki),10);if(this.isCellDrag){var d=me(t.target,on);d&&(this.startAFCell=this.startCell,this.endAFCell=me(t.target,on),this.selectLikeExcel(t,u,parseInt(d.getAttribute(Ys),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,u),this.isRowDragSelected=!0}},r.prototype.selectLikeExcel=function(t,e,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(t)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:e,cellIndex:i}),this.drawBorders())},r.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},r.prototype.isLastCell=function(t){var e=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return e[e.length-1]===t},r.prototype.isLastRow=function(t){var e=[].slice.call(U(t,lt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[e.length-1]},r.prototype.isFirstRow=function(t){var e=[].slice.call(U(t,lt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[0]},r.prototype.isFirstCell=function(t){return[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===t},r.prototype.setBorders=function(t,e,i){var n=[].slice.call(t.getElementsByClassName("e-cellselectionbackground")).filter(function(S){return""===S.style.display});if(n.length){var s=this.parent.isFrozenGrid(),o=n[0],a=n[n.length-1],l=o.getBoundingClientRect(),h=a.getBoundingClientRect(),u=o.offsetParent.getBoundingClientRect(),d=!this.isLastRow(a)||"1"!==i&&"2"!==i&&"5"!==i?0:2,m=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(o)?1.5:0,y=s&&("2"===i||"4"===i)&&this.isFirstCell(o)?1:0,C=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Jt||"5"!==i&&"6"!==i)||!this.isFirstCell(o)?0:1;this.parent.enableRtl?(e.style.right=u.right-l.right-y+"px",e.style.width=l.right-h.left+y+1+"px"):(e.style.left=l.left-u.left-y-C+"px",e.style.width=h.right-l.left+y-C+1+"px"),e.style.top=l.top-u.top-m+"px",e.style.height=h.top-l.top>0?h.top-u.top+h.height+1-(l.top-u.top)-d+m+"px":h.height+m-d+1+"px",this.selectDirection+=i}else e.style.display="none"},r.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Jt&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Jt&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},r.prototype.applyBothFrozenBorders=function(t){var e=this.parent.enableRtl;switch(t.length){case 6:this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right;break;case 4:t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom),t.includes("2")&&t.includes("4")&&t.includes("5")&&t.includes("6")&&(this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom);break;case 2:t.includes("1")&&(this.mcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),t.includes("2")&&(this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),t.includes("3")&&(this.mhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),t.includes("5")&&(this.mcBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),t.includes("6")&&(this.mhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},r.prototype.applyBorders=function(t){var e=this.parent.enableRtl;if(this.parent.getFrozenMode()===Jt)this.applyBothFrozenBorders(t);else switch(t.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},r.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Jt&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Jt&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(ri("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},r.prototype.showHideBorders=function(t){this.bdrElement&&(this.bdrElement.style.display=t,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=t,this.parent.getFrozenMode()===Jt&&(this.frcBdrElement.style.display=t)),this.parent.frozenRows&&(this.fhBdrElement.style.display=t),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=t,this.parent.getFrozenMode()===Jt&&(this.frhBdrElement.style.display=t)))},r.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},r.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var t=this.startAFCell.getBoundingClientRect(),e=this.endAFCell.getBoundingClientRect(),i=e.top-t.top>0?1:0,n=e.top-t.top>=0&&(me(this.startAFCell,Gn)||me(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(me(this.startAFCell,Gn)||me(this.startAFCell,nr))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(me(this.endAFCell,Gn)||me(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),d=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,m=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft,y=this.parent.element.clientHeight,C=this.parent.element.clientWidth;d=d>0?Math.floor(d)-1:0,m=m>0?m:0;var S=t.left-l.left;if(this.parent.enableRtl){var k=me(this.startAFCell,Gn)||me(this.startAFCell,nr)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-e.right-2+e.width+"px",this.bdrAFLeft.style.width=C<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-t.right-s+k-1+"px",this.bdrAFTop.style.left=e.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-s+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=S-s+m-1+"px",this.bdrAFRight.style.left=e.left-l.left-2+e.width+"px",this.bdrAFRight.style.width=C<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=S+m-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-s+1+"px",C<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var I=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-C;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-I+"px"}if(this.bdrAFLeft.style.top=t.top-l.top-n+d+"px",this.bdrAFLeft.style.height=e.top-t.top>0?e.top-a.top+e.height+1-(t.top-a.top)+n-o-d+"px":e.height+n-o-d+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=y<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,y<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var O=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-y;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-O+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},r.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(ri("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(ri("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(ri("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(ri("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},r.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},r.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},r.prototype.updateValue=function(t,e,i){var n=this.createBeforeAutoFill(t,e,i);if(!n.cancel){var s=this.parent.getColumnByIndex(e);this.parent.editModule&&i&&this.parent.editModule.updateCell(t,s.field,"number"===s.type?parseFloat(n.value):n.value)}},r.prototype.createBeforeAutoFill=function(t,e,i){var s={column:this.parent.getColumnByIndex(e),value:i.innerText};return this.parent.trigger("beforeAutoFill",s),s},r.prototype.getAutoFillCells=function(t,e){var i=".e-cellselectionbackground",n=[].slice.call(this.parent.getDataRows()[t].querySelectorAll(i));return this.parent.isFrozenGrid()&&(n=n.concat([].slice.call(this.parent.getMovableDataRows()[t].querySelectorAll(i))),this.parent.getFrozenMode()===Jt&&(n=n.concat([].slice.call(this.parent.getFrozenRightDataRows()[t].querySelectorAll(i))))),n},r.prototype.selectLikeAutoFill=function(t,e){var i=parseInt(me(this.startAFCell,Sn).getAttribute(ki),10),n=parseInt(this.startAFCell.getAttribute(Ys),10),s=parseInt(me(this.endAFCell,Sn).getAttribute(ki),10),o=parseInt(this.endAFCell.getAttribute(Ys),10),a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!e&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!me(t.target,on):this.startAFCell=this.parent.getCellFromIndex(i,n),this.endAFCell=this.parent.getCellFromIndex(i+a,n+l),this.drawAFBorders();break;case this.autoFillRLselection&&n+l<o&&o-n-l+1>s-i-a&&o-n-l+1>i-s:if(this.endAFCell=this.parent.getCellFromIndex(i+a,o),s=parseInt(me(this.endAFCell,Sn).getAttribute(ki),10),o=parseInt(this.endAFCell.getAttribute(Ys),10),e){for(var h=parseInt(this.endCell.getAttribute(Ys),10),u=i;u<=s;u++)for(var d=this.getAutoFillCells(u,n),m=0,y=h+1;y<=o;y++)m>l&&(m=0),this.updateValue(u,y,d[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:s,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&n>o&&n-o+1>s-i-a&&n-o+1>i-s:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,e){for(u=i;u<=i+a;u++)for((d=this.getAutoFillCells(u,n)).reverse(),m=0,y=this.startCellIndex-1;y>=o;y--)m>l&&(m=0),this.updateValue(u,y,d[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+a,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>s:if(this.startAFCell=this.parent.getCellFromIndex(s,n),this.endAFCell=this.endCell,e){var S=C=parseInt(this.endCell.parentElement.getAttribute(ki),10);for(u=i-1;u>=s;u--)for(S===this.startIndex-1&&(S=C),d=this.getAutoFillCells(S,n),m=0,S--,y=this.startCellIndex;y<=this.startCellIndex+l;y++)this.updateValue(u,y,d[m]),m++;this.selectCellsByRange({rowIndex:s,cellIndex:n+l},{rowIndex:i+a,cellIndex:n})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(s,n+l),e){var C=parseInt(this.endCell.parentElement.getAttribute(ki),10);for(S=this.startIndex,u=C+1;u<=s;u++){S===C+1&&(S=this.startIndex),d=this.getAutoFillCells(S,n),S++,m=0;for(var I=this.startCellIndex;I<=this.startCellIndex+l;I++)this.updateValue(u,I,d[m]),m++}this.selectCellsByRange({rowIndex:C-a,cellIndex:n},{rowIndex:s,cellIndex:n+l})}else this.drawAFBorders()}},r.prototype.mouseUpHandler=function(t){document.body.classList.remove("e-disableuserselect"),this.element&&He(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?me(t.target,on):null;var e=U(t.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e&&e.classList.contains(on)){var n=parseInt(e.parentElement.getAttribute(ki),10),s=parseInt(e.getAttribute(Ys),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:n,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var o=me(t.target,on);this.endAFCell=o||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(t,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}T.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&T.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),T.remove(document,"mouseup",this.mouseUpHandler)},r.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},r.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var t=parseInt(this.target.getAttribute(Ys),10),e=parseInt(this.target.getAttribute("index"),10),n=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,t).filter(function(C){return""===C.style.display}),s=this.parent.getColumnByIndex(t),o="movable"===s.getFreezeTableName(),a=e<this.parent.frozenRows,l=this.parent.getFrozenMode()===Jt&&s.getFreezeTableName()===dr;le("#"+this.parent.element.id+"_autofill",me(this.target,cr))||(le("#"+this.parent.element.id+"_autofill",this.parent.element)&&le("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=ri("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",a?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var h=n[n.length-1];if(h&&h.offsetParent){var u=h.getBoundingClientRect(),d=h.offsetParent.getBoundingClientRect(),m=this.isLastCell(h)?4:0,y=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=d.right-u.right+u.width-4-m+"px":this.autofill.style.left=u.left-d.left+u.width-4-m+"px",this.autofill.style.top=u.top-d.top+u.height-5-y+"px"}this.autofill.style.display=""}else this.hideAutoFill()},r.prototype.mouseDownHandler=function(t){this.mouseButton=t.button;var n,e=t.target,i=this.parent,s=me(e,"e-grid");if(!(s&&s.id!==i.element.id||me(e,js)&&!this.parent.frozenRows||me(e,"e-editedbatchcell")||me(e,qa))){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),me(e,on)&&!t.shiftKey&&!t.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,n=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||U(e,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);n=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}n&&this.enableDrag(t,!0)}this.updateStartEndCells(),(e.classList.contains("e-autofill")||e.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t))}},r.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=t[0],this.endCell=t[t.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ki),10),this.startCellIndex=parseInt(me(this.startCell,on).getAttribute(Ys),10))},r.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(ki),10),this.startCellIndex=parseInt(me(this.startCell,on).getAttribute(Ys),10))},r.prototype.enableDrag=function(t,e){var i=this.parent;if(e){var n=U(t.target,"tr");this.startDIndex=parseInt(n.getAttribute(ki),10),this.startDCellIndex=parseInt(me(t.target,on).getAttribute(Ys),10)}document.body.classList.add("e-disableuserselect");var s=i.element.getBoundingClientRect(),o=eC(t);this.x=o.x-s.left,this.y=o.y-s.top,T.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&T.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),T.add(document,"mouseup",this.mouseUpHandler,this)},r.prototype.clearSelAfterRefresh=function(t){var e=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;if("virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&!e&&this.clearSelection(),("virtualscroll"===t.requestType||e)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),n=[];this.selectedRowState={},this.persistSelectedData=[];for(var s=0;s<i.length;s++){n.push(i[s].index);var o=this.getPkValue(this.primaryKey,i[s].data);this.selectedRowState[o]=!0,this.persistSelectedData.push(i[s].data)}this.selectedRowIndexes=n}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:jr,handler:this.enableAfterRender},{event:Ua,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:Wa,handler:this.onPropertyChanged},{event:vV,handler:this.onCellFocused},{event:dse,handler:this.clearSelAfterRefresh},{event:Jx,handler:this.columnPositionChanged},{event:is,handler:this.initialEnd},{event:yV,handler:this.rowsRemoved},{event:Mo,handler:this.refreshHeader},{event:gn,handler:this.destroy}],wo(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(mr,this.actionBeginFunction),this.parent.addEventListener(Ui,this.actionCompleteFunction),this.addEventListener_checkbox())},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(wo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(mr,this.actionBeginFunction),this.parent.removeEventListener(Ui,this.actionCompleteFunction),this.removeEventListener_checkbox())},r.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(T.add(this.parent.element,"keydown",this.keyDownHandler,this),T.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||T.add(this.parent.element,"keydown",this.keyDownHandler,this)},r.prototype.unWireEvents=function(){this.isMacOS?(T.remove(this.parent.element,"keydown",this.keyDownHandler),T.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||T.remove(this.parent.element,"keydown",this.keyDownHandler)},r.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},r.prototype.refreshHeader=function(){this.setCheckAllState()},r.prototype.rowsRemoved=function(t){for(var e=0;e<t.records.length;e++){var i=this.getPkValue(this.primaryKey,t.records[e]);delete this.selectedRowState[i],--this.totalRecordsCount}this.setCheckAllState()},r.prototype.beforeFragAppend=function(t){"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&this.clearSelection()},r.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.initPerisistSelection())},r.prototype.render=function(t){T.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),T.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){var e=this.parent;!f(t.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!f(t.properties.mode)||!f(t.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&(e.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}},r.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},r.prototype.initialEnd=function(t){var e=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Jt;(!e||e&&!i&&!t.args.isFrozen||i&&t.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(is,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},r.prototype.checkBoxSelectionChanged=function(){var t=this.parent;t.off(is,this.checkBoxSelectionChanged);var e=t.getColumns().filter(function(i){return"checkbox"===i.type});e.length>0&&(t.isCheckBoxSelection=!0,this.chkField=e[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,f(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(t.selectionSettings.type="Multiple",t.dataBind()):this.initPerisistSelection()),!t.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},r.prototype.initPerisistSelection=function(){var t=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(t.isPersistSelection=!1,this.selectedRowState={})},r.prototype.ensureCheckboxFieldSelection=function(){var t=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!t.enableVirtualization&&this.chkField&&(t.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!t.isPersistSelection)){var e=this.parent.getDataModule(),i=(new si).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var n=e.getData({},i),s=this;this.parent.showSpinner(),n.then(function(o){s.dataSuccess(o.result),s.refreshPersistSelection(),s.parent.hideSpinner()})}},r.prototype.dataSuccess=function(t){for(var e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);f(this.selectedRowState[i])&&t[e][this.chkField]&&(this.selectedRowState[i]=t[e][this.chkField])}this.persistSelectedData=t},r.prototype.setRowSelection=function(t){if(this.parent.getDataModule().isRemote())if(t)for(var m=Object.keys(this.selectedRowState),y=Object.keys(this.unSelectedRowState),C=0,S=this.parent.currentViewData;C<S.length;C++){var I=(h=S[C])[this.primaryKey].toString();-1===m.indexOf(I)&&-1===y.indexOf(I)&&(this.selectedRowState[h[this.primaryKey]]=!0)}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(t)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=0,n=this.parent.getRowsObject().filter(function(k){return k.isSelectable});i<n.length;i++)this.selectedRowState[this.getPkValue(this.primaryKey,n[i].data)]=!0;else{var o=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?o:o.records;a<l.length;a++)this.selectedRowState[this.getPkValue(this.primaryKey,h=l[a])]=!0;else for(var u=0,d=o;u<d.length;u++){var h;this.selectedRowState[this.getPkValue(this.primaryKey,h=d[u])]=!0}}else this.selectedRowState={}},r.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},r.prototype.refreshPersistSelection=function(){var t=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getMovableRows()),this.parent.getFrozenMode()===Jt&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==t&&t.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var n=[],s=0;s<t.length;s++){var o=this.getRowObj(t[s]),a=o&&o.data?this.getPkValue(this.primaryKey,o.data):null;if(null===a)return;if(!this.isPartialSelection||o.isSelectable){var l=void 0,h=t[s].querySelector(".e-checkselect");this.selectedRowState[a]||"Check"===this.parent.checkAllRows&&this.selectedRowState[a]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(a)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(a)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!f(this.chkField)&&o.data[this.chkField]?(n.push(parseInt(t[s].getAttribute(ki),10)),l=!0):(l=!1,this.checkedTarget!==h&&this.parent.isCheckBoxSelection&&h&&QM(h.nextElementSibling,l)),this.updatePersistCollection(t[s],l)}}this.isSingleSel()&&n.length>0?this.selectRow(n[0],!0):this.selectRows(n)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},r.prototype.actionBegin=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){var e=this.parent.element.querySelector(".e-edit-checkselect");if(!f(e)){var i=U(e,"."+qa);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var n=this.getRowObj(i);if(!n)return;this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=n.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===t.requestType&&this.parent.getDataModule().isRemote()&&(this.selectedRowIndexes=[]),("filtering"===t.requestType||"searching"===t.requestType)&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},r.prototype.actionComplete=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){if("add"===t.action){if(this.isCheckedOnAdd){var e=this.parent.getRowObjectFromUID(this.parent.getRows()[t.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,e.data)]=e.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if("delete"===t.requestType&&this.parent.isPersistSelection){for(var n=t.data.slice(),s=0;s<n.length;s++){var o=this.getPkValue(this.primaryKey,n[s]);f(o)||this.updatePersistDelete(o,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===t.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var a=this.parent.getRowsObject(),l=[];for(s=0;s<a.length;s++)a[s].isSelectable&&l.push(a[s].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},r.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.parent.getDataModule().isRemote()&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var t=this.parent.getRowsObject(),e=[],i=0;i<t.length;i++)t[i].isSelected&&e.push(i);e.length&&this.selectRows(e),this.initialRowSelection=!0}},r.prototype.updatePersistSelectedData=function(t){if(this.parent.isPersistSelection){for(var e=this.parent.getRows(),i=0;i<e.length;i++)this.updatePersistCollection(e[i],t);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},r.prototype.checkSelectAllAction=function(t){var e=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),t&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(t),this.selectRowsByRange(e.getVirtualRowIndex(0),e.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(t),this.clearSelection()),this.chkAllCollec=[],!f(i)){var n=i.querySelector(".e-edit-checkselect");f(n)||QM(n.nextElementSibling,t)}},r.prototype.checkSelectAll=function(t){var e=this,i=this.getCheckAllStatus(t),n="Check"===i;this.isHeaderCheckboxClicked=!0,this.rmtHdrChkbxClicked=!(!this.parent.getDataModule().isRemote()||"Uncheck"!==i),"Intermediate"===i&&(n=this.getCurrentBatchRecordChanges().some(function(s){return e.getPkValue(e.primaryKey,s)in e.selectedRowState})),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!n),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(t,!n)},r.prototype.getCheckAllStatus=function(t){var e=t?t.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return e.contains("e-check")?"Check":e.contains("e-uncheck")?"Uncheck":e.contains("e-stop")?"Intermediate":"None"},r.prototype.checkSelect=function(t){var e=U(this.checkedTarget,"."+on),i=this.parent;this.isMultiCtrlRequest=!0;var n=0;if(this.isHeaderCheckboxClicked=!1,ks(i)){var s=e.parentElement.getAttribute("data-uid");n=i.getRows().map(function(o){return o.getAttribute("data-uid")}).indexOf(s)}else n=parseInt(e.parentElement.getAttribute(ki),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ul).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++n,this.rowCellSelectionHandler(n,parseInt(e.getAttribute(Ys),10)),this.moveIntoUncheckCollection(U(e,"."+Sn)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"))},r.prototype.moveIntoUncheckCollection=function(t){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var e=this.getRowObj(t),i=e&&e.data?this.getPkValue(this.primaryKey,e.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},r.prototype.triggerChkChangeEvent=function(t,e){this.parent.trigger("checkBoxChange",{checked:e,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:t}),this.parent.isEdit||(this.checkedTarget=null)},r.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!this.parent.getDataModule().isRemote()&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var e=0,i=this.parent.getRowsObject().filter(function(s){return s.isSelectable});e<i.length;e++)this.selectedRowIndexes.push(i[e].index)},r.prototype.updateSelectedRowIndex=function(t){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var e=this.getData().length,i=0;i<e;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{var n=this.parent.getRowByIndex(t);if(t&&n&&"false"===n.getAttribute("aria-selected")){var s=this.selectedRowIndexes.indexOf(t);this.selectedRowIndexes.splice(s,1)}}},r.prototype.isAllSelected=function(t){if(this.isPartialSelection){if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var e=this.parent.partialSelectedRecords,i=0;i<e.length;i++){var n=this.getPkValue(this.primaryKey,e[i]);if(!this.selectedRowState[n])return!1}return!0}return this.isSelectAllRowCount(t)}for(e=this.getData(),i=0;i<e.length;i++)if(n=this.getPkValue(this.primaryKey,e[i]),!this.selectedRowState[n])return!1;return!0},r.prototype.someDataSelected=function(){for(var t=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);if(this.selectedRowState[i])return!1}return!0},r.prototype.setCheckAllState=function(t,e){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=!1,n=!1,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(n=!0,i=this.isAllSelected(s));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;z([a],["e-check","e-stop","e-uncheck"]),dS(o,!1),o.indeterminate=!1,i&&n&&this.getData().length||!n&&(s===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.enableVirtualization||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(s)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length||this.parent.getDataModule().isRemote()&&!this.isPartialSelection&&s===this.parent.totalDataRecordsCount||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(s))))?(N([a],["e-check"]),dS(o,!0),e&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&!this.parent.enableVirtualization||this.parent.enableVirtualization&&(!this.persistSelectedData.length&&!n||n&&this.someDataSelected())||0===s&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===s||s&&n&&this.someDataSelected())?(N([a],["e-uncheck"]),e&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?N([a.parentElement],["e-checkbox-disabled"]):z([a.parentElement],["e-checkbox-disabled"])):(N([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(h){return h.isSelectable}).length&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?N([a.parentElement],["e-checkbox-disabled"]):z([a.parentElement],["e-checkbox-disabled"])),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(t)}}},r.prototype.isSelectAllRowCount=function(t){var e=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(e=i.filter(function(s){return s.isSelectable}).length)&&t===e:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(e=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&t===this.parent.partialSelectedRecords.length:(e=i.filter(function(s){return s.isSelectable}).length)&&t===e},r.prototype.keyDownHandler=function(t){(("chrome"===Q.info.name||"safari"===Q.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===Q.info.name&&17===t.keyCode||"mozilla"===Q.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!0);var e=me(t.target,"e-headercell"),i=me(t.target,on);(e?e.children[0].classList.contains("e-headerchkcelldiv"):i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===t.keyCode&&t.preventDefault()},r.prototype.keyUpHandler=function(t){(("chrome"===Q.info.name||"safari"===Q.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===Q.info.name&&17===t.keyCode||"mozilla"===Q.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!1)},r.prototype.clickHandler=function(t){var e=t.target;this.actualTarget=e,this.selectionSettings.persistSelection&&(this.deSelectedData=$M(this.persistSelectedData)),(me(e,Sn)||me(e,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&e.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=t.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=t.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(t);var i=!1;this.preventFocus=!0;var n,s=me(e,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(s&&s.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&me(e,Sn)),this.selectionSettings.persistSelection&&this.isPartialSelection&&me(e,"e-headerchkcelldiv")&&!e.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),s&&s.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=s.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),((e=me(e,on))&&e.parentElement.classList.contains(Sn)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=e,f(n)){var o=this.parent,a=0;if(ks(o)){var l=e.parentElement.getAttribute("data-uid");a=o.getRows().map(function(h){return h.getAttribute("data-uid")}).indexOf(l)}else a=parseInt(e.parentElement.getAttribute(ki),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Ul).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(e))&&this.rowCellSelectionHandler(a,parseInt(e.getAttribute(Ys),10)),this.parent.hoverFrozenRows(t),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(U(e,"."+Sn)),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):this.checkSelect(n);!this.parent.isCheckBoxSelection&&Q.isDevice&&!this.isSingleSel()&&this.showPopup(t)}else t.target.classList.contains("e-headercell")&&!t.target.classList.contains("e-stackedheadercell")&&(l=t.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(l)));this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,f(U(t.target,".e-unboundcell"))&&(this.preventFocus=!1)},r.prototype.popUpClickHandler=function(t){var e=t.target;U(e,".e-headercell")||t.target.classList.contains(on)||U(e,".e-gridpopup")?e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?(e.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(e.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},r.prototype.showPopup=function(t){this.selectionSettings.enableSimpleMultiRowSelection||function eoe(r,t,e){var i=r.querySelector("span"),n=r.parentElement.getBoundingClientRect(),s=t.target.getBoundingClientRect();i.className=e,r.style.display="";var o=(f(t.clientY)?t.changedTouches[0].clientY:t.clientY)>r.offsetHeight+10;r.style.top=s.top-n.top+(o?-(r.offsetHeight+10):r.offsetHeight+10)+"px",r.style.left=function wIe(r,t,e,i){var n=r.offsetWidth/2,s=eC(t).x;return s-e.left<n?e.left-i:e.right-s<n?e.right-i-2*n:s-i-n}(r,t,s,n.left)+"px",o?(r.querySelector(".e-downtail").style.display="",r.querySelector(".e-uptail").style.display="none"):(r.querySelector(".e-downtail").style.display="none",r.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),t,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},r.prototype.rowCellSelectionHandler=function(t,e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(t,this.selectionSettings.enableToggle),this.selectCell({rowIndex:t,cellIndex:e},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!U(this.target,"."+on).classList.contains(oS)?this.selectRowsByRange($t(this.prevRowIndex)?t:this.prevRowIndex,t):this.addRowsToSelection([t]),this.selectCellsByRange($t(this.prevCIdxs)?{rowIndex:t,cellIndex:e}:this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([t]),this.addCellsToSelection([{rowIndex:t,cellIndex:e}]),this.showHideBorders("none")),this.isDragged=!1},r.prototype.onCellFocused=function(t){if(this.parent.frozenRows&&t.container.isHeader&&t.byKey)if("upArrow"===t.keyArgs.action)t.isJump=this.parent.allowFiltering?"INPUT"===t.element.tagName:"TH"===t.element.tagName;else if("downArrow"===t.keyArgs.action){var e=Number(t.element.parentElement.getAttribute(ki));t.isJump=0===e}else"ctrlHome"===t.keyArgs.action&&(t.isJump=!0);var i=this.parent.isFrozenGrid()?(t.container.isHeader&&"TD"!==t.element.tagName&&t.isJump&&!this.selectionSettings.allowColumnSelection||(t.container.isContent||"TD"===t.element.tagName)&&!(t.container.isSelectable||"TD"===t.element.tagName))&&!(t.byKey&&"space"===t.keyArgs.action):(t.container.isHeader&&t.isJump||t.container.isContent&&!t.container.isSelectable)&&!(t.byKey&&"space"===t.keyArgs.action)&&!(t.element.classList.contains("e-detailrowexpand")||t.element.classList.contains("e-detailrowcollapse")),n=t.container.isHeader&&"TD"!==t.element.tagName&&!U(t.element,"."+on)&&!(t.byKey&&"space"===t.keyArgs.action);if(t.byKey&&!i){var s=t.container.isContent?t.container.indexes:t.indexes,o=s[0],a=s[1],l=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(t.container.isHeader&&("TD"===t.element.tagName||U(t.element,"."+on))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;o-=h,l.rowIndex=f(l.rowIndex)?null:l.rowIndex-h}else o+=this.parent.frozenRows,l.rowIndex=0!==l.rowIndex&&f(l.rowIndex)?null:l.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){var u=Number(t.element.getAttribute(Ys)),d=this.parent.getSelectedRowCellIndexes();d.length&&0===l.cellIndex&&(l.cellIndex=d[d.length-1].cellIndexes[0]),l.cellIndex=f(l.cellIndex)?null:l.cellIndex===a?u:u-1,a=u}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(o=parseInt(t.element.parentElement.getAttribute("data-rowindex"),10)),!(n||-1===["ctrlPlusA","escape"].indexOf(t.keyArgs.action)&&"space"!==t.keyArgs.action&&o===l.rowIndex&&a===l.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var m=this.getKeyColIndex(t);if(this.needColumnSelection&&(a=m),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===t.keyArgs.action||"shiftTab"===t.keyArgs.action||"rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)){var y=this.target.getAttribute("aria-label");y=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",y)}switch(t.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=t.element,this.isKeyAction=!0,this.applyDownUpKey(o,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,a);break;case"home":case"end":a="end"===t.keyArgs.action?this.getLastColIndex(o):0,this.applyHomeEndKey(o,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,a);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(t.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else i&&!this.parent.isCheckBoxSelection&&this.clearSelection()},r.prototype.getKeyColIndex=function(t){var e,i=null,n=t.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&me(t.element,"e-columnheader"))if(this.needColumnSelection=!!t.container.isHeader,n){if("rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)return i;e=n.getAttribute("e-mappinguid");var s=this.getstackedColumns(this.parent.getColumnByUid(e).columns),o=this.parent.getColumnIndexByUid(s[s.length-1].uid),a=this.parent.getColumnIndexByUid(s[0].uid);i=this.prevColIndex>=o?a:o}else i=this.parent.getColumnIndexByUid(t.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},r.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},r.prototype.applySpaceSelection=function(t){t.classList.contains("e-checkselectall")?(this.checkedTarget=t,this.checkSelectAll(this.checkedTarget)):t.classList.contains("e-checkselect")&&(this.checkedTarget=t,this.checkSelect(this.checkedTarget))},r.prototype.applyDownUpKey=function(t,e){var i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.selectRow(t,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(e)},r.prototype.applyUpDown=function(t){if(!(t<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var e=parseInt(this.target.getAttribute(Ys),10),i=this.parent.getFrozenColumns();if(i)this.target=e>=i?this.contentRenderer.getMovableRowByIndex(t).getElementsByClassName(on)[e-i]:this.contentRenderer.getRowByIndex(t).getElementsByClassName(on)[e];else{var n=this.contentRenderer.getRowByIndex(t);n&&(this.target=n.getElementsByClassName(on)[e])}this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")&&(this.target.getAttribute("aria-label"),this.target.setAttribute("aria-label",this.target.innerHTML))}},r.prototype.applyRightLeftKey=function(t,e){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(e):this.isCellType()&&(this.selectCell({rowIndex:t,cellIndex:e},!0),this.addAttribute(this.target))},r.prototype.applyHomeEndKey=function(t,e){this.isCellType()?this.selectCell({rowIndex:t,cellIndex:e},!0):this.addAttribute(this.parent.getCellFromIndex(t,e))},r.prototype.shiftDownKey=function(t,e){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&($t(this.prevRowIndex)?this.selectRow(this.isPartialSelection?t:0,!0):(this.selectRowsByRange(this.prevRowIndex,t),this.applyUpDown(t))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.applyShiftLeftRightKey=function(t,e){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,e):this.selectCellsByRange(this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.getstackedColumns=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i].columns?this.getstackedColumns(t[i].columns):e.push(t[i]);return e},r.prototype.applyCtrlHomeEndKey=function(t,e){this.isRowType()&&(this.selectRow(t,!0),this.addAttribute(this.parent.getCellFromIndex(t,e))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0)},r.prototype.addRemoveClassesForRow=function(t,e,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];if(t){var o=[].slice.call(t.getElementsByClassName(on)),a=t.querySelector(".e-detailrowcollapse")||t.querySelector(".e-detailrowexpand"),l=t.querySelector(".e-rowdragdrop");a&&o.push(a),l&&o.push(l),Kc.apply(void 0,[o,e].concat(n))}this.getRenderer().setSelection(t?t.getAttribute("data-uid"):null,e,i)},r.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},r.prototype.getRenderer=function(){return f(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(Ks.Content)),this.contentRenderer},r.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):this.persistSelectedData},r.prototype.selectColumn=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnByIndex(t),n=e.getColumnHeaderByUid(i.uid),s=n.classList.contains("e-columnselection");if(e.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(t)>-1;if(this.clearColDependency(),!s||!this.selectionSettings.enableToggle||o){var a={columnIndex:t,headerCell:n,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,L8),a.cancel)return void this.disableInteracted();(!e.selectionSettings.enableToggle||t!==this.prevColIndex||!s||o)&&this.updateColSelection(n,t),this.onActionComplete({columnIndex:t,headerCell:n,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},O8)}this.updateColProps(t)}}},r.prototype.selectColumnsByRange=function(t,e){var i=this.parent;if(!f(i.getColumns()[t])){var n=[];if("Single"===i.selectionSettings.type||f(e))n[0]=t;else for(var s=t<e,o=t;s?o<=e:o>=e;s?o++:o--)n.push(o);this.selectColumns(n)}},r.prototype.selectColumns=function(t){var e=this.parent,i=this.getselectedCols();if("Single"===e.selectionSettings.type&&(t=[t[0]]),e.selectionSettings.allowColumnSelection){this.clearColDependency();var n={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,L8),n.cancel)return void this.disableInteracted();for(var s=0,o=t.length;s<o;s++)this.updateColSelection(e.getColumnHeaderByUid(e.getColumnByIndex(t[s]).uid),t[s]);i=this.getselectedCols();var a={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,O8),this.updateColProps(t[0])}},r.prototype.selectColumnWithExisting=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnHeaderByUid(e.getColumnByIndex(t).uid),n=this.getselectedCols();if("Single"===e.selectionSettings.type&&this.clearColDependency(),e.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(t)>-1)this.clearColumnSelection(t);else{var s={columnIndex:t,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:e.getColumnByIndex(t),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,L8),s.cancel)return void this.disableInteracted();this.updateColSelection(i,t);var o={columnIndex:t,headerCell:n=this.getselectedCols(),column:e.getColumnByIndex(t),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,O8)}this.updateColProps(t)}}},r.prototype.clearColumnSelection=function(t){if(this.isColumnSelected){var e=this.parent;if(!f(t)&&-1===this.selectedColumnsIndexes.indexOf(t))return;var s,i=f(t)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:t,n=e.getColumnByIndex(i),o=e.getColumnByIndex(i),a={columnIndex:i,headerCell:s=n.getFreezeTableName()===dr?e.getFrozenRightColumnHeaderByIndex(i):"movable"===n.getFreezeTableName()?e.getMovableColumnHeaderByIndex(i):e.getColumnHeaderByUid(o.uid),columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(a,"columnDeselecting"))return void this.disableInteracted();for(var h=f(t)?[].slice.call(e.getHeaderContent().getElementsByClassName("e-columnselection")):[s],u=this.getSelectedColumnCells(t),d=0,m=h.length;d<m;d++)Kc([h[d]],!1,"e-columnselection");for(d=0,m=u.length;d<m;d++)Kc([u[d]],!1,"e-columnselection");f(t)?(this.columnDeselect(a,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(y){return y.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(t),1),this.parent.getColumns()[t].isSelected=!1)}},r.prototype.getselectedCols=function(){var e,t=this.parent;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},r.prototype.getSelectedColumnCells=function(t){var s,o,e=this.parent,i=!f(this.parent.rowTemplate),n=i?e.getRows():e.getDataRows();e.isFrozenGrid()&&e.getContent().querySelector("."+Gn)&&(s=i?e.getMovableRows():e.getMovableDataRows(),n=e.addMovableRows(n,s),e.getFrozenMode()===Jt&&(o=i?e.getFrozenRightRows():e.getFrozenRightDataRows(),n=e.addMovableRows(n,o)));for(var a=[],l=f(t)?".e-columnselection":'[data-colindex="'+t+'"]',h=0,u=n.length;h<u;h++)a=a.concat([].slice.call(n[h].querySelectorAll(l)));return a},r.prototype.columnDeselect=function(t,e){return"columnDeselected"===e&&delete t.cancel,this.onActionComplete(t,e),t.cancel},r.prototype.updateColProps=function(t){this.prevColIndex=t,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},r.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},r.prototype.updateColSelection=function(t,e){if(!f(this.parent.getColumns()[e])){var a,i=this.parent.getFrozenLeftCount(),n=this.parent.getMovableColumnsCount(),s=this.parent.getColumnByIndex(e),o=!f(this.parent.rowTemplate);this.selectedColumnsIndexes.push(e),this.parent.getColumns()[e].isSelected=!0,s.getFreezeTableName()===dr?(e-=i+n,a=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===s.getFreezeTableName()?(e-=i,a=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(e+=this.parent.getIndentCount(),a=o?this.parent.getRows():this.parent.getDataRows()),Kc([t],!0,"e-columnselection");for(var l=0,h=a.length;l<h;l++)a[l].classList.contains(Sn)&&(!a[l].classList.contains(qa)&&!a[l].classList.contains(Ul)||"Normal"!==this.parent.editSettings.mode||f(a[l].querySelector("tr").childNodes[e])?f(a[l].childNodes[e])||Kc([a[l].childNodes[e]],!0,"e-columnselection"):Kc([a[l].querySelector("tr").childNodes[e]],!0,"e-columnselection"))}},r.prototype.headerSelectionHandler=function(t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(t):this.isMultiShiftRequest?this.selectColumnsByRange($t(this.prevColIndex)?t:this.prevColIndex,t):this.selectColumnWithExisting(t)},r.prototype.addEventListener_checkbox=function(){var t=this;this.parent.on(Uc,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(ph,this.onDataBoundFunction),this.parent.on(wG,this.onDataBoundFunction),this.parent.on(is,this.checkBoxSelectionChanged,this),this.parent.on(uG,this.initPerisistSelection,this),this.parent.on(np,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Ui,this.actionCompleteFunc),this.parent.on(ol,this.clickHandler,this),this.resizeEndFn=function(){t.updateAutoFillPosition(),t.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},r.prototype.removeEventListener_checkbox=function(){this.parent.off(Uc,this.dataReady),this.parent.removeEventListener(ph,this.onDataBoundFunction),this.parent.removeEventListener(Ui,this.actionCompleteFunc),this.parent.off(wG,this.onDataBoundFunction),this.parent.off(np,this.setCheckAllForEmptyGrid),this.parent.off(ol,this.clickHandler),this.parent.off(uG,this.initPerisistSelection)},r.prototype.setCheckAllForEmptyGrid=function(){var t=this.getCheckAllBox();t&&(this.parent.isCheckBoxSelection=!0,z([t.nextElementSibling],["e-check","e-stop","e-uncheck"]))},r.prototype.dataReady=function(t){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==t.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},r.prototype.actionCompleteHandler=function(t){"save"===t.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},r.prototype.selectRowIndex=function(t){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=f(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex?t:-1},r.prototype.disableInteracted=function(){this.isInteracted=!1},r.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},r}(),Gse=function(){function r(t){this.parent=t,this.addEventListener()}return r.prototype.search=function(t){var e=this.parent;t=f(t)?"":t,ap(e)?e.notify(lu,{instance:this,handler:this.search,arg1:t}):t!==e.searchSettings.key?(e.searchSettings.key=t.toString(),e.dataBind()):this.refreshSearch&&e.refresh()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Wa,this.onPropertyChanged,this),this.parent.on(Xre,this.onSearchComplete,this),this.parent.on(gn,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Ui,this.actionCompleteFunc),this.parent.on(SV,this.cancelBeginEvent,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Wa,this.onPropertyChanged),this.parent.off(Xre,this.onSearchComplete),this.parent.off(gn,this.destroy),this.parent.removeEventListener(Ui,this.actionCompleteFunc),this.parent.off(SV,this.cancelBeginEvent))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(f(t.properties.key)?this.parent.notify(Yo,{requestType:"searching",type:mr}):this.parent.notify(Yo,{requestType:"searching",type:mr,searchString:this.parent.searchSettings.key}))},r.prototype.onSearchComplete=function(t){this.parent.trigger(Ui,de(t,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Ui}))},r.prototype.onActionComplete=function(t){this.refreshSearch="searching"!==t.requestType},r.prototype.cancelBeginEvent=function(t){"searching"===t.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},r.prototype.getModuleName=function(){return"search"},r}(),eIe=function(){function r(t){this.colName=[],this.isShowHide=!1,this.parent=t,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ng,handler:this.batchChanges},{event:"cancelcnfrmDlg",handler:this.resetColumnState}],wo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||wo(this.parent,this.evtHandlers,!1)},r.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},r.prototype.show=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(nS,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!0;this.setVisible(n)},r.prototype.hide=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(nS,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!1;this.setVisible(n)},r.prototype.getToggleFields=function(t){return"string"==typeof t?[t]:t},r.prototype.getColumns=function(t,e){var i=this;return uS(t,function(s){return uS(i.parent.columnModel,function(o){if(o[e]===s)return o})[0]})},r.prototype.batchActionPrevent=function(t,e){return void 0===e&&(e=[]),!ap(this.parent)||(this.colName=t,this.changedCol=e,this.parent.closeEdit(),!1)},r.prototype.resetColumnState=function(){if(this.isShowHide)for(var t=0;t<this.colName.length;t++)this.colName[t].visible=!this.colName[t].visible},r.prototype.setVisible=function(t,e){var i=this;if(void 0===e&&(e=[]),this.isShowHide=!0,this.batchActionPrevent(t,e)){var n={requestType:"columnstate",cancel:!1,columns:e=e.length>0?e:t};this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(mr,n,function(o){var a=i.parent.getColumns();if(t=f(t)?a:t,o.cancel)return i.parent.notify("reset-columns",{showHideArgs:o}),void(t.length>0&&(t[0].visible=!0));ks(i.parent)&&i.parent.contentModule.emptyVcRows(),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?t.filter(function(u){return a.some(function(d){return u.field===d.field})}).length&&i.parent.notify(Wc,t):i.parent.notify(Wc,t),i.parent.trigger(Ui,{requestType:"columnstate",columns:e}),"All"!==i.parent.columnQueryMode&&i.parent.refresh()})}},r}(),Kse=function(){function r(t){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=t,this.widthService=new AG(t),this.addEventListener()}return r.prototype.getModuleName=function(){return"scroll"},r.prototype.setWidth=function(t){this.parent.element.style.width=ot(this.parent.width),t&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},r.prototype.setHeight=function(){var t=0,e=this.parent.getContent().querySelector("."+gs),i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-r.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var n=this.parent.getHeaderContent().querySelector(lt+":not(.e-masked-tbody)");t=n?n.offsetHeight:0,n&&t?t-=n.getElementsByClassName(Ul).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight()),e.style.height=ot(i-t)}else e.style.height=ot(i);this.ensureOverflow(e),this.parent.isFrozenGrid()&&this.refresh()},r.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),e=r.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),n="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Jt?"0.5px":"1px";t.querySelector("."+js).style[i.border]=e>0?n:"0px",t.style[i.padding]=e>0?e+"px":"0px"},r.prototype.removePadding=function(t){var e=this.getCssProperties(t),i=this.parent.getHeaderContent().querySelector("."+js);i.style[e.border]="",i.parentElement.style[e.padding]="";var n=this.parent.getFooterContent();n&&n.classList.contains("e-footerpadding")&&n.classList.remove("e-footerpadding")},r.prototype.refresh=function(){if("100%"===this.parent.height){var t=this.parent.getContent();this.parent.element.style.height="100%";var e=this.widthService.getSiblingsHeight(t);t.style.height="calc(100% - "+e+"px)",this.parent.isFrozenGrid()&&(t.firstElementChild.style.height="calc(100% - "+tC()+"px)")}},r.prototype.getThreshold=function(){return"mozilla"===Q.info.name?.5:1},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(np,this.wireEvents,this),this.parent.on(is,this.wireEvents,this),this.parent.on(jr,this.onPropertyChanged,this),this.parent.on(K8,this.wireEvents,this),this.parent.on(Mo,this.setScrollLeft,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(np,this.wireEvents),this.parent.off(is,this.wireEvents),this.parent.off(jr,this.onPropertyChanged),this.parent.off(K8,this.wireEvents),this.parent.off(Mo,this.setScrollLeft))},r.prototype.setScrollLeft=function(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+js).scrollLeft=this.previousValues.left},r.prototype.onFrozenContentScroll=function(){var t=this;return function(e){null===t.content.querySelector(lt)||t.parent.isPreventScrollEvent||(!f(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify(AV,e),t.previousValues.top=e.target.scrollTop)}},r.prototype.onContentScroll=function(t){var e=this,i=t,n=i.classList.contains(js);return function(s){if(null!==e.content.querySelector(lt)&&!e.parent.isPreventScrollEvent){var o=s.target,a=o.scrollLeft;if(!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&e.parent.notify(AV,{target:s.target,isLeft:e.previousValues.left!==a}),e.parent.groupSettings.columns.length&&e.parent.groupSettings.enableLazyLoading){var l=e.previousValues.top<e.parent.getContent().firstElementChild.scrollTop;e.parent.notify("lazy-load-scroll-handler",{scrollDown:l})}e.parent.notify("virtual-scroll-edit",{});var h=o.classList.contains("e-summarycontent");if(e.previousValues.left===a)return void(e.previousValues.top=n?o.scrollTop:e.previousValues.top);e.parent.notify("close-filter-dialog",s),i.scrollLeft=a,h&&(e.header.scrollLeft=a),e.previousValues.left=a,e.parent.notify("scroll",{left:a})}}},r.prototype.onCustomScrollbarScroll=function(t,e){var i=this,n=t,s=e;return function(o){if(null!==i.content.querySelector(lt)){var l=o.target.scrollLeft;i.previousValues.left!==l&&(n.scrollLeft=l,s.scrollLeft=l,i.previousValues.left=l,i.parent.notify("scroll",{left:l}))}}},r.prototype.onTouchScroll=function(t){var e=this,i=t;return function(n){if("mouse"!==n.pointerType){var s=e.parent.isFrozenGrid(),o=e.getPointXY(n),a=i.scrollLeft+(e.pageXY.x-o.x),l=s?e.parent.getHeaderContent().querySelector("."+nr):e.parent.getHeaderContent().querySelector("."+js),h=s?e.parent.getContent().querySelector("."+Gn):e.parent.getContent().querySelector("."+gs);e.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a||(n.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,s&&(e.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=a),e.pageXY.x=o.x,e.previousValues.left=a)}}},r.prototype.setPageXY=function(){var t=this;return function(e){"mouse"!==e.pointerType&&(t.pageXY=t.getPointXY(e))}},r.prototype.getPointXY=function(t){var e={x:0,y:0};return t.touches&&t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e},r.prototype.getScrollbleParent=function(t){if(null===t)return null;var e=f(t.tagName)?t.scrollingElement:t,i=document.defaultView.getComputedStyle(e,null).overflowY;return e.scrollHeight>e.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===t.tagName||"BODY"===t.tagName?t:this.getScrollbleParent(t.parentNode)},r.prototype.addStickyListener=function(t){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),t&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,T.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(T.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},r.prototype.wireEvents=function(){var t=this;if(this.oneTimeReady){var e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+gs),this.header=this.parent.getHeaderContent().querySelector("."+js);var i=this.content.querySelector("."+Gn),n=this.header.querySelector("."+nr),s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(T.add(e?n:this.header,"touchstart pointerdown",this.setPageXY(),this),T.add(e?n:this.header,"touchmove pointermove",this.onTouchScroll(e?i:this.content),this)),this.parent.isFrozenGrid()?(T.add(s,"scroll",this.onCustomScrollbarScroll(i,n),this),T.add(i,"scroll",this.onCustomScrollbarScroll(s,n),this),T.add(n,"scroll",this.onCustomScrollbarScroll(s,i),this),T.add(this.content,"scroll",this.onFrozenContentScroll(),this),T.add(n,"touchstart pointerdown",this.setPageXY(),this),T.add(n,"touchmove pointermove",this.onTouchScroll(i),this),T.add(i,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(Q.userAgent.toLowerCase())&&Q.isDevice||T.add(i,"touchmove pointermove",this.onTouchScroll(n),this)):(T.add(this.content,"scroll",this.onContentScroll(this.header),this),T.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&T.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,l,h,o=this.parent.getContentTable();Xse(function(){a=t.header.scrollLeft,l=o.scrollHeight,h=t.parent.getContent().clientHeight},function(){var u={cancel:!1};t.parent.notify("check-scroll-reset",u),!t.parent.enableVirtualization&&!t.parent.enableInfiniteScrolling&&(l<h&&(N(o.querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.isFrozenGrid()&&(N(t.parent.getContent().querySelector("."+Gn).querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.getFrozenRightColumnsCount()&&N(t.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),u.cancel||((t.parent.frozenRows>0||t.parent.isFrozenGrid())&&t.header.querySelector("."+nr)?t.header.querySelector("."+nr).scrollLeft=t.previousValues.left:t.header.scrollLeft=t.previousValues.left,t.content.scrollLeft=t.previousValues.left,t.content.scrollTop=t.previousValues.top)),t.parent.enableColumnVirtualization||(t.content.scrollLeft=a),t.parent.isFrozenGrid()&&t.header.querySelector("."+nr)&&(t.header.querySelector("."+nr).scrollLeft=t.content.querySelector("."+Gn).scrollLeft)}),this.parent.isPreventScrollEvent=!1},r.prototype.getCssProperties=function(t){var e={},i=f(t)?this.parent.enableRtl:t;return e.border=i?"borderLeftWidth":"borderRightWidth",e.padding=i?"paddingLeft":"paddingRight",e},r.prototype.ensureOverflow=function(t){t.style.overflowY="auto"===this.parent.height?"auto":"scroll"},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!f(t.properties.width)))},r.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var t=this.parent.getContent().getClientRects()[0];if(t){var e=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=e.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,a=t.top-(o<0?0:o),l=t.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(a<s&&t.bottom>0){e.classList.add("e-sticky");var u=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,u,t.width,l,!0),u+=n.getClientRects()[0].height),i&&(this.setSticky(i,u,t.width,l,!0),u+=i.getClientRects()[0].height),this.setSticky(e,u,t.width,l,!0),f(h)||(h.style.position="fixed")}else if(e.classList.contains("e-sticky")){this.setSticky(e,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);var d=this.parent.element.querySelector(".e-ccdlg");d&&d.classList.remove("e-sticky"),f(h)||(h.style.position="absolute")}this.parent.notify("sticky-scroll-complete",{})}}},r.prototype.setSticky=function(t,e,i,n,s){s?(t.style.width=i+"px",t.classList.add("e-sticky")):t.classList.remove("e-sticky"),t.style.top=null!=e?e+"px":"",t.style.left=null!==n?parseInt(t.style.left,10)!==n?n+"px":t.style.left:""},r.prototype.destroy=function(){var t=this.parent.element;if(t&&(t.querySelector("."+$s)||t.querySelector("."+zs))){this.removeEventListener();var e=this.parent.getContent().querySelector("."+gs);T.remove(e,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),z([this.parent.getHeaderContent().querySelector("."+js)],js),z([e],gs),e.style.height="",this.parent.element.style.width=""}},r.getScrollBarWidth=function(){return tC()},r}(),$se=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rv=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},tIe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.templateFn={},e}return $se(t,r),t.prototype.setFormatter=function(e){this.formatFn=e},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[pl(Nt,Nt.Summary)]={fn:Pi(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[pl(Nt,Nt.GroupSummary)]={fn:Pi(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[pl(Nt,Nt.CaptionSummary)]={fn:Pi(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(e){return this.templateFn[pl(Nt,e)]},t.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Rv([E()],t.prototype,"type",void 0),Rv([E()],t.prototype,"field",void 0),Rv([E()],t.prototype,"columnName",void 0),Rv([E()],t.prototype,"format",void 0),Rv([E()],t.prototype,"footerTemplate",void 0),Rv([E()],t.prototype,"groupFooterTemplate",void 0),Rv([E()],t.prototype,"groupCaptionTemplate",void 0),Rv([E()],t.prototype,"customAggregate",void 0),t}(Ti),iIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return $se(t,r),Rv([_o([],tIe)],t.prototype,"columns",void 0),t}(Ti),nIe=function(){function r(t,e){this.copyContent="",this.isSelect=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(is,this.initialEnd,this),this.parent.on(_s,this.keyDownHandler,this),this.parent.on(ol,this.clickHandler,this),T.add(this.parent.element,"keydown",this.pasteHandler,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(_s,this.keyDownHandler),this.parent.off(is,this.initialEnd),this.parent.off(ol,this.clickHandler),T.remove(this.parent.element,"keydown",this.pasteHandler))},r.prototype.clickHandler=function(t){var e=t.target;e=me(e,"e-rowcell")},r.prototype.pasteHandler=function(t){var e=this,i=this.parent,n=/(Mac)/i.test(navigator.platform);if(67===t.keyCode&&n&&t.metaKey&&!i.isEdit&&this.copy(),86===t.keyCode&&(t.ctrlKey||n&&t.metaKey)&&!i.isEdit){if(!U(document.activeElement,"."+on)||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var o=window.scrollX,a=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){e.activeElement.focus(),window.scrollTo(o,a),e.paste(e.clipBoardTextArea.value,e.parent.getSelectedRowCellIndexes()[0].rowIndex,e.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}},r.prototype.paste=function(t,e,i){var a,l,h,n=this.parent,s=i,o=e;if(n.editSettings.allowEditing&&"Batch"===n.editSettings.mode&&"Cell"===n.selectionSettings.mode&&"Flow"!==n.selectionSettings.cellSelectionMode){var d,y,C,u=t.split("\n"),m=n.getDataRows(),S=this.parent.isFrozenGrid();S&&(y=n.getMovableDataRows(),n.getFrozenRightColumnsCount()&&(C=n.getFrozenRightDataRows()));for(var I=0;I<u.length;I++){if(d=u[I].split("\t"),s=i,I===u.length-1&&""===u[I]||$t(n.getRowByIndex(o))){s++;break}for(var k=0;k<d.length;k++){if(h=n.getCellFromIndex(o,s),S){var L=y[o];h=!!m[o].querySelector('[data-colindex="'+s+'"]')||L.querySelector('[data-colindex="'+s+'"]'),C&&!h&&(h=C[o].querySelector('[data-colindex="'+s+'"]'))}if(!h){s++;break}if(l=(a=n.getColumnByIndex(s)).getParser()?a.getParser()(d[k]):d[k],a.allowEditing&&!a.isPrimaryKey&&!a.template){var j={column:a,data:l,rowIndex:o};this.parent.trigger("beforePaste",j),o=j.rowIndex,j.cancel||n.editModule&&("number"===a.type?this.parent.editModule.updateCell(o,a.field,parseFloat(j.data)):n.editModule.updateCell(o,a.field,j.data))}s++}o++}n.selectionModule.selectCellsByRange({rowIndex:e,cellIndex:i},{rowIndex:o-1,cellIndex:s-1});var G=this.parent.getCellFromIndex(o-1,s-1);G&&li(G,["e-focus","e-focused"],[])}},r.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(is,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},r.prototype.keyDownHandler=function(t){"ctrlPlusC"===t.action?this.copy():"ctrlShiftPlusH"===t.action&&this.copy(!0)},r.prototype.setCopyData=function(t){if(""===window.getSelection().toString()){var e=this.parent.isFrozenGrid();this.clipBoardTextArea.value=this.copyContent="";var i=void 0,n=void 0,s=this.parent.getRows();if(e&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Jt&&(n=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){var o=this.parent.getSelectedRowIndexes().sort(function(y,C){return y-C});if(t){for(var a=[],l=0;l<this.parent.getVisibleColumns().length;l++)a[l]=this.parent.getVisibleColumns()[l].headerText;this.getCopyData(a,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<o.length;l++){l>0&&(this.copyContent+="\n");var h=[].slice.call(s[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"));e&&(h.push.apply(h,[].slice.call(i[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"))),n&&h.push.apply(h,[].slice.call(n[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(h,!1,"\t",t)}}else{var u=this.checkBoxSelection();if(u.status){if(t){var d=[];for(l=0;l<u.colIndexes.length;l++)d.push(this.parent.getColumnHeaderByIndex(u.colIndexes[l]));this.getCopyData(d,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<u.rowIndexes.length;l++)l>0&&(this.copyContent+="\n"),h=[].slice.call(s[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")),e&&(h.push.apply(h,[].slice.call(i[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground"))),n&&h.push.apply(h,[].slice.call(n[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(h,!1,"\t",t)}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",t)}var m={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",m),m.cancel)return;this.clipBoardTextArea.value=this.copyContent=m.data,Q.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},r.prototype.getCopyData=function(t,e,i,n){for(var s="string"!=typeof t[0],o=0;o<t.length;o++){if(n&&e){var a=parseInt(t[o].getAttribute(Ys),10);this.copyContent+=this.parent.getColumns()[a].headerText+"\n"}s?t[o].classList.contains("e-hide")||(this.copyContent+=t[o].innerText):this.copyContent+=t[o],o<t.length-1&&(this.copyContent+=i)}},r.prototype.copy=function(t){document.queryCommandSupported("copy")&&(this.setCopyData(t),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},r.prototype.getModuleName=function(){return"clipboard"},r.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&He(this.clipBoardTextArea)},r.prototype.checkBoxSelection=function(){var t=this.parent,e={status:!1};if("Cell"===t.selectionSettings.mode){var i=t.getSelectedRowCellIndexes(),n=void 0,s=[],o=void 0;for(o=0;o<i.length&&(i[o].cellIndexes.length&&s.push(i[o].rowIndex),!i[o].cellIndexes.length||(n||(n=JSON.stringify(i[o].cellIndexes.sort())),n===JSON.stringify(i[o].cellIndexes.sort())));o++);s.sort(function(a,l){return a-l}),o===i.length&&s[s.length-1]-s[0]==s.length-1&&(e={status:!0,rowIndexes:s,colIndexes:i[0].cellIndexes})}return e},r}(),sc=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ee=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},rIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E()],t.prototype,"field",void 0),Ee([E()],t.prototype,"direction",void 0),Ee([E(!1)],t.prototype,"isFromGroup",void 0),t}(Ti),sIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([_o([],rIe)],t.prototype,"columns",void 0),Ee([E(!0)],t.prototype,"allowUnsort",void 0),t}(Ti),oIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E()],t.prototype,"field",void 0),Ee([E()],t.prototype,"operator",void 0),Ee([E()],t.prototype,"value",void 0),Ee([E()],t.prototype,"matchCase",void 0),Ee([E(!1)],t.prototype,"ignoreAccent",void 0),Ee([E()],t.prototype,"predicate",void 0),Ee([E({})],t.prototype,"actualFilterValue",void 0),Ee([E({})],t.prototype,"actualOperator",void 0),Ee([E()],t.prototype,"type",void 0),Ee([E()],t.prototype,"ejpredicate",void 0),Ee([E()],t.prototype,"uid",void 0),Ee([E()],t.prototype,"isForeignKey",void 0),Ee([E()],t.prototype,"condition",void 0),t}(Ti),aIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E(!1)],t.prototype,"enableCache",void 0),Ee([E(3)],t.prototype,"maxBlocks",void 0),Ee([E(3)],t.prototype,"initialBlocks",void 0),t}(Ti),lIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([_o([],oIe)],t.prototype,"columns",void 0),Ee([E("FilterBar")],t.prototype,"type",void 0),Ee([E()],t.prototype,"mode",void 0),Ee([E(!0)],t.prototype,"showFilterBarStatus",void 0),Ee([E(1500)],t.prototype,"immediateModeDelay",void 0),Ee([E()],t.prototype,"operators",void 0),Ee([E(!1)],t.prototype,"ignoreAccent",void 0),Ee([E(!1)],t.prototype,"enableCaseSensitivity",void 0),Ee([E(!1)],t.prototype,"showFilterBarOperator",void 0),t}(Ti),hIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E("Row")],t.prototype,"mode",void 0),Ee([E("Flow")],t.prototype,"cellSelectionMode",void 0),Ee([E("Single")],t.prototype,"type",void 0),Ee([E(!1)],t.prototype,"checkboxOnly",void 0),Ee([E(!1)],t.prototype,"persistSelection",void 0),Ee([E("Default")],t.prototype,"checkboxMode",void 0),Ee([E(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),Ee([E(!0)],t.prototype,"enableToggle",void 0),Ee([E(!1)],t.prototype,"allowColumnSelection",void 0),t}(Ti),uIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E([])],t.prototype,"fields",void 0),Ee([E("")],t.prototype,"key",void 0),Ee([E("contains")],t.prototype,"operator",void 0),Ee([E(!0)],t.prototype,"ignoreCase",void 0),Ee([E(!1)],t.prototype,"ignoreAccent",void 0),t}(Ti),cIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E()],t.prototype,"targetID",void 0),t}(Ti),dIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E("Both")],t.prototype,"wrapMode",void 0),t}(Ti),pIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E("Normal")],t.prototype,"mode",void 0),t}(Ti),fIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E(!0)],t.prototype,"showDropArea",void 0),Ee([E(!1)],t.prototype,"allowReordering",void 0),Ee([E(!1)],t.prototype,"showToggleButton",void 0),Ee([E(!1)],t.prototype,"showGroupedColumn",void 0),Ee([E(!0)],t.prototype,"showUngroupButton",void 0),Ee([E(!1)],t.prototype,"disablePageWiseAggregates",void 0),Ee([E([])],t.prototype,"columns",void 0),Ee([E()],t.prototype,"captionTemplate",void 0),Ee([E(!1)],t.prototype,"enableLazyLoading",void 0),t}(Ti),gIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E(!1)],t.prototype,"allowAdding",void 0),Ee([E(!1)],t.prototype,"allowEditing",void 0),Ee([E(!1)],t.prototype,"allowDeleting",void 0),Ee([E("Normal")],t.prototype,"mode",void 0),Ee([E(!0)],t.prototype,"allowEditOnDblClick",void 0),Ee([E(!0)],t.prototype,"showConfirmDialog",void 0),Ee([E(!1)],t.prototype,"showDeleteConfirmDialog",void 0),Ee([E("")],t.prototype,"template",void 0),Ee([E("")],t.prototype,"headerTemplate",void 0),Ee([E("")],t.prototype,"footerTemplate",void 0),Ee([E("Top")],t.prototype,"newRowPosition",void 0),Ee([E({})],t.prototype,"dialog",void 0),Ee([E(!1)],t.prototype,"allowNextRowEdit",void 0),t}(Ti),mIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return sc(t,r),Ee([E("Spinner")],t.prototype,"indicatorType",void 0),t}(Ti),zV=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isPreventScrollEvent=!1,s.inViewIndexes=[],s.keyA=!1,s.frozenRightCount=0,s.frozenLeftCount=0,s.tablesCount=1,s.movableCount=0,s.visibleFrozenLeft=0,s.visibleFrozenRight=0,s.visibleMovable=0,s.frozenLeftColumns=[],s.frozenRightColumns=[],s.movableColumns=[],s.media={},s.isFreezeRefresh=!1,s.tableIndex=0,s.componentRefresh=nn.prototype.refresh,s.isVirtualAdaptive=!1,s.vRows=[],s.vcRows=[],s.vGroupOffsets={},s.rowUid=0,s.currentViewData=[],s.isManualRefresh=!1,s.isAutoFitColumns=!1,s.enableDeepCompare=!1,s.totalDataRecordsCount=0,s.disableSelectedRecords=[],s.partialSelectedRecords=[],s.lockcolPositionCount=0,s.prevPageMoving=!1,s.pageTemplateChange=!1,s.isAutoGen=!1,s.mediaBindInstance={},s.commandDelIndex=void 0,s.asyncTimeOut=50,s.isExportGrid=!1,s.enableLogger=!0,s.needsID=!0,e.Inject(qse),jt("mergePersistData",s.mergePersistGridData,s),s}var e;return sc(t,r),e=t,t.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],n={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},s=0;s<i.length;s++)for(var o=this[i[s]],a=0,l=n[i[s]];a<l.length;a++)delete o[l[a]];var u=this.pageSettings.template,d=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:d},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!f(this.pagerTemplate);var m=this.addOnPersist(i);return d.template=u,this.setProperties({pageSettings:d},!0),m},t.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this]}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),i.push({member:"resize",args:[this]}),this.allowReordering&&i.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(i)),i},t.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&i.push({member:"logger",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new jDe,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=nn.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{datarole:"grid"}),kc({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new VDe(this,this.serviceLocator),this.searchModule=new Gse(this),this.scrollModule=new Kse(this),this.notify(Lf,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),aD(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(X8,{}),this.getMediaColumns(),UV(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner(),this.notify(Ua,{}),"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},t.prototype.showSpinner=function(){this.isExportGrid||rh(this.element)},t.prototype.hideSpinner=function(){this.isExportGrid||Nl(this.element)},t.prototype.showMaskRow=function(i,n){var s=this.getHeaderContent().firstChild,o=this.getContent().firstChild,a=this.getFooterContent();if(n){var l=n.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),u='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var d=0;d<h;d++){l.innerHTML+=u;var m=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));m[0].classList.add("e-mask-checkbox-filter-intent"),m[1].classList.add("e-mask-checkbox-filter-span-intent")}}else{if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(o.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var C=0===(y=o.getBoundingClientRect().height)?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:y,S=Math.ceil(C/this.getRowHeight());return"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(s,1)),void(this.contentMaskTable=this.createEmptyMaskTable(o,S))}if(this.maskRowContentScroll=!(!this.enableVirtualization||!i),!(this.contentMaskTable||this.isFrozenGrid()&&this.enableColumnVirtualization&&"X"===i)){var I=o;if(this.isFrozenGrid()){if(!this.isInitialLoad&&!this.enableVirtualization&&this.frozenRows&&"auto"!==this.height){var y=I.getBoundingClientRect().height-this.frozenRows*this.getRowHeight();I.style.height=y+"px"}I=I.querySelector(".e-frozen-left-content, .e-frozen-right-content")}else this.enableVirtualization&&(I=I.querySelector(".e-virtualtable"));f(I.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(I,this.getContentMaskColumns(),i))}if(this.headerMaskTable||!(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===i)||this.isFrozenGrid()&&(this.enableVirtualization&&"Y"===i||this.enableColumnVirtualization&&"X"===i||this.enableInfiniteScrolling&&"down"===i)||(I=s,this.isFrozenGrid()?I=I.querySelector(".e-frozen-left-header, .e-frozen-right-header"):this.enableColumnVirtualization&&"X"===i&&(I=I.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(I,this.getContentMaskColumns(),i)),this.movableHeaderMaskTable||!this.isFrozenGrid()||this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i||(I=s.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(I=I.querySelector(".e-virtualtable")),this.movableHeaderMaskTable=this.createMaskTable(I,this.getMovableContentMaskColumns(),i)),!this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&!(this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i)&&(this.rightHeaderMaskTable=this.createMaskTable(s.querySelector(".e-frozen-right-header"),this.getRightContentMaskColumns(),i)),!this.movableContentMaskTable&&this.isFrozenGrid()&&(I=o.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(I=I.querySelector(".e-virtualtable")),f(I.querySelector("tbody"))||(this.movableContentMaskTable=this.createMaskTable(I,this.getMovableContentMaskColumns(),i))),!this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&(this.rightContentMaskTable=this.createMaskTable(o.querySelector(".e-frozen-right-content"),this.getRightContentMaskColumns(),i)),a&&a.querySelector(".e-summaryrow")){var k=a.firstChild;if(!this.footerContentMaskTable){var O=k;this.isFrozenGrid()&&(O=O.querySelector(".e-frozen-left-footercontent, .e-frozen-right-footercontent")),this.footerContentMaskTable=this.createMaskTable(O)}this.isFrozenGrid()&&(this.movableFooterContentMaskTable||(this.movableFooterContentMaskTable=this.createMaskTable(k.querySelector(".e-movablefootercontent"))),"Left-Right"===this.getFrozenMode()&&!this.rightFooterContentMaskTable&&(this.rightFooterContentMaskTable=this.createMaskTable(k.querySelector(".e-frozen-right-footercontent"))))}this.enableVirtualization&&i||T.add(o,"scroll",this.translateMaskRow,this)}},t.prototype.getContentMaskColumns=function(){var i=this.getColumns();return this.isFrozenGrid()&&("Left"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode()?i=this.frozenColumns?i.slice(0,this.frozenColumns):this.getFrozenLeftColumns():"Right"===this.getFrozenMode()&&(i=this.getFrozenRightColumns())),i},t.prototype.getMovableContentMaskColumns=function(){var i=this.getColumns();return this.frozenColumns?i.slice(this.frozenColumns,i.length):this.getMovableColumns()},t.prototype.getRightContentMaskColumns=function(){return this.getFrozenRightColumns()},t.prototype.createEmptyMaskTable=function(i,n){var s=this.createElement("table",{className:"e-table e-masked-table"}),o=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<n;h++)o.appendChild(a.cloneNode(!0));return s.appendChild(o),i.appendChild(s),s},t.prototype.createMaskTable=function(i,n,s){var o=i,a=!!U(o,".e-gridheader"),l=!!U(o,".e-gridcontent"),h=!!U(o,".e-gridfooter"),u=this.getContent().firstChild,d=u.scrollHeight,m=o.querySelector("table");this.isFrozenGrid()&&(l&&(o.style.overflow="hidden"),o.style.position="relative");var y=m.cloneNode();y.removeAttribute("role"),y.removeAttribute("id"),y.removeAttribute("aria-multiselectable"),y.removeAttribute("aria-colcount"),y.removeAttribute("aria-rowcount"),y.style.position="absolute",y.style.zIndex="1",y.style.width=m.getBoundingClientRect().width+"px",a&&!(this.enableColumnVirtualization&&"X"===s)&&(y.style.transform="translate(0px,"+m.querySelector("thead").getBoundingClientRect().height+"px)"),y.setAttribute("class","e-table e-masked-table");var C=m.querySelector("colgroup").cloneNode(!0);if(C.removeAttribute("id"),C.setAttribute("class","e-masked-colgroup"),y.appendChild(C),a&&this.enableColumnVirtualization&&"X"===s){var S=this.createMaskRow(C,n),I=m.querySelector("thead"),k=[].slice.call(I.querySelectorAll("tr")),O=I.cloneNode();O.removeAttribute("role"),O.setAttribute("class","e-masked-thead");for(var L=k.length,B=0;B<L;B++)O.appendChild(S.cloneNode(!0)),O.childNodes[B].style.height=k[B].getBoundingClientRect().height+"px";y.appendChild(O)}var j=m.querySelector("tbody").cloneNode();j.removeAttribute("role"),j.setAttribute("class","e-masked-tbody");var G=m.querySelector("tbody");if(l||a&&this.isFrozenGrid()){var ae=u;if(L=a&&this.isFrozenGrid()?this.frozenRows:Math.ceil(ae.getBoundingClientRect().height/this.getRowHeight()),G.querySelector(".e-emptyrow")||!G.childNodes.length||l&&this.childGrid){var ve=(S=this.createMaskRow(C,n)).cloneNode(!0);for(ve.classList.add("e-altrow"),B=0;B<L;B++){var xe=l&&this.isFrozenGrid()&&this.frozenRows?this.frozenRows+1:1;j.appendChild((B+xe)%2==0?ve.cloneNode(!0):S.cloneNode(!0))}}else{k=[].slice.call(G.querySelectorAll('tr:not([style*="display:none"]):not([style*="display: none"])'));var oe=G.querySelector(".e-addedrow, .e-editedrow"),Ae=void 0;for(oe&&(Ae=k.indexOf(oe),oe.classList.contains("e-addedrow")?k.splice(Ae,2):k.splice(Ae,1)),L=a&&this.isFrozenGrid()||this.enableVirtualization&&s?k.length:L<=k.length?L:k.length,B=0;B<L;B++)j.appendChild(this.applyMaskRow(k[B].cloneNode(!0),k[B].getBoundingClientRect().height));if(oe&&oe.classList.contains("e-editedrow")){var De=j.childNodes[Ae];De.style.height=this.getRowHeight()+"px",De.classList.add("e-row"),oe.classList.contains("e-altrow")&&De.classList.add("e-altrow")}}}if(y.appendChild(j),h){var ge=m.querySelector("tfoot"),Re=ge.cloneNode();for(Re.setAttribute("class","e-masked-tfoot"),k=[].slice.call(ge.querySelectorAll("tr")),B=0;B<k.length;B++)Re.appendChild(this.applyMaskRow(k[B].cloneNode(!0),k[B].getBoundingClientRect().height));y.appendChild(Re)}if(o.insertBefore(y,o.firstChild),a&&this.isFrozenGrid()&&G.getBoundingClientRect().height<y.querySelector("tbody").getBoundingClientRect().height){var We=y.querySelector("tbody").getBoundingClientRect().height-G.getBoundingClientRect().height,Se=this.createElement("div",{className:"e-masked-table-holder",attrs:{style:"height: "+We+"px;"}});o.appendChild(Se)}else a&&this.isFrozenGrid()&&(!this.enableColumnVirtualization||"X"!==s)&&(y.style.height=o.getBoundingClientRect().height-m.querySelector("thead").getBoundingClientRect().height+"px");if(l&&(!this.enableVirtualization||!s)){var Oe=d-y.getBoundingClientRect().height,Ve=u.scrollTop<=(Oe=Oe<0?0:Oe)?u.scrollTop:Oe;this.enableVirtualization&&(Ve-=PG(U(o,".e-virtualtable")).height),y.style.transform="translate(0px,"+Ve+"px)"}return y},t.prototype.applyMaskRow=function(i,n){var s=i;s.removeAttribute("role"),s.removeAttribute("aria-rowindex"),s.removeAttribute("data-rowindex"),s.removeAttribute("data-uid"),s.classList.add("e-masked-row"),s.style.height=n+"px";for(var o=[].slice.call(s.childNodes),a=0;a<o.length;a++){var l=o[a],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return s},t.prototype.createMaskRow=function(i,n){var s=i,o=n,a=this.createElement("tr",{className:"e-masked-row e-row"});"Vertical"!==this.rowRenderingMode&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,u=0;h<s.childNodes.length;h++){var d=s.childNodes[h],m=l.cloneNode();m.innerHTML=this.getShimmerTemplate(),d.classList.contains("e-group-intent")||d.classList.contains("e-detail-intent")||d.classList.contains("e-drag-intent")?d.classList.contains("e-group-intent")?m.firstChild.classList.add("e-mask-group-intent"):d.classList.contains("e-detail-intent")?m.firstChild.classList.add("e-mask-detail-intent"):d.classList.contains("e-drag-intent")&&m.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&o[u]&&m.setAttribute("data-cell",o[u].headerText?o[u].headerText:o[u].field),"none"===d.style.display?m.classList.add("e-hide"):(m.style.textAlign=o[u]&&o[u].textAlign?o[u].textAlign.toLowerCase():this.enableRtl?"right":"left",o[u]&&("checkbox"===o[u].type||o[u].displayAsCheckBox)&&m.firstChild.classList.add("e-mask-checkbox-intent")),u++),a.appendChild(m)}return a},t.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},t.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),n=0;n<i.length;n++)i[n]&&i[n].classList.add("e-shimmer-wave")},t.prototype.translateMaskRow=function(i){for(var n=i.target,s=n.querySelectorAll(".e-masked-table"),o=0;o<s.length;o++){var a=s[o];if(a){var l=n.scrollHeight-a.getBoundingClientRect().height,h=n.scrollTop<=(l=l<0?0:l)?n.scrollTop:l;this.enableVirtualization&&(h-=PG(U(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},t.prototype.removeMaskRow=function(){var i=this.getContent().firstChild;T.remove(i,"scroll",this.translateMaskRow);for(var n=[this.headerMaskTable,this.movableHeaderMaskTable,this.rightHeaderMaskTable,this.contentMaskTable,this.movableContentMaskTable,this.rightContentMaskTable,this.footerContentMaskTable,this.movableFooterContentMaskTable,this.rightFooterContentMaskTable],s=0;s<n.length;s++){var o=n[s];if(o){if(this.isFrozenGrid()&&!U(o,".e-gridfooter")){var a=o.parentElement;if(a.style.overflow="",a.style.position="",U(o,".e-frozen-left-header")||U(o,".e-movableheader")||U(o,".e-frozen-right-header")){var l=a.querySelector(".e-masked-table-holder");l&&He(l)}}He(o)}}this.headerMaskTable=null,this.movableHeaderMaskTable=null,this.rightHeaderMaskTable=null,this.contentMaskTable=null,this.movableContentMaskTable=null,this.rightContentMaskTable=null,this.footerContentMaskTable=null,this.movableFooterContentMaskTable=null,this.rightFooterContentMaskTable=null},t.prototype.refreshMaskRow=function(){var i=this.getHeaderContent().firstChild,n=this.getContent().firstChild;if(this.isInitialLoad||this.getColumns().length){if(this.contentMaskTable){var s=n;this.isFrozenGrid()?s=s.querySelector(".e-frozen-left-content, .e-frozen-right-content"):this.enableVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)}this.headerMaskTable&&this.isFrozenGrid()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-left-header, .e-frozen-right-header")),this.movableHeaderMaskTable&&this.isFrozenGrid()&&(s=i.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-right-header")),this.movableContentMaskTable&&this.isFrozenGrid()&&(s=n.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(n.querySelector(".e-frozen-right-content"))}},t.prototype.refreshMaskRowColgroupWidth=function(i){var n=i.querySelector("table:not(.e-masked-table)"),s=n.querySelector(Ai).cloneNode(!0),o=i.querySelector(".e-masked-table");s.removeAttribute("id"),s.setAttribute("class","e-masked-colgroup");for(var a=0;a<s.childNodes.length;a++)s.childNodes[a].removeAttribute("class");He(o.querySelector(".e-masked-colgroup")),o.insertBefore(s,o.firstChild),o.style.width=n.getBoundingClientRect().width+"px"},t.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!f(i))for(var n=0;n<i.length;n++)!f(i[n].hideAtMedia)&&(f(i[n].visible)||i[n].visible)&&this.pushMediaColumn(i[n],n)}},t.prototype.pushMediaColumn=function(i,n){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(n,this.media[i.uid]),this.mediaBindInstance[n]=this.mediaQueryUpdate.bind(this,n),this.media[i.uid].addListener(this.mediaBindInstance[n])},t.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var n=this.getColumnIndexByUid(i.uid),s=0;s<this.mediaCol.length;s++)if(i.uid===this.mediaCol[s].uid)return void this.mediaCol.splice(s,1);this.pushMediaColumn(i,n)}},t.prototype.mediaQueryUpdate=function(i,n){var s=this.getColumns()[i];this.mediaCol.some(function(o){return o.uid===s.uid})&&(s.visible=n.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,s.visible?this.showHider.show(s.headerText,"headerText"):this.showHider.hide(s.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+Qb);this.aggregates.length&&this.element.scrollHeight>this.height&&i&&N([i],["e-footerpadding"]),this.getColumns().filter(function(s){return"checkbox"===s.type}).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),z([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()},t.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var i=this.element;if(i){var n=!(!i.querySelector("."+$s)||!i.querySelector("."+zs));n&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(gn,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),n&&r.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!Q.isIE&&(this.element.innerHTML="");for(var s=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],o=0;o<s.length;o++)this[s[o]]&&(this[s[o]]=null);this.element.innerHTML="",li(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}},t.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+$s)&&!i.querySelector("."+zs)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},t.prototype.setCSSClass=function(i){this.cssClass&&N([this.element],this.cssClass.split(" ")),i&&z([this.element],i.split(" "))},t.prototype.onPropertyChanged=function(i,n){var l,s=!1,o=!1,a=!1;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var u=Object.keys(i);u.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0);for(var d=0,m=u;d<m.length;d++){var y=m[d];switch(y){case"allowPaging":this.notify(jr,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Wa,{module:"pager",properties:i.pageSettings});break}this.notify(Wa,{module:"pager",properties:i.pageSettings}),(f(i.pageSettings.currentPage)&&f(i.pageSettings.pageSize)&&f(i.pageSettings.totalRecordsCount)||!f(n.pageSettings)&&i.pageSettings.currentPage!==n.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(jr,{module:"sort",enable:this.allowSorting}),s=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(jr,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(jr,{module:"scroll",properties:{width:i.width,height:i.height}});break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(jr,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(jr,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(n.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=El(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=El(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(jr,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,l=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(jr,{module:"toolbar"});break;case"groupSettings":this.notify(Wa,{module:"group",properties:i.groupSettings,oldProperties:n.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(jr,{module:"aggregate",properties:i});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),a=!0,o=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(y,i,o)}}l&&this.updateDefaultCursor(),o?a||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(Yo,{requestType:"refresh"}),s=!1,this.maintainSelection(i.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(i,n,s){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=n.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!n.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=n.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=n.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=n.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?N([this.element],"e-grid-min-height"):z([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(jr,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(jr,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(jr,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(jr,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Wa,{module:"filter",properties:n.filterSettings});break;case"searchSettings":this.notify(Wa,{module:"search",properties:n.searchSettings});break;case"sortSettings":this.notify(Wa,{module:"sort"});break;case"selectionSettings":this.notify(Wa,{module:"selection",properties:n.selectionSettings});break;case"editSettings":this.notify(Wa,{module:"edit",properties:n.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(hu,{case:"textwrap",isModeChg:"textWrapSettings"===i});break;case"dataSource":var o=this.getDataModule().getState();if(Object.getPrototypeOf(n).deepWatch)for(var a=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(n.dataSource);l<h.length;l++)this.setRowData(ie(a,this.dataSource[h[l]]),this.dataSource[h[l]]);else if(o.isPending){var u=f(this.dataSource)?[]:this.dataSource.result,d=o.group||[];for(l=0;l<d.length;l++)u=Ye.group(u,d[l],o.aggregates||[]);this.dataSource={result:u,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),o.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(kM,{}),s||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(uG,{}));this.scrollRefresh();break;case"enableHover":(n.enableHover?N:z)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(n.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(VM,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(gG,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(n.enableStickyHeader)}},t.prototype.maintainSelection=function(i){var n=this;if(-1!==i){var s=function(){n.selectRow(i),n.off(is,s)};this.on(is,s,this)}},t.prototype.setProperties=function(i,n){r.prototype.setProperties.call(this,i,n),i.filterSettings&&this.filterModule&&n&&this.filterModule.refreshFilter()},t.prototype.setTablesCount=function(){var i=this.getFrozenColumns(),n=this.getFrozenLeftColumnsCount(),s=this.getFrozenRightColumnsCount();!i||n||s?!i&&(n||s)&&(n&&!s||s&&!n?this.tablesCount=2:n&&s&&(this.tablesCount=3)):this.tablesCount=2},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),n=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),s=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var o=this.contentModule.getHeaderCells();i=o.length?o:i}for(var a=0;a<i.length;a++){(this.allowGrouping||this.allowReordering||this.allowSorting)&&i[a].classList.add(s[a].allowReordering&&s[a].allowSorting&&s[a].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(var h=0;h<n.length;h++)this.allowReordering&&n[h].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(i,n){for(var s=0,o=i.length;s<o;s++)i[s].columns?this.updateColumnModel(i[s].columns,!0):this.columnModel.push(i[s]);(f(n)||!n)&&(this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns())},t.prototype.updateColumnLevelFrozen=function(){var i=this.columnModel,n=[],s=[],o=[];if(this.frozenLeftCount||this.frozenRightCount){for(var a=0,l=i.length;a<l;a++){var h=i[a];"Left"===h.freeze?(h.freezeTable=cs,n.push(h)):"Right"===h.freeze?(h.freezeTable=dr,s.push(h)):(h.freezeTable="movable",o.push(h))}this.columnModel=n.concat(o).concat(s)}},t.prototype.updateFrozenColumns=function(){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var i=this.columnModel,n=this.frozenColumns,s=this.getFrozenColumns(),o=0,a=0,l=i.length;a<l;a++){var h=i[a];n&&(h.freezeTable=a<n?cs:"movable"),h.isFrozen&&a>=n?(h.freezeTable=cs,i.splice(this.frozenColumns+o,0,i.splice(a,1)[0]),o++):s&&!n&&(h.freezeTable="movable")}},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var i=this.columnModel,n=0,s=0,o=this.getFrozenColumns(),a=0;a<i.length;a++)i[a].lockColumn&&(a<o?(i.splice(n,0,i.splice(a,1)[0]),n++):(i.splice(o+s,0,i.splice(a,1)[0]),s++))},t.prototype.checkLockColumns=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.checkLockColumns(i[n].columns):i[n].lockColumn&&this.lockcolPositionCount++},t.prototype.getColumns=function(i){var n=this,s=this.inViewIndexes.map(function(h){return h-n.groupSettings.columns.length}).filter(function(h){return h>-1}),o=s.length;(!this.enableColumnVirtualization||f(this.columnModel)||0===this.columnModel.length||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=0===o?this.columnModel:this.columnModel.slice(s[0],s[o-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&s.length&&s[0]>0&&(a=this.contentModule.ensureFrozenCols(a)),a},t.prototype.getStackedHeaderColumnByHeaderText=function(i,n){for(var s=0;s<n.length;s++){var o=n[s];if(o.field===i||o.headerText===i){this.stackedColumn=o;break}o.columns&&this.getStackedHeaderColumnByHeaderText(i,o.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},t.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(Qb)[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(Qb)[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(i){this.gridPager=i},t.prototype.getRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getMovableRowByIndex=function(i){return this.contentModule.getMovableRowByIndex(i)},t.prototype.getFrozenRowByIndex=function(i){return this.getFrozenDataRows()[i]},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getFrozenRightRowByIndex(i)},t.prototype.getRowInfo=function(i){var n=i,s={target:i};if(!f(i)&&f(me(n,"e-detailrowcollapse")&&f(me(n,"e-recordplusexpand")))){var o=U(n,"."+on);if(!o){var a=U(n,"."+Sn);if(!f(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(ki),10);s={row:a,rowData:l.data,rowIndex:h}}return s}var u=parseInt(o.getAttribute(Ys),10);if(!f(o)&&!isNaN(u)){var d=U(o,"."+Sn),m=(h=parseInt(d.getAttribute(ki),10),this.getFrozenColumns()),y=this.columnModel[u].getFreezeTableName(),C=this.contentModule.getRows(),S=u+this.getIndentCount();this.isFrozenGrid()&&(y===cs?C=this.contentModule.getRows():"movable"===y?(S=u-m-this.frozenLeftCount,C=this.contentModule.getMovableRows()):y===dr&&(S=u-(this.frozenLeftCount+this.movableCount),C=this.contentModule.getFrozenRightRows()));var I=C.filter(function(B){return B.uid===d.getAttribute("data-uid")}),k={},O=void 0;Object.keys(I).length&&(k=I[0].data,O=I[0].cells[S].column),s={cell:o,cellIndex:u,row:d,rowIndex:h,rowData:k,column:O,target:i}}}return s},t.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getFrozenRightRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(i){if(f(this.getContentTable().querySelector(lt)))return[];var n=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(lt),s=[].slice.call(n.children);if(this.frozenRows){var o=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+rp).querySelector(lt):this.getHeaderTable().querySelector(lt),a=[].slice.call(o.children);s=this.addMovableRows(a,s)}return this.generateDataRows(s,i)},t.prototype.addMovableRows=function(i,n){for(var s=0,o=n.length;s<o;s++)i.push(n[s]);return i},t.prototype.generateDataRows=function(i,n){for(var s=[],o=0,a=i.length;o<a;o++)i[o].classList.contains(Sn)&&(!i[o].classList.contains("e-hiddenrow")||n)&&(this.isCollapseStateEnabled()?s[parseInt(i[o].getAttribute("data-rowindex"),10)]=i[o]:s.push(i[o]));return s},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(i){if(!this.isFrozenGrid())return[];var n=[].slice.call(this.getContent().querySelector("."+Gn).querySelector(lt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+nr).querySelector(lt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(i){var n=[].slice.call(this.getContent().querySelector("."+nc).querySelector(lt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+rp).querySelector(lt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(i){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];var n=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(lt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(lt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.setCellValue=function(i,n,s){var a="data",l="index",u="Right"===this.getFrozenMode(),d=this.getPrimaryKeyFieldNames()[0],m=new fh(this,this.serviceLocator),y=this.getColumnIndexByField(n),C=this.getColumnByField(n),I=("movable"===C.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===C.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(function(ve){return ie(d,ve.data)===i})[0],k=I?this.element.querySelector("[data-uid="+I.uid+"]"):null;if(!f(k)){jt(n,s,I[a]);var O=this.getFrozenLeftColumnsCount()||this.getFrozenColumns(),L=this.getMovableColumnsCount();this.isRowDragable()&&!u&&O++;var B=O+L,j=this.enableVirtualization?k.children[y]:this.getCellFromIndex(I[l],y);if(!f(j)){var G="movable"===C.getFreezeTableName()?O:"frozen-right"===C.getFreezeTableName()?B:0;this.groupSettings.columns.length&&(y+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&y++,this.isRowDragable()&&!u&&y++,m.refreshTD(j,I.cells[y-G],I[a],{index:I[l]}),this.aggregates.length>0&&(this.notify(Av,{}),this.groupSettings.columns.length>0&&this.notify(Zb,{})),!f(I)&&!f(I.changes)&&(I.changes[n]=s),this.trigger(R8,{cell:j,column:C,data:I[a]})}}},t.prototype.refreshReactColumnTemplateByUid=function(i){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){for(var s="cells",a=!(!n.childGrid||!n.element.querySelectorAll(".e-childgrid").length),l=a?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows(),h=n.getIndentCount(),u=0,d=!1,y=(n.getNormalizedColumnIndex(i),0);y<l.length;y++){var C=n.getRowObjectFromUID(l[y].getAttribute("data-uid"));if(a&&!C&&me(l[y],"e-childgrid")){var S=me(l[y],"e-childgrid").ej2_instances[0];C=S.getRowObjectFromUID(l[y].getAttribute("data-uid")),u=S.getIndentCount(),d=!0}if(C&&C.isDataRow&&!f(C.index)&&!l[y].classList.contains("e-editedrow"))for(var I=0;I<C[s].length;I++){var k=C[s][I];if(k.isTemplate){var O=new fh(n,n.serviceLocator),L=a?l[y].children[k.index+(d?u:h)]:n.getCellFromIndex(y,I-h);O.refreshTD(L,k,C.data,{index:C.index})}}d=!1}})},t.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var s=this.headerModule.rows,o=this.getNormalizedColumnIndex(i),a=0;a<s.length;a++){var l=s[a].cells[o];if(l&&l.column.uid===i){var h=new Hse(this,this.serviceLocator),u=me(this.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");h.refresh(l,u)}}},t.prototype.setRowData=function(i,n){var o=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(o=o.filter(function(I){return I.isDataRow}));var l=o.filter(function(I){return ie(a,I.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l.uid+"]")):void 0;if(!f(l)&&h.length){if(l.changes=n,this.isFrozenGrid()){var u=me(h[0],"e-table"),d=u.parentElement.matches(".e-frozen-left-header,.e-frozen-left-content")?"left":u.parentElement.matches(".e-frozen-right-header,.e-frozen-right-content")?"right":"movable",m=this.getMovableRowsObject()[l.index];if(this.setFrozenRowData(m,n),"left"===d){var y=this.getRowsObject()[l.index];this.setFrozenRowData(y,n)}if("right"===d||this.frozenRightColumns.length>0){var C=this.getFrozenRightRowsObject()[l.index];this.setFrozenRowData(C,n)}}else if(this.frozenRows){var S=this.getRowsObject()[l.index];this.setFrozenRowData(S,n)}else this.setFrozenRowData(l,n);this.aggregates.length>0&&(this.notify(Av,{}),this.groupSettings.columns.length>0&&this.notify(Zb,{}))}},t.prototype.setFrozenRowData=function(i,n){var s=new kh(this.serviceLocator,null,this);i.changes=n,qV(i,this.getForeignKeyColumns(),i.changes),s.refresh(i,this.getColumns(),!0)},t.prototype.getCellFromIndex=function(i,n){return VG(this,this.getColumnByIndex(n),i,n)},t.prototype.getMovableCellFromIndex=function(i,n){if(!("Left-Right"===this.frozenName&&n>=this.movableCount)){var s=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[i]&&this.getMovableDataRows()[i].getElementsByClassName(on)[n-s]}},t.prototype.getFrozenRightCellFromIndex=function(i,n){var s=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),o=this.getFrozenRightDataRows();return o[i]&&o[i].getElementsByClassName(on)[n-s]},t.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[i]},t.prototype.getMovableColumnHeaderByIndex=function(i){var n=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenRightColumnHeaderByIndex=function(i){var n=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[i]},t.prototype.getRowObjectFromUID=function(i,n,s){var o=this.contentModule.getRows(),a=this.rowObject(o,i);return this.isFrozenGrid()&&(!a||n||s)?((!(a=this.rowObject(this.contentModule.getMovableRows(),i))&&"Left-Right"===this.getFrozenMode()||s)&&(a=this.rowObject(this.contentModule.getFrozenRightRows(),i)),a):(f(a)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(a=this.rowObject(this.vRows,i)),a)},t.prototype.rowObject=function(i,n){if(i)for(var s=0,o=i;s<o.length;s++){var a=o[s];if(a.uid===n)return a}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){var i=[];return this.isFrozenGrid()&&(i=this.contentModule.getMovableRows()),i},t.prototype.getFrozenRightRowsObject=function(){var i=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(i=this.contentModule.getFrozenRightRows()),i},t.prototype.getColumnHeaderByField=function(i){var n=this.getColumnByField(i);return n?this.getColumnHeaderByUid(n.uid):void 0},t.prototype.getColumnHeaderByUid=function(i){var n=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return n?n.parentElement:void 0},t.prototype.getColumnByIndex=function(i){var n;return this.getColumns().some(function(s,o){return n=s,o===i}),n},t.prototype.getColumnByField=function(i){return uS(this.getColumns(),function(n){if(n.field===i)return n})[0]},t.prototype.getColumnIndexByField=function(i){for(var n=this.getColumns(),s=0;s<n.length;s++)if(n[s].field===i)return s;return-1},t.prototype.getColumnByUid=function(i){return uS(this.getColumns().concat(this.getStackedColumns(this.columns)),function(n){if(n.uid===i)return n})[0]},t.prototype.getStackedColumns=function(i,n){void 0===n&&(n=[]);for(var s=0,o=i;s<o.length;s++){var a=o[s];a.columns&&(n.push(a),this.getStackedColumns(a.columns,n))}return n},t.prototype.getColumnIndexByUid=function(i){var n=uS(this.getColumns(),function(s,o){if(s.uid===i)return o})[0];return f(n)?-1:n},t.prototype.getUidByColumnField=function(i){return uS(this.getColumns(),function(n){if(n.field===i)return n.uid})[0]},t.prototype.getNormalizedColumnIndex=function(i){return this.getColumnIndexByUid(i)+this.getIndentCount()},t.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&f(this.rowDropSettings.targetID)&&i++,i},t.prototype.getColumnFieldNames=function(){for(var n,i=[],s=0,o=this.getColumns().length;s<o;s++)(n=this.getColumns()[s]).visible&&i.push(n.field);return i},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],n=0;n<this.columnModel.length;n++)this.columnModel[n].isPrimaryKey&&i.push(this.columnModel[n].field);return i},t.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var i=this,n=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(s){return n.push(i.getColumns()[s].uid)}),n},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(i,n){this.showHider.show(i,n=n||"headerText")},t.prototype.hideColumns=function(i,n){this.showHider.hide(i,n=n||"headerText")},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount},t.prototype.getMovableColumnsCount=function(){return this.movableCount},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":this.frozenColumns&&this.frozenRows?"Left":void 0},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitFrozenCount=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.splitFrozenCount(i[n].columns):"Right"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[n]),this.frozenRightCount++):"Left"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[n]),this.frozenLeftCount++):(!1!==i[n].visible&&this.visibleMovable++,this.movableColumns.push(i[n]),this.movableCount++)},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,n=this.columnModel,s=0;s<this.frozenColumns;s++)n[s].visible&&i++;if(this.frozenLeftCount||this.frozenRightCount)for(s=0;s<n.length;s++)n[s].visible&&("Left"===n[s].freeze||"Right"===n[s].freeze)&&i++;return i},t.prototype.getVisibleFrozenCount=function(i,n){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var s=0,o=i.length;s<o;s++)i[s].columns?n=this.getVisibleFrozenCount(i[s].columns,n):i[s].isFrozen&&i[s].visible&&n++;return n},t.prototype.getFrozenCount=function(i,n,s){for(var o=0,a=i.length;o<a;o++)i[o].columns?n=this.getFrozenCount(i[o].columns,n,s):(i[o].isFrozen&&s>this.frozenColumns-1&&n++,s++);return n},t.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},t.prototype.updateExternalMessage=function(i){this.pagerModule&&this.pagerModule.updateExternalMessage(i)},t.prototype.sortColumn=function(i,n,s){this.sortModule&&this.sortModule.sortColumn(i,n,s)},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},t.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},t.prototype.filterByColumn=function(i,n,s,o,a,l,h,u){this.filterModule&&this.filterModule.filterByColumn(i,n,s,o,a,l,h,u)},t.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},t.prototype.removeFilteredColsByField=function(i,n){this.filterModule&&this.filterModule.removeFilteredColsByField(i,n)},t.prototype.selectRow=function(i,n){this.selectionModule&&this.selectionModule.selectRow(i,n)},t.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(i,n){this.selectionModule&&this.selectionModule.selectCell(i,n)},t.prototype.selectCellsByRange=function(i,n){this.selectionModule.selectCellsByRange(i,n)},t.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(i,n){this.editModule&&this.editModule.deleteRecord(i,n)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(i,n){this.editModule&&this.editModule.addRecord(i,n)},t.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},t.prototype.editCell=function(i,n){this.editModule&&this.editModule.editCell(i,n)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(i,n,s){this.editModule&&this.editModule.updateCell(i,n,s)},t.prototype.updateRow=function(i,n){this.editModule&&this.editModule.updateRow(i,n)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(i,n){this.toolbarModule&&this.toolbarModule.enableItems(i,n)},t.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},t.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var n=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,s=[].slice.call(this.getHeaderTable().querySelector(Ai).childNodes),o=[].slice.call(this.getContentTable().querySelector(Ai).childNodes),a=n/30,l="Right"===this.getFrozenMode()?this.frozenRightCount:0,h=this.element.offsetWidth,u=function(d,m){if(BG(i)){var y=(m/h*100).toFixed(1)+"%";s[d].style.width=y,o[d].style.width=y}else s[d].style.width=m+"px",o[d].style.width=m+"px";i.notify(_M,{index:d,width:m})};for(a>=1&&(n=30/a),n<1&&(n=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(n=30);l<this.groupSettings.columns.length;)u(l,n),l++;this.isDetail()&&(u(l,n),l++),this.isRowDragable()&&u(l,n),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.resetIndentWidth=function(){if(BG(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(function(n){return(!n.width||"auto"===n.width)&&n.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(HM,{})},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(i,n){this.reorderModule&&this.reorderModule.reorderColumns(i,n)},t.prototype.reorderColumnByIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,n)},t.prototype.reorderColumnByTargetIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,n)},t.prototype.reorderRows=function(i,n){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,n)},t.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},t.prototype.disableRowDD=function(i){var n=this.getHeaderTable(),s=this.getContentTable(),o=n.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=i?"none":"";Vt(n.querySelector(Ai).childNodes[0],{display:l}),Vt(s.querySelector(Ai).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var u=a[h].firstElementChild;i?N([u],"e-hide"):z([u],["e-hide"])}for(var d=0;d<n.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;d++)u=o[d],i?N([u],"e-hide"):z([u],["e-hide"])},t.prototype.autoFitColumns=function(i){this.resizeModule&&this.resizeModule.autoFitColumns(i)},t.prototype.createColumnchooser=function(i,n,s){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,n,s)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new AG(this)),this.serviceLocator.register("cellRendererFactory",new zDe),this.serviceLocator.register("rendererFactory",new UDe),this.serviceLocator.register("localization",this.localeObj=new as(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Jw(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new eIe(this)),this.serviceLocator.register("ariaService",this.ariaService=new GM),this.serviceLocator.register("focus",this.focusModule=new WDe(this))},t.prototype.processModel=function(){var s,o,i=this.groupSettings.columns,n=this.sortSettings.columns;if(this.allowGrouping)for(var a=function(m,y){o=0;for(var C=n.length;o<C;o++)if(n[o].field===i[m]){s=!0;break}if(s?l.allowSorting?l.sortedColumns.push(n[o].field):n[o].direction="Ascending":n.push({field:i[m],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var S=l.enableColumnVirtualization?l.columns.filter(function(I){return I.field===i[m]})[0]:l.getColumnByField(i[m]);S?S.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[m]})}},l=this,h=0,u=i.length;h<u;h++)a(h);if(!i.length)for(h=0;h<n.length;h++)this.sortedColumns.push(n[h].field);if(this.rowTemplateFn=El(this.rowTemplate),this.detailTemplateFn=El(this.detailTemplate),this.editTemplateFn=El(this.editSettings.template),this.editHeaderTemplateFn=El(this.editSettings.headerTemplate),this.editFooterTemplateFn=El(this.editSettings.footerTemplate),!f(this.parentDetails)){var d=f(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",d,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(q8,this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},t.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),Q.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&this.element.classList.add(this.cssClass),li(this.element,["e-responsive","e-default"],[]);var i=this.serviceLocator.getService("rendererFactory");this.headerModule=i.getRenderer(Ks.Header),this.contentModule=i.getRenderer(Ks.Content),this.printModule=new Yse(this,this.scrollModule),this.clipboardModule=new nIe(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),n=this.createElement("div",{className:gs,attrs:{tabIndex:"-1"}});Zt([n,this.createElement("div",{className:"e-uptail e-tail"})],i),n.appendChild(this.createElement("span")),Zt([n,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},t.prototype.updateGridLines=function(){switch(li(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":uu(this.element,!1),uu(this.getContent(),!1),uu(i,!0);break;case"Content":uu(this.getContent(),!0),uu(this.element,!1),uu(i,!1);break;default:uu(this.element,!0),uu(this.getContent(),!1),uu(i,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(HM,{})}},t.prototype.removeTextWrap=function(){uu(this.element,!1),uu([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),uu(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(HM,{})},t.prototype.createTooltip=function(){this.toolTipObj=new WN({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},t.prototype.freezeRefresh=function(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(i){var n=this.getHeaderTable(),s="e-gridheader",o=this.createTable(n,s,"header"),a=this.createTable(n,s,"content"),l=i.classList.contains("e-headercell")?o:a,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className,l.querySelector(h).innerHTML=i.innerHTML;var u=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(o),document.body.removeChild(a),u>i.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var n=me(i.target,"e-ellipsistooltip");if((this.prevElement!==n||"mouseout"===i.type)&&this.toolTipObj.close(),n&&"mouseout"!==i.type&&(!Q.isDevice||-1===["A","BUTTON","INPUT"].indexOf(i.target.tagName))){if(n.getAttribute("aria-describedby"))return;if(this.getTooltipStatus(n)){var a=this.createElement("div");n.getElementsByClassName("e-headertext").length?(a.innerHTML=n.getElementsByClassName("e-headertext")[0].innerText,this.toolTipObj.content=a):(a.innerHTML=n.innerText,this.toolTipObj.content=a),this.prevElement=n,this.getColumns()[parseInt(n.getAttribute(Ys),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(n)}}}this.hoverFrozenRows(i)},t.prototype.hoverFrozenRows=function(i){if(this.isFrozenGrid()){var n=me(i.target,Sn);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===i.type)for(var s=[].slice.call(this.element.getElementsByClassName("e-frozenhover")),o=0;o<s.length;o++)s[o].classList.remove("e-frozenhover");else if(n)for((s=[].slice.call(this.element.querySelectorAll('tr[data-rowindex="'+n.getAttribute(ki)+'"]'))).splice(s.indexOf(n),1),o=0;o<s.length;o++)"true"!==n.getAttribute("aria-selected")&&s[o]?s[o].classList.add("e-frozenhover"):s[o]&&s[o].classList.remove("e-frozenhover")}},t.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var n=0;n<i.length;n++)if("EllipsisWithTooltip"===i[n].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(i,n,s){var o=this.createElement("div");o.className=this.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=n;var l=this.createElement("table",{attrs:{role:"grid"}});l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h="header"===s?"th":"td",u=this.createElement("tr",{attrs:{role:"row"}}),d=this.createElement(h);return u.appendChild(d),l.appendChild(u),a.appendChild(l),o.appendChild(a),document.body.appendChild(o),o},t.prototype.onKeyPressed=function(i){("tab"===i.action||"shiftTab"===i.action)&&this.toolTipObj.close()},t.prototype.wireEvents=function(){T.add(this.element,"click",this.mouseClickHandler,this),T.add(this.element,"touchend",this.mouseClickHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this),T.add(this.element,"dblclick",this.dblClickHandler,this),T.add(this.element,"keydown",this.keyPressHandler,this),T.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new An(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),T.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),T.add(this.element,"mousemove",this.mouseMoveHandler,this),T.add(this.element,"mouseout",this.mouseMoveHandler,this),T.add(this.getContent(),"touchstart",this.tapEvent,this),T.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){T.remove(this.element,"click",this.mouseClickHandler),T.remove(this.element,"touchend",this.mouseClickHandler),T.remove(this.element,"focusout",this.focusOutHandler),T.remove(this.element,"dblclick",this.dblClickHandler),T.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),T.remove(this.element,"mousemove",this.mouseMoveHandler),T.remove(this.element,"mouseout",this.mouseMoveHandler),T.remove(this.element,"keydown",this.keyPressHandler),T.remove(this.getContent(),"touchstart",this.tapEvent),T.remove(document.body,"keydown",this.keyDownHandler),T.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on(Uc,this.dataReady,this),this.on(is,this.recalcIndentWidth,this),this.on(Mo,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(ph,this.dataBoundFunction),this.on(_s,this.onKeyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off(Uc,this.dataReady),this.off(is,this.recalcIndentWidth),this.off(Mo,this.recalcIndentWidth),this.removeEventListener(ph,this.dataBoundFunction),this.off(_s,this.onKeyPressed))},t.prototype.getCurrentViewRecords=function(){return ks(this)?f(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||me(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&((this.allowRowDragAndDrop||!me(i.target,zs)&&"TD"!==i.target.tagName)&&(this.allowGrouping||this.allowReordering||!me(i.target,"e-gridheader"))||!i.touches)){me(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!me(i.target,"e-filterbarcell")&&i.preventDefault();var n=this.getRowInfo(i.target);n.cancel=!1;var o=!1,a=U(i.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));o=!!l&&l.isDataRow}o&&this.trigger("recordClick",n),this.notify(ol,i)}},t.prototype.checkEdit=function(i){var n=me(i.target,Sn),s="Batch"!==this.editSettings.mode&&this.isEdit&&n&&(n.classList.contains(qa)||n.classList.contains(Ul));return!me(i.target,"e-unboundcelldiv")&&(s||me(i.target,on)&&me(i.target,on).classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(i){var n=me(i.target,"e-grid");if(!f(n)&&n.id===this.element.id&&!U(i.target,".e-unboundcelldiv")){var s=!1,o=U(i.target,"tr");if(o&&o.getAttribute("data-uid")){var a=this.getRowObjectFromUID(o.getAttribute("data-uid"));s=!!a&&a.isDataRow}var l=this.getRowInfo(i.target);l.target=i.target,s&&this.trigger("recordDoubleClick",l),this.notify(RM,i)}},t.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){me(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var n=this.element.querySelector(".e-cancel:not(.e-hide)");n&&n.classList.add("e-hide");var s=i.relatedTarget,o=s?s.getAttribute("aria-owns"):null;(!s||!me(s,"e-grid")&&(!f(o)&&o)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!Q.isDevice&&("Batch"===this.editSettings.mode&&!((me(s,"e-ddl")||me(s,"e-ddt"))&&me(s,"e-input-group"))&&!f(me(s,"e-input-group"))&&(this.editModule.saveCell(),this.notify(EV,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(i){var n=me(i.target,"e-grid");return!!(n&&n.id!==this.element.id||me(i.target,"e-unboundcelldiv")&&f(n))},t.prototype.mergePersistGridData=function(i){var n=this.getLocalData();if(!f(n)&&""!==n||!f(i)){var s=f(i)?JSON.parse(n):i;this.enableVirtualization&&s.pageSettings&&(s.pageSettings.currentPage=1);var o=Object.keys(s);this.isProtectedOnChange=!0;for(var a=0,l=o;a<l.length;a++){var h=l[a];"object"!=typeof this[h]||f(this[h])?this[h]=s[h]:Array.isArray(this[h])&&"columns"===h?(UV(this[h]),this.mergeColumns(s[h],this[h]),this[h]=s[h]):de(this[h],s[h])}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(i,n){for(var s=i,o=function(h){var u=n.filter(function(d){return d.index===s[h].index})[0];f(u)||(u.columns&&u.columns.length?(a.mergeColumns(s[h].columns,u.columns),s[h]=de(u,s[h],{},!0)):s[h]=de(u,s[h],{},!0))},a=this,l=0;l<s.length;l++)o(l)},t.prototype.isDetail=function(){return!f(this.detailTemplate)||!f(this.childGrid)},t.prototype.isCommandColumn=function(i){var n=this;return i.some(function(s){return s.columns?n.isCommandColumn(s.columns):!(!s.commands&&!s.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(i){var n=this;return i.some(function(s){return s.columns?n.isForeignKeyEnabled(s.columns):!(!s.dataSource||!s.foreignKeyValue)})},t.prototype.keyPressHandler=function(i){var n=de(i,{cancel:!1});this.trigger("keyPressed",n),!0===n.cancel&&i.stopImmediatePropagation()},t.prototype.keyDownHandler=function(i){if(i.altKey){if(74===i.keyCode&&(this.keyA?(this.notify(lG,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(z([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===i.keyCode){var n=this.focusModule;if(n){if(!this.currentViewData.length)return;n.focusContent(),n.addOutline()}}65===i.keyCode&&(this.keyA=!0),72===i.keyCode&&this.keyA&&(this.notify(lG,{target:i.target,collapse:!0}),this.keyA=!1)}13===i.keyCode&&this.notify(RV,i)},t.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.isEdit&&"escape"!==i.action&&"enter"!==i.action&&"shiftEnter"!==i.action&&"tab"!==i.action&&"shiftTab"!==i.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===i.action&&(i.preventDefault(),this.print()),this.notify(_s,i)))},t.prototype.setInjectedModules=function(i){this.injectedModules=i},t.prototype.updateColumnObject=function(){aD(this.columns,this.enableColumnVirtualization,this),UV(this.columns),this.initForeignColumn(),this.notify(iS,{})},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function TIe(r){if(void 0!==XM)return XM;var t=ri("table",{className:cr,styles:"visibility: hidden",attrs:{role:"grid"}});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',r.appendChild(t);var e=t.querySelector("td").getBoundingClientRect();return r.removeChild(t),XM=Math.ceil(e.height)}(this.element)},t.prototype.refreshColumns=function(){this.setFrozenCount();var i=this.getContent().querySelector(".e-frozen-left-content"),n=this.getContent().querySelector(".e-frozen-right-content"),s=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!i&&this.frozenLeftCount||!n&&this.frozenRightCount||i&&!this.frozenLeftCount||n&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(s&&(1===this.getFrozenColumns()&&!i||0===this.getFrozenColumns()&&i))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){var a=this.contentModule.getMovableContent().querySelector("."+cr);He(a.querySelector(Ai));var l=this.getHeaderContent().querySelector("."+nr).querySelector(Ai).cloneNode(!0);if(a.insertBefore(l,a.querySelector(lt)),"Left-Right"===this.getFrozenMode()){var h=this.contentModule.getFrozenRightContent().querySelector("."+cr);He(h.querySelector(Ai));var u=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ai).cloneNode(!0);h.insertBefore(u,h.querySelector(lt))}}if(this.isFrozenGrid()){var d=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=d,this.contentModule.getMovableContent().scrollLeft=d}},t.prototype.excelExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!1,o):null},t.prototype.csvExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!0,o):null},t.prototype.pdfExport=function(i,n,s,o){return this.pdfExportModule?this.pdfExportModule.Map(this,i,n,s,o):null},t.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},t.prototype.openColumnChooser=function(i,n){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,n)},t.prototype.scrollRefresh=function(){var i=this,n=function(){i.scrollModule.refresh(),i.off(is,n)};this.on(is,n,this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},t.prototype.selectRowsByRange=function(i,n){this.selectionModule&&this.selectionModule.selectRowsByRange(i,n)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},t.prototype.destroyTemplate=function(i,n){this.clearTemplate(i,n)},t.prototype.log=function(i,n){this.loggerModule&&this.loggerModule.log(i,n)},t.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},t.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+gs),n=this.getContent().querySelector(".e-scrollbar");if(i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto"),this.isFrozenGrid()&&n){var s=this.getContent().querySelector(".e-movablescrollbar"),o=this.getContent().querySelector(".e-movablechild");n.style.display="flex",s.offsetWidth>=o.offsetWidth&&(n.style.display="none",this.notify(PM,0))}},t.prototype.getRowIndexByPrimaryKey=function(i){var n=this.getPrimaryKeyFieldNames()[0];i="object"==typeof i?i[n]:i;for(var s=this.getRowsObject(),o=0;o<s.length;o++)if(!s[o].isDetailRow&&!s[o].isCaptionRow){var a=s[o].data[n];if(n.split(".").length>1&&(a=zG(n,s[o].data)),a===i)return s[o].index}return-1},t.prototype.grabColumnByFieldFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].field&&(n=s[o]);return n},t.prototype.grabColumnByUidFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].uid&&(n=s[o]);return n},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof Je?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof Je?this.dataSource.executeLocal(i):new Je(this.dataSource,i).executeLocal(i)}return[]},t.prototype.getUserAgent=function(){var i=Q.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(i)},t.prototype.tapEvent=function(i){this.getUserAgent()&&($c.timer?(clearTimeout($c.timer),$c.timer=null,this.dblClickHandler(i),this.notify(U8,i)):$c.timer=setTimeout(function(){$c.timer=null},300))},t.prototype.getRowUid=function(i){return""+i+this.rowUid++},t.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector("."+Gn)},t.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector("."+nc)},t.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector("."+nr)},t.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector("."+rp)},t.prototype.getRowElementByUID=function(i){var n,s=[];if(this.isFrozenGrid()){var o=[].slice.call(this.getFrozenVirtualContent().querySelector(lt).children),a=[].slice.call(this.getMovableVirtualContent().querySelector(lt).children),l=[];if(3===this.tablesCount&&(l=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(lt).children)),this.frozenRows){if(s=(s=[].slice.call(this.getFrozenVirtualHeader().querySelector(lt).children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector(lt).children)),3===this.tablesCount){var h=this.getHeaderContent().querySelector(".e-frozen-right-header");s=s.concat([].slice.call(h.querySelector(lt).children)).concat(l)}s=s.concat(o).concat(a)}else s=o.concat(a).concat(l)}else{var u=[].slice.call(this.getContent().querySelector(lt).children);s=this.frozenRows?(s=[].slice.call(this.getHeaderContent().querySelector(lt).children)).concat(u):u}for(var d=0,m=s;d<m.length;d++){var y=m[d];if(y.getAttribute("data-uid")===i){n=y;break}}return n},t.prototype.getHiddenColumns=function(){for(var i=[],n=0,s=this.columnModel;n<s.length;n++){var o=s[n];!1===o.visible&&i.push(o)}return i},t.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var n=0;if(-1!==i.indexOf("%")&&(i=parseInt(i,10)/100*this.element.clientHeight),i>this.getNoncontentHeight()+this.getRowHeight()&&(n=(i-this.getNoncontentHeight())/this.getRowHeight()),n>0)return Math.floor(n)}return 0},t.prototype.getNoncontentHeight=function(){var i=0;if(f(this.getHeaderContent().clientHeight)||(i+=this.getHeaderContent().clientHeight),this.toolbar&&!f(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!f(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!f(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!f(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!f(this.element.querySelector(".e-summaryrow").clientHeight))for(var n=0;n<this.element.getElementsByClassName("e-summaryrow").length;n++)i+=this.element.getElementsByClassName("e-summaryrow")[n].clientHeight;return i},t.prototype.getSummaryValues=function(i,n){return Ye.aggregates[i.type.toLowerCase()](n,i.field)},t.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportGrid(i)},t.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.exportGrid=function(i){var s=this.getDataModule().generateQuery(!0),o=(new Zh).processQuery(new Je({url:""}),s),a=JSON.parse(o.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));l.filterSettings.columns=a.where,l.searchSettings.fields=a.search&&a.search[0].fields||[],l.sortSettings.columns=a.sorted,l.columns=this.setHeaderText(l.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);var u=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),d=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});d.value=JSON.stringify(l),u.method="POST",u.action=i,u.appendChild(d),document.body.appendChild(u),u.submit(),u.remove()},t.prototype.setHeaderText=function(i,n){for(var s=0;s<i.length;s++){var o=this.getColumnByUid(i[s].uid);i[s].headerText=o.headerText,f(o.template)||(i[s].template="true"),i[s].format&&(i[s].format=BIe(this.getFormat(i[s].format),i[s].type,this.isExcel)),i[s].columns&&this.setHeaderText(i[s].columns,n);for(var a=Object.keys(i[s]),l=0;l<a.length;l++)n.indexOf(a[l])<0&&delete i[s][a[l]]}return i},t.prototype.getFormat=function(i){return"object"==typeof i?f(i.format)?i.skeleton:i.format:i},t.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},t.prototype.updateRowValue=function(i,n){var s={requestType:"save",data:n};this.showSpinner(),this.notify(MM,s),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(i){var n=this.getColumnHeaderByField(i);if(n){var s=n.querySelector(".e-filtermenudiv"),o=this.element.querySelector(".e-filter-popup");if(s&&o){var a=this.element.getBoundingClientRect(),l=s.getBoundingClientRect();o&&(o.style.left=o.offsetWidth+l.right>a.right?(l.right-o.offsetWidth-a.left).toString()+"px":(l.right-a.left).toString()+"px")}}},t.prototype.renderTemplates=function(){this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact?(this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates())},t.prototype.batchUpdate=function(i){this.processRowChanges(i)},t.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},t.prototype.processBulkRowChanges=function(i){var n=this;if(this.dataToBeUpdated)for(var s=[Pf,"changedRecords",Jb],o=this.getPrimaryKeyFieldNames()[0],a=0;a<s.length;a++)i[s[a]]&&OIe(this,i,s[a],o);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){n.processRowChanges(n.dataToBeUpdated),n.dataToBeUpdated=null},this.asyncTimeOut)},t.prototype.processRowChanges=function(i){var n=this,s=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var o=this.getDataModule().saveChanges(i,s,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?o.then(function(){n.setNewData()}):this.setNewData()},t.prototype.setNewData=function(){var i=this,n=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(o){i.bulkRefresh(o.result,n,o.count)})},t.prototype.deleteRowElement=function(i){var n=this.getRowElementByUID(i.uid),s=parseInt(n.getAttribute(ki),10);He(n),this.getFrozenColumns()&&He(this.getMovableRows()[s])},t.prototype.bulkRefresh=function(i,n,s){for(var d,o=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(I){i.filter(function(k){return k[l]===a[I].data[l]}).length||(u.deleteRowElement(a[I]),a.splice(I,1),I--),d=I},u=this,m=0;m<a.length;m++)h(m),m=d;var y=function(I){var k;n.filter(function(O){O[l]===i[I][l]&&(O!==i[I]&&o.setRowData(i[I][l],i[I]),k=!0)}),k||C.renderRowElement(i[I],I)},C=this;for(m=0;m<i.length;m++)y(m);this.currentViewData=i;var S=[].slice.call(this.getContentTable().getElementsByClassName(Sn));(function tL(r,t,e,i,n){for(var s=i||0,o=n||0;o<t.length;o++)if(t[o].isDataRow){t[o].index=s,t[o].isAltRow=!!r.enableAltRow&&s%2!=0,e[o].setAttribute(ki,s.toString()),e[o].setAttribute(zM,(s+1).toString()),t[o].isAltRow?e[o].classList.add("e-altrow"):e[o].classList.remove("e-altrow");for(var a=0;a<e[o].cells.length;a++)e[o].cells[a].setAttribute("index",s.toString());s++}t.length||r.renderModule.emptyRow(!0)})(this,this.getRowsObject(),S),function lD(r){if(r.isFrozenGrid()){r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));var t=r.getFrozenMode()===Jt?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";r.contentModule.freezeRowElements=[].slice.call(r.element.querySelectorAll(t)),r.getFrozenMode()===Jt&&(r.contentModule.frozenRightRowElements=[].slice.call(r.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(Wa,{module:"pager",properties:{totalRecordsCount:s}})},t.prototype.renderRowElement=function(i,n){var h,s=new kh(this.serviceLocator,null,this),a=new sp(this).generateRows([i]),l=s.render(a[0],this.getColumns());this.addRowObject(a[0],n);var d=this.getContentTable().querySelector(lt);if(d.querySelector(".e-emptyrow")){var m=d.querySelector(".e-emptyrow");if(m.parentNode.removeChild(m),this.getFrozenColumns()){var y=this.getContent().querySelector("."+Gn).querySelector(lt);y.firstElementChild.parentNode.removeChild(y.firstElementChild)}}this.getFrozenColumns()&&(h=function GV(r,t,e){t=t&&e&&e.isRowDragable()?t+1:t;for(var i=r.cloneNode(!0),n=0;n<t;n++)i.removeChild(i.children[0]);n=t;for(var s=r.childElementCount;n<s;n++)r.removeChild(r.children[r.childElementCount-1]);return i}(l,this.getFrozenColumns(),this),(this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector("."+nr).querySelector(lt):this.getContent().querySelector("."+Gn).querySelector(lt)).appendChild(h),"auto"===this.height&&this.notify(PM,{})),d=this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector(lt):this.getContent().querySelector(lt),(d=this.getContent().querySelector(lt)).appendChild(l)},t.prototype.addRowObject=function(i,n){var s=this.getFrozenColumns();if(s){var o=this.getMovableRowsObject(),a=i.clone();a.cells=a.cells.slice(s),i.cells=i.cells.slice(0,s),o.splice(n,1,a)}this.getRowsObject().splice(n,1,i)},t.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),n=0,s=i.length;n<s;n++)i[n].visible=!i[n].isDataRow&&!i[n].isAggregateRow||"none"!==this.getRowElementByUID(i[n].uid).style.display},t.prototype.getHeight=function(i){return Number.isInteger(i)||-1===i.indexOf("%")?Number.isInteger(i)||"auto"===this.height?this.height:parseInt(i,10):parseInt(i,10)/100*this.element.clientHeight},t.prototype.getFrozenRightContent=function(){return this.getContent().querySelector(".e-frozen-right-content")},t.prototype.getFrozenRightHeader=function(){return this.getHeaderContent().querySelector(".e-frozen-right-header")},t.prototype.getMovableHeaderTbody=function(){return this.getMovableVirtualHeader().querySelector(lt)},t.prototype.getMovableContentTbody=function(){return this.getMovableVirtualContent().querySelector(lt)},t.prototype.getFrozenHeaderTbody=function(){return this.getFrozenVirtualHeader().querySelector(lt)},t.prototype.getFrozenLeftContentTbody=function(){return this.getFrozenVirtualContent().querySelector(lt)},t.prototype.getFrozenRightHeaderTbody=function(){return this.getFrozenRightHeader().querySelector(lt)},t.prototype.getFrozenRightContentTbody=function(){var n;return this.getFrozenRightContent()&&(n=this.getFrozenRightContent().querySelector(lt)),n},t.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||"Vertical"===this.rowRenderingMode)},t.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||"Vertical"===this.rowRenderingMode)},t.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},t.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},t.prototype.getCurrentVisibleColumns=function(i){for(var n=[],o=0,a=i?this.getColumns():this.columnModel;o<a.length;o++){var l=a[o];l.visible&&n.push(l)}return n},t.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},Ee([E()],t.prototype,"parentDetails",void 0),Ee([E([])],t.prototype,"columns",void 0),Ee([E(!0)],t.prototype,"enableAltRow",void 0),Ee([E(!0)],t.prototype,"enableHover",void 0),Ee([E(!1)],t.prototype,"enableAutoFill",void 0),Ee([E(!0)],t.prototype,"allowKeyboard",void 0),Ee([E(!1)],t.prototype,"enableStickyHeader",void 0),Ee([E(!1)],t.prototype,"allowTextWrap",void 0),Ee([ln({},dIe)],t.prototype,"textWrapSettings",void 0),Ee([ln({},pIe)],t.prototype,"resizeSettings",void 0),Ee([E(!1)],t.prototype,"allowPaging",void 0),Ee([ln({},XDe)],t.prototype,"pageSettings",void 0),Ee([ln({},mIe)],t.prototype,"loadingIndicator",void 0),Ee([E(!0)],t.prototype,"enableVirtualMaskRow",void 0),Ee([E(!1)],t.prototype,"enableVirtualization",void 0),Ee([E(!1)],t.prototype,"enableColumnVirtualization",void 0),Ee([E(!1)],t.prototype,"enableInfiniteScrolling",void 0),Ee([ln({},uIe)],t.prototype,"searchSettings",void 0),Ee([E(!1)],t.prototype,"allowSorting",void 0),Ee([E("Ellipsis")],t.prototype,"clipMode",void 0),Ee([E(!0)],t.prototype,"allowMultiSorting",void 0),Ee([E(!1)],t.prototype,"allowExcelExport",void 0),Ee([E(!1)],t.prototype,"allowPdfExport",void 0),Ee([ln({},sIe)],t.prototype,"sortSettings",void 0),Ee([ln({},aIe)],t.prototype,"infiniteScrollSettings",void 0),Ee([E(!0)],t.prototype,"allowSelection",void 0),Ee([E(-1)],t.prototype,"selectedRowIndex",void 0),Ee([ln({},hIe)],t.prototype,"selectionSettings",void 0),Ee([E(!1)],t.prototype,"allowFiltering",void 0),Ee([E("Horizontal")],t.prototype,"rowRenderingMode",void 0),Ee([E(!1)],t.prototype,"enableAdaptiveUI",void 0),Ee([E(!1)],t.prototype,"allowReordering",void 0),Ee([E(!1)],t.prototype,"allowResizing",void 0),Ee([E(!1)],t.prototype,"allowRowDragAndDrop",void 0),Ee([ln({},cIe)],t.prototype,"rowDropSettings",void 0),Ee([ln({},lIe)],t.prototype,"filterSettings",void 0),Ee([E(!1)],t.prototype,"allowGrouping",void 0),Ee([E(!1)],t.prototype,"enableImmutableMode",void 0),Ee([E(!1)],t.prototype,"showColumnMenu",void 0),Ee([ln({},fIe)],t.prototype,"groupSettings",void 0),Ee([ln({},gIe)],t.prototype,"editSettings",void 0),Ee([_o([],iIe)],t.prototype,"aggregates",void 0),Ee([E(!1)],t.prototype,"showColumnChooser",void 0),Ee([ln({},JDe)],t.prototype,"columnChooserSettings",void 0),Ee([E(!1)],t.prototype,"enableHeaderFocus",void 0),Ee([E("auto")],t.prototype,"height",void 0),Ee([E("auto")],t.prototype,"width",void 0),Ee([E("Default")],t.prototype,"gridLines",void 0),Ee([E()],t.prototype,"rowTemplate",void 0),Ee([E()],t.prototype,"detailTemplate",void 0),Ee([E()],t.prototype,"childGrid",void 0),Ee([E()],t.prototype,"queryString",void 0),Ee([E("AllPages")],t.prototype,"printMode",void 0),Ee([E("Expanded")],t.prototype,"hierarchyPrintMode",void 0),Ee([E([])],t.prototype,"dataSource",void 0),Ee([E(null)],t.prototype,"rowHeight",void 0),Ee([E()],t.prototype,"query",void 0),Ee([E("USD")],t.prototype,"currencyCode",void 0),Ee([E()],t.prototype,"toolbar",void 0),Ee([E()],t.prototype,"contextMenuItems",void 0),Ee([E()],t.prototype,"columnMenuItems",void 0),Ee([E()],t.prototype,"toolbarTemplate",void 0),Ee([E()],t.prototype,"pagerTemplate",void 0),Ee([E(0)],t.prototype,"frozenRows",void 0),Ee([E(0)],t.prototype,"frozenColumns",void 0),Ee([E("")],t.prototype,"cssClass",void 0),Ee([E("All")],t.prototype,"columnQueryMode",void 0),Ee([E({})],t.prototype,"currentAction",void 0),Ee([E("20.3.59")],t.prototype,"ej2StatePersistenceVersion",void 0),Ee([W()],t.prototype,"created",void 0),Ee([W()],t.prototype,"destroyed",void 0),Ee([W()],t.prototype,"load",void 0),Ee([W()],t.prototype,"rowDataBound",void 0),Ee([W()],t.prototype,"queryCellInfo",void 0),Ee([W()],t.prototype,"headerCellInfo",void 0),Ee([W()],t.prototype,"actionBegin",void 0),Ee([W()],t.prototype,"actionComplete",void 0),Ee([W()],t.prototype,"actionFailure",void 0),Ee([W()],t.prototype,"dataBound",void 0),Ee([W()],t.prototype,"recordDoubleClick",void 0),Ee([W()],t.prototype,"recordClick",void 0),Ee([W()],t.prototype,"rowSelecting",void 0),Ee([W()],t.prototype,"rowSelected",void 0),Ee([W()],t.prototype,"rowDeselecting",void 0),Ee([W()],t.prototype,"rowDeselected",void 0),Ee([W()],t.prototype,"cellSelecting",void 0),Ee([W()],t.prototype,"cellSelected",void 0),Ee([W()],t.prototype,"cellDeselecting",void 0),Ee([W()],t.prototype,"cellDeselected",void 0),Ee([W()],t.prototype,"columnSelecting",void 0),Ee([W()],t.prototype,"columnSelected",void 0),Ee([W()],t.prototype,"columnDeselecting",void 0),Ee([W()],t.prototype,"columnDeselected",void 0),Ee([W()],t.prototype,"columnDragStart",void 0),Ee([W()],t.prototype,"columnDrag",void 0),Ee([W()],t.prototype,"columnDrop",void 0),Ee([W()],t.prototype,"printComplete",void 0),Ee([W()],t.prototype,"beforePrint",void 0),Ee([W()],t.prototype,"pdfQueryCellInfo",void 0),Ee([W()],t.prototype,"pdfHeaderQueryCellInfo",void 0),Ee([W()],t.prototype,"pdfAggregateQueryCellInfo",void 0),Ee([W()],t.prototype,"excelAggregateQueryCellInfo",void 0),Ee([W()],t.prototype,"exportDetailDataBound",void 0),Ee([W()],t.prototype,"excelQueryCellInfo",void 0),Ee([W()],t.prototype,"excelHeaderQueryCellInfo",void 0),Ee([W()],t.prototype,"beforeExcelExport",void 0),Ee([W()],t.prototype,"excelExportComplete",void 0),Ee([W()],t.prototype,"beforePdfExport",void 0),Ee([W()],t.prototype,"pdfExportComplete",void 0),Ee([W()],t.prototype,"rowDragStartHelper",void 0),Ee([W()],t.prototype,"detailDataBound",void 0),Ee([W()],t.prototype,"rowDragStart",void 0),Ee([W()],t.prototype,"rowDrag",void 0),Ee([W()],t.prototype,"rowDrop",void 0),Ee([W()],t.prototype,"toolbarClick",void 0),Ee([W()],t.prototype,"beforeOpenColumnChooser",void 0),Ee([W()],t.prototype,"beforeOpenAdaptiveDialog",void 0),Ee([W()],t.prototype,"batchAdd",void 0),Ee([W()],t.prototype,"batchDelete",void 0),Ee([W()],t.prototype,"batchCancel",void 0),Ee([W()],t.prototype,"beforeBatchAdd",void 0),Ee([W()],t.prototype,"beforeBatchDelete",void 0),Ee([W()],t.prototype,"beforeBatchSave",void 0),Ee([W()],t.prototype,"beginEdit",void 0),Ee([W()],t.prototype,"commandClick",void 0),Ee([W()],t.prototype,"cellEdit",void 0),Ee([W()],t.prototype,"cellSave",void 0),Ee([W()],t.prototype,"cellSaved",void 0),Ee([W()],t.prototype,"resizeStart",void 0),Ee([W()],t.prototype,"resizing",void 0),Ee([W()],t.prototype,"resizeStop",void 0),Ee([W()],t.prototype,"keyPressed",void 0),Ee([W()],t.prototype,"beforeDataBound",void 0),Ee([W()],t.prototype,"contextMenuOpen",void 0),Ee([W()],t.prototype,"contextMenuClick",void 0),Ee([W()],t.prototype,"columnMenuOpen",void 0),Ee([W()],t.prototype,"columnMenuClick",void 0),Ee([W()],t.prototype,"checkBoxChange",void 0),Ee([W()],t.prototype,"beforeCopy",void 0),Ee([W()],t.prototype,"beforePaste",void 0),Ee([W()],t.prototype,"beforeAutoFill",void 0),Ee([W()],t.prototype,"columnDataStateChange",void 0),Ee([W()],t.prototype,"dataStateChange",void 0),Ee([W()],t.prototype,"dataSourceChanged",void 0),Ee([W()],t.prototype,"exportGroupCaption",void 0),Ee([W()],t.prototype,"lazyLoadGroupExpand",void 0),Ee([W()],t.prototype,"lazyLoadGroupCollapse",void 0),e=Ee([ui],t)}(nn),Yse=function(){function r(t,e){this.isAsyncPrint=!1,this.defered=new fl,this.parent=t,!this.parent.isDestroyed&&(this.parent.on(is,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(mr,this.actionBeginFunction),this.parent.on(np,this.onEmpty.bind(this)),this.parent.on(Y8,this.hierarchyPrint,this),this.scrollModule=e)}return r.prototype.isContentReady=function(){var t=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){t.defered.promise.then(function(){t.contentReady()}),t.isPrintGrid()&&t.hierarchyPrint()}:this.contentReady},r.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var t=window.printGridObj;t&&!t.element.querySelector("[aria-busy=true")&&t.printModule.defered.resolve()},r.prototype.print=function(){this.renderPrintGrid()},r.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},r.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},r.prototype.renderPrintGrid=function(){var t=this.parent,e=ri("div",{id:this.parent.element.id+"_print",className:t.element.className+" e-print-grid"});e.classList.remove("e-gridhover"),document.body.appendChild(e);for(var i=new zV($V(t,t.hierarchyPrintMode)),n=0;n<i.columns.length;n++)i.columns[n]=de({},i.columns[n]),t.isFrozenGrid()&&!t.getFrozenColumns()&&(i.columns[n].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=t.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var s=i.getInjectedModules(),o=t.getInjectedModules();(!s||s.length!==o.length)&&i.setInjectedModules(o),t.notify("printGrid-Init",{element:e,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(e),i.trigger=t.trigger},r.prototype.contentReady=function(){if(this.isPrintGrid()){var t=this.parent;if(this.isAsyncPrint)return void this.printGrid();var e={requestType:"print",element:t.element,selectedRows:t.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:t.hierarchyPrintMode};if(this.isAsyncPrint||t.trigger(jre,e),e.cancel)return void ce(t.element);this.isAsyncPrint||this.printGrid()}},r.prototype.printGrid=function(){var t=this.parent;if("auto"!==t.height){var e=this.scrollModule.getCssProperties(),i=t.element.querySelector("."+gs),n=t.element.querySelector("."+$s);i.style.height="auto",i.style.overflowY="auto",n.style[e.padding]="",n.firstElementChild.style[e.border]=""}t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var s=0,o=[].slice.call(t.element.getElementsByClassName(gs));s<o.length;s++)o[s].style.overflowX="hidden";for(var l=[].slice.call(t.element.getElementsByClassName("e-spin-show")),h=0,u=[].slice.call(l);h<u.length;h++)li(u[h],["e-spin-hide"],["e-spin-show"]);this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj,t.trigger(Ure,{element:t.element}),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},r.prototype.printGridElement=function(t){li(t.element,["e-print-grid-layout"],["e-print-grid"]),t.isPrinting&&ce(t.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=function X1(r,t){var e=document.createElement("div"),i=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(n.length)for(var s=0,o=n.length;s<o;s++)i.push(n[s]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),e.appendChild(r.cloneNode(!0));var l=0;for(o=i.length;l<o;l++)a+=i[l].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+e.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(h))},500);return t}(t.element,this.printWind)},r.prototype.removeColGroup=function(t){var e=t.groupSettings.columns.length,i=t.element,n="#"+t.element.id;if(e){for(var s=Ze(".e-groupcaption",i),o=s[e-1].getAttribute("colspan"),a=0;a<s.length;a++)s[a].setAttribute("colspan",o);var l=Ze("colgroup"+n+"colgroup",i),h=Ze(".e-content colgroup",i);this.hideColGroup(l,e),this.hideColGroup(h,e)}},r.prototype.hideColGroup=function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<e;n++)t[i].children[n].style.display="none"},r.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(is,this.contentReady.bind(this)),this.parent.removeEventListener(mr,this.actionBeginFunction),this.parent.off(np,this.onEmpty.bind(this)),this.parent.off(Y8,this.hierarchyPrint))},r.prototype.getModuleName=function(){return"print"},r.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat([jre,Ure,"load"]),r}();function Zse(r,t,e){return f(r)||""===r?"":Ye.getObject(r,t)}function Xse(r,t){requestAnimationFrame(function(){try{t(null,r())}catch(e){t(e)}})}var qc=0;function CIe(r,t){qc=0;var e="gSummary",n=t.groupSettings.columns.length,s="records",o="items",a=r[e],l=0,h="aggregatesCount";if(a===r.data.count)return t.groupSettings.columns.length&&!f(r[h])&&r[h]?1!==t.groupSettings.columns.length?qc+=0!==r.indent&&a<2?r[e]*(n-r.indent+(n-r.indent)*r[h]):r[e]*(n-r.indent+(n-r.indent-1)*r[h])+r[h]:1===t.groupSettings.columns.length&&(qc+=r[e]*(n-r.indent)+r[h]):t.groupSettings.columns.length&&(qc+=1!==t.groupSettings.columns.length?r[e]*(t.groupSettings.columns.length-r.indent):r[e]),qc;for(var u=0,d=r.data[o].length;u<d;u++){var m=r.data[o][u];qc+=m[o].length+(n===t.columns.length||f(m[o][s])?0:m[o][s].length),l+=f(m[o][s])||f(r[h])?m[o].length:m[o][s].length,m[o].GroupGuid&&0!==m[o].childLevels&&Jse(m)}return qc+=r.data[o].length,f(r[h])||r[h]&&qc&&0!==l&&(qc+=(qc-l)*r[h]+r[h]),qc}function Jse(r){for(var t="items",i=0,n=r[t].length;i<n;i++){var s=r[t][i];qc+=s.count,0!==s[t].childLevels&&Jse(s)}}function uS(r,t){for(var e=[],i=0,n=r.length;i<n;i++){var s=t(r[i],i);f(s)||e.push(s)}return e}function $M(r){for(var t=[],e=0;e<r.length;e++)t.push(de({},YM(r[e]),{},!0));return t}function El(r){if(r)try{return document.querySelectorAll(r).length?Pi(document.querySelector(r).innerHTML.trim()):Pi(r)}catch{return Pi(r)}}function Ff(r,t){var e={},i=["style","class"];de(e,t,{}),"style"in e&&(Vt(r,e[i[0]]),delete e[i[0]]),"class"in e&&(N([r],e[i[1]]),delete e[i[1]]),Ue(r,e)}function UV(r,t){void 0===t&&(t=0);for(var e=0,i=r.length;e<i;e++)r[e].columns?(r[e].index=f(r[e].index)?t:r[e].index,t++,t=UV(r[e].columns,t)):(r[e].index=f(r[e].index)?t:r[e].index,t++);return t}function aD(r,t,e){for(var i=0,n=r.length;i<n;i++){var s=void 0;"string"==typeof r[i]?s=new _h({field:r[i]},e):r[i]instanceof _h&&!r[i].columns?s=r[i]:r[i].columns?(r[i].columns=aD(r[i].columns,null,e),s=new _h(r[i],e)):s=new _h(r[i],e),s.type&&"checkbox"===s.type.toLowerCase()&&(s.allowReordering=!1),s.headerText=f(s.headerText)?s.foreignKeyValue||s.field||"":s.headerText,s.foreignKeyField=s.foreignKeyField||s.field,s.valueAccessor=("string"==typeof s.valueAccessor?ie(s.valueAccessor,window):s.valueAccessor)||Zse,s.width=t&&f(s.width)?200:s.width,f(s.visible)&&(s.visible=!0),r[i]=s}return r}function YM(r){return r instanceof Ti?ie("properties",r):r}function me(r,t,e){for(var i=r;i&&!(e?i.id===t:i.classList.contains(t));)i=i.parentElement;return i}function RG(r){for(var t=[],e=0,i=r.length;e<i;e++)r[e].hasOwnProperty("properties")?t.push(r[e].properties):t.push(r[e]);return t}function eC(r){var t={};return t.x=f(r.clientX)?r.changedTouches[0].clientX:r.clientX,t.y=f(r.clientY)?r.changedTouches[0].clientY:r.clientY,t}var SIe=0;function op(r){return r+SIe++}function ya(r,t){for(var e=0,i=t.length;e<i;e++)r.appendChild(i===t.length?t[e]:t[0]);return r}function toe(r,t,e,i){if("Custom"===r){var n=e.customAggregate;return"string"==typeof n&&(n=ie(n,window)),n?n.call(i,t,e):""}return e.field in t||t instanceof Array?Ye.aggregates[r.toLowerCase()](t,e.field):null}var XM,LG=null;function tC(){if(null!==LG)return LG;var t,r=document.createElement("div");return r.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(r),t=r.offsetWidth-r.clientWidth|0,document.body.removeChild(r),LG=t}function Gc(r){return r.split(".").length>1}function Lo(r){return void 0===r&&(r=""),r.replace(/\./g,"___")}function WV(r){return void 0===r&&(r=""),r.replace(/___/g,".")}function Bg(r,t,e){var i=me(e,Sn),n=!i||i&&!i.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(r.isIdentity||r.isPrimaryKey||!r.allowEditing):!("add"===t&&r.isIdentity||n&&!r.allowEditing&&!r.isIdentity&&!r.isPrimaryKey)}function ap(r){var t=le("#"+r.element.id+"EditConfirm",r.element);return"Batch"===r.editSettings.mode&&Ze(".e-updatedtd",r.element).length&&r.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function uu(r,t){var e="e-wrap";r=r instanceof Array?r:[r];for(var i=0;i<r.length;i++)t?r[i].classList.add(e):r[i].classList.remove(e)}function ioe(r,t){var n,e=r.getService("valueFormatter");switch(("date"===t.type||"datetime"===t.type)&&(n={type:t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(n.format=t.format)),t.type){case"date":case"datetime":t.setFormatter(e.getFormatFunction(n)),t.setParser(e.getParserFunction(n));break;case"number":t.setFormatter(e.getFormatFunction({format:t.format})),t.setParser(e.getParserFunction({format:t.format}))}}function Kc(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];for(var n=0,s=r.length;n<s;n++)t?(li(r[n],e.slice(),[]),r[n].setAttribute("aria-selected","true")):(li(r[n],[],e.slice()),r[n].removeAttribute("aria-selected"))}function dS(r,t){r.checked=t}function OG(r,t,e){var i=ri("div",{className:e});return i.appendChild(t),i.setAttribute("uid",r),i}function QM(r,t){z([r],["e-check","e-stop","e-uncheck"]),r.classList.add(t?"e-check":"e-uncheck")}function qV(r,t,e){for(var i=0;i<t.length;i++)jt(t[i].field,iC(t[i],e),r.foreignKeyData);var n=r.cells;for(i=0;i<n.length;i++)n[i].isForeignKey&&jt("foreignKeyData",ie(n[i].column.field,r.foreignKeyData),n[i])}function iC(r,t,e,i){var n=r.foreignKeyField,s=f(e)?Zse(r.field,t):e;s=f(s)?"":s;var o=new si,a=i||(r.dataSource instanceof Je&&r.dataSource.dataSource.json.length?r.dataSource.dataSource.json:r.columnData);return s.getDay?o.where(nC({field:n,operator:"equal",value:s,matchCase:!1})):o.where(n,"==",s,!1),new Je(a).executeLocal(o)}function JM(r,t){var e;return t.some(function(i){return e=i,i.foreignKeyValue===r})&&e}function nC(r,t){var e,i,n,s=de({},YM(r)),o=de({},YM(r));if(f(r.value)||""===r.value)return new kn(s.field,s.operator,s.value,!1);var a=new Date(r.value);if("equal"===r.operator||"notequal"===r.operator){"datetime"===t?(i=new Date(a.setSeconds(a.getSeconds()-1)),n=new Date(a.setSeconds(a.getSeconds()+2)),r.value=new Date(a.setSeconds(n.getSeconds()-1))):(i=new Date(a.setHours(0)-1),n=new Date(a.setHours(24))),s.value=i,o.value=n,"equal"===r.operator?(s.operator="greaterthan",o.operator="lessthan"):"notequal"===r.operator&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var l=new kn(s.field,s.operator,s.value,!1),h=new kn(o.field,o.operator,o.value,!1);e="equal"===r.operator?l.and(h):l.or(h)}else"date"===t&&("lessthanorequal"===r.operator||"greaterthan"===r.operator)&&(s.value=new Date(a.setHours(24)-1)),"string"==typeof s.value&&(s.value=new Date(s.value)),e=new kn(s.field,s.operator,s.value,!1);return r.setProperties?r.setProperties({ejpredicate:e},!0):r.ejpredicate=e,e}function ks(r){return r.enableVirtualization&&r.groupSettings.columns.length>0&&r.isVirtualAdaptive}function xs(r,t){if(void 0===r&&(r=""),r){for(var e=t,i=r.split("."),n=0;n<i.length&&!f(e);n++)e=e[i[n]];return e}}function $V(r,t){void 0===t&&(t="Expanded");var e={};if(!r)return e;for(var i=r.isFrozenGrid()&&!r.getFrozenColumns(),n=0,s=Yse.printGridProp;n<s.length;n++){var o=s[n];e[o]="columns"===o?RG(i?r.getColumns():r[o]):"allowPaging"===o?"CurrentPage"===r.printMode:YM(r[o])}return e.enableHover=!1,r.childGrid&&"None"!==t&&(e.expandedRows=function IIe(r,t){for(var i={},n=0,s=r.getRowsObject();n<s.length;n++){var o=s[n];if(o.isExpand&&!o.isDetailRow){var a=r.allowPaging&&"AllPages"===r.printMode?o.index+r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize:o.index;i[a]={},i[a].isExpand=!0,i[a].gridModel=$V(o.childGrid,t),i[a].gridModel.query=r.childGrid.query}}return i}(r,t)),e}function YV(r,t,e,i){var n=r||{},s=arguments.length;i&&(s-=1);for(var o=1;o<s;o++)if(arguments[o])for(var a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(AIe(a)):Object.keys(a),h=0;h<l.length;h++){var u=n[l[h]],d=a[l[h]];n[l[h]]=i&&(Hu(d)||Array.isArray(d))?Hu(d)?de({},u||{},d,i):de([],u||[],d,i):d}return n}function AIe(r){for(var t=[];Object.getPrototypeOf(r)&&Object.keys(Object.getPrototypeOf(r)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(r))),r=Object.getPrototypeOf(r);return t}function ooe(r,t){var e=t,i=[];if(r.columns){t++;for(var n=0;n<r.columns.length;n++)i[n]=ooe(r.columns[n],t);for(var s=0;s<i.length;s++)e<i[s]&&(e=i[s]);t=e}return t}var $c=(()=>(function(r){r.timer=null}($c||($c={})),$c))();function PG(r){var i=document.defaultView.getComputedStyle(r,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(i.split(" ")[4]),height:parseFloat(i.split(" ")[5])}}function XV(r,t){if(r&&t){var e=U(r,"."+Sn).getBoundingClientRect().height,i=U(t,"."+Sn).getBoundingClientRect().height;e>i?t.style.height=e+"px":r.style.height=i+"px"}}function BG(r){for(var t=r.getVisibleColumns(),e=0,i=0,n=0;n<t.length;n++)$t(t[n].width)?i++:-1!==t[n].width.toString().indexOf("%")&&e++;return("auto"===r.width||"string"==typeof r.width&&-1!==r.width.indexOf("%"))&&!r.groupSettings.showGroupedColumn&&r.groupSettings.columns.length&&e&&!i}function OIe(r,t,e,i){var n=r.dataToBeUpdated[e].concat(t[e]).reduce(function(s,o){return s[o[i]]=void 0===s[o[i]]?o:Object.assign(s[o[i]],o),s},{});r.dataToBeUpdated[e]=Object.keys(n).map(function(s){return n[s]})}function QV(r,t,e){var i=r.getFrozenLeftCount(),n=r.getMovableColumnsCount(),s=r.getFrozenRightColumnsCount(),o=r.getFrozenMode(),a=r.isRowDragable()?1:0,l="Right"===o?i+n:i+n+a,h="Right"===o?i:i+a,u="Right"===o?t.length-s-a:s?t.length-s:t.length;return e===cs?t=t.slice(0,i?i+a:t.length):e===dr?t=t.slice(l,t.length):"movable"===e&&(t=t.slice(h,u)),t}function rC(r,t,e,i,n){(e[0].length||i)&&(n?t(cs,e[0],n[0]):t(cs,e[0])),r.isFrozenGrid()&&(e[1].length||i)&&(n?t("movable",e[1],n[1]):t("movable",e[1])),(r.getFrozenMode()===Jt||"Right"===r.getFrozenMode())&&(e[2].length||i)&&(n?t(dr,e[2],n[2]):t(dr,e[2]))}function JV(r){return["Right"!==r.getFrozenMode()?r.getRowsObject():[],r.getMovableRowsObject(),r.getFrozenRightRowsObject()]}function HG(r,t,e){for(var n=r.children.length,s=0,o=0;o<n;o++,s++)o>=t&&o<e||(r.removeChild(r.children[s]),s--)}function aoe(r,t,e){return"movable"===t.getFreezeTableName()?[].slice.call(r.getMovableDataRows()[e].getElementsByClassName(on)):t.getFreezeTableName()===dr?[].slice.call(r.getFrozenRightDataRows()[e].getElementsByClassName(on)):[].slice.call(r.getDataRows()[e].getElementsByClassName(on))}function VG(r,t,e,i){var n=r.getFrozenLeftCount(),s=r.getMovableColumnsCount();return i="movable"===t.getFreezeTableName()?i-n:t.getFreezeTableName()===dr?i-(n+s):i,aoe(r,t,e)[i]}function loe(r,t,e,i,n,s,o){o||r.getFreezeTableName()===cs||!t&&r.getFreezeTableName()===dr||1===s?e[Lo(r.field)]=r.validationRules:"movable"!==r.getFreezeTableName()&&r.getFreezeTableName()?r.getFreezeTableName()===dr&&(n[Lo(r.field)]=r.validationRules):i[Lo(r.field)]=r.validationRules}function BIe(r,t,e){var i,n=new qr;if("number"===t)try{i=n.getNumberPattern({format:r,currency:this.currency,useGrouping:!0},!0)}catch{i=r}else if("date"===t||"time"===t||"datetime"===t)try{if(f(i=n.getDatePattern({skeleton:r,type:t},e)))throw"error"}catch{try{i=n.getDatePattern({format:r,type:t},e)}catch{i=r}}else i=r;if("number"!==t){var o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(a){return o[a]})}return i}function uoe(r){if(r.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),e=0;e<t.length;e++)t[e].classList.add("e-bigger")}function zG(r,t){for(var e,i=r.split(".").length,n=r.split("."),s=t,o=0;o<i;o++)s=e=s[n[o]];return e}function wo(r,t,e,i){for(var n=0,s=t;n<s.length;n++){var o=s[n];e?r.on(o.event,o.handler,i):r.off(o.event,o.handler)}}function iL(r,t,e,i){var n=Lo(t.field);return i=Object.assign(i,{id:r.element.id+n,name:n,"e-mappinguid":t.uid}),r.createElement("input",{className:e,attrs:i})}function doe(r,t){var e;r.columnModel||r.getColumns();for(var i=0,n=r.columnModel;i<n.length;i++){var s=n[i];if(s.field===t){e=s;break}}return e}function nL(r,t){r.destroyTemplate(t),r.isReact&&r.renderTemplates()}function Hg(r,t,e){var i=r,n=t,s=!1;if(e)for(var o=n[0];o<i.length;o++)for(var a=i[o],l=0;l<a.length;l++){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}else for(o=n[0];o>=0;o--)for(l=(a=i[o]).length-1;l>=0;l--){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}return n}var sC=function(){function r(t){this.existingPredicate={},this.foreignKeyQuery=new si,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.parent=t,this.id=this.parent.element.id,this.valueFormatter=new Jw(this.parent.locale),this.cBoxTrue=_b(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=_b(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&N([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&N([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])}return r.prototype.destroy=function(){this.closeDialog()},r.prototype.wireEvents=function(){T.add(this.dlg,"click",this.clickHandler,this),T.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=mT(this.searchBoxKeyUp,200);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&T.add(t,"keyup",this.searchHandler,this)},r.prototype.unWireEvents=function(){T.remove(this.dlg,"click",this.clickHandler),T.remove(this.dlg,"keyup",this.keyupHandler);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&T.remove(t,"keyup",this.searchHandler)},r.prototype.foreignKeyFilter=function(t,e,i){var n=this,s={},o=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(i)).then(function(l){n.options.column.columnData=l.result,n.parent.notify(tD,{predicate:s,column:n.options.column}),t.ejpredicate=s.predicate.predicates;for(var h=s.predicate.predicates,u=0;u<h.length;u++)o.push({field:h[u].field,predicate:"or",matchCase:h[u].ignoreCase,ignoreAccent:h[u].ignoreAccent,operator:h[u].operator,value:h[u].value,type:n.options.type});t.filterCollection=o.length?o:e.filter(function(d){return d.field=n.options.field}),n.options.handler(t)})},r.prototype.foreignFilter=function(t,e){var n=new kn(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",e,!0,this.options.ignoreAccent);this.foreignKeyFilter(t,[t.filterCollection],n)},r.prototype.searchBoxClick=function(t){var e=t.target;e.classList.contains("e-searchclear")&&(this.sInput.value=e.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},r.prototype.searchBoxKeyUp=function(t){!f(this.parent.loadingIndicator)&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon()},r.prototype.updateSearchIcon=function(){this.sInput.value.length?li(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):li(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},r.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},r.prototype.updateDataSource=function(){var t=this.options.dataSource;if(!(t instanceof Je))for(var i=0;i<t.length;i++)if("object"!=typeof t){var n={};n[this.options.field]=t[i],t[i]=n}},r.prototype.updateModel=function(t){this.options=t,this.existingPredicate=t.actualPredicate||{},this.options.dataSource=t.dataSource,this.options.dataManager=t.dataManager?t.dataManager:t.dataSource,this.updateDataSource(),this.options.type=t.type,this.options.format=t.format||"",this.options.ignoreAccent=t.ignoreAccent||!1,this.options.filteredColumns=t.filteredColumns||this.parent.filterSettings.columns,this.options.query=t.query||new si,this.options.allowCaseSensitive=t.allowCaseSensitive||!1,this.options.uid=t.column.uid,this.options.disableHtmlEncode=t.column.disableHtmlEncode||!1,this.values={},this.localeObj=t.localeObj,this.isFiltered=t.filteredColumns.length},r.prototype.getAndSetChkElem=function(t){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!t.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};ke.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},r.prototype.showDialog=function(t){var e={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};e.filterModel=this,this.parent.notify("cbox-filter-begin",e),e.cancel?t.cancel=e.cancel:(this.dialogObj=new Hd({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!f(me(t.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(t),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),t.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=t.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType?(kc({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),rh(this.spinner)):this.parent.showMaskRow(void 0,this.dialogObj.element),this.getAllData())},r.prototype.renderResponsiveFilter=function(t){t.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},r.prototype.dialogCreated=function(t){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":Q.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function noe(r,t){var e=t.element.style.display;t.element.style.display="block";var i=t.width,n=YT(r,t.element);t.element.style.display=e,t.element.style.top=n.top+r.getBoundingClientRect().height-5+"px";var s=n.left-i+r.clientWidth;t.element.style.left=s<1?i+s-16+"px":s+-4+"px"}(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify("filterDialogCreated",t)},r.prototype.openDialog=function(t){this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t)},r.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var t=this.options.columns.filter(function(i){return i.getFilterItemTemplate()}),e=this.parent.registeredTemplate;t.length&&!f(e)&&e.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&nL(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),He(this.dlg),this.dlg=null,this.parent.notify(kV,{})}},r.prototype.clearFilter=function(t){var e={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(NM,e),!e.cancel&&this.options.handler({action:"clear-filter",field:t?t.field:this.options.field})},r.prototype.btnClick=function(t){if(this.filterState){if("input"===t.target.tagName.toLowerCase()&&t.target.classList.contains("e-searchinput")||13===t.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var e=t.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===e?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===e&&this.clearFilter()}this.closeDialog()}else"input"!==t.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify("after-filter-column-menu-close",{})},r.prototype.fltrBtnHandler=function(){var o,t=this,e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i=e,n="equal",s=this.dialogObj.element.querySelector(".e-dropdownlist");s&&(this.options.operator=n=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(o=this.searchBox.querySelector(".e-searchinput"));var l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:n,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;h&&o&&""===o.value&&(n=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=n);var u,y,C=[];if(e.length!==this.itemsCnt||o&&o.value&&""!==o.value){for(var S=0;S<e.length;S++){y=de({},{value:u=this.values[me(e[S],"e-ftrchk").getAttribute("uid")]},l),u&&!u.toString().length&&(y.operator=h?"notequal":"equal"),""===u||f(u)?C=C.concat(r.generateNullValuePredicates(l)):C.push(y);var I={instance:this,handler:this.fltrBtnHandler,arg1:y.field,arg2:y.predicate,arg3:y.operator,arg4:y.matchCase,arg5:y.ignoreAccent,arg6:y.value,cancel:!1};if(this.parent.notify(NM,I),I.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&f(this.values[me(i[i.length-1],"e-ftrchk").getAttribute("uid")])&&h&&C.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"and",value:null}),this.initiateFilter(C)}else this.options.filteredColumns.some(function(O){return t.options.field===O.field})&&this.clearFilter()},r.generateNullValuePredicates=function(t){var e=[];return"string"===t.type&&e.push({field:t.field,ignoreAccent:t.ignoreAccent,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:""}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:null}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:void 0}),e},r.prototype.initiateFilter=function(t){var i,e=t[0];if(!f(e)){i=e.ejpredicate?e.ejpredicate:new kn(e.field,e.operator,e.value,!e.matchCase,e.ignoreAccent);for(var n=1;n<t.length;n++)i=void 0!==t[n].ejpredicate?i[t[n].predicate](t[n].ejpredicate):i[t[n].predicate](t[n].field,t[n].operator,t[n].value,!t[n].matchCase,t[n].ignoreAccent);var s={action:"filtering",filterCollection:t,field:this.options.field,ejpredicate:kn.or(i)};this.options.handler(s)}},r.prototype.isForeignColumn=function(t){return!!t.isForeignColumn&&t.isForeignColumn()},r.prototype.refreshCheckboxes=function(){var t=this,e=this.sInput.value,i=this.options.column,n=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),o=n.queries.filter(function(L){return L&&"onWhere"===L.fn})[0];n.queries=[],s.queries=[];var a="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,l=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",h=!0,u=this.options.ignoreAccent,d=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=""===a||void 0===a?void 0:a;var C,m=[],y={field:d,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:u},S=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())?a="true":void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&(a="false"),void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&S?(S(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&S&&(S(),a=!1),l="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){var I=new qr,k="string"==typeof this.options.format?this.options.format:this.options.format.format;a=k&&I.parseDate(e,{format:k})||new Date(e)}this.addDistinct(n),this.parent.trigger(mr,{requestType:"filtersearchbegin",filterModel:this,columnName:d,column:i,operator:l,matchCase:h,ignoreAccent:u,filterChoiceCount:null,query:n,value:a},function(L){if(L.operator=L.operator,C=new kn(d,L.operator,a,L.matchCase,L.ignoreAccent),"date"===t.options.type||"datetime"===t.options.type){var B={field:d,operator:l="equal",value:a,matchCase:h,ignoreAccent:u};f(a)||(C=nC(B,t.options.type))}if(e&&"string"==typeof e&&t.isBlanks&&t.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){m=m.concat(r.generateNullValuePredicates(y));var j=r.generatePredicate(m);j.predicates.push(C),n.where(j)}else e.length?(C=f(o)?C:C.and(o.e),n.where(C)):f(o)||n.where(o.e);L.filterChoiceCount=f(L.filterChoiceCount)?1e3:L.filterChoiceCount;var G={};rh(t.spinner),t.renderEmpty=!1,t.isForeignColumn(i)&&e.length?("result"in i.dataSource?new Je(i.dataSource.result):i.dataSource).executeQuery(n).then(function(ve){var xe=t.options.column.columnData;t.options.column.columnData=ve.result,t.parent.notify(tD,{predicate:G,column:i}),G.predicate.predicates.length?s.where(G.predicate):t.renderEmpty=!0,t.options.column.columnData=xe,s.take(L.filterChoiceCount),t.search(L,s)}):(n.take(L.filterChoiceCount),t.search(L,n))})},r.prototype.search=function(t,e){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processSearch(e)},r.prototype.getPredicateFromCols=function(t){for(var e=r.getPredicate(t),i=[],n={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(e);a<l.length;a++){var h=l[a],u=void 0;s&&!this.parent.getColumnByField(h)&&(u=JM(h,o)),u?(this.parent.notify(tD,{predicate:n,column:u}),n.predicate.predicates.length&&i.push(kn.or(n.predicate.predicates))):i.push(e[h])}return i.length&&kn.and(i)},r.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new si},r.prototype.getAllData=function(){var t=this;this.customQuery=!1;var e=this.getQuery();e.requiresCount(),this.addDistinct(e);var i={requestType:Gre,query:e,filterChoiceCount:null};i.filterModel=this,this.parent.trigger(mr,i,function(s){s.filterChoiceCount=f(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.take(s.filterChoiceCount),s.query.distincts.length||(t.customQuery=!0,t.queryGenerate(e)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(s,e):t.processDataOperation(e,!0)})},r.prototype.addDistinct=function(t){var e=Ye.distinct(this.options.filteredColumns,"field");return e.indexOf(this.options.column.field)<=-1&&(e=e.concat(this.options.column.field)),t.distinct(e),t},r.prototype.filterEvent=function(t,e){var i=this,n=function NG(r,t){var e=function LIe(r){var t=new Zh,e=new Je({url:"",adaptor:new Zh}),i=t.processQuery(e,r);return JSON.parse(i.data)}(t),i=new fl;return e.dataSource=i.resolve,e.action=r,{state:e,deffered:i}}(t,e);this.parent.trigger(OM,n.state),n.deffered.promise.then(function(o){i.dataSuccess(o)})},r.prototype.processDataOperation=function(t,e){var i=this;this.options.dataSource=this.options.dataSource instanceof Je?this.options.dataSource:new Je(this.options.dataSource);var n=[],s=[];if(this.isForeignColumn(this.options.column)&&e){var o="result"in this.options.column.dataSource?new Je(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=t.params,n.push(o.executeQuery(this.foreignKeyQuery)),s.push(function(l){return i.foreignKeyData=l})}n.push(this.options.dataSource.executeQuery(t)),s.push(this.dataSuccess.bind(this));var a=0;Promise.all(n).then(function(l){for(var h=0;h<l.length;h++)s[a++](l[h].result)})},r.prototype.dataSuccess=function(t){this.fullData=t;var e={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",e),e.executeQuery){var i=new si;this.customQuery||this.queryGenerate(i);var n=new Je(e.dataSource).executeLocal(i);this.filteredData=r.getDistinct(n,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,e.executeQuery?this.filteredData:e.dataSource,e),this.sInput&&this.sInput.focus();var a={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};a.filterModel=this,this.parent.notify(iD,a),this.isCheckboxFilterTemplate&&Nl(this.spinner)},r.prototype.queryGenerate=function(t){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var e=this.parent.searchSettings,i=e.fields.length?e.fields:this.options.columns.map(function(l){return l.field});t.search(e.key,i,e.operator,e.ignoreCase,e.ignoreAccent)}if(this.options.filteredColumns.length){for(var n=[],s=0;s<this.options.filteredColumns.length;s++){var o=this.options.filteredColumns[s];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&n.push(this.options.filteredColumns[s])):o.field!==this.options.field&&n.push(this.options.filteredColumns[s])}var a=this.getPredicateFromCols(n);a&&t.where(a)}},r.prototype.processDataSource=function(t,e,i,n){rh(this.spinner),this.updateResult();var s={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify("beforeCheckboxfilterRenderer",s),this.isCheckboxFilterTemplate=s.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate||this.createFilterItems(i,e,n)},r.prototype.processSearch=function(t){this.processDataOperation(t)},r.prototype.updateResult=function(){this.result={};var t=this.getPredicateFromCols(this.options.filteredColumns),e=new si;t&&e.where(t),this.parent.notify("before-checkbox-renderer-query",{query:e});for(var n=0,s=new Je(this.fullData).executeLocal(e);n<s.length;n++)this.result[xs(this.options.field,s[n])]=!0},r.prototype.clickHandler=function(t){var e=t.target;if(f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||!me(e,"e-mask-ftrchk")){var i=me(e,"e-checkbox-wrapper");if(me(e,"e-searchbox")&&this.searchBoxClick(t),i&&!this.isCheckboxFilterTemplate){var n=i.querySelector(".e-selectall");n?this.updateAllCBoxes(!n.classList.contains("e-check")):function soe(r){var t=r.querySelector(".e-frame"),e=t.previousSibling;t.classList.contains("e-check")?(e.checked=!1,li(t,["e-uncheck"],["e-check"])):(e.checked=!0,li(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(me(i,"e-ftrchk"))}},r.prototype.keyupHandler=function(t){this.setFocus(me(t.target,"e-ftrchk"))},r.prototype.setFocus=function(t){var e=this.dlg.querySelector(".e-chkfocus");e&&e.classList.remove("e-chkfocus"),t&&t.classList.add("e-chkfocus")},r.prototype.updateAllCBoxes=function(t){for(var i=0,n=[].slice.call(this.cBox.getElementsByClassName("e-frame"));i<n.length;i++){var s=n[i];QM(s,t),dS(s.previousSibling,t)}},r.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},r.prototype.createCheckbox=function(t,e,i){var n=e?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);dS(n.querySelector("input"),e);var s=n.querySelector(".e-label"),o=YV({},i,{column:this.options.column,parent:this.parent});return s[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!f(t)&&t.toString().length?t:this.getLocalizedLabel("Blanks"),s.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof t&&(s.innerHTML=this.getLocalizedLabel(!0===t?"FilterTrue":"FilterFalse")),N([s],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(s.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,s),this.parent.renderTemplates()):ya(s,this.options.template(o,this.parent,"filterItemTemplate"))),n},r.prototype.updateIndeterminatenBtn=function(){var o,t=this.cBox.children.length-1,e=[],i=!1,n=this.cBox.querySelector(".e-selectall"),s=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;this.options.isResponsiveFilter||((o=this.dialogObj.btnObj[0]).disabled=!1);var a=n.previousSibling;dS(a,!1),a.indeterminate=!1,t===s?(e=["e-check"],dS(a,!0)):s?(e=["e-stop"],a.indeterminate=!0):(e=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),z([n],["e-check","e-stop","e-uncheck"]),N([n],e),this.parent.notify(pG,{disabled:i})},r.prototype.createFilterItems=function(t,e,i){var n,o,s=this.parent.createElement("div"),a=!1;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0]);var l=-1,h="ejValue";i.executeQuery||(h=i.field);for(var u=0;u<t.length;u++){var d=ie(h,t[u]);(""===d||f(d))&&(l+=1)}if(this.itemsCnt=-1!==l?t.length-l:t.length,t.length&&!this.renderEmpty){var m=this.getLocalizedLabel("SelectAll"),y=this.cBox.querySelector(".e-checkfltrnmdiv");y&&y.classList.remove("e-checkfltrnmdiv");var C=this.createCheckbox(m,!1,((n={})[this.options.field]=m,n));this.parent.cssClass&&N([C],[this.parent.cssClass]);var S=OG(op("cbox"),C,"e-ftrchk");S.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(S);var I=new kn("field","equal",this.options.field);this.options.foreignKeyValue&&(I=I.or("field","equal",this.options.foreignKeyValue));var k=new Je(this.options.filteredColumns).executeLocal((new si).where(I)).length,O=void 0;for(u=0;u<t.length;u++){var L=op("cbox");this.values[L]=ie(h,t[u]);var B=ie(this.options.field,t[u]);this.options.formatFn&&(B=this.valueFormatter.toView(B,this.options.formatFn));var j={value:B,column:this.options.column,data:t[u]};if(this.parent.notify("filter-cbox-value",j),""===(B=j.value)||f(B)){if(O)continue;O=!0}var G=this.createCheckbox(B,this.getCheckedState(k,this.values[L]),ie("dataObj",t[u]));s.appendChild(OG(L,G,"e-ftrchk"))}this.cBox.innerHTML="",ya(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),o&&(o.disabled=!1),a=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),ya(this.cBox.children[0],[].slice.call(s.children)),o&&(o.disabled=!0),a=!0;o&&t.length&&(this.filterState=!o.disabled,o.dataBind());var ae={requestType:Gre,dataSource:this.renderEmpty?[]:t};ae.filterModel=this,this.parent.notify(iD,ae),this.parent.notify(pG,{disabled:a}),Nl(this.spinner)},r.prototype.getCheckedState=function(t,e){if(!this.isFiltered||!t)return!0;var i=this.result[e];return"notequal"===this.options.operator?!i:i},r.getDistinct=function(t,e,i,n){for(var a,s=t.length,o=[],h={},u=!(!i||!i.isForeignColumn)&&i.isForeignColumn();s--;)if(!((a=xs(e,a=t[s]))in h)){var d={};if(d.ejValue=a,h[a]=!0,u){var m=iC(i,{},a,n)[0];jt(use,m,t[s]),a=ie(i.foreignKeyValue,m)}jt(e,f(a)?null:a,d),jt("dataObj",t[s],d),o.push(d)}return Ye.group(Ye.sort(o,e,Ye.fnAscending),"ejValue")},r.getPredicate=function(t){for(var e=Ye.distinct(t,"field",!0)||[],i=[],n={},s=0;s<e.length;s++)0!==(i=new Je(t).executeLocal((new si).where("field","equal",e[s].field))).length&&(n[e[s].field]=r.generatePredicate(i));return n},r.generatePredicate=function(t){var i,e=t?t.length:0,s=r.updateDateFilter(t[0]);s.ignoreAccent=!f(s.ignoreAccent)&&s.ignoreAccent,i="date"===s.type||"datetime"===s.type?nC(s,s.type):s.ejpredicate?s.ejpredicate:new kn(s.field,s.operator,s.value,!r.getCaseValue(s),s.ignoreAccent);for(var o=1;o<e;o++)t[o]=r.updateDateFilter(t[o]),e>2&&o>1&&"or"===t[o].predicate?i.predicates.push("date"===t[o].type||"datetime"===t[o].type?nC(t[o],t[o].type):new kn(t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent)):i="date"===t[o].type||"datetime"===t[o].type?"and"===t[o].predicate&&"equal"===t[o].operator?i.or(nC(t[o],t[o].type),t[o].type,t[o].ignoreAccent):i[t[o].predicate](nC(t[o],t[o].type),t[o].type,t[o].ignoreAccent):t[o].ejpredicate?i[t[o].predicate](t[o].ejpredicate):i[t[o].predicate](t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent);return i||null},r.getCaseValue=function(t){return f(t.matchCase)?!("string"===t.type||f(t.type)&&"string"==typeof t.value):t.matchCase},r.updateDateFilter=function(t){return("date"===t.type||"datetime"===t.type||t.value instanceof Date)&&(t.type=t.type||"date"),t},r}(),oC=function(){function r(t,e,i,n){var s=this;this.sortRequired=!0,this.groupSortFocus=!1,this.groupCancelFocus=!1,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=ri("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(o){var a=s.parent,l=o.sender.target,h=l.classList.contains("e-groupheadercell")?l:me(l,"e-groupheadercell");return!(!h||!l.classList.contains("e-drag")&&s.groupSettings.allowReordering)&&(s.column=a.getColumnByField(h.firstElementChild.getAttribute("ej-mappingname")),s.visualElement.textContent=h.textContent,s.visualElement.style.width=h.offsetWidth+2+"px",s.visualElement.style.height=h.offsetHeight+2+"px",s.visualElement.setAttribute("e-mappinguid",s.column.uid),a.element.appendChild(s.visualElement),s.visualElement)},this.dragStart=function(o){s.parent.element.classList.add("e-ungroupdrag")},this.drag=function(o){s.groupSettings.allowReordering&&s.animateDropper(o);var a=o.target,l=s.parent.element.querySelector(".e-cloneproperties");s.parent.trigger(eS,{target:a,draggableType:"headercell",column:s.column}),s.groupSettings.allowReordering||(li(l,["e-defaultcur"],["e-notallowedcur"]),me(a,zs)||me(a,"e-headercell")||li(l,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(o){s.parent.element.classList.remove("e-ungroupdrag");var a=!(me(o.target,zs)||me(o.target,"e-gridheader"));if(s.groupSettings.allowReordering&&a){if(He(o.helper),me(o.target,"e-groupdroparea"))s.rearrangeGroup();else if(!me(o.target,"e-grid")){var l=s.parent.getColumnByUid(o.helper.getAttribute("e-mappinguid")).field;-1!==s.groupSettings.columns.indexOf(l)&&s.ungroupColumn(l)}}else a&&He(o.helper)},this.animateDropper=function(o){var a=s.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),l=s.parent.getColumnByUid(a).field,h=me(o.target,"e-groupdroparea"),u=me(o.target,"e-group-animator"),d=[].slice.call(s.element.getElementsByClassName("e-groupheadercell")).map(function(O){return O.querySelector("div").getAttribute("ej-mappingname")}),m=JSON.parse(JSON.stringify(d));if(u||h){if(u){var y=u.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),C=+u.getAttribute("index");if(y!==l){var S=m.indexOf(l);-1!==S&&m.splice(S,1),m.splice(C+(-1!==C&&S===C?1:0),0,l)}}else h&&-1===m.indexOf(l)&&m.push(l);s.element.innerHTML="",m.length&&!s.element.classList.contains("e-grouped")&&s.element.classList.add("e-grouped"),s.reorderingColumns=m;for(var k=0;k<m.length;k++)s.addColToGroupDrop(m[k])}else s.addLabel(),s.removeColFromGroupDrop(l)},this.drop=function(o){var a=s.parent,l=a.getColumnByUid(o.droppedElement.getAttribute("e-mappinguid"));s.element.classList.remove("e-hover"),He(o.droppedElement),s.aria.setDropTarget(s.parent.element.querySelector(".e-groupdroparea"),!1),s.aria.setGrabbed(s.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),f(l)||!1===l.allowGrouping||me(a.getColumnHeaderByUid(l.uid),"e-grid").getAttribute("id")!==a.element.getAttribute("id")?s.parent.log("action_disabled_column",{moduleName:s.getModuleName(),columnName:l.headerText}):s.groupColumn(l.field)},this.contentRefresh=!0,this.aria=new GM,this.parent=t,this.groupSettings=e,this.serviceLocator=n,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new BV(this.parent)}return r.prototype.addLabel=function(){if(!this.element.getElementsByClassName("e-group-animator").length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}},r.prototype.rearrangeGroup=function(){this.sortRequired=!1,this.updateModel()},r.prototype.columnDrag=function(t){this.groupSettings.allowReordering&&t.column.allowGrouping&&this.animateDropper(t);var e=this.parent.element.querySelector(".e-cloneproperties");li(e,["e-defaultcur"],["e-notallowedcur"]),!me(t.target,"e-groupdroparea")&&!(this.parent.allowReordering&&me(t.target,"e-headercell"))&&li(e,["e-notallowedcur"],["e-defaultcur"]),t.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},r.prototype.columnDragStart=function(t){if(!t.target.classList.contains("e-stackedheadercell")){var e=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(e,t.column.allowGrouping);var i=t.target.classList.contains("e-headercell")?t.target:me(t.target,"e-headercell");this.aria.setGrabbed(i,!0,!t.column.allowGrouping)}},r.prototype.columnDrop=function(t){var e=this.parent;if("grouping"===t.droppedElement.getAttribute("action")){var i=e.getColumnByUid(t.droppedElement.getAttribute("e-mappinguid"));if(f(i)||!1===i.allowGrouping||me(e.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==e.element.getAttribute("id"))return;this.ungroupColumn(i.field)}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(jr,this.enableAfterRender,this),this.parent.on(N8,this.onActionComplete,this),this.parent.on(ese,this.onActionComplete,this),this.parent.on(Wa,this.onPropertyChanged,this),this.parent.on(ol,this.clickHandler,this),this.parent.on(eS,this.columnDrag,this),this.parent.on(Zx,this.columnDragStart,this),this.parent.on(eD,this.columnDrop,this),this.parent.on(Xx,this.columnDrop,this),this.parent.on(Mo,this.refreshSortIcons,this),this.parent.on(F8,this.refreshSortIcons,this),this.parent.on(_s,this.keyPressHandler,this),this.parent.on(is,this.initialEnd,this),this.parent.on(np,this.initialEnd,this),this.parent.on(Ua,this.render,this),this.parent.on(Zb,this.onGroupAggregates,this),this.parent.on(gn,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ua,this.render),this.parent.off(jr,this.enableAfterRender),this.parent.off(N8,this.onActionComplete),this.parent.off(ese,this.onActionComplete),this.parent.off(Wa,this.onPropertyChanged),this.parent.off(ol,this.clickHandler),this.parent.off(eS,this.columnDrag),this.parent.off(Zx,this.columnDragStart),this.parent.off(Xx,this.columnDrop),this.parent.off(eD,this.columnDrop),this.parent.off(Mo,this.refreshSortIcons),this.parent.off(F8,this.refreshSortIcons),this.parent.off(_s,this.keyPressHandler),this.parent.off(Zb,this.onGroupAggregates),this.parent.off(gn,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},r.prototype.initialEnd=function(){var t=this.parent;if(this.parent.off(is,this.initialEnd),this.parent.off(np,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var e=0,i=t.groupSettings.columns;e<i.length;e++)this.groupColumn(i[e]);this.contentRefresh=!0}},r.prototype.keyPressHandler=function(t){var e=this.parent;if(t.target&&me(t.target,"e-groupheadercell")&&("tab"===t.action||"shiftTab"===t.action)){var i=this.getFocusableGroupedItems();if("tab"===t.action&&t.target===i[i.length-1]||"shiftTab"===t.action&&t.target===i[0])return;for(var n=0;n<i.length;n++)if(t.target===i[n])return t.preventDefault(),void i["tab"===t.action?n+1:n-1].focus()}if("ctrlSpace"===t.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(t.action))switch(t.preventDefault(),t.action){case"altDownArrow":case"altUpArrow":var o=e.allowSelection?e.getSelectedRowIndexes():[];if(o.length){var a=e.getContentTable().querySelector(lt).children,h=void 0;for(n=e.getDataRows()[o[o.length-1]].rowIndex;n>=0;n--)if(!a[n].classList.contains(Sn)&&!a[n].classList.contains("e-detailrow")){h=a[n];break}this.expandCollapseRows(h.querySelector("altUpArrow"===t.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(t.target.classList.contains("e-groupsort")){this.groupSortFocus=!0,this.applySortFromTarget(t.target);break}if(t.target.classList.contains("e-ungroupbutton")){this.groupCancelFocus=!0,this.unGroupFromTarget(t.target);break}if(this.parent.isEdit||null!==U(t.target,"#"+this.parent.element.id+"_searchbar")||me(t.target,"e-pager"))return;var u=this.focus.getFocusedElement();(u.classList.contains("e-icon-grightarrow")||u.classList.contains("e-icon-gdownarrow"))&&(u=u.parentElement);var d=u?u.parentElement.querySelector('[class^="e-record"]'):null;if(!d)break;u.children.length&&(u.children[0].classList.contains("e-icon-grightarrow")||u.children[0].classList.contains("e-icon-gdownarrow"))&&this.expandCollapseRows(d);break;case"ctrlSpace":var m=e.focusModule.currentInfo.element;if(m&&m.classList.contains("e-headercell")){var y=e.getColumnByUid(m.firstElementChild.getAttribute("e-mappinguid"));y.field&&e.groupSettings.columns.indexOf(y.field)<0?this.groupColumn(y.field):this.ungroupColumn(y.field)}}},r.prototype.getFocusableGroupedItems=function(){var t=[];if(this.groupSettings.columns.length)for(var e=this.element.querySelectorAll(".e-groupheadercell"),i=0;i<e.length;i++)t.push(e[i].querySelector(".e-grouptext")),t.push(e[i].querySelector(".e-groupsort")),t.push(e[i].querySelector(".e-ungroupbutton"));return t},r.prototype.wireEvent=function(){T.add(this.element,"focusin",this.onFocusIn,this),T.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){T.remove(this.element,"focusin",this.onFocusIn),T.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&(z([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1),this.addOrRemoveFocus(t)},r.prototype.onFocusOut=function(t){this.addOrRemoveFocus(t)},r.prototype.addOrRemoveFocus=function(t){if(t.target.classList.contains("e-groupdroparea")||t.target.classList.contains("e-grouptext")||t.target.classList.contains("e-groupsort")||t.target.classList.contains("e-ungroupbutton")){var e=t.target.classList.contains("e-grouptext")?t.target.parentElement.parentElement:t.target;"focusin"===t.type?(N([e],["e-focused","e-focus"]),t.target.tabIndex=0):(z([e],["e-focused","e-focus"]),t.target.tabIndex=-1)}},r.prototype.clickHandler=function(t){t.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0),t.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0);var e=me(t.target,"e-recordplusexpand")||me(t.target,"e-recordpluscollapse");e&&(e.children[0].classList.contains("e-icon-gdownarrow")||e.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(t.target),this.applySortFromTarget(t.target),this.unGroupFromTarget(t.target),this.toogleGroupFromHeader(t.target)},r.prototype.unGroupFromTarget=function(t){t.classList.contains("e-ungroupbutton")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname"))},r.prototype.toogleGroupFromHeader=function(t){this.groupSettings.showToggleButton&&(t.classList.contains("e-grptogglebtn")?t.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):t.classList.contains("e-toggleungroup")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname")))},r.prototype.applySortFromTarget=function(t){var e=this.parent,i=U(t,".e-groupheadercell");if(e.allowSorting&&i&&!t.classList.contains("e-ungroupbutton")&&!t.classList.contains("e-toggleungroup")){var n=i.firstElementChild.getAttribute("ej-mappingname");e.getColumnHeaderByField(n).getElementsByClassName("e-ascending").length?e.sortColumn(n,"Descending",!0):e.sortColumn(n,"Ascending",!0)}},r.prototype.expandCollapseRows=function(t){var e=me(t,"e-recordplusexpand")||me(t,"e-recordpluscollapse");if(e){var i=this.parent.getContentTable().querySelector(lt).children,n=void 0,s=void 0,o=void 0,a=this.parent,l=e.parentElement.getElementsByClassName("e-indentcell").length,h=e.parentElement.getAttribute("data-uid"),u=a.getRowObjectFromUID(h),d=!1;if(e.classList.contains("e-recordpluscollapse")?(N([e],"e-recordplusexpand"),z([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",e.firstElementChild.setAttribute("title","expanded"),d=!0,u.isExpand=!0,ks(a)&&this.updateVirtualRows(a,t,d,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(e.parentElement)):(n=!0,u.isExpand=!1,z([e],"e-recordplusexpand"),N([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",e.firstElementChild.setAttribute("title","collapsed"),ks(a)&&this.updateVirtualRows(a,t,!n,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(e.parentElement)),this.aria.setExpand(e,d),!ks(a)&&!this.parent.groupSettings.enableLazyLoading){for(var m=a.getRowsObject(),y=m.indexOf(u),C={},S=a.enableInfiniteScrolling&&a.infiniteScrollSettings&&a.infiniteScrollSettings.enableCache&&m.length!==i.length?Array.from(i).indexOf(e.parentElement):void 0,I=y;I<m.length&&!(I>y&&m[I].indent===l);I++){if(m[I].isDetailRow){var k=m[I-1].isExpand&&m[I-1].visible;S&&S>0&&S<i.length?i[S].style.display=k?"":"none":f(S)&&(i[I].style.display=k?"":"none")}else if(!1===C[m[I].parentUid])m[I].visible=!1,S&&S>0&&S<i.length?i[S].style.display="none":f(S)&&(i[I].style.display="none");else{if(!(m[I].isDataRow||m[I].isCaptionRow||m[I].isDetailRow||m[I].isAggregateRow)&&(k=m[I].cells.some(function(L){return L.isDataCell&&L.visible}))===m[I].visible)continue;m[I].visible=!0,S&&S>0&&S<i.length?(i[S].style.display="",i[S].classList.remove("e-hide")):f(S)&&(i[I].style.display="",i[I].classList.remove("e-hide"))}m[I].isCaptionRow&&(C[m[I].uid]=m[I].isExpand&&m[I].visible),f(S)||S++}this.parent.notify(sS,{rows:this.parent.getRowsObject()})}(!this.parent.enableInfiniteScrolling||!this.parent.groupSettings.enableLazyLoading)&&this.parent.notify("infinite-group-collapse",{isCollapse:n,parentUid:h})}},r.prototype.updateVirtualRows=function(t,e,i,n,s){var o=t.getRowObjectFromUID(e.closest("tr").getAttribute("data-uid"));o.isExpand=i,function bIe(r){for(var t=[],e=r.vRows,i=0;i<e.length;i++)e[i].isDataRow?t.push(e[i]):e[i].isDataRow||(t.push(e[i]),!e[i].isExpand&&e[i].isCaptionRow&&(i+=CIe(e[i],r)));r.vcRows=t}(t),this.parent.notify("refresh-virtual-max-page",{}),(n=t.getDataModule().generateQuery(!1)).queries=t.getDataModule().aggregateQuery(t.getQuery().clone()).queries;var a={requestType:"virtualscroll",rowObject:o};t.contentModule&&(a.virtualInfo=t.contentModule.prevInfo),t.getDataModule().getData(a,n.requiresCount()).then(function(l){return t.renderModule.dataManagerSuccess(l,a)})},r.prototype.expandCollapse=function(t){if(this.parent.groupSettings.columns.length){t||this.parent.notify("initial-collapse",t);for(var n,e=this.parent.getContentTable().querySelector(lt).children,i=this.parent.getRowsObject(),s=0,o=e.length;s<o;s++)e[s].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((n=e[s].querySelector(t?".e-recordpluscollapse":".e-recordplusexpand"))&&(t?(n.className="e-recordplusexpand",n.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",n.setAttribute("aria-expanded","true"),n.firstElementChild.setAttribute("title","expanded")):(n.className="e-recordpluscollapse",n.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",n.setAttribute("aria-expanded","false"),n.firstElementChild.setAttribute("title","collapsed"))),e[s].firstElementChild.classList.contains("e-recordplusexpand")||e[s].firstElementChild.classList.contains("e-recordpluscollapse")||(e[s].style.display=t?"":"none")):e[s].style.display=t?"":"none",i[s].isCaptionRow&&(i[s].isExpand=!!t);this.parent.updateVisibleExpandCollapseRows(),this.parent.notify(sS,{rows:this.parent.getRowsObject()})}},r.prototype.expandAll=function(){this.expandCollapse(!0)},r.prototype.collapseAll=function(){this.expandCollapse(!1)},r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn(),this.wireEvent()},r.prototype.renderGroupDropArea=function(){var t=this.parent.element.querySelector(".e-groupdroparea");t&&He(t),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},r.prototype.updateGroupDropArea=function(t){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||t)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},r.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},r.prototype.initializeGHeaderDrag=function(){new tf(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},r.prototype.initializeGHeaderDrop=function(){new rw(this.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.groupColumn=function(t){var e=this.parent,i=e.getColumnByField(t);f(i)||!1===i.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(t)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):ap(e)?e.notify(lu,{instance:this,handler:this.groupColumn,arg1:t}):(i.visible=e.groupSettings.showGroupedColumn,this.colName=t,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(t),this.updateGroupDropArea(),this.isAppliedGroup=!1)},r.prototype.ungroupColumn=function(t){var e=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(a){return a.field===t})[0]:e.getColumnByField(t);if(!(f(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(t)<0)){if(ap(e))return void e.notify(lu,{instance:this,handler:this.ungroupColumn,arg1:t});i.visible=!0,this.colName=i.field;var n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(t)<0)for(var s=0,o=e.sortSettings.columns.length;s<o;s++)if(t===e.sortSettings.columns[s].field){e.sortSettings.columns.splice(s,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=n),this.groupSettings.columns=n,e.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},r.prototype.updateModel=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));t=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):t,this.sortRequired&&(-1===t.indexOf(this.colName)&&t.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=t,this.parent.dataBind()},r.prototype.onActionComplete=function(t){"grouping"===t.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var e=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:Ui}:{requestType:"ungrouping",type:Ui};this.parent.trigger(Ui,de(t,e)),this.colName=null},r.prototype.groupAddSortingQuery=function(t){for(var e=0;e<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[e].field!==t;)e++;this.parent.sortSettings.columns.length===e?this.parent.sortSettings.columns.push({field:t,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[e].direction="Ascending")},r.prototype.createElement=function(t){var e=this.parent,i="Ascending",n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),s=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=this.parent.createElement("div",{attrs:{"ej-mappingname":t}});Gc(t)&&o.setAttribute("ej-complexname",Lo(t));var a=this.parent.getColumnByField(t),l=e.getColumnHeaderByUid(a.uid);return this.groupSettings.allowReordering&&o.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag")}})),o.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:a.headerText,attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText}})),this.groupSettings.showToggleButton&&o.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),l.querySelectorAll(".e-ascending,.e-descending").length&&(i=l.querySelector(".e-ascending")?"Ascending":"Descending"),o.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText,role:"button"}})),o.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+a.headerText,role:"button"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),s.appendChild(o),this.groupSettings.allowReordering&&(n.appendChild(s),n.appendChild(this.createSeparator()),s=n),s},r.prototype.addColToGroupDrop=function(t){var e=Gc(t)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+Lo(t)+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+t+"]");if(!(this.groupSettings.allowReordering&&e||f(this.parent.getColumnByField(t)))){var n=this.createElement(t);if(this.groupSettings.allowReordering){var s=this.element.getElementsByClassName("e-group-animator").length;n.setAttribute("index",s.toString())}this.element.appendChild(n);var o=this.parent.focusModule;o.setActive(!0);var a=[0,0];0===o.active.matrix.matrix[a[0]][a[1]]&&(a=Hg(o.active.matrix.matrix,a,!0)),o.active.matrix.current=a,o.active.getTable().rows[o.active.matrix.current[0]].cells[o.active.matrix.current[1]].focus()}},r.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator")},styles:this.groupSettings.showUngroupButton?"":"display:none"})},r.prototype.refreshToggleBtn=function(t){if(this.groupSettings.showToggleButton)for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,n=e.length;i<n;i++)if(!e[i].classList.contains("e-emptycell")&&!e[i].classList.contains("e-headerchkcelldiv")){var s=this.parent.getColumnByUid(e[i].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!s.showColumnMenu)&&(e[i].getElementsByClassName("e-grptogglebtn").length&&He(e[i].querySelectorAll(".e-grptogglebtn")[0]),t||e[i].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(s.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":f(this.l10n)?this.parent.localeObj.getConstant("GroupButton"):this.l10n.getConstant("GroupButton")}})))}},r.prototype.removeColFromGroupDrop=function(t){if(!f(this.getGHeaderCell(t))){var e=this.getGHeaderCell(t);He(this.groupSettings.allowReordering?me(e,"e-group-animator"):e),this.updateGroupDropArea()}this.isAppliedUnGroup=!1},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=0,i=Object.keys(t.properties);e<i.length;e++){var n=i[e];switch(n){case"columns":var s=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)s={columnName:this.colName,requestType:"ungrouping",type:mr};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var o=0;o<this.parent.sortSettings.columns.length;o++)this.parent.sortSettings.columns[o].isFromGroup&&(this.parent.sortSettings.columns.splice(o,1),o--);for(var a=0;a<this.groupSettings.columns.length;a++)this.colName=this.groupSettings.columns[a],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),a<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[a])}s={columnName:this.colName,requestType:t.properties[n].length?"grouping":"ungrouping",type:mr}}if(!this.groupSettings.showGroupedColumn){var h=t.oldProperties[n];for(a=0;a<h.length;a++)-1===t.properties[n].indexOf(h[a])&&(this.parent.getColumnByField(h[a]).visible=!0)}this.parent.notify(Yo,s)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(Yo,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},r.prototype.updateGroupedColumn=function(t){for(var e=0;e<this.groupSettings.columns.length;e++)this.parent.getColumnByField(this.groupSettings.columns[e]).visible=t},r.prototype.updateButtonVisibility=function(t,e){for(var i=[].slice.call(this.element.getElementsByClassName(e)),n=0;n<i.length;n++)i[n].style.display=t?"":"none"},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&this.render()},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+$s)&&!t.querySelector("."+zs)||((this.parent.isDestroyed||!this.parent.allowGrouping)&&!this.parent.refreshing&&this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&He(this.element))},r.prototype.clearGrouping=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var e=0,i=t.length;e<i;e++)e===i-1&&(this.contentRefresh=!0),this.ungroupColumn(t[e]);this.contentRefresh=!0},r.prototype.getModuleName=function(){return"group"},r.prototype.refreshSortIcons=function(){var e,t=this.parent,i=t.sortSettings.columns,n=t.groupSettings.columns,s=this.parent.getColumns().map(function(l){return l.field});this.refreshToggleBtn();for(var o=0,a=i.length;o<a;o++)-1!==s.indexOf(i[o].field)&&(e=t.getColumnHeaderByField(i[o].field),!t.allowSorting&&(this.sortedColumns.indexOf(i[o].field)>-1||this.groupSettings.columns.indexOf(i[o].field)>-1)?(li(e.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&e.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}))):this.getGHeaderCell(i[o].field)&&this.getGHeaderCell(i[o].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[o].direction?li(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):li(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(o=0,a=n.length;o<a;o++)-1!==s.indexOf(n[o])&&t.getColumnHeaderByField(n[o]).setAttribute("aria-grouped","true")},r.prototype.getGHeaderCell=function(t){return this.element&&this.element.querySelector('[ej-mappingname="'+t+'"]')?this.element.querySelector('[ej-mappingname="'+t+'"]').parentElement:null},r.prototype.onGroupAggregates=function(t){var e=this.iterateGroupAggregates(t),i=this.groupGenerator.generateRows(e,{}),n=this.parent.getRowsObject().filter(function(u){return!u.isDataRow}),s=i.filter(function(u){return!u.isDataRow});(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var o=0;o<s.length;o++){var a=s[o],l=a.cells.filter(function(u){return u.isDataCell});this.parent.notify("refresh-aggregate-cell",{cells:l,data:a.data,dataUid:n[o]?n[o].uid:""})}},r.prototype.iterateGroupAggregates=function(t){var e=t instanceof Array?t:[],i=this.parent.getRowsObject(),n=this.parent.getCurrentViewRecords(),s=[],o=i.map(function(ae){return"delete"===ae.edit&&s.push(ae.data),ae.changes instanceof Object?ae.changes:ae.data}),a=this.parent.getPrimaryKeyFieldNames()[0];o=0===e.length?o:e;var l=n.map(function(ae){var xe,ve=Ye.getObject(a,ae);return o.some(function(oe){return xe=oe,ve===Ye.getObject(a,oe)})?xe:ae});if((!t.type||"cancel"!==t.type)&&s.length>0)for(var u=0;u<s.length;u++){var d=l.indexOf(s[u]);l.splice(d,1)}for(var m=[],y=this.parent.aggregates,C=0;C<y.length;C++)for(var S=y[C],I=0;I<S.columns.length;I++){var k;k={type:S.columns[I].type.toString().toLowerCase(),field:S.columns[I].field},m.push(k)}for(var L,j=this.parent.groupSettings.columns,G=0;G<j.length;G++)L=Ye.group(L||l,j[G],m,null,null);return L},r.prototype.updateExpand=function(t){for(var e=t.uid,i=t.isExpand,n=this.parent.getRowsObject(),s=0;s<n.length;s++){var o=n[s];if(o.uid===e||f(e)){o.isExpand=i;for(var a=function(u){var d=n[u],m=void 0;if(d.parentUid!==o.uid&&(m=n.filter(function(y){return y.uid===d.parentUid})[0]),d.parentUid===o.uid?d.visible=o.isExpand:!f(m)&&d.parentUid===m.uid&&(m.isExpand&&!0===m.visible?d.visible=!0:m.isExpand&&!1===m.visible&&(d.visible=!1)),f(e))return"break"},l=s+1;l<n.length&&"break"!==a(l);l++);}}this.parent.notify(is,{rows:n,args:{isFrozen:!1,rows:n}})},r}(),sAe=function(){function r(t,e){this.predefinedItems={},this.isSearched=!1,this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=t,this.gridID=t.element.id,this.serviceLocator=e,this.addEventListener()}return r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=this.parent.enableAdaptiveUI,i=["Edit","Delete","Update","Cancel"],n=0,s=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];n<s.length;n++){var o=s[n],a=o.toLowerCase(),l=a[0].toUpperCase()+a.slice(1);this.predefinedItems[o]={id:this.gridID+"_"+a,prefixIcon:"e-"+a,text:this.l10n.getConstant(l),tooltipText:this.l10n.getConstant(l)},e&&(this.predefinedItems[o].text="",this.predefinedItems[o].visible=-1===i.indexOf(o))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:e?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()},r.prototype.getToolbar=function(){return this.toolbar.element},r.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&He(this.element))},r.prototype.bindSearchEvents=function(){this.searchElement=le("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},r.prototype.toolbarCreated=function(t){if(this.element.querySelector(".e-search-wrapper"))if(!this.parent.enableAdaptiveUI||t){var e=this.parent.cssClass?"e-input-group e-search "+this.parent.cssClass:"e-input-group e-search";this.element.querySelector(".e-search-wrapper").innerHTML='<div class="'+e+'" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input e-search" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon e-clear-icon e-clear-icon-hide"                     tabindex="-1" title="'+this.l10n.getConstant("Clear")+'" aria-label= "clear" role= "clear"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search" role= "search"></span>                     </div>'}else this.element.querySelector(".e-search-wrapper").innerHTML='<span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon e-clear-icon e-clear-icon-hide"                     tabindex="-1" title="'+this.l10n.getConstant("Clear")+'" aria-label= "clear"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>';this.bindSearchEvents()},r.prototype.createToolbar=function(){var t=this.getItems();this.toolbar=new Bee({items:t,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;var i="viewContainerRef";if(this.parent[i]&&(this.toolbar.registeredTemplate={},this.toolbar[i]=this.parent[i]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{var a=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(El(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",a,null,null,this.element),this.parent.renderTemplates()):ya(this.element,El(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent());var l=this.element.querySelector(".e-toolbar-left"),h=this.element.querySelector(".e-toolbar-center"),u=this.element.querySelector(".e-toolbar-right"),d=this.element.querySelector(".e-toolbar-items"),m=this.element,k=m?m.clientWidth:0;((l?l.clientWidth:0)>k||(h?h.clientWidth:0)>k||(u?u.clientWidth:0)>k||(d?d.clientWidth:0)>k)&&this.toolbar.refreshOverflow()},r.prototype.addReactToolbarPortals=function(t){this.parent.isReact&&t&&(this.parent.portals=this.parent.portals.concat(t),this.parent.renderTemplates())},r.prototype.renderResponsiveSearch=function(t){t?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(Xb.isSearch),this.searchElement=le("#"+this.gridID+"_searchbar",this.element),me(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(Xb.isInitial)},r.prototype.refreshResponsiveToolbarItems=function(t){if(t===Xb.isInitial){for(var e=this.parent.element.id,i=[e+"_edit",e+"_delete"],n=this.parent.getSelectedRowIndexes(),s=[e+"_responsiveback",e+"_update",e+"_cancel"],o=0,a=this.toolbar.items;o<a.length;o++)(h=this.toolbar.element.querySelector((l=a[o]).template.length?l.template:"#"+l.id))&&(i.indexOf(l.id)>-1?n.length?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"):-1===s.indexOf(l.id)?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"));this.searchElement&&(me(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(t===Xb.isSearch){i=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(var d=0,m=this.toolbar.items;d<m.length;d++){var l,h;(h=this.toolbar.element.querySelector("#"+(l=m[d]).id))&&(i.indexOf(l.id)>-1?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"))}}},r.prototype.refreshToolbarItems=function(t){var e=this.parent,i=[],n=[],s=e.editSettings,o=e.currentViewData&&e.currentViewData.length;s.allowAdding?i.push(this.gridID+"_add"):n.push(this.gridID+"_add"),s.allowEditing&&o?i.push(this.gridID+"_edit"):n.push(this.gridID+"_edit"),s.allowDeleting&&o?i.push(this.gridID+"_delete"):n.push(this.gridID+"_delete"),"Batch"===e.editSettings.mode?e.element.getElementsByClassName("e-updatedtd").length&&(s.allowAdding||s.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):e.isEdit&&(s.allowAdding||s.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],n=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(n,!1)},r.prototype.getItems=function(){var t=[],e=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&t.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&t.push(this.getItemObject("responsiveSort")));for(var i=0,n=e;i<n.length;i++){var s=n[i];switch(typeof s){case"number":t.push(this.getItemObject(this.items[s]));break;case"string":t.push(this.getItemObject(s));break;default:t.push(this.getItem(s))}}return this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&t.push(this.getItemObject("responsiveBack")),t},r.prototype.getItem=function(t){var e=this.predefinedItems[t.text];return e?de(e,e,t):t},r.prototype.getItemObject=function(t){return this.predefinedItems[t]||{text:t,id:this.gridID+"_"+t}},r.prototype.enableItems=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=le("#"+n[i],this.element);o&&this.toolbar.enableItems(o.parentElement,e)}},r.prototype.toolbarClickHandler=function(t){var e=this,i=this.parent,n=this.gridID;de(t,{cancel:!1});var o=t.originalEvent;i.trigger("toolbarClick",t,function(a){if(a.originalEvent=a.originalEvent?a.originalEvent:o,!a.cancel)switch(!f(a.item)&&a.item.id){case n+"_print":i.print();break;case n+"_edit":i.startEdit();break;case n+"_update":i.endEdit();break;case n+"_cancel":i.closeEdit();break;case n+"_add":i.addRecord();break;case n+"_delete":i.deleteRecord();break;case n+"_search":a.originalEvent.target.id===n+"_searchbutton"&&e.searchElement?e.search():!i.enableAdaptiveUI||e.searchElement||!a.originalEvent.target.classList.contains("e-search-wrapper")&&a.originalEvent.target.id!==n+"_searchbutton"?a.originalEvent.target.id===n+"_clearbutton"&&e.searchElement&&(e.searchElement.value="",e.sIcon.classList.add("e-clear-icon-hide"),e.isSearched&&(e.parent.search(e.searchElement.value),e.isSearched=!1)):e.renderResponsiveSearch(!0);break;case n+"_columnchooser":var l=e.parent.element.querySelector(".e-ccdiv"),h=l.getBoundingClientRect(),u=l.getBoundingClientRect().left,d=a.originalEvent.target;h=l.getBoundingClientRect().top+l.offsetTop,i.createColumnchooser(u,h,d);break;case n+"_responsivefilter":i.showResponsiveCustomFilter();break;case n+"_responsivesort":i.showResponsiveCustomSort();break;case n+"_responsiveback":e.renderResponsiveSearch(!1)}})},r.prototype.modelChanged=function(t){"edit"===t.module&&this.refreshToolbarItems()},r.prototype.onPropertyChanged=function(t){t.module!==this.getModuleName()||!this.parent.toolbar||(this.element&&He(this.element),this.render())},r.prototype.keyUpHandler=function(t){13===t.keyCode&&this.search(),this.searchElement&&(this.sIcon=this.searchElement.parentElement.querySelector(".e-clear-icon"),this.searchElement.value.length&&!f(this.sIcon)?this.sIcon.classList.remove("e-clear-icon-hide"):this.sIcon.classList.add("e-clear-icon-hide"))},r.prototype.search=function(){this.isSearched=!0,this.parent.search(this.searchElement.value)},r.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},r.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new Use(this.searchElement),T.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()),T.add(this.element,"focusin",this.onFocusIn,this),T.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){this.searchElement&&(T.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent()),T.remove(this.element,"focusin",this.onFocusIn),T.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){var e=this.parent.focusModule.currentInfo;e&&e.element&&(z([e.element,e.elementToFocus],["e-focused","e-focus"]),e.element.tabIndex=-1),t.target.tabIndex=0},r.prototype.onFocusOut=function(t){t.target.tabIndex=-1},r.prototype.setFocusToolbarItem=function(t){var e=t.querySelector(".e-btn,.e-input");!e&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.classList.contains("e-search-wrapper")&&(e=t.querySelector("#"+this.gridID+"_searchbutton")),e.focus()},r.prototype.getFocusableToolbarItems=function(){return this.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)")},r.prototype.keyPressedHandler=function(t){if(t.target&&me(t.target,"e-toolbar-item")){var e=me(t.target,"e-toolbar-item"),i=this.getFocusableToolbarItems();if("tab"===t.action||"shiftTab"===t.action){if("tab"===t.action&&e===i[i.length-1]||"shiftTab"===t.action&&e===i[0])return;for(var n=0;n<i.length;n++)if(e===i[n])return t.preventDefault(),void this.setFocusToolbarItem(i["tab"===t.action?n+1:n-1])}"enter"===t.action&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.target.id===this.gridID+"_searchbutton"&&this.renderResponsiveSearch(!0)}},r.prototype.reRenderToolbar=function(){this.element&&He(this.element),this.render()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:VM,handler:this.reRenderToolbar},{event:Ua,handler:this.render},{event:jr,handler:this.onPropertyChanged},{event:Wa,handler:this.updateSearchBox.bind(this)},{event:Yo,handler:this.refreshToolbarItems},{event:_v,handler:this.refreshToolbarItems},{event:Wa,handler:this.modelChanged},{event:ph,handler:this.refreshToolbarItems},{event:ol,handler:this.removeResponsiveSearch},{event:gG,handler:this.reRenderToolbar},{event:gn,handler:this.destroy},{event:_s,handler:this.keyPressedHandler}],wo(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(Yx,this.rowSelectedFunction),this.parent.addEventListener(dV,this.rowDeSelectedFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(wo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Yx,this.rowSelectedFunction),this.parent.removeEventListener(dV,this.rowDeSelectedFunction))},r.prototype.removeResponsiveSearch=function(t){var e=t.target,i=e.classList.contains("e-search-icon")||e.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!i&&this.searchElement&&!me(t.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)},r.prototype.rowSelected=function(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(Xb.isInitial)},r.prototype.getModuleName=function(){return"toolbar"},r}(),Doe=function(){function r(t){this.parent=t}return r.prototype.addNew=function(t,e){this.isEdit=!1;var i,n=function FIe(r){var t;return r.isFrozenGrid()&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getMovableHeaderTbody():r.getMovableContentTbody()),t}(this.parent),s=function NIe(r){var t;return r.getFrozenMode()===Jt&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getFrozenRightHeaderTbody():r.getFrozenRightContentTbody()),t}(this.parent),o=this.parent.isFrozenGrid(),a=o&&this.parent.enableColumnVirtualization&&e.isScroll;if(i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?a?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(lt):a?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(lt),e.row=this.parent.createElement("tr",{className:"e-row e-addedrow",attrs:{role:"row"}}),i.querySelector(".e-emptyrow")){var l=i.querySelector(".e-emptyrow");if(l.parentNode.removeChild(l),o&&!a){var h=this.parent.getContent().querySelector("."+Gn).querySelector(lt);if(h.firstElementChild.parentNode.removeChild(h.firstElementChild),this.parent.getFrozenMode()===Jt){var u=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(lt);u.firstElementChild.parentNode.removeChild(u.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(e.row,i.firstChild):i.appendChild(e.row),e.row.appendChild(this.getEditElement(t,!1,void 0,e,!0)),this.parent.editModule.checkLastRow(e.row,e),o&&!a){var d=this.renderMovableform(e.row,e);if("Top"===this.parent.editSettings.newRowPosition?n.insertBefore(d,n.firstChild):n.appendChild(d),e.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),d.querySelector(".e-normaledit").setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),s){var m=this.renderFrozenRightForm(e.row,e);"Top"===this.parent.editSettings.newRowPosition?s.insertBefore(m,s.firstChild):s.appendChild(m);var y=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();e.row.querySelector(".e-normaledit").setAttribute("colspan",y+""),m.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(PM,{})}},r.prototype.renderFrozenRightForm=function(t,e){var i=t.cloneNode(!0),n=e.frozenRightForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderRightFrozen(t,i),i.querySelector(Ai).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ai).innerHTML,i)},r.prototype.renderMovableform=function(t,e){var i=t.cloneNode(!0),n=e.movableForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderMovable(t,i),i.querySelector(Ai).innerHTML=this.parent.getHeaderContent().querySelector("."+nr).querySelector(Ai).innerHTML,i)},r.prototype.updateFreezeEdit=function(t,e){return e=e.concat([].slice.call(this.getFreezeRow(t).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===Jt&&(e=e.concat([].slice.call(this.getFreezeRightRow(t).querySelectorAll("td.e-rowcell")))),e},r.prototype.getFreezeRightRow=function(t){var e=parseInt(t.getAttribute(ki),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getFrozenHeaderTbody(),s=this.parent.getFrozenRightHeaderTbody(),o=this.parent.getFrozenRightContentTbody();return i.contains(t)||n.contains(t)?this.parent.getFrozenRightRowByIndex(e):o.contains(t)||s.contains(t)?this.parent.getRowByIndex(e):t},r.prototype.getFreezeRow=function(t){if(this.parent.isFrozenGrid()){var e=parseInt(t.getAttribute(ki),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getMovableContentTbody(),s=this.parent.getFrozenHeaderTbody(),o=this.parent.getMovableHeaderTbody();if(i.contains(t)||s.contains(t))return this.parent.getMovableRowByIndex(e);if(n.contains(t)||o.contains(t))return this.parent.getRowByIndex(e)}return t},r.prototype.update=function(t,e){this.isEdit=!0;var i=e.isCustomFormValidation,n=e.isScroll;!n&&(U(e.row,"."+Gn)||U(e.row,"."+nr))&&(e.row=this.getFreezeRow(e.row)),(U(e.row,".e-frozen-right-content")||U(e.row,".e-frozen-right-header"))&&(e.row=this.getFreezeRightRow(e.row));var s=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&n,o=[].slice.call(e.row.querySelectorAll("td.e-rowcell"));e.row.innerHTML="",!s&&!i&&(o=this.updateFreezeEdit(e.row,o)),e.row.appendChild(this.getEditElement(t,!0,o,e,!0)),e.row.classList.add(qa),this.parent.editModule.checkLastRow(e.row,e),!s&&!i&&this.refreshFreezeEdit(e.row,e)},r.prototype.refreshFreezeEdit=function(t,e){var i=t.firstChild;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(i.querySelector(Ai).innerHTML=this.parent.getHeaderContent().querySelector("."+rp).querySelector(Ai).innerHTML);var n,s,o=parseInt(t.getAttribute(ki),10);if(this.parent.isFrozenGrid()){o<this.parent.frozenRows?(s=this.parent.getHeaderContent(),n="."+rp):(s=this.parent.getContent(),n="."+nc);var a=i.cloneNode(!0),l=i.cloneNode(!0),h=e.movableForm=a.querySelector("form");this.parent.editSettings.template&&this.refreshEditForm(h,e.rowData);var u=void 0,d=void 0;s.querySelector(n).contains(t)?(u=this.parent.getMovableRowByIndex(o),this.updateFrozenCont(u,i,a),this.parent.getFrozenMode()===Jt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),d=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(d,i,l))):(u=this.parent.getRowByIndex(o),this.updateFrozenCont(u,a,i),this.parent.getFrozenMode()===Jt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),d=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(d,l,i))),u.appendChild(a),u.classList.add(qa),this.parent.getFrozenMode()===Jt&&(d.appendChild(l),d.classList.add(qa),XV(e.frozenRightForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))),XV(e.movableForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))}},r.prototype.refreshEditForm=function(t,e){this.parent.editSettings.template&&(t.innerHTML="",this.appendChildren(t,e,!1))},r.prototype.updateFrozenRightCont=function(t,e,i){t.innerHTML="",this.renderRightFrozen(e,i),i.querySelector(Ai).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ai).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),i.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")},r.prototype.updateFrozenCont=function(t,e,i){t.innerHTML="",this.renderMovable(e,i),i.querySelector(Ai).innerHTML=this.parent.getHeaderContent().querySelector("."+nr).querySelector(Ai).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),i.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")},r.prototype.renderRightFrozen=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=0,s=0;s<i.length;s++,n++)if(i[s].getFreezeTableName()===dr){var o=n-this.parent.getMovableColumnsCount();e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[o])),n--}},r.prototype.renderMovable=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=this.parent.isRowDragable()?1:0,s=0;s<i.length;s++,n++)"movable"===i[s].getFreezeTableName()&&(e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[n])),n--)},r.prototype.getEditElement=function(t,e,i,n,s){var o=this.parent,a=0,l=f(o.detailTemplate)&&f(o.childGrid)?0:1;o.allowGrouping&&(a=o.groupSettings.columns.length);var h=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(o.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-o.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),u=n.form=this.parent.createElement("form",{id:o.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(u,n.rowData,s),h.appendChild(u),h;var d=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}});d.appendChild(o.getContentTable().querySelector(Ai).cloneNode(!0));var m=this.parent.createElement(lt,{attrs:{role:"rowgroup"}}),y=this.parent.createElement("tr",{attrs:{role:"row"}}),C=0;for(l&&y.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),y.firstChild),o.isRowDragable()&&y.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));C<a;)y.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),C++;var S=0;C=0;for(var I=o.isFrozenGrid()&&o.enableColumnVirtualization&&n.isScroll,k=n.isCustomFormValidation?this.parent.columnModel:o.getColumns();e&&S<i.length&&C<k.length||C<k.length;){var O=e?i[S].getAttribute("colspan"):null,L=k[C];if(I&&"movable"!==L.getFreezeTableName()||n.isCustomFormValidation&&(L.commands||L.commandsTemplate||!L.field))C++;else{var B=this.parent.createElement("td",{className:on,attrs:{style:"text-align:"+(L.textAlign?L.textAlign:""),colspan:O||""}});L.visible?(B.appendChild(t[L.uid]),"Vertical"===this.parent.rowRenderingMode&&(Ff(B,{"data-cell":L.headerText}),0===C&&B.classList.add("e-responsive-editcell")),"booleanedit"===L.editType?B.classList.add("e-boolcell"):(L.commands||L.commandsTemplate)&&N([B],"e-unboundcell")):B.classList.add("e-hide"),y.appendChild(B),C=O?C+parseInt(O,10):C+1,S++}}return m.appendChild(y),d.appendChild(m),u.appendChild(d),h.appendChild(u),h},r.prototype.removeEventListener=function(){},r.prototype.appendChildren=function(t,e,i){var n=de({},e,{isAdd:!this.isEdit,isFrozen:i},!0),s=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s,null,null,t),this.parent.renderTemplates()):ya(t,this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s))},r}(),pAe=function(){function r(t){this.parent=t}return r.prototype.update=function(t,e){if(this.parent.isReact&&e.columnObject&&e.columnObject.template){var i=e.cell.parentElement,n=e.cell.cloneNode(!0);i.insertBefore(n,e.cell),n.focus(),e.cell.remove(),e.cell=n}e.cell.innerHTML="",e.cell.appendChild(this.getEditElement(t,e)),e.cell.classList.remove("e-ellipsistooltip"),e.cell.classList.add("e-editedbatchcell"),li(e.row,[qa,"e-batchrow"],[])},r.prototype.getEditElement=function(t,e){var n=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return n.appendChild(t[e.columnObject.uid]),"booleanedit"===e.columnObject.editType&&e.cell.classList.add("e-boolcell"),e.columnObject.editType||e.cell.classList.add("e-inputbox"),n},r.prototype.removeEventListener=function(){},r}(),fAe=function(){function r(t,e){this.parent=t,this.serviceLocator=e,!this.parent.isDestroyed&&(this.parent.on(CV,this.destroy,this),this.parent.on(gn,this.destroy,this))}return r.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},r.prototype.addNew=function(t,e){this.isEdit=!1,this.createDialog(t,e)},r.prototype.update=function(t,e){this.isEdit=!0,this.createDialog(t,e)},r.prototype.createDialogHeader=function(t){var e=this.parent;if(this.parent.enableAdaptiveUI){var n=new jse(this.parent,this.serviceLocator);return n.action=this.isEdit?ur.isEdit:ur.isAdd,n.renderResponsiveHeader(void 0,t)}return e.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",t):this.isEdit?this.l10n.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle")},r.prototype.createDialog=function(t,e){var i=this.parent;this.dialog=this.parent.createElement("div",{id:i.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),i.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),i.element.appendChild(this.dialog),this.setLocaleObj(),this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit")),this.dialogObj=new Hd(de({header:this.createDialogHeader(e),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(t,e),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:i.editSettings.template?"auto":"330px",target:e.target?e.target:document.body,animationSettings:{effect:"None"},footerTemplate:i.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",e):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},i.editSettings.dialog&&i.editSettings.dialog.params||{})),e.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),function eL(r,t){r.classList.contains("e-bigger")&&t.classList.add("e-bigger")}(this.parent.element,this.dialogObj.element.parentElement),i.enableAdaptiveUI&&this.dialogObj.show(!0)},r.prototype.dialogCreated=function(){uoe(this.parent)},r.prototype.renderResponsiveDialog=function(){var t=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){t.dialogObj.element.style.maxHeight="100%"})},r.prototype.btnClick=function(t){this.l10n.getConstant("CancelButton").toLowerCase()===t.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},r.prototype.dialogClose=function(){this.parent.closeEdit()},r.prototype.destroy=function(t){for(var e=["template","headerTemplate","footerTemplate"],i=0;i<e.length;i++)if(this.parent.editSettings[e[i]]){e[i].charAt(0).toUpperCase(),e[i].slice(1);fb()}this.parent.notify(j8,{}),this.parent.isEdit=!1,this.parent.notify(_v,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),He(this.dialog))},r.prototype.getDialogEditTemplateElement=function(t,e){var i=this.parent.createElement("div",{className:"e-dialog"+t}),n=de({},e.rowData,{isAdd:!this.isEdit},!0),s=this.parent.element.id+"editSettings"+t;return ya(i,("HeaderTemplate"===t?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(n,this.parent,"editSettings"+t,s)),fb(),i},r.prototype.getEditElement=function(t,e){var n=this.parent,s=this.parent.createElement("div",{className:this.isEdit?qa:"e-insertedrow"}),o=e.form=this.parent.createElement("form",{id:n.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){var a=this.parent.element.id+"editSettingsTemplate",l=de({},e.rowData,{isAdd:!this.isEdit},!0);return this.parent.isReact&&"string"!=typeof this.parent.editSettings.template||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a,null,null,o),this.parent.renderTemplates()):ya(o,this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a)),fb(),s.appendChild(o),s}for(var m=this.parent.createElement("table",{className:cr,attrs:{cellspacing:"6px",role:"grid"}}),y=this.parent.createElement(lt,{attrs:{role:"rowgroup"}}),C=n.getColumns(),S=0;S<C.length;S++)if(!(this.parent.editModule.checkColumnIsGrouped(C[S])||C[S].commands||C[S].commandsTemplate||"checkbox"===C[S].type)){var I=this.parent.createElement("tr",{attrs:{role:"row"}}),k=this.parent.createElement("td",{className:on,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});t[C[S].uid].classList.remove("e-input"),k.appendChild(t[C[S].uid]),I.appendChild(k),y.appendChild(I)}return m.appendChild(y),o.appendChild(m),s.appendChild(o),s},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(CV,this.destroy),this.parent.off(gn,this.destroy))},r}(),gAe=function(){function r(t,e){this.editType={Inline:Doe,Normal:Doe,Batch:pAe,Dialog:fAe},this.parent=t,this.serviceLocator=e,this.renderer=new this.editType[this.parent.editSettings.mode](t,e),this.focus=e.getService("focus")}return r.prototype.addNew=function(t){this.renderer.addNew(this.getEditElements(t),t),this.convertWidget(t)},r.prototype.update=function(t){this.renderer.update(this.getEditElements(t),t),t.isCustomFormValidation||(this.parent.notify("edit-form",t),this.convertWidget(t))},r.prototype.convertWidget=function(t){var i,n,o,a,e=this.parent,l=e.isFrozenGrid(),h="Right"===e.getFrozenMode()&&"Normal"===e.editSettings.mode?1:0,u="Dialog"===e.editSettings.mode?le("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document):e.element.getElementsByClassName("e-gridform")[h],d=l&&this.parent.enableColumnVirtualization&&t.isScroll;if(l&&"Normal"===e.editSettings.mode){var m=parseInt(t.row.getAttribute(ki),10);e.frozenRows&&("add"===t.requestType&&"Top"===e.editSettings.newRowPosition||m<e.frozenRows)?(o=e.element.querySelector("."+nr).querySelector(".e-gridform"),this.parent.getFrozenMode()===Jt&&(a=t.frozenRightForm)):(o=e.element.querySelector("."+Gn).querySelector(".e-gridform"),this.parent.getFrozenMode()===Jt&&(a=t.frozenRightForm))}for(var C=0,S="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];C<S.length;C++){var I=S[C];if(!d||"movable"===I.getFreezeTableName()){if(this.parent.editSettings.template&&!f(I.field)){var k=de({},t);k.element=u.querySelector("[name="+Lo(I.field)+"]"),f(k.element)&&l&&(k.element=o.querySelector("[name="+Lo(I.field)+"]")),"string"==typeof I.edit.write?xs(I.edit.write,window)(k):I.edit.write(k);continue}if(!this.parent.editModule.checkColumnIsGrouped(I)&&!I.commands){I.valueAccessor(I.field,t.rowData,I),n=o&&"movable"===I.getFreezeTableName()&&"Normal"===e.editSettings.mode?o.querySelector("[e-mappinguid="+I.uid+"]"):a&&I.getFreezeTableName()===dr&&"Normal"===e.editSettings.mode?a.querySelector("[e-mappinguid="+I.uid+"]"):u.querySelector("[e-mappinguid="+I.uid+"]");var O=I.edit.write;f(n)||("string"==typeof O?(O=xs(O,window))({rowData:t.rowData,element:n,column:I,requestType:t.requestType,row:t.row,foreignKeyData:I.isForeignColumn()&&xs(I.field,t.foreignKeyData)}):I.edit.write({rowData:t.rowData,element:n,column:I,requestType:t.requestType,row:t.row,foreignKeyData:I.isForeignColumn()&&xs(I.field,t.foreignKeyData)}),!i&&!n.getAttribute("disabled")&&!me(n,"e-checkbox-disabled")&&(this.focusElement(n,t.type),i=!0))}}}if(l&&!this.parent.allowTextWrap&&("add"===t.requestType||"beginEdit"===t.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!f(u)&&!f(o)){var L=o.querySelector("tr").children[0],B=u.querySelector("tr").children[0];B.offsetHeight>L.offsetHeight?(L.style.height=B.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=B.offsetHeight+"px")):(B.style.height=L.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=L.offsetHeight+"px"))}},r.prototype.focusElement=function(t,e){var i=this.parent.element.querySelector(".e-edit-checkselect");!f(i)&&i.nextElementSibling&&i.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:U(t,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&me(t,Ul)?t.focus():t.focus({preventScroll:!0}),t.classList.contains("e-defaultcell")&&t.setSelectionRange(t.value.length,t.value.length)},r.prototype.getEditElements=function(t){var e=this.parent,i={},n="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];if(t.isCustomFormValidation&&(n=this.parent.columnModel),this.parent.editSettings.template)return{};for(var s=e.isFrozenGrid()&&e.enableColumnVirtualization&&t.isScroll,o=0,a=n.length;o<a;o++){var l=n[o];if(!(this.parent.editModule.checkColumnIsGrouped(l)||s&&"movable"!==n[o].getFreezeTableName()||t.isCustomFormValidation&&(l.commands||l.commandsTemplate||!l.field))){if(l.commands||l.commandsTemplate){var h=this.serviceLocator.getService("cellRendererFactory"),u=new sp(this.parent),d=h.getCellRenderer(Nt.CommandColumn),y=u.generateRows(t.rowData)[0].cells.filter(function(oe){return oe.rowID}),C=d.render(y[o],t.rowData,{index:t.row?t.row.getAttribute(ki):0},this.parent.enableVirtualization);(S=C.firstElementChild).setAttribute("textAlign",C.getAttribute("textAlign")),i[l.uid]=S;continue}var I=l.valueAccessor(l.field,t.rowData,l),k={column:l,value:I,type:t.requestType,data:t.rowData},O=l.edit.create,L=void 0;if(l.editTemplate){L=this.parent.createElement("span",{attrs:{"e-mappinguid":l.uid}});var B=this.parent.element.id+l.uid+"editTemplate",j=YV({},t.rowData,{column:l});this.parent.isReact&&"string"!=typeof l.editTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(l.getEditTemplate()(de({index:t.rowIndex},j),this.parent,"editTemplate",B,null,null,L),this.parent.renderTemplates()):ya(L,l.getEditTemplate()(de({index:t.rowIndex},j),this.parent,"editTemplate",B))}else{var S;"string"==typeof(L="string"==typeof O?(O=xs(O,window))(k):l.edit.create(k))&&((S=this.parent.createElement("div")).innerHTML=L,L=S.firstChild);var xe="input"!==L.tagName&&L.querySelectorAll("input").length,Le=Lo(l.field);Ue(xe?L.querySelector("input"):L,{name:Le,"e-mappinguid":l.uid,id:e.element.id+Le}),li(L,["e-input","e-field"],[]),"Right"===l.textAlign&&L.classList.add("e-ralign"),((l.isPrimaryKey||l.isIdentity)&&"beginEdit"===t.requestType||l.isIdentity&&"add"===t.requestType)&&L.setAttribute("disabled","")}i[l.uid]=L}}return i},r.prototype.destroy=function(){this.renderer.removeEventListener()},r}(),Vg=function(){function r(t){this.parent=t}return r.prototype.create=function(t){return iL(this.parent,t.column,"e-field",{type:"text"})},r.prototype.read=function(t){return t.ej2_instances[0].value},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())},r}(),mAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vAe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.activeClasses=["e-selectionbackground","e-active"],e}return mAe(t,r),t.prototype.create=function(e){var n="e-field e-boolcell";return"checkbox"===e.column.type&&(n="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,iL(this.parent,e.column,n,{type:"checkbox",value:e.value})},t.prototype.read=function(e){return e.checked},t.prototype.write=function(e){var i,n;if(f(e.row)||(i=e.row.querySelector(".e-edit-checkselect")),xs(e.column.field,e.rowData)&&(n=JSON.parse(xs(e.column.field,e.rowData).toString().toLowerCase())),!f(i)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var s=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));n=!!s&&s.isSelected}Kc.apply(void 0,[[].slice.call(e.row.getElementsByClassName(on)),n].concat(this.activeClasses))}this.obj=new OX(de({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:n,disabled:!Bg(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)},t.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener("change",this.cbChange)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener("change",this.cbChange)},t.prototype.checkBoxChange=function(e){if(this.editRow&&"Dialog"!==this.editType){var i=!1;e.checked?this.editRow.setAttribute("aria-selected",(i=!0).toString()):this.editRow.removeAttribute("aria-selected"),Kc.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(on)),i].concat(this.activeClasses))}},t}(Vg),yAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),bAe=function(r){function t(e){var i=r.call(this)||this;return i.parent=e,i.flag=!1,i.removeEventHandler=i.removeEventListener,i}return yAe(t,r),t.prototype.write=function(e){var i="Dialog"!==this.parent.editSettings.mode;this.column=e.column;var n=new kn(e.column.field,"notequal",null,!0,!1),s={};if(e.column.edit.params)for(var o=Object.keys(e.column.edit.params),a=0;a<o.length;a++)s[o[a]]="query"===o[a]?e.column.edit.params[o[a]].clone():e.column.edit.params[o[a]];this.obj=new Nb(de({dataSource:this.parent.dataSource instanceof Je?this.parent.dataSource:new Je(this.parent.dataSource),query:(new si).where(n).select(e.column.field),enabled:Bg(e.column,e.requestType,e.element),fields:{value:e.column.field},value:xs(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass?this.parent.cssClass:null,close:this.dropDownClose.bind(this)},s)),this.parent.enableVirtualization&&(this.obj.dataSource=e.column.isForeignColumn()?[e.foreignKeyData[0]]:[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",Lo(e.column.field))},t.prototype.dropDownClose=function(e){},t.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(FV,this.ddCreated),this.obj.addEventListener("open",this.ddOpen),this.obj.addEventListener(Nse,this.ddBeforeOpen),this.obj.addEventListener(Ui,this.ddComplete)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(FV,this.ddCreated),this.obj.removeEventListener("open",this.ddOpen),this.obj.removeEventListener(Nse,this.ddBeforeOpen),this.obj.removeEventListener(Ui,this.ddComplete))},t.prototype.dropdownCreated=function(e){this.flag=!0},t.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof Je?this.column.dataSource:new Je(this.column.dataSource):this.parent.dataSource instanceof Je?this.parent.dataSource:new Je(this.parent.dataSource))},t.prototype.ddActionComplete=function(e){e.result=Ye.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&!(this.column.edit.params&&this.column.edit.params.ddEditedData)&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof Je&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},t.prototype.dropDownOpen=function(e){var i=me(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!f(i)){var n=le("#"+i.id,document).ej2_instances[0];e.popup.element.style.zIndex=(n.zIndex+1).toString()}},t}(Vg),CAe=function(){function r(t){this.parent=t}return r.prototype.keyEventHandler=function(t){if(13===t.keyCode||9===t.keyCode){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}},r.prototype.create=function(t){return this.instances=new qr(this.parent.locale),iL(this.parent,t.column,"e-field",{})},r.prototype.read=function(t){return this.obj.value},r.prototype.write=function(t){var e=t.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new ux(de({value:parseFloat(xs(t.column.field,t.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":t.column.headerText,enabled:Bg(t.column,t.requestType,t.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},e.edit.params)),t.element.setAttribute("name",Lo(t.column.field)),this.obj.appendTo(t.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},r}(),wAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),SAe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wAe(t,r),t.prototype.create=function(e){var i={type:"text",value:f(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return iL(this.parent,e.column,"e-field e-input e-defaultcell",i)},t.prototype.read=function(e){return e.value},t.prototype.write=function(e){var i=e.column,n="Dialog"!==this.parent.editSettings.mode;this.obj=new MJ(de({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Bg(e.column,e.requestType,e.element),placeholder:n?"":e.column.headerText,cssClass:this.parent.cssClass?this.parent.cssClass:""},i.edit.params)),this.obj.appendTo(e.element)},t}(Vg),Ioe=function(){function r(t,e,i){this.args={},this.currentVirtualData={},this.parent=t,this.renderer=i,this.serviceLocator=e,this.addEventListener()}return r.prototype.clickHandler=function(t){var e=t.target,i=this.parent;(me(e,zs)&&me(me(e,zs),"e-grid").id===i.element.id||i.frozenRows&&me(e,js))&&!me(e,"e-unboundcelldiv")&&(this.rowIndex=me(e,on)?parseInt(e.parentElement.getAttribute(ki),10):-1,i.isEdit&&i.editModule.endEdit())},r.prototype.dblClickHandler=function(t){me(t.target,on)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(me(t.target,Sn))},r.prototype.editComplete=function(t){switch(this.parent.isEdit=!1,t.requestType){case"save":(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection)&&"edit"!==t.action&&this.parent.selectRow(0),this.parent.trigger(Ui,de(t,{requestType:"save",type:Ui}));break;case"delete":this.parent.trigger(Ui,de(t,{requestType:"delete",type:Ui})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}},r.prototype.getEditArgs=function(t,e,i){for(var n=this.parent.getPrimaryKeyFieldNames(),s=[],o=0;o<n.length;o++)s.push(xs(n[o],t));return{primaryKey:n,primaryKeyValue:s,requestType:"beginEdit",rowData:t,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:e&&e.foreignKeyData,target:void 0,isScroll:i}},r.prototype.startEdit=function(t){var e=this,i=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(t.getAttribute(ki),10),!i.enableVirtualization&&!i.enableInfiniteScrolling||this.parent.element.querySelector('.e-row[data-rowindex="'+this.rowIndex+'"]')){var o={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",o),ks(i)){var a=i.getRowObjectFromUID(t.getAttribute("data-uid"));this.previousData=a.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=de({},{},i.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=o.data;var l=de({},{},o.data||this.previousData,!0);this.uid=t.getAttribute("data-uid");var h=i.getRowObjectFromUID(this.uid),u=this.getEditArgs(l,h,o.isScroll);u.row=t,u.isScroll?this.inlineEditHandler(u,t):(this.parent.notify(LV,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger("beginEdit",u,function(d){d.type="actionBegin",i.trigger(mr,d,function(m){m.cancel||e.inlineEditHandler(m,t)})}))}},r.prototype.inlineEditHandler=function(t,e){var i=this.parent;i.isEdit=!0,t.row=t.row?t.row:e,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,t.row.classList.add("e-dlgeditrow")),this.renderer.update(t),this.uid=e.getAttribute("data-uid"),i.editModule.applyFormValidation(),t.type="actionComplete",i.trigger(Ui,t),this.args=t,this.parent.allowTextWrap&&this.parent.notify(hu,{case:"textwrap"})},r.prototype.updateRow=function(t,e){var i=this,n=this.parent;this.editRowIndex=t;var s={requestType:"save",action:"edit",type:mr,data:e,cancel:!1,previousData:n.getCurrentViewRecords()[t],row:n.getRowByIndex(t)};if(n.showSpinner(),n.enableInfiniteScrolling){this.uid=s.row.getAttribute("data-uid");var o=parseInt(s.row.getAttribute("data-rowindex"),10);this.parent.notify("refresh-infinite-editrowindex",{index:o})}n.notify(MM,s),s.promise?s.promise.then(function(){return n.refresh()}).catch(function(a){return i.edFail(a)}):n.enableInfiniteScrolling||n.refresh()},r.prototype.editFormValidate=function(){var t=this.parent,e=t.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return t.notify("validate-virtual-form",i),e&&i.isValid},r.prototype.endEdit=function(){var t=this,e=this.parent;if(this.parent.isEdit&&this.editFormValidate()){var i=de({},{},this.previousData,!0),n=de(this.args,{requestType:"save",type:mr,data:i,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),s="Right"===e.getFrozenMode()?1:0,o="Dialog"===e.editSettings.mode,a=le("#"+e.element.id+"_dialogEdit_wrapper",document),l=o?a.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[s],h={virtualData:de({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(kv,h),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(h.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=i=n.data=h.virtualData):i=e.editModule.getCurrentEditedData(l,i),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){var u=e.getMovableVirtualHeader().querySelector(".e-gridform"),d=e.getMovableVirtualContent().querySelector(".e-gridform"),m=[u||d],y=void 0,C=void 0,S=[];e.getFrozenMode()===Jt&&(y=e.getFrozenRightHeader().querySelector(".e-gridform"),C=e.getFrozenRightContent().querySelector(".e-gridform"),S=[y||C]),rC(this.parent,function(k,O){for(var L=0,B=O;L<B.length;L++){var j=B[L];j&&(i=e.editModule.getCurrentEditedData(j,i))}},[[],m,S])}var I=[].slice.call(e.element.getElementsByClassName(qa)).length;if(!h.isAdd&&Object.keys(this.currentVirtualData).length&&!I&&(I=1),o?a.getElementsByClassName(qa).length:I)n.action="edit",e.trigger(mr,n,function(k){k.cancel||("Spinner"===t.parent.loadingIndicator.indicatorType&&e.showSpinner(),"Shimmer"===t.parent.loadingIndicator.indicatorType&&t.parent.showMaskRow(),e.notify(MM,k))});else if(n.action="add",n.selectedRow=0,n.index=this.addedRowIndex,e.notify(BM,{}),e.notify(Yo,n),this.addedRowIndex=null,n.cancel)return}},r.prototype.destroyElements=function(){var t=this.parent;t.editModule.destroyWidgets(),t.editModule.destroyForm(),this.parent.notify(CV,{})},r.prototype.editHandler=function(t){var e=this;t.promise?t.promise.then(function(i){return e.edSucc(i,t)}).catch(function(i){return e.edFail(i)}):this.editSuccess(t.data,t)},r.prototype.edSucc=function(t,e){this.editSuccess(t,e)},r.prototype.edFail=function(t){this.editFailure(t)},r.prototype.updateCurrentViewData=function(t){!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(this.parent.getCurrentViewRecords()[this.editRowIndex]=t)},r.prototype.requestSuccess=function(t){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==t.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},r.prototype.editSuccess=function(t,e){f(t)||t instanceof Array||(e.data=de({},de({},e.rowData,e.data),t)),this.requestSuccess(e),this.parent.trigger(gV,e),e.type=Ui,this.parent.isEdit=!1,this.refreshRow(e.data),this.parent.notify(BM,e),this.parent.editModule.checkLastRow(e.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(e.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(Ui,e),(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.removeMaskRow(),this.parent.hideSpinner()},r.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))},r.prototype.blazorTemplate=function(){var t=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&fb();for(var e=0;e<t.length;e++){var i=t[e];i.template&&fb(),i.editTemplate&&fb()}},r.prototype.editFailure=function(t){this.parent.removeMaskRow(),this.parent.trigger($x,{error:t}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:t})},r.prototype.needRefresh=function(){var t=!0,e=this.parent.element.querySelector(".e-gridform");return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&"Normal"===this.parent.editSettings.mode&&!e&&(t=!1),t},r.prototype.refreshRow=function(t){var e=this.parent.isFrozenGrid(),i=new kh(this.serviceLocator,null,this.parent),n=this.parent.getRowObjectFromUID(this.uid);if(n){n.changes=t,this.parent.notify("refresh-virtual-cache",{data:t}),qV(n,this.parent.getForeignKeyColumns(),n.changes),this.needRefresh()&&i.refresh(n,this.parent.getColumns(),!0);var s=[].slice.call(this.parent.element.querySelectorAll('[data-rowindex="'+n.index+'"]'));if(e&&s.length)for(var o=0;o<s.length;o++){var a=s[o].getAttribute("data-uid");a!==this.uid&&((n=this.parent.getRowObjectFromUID(a)).changes=t,i.refresh(n,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(s[o]))}}},r.prototype.closeEdit=function(){var t=this;if(this.parent.isEdit){var e=this.parent,i=de(this.args,{requestType:"cancel",type:mr,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",i),this.blazorTemplate(),e.trigger(mr,i,function(n){if(!n.cancel){"Dialog"===t.parent.editSettings.mode&&t.parent.notify(CV,{}),e.isEdit=!1,t.stopEditStatus(),n.type=Ui,"Dialog"!==e.editSettings.mode&&t.refreshRow(n.data);var s=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");!e.getContentTable().querySelector("tr.e-emptyrow")&&!e.getContentTable().querySelector("tr.e-row")&&!s&&e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(t.rowIndex),e.trigger(Ui,n)}})}},r.prototype.addRecord=function(t,e){var i=this,n=this.parent;if(this.addedRowIndex=e=f(e)?0:e,t)n.notify(Yo,{requestType:"save",type:mr,data:t,selectedRow:0,action:"add",index:e});else if(!n.isEdit){this.previousData={},this.uid="";var s=n.getColumns(),o={virtualData:{},isScroll:!1};this.parent.notify(kv,o);for(var a=0;a<s.length;a++)o.isScroll&&"movable"!==s[a].getFreezeTableName()||s[a].field&&Ye.setValue(s[a].field,s[a].defaultValue,this.previousData);var l={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:mr,index:e,rowData:this.previousData,target:void 0,isScroll:o.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(o.virtualData).length&&(l.data=l.rowData=o.virtualData),l.isScroll?this.inlineAddHandler(l):(this.parent.notify(LV,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),n.trigger(mr,l,function(h){h.cancel||i.inlineAddHandler(h)}))}},r.prototype.inlineAddHandler=function(t){var e=this.parent;e.isEdit=!0,"Dialog"!==e.editSettings.mode&&e.clearSelection(),this.renderer.addNew(t),e.editModule.applyFormValidation(),t.type=Ui,t.row=e.element.querySelector("."+Ul),e.trigger(Ui,t),this.args=t},r.prototype.deleteRecord=function(t,e){if(this.editRowIndex=this.parent.selectedRowIndex,e){e=e instanceof Array?e:[e];var i=this.parent,n=Object.keys(e).length;t=t||this.parent.getPrimaryKeyFieldNames()[0];for(var s=function(h){var u,d,m=i.currentViewData.some(function(y){return d=y,e[h]===xs(t,y)||e[h]===y});e[h]=m?d:e[h][t]?e[h]:((u={})[t]=e[h],u)},o=0;o<n;o++)s(o)}var a={requestType:"delete",type:mr,foreignKeyData:{},data:e||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(f(this.parent.commandDelIndex)||(a.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&a.data.length>1){var l=this.parent.getSelectedRows()[0].getAttribute("data-uid");a.data=[this.parent.getRowObjectFromUID(l).data]}this.parent.notify(Yo,a)},r.prototype.stopEditStatus=function(){for(var t=this.parent,e=[].slice.call(t.element.getElementsByClassName(Ul)),i=[].slice.call(t.element.getElementsByClassName(qa)),n=0;n<e.length;n++)He(e[n]);for(n=0;n<i.length;n++)i[n].classList.remove(qa)},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:sse,handler:this.editHandler},{event:U8,handler:this.dblClickHandler},{event:ol,handler:this.clickHandler},{event:$8,handler:this.requestSuccess},{event:RM,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:gG,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],wo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||wo(this.parent,this.evtHandlers,!1)},r.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},r}(),EAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Aoe=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return EAe(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(Ioe),TAe=function(){function r(t,e,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.initialRender=!0,this.validationColObj=[],this.parent=t,this.serviceLocator=e,this.renderer=i,this.focus=e.getService("focus"),this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ol,handler:this.clickHandler},{event:RM,handler:this.dblClickHandler},{event:Qx,handler:this.onBeforeCellFocused},{event:vV,handler:this.onCellFocused},{event:U8,handler:this.dblClickHandler},{event:_s,handler:this.keyDownHandler},{event:EV,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:gn,handler:this.destroy}],wo(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(ph,this.dataBoundFunction),this.parent.addEventListener(Ng,this.batchCancelFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(wo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(ph,this.dataBoundFunction),this.parent.removeEventListener(Ng,this.batchCancelFunction))},r.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus()},r.prototype.dataBound=function(){this.parent.notify(_v,{})},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.clickHandler=function(t){me(t.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&U(this.form,"td")!==U(t.target,"td")&&(this.saveCell(),this.editNextValCell()),me(t.target,on)&&!this.parent.isEdit&&this.setCellIdx(t.target))},r.prototype.dblClickHandler=function(t){var e=me(t.target,on),i=me(t.target,Sn),n=i&&parseInt(i.getAttribute(ki),10),s=e&&parseInt(e.getAttribute(Ys),10);!f(e)&&!f(n)&&!isNaN(s)&&!e.parentElement.classList.contains(qa)&&this.editCell(n,this.parent.getColumns()[s].field,this.isAddRow(n))},r.prototype.onBeforeCellFocused=function(t){this.parent.isEdit&&this.validateFormObj()&&(t.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(t.keyArgs.action)>-1)&&(t.cancel=!0,t.byClick?t.clickArgs.preventDefault():t.keyArgs.preventDefault())},r.prototype.onCellFocused=function(t){var e=this.parent.getFrozenLeftCount(),i=this.parent.getFrozenRightColumnsCount(),n=this.parent.getContent().querySelector("."+Gn),s=this.parent.getHeaderContent().querySelector("."+nr),o=!(t.container.isContent&&t.container.isDataCell||this.parent.frozenRows&&t.container.isHeader);if(!t.byKey||o||this.parent.isFrozenGrid()&&t.element&&U(t.element,".e-gridheader")&&!t.element.parentElement.hasAttribute("data-rowindex"))this.parent.isEdit&&o&&this.saveCell();else{var a=t.container.indexes,l=a[0],h=a[1];if(e&&(n.contains(t.element)||this.parent.frozenRows&&s.contains(t.element))&&(h+=e),i){var u=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(t.element)||this.parent.frozenRows&&u.contains(t.element))&&(h+=e+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&t.container.isContent&&(l+=this.parent.frozenRows);var m=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(m=m&&!this.validateFormObj(),t.keyArgs.action){case"tab":case"shiftTab":var y=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0,C=this.parent.getColumns()[h-y];C&&!this.parent.isEdit&&this.editCell(l,C.field),(m||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(l,h);break;case"enter":case"shiftEnter":t.keyArgs.preventDefault();var S={cancel:!1,keyArgs:t.keyArgs};this.parent.notify("beforeFocusCellEdit",S),!S.cancel&&m&&this.editCell(l,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(l,h),this.focus.focus()}}},r.prototype.isAddRow=function(t){return this.parent.getDataRows()[t].classList.contains("e-insertedrow")},r.prototype.editCellFromIndex=function(t,e){this.cellDetails.rowIndex=t,this.cellDetails.cellIndex=e,this.editCell(t,this.parent.getColumns()[e].field,this.isAddRow(t))},r.prototype.closeEdit=function(){var t=this,e=this.parent,i=this.parent.getRowsObject(),n={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",n),!n.cancel){e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(var l,s=JV(this.parent),o=function(d){var m=!1,y=i[d].isDirty;rC(a.parent,function(C,S){(m=t.removeBatchElementChanges(S[d],y))&&S.splice(d,1)},s),m&&d--,l=d},a=this,h=0;h<i.length;h++)o(h),h=l;e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var u=this.parent.getRowsObject();this.parent.isFrozenGrid()?(this.parent.getRowsObject().length&&e.notify(Ng,{rows:this.parent.getRowsObject(),args:{isFrozen:!0}}),this.parent.getMovableRowsObject().length&&e.notify(Ng,{rows:this.parent.getMovableRowsObject()}),this.parent.getFrozenRightRowsObject().length&&e.notify(Ng,{rows:this.parent.getFrozenRightRowsObject(),args:{renderFrozenRightContent:!0}})):e.notify(Ng,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new Of({isDataRow:!0,cells:[new ic({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(_v,{}),this.parent.notify(nS,{}),u={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(Ng,u)}},r.prototype.removeBatchElementChanges=function(t,e){var i=this.parent,n=new kh(this.serviceLocator,null,this.parent),s=!1;if(e){t.isDirty=e;var o=i.getRowElementByUID(t.uid);if(o&&(o.classList.contains("e-insertedrow")?(He(o),s=!0):(qV(t,this.parent.getForeignKeyColumns(),t.data),delete t.changes,delete t.edit,t.isDirty=!1,li(o,[],["e-hiddenrow","e-updatedtd"]),n.refresh(t,i.getColumns(),!1)),this.parent.aggregates.length>0)){var l=[];l.type="cancel",this.parent.notify(Av,l),this.parent.groupSettings.columns.length>0&&this.parent.notify(Zb,l)}}return s},r.prototype.removeHideAndSelection=function(t){if(t.classList.contains("e-hiddenrow")){t.removeAttribute("aria-selected");for(var e=[].slice.call(t.getElementsByClassName("e-selectionbackground")),i=0;i<e.length;i++)z([e[i]],["e-selectionbackground","e-active"])}li(t,[],["e-hiddenrow","e-updatedtd"])},r.prototype.deleteRecord=function(t,e){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(t,e),this.parent.aggregates.length>0&&(this.parent.notify(Av,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(Zb,{}))},r.prototype.addRecord=function(t){this.bulkAddRow(t)},r.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},r.prototype.closeForm=function(){for(var t=0;t<Object.keys(this.originalCell).length;t++)for(var e=0;e<Object.keys(this.cloneCell).length;e++)Object.keys(this.originalCell)[t]===Object.keys(this.cloneCell)[e]&&(this.cloneCell[Object.keys(this.cloneCell)[e]].replaceWith(this.originalCell[Object.keys(this.originalCell)[t]]),this.originalCell[Object.keys(this.originalCell)[t]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[t]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}},r.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},r.prototype.batchSave=function(){var t=this.parent,e="deletedRecords";if(t.isCheckBoxSelection){var i=t.element.querySelector(".e-checkselectall").parentElement;i.classList.contains("e-checkbox-disabled")&&t.pageSettings.totalRecordsCount>t.currentViewData.length&&z([i],["e-checkbox-disabled"])}if(this.saveCell(),!(t.isEdit||this.editNextValCell()||t.isEdit)){var n=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&n[e].length&&this.parent.selectionSettings.persistSelection&&(n[e]=this.removeSelectedData,this.removeSelectedData=[]);var s={changedRecords:this.parent.getRowsObject().filter(function(a){return a.isDirty&&-1===["add","delete"].indexOf(a.edit)}).map(function(a){return a.data})};t.trigger("beforeBatchSave",{batchChanges:n,cancel:!1},function(a){a.cancel||(t.showSpinner(),t.notify("bulk-save",{changes:n,original:s}))})}},r.prototype.getBatchChanges=function(){for(var t={addedRecords:[],deletedRecords:[],changedRecords:[]},i=0,n=this.parent.getRowsObject();i<n.length;i++){var s=n[i];if(s.isDirty)switch(s.edit){case"add":t.addedRecords.push(s.changes);break;case"delete":t.deletedRecords.push(s.data);break;default:t.changedRecords.push(s.changes)}}return t},r.prototype.removeRowObjectFromUID=function(t){for(var e=this.parent.getRowsObject(),i=0,n=e.length;i<n&&e[i].uid!==t;i++);rC(this.parent,function(s,o){o.splice(i,1)},JV(this.parent))},r.prototype.addRowObject=function(t,e){var i=this.parent,n="Top"===i.editSettings.newRowPosition;rC(this.parent,function(s,o){var a=t.clone();i.isFrozenGrid()?e===s&&(n?o.unshift(a):o.push(a)):n?o.unshift(a):o.push(a)},JV(this.parent),!0)},r.prototype.bulkDelete=function(t,e){var i=this;this.removeSelectedData=[];var n=this.parent,s=n.selectedRowIndex,o=n.getSelectedRows(),a={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:s,rowData:e||n.getSelectedRecords()[0],cancel:!1};a.row=e?n.editModule.deleteRowUid?n.getRowElementByUID(n.editModule.deleteRowUid):n.getRows()[n.getCurrentViewRecords().indexOf(e)]:e?n.getRows()[s]:o[0],a.row&&n.trigger("beforeBatchDelete",a,function(l){if(!l.cancel){if(i.removeSelectedData=n.getSelectedRecords(),n.clearSelection(),l.row=l.row?l.row:e?n.getRows()[s]:o[0],i.parent.isFrozenGrid()){e&&(s=parseInt(l.row.getAttribute(ki),10),(o=[]).push(n.getRowByIndex(s)),o.push(n.getMovableRowByIndex(s)),n.getFrozenMode()===Jt&&o.push(n.getFrozenRightRowByIndex(s)));for(var h=0;h<o.length;h++){var u=o[h].getAttribute("data-uid");o[h].classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),He(o[h])):((d=n.getRowObjectFromUID(u)).isDirty=!0,d.edit="delete",li(o[h],["e-hiddenrow","e-updatedtd"],[]),n.frozenRows&&s<n.frozenRows&&n.getMovableDataRows().length>=n.frozenRows&&(n.getMovableHeaderTbody().appendChild(n.getMovableRowByIndex(n.frozenRows-1)),n.getFrozenHeaderTbody().appendChild(n.getRowByIndex(n.frozenRows-1)),n.getFrozenMode()===Jt&&n.getFrozenRightHeaderTbody().appendChild(n.getFrozenRightRowByIndex(n.frozenRows-1))),n.frozenRows&&s<n.frozenRows&&n.getDataRows().length>=n.frozenRows&&n.getHeaderTable().querySelector(lt).appendChild(n.getRowByIndex(n.frozenRows-1))),delete o[h]}}else if(i.parent.isFrozenGrid()||1!==o.length&&!e)for(h=0;h<o.length;h++){var m=o[h].getAttribute("data-uid");if(o[h].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(m),He(o[h]);else{li(o[h],["e-hiddenrow","e-updatedtd"],[]);var y=n.getRowObjectFromUID(m);y.isDirty=!0,y.edit="delete",delete o[h]}}else{var d;u=l.row.getAttribute("data-uid"),u=e&&i.parent.editModule.deleteRowUid?u=i.parent.editModule.deleteRowUid:u,l.row.classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),He(l.row)):((d=n.getRowObjectFromUID(u)).isDirty=!0,d.edit="delete",li(l.row,["e-hiddenrow","e-updatedtd"],[])),delete l.row}i.refreshRowIdx(),e&&(n.editModule.deleteRowUid=void 0,n.getSelectedRows().length&&(s=parseInt(n.getSelectedRows()[0].getAttribute(ki),10))),n.isCheckBoxSelection||n.selectRow(s),n.trigger(fV,l),n.notify(fV,{rows:i.parent.getRowsObject()}),n.notify(_v,{})}})},r.prototype.refreshRowIdx=function(){for(var a,e=this.parent.getAllDataRows(!0),i=function PIe(r){return["Right"!==r.getFrozenMode()?r.getAllDataRows(!0):[],r.getAllMovableDataRows(!0),r.getAllFrozenRightDataRows(!0)]}(this.parent),n=JV(this.parent),s=function(d,m,y){e[d].classList.contains(Sn)&&!e[d].classList.contains("e-hiddenrow")?(rC(o.parent,function(C,S,I){S[d].setAttribute(ki,m.toString()),S[d].setAttribute(zM,(m+1).toString()),I[d].index=m},i,null,n),m++):rC(o.parent,function(C,S,I){S[d].removeAttribute(ki),S[d].removeAttribute(zM),I[d].index=-1},i,null,n),a=m},o=this,l=0,h=0,u=e.length;l<u;l++)s(l,h),h=a},r.prototype.getIndexFromData=function(t){return function ZM(r,t){for(var e=0,i=t.length;e<i;e++)if(t[e]===r)return e;return-1}(t,this.parent.getCurrentViewRecords())},r.prototype.bulkAddRow=function(t){var e=this,i=this.parent;if(i.editSettings.allowAdding&&(i.isEdit&&(this.saveCell(),this.parent.notify(EV,{})),!i.isEdit)){if(this.initialRender){for(var n=i.getVisibleColumns(),s=0;s<n.length;s++)if(n[s].validationRules&&n[s].validationRules.required){var o={field:n[s].field.slice(),cellIdx:s};this.validationColObj.push(o)}this.initialRender=!1}this.parent.element.classList.add("e-editing");var l={defaultData:t||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger("beforeBatchAdd",l,function(h){if(!h.cancel)if(e.isAdded=!0,i.clearSelection(),i.isFrozenGrid()){for(var u=e.parent.getMovableColumnsCount(),d=e.parent.getFrozenLeftCount(),m=e.parent.getFrozenRightColumnsCount(),y=i.getContentTable().querySelector(lt),C=u+d+m,S=void 0,I=[],k=[],O=void 0,L=void 0,B=void 0,j=void 0,G=void 0,ae=0;ae<C;){var ve=new kh(e.serviceLocator,null,e.parent),Le=new sp(e.parent).generateRows([h.defaultData]);d>0?(S="frozen-left",C=(d=0)+m+u):u>0?(S="movable",C=d+m+(u=0)):(S="frozen-right",C=d+(m=0)+u);for(var oe=0;oe<Le.length;oe++)Le[oe].cells=QV(e.parent,Le[oe].cells,S);"frozen-left"===S?(B=ve.render(Le[0],i.getColumns())).classList.add("e-insertedrow"):"movable"===S?(j=ve.render(Le[0],i.getColumns())).classList.add("e-insertedrow"):(G=ve.render(Le[0],i.getColumns())).classList.add("e-insertedrow");for(var Ae=0;Ae<e.parent.groupSettings.columns.length;Ae++)B.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),B.firstChild),Le[0].cells.unshift(new ic({cellType:Nt.Indent}));y.querySelector(".e-emptyrow")&&((De=y.querySelector(".e-emptyrow")).parentNode.removeChild(De),e.removeFrozenTbody()),"frozen-left"===S&&(y=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(lt):i.getContentTable().querySelector(lt),"Top"===e.parent.editSettings.newRowPosition?(y.insertBefore(B,y.firstChild),N([].slice.call(B.getElementsByClassName(on)),["e-updatedtd"])):(y.appendChild(B),N([].slice.call(B.getElementsByClassName(on)),["e-updatedtd"]))),("movable"===S||"frozen-right"===S)&&e.renderFrozenAddRow(j,G,S),Le[0].isDirty=!0,Le[0].changes=de({},{},Le[0].data,!0),Le[0].edit="add",e.addRowObject(Le[0],S)}e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(tS,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}});var ge=e.getBatchChanges(),Re=e.getBottomIndex();i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:Re),t||(L=e.findNextEditableCell(0,!0),O=i.getColumns()[L],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:Re,O.field,!0)),e.parent.aggregates.length>0&&(t||ge[Pf].length)&&e.parent.notify(Av,{}),B&&(XV(j.querySelector("td:not(.e-hide)"),B.querySelector("td:not(.e-hide)")),I.push(B),k.push(B.cells)),I.push(j),k.push(j.cells),G&&(I.push(G),k.push(G.cells)),i.trigger(tS,{defaultData:h.defaultData,row:I,columnObject:O,columnIndex:L,primaryKey:h.primaryKey,cell:k})}else{for(ve=new kh(e.serviceLocator,null,e.parent),Le=new sp(e.parent).generateRows([h.defaultData]),B=ve.render(Le[0],i.getColumns()),O=void 0,L=void 0,ae=0;ae<e.parent.groupSettings.columns.length;ae++)B.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),B.firstChild),Le[0].cells.unshift(new ic({cellType:Nt.Indent}));var De;y=i.getContentTable().querySelector(lt),B.classList.add("e-insertedrow"),y.querySelector(".e-emptyrow")&&((De=y.querySelector(".e-emptyrow")).parentNode.removeChild(De),e.removeFrozenTbody()),y=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(lt):i.getContentTable().querySelector(lt),"Top"===e.parent.editSettings.newRowPosition?y.insertBefore(B,y.firstChild):y.appendChild(B),N([].slice.call(B.getElementsByClassName(on)),["e-updatedtd"]),Le[0].isDirty=!0,Le[0].changes=de({},{},Le[0].data,!0),Le[0].edit="add",e.addRowObject(Le[0]),e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(tS,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}}),ge=e.getBatchChanges(),Re=e.getBottomIndex(),i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:Re),t||(L=e.findNextEditableCell(0,!0),O=i.getColumns()[L],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:Re,O.field,!0)),e.parent.aggregates.length>0&&(t||ge[Pf].length)&&e.parent.notify(Av,{}),i.trigger(tS,{defaultData:h.defaultData,row:B,columnObject:O,columnIndex:L,primaryKey:h.primaryKey,cell:B.cells[L]})}})}},r.prototype.renderFrozenAddRow=function(t,e,i){var s,o,n=this.parent;"movable"===i&&(s=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getMovableHeaderTbody():this.parent.getContent().querySelector(".e-movablecontent").querySelector(lt),"Top"===n.editSettings.newRowPosition?s.insertBefore(t,s.firstChild):s.appendChild(t),N([].slice.call(t.getElementsByClassName(on)),["e-updatedtd"])),"frozen-right"===i&&(o=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getFrozenRightHeaderTbody():this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(lt),"Top"===n.editSettings.newRowPosition?o.insertBefore(e,o.firstChild):o.appendChild(e),N([].slice.call(e.getElementsByClassName(on)),["e-updatedtd"]),XV(e.querySelector("td:not(.e-hide)"),t.querySelector("td:not(.e-hide)"))),"auto"===n.height&&n.notify(PM,{})},r.prototype.removeFrozenTbody=function(){var t=this.parent;if(t.isFrozenGrid()){var e=t.getContent().querySelector("."+Gn).querySelector(lt);if(e.firstElementChild.parentNode.removeChild(e.firstElementChild),t.getFrozenMode()===Jt){var i=t.getContent().querySelector(".e-frozen-right-content").querySelector(lt);i.firstElementChild.parentNode.removeChild(i.firstElementChild)}}},r.prototype.renderMovable=function(t,e){var i=t.cloneNode(!0),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenLeftCount(),o=this.parent.getFrozenRightColumnsCount();return HG(t,0,s),HG(i,s,o?i.children.length-o:i.children.length),HG(e,s+n,e.children.length),i},r.prototype.findNextEditableCell=function(t,e,i){for(var o,n=this.parent.getColumns(),s=n.length,a=t;a<s;a++){if(o=!!i&&f(n[a].validationRules),!e&&this.checkNPCell(n[a]))return a;if(e&&(!n[a].template||n[a].field)&&n[a].visible&&n[a].allowEditing&&(!n[a].isIdentity||!n[a].isPrimaryKey)&&!o)return a}return-1},r.prototype.checkNPCell=function(t){return!t.template&&t.visible&&!t.isPrimaryKey&&!t.isIdentity&&t.allowEditing},r.prototype.getDefaultData=function(){for(var e={},i={number:0,string:null,boolean:!1,date:null,datetime:null},n=0,s=this.parent.columnModel;n<s.length;n++){var o=s[n];o.field&&jt(o.field,Object.keys(o).indexOf("defaultValue")>=0?o.defaultValue:i[o.type],e)}return e},r.prototype.setCellIdx=function(t){var e=0;this.parent.allowGrouping&&(e=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=t.cellIndex-e,this.cellDetails.rowIndex=parseInt(t.getAttribute("index"),10)},r.prototype.editCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e);this.index=t,this.field=e,this.isAdd=i;var o=n.isEdit&&!(this.cellDetails.column.field===e&&this.cellDetails.rowIndex===t&&this.parent.getDataRows().length-1!==t);n.editSettings.allowEditing&&(!o&&s.allowEditing?this.editCellExtend(t,e,i):o&&(this.editNext=!0,this.saveCell()))},r.prototype.editCellExtend=function(t,e,i){var n=this,s=this.parent,o=s.getColumnByField(e),a=s.getPrimaryKeyFieldNames();if(!s.isEdit){var l,h,u=de({},{},this.getDataByIndex(t),!0);if("movable"===o.getFreezeTableName()||o.getFreezeTableName()===dr?(l="movable"===o.getFreezeTableName()?s.getMovableDataRows()[t]:s.getFrozenRightDataRows()[t],h=this.parent.getRowObjectFromUID(l.getAttribute("data-uid")),u=h.changes?de({},{},h.changes,!0):u):(l=s.getDataRows()[t],u=de({},{},this.getDataByIndex(t),!0)),a[0]===o.field&&!l.classList.contains("e-insertedrow")||o.columns||o.isPrimaryKey&&o.isIdentity||o.commands)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");var d=s.getRowObjectFromUID(l.getAttribute("data-uid")),m=[].slice.apply(l.cells),y={columnName:o.field,isForeignKey:!f(o.foreignKeyValue),primaryKey:a,rowData:u,validationRules:de({},o.validationRules?o.validationRules:{}),value:xs(o.field,u),type:i?"add":"edit",cancel:!1,foreignKeyData:d&&d.foreignKeyData};y.cell=m[this.getColIndex(m,this.getCellIdx(o.uid))],y.row=l,y.columnObject=o,y.cell&&s.trigger("cellEdit",y,function(C){C.cancel||(C.cell=C.cell?C.cell:m[n.getColIndex(m,n.getCellIdx(o.uid))],C.row=C.row?C.row:l,C.columnObject=C.columnObject?C.columnObject:o,C.columnObject.index=f(C.columnObject.index)?0:C.columnObject.index,n.cellDetails={rowData:u,column:o,value:C.value,isForeignKey:C.isForeignKey,rowIndex:t,cellIndex:parseInt(C.cell.getAttribute(Ys),10),foreignKeyData:C.foreignKeyData},C.cell.classList.contains("e-updatedtd")&&(n.isColored=!0,C.cell.classList.remove("e-updatedtd")),s.isEdit=!0,s.clearSelection(),(!s.isCheckBoxSelection||!s.isPersistSelection)&&s.selectRow(n.cellDetails.rowIndex,!0),n.renderer.update(C),n.parent.notify("batcheditform-rendered",C),n.form=le("#"+s.element.id+"EditForm",s.element),s.editModule.applyFormValidation([o]),n.parent.element.querySelector(".e-gridpopup").style.display="none")})}},r.prototype.updateCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e),o=n.getColumnIndexByField(e);if(s&&!s.isPrimaryKey&&s.allowEditing){var a=VG(this.parent,s,t,o),l="movable"===s.getFreezeTableName()?this.parent.getMovableRowsObject()[t]:s.getFreezeTableName()===dr?n.getFrozenRightRowsObject()[t]:n.getRowObjectFromUID(a.parentElement.getAttribute("data-uid"));this.refreshTD(a,s,l,i),this.parent.trigger(R8,{cell:this.newReactTd||a,column:s,data:l.changes})}},r.prototype.setChanges=function(t,e,i){var n;if(this.parent.isFrozenGrid()){var o=this.parent.getRowElementByUID(t.uid),a=parseInt(o.getAttribute(ki),10);(n=this.parent.getRowsObject()[a]).changes||(n.changes=de({},{},t.data,!0)),f(e)||jt(e,i,n.changes);var l=this.parent.getMovableRowsObject()[a];if(l.changes=de({},{},n.changes,!0),t.data[e]!==i&&(l.isDirty=!0,n.isDirty=!0),this.parent.getFrozenMode()===Jt){var h=this.parent.getFrozenRightRowsObject()[a];h.changes=de({},{},n.changes,!0),t.data[e]!==i&&(h.isDirty=!0)}}else if(t.changes||(t.changes=de({},{},t.data,!0)),f(e)||Ye.setValue(e,i,t.changes),t.data[e]!==i){var s=this.parent.getColumnByField(e).type;"date"===s||"datetime"===s?new Date(t.data[e]).toString()!==new Date(i).toString()&&(t.isDirty=!0):t.isDirty=!0}},r.prototype.updateRow=function(t,e){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];this.updateCell(t,o,e[o])}},r.prototype.getCellIdx=function(t){var e=this.parent.getColumnIndexByUid(t)+this.parent.groupSettings.columns.length;return(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&e++,this.parent.isRowDragable()&&e++,e},r.prototype.refreshTD=function(t,e,i,n){var o,s=new fh(this.parent,this.serviceLocator);n="number"!==e.type||f(n)?n:parseFloat(n),this.setChanges(i,e.field,n);var l,h,a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a=a&&this.parent.isRowDragable()?a+1:a,qV(i,this.parent.getForeignKeyColumns(),i.changes),o=a&&"movable"===e.getFreezeTableName()&&this.parent.getColumns().length===i.cells.length?i.cells.slice(a,i.cells.length):i.cells,this.parent.isReact&&(l=t.parentElement,h=t.cellIndex);var u=0;a&&(u="movable"===e.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?a:e.getFreezeTableName()===dr?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():u),s.refreshTD(t,o[this.getCellIdx(e.uid)-u],i.changes,{index:this.getCellIdx(e.uid)}),this.parent.isReact?(this.newReactTd=l.cells[h],l.cells[h].classList.add("e-updatedtd")):t.classList.add("e-updatedtd"),t.classList.add("e-updatedtd"),this.parent.notify(_v,{})},r.prototype.getColIndex=function(t,e){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&i++,this.parent.isRowDragable()&&i++;for(var n=0;n<t.length;n++)if(parseInt(t[n].getAttribute(Ys),10)===e-i)return n;return-1},r.prototype.editNextValCell=function(){var t=this.parent,e=t.element.querySelectorAll(".e-insertedrow"),i=1===e.length||(t.getFrozenColumns()>0||t.getFrozenRightColumnsCount()>0||t.getFrozenLeftColumnsCount()>0)&&(2===e.length||3===e.length);if(i&&this.isAdded&&!t.isEdit){for(var n=this.getBottomIndex(),s=this.cellDetails.cellIndex;s<t.getColumns().length;s++){if(t.isEdit)return;var o=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),a=t.getColumns()[o];if(a){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(n,a.field,!0);else{var l={index:0,column:a};this.parent.notify("next-cell-index",l),this.editCell(l.index,a.field,!0)}this.saveCell()}}t.isEdit||(this.isAdded=!1)}else if(i||!this.isAdded||t.isEdit||t.isFrozenGrid()){if(!i&&this.isAdded&&!t.isEdit&&t.isFrozenGrid()){var m=t.getFrozenLeftContentTbody()?t.getFrozenLeftContentTbody().querySelectorAll(".e-insertedrow"):void 0,y=t.getFrozenRightContentTbody()?t.getFrozenRightContentTbody().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableContentTbody().querySelectorAll(".e-insertedrow"),S=(h=0,t.getVisibleFrozenLeftCount()?t.getVisibleFrozenLeftCount():t.getFrozenColumns()),I=t.getVisibleFrozenRightCount(),k=t.getVisibleMovableCount();for("Bottom"===t.editSettings.newRowPosition?(u=this.getBatchChanges(),h=t.getCurrentViewRecords().length-u[Jb].length):"Top"===t.editSettings.newRowPosition&&t.frozenRows&&(m=t.getFrozenHeaderTbody()?t.getFrozenHeaderTbody().querySelectorAll(".e-insertedrow"):void 0,y=t.getFrozenRightHeader()?t.getFrozenRightHeader().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableHeaderTbody().querySelectorAll(".e-insertedrow")),s=0;s<C.length&&!t.isEdit;s++,h++)for(d=0;d<this.validationColObj.length&&!t.isEdit;d++)S&&this.validationColObj[d].cellIdx<S?""===m[s].querySelectorAll("td")[this.validationColObj[d].cellIdx].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell()):I&&k<=this.validationColObj[d].cellIdx?""===y[s].querySelectorAll("td")[this.validationColObj[d].cellIdx-(k+S)].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell()):""===C[s].querySelectorAll("td")[this.validationColObj[d].cellIdx-S].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell());t.isEdit||(this.isAdded=!1)}}else{var h=0;if("Bottom"===t.editSettings.newRowPosition){var u=this.getBatchChanges();h=t.getCurrentViewRecords().length-u[Jb].length}for(s=0;s<e.length&&!t.isEdit;s++,h++)for(var d=0;d<this.validationColObj.length&&!t.isEdit;d++)""===e[s].querySelectorAll("td")[this.validationColObj[d].cellIdx].innerText&&(this.editCell(h,this.validationColObj[d].field),this.validateFormObj()&&this.saveCell());t.isEdit||(this.isAdded=!1)}},r.prototype.escapeCellEdit=function(){var t=this.generateCellArgs();t.value=t.previousValue,(t.value||!this.cellDetails.column.validationRules)&&this.successCallBack(t,t.cell.parentElement,t.column,!0)(t)},r.prototype.generateCellArgs=function(){var t=this.parent;this.parent.element.classList.remove("e-editing");var e=this.cellDetails.column,i={};i[e.field]=xs(e.field,this.cellDetails.rowData);var n=t.editModule.getCurrentEditedData(this.form,i),s=de({},n);n=de({},n,this.cellDetails.rowData);var o=xs(e.field,s);!f(e.field)&&!$t(o)&&jt(e.field,o,n);var a={columnName:e.field,value:xs(e.field,n),rowData:this.cellDetails.rowData,column:e,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return a.cell=this.form.parentElement,a.columnObject=e,a},r.prototype.saveCell=function(t){if(!this.preventSaveCell&&this.form){var e=this.parent;if(t||e.isEdit&&!this.validateFormObj()){this.preventSaveCell=!0;var i=this.generateCellArgs(),n=i.cell.parentElement,s=i.column;t?this.successCallBack(i,n,s)(i):(e.trigger("cellSave",i,this.successCallBack(i,n,s)),e.notify("batchedit-form",{formObj:this.form}))}}},r.prototype.successCallBack=function(t,e,i,n){var s=this;return function(o){var a=s.parent;if(o.cell=o.cell?o.cell:s.form.parentElement,o.columnObject=o.columnObject?o.columnObject:i,o.columnObject.index=f(o.columnObject.index)?0:o.columnObject.index,o.cancel){if(s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;s.editCellExtend(s.index,s.field,s.isAdd)}}else{a.editModule.destroyWidgets([i]),a.isEdit=!1,a.editModule.destroyForm(),s.parent.notify(nS,{});var l=me(o.cell,Gn)||me(o.cell,nr)?a.getRowObjectFromUID(e.getAttribute("data-uid"),!0):a.getRowObjectFromUID(e.getAttribute("data-uid"));if(a.getFrozenMode()===Jt&&(me(o.cell,"e-frozen-right-header")||me(o.cell,"e-frozen-right-content"))&&(l=a.getRowObjectFromUID(e.getAttribute("data-uid"),!1,!0)),s.refreshTD(o.cell,i,l,o.value),s.parent.isReact&&(o.cell=s.newReactTd),z([e],[qa,"e-batchrow"]),z([o.cell],["e-editedbatchcell","e-boolcell"]),(!f(o.value)&&o.value.toString()===(f(s.cellDetails.value)?"":s.cellDetails.value).toString()&&!s.isColored||f(o.value)&&f(l.data[i.field])&&f(s.cellDetails.value)&&!o.cell.parentElement.classList.contains("e-insertedrow"))&&o.cell.classList.remove("e-updatedtd"),f(n)&&a.trigger("cellSaved",o),a.notify(_v,{}),s.isColored=!1,s.parent.aggregates.length>0&&(s.parent.notify(Av,{}),s.parent.groupSettings.columns.length>0&&!s.isAddRow(s.cellDetails.rowIndex)&&s.parent.notify(Zb,{})),s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;var h=a.getColumnByField(s.field);h&&h.allowEditing&&s.editCellExtend(s.index,s.field,s.isAdd)}n&&a.notify(rS,{})}}},r.prototype.getDataByIndex=function(t){var e=this.parent.getRowObjectFromUID(this.parent.getDataRows()[t].getAttribute("data-uid"));return e.changes?e.changes:e.data},r.prototype.keyDownHandler=function(t){if(("tab"===t.action||"shiftTab"===t.action)&&this.parent.isEdit){var e=this.parent,i=this.getBottomIndex(),n=me(t.target,on);if(n){var s=n.querySelector(".e-field");if(s){var o=this.parent.getVisibleColumns();o["tab"===t.action?o.length-1:0].field===s.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===t.action?"Top"===e.editSettings.newRowPosition?(e.editSettings.newRowPosition="Bottom",this.addRecord(),e.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}},r.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(j8,{}),this.parent.isEdit=!1,this.isColored=!1)},r.prototype.getBottomIndex=function(){var t=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+t[Pf].length-t[Jb].length-1},r}(),xAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),DAe=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return xAe(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(Ioe),IAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_oe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return IAe(t,r),t.prototype.write=function(e){this.edit=this.parent.editModule,"datepickeredit"===e.column.editType?this.obj=new GH(de(koe(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new m8(de(koe(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params))),this.obj.appendTo(e.element)},t}(Vg);function koe(r,t,e,i,n){var s="Dialog"!==t,o=function KV(r,t){var n="format",s="type";return(new qr).getDatePattern("date"===t?"object"==typeof r?{type:r[s]?r[s]:"date",format:r[n]}:{type:"dateTime",skeleton:r}:"object"==typeof r?{type:r[s]?r[s]:"dateTime",format:r[n]}:{type:"dateTime",skeleton:r},!1)}(r.column.format,r.column.type),a=xs(r.column.field,r.rowData);return{floatLabelType:s?"Never":"Always",value:a=a?new Date(a):null,format:o,placeholder:s?"":r.column.headerText,enableRtl:e,enabled:Bg(r.column,r.requestType,r.element),cssClass:i||null,close:AAe.bind(n)}}function AAe(r){r.event&&"escape"===r.event.action&&(this.edit.editCellDialogClose=!0)}var _Ae=function(){function r(t){this.parent=t}return r.prototype.read=function(t,e){return e},r.prototype.write=function(){},r.prototype.destroy=function(){},r}(),kAe=function(){function r(t,e){this.editType={Inline:Aoe,Normal:Aoe,Batch:TAe,Dialog:DAe},this.editCellDialogClose=!1,this.parent=t,this.serviceLocator=e,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return r.prototype.updateColTypeObj=function(){for(var t=this.parent.columnModel,e=0;e<t.length;e++)t[e].edit=de(this.parent.editSettings.template||t[e].editTemplate?new r.editCellType.templateedit(this.parent):new r.editCellType[t[e].editType&&r.editCellType[t[e].editType]?t[e].editType:"defaultedit"](this.parent,this.serviceLocator),t[e].edit||{});this.parent.log("primary_column_missing")},r.prototype.getModuleName=function(){return"edit"},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=this.parent,i=0,n=Object.keys(t.properties);i<n.length;i++)switch(n[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(e.editSettings.allowAdding||e.editSettings.allowEditing||e.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),e.isEdit=!1,e.refresh()}},r.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new gAe(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},r.prototype.initialEnd=function(){this.updateColTypeObj()},r.prototype.startEdit=function(t){var e=this.parent;if(e.editSettings.allowEditing&&!e.isEdit&&"Batch"!==e.editSettings.mode){if(this.parent.element.classList.add("e-editing"),e.getSelectedRows().length)t||(t=e.getSelectedRows()[0]);else if(!t)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=t.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==t.style.display&&(this.editModule.startEdit(t),this.refreshToolbar(),e.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}},r.prototype.checkLastRow=function(t,e){var i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&e&&"add"===e.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?N([].slice.call(t.getElementsByClassName(on)),"e-lastrowadded"):i&&t&&t.classList&&N([].slice.call(t.getElementsByClassName(on)),"e-lastrowcell")},r.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(Rse,{}))},r.prototype.refreshToolbar=function(){this.parent.notify(_v,{})},r.prototype.addRecord=function(t,e){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};t||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(t,e),this.refreshToolbar(),this.parent.notify("start-add",{}))}},r.prototype.deleteRecord=function(t,e){var i=this.parent;if(i.editSettings.allowDeleting){if(!e&&!i.getSelectedRecords().length&&f(i.commandDelIndex))return void this.showDialog("DeleteOperationAlert",this.alertDObj);if(i.editSettings.showDeleteConfirmDialog)return void this.showDialog("ConfirmDelete",this.dialogObj);this.editModule.deleteRecord(t,e)}},r.prototype.deleteRow=function(t){this.deleteRowUid=t.getAttribute("data-uid");var e=this.parent.getRowObjectFromUID(this.deleteRowUid);f(e)||this.deleteRecord(null,e.data)},r.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(f(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(EV,{}),f(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},r.prototype.updateCell=function(t,e,i){this.editModule.updateCell(t,e,i)},r.prototype.updateRow=function(t,e){this.editModule.updateRow(t,e)},r.prototype.batchCancel=function(){this.closeEdit()},r.prototype.batchSave=function(){this.endEdit()},r.prototype.editCell=function(t,e){this.editModule.editCell(t,e)},r.prototype.editFormValidate=function(){var t=!this.formObj||this.formObj.validate(),e=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return t&&e&&i},r.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},r.prototype.getCurrentEditCellData=function(){var t=this.getCurrentEditedData(this.formObj.element,{});return t[Object.keys(t)[0]]},r.prototype.saveCell=function(){this.editModule.saveCell()},r.prototype.endEditing=function(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()},r.prototype.showDialog=function(t,e){e.content="<div>"+this.l10n.getConstant(t)+"</div>",e.dataBind(),e.show()},r.prototype.getValueFromType=function(t,e){var i=e;switch(t.type){case"number":i=isNaN(parseFloat(e))?null:parseFloat(e);break;case"boolean":"booleanedit"!==t.editType&&(i=e===this.l10n.getConstant("True")||!0===e);break;case"date":case"datetime":"datepickeredit"!==t.editType&&"datetimepickeredit"!==t.editType&&e&&e.length?i=new Date(e):""===e&&(i=null)}return i},r.prototype.destroyToolTip=function(){for(var e=0,i=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));e<i.length;e++)He(i[e]);this.parent.getContent().firstElementChild.style.position="relative"},r.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},r.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},r.prototype.alertClick=function(){this.alertDObj.hide()},r.prototype.dlgWidget=function(t,e){var i=this.parent.createElement("div",{id:this.parent.element.id+e});this.parent.element.appendChild(i);var n={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""};n.buttons=t;var s=new Hd(n);return s.isStringTemplate=!0,s.appendTo(i),s},r.prototype.dlgCancel=function(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide(),this.parent.notify("cancelcnfrmDlg",{})},r.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()},r.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:Wa,handler:this.onPropertyChanged},{event:Ua,handler:this.initialEnd},{event:_s,handler:this.keyPressHandler},{event:iS,handler:this.updateColTypeObj},{event:nS,handler:this.destroyToolTip},{event:lu,handler:this.preventBatch},{event:j8,handler:this.destroyForm},{event:gn,handler:this.destroyEditComponents}],wo(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(mr,this.actionBeginFunction),this.parent.addEventListener(Ui,this.actionCompleteFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(wo(this.parent,this.eventDetails,!1),this.parent.removeEventListener(Ui,this.actionCompleteFunction),this.parent.removeEventListener(mr,this.actionBeginFunction))},r.prototype.actionComplete=function(t){["add","beginEdit","save","delete","cancel"].indexOf(t.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===t.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},r.prototype.getCurrentEditedData=function(t,e){var i=this.parent;if(i.editSettings.template){for(var n=[].slice.call(t.elements),s=0;s<n.length;s++)if((n[s].hasAttribute("name")&&"e-multi-hidden"!==n[s].className||n[s].classList.contains("e-multiselect"))&&("hidden"!==n[s].type||!me(n[s],"e-switch-wrapper")&&!me(n[s],"e-checkbox-wrapper"))){var o=n[s].hasAttribute("name")?WV(n[s].getAttribute("name")):WV(n[s].getAttribute("id")),a=i.getColumnByField(o)||{field:o,type:n[s].getAttribute("type")},l=void 0;"checkbox"===a.type||"boolean"===a.type?l=n[s].checked:n[s].value?(l=n[s].value,n[s].ej2_instances&&n[s].ej2_instances.length&&!f(n[s].ej2_instances[0].value)&&(n[s].blur(),l=n[s].ej2_instances[0].value)):n[s].ej2_instances&&(l=n[s].ej2_instances[0].value),a.edit&&"string"==typeof a.edit.read?l=ie(a.edit.read,window)(n[s],l):a.edit&&a.edit.read&&(l=a.edit.read(n[s],l)),l=i.editModule.getValueFromType(a,l),"radio"===n[s].type?n[s].checked&&Ye.setValue(a.field,l,e):Ye.setValue(a.field,l,e)}return e}for(var h=i.columnModel.filter(function(k){return k.editTemplate}),u=0;u<h.length;u++)if(t[Lo(h[u].field)]){var d=[].slice.call(t[Lo(h[u].field)]),m=(d=d.length?d:[t[Lo(h[u].field)]]).filter(function(k){return!f(k.ej2_instances)});for(0===m.length&&(m=d.filter(function(k){return k.hasAttribute("name")})),s=0;s<m.length;s++)l=this.getValue(h[u],m[s],e),Ye.setValue(h[u].field,l,e)}for(var y=[].slice.call(t.getElementsByClassName("e-field")),C=0,S=y.length;C<S;C++){var I=i.getColumnByUid(y[C].getAttribute("e-mappinguid"));I&&I.field&&(l=this.getValue(I,y[C],e),Ye.setValue(I.field,l,e))}return e},r.prototype.getValue=function(t,e,i){var n=e.ej2_instances?e.ej2_instances[0].value:e.value,s=this.parent,o=t.edit.read;return("checkbox"===t.type||"boolean"===t.type)&&(n=e.checked),"string"==typeof o?(o=ie(o,window),n=s.editModule.getValueFromType(t,o(e,n))):n=s.editModule.getValueFromType(t,t.edit.read(e,n)),f(i[t.field])&&""===n&&(n=i[t.field]),n},r.prototype.onActionBegin=function(t){if("columnstate"===t.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{var e=this.parent.element.querySelector("."+qa),i=this.parent.element.querySelector("."+Ul);if(e&&this.parent.frozenRows&&"virtualscroll"===t.requestType&&parseInt(me(e,Sn).getAttribute(ki),10)<this.parent.frozenRows)return;var s=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(t.requestType);(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&s&&!t.cancel||this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(e||i||"cancel"===t.requestType)&&s)&&(this.destroyWidgets(),this.destroyForm())}},r.prototype.destroyWidgets=function(t){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(t=t||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(function(h){return!f(h.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(var i=0,n=t;i<n.length;i++){var s=n[i],o=s.edit.destroy;s.edit.destroy&&("string"==typeof o?(o=ie(o,window))():s.edit.destroy())}for(var a=[].slice.call(this.formObj.element.elements),l=0;l<a.length;l++)a[l].hasAttribute("name")&&a[l].ej2_instances&&a[l].ej2_instances.length&&!a[l].ej2_instances[0].isDestroyed&&a[l].ej2_instances[0].destroy()},r.prototype.destroyForm=function(){this.destroyToolTip();for(var t=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj],e=0;e<t.length;e++)t[e]&&t[e].element&&!t[e].isDestroyed&&t[e].destroy();this.destroyToolTip()},r.prototype.destroy=function(){var t=this.parent.element;if(t){var e=!(!t.querySelector("."+$s)||!t.querySelector("."+zs));e&&this.destroyForm(),this.removeEventListener();var i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),He(i)),(i=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),He(i)),e&&this.editModule&&this.editModule.destroy()}},r.prototype.keyPressHandler=function(t){switch(t.action){case"insert":this.addRecord();break;case"delete":("INPUT"!==t.target.tagName||t.target.classList.contains("e-checkselect"))&&!document.querySelector(".e-popup-open.e-edit-dialog")&&this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!me(t.target,"e-unboundcelldiv")&&"Batch"!==this.parent.editSettings.mode&&(me(t.target,zs)||this.parent.frozenRows&&me(t.target,js))&&!document.getElementsByClassName("e-popup-open").length&&(t.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.curretRowFocus(t)),this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(t)}},r.prototype.curretRowFocus=function(t){if(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode){var e=me(t.target,"e-editedrow")||me(t.target,"e-addedrow");if(e){var i=e.classList.contains("e-addedrow")?"e-addedrow":"e-editedrow",n=[].slice.call(e.querySelectorAll(".e-input:not(.e-disabled)")),s=[].slice.call(e.querySelectorAll(".e-unboundcell"));if(s)for(var o=0;o<s.length;o++)n=n.concat([].slice.call(s[o].querySelectorAll(".e-btn:not(.e-hide)")));if(this.parent.isFrozenGrid())if(f(this.parent.frozenRows)||f(me(t.target,"e-frozenheader"))&&f(me(t.target,"e-movableheader"))){var h=this.parent.getContent().querySelector(".e-movablecontent ."+i);if(n.push.apply(n,[].slice.call(h.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var u=this.parent.getContent().querySelector(".e-frozen-right-content ."+i);n.push.apply(n,[].slice.call(u.querySelectorAll(".e-input:not(.e-disabled)")))}}else{var a=this.parent.getHeaderContent().querySelector(".e-movableheader ."+i);if(n.push.apply(n,[].slice.call(a.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var l=this.parent.getHeaderContent().querySelector(".e-frozen-right-header ."+i);n.push.apply(n,[].slice.call(l.querySelectorAll(".e-input:not(.e-disabled)")))}}var d=me(t.target,"e-rowcell");if(d===me(n[n.length-1],"e-rowcell")&&"tab"===t.action&&!d.classList.contains("e-unboundcell")||d===me(n[0],"e-rowcell")&&"shiftTab"===t.action||"escape"===t.action){var m=e.getAttribute("data-uid"),y=this.parent.getRows();("Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode())&&(y=this.parent.getFrozenRightRows()),(this.parent.getFrozenColumns()||"Left"===this.parent.getFrozenMode())&&(y=this.parent.getMovableRows());var C=y.map(function(S){return S.getAttribute("data-uid")}).indexOf(m);this.parent.frozenRows&&me(e,"e-content")&&(C-=this.parent.frozenRows),e.classList.contains("e-addedrow")&&(C=0),"escape"===t.action?this.closeEdit():this.endEdit(),this.parent.focusModule.active&&(this.parent.focusModule.active.matrix.current=[C,0])}}}},r.prototype.preventBatch=function(t){this.preventObj=t,this.showDialog("BatchSaveLostChanges",this.dialogObj)},r.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},r.prototype.applyFormValidation=function(t){var e=this.parent,i=e.isFrozenGrid(),n="Normal"===this.parent.editSettings.mode,s="Right"===this.parent.getFrozenMode()&&n?1:0,o="Dialog"!==this.parent.editSettings.mode?e.element.getElementsByClassName("e-gridform")[s]:le("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document),a="Right"===this.parent.getFrozenMode()&&n?0:1,l=e.element.getElementsByClassName("e-gridform")[a],h={},u={},d={};t=t||e.getColumns();for(var m=0;m<t.length;m++)!t[m].visible&&("Dialog"!==e.editSettings.mode||-1===e.groupSettings.columns.indexOf(t[m].field)&&"Dialog"===e.editSettings.mode)||t[m].validationRules&&loe(t[m],a,h,u,d,t.length);if(i&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(l,u),this.parent.getFrozenMode()===Jt){var y=e.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(y,d)}}else h=de(h,u,d);this.parent.editModule.formObj=this.createFormObj(o,h)},r.prototype.createFormObj=function(t,e){var i=this;return new Yve(t,{rules:e,locale:this.parent.locale,validationComplete:function(n){i.validationComplete(n)},customPlacement:function(n,s){var o=n.getAttribute("e-mappinguid"),a={column:i.parent.getColumnByUid(o),error:s,inputElement:n,value:n.value};i.valErrorPlacement(n,s),i.parent.notify("validation-custom-placement",a)}})},r.prototype.valErrorPlacement=function(t,e){if(this.parent.isEdit){var i=e.getAttribute("for"),n=this.getElemTable(t).querySelector("#"+i+"_Error");n?n.querySelector(".e-tip-content").innerHTML=e.outerHTML:this.createTooltip(t,e,i,"")}},r.prototype.getElemTable=function(t){var e,n,i=this.parent;if("Dialog"!==i.editSettings.mode){e=i.frozenRows&&i.frozenRows>(parseInt(U(t,"."+Sn).getAttribute(ki),10)||0);var s=t.name,o=void 0;s&&(o=doe(this.parent,WV(s))),o&&i.isFrozenGrid()?"frozen-left"===o.getFreezeTableName()?n=e?i.getFrozenVirtualHeader().querySelector("table"):i.getFrozenVirtualContent().querySelector("table"):"frozen-right"===o.getFreezeTableName()?n=e?i.getFrozenRightHeader().querySelector("table"):i.getFrozenRightContent().querySelector("table"):"movable"===o.getFreezeTableName()&&(n=e?i.getMovableVirtualHeader().querySelector("table"):i.getMovableVirtualContent().querySelector("table")):n=e?i.getHeaderTable():i.getContentTable()}else n=le("#"+i.element.id+"_dialogEdit_wrapper",document);return n},r.prototype.resetElemPosition=function(t,e){var i=me(e.element,on);if(i){var n=i.getBoundingClientRect().right,s=t.getBoundingClientRect().right;s>n&&(t.style.left=t.offsetLeft-(s-n)+"px")}},r.prototype.validationComplete=function(t){if(this.parent.isEdit){var e=this.getElemTable(t.element).querySelector("#"+t.inputName+"_Error");e&&("failure"===t.status?(e.style.display="",this.resetElemPosition(e,t)):e.style.display="none")}},r.prototype.createTooltip=function(t,e,i,n){var s=this.parent.getColumnByField(i),o=this.parent.getFrozenMode()===Jt&&"Normal"===this.parent.editSettings.mode&&s.getFreezeTableName()===dr?this.frFormObj.element:this.formObj.element,a=me(t,"e-virtual-validation");a&&(o=this.virtualFormObj.element);var l=this.parent.getContent().firstElementChild,h=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();h&&(l=this.parent.getMovableVirtualContent());var S,k,u=l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth,d="Dialog"!==this.parent.editSettings.mode,m=U(t,"."+on),y=U(t,"."+Sn),C=this.parent.getContent().querySelector("."+nc),I=!1,O=!1,L=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,B=[].slice.call(C?this.parent.getFrozenVirtualContent().getElementsByClassName(Sn):this.parent.getContent().getElementsByClassName(Sn));if("Batch"===this.parent.editSettings.mode&&L>1&&B.length>=L&&B[B.length-1].getAttribute(ki)===y.getAttribute(ki)&&(O=!0),d){if(this.parent.frozenRows){var j=h?this.parent.getFrozenVirtualHeader().querySelector(lt).children:this.parent.getHeaderTable().querySelector(lt).children;I=(S=j.length>(parseInt(y.getAttribute(ki),10)||0))&&parseInt(y.getAttribute(ki),10)===j.length-1}(I||L>1&&B.length>=L&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||m.classList.contains("e-lastrowcell")&&!y.classList.contains(Ul))||O)&&(k=!0)}var G=d?S?this.parent.getHeaderTable():this.parent.getContentTable():le("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),ae=G.getBoundingClientRect(),ve=d?this.parent.element.getBoundingClientRect().left:ae.left,xe=U(t,"td"),Le=xe?xe.getBoundingClientRect():t.parentElement.getBoundingClientRect(),oe=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+n+";top:"+((S?Le.top+Le.height:Le.bottom-ae.top-(h?C.scrollTop:0))+G.scrollTop+9)+"px;left:"+(Le.left-ve+G.scrollLeft+Le.width/2)+"px;max-width:"+Le.width+"px;text-align:center;"});this.parent.cssClass&&oe.classList.add(this.parent.cssClass),d&&ae.left<ve&&(oe.style.left=parseInt(oe.style.left,10)-ae.left+ve+"px");var De,Ae=this.parent.createElement("div",{className:"e-tip-content"});if(Ae.appendChild(e),k?((De=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),De.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((De=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),De.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),oe.appendChild(Ae),oe.appendChild(De),a||!h&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?a?this.virtualFormObj.element.appendChild(oe):this.formObj.element.appendChild(oe):(U(t,"Normal"===this.parent.editSettings.mode?".e-editcell":"."+cr).style.position=0===this.parent.currentViewData.length&&U(t,"."+Gn)?"absolute":"relative",oe.style.position="absolute","Batch"===this.parent.editSettings.mode||U(t,"."+nc)||U(t,"."+rp)||this.parent.frozenRows&&!h?o.appendChild(oe):this.mFormObj.element.appendChild(oe)),!k&&d&&l.getBoundingClientRect().bottom<Le.bottom+Le.height){var Re=this.parent.getContent().querySelector(".e-content");h&&0===this.parent.currentViewData.length&&0===Re.scrollTop?Re.scrollTop=oe.offsetHeight+De.scrollHeight:l.scrollTop=l.scrollTop+oe.offsetHeight+De.scrollHeight}var We=parseInt(document.defaultView.getComputedStyle(oe,null).getPropertyValue("font-size"),10);if(oe.getBoundingClientRect().width<Le.width&&oe.querySelector("label").getBoundingClientRect().height/(1.2*We)>=2&&(oe.style.width=oe.style.maxWidth),oe.style.left=(h||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?xe.offsetLeft+(xe.offsetWidth/2-oe.offsetWidth/2)+"px":parseInt(oe.style.left,10)-oe.offsetWidth/2+"px",d&&!u&&!this.parent.allowPaging||h||this.parent.frozenRows){l.style.position="static";var Se=YT(xe,oe);oe.style.top=Se.top+Le.height+9+"px"}if(k){if(!u||h||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)oe.style.bottom=Le.height+9+"px";else{var Oe=l.scrollWidth>l.offsetWidth?tC():0;oe.style.bottom=this.parent.height-l.querySelector("table").offsetHeight-Oe+Le.height+9+"px"}if(B.length<L&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){var Gt=(this.parent.frozenRows?this.parent.frozenRows+(B.length-1):B.length-1)*this.parent.getRowHeight(),Yt=this.parent.getContent().clientHeight-Gt;oe.style.bottom=Yt+9+"px"}oe.style.top=null}},r.prototype.checkColumnIsGrouped=function(t){return!(t.visible||this.parent.groupSettings.columns.indexOf(t.field)>-1)},r.AddEditors=function(t){r.editCellType=de(r.editCellType,t)},r.editCellType={dropdownedit:bAe,numericedit:CAe,datepickeredit:_oe,datetimepickeredit:_oe,booleanedit:vAe,defaultedit:SAe,templateedit:_Ae},r}(),WAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qAe=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.parent=e,n.serviceLocator=i,n.initEvent(),n}return WAe(t,r),t.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(q8,this.initForeignKeyColumns,this),this.parent.on(wV,this.getForeignKeyData,this),this.parent.on(tD,this.generateQueryFormData,this))},t.prototype.initForeignKeyColumns=function(e){for(var i=0;i<e.length;i++)e[i].dataSource=e[i].dataSource instanceof Je?e[i].dataSource:f(e[i].dataSource)?new Je:"result"in e[i].dataSource?e[i].dataSource:new Je(e[i].dataSource)},t.prototype.eventfPromise=function(e,i,n,s){var o=this.getStateEventArgument(i),a=new fl,l=new fl;o.action=e.action;var h=this.parent.getDataModule();return!f(e.action)&&e.action.requestType&&!1!==h.foreignKeyDataState.isDataChanged?(h.setForeignKeyDataState({isPending:!0,resolver:l.resolve}),l.promise.then(function(){a.resolve(s.dataSource)}),o.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger("columnDataStateChange",o)):(h.setForeignKeyDataState({}),a.resolve(n)),a},t.prototype.getForeignKeyData=function(e){for(var i=this,n=e.column?[e.column]:this.parent.getForeignKeyColumns(),s=[],o=function(h){var u=void 0,d=e.isComplex?a.genarateColumnQuery(n[h]):a.genarateQuery(n[h],e.result.result,!1,!0);d.params=a.parent.query.params;var m=n[h].dataSource;u=m&&"result"in m?a.eventfPromise(e,d,m,n[h]).promise:!m.ready||m.dataSource.offline?m.executeQuery(d):m.ready.then(function(){return m.executeQuery(d)}),s.push(u)},a=this,l=0;l<n.length;l++)o(l);Promise.all(s).then(function(h){for(var u=0;u<h.length;u++)n[u].columnData=h[u].result,"dropdownedit"===n[u].editType&&"result"in n[u].dataSource&&(n[u].edit.params=de(n[u].edit.params,{dataSource:h[u].result,query:new si,fields:{value:n[u].foreignKeyField||n[u].field,text:n[u].foreignKeyValue}}));e.promise.resolve(e.result)}).catch(function(h){return i.parent.log(["actionfailure","foreign_key_failure"]),e.promise&&e.promise.reject&&e.promise.reject(h),h})},t.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},t.prototype.genarateQuery=function(e,i,n,s){var o=this.parent,a=[],l=new si,h=n?e.foreignKeyField:e.field;if(o.allowPaging||o.enableVirtualization||n){i=new Je(o.allowGrouping&&o.groupSettings.columns.length&&!n?i.records:i).executeLocal((new si).select(h));var u=Ye.distinct(i,h,!1);h=n?e.field:e.foreignKeyField;for(var d=0;d<u.length;d++)a.push(u[d]&&u[d].getDay?nC({field:h,operator:"equal",value:u[d],matchCase:!1}):new kn(h,"equal",u[d],!1))}return s?a.length?l.where(kn.or(a)):l:a.length?kn.or(a):{predicates:[]}},t.prototype.genarateColumnQuery=function(e){var i=this.parent,n=new si,s=this.isFiltered(e);if(s.isTrue&&(n=this.filterQuery(n,s.column,!0)),i.searchSettings.key.length){var o=i.searchSettings;e.dataSource instanceof Je&&e.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===e.dataSource.adaptor.getModuleName()?n=this.searchQuery(n,e,!0):n.search(o.key,e.foreignKeyValue,o.operator,o.ignoreCase)}return n},t.prototype.isFiltered=function(e){var i=this.parent.filterSettings.columns.filter(function(n){return n.field===e.foreignKeyValue&&n.uid===e.uid});return{column:i,isTrue:!!i.length}},t.prototype.getModuleName=function(){return"foreignKey"},t.prototype.destroy=function(){this.destroyEvent()},t.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(q8,this.initForeignKeyColumns),this.parent.off(wV,this.getForeignKeyData),this.parent.off(tD,this.generateQueryFormData))},t}(PV);const Goe=["template"],Koe=["headerTemplate"],$oe=["commandsTemplate"],Yoe=["filterItemTemplate"],Zoe=["editTemplate"],Xoe=["filterTemplate"],s_e=["footerTemplate"],o_e=["groupFooterTemplate"],a_e=["groupCaptionTemplate"],l_e=["rowTemplate"],h_e=["detailTemplate"],u_e=["toolbarTemplate"],c_e=["pagerTemplate"],d_e=["editSettingsTemplate"],p_e=["groupSettingsCaptionTemplate"];let f_e=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],g_e=[],m_e=(()=>{class r extends sw{constructor(e){super(),this.viewContainerRef=e,th("currentInstance",this,this.viewContainerRef),this.registerEvents(g_e),this.directivePropList=f_e}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-stacked-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,Goe,5),v.Suo(n,Koe,5),v.Suo(n,$oe,5),v.Suo(n,Yoe,5),v.Suo(n,Zoe,5),v.Suo(n,Xoe,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.template=s.first),v.iGM(s=v.CRH())&&(i.headerTemplate=s.first),v.iGM(s=v.CRH())&&(i.commandsTemplate=s.first),v.iGM(s=v.CRH())&&(i.filter_itemTemplate=s.first),v.iGM(s=v.CRH())&&(i.editTemplate=s.first),v.iGM(s=v.CRH())&&(i.filterTemplate=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[v.qOj]}),(0,zi.gn)([yn()],r.prototype,"template",void 0),(0,zi.gn)([yn()],r.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"commandsTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"filter_itemTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"editTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"filterTemplate",void 0),r})(),v_e=(()=>{class r extends ow{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-stacked-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,m_e,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),y_e=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],b_e=[],oL=(()=>{class r extends sw{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],th("currentInstance",this,this.viewContainerRef),this.registerEvents(b_e),this.directivePropList=y_e}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,Goe,5),v.Suo(n,Koe,5),v.Suo(n,$oe,5),v.Suo(n,Yoe,5),v.Suo(n,Zoe,5),v.Suo(n,Xoe,5),v.Suo(n,v_e,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.template=s.first),v.iGM(s=v.CRH())&&(i.headerTemplate=s.first),v.iGM(s=v.CRH())&&(i.commandsTemplate=s.first),v.iGM(s=v.CRH())&&(i.filter_itemTemplate=s.first),v.iGM(s=v.CRH())&&(i.editTemplate=s.first),v.iGM(s=v.CRH())&&(i.filterTemplate=s.first),v.iGM(s=v.CRH())&&(i.childColumns=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[v.qOj]}),(0,zi.gn)([yn()],r.prototype,"template",void 0),(0,zi.gn)([yn()],r.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"commandsTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"filter_itemTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"editTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"filterTemplate",void 0),r})(),aL=(()=>{class r extends ow{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,oL,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),C_e=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],w_e=[],lL=(()=>{class r extends sw{constructor(e){super(),this.viewContainerRef=e,th("currentInstance",this,this.viewContainerRef),this.registerEvents(w_e),this.directivePropList=C_e}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,s_e,5),v.Suo(n,o_e,5),v.Suo(n,a_e,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.footerTemplate=s.first),v.iGM(s=v.CRH())&&(i.groupFooterTemplate=s.first),v.iGM(s=v.CRH())&&(i.groupCaptionTemplate=s.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[v.qOj]}),(0,zi.gn)([yn()],r.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"groupFooterTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"groupCaptionTemplate",void 0),r})(),hL=(()=>{class r extends ow{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,lL,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),S_e=["columns"],E_e=[],T_e=(()=>{class r extends sw{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],th("currentInstance",this,this.viewContainerRef),this.registerEvents(E_e),this.directivePropList=S_e}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-aggregate"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,hL,5),2&e){let s;v.iGM(s=v.CRH())&&(i.childColumns=s.first)}},inputs:{columns:"columns"},features:[v.qOj]}),r})(),x_e=(()=>{class r extends ow{constructor(){super("aggregates")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-aggregates"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,T_e,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})();const D_e=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],I_e=["dataSource"];let s2=(()=>{let r=class extends zV{constructor(e,i,n,s){super(),this.ngEle=e,this.srenderer=i,this.viewContainerRef=n,this.injector=s,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let o=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}this.registerEvents(D_e),this.addTwoWay.call(this,I_e),th("currentInstance",this,this.viewContainerRef),this.context=new aa}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},r.\u0275cmp=v.Xpm({type:r,selectors:[["ejs-grid"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,l_e,5),v.Suo(n,h_e,5),v.Suo(n,u_e,5),v.Suo(n,c_e,5),v.Suo(n,d_e,5),v.Suo(n,p_e,5),v.Suo(n,aL,5),v.Suo(n,x_e,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.rowTemplate=s.first),v.iGM(s=v.CRH())&&(i.detailTemplate=s.first),v.iGM(s=v.CRH())&&(i.toolbarTemplate=s.first),v.iGM(s=v.CRH())&&(i.pagerTemplate=s.first),v.iGM(s=v.CRH())&&(i.editSettings_template=s.first),v.iGM(s=v.CRH())&&(i.groupSettings_captionTemplate=s.first),v.iGM(s=v.CRH())&&(i.childColumns=s.first),v.iGM(s=v.CRH())&&(i.childAggregates=s.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",cssClass:"cssClass",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualMaskRow:"enableVirtualMaskRow",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",loadingIndicator:"loadingIndicator",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[v.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],r.prototype,"rowTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"detailTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"toolbarTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"pagerTemplate",void 0),(0,zi.gn)([yn()],r.prototype,"editSettings_template",void 0),(0,zi.gn)([yn()],r.prototype,"groupSettings_captionTemplate",void 0),r=(0,zi.gn)([Md([aa])],r),r})(),A_e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();const __e={provide:"GridsGroup",useValue:oC},o2={provide:"GridsToolbar",useValue:sAe},a2={provide:"GridsEdit",useValue:kAe},k_e={provide:"GridsForeignKey",useValue:qAe};let R_e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();var Ct=ne(5861);const Qoe="@firebase/database";let ZG="";function eae(r){ZG=r}class M_e{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,re.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,re.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class L_e{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,re.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const tae=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new M_e(t)}}catch{}return new L_e},gS=tae("localStorage"),XG=tae("sessionStorage"),cD=new Nu.Yd("@firebase/database"),iae=function(){let r=1;return function(){return r++}}(),nae=function(r){const t=(0,re.dS)(r),e=new re.gQ;e.update(t);const i=e.digest();return re.US.encodeByteArray(i)},uL=function(...r){let t="";for(let e=0;e<r.length;e++){const i=r[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=uL.apply(null,i):t+="object"==typeof i?(0,re.Wl)(i):i,t+=" "}return t};let mS=null,rae=!0;const sae=function(r,t){(0,re.hu)(!t||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(cD.logLevel=Nu.in.VERBOSE,mS=cD.log.bind(cD),t&&XG.set("logging_enabled",!0)):"function"==typeof r?mS=r:(mS=null,XG.remove("logging_enabled"))},Wl=function(...r){if(!0===rae&&(rae=!1,null===mS&&!0===XG.get("logging_enabled")&&sae(!0)),mS){const t=uL.apply(null,r);mS(t)}},cL=function(r){return function(...t){Wl(r,...t)}},QG=function(...r){const t="FIREBASE INTERNAL ERROR: "+uL(...r);cD.error(t)},zg=function(...r){const t=`FIREBASE FATAL ERROR: ${uL(...r)}`;throw cD.error(t),new Error(t)},Mh=function(...r){const t="FIREBASE WARNING: "+uL(...r);cD.warn(t)},l2=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},Ov="[MIN_NAME]",jg="[MAX_NAME]",vS=function(r,t){if(r===t)return 0;if(r===Ov||t===jg)return-1;if(t===Ov||r===jg)return 1;{const e=h2(r),i=h2(t);return null!==e?null!==i?e-i==0?r.length-t.length:e-i:-1:null!==i?1:r<t?-1:1}},F_e=function(r,t){return r===t?0:r<t?-1:1},dL=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+(0,re.Wl)(t))},JG=function(r){if("object"!=typeof r||null===r)return(0,re.Wl)(r);const t=[];for(const i in r)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,re.Wl)(t[i]),e+=":",e+=JG(r[t[i]]);return e+="}",e},oae=function(r,t){const e=r.length;if(e<=t)return[r];const i=[];for(let n=0;n<e;n+=t)i.push(r.substring(n,n+t>e?e:n+t));return i};function ql(r,t){for(const e in r)r.hasOwnProperty(e)&&t(e,r[e])}const aae=function(r){(0,re.hu)(!l2(r),"Invalid JSON number");const i=1023;let n,s,o,a,l;0===r?(s=0,o=0,n=1/r==-1/0?1:0):(n=r<0,(r=Math.abs(r))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(r)/Math.LN2),i),s=a+i,o=Math.round(r*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(r/Math.pow(2,-1074))));const h=[];for(l=52;l;l-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(n?1:0),h.reverse();const u=h.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},V_e=new RegExp("^-?(0*)\\d{1,10}$"),e7=2147483647,h2=function(r){if(V_e.test(r)){const t=Number(r);if(t>=-2147483648&&t<=e7)return t}return null},dD=function(r){try{r()}catch(t){setTimeout(()=>{throw Mh("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},pL=function(r,t){const e=setTimeout(r,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class j_e{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Mh(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class U_e{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(n=>this.auth_=n)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Wl("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Mh(t)}}let fL=(()=>{class r{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const pae=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vae="long_polling";class i7{constructor(t,e,i,n,s=!1,o="",a=!1){this.secure=e,this.namespace=i,this.webSocketOnly=n,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gS.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gS.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function yae(r,t,e){let i;if((0,re.hu)("string"==typeof t,"typeof type must == string"),(0,re.hu)("object"==typeof e,"typeof params must == object"),"websocket"===t)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(t!==vae)throw new Error("Unknown connection type: "+t);i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function W_e(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(e.ns=r.namespace);const n=[];return ql(e,(s,o)=>{n.push(s+"="+o)}),i+n.join("&")}class q_e{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,re.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,re.p$)(this.counters_)}}const n7={},r7={};function s7(r){const t=r.toString();return n7[t]||(n7[t]=new q_e),n7[t]}class K_e{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let n=0;n<i.length;++n)i[n]&&dD(()=>{this.onMessage_(i[n])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class aC{constructor(t,e,i,n,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=n,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=cL(t),this.stats_=s7(e),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),yae(e,vae,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new K_e(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if((0,re.Yr)()||"complete"===document.readyState)r();else{let t=!1;const e=function(){document.body?t||(t=!0,r()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new o7((...s)=>{const[o,a,l,h,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&pae.test(location.hostname)&&(i.r="f");const n=this.urlFn(i);this.log_("Connecting via long-poll to "+n),this.scriptTagHolder.addTag(n,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){aC.forceAllow_=!0}static forceDisallow(){aC.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!aC.forceAllow_&&(aC.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,re.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,re.h$)(e),n=oae(i,1840);for(let s=0;s<n.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,re.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class o7{constructor(t,e,i,n){if(this.onDisconnect=i,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=iae(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=o7.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Wl("frame writing exception"),a.stack&&Wl(a.stack),Wl(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Wl("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+n+"="+o.seg+"&ts"+n+"="+o.ts+"&d"+n+"="+o.d,n++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},n=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(n),i()})}addTag(t,e){(0,re.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const n=i.readyState;(!n||"loaded"===n||"complete"===n)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Wl("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let c2=null;typeof MozWebSocket<"u"?c2=MozWebSocket:typeof WebSocket<"u"&&(c2=WebSocket);let pD=(()=>{class r{constructor(e,i,n,s,o,a,l){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=cL(this.connId),this.stats_=s7(i),this.connURL=r.connectionURL_(i,a,l,s,n),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,s,o){const a={v:"5"};return!(0,re.Yr)()&&typeof location<"u"&&location.hostname&&pae.test(location.hostname)&&(a.r="f"),i&&(a.s=i),n&&(a.ls=n),s&&(a.ac=s),o&&(a.p=o),yae(e,"websocket",a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gS.set("previous_websocket_failure",!0);try{let n;if((0,re.Yr)()){n={headers:{"User-Agent":`Firebase/5/${ZG}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(n.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(n.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(n.proxy={origin:a})}this.mySock=new c2(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==c2&&!r.forceDisallow_}static previouslyFailed(){return gS.isInMemoryStorage||!0===gS.get("previous_websocket_failure")}markConnectionHealthy(){gS.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=(0,re.cI)(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);null!==n&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=(0,re.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=oae(i,16384);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),xae=(()=>{class r{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[aC,pD]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=pD&&pD.isAvailable();let n=i&&!pD.previouslyFailed();if(e.webSocketOnly&&(i||Mh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[pD];else{const s=this.transports_=[];for(const o of r.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class Mae{constructor(t,e,i,n,s,o,a,l,h,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=n,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=cL("c:"+this.id+":"),this.transportManager_=new xae(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const n=t.healthyTimeout||0;n>0&&(this.healthyTimeout_=pL(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=dL("t",t),i=dL("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=dL("t",t),i=dL("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=dL("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?QG("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QG("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,n=t.h;this.sessionId=t.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Mh("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),pL(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pL(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gS.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Lae{put(t,e,i,n){}merge(t,e,i,n){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class Oae{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,re.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let n=0;n<i.length;n++)i[n].callback.apply(i[n].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const n=this.getInitialEvent(t);n&&e.apply(i,n)}off(t,e,i){this.validateEventType_(t);const n=this.listeners_[t]||[];for(let s=0;s<n.length;s++)if(n[s].callback===e&&(!i||i===n[s].context))return void n.splice(s,1)}validateEventType_(t){(0,re.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class d2 extends Oae{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new d2}getInitialEvent(t){return(0,re.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Rs{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let n=0;n<this.pieces_.length;n++)this.pieces_[n].length>0&&(this.pieces_[i]=this.pieces_[n],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ms(){return new Rs("")}function Dr(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function lC(r){return r.pieces_.length-r.pieceNum_}function ao(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new Rs(r.pieces_,t)}function l7(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function gL(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function Nae(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let e=r.pieceNum_;e<r.pieces_.length-1;e++)t.push(r.pieces_[e]);return new Rs(t,0)}function Zo(r,t){const e=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)e.push(r.pieces_[i]);if(t instanceof Rs)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let n=0;n<i.length;n++)i[n].length>0&&e.push(i[n])}return new Rs(e,0)}function Ir(r){return r.pieceNum_>=r.pieces_.length}function cu(r,t){const e=Dr(r),i=Dr(t);if(null===e)return t;if(e===i)return cu(ao(r),ao(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function gke(r,t){const e=gL(r,0),i=gL(t,0);for(let n=0;n<e.length&&n<i.length;n++){const s=vS(e[n],i[n]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function h7(r,t){if(lC(r)!==lC(t))return!1;for(let e=r.pieceNum_,i=t.pieceNum_;e<=r.pieces_.length;e++,i++)if(r.pieces_[e]!==t.pieces_[i])return!1;return!0}function hp(r,t){let e=r.pieceNum_,i=t.pieceNum_;if(lC(r)>lC(t))return!1;for(;e<r.pieces_.length;){if(r.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class mke{constructor(t,e){this.errorPrefix_=e,this.parts_=gL(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,re.ug)(this.parts_[i]);Bae(this)}}function Bae(r){if(r.byteLength_>768)throw new Error(r.errorPrefix_+"has a key path longer than 768 bytes ("+r.byteLength_+").");if(r.parts_.length>32)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+yS(r))}function yS(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class u7 extends Oae{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new u7}getInitialEvent(t){return(0,re.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const mL=1e3;let f2,bS=(()=>{class r extends Lae{constructor(e,i,n,s,o,a,l,h){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=h,this.id=r.nextPersistentConnectionId_++,this.log_=cL("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mL,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");u7.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&d2.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_((0,re.Wl)(o)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const i=new re.BH,n={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:n,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,n,s){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,re.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:e,tag:n};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+n+" for "+s);const o={p:n};e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,l=>{const h=l.d,u=l.s;r.warnOnListenWarnings_(h,i),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(n,s),e.onComplete&&e.onComplete(u,h))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,re.r3)(e,"w")){const n=(0,re.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Mh(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,re.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,re.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(i,n,s=>{const o=s.s,a=s.d||"error";this.authToken_===e&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),(0,re.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,i)}sendUnlisten_(e,i,n,s){this.log_("Unlisten on "+e+" for "+i);const o={p:e};s&&(o.q=n,o.t=s),this.sendRequest("n",o)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,s){const o={p:i,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,n,s){this.putInternal("p",e,i,n,s)}merge(e,i,n,s){this.putInternal("m",e,i,n,s)}putInternal(e,i,n,s,o){this.initConnection_();const a={p:i,d:n};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{"ok"!==n.s&&this.log_("reportStats","Error sending stats: "+n.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,re.Wl)(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):QG("Unrecognized action received from server: "+(0,re.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mL,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=mL,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mL),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Ct.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),n=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),o=e.id+":"+r.nextConnectionId_++,a=e.lastSessionId;let l=!1,h=null;const u=function(){h?h.close():(l=!0,s())};e.realtime_={close:u,sendRequest:function(y){(0,re.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(y)}};const m=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[y,C]=yield Promise.all([e.authTokenProvider_.getToken(m),e.appCheckTokenProvider_.getToken(m)]);l?Wl("getToken() completed but was canceled"):(Wl("getToken() completed. Creating connection."),e.authToken_=y&&y.accessToken,e.appCheckToken_=C&&C.token,h=new Mae(o,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,n,s,S=>{Mh(S+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(y){e.log_("Failed to get token: "+y),l||(e.repoInfo_.nodeAdmin&&Mh(y),u())}}})()}interrupt(e){Wl("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Wl("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mL,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;n=i?i.map(o=>JG(o)).join("$"):"default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const n=new Rs(e).toString();let s;if(this.listens.has(n)){const o=this.listens.get(n);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,i){Wl("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Wl("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,re.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+ZG.replace(/\./g,"-")]=1,(0,re.uI)()?e["framework.cordova"]=1:(0,re.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=d2.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&e}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class Fr{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Fr(t,e)}}class p2{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Fr(Ov,t),n=new Fr(Ov,e);return 0!==this.compare(i,n)}minPost(){return Fr.MIN}}class zae extends p2{static get __EMPTY_NODE(){return f2}static set __EMPTY_NODE(t){f2=t}compare(t,e){return vS(t.name,e.name)}isDefinedOn(t){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Fr.MIN}maxPost(){return new Fr(jg,f2)}makePost(t,e){return(0,re.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Fr(t,f2)}toString(){return".key"}}const Ug=new zae;class g2{constructor(t,e,i,n,s=null){this.isReverse_=n,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,n&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let d7,Nf=(()=>{class r{constructor(e,i,n,s,o){this.key=e,this.value=i,this.color=n??r.RED,this.left=s??oc.EMPTY_NODE,this.right=o??oc.EMPTY_NODE}copy(e,i,n,s,o){return new r(e??this.key,i??this.value,n??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,i,n),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return oc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,s;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===i(e,n.key)){if(n.right.isEmpty())return oc.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class oc{constructor(t,e=oc.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new oc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Nf.BLACK,null,null))}remove(t){return new oc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Nf.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,n=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return n?n.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(n=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new g2(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new g2(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new g2(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new g2(this.root_,null,this.comparator_,!0,t)}}function Tke(r,t){return vS(r.name,t.name)}function c7(r,t){return vS(r,t)}oc.EMPTY_NODE=new class Eke{copy(t,e,i,n,s){return this}insert(t,e,i){return new Nf(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const jae=function(r){return"number"==typeof r?"number:"+aae(r):"string:"+r},Uae=function(r){if(r.isLeafNode()){const t=r.val();(0,re.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,re.r3)(t,".sv"),"Priority must be a string or number.")}else(0,re.hu)(r===d7||r.isEmpty(),"priority of unexpected type.");(0,re.hu)(r===d7||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Wae,qae,Gae,fD=(()=>{class r{constructor(e,i=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Uae(this.priorityNode_)}static set __childrenNodeConstructor(e){Wae=e}static get __childrenNodeConstructor(){return Wae}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new r(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ir(e)?this:".priority"===Dr(e)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=Dr(e);return null===n?i:i.isEmpty()&&".priority"!==n?this:((0,re.hu)(".priority"!==n||1===lC(e),".priority must be the last token in a path"),this.updateImmediateChild(n,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(ao(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+jae(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?aae(this.value_):this.value_,this.lazyHash_=nae(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===r.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof r.__childrenNodeConstructor?-1:((0,re.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,s=r.VALUE_TYPE_ORDER.indexOf(i),o=r.VALUE_TYPE_ORDER.indexOf(n);return(0,re.hu)(s>=0,"Unknown leaf type: "+i),(0,re.hu)(o>=0,"Unknown leaf type: "+n),s===o?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const So=new class Ake extends p2{compare(t,e){const i=t.node.getPriority(),n=e.node.getPriority(),s=i.compareTo(n);return 0===s?vS(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Fr.MIN}maxPost(){return new Fr(jg,new fD("[PRIORITY-POST]",Gae))}makePost(t,e){const i=qae(t);return new Fr(e,new fD("[PRIORITY-POST]",i))}toString(){return".priority"}},_ke=Math.log(2);class kke{constructor(t){this.count=parseInt(Math.log(t+1)/_ke,10),this.current_=this.count-1;const n=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const m2=function(r,t,e,i){r.sort(t);const n=function(l,h){const u=h-l;let d,m;if(0===u)return null;if(1===u)return d=r[l],m=e?e(d):d,new Nf(m,d.node,Nf.BLACK,null,null);{const y=parseInt(u/2,10)+l,C=n(l,y),S=n(y+1,h);return d=r[y],m=e?e(d):d,new Nf(m,d.node,Nf.BLACK,C,S)}},a=function(l){let h=null,u=null,d=r.length;const m=function(C,S){const I=d-C,k=d;d-=C;const O=n(I+1,k),L=r[I],B=e?e(L):L;y(new Nf(B,L.node,S,null,O))},y=function(C){h?(h.left=C,h=C):(u=C,h=C)};for(let C=0;C<l.count;++C){const S=l.nextBitIsOne(),I=Math.pow(2,l.count-(C+1));S?m(I,Nf.BLACK):(m(I,Nf.BLACK),m(I,Nf.RED))}return u}(new kke(r.length));return new oc(i||t,a)};let p7;const gD={};class Pv{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,re.hu)(gD&&So,"ChildrenNode.ts has not been loaded"),p7=p7||new Pv({".priority":gD},{".priority":So}),p7}get(t){const e=(0,re.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof oc?e:null}hasIndex(t){return(0,re.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,re.hu)(t!==Ug,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let n=!1;const s=e.getIterator(Fr.Wrap);let a,o=s.getNext();for(;o;)n=n||t.isDefinedOn(o.node),i.push(o),o=s.getNext();a=n?m2(i,t.getCompare()):gD;const l=t.toString(),h=Object.assign({},this.indexSet_);h[l]=t;const u=Object.assign({},this.indexes_);return u[l]=a,new Pv(u,h)}addToIndexes(t,e){const i=(0,re.UI)(this.indexes_,(n,s)=>{const o=(0,re.DV)(this.indexSet_,s);if((0,re.hu)(o,"Missing index implementation for "+s),n===gD){if(o.isDefinedOn(t.node)){const a=[],l=e.getIterator(Fr.Wrap);let h=l.getNext();for(;h;)h.name!==t.name&&a.push(h),h=l.getNext();return a.push(t),m2(a,o.getCompare())}return gD}{const a=e.get(t.name);let l=n;return a&&(l=l.remove(new Fr(t.name,a))),l.insert(t,t.node)}});return new Pv(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,re.UI)(this.indexes_,n=>{if(n===gD)return n;{const s=e.get(t.name);return s?n.remove(new Fr(t.name,s)):n}});return new Pv(i,this.indexSet_)}}let vL,rr=(()=>{class r{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Uae(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vL||(vL=new r(new oc(c7),null,Pv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vL}updatePriority(e){return this.children_.isEmpty()?this:new r(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?vL:i}}getChild(e){const i=Dr(e);return null===i?this:this.getImmediateChild(i).getChild(ao(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,re.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const n=new Fr(e,i);let s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(n,this.children_));const a=s.isEmpty()?vL:this.priorityNode_;return new r(s,a,o)}}updateChild(e,i){const n=Dr(e);if(null===n)return i;{(0,re.hu)(".priority"!==Dr(e)||1===lC(e),".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(ao(e),i);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,s=0,o=!0;if(this.forEachChild(So,(a,l)=>{i[a]=l.val(e),n++,o&&r.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*n){const a=[];for(const l in i)a[l]=i[l];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+jae(this.getPriority().val())+":"),this.forEachChild(So,(i,n)=>{const s=n.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":nae(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const s=this.resolveIndex_(n);if(s){const o=s.getPredecessorKey(new Fr(e,i));return o?o.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Fr(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Fr(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Fr.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Fr.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===yL?-1:0}withIndex(e){if(e===Ug||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new r(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Ug||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const n=this.getIterator(So),s=i.getIterator(So);let o=n.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=n.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(e){return e===Ug?null:this.indexMap_.get(e.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const yL=new class Rke extends rr{constructor(){super(new oc(c7),rr.EMPTY_NODE,Pv.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return rr.EMPTY_NODE}isEmpty(){return!1}};function ba(r,t=null){if(null===r)return rr.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),(0,re.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new fD(r,ba(t));if(r instanceof Array){let e=rr.EMPTY_NODE;return ql(r,(i,n)=>{if((0,re.r3)(r,i)&&"."!==i.substring(0,1)){const s=ba(n);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(ba(t))}{const e=[];let i=!1;if(ql(r,(o,a)=>{if("."!==o.substring(0,1)){const l=ba(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),e.push(new Fr(o,l)))}}),0===e.length)return rr.EMPTY_NODE;const s=m2(e,Tke,o=>o.name,c7);if(i){const o=m2(e,So.getCompare());return new rr(s,ba(t),new Pv({".priority":o},{".priority":So}))}return new rr(s,ba(t),Pv.Default)}}Object.defineProperties(Fr,{MIN:{value:new Fr(Ov,rr.EMPTY_NODE)},MAX:{value:new Fr(jg,yL)}}),zae.__EMPTY_NODE=rr.EMPTY_NODE,fD.__childrenNodeConstructor=rr,function xke(r){d7=r}(yL),function Ike(r){Gae=r}(yL),function Dke(r){qae=r}(ba);class f7 extends p2{constructor(t){super(),this.indexPath_=t,(0,re.hu)(!Ir(t)&&".priority"!==Dr(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),n=this.extractChild(e.node),s=i.compareTo(n);return 0===s?vS(t.name,e.name):s}makePost(t,e){const i=ba(t),n=rr.EMPTY_NODE.updateChild(this.indexPath_,i);return new Fr(e,n)}maxPost(){const t=rr.EMPTY_NODE.updateChild(this.indexPath_,yL);return new Fr(jg,t)}toString(){return gL(this.indexPath_,0).join("/")}}const g7=new class Lke extends p2{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?vS(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Fr.MIN}maxPost(){return Fr.MAX}makePost(t,e){const i=ba(t);return new Fr(e,i)}toString(){return".value"}},mD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Oke=function(){let r=0;const t=[];return function(e){const i=e===r;let n;r=e;const s=new Array(8);for(n=7;n>=0;n--)s[n]=mD.charAt(e%64),e=Math.floor(e/64);(0,re.hu)(0===e,"Cannot push at time == 0");let o=s.join("");if(i){for(n=11;n>=0&&63===t[n];n--)t[n]=0;t[n]++}else for(n=0;n<12;n++)t[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)o+=mD.charAt(t[n]);return(0,re.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),Yae=function(r){if(r===""+e7)return"-";const t=h2(r);if(null!=t)return""+(t+1);const e=new Array(r.length);for(let o=0;o<e.length;o++)e[o]=r.charAt(o);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return jg;const s=mD.charAt(mD.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},Zae=function(r){if("-2147483648"===r)return Ov;const t=h2(r);if(null!=t)return""+(t-1);const e=new Array(r.length);for(let i=0;i<e.length;i++)e[i]=r.charAt(i);return"-"===e[e.length-1]?1===e.length?""+e7:(delete e[e.length-1],e.join("")):(e[e.length-1]=mD.charAt(mD.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function Xae(r){return{type:"value",snapshotNode:r}}function vD(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function bL(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function CL(r,t,e){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:e}}class v7{constructor(t){this.index_=t}updateChild(t,e,i,n,s,o){(0,re.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(n).equals(i.getChild(n))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(bL(e,a)):(0,re.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(vD(e,i)):o.trackChildChange(CL(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(So,(n,s)=>{e.hasChild(n)||i.trackChildChange(bL(n,s))}),e.isLeafNode()||e.forEachChild(So,(n,s)=>{if(t.hasChild(n)){const o=t.getImmediateChild(n);o.equals(s)||i.trackChildChange(CL(n,s,o))}else i.trackChildChange(vD(n,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?rr.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class wL{constructor(t){this.indexedFilter_=new v7(t.getIndex()),this.index_=t.getIndex(),this.startPost_=wL.getStartPost_(t),this.endPost_=wL.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,n,s,o){return this.matches(new Fr(e,i))||(i=rr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,n,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=rr.EMPTY_NODE);let n=e.withIndex(this.index_);n=n.updatePriority(rr.EMPTY_NODE);const s=this;return e.forEachChild(So,(o,a)=>{s.matches(new Fr(o,a))||(n=n.updateImmediateChild(o,rr.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class Fke{constructor(t){this.rangedFilter_=new wL(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,n,s,o){return this.rangedFilter_.matches(new Fr(e,i))||(i=rr.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,n,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let n;if(e.isLeafNode()||e.isEmpty())n=rr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;n=rr.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;n=n.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(n=e.withIndex(this.index_),n=n.updatePriority(rr.EMPTY_NODE),this.reverse_){l=n.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(m,y)=>d(y,m)}else l=n.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let h=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&h<this.limit_&&a(d,o)<=0?h++:n=n.updateImmediateChild(d.name,rr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,n,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,y)=>d(y,m)}else o=this.index_.getCompare();const a=t;(0,re.hu)(a.numChildren()===this.limit_,"");const l=new Fr(e,i),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(e)){const d=a.getImmediateChild(e);let m=n.getChildAfterChild(this.index_,h,this.reverse_);for(;null!=m&&(m.name===e||a.hasChild(m.name));)m=n.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!i.isEmpty()&&y>=0)return s?.trackChildChange(CL(e,i,d)),a.updateImmediateChild(e,i);{s?.trackChildChange(bL(e,d));const S=a.updateImmediateChild(e,rr.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(vD(m.name,m.node)),S.updateImmediateChild(m.name,m.node)):S}}return i.isEmpty()?t:u&&o(h,l)>=0?(null!=s&&(s.trackChildChange(bL(h.name,h.node)),s.trackChildChange(vD(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(h.name,rr.EMPTY_NODE)):t}}class v2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=So}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ov}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===So}copy(){const t=new v2;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function y7(r,t,e){const i=r.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function b7(r,t,e){const i=r.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function y2(r,t){const e=r.copy();return e.index_=t,e}function Qae(r){const t={};if(r.isDefault())return t;let e;return r.index_===So?e="$priority":r.index_===g7?e="$value":r.index_===Ug?e="$key":((0,re.hu)(r.index_ instanceof f7,"Unrecognized index type!"),e=r.index_.toString()),t.orderBy=(0,re.Wl)(e),r.startSet_&&(t.startAt=(0,re.Wl)(r.indexStartValue_),r.startNameSet_&&(t.startAt+=","+(0,re.Wl)(r.indexStartName_))),r.endSet_&&(t.endAt=(0,re.Wl)(r.indexEndValue_),r.endNameSet_&&(t.endAt+=","+(0,re.Wl)(r.indexEndName_))),r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function Jae(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_)),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_)),r.limitSet_){t.l=r.limit_;let e=r.viewFrom_;""===e&&(e=r.isViewFromLeft()?"l":"r"),t.vf=e}return r.index_!==So&&(t.i=r.index_.toString()),t}class b2 extends Lae{constructor(t,e,i,n){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=n,this.log_=cL("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,re.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,n){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=b2.getListenId_(t,i),a={};this.listens_[o]=a;const l=Qae(t._queryParams);this.restRequest_(s+".json",l,(h,u)=>{let d=u;if(404===h&&(d=null,h=null),null===h&&this.onDataUpdate_(s,d,!1,i),(0,re.DV)(this.listens_,o)===a){let m;m=h?401===h?"permission_denied":"rest_error:"+h:"ok",n(m,null)}})}unlisten(t,e){const i=b2.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Qae(t._queryParams),i=t._path.toString(),n=new re.BH;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),n.resolve(a)):n.reject(new Error(a))}),n.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,s])=>{n&&n.accessToken&&(e.auth=n.accessToken),s&&s.token&&(e.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,re.xO)(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,re.cI)(a.responseText)}catch{Mh("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Mh("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class jke{constructor(){this.rootNode_=rr.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function C2(){return{value:null,children:new Map}}function yD(r,t,e){if(Ir(t))r.value=e,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(t,e);else{const i=Dr(t);r.children.has(i)||r.children.set(i,C2()),yD(r.children.get(i),t=ao(t),e)}}function C7(r,t){if(Ir(t))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const e=r.value;return r.value=null,e.forEachChild(So,(i,n)=>{yD(r,new Rs(i),n)}),C7(r,t)}}if(r.children.size>0){const e=Dr(t);return t=ao(t),r.children.has(e)&&C7(r.children.get(e),t)&&r.children.delete(e),0===r.children.size}return!0}function w7(r,t,e){null!==r.value?e(t,r.value):function Uke(r,t){r.children.forEach((e,i)=>{t(i,e)})}(r,(i,n)=>{w7(n,new Rs(t.toString()+"/"+i),e)})}class Wke{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ql(this.last_,(i,n)=>{e[i]=e[i]-n}),this.last_=t,e}}class Kke{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Wke(t);const i=1e4+2e4*Math.random();pL(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ql(t,(n,s)=>{s>0&&(0,re.r3)(this.statsToReport_,n)&&(e[n]=s,i=!0)}),i&&this.server_.reportStats(e),pL(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var up=(()=>(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(up||(up={})),up))();function T7(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class w2{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=up.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Ir(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Rs(t));return new w2(ms(),e,this.revert)}}return(0,re.hu)(Dr(this.path)===t,"operationForChild called for unrelated child."),new w2(ao(this.path),this.affectedTree,this.revert)}}class SL{constructor(t,e){this.source=t,this.path=e,this.type=up.LISTEN_COMPLETE}operationForChild(t){return Ir(this.path)?new SL(this.source,ms()):new SL(this.source,ao(this.path))}}class CS{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=up.OVERWRITE}operationForChild(t){return Ir(this.path)?new CS(this.source,ms(),this.snap.getImmediateChild(t)):new CS(this.source,ao(this.path),this.snap)}}class bD{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=up.MERGE}operationForChild(t){if(Ir(this.path)){const e=this.children.subtree(new Rs(t));return e.isEmpty()?null:e.value?new CS(this.source,ms(),e.value):new bD(this.source,ms(),e)}return(0,re.hu)(Dr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new bD(this.source,ao(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hC{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Ir(t))return this.isFullyInitialized()&&!this.filtered_;const e=Dr(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class $ke{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function EL(r,t,e,i,n,s){const o=i.filter(a=>a.type===e);o.sort((a,l)=>function Xke(r,t,e){if(null==t.childName||null==e.childName)throw(0,re.g5)("Should only compare child_ events.");const i=new Fr(t.childName,t.snapshotNode),n=new Fr(e.childName,e.snapshotNode);return r.index_.compare(i,n)}(r,a,l)),o.forEach(a=>{const l=function Zke(r,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}(r,a,s);n.forEach(h=>{h.respondsTo(a.type)&&t.push(h.createEvent(l,r.query_))})})}function S2(r,t){return{eventCache:r,serverCache:t}}function TL(r,t,e,i){return S2(new hC(t,e,i),r.serverCache)}function tle(r,t,e,i){return S2(r.eventCache,new hC(t,e,i))}function E2(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function wS(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let x7;class Eo{constructor(t,e=(()=>(x7||(x7=new oc(F_e)),x7))()){this.value=t,this.children=e}static fromObject(t){let e=new Eo(null);return ql(t,(i,n)=>{e=e.set(new Rs(i),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ms(),value:this.value};if(Ir(t))return null;{const i=Dr(t),n=this.children.get(i);if(null!==n){const s=n.findRootMostMatchingPathAndValue(ao(t),e);return null!=s?{path:Zo(new Rs(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Ir(t))return this;{const e=Dr(t),i=this.children.get(e);return null!==i?i.subtree(ao(t)):new Eo(null)}}set(t,e){if(Ir(t))return new Eo(e,this.children);{const i=Dr(t),s=(this.children.get(i)||new Eo(null)).set(ao(t),e),o=this.children.insert(i,s);return new Eo(this.value,o)}}remove(t){if(Ir(t))return this.children.isEmpty()?new Eo(null):new Eo(null,this.children);{const e=Dr(t),i=this.children.get(e);if(i){const n=i.remove(ao(t));let s;return s=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&s.isEmpty()?new Eo(null):new Eo(this.value,s)}return this}}get(t){if(Ir(t))return this.value;{const e=Dr(t),i=this.children.get(e);return i?i.get(ao(t)):null}}setTree(t,e){if(Ir(t))return e;{const i=Dr(t),s=(this.children.get(i)||new Eo(null)).setTree(ao(t),e);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Eo(this.value,o)}}fold(t){return this.fold_(ms(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((n,s)=>{i[n]=s.fold_(Zo(t,n),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,ms(),e)}findOnPath_(t,e,i){const n=!!this.value&&i(e,this.value);if(n)return n;if(Ir(t))return null;{const s=Dr(t),o=this.children.get(s);return o?o.findOnPath_(ao(t),Zo(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ms(),e)}foreachOnPath_(t,e,i){if(Ir(t))return this;{this.value&&i(e,this.value);const n=Dr(t),s=this.children.get(n);return s?s.foreachOnPath_(ao(t),Zo(e,n),i):new Eo(null)}}foreach(t){this.foreach_(ms(),t)}foreach_(t,e){this.children.inorderTraversal((i,n)=>{n.foreach_(Zo(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Bf{constructor(t){this.writeTree_=t}static empty(){return new Bf(new Eo(null))}}function xL(r,t,e){if(Ir(t))return new Bf(new Eo(e));{const i=r.writeTree_.findRootMostValueAndPath(t);if(null!=i){const n=i.path;let s=i.value;const o=cu(n,t);return s=s.updateChild(o,e),new Bf(r.writeTree_.set(n,s))}{const n=new Eo(e),s=r.writeTree_.setTree(t,n);return new Bf(s)}}}function D7(r,t,e){let i=r;return ql(e,(n,s)=>{i=xL(i,Zo(t,n),s)}),i}function ile(r,t){if(Ir(t))return Bf.empty();{const e=r.writeTree_.setTree(t,new Eo(null));return new Bf(e)}}function I7(r,t){return null!=SS(r,t)}function SS(r,t){const e=r.writeTree_.findRootMostValueAndPath(t);return null!=e?r.writeTree_.get(e.path).getChild(cu(e.path,t)):null}function nle(r){const t=[],e=r.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(So,(i,n)=>{t.push(new Fr(i,n))}):r.writeTree_.children.inorderTraversal((i,n)=>{null!=n.value&&t.push(new Fr(i,n.value))}),t}function uC(r,t){if(Ir(t))return r;{const e=SS(r,t);return new Bf(null!=e?new Eo(e):r.writeTree_.subtree(t))}}function A7(r){return r.writeTree_.isEmpty()}function CD(r,t){return rle(ms(),r.writeTree_,t)}function rle(r,t,e){if(null!=t.value)return e.updateChild(r,t.value);{let i=null;return t.children.inorderTraversal((n,s)=>{".priority"===n?((0,re.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=rle(Zo(r,n),s,e)}),!e.getChild(r).isEmpty()&&null!==i&&(e=e.updateChild(Zo(r,".priority"),i)),e}}function T2(r,t){return hle(t,r)}function nRe(r,t){if(r.snap)return hp(r.path,t);for(const e in r.children)if(r.children.hasOwnProperty(e)&&hp(Zo(r.path,e),t))return!0;return!1}function sRe(r){return r.visible}function sle(r,t,e){let i=Bf.empty();for(let n=0;n<r.length;++n){const s=r[n];if(t(s)){const o=s.path;let a;if(s.snap)hp(e,o)?(a=cu(e,o),i=xL(i,a,s.snap)):hp(o,e)&&(a=cu(o,e),i=xL(i,ms(),s.snap.getChild(a)));else{if(!s.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(hp(e,o))a=cu(e,o),i=D7(i,a,s.children);else if(hp(o,e))if(a=cu(o,e),Ir(a))i=D7(i,ms(),s.children);else{const l=(0,re.DV)(s.children,Dr(a));if(l){const h=l.getChild(ao(a));i=xL(i,ms(),h)}}}}}return i}function ole(r,t,e,i,n){if(i||n){const s=uC(r.visibleWrites,t);return!n&&A7(s)?e:n||null!=e||I7(s,ms())?CD(sle(r.allWrites,function(h){return(h.visible||n)&&(!i||!~i.indexOf(h.writeId))&&(hp(h.path,t)||hp(t,h.path))},t),e||rr.EMPTY_NODE):null}{const s=SS(r.visibleWrites,t);if(null!=s)return s;{const o=uC(r.visibleWrites,t);return A7(o)?e:null!=e||I7(o,ms())?CD(o,e||rr.EMPTY_NODE):null}}}function x2(r,t,e,i){return ole(r.writeTree,r.treePath,t,e,i)}function _7(r,t){return function oRe(r,t,e){let i=rr.EMPTY_NODE;const n=SS(r.visibleWrites,t);if(n)return n.isLeafNode()||n.forEachChild(So,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){const s=uC(r.visibleWrites,t);return e.forEachChild(So,(o,a)=>{const l=CD(uC(s,new Rs(o)),a);i=i.updateImmediateChild(o,l)}),nle(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return nle(uC(r.visibleWrites,t)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(r.writeTree,r.treePath,t)}function ale(r,t,e,i){return function aRe(r,t,e,i,n){(0,re.hu)(i||n,"Either existingEventSnap or existingServerSnap must exist");const s=Zo(t,e);if(I7(r.visibleWrites,s))return null;{const o=uC(r.visibleWrites,s);return A7(o)?n.getChild(e):CD(o,n.getChild(e))}}(r.writeTree,r.treePath,t,e,i)}function D2(r,t){return function hRe(r,t){return SS(r.visibleWrites,t)}(r.writeTree,Zo(r.treePath,t))}function k7(r,t,e){return function lRe(r,t,e,i){const n=Zo(t,e),s=SS(r.visibleWrites,n);return null!=s?s:i.isCompleteForChild(e)?CD(uC(r.visibleWrites,n),i.getNode().getImmediateChild(e)):null}(r.writeTree,r.treePath,t,e)}function lle(r,t){return hle(Zo(r.treePath,t),r.writeTree)}function hle(r,t){return{treePath:r,writeTree:t}}class pRe{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,re.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(i);if(n){const s=n.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,CL(i,t.snapshotNode,n.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,bL(i,n.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,vD(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,re.g5)("Illegal combination of changes: "+t+" occurred after "+n);this.changeMap.set(i,CL(i,t.snapshotNode,n.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const ule=new class fRe{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class R7{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new hC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return k7(this.writes_,t,i)}}getChildAfterChild(t,e,i){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:wS(this.viewCache_),s=function dRe(r,t,e,i,n,s){return function uRe(r,t,e,i,n,s,o){let a;const l=uC(r.visibleWrites,t),h=SS(l,ms());if(null!=h)a=h;else{if(null==e)return[];a=CD(l,e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let y=m.getNext();for(;y&&u.length<n;)0!==d(y,i)&&u.push(y),y=m.getNext();return u}}(r.writeTree,r.treePath,t,e,i,n,s)}(this.writes_,n,e,1,i,t);return 0===s.length?null:s[0]}}function cle(r,t,e,i,n,s){const o=t.eventCache;if(null!=D2(i,e))return t;{let a,l;if(Ir(e))if((0,re.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const h=wS(t),d=_7(i,h instanceof rr?h:rr.EMPTY_NODE);a=r.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const h=x2(i,wS(t));a=r.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{const h=Dr(e);if(".priority"===h){(0,re.hu)(1===lC(e),"Can't have a priority with additional path components");const u=o.getNode();l=t.serverCache.getNode();const d=ale(i,e,u,l);a=null!=d?r.filter.updatePriority(u,d):o.getNode()}else{const u=ao(e);let d;if(o.isCompleteForChild(h)){l=t.serverCache.getNode();const m=ale(i,e,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(h).updateChild(u,m):o.getNode().getImmediateChild(h)}else d=k7(i,h,t.serverCache);a=null!=d?r.filter.updateChild(o.getNode(),h,d,u,n,s):o.getNode()}}return TL(t,a,o.isFullyInitialized()||Ir(e),r.filter.filtersNodes())}}function I2(r,t,e,i,n,s,o,a){const l=t.serverCache;let h;const u=o?r.filter:r.filter.getIndexedFilter();if(Ir(e))h=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(e,i);h=u.updateFullNode(l.getNode(),y,null)}else{const y=Dr(e);if(!l.isCompleteForPath(e)&&lC(e)>1)return t;const C=ao(e),I=l.getNode().getImmediateChild(y).updateChild(C,i);h=".priority"===y?u.updatePriority(l.getNode(),I):u.updateChild(l.getNode(),y,I,C,ule,null)}const d=tle(t,h,l.isFullyInitialized()||Ir(e),u.filtersNodes());return cle(r,d,e,n,new R7(n,d,s),a)}function M7(r,t,e,i,n,s,o){const a=t.eventCache;let l,h;const u=new R7(n,t,s);if(Ir(e))h=r.filter.updateFullNode(t.eventCache.getNode(),i,o),l=TL(t,h,!0,r.filter.filtersNodes());else{const d=Dr(e);if(".priority"===d)h=r.filter.updatePriority(t.eventCache.getNode(),i),l=TL(t,h,a.isFullyInitialized(),a.isFiltered());else{const m=ao(e),y=a.getNode().getImmediateChild(d);let C;if(Ir(m))C=i;else{const S=u.getCompleteChild(d);C=null!=S?".priority"===l7(m)&&S.getChild(Nae(m)).isEmpty()?S:S.updateChild(m,i):rr.EMPTY_NODE}l=y.equals(C)?t:TL(t,r.filter.updateChild(a.getNode(),d,C,m,u,o),a.isFullyInitialized(),r.filter.filtersNodes())}}return l}function dle(r,t){return r.eventCache.isCompleteForChild(t)}function ple(r,t,e){return e.foreach((i,n)=>{t=t.updateChild(i,n)}),t}function L7(r,t,e,i,n,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let h,l=t;h=Ir(e)?i:new Eo(null).setTree(e,i);const u=t.serverCache.getNode();return h.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const C=ple(0,t.serverCache.getNode().getImmediateChild(d),m);l=I2(r,l,new Rs(d),C,n,s,o,a)}}),h.children.inorderTraversal((d,m)=>{const y=!t.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!y){const S=ple(0,t.serverCache.getNode().getImmediateChild(d),m);l=I2(r,l,new Rs(d),S,n,s,o,a)}}),l}class ERe{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,n=new v7(i.getIndex()),s=function Nke(r){return r.loadsAllData()?new v7(r.getIndex()):r.hasLimit()?new Fke(r):new wL(r)}(i);this.processor_=function gRe(r){return{filter:r}}(s);const o=e.serverCache,a=e.eventCache,l=n.updateFullNode(rr.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(rr.EMPTY_NODE,a.getNode(),null),u=new hC(l,o.isFullyInitialized(),n.filtersNodes()),d=new hC(h,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=S2(d,u),this.eventGenerator_=new $ke(this.query_)}get query(){return this.query_}}function DRe(r,t){const e=wS(r.viewCache_);return e&&(r.query._queryParams.loadsAllData()||!Ir(t)&&!e.getImmediateChild(Dr(t)).isEmpty())?e.getChild(t):null}function fle(r){return 0===r.eventRegistrations_.length}function gle(r,t,e){const i=[];if(e){(0,re.hu)(null==t,"A cancel should cancel all event registrations.");const n=r.query._path;r.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(e,n);o&&i.push(o)})}if(t){let n=[];for(let s=0;s<r.eventRegistrations_.length;++s){const o=r.eventRegistrations_[s];if(o.matches(t)){if(t.hasAnyCallback()){n=n.concat(r.eventRegistrations_.slice(s+1));break}}else n.push(o)}r.eventRegistrations_=n}else r.eventRegistrations_=[];return i}function mle(r,t,e,i){t.type===up.MERGE&&null!==t.source.queryId&&((0,re.hu)(wS(r.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(E2(r.viewCache_),"Missing event cache, even though we have a server cache"));const n=r.viewCache_,s=function vRe(r,t,e,i,n){const s=new pRe;let o,a;if(e.type===up.OVERWRITE){const h=e;h.source.fromUser?o=M7(r,t,h.path,h.snap,i,n,s):((0,re.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered()&&!Ir(h.path),o=I2(r,t,h.path,h.snap,i,n,a,s))}else if(e.type===up.MERGE){const h=e;h.source.fromUser?o=function bRe(r,t,e,i,n,s,o){let a=t;return i.foreach((l,h)=>{const u=Zo(e,l);dle(t,Dr(u))&&(a=M7(r,a,u,h,n,s,o))}),i.foreach((l,h)=>{const u=Zo(e,l);dle(t,Dr(u))||(a=M7(r,a,u,h,n,s,o))}),a}(r,t,h.path,h.children,i,n,s):((0,re.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered(),o=L7(r,t,h.path,h.children,i,n,a,s))}else if(e.type===up.ACK_USER_WRITE){const h=e;o=h.revert?function SRe(r,t,e,i,n,s){let o;if(null!=D2(i,e))return t;{const a=new R7(i,t,n),l=t.eventCache.getNode();let h;if(Ir(e)||".priority"===Dr(e)){let u;if(t.serverCache.isFullyInitialized())u=x2(i,wS(t));else{const d=t.serverCache.getNode();(0,re.hu)(d instanceof rr,"serverChildren would be complete if leaf node"),u=_7(i,d)}h=r.filter.updateFullNode(l,u,s)}else{const u=Dr(e);let d=k7(i,u,t.serverCache);null==d&&t.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),h=null!=d?r.filter.updateChild(l,u,d,ao(e),a,s):t.eventCache.getNode().hasChild(u)?r.filter.updateChild(l,u,rr.EMPTY_NODE,ao(e),a,s):l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=x2(i,wS(t)),o.isLeafNode()&&(h=r.filter.updateFullNode(h,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=D2(i,ms()),TL(t,h,o,r.filter.filtersNodes())}}(r,t,h.path,i,n,s):function CRe(r,t,e,i,n,s,o){if(null!=D2(n,e))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Ir(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return I2(r,t,e,l.getNode().getChild(e),n,s,a,o);if(Ir(e)){let h=new Eo(null);return l.getNode().forEachChild(Ug,(u,d)=>{h=h.set(new Rs(u),d)}),L7(r,t,e,h,n,s,a,o)}return t}{let h=new Eo(null);return i.foreach((u,d)=>{const m=Zo(e,u);l.isCompleteForPath(m)&&(h=h.set(u,l.getNode().getChild(m)))}),L7(r,t,e,h,n,s,a,o)}}(r,t,h.path,h.affectedTree,i,n,s)}else{if(e.type!==up.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+e.type);o=function wRe(r,t,e,i,n){const s=t.serverCache;return cle(r,tle(t,s.getNode(),s.isFullyInitialized()||Ir(e),s.isFiltered()),e,i,ule,n)}(r,t,e.path,i,s)}const l=s.getChanges();return function yRe(r,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const n=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=E2(r);(e.length>0||!r.eventCache.isFullyInitialized()||n&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Xae(E2(t)))}}(t,o,l),{viewCache:o,changes:l}}(r.processor_,n,t,e,i);return function mRe(r,t){(0,re.hu)(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,s.viewCache),(0,re.hu)(s.viewCache.serverCache.isFullyInitialized()||!n.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=s.viewCache,vle(r,s.changes,s.viewCache.eventCache.getNode(),null)}function vle(r,t,e,i){return function Yke(r,t,e,i){const n=[],s=[];return t.forEach(o=>{"child_changed"===o.type&&r.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Pke(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}(o.childName,o.snapshotNode))}),EL(r,n,"child_removed",t,i,e),EL(r,n,"child_added",t,i,e),EL(r,n,"child_moved",s,i,e),EL(r,n,"child_changed",t,i,e),EL(r,n,"value",t,i,e),n}(r.eventGenerator_,t,e,i?[i]:r.eventRegistrations_)}let A2,k2;class yle{constructor(){this.views=new Map}}function O7(r,t,e,i){const n=t.source.queryId;if(null!==n){const s=r.views.get(n);return(0,re.hu)(null!=s,"SyncTree gave us an op for an invalid query."),mle(s,t,e,i)}{let s=[];for(const o of r.views.values())s=s.concat(mle(o,t,e,i));return s}}function ble(r,t,e,i,n){const o=r.views.get(t._queryIdentifier);if(!o){let a=x2(e,n?i:null),l=!1;a?l=!0:i instanceof rr?(a=_7(e,i),l=!1):(a=rr.EMPTY_NODE,l=!1);const h=S2(new hC(a,l,!1),new hC(i,n,!1));return new ERe(t,h)}return o}function Cle(r){const t=[];for(const e of r.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function cC(r,t){let e=null;for(const i of r.views.values())e=e||DRe(i,t);return e}function wle(r,t){return t._queryParams.loadsAllData()?_2(r):r.views.get(t._queryIdentifier)}function Sle(r,t){return null!=wle(r,t)}function dC(r){return null!=_2(r)}function _2(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let FRe=1;class Ele{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Eo(null),this.pendingWriteTree_=function cRe(){return{visibleWrites:Bf.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function P7(r,t,e,i,n){return function Jke(r,t,e,i,n){(0,re.hu)(i>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),r.allWrites.push({path:t,snap:e,writeId:i,visible:n}),n&&(r.visibleWrites=xL(r.visibleWrites,t,e)),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i,n),n?wD(r,new CS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function pC(r,t,e=!1){const i=function tRe(r,t){for(let e=0;e<r.allWrites.length;e++){const i=r.allWrites[e];if(i.writeId===t)return i}return null}(r.pendingWriteTree_,t);if(function iRe(r,t){const e=r.allWrites.findIndex(a=>a.writeId===t);(0,re.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[e];r.allWrites.splice(e,1);let n=i.visible,s=!1,o=r.allWrites.length-1;for(;n&&o>=0;){const a=r.allWrites[o];a.visible&&(o>=e&&nRe(a,i.path)?n=!1:hp(i.path,a.path)&&(s=!0)),o--}return!!n&&(s?(function rRe(r){r.visibleWrites=sle(r.allWrites,sRe,ms()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(i.snap?r.visibleWrites=ile(r.visibleWrites,i.path):ql(i.children,l=>{r.visibleWrites=ile(r.visibleWrites,Zo(i.path,l))}),!0))}(r.pendingWriteTree_,t)){let s=new Eo(null);return null!=i.snap?s=s.set(ms(),!0):ql(i.children,o=>{s=s.set(new Rs(o),!0)}),wD(r,new w2(i.path,s,e))}return[]}function DL(r,t,e){return wD(r,new CS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function R2(r,t,e,i,n=!1){const s=t._path,o=r.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||Sle(o,t))){const l=function LRe(r,t,e,i){const n=t._queryIdentifier,s=[];let o=[];const a=dC(r);if("default"===n)for(const[l,h]of r.views.entries())o=o.concat(gle(h,e,i)),fle(h)&&(r.views.delete(l),h.query._queryParams.loadsAllData()||s.push(h.query));else{const l=r.views.get(n);l&&(o=o.concat(gle(l,e,i)),fle(l)&&(r.views.delete(n),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!dC(r)&&s.push(new(function kRe(){return(0,re.hu)(A2,"Reference.ts has not been loaded"),A2}())(t._repo,t._path)),{removed:s,events:o}}(o,t,e,i);(function RRe(r){return 0===r.views.size})(o)&&(r.syncPointTree_=r.syncPointTree_.remove(s));const h=l.removed;if(a=l.events,!n){const u=-1!==h.findIndex(m=>m._queryParams.loadsAllData()),d=r.syncPointTree_.findOnPath(s,(m,y)=>dC(y));if(u&&!d){const m=r.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function URe(r){return r.fold((t,e,i)=>{if(e&&dC(e))return[_2(e)];{let n=[];return e&&(n=Cle(e)),ql(i,(s,o)=>{n=n.concat(o)}),n}})}(m);for(let C=0;C<y.length;++C){const S=y[C],I=S.query,k=Ile(r,S);r.listenProvider_.startListening(AL(I),IL(r,I),k.hashFn,k.onComplete)}}}!d&&h.length>0&&!i&&(u?r.listenProvider_.stopListening(AL(t),null):h.forEach(m=>{const y=r.queryToTagMap.get(L2(m));r.listenProvider_.stopListening(AL(m),y)}))}!function WRe(r,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const n=L2(i),s=r.queryToTagMap.get(n);r.queryToTagMap.delete(n),r.tagToQueryMap.delete(s)}}}(r,h)}return a}function Tle(r,t,e,i){const n=N7(r,i);if(null!=n){const s=B7(n),o=s.path,a=s.queryId,l=cu(o,t);return H7(r,o,new CS(T7(a),l,e))}return[]}function F7(r,t,e,i=!1){const n=t._path;let s=null,o=!1;r.syncPointTree_.foreachOnPath(n,(m,y)=>{const C=cu(m,n);s=s||cC(y,C),o=o||dC(y)});let l,a=r.syncPointTree_.get(n);a?(o=o||dC(a),s=s||cC(a,ms())):(a=new yle,r.syncPointTree_=r.syncPointTree_.set(n,a)),null!=s?l=!0:(l=!1,s=rr.EMPTY_NODE,r.syncPointTree_.subtree(n).foreachChild((y,C)=>{const S=cC(C,ms());S&&(s=s.updateImmediateChild(y,S))}));const h=Sle(a,t);if(!h&&!t._queryParams.loadsAllData()){const m=L2(t);(0,re.hu)(!r.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function qRe(){return FRe++}();r.queryToTagMap.set(m,y),r.tagToQueryMap.set(y,m)}let d=function MRe(r,t,e,i,n,s){const o=ble(r,t,i,n,s);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,o),function IRe(r,t){r.eventRegistrations_.push(t)}(o,e),function ARe(r,t){const e=r.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(So,(s,o)=>{i.push(vD(s,o))}),e.isFullyInitialized()&&i.push(Xae(e.getNode())),vle(r,i,e.getNode(),t)}(o,e)}(a,t,e,T2(r.pendingWriteTree_,n),s,l);if(!h&&!o&&!i){const m=wle(a,t);d=d.concat(function GRe(r,t,e){const i=t._path,n=IL(r,t),s=Ile(r,e),o=r.listenProvider_.startListening(AL(t),n,s.hashFn,s.onComplete),a=r.syncPointTree_.subtree(i);if(n)(0,re.hu)(!dC(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((h,u,d)=>{if(!Ir(h)&&u&&dC(u))return[_2(u).query];{let m=[];return u&&(m=m.concat(Cle(u).map(y=>y.query))),ql(d,(y,C)=>{m=m.concat(C)}),m}});for(let h=0;h<l.length;++h){const u=l[h];r.listenProvider_.stopListening(AL(u),IL(r,u))}}return o}(r,t,m))}return d}function M2(r,t,e){const n=r.pendingWriteTree_,s=r.syncPointTree_.findOnPath(t,(o,a)=>{const h=cC(a,cu(o,t));if(h)return h});return ole(n,t,s,e,!0)}function wD(r,t){return xle(t,r.syncPointTree_,null,T2(r.pendingWriteTree_,ms()))}function xle(r,t,e,i){if(Ir(r.path))return Dle(r,t,e,i);{const n=t.get(ms());null==e&&null!=n&&(e=cC(n,ms()));let s=[];const o=Dr(r.path),a=r.operationForChild(o),l=t.children.get(o);if(l&&a){const h=e?e.getImmediateChild(o):null,u=lle(i,o);s=s.concat(xle(a,l,h,u))}return n&&(s=s.concat(O7(n,r,i,e))),s}}function Dle(r,t,e,i){const n=t.get(ms());null==e&&null!=n&&(e=cC(n,ms()));let s=[];return t.children.inorderTraversal((o,a)=>{const l=e?e.getImmediateChild(o):null,h=lle(i,o),u=r.operationForChild(o);u&&(s=s.concat(Dle(u,a,l,h)))}),n&&(s=s.concat(O7(n,r,i,e))),s}function Ile(r,t){const e=t.query,i=IL(r,e);return{hashFn:()=>(function TRe(r){return r.viewCache_.serverCache.getNode()}(t)||rr.EMPTY_NODE).hash(),onComplete:n=>{if("ok"===n)return i?function VRe(r,t,e){const i=N7(r,e);if(i){const n=B7(i),s=n.path,o=n.queryId,a=cu(s,t);return H7(r,s,new SL(T7(o),a))}return[]}(r,e._path,i):function HRe(r,t){return wD(r,new SL({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(r,e._path);{const s=function H_e(r,t){let e="Unknown Error";"too_big"===r?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?e="Client doesn't have permission to access the desired data.":"unavailable"===r&&(e="The service is unavailable");const i=new Error(r+" at "+t._path.toString()+": "+e);return i.code=r.toUpperCase(),i}(n,e);return R2(r,e,null,s)}}}}function IL(r,t){const e=L2(t);return r.queryToTagMap.get(e)}function L2(r){return r._path.toString()+"$"+r._queryIdentifier}function N7(r,t){return r.tagToQueryMap.get(t)}function B7(r){const t=r.indexOf("$");return(0,re.hu)(-1!==t&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new Rs(r.substr(0,t))}}function H7(r,t,e){const i=r.syncPointTree_.get(t);return(0,re.hu)(i,"Missing sync point for query tag that we're tracking"),O7(i,e,T2(r.pendingWriteTree_,t),null)}function AL(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function PRe(){return(0,re.hu)(k2,"Reference.ts has not been loaded"),k2}())(r._repo,r._path):r}class V7{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new V7(e)}node(){return this.node_}}class z7{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Zo(this.path_,t);return new z7(this.syncTree_,e)}node(){return M2(this.syncTree_,this.path_)}}const Ale=function(r,t,e){return r&&"object"==typeof r?((0,re.hu)(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?$Re(r[".sv"],t,e):"object"==typeof r[".sv"]?YRe(r[".sv"],t):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},$Re=function(r,t,e){if("timestamp"===r)return e.timestamp;(0,re.hu)(!1,"Unexpected server value: "+r)},YRe=function(r,t,e){r.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;"number"!=typeof i&&(0,re.hu)(!1,"Unexpected increment value: "+i);const n=t.node();if((0,re.hu)(null!==n&&typeof n<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!n.isLeafNode())return i;const o=n.getValue();return"number"!=typeof o?i:o+i},_le=function(r,t,e,i){return U7(t,new z7(e,r),i)},j7=function(r,t,e){return U7(r,new V7(t),e)};function U7(r,t,e){const i=r.getPriority().val(),n=Ale(i,t.getImmediateChild(".priority"),e);let s;if(r.isLeafNode()){const o=r,a=Ale(o.getValue(),t,e);return a!==o.getValue()||n!==o.getPriority().val()?new fD(a,ba(n)):r}{const o=r;return s=o,n!==o.getPriority().val()&&(s=s.updatePriority(new fD(n))),o.forEachChild(So,(a,l)=>{const h=U7(l,t.getImmediateChild(a),e);h!==l&&(s=s.updateImmediateChild(a,h))}),s}}class W7{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function O2(r,t){let e=t instanceof Rs?t:new Rs(t),i=r,n=Dr(e);for(;null!==n;){const s=(0,re.DV)(i.node.children,n)||{children:{},childCount:0};i=new W7(n,i,s),e=ao(e),n=Dr(e)}return i}function ES(r){return r.node.value}function q7(r,t){r.node.value=t,G7(r)}function kle(r){return r.node.childCount>0}function P2(r,t){ql(r.node.children,(e,i)=>{t(new W7(e,r,i))})}function Rle(r,t,e,i){e&&!i&&t(r),P2(r,n=>{Rle(n,t,!0,i)}),e&&i&&t(r)}function _L(r){return new Rs(null===r.parent?r.name:_L(r.parent)+"/"+r.name)}function G7(r){null!==r.parent&&function QRe(r,t,e){const i=function ZRe(r){return void 0===ES(r)&&!kle(r)}(e),n=(0,re.r3)(r.node.children,t);i&&n?(delete r.node.children[t],r.node.childCount--,G7(r)):!i&&!n&&(r.node.children[t]=e.node,r.node.childCount++,G7(r))}(r.parent,r.name,r)}const JRe=/[\[\].#$\/\u0000-\u001F\u007F]/,eMe=/[\[\].#$\u0000-\u001F\u007F]/,K7=10485760,F2=function(r){return"string"==typeof r&&0!==r.length&&!JRe.test(r)},Mle=function(r){return"string"==typeof r&&0!==r.length&&!eMe.test(r)},kL=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!l2(r)||r&&"object"==typeof r&&(0,re.r3)(r,".sv")},Wg=function(r,t,e,i){i&&void 0===t||RL((0,re.gK)(r,"value"),t,e)},RL=function(r,t,e){const i=e instanceof Rs?new mke(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+yS(i));if("function"==typeof t)throw new Error(r+"contains a function "+yS(i)+" with contents = "+t.toString());if(l2(t))throw new Error(r+"contains "+t.toString()+" "+yS(i));if("string"==typeof t&&t.length>K7/3&&(0,re.ug)(t)>K7)throw new Error(r+"contains a string greater than "+K7+" utf8 bytes "+yS(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,s=!1;if(ql(t,(o,a)=>{if(".value"===o)n=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!F2(o)))throw new Error(r+" contains an invalid key ("+o+") "+yS(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vke(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,re.ug)(t),Bae(r)})(i,o),RL(r,a,i),function yke(r){const t=r.parts_.pop();r.byteLength_-=(0,re.ug)(t),r.parts_.length>0&&(r.byteLength_-=1)}(i)}),n&&s)throw new Error(r+' contains ".value" child '+yS(i)+" in addition to actual children.")}},Lle=function(r,t,e,i){if(i&&void 0===t)return;const n=(0,re.gK)(r,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(n+" must be an object containing the children to replace.");const s=[];ql(t,(o,a)=>{const l=new Rs(o);if(RL(n,a,Zo(e,l)),".priority"===l7(l)&&!kL(a))throw new Error(n+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(r,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=gL(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!F2(s[o]))throw new Error(r+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(gke);let n=null;for(e=0;e<t.length;e++){if(i=t[e],null!==n&&hp(n,i))throw new Error(r+"contains a path "+n.toString()+" that is ancestor of another path "+i.toString());n=i}}(n,s)},$7=function(r,t,e){if(!e||void 0!==t){if(l2(t))throw new Error((0,re.gK)(r,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!kL(t))throw new Error((0,re.gK)(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ML=function(r,t,e,i){if(!(i&&void 0===e||F2(e)))throw new Error((0,re.gK)(r,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},LL=function(r,t,e,i){if(!(i&&void 0===e||Mle(e)))throw new Error((0,re.gK)(r,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},cp=function(r,t){if(".info"===Dr(t))throw new Error(r+" failed = Can't modify data under /.info/")},Ole=function(r,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!F2(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Mle(r)}(e))throw new Error((0,re.gK)(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class rMe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function N2(r,t){let e=null;for(let i=0;i<t.length;i++){const n=t[i],s=n.getPath();null!==e&&!h7(s,e.path)&&(r.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(n)}e&&r.eventLists_.push(e)}function Ple(r,t,e){N2(r,e),Fle(r,i=>h7(i,t))}function Zc(r,t,e){N2(r,e),Fle(r,i=>hp(i,t)||hp(t,i))}function Fle(r,t){r.recursionDepth_++;let e=!0;for(let i=0;i<r.eventLists_.length;i++){const n=r.eventLists_[i];n&&(t(n.path)?(sMe(r.eventLists_[i]),r.eventLists_[i]=null):e=!1)}e&&(r.eventLists_=[]),r.recursionDepth_--}function sMe(r){for(let t=0;t<r.events.length;t++){const e=r.events[t];if(null!==e){r.events[t]=null;const i=e.getEventRunner();mS&&Wl("event: "+e.toString()),dD(i)}}}const Nle="repo_interrupt";class aMe{constructor(t,e,i,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rMe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=C2(),this.transactionQueueTree_=new W7,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ble(r){const e=r.infoData_.getNode(new Rs(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function OL(r){return function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r}({timestamp:Ble(r)})}function Hle(r,t,e,i,n){r.dataUpdateCount++;const s=new Rs(t);e=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,e):e;let o=[];if(n)if(i){const l=(0,re.UI)(e,h=>ba(h));o=function zRe(r,t,e,i){const n=N7(r,i);if(n){const s=B7(n),o=s.path,a=s.queryId,l=cu(o,t),h=Eo.fromObject(e);return H7(r,o,new bD(T7(a),l,h))}return[]}(r.serverSyncTree_,s,l,n)}else{const l=ba(e);o=Tle(r.serverSyncTree_,s,l,n)}else if(i){const l=(0,re.UI)(e,h=>ba(h));o=function BRe(r,t,e){const i=Eo.fromObject(e);return wD(r,new bD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(r.serverSyncTree_,s,l)}else{const l=ba(e);o=DL(r.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ED(r,s)),Zc(r.eventQueue_,a,o)}function Vle(r,t){Y7(r,"connected",t),!1===t&&function dMe(r){SD(r,"onDisconnectEvents");const t=OL(r),e=C2();w7(r.onDisconnect_,ms(),(n,s)=>{const o=_le(n,s,r.serverSyncTree_,t);yD(e,n,o)});let i=[];w7(e,ms(),(n,s)=>{i=i.concat(DL(r.serverSyncTree_,n,s));const o=J7(r,n);ED(r,o)}),r.onDisconnect_=C2(),Zc(r.eventQueue_,ms(),i)}(r)}function Y7(r,t,e){const i=new Rs("/.info/"+t),n=ba(e);r.infoData_.updateSnapshot(i,n);const s=DL(r.infoSyncTree_,i,n);Zc(r.eventQueue_,i,s)}function B2(r){return r.nextWriteId_++}function Z7(r,t,e,i,n){SD(r,"set",{path:t.toString(),value:e,priority:i});const s=OL(r),o=ba(e,i),a=M2(r.serverSyncTree_,t),l=j7(o,a,s),h=B2(r),u=P7(r.serverSyncTree_,t,l,h,!0);N2(r.eventQueue_,u),r.server_.put(t.toString(),o.val(!0),(m,y)=>{const C="ok"===m;C||Mh("set at "+t+" failed: "+m);const S=pC(r.serverSyncTree_,h,!C);Zc(r.eventQueue_,t,S),fC(0,n,m,y)});const d=J7(r,t);ED(r,d),Zc(r.eventQueue_,d,[])}function pMe(r,t,e){r.server_.onDisconnectCancel(t.toString(),(i,n)=>{"ok"===i&&C7(r.onDisconnect_,t),fC(0,e,i,n)})}function zle(r,t,e,i){const n=ba(e);r.server_.onDisconnectPut(t.toString(),n.val(!0),(s,o)=>{"ok"===s&&yD(r.onDisconnect_,t,n),fC(0,i,s,o)})}function X7(r,t,e){let i;i=".info"===Dr(t._path)?R2(r.infoSyncTree_,t,e):R2(r.serverSyncTree_,t,e),Ple(r.eventQueue_,t._path,i)}function jle(r){r.persistentConnection_&&r.persistentConnection_.interrupt(Nle)}function SD(r,...t){let e="";r.persistentConnection_&&(e=r.persistentConnection_.id+":"),Wl(e,...t)}function fC(r,t,e,i){t&&dD(()=>{if("ok"===e)t(null);else{const n=(e||"error").toUpperCase();let s=n;i&&(s+=": "+i);const o=new Error(s);o.code=n,t(o)}})}function Q7(r,t,e){return M2(r.serverSyncTree_,t,e)||rr.EMPTY_NODE}function H2(r,t=r.transactionQueueTree_){if(t||V2(r,t),ES(t)){const e=Wle(r,t);(0,re.hu)(e.length>0,"Sending zero length transaction queue"),e.every(n=>0===n.status)&&function bMe(r,t,e){const i=e.map(h=>h.currentWriteId),n=Q7(r,t,i);let s=n;const o=n.hash();for(let h=0;h<e.length;h++){const u=e[h];(0,re.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=cu(t,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;r.server_.put(l.toString(),a,h=>{SD(r,"transaction put response",{path:l.toString(),status:h});let u=[];if("ok"===h){const d=[];for(let m=0;m<e.length;m++)e[m].status=2,u=u.concat(pC(r.serverSyncTree_,e[m].currentWriteId)),e[m].onComplete&&d.push(()=>e[m].onComplete(null,!0,e[m].currentOutputSnapshotResolved)),e[m].unwatcher();V2(r,O2(r.transactionQueueTree_,t)),H2(r,r.transactionQueueTree_),Zc(r.eventQueue_,t,u);for(let m=0;m<d.length;m++)dD(d[m])}else{if("datastale"===h)for(let d=0;d<e.length;d++)e[d].status=3===e[d].status?4:0;else{Mh("transaction at "+l.toString()+" failed: "+h);for(let d=0;d<e.length;d++)e[d].status=4,e[d].abortReason=h}ED(r,t)}},o)}(r,_L(t),e)}else kle(t)&&P2(t,e=>{H2(r,e)})}function ED(r,t){const e=Ule(r,t),i=_L(e);return function CMe(r,t,e){if(0===t.length)return;const i=[];let n=[];const o=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],h=cu(e,l.path);let d,u=!1;if((0,re.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,n=n.concat(pC(r.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",n=n.concat(pC(r.serverSyncTree_,l.currentWriteId,!0));else{const m=Q7(r,l.path,o);l.currentInputSnapshot=m;const y=t[a].update(m.val());if(void 0!==y){RL("transaction failed: Data returned ",y,l.path);let C=ba(y);"object"==typeof y&&null!=y&&(0,re.r3)(y,".priority")||(C=C.updatePriority(m.getPriority()));const I=l.currentWriteId,k=OL(r),O=j7(C,m,k);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=O,l.currentWriteId=B2(r),o.splice(o.indexOf(I),1),n=n.concat(P7(r.serverSyncTree_,l.path,O,l.currentWriteId,l.applyLocally)),n=n.concat(pC(r.serverSyncTree_,I,!0))}else u=!0,d="nodata",n=n.concat(pC(r.serverSyncTree_,l.currentWriteId,!0))}Zc(r.eventQueue_,e,n),n=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===d?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(d),!1,null)))}V2(r,r.transactionQueueTree_);for(let a=0;a<i.length;a++)dD(i[a]);H2(r,r.transactionQueueTree_)}(r,Wle(r,e),i),i}function Ule(r,t){let e,i=r.transactionQueueTree_;for(e=Dr(t);null!==e&&void 0===ES(i);)i=O2(i,e),e=Dr(t=ao(t));return i}function Wle(r,t){const e=[];return qle(r,t,e),e.sort((i,n)=>i.order-n.order),e}function qle(r,t,e){const i=ES(t);if(i)for(let n=0;n<i.length;n++)e.push(i[n]);P2(t,n=>{qle(r,n,e)})}function V2(r,t){const e=ES(t);if(e){let i=0;for(let n=0;n<e.length;n++)2!==e[n].status&&(e[i]=e[n],i++);e.length=i,q7(t,e.length>0?e:void 0)}P2(t,i=>{V2(r,i)})}function J7(r,t){const e=_L(Ule(r,t)),i=O2(r.transactionQueueTree_,t);return function XRe(r,t,e){let i=e?r:r.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,n=>{e9(r,n)}),e9(r,i),Rle(i,n=>{e9(r,n)}),e}function e9(r,t){const e=ES(t);if(e){const i=[];let n=[],s=-1;for(let o=0;o<e.length;o++)3===e[o].status||(1===e[o].status?((0,re.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):((0,re.hu)(0===e[o].status,"Unexpected transaction status in abort"),e[o].unwatcher(),n=n.concat(pC(r.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?q7(t,void 0):e.length=s+1,Zc(r.eventQueue_,_L(t),n);for(let o=0;o<i.length;o++)dD(i[o])}}const t9=function(r,t){const e=EMe(r),i=e.namespace;return"firebase.com"===e.domain&&zg(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&zg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Mh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new i7(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Rs(e.pathString)}},EMe=function(r){let t="",e="",i="",n="",s="",o=!0,a="https",l=443;if("string"==typeof r){let h=r.indexOf("//");h>=0&&(a=r.substring(0,h-1),r=r.substring(h+2));let u=r.indexOf("/");-1===u&&(u=r.length);let d=r.indexOf("?");-1===d&&(d=r.length),t=r.substring(0,Math.min(u,d)),u<d&&(n=function wMe(r){let t="";const e=r.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let n=e[i];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch{}t+="/"+n}return t}(r.substring(u,d)));const m=function SMe(r){const t={};"?"===r.charAt(0)&&(r=r.substring(1));for(const e of r.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Mh(`Invalid query segment '${e}' in query '${r}'`)}return t}(r.substring(Math.min(r.length,d)));h=t.indexOf(":"),h>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(h+1),10)):h=t.length;const y=t.slice(0,h);if("localhost"===y.toLowerCase())e="localhost";else if(y.split(".").length<=2)e=y;else{const C=t.indexOf(".");i=t.substring(0,C).toLowerCase(),e=t.substring(C+1),s=i}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:e,subdomain:i,secure:o,scheme:a,pathString:n,namespace:s}};class Gle{constructor(t,e,i,n){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=n}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Wl)(this.snapshot.exportVal())}}class Kle{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class i9{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class $le{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new re.BH;return pMe(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){cp("OnDisconnect.remove",this._path);const t=new re.BH;return zle(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){cp("OnDisconnect.set",this._path),Wg("OnDisconnect.set",t,this._path,!1);const e=new re.BH;return zle(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){cp("OnDisconnect.setWithPriority",this._path),Wg("OnDisconnect.setWithPriority",t,this._path,!1),$7("OnDisconnect.setWithPriority",e,!1);const i=new re.BH;return function fMe(r,t,e,i,n){const s=ba(e,i);r.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{"ok"===o&&yD(r.onDisconnect_,t,s),fC(0,n,o,a)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){cp("OnDisconnect.update",this._path),Lle("OnDisconnect.update",t,this._path,!1);const e=new re.BH;return function gMe(r,t,e,i){if((0,re.xb)(e))return Wl("onDisconnect().update() called with empty data.  Don't do anything."),void fC(0,i,"ok",void 0);r.server_.onDisconnectMerge(t.toString(),e,(n,s)=>{"ok"===n&&ql(e,(o,a)=>{const l=ba(a);yD(r.onDisconnect_,Zo(t,o),l)}),fC(0,i,n,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class ac{constructor(t,e,i,n){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=n}get key(){return Ir(this._path)?null:l7(this._path)}get ref(){return new dp(this._repo,this._path)}get _queryIdentifier(){const t=Jae(this._queryParams),e=JG(t);return"{}"===e?"default":e}get _queryObject(){return Jae(this._queryParams)}isEqual(t){if(!((t=(0,re.m9)(t))instanceof ac))return!1;const e=this._repo===t._repo,i=h7(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function fke(r){let t="";for(let e=r.pieceNum_;e<r.pieces_.length;e++)""!==r.pieces_[e]&&(t+="/"+encodeURIComponent(String(r.pieces_[e])));return t||"/"}(this._path)}}function z2(r,t){if(!0===r._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function gC(r){let t=null,e=null;if(r.hasStart()&&(t=r.getIndexStartValue()),r.hasEnd()&&(e=r.getIndexEndValue()),r.getIndex()===Ug){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",n="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==Ov)throw new Error(i);if("string"!=typeof t)throw new Error(n)}if(r.hasEnd()){if(r.getIndexEndName()!==jg)throw new Error(i);if("string"!=typeof e)throw new Error(n)}}else if(r.getIndex()===So){if(null!=t&&!kL(t)||null!=e&&!kL(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(r.getIndex()instanceof f7||r.getIndex()===g7,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function j2(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class dp extends ac{constructor(t,e){super(t,e,new v2,!1)}get parent(){const t=Nae(this._path);return null===t?null:new dp(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class TS{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Rs(t),i=qg(this.ref,t);return new TS(this._node.getChild(e),i,So)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,n)=>t(new TS(n,qg(this.ref,i),So)))}hasChild(t){const e=new Rs(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function PL(r,t){return(r=(0,re.m9)(r))._checkNotDeleted("ref"),void 0!==t?qg(r._root,t):r._root}function Yle(r,t){(r=(0,re.m9)(r))._checkNotDeleted("refFromURL");const e=t9(t,r._repo.repoInfo_.nodeAdmin);Ole("refFromURL",e);const i=e.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&i.host!==r._repo.repoInfo_.host&&zg("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+r._repo.repoInfo_.host+")"),PL(r,e.path.toString())}function qg(r,t){return null===Dr((r=(0,re.m9)(r))._path)?function(r,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),LL("child","path",e,!1)}(0,0,t):LL("child","path",t,!1),new dp(r._repo,Zo(r._path,t))}function n9(r,t){r=(0,re.m9)(r),cp("set",r._path),Wg("set",t,r._path,!1);const e=new re.BH;return Z7(r._repo,r._path,t,null,e.wrapCallback(()=>{})),e.promise}function AMe(r,t){Lle("update",t,r._path,!1);const e=new re.BH;return function cMe(r,t,e,i){SD(r,"update",{path:t.toString(),value:e});let n=!0;const s=OL(r),o={};if(ql(e,(a,l)=>{n=!1,o[a]=_le(Zo(t,a),ba(l),r.serverSyncTree_,s)}),n)Wl("update() called with empty data.  Don't do anything."),fC(0,i,"ok",void 0);else{const a=B2(r),l=function NRe(r,t,e,i){!function eRe(r,t,e,i){(0,re.hu)(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:e,writeId:i,visible:!0}),r.visibleWrites=D7(r.visibleWrites,t,e),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i);const n=Eo.fromObject(e);return wD(r,new bD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n))}(r.serverSyncTree_,t,o,a);N2(r.eventQueue_,l),r.server_.merge(t.toString(),e,(h,u)=>{const d="ok"===h;d||Mh("update at "+t+" failed: "+h);const m=pC(r.serverSyncTree_,a,!d),y=m.length>0?ED(r,t):t;Zc(r.eventQueue_,y,m),fC(0,i,h,u)}),ql(e,h=>{const u=J7(r,Zo(t,h));ED(r,u)}),Zc(r.eventQueue_,t,[])}}(r._repo,r._path,t,e.wrapCallback(()=>{})),e.promise}function U2(r){r=(0,re.m9)(r);const t=new i9(()=>{}),e=new FL(t);return function uMe(r,t,e){const i=function jRe(r,t){const e=t._path;let i=null;r.syncPointTree_.foreachOnPath(e,(h,u)=>{const d=cu(h,e);i=i||cC(u,d)});let n=r.syncPointTree_.get(e);n?i=i||cC(n,ms()):(n=new yle,r.syncPointTree_=r.syncPointTree_.set(e,n));const s=null!=i,o=s?new hC(i,!0,!1):null;return function xRe(r){return E2(r.viewCache_)}(ble(n,t,T2(r.pendingWriteTree_,t._path),s?o.getNode():rr.EMPTY_NODE,s))}(r.serverSyncTree_,t);return null!=i?Promise.resolve(i):r.server_.get(t).then(n=>{const s=ba(n).withIndex(t._queryParams.getIndex());let o;if(F7(r.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())o=DL(r.serverSyncTree_,t._path,s);else{const a=IL(r.serverSyncTree_,t);o=Tle(r.serverSyncTree_,t._path,s,a)}return Zc(r.eventQueue_,t._path,o),R2(r.serverSyncTree_,t,e,null,!0),s},n=>(SD(r,"get for query "+(0,re.Wl)(t)+" failed: "+n),Promise.reject(new Error(n))))}(r._repo,r,e).then(i=>new TS(i,new dp(r._repo,r._path),r._queryParams.getIndex()))}class FL{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Gle("value",this,new TS(t.snapshotNode,new dp(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Kle(this,t,e):null}matches(t){return t instanceof FL&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class W2{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Kle(this,t,e):null}createEvent(t,e){(0,re.hu)(null!=t.childName,"Child events should have a childName.");const i=qg(new dp(e._repo,e._path),t.childName),n=e._queryParams.getIndex();return new Gle(t.type,this,new TS(t.snapshotNode,i,n),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof W2&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function NL(r,t,e,i,n){let s;if("object"==typeof i&&(s=void 0,n=i),"function"==typeof i&&(s=i),n&&n.onlyOnce){const l=e,h=(u,d)=>{X7(r._repo,r,a),l(u,d)};h.userCallback=e.userCallback,h.context=e.context,e=h}const o=new i9(e,s||void 0),a="value"===t?new FL(o):new W2(t,o);return function mMe(r,t,e){let i;i=".info"===Dr(t._path)?F7(r.infoSyncTree_,t,e):F7(r.serverSyncTree_,t,e),Ple(r.eventQueue_,t._path,i)}(r._repo,r,a),()=>X7(r._repo,r,a)}function r9(r,t,e,i){return NL(r,"value",t,e,i)}function Zle(r,t,e,i){return NL(r,"child_added",t,e,i)}function Xle(r,t,e,i){return NL(r,"child_changed",t,e,i)}function Qle(r,t,e,i){return NL(r,"child_moved",t,e,i)}function Jle(r,t,e,i){return NL(r,"child_removed",t,e,i)}function ehe(r,t,e){let i=null;const n=e?new i9(e):null;"value"===t?i=new FL(n):t&&(i=new W2(t,n)),X7(r._repo,r,i)}class Hf{}class the extends Hf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wg("endAt",this._value,t._path,!0);const e=b7(t._queryParams,this._value,this._key);if(j2(e),gC(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ac(t._repo,t._path,e,t._orderByCalled)}}class kMe extends Hf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wg("endBefore",this._value,t._path,!1);const e=function zke(r,t,e){let i,n;return r.index_===Ug?("string"==typeof t&&(t=Zae(t)),n=b7(r,t,e)):(i=null==e?Ov:Zae(e),n=b7(r,t,i)),n.endBeforeSet_=!0,n}(t._queryParams,this._value,this._key);if(j2(e),gC(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ac(t._repo,t._path,e,t._orderByCalled)}}class ihe extends Hf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wg("startAt",this._value,t._path,!0);const e=y7(t._queryParams,this._value,this._key);if(j2(e),gC(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ac(t._repo,t._path,e,t._orderByCalled)}}class LMe extends Hf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Wg("startAfter",this._value,t._path,!1);const e=function Vke(r,t,e){let i;if(r.index_===Ug)"string"==typeof t&&(t=Yae(t)),i=y7(r,t,e);else{let n;n=null==e?jg:Yae(e),i=y7(r,t,n)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(j2(e),gC(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ac(t._repo,t._path,e,t._orderByCalled)}}class PMe extends Hf{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ac(t._repo,t._path,function Bke(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class NMe extends Hf{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ac(t._repo,t._path,function Hke(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class HMe extends Hf{constructor(t){super(),this._path=t}_apply(t){z2(t,"orderByChild");const e=new Rs(this._path);if(Ir(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new f7(e),n=y2(t._queryParams,i);return gC(n),new ac(t._repo,t._path,n,!0)}}class zMe extends Hf{_apply(t){z2(t,"orderByKey");const e=y2(t._queryParams,Ug);return gC(e),new ac(t._repo,t._path,e,!0)}}class UMe extends Hf{_apply(t){z2(t,"orderByPriority");const e=y2(t._queryParams,So);return gC(e),new ac(t._repo,t._path,e,!0)}}class qMe extends Hf{_apply(t){z2(t,"orderByValue");const e=y2(t._queryParams,g7);return gC(e),new ac(t._repo,t._path,e,!0)}}class KMe extends Hf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Wg("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new the(this._value,this._key)._apply(new ihe(this._value,this._key)._apply(t))}}function Vf(r,...t){let e=(0,re.m9)(r);for(const i of t)e=i._apply(e);return e}(function _Re(r){(0,re.hu)(!A2,"__referenceConstructor has already been defined"),A2=r})(dp),function ORe(r){(0,re.hu)(!k2,"__referenceConstructor has already been defined"),k2=r}(dp);const s9={};function rhe(r,t,e,i,n){let s=i||r.options.databaseURL;void 0===s&&(r.options.projectId||zg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wl("Using default host for project ",r.options.projectId),s=`${r.options.projectId}-default-rtdb.firebaseio.com`);let l,h,o=t9(s,n),a=o.repoInfo;typeof process<"u"&&process.env&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(l=!0,s=`http://${h}?ns=${a.namespace}`,o=t9(s,n),a=o.repoInfo):l=!o.repoInfo.secure;const u=n&&l?new fL(fL.OWNER):new U_e(r.name,r.options,t);Ole("Invalid Firebase Database URL",o),Ir(o.path)||zg("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function QMe(r,t,e,i){let n=s9[t.name];n||(n={},s9[t.name]=n);let s=n[r.toURLString()];return s&&zg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new aMe(r,false,e,i),n[r.toURLString()]=s,s}(a,r,u,new j_e(r.name,e));return new eLe(d,r)}class eLe{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function lMe(r,t,e){if(r.stats_=s7(r.repoInfo_),r.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)r.server_=new b2(r.repoInfo_,(i,n,s,o)=>{Hle(r,i,n,s,o)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Vle(r,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new bS(r.repoInfo_,t,(i,n,s,o)=>{Hle(r,i,n,s,o)},i=>{Vle(r,i)},i=>{!function hMe(r,t){ql(t,(e,i)=>{Y7(r,e,i)})}(r,i)},r.authTokenProvider_,r.appCheckProvider_,e),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=function G_e(r,t){const e=r.toString();return r7[e]||(r7[e]=t()),r7[e]}(r.repoInfo_,()=>new Kke(r.stats_,r.server_)),r.infoData_=new jke,r.infoSyncTree_=new Ele({startListening:(i,n,s,o)=>{let a=[];const l=r.infoData_.getNode(i._path);return l.isEmpty()||(a=DL(r.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Y7(r,"connected",!1),r.serverSyncTree_=new Ele({startListening:(i,n,s,o)=>(r.server_.listen(i,s,n,(a,l)=>{const h=o(a,l);Zc(r.eventQueue_,i._path,h)}),[]),stopListening:(i,n)=>{r.server_.unlisten(i,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new dp(this._repo,ms())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function XMe(r,t){const e=s9[t];(!e||e[r.key]!==r)&&zg(`Database ${t}(${r.repoInfo_}) has already been deleted.`),jle(r),delete e[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&zg("Cannot call "+t+" on a deleted database.")}}function she(){xae.IS_TRANSPORT_INITIALIZED&&Mh("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function tLe(){she(),aC.forceDisallow()}function iLe(){she(),pD.forceDisallow(),aC.forceAllow()}function o9(r=(0,Ha.getApp)(),t){const e=(0,Ha._getProvider)(r,"database").getImmediate({identifier:t}),i=(0,re.P0)("database");return i&&ohe(e,...i),e}function ohe(r,t,e,i={}){(r=(0,re.m9)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&zg("Cannot call useEmulator() after instance has already been initialized.");const n=r._repoInternal;let s;if(n.repoInfo_.nodeAdmin)i.mockUserToken&&zg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new fL(fL.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,re.Sg)(i.mockUserToken,r.app.options.projectId);s=new fL(o)}!function ZMe(r,t,e,i){r.repoInfo_=new i7(`${t}:${e}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams),i&&(r.authTokenProvider_=i)}(n,t,e,s)}function sLe(r,t){sae(r,t)}const aLe={".sv":"timestamp"};class uLe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}bS.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)},bS.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)},function oLe(r){eae(Ha.SDK_VERSION),(0,Ha._registerComponent)(new Bu.wA("database",(t,{instanceIdentifier:e})=>rhe(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Ha.registerVersion)(Qoe,"0.13.10",r),(0,Ha.registerVersion)(Qoe,"0.13.10","esm2017")}();var a9=ne(4986),l9=ne(6451),ahe=ne(3099);function lhe(r,t=fg.y){return r=r??dLe,(0,Xa.e)((e,i)=>{let n,s=!0;e.subscribe((0,co.x)(i,o=>{const a=t(o);(s||!r(n,a))&&(s=!1,n=a,i.next(o))}))})}function dLe(r,t){return r===t}var pLe=ne(5032),vs=ne(880),Tl=ne(2011),h9=(ne(5881),ne(3942));const yLe=new Nu.Yd("@firebase/database-compat"),hhe=function(r){yLe.warn("FIREBASE WARNING: "+r)};class wLe{constructor(t){this._delegate=t}cancel(t){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const n=this._delegate.setWithPriority(t,e);return i&&n.then(()=>i(null),s=>i(s)),n}update(t,e){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,hhe("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),n=>e(n)),i}}class SLe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class mC{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),LL("DataSnapshot.child","path",t,!1),new mC(this._database,this._delegate.child(t))}hasChild(t){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),LL("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new mC(this._database,e)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new Xc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class gh{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,n){var s;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",e,!1);const o=gh.getCancelAndContextArgs_("Query.on",i,n),a=(h,u)=>{e.call(o.context,new mC(this.database,h),u)};a.userCallback=e,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(t){case"value":return r9(this._delegate,a,l),e;case"child_added":return Zle(this._delegate,a,l),e;case"child_removed":return Jle(this._delegate,a,l),e;case"child_changed":return Xle(this._delegate,a,l),e;case"child_moved":return Qle(this._delegate,a,l),e;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,re.Dv)("Query.off",0,3,arguments.length),function(r,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,re.Wj)("Query.off","callback",e,!0),(0,re.lb)("Query.off","context",i,!0),e){const n=()=>{};n.userCallback=e,n.context=i,ehe(this._delegate,t,n)}else ehe(this._delegate,t)}get(){return U2(this._delegate).then(t=>new mC(this.database,t))}once(t,e,i,n){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",e,!0);const s=gh.getCancelAndContextArgs_("Query.once",i,n),o=new re.BH,a=(h,u)=>{const d=new mC(this.database,h);e&&e.call(s.context,d,u),o.resolve(d)};a.userCallback=e,a.context=s.context;const l=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(t){case"value":r9(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Zle(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Jle(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Xle(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Qle(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new gh(this.database,Vf(this._delegate,function FMe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new PMe(r)}(t)))}limitToLast(t){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new gh(this.database,Vf(this._delegate,function BMe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new NMe(r)}(t)))}orderByChild(t){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new gh(this.database,Vf(this._delegate,function VMe(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return LL("orderByChild","path",r,!1),new HMe(r)}(t)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new gh(this.database,Vf(this._delegate,function jMe(){return new zMe}()))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new gh(this.database,Vf(this._delegate,function WMe(){return new UMe}()))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new gh(this.database,Vf(this._delegate,function GMe(){return new qMe}()))}startAt(t=null,e){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new gh(this.database,Vf(this._delegate,function MMe(r=null,t){return ML("startAt","key",t,!0),new ihe(r,t)}(t,e)))}startAfter(t=null,e){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new gh(this.database,Vf(this._delegate,function OMe(r,t){return ML("startAfter","key",t,!0),new LMe(r,t)}(t,e)))}endAt(t=null,e){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new gh(this.database,Vf(this._delegate,function _Me(r,t){return ML("endAt","key",t,!0),new the(r,t)}(t,e)))}endBefore(t=null,e){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new gh(this.database,Vf(this._delegate,function RMe(r,t){return ML("endBefore","key",t,!0),new kMe(r,t)}(t,e)))}equalTo(t,e){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new gh(this.database,Vf(this._delegate,function $Me(r,t){return ML("equalTo","key",t,!0),new KMe(r,t)}(t,e)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof gh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const n={cancel:void 0,context:void 0};if(e&&i)n.cancel=e,(0,re.Wj)(t,"cancel",n.cancel,!0),n.context=i,(0,re.lb)(t,"context",n.context,!0);else if(e)if("object"==typeof e&&null!==e)n.context=e;else{if("function"!=typeof e)throw new Error((0,re.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");n.cancel=e}return n}get ref(){return new Xc(this.database,new dp(this._delegate._repo,this._delegate._path))}}class Xc extends gh{constructor(t,e){super(t,new ac(e._repo,e._path,new v2,!1)),this.database=t,this._delegate=e}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Xc(this.database,qg(this._delegate,t))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Xc(this.database,t):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new Xc(this.database,this._delegate.root)}set(t,e){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",e,!0);const i=n9(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}update(t,e){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,hhe("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}cp("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",e,!0);const i=AMe(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",i,!0);const n=function IMe(r,t,e){if(cp("setWithPriority",r._path),Wg("setWithPriority",t,r._path,!1),$7("setWithPriority",e,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const i=new re.BH;return Z7(r._repo,r._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&n.then(()=>i(null),s=>i(s)),n}remove(t){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",t,!0);const e=function xMe(r){return cp("remove",r._path),n9(r,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,re.Wj)("Reference.transaction","onComplete",e,!0),function(r,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const n=function cLe(r,t,e){var i;if(r=(0,re.m9)(r),cp("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const n=null===(i=e?.applyLocally)||void 0===i||i,s=new re.BH,a=r9(r,()=>{});return function yMe(r,t,e,i,n,s){SD(r,"transaction on "+t);const o={path:t,update:e,onComplete:i,status:null,order:iae(),applyLocally:s,retryCount:0,unwatcher:n,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=Q7(r,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{RL("transaction failed: Data returned ",l,o.path),o.status=0;const h=O2(r.transactionQueueTree_,t),u=ES(h)||[];let d;u.push(o),q7(h,u),"object"==typeof l&&null!==l&&(0,re.r3)(l,".priority")?(d=(0,re.DV)(l,".priority"),(0,re.hu)(kL(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(M2(r.serverSyncTree_,t)||rr.EMPTY_NODE).getPriority().val();const m=OL(r),y=ba(l,d),C=j7(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=C,o.currentWriteId=B2(r);const S=P7(r.serverSyncTree_,t,C,o.currentWriteId,o.applyLocally);Zc(r.eventQueue_,t,S),H2(r,r.transactionQueueTree_)}}(r._repo,r._path,t,(l,h,u)=>{let d=null;l?s.reject(l):(d=new TS(u,new dp(r._repo,r._path),So),s.resolve(new uLe(h,d)))},a,n),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new SLe(s.committed,new mC(this.database,s.snapshot)));return e&&n.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),n}setPriority(t,e){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",e,!0);const i=function DMe(r,t){r=(0,re.m9)(r),cp("setPriority",r._path),$7("setPriority",t,!1);const e=new re.BH;return Z7(r._repo,Zo(r._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}push(t,e){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",e,!0);const i=function TMe(r,t){r=(0,re.m9)(r),cp("push",r._path),Wg("push",t,r._path,!0);const e=Ble(r._repo),i=Oke(e),n=qg(r,i),s=qg(r,i);let o;return o=null!=t?n9(s,t).then(()=>s):Promise.resolve(s),n.then=o.then.bind(o),n.catch=o.then.bind(o,void 0),n}(this._delegate,t),n=i.then(o=>new Xc(this.database,o));e&&n.then(()=>e(null),o=>e(o));const s=new Xc(this.database,i);return s.then=n.then.bind(n),s.catch=n.catch.bind(n,void 0),s}onDisconnect(){return cp("Reference.onDisconnect",this._delegate._path),new wLe(new $le(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class BL{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:tLe,forceLongPolling:iLe}}useEmulator(t,e,i={}){ohe(this._delegate,t,e,i)}ref(t){if((0,re.Dv)("database.ref",0,1,arguments.length),t instanceof Xc){const e=Yle(this._delegate,t.toString());return new Xc(this,e)}{const e=PL(this._delegate,t);return new Xc(this,e)}}refFromURL(t){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const i=Yle(this._delegate,t);return new Xc(this,i)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function nLe(r){(r=(0,re.m9)(r))._checkNotDeleted("goOffline"),jle(r._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function rLe(r){(r=(0,re.m9)(r))._checkNotDeleted("goOnline"),function vMe(r){r.persistentConnection_&&r.persistentConnection_.resume(Nle)}(r._repo)}(this._delegate)}}BL.ServerValue={TIMESTAMP:function lLe(){return aLe}(),increment:r=>function hLe(r){return{".sv":{increment:r}}}(r)};var TLe=Object.freeze({__proto__:null,initStandalone:function ELe({app:r,url:t,version:e,customAuthImpl:i,namespace:n,nodeAdmin:s=!1}){eae(e);const o=new Bu.zt("auth-internal",new Bu.H0("database-standalone"));return o.setComponent(new Bu.wA("auth-internal",()=>i,"PRIVATE")),{instance:new BL(rhe(r,o,void 0,t,s),r),namespace:n}}});const xLe=BL.ServerValue;!function DLe(r){r.INTERNAL.registerComponent(new Bu.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),n=t.getProvider("database").getImmediate({identifier:e});return new BL(n,i)},"PUBLIC").setServiceProps({Reference:Xc,Query:gh,Database:BL,DataSnapshot:mC,enableLogging:sLe,INTERNAL:TLe,ServerValue:xLe}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","0.2.10")}(h9.Z);var q2=ne(5363),ILe=ne(6063);class ALe extends Mu.x{constructor(t=1/0,e=1/0,i=ILe.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:n,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!n&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:n}=this,s=n.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:n}=this,s=(n?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!n){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function uhe(r,t,e){let i,n=!1;return r&&"object"==typeof r?({bufferSize:i=1/0,windowTime:t=1/0,refCount:n=!1,scheduler:e}=r):i=r??1/0,(0,ahe.B)({connector:()=>new ALe(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function che(r,t){return(0,FE.m)(t)?sa(()=>r,t):sa(()=>r)}var u9=ne(9468),c9=ne(5867);const p9=new Map,dhe={activated:!1,tokenObservers:[]},LLe={initialized:!1,enabled:!1};function mh(r){return p9.get(r)||Object.assign({},dhe)}function K2(){return LLe}class HLe{constructor(t,e,i,n,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=n,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=n,n>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Ct.Z)(function*(){e.stop();try{e.pending=new re.BH,yield function VLe(r){return new Promise(t=>{setTimeout(t,r)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new re.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const du=new re.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function fhe(r){if(!mh(r).activated)throw du.create("use-before-activation",{appName:r.name})}function m9(r,t){return v9.apply(this,arguments)}function v9(){return v9=(0,Ct.Z)(function*({url:r,body:t},e){var i,n;const s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const y=yield o.getHeartbeatsHeader();y&&(s["X-Firebase-Client"]=y)}const a={method:"POST",body:JSON.stringify(t),headers:s};let l,h;try{l=yield fetch(r,a)}catch(y){throw du.create("fetch-network-error",{originalErrorMessage:null===(i=y)||void 0===i?void 0:i.message})}if(200!==l.status)throw du.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(y){throw du.create("fetch-parse-error",{originalErrorMessage:null===(n=y)||void 0===n?void 0:n.message})}const u=h.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw du.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const d=1e3*Number(u[1]),m=Date.now();return{token:h.token,expireTimeMillis:m+d,issuedAtTimeMillis:m}}),v9.apply(this,arguments)}function WLe(r,t){const{projectId:e,appId:i,apiKey:n}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${n}`,body:{debug_token:t}}}const HL="firebase-app-check-store";let Z2=null;function mhe(){return Z2||(Z2=new Promise((r,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=n=>{r(n.target.result)},i.onerror=n=>{var s;t(du.create("storage-open",{originalErrorMessage:null===(s=n.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=n=>{0===n.oldVersion&&n.target.result.createObjectStore(HL,{keyPath:"compositeKey"})}}catch(i){t(du.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),Z2)}function y9(){return y9=(0,Ct.Z)(function*(r,t){const i=(yield mhe()).transaction(HL,"readwrite"),s=i.objectStore(HL).put({compositeKey:r,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var h;a(du.create("storage-set",{originalErrorMessage:null===(h=l.target.error)||void 0===h?void 0:h.message}))}})}),y9.apply(this,arguments)}const VL=new Nu.Yd("@firebase/app-check");function w9(r,t){return(0,re.hl)()?function $Le(r,t){return function vhe(r,t){return y9.apply(this,arguments)}(function bhe(r){return`${r.options.appId}-${r.name}`}(r),t)}(r,t).catch(e=>{VL.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Che(){return K2().enabled}function whe(){return E9.apply(this,arguments)}function E9(){return E9=(0,Ct.Z)(function*(){const r=K2();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),E9.apply(this,arguments)}const eOe={error:"UNKNOWN_ERROR"};function tOe(r){return re.US.encodeString(JSON.stringify(r),!1)}function X2(r){return T9.apply(this,arguments)}function T9(){return T9=(0,Ct.Z)(function*(r,t=!1){const e=r.app;fhe(e);const i=mh(e);let s,n=i.token;if(n&&!TD(n)&&(i.token=void 0,n=void 0),!n){const l=yield i.cachedTokenPromise;l&&(TD(l)?n=l:yield w9(e,void 0))}if(!t&&n&&TD(n))return{token:n.token};let a,o=!1;if(Che()){i.exchangeTokenPromise||(i.exchangeTokenPromise=m9(WLe(e,yield whe()),r.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const l=yield i.exchangeTokenPromise;return yield w9(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),n=yield mh(e).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?VL.warn(l.message):VL.error(l),s=l}return n?s?a=TD(n)?{token:n.token,internalError:s}:The(s):(a={token:n.token},i.token=n,yield w9(e,n)):a=The(s),o&&Ehe(e,a),a}),T9.apply(this,arguments)}function D9(r,t){const e=mh(r),i=e.tokenObservers.filter(n=>n.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function She(r){const{app:t}=r,e=mh(t);let i=e.tokenRefresher;i||(i=function iOe(r){const{app:t}=r;return new HLe((0,Ct.Z)(function*(){let i;if(i=mh(t).token?yield X2(r,!0):yield X2(r),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=mh(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(r),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function Ehe(r,t){const e=mh(r).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function TD(r){return r.expireTimeMillis-Date.now()>0}function The(r){return{token:tOe(eOe),error:r}}class nOe{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=mh(this.app);for(const e of t)D9(this.app,e.next);return Promise.resolve()}}const Mhe="app-check-internal";!function vOe(){(0,Ha._registerComponent)(new Bu.wA("app-check",r=>function rOe(r,t){return new nOe(r,t)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,t,e)=>{r.getProvider(Mhe).initialize()})),(0,Ha._registerComponent)(new Bu.wA(Mhe,r=>function sOe(r){return{getToken:t=>X2(r,t),addTokenListener:t=>function x9(r,t,e,i){const{app:n}=r,s=mh(n);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&TD(s.token)){const a=s.token;Promise.resolve().then(()=>{e({token:a.token}),She(r)}).catch(()=>{})}s.cachedTokenPromise.then(()=>She(r))}(r,"INTERNAL",t),removeTokenListener:t=>D9(r.app,t)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ha.registerVersion)("@firebase/app-check","0.5.17")}();class zL{constructor(){return(0,vs.vb)("app-check")}}typeof window<"u"&&window;var J2=ne(127);const R9=new v.OlP("angularfire2.auth.use-emulator"),M9=new v.OlP("angularfire2.auth.settings"),L9=new v.OlP("angularfire2.auth.tenant-id"),O9=new v.OlP("angularfire2.auth.langugage-code"),P9=new v.OlP("angularfire2.auth.use-device-language"),F9=new v.OlP("angularfire.auth.persistence"),N9=(r,t,e,i,n,s,o,a)=>(0,Tl.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const l=t.runOutsideAngular(()=>r.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=n,s&&l.useDeviceLanguage(),o)for(const[h,u]of Object.entries(o))l.settings[h]=u;return a&&l.setPersistence(a),l},[e,i,n,s,o,a]);let ez=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,y){const C=new Mu.x,S=$i(void 0).pipe((0,q2.Q)(o.outsideAngular),sa(()=>s.runOutsideAngular(()=>Promise.resolve().then(ne.bind(ne,5881)))),(0,en.U)(()=>(0,Tl.on)(e,s,i)),(0,en.U)(I=>N9(I,s,a,h,u,d,l,m)),uhe({bufferSize:1,refCount:!1}));if(Xf(n))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=$i(null);else{S.pipe(Up()).subscribe();const k=S.pipe(sa(B=>B.getRedirectResult().then(j=>j,()=>null)),vs.iC,uhe({bufferSize:1,refCount:!1})),O=S.pipe(sa(B=>new Za.y(j=>({unsubscribe:s.runOutsideAngular(()=>B.onAuthStateChanged(G=>j.next(G),G=>j.error(G),()=>j.complete()))})))),L=S.pipe(sa(B=>new Za.y(j=>({unsubscribe:s.runOutsideAngular(()=>B.onIdTokenChanged(G=>j.next(G),G=>j.error(G),()=>j.complete()))}))));this.authState=k.pipe(che(O),(0,u9.R)(o.outsideAngular),(0,q2.Q)(o.insideAngular)),this.user=k.pipe(che(L),(0,u9.R)(o.outsideAngular),(0,q2.Q)(o.insideAngular)),this.idToken=this.user.pipe(sa(B=>B?(0,Hr.D)(B.getIdToken()):$i(null))),this.idTokenResult=this.user.pipe(sa(B=>B?(0,Hr.D)(B.getIdTokenResult()):$i(null))),this.credential=(0,l9.T)(k,C,this.authState.pipe(Th(B=>!B))).pipe((0,en.U)(B=>B?.user?B:null),(0,u9.R)(o.outsideAngular),(0,q2.Q)(o.insideAngular))}return(0,Tl.pX)(this,S,s,{spy:{apply:(I,k,O)=>{(I.startsWith("signIn")||I.startsWith("createUser"))&&O.then(L=>C.next(L))}}})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vs.HU),v.LFG(R9,8),v.LFG(M9,8),v.LFG(L9,8),v.LFG(O9,8),v.LFG(P9,8),v.LFG(F9,8),v.LFG(zL,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),EOe=(()=>{class r{constructor(){J2.Z.registerVersion("angularfire",vs.q4.full,"auth-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[ez]}),r})();function Ohe(r){return null==r}function Phe(r){return"function"==typeof r.set}function Fhe(r,t){return Phe(t)?t:r.ref(t)}function Nhe(r,t){if(function TOe(r){return"string"==typeof r}(r))return t.stringCase();if(Phe(r))return t.firebaseCase();if(function xOe(r){return"function"==typeof r.exportVal}(r))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof r)}function jL(r,t,e="on",i=a9.z){return new Za.y(n=>{let s=null;return s=r[e](t,(o,a)=>{i.schedule(()=>{n.next({snapshot:o,prevKey:a})}),"once"===e&&i.schedule(()=>n.complete())},o=>{i.schedule(()=>n.error(o))}),"on"===e?{unsubscribe(){null!=s&&r.off(t,s)}}:{unsubscribe(){}}}).pipe((0,en.U)(n=>{const{snapshot:s,prevKey:o}=n;let a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),(0,ahe.B)())}function Bhe(r,t){const e=r.length;for(let i=0;i<e;i++)if(r[i].payload.key===t)return i;return-1}function AOe(r,t){const{payload:e,prevKey:i,key:n}=t,s=Bhe(r,n),o=function IOe(r,t){if(Ohe(t))return 0;{const e=Bhe(r,t);return-1===e?r.length:e+1}}(r,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let a=null;t.payload.forEach(l=>{const h={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,r=[...r,h],!1})}return r;case"child_added":if(s>-1){const a=r[s-1];(a&&a.key||null)!==i&&(r=r.filter(l=>l.payload.key!==e.key)).splice(o,0,t)}else{if(null==i)return[t,...r];(r=r.slice()).splice(o,0,t)}return r;case"child_removed":return r.filter(a=>a.payload.key!==e.key);case"child_changed":return r.map(a=>a.payload.key===n?t:a);case"child_moved":if(s>-1){const a=r.splice(s,1)[0];return(r=r.slice()).splice(o,0,a),r}return r;default:return r}}function Hhe(r){return(Ohe(r)||0===r.length)&&(r=["child_added","child_removed","child_changed","child_moved"]),r}function Vhe(r,t,e){return function DOe(r,t,e){return jL(r,"value","once",e).pipe(sa(i=>{const n=[$i(i)];return t.forEach(s=>n.push(jL(r,s,"on",e))),(0,l9.T)(...n).pipe(gg(AOe,[]))}),lhe())}(r,t=Hhe(t),e)}function zhe(r,t,e){const i=(t=Hhe(t)).map(n=>jL(r,n,"on",e));return(0,l9.T)(...i)}function jhe(r,t){return function(i,n){return Nhe(i,{stringCase:()=>r.child(i)[t](n),firebaseCase:()=>i[t](n),snapshotCase:()=>i.ref[t](n)})}}function MOe(r){return function(e){return e?Nhe(e,{stringCase:()=>r.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):r.remove()}}function Uhe(r,t){return function(){return jL(r,"value","on",t)}}const POe=new v.OlP("angularfire2.realtimeDatabaseURL"),FOe=new v.OlP("angularfire2.database.use-emulator");let xD=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,y,C,S,I){this.schedulers=a;const k=l,O=(0,Tl.on)(e,o,i);h&&N9(O,o,u,m,y,C,d,S),this.database=(0,Tl.cc)(`${O.name}.database.${n}`,"AngularFireDatabase",O.name,()=>{const L=o.runOutsideAngular(()=>O.database(n||void 0));return k&&L.useEmulator(...k),L},[k])}list(e,i){const n=this.schedulers.ngZone.runOutsideAngular(()=>Fhe(this.database,e));let s=n;return i&&(s=i(n)),function LOe(r,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>r.ref);return{query:r,update:jhe(i,"update"),set:jhe(i,"set"),push:n=>i.push(n),remove:MOe(i),snapshotChanges:n=>Vhe(r,n,e).pipe(vs.iC),stateChanges:n=>zhe(r,n,e).pipe(vs.iC),auditTrail:n=>function _Oe(r,t,e){return function ROe(r,t,e){return function kOe(r,t){return jL(r,"value","on",t).pipe((0,en.U)(e=>{let i;return e.payload.forEach(n=>(i=n.key,!1)),{data:e,lastKeyToLoad:i}}))}(r,e).pipe(function fLe(...r){const t=(0,fd.jO)(r);return(0,Xa.e)((e,i)=>{const n=r.length,s=new Array(n);let o=r.map(()=>!1),a=!1;for(let l=0;l<n;l++)(0,qh.Xf)(r[l]).subscribe((0,co.x)(i,h=>{s[l]=h,!a&&!o[l]&&(o[l]=!0,(a=o.every(fg.y))&&(o=null))},pLe.Z));e.subscribe((0,co.x)(i,l=>{if(a){const h=[l,...s];i.next(t?t(...h):h)}}))})}(t),(0,en.U)(([n,s])=>{const o=n.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function gLe(r){return(0,Xa.e)((t,e)=>{let i=!1,n=0;t.subscribe((0,co.x)(e,s=>(i||(i=!r(s,n++)))&&e.next(s)))})}(n=>-1===n.loadedKeys.indexOf(n.lastKeyToLoad)),(0,en.U)(n=>n.actions))}(r,zhe(r,t).pipe(gg((n,s)=>[...n,s],[])),e)}(r,n,e).pipe(vs.iC),valueChanges:(n,s)=>Vhe(r,n,e).pipe((0,en.U)(a=>a.map(l=>s&&s.idField?Object.assign(Object.assign({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),vs.iC)}}(s,this)}object(e){return function OOe(r,t){return{query:r,snapshotChanges:()=>Uhe(r,t.schedulers.outsideAngular)().pipe(vs.iC),update:e=>r.ref.update(e),set:e=>r.ref.set(e),remove:()=>r.ref.remove(),valueChanges:()=>Uhe(r,t.schedulers.outsideAngular)().pipe(vs.iC,(0,en.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Fhe(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(POe,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vs.HU),v.LFG(FOe,8),v.LFG(ez,8),v.LFG(R9,8),v.LFG(M9,8),v.LFG(L9,8),v.LFG(O9,8),v.LFG(P9,8),v.LFG(F9,8),v.LFG(zL,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),NOe=(()=>{class r{constructor(){J2.Z.registerVersion("angularfire",vs.q4.full,"rtdb-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[xD]}),r})();class UL{}let tz=(()=>{class r extends Mu.x{constructor(e,i){super(),this._db=e,this.objectType=i,this.listSource=i.listSource,this.dataRef=e.list(this.listSource)}execute(e){this.getData(e).subscribe(i=>super.next(i))}getData(e){return this._db.list(this.listSource).snapshotChanges().pipe((0,en.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}returnList(e){var i=[];return U2(qg(PL(o9(this._db.database.app)),e)).then(o=>{o.forEach(a=>{let l={value:a.val().key,text:a.val().name};i.push(l)})}),i}addData(e){return this.dataRef.push(e)}updateData(e,i){return this.dataRef.update(e,i)}deleteData(e){if(""!=e)return this.dataRef.remove(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(xD),v.LFG(UL))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class BOe extends UL{constructor(){super(...arguments),this.listSource="recipes"}}let HOe=(()=>{class r extends tz{constructor(e){super(e,new BOe),this.recipeKey="",this.db=e}setRecipeKey(e){this.recipeKey=e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(xD))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class VOe extends UL{constructor(){super(...arguments),this.listSource="recipeIngredients"}}let Whe=(()=>{class r extends tz{constructor(e){super(e,new VOe),this.recipeKey="",this.calories=0,this.db=e}executeRecipe(e){this.getRecipeData(e).subscribe(i=>super.next(i))}setRecipeKey(e){this.recipeKey=e}getRecipeKey(){return this.recipeKey}getCalories(){return this.calories}getRecipeData(e){return this.db.list(this.listSource,i=>i.orderByChild("recipe").equalTo(this.recipeKey)).snapshotChanges().pipe((0,en.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}calcCalories(){var e=0,i=this.getRecipeIngredients(),n=this.getIngredients();for(let s=0;s<i.length;s++)for(let o=0;o<n.length;o++)i[s].recipe==this.recipeKey&&i[s].ingredient==n[o].key&&(e+=i[s].amount*n[o].calories);this.calories=e}getIngredients(){var e=[];return U2(qg(PL(o9(this.db.database.app)),"ingredients")).then(s=>{s.forEach(o=>{let a={key:o.val().key,calories:o.val().calories,fat:0,carbs:0,protein:0,listSource:""};e.push(a)})}),e}getRecipeIngredients(){var e=[];return U2(qg(PL(o9(this.db.database.app)),"recipeIngredients")).then(s=>{s.forEach(o=>{let a={key:o.val().key,amount:o.val().amount,ingredient:o.val().ingredient,recipe:"",listSource:""};e.push(a)})}),e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(xD))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const zOe=["grid"];let qhe=(()=>{class r{constructor(e){this.recipeIngredientService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.recipeIngredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10},this.groupOptions={showGroupedColumn:!1}}ngOnInit(){this.ingredientData=this.recipeIngredientService.returnList("ingredients"),this.recipeIngredientService.executeRecipe(this.state)}dataStateChange(e){console.log(this.recipeKey),this.recipeIngredientService.executeRecipe(e)}dataSourceChanged(e){"add"===e.action?(e.data.recipe=this.recipeIngredientService.getRecipeKey(),this.recipeIngredientService.addData(e.data).subscribe(()=>{e.endEdit?.()})):"edit"===e.action?(e.data.recipe=this.recipeIngredientService.getRecipeKey(),this.recipeIngredientService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()})):"delete"===e.requestType&&this.recipeIngredientService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()}),this.recipeIngredientService.calcCalories()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Whe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-recipe-ingredient"]],viewQuery:function(e,i){if(1&e&&v.Gf(zOe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},inputs:{recipeKey:"recipeKey"},features:[v._Bn([o2,a2,k_e])],decls:6,vars:6,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","ingredient","foreignKeyValue","text","foreignKeyField","value","headerText","Ingredient",3,"dataSource"],["field","amount","headerText","Amount"]],template:function(e,i){1&e&&(v.TgZ(0,"ejs-grid",0,1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3),v.qZA()()),2&e&&(v.Q6J("dataSource",v.lcZ(2,4,i.recipeIngredients))("editSettings",i.editSettings)("toolbar",i.toolbar),v.xp6(4),v.Q6J("dataSource",i.ingredientData))},dependencies:[s2,oL,aL,lL,hL,Kf]}),r})();const jOe=["grid"],Ghe=function(r){return{"e-error":r}};function UOe(r,t){if(1&r&&(v.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),v._UZ(5,"input",14)(6,"span",15),v.TgZ(7,"label",16),v._uU(8,"Name"),v.qZA()()(),v.TgZ(9,"div",12)(10,"div",13),v._UZ(11,"input",17)(12,"span",15),v.TgZ(13,"label",18),v._uU(14,"Description"),v.qZA()()()(),v.TgZ(15,"div",11)(16,"div",12)(17,"div",19),v._UZ(18,"input",20)(19,"span",15),v.TgZ(20,"label",21),v._uU(21," Ethnicity"),v.qZA()()(),v.TgZ(22,"div",12)(23,"div",19),v._UZ(24,"input",22)(25,"span",15),v.TgZ(26,"label",23),v._uU(27,"Ingredients"),v.qZA()()()(),v.TgZ(28,"div",11)(29,"div",12),v._UZ(30,"app-recipe-ingredient"),v.qZA()()()()),2&r){const e=t.$implicit,i=v.oxw();v.Q6J("formGroup",i.orderForm),v.xp6(4),v.Q6J("ngClass",v.VKq(3,Ghe,e.invalid&&(e.dirty||e.touched))),v.xp6(6),v.Q6J("ngClass",v.VKq(5,Ghe,e.invalid&&(e.dirty||e.touched)))}}let WOe=(()=>{class r{constructor(e,i){this.recipeService=e,this.recipeIngredientService=i,this.submitClicked=!1,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.recipes=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10},this.groupOptions={showGroupedColumn:!1}}ngOnInit(){this.recipeService.execute(this.state)}createFormGroup(e,i){return new Rm({name:new Sd(e.name,gy.required),description:new Sd(e.description,gy.required),ethnicity:new Sd(e.ethnicity),ingredients:new Sd(e.ingredients),instructions:new Sd(e.instructions),meal_time:new Sd(e.meal_time)})}actionBegin(e){("beginEdit"===e.requestType||"add"===e.requestType)&&(this.submitClicked=!1,this.recipeIngredientService.setRecipeKey(e.rowData.key),this.orderForm=this.createFormGroup(e.rowData)),"save"===e.requestType?"new"===e.action?(this.submitClicked=!0,this.orderForm.valid?(this.recipeService.addData(e.data),this.recipeService.execute(this.state)):e.cancel=!0):"edit"===e.action&&(this.submitClicked=!0,this.orderForm.valid?(this.recipeService.updateData(e.data.key,e.data),this.recipeService.execute(this.state)):e.cancel=!0):"delete"===e.requestType&&(this.recipeService.deleteData(e.data[0].key),this.recipeService.execute(this.state))}actionComplete(e){("beginEdit"===e.requestType||"add"===e.requestType)&&e.dialog.dataBind()}get name(){return this.orderForm.get("name")}get description(){return this.orderForm.get("description")}get ingredients(){return this.orderForm.get("ingredients")}get ethnicity(){return this.orderForm.get("ethnicity")}get instructions(){return this.orderForm.get("instructions")}get meal_time(){return this.orderForm.get("meal_time")}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(HOe),v.Y36(Whe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-recipe"]],viewQuery:function(e,i){if(1&e&&v.Gf(jOe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([o2,a2])],decls:12,vars:8,consts:[[1,"control-section"],["allowPaging","true",3,"dataSource","pageSettings","allowGrouping","groupSettings","editSettings","toolbar","actionBegin","actionComplete"],["field","name","headerText","name","width","120"],["field","description","headerText","Description","width","120"],["field","ethnicity","headerText","Ethnicity","width","120"],["field","ingredients","headerText","Ingredients","width","120"],["field","instructions","headerText","instructions","width","120"],["field","meal_time","headerText","Meal time","width","120"],["editSettingsTemplate",""],[3,"formGroup"],[1,"justify-content-center"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"e-float-input","e-control-wrapper",3,"ngClass"],["formControlName","name","data-msg-containerid","nameError","id","name","name","name","type","text"],[1,"e-float-line"],["for","name",1,"e-float-text","e-label-top"],["formControlName","description","data-msg-containerid","descriptionError","id","description","name","description","type","text"],["for","description",1,"e-float-text","e-label-top"],[1,"e-float-input","e-control-wrapper"],["formControlName","ethnicity","data-msg-containerid","ethnicityError","id","ethnicity","name","ethnicity","type","text"],["for","ethnicity",1,"e-float-text","e-label-top"],["formControlName","ingredients","data-msg-containerid","ingredientsError","id","ingredients","name","ingredients","type","text"],["for","ingredients",1,"e-float-text","e-label-top"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"ejs-grid",1),v.NdJ("actionBegin",function(s){return i.actionBegin(s)})("actionComplete",function(s){return i.actionComplete(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7),v.qZA(),v.YNc(10,UOe,31,7,"ng-template",null,8,v.W1O),v.qZA()()),2&e&&(v.xp6(1),v.Q6J("dataSource",v.lcZ(2,6,i.recipes))("pageSettings",i.pageSettings)("allowGrouping",!0)("groupSettings",i.groupOptions)("editSettings",i.editSettings)("toolbar",i.toolbar))},dependencies:[Br,s2,oL,aL,lL,hL,rg,DE,hg,Ed,Hp,qhe,Kf],styles:["img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover}"]}),r})();class qOe extends UL{constructor(){super(...arguments),this.listSource="ingredients"}}let GOe=(()=>{class r extends tz{constructor(e){super(e,new qOe)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(xD))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const KOe=["grid"];let $Oe=(()=>{class r{constructor(e){this.ingredientsService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.ingredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.ingredientsService.execute(this.state)}dataStateChange(e){this.ingredientsService.execute(e)}dataSourceChanged(e){"add"===e.action?this.ingredientsService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.ingredientsService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.ingredientsService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(GOe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-ingredients"]],viewQuery:function(e,i){if(1&e&&v.Gf(KOe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([o2,a2])],decls:9,vars:5,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","name"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"]],template:function(e,i){1&e&&(v.TgZ(0,"ejs-grid",0,1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6),v.qZA()()),2&e&&v.Q6J("dataSource",v.lcZ(2,3,i.ingredients))("editSettings",i.editSettings)("toolbar",i.toolbar)},dependencies:[s2,oL,aL,lL,hL,Kf]}),r})(),YOe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-contact"]],decls:25,vars:0,consts:[[1,"main"],[1,"container"],["action","https://nutrition-genius-default-rtdb.firebaseio.com/"],["for","fname"],["type","text","id","fname","name","firstname","placeholder","Your name.."],["for","lname"],["type","text","id","lname","name","lastname","placeholder","Your last name.."],["for","country"],["id","country","name","country"],["value","australia"],["value","canada"],["value","usa"],["for","subject"],["id","subject","name","subject","placeholder","Write something..",2,"height","200px"],["type","submit","value","Submit"]],template:function(e,i){1&e&&(v.TgZ(0,"html")(1,"div",0)(2,"p"),v._uU(3," Contact Us "),v.qZA()(),v.TgZ(4,"div",1)(5,"form",2)(6,"label",3),v._uU(7,"First Name"),v.qZA(),v._UZ(8,"input",4),v.TgZ(9,"label",5),v._uU(10,"Last Name"),v.qZA(),v._UZ(11,"input",6),v.TgZ(12,"label",7),v._uU(13,"Country"),v.qZA(),v.TgZ(14,"select",8)(15,"option",9),v._uU(16,"Australia"),v.qZA(),v.TgZ(17,"option",10),v._uU(18,"Canada"),v.qZA(),v.TgZ(19,"option",11),v._uU(20,"USA"),v.qZA()(),v.TgZ(21,"label",12),v._uU(22,"Subject"),v.qZA(),v._UZ(23,"textarea",13)(24,"input",14),v.qZA()()())},styles:["html[_ngcontent-%COMP%]{background-color:#fff}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid rgb(255,255,255);border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#303030;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:aciablue}.container[_ngcontent-%COMP%]{border-radius:40px;background-color:#556b2fb1;padding:40px}p[_ngcontent-%COMP%]{font-weight:600;font-size:100px;align-items:center;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}"]}),r})(),ZOe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-main-profile"]],decls:94,vars:0,consts:[[1,"MuiGrid-root","MuiGrid-container","css-1d3bbye"],[1,"MuiGrid-root","MuiGrid-item","css-1wxaqej"],["type","button",1,"btn","me-3"],["href","/account/my-goals",1,"MuiTypography-root","MuiTypography-inherit","text-black"],["href","/en/measurements/check_in",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["href","/en/messages","data-testid","mail-Link",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["href","/profile/syddpink",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["href","/account/settings",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["id","container"],["id","header"],["href","/download/template/36","target","_blank"],["id","wrapper"],["id","content"],["id","navigation"],["id","extra"],["id","footer"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"a",3),v._uU(4,"Goals"),v.qZA()()(),v.TgZ(5,"div",1)(6,"button",2)(7,"a",4),v._uU(8,"Check-In"),v.qZA()()(),v.TgZ(9,"div",1)(10,"button",2)(11,"a",5),v._uU(12,"Mail"),v.qZA()()(),v.TgZ(13,"div",1)(14,"button",2)(15,"a",6),v._uU(16,"Profile"),v.qZA()()(),v.TgZ(17,"div",1)(18,"button",2)(19,"a",7),v._uU(20,"Settings"),v.qZA()()()(),v.TgZ(21,"div",8)(22,"div",9)(23,"h1"),v._uU(24,"Welcome"),v.qZA(),v.TgZ(25,"a",10),v._uU(26,"download this layout"),v.qZA()(),v.TgZ(27,"div",11)(28,"div",12)(29,"body"),v._uU(30,' Welcome <?php echo $_GET["name"]; ?>'),v._UZ(31,"br"),v._uU(32,' Your email address is: <?php echo $_GET["email"]; ?> '),v.qZA(),v.TgZ(33,"p")(34,"strong"),v._uU(35,"1. Main Content"),v.qZA()(),v.TgZ(36,"h3"),v._uU(37,"The Ultimate Guide to Flexbox"),v.qZA(),v.TgZ(38,"p"),v._uU(39," The Flex Layout module is new layout module in CSS3 made to improve the items align, directions and order in the container even when they are with dynamic or even unknown size. The prime characteristic of the flex container is the ability to modify the width or height of its children to fill the available space in the best possible way on different screen sizes. "),v.qZA(),v.TgZ(40,"p"),v._uU(41," Flexbox is relatively new, but it enjoys excellent browser support today (nearly 83% of browsers support Flexbox). Flexbox Layout is used for small application components, whereas CSS Grid Layout Module is aimed to handle the large scale layouts. "),v.qZA(),v.TgZ(42,"h3"),v._uU(43,"The Two axes of Flexbox"),v.qZA(),v.TgZ(44,"p"),v._uU(45," When working with flexbox you need to think in terms of two axes \xe2\u20ac\u201d the main axis and the cross axis. The main axis is defined by the flex-direction property, and the cross axis runs perpendicular to it. Everything we do with flexbox refers back to these axes, so it is worth understanding how they work from the outset. "),v.qZA()()(),v.TgZ(46,"div",13)(47,"p")(48,"strong"),v._uU(49,"2. Navigation Menu"),v.qZA()(),v.TgZ(50,"h3"),v._uU(51,"Styling Flex Container"),v.qZA(),v.TgZ(52,"ul")(53,"li"),v._uU(54,"flex-direction"),v.qZA(),v.TgZ(55,"li"),v._uU(56,"flex-wrap"),v.qZA(),v.TgZ(57,"li"),v._uU(58,"justify-content"),v.qZA(),v.TgZ(59,"li"),v._uU(60,"align-content"),v.qZA(),v.TgZ(61,"li"),v._uU(62,"align-items"),v.qZA()(),v.TgZ(63,"h3"),v._uU(64,"Designing Flex Items"),v.qZA(),v.TgZ(65,"ul")(66,"li"),v._uU(67,"order"),v.qZA(),v.TgZ(68,"li"),v._uU(69,"align-self"),v.qZA(),v.TgZ(70,"li"),v._uU(71,"flex-grow"),v.qZA(),v.TgZ(72,"li"),v._uU(73,"flex-shrink"),v.qZA(),v.TgZ(74,"li"),v._uU(75,"flex-basis"),v.qZA()()(),v.TgZ(76,"div",14)(77,"p")(78,"strong"),v._uU(79,"3. Additional Stuff"),v.qZA()(),v.TgZ(80,"h3"),v._uU(81,"In this guide you will learn:"),v.qZA(),v.TgZ(82,"ul")(83,"li"),v._uU(84,"How to use CSS Flexbox to build modern layouts"),v.qZA(),v.TgZ(85,"li"),v._uU(86,"How to align items both vertically and horizontally"),v.qZA(),v.TgZ(87,"li"),v._uU(88,"How to order items within container"),v.qZA(),v.TgZ(89,"li"),v._uU(90,"And more"),v.qZA()()(),v.TgZ(91,"div",15)(92,"p"),v._uU(93,"Footer"),v.qZA()()())},styles:[".MuiGrid-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;word-break:break-all;color:#556b2f;text-align:left;position:relative;width:940px;margin:0 auto;padding-left:35px}.btn[_ngcontent-%COMP%]{background-color:#556b2fa4;width:100px;height:50px}"]}),r})();class XOe extends UL{constructor(){super(...arguments),this.listSource="meals"}}let QOe=(()=>{class r extends tz{constructor(e){super(e,new XOe)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(xD))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const JOe=["alertDialog"],ePe=["grid"],tPe=[{path:"",component:d3},{path:"Profile",component:G1},{path:"About",component:K1},{path:"Recipes",component:WOe},{path:"Ingredients",component:$Oe},{path:"SignUpPage",component:(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authService.signup(e.value.email,e.value.password),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(h_))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-sign-up-page"]],decls:32,vars:1,consts:[[1,"container"],[1,"card","text-center",2,"width","50rem"],[1,"card-title"],[1,"card-text1"],[1,"card-text2"],[1,"row"],[1,"col-12"],[3,"ngSubmit"],["authForm","ngForm"],[1,"col","mb-3"],[1,"input-group-text"],["type","text","placeholder","First name",1,"form-control"],[1,"col"],["type","text","placeholder","Last name","aria-label","Last name",1,"form-control"],[1,"input-group","mb-3"],["type","text","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["id","basic-addon1",1,"input-group-text"],["type","password","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],[1,"d-grid","gap-2","col-2","mx-auto"],["type","submit",1,"btn","btn-dark",3,"disabled","click"]],template:function(e,i){if(1&e){const n=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),v._uU(3,"Welcome To Nutrition Genius"),v.qZA(),v.TgZ(4,"p",3),v._uU(5,"We are so excited for you to start your journey."),v.qZA(),v.TgZ(6,"p",4),v._uU(7,"Enter the following information to get started today!"),v.qZA(),v.TgZ(8,"div",5)(9,"div",6)(10,"form",7,8),v.NdJ("ngSubmit",function(){v.CHM(n);const o=v.MAs(11);return v.KtG(i.onSubmit(o))}),v.TgZ(12,"div",5)(13,"div",9)(14,"span",10),v._uU(15,"First Name:"),v.qZA(),v._UZ(16,"input",11),v.qZA(),v.TgZ(17,"div",12)(18,"span",10),v._uU(19,"Last Name:"),v.qZA(),v._UZ(20,"input",13),v.qZA()(),v.TgZ(21,"div",14)(22,"span",10),v._uU(23,"Email:"),v.qZA(),v._UZ(24,"input",15),v.qZA(),v.TgZ(25,"div",14)(26,"span",16),v._uU(27,"Password:"),v.qZA(),v._UZ(28,"input",17),v.qZA(),v.TgZ(29,"div",18)(30,"button",19),v.NdJ("click",function(){return i.buttonClicked="SignUp"}),v._uU(31," Get Started "),v.qZA()()()()()()()}if(2&e){const n=v.MAs(11);v.xp6(30),v.Q6J("disabled",!n.valid)}},dependencies:[cg,hg,Ru],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row;margin:50px}"]}),r})()},{path:"Contact",component:YOe},{path:"Main",component:ZOe},{path:"Meals",component:(()=>{class r{constructor(e){this.mealService=e,this.alertDlgBtnClick=()=>{this.alertDialog.hide()},this.alertDlgButtons=[{click:this.alertDlgBtnClick.bind(this),buttonModel:{content:"OK",isPrimary:!0}}],this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.meal=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.mealService.execute(this.state)}dataStateChange(e){this.mealService.execute(e)}dataSourceChanged(e){"add"===e.action?this.mealService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.mealService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.mealService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}dataBound(){this.refresh&&(this.grid.groupColumn("Country"),this.refresh=!1)}load(){this.refresh=this.grid.refreshing}created(){this.grid.on("columnDragStart",this.columnDragStart,this)}columnDragStart(e){"Mainfieldsofinvention"===e.column.field&&this.alertDialog.show()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(QOe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-meals"]],viewQuery:function(e,i){if(1&e&&(v.Gf(JOe,5),v.Gf(ePe,5)),2&e){let n;v.iGM(n=v.CRH())&&(i.alertDialog=n.first),v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([o2,a2])],decls:11,vars:8,consts:[[1,"control-section"],["id","dropdown","enabled","{meals.column.allowFiltering}","allowPaging","true","allowSorting","true","height","320",3,"dataSource","allowFiltering","allowGrouping","pageSettings","editSettings","toolbar","dataSourceChanged","dataStateChange","dataBound","created","load"],["field","recipe"],["field","meal_time"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"],["field","dietary notes"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"ejs-grid",1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)})("dataBound",function(){return i.dataBound()})("created",function(){return i.created()})("load",function(){return i.load()}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7)(10,"e-column",8),v.qZA()()()),2&e&&(v.xp6(1),v.Q6J("dataSource",v.lcZ(2,6,i.meal))("allowFiltering",!0)("allowGrouping",!0)("pageSettings",i.pageSettings)("editSettings",i.editSettings)("toolbar",i.toolbar))},dependencies:[s2,oL,aL,lL,hL,Kf]}),r})()},{path:"RecipeIngredient",component:qhe},{path:"Check",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-main-profile"]],decls:66,vars:0,consts:[["id","main",1,"check-in-table"],[1,"main-title"],["id","checkIn","action","/measurements/save","accept-charset","UTF-8","method","post",1,"form"],["name","utf8","type","hidden","value","\u2713"],["type","hidden","name","authenticity_token","value","tA5EHip6ODGBjP7VerNF9hcK84trR8j4scDobGDKTcvOTXJA79hASEkcIzDIFdHDB0JvjdEC3kWYYxeEJna2Rw=="],[1,"cont-2"],[1,"unit-form-field","standard"],[1,""],["type","text","name","weight[display_value]","id","weight_display_value","data-unit-system","lbs",1,"text","short"],["for","weight_display_value",1,"weight_label","unit_label"],["summary","check-in",1,"table0",2,"display","table"],[1,"col-1"],[1,"col-2"],[1,"col-3","col-num"],[1,"col-num"],["colspan","3",1,"first"],["href","/measurements/change",1,"link"],["href","/measurements/edit",1,"link"],[1,"first"],["type","hidden","name","measurement_type[0]","id","measurement_type[0]","value","117890068"],["type","text","name","measurement_value[0]","id","measurement_value[0]","value","","autocomplete","off",1,"text","short"],["type","hidden","name","measurement_type[1]","id","measurement_type[1]","value","117890069"],["type","text","name","measurement_value[1]","id","measurement_value[1]","value","","autocomplete","off",1,"text","short"],["type","hidden","name","measurement_type[2]","id","measurement_type[2]","value","117890070"],["type","text","name","measurement_value[2]","id","measurement_value[2]","value","","autocomplete","off",1,"text","short"],[1,"cont-1"],["type","submit","value","Save Changes",1,"button"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"h1",1),v._uU(2,"Check-In"),v.qZA(),v.TgZ(3,"form",2),v._UZ(4,"input",3)(5,"input",4),v.TgZ(6,"p",5)(7,"label"),v._uU(8,"Enter today's weight:"),v.qZA(),v.TgZ(9,"span",6)(10,"span",7),v._UZ(11,"input",8),v.qZA(),v.TgZ(12,"label",9),v._uU(13,"lbs"),v.qZA()(),v._UZ(14,"br"),v.TgZ(15,"span"),v._uU(16," Last recorded weight: 156 lbs on 6/02/2021 "),v.qZA()(),v.TgZ(17,"table",10)(18,"colgroup"),v._UZ(19,"col",11)(20,"col",12)(21,"col",13),v.qZA(),v.TgZ(22,"thead")(23,"tr")(24,"td"),v._uU(25,"Other Measurements"),v.qZA(),v.TgZ(26,"td",14),v._uU(27,"Last Entry"),v.qZA(),v.TgZ(28,"td",14),v._uU(29,"Today's Entry"),v.qZA()()(),v.TgZ(30,"tfoot")(31,"tr")(32,"td",15)(33,"a",16),v._uU(34,"Track Additional Measurements"),v.qZA(),v.TgZ(35,"span"),v._uU(36,"|"),v.qZA(),v.TgZ(37,"a",17),v._uU(38,"Edit Previous Entries"),v.qZA()()()(),v.TgZ(39,"tbody")(40,"tr")(41,"td",18),v._uU(42,"Neck"),v.qZA(),v.TgZ(43,"td",14),v._uU(44," None "),v.qZA(),v.TgZ(45,"td"),v._UZ(46,"input",19)(47,"input",20),v.qZA()(),v.TgZ(48,"tr")(49,"td",18),v._uU(50,"Waist"),v.qZA(),v.TgZ(51,"td",14),v._uU(52," None "),v.qZA(),v.TgZ(53,"td"),v._UZ(54,"input",21)(55,"input",22),v.qZA()(),v.TgZ(56,"tr")(57,"td",18),v._uU(58,"Hips"),v.qZA(),v.TgZ(59,"td",14),v._uU(60," None "),v.qZA(),v.TgZ(61,"td"),v._UZ(62,"input",23)(63,"input",24),v.qZA()()()(),v.TgZ(64,"p",25),v._UZ(65,"input",26),v.qZA()()())},dependencies:[cg,hg,Ru]}),r})()},{path:"Goals",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-main-profile-goals"]],decls:0,vars:0,template:function(e,i){}}),r})()}];let iPe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[o_.forRoot(tPe),o_]}),r})(),nPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-nav-bar"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","aliceblue"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","\\assets\\images\\NutritionGeniusLogo.png","width","100","height","100","alt","Nutrition Genius"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","","href","#",1,"nav-item","nav-link","active"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],["routerLink","Recipes","href","#",1,"nav-item","nav-link","active"],["routerLink","Ingredients","href","#",1,"nav-item","nav-link","active"],["routerLink","Meals","href","#",1,"nav-item","nav-link","active"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","active"],[1,"dropdown-menu"],["routerLink","About","href","#",1,"dropdown-item"],["routerLink","Contact","href","#",1,"dropdown-item"],[1,"navbar-nav","ms-auto"],["type","button",1,"btn","me-3"],["routerLink","SignUpPage","href","#",1,"nav-item","nav-link","active"]],template:function(e,i){1&e&&(v.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),v._UZ(3,"img",3),v.qZA(),v.TgZ(4,"button",4),v._UZ(5,"span",5),v.qZA(),v.TgZ(6,"div",6)(7,"div",7)(8,"a",8),v._uU(9,"Home"),v.qZA(),v.TgZ(10,"a",9),v._uU(11,"Profile"),v.qZA(),v.TgZ(12,"a",10),v._uU(13,"Recipes"),v.qZA(),v.TgZ(14,"a",11),v._uU(15,"Ingredients"),v.qZA(),v.TgZ(16,"a",12),v._uU(17,"Meals"),v.qZA(),v.TgZ(18,"div",13)(19,"a",14),v._uU(20,"About"),v.qZA(),v.TgZ(21,"div",15)(22,"a",16),v._uU(23,"About Us"),v.qZA(),v.TgZ(24,"a",17),v._uU(25,"Contact"),v.qZA()()()(),v.TgZ(26,"div",18)(27,"button",19)(28,"a",9),v._uU(29,"Login"),v.qZA()(),v.TgZ(30,"button",19)(31,"a",20),v._uU(32,"Sign up"),v.qZA()()()()()())},dependencies:[xc],styles:[".btn[_ngcontent-%COMP%]{background-color:#556b2fa4;width:100px;height:50px}img[_ngcontent-%COMP%]{border-radius:50%}"]}),r})(),rPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-footer"]],decls:7,vars:0,consts:[[1,""],[1,"text-center","text-black",2,"background-color","aliceblue"],[1,"container","p-4","pb-0"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"],["href","https://mdbootstrap.com/",1,"text-white"]],template:function(e,i){1&e&&(v.TgZ(0,"section",0)(1,"footer",1),v._UZ(2,"div",2),v.TgZ(3,"div",3),v._uU(4," \xa9 2022 Copyright: "),v.TgZ(5,"a",4),v._uU(6,"Nutritiongenius.com"),v.qZA()()()())},styles:["footer[_ngcontent-%COMP%]{position:relative}"]}),r})(),sPe=(()=>{class r{constructor(){this.title="nutrition-genius"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-root"]],decls:5,vars:0,template:function(e,i){1&e&&(v.TgZ(0,"app-nav-bar"),v._uU(1,"Loading..."),v.qZA(),v._UZ(2,"router-outlet"),v.TgZ(3,"app-footer"),v._uU(4,"Loading..."),v.qZA())},dependencies:[N0,nPe,rPe]}),r})();const Khe="firebasestorage.googleapis.com",$he="storageBucket";class Ca extends re.ZR{constructor(t,e,i=0){super(B9(t),`Firebase Storage: ${e} (${B9(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ca.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return B9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function B9(r){return"storage/"+r}function H9(){return new Ca("unknown","An unknown error occurred, please check the error payload for server response.")}function Yhe(){return new Ca("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Zhe(){return new Ca("canceled","User canceled the upload/download.")}function Xhe(){return new Ca("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function DD(r){return new Ca("invalid-argument",r)}function Qhe(){return new Ca("app-deleted","The Firebase app was deleted.")}function Jhe(r){return new Ca("invalid-root-operation","The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function WL(r,t){return new Ca("invalid-format","String does not match format '"+r+"': "+t)}function qL(r){throw new Ca("internal-error","Internal error: "+r)}class Lh{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Lh.makeFromUrl(t,e)}catch{return new Lh(t,"")}if(""===i.path)return i;throw function mPe(r){return new Ca("invalid-default-bucket","Invalid default bucket '"+r+"'.")}(t)}static makeFromUrl(t,e){let i=null;const n="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+n+"(/(.*))?$","i");function h(B){B.path_=decodeURIComponent(B.path)}const d=e.replace(/[.]/g,"\\."),L=[{regex:a,indices:{bucket:1,path:3},postModify:function s(B){"/"===B.path.charAt(B.path.length-1)&&(B.path_=B.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${e===Khe?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let B=0;B<L.length;B++){const j=L[B],G=j.regex.exec(t);if(G){let ve=G[j.indices.path];ve||(ve=""),i=new Lh(G[j.indices.bucket],ve),j.postModify(i);break}}if(null==i)throw function gPe(r){return new Ca("invalid-url","Invalid URL '"+r+"'.")}(t);return i}}class wPe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function iz(r){return"string"==typeof r||r instanceof String}function eue(r){return V9()&&r instanceof Blob}function V9(){return typeof Blob<"u"&&!(0,re.UG)()}function z9(r,t,e,i){if(i<t)throw DD(`Invalid value for '${r}'. Expected ${t} or greater.`);if(i>e)throw DD(`Invalid value for '${r}'. Expected ${e} or less.`)}function Fv(r,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${r}`}function tue(r){const t=encodeURIComponent;let e="?";for(const i in r)r.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(r[i])+"&");return e=e.slice(0,-1),e}var vC=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(vC||(vC={})),vC))();function iue(r,t){const e=r>=500&&r<600,n=-1!==[408,429].indexOf(r),s=-1!==t.indexOf(r);return e||n||s}class IPe{constructor(t,e,i,n,s,o,a,l,h,u,d,m=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,C)=>{this.resolve_=y,this.reject_=C,this.start_()})}start_(){const e=(i,n)=>{const s=this.resolve_,o=this.reject_,a=n.connection;if(n.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function TPe(r){return void 0!==r}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=H9();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(n.canceled?this.appDelete_?Qhe():Zhe():Yhe())};this.canceled_?e(0,new nz(!1,null,!0)):this.backoffId_=function SPe(r,t,e){let i=1,n=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function u(...I){h||(h=!0,t.apply(null,I))}function d(I){n=setTimeout(()=>{n=null,r(y,l())},I)}function m(){s&&clearTimeout(s)}function y(I,...k){if(h)return void m();if(I)return m(),void u.call(null,I,...k);if(l()||o)return m(),void u.call(null,I,...k);let L;i<64&&(i*=2),1===a?(a=2,L=0):L=1e3*(i+Math.random()),d(L)}let C=!1;function S(I){C||(C=!0,m(),!h&&(null!==n?(I||(a=2),clearTimeout(n),d(0)):I||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},e),S}((i,n)=>{if(n)return void i(!1,new nz(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vC.NO_ERROR,l=s.getStatus();if((!a||iue(l,this.additionalRetryCodes_))&&this.retry){const u=s.getErrorCode()===vC.ABORT;return void i(!1,new nz(!1,null,u))}const h=-1!==this.successCodes_.indexOf(l);i(!0,new nz(h,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function EPe(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class nz{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function OPe(...r){const t=function LPe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<r.length;i++)e.append(r[i]);return e.getBlob()}if(V9())return new Blob(r);throw new Ca("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Qc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class j9{constructor(t,e){this.data=t,this.contentType=e||null}}function U9(r,t){switch(r){case Qc.RAW:return new j9(nue(t));case Qc.BASE64:case Qc.BASE64URL:return new j9(rue(r,t));case Qc.DATA_URL:return new j9(function BPe(r){const t=new sue(r);return t.base64?rue(Qc.BASE64,t.rest):function NPe(r){let t;try{t=decodeURIComponent(r)}catch{throw WL(Qc.DATA_URL,"Malformed data URL.")}return nue(t)}(t.rest)}(t),function HPe(r){return new sue(r).contentType}(t))}throw H9()}function nue(r){const t=[];for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<r.length-1&&56320==(64512&r.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&r.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function rue(r,t){switch(r){case Qc.BASE64:{const n=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(n||s)throw WL(r,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case Qc.BASE64URL:{const n=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(n||s)throw WL(r,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function FPe(r){if(typeof atob>"u")throw function CPe(r){return new Ca("unsupported-environment",`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(t)}catch(n){throw n.message.includes("polyfill")?n:WL(r,"Invalid character found")}const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}class sue{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw WL(Qc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function VPe(r,t){return r.length>=t.length&&r.substring(r.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Gg{constructor(t,e){let i=0,n="";eue(t)?(this.data_=t,i=t.size,n=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,e){if(eue(this.data_)){const n=function PPe(r,t,e){return r.webkitSlice?r.webkitSlice(t,e):r.mozSlice?r.mozSlice(t,e):r.slice?r.slice(t,e):null}(this.data_,t,e);return null===n?null:new Gg(n)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Gg(i,!0)}}static getBlob(...t){if(V9()){const e=t.map(i=>i instanceof Gg?i.data_:i);return new Gg(OPe.apply(null,e))}{const e=t.map(o=>iz(o)?U9(Qc.RAW,o).data:o.data_);let i=0;e.forEach(o=>{i+=o.byteLength});const n=new Uint8Array(i);let s=0;return e.forEach(o=>{for(let a=0;a<o.length;a++)n[s++]=o[a]}),new Gg(n,!0)}}uploadData(){return this.data_}}function W9(r){let t;try{t=JSON.parse(r)}catch{return null}return function DPe(r){return"object"==typeof r&&!Array.isArray(r)}(t)?t:null}function oue(r){const t=r.lastIndexOf("/",r.length-2);return-1===t?r:r.slice(t+1)}function UPe(r,t){return t}class pu{constructor(t,e,i,n){this.server=t,this.local=e||t,this.writable=!!i,this.xform=n||UPe}}let rz=null;function GL(){if(rz)return rz;const r=[];r.push(new pu("bucket")),r.push(new pu("generation")),r.push(new pu("metageneration")),r.push(new pu("name","fullPath",!0));const e=new pu("name");e.xform=function t(s,o){return function WPe(r){return!iz(r)||r.length<2?r:oue(r)}(o)},r.push(e);const n=new pu("size");return n.xform=function i(s,o){return void 0!==o?Number(o):o},r.push(n),r.push(new pu("timeCreated")),r.push(new pu("updated")),r.push(new pu("md5Hash",null,!0)),r.push(new pu("cacheControl",null,!0)),r.push(new pu("contentDisposition",null,!0)),r.push(new pu("contentEncoding",null,!0)),r.push(new pu("contentLanguage",null,!0)),r.push(new pu("contentType",null,!0)),r.push(new pu("metadata","customMetadata",!0)),rz=r,rz}function aue(r,t,e){const i=W9(t);return null===i?null:function GPe(r,t,e){const i={type:"file"},n=e.length;for(let s=0;s<n;s++){const o=e[s];i[o.local]=o.xform(i,t[o.server])}return function qPe(r,t){Object.defineProperty(r,"ref",{get:function e(){const s=new Lh(r.bucket,r.fullPath);return t._makeStorageReference(s)}})}(i,r),i}(r,i,e)}function q9(r,t){const e={},i=t.length;for(let n=0;n<i;n++){const s=t[n];s.writable&&(e[s.server]=r[s.local])}return JSON.stringify(e)}class Kg{constructor(t,e,i,n){this.url=t,this.method=e,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $g(r){if(!r)throw H9()}function sz(r,t){return function e(i,n){const s=aue(r,n,t);return $g(null!==s),s}}function ID(r){return function t(e,i){let n;return n=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function pPe(){return new Ca("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function dPe(){return new Ca("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function cPe(r){return new Ca("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===e.getStatus()?function fPe(r){return new Ca("unauthorized","User does not have permission to access '"+r+"'.")}(r.path):i,n.status=e.getStatus(),n.serverResponse=i.serverResponse,n}}function KL(r){const t=ID(r);return function e(i,n){let s=t(i,n);return 404===i.getStatus()&&(s=function uPe(r){return new Ca("object-not-found","Object '"+r+"' does not exist.")}(r.path)),s.serverResponse=n.serverResponse,s}}function uue(r,t,e){const n=Fv(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new Kg(n,"GET",sz(r,e),o);return a.errorHandler=KL(t),a}function QPe(r,t,e,i,n){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),n&&(s.maxResults=n);const a=Fv(t.bucketOnlyServerUrl(),r.host,r._protocol),h=r.maxOperationRetryTime,u=new Kg(a,"GET",function ZPe(r,t){return function e(i,n){const s=function YPe(r,t,e){const i=W9(e);return null===i?null:function $Pe(r,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e.prefixes)for(const n of e.prefixes){const s=n.replace(/\/$/,""),o=r._makeStorageReference(new Lh(t,s));i.prefixes.push(o)}if(e.items)for(const n of e.items){const s=r._makeStorageReference(new Lh(t,n.name));i.items.push(s)}return i}(r,t,i)}(r,t,n);return $g(null!==s),s}}(r,t.bucket),h);return u.urlParams=s,u.errorHandler=ID(t),u}function due(r,t,e){const i=Object.assign({},e);return i.fullPath=r.path,i.size=t.size(),i.contentType||(i.contentType=function i1e(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class oz{constructor(t,e,i,n){this.current=t,this.total=e,this.finalized=!!i,this.metadata=n||null}}function G9(r,t){let e=null;try{e=r.getResponseHeader("X-Goog-Upload-Status")}catch{$g(!1)}return $g(!!e&&-1!==(t||["active"]).indexOf(e)),e}const o1e={STATE_CHANGED:"state_changed"},fu={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function K9(r){switch(r){case"running":case"pausing":case"canceling":return fu.RUNNING;case"paused":return fu.PAUSED;case"success":return fu.SUCCESS;case"canceled":return fu.CANCELED;default:return fu.ERROR}}class a1e{constructor(t,e,i){if(function xPe(r){return"function"==typeof r}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function AD(r){return(...t)=>{Promise.resolve().then(()=>r(...t))}}class h1e extends class l1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vC.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vC.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vC.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,n){if(this.sent_)throw qL("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==n)for(const s in n)n.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,n[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw qL("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw qL("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw qL("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw qL("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function zf(){return new h1e}class mue{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=GL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(iue(n.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();n=Yhe()}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals("canceled")?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,s)=>{this._resolve=n,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function n1e(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o=due(t,i,n),a={name:o.fullPath},l=Fv(s,r.host,r._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=q9(o,e),C=new Kg(l,"POST",function y(S){let I;G9(S);try{I=S.getResponseHeader("X-Goog-Upload-URL")}catch{$g(!1)}return $g(iz(I)),I},r.maxUploadRetryTime);return C.urlParams=a,C.headers=u,C.body=d,C.errorHandler=ID(t),C}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,zf,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const n=function r1e(r,t,e,i){const l=new Kg(e,"POST",function s(h){const u=G9(h,["active","final"]);let d=null;try{d=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$g(!1)}d||$g(!1);const m=Number(d);return $g(!isNaN(m)),new oz(m,i.size(),"final"===u)},r.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=ID(t),l}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(n,zf,e,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new oz(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((n,s)=>{let o;try{o=function s1e(r,t,e,i,n,s,o,a){const l=new oz(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function yPe(){return new Ca("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const h=l.total-l.current;let u=h;n>0&&(u=Math.min(u,n));const d=l.current;let y="";y=0===u?"finalize":h===u?"upload, finalize":"upload";const C={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(d,d+u);if(null===S)throw Xhe();const L=new Kg(e,"POST",function I(B,j){const G=G9(B,["active","final"]),ae=l.current+u,ve=i.size();let xe;return xe="final"===G?sz(t,s)(B,j):null,new oz(ae,ve,"final"===G,xe)},t.maxUploadRetryTime);return L.headers=C,L.body=S.uploadData(),L.progressCallback=a||null,L.errorHandler=ID(r),L}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,zf,n,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=uue(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(i,zf,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function pue(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let L="";for(let B=0;B<2;B++)L+=Math.random().toString().slice(2);return L}();o["Content-Type"]="multipart/related; boundary="+l;const h=due(t,i,n),u=q9(h,e),y=Gg.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===y)throw Xhe();const C={name:h.fullPath},S=Fv(s,r.host,r._protocol),k=r.maxUploadRetryTime,O=new Kg(S,"POST",sz(r,e),k);return O.urlParams=C,O.headers=o,O.body=y.uploadData(),O.errorHandler=ID(t),O}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,zf,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Zhe(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=K9(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,n){const s=new a1e(e||void 0,i||void 0,n||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(K9(this._state)){case fu.SUCCESS:AD(this._resolve.bind(null,this.snapshot))();break;case fu.CANCELED:case fu.ERROR:AD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(K9(this._state)){case fu.RUNNING:case fu.PAUSED:t.next&&AD(t.next.bind(t,this.snapshot))();break;case fu.SUCCESS:t.complete&&AD(t.complete.bind(t))();break;default:t.error&&AD(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class xS{constructor(t,e){this._service=t,this._location=e instanceof Lh?e:Lh.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new xS(t,e)}get root(){const t=new Lh(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return oue(this._location.path)}get storage(){return this._service}get parent(){const t=function zPe(r){if(0===r.length)return null;const t=r.lastIndexOf("/");return-1===t?"":r.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Lh(this._location.bucket,t);return new xS(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw Jhe(t)}}function yue(r,t,e){return $9.apply(this,arguments)}function $9(){return $9=(0,Ct.Z)(function*(r,t,e){const n=yield bue(r,{pageToken:e});t.prefixes.push(...n.prefixes),t.items.push(...n.items),null!=n.nextPageToken&&(yield yue(r,t,n.nextPageToken))}),$9.apply(this,arguments)}function bue(r,t){null!=t&&"number"==typeof t.maxResults&&z9("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=QPe(r.storage,r._location,"/",e.pageToken,e.maxResults);return r.storage.makeRequestWithTokens(i,zf)}function w1e(r){r._throwIfRoot("getDownloadURL");const t=function JPe(r,t,e){const n=Fv(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new Kg(n,"GET",function XPe(r,t){return function e(i,n){const s=aue(r,n,t);return $g(null!==s),function KPe(r,t,e,i){const n=W9(t);if(null===n||!iz(n.downloadTokens))return null;const s=n.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const d=r.fullPath;return Fv("/b/"+o(r.bucket)+"/o/"+o(d),e,i)+tue({alt:"media",token:h})})[0]}(s,n,r.host,r._protocol)}}(r,e),o);return a.errorHandler=KL(t),a}(r.storage,r._location,GL());return r.storage.makeRequestWithTokens(t,zf).then(e=>{if(null===e)throw function bPe(){return new Ca("no-download-url","The given file does not have any download URLs.")}();return e})}function Cue(r,t){const e=function jPe(r,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===r.length?e:r+"/"+e}(r._location.path,t),i=new Lh(r._location.bucket,e);return new xS(r.storage,i)}function wue(r,t){if(r instanceof Y9){const e=r;if(null==e._bucket)throw function vPe(){return new Ca("no-default-bucket","No default bucket found. Did you set the '"+$he+"' property when initializing the app?")}();const i=new xS(e,e._bucket);return null!=t?wue(i,t):i}return void 0!==t?Cue(r,t):r}function x1e(r,t){if(t&&function E1e(r){return/^[A-Za-z]+:\/\//.test(r)}(t)){if(r instanceof Y9)return function T1e(r,t){return new xS(r,t)}(r,t);throw DD("To use ref(service, url), the first argument must be a Storage instance.")}return wue(r,t)}function Sue(r,t){const e=t?.[$he];return null==e?null:Lh.makeFromBucketSpec(e,r)}class Y9{constructor(t,e,i,n,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=n,this._firebaseVersion=s,this._bucket=null,this._host=Khe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?Lh.makeFromBucketSpec(n,this._host):Sue(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Lh.makeFromBucketSpec(this._url,t):Sue(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){z9("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){z9("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Ct.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Ct.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new xS(this,t)}_makeRequest(t,e,i,n,s=!0){if(this._deleted)return new wPe(Qhe());{const o=function MPe(r,t,e,i,n,s,o=!0){const a=tue(r.urlParams),l=r.url+a,h=Object.assign({},r.headers);return function kPe(r,t){t&&(r["X-Firebase-GMPID"]=t)}(h,t),function APe(r,t){null!==t&&t.length>0&&(r.Authorization="Firebase "+t)}(h,e),function _Pe(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(h,s),function RPe(r,t){null!==t&&(r["X-Firebase-AppCheck"]=t)}(h,i),new IPe(l,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,n,o)}(t,this._appId,i,n,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var i=this;return(0,Ct.Z)(function*(){const[n,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,n,s).getPromise()})()}}const Eue="@firebase/storage";function Due(r,t){return x1e(r=(0,re.m9)(r),t)}function P1e(r,{instanceIdentifier:t}){const e=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),n=r.getProvider("app-check-internal");return new Y9(e,i,n,t,Ha.SDK_VERSION)}!function F1e(){(0,Ha._registerComponent)(new Bu.wA("storage",P1e,"PUBLIC").setMultipleInstances(!0)),(0,Ha.registerVersion)(Eue,"0.9.14",""),(0,Ha.registerVersion)(Eue,"0.9.14","esm2017")}();class az{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Aue{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new az(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new az(i,this,this._ref))},e)}on(t,e,i,n){let s;return e&&(s="function"==typeof e?o=>e(new az(o,this,this._ref)):{next:e.next?o=>e.next(new az(o,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,n||void 0)}}class _ue{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Nv(t,this._service))}get items(){return this._delegate.items.map(t=>new Nv(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nv{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function O1e(r,t){return Cue(r,t)}(this._delegate,t);return new Nv(e,this.storage)}get root(){return new Nv(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Nv(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new Aue(function I1e(r,t,e){return function m1e(r,t,e){return r._throwIfRoot("uploadBytesResumable"),new mue(r,new Gg(t),e)}(r=(0,re.m9)(r),t,e)}(this._delegate,t,e),this)}putString(t,e=Qc.RAW,i){this._throwIfRoot("putString");const n=U9(e,t),s=Object.assign({},i);return null==s.contentType&&null!=n.contentType&&(s.contentType=n.contentType),new Aue(new mue(this._delegate,new Gg(n.data,!0),s),this)}listAll(){return function R1e(r){return function y1e(r){const t={prefixes:[],items:[]};return yue(r,t).then(()=>t)}(r=(0,re.m9)(r))}(this._delegate).then(t=>new _ue(t,this.storage))}list(t){return function k1e(r,t){return bue(r=(0,re.m9)(r),t)}(this._delegate,t||void 0).then(e=>new _ue(e,this.storage))}getMetadata(){return function A1e(r){return function b1e(r){r._throwIfRoot("getMetadata");const t=uue(r.storage,r._location,GL());return r.storage.makeRequestWithTokens(t,zf)}(r=(0,re.m9)(r))}(this._delegate)}updateMetadata(t){return function _1e(r,t){return function C1e(r,t){r._throwIfRoot("updateMetadata");const e=function e1e(r,t,e,i){const s=Fv(t.fullServerUrl(),r.host,r._protocol),a=q9(e,i),h=r.maxOperationRetryTime,u=new Kg(s,"PATCH",sz(r,i),h);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=KL(t),u}(r.storage,r._location,t,GL());return r.storage.makeRequestWithTokens(e,zf)}(r=(0,re.m9)(r),t)}(this._delegate,t)}getDownloadURL(){return function M1e(r){return w1e(r=(0,re.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function L1e(r){return function S1e(r){r._throwIfRoot("deleteObject");const t=function t1e(r,t){const i=Fv(t.fullServerUrl(),r.host,r._protocol),a=new Kg(i,"DELETE",function o(l,h){},r.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=KL(t),a}(r.storage,r._location);return r.storage.makeRequestWithTokens(t,zf)}(r=(0,re.m9)(r))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw Jhe(t)}}class kue{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(Rue(t))throw DD("ref() expected a child path but got a URL, use refFromURL instead.");return new Nv(Due(this._delegate,t),this)}refFromURL(t){if(!Rue(t))throw DD("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Lh.makeFromUrl(t,this._delegate.host)}catch{throw DD("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nv(Due(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function Iue(r,t,e,i={}){!function D1e(r,t,e,i={}){r.host=`${t}:${e}`,r._protocol="http";const{mockUserToken:n}=i;n&&(r._overrideAuthToken="string"==typeof n?n:(0,re.Sg)(n,r.app.options.projectId))}(r,t,e,i)}(this._delegate,t,e,i)}}function Rue(r){return/^[A-Za-z]+:\/\//.test(r)}function V1e(r,{instanceIdentifier:t}){const e=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:t});return new kue(e,i)}function Mue(r){const t=function j1e(r){return new Za.y(t=>{const e=o=>t.next(o);e(r.snapshot);const s=r.on("state_changed",e);return r.then(o=>{e(o),t.complete()},o=>{e(r.snapshot),(o=>{t.error(o)})(o)}),function(){s()}}).pipe(function oPe(r,t=a9.z){return(0,Xa.e)((e,i)=>{let n=null,s=null,o=null;const a=()=>{if(n){n.unsubscribe(),n=null;const h=s;s=null,i.next(h)}};function l(){const h=o+r,u=t.now();if(u<h)return n=this.schedule(void 0,h-u),void i.add(n);a()}e.subscribe((0,co.x)(i,h=>{s=h,o=t.now(),n||(n=t.schedule(l,r),i.add(n))},()=>{a(),i.complete()},void 0,()=>{s=n=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,en.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function lz(r){return{getDownloadURL:()=>$i(void 0).pipe(vs.fc,sa(()=>r.getDownloadURL()),vs.iC),getMetadata:()=>$i(void 0).pipe(vs.fc,sa(()=>r.getMetadata()),vs.iC),delete:()=>(0,Hr.D)(r.delete()),child:t=>lz(r.child(t)),updateMetadata:t=>(0,Hr.D)(r.updateMetadata(t)),put:(t,e)=>Mue(r.put(t,e)),putString:(t,e,i)=>Mue(r.putString(t,e,i)),list:t=>(0,Hr.D)(r.list(t)),listAll:()=>(0,Hr.D)(r.listAll())}}!function z1e(r){const t={TaskState:fu,TaskEvent:o1e,StringFormat:Qc,Storage:kue,Reference:Nv};r.INTERNAL.registerComponent(new Bu.wA("storage-compat",V1e,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.1.22")}(h9.Z);const U1e=new v.OlP("angularfire2.storageBucket"),W1e=new v.OlP("angularfire2.storage.maxUploadRetryTime"),q1e=new v.OlP("angularfire2.storage.maxOperationRetryTime"),G1e=new v.OlP("angularfire2.storage.use-emulator");let K1e=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d){const m=(0,Tl.on)(e,o,i);this.storage=(0,Tl.cc)(`${m.name}.storage.${n}`,"AngularFireStorage",m.name,()=>{const y=o.runOutsideAngular(()=>m.storage(n||void 0)),C=u;return C&&y.useEmulator(...C),l&&y.setMaxUploadRetryTime(l),h&&y.setMaxOperationRetryTime(h),y},[l,h])}ref(e){return lz(this.storage.ref(e))}refFromURL(e){return lz(this.storage.refFromURL(e))}upload(e,i,n){return lz(this.storage.ref(e)).put(i,n)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(U1e,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vs.HU),v.LFG(W1e,8),v.LFG(q1e,8),v.LFG(G1e,8),v.LFG(zL,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),$1e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})(),Y1e=(()=>{class r{constructor(){J2.Z.registerVersion("angularfire",vs.q4.full,"gcs-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[K1e],imports:[$1e]}),r})();function Z9(){return(0,Xa.e)((r,t)=>{let e,i=!1;r.subscribe((0,co.x)(t,n=>{const s=e;e=n,i&&t.next([s,n]),i=!0}))})}var dn,Z1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Bv={},X9=X9||{},Kn=Z1e||self;function hz(){}function uz(r){var t=typeof r;return"array"==(t="object"!=t?t:r?Array.isArray(r)?"array":t:"null")||"object"==t&&"number"==typeof r.length}function $L(r){var t=typeof r;return"object"==t&&null!=r||"function"==t}var Q9="closure_uid_"+(1e9*Math.random()>>>0),Q1e=0;function J1e(r,t,e){return r.call.apply(r.bind,arguments)}function eFe(r,t,e){if(!r)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),r.apply(t,n)}}return function(){return r.apply(t,arguments)}}function Oh(r,t,e){return(Oh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?J1e:eFe).apply(null,arguments)}function cz(r,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),r.apply(this,i)}}function vh(r,t){function e(){}e.prototype=t.prototype,r.X=t.prototype,r.prototype=new e,r.prototype.constructor=r,r.Wb=function(i,n,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[n].apply(i,o)}}function yC(){this.s=this.s,this.o=this.o}yC.prototype.s=!1,yC.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function X1e(r){Object.prototype.hasOwnProperty.call(r,Q9)&&r[Q9]||(r[Q9]=++Q1e)}(this)},yC.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Lue=Array.prototype.indexOf?function(r,t){return Array.prototype.indexOf.call(r,t,void 0)}:function(r,t){if("string"==typeof r)return"string"!=typeof t||1!=t.length?-1:r.indexOf(t,0);for(let e=0;e<r.length;e++)if(e in r&&r[e]===t)return e;return-1};function J9(r){const t=r.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=r[i];return e}return[]}function Oue(r,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(uz(i)){const n=r.length||0,s=i.length||0;r.length=n+s;for(let o=0;o<s;o++)r[n+o]=i[o]}else r.push(i)}}function Ph(r,t){this.type=r,this.g=this.target=t,this.defaultPrevented=!1}Ph.prototype.h=function(){this.defaultPrevented=!0};var iFe=function(){if(!Kn.addEventListener||!Object.defineProperty)return!1;var r=!1,t=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Kn.addEventListener("test",hz,t),Kn.removeEventListener("test",hz,t)}catch{}return r}();function dz(r){return/^[\s\xa0]*$/.test(r)}var Pue=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function eK(r,t){return r<t?-1:r>t?1:0}function pz(){var r=Kn.navigator;return r&&(r=r.userAgent)?r:""}function Yg(r){return-1!=pz().indexOf(r)}function tK(r){return tK[" "](r),r}tK[" "]=hz;var fz,rFe=Yg("Opera"),_D=Yg("Trident")||Yg("MSIE"),Fue=Yg("Edge"),iK=Fue||_D,Nue=Yg("Gecko")&&!(-1!=pz().toLowerCase().indexOf("webkit")&&!Yg("Edge"))&&!(Yg("Trident")||Yg("MSIE"))&&!Yg("Edge"),sFe=-1!=pz().toLowerCase().indexOf("webkit")&&!Yg("Edge");function Bue(){var r=Kn.document;return r?r.documentMode:void 0}e:{var nK="",rK=function(){var r=pz();return Nue?/rv:([^\);]+)(\)|;)/.exec(r):Fue?/Edge\/([\d\.]+)/.exec(r):_D?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):sFe?/WebKit\/(\S+)/.exec(r):rFe?/(?:Version)[ \/]?(\S+)/.exec(r):void 0}();if(rK&&(nK=rK?rK[1]:""),_D){var sK=Bue();if(null!=sK&&sK>parseFloat(nK)){fz=String(sK);break e}}fz=nK}var oFe={};var lFe=Kn.document&&_D&&(Bue()||parseInt(fz,10))||void 0;function YL(r,t){if(Ph.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var e=this.type=r.type,i=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=t,t=r.relatedTarget){if(Nue){e:{try{tK(t.nodeName);var n=!0;break e}catch{}n=!1}n||(t=null)}}else"mouseover"==e?t=r.fromElement:"mouseout"==e&&(t=r.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:hFe[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&YL.X.h.call(this)}}vh(YL,Ph);var hFe={2:"touch",3:"pen",4:"mouse"};YL.prototype.h=function(){YL.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var ZL="closure_listenable_"+(1e6*Math.random()|0),uFe=0;function cFe(r,t,e,i,n){this.listener=r,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=n,this.key=++uFe,this.ba=this.ea=!1}function gz(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function aK(r,t,e){for(const i in r)t.call(e,r[i],i,r)}function Vue(r){const t={};for(const e in r)t[e]=r[e];return t}const zue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function jue(r,t){let e,i;for(let n=1;n<arguments.length;n++){for(e in i=arguments[n],i)r[e]=i[e];for(let s=0;s<zue.length;s++)e=zue[s],Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}}function mz(r){this.src=r,this.g={},this.h=0}function lK(r,t){var e=t.type;if(e in r.g){var s,i=r.g[e],n=Lue(i,t);(s=0<=n)&&Array.prototype.splice.call(i,n,1),s&&(gz(t),0==r.g[e].length&&(delete r.g[e],r.h--))}}function hK(r,t,e,i){for(var n=0;n<r.length;++n){var s=r[n];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return n}return-1}mz.prototype.add=function(r,t,e,i,n){var s=r.toString();(r=this.g[s])||(r=this.g[s]=[],this.h++);var o=hK(r,t,i,n);return-1<o?(t=r[o],e||(t.ea=!1)):((t=new cFe(t,this.src,s,!!i,n)).ea=e,r.push(t)),t};var uK="closure_lm_"+(1e6*Math.random()|0),cK={};function Uue(r,t,e,i,n){if(i&&i.once)return que(r,t,e,i,n);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Uue(r,t[s],e,i,n);return null}return e=gK(e),r&&r[ZL]?r.N(t,e,$L(i)?!!i.capture:!!i,n):Wue(r,t,e,!1,i,n)}function Wue(r,t,e,i,n,s){if(!t)throw Error("Invalid event type");var o=$L(n)?!!n.capture:!!n,a=pK(r);if(a||(r[uK]=a=new mz(r)),(e=a.add(t,e,i,o,s)).proxy)return e;if(i=function dFe(){const t=pFe;return function r(e){return t.call(r.src,r.listener,e)}}(),e.proxy=i,i.src=r,i.listener=e,r.addEventListener)iFe||(n=o),void 0===n&&(n=!1),r.addEventListener(t.toString(),i,n);else if(r.attachEvent)r.attachEvent(Kue(t.toString()),i);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(i)}return e}function que(r,t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;s++)que(r,t[s],e,i,n);return null}return e=gK(e),r&&r[ZL]?r.O(t,e,$L(i)?!!i.capture:!!i,n):Wue(r,t,e,!0,i,n)}function Gue(r,t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)Gue(r,t[s],e,i,n);else i=$L(i)?!!i.capture:!!i,e=gK(e),r&&r[ZL]?(r=r.i,(t=String(t).toString())in r.g&&-1<(e=hK(s=r.g[t],e,i,n))&&(gz(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete r.g[t],r.h--))):r&&(r=pK(r))&&(t=r.g[t.toString()],r=-1,t&&(r=hK(t,e,i,n)),(e=-1<r?t[r]:null)&&dK(e))}function dK(r){if("number"!=typeof r&&r&&!r.ba){var t=r.src;if(t&&t[ZL])lK(t.i,r);else{var e=r.type,i=r.proxy;t.removeEventListener?t.removeEventListener(e,i,r.capture):t.detachEvent?t.detachEvent(Kue(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=pK(t))?(lK(e,r),0==e.h&&(e.src=null,t[uK]=null)):gz(r)}}}function Kue(r){return r in cK?cK[r]:cK[r]="on"+r}function pFe(r,t){if(r.ba)r=!0;else{t=new YL(t,this);var e=r.listener,i=r.ha||r.src;r.ea&&dK(r),r=e.call(i,t)}return r}function pK(r){return(r=r[uK])instanceof mz?r:null}var fK="__closure_events_fn_"+(1e9*Math.random()>>>0);function gK(r){return"function"==typeof r?r:(r[fK]||(r[fK]=function(t){return r.handleEvent(t)}),r[fK])}function Gl(){yC.call(this),this.i=new mz(this),this.P=this,this.I=null}function yh(r,t){var e,i=r.I;if(i)for(e=[];i;i=i.I)e.push(i);if(r=r.P,i=t.type||t,"string"==typeof t)t=new Ph(t,r);else if(t instanceof Ph)t.target=t.target||r;else{var n=t;jue(t=new Ph(i,r),n)}if(n=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.g=e[s];n=vz(o,i,!0,t)&&n}if(n=vz(o=t.g=r,i,!0,t)&&n,n=vz(o,i,!1,t)&&n,e)for(s=0;s<e.length;s++)n=vz(o=t.g=e[s],i,!1,t)&&n}function vz(r,t,e,i){if(!(t=r.i.g[String(t)]))return!0;t=t.concat();for(var n=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==e){var a=o.listener,l=o.ha||o.src;o.ea&&lK(r.i,o),n=!1!==a.call(l,i)&&n}}return n&&!i.defaultPrevented}vh(Gl,yC),Gl.prototype[ZL]=!0,Gl.prototype.removeEventListener=function(r,t,e,i){Gue(this,r,t,e,i)},Gl.prototype.M=function(){if(Gl.X.M.call(this),this.i){var t,r=this.i;for(t in r.g){for(var e=r.g[t],i=0;i<e.length;i++)gz(e[i]);delete r.g[t],r.h--}}this.I=null},Gl.prototype.N=function(r,t,e,i){return this.i.add(String(r),t,!1,e,i)},Gl.prototype.O=function(r,t,e,i){return this.i.add(String(r),t,!0,e,i)};var mK=Kn.JSON.stringify;function fFe(){var r=Zue;let t=null;return r.g&&(t=r.g,r.g=r.g.next,r.g||(r.h=null),t.next=null),t}var vK,$ue=new class{constructor(r,t){this.i=r,this.j=t,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new mFe,r=>r.reset());class mFe{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function vFe(r){Kn.setTimeout(()=>{throw r},0)}function Yue(r,t){vK||function yFe(){var r=Kn.Promise.resolve(void 0);vK=function(){r.then(bFe)}}(),yK||(vK(),yK=!0),Zue.add(r,t)}var yK=!1,Zue=new class gFe{constructor(){this.h=this.g=null}add(t,e){const i=$ue.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function bFe(){for(var r;r=fFe();){try{r.h.call(r.g)}catch(e){vFe(e)}var t=$ue;t.j(r),100>t.h&&(t.h++,r.next=t.g,t.g=r)}yK=!1}function yz(r,t){Gl.call(this),this.h=r||1,this.g=t||Kn,this.j=Oh(this.lb,this),this.l=Date.now()}function bK(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function CK(r,t,e){if("function"==typeof r)e&&(r=Oh(r,e));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Oh(r.handleEvent,r)}return 2147483647<Number(t)?-1:Kn.setTimeout(r,t||0)}function Xue(r){r.g=CK(()=>{r.g=null,r.i&&(r.i=!1,Xue(r))},r.j);const t=r.h;r.h=null,r.m.apply(null,t)}vh(yz,Gl),(dn=yz.prototype).ca=!1,dn.R=null,dn.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),yh(this,"tick"),this.ca&&(bK(this),this.start()))}},dn.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dn.M=function(){yz.X.M.call(this),bK(this),delete this.g};class CFe extends yC{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Xue(this)}M(){super.M(),this.g&&(Kn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function XL(r){yC.call(this),this.h=r,this.g={}}vh(XL,yC);var Que=[];function Jue(r,t,e,i){Array.isArray(e)||(e&&(Que[0]=e.toString()),e=Que);for(var n=0;n<e.length;n++){var s=Uue(t,e[n],i||r.handleEvent,!1,r.h||r);if(!s)break;r.g[s.key]=s}}function ece(r){aK(r.g,function(t,e){this.g.hasOwnProperty(e)&&dK(t)},r),r.g={}}function bz(){this.g=!0}function kD(r,t,e,i){r.info(function(){return"XMLHTTP TEXT ("+t+"): "+function TFe(r,t){if(!r.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(r=0;r<e.length;r++)if(Array.isArray(e[r])){var i=e[r];if(!(2>i.length)){var n=i[1];if(Array.isArray(n)&&!(1>n.length)){var s=n[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<n.length;o++)n[o]=""}}}return mK(e)}catch{return t}}(r,e)+(i?" "+i:"")})}XL.prototype.M=function(){XL.X.M.call(this),ece(this)},XL.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bz.prototype.Aa=function(){this.g=!1},bz.prototype.info=function(){};var DS={},tce=null;function Cz(){return tce=tce||new Gl}function ice(r){Ph.call(this,DS.Pa,r)}function QL(r){const t=Cz();yh(t,new ice(t))}function nce(r,t){Ph.call(this,DS.STAT_EVENT,r),this.stat=t}function gu(r){const t=Cz();yh(t,new nce(t,r))}function rce(r,t){Ph.call(this,DS.Qa,r),this.size=t}function JL(r,t){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Kn.setTimeout(function(){r()},t)}DS.Pa="serverreachability",vh(ice,Ph),DS.STAT_EVENT="statevent",vh(nce,Ph),DS.Qa="timingevent",vh(rce,Ph);var wz={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},sce={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wK(){}function ace(){}wK.prototype.h=null;var TK,eO={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function SK(){Ph.call(this,"d")}function EK(){Ph.call(this,"c")}function Sz(){}function tO(r,t,e,i){this.l=r,this.j=t,this.m=e,this.U=i||1,this.S=new XL(this),this.O=xFe,this.T=new yz(r=iK?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new lce}function lce(){this.i=null,this.g="",this.h=!1}vh(SK,Ph),vh(EK,Ph),vh(Sz,wK),Sz.prototype.g=function(){return new XMLHttpRequest},Sz.prototype.i=function(){return{}},TK=new Sz;var xFe=45e3,xK={},Ez={};function DK(r,t,e){r.K=1,r.v=Iz(Hv(t)),r.s=e,r.P=!0,hce(r,null)}function hce(r,t){r.F=Date.now(),iO(r),r.A=Hv(r.v);var e=r.A,i=r.U;Array.isArray(i)||(i=[String(i)]),bce(e.i,"t",i),r.C=0,e=r.l.H,r.h=new lce,r.g=Uce(r.l,e?t:null,!r.s),0<r.N&&(r.L=new CFe(Oh(r.La,r,r.g),r.N)),Jue(r.S,r.g,"readystatechange",r.ib),t=r.H?Vue(r.H):{},r.s?(r.u||(r.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,t)):(r.u="GET",r.g.da(r.A,r.u,null,t)),QL(),function wFe(r,t,e,i,n,s){r.info(function(){if(r.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+n+"]: "+t+"\n"+e+"\n"+o})}(r.j,r.u,r.A,r.m,r.U,r.s)}function uce(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function cce(r,t,e){let n,i=!0;for(;!r.I&&r.C<e.length;){if(n=DFe(r,e),n==Ez){4==t&&(r.o=4,gu(14),i=!1),kD(r.j,r.m,null,"[Incomplete Response]");break}if(n==xK){r.o=4,gu(15),kD(r.j,r.m,e,"[Invalid Chunk]"),i=!1;break}kD(r.j,r.m,n,null),IK(r,n)}uce(r)&&n!=Ez&&n!=xK&&(r.h.g="",r.C=0),4!=t||0!=e.length||r.h.h||(r.o=1,gu(16),i=!1),r.i=r.i&&i,i?0<e.length&&!r.$&&(r.$=!0,(t=r.l).g==r&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),PK(t),t.K=!0,gu(11))):(kD(r.j,r.m,e,"[Invalid Chunked Response]"),IS(r),nO(r))}function DFe(r,t){var e=r.C,i=t.indexOf("\n",e);return-1==i?Ez:(e=Number(t.substring(e,i)),isNaN(e)?xK:(i+=1)+e>t.length?Ez:(t=t.substr(i,e),r.C=i+e,t))}function iO(r){r.V=Date.now()+r.O,dce(r,r.O)}function dce(r,t){if(null!=r.B)throw Error("WatchDog timer not null");r.B=JL(Oh(r.gb,r),t)}function Tz(r){r.B&&(Kn.clearTimeout(r.B),r.B=null)}function nO(r){0==r.l.G||r.I||Hce(r.l,r)}function IS(r){Tz(r);var t=r.L;t&&"function"==typeof t.na&&t.na(),r.L=null,bK(r.T),ece(r.S),r.g&&(t=r.g,r.g=null,t.abort(),t.na())}function IK(r,t){try{var e=r.l;if(0!=e.G&&(e.g==r||AK(e.h,r)))if(!r.J&&AK(e.h,r)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var n=i;if(0==n[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<r.F))break e;Lz(e),Rz(e)}OK(e),gu(18)}}else e.Ba=n[1],0<e.Ba-e.T&&37500>n[2]&&e.L&&0==e.A&&!e.v&&(e.v=JL(Oh(e.cb,e),6e3));if(1>=Sce(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else _S(e,11)}else if((r.J||e.g==r)&&Lz(e),!dz(t))for(n=e.Fa.g.parse(t),t=0;t<n.length;t++){let h=n[t];if(e.T=h[0],h=h[1],2==e.G)if("c"==h[0]){e.I=h[1],e.ka=h[2];const u=h[3];null!=u&&(e.ma=u,e.j.info("VER="+e.ma));const d=h[4];null!=d&&(e.Ca=d,e.j.info("SVER="+e.Ca));const m=h[5];null!=m&&"number"==typeof m&&0<m&&(e.J=i=1.5*m,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const y=r.g;if(y){const C=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=i.h;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(_K(s,s.h),s.h=null))}if(i.D){const S=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(i.za=S,Xo(i.F,i.D,S))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-r.F,e.j.info("Handshake RTT: "+e.P+"ms"));var o=r;if((i=e).sa=jce(i,i.H?i.ka:null,i.V),o.J){Ece(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(Tz(a),iO(a)),i.g=o}else Nce(i);0<e.i.length&&Mz(e)}else"stop"!=h[0]&&"close"!=h[0]||_S(e,7);else 3==e.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?_S(e,7):LK(e):"noop"!=h[0]&&e.l&&e.l.wa(h),e.A=0)}QL()}catch{}}function pce(r,t){if(r.forEach&&"function"==typeof r.forEach)r.forEach(t,void 0);else if(uz(r)||"string"==typeof r)Array.prototype.forEach.call(r,t,void 0);else for(var e=function AFe(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(uz(r)||"string"==typeof r){var t=[];r=r.length;for(var e=0;e<r;e++)t.push(e);return t}t=[],e=0;for(const i in r)t[e++]=i;return t}}}(r),i=function IFe(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(uz(r)){for(var t=[],e=r.length,i=0;i<e;i++)t.push(r[i]);return t}for(i in t=[],e=0,r)t[e++]=r[i];return t}(r),n=i.length,s=0;s<n;s++)t.call(void 0,i[s],e&&e[s],r)}(dn=tO.prototype).setTimeout=function(r){this.O=r},dn.ib=function(r){r=r.target;const t=this.L;t&&3==Vv(r)?t.l():this.La(r)},dn.La=function(r){try{if(r==this.g)e:{const u=Vv(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>u)&&(3!=u||iK||this.g&&(this.h.h||this.g.fa()||Rce(this.g)))){this.I||4!=u||7==t||QL(),Tz(this);var e=this.g.aa();this.Y=e;t:if(uce(this)){var i=Rce(this.g);r="";var n=i.length,s=4==Vv(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){IS(this),nO(this);var o="";break t}this.h.i=new Kn.TextDecoder}for(t=0;t<n;t++)this.h.h=!0,r+=this.h.i.decode(i[t],{stream:s&&t==n-1});i.splice(0,n),this.h.g+=r,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==e,function SFe(r,t,e,i,n,s,o){r.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+n+"]: "+t+"\n"+e+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dz(a)){var h=a;break t}}h=null}if(!(e=h)){this.i=!1,this.o=3,gu(12),IS(this),nO(this);break e}kD(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,IK(this,e)}this.P?(cce(this,u,o),iK&&this.i&&3==u&&(Jue(this.S,this.T,"tick",this.hb),this.T.start())):(kD(this.j,this.m,o,null),IK(this,o)),4==u&&IS(this),this.i&&!this.I&&(4==u?Hce(this.l,this):(this.i=!1,iO(this)))}else 400==e&&0<o.indexOf("Unknown SID")?(this.o=3,gu(12)):(this.o=0,gu(13)),IS(this),nO(this)}}}catch{}},dn.hb=function(){if(this.g){var r=Vv(this.g),t=this.g.fa();this.C<t.length&&(Tz(this),cce(this,r,t),this.i&&4!=r&&iO(this))}},dn.cancel=function(){this.I=!0,IS(this)},dn.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function EFe(r,t){r.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(QL(),gu(17)),IS(this),this.o=2,nO(this)):dce(this,this.V-r)};var fce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function AS(r,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof AS){this.h=void 0!==t?t:r.h,xz(this,r.j),this.s=r.s,this.g=r.g,Dz(this,r.m),this.l=r.l,t=r.i;var e=new oO;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),gce(this,e),this.o=r.o}else r&&(e=String(r).match(fce))?(this.h=!!t,xz(this,e[1]||"",!0),this.s=rO(e[2]||""),this.g=rO(e[3]||"",!0),Dz(this,e[4]),this.l=rO(e[5]||"",!0),gce(this,e[6]||"",!0),this.o=rO(e[7]||"")):(this.h=!!t,this.i=new oO(null,this.h))}function Hv(r){return new AS(r)}function xz(r,t,e){r.j=e?rO(t,!0):t,r.j&&(r.j=r.j.replace(/:$/,""))}function Dz(r,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);r.m=t}else r.m=null}function gce(r,t,e){t instanceof oO?(r.i=t,function PFe(r,t){t&&!r.j&&(bC(r),r.i=null,r.g.forEach(function(e,i){var n=i.toLowerCase();i!=n&&(vce(this,i),bce(this,n,e))},r)),r.j=t}(r.i,r.h)):(e||(t=sO(t,LFe)),r.i=new oO(t,r.h))}function Xo(r,t,e){r.i.set(t,e)}function Iz(r){return Xo(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function rO(r,t){return r?t?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function sO(r,t,e){return"string"==typeof r?(r=encodeURI(r).replace(t,kFe),e&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function kFe(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}AS.prototype.toString=function(){var r=[],t=this.j;t&&r.push(sO(t,mce,!0),":");var e=this.g;return(e||"file"==t)&&(r.push("//"),(t=this.s)&&r.push(sO(t,mce,!0),"@"),r.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&r.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&r.push("/"),r.push(sO(e,"/"==e.charAt(0)?MFe:RFe,!0))),(e=this.i.toString())&&r.push("?",e),(e=this.o)&&r.push("#",sO(e,OFe)),r.join("")};var mce=/[#\/\?@]/g,RFe=/[#\?:]/g,MFe=/[#\?]/g,LFe=/[#\?@]/g,OFe=/#/g;function oO(r,t){this.h=this.g=null,this.i=r||null,this.j=!!t}function bC(r){r.g||(r.g=new Map,r.h=0,r.i&&function _Fe(r,t){if(r){r=r.split("&");for(var e=0;e<r.length;e++){var i=r[e].indexOf("="),n=null;if(0<=i){var s=r[e].substring(0,i);n=r[e].substring(i+1)}else s=r[e];t(s,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(r.i,function(t,e){r.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function vce(r,t){bC(r),t=RD(r,t),r.g.has(t)&&(r.i=null,r.h-=r.g.get(t).length,r.g.delete(t))}function yce(r,t){return bC(r),t=RD(r,t),r.g.has(t)}function bce(r,t,e){vce(r,t),0<e.length&&(r.i=null,r.g.set(RD(r,t),J9(e)),r.h+=e.length)}function RD(r,t){return t=String(t),r.j&&(t=t.toLowerCase()),t}function Cce(r){this.l=r||NFe,r=Kn.PerformanceNavigationTiming?0<(r=Kn.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Kn.g&&Kn.g.Ga&&Kn.g.Ga()&&Kn.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dn=oO.prototype).add=function(r,t){bC(this),this.i=null,r=RD(this,r);var e=this.g.get(r);return e||this.g.set(r,e=[]),e.push(t),this.h+=1,this},dn.forEach=function(r,t){bC(this),this.g.forEach(function(e,i){e.forEach(function(n){r.call(t,n,i,this)},this)},this)},dn.oa=function(){bC(this);const r=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const n=r[i];for(let s=0;s<n.length;s++)e.push(t[i])}return e},dn.W=function(r){bC(this);let t=[];if("string"==typeof r)yce(this,r)&&(t=t.concat(this.g.get(RD(this,r))));else{r=Array.from(this.g.values());for(let e=0;e<r.length;e++)t=t.concat(r[e])}return t},dn.set=function(r,t){return bC(this),this.i=null,yce(this,r=RD(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[t]),this.h+=1,this},dn.get=function(r,t){return r&&0<(r=this.W(r)).length?String(r[0]):t},dn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var n=s;""!==o[i]&&(n+="="+encodeURIComponent(String(o[i]))),r.push(n)}}return this.i=r.join("&")};var NFe=10;function wce(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Sce(r){return r.h?1:r.g?r.g.size:0}function AK(r,t){return r.h?r.h==t:!!r.g&&r.g.has(t)}function _K(r,t){r.g?r.g.add(t):r.h=t}function Ece(r,t){r.h&&r.h==t?r.h=null:r.g&&r.g.has(t)&&r.g.delete(t)}function Tce(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let t=r.i;for(const e of r.g.values())t=t.concat(e.D);return t}return J9(r.i)}function kK(){}function BFe(){this.g=new kK}function HFe(r,t,e){const i=e||"";try{pce(r,function(n,s){let o=n;$L(n)&&(o=mK(n)),t.push(i+s+"="+encodeURIComponent(o))})}catch(n){throw t.push(i+"type="+encodeURIComponent("_badmap")),n}}function Az(r,t,e,i,n){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,n(i)}catch{}}function aO(r){this.l=r.ac||null,this.j=r.jb||!1}function _z(r,t){Gl.call(this),this.D=r,this.u=t,this.m=void 0,this.readyState=RK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Cce.prototype.cancel=function(){if(this.i=Tce(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},kK.prototype.stringify=function(r){return Kn.JSON.stringify(r,void 0)},kK.prototype.parse=function(r){return Kn.JSON.parse(r,void 0)},vh(aO,wK),aO.prototype.g=function(){return new _z(this.l,this.j)},aO.prototype.i=function(r){return function(){return r}}({}),vh(_z,Gl);var RK=0;function xce(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function lO(r){r.readyState=4,r.l=null,r.j=null,r.A=null,hO(r)}function hO(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(dn=_z.prototype).open=function(r,t){if(this.readyState!=RK)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=t,this.readyState=1,hO(this)},dn.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(t.body=r),(this.D||Kn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},dn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lO(this)),this.readyState=RK},dn.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,hO(this)),this.g&&(this.readyState=3,hO(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Kn.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xce(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},dn.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var t=r.value?r.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!r.done}))&&(this.response=this.responseText+=t)}r.done?lO(this):hO(this),3==this.readyState&&xce(this)}},dn.Va=function(r){this.g&&(this.response=this.responseText=r,lO(this))},dn.Ua=function(r){this.g&&(this.response=r,lO(this))},dn.ga=function(){this.g&&lO(this)},dn.setRequestHeader=function(r,t){this.v.append(r,t)},dn.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},dn.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],t=this.h.entries();for(var e=t.next();!e.done;)r.push((e=e.value)[0]+": "+e[1]),e=t.next();return r.join("\r\n")},Object.defineProperty(_z.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var zFe=Kn.JSON.parse;function _a(r){Gl.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Dce,this.K=this.L=!1}vh(_a,Gl);var Dce="",jFe=/^https?$/i,UFe=["POST","PUT"];function Ice(r,t){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=t,r.m=5,Ace(r),kz(r)}function Ace(r){r.D||(r.D=!0,yh(r,"complete"),yh(r,"error"))}function _ce(r){if(r.h&&typeof X9<"u"&&(!r.C[1]||4!=Vv(r)||2!=r.aa()))if(r.v&&4==Vv(r))CK(r.Ha,0,r);else if(yh(r,"readystatechange"),4==Vv(r)){r.h=!1;try{const a=r.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===a){var n=String(r.H).match(fce)[1]||null;if(!n&&Kn.self&&Kn.self.location){var s=Kn.self.location.protocol;n=s.substr(0,s.length-1)}i=!jFe.test(n?n.toLowerCase():"")}e=i}if(e)yh(r,"complete"),yh(r,"success");else{r.m=6;try{var o=2<Vv(r)?r.g.statusText:""}catch{o=""}r.j=o+" ["+r.aa()+"]",Ace(r)}}finally{kz(r)}}}function kz(r,t){if(r.g){kce(r);const e=r.g,i=r.C[0]?hz:null;r.g=null,r.C=null,t||yh(r,"ready");try{e.onreadystatechange=i}catch{}}}function kce(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(Kn.clearTimeout(r.A),r.A=null)}function Vv(r){return r.g?r.g.readyState:0}function Rce(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case Dce:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function Mce(r){let t="";return aK(r,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function MK(r,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=Mce(e),"string"==typeof r?null!=e&&encodeURIComponent(String(e)):Xo(r,t,e))}function uO(r,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[r]||t}function Lce(r){this.Ca=0,this.i=[],this.j=new bz,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=uO("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=uO("baseRetryDelayMs",5e3,r),this.bb=uO("retryDelaySeedMs",1e4,r),this.$a=uO("forwardChannelMaxRetries",2,r),this.ta=uO("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new Cce(r&&r.concurrentRequestLimit),this.Fa=new BFe,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function LK(r){if(Oce(r),3==r.G){var t=r.U++,e=Hv(r.F);Xo(e,"SID",r.I),Xo(e,"RID",t),Xo(e,"TYPE","terminate"),cO(r,e),(t=new tO(r,r.j,t,void 0)).K=2,t.v=Iz(Hv(e)),e=!1,Kn.navigator&&Kn.navigator.sendBeacon&&(e=Kn.navigator.sendBeacon(t.v.toString(),"")),!e&&Kn.Image&&((new Image).src=t.v,e=!0),e||(t.g=Uce(t.l,null),t.g.da(t.v)),t.F=Date.now(),iO(t)}zce(r)}function Rz(r){r.g&&(PK(r),r.g.cancel(),r.g=null)}function Oce(r){Rz(r),r.u&&(Kn.clearTimeout(r.u),r.u=null),Lz(r),r.h.cancel(),r.m&&("number"==typeof r.m&&Kn.clearTimeout(r.m),r.m=null)}function Mz(r){wce(r.h)||r.m||(r.m=!0,Yue(r.Ja,r),r.C=0)}function Pce(r,t){var e;e=t?t.m:r.U++;const i=Hv(r.F);Xo(i,"SID",r.I),Xo(i,"RID",e),Xo(i,"AID",r.T),cO(r,i),r.o&&r.s&&MK(i,r.o,r.s),e=new tO(r,r.j,e,r.C+1),null===r.o&&(e.H=r.s),t&&(r.i=t.D.concat(r.i)),t=Fce(r,e,1e3),e.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),_K(r.h,e),DK(e,i,t)}function cO(r,t){r.ia&&aK(r.ia,function(e,i){Xo(t,i,e)}),r.l&&pce({},function(e,i){Xo(t,i,e)})}function Fce(r,t,e){e=Math.min(r.i.length,e);var i=r.l?Oh(r.l.Ra,r.l,r):null;e:{var n=r.i;let s=-1;for(;;){const o=["count="+e];-1==s?0<e?(s=n[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<e;l++){let h=n[l].h;const u=n[l].g;if(h-=s,0>h)s=Math.max(0,n[l].h-100),a=!1;else try{HFe(u,o,"req"+h+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return r=r.i.splice(0,e),t.D=r,i}function Nce(r){r.g||r.u||(r.Z=1,Yue(r.Ia,r),r.A=0)}function OK(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=JL(Oh(r.Ia,r),Vce(r,r.A)),r.A++,0))}function PK(r){null!=r.B&&(Kn.clearTimeout(r.B),r.B=null)}function Bce(r){r.g=new tO(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var t=Hv(r.sa);Xo(t,"RID","rpc"),Xo(t,"SID",r.I),Xo(t,"CI",r.L?"0":"1"),Xo(t,"AID",r.T),Xo(t,"TYPE","xmlhttp"),cO(r,t),r.o&&r.s&&MK(t,r.o,r.s),r.J&&r.g.setTimeout(r.J);var e=r.g;r=r.ka,e.K=1,e.v=Iz(Hv(t)),e.s=null,e.P=!0,hce(e,r)}function Lz(r){null!=r.v&&(Kn.clearTimeout(r.v),r.v=null)}function Hce(r,t){var e=null;if(r.g==t){Lz(r),PK(r),r.g=null;var i=2}else{if(!AK(r.h,t))return;e=t.D,Ece(r.h,t),i=1}if(0!=r.G)if(r.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var n=r.C;yh(i=Cz(),new rce(i,e)),Mz(r)}else Nce(r);else if(3==(n=t.o)||0==n&&0<r.pa||!(1==i&&function qFe(r,t){return!(Sce(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=t.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=JL(Oh(r.Ja,r,t),Vce(r,r.C)),r.C++,0)))}(r,t)||2==i&&OK(r)))switch(e&&0<e.length&&(t=r.h,t.i=t.i.concat(e)),n){case 1:_S(r,5);break;case 4:_S(r,10);break;case 3:_S(r,6);break;default:_S(r,2)}}function Vce(r,t){let e=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(e*=2),e*t}function _S(r,t){if(r.j.info("Error code "+t),2==t){var e=null;r.l&&(e=null);var i=Oh(r.kb,r);e||(e=new AS("//www.google.com/images/cleardot.gif"),Kn.location&&"http"==Kn.location.protocol||xz(e,"https"),Iz(e)),function VFe(r,t){const e=new bz;if(Kn.Image){const i=new Image;i.onload=cz(Az,e,i,"TestLoadImage: loaded",!0,t),i.onerror=cz(Az,e,i,"TestLoadImage: error",!1,t),i.onabort=cz(Az,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=cz(Az,e,i,"TestLoadImage: timeout",!1,t),Kn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=r}else t(!1)}(e.toString(),i)}else gu(2);r.G=0,r.l&&r.l.va(t),zce(r),Oce(r)}function zce(r){if(r.G=0,r.la=[],r.l){const t=Tce(r.h);(0!=t.length||0!=r.i.length)&&(Oue(r.la,t),Oue(r.la,r.i),r.h.i.length=0,J9(r.i),r.i.length=0),r.l.ua()}}function jce(r,t,e){var i=e instanceof AS?Hv(e):new AS(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),Dz(i,i.m);else{var n=Kn.location;i=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;var s=new AS(null,void 0);i&&xz(s,i),t&&(s.g=t),n&&Dz(s,n),e&&(s.l=e),i=s}return t=r.za,(e=r.D)&&t&&Xo(i,e,t),Xo(i,"VER",r.ma),cO(r,i),i}function Uce(r,t,e){if(t&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new _a(e&&r.Da&&!r.ra?new aO({jb:!0}):r.ra)).Ka(r.H),t}function Wce(){}function Oz(){if(_D&&!(10<=Number(lFe)))throw Error("Environmental error: no available transport.")}function Jc(r,t){Gl.call(this),this.g=new Lce(t),this.l=r,this.h=t&&t.messageUrlParams||null,r=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(r?r["X-WebChannel-Content-Type"]=t.messageContentType:r={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(r?r["X-WebChannel-Client-Profile"]=t.ya:r={"X-WebChannel-Client-Profile":t.ya}),this.g.S=r,(r=t&&t.Yb)&&!dz(r)&&(this.g.o=r),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!dz(t)&&(this.g.D=t,null!==(r=this.h)&&t in r&&t in(r=this.h)&&delete r[t]),this.j=new MD(this)}function qce(r){SK.call(this);var t=r.__sm__;if(t){e:{for(const e in t){r=e;break e}r=void 0}(this.i=r)&&(r=this.i,t=null!==t&&r in t?t[r]:void 0),this.data=t}else this.data=r}function Gce(){EK.call(this),this.status=1}function MD(r){this.g=r}(dn=_a.prototype).Ka=function(r){this.L=r},dn.da=function(r,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);t=t?t.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():TK.g(),this.C=function oce(r){return r.h||(r.h=r.i())}(this.u?this.u:TK),this.g.onreadystatechange=Oh(this.Ha,this);try{this.F=!0,this.g.open(t,String(r),!0),this.F=!1}catch(s){return void Ice(this,s)}if(r=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var n in i)e.set(n,i[n]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),n=Kn.FormData&&r instanceof Kn.FormData,!(0<=Lue(UFe,t))||i||n||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of e)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{kce(this),0<this.B&&((this.K=function WFe(r){return _D&&function aFe(){return function nFe(r){var t=oFe;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=r(9)}(function(){let r=0;const t=Pue(String(fz)).split("."),e=Pue("9").split("."),i=Math.max(t.length,e.length);for(let o=0;0==r&&o<i;o++){var n=t[o]||"",s=e[o]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==n[0].length&&0==s[0].length)break;r=eK(0==n[1].length?0:parseInt(n[1],10),0==s[1].length?0:parseInt(s[1],10))||eK(0==n[2].length,0==s[2].length)||eK(n[2],s[2]),n=n[3],s=s[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Oh(this.qa,this)):this.A=CK(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(s){Ice(this,s)}},dn.qa=function(){typeof X9<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yh(this,"timeout"),this.abort(8))},dn.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,yh(this,"complete"),yh(this,"abort"),kz(this))},dn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kz(this,!0)),_a.X.M.call(this)},dn.Ha=function(){this.s||(this.F||this.v||this.l?_ce(this):this.fb())},dn.fb=function(){_ce(this)},dn.aa=function(){try{return 2<Vv(this)?this.g.status:-1}catch{return-1}},dn.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},dn.Sa=function(r){if(this.g){var t=this.g.responseText;return r&&0==t.indexOf(r)&&(t=t.substring(r.length)),zFe(t)}},dn.Ea=function(){return this.m},dn.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dn=Lce.prototype).ma=8,dn.G=1,dn.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const n=new tO(this,this.j,r,void 0);let s=this.s;if(this.S&&(s?(s=Vue(s),jue(s,this.S)):s=this.S),null!==this.o||this.N||(n.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=Fce(this,n,t),Xo(e=Hv(this.F),"RID",r),Xo(e,"CVER",22),this.D&&Xo(e,"X-HTTP-Session-Id",this.D),cO(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(Mce(s)))+"&"+t:this.o&&MK(e,this.o,s)),_K(this.h,n),this.Ya&&Xo(e,"TYPE","init"),this.O?(Xo(e,"$req",t),Xo(e,"SID","null"),n.Z=!0,DK(n,e,null)):DK(n,e,t),this.G=2}}else 3==this.G&&(r?Pce(this,r):0==this.i.length||wce(this.h)||Pce(this))},dn.Ia=function(){if(this.u=null,Bce(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=JL(Oh(this.eb,this),r)}},dn.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,gu(10),Rz(this),Bce(this))},dn.cb=function(){null!=this.v&&(this.v=null,Rz(this),OK(this),gu(19))},dn.kb=function(r){r?(this.j.info("Successfully pinged google.com"),gu(2)):(this.j.info("Failed to ping google.com"),gu(1))},(dn=Wce.prototype).xa=function(){},dn.wa=function(){},dn.va=function(){},dn.ua=function(){},dn.Ra=function(){},Oz.prototype.g=function(r,t){return new Jc(r,t)},vh(Jc,Gl),Jc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,t=this.l,e=this.h||void 0;gu(0),r.V=t,r.ia=e||{},r.L=r.Y,r.F=jce(r,null,r.V),Mz(r)},Jc.prototype.close=function(){LK(this.g)},Jc.prototype.u=function(r){var t=this.g;if("string"==typeof r){var e={};e.__data__=r,r=e}else this.v&&((e={}).__data__=mK(r),r=e);t.i.push(new class{constructor(r,t){this.h=r,this.g=t}}(t.ab++,r)),3==t.G&&Mz(t)},Jc.prototype.M=function(){this.g.l=null,delete this.j,LK(this.g),delete this.g,Jc.X.M.call(this)},vh(qce,SK),vh(Gce,EK),vh(MD,Wce),MD.prototype.xa=function(){yh(this.g,"a")},MD.prototype.wa=function(r){yh(this.g,new qce(r))},MD.prototype.va=function(r){yh(this.g,new Gce)},MD.prototype.ua=function(){yh(this.g,"b")},Oz.prototype.createWebChannel=Oz.prototype.g,Jc.prototype.send=Jc.prototype.u,Jc.prototype.open=Jc.prototype.m,Jc.prototype.close=Jc.prototype.close,wz.NO_ERROR=0,wz.TIMEOUT=8,wz.HTTP_ERROR=6,sce.COMPLETE="complete",ace.EventType=eO,eO.OPEN="a",eO.CLOSE="b",eO.ERROR="c",eO.MESSAGE="d",Gl.prototype.listen=Gl.prototype.N,_a.prototype.listenOnce=_a.prototype.O,_a.prototype.getLastError=_a.prototype.Oa,_a.prototype.getLastErrorCode=_a.prototype.Ea,_a.prototype.getStatus=_a.prototype.aa,_a.prototype.getResponseJson=_a.prototype.Sa,_a.prototype.getResponseText=_a.prototype.fa,_a.prototype.send=_a.prototype.da,_a.prototype.setWithCredentials=_a.prototype.Ka;var GFe=Bv.createWebChannelTransport=function(){return new Oz},KFe=Bv.getStatEventTarget=function(){return Cz()},FK=Bv.ErrorCode=wz,$Fe=Bv.EventType=sce,YFe=Bv.Event=DS,Kce=Bv.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ZFe=Bv.FetchXmlHttpFactory=aO,Pz=Bv.WebChannel=ace,XFe=Bv.XhrIo=_a;const $ce="@firebase/firestore";class Kl{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Kl.UNAUTHENTICATED=new Kl(null),Kl.GOOGLE_CREDENTIALS=new Kl("google-credentials-uid"),Kl.FIRST_PARTY=new Kl("first-party-uid"),Kl.MOCK_USER=new Kl("mock-user");let LD="9.14.0";const CC=new Nu.Yd("@firebase/firestore");function NK(){return CC.logLevel}function Xt(r,...t){if(CC.logLevel<=Nu.in.DEBUG){const e=t.map(BK);CC.debug(`Firestore (${LD}): ${r}`,...e)}}function Ga(r,...t){if(CC.logLevel<=Nu.in.ERROR){const e=t.map(BK);CC.error(`Firestore (${LD}): ${r}`,...e)}}function kS(r,...t){if(CC.logLevel<=Nu.in.WARN){const e=t.map(BK);CC.warn(`Firestore (${LD}): ${r}`,...e)}}function BK(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Yi(r="Unexpected state"){const t=`FIRESTORE (${LD}) INTERNAL ASSERTION FAILED: `+r;throw Ga(t),new Error(t)}function Rn(r,t){r||Yi()}function Ei(r,t){return r}const ft={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ut extends re.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class xl{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Yce{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class eNe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Kl.UNAUTHENTICATED))}shutdown(){}}class tNe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class iNe{constructor(t){this.t=t,this.currentUser=Kl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let n=this.i;const s=h=>this.i!==n?(n=this.i,e(h)):Promise.resolve();let o=new xl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xl,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=o;t.enqueueRetryable((0,Ct.Z)(function*(){yield h.promise,yield s(i.currentUser)}))},l=h=>{Xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):(Xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xl)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Rn("string"==typeof i.accessToken),new Yce(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Rn(null===t||"string"==typeof t),new Kl(t)}}class nNe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n,this.type="FirstParty",this.user=Kl.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class rNe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n}getToken(){return Promise.resolve(new nNe(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Kl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zce{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sNe{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&Xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,Xt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const n=s=>{Xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?n(s):Xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Rn("string"==typeof e.token),this.A=e.token,new Zce(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function oNe(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}class Xce{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const n=oNe(40);for(let s=0;s<n.length;++s)i.length<20&&n[s]<e&&(i+=t.charAt(n[s]%t.length))}return i}}function $n(r,t){return r<t?-1:r>t?1:0}function OD(r,t,e){return r.length===t.length&&r.every((i,n)=>e(i,t[n]))}function Qce(r){return r+"\0"}class Qo{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ut(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ut(ft.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ut(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ut(ft.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Qo.fromMillis(Date.now())}static fromDate(t){return Qo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Qo(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?$n(this.nanoseconds,t.nanoseconds):$n(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Mn(t)}static min(){return new Mn(new Qo(0,0))}static max(){return new Mn(new Qo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class dO{constructor(t,e,i){void 0===e?e=0:e>t.length&&Yi(),void 0===i?i=t.length-e:i>t.length-e&&Yi(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===dO.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof dO?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let n=0;n<i;n++){const s=t.get(n),o=e.get(n);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class ns extends dO{construct(t,e,i){return new ns(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Ut(ft.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(n=>n.length>0))}return new ns(e)}static emptyPath(){return new ns([])}}const aNe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ka extends dO{construct(t,e,i){return new ka(t,e,i)}static isValidIdentifier(t){return aNe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ka.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ka(["__name__"])}static fromServerFormat(t){const e=[];let i="",n=0;const s=()=>{if(0===i.length)throw new Ut(ft.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;n<t.length;){const a=t[n];if("\\"===a){if(n+1===t.length)throw new Ut(ft.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[n+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Ut(ft.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,n+=2}else"`"===a?(o=!o,n++):"."!==a||o?(i+=a,n++):(s(),n++)}if(s(),o)throw new Ut(ft.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ka(e)}static emptyPath(){return new ka([])}}class yi{constructor(t){this.path=t}static fromPath(t){return new yi(ns.fromString(t))}static fromName(t){return new yi(ns.fromString(t).popFirst(5))}static empty(){return new yi(ns.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===ns.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return ns.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new yi(new ns(t.slice()))}}class Fz{constructor(t,e,i,n){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=n}}function HK(r){return r.fields.find(t=>2===t.kind)}function RS(r){return r.fields.filter(t=>2!==t.kind)}Fz.UNKNOWN_ID=-1;class Nz{constructor(t,e){this.fieldPath=t,this.kind=e}}class pO{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new pO(0,ed.min())}}function Jce(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,n=Mn.fromTimestamp(1e9===i?new Qo(e+1,0):new Qo(e,i));return new ed(n,yi.empty(),t)}function ede(r){return new ed(r.readTime,r.key,-1)}class ed{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new ed(Mn.min(),yi.empty(),-1)}static max(){return new ed(Mn.max(),yi.empty(),-1)}}function VK(r,t){let e=r.readTime.compareTo(t.readTime);return 0!==e?e:(e=yi.comparator(r.documentKey,t.documentKey),0!==e?e:$n(r.largestBatchId,t.largestBatchId))}const tde="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ide{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function wC(r){return zK.apply(this,arguments)}function zK(){return zK=(0,Ct.Z)(function*(r){if(r.code!==ft.FAILED_PRECONDITION||r.message!==tde)throw r;Xt("LocalStore","Unexpectedly lost primary lease")}),zK.apply(this,arguments)}class at{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Yi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new at((i,n)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,n)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,n)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof at?e:at.resolve(e)}catch(e){return at.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):at.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):at.reject(e)}static resolve(t){return new at((e,i)=>{e(t)})}static reject(t){return new at((e,i)=>{i(t)})}static waitFor(t){return new at((e,i)=>{let n=0,s=0,o=!1;t.forEach(a=>{++n,a.next(()=>{++s,o&&s===n&&e()},l=>i(l))}),o=!0,s===n&&e()})}static or(t){let e=at.resolve(!1);for(const i of t)e=e.next(n=>n?at.resolve(n):i());return e}static forEach(t,e){const i=[];return t.forEach((n,s)=>{i.push(e.call(this,n,s))}),this.waitFor(i)}static mapArray(t,e){return new at((i,n)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(u=>{o[h]=u,++a,a===s&&i(o)},u=>n(u))}})}static doWhile(t,e){return new at((i,n)=>{const s=()=>{!0===t()?e().next(()=>{s()},n):i()};s()})}}class Bz{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new xl,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new fO(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const n=jK(i.target.error);this.P.reject(new fO(t,n))}}static open(t,e,i,n){try{return new Bz(e,t.transaction(n,i))}catch(s){throw new fO(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||(Xt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new cNe(e)}}class jf{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===jf.D((0,re.z$)())&&Ga("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Xt("SimpleDb","Removing database:",t),MS(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,re.hl)())return!1;if(jf.N())return!0;const t=(0,re.z$)(),e=jf.D(t),i=0<e&&e<10,n=jf.k(t),s=0<n&&n<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,Ct.Z)(function*(){return e.db||(Xt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,n)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{n(new fO(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;n("VersionError"===a.name?new Ut(ft.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Ut(ft.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new fO(t,a))},s.onupgradeneeded=o=>{Xt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.S.$(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{Xt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,n){var s=this;return(0,Ct.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.F(t);const l=Bz.open(s.db,t,o?"readonly":"readwrite",i),h=n(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),at.reject(u))).toPromise();return h.catch(()=>{}),yield l.v,h}catch(l){const h=l,u="FirebaseError"!==h.name&&a<3;if(Xt("SimpleDb","Transaction failed with error:",h.message,"Retrying:",u),s.close(),!u)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class uNe{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return MS(this.U.delete())}}class fO extends Ut{constructor(t,e){super(ft.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function SC(r){return"IndexedDbTransactionError"===r.name}class cNe{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(Xt("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(Xt("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),MS(i)}add(t){return Xt("SimpleDb","ADD",this.store.name,t,t),MS(this.store.add(t))}get(t){return MS(this.store.get(t)).next(e=>(void 0===e&&(e=null),Xt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return Xt("SimpleDb","DELETE",this.store.name,t),MS(this.store.delete(t))}count(){return Xt("SimpleDb","COUNT",this.store.name),MS(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const n=this.cursor(i),s=[];return this.H(n,(o,a)=>{s.push(a)}).next(()=>s)}{const n=this.store.getAll(i.range);return new at((s,o)=>{n.onerror=a=>{o(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new at((n,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{n(o.target.result)}})}Y(t,e){Xt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const n=this.cursor(i);return this.H(n,(s,o,a)=>a.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const n=this.cursor(i);return this.H(n,e)}tt(t){const e=this.cursor({});return new at((i,n)=>{e.onerror=s=>{const o=jK(s.target.error);n(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}H(t,e){const i=[];return new at((n,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void n();const l=new uNe(a),h=e(a.primaryKey,a.value,l);if(h instanceof at){const u=h.catch(d=>(l.done(),at.reject(d)));i.push(u)}l.isDone?n():null===l.G?a.continue():a.continue(l.G)}}).next(()=>at.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function MS(r){return new at((t,e)=>{r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{const n=jK(i.target.error);e(n)}})}let nde=!1;function jK(r){const t=jf.D((0,re.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new Ut("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return nde||(nde=!0,setTimeout(()=>{throw i},0)),i}}return r}class dNe{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;Xt("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,Ct.Z)(function*(){e.task=null;try{Xt("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){SC(i)?Xt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield wC(i)}yield e.nt(6e4)}))}}class pNe{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,Ct.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let n=e,s=!0;return at.doWhile(()=>!0===s&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return Xt("IndexBackiller",`Processing collection: ${o}`),this.rt(t,o,n).next(a=>{n-=a,i.add(o)});s=!1})).next(()=>e-n)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(n=>this.localStore.localDocuments.getNextDocuments(t,e,n,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.ot(n,s)).next(a=>(Xt("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}ot(t,e){let i=t;return e.changes.forEach((n,s)=>{const o=ede(s);VK(o,i)>0&&(i=o)}),new ed(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class lc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function rde(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function LS(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function sde(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}lc.at=-1;class Ra{constructor(t,e){this.comparator=t,this.root=e||bh.EMPTY}insert(t,e){return new Ra(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bh.BLACK,null,null))}remove(t){return new Ra(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bh.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Hz(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Hz(this.root,t,this.comparator,!1)}getReverseIterator(){return new Hz(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Hz(this.root,t,this.comparator,!0)}}class Hz{constructor(t,e,i,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bh{constructor(t,e,i,n,s){this.key=t,this.value=e,this.color=i??bh.RED,this.left=n??bh.EMPTY,this.right=s??bh.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,n,s){return new bh(t??this.key,e??this.value,i??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let n=this;const s=i(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,e,i),null):0===s?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,i)),n.fixUp()}removeMin(){if(this.left.isEmpty())return bh.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,n=this;if(e(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===e(t,n.key)){if(n.right.isEmpty())return bh.EMPTY;i=n.right.min(),n=n.copy(i.key,i.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bh.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Yi();const t=this.left.check();if(t!==this.right.check())throw Yi();return t+(this.isRed()?0:1)}}bh.EMPTY=null,bh.RED=!0,bh.BLACK=!1,bh.EMPTY=new class{constructor(){this.size=0}get key(){throw Yi()}get value(){throw Yi()}get color(){throw Yi()}get left(){throw Yi()}get right(){throw Yi()}copy(r,t,e,i,n){return this}insert(r,t,e){return new bh(r,t)}remove(r,t){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zs{constructor(t){this.comparator=t,this.data=new Ra(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const n=i.getNext();if(this.comparator(n.key,t[1])>=0)return;e(n.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ode(this.data.getIterator())}getIteratorFrom(t){return new ode(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Zs)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(n,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Zs(this.comparator);return e.data=t,e}}class ode{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function PD(r){return r.hasNext()?r.getNext():void 0}class td{constructor(t){this.fields=t,t.sort(ka.comparator)}static empty(){return new td([])}unionWith(t){let e=new Zs(ka.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new td(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return OD(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Dl{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Dl(e)}static fromUint8Array(t){const e=function(i){let n="";for(let s=0;s<i.length;++s)n+=String.fromCharCode(i[s]);return n}(t);return new Dl(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return $n(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Dl.EMPTY_BYTE_STRING=new Dl("");const gNe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function EC(r){if(Rn(!!r),"string"==typeof r){let t=0;const e=gNe.exec(r);if(Rn(!!e),e[1]){let n=e[1];n=(n+"000000000").substr(0,9),t=Number(n)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ma(r.seconds),nanos:Ma(r.nanos)}}function Ma(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function OS(r){return"string"==typeof r?Dl.fromBase64String(r):Dl.fromUint8Array(r)}function UK(r){var t,e;return"server_timestamp"===(null===(e=((null===(t=r?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function ade(r){const t=r.mapValue.fields.__previous_value__;return UK(t)?ade(t):t}function gO(r){const t=EC(r.mapValue.fields.__local_write_time__.timestampValue);return new Qo(t.seconds,t.nanos)}class mNe{constructor(t,e,i,n,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=n,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class TC{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new TC("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof TC&&t.projectId===this.projectId&&t.database===this.database}}function mO(r){return null==r}function vO(r){return 0===r&&1/r==-1/0}function lde(r){return"number"==typeof r&&Number.isInteger(r)&&!vO(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const xC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vz={nullValue:"NULL_VALUE"};function PS(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?UK(r)?4:dde(r)?9007199254740991:10:Yi()}function Zg(r,t){if(r===t)return!0;const e=PS(r);if(e!==PS(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return gO(r).isEqual(gO(t));case 3:return function(i,n){if("string"==typeof i.timestampValue&&"string"==typeof n.timestampValue&&i.timestampValue.length===n.timestampValue.length)return i.timestampValue===n.timestampValue;const s=EC(i.timestampValue),o=EC(n.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return n=t,OS(r.bytesValue).isEqual(OS(n.bytesValue));case 7:return r.referenceValue===t.referenceValue;case 8:return function(i,n){return Ma(i.geoPointValue.latitude)===Ma(n.geoPointValue.latitude)&&Ma(i.geoPointValue.longitude)===Ma(n.geoPointValue.longitude)}(r,t);case 2:return function(i,n){if("integerValue"in i&&"integerValue"in n)return Ma(i.integerValue)===Ma(n.integerValue);if("doubleValue"in i&&"doubleValue"in n){const s=Ma(i.doubleValue),o=Ma(n.doubleValue);return s===o?vO(s)===vO(o):isNaN(s)&&isNaN(o)}return!1}(r,t);case 9:return OD(r.arrayValue.values||[],t.arrayValue.values||[],Zg);case 10:return function(i,n){const s=i.mapValue.fields||{},o=n.mapValue.fields||{};if(rde(s)!==rde(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!Zg(s[a],o[a])))return!1;return!0}(r,t);default:return Yi()}var n}function yO(r,t){return void 0!==(r.values||[]).find(e=>Zg(e,t))}function DC(r,t){if(r===t)return 0;const e=PS(r),i=PS(t);if(e!==i)return $n(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return $n(r.booleanValue,t.booleanValue);case 2:return function(n,s){const o=Ma(n.integerValue||n.doubleValue),a=Ma(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(r,t);case 3:return hde(r.timestampValue,t.timestampValue);case 4:return hde(gO(r),gO(t));case 5:return $n(r.stringValue,t.stringValue);case 6:return function(n,s){const o=OS(n),a=OS(s);return o.compareTo(a)}(r.bytesValue,t.bytesValue);case 7:return function(n,s){const o=n.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const h=$n(o[l],a[l]);if(0!==h)return h}return $n(o.length,a.length)}(r.referenceValue,t.referenceValue);case 8:return function(n,s){const o=$n(Ma(n.latitude),Ma(s.latitude));return 0!==o?o:$n(Ma(n.longitude),Ma(s.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return function(n,s){const o=n.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const h=DC(o[l],a[l]);if(h)return h}return $n(o.length,a.length)}(r.arrayValue,t.arrayValue);case 10:return function(n,s){if(n===xC.mapValue&&s===xC.mapValue)return 0;if(n===xC.mapValue)return 1;if(s===xC.mapValue)return-1;const o=n.fields||{},a=Object.keys(o),l=s.fields||{},h=Object.keys(l);a.sort(),h.sort();for(let u=0;u<a.length&&u<h.length;++u){const d=$n(a[u],h[u]);if(0!==d)return d;const m=DC(o[a[u]],l[h[u]]);if(0!==m)return m}return $n(a.length,h.length)}(r.mapValue,t.mapValue);default:throw Yi()}}function hde(r,t){if("string"==typeof r&&"string"==typeof t&&r.length===t.length)return $n(r,t);const e=EC(r),i=EC(t),n=$n(e.seconds,i.seconds);return 0!==n?n:$n(e.nanos,i.nanos)}function FD(r){return WK(r)}function WK(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const n=EC(i);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?OS(r.bytesValue).toBase64():"referenceValue"in r?yi.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(t=r.geoPointValue).latitude},${t.longitude})`:"arrayValue"in r?function(i){let n="[",s=!0;for(const o of i.values||[])s?s=!1:n+=",",n+=WK(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(i){const n=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of n)o?o=!1:s+=",",s+=`${a}:${WK(i.fields[a])}`;return s+"}"}(r.mapValue):Yi();var t}function FS(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function qK(r){return!!r&&"integerValue"in r}function bO(r){return!!r&&"arrayValue"in r}function ude(r){return!!r&&"nullValue"in r}function cde(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function zz(r){return!!r&&"mapValue"in r}function CO(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return LS(r.mapValue.fields,(e,i)=>t.mapValue.fields[e]=CO(i)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=CO(r.arrayValue.values[e]);return t}return Object.assign({},r)}function dde(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function vNe(r){return"nullValue"in r?Vz:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?FS(TC.empty(),yi.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Yi()}function yNe(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?FS(TC.empty(),yi.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?xC:Yi()}function pde(r,t){const e=DC(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function fde(r,t){const e=DC(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}class Ch{constructor(t){this.value=t}static empty(){return new Ch({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!zz(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=CO(e)}setAll(t){let e=ka.emptyPath(),i={},n=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,n),i={},n=[],e=a.popLast()}o?i[a.lastSegment()]=CO(o):n.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,n)}delete(t){const e=this.field(t.popLast());zz(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Zg(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let n=e.mapValue.fields[t.get(i)];zz(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=n),e=n}return e.mapValue.fields}applyChanges(t,e,i){LS(e,(n,s)=>t[n]=s);for(const n of i)delete t[n]}clone(){return new Ch(CO(this.value))}}function gde(r){const t=[];return LS(r.fields,(e,i)=>{const n=new ka([e]);if(zz(i)){const s=gde(i.mapValue).fields;if(0===s.length)t.push(n);else for(const o of s)t.push(n.child(o))}else t.push(n)}),new td(t)}class To{constructor(t,e,i,n,s,o){this.key=t,this.documentType=e,this.version=i,this.readTime=n,this.data=s,this.documentState=o}static newInvalidDocument(t){return new To(t,0,Mn.min(),Mn.min(),Ch.empty(),0)}static newFoundDocument(t,e,i){return new To(t,1,e,Mn.min(),i,0)}static newNoDocument(t,e){return new To(t,2,e,Mn.min(),Ch.empty(),0)}static newUnknownDocument(t,e){return new To(t,3,e,Mn.min(),Ch.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ch.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ch.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof To&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new To(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bNe{constructor(t,e=null,i=[],n=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=n,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function mde(r,t=null,e=[],i=[],n=null,s=null,o=null){return new bNe(r,t,e,i,n,s,o)}function NS(r){const t=Ei(r);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(n=i).field.canonicalString()+n.op.toString()+FD(n.value);var n}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(n=i).field.canonicalString()+n.dir;var n}).join(","),mO(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>FD(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>FD(i)).join(",")),t.ht=e}return t.ht}function wO(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!ANe(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if((e=r.filters[n]).op!==(i=t.filters[n]).op||!e.field.isEqual(i.field)||!Zg(e.value,i.value))return!1;var e,i;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!wde(r.startAt,t.startAt)&&wde(r.endAt,t.endAt)}function jz(r){return yi.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Uz(r,t){return r.filters.filter(e=>e instanceof wh&&e.field.isEqual(t))}function vde(r,t,e){let i=Vz,n=!0;for(const s of Uz(r,t)){let o=Vz,a=!0;switch(s.op){case"<":case"<=":o=vNe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Vz}pde({value:i,inclusive:n},{value:o,inclusive:a})<0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];pde({value:i,inclusive:n},{value:o,inclusive:e.inclusive})<0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}function yde(r,t,e){let i=xC,n=!0;for(const s of Uz(r,t)){let o=xC,a=!0;switch(s.op){case">=":case">":o=yNe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=xC}fde({value:i,inclusive:n},{value:o,inclusive:a})>0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];fde({value:i,inclusive:n},{value:o,inclusive:e.inclusive})>0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}class wh extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new wNe(t,e,i):"array-contains"===e?new TNe(t,i):"in"===e?new xNe(t,i):"not-in"===e?new DNe(t,i):"array-contains-any"===e?new INe(t,i):new wh(t,e,i)}static lt(t,e,i){return"in"===e?new SNe(t,i):new ENe(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(DC(e,this.value)):null!==e&&PS(this.value)===PS(e)&&this.ft(DC(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Yi()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class wNe extends wh{constructor(t,e,i){super(t,e,i),this.key=yi.fromName(i.referenceValue)}matches(t){const e=yi.comparator(t.key,this.key);return this.ft(e)}}class SNe extends wh{constructor(t,e){super(t,"in",e),this.keys=bde(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ENe extends wh{constructor(t,e){super(t,"not-in",e),this.keys=bde(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function bde(r,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>yi.fromName(i.referenceValue))}class TNe extends wh{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return bO(e)&&yO(e.arrayValue,this.value)}}class xNe extends wh{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&yO(this.value.arrayValue,e)}}class DNe extends wh{constructor(t,e){super(t,"not-in",e)}matches(t){if(yO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!yO(this.value.arrayValue,e)}}class INe extends wh{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!bO(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>yO(this.value.arrayValue,i))}}class IC{constructor(t,e){this.position=t,this.inclusive=e}}class ND{constructor(t,e="asc"){this.field=t,this.dir=e}}function ANe(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}function Cde(r,t,e){let i=0;for(let n=0;n<r.position.length;n++){const s=t[n],o=r.position[n];if(i=s.field.isKeyField()?yi.comparator(yi.fromName(o.referenceValue),e.key):DC(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function wde(r,t){if(null===r)return null===t;if(null===t||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!Zg(r.position[e],t.position[e]))return!1;return!0}class zv{constructor(t,e=null,i=[],n=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=n,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function Sde(r,t,e,i,n,s,o,a){return new zv(r,t,e,i,n,s,o,a)}function BD(r){return new zv(r)}function Ede(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function GK(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function KK(r){for(const t of r.filters)if(t.dt())return t.field;return null}function $K(r){return null!==r.collectionGroup}function HD(r){const t=Ei(r);if(null===t._t){t._t=[];const e=KK(t),i=GK(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new ND(e)),t._t.push(new ND(ka.keyField(),"asc"));else{let n=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(n=!0);if(!n){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new ND(ka.keyField(),s))}}}return t._t}function mu(r){const t=Ei(r);if(!t.wt)if("F"===t.limitType)t.wt=mde(t.path,t.collectionGroup,HD(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of HD(t))e.push(new ND(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new IC(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new IC(t.startAt.position,t.startAt.inclusive):null;t.wt=mde(t.path,t.collectionGroup,e,t.filters,t.limit,i,n)}return t.wt}function Wz(r,t,e){return new zv(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function SO(r,t){return wO(mu(r),mu(t))&&r.limitType===t.limitType}function Tde(r){return`${NS(mu(r))}|lt:${r.limitType}`}function YK(r){return`Query(target=${function CNe(r){let t=r.path.canonicalString();return null!==r.collectionGroup&&(t+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(t+=`, filters: [${r.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${FD(i.value)}`;var i}).join(", ")}]`),mO(r.limit)||(t+=", limit: "+r.limit),r.orderBy.length>0&&(t+=`, orderBy: [${r.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),r.startAt&&(t+=", startAt: ",t+=r.startAt.inclusive?"b:":"a:",t+=r.startAt.position.map(e=>FD(e)).join(",")),r.endAt&&(t+=", endAt: ",t+=r.endAt.inclusive?"a:":"b:",t+=r.endAt.position.map(e=>FD(e)).join(",")),`Target(${t})`}(mu(r))}; limitType=${r.limitType})`}function ZK(r,t){return t.isFoundDocument()&&function(e,i){const n=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):yi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(r,t)&&function(e,i){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===i.data.field(n.field))return!1;return!0}(r,t)&&function(e,i){for(const n of e.filters)if(!n.matches(i))return!1;return!0}(r,t)&&(i=t,!((e=r).startAt&&!function(n,s,o){const a=Cde(n,s,o);return n.inclusive?a<=0:a<0}(e.startAt,HD(e),i)||e.endAt&&!function(n,s,o){const a=Cde(n,s,o);return n.inclusive?a>=0:a>0}(e.endAt,HD(e),i)));var e,i}function xde(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Dde(r){return(t,e)=>{let i=!1;for(const n of HD(r)){const s=_Ne(n,t,e);if(0!==s)return s;i=i||n.field.isKeyField()}return 0}}function _Ne(r,t,e){const i=r.field.isKeyField()?yi.comparator(t.key,e.key):function(n,s,o){const a=s.data.field(n),l=o.data.field(n);return null!==a&&null!==l?DC(a,l):Yi()}(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Yi()}}function Ide(r,t){if(r.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vO(t)?"-0":t}}function Ade(r){return{integerValue:""+r}}function _de(r,t){return lde(t)?Ade(t):Ide(r,t)}class qz{constructor(){this._=void 0}}function kNe(r,t,e){return r instanceof VD?function(i,n){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return n&&(s.fields.__previous_value__=n),{mapValue:s}}(e,t):r instanceof BS?Rde(r,t):r instanceof HS?Mde(r,t):function(i,n){const s=kde(i,n),o=Lde(s)+Lde(i.yt);return qK(s)&&qK(i.yt)?Ade(o):Ide(i.It,o)}(r,t)}function RNe(r,t,e){return r instanceof BS?Rde(r,t):r instanceof HS?Mde(r,t):e}function kde(r,t){return r instanceof zD?qK(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class VD extends qz{}class BS extends qz{constructor(t){super(),this.elements=t}}function Rde(r,t){const e=Ode(t);for(const i of r.elements)e.some(n=>Zg(n,i))||e.push(i);return{arrayValue:{values:e}}}class HS extends qz{constructor(t){super(),this.elements=t}}function Mde(r,t){let e=Ode(t);for(const i of r.elements)e=e.filter(n=>!Zg(n,i));return{arrayValue:{values:e}}}class zD extends qz{constructor(t,e){super(),this.It=t,this.yt=e}}function Lde(r){return Ma(r.integerValue||r.doubleValue)}function Ode(r){return bO(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class EO{constructor(t,e){this.field=t,this.transform=e}}class LNe{constructor(t,e){this.version=t,this.transformResults=e}}class Jo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Jo}static exists(t){return new Jo(void 0,t)}static updateTime(t){return new Jo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gz(r,t){return void 0!==r.updateTime?t.isFoundDocument()&&t.version.isEqual(r.updateTime):void 0===r.exists||r.exists===t.isFoundDocument()}class Kz{}function Pde(r,t){if(!r.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return r.isNoDocument()?new UD(r.key,Jo.none()):new jD(r.key,r.data,Jo.none());{const e=r.data,i=Ch.empty();let n=new Zs(ka.comparator);for(let s of t.fields)if(!n.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),n=n.add(s)}return new jv(r.key,i,new td(n.toArray()),Jo.none())}}function ONe(r,t,e){r instanceof jD?function(i,n,s){const o=i.value.clone(),a=Bde(i.fieldTransforms,n,s.transformResults);o.setAll(a),n.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(r,t,e):r instanceof jv?function(i,n,s){if(!Gz(i.precondition,n))return void n.convertToUnknownDocument(s.version);const o=Bde(i.fieldTransforms,n,s.transformResults),a=n.data;a.setAll(Nde(i)),a.setAll(o),n.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(r,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function TO(r,t,e,i){return r instanceof jD?function(n,s,o,a){if(!Gz(n.precondition,s))return o;const l=n.value.clone(),h=Hde(n.fieldTransforms,a,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(r,t,e,i):r instanceof jv?function(n,s,o,a){if(!Gz(n.precondition,s))return o;const l=Hde(n.fieldTransforms,a,s),h=s.data;return h.setAll(Nde(n)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===o?null:o.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(u=>u.field))}(r,t,e,i):(o=e,Gz(r.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function PNe(r,t){let e=null;for(const i of r.fieldTransforms){const n=t.data.field(i.field),s=kde(i.transform,n||null);null!=s&&(null===e&&(e=Ch.empty()),e.set(i.field,s))}return e||null}function Fde(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=r.fieldTransforms)&&void 0===i||e&&i&&OD(e,i,(n,s)=>function MNe(r,t){return r.field.isEqual(t.field)&&(i=t.transform,(e=r.transform)instanceof BS&&i instanceof BS||e instanceof HS&&i instanceof HS?OD(e.elements,i.elements,Zg):e instanceof zD&&i instanceof zD?Zg(e.yt,i.yt):e instanceof VD&&i instanceof VD);var e,i}(n,s))))&&(0===r.type?r.value.isEqual(t.value):1!==r.type||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask));var e,i}class jD extends Kz{constructor(t,e,i,n=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class jv extends Kz{constructor(t,e,i,n,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Nde(r){const t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}}),t}function Bde(r,t,e){const i=new Map;Rn(r.length===e.length);for(let n=0;n<e.length;n++){const s=r[n],o=s.transform,a=t.data.field(s.field);i.set(s.field,RNe(o,a,e[n]))}return i}function Hde(r,t,e){const i=new Map;for(const n of r){const s=n.transform,o=e.data.field(n.field);i.set(n.field,kNe(s,o,t))}return i}class UD extends Kz{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class XK extends Kz{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FNe{constructor(t){this.count=t}}var al,rs;function Vde(r){switch(r){default:return Yi();case ft.CANCELLED:case ft.UNKNOWN:case ft.DEADLINE_EXCEEDED:case ft.RESOURCE_EXHAUSTED:case ft.INTERNAL:case ft.UNAVAILABLE:case ft.UNAUTHENTICATED:return!1;case ft.INVALID_ARGUMENT:case ft.NOT_FOUND:case ft.ALREADY_EXISTS:case ft.PERMISSION_DENIED:case ft.FAILED_PRECONDITION:case ft.ABORTED:case ft.OUT_OF_RANGE:case ft.UNIMPLEMENTED:case ft.DATA_LOSS:return!0}}function zde(r){if(void 0===r)return Ga("GRPC error has no .code"),ft.UNKNOWN;switch(r){case al.OK:return ft.OK;case al.CANCELLED:return ft.CANCELLED;case al.UNKNOWN:return ft.UNKNOWN;case al.DEADLINE_EXCEEDED:return ft.DEADLINE_EXCEEDED;case al.RESOURCE_EXHAUSTED:return ft.RESOURCE_EXHAUSTED;case al.INTERNAL:return ft.INTERNAL;case al.UNAVAILABLE:return ft.UNAVAILABLE;case al.UNAUTHENTICATED:return ft.UNAUTHENTICATED;case al.INVALID_ARGUMENT:return ft.INVALID_ARGUMENT;case al.NOT_FOUND:return ft.NOT_FOUND;case al.ALREADY_EXISTS:return ft.ALREADY_EXISTS;case al.PERMISSION_DENIED:return ft.PERMISSION_DENIED;case al.FAILED_PRECONDITION:return ft.FAILED_PRECONDITION;case al.ABORTED:return ft.ABORTED;case al.OUT_OF_RANGE:return ft.OUT_OF_RANGE;case al.UNIMPLEMENTED:return ft.UNIMPLEMENTED;case al.DATA_LOSS:return ft.DATA_LOSS;default:return Yi()}}(rs=al||(al={}))[rs.OK=0]="OK",rs[rs.CANCELLED=1]="CANCELLED",rs[rs.UNKNOWN=2]="UNKNOWN",rs[rs.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rs[rs.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rs[rs.NOT_FOUND=5]="NOT_FOUND",rs[rs.ALREADY_EXISTS=6]="ALREADY_EXISTS",rs[rs.PERMISSION_DENIED=7]="PERMISSION_DENIED",rs[rs.UNAUTHENTICATED=16]="UNAUTHENTICATED",rs[rs.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rs[rs.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rs[rs.ABORTED=10]="ABORTED",rs[rs.OUT_OF_RANGE=11]="OUT_OF_RANGE",rs[rs.UNIMPLEMENTED=12]="UNIMPLEMENTED",rs[rs.INTERNAL=13]="INTERNAL",rs[rs.UNAVAILABLE=14]="UNAVAILABLE",rs[rs.DATA_LOSS=15]="DATA_LOSS";class AC{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[n,s]of i)if(this.equalsFn(n,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),n=this.inner[i];if(void 0===n)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return void(n[s]=[t,e]);n.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return 1===i.length?delete this.inner[e]:i.splice(n,1),this.innerSize--,!0;return!1}forEach(t){LS(this.inner,(e,i)=>{for(const[n,s]of i)t(n,s)})}isEmpty(){return sde(this.inner)}size(){return this.innerSize}}const NNe=new Ra(yi.comparator);function hc(){return NNe}const jde=new Ra(yi.comparator);function xO(...r){let t=jde;for(const e of r)t=t.insert(e.key,e);return t}function Ude(r){let t=jde;return r.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Xg(){return DO()}function Wde(){return DO()}function DO(){return new AC(r=>r.toString(),(r,t)=>r.isEqual(t))}const BNe=new Ra(yi.comparator),HNe=new Zs(yi.comparator);function pr(...r){let t=HNe;for(const e of r)t=t.add(e);return t}const VNe=new Zs($n);function $z(){return VNe}class IO{constructor(t,e,i,n,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const n=new Map;return n.set(t,AO.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new IO(Mn.min(),n,$z(),hc(),pr())}}class AO{constructor(t,e,i,n,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new AO(i,e,pr(),pr(),pr())}}class Yz{constructor(t,e,i,n){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=n}}class qde{constructor(t,e){this.targetId=t,this.At=e}}class Gde{constructor(t,e,i=Dl.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=n}}class Kde{constructor(){this.Rt=0,this.bt=Yde(),this.Pt=Dl.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=pr(),e=pr(),i=pr();return this.bt.forEach((n,s)=>{switch(s){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:i=i.add(n);break;default:Yi()}}),new AO(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=Yde()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class zNe{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=hc(),this.qt=$de(),this.Kt=new Zs($n)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:Yi()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,n)=>{this.Ht(n)&&e(n)})}Yt(t){const e=t.targetId,i=t.At.count,n=this.Xt(e);if(n){const s=n.target;if(jz(s))if(0===i){const o=new yi(s.path);this.jt(e,o,To.newNoDocument(o,Mn.min()))}else Rn(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&jz(a.target)){const l=new yi(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,To.newNoDocument(l,t))}s.Dt&&(e.set(o,s.xt()),s.Nt())}});let i=pr();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Xt(l);return!h||2===h.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(t));const n=new IO(t,e,this.Kt,this.Ut,i);return this.Ut=hc(),this.qt=$de(),this.Kt=new Zs($n),n}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const n=this.zt(t);this.ee(t,e)?n.kt(e,1):n.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new Kde,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new Zs($n),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||Xt("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new Kde),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function $de(){return new Ra(yi.comparator)}function Yde(){return new Ra(yi.comparator)}const jNe={asc:"ASCENDING",desc:"DESCENDING"},UNe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class WNe{constructor(t,e){this.databaseId=t,this.gt=e}}function _O(r,t){return r.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zde(r,t){return r.gt?t.toBase64():t.toUint8Array()}function qNe(r,t){return _O(r,t.toTimestamp())}function $l(r){return Rn(!!r),Mn.fromTimestamp(function(t){const e=EC(t);return new Qo(e.seconds,e.nanos)}(r))}function QK(r,t){return(e=r,new ns(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Xde(r){const t=ns.fromString(r);return Rn(spe(t)),t}function kO(r,t){return QK(r.databaseId,t.path)}function Qg(r,t){const e=Xde(t);if(e.get(1)!==r.databaseId.projectId)throw new Ut(ft.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new Ut(ft.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new yi(Jde(e))}function JK(r,t){return QK(r.databaseId,t)}function Qde(r){const t=Xde(r);return 4===t.length?ns.emptyPath():Jde(t)}function RO(r){return new ns(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Jde(r){return Rn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function epe(r,t,e){return{name:kO(r,t),fields:e.value.mapValue.fields}}function tpe(r,t,e){const i=Qg(r,t.name),n=$l(t.updateTime),s=new Ch({mapValue:{fields:t.fields}}),o=To.newFoundDocument(i,n,s);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function MO(r,t){let e;if(t instanceof jD)e={update:epe(r,t.key,t.value)};else if(t instanceof UD)e={delete:kO(r,t.key)};else if(t instanceof jv)e={update:epe(r,t.key,t.data),updateMask:eBe(t.fieldMask)};else{if(!(t instanceof XK))return Yi();e={verify:kO(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(n,s){const o=s.transform;if(o instanceof VD)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof BS)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof HS)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof zD)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw Yi()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(n=t.precondition).updateTime?{updateTime:qNe(r,n.updateTime)}:void 0!==n.exists?{exists:n.exists}:Yi()),e;var n}function e$(r,t){const e=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?Jo.updateTime($l(n.updateTime)):void 0!==n.exists?Jo.exists(n.exists):Jo.none():Jo.none(),i=t.updateTransforms?t.updateTransforms.map(n=>function(s,o){let a=null;"setToServerValue"in o?(Rn("REQUEST_TIME"===o.setToServerValue),a=new VD):"appendMissingElements"in o?a=new BS(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new HS(o.removeAllFromArray.values||[]):"increment"in o?a=new zD(s,o.increment):Yi();const l=ka.fromServerFormat(o.fieldPath);return new EO(l,a)}(r,n)):[];var n;if(t.update){const n=Qg(r,t.update.name),s=new Ch({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new td((t.updateMask.fieldPaths||[]).map(h=>ka.fromServerFormat(h)));return new jv(n,s,o,e,i)}return new jD(n,s,e,i)}if(t.delete){const n=Qg(r,t.delete);return new UD(n,e)}if(t.verify){const n=Qg(r,t.verify);return new XK(n,e)}return Yi()}function ipe(r,t){return{documents:[JK(r,t.path)]}}function t$(r,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=JK(r,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=JK(r,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const n=function(l){if(0===l.length)return;const h=l.map(u=>function(d){if("=="===d.op){if(cde(d.value))return{unaryFilter:{field:WD(d.field),op:"IS_NAN"}};if(ude(d.value))return{unaryFilter:{field:WD(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(cde(d.value))return{unaryFilter:{field:WD(d.field),op:"IS_NOT_NAN"}};if(ude(d.value))return{unaryFilter:{field:WD(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:WD(d.field),op:XNe(d.op),value:d.value}}}(u));return 1===h.length?h[0]:{compositeFilter:{op:"AND",filters:h}}}(t.filters);n&&(e.structuredQuery.where=n);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:WD((u=h).field),direction:ZNe(u.dir)};var u})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const o=(h=t.limit,r.gt||mO(h)?h:{value:h});var h,a,l;return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(e.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),e}function npe(r){let t=Qde(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let n=null;if(i>0){Rn(1===i);const u=e.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=rpe(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(u=>{return new ND(qD((d=u).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;e.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,mO(d)?null:d}(e.limit));let l=null;var u;e.startAt&&(l=new IC((u=e.startAt).values||[],!!u.before));let h=null;return e.endAt&&(h=function(u){return new IC(u.values||[],!u.before)}(e.endAt)),Sde(t,n,o,s,a,"F",l,h)}function rpe(r){return r?void 0!==r.unaryFilter?[JNe(r)]:void 0!==r.fieldFilter?[QNe(r)]:void 0!==r.compositeFilter?r.compositeFilter.filters.map(t=>rpe(t)).reduce((t,e)=>t.concat(e)):Yi():[]}function ZNe(r){return jNe[r]}function XNe(r){return UNe[r]}function WD(r){return{fieldPath:r.canonicalString()}}function qD(r){return ka.fromServerFormat(r.fieldPath)}function QNe(r){return wh.create(qD(r.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Yi()}}(r.fieldFilter.op),r.fieldFilter.value)}function JNe(r){switch(r.unaryFilter.op){case"IS_NAN":const t=qD(r.unaryFilter.field);return wh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=qD(r.unaryFilter.field);return wh.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qD(r.unaryFilter.field);return wh.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const n=qD(r.unaryFilter.field);return wh.create(n,"!=",{nullValue:"NULL_VALUE"});default:return Yi()}}function eBe(r){const t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function spe(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function vu(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=ope(t)),t=tBe(r.get(e),t);return ope(t)}function tBe(r,t){let e=t;const i=r.length;for(let n=0;n<i;n++){const s=r.charAt(n);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function ope(r){return r+"\x01\x01"}function Jg(r){const t=r.length;if(Rn(t>=2),2===t)return Rn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),ns.emptyPath();const e=t-2,i=[];let n="";for(let s=0;s<t;){const o=r.indexOf("\x01",s);switch((o<0||o>e)&&Yi(),r.charAt(o+1)){case"\x01":const a=r.substring(s,o);let l;0===n.length?l=a:(n+=a,l=n,n=""),i.push(l);break;case"\x10":n+=r.substring(s,o),n+="\0";break;case"\x11":n+=r.substring(s,o+1);break;default:Yi()}s=o+2}return new ns(i)}const ape=["userId","batchId"];function Zz(r,t){return[r,vu(t)]}function lpe(r,t,e){return[r,vu(t),e]}const iBe={},nBe=["prefixPath","collectionGroup","readTime","documentId"],rBe=["prefixPath","collectionGroup","documentId"],sBe=["collectionGroup","readTime","prefixPath","documentId"],oBe=["canonicalId","targetId"],aBe=["targetId","path"],lBe=["path","targetId"],hBe=["collectionId","parent"],uBe=["indexId","uid"],cBe=["uid","sequenceNumber"],dBe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pBe=["indexId","uid","orderedDocumentKey"],fBe=["userId","collectionPath","documentId"],gBe=["userId","collectionPath","largestBatchId"],mBe=["userId","collectionGroup","largestBatchId"],hpe=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vBe=[...hpe,"documentOverlays"],upe=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cpe=upe,yBe=[...cpe,"indexConfiguration","indexState","indexEntries"];class i$ extends ide{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Yl(r,t){const e=Ei(r);return jf.M(e.ie,t)}class n${constructor(t,e,i,n){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=n}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(t.key)&&ONe(s,t,i[n])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=TO(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=TO(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=Wde();return this.mutations.forEach(n=>{const s=t.get(n.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(n.key)?null:a;const l=Pde(o,a);null!==l&&i.set(n.key,l),o.isValidDocument()||o.convertToNoDocument(Mn.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),pr())}isEqual(t){return this.batchId===t.batchId&&OD(this.mutations,t.mutations,(e,i)=>Fde(e,i))&&OD(this.baseMutations,t.baseMutations,(e,i)=>Fde(e,i))}}class r${constructor(t,e,i,n){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=n}static from(t,e,i){Rn(t.mutations.length===i.length);let n=BNe;const s=t.mutations;for(let o=0;o<s.length;o++)n=n.insert(s[o].key,i[o].version);return new r$(t,e,i,n)}}class s${constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class _C{constructor(t,e,i,n,s=Mn.min(),o=Mn.min(),a=Dl.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new _C(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new _C(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new _C(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class dpe{constructor(t){this.re=t}}function ppe(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Xz(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:kO(n=r.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:_O(n,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:VS(t.version)};else{if(!t.isUnknownDocument())return Yi();i.unknownDocument={path:e.path.toArray(),version:VS(t.version)}}var n,s;return i}function Xz(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function VS(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function zS(r){const t=new Qo(r.seconds,r.nanoseconds);return Mn.fromTimestamp(t)}function jS(r,t){const e=(t.baseMutations||[]).map(s=>e$(r.re,s));for(let s=0;s<t.mutations.length-1;++s){const o=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(o.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>e$(r.re,s)),n=Qo.fromMillis(t.localWriteTimeMs);return new n$(t.batchId,n,e,i)}function LO(r){const t=zS(r.readTime),e=void 0!==r.lastLimboFreeSnapshotVersion?zS(r.lastLimboFreeSnapshotVersion):Mn.min();let i;var n;return void 0!==r.query.documents?(Rn(1===(n=r.query).documents.length),i=mu(BD(Qde(n.documents[0])))):i=mu(npe(r.query)),new _C(i,r.targetId,0,r.lastListenSequenceNumber,t,e,Dl.fromBase64String(r.resumeToken))}function fpe(r,t){const e=VS(t.snapshotVersion),i=VS(t.lastLimboFreeSnapshotVersion);let n;n=jz(t.target)?ipe(r.re,t.target):t$(r.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:NS(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function o$(r){const t=npe({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?Wz(t,t.limit,"L"):t}function a$(r,t){return new s$(t.largestBatchId,e$(r.re,t.overlayMutation))}function gpe(r,t){const e=t.path.lastSegment();return[r,vu(t.path.popLast()),e]}function mpe(r,t,e,i){return{indexId:r,uid:t.uid||"",sequenceNumber:e,readTime:VS(i.readTime),documentKey:vu(i.documentKey.path),largestBatchId:i.largestBatchId}}class CBe{getBundleMetadata(t,e){return vpe(t).get(e).next(i=>{if(i)return{id:(n=i).bundleId,createTime:zS(n.createTime),version:n.version};var n})}saveBundleMetadata(t,e){return vpe(t).put({bundleId:(i=e).id,createTime:VS($l(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return ype(t).get(e).next(i=>{if(i)return{name:(n=i).name,query:o$(n.bundledQuery),readTime:zS(n.readTime)};var n})}saveNamedQuery(t,e){return ype(t).put({name:(i=e).name,readTime:VS($l(i.readTime)),bundledQuery:i.bundledQuery});var i}}function vpe(r){return Yl(r,"bundles")}function ype(r){return Yl(r,"namedQueries")}class Qz{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new Qz(t,e.uid||"")}getOverlay(t,e){return OO(t).get(gpe(this.userId,e)).next(i=>i?a$(this.It,i):null)}getOverlays(t,e){const i=Xg();return at.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){const n=[];return i.forEach((s,o)=>{const a=new s$(e,o);n.push(this.ue(t,a))}),at.waitFor(n)}removeOverlaysForBatchId(t,e,i){const n=new Set;e.forEach(o=>n.add(vu(o.getCollectionPath())));const s=[];return n.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(OO(t).Y("collectionPathOverlayIndex",a))}),at.waitFor(s)}getOverlaysForCollection(t,e,i){const n=Xg(),s=vu(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return OO(t).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const h=a$(this.It,l);n.set(h.getKey(),h)}return n})}getOverlaysForCollectionGroup(t,e,i,n){const s=Xg();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return OO(t).Z({index:"collectionGroupOverlayIndex",range:a},(l,h,u)=>{const d=a$(this.It,h);s.size()<n||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(t,e){return OO(t).put(function(i,n,s){const[o,a,l]=gpe(n,s.mutation.key);return{userId:n,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:MO(i.re,s.mutation)}}(this.It,this.userId,e))}}function OO(r){return Yl(r,"documentOverlays")}class US{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(Ma(t.integerValue));else if("doubleValue"in t){const i=Ma(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),vO(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(OS(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?dde(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):Yi()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const n of Object.keys(i))this._e(n,e),this.ae(i[n],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const n of i)this.ae(n,e)}ge(t,e){this.le(e,37),yi.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function wBe(r){if(0===r)return 8;let t=0;return r>>4==0&&(t+=4,r<<=4),r>>6==0&&(t+=2,r<<=2),r>>7==0&&(t+=1),t}function bpe(r){const t=64-function(e){let i=0;for(let n=0;n<8;++n){const s=wBe(255&e[n]);if(i+=s,8!==s)break}return i}(r);return Math.ceil(t/8)}US.Te=new US;class SBe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const n=e.codePointAt(0);this.Ae(240|n>>>18),this.Ae(128|63&n>>>12),this.Ae(128|63&n>>>6),this.Ae(128|63&n)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const n=e.codePointAt(0);this.Pe(240|n>>>18),this.Pe(128|63&n>>>12),this.Pe(128|63&n>>>6),this.Pe(128|63&n)}}this.ve()}De(t){const e=this.Ce(t),i=bpe(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=255&e[n]}Ne(t){const e=this.Ce(t),i=bpe(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=~(255&e[n])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(n){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,n,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let n=1;n<e.length;++n)e[n]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const n=new Uint8Array(i);n.set(this.buffer),this.buffer=n}}class EBe{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class TBe{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class PO{constructor(){this.Be=new SBe,this.Le=new EBe(this.Be),this.Ue=new TBe(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class WS{constructor(t,e,i,n){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=n}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new WS(this.indexId,this.documentKey,this.arrayValue,i)}}function qS(r,t){let e=r.indexId-t.indexId;return 0!==e?e:(e=Cpe(r.arrayValue,t.arrayValue),0!==e?e:(e=Cpe(r.directionalValue,t.directionalValue),0!==e?e:yi.comparator(r.documentKey,t.documentKey)))}function Cpe(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(0!==i)return i}return r.length-t.length}class xBe{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=HK(t);if(void 0!==e&&!this.ze(e))return!1;const i=RS(t);let n=0,s=0;for(;n<i.length&&this.ze(i[n]);++n);if(n===i.length)return!0;if(void 0!==this.je){const o=i[n];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++n}for(;n<i.length;++n){const o=i[n];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class DBe{constructor(){this.Ye=new l$}addToCollectionParentIndex(t,e){return this.Ye.add(e),at.resolve()}getCollectionParents(t,e){return at.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return at.resolve()}deleteFieldIndex(t,e){return at.resolve()}getDocumentsMatchingTarget(t,e){return at.resolve(null)}getIndexType(t,e){return at.resolve(0)}getFieldIndexes(t,e){return at.resolve([])}getNextCollectionGroupToUpdate(t){return at.resolve(null)}getMinOffset(t,e){return at.resolve(ed.min())}getMinOffsetFromCollectionGroup(t,e){return at.resolve(ed.min())}updateCollectionGroup(t,e,i){return at.resolve()}updateIndexEntries(t,e){return at.resolve()}}class l${constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e]||new Zs(ns.comparator),s=!n.has(i);return this.index[e]=n.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e];return n&&n.has(i)}getEntries(t){return(this.index[t]||new Zs(ns.comparator)).toArray()}}const Jz=new Uint8Array(0);class IBe{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new l$,this.Ze=new AC(i=>NS(i),(i,n)=>wO(i,n)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),n=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:vu(n)};return wpe(t).put(s)}return at.resolve()}getCollectionParents(t,e){const i=[],n=IDBKeyRange.bound([e,""],[Qce(e),""],!1,!0);return wpe(t).W(n).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(Jg(o.parent))}return i})}addFieldIndex(t,e){const i=ej(t),n={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete n.indexId;const s=i.add(n);if(e.indexState){const o=NO(t);return s.next(a=>{o.put(mpe(a,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=ej(t),n=NO(t),s=FO(t);return i.delete(e.indexId).next(()=>n.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=FO(t);let n=!0;const s=new Map;return at.forEach(this.tn(e),o=>this.en(t,o).next(a=>{n&&(n=!!a),s.set(o,a)})).next(()=>{if(n){let o=pr();const a=[];return at.forEach(s,(l,h)=>{var u;Xt("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(L=>`${L.fieldPath}:${L.kind}`).join(",")}`} to execute ${NS(e)}`);const d=function(L,B){const j=HK(B);if(void 0===j)return null;for(const G of Uz(L,j.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(h,l),m=function(L,B){const j=new Map;for(const G of RS(B))for(const ae of Uz(L,G.fieldPath))switch(ae.op){case"==":case"in":j.set(G.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return j.set(G.fieldPath.canonicalString(),ae.value),Array.from(j.values())}return null}(h,l),y=function(L,B){const j=[];let G=!0;for(const ae of RS(B)){const ve=0===ae.kind?vde(L,ae.fieldPath,L.startAt):yde(L,ae.fieldPath,L.startAt);j.push(ve.value),G&&(G=ve.inclusive)}return new IC(j,G)}(h,l),C=function(L,B){const j=[];let G=!0;for(const ae of RS(B)){const ve=0===ae.kind?yde(L,ae.fieldPath,L.endAt):vde(L,ae.fieldPath,L.endAt);j.push(ve.value),G&&(G=ve.inclusive)}return new IC(j,G)}(h,l),S=this.nn(l,h,y),I=this.nn(l,h,C),k=this.sn(l,h,m),O=this.rn(l.indexId,d,S,y.inclusive,I,C.inclusive,k);return at.forEach(O,L=>i.J(L,e.limit).next(B=>{B.forEach(j=>{const G=yi.fromSegments(j.documentKey);o.has(G)||(o=o.add(G),a.push(G))})}))}).next(()=>a)}return at.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,n,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),h=l/(null!=e?e.length:1),u=[];for(let d=0;d<l;++d){const m=e?this.on(e[d/h]):Jz,y=this.un(t,m,i[d%h],n),C=this.cn(t,m,s[d%h],o),S=a.map(I=>this.un(t,m,I,!0));u.push(...this.createRange(y,C,S))}return u}un(t,e,i,n){const s=new WS(t,yi.empty(),e,i);return n?s:s.Ke()}cn(t,e,i,n){const s=new WS(t,yi.empty(),e,i);return n?s.Ke():s}en(t,e){const i=new xBe(e),n=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,n).next(s=>{let o=null;for(const a of s)i.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;return at.forEach(this.tn(e),n=>this.en(t,n).next(s=>{s?0!==i&&s.fields.length<function(o){let a=new Zs(ka.comparator),l=!1;for(const h of o.filters){const u=h;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const h of o.orderBy)h.field.isKeyField()||(a=a.add(h.field));return a.size+(l?1:0)}(n)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new PO;for(const n of RS(t)){const s=e.data.field(n.fieldPath);if(null==s)return null;const o=i.qe(n.kind);US.Te.ce(s,o)}return i.$e()}on(t){const e=new PO;return US.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new PO;return US.Te.ce(FS(this.databaseId,e),i.qe(function(n){const s=RS(n);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let n=[];n.push(new PO);let s=0;for(const o of RS(t)){const a=i[s++];for(const l of n)if(this.ln(e,o.fieldPath)&&bO(a))n=this.fn(n,o,a);else{const h=l.qe(o.kind);US.Te.ce(a,h)}}return this.dn(n)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const n=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of n){const l=new PO;l.seed(a.$e()),US.Te.ce(o,l.qe(e.kind)),s.push(l)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof wh&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=ej(t),n=NO(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const o=[];return at.forEach(s,a=>n.get([a.indexId,this.uid]).next(l=>{o.push(function(h,u){const d=u?new pO(u.sequenceNumber,new ed(zS(u.readTime),new yi(Jg(u.documentKey)),u.largestBatchId)):pO.empty(),m=h.fields.map(([y,C])=>new Nz(ka.fromServerFormat(y),C));return new Fz(h.indexId,h.collectionGroup,m,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,n)=>{const s=i.indexState.sequenceNumber-n.indexState.sequenceNumber;return 0!==s?s:$n(i.collectionGroup,n.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const n=ej(t),s=NO(t);return this._n(t).next(o=>n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>at.forEach(a,l=>s.put(mpe(l.indexId,this.user,o,i)))))}updateIndexEntries(t,e){const i=new Map;return at.forEach(e,(n,s)=>{const o=i.get(n.collectionGroup);return(o?at.resolve(o):this.getFieldIndexes(t,n.collectionGroup)).next(a=>(i.set(n.collectionGroup,a),at.forEach(a,l=>this.wn(t,n,l).next(h=>{const u=this.mn(s,l);return h.isEqual(u)?at.resolve():this.gn(t,s,l,h,u)}))))})}yn(t,e,i,n){return FO(t).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,n){return FO(t).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const n=FO(t);let s=new Zs(qS);return n.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(o,a)=>{s=s.add(new WS(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(t,e){let i=new Zs(qS);const n=this.an(e,t);if(null==n)return i;const s=HK(e);if(null!=s){const o=t.data.field(s.fieldPath);if(bO(o))for(const a of o.arrayValue.values||[])i=i.add(new WS(e.indexId,t.key,this.on(a),n))}else i=i.add(new WS(e.indexId,t.key,Jz,n));return i}gn(t,e,i,n,s){Xt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(a,l,h,u,d){const m=a.getIterator(),y=l.getIterator();let C=PD(m),S=PD(y);for(;C||S;){let I=!1,k=!1;if(C&&S){const O=h(C,S);O<0?k=!0:O>0&&(I=!0)}else null!=C?k=!0:I=!0;I?(u(S),S=PD(y)):k?(d(C),C=PD(m)):(C=PD(m),S=PD(y))}}(n,s,qS,a=>{o.push(this.yn(t,e,i,a))},a=>{o.push(this.pn(t,e,i,a))}),at.waitFor(o)}_n(t){let e=1;return NO(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,n,s)=>{s.done(),e=n.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>qS(o,a)).filter((o,a,l)=>!a||0!==qS(o,l[a-1]));const n=[];n.push(t);for(const o of i){const a=qS(o,t),l=qS(o,e);if(0===a)n[0]=t.Ke();else if(a>0&&l<0)n.push(o),n.push(o.Ke());else if(l>0)break}n.push(e);const s=[];for(let o=0;o<n.length;o+=2)s.push(IDBKeyRange.bound([n[o].indexId,this.uid,n[o].arrayValue,n[o].directionalValue,Jz,[]],[n[o+1].indexId,this.uid,n[o+1].arrayValue,n[o+1].directionalValue,Jz,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Spe)}getMinOffset(t,e){return at.mapArray(this.tn(e),i=>this.en(t,i).next(n=>n||Yi())).next(Spe)}}function wpe(r){return Yl(r,"collectionParents")}function FO(r){return Yl(r,"indexEntries")}function ej(r){return Yl(r,"indexConfiguration")}function NO(r){return Yl(r,"indexState")}function Spe(r){Rn(0!==r.length);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const n=r[i].indexState.offset;VK(n,t)<0&&(t=n),e<n.largestBatchId&&(e=n.largestBatchId)}return new ed(t.readTime,t.documentKey,e)}const Epe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class uc{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new uc(t,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Tpe(r,t,e){const i=r.store("mutations"),n=r.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.Z({range:o},(u,d,m)=>(a++,m.delete()));s.push(l.next(()=>{Rn(1===a)}));const h=[];for(const u of e.mutations){const d=lpe(t,u.key.path,e.batchId);s.push(n.delete(d)),h.push(u.key)}return at.waitFor(s).next(()=>h)}function tj(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw Yi();t=r.noDocument}return JSON.stringify(t).length}uc.DEFAULT_COLLECTION_PERCENTILE=10,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uc.DEFAULT=new uc(41943040,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uc.DISABLED=new uc(-1,0,0);class ij{constructor(t,e,i,n){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=n,this.In={}}static oe(t,e,i,n){Rn(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new ij(s,e,i,n)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kC(t).Z({index:"userMutationsIndex",range:i},(n,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,n){const s=GD(t),o=kC(t);return o.add({}).next(a=>{Rn("number"==typeof a);const l=new n$(a,e,i,n),h=function(m,y,C){const S=C.baseMutations.map(k=>MO(m.re,k)),I=C.mutations.map(k=>MO(m.re,k));return{userId:y,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:I}}(this.It,this.userId,l),u=[];let d=new Zs((m,y)=>$n(m.canonicalString(),y.canonicalString()));for(const m of n){const y=lpe(this.userId,m.key.path,a);d=d.add(m.key.path.popLast()),u.push(o.put(h)),u.push(s.put(y,iBe))}return d.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.In[a]=l.keys()}),at.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return kC(t).get(e).next(i=>i?(Rn(i.userId===this.userId),jS(this.It,i)):null)}Tn(t,e){return this.In[e]?at.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const n=i.keys();return this.In[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return kC(t).Z({index:"userMutationsIndex",range:n},(o,a,l)=>{a.userId===this.userId&&(Rn(a.batchId>=i),s=jS(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return kC(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(n,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kC(t).W("userMutationsIndex",e).next(i=>i.map(n=>jS(this.It,n)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Zz(this.userId,e.path),n=IDBKeyRange.lowerBound(i),s=[];return GD(t).Z({range:n},(o,a,l)=>{const[h,u,d]=o,m=Jg(u);if(h===this.userId&&e.path.isEqual(m))return kC(t).get(d).next(y=>{if(!y)throw Yi();Rn(y.userId===this.userId),s.push(jS(this.It,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Zs($n);const n=[];return e.forEach(s=>{const o=Zz(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=GD(t).Z({range:a},(h,u,d)=>{const[m,y,C]=h,S=Jg(y);m===this.userId&&s.path.isEqual(S)?i=i.add(C):d.done()});n.push(l)}),at.waitFor(n).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1,s=Zz(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Zs($n);return GD(t).Z({range:o},(l,h,u)=>{const[d,m,y]=l,C=Jg(m);d===this.userId&&i.isPrefixOf(C)?C.length===n&&(a=a.add(y)):u.done()}).next(()=>this.En(t,a))}En(t,e){const i=[],n=[];return e.forEach(s=>{n.push(kC(t).get(s).next(o=>{if(null===o)throw Yi();Rn(o.userId===this.userId),i.push(jS(this.It,o))}))}),at.waitFor(n).next(()=>i)}removeMutationBatch(t,e){return Tpe(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),at.forEach(i,n=>this.referenceDelegate.markPotentiallyOrphaned(t,n))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return at.resolve();const i=IDBKeyRange.lowerBound([this.userId]),n=[];return GD(t).Z({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=Jg(s[1]);n.push(l)}else a.done()}).next(()=>{Rn(0===n.length)})})}containsKey(t,e){return xpe(t,this.userId,e)}Rn(t){return Dpe(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function xpe(r,t,e){const i=Zz(t,e.path),n=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return GD(r).Z({range:s,X:!0},(a,l,h)=>{const[u,d,m]=a;u===t&&d===n&&(o=!0),h.done()}).next(()=>o)}function kC(r){return Yl(r,"mutations")}function GD(r){return Yl(r,"documentMutations")}function Dpe(r){return Yl(r,"mutationQueues")}class GS{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new GS(0)}static vn(){return new GS(-1)}}class ABe{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new GS(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>Mn.fromTimestamp(new Qo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(n=>(n.highestListenSequenceNumber=e,i&&(n.lastRemoteSnapshotVersion=i.toTimestamp()),e>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e),this.Sn(t,n)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>KD(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Rn(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let n=0;const s=[];return KD(t).Z((o,a)=>{const l=LO(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(n++,s.push(this.removeTargetData(t,l)))}).next(()=>at.waitFor(s)).next(()=>n)}forEachTarget(t,e){return KD(t).Z((i,n)=>{const s=LO(n);e(s)})}Vn(t){return Ipe(t).get("targetGlobalKey").next(e=>(Rn(null!==e),e))}Sn(t,e){return Ipe(t).put("targetGlobalKey",e)}Dn(t,e){return KD(t).put(fpe(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=NS(e),n=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return KD(t).Z({range:n,index:"queryTargetsIndex"},(o,a,l)=>{const h=LO(a);wO(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const n=[],s=RC(t);return e.forEach(o=>{const a=vu(o.path);n.push(s.put({targetId:i,path:a})),n.push(this.referenceDelegate.addReference(t,i,o))}),at.waitFor(n)}removeMatchingKeys(t,e,i){const n=RC(t);return at.forEach(e,s=>{const o=vu(s.path);return at.waitFor([n.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=RC(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(n)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),n=RC(t);let s=pr();return n.Z({range:i,X:!0},(o,a,l)=>{const h=Jg(o[1]),u=new yi(h);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=vu(e.path),n=IDBKeyRange.bound([i],[Qce(i)],!1,!0);let s=0;return RC(t).Z({index:"documentTargetsIndex",X:!0,range:n},([o,a],l,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}se(t,e){return KD(t).get(e).next(i=>i?LO(i):null)}}function KD(r){return Yl(r,"targets")}function Ipe(r){return Yl(r,"targetGlobal")}function RC(r){return Yl(r,"targetDocuments")}function Ape([r,t],[e,i]){const n=$n(r,e);return 0===n?$n(t,i):n}class _Be{constructor(t){this.xn=t,this.buffer=new Zs(Ape),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();Ape(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class kBe{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;Xt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,Ct.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){SC(i)?Xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield wC(i)}yield e.Fn(3e5)}))}}class RBe{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return at.resolve(lc.at);const i=new _Be(e);return this.$n.forEachTarget(t,n=>i.On(n.sequenceNumber)).next(()=>this.$n.Ln(t,n=>i.On(n))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector","Garbage collection skipped; disabled"),at.resolve(Epe)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(Xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Epe):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,n,s,o,a,l,h;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),n=this.params.maximumSequenceNumbersToCollect):n=d,o=Date.now(),this.nthSequenceNumber(t,n))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,e))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(h=Date.now(),NK()<=Nu.in.DEBUG&&Xt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${n} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(h-l)+`ms\nTotal Duration: ${h-u}ms`),at.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:d})))}}class MBe{constructor(t,e){this.db=t,this.garbageCollector=new RBe(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(n=>i+n))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,n)=>e(n))}addReference(t,e,i){return nj(t,i)}removeReference(t,e,i){return nj(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return nj(t,e)}Gn(t,e){return function(i,n){let s=!1;return Dpe(i).tt(o=>xpe(i,o,n).next(a=>(a&&(s=!0),at.resolve(!a)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let s=0;return this.Kn(t,(o,a)=>{if(a<=e){const l=this.Gn(t,o).next(h=>{if(!h)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,Mn.min()),RC(t).delete([0,vu(o.path)])))});n.push(l)}}).next(()=>at.waitFor(n)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return nj(t,e)}Kn(t,e){const i=RC(t);let n,s=lc.at;return i.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:h})=>{0===o?(s!==lc.at&&e(new yi(Jg(n)),s),s=h,n=l):s=lc.at}).next(()=>{s!==lc.at&&e(new yi(Jg(n)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function nj(r,t){return RC(r).put((i=r.currentSequenceNumber,{targetId:0,path:vu(t.path),sequenceNumber:i}));var i}class _pe{constructor(){this.changes=new AC(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,To.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?at.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class LBe{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return KS(t).put(i)}removeEntry(t,e,i){return KS(t).delete(function(n,s){const o=n.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Xz(s),o[o.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=To.newInvalidDocument(e);return KS(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(BO(e))},(n,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:To.newInvalidDocument(e)};return KS(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(BO(e))},(n,s)=>{i={document:this.jn(e,s),size:tj(s)}}).next(()=>i)}getEntries(t,e){let i=hc();return this.zn(t,e,(n,s)=>{const o=this.jn(n,s);i=i.insert(n,o)}).next(()=>i)}Hn(t,e){let i=hc(),n=new Ra(yi.comparator);return this.zn(t,e,(s,o)=>{const a=this.jn(s,o);i=i.insert(s,a),n=n.insert(s,tj(o))}).next(()=>({documents:i,Jn:n}))}zn(t,e,i){if(e.isEmpty())return at.resolve();let n=new Zs(Lpe);e.forEach(l=>n=n.add(l));const s=IDBKeyRange.bound(BO(n.first()),BO(n.last())),o=n.getIterator();let a=o.getNext();return KS(t).Z({index:"documentKeyIndex",range:s},(l,h,u)=>{const d=yi.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&Lpe(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,h),a=o.hasNext()?o.getNext():null),a?u.j(BO(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(t,e,i){const n=[e.popLast().toArray(),e.lastSegment(),Xz(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return KS(t).W(IDBKeyRange.bound(n,s,!0)).next(o=>{let a=hc();for(const l of o){const h=this.jn(yi.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(h.key,h)}return a})}getAllFromCollectionGroup(t,e,i,n){let s=hc();const o=Mpe(e,i),a=Mpe(e,ed.max());return KS(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,h,u)=>{const d=this.jn(yi.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(d.key,d),s.size===n&&u.done()}).next(()=>s)}newChangeBuffer(t){return new OBe(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Rpe(t).get("remoteDocumentGlobalKey").next(e=>(Rn(!!e),e))}Qn(t,e){return Rpe(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function bBe(r,t){let e;if(t.document)e=tpe(r.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=yi.fromSegments(t.noDocument.path),n=zS(t.noDocument.readTime);e=To.newNoDocument(i,n),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Yi();{const i=yi.fromSegments(t.unknownDocument.path),n=zS(t.unknownDocument.version);e=To.newUnknownDocument(i,n)}}return t.readTime&&e.setReadTime(function(i){const n=new Qo(i[0],i[1]);return Mn.fromTimestamp(n)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(Mn.min()))return i}return To.newInvalidDocument(t)}}function kpe(r){return new LBe(r)}class OBe extends _pe{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new AC(i=>i.toString(),(i,n)=>i.isEqual(n))}applyChanges(t){const e=[];let i=0,n=new Zs((s,o)=>$n(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=ppe(this.Yn.It,o);n=n.add(s.path.popLast()),i+=tj(l)-a.size,e.push(this.Yn.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=ppe(this.Yn.It,o.convertToNoDocument(Mn.min()));e.push(this.Yn.addEntry(t,s,l))}}),n.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),at.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:n})=>(n.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function Rpe(r){return Yl(r,"remoteDocumentGlobal")}function KS(r){return Yl(r,"remoteDocumentsV14")}function BO(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Mpe(r,t){const e=t.documentKey.path.toArray();return[r,Xz(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function Lpe(r,t){const e=r.path.toArray(),i=t.path.toArray();let n=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(n=$n(e[s],i[s]),n)return n;return n=$n(e.length,i.length),n||(n=$n(e[e.length-2],i[i.length-2]),n||$n(e[e.length-1],i[i.length-1]))}class PBe{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Ope{constructor(t,e,i,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=n}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(n=>(i=n,this.getBaseDocument(t,e,i))).next(n=>(null!==i&&TO(i.mutation,n,td.empty(),Qo.now()),n))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,pr()).next(()=>i))}getLocalViewOfDocuments(t,e,i=pr()){const n=Xg();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,i).next(s=>{let o=xO();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=Xg();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,pr()))}populateOverlays(t,e,i){const n=[];return i.forEach(s=>{e.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(t,n).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,n){let s=hc();const o=DO(),a=DO();return e.forEach((l,h)=>{const u=i.get(h.key);n.has(h.key)&&(void 0===u||u.mutation instanceof jv)?s=s.insert(h.key,h):void 0!==u&&(o.set(h.key,u.mutation.getFieldMask()),TO(u.mutation,h,u.mutation.getFieldMask(),Qo.now()))}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,u)=>o.set(h,u)),e.forEach((h,u)=>{var d;return a.set(h,new PBe(u,null!==(d=o.get(h))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(t,e){const i=DO();let n=new Ra((o,a)=>o-a),s=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=e.get(l);if(null===h)return;let u=i.get(l)||td.empty();u=a.applyToLocalView(h,u),i.set(l,u);const d=(n.get(a.batchId)||pr()).add(l);n=n.insert(a.batchId,d)})}).next(()=>{const o=[],a=n.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,u=l.value,d=Wde();u.forEach(m=>{if(!s.has(m)){const y=Pde(e.get(m),i.get(m));null!==y&&d.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,d))}return at.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return yi.isDocumentKey((n=e).path)&&null===n.collectionGroup&&0===n.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):$K(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var n}getNextDocuments(t,e,i,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,n).next(s=>{const o=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,n-s.size):at.resolve(Xg());let a=-1,l=s;return o.next(h=>at.forEach(h,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?at.resolve():this.getBaseDocument(t,u,d).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,pr())).next(u=>({batchId:a,changes:Ude(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new yi(e)).next(i=>{let n=xO();return i.isFoundDocument()&&(n=n.insert(i.key,i)),n})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const n=e.collectionGroup;let s=xO();return this.indexManager.getCollectionParents(t,n).next(o=>at.forEach(o,a=>{const l=(h=e,u=a.child(n),new zv(u,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,u;return this.getDocumentsMatchingCollectionQuery(t,l,i).next(h=>{h.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let n;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(n=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((a,l)=>{const h=l.getKey();null===n.get(h)&&(n=n.insert(h,To.newInvalidDocument(h)))});let o=xO();return n.forEach((a,l)=>{const h=s.get(a);void 0!==h&&TO(h.mutation,l,td.empty(),Qo.now()),ZK(e,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):at.resolve(To.newInvalidDocument(e))}}class FBe{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return at.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:$l(i.createTime)}),at.resolve()}getNamedQuery(t,e){return at.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:o$(i.bundledQuery),readTime:$l(i.readTime)}),at.resolve();var i}}class NBe{constructor(){this.overlays=new Ra(yi.comparator),this.es=new Map}getOverlay(t,e){return at.resolve(this.overlays.get(e))}getOverlays(t,e){const i=Xg();return at.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((n,s)=>{this.ue(t,e,s)}),at.resolve()}removeOverlaysForBatchId(t,e,i){const n=this.es.get(i);return void 0!==n&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),at.resolve()}getOverlaysForCollection(t,e,i){const n=Xg(),s=e.length+1,o=new yi(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&n.set(l.getKey(),l)}return at.resolve(n)}getOverlaysForCollectionGroup(t,e,i,n){let s=new Ra((h,u)=>h-u);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>i){let u=s.get(h.largestBatchId);null===u&&(u=Xg(),s=s.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const a=Xg(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>a.set(h,u)),!(a.size()>=n)););return at.resolve(a)}ue(t,e,i){const n=this.overlays.get(i.key);if(null!==n){const o=this.es.get(n.largestBatchId).delete(i.key);this.es.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new s$(e,i));let s=this.es.get(e);void 0===s&&(s=pr(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class h${constructor(){this.ns=new Zs(Zl.ss),this.rs=new Zs(Zl.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new Zl(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new Zl(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new yi(new ns([])),i=new Zl(e,t),n=new Zl(e,t+1),s=[];return this.rs.forEachInRange([i,n],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new yi(new ns([])),i=new Zl(e,t),n=new Zl(e,t+1);let s=pr();return this.rs.forEachInRange([i,n],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Zl(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Zl{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return yi.comparator(t.key,e.key)||$n(t._s,e._s)}static os(t,e){return $n(t._s,e._s)||yi.comparator(t.key,e.key)}}class BBe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Zs(Zl.ss)}checkEmpty(t){return at.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,n){const s=this.ws;this.ws++;const o=new n$(s,e,i,n);this.mutationQueue.push(o);for(const a of n)this.gs=this.gs.add(new Zl(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return at.resolve(o)}lookupMutationBatch(t,e){return at.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.ps(e+1),s=n<0?0:n;return at.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return at.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return at.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Zl(e,0),n=new Zl(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,n],o=>{const a=this.ys(o._s);s.push(a)}),at.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Zs($n);return e.forEach(n=>{const s=new Zl(n,0),o=new Zl(n,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{i=i.add(a._s)})}),at.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1;let s=i;yi.isDocumentKey(s)||(s=s.child(""));const o=new Zl(new yi(s),0);let a=new Zs($n);return this.gs.forEachWhile(l=>{const h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===n&&(a=a.add(l._s)),!0)},o),at.resolve(this.Is(a))}Is(t){const e=[];return t.forEach(i=>{const n=this.ys(i);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Rn(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return at.forEach(e.mutations,n=>{const s=new Zl(n.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new Zl(e,0),n=this.gs.firstAfterOrEqual(i);return at.resolve(e.isEqual(n&&n.key))}performConsistencyCheck(t){return at.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class HBe{constructor(t){this.Es=t,this.docs=new Ra(yi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,n=this.docs.get(i),s=n?n.size:0,o=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return at.resolve(i?i.document.mutableCopy():To.newInvalidDocument(e))}getEntries(t,e){let i=hc();return e.forEach(n=>{const s=this.docs.get(n);i=i.insert(n,s?s.document.mutableCopy():To.newInvalidDocument(n))}),at.resolve(i)}getAllFromCollection(t,e,i){let n=hc();const s=new yi(e.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!e.isPrefixOf(a.path))break;a.path.length>e.length+1||VK(ede(l),i)<=0||(n=n.insert(l.key,l.mutableCopy()))}return at.resolve(n)}getAllFromCollectionGroup(t,e,i,n){Yi()}As(t,e){return at.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new VBe(this)}getSize(t){return at.resolve(this.size)}}class VBe extends _pe{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,n)=>{n.isValidDocument()?e.push(this.Yn.addEntry(t,n)):this.Yn.removeEntry(i)}),at.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class zBe{constructor(t){this.persistence=t,this.Rs=new AC(e=>NS(e),wO),this.lastRemoteSnapshotVersion=Mn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new h$,this.targetCount=0,this.vs=GS.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,n)=>e(n)),at.resolve()}getLastRemoteSnapshotVersion(t){return at.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return at.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),at.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),at.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new GS(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,at.resolve()}updateTargetData(t,e){return this.Dn(e),at.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,at.resolve()}removeTargets(t,e,i){let n=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),n++)}),at.waitFor(s).next(()=>n)}getTargetCount(t){return at.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return at.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),at.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const n=this.persistence.referenceDelegate,s=[];return n&&e.forEach(o=>{s.push(n.markPotentiallyOrphaned(t,o))}),at.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),at.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return at.resolve(i)}containsKey(t,e){return at.resolve(this.Ps.containsKey(e))}}class Ppe{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new lc(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new zBe(this),this.indexManager=new DBe,this.remoteDocumentCache=new HBe(i=>this.referenceDelegate.xs(i)),this.It=new dpe(e),this.Ns=new FBe(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new NBe,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new BBe(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){Xt("MemoryPersistence","Starting transaction:",t);const n=new jBe(this.Ss.next());return this.referenceDelegate.ks(),i(n).next(s=>this.referenceDelegate.Os(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}Ms(t,e){return at.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class jBe extends ide{constructor(t){super(),this.currentSequenceNumber=t}}class rj{constructor(t){this.persistence=t,this.Fs=new h$,this.$s=null}static Bs(t){return new rj(t)}get Ls(){if(this.$s)return this.$s;throw Yi()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),at.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),at.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),at.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(n=>this.Ls.add(n.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(n=>{n.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return at.forEach(this.Ls,i=>{const n=yi.fromPath(i);return this.Us(t,n).next(s=>{s||e.removeEntry(n,Mn.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return at.or([()=>at.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class UBe{constructor(t){this.It=t}$(t,e,i,n){const s=new Bz("createOrUpgrade",e);var a;i<1&&n>=1&&(t.createObjectStore("owner"),(a=t).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ape,{unique:!0}),a.createObjectStore("documentMutations"),Fpe(t),function(a){a.createObjectStore("remoteDocuments")}(t));let o=at.resolve();return i<3&&n>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(t),Fpe(t)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mn.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),i<4&&n>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(h=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ape,{unique:!0});const u=l.store("mutations"),d=h.map(m=>u.put(m));return at.waitFor(d)})}(t,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&n>=5&&(o=o.next(()=>this.qs(s))),i<6&&n>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&n>=7&&(o=o.next(()=>this.Gs(s))),i<8&&n>=8&&(o=o.next(()=>this.Qs(t,s))),i<9&&n>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&n>=10&&(o=o.next(()=>this.js(s))),i<11&&n>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&n>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:fBe});l.createIndex("collectionPathOverlayIndex",gBe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",mBe,{unique:!1})}(t)})),i<13&&n>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:nBe});l.createIndex("documentKeyIndex",rBe),l.createIndex("collectionGroupIndex",sBe)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&n>=14&&(o=o.next(()=>this.zs(t,s))),i<15&&n>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:uBe}).createIndex("sequenceNumberIndex",cBe,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:dBe}).createIndex("documentKeyIndex",pBe,{unique:!1})}(t))),o}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,n)=>{e+=tj(n)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(n=>at.forEach(n,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>at.forEach(a,l=>{Rn(l.userId===s.userId);const h=jS(this.It,l);return Tpe(t,s.userId,h).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(n=>{const s=[];return i.Z((o,a)=>{const l=new ns(o),h=[0,vu(l)];s.push(e.get(h).next(u=>u?at.resolve():e.put({targetId:0,path:vu(l),sequenceNumber:n.highestListenSequenceNumber})))}).next(()=>at.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:hBe});const i=e.store("collectionParents"),n=new l$,s=o=>{if(n.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:vu(l)})}};return e.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new ns(o);return s(l.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([o,a,l],h)=>{const u=Jg(a);return s(u.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,n)=>{const s=LO(n),o=fpe(this.It,s);return e.put(o)})}Ws(t,e){const i=e.store("remoteDocuments"),n=[];return i.Z((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(h=o,h.document?new yi(ns.fromString(h.document.name).popFirst(5)):h.noDocument?yi.fromSegments(h.noDocument.path):h.unknownDocument?yi.fromSegments(h.unknownDocument.path):Yi()).path.toArray();var h;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};n.push(a.put(u))}).next(()=>at.waitFor(n))}zs(t,e){const i=e.store("mutations"),n=kpe(this.It),s=new Ppe(rj.Bs,this.It.re);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var h;let u=null!==(h=a.get(l.userId))&&void 0!==h?h:pr();jS(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),at.forEach(a,(l,h)=>{const u=new Kl(h),d=Qz.oe(this.It,u),m=s.getIndexManager(u),y=ij.oe(u,this.It,m,s.referenceDelegate);return new Ope(n,y,d,m).recalculateAndSaveOverlaysForDocumentKeys(new i$(e,lc.at),l).next()})})}}function Fpe(r){r.createObjectStore("targetDocuments",{keyPath:aBe}).createIndex("documentTargetsIndex",lBe,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",oBe,{unique:!0}),r.createObjectStore("targetGlobal")}const u$="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class c${constructor(t,e,i,n,s,o,a,l,h,u,d=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=o,this.document=a,this.Js=h,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=m=>Promise.resolve(),!c$.C())throw new Ut(ft.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MBe(this,n),this.ii=e+"main",this.It=new dpe(l),this.ri=new jf(this.ii,this.Xs,new UBe(this.It)),this.Cs=new ABe(this.referenceDelegate,this.It),this.remoteDocumentCache=kpe(this.It),this.Ns=new CBe,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&Ga("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ut(ft.FAILED_PRECONDITION,u$);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new lc(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,Ct.Z)(function*(n){if(e.started)return t(n)});return function(n){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,Ct.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,Ct.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>sj(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(SC(t))return Xt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Xt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return HO(t).get("owner").next(e=>at.resolve(this.mi(e)))}gi(t){return sj(t).delete(this.clientId)}yi(){var t=this;return(0,Ct.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const n=Yl(i,"clientMetadata");return n.W().next(s=>{const o=t.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return at.forEach(a,l=>n.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?at.resolve(!0):HO(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Ut(ft.FAILED_PRECONDITION,u$);return!1}}return!(!this.networkEnabled||!this.inForeground)||sj(t).W().next(i=>void 0===this.Ii(i,5e3).find(n=>{if(this.clientId!==n.clientId){const o=!this.inForeground&&n.inForeground,a=this.networkEnabled===n.networkEnabled;if(!this.networkEnabled&&n.networkEnabled||o&&a)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Xt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Ct.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new i$(e,lc.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>sj(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return ij.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new IBe(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return Qz.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){Xt("IndexedDbPersistence","Starting transaction:",t);const n="readonly"===e?"readonly":"readwrite",s=15===(o=this.Xs)?yBe:14===o?cpe:13===o?upe:12===o?vBe:11===o?hpe:void Yi();var o;let a;return this.ri.runTransaction(t,n,s,l=>(a=new i$(l,this.Ss?this.Ss.next():lc.at),"readwrite-primary"===e?this.fi(a).next(h=>!!h||this.di(a)).next(h=>{if(!h)throw Ga(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ut(ft.FAILED_PRECONDITION,tde);return i(a)}).next(h=>this.wi(a).next(()=>h)):this.Vi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(t){return HO(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Ut(ft.FAILED_PRECONDITION,u$)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return HO(t).put("owner",e)}static C(){return jf.C()}_i(t){const e=HO(t);return e.get("owner").next(i=>this.mi(i)?(Xt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):at.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(Ga(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,re.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return Xt("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ga("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){Ga("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function HO(r){return Yl(r,"owner")}function sj(r){return Yl(r,"clientMetadata")}function d$(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}class p${constructor(t,e,i,n){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=n}static Ci(t,e){let i=pr(),n=pr();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new p$(t,e.fromCache,i,n)}}class Npe{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,n){return this.ki(t,e).next(s=>s||this.Oi(t,e,n,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(Ede(e))return at.resolve(null);let i=mu(e);return this.indexManager.getIndexType(t,i).next(n=>0===n?null:(null!==e.limit&&1===n&&(e=Wz(e,null,"F"),i=mu(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=pr(...s);return this.Ni.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const h=this.Fi(e,a);return this.$i(e,h,o,l.readTime)?this.ki(t,Wz(e,null,"F")):this.Bi(t,h,e,l)}))})))}Oi(t,e,i,n){return Ede(e)||n.isEqual(Mn.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const o=this.Fi(e,s);return this.$i(e,o,i,n)?this.Mi(t,e):(NK()<=Nu.in.DEBUG&&Xt("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),YK(e)),this.Bi(t,o,e,Jce(n,-1)))})}Fi(t,e){let i=new Zs(Dde(t));return e.forEach((n,s)=>{ZK(t,s)&&(i=i.add(s))}),i}$i(t,e,i,n){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}Mi(t,e){return NK()<=Nu.in.DEBUG&&Xt("QueryEngine","Using full collection scan to execute query:",YK(e)),this.Ni.getDocumentsMatchingQuery(t,e,ed.min())}Bi(t,e,i,n){return this.Ni.getDocumentsMatchingQuery(t,i,n).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class WBe{constructor(t,e,i,n){this.persistence=t,this.Li=e,this.It=n,this.Ui=new Ra($n),this.qi=new AC(s=>NS(s),wO),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Ope(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function Bpe(r,t,e,i){return new WBe(r,t,e,i)}function Hpe(r,t){return f$.apply(this,arguments)}function f$(){return f$=(0,Ct.Z)(function*(r,t){const e=Ei(r);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let n;return e.mutationQueue.getAllMutationBatches(i).next(s=>(n=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=pr();for(const h of n){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of s){a.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(h=>({ji:h,removedBatchIds:o,addedBatchIds:a}))})})}),f$.apply(this,arguments)}function qBe(r,t){const e=Ei(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const n=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,h){const u=l.batch,d=u.keys();let m=at.resolve();return d.forEach(y=>{m=m.next(()=>h.getEntry(a,y)).next(C=>{const S=l.docVersions.get(y);Rn(null!==S),C.version.compareTo(S)<0&&(u.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),h.addEntry(C)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,n,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=pr();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(t))).next(()=>e.localDocuments.getDocuments(i,n))})}function Vpe(r){const t=Ei(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function GBe(r,t){const e=Ei(r),i=t.snapshotVersion;let n=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.Gi.newChangeBuffer({trackRemovals:!0});n=e.Ui;const a=[];t.targetChanges.forEach((u,d)=>{const m=n.get(d);if(!m)return;a.push(e.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>e.Cs.addMatchingKeys(s,u.addedDocuments,d)));let y=m.withSequenceNumber(s.currentSequenceNumber);var C,S,I;t.targetMismatches.has(d)?y=y.withResumeToken(Dl.EMPTY_BYTE_STRING,Mn.min()).withLastLimboFreeSnapshotVersion(Mn.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,i)),n=n.insert(d,y),S=y,I=u,(0===(C=m).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0)&&a.push(e.Cs.updateTargetData(s,y))});let l=hc(),h=pr();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(zpe(s,o,t.documentUpdates).next(u=>{l=u.Wi,h=u.zi})),!i.isEqual(Mn.min())){const u=e.Cs.getLastRemoteSnapshotVersion(s).next(d=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return at.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ui=n,s))}function zpe(r,t,e){let i=pr(),n=pr();return e.forEach(s=>i=i.add(s)),t.getEntries(r,i).next(s=>{let o=hc();return e.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(n=n.add(a)),l.isNoDocument()&&l.version.isEqual(Mn.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||0===l.version.compareTo(h.version)&&h.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Xt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Wi:o,zi:n}})}function KBe(r,t){const e=Ei(r);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function $D(r,t){const e=Ei(r);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let n;return e.Cs.getTargetData(i,t).next(s=>s?(n=s,at.resolve(n)):e.Cs.allocateTargetId(i).next(o=>(n=new _C(t,o,0,i.currentSequenceNumber),e.Cs.addTargetData(i,n).next(()=>n))))}).then(i=>{const n=e.Ui.get(i.targetId);return(null===n||i.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function YD(r,t,e){return g$.apply(this,arguments)}function g$(){return g$=(0,Ct.Z)(function*(r,t,e){const i=Ei(r),n=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,n)))}catch(o){if(!SC(o))throw o;Xt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ui=i.Ui.remove(t),i.qi.delete(n.target)}),g$.apply(this,arguments)}function oj(r,t,e){const i=Ei(r);let n=Mn.min(),s=pr();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,h){const u=Ei(a),d=u.qi.get(h);return void 0!==d?at.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,h)}(i,o,mu(t)).next(a=>{if(a)return n=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,t,e?n:Mn.min(),e?s:pr())).next(a=>(Wpe(i,xde(t),a),{documents:a,Hi:s})))}function jpe(r,t){const e=Ei(r),i=Ei(e.Cs),n=e.Ui.get(t);return n?Promise.resolve(n.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(o=>o?o.target:null))}function Upe(r,t){const e=Ei(r),i=e.Ki.get(t)||Mn.min();return e.persistence.runTransaction("Get new document changes","readonly",n=>e.Gi.getAllFromCollectionGroup(n,t,Jce(i,-1),Number.MAX_SAFE_INTEGER)).then(n=>(Wpe(e,t,n),n))}function Wpe(r,t,e){let i=r.Ki.get(t)||Mn.min();e.forEach((n,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),r.Ki.set(t,i)}function m$(){return m$=(0,Ct.Z)(function*(r,t,e,i){const n=Ei(r);let s=pr(),o=hc();for(const h of e){const u=t.Ji(h.metadata.name);h.document&&(s=s.add(u));const d=t.Yi(h);d.setReadTime(t.Xi(h.metadata.readTime)),o=o.insert(u,d)}const a=n.Gi.newChangeBuffer({trackRemovals:!0}),l=yield $D(n,(h=i,mu(BD(ns.fromString(`__bundle__/docs/${h}`)))));var h;return n.persistence.runTransaction("Apply bundle documents","readwrite",h=>zpe(h,a,o).next(u=>(a.apply(h),u)).next(u=>n.Cs.removeMatchingKeysForTargetId(h,l.targetId).next(()=>n.Cs.addMatchingKeys(h,s,l.targetId)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,u.Wi,u.zi)).next(()=>u.Wi)))}),m$.apply(this,arguments)}function YBe(r,t){return v$.apply(this,arguments)}function v$(){return v$=(0,Ct.Z)(function*(r,t,e=pr()){const i=yield $D(r,mu(o$(t.bundledQuery))),n=Ei(r);return n.persistence.runTransaction("Save named query","readwrite",s=>{const o=$l(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return n.Ns.saveNamedQuery(s,t);const a=i.withResumeToken(Dl.EMPTY_BYTE_STRING,o);return n.Ui=n.Ui.insert(a.targetId,a),n.Cs.updateTargetData(s,a).next(()=>n.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>n.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>n.Ns.saveNamedQuery(s,t))})}),v$.apply(this,arguments)}function qpe(r,t){return`firestore_clients_${r}_${t}`}function Gpe(r,t,e){let i=`firestore_mutations_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function y$(r,t){return`firestore_targets_${r}_${t}`}class aj{constructor(t,e,i,n){this.user=t,this.batchId=e,this.state=i,this.error=n}static Zi(t,e,i){const n=JSON.parse(i);let s,o="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return o&&n.error&&(o="string"==typeof n.error.message&&"string"==typeof n.error.code,o&&(s=new Ut(n.error.code,n.error.message))),o?new aj(t,e,n.state,s):(Ga("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class VO{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let n,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(n=new Ut(i.error.code,i.error.message))),s?new VO(t,i.state,n):(Ga("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class lj{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let n="object"==typeof i&&i.activeTargetIds instanceof Array,s=$z();for(let o=0;n&&o<i.activeTargetIds.length;++o)n=lde(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return n?new lj(t,s):(Ga("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class b${constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new b$(e.clientId,e.onlineState):(Ga("SharedClientState",`Failed to parse online state: ${t}`),null)}}class C${constructor(){this.activeTargetIds=$z()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class w${constructor(t,e,i,n,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ra($n),this.started=!1,this.cr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=qpe(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new C$),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Ct.Z)(function*(){const e=yield t.syncEngine.vi();for(const n of e){if(n===t.sr)continue;const s=t.getItem(qpe(t.persistenceKey,n));if(s){const o=lj.Zi(n,s);o&&(t.ur=t.ur.insert(o.clientId,o))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const n=t.yr(i);n&&t.pr(n)}for(const n of t.cr)t.rr(n);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,n)=>{n.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(y$(this.persistenceKey,t));if(i){const n=VO.Zi(t,i);n&&(e=n.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(y$(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(n=>{this.Er(n)}),this.currentUser=t,i.forEach(n=>{this.addPendingMutation(n)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Xt("SharedClientState","READ",t,e),e}setItem(t,e){Xt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Xt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if(Xt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void Ga("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ct.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const n=e.vr(i.key);return e.Vr(n,null)}{const n=e.Sr(i.key,i.newValue);if(n)return e.Vr(n.clientId,n)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const n=e.Dr(i.key,i.newValue);if(n)return e.Cr(n)}}else if(e._r.test(i.key)){if(null!==i.newValue){const n=e.Nr(i.key,i.newValue);if(n)return e.kr(n)}}else if(i.key===e.wr){if(null!==i.newValue){const n=e.yr(i.newValue);if(n)return e.pr(n)}}else if(i.key===e.hr){const n=function(s){let o=lc.at;if(null!=s)try{const a=JSON.parse(s);Rn("number"==typeof a),o=a}catch(a){Ga("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);n!==lc.at&&e.sequenceNumberHandler(n)}else if(i.key===e.mr){const n=e.Or(i.newValue);yield Promise.all(n.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const n=new aj(this.currentUser,t,e,i),s=Gpe(this.persistenceKey,this.currentUser,t);this.setItem(s,n.tr())}Er(t){const e=Gpe(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const n=y$(this.persistenceKey,t),s=new VO(t,e,i);this.setItem(n,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return lj.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),n=Number(i[1]);return aj.Zi(new Kl(void 0!==i[2]?i[2]:null),n,e)}Nr(t,e){const i=this._r.exec(t),n=Number(i[1]);return VO.Zi(n,e)}yr(t){return b$.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,Ct.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);Xt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),n=this.Ir(this.ur),s=this.Ir(i),o=[],a=[];return s.forEach(l=>{n.has(l)||o.push(l)}),n.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=$z();return t.forEach((i,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class Kpe{constructor(){this.Lr=new C$,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new C$,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class ZBe{qr(t){}shutdown(){}}class $pe{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){Xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const XBe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QBe{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class JBe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,n,s){const o=this.ho(t,e);Xt("RestConnection","Sending: ",o,i);const a={};return this.lo(a,n,s),this.fo(t,o,a,i).then(l=>(Xt("RestConnection","Received: ",l),l),l=>{throw kS("RestConnection",`${t} failed with error: `,l,"url: ",o,"request:",i),l})}_o(t,e,i,n,s,o){return this.ao(t,e,i,n,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+LD,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((n,s)=>t[s]=n),i&&i.headers.forEach((n,s)=>t[s]=n)}ho(t,e){return`${this.oo}/v1/${e}:${XBe[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,n){return new Promise((s,o)=>{const a=new XFe;a.setWithCredentials(!0),a.listenOnce($Fe.COMPLETE,()=>{var h;try{switch(a.getLastErrorCode()){case FK.NO_ERROR:const u=a.getResponseJson();Xt("Connection","XHR received:",JSON.stringify(u)),s(u);break;case FK.TIMEOUT:Xt("Connection",'RPC "'+t+'" timed out'),o(new Ut(ft.DEADLINE_EXCEEDED,"Request time out"));break;case FK.HTTP_ERROR:const d=a.getStatus();if(Xt("Connection",'RPC "'+t+'" failed with status:',d,"response text:",a.getResponseText()),d>0){let m=a.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=null===(h=m)||void 0===h?void 0:h.error;if(y&&y.status&&y.message){const C=function(S){const I=S.toLowerCase().replace(/_/g,"-");return Object.values(ft).indexOf(I)>=0?I:ft.UNKNOWN}(y.status);o(new Ut(C,y.message))}else o(new Ut(ft.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ut(ft.UNAVAILABLE,"Connection failed."));break;default:Yi()}}finally{Xt("Connection",'RPC "'+t+'" completed.')}});const l=JSON.stringify(n);a.send(e,"POST",l,i,15)})}wo(t,e,i){const n=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=GFe(),o=KFe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new ZFe({})),this.lo(a.initMessageHeaders,e,i),a.encodeInitMessageHeaders=!0;const l=n.join("");Xt("Connection","Creating WebChannel: "+l,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const m=new QBe({Hr:C=>{d?Xt("Connection","Not sending because WebChannel is closed:",C):(u||(Xt("Connection","Opening WebChannel transport."),h.open(),u=!0),Xt("Connection","WebChannel sending:",C),h.send(C))},Jr:()=>h.close()}),y=(C,S,I)=>{C.listen(S,k=>{try{I(k)}catch(O){setTimeout(()=>{throw O},0)}})};return y(h,Pz.EventType.OPEN,()=>{d||Xt("Connection","WebChannel transport opened.")}),y(h,Pz.EventType.CLOSE,()=>{d||(d=!0,Xt("Connection","WebChannel transport closed"),m.io())}),y(h,Pz.EventType.ERROR,C=>{d||(d=!0,kS("Connection","WebChannel transport errored:",C),m.io(new Ut(ft.UNAVAILABLE,"The operation could not be completed")))}),y(h,Pz.EventType.MESSAGE,C=>{var S;if(!d){const I=C.data[0];Rn(!!I);const k=I,O=k.error||(null===(S=k[0])||void 0===S?void 0:S.error);if(O){Xt("Connection","WebChannel received error:",O);const L=O.status;let B=function(G){const ae=al[G];if(void 0!==ae)return zde(ae)}(L),j=O.message;void 0===B&&(B=ft.INTERNAL,j="Unknown error status: "+L+" with message "+O.message),d=!0,m.io(new Ut(B,j)),h.close()}else Xt("Connection","WebChannel received:",I),m.ro(I)}}),y(o,YFe.STAT_EVENT,C=>{C.stat===Kce.PROXY?Xt("Connection","Detected buffering proxy"):C.stat===Kce.NOPROXY&&Xt("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.so()},0),m}}function Ype(){return typeof window<"u"?window:null}function hj(){return typeof document<"u"?document:null}function zO(r){return new WNe(r,!0)}class S${constructor(t,e,i=1e3,n=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=n,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),n=Math.max(0,e-i);n>0&&Xt("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,n,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Zpe{constructor(t,e,i,n,s,o,a,l){this.Hs=t,this.vo=i,this.Vo=n,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new S$(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Ct.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,Ct.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,Ct.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ft.RESOURCE_EXHAUSTED?(Ga(e.toString()),Ga("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ft.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,n])=>{this.So===e&&this.Go(i,n)},i=>{t(()=>{const n=new Ut(ft.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(n)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(n=>{i(()=>this.Qo(n))}),this.stream.onMessage(n=>{i(()=>this.onMessage(n))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,Ct.Z)(function*(){t.state=0,t.start()}))}Qo(t){return Xt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():(Xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eHe extends Zpe{constructor(t,e,i,n,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,n,o),this.It=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function KNe(r,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(l=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Yi(),n=t.targetChange.targetIds||[],s=function(l,h){return l.gt?(Rn(void 0===h||"string"==typeof h),Dl.fromBase64String(h||"")):(Rn(void 0===h||h instanceof Uint8Array),Dl.fromUint8Array(h||new Uint8Array))}(r,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ft.UNKNOWN:zde(l.code);return new Ut(h,l.message||"")}(o);e=new Gde(i,n,s,a||null)}else if("documentChange"in t){const i=t.documentChange,n=Qg(r,i.document.name),s=$l(i.document.updateTime),o=new Ch({mapValue:{fields:i.document.fields}}),a=To.newFoundDocument(n,s,o);e=new Yz(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const i=t.documentDelete,n=Qg(r,i.document),s=i.readTime?$l(i.readTime):Mn.min(),o=To.newNoDocument(n,s);e=new Yz([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,n=Qg(r,i.document);e=new Yz([],i.removedTargetIds||[],n,null)}else{if(!("filter"in t))return Yi();{const i=t.filter,s=new FNe(i.count||0);e=new qde(i.targetId,s)}}var l;return e}(this.It,t),i=function(n){if(!("targetChange"in n))return Mn.min();const s=n.targetChange;return s.targetIds&&s.targetIds.length?Mn.min():s.readTime?$l(s.readTime):Mn.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=RO(this.It),e.addTarget=function(n,s){let o;const a=s.target;return o=jz(a)?{documents:ipe(n,a)}:{query:t$(n,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Zde(n,s.resumeToken):s.snapshotVersion.compareTo(Mn.min())>0&&(o.readTime=_O(n,s.snapshotVersion.toTimestamp())),o}(this.It,t);const i=function YNe(r,t){const e=function(i,n){switch(n){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Yi()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=RO(this.It),e.removeTarget=t,this.Bo(e)}}class tHe extends Zpe{constructor(t,e,i,n,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,n,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Rn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function $Ne(r,t){return r&&r.length>0?(Rn(void 0!==t),r.map(e=>function(i,n){let s=$l(i.updateTime?i.updateTime:n);return s.isEqual(Mn.min())&&(s=$l(n)),new LNe(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=$l(t.commitTime);return this.listener.Zo(i,e)}return Rn(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=RO(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>MO(this.It,i))};this.Bo(e)}}class iHe extends class{}{constructor(t,e,i,n){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.It=n,this.nu=!1}su(){if(this.nu)throw new Ut(ft.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.ao(t,e,i,n,s)).catch(n=>{throw"FirebaseError"===n.name?(n.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new Ut(ft.UNKNOWN,n.toString())})}_o(t,e,i,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(t,e,i,s,o,n)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ft.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ut(ft.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class rHe{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Ga(e),this.ou=!1):Xt("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class sHe{constructor(t,e,i,n,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{i.enqueueAndForget((0,Ct.Z)(function*(){var l;Uv(o)&&(Xt("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,Ct.Z)(function*(h){const u=Ei(h);u._u.add(4),yield ZD(u),u.gu.set("Unknown"),u._u.delete(4),yield jO(u)}),function(h){return l.apply(this,arguments)})(o))}))}),this.gu=new rHe(i,n)}}function jO(r){return T$.apply(this,arguments)}function T$(){return T$=(0,Ct.Z)(function*(r){if(Uv(r))for(const t of r.wu)yield t(!0)}),T$.apply(this,arguments)}function ZD(r){return x$.apply(this,arguments)}function x$(){return x$=(0,Ct.Z)(function*(r){for(const t of r.wu)yield t(!1)}),x$.apply(this,arguments)}function uj(r,t){const e=Ei(r);e.du.has(t.targetId)||(e.du.set(t.targetId,t),A$(e)?I$(e):QD(e).ko()&&D$(e,t))}function UO(r,t){const e=Ei(r),i=QD(e);e.du.delete(t),i.ko()&&Xpe(e,t),0===e.du.size&&(i.ko()?i.Fo():Uv(e)&&e.gu.set("Unknown"))}function D$(r,t){r.yu.Mt(t.targetId),QD(r).zo(t)}function Xpe(r,t){r.yu.Mt(t),QD(r).Ho(t)}function I$(r){r.yu=new zNe({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),se:t=>r.du.get(t)||null}),QD(r).start(),r.gu.uu()}function A$(r){return Uv(r)&&!QD(r).No()&&r.du.size>0}function Uv(r){return 0===Ei(r)._u.size}function Qpe(r){r.yu=void 0}function oHe(r){return _$.apply(this,arguments)}function _$(){return _$=(0,Ct.Z)(function*(r){r.du.forEach((t,e)=>{D$(r,t)})}),_$.apply(this,arguments)}function aHe(r,t){return k$.apply(this,arguments)}function k$(){return k$=(0,Ct.Z)(function*(r,t){Qpe(r),A$(r)?(r.gu.hu(t),I$(r)):r.gu.set("Unknown")}),k$.apply(this,arguments)}function lHe(r,t,e){return R$.apply(this,arguments)}function R$(){return R$=(0,Ct.Z)(function*(r,t,e){if(r.gu.set("Online"),t instanceof Gde&&2===t.state&&t.cause)try{yield(i=(0,Ct.Z)(function*(n,s){const o=s.cause;for(const a of s.targetIds)n.du.has(a)&&(yield n.remoteSyncer.rejectListen(a,o),n.du.delete(a),n.yu.removeTarget(a))}),function(n,s){return i.apply(this,arguments)})(r,t)}catch(i){Xt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield cj(r,i)}else if(t instanceof Yz?r.yu.Gt(t):t instanceof qde?r.yu.Yt(t):r.yu.Wt(t),!e.isEqual(Mn.min()))try{const i=yield Vpe(r.localStore);e.compareTo(i)>=0&&(yield function(n,s){const o=n.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const h=n.du.get(l);h&&n.du.set(l,h.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=n.du.get(a);if(!l)return;n.du.set(a,l.withResumeToken(Dl.EMPTY_BYTE_STRING,l.snapshotVersion)),Xpe(n,a);const h=new _C(l.target,a,1,l.sequenceNumber);D$(n,h)}),n.remoteSyncer.applyRemoteEvent(o)}(r,e))}catch(i){Xt("RemoteStore","Failed to raise snapshot:",i),yield cj(r,i)}var i}),R$.apply(this,arguments)}function cj(r,t,e){return M$.apply(this,arguments)}function M$(){return M$=(0,Ct.Z)(function*(r,t,e){if(!SC(t))throw t;r._u.add(1),yield ZD(r),r.gu.set("Offline"),e||(e=()=>Vpe(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ct.Z)(function*(){Xt("RemoteStore","Retrying IndexedDB access"),yield e(),r._u.delete(1),yield jO(r)}))}),M$.apply(this,arguments)}function Jpe(r,t){return t().catch(e=>cj(r,e,t))}function XD(r){return L$.apply(this,arguments)}function L$(){return L$=(0,Ct.Z)(function*(r){const t=Ei(r),e=MC(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;hHe(t);)try{const n=yield KBe(t.localStore,i);if(null===n){0===t.fu.length&&e.Fo();break}i=n.batchId,uHe(t,n)}catch(n){yield cj(t,n)}efe(t)&&tfe(t)}),L$.apply(this,arguments)}function hHe(r){return Uv(r)&&r.fu.length<10}function uHe(r,t){r.fu.push(t);const e=MC(r);e.ko()&&e.Yo&&e.Xo(t.mutations)}function efe(r){return Uv(r)&&!MC(r).No()&&r.fu.length>0}function tfe(r){MC(r).start()}function cHe(r){return O$.apply(this,arguments)}function O$(){return O$=(0,Ct.Z)(function*(r){MC(r).eu()}),O$.apply(this,arguments)}function dHe(r){return P$.apply(this,arguments)}function P$(){return P$=(0,Ct.Z)(function*(r){const t=MC(r);for(const e of r.fu)t.Xo(e.mutations)}),P$.apply(this,arguments)}function pHe(r,t,e){return F$.apply(this,arguments)}function F$(){return F$=(0,Ct.Z)(function*(r,t,e){const i=r.fu.shift(),n=r$.from(i,t,e);yield Jpe(r,()=>r.remoteSyncer.applySuccessfulWrite(n)),yield XD(r)}),F$.apply(this,arguments)}function fHe(r,t){return N$.apply(this,arguments)}function N$(){return N$=(0,Ct.Z)(function*(r,t){var e;t&&MC(r).Yo&&(yield(e=(0,Ct.Z)(function*(i,n){if(Vde(s=n.code)&&s!==ft.ABORTED){const o=i.fu.shift();MC(i).Mo(),yield Jpe(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,n)),yield XD(i)}var s}),function(i,n){return e.apply(this,arguments)})(r,t)),efe(r)&&tfe(r)}),N$.apply(this,arguments)}function ife(r,t){return B$.apply(this,arguments)}function B$(){return B$=(0,Ct.Z)(function*(r,t){const e=Ei(r);e.asyncQueue.verifyOperationInProgress(),Xt("RemoteStore","RemoteStore received new credentials");const i=Uv(e);e._u.add(3),yield ZD(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield jO(e)}),B$.apply(this,arguments)}function H$(r,t){return V$.apply(this,arguments)}function V$(){return V$=(0,Ct.Z)(function*(r,t){const e=Ei(r);t?(e._u.delete(2),yield jO(e)):t||(e._u.add(2),yield ZD(e),e.gu.set("Unknown"))}),V$.apply(this,arguments)}function QD(r){return r.pu||(r.pu=function(t,e,i){const n=Ei(t);return n.su(),new eHe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.It,i)}(r.datastore,r.asyncQueue,{Yr:oHe.bind(null,r),Zr:aHe.bind(null,r),Wo:lHe.bind(null,r)}),r.wu.push(function(){var t=(0,Ct.Z)(function*(e){e?(r.pu.Mo(),A$(r)?I$(r):r.gu.set("Unknown")):(yield r.pu.stop(),Qpe(r))});return function(e){return t.apply(this,arguments)}}())),r.pu}function MC(r){return r.Iu||(r.Iu=function(t,e,i){const n=Ei(t);return n.su(),new tHe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.It,i)}(r.datastore,r.asyncQueue,{Yr:cHe.bind(null,r),Zr:fHe.bind(null,r),tu:dHe.bind(null,r),Zo:pHe.bind(null,r)}),r.wu.push(function(){var t=(0,Ct.Z)(function*(e){e?(r.Iu.Mo(),yield XD(r)):(yield r.Iu.stop(),r.fu.length>0&&(Xt("RemoteStore",`Stopping write stream with ${r.fu.length} pending writes`),r.fu=[]))});return function(e){return t.apply(this,arguments)}}())),r.Iu}class z${constructor(t,e,i,n,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=n,this.removalCallback=s,this.deferred=new xl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,e,i,n,s){const o=Date.now()+i,a=new z$(t,e,o,n,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ut(ft.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JD(r,t){if(Ga("AsyncQueue",`${t}: ${r}`),SC(r))return new Ut(ft.UNAVAILABLE,`${t}: ${r}`);throw r}class eI{constructor(t){this.comparator=t?(e,i)=>t(e,i)||yi.comparator(e.key,i.key):(e,i)=>yi.comparator(e.key,i.key),this.keyedMap=xO(),this.sortedSet=new Ra(this.comparator)}static emptySet(t){return new eI(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof eI)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new eI;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class nfe{constructor(){this.Tu=new Ra(yi.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):Yi():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class tI{constructor(t,e,i,n,s,o,a,l,h){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=n,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,i,n,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new tI(t,e,eI.emptySet(e),o,i,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&SO(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let n=0;n<e.length;n++)if(e[n].type!==i[n].type||!e[n].doc.isEqual(i[n].doc))return!1;return!0}}class gHe{constructor(){this.Au=void 0,this.listeners=[]}}class mHe{constructor(){this.queries=new AC(t=>Tde(t),SO),this.onlineState="Unknown",this.Ru=new Set}}function j$(r,t){return U$.apply(this,arguments)}function U$(){return U$=(0,Ct.Z)(function*(r,t){const e=Ei(r),i=t.query;let n=!1,s=e.queries.get(i);if(s||(n=!0,s=new gHe),n)try{s.Au=yield e.onListen(i)}catch(o){const a=JD(o,`Initialization of query '${YK(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&G$(e)}),U$.apply(this,arguments)}function W$(r,t){return q$.apply(this,arguments)}function q$(){return q$=(0,Ct.Z)(function*(r,t){const e=Ei(r),i=t.query;let n=!1;const s=e.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),n=0===s.listeners.length)}if(n)return e.queries.delete(i),e.onUnlisten(i)}),q$.apply(this,arguments)}function vHe(r,t){const e=Ei(r);let i=!1;for(const n of t){const o=e.queries.get(n.query);if(o){for(const a of o.listeners)a.Pu(n)&&(i=!0);o.Au=n}}i&&G$(e)}function yHe(r,t,e){const i=Ei(r),n=i.queries.get(t);if(n)for(const s of n.listeners)s.onError(e);i.queries.delete(t)}function G$(r){r.Ru.forEach(t=>{t.next()})}class K${constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const n of t.docChanges)3!==n.type&&i.push(n);t=new tI(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=tI.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class bHe{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class rfe{constructor(t){this.It=t}Ji(t){return Qg(this.It,t)}Yi(t){return t.metadata.exists?tpe(this.It,t.document,!1):To.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return $l(t)}}class CHe{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sfe(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=ns.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new rfe(this.It);for(const n of t)if(n.metadata.queries){const s=i.Ji(n.metadata.name);for(const o of n.metadata.queries){const a=(e.get(o)||pr()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,Ct.Z)(function*(){const e=yield function $Be(r,t,e,i){return m$.apply(this,arguments)}(t.localStore,new rfe(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const n of t.queries)yield YBe(t.localStore,n,i.get(n.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function sfe(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class ofe{constructor(t){this.key=t}}class afe{constructor(t){this.key=t}}class lfe{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=pr(),this.mutatedKeys=pr(),this.Gu=Dde(t),this.Qu=new eI(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new nfe,n=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,o=n,a=!1;const l="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,h="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,d)=>{const m=n.get(u),y=ZK(this.query,d)?d:null,C=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;m&&y?m.data.isEqual(y.data)?C!==S&&(i.track({type:3,doc:y}),I=!0):this.Hu(m,y)||(i.track({type:2,doc:y}),I=!0,(l&&this.Gu(y,l)>0||h&&this.Gu(y,h)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),I=!0):m&&!y&&(i.track({type:1,doc:m}),I=!0,(l||h)&&(a=!0)),I&&(y?(o=o.add(y),s=S?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:a,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const n=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((h,u)=>function(d,m){const y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Yi()}};return y(d)-y(m)}(h.type,u.type)||this.Gu(h.doc,u.doc)),this.Ju(i);const o=e?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,l=a!==this.qu;return this.qu=a,0!==s.length||l?{snapshot:new tI(this.query,t.Qu,n,s,t.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new nfe,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=pr(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new afe(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new ofe(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=pr();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return tI.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class wHe{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class SHe{constructor(t){this.key=t,this.nc=!1}}class EHe{constructor(t,e,i,n,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new AC(a=>Tde(a),SO),this.rc=new Map,this.oc=new Set,this.uc=new Ra(yi.comparator),this.cc=new Map,this.ac=new h$,this.hc={},this.lc=new Map,this.fc=GS.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function THe(r,t){return $$.apply(this,arguments)}function $$(){return $$=(0,Ct.Z)(function*(r,t){const e=vY(r);let i,n;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),n=s.view.ec();else{const o=yield $D(e.localStore,mu(t));e.isPrimaryClient&&uj(e.remoteStore,o);const a=e.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,n=yield Y$(e,t,i,"current"===a,o.resumeToken)}return n}),$$.apply(this,arguments)}function Y$(r,t,e,i,n){return Z$.apply(this,arguments)}function Z$(){return Z$=(0,Ct.Z)(function*(r,t,e,i,n){r._c=(d,m,y)=>{return(C=(0,Ct.Z)(function*(S,I,k,O){let L=I.view.Wu(k);L.$i&&(L=yield oj(S.localStore,I.query,!1).then(({documents:G})=>I.view.Wu(G,L)));const B=O&&O.targetChanges.get(I.targetId),j=I.view.applyChanges(L,S.isPrimaryClient,B);return oY(S,I.targetId,j.Xu),j.snapshot}),function(S,I,k,O){return C.apply(this,arguments)})(r,d,m,y);var C};const s=yield oj(r.localStore,t,!0),o=new lfe(t,s.Hi),a=o.Wu(s.documents),l=AO.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==r.onlineState,n),h=o.applyChanges(a,r.isPrimaryClient,l);oY(r,e,h.Xu);const u=new wHe(t,e,o);return r.ic.set(t,u),r.rc.has(e)?r.rc.get(e).push(t):r.rc.set(e,[t]),h.snapshot}),Z$.apply(this,arguments)}function xHe(r,t){return X$.apply(this,arguments)}function X$(){return X$=(0,Ct.Z)(function*(r,t){const e=Ei(r),i=e.ic.get(t),n=e.rc.get(i.targetId);if(n.length>1)return e.rc.set(i.targetId,n.filter(s=>!SO(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield YD(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),UO(e.remoteStore,i.targetId),iI(e,i.targetId)}).catch(wC))):(iI(e,i.targetId),yield YD(e.localStore,i.targetId,!0))}),X$.apply(this,arguments)}function Q$(){return Q$=(0,Ct.Z)(function*(r,t,e){const i=yY(r);try{const n=yield function(s,o){const a=Ei(s),l=Qo.now(),h=o.reduce((m,y)=>m.add(y.key),pr());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=hc(),C=pr();return a.Gi.getEntries(m,h).next(S=>{y=S,y.forEach((I,k)=>{k.isValidDocument()||(C=C.add(I))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,y)).next(S=>{u=S;const I=[];for(const k of o){const O=PNe(k,u.get(k.key).overlayedDocument);null!=O&&I.push(new jv(k.key,O,gde(O.value.mapValue),Jo.exists(!0)))}return a.mutationQueue.addMutationBatch(m,l,I,o)}).next(S=>{d=S;const I=S.applyToLocalDocumentSet(u,C);return a.documentOverlayCache.saveOverlays(m,S.batchId,I)})}).then(()=>({batchId:d.batchId,changes:Ude(u)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(n.batchId),function(s,o,a){let l=s.hc[s.currentUser.toKey()];l||(l=new Ra($n)),l=l.insert(o,a),s.hc[s.currentUser.toKey()]=l}(i,n.batchId,e),yield Wv(i,n.changes),yield XD(i.remoteStore)}catch(n){const s=JD(n,"Failed to persist write");e.reject(s)}}),Q$.apply(this,arguments)}function hfe(r,t){return J$.apply(this,arguments)}function J$(){return J$=(0,Ct.Z)(function*(r,t){const e=Ei(r);try{const i=yield GBe(e.localStore,t);t.targetChanges.forEach((n,s)=>{const o=e.cc.get(s);o&&(Rn(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?o.nc=!0:n.modifiedDocuments.size>0?Rn(o.nc):n.removedDocuments.size>0&&(Rn(o.nc),o.nc=!1))}),yield Wv(e,i,t)}catch(i){yield wC(i)}}),J$.apply(this,arguments)}function ufe(r,t,e){const i=Ei(r);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const n=[];i.ic.forEach((s,o)=>{const a=o.view.bu(t);a.snapshot&&n.push(a.snapshot)}),function(s,o){const a=Ei(s);a.onlineState=o;let l=!1;a.queries.forEach((h,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&G$(a)}(i.eventManager,t),n.length&&i.sc.Wo(n),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function IHe(r,t,e){return eY.apply(this,arguments)}function eY(){return eY=(0,Ct.Z)(function*(r,t,e){const i=Ei(r);i.sharedClientState.updateQueryState(t,"rejected",e);const n=i.cc.get(t),s=n&&n.key;if(s){let o=new Ra(yi.comparator);o=o.insert(s,To.newNoDocument(s,Mn.min()));const a=pr().add(s),l=new IO(Mn.min(),new Map,new Zs($n),o,a);yield hfe(i,l),i.uc=i.uc.remove(s),i.cc.delete(t),aY(i)}else yield YD(i.localStore,t,!1).then(()=>iI(i,t,e)).catch(wC)}),eY.apply(this,arguments)}function AHe(r,t){return tY.apply(this,arguments)}function tY(){return tY=(0,Ct.Z)(function*(r,t){const e=Ei(r),i=t.batch.batchId;try{const n=yield qBe(e.localStore,t);sY(e,i,null),rY(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield Wv(e,n)}catch(n){yield wC(n)}}),tY.apply(this,arguments)}function _He(r,t,e){return iY.apply(this,arguments)}function iY(){return iY=(0,Ct.Z)(function*(r,t,e){const i=Ei(r);try{const n=yield function(s,o){const a=Ei(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Rn(null!==u),h=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,h,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>a.localDocuments.getDocuments(l,h))})}(i.localStore,t);sY(i,t,e),rY(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield Wv(i,n)}catch(n){yield wC(n)}}),iY.apply(this,arguments)}function nY(){return nY=(0,Ct.Z)(function*(r,t){const e=Ei(r);Uv(e.remoteStore)||Xt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=Ei(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(e.localStore);if(-1===i)return void t.resolve();const n=e.lc.get(i)||[];n.push(t),e.lc.set(i,n)}catch(i){const n=JD(i,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}),nY.apply(this,arguments)}function rY(r,t){(r.lc.get(t)||[]).forEach(e=>{e.resolve()}),r.lc.delete(t)}function sY(r,t,e){const i=Ei(r);let n=i.hc[i.currentUser.toKey()];if(n){const s=n.get(t);s&&(e?s.reject(e):s.resolve(),n=n.remove(t)),i.hc[i.currentUser.toKey()]=n}}function iI(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.rc.get(t))r.ic.delete(i),e&&r.sc.wc(i,e);r.rc.delete(t),r.isPrimaryClient&&r.ac.ls(t).forEach(i=>{r.ac.containsKey(i)||cfe(r,i)})}function cfe(r,t){r.oc.delete(t.path.canonicalString());const e=r.uc.get(t);null!==e&&(UO(r.remoteStore,e),r.uc=r.uc.remove(t),r.cc.delete(e),aY(r))}function oY(r,t,e){for(const i of e)i instanceof ofe?(r.ac.addReference(i.key,t),RHe(r,i)):i instanceof afe?(Xt("SyncEngine","Document no longer in limbo: "+i.key),r.ac.removeReference(i.key,t),r.ac.containsKey(i.key)||cfe(r,i.key)):Yi()}function RHe(r,t){const e=t.key,i=e.path.canonicalString();r.uc.get(e)||r.oc.has(i)||(Xt("SyncEngine","New document in limbo: "+e),r.oc.add(i),aY(r))}function aY(r){for(;r.oc.size>0&&r.uc.size<r.maxConcurrentLimboResolutions;){const t=r.oc.values().next().value;r.oc.delete(t);const e=new yi(ns.fromString(t)),i=r.fc.next();r.cc.set(i,new SHe(e)),r.uc=r.uc.insert(e,i),uj(r.remoteStore,new _C(mu(BD(e.path)),i,2,lc.at))}}function Wv(r,t,e){return lY.apply(this,arguments)}function lY(){return lY=(0,Ct.Z)(function*(r,t,e){const i=Ei(r),n=[],s=[],o=[];var a;i.ic.isEmpty()||(i.ic.forEach((a,l)=>{o.push(i._c(l,t,e).then(h=>{if((h||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,h?.fromCache?"not-current":"current"),h){n.push(h);const u=p$.Ci(l.targetId,h);s.push(u)}}))}),yield Promise.all(o),i.sc.Wo(n),yield(a=(0,Ct.Z)(function*(l,h){const u=Ei(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>at.forEach(h,m=>at.forEach(m.Si,y=>u.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>at.forEach(m.Di,y=>u.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!SC(d))throw d;Xt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of h){const m=d.targetId;if(!d.fromCache){const y=u.Ui.get(m),S=y.withLastLimboFreeSnapshotVersion(y.snapshotVersion);u.Ui=u.Ui.insert(m,S)}}}),function(l,h){return a.apply(this,arguments)})(i.localStore,s))}),lY.apply(this,arguments)}function MHe(r,t){return hY.apply(this,arguments)}function hY(){return hY=(0,Ct.Z)(function*(r,t){const e=Ei(r);if(!e.currentUser.isEqual(t)){Xt("SyncEngine","User change. New user:",t.toKey());const i=yield Hpe(e.localStore,t);e.currentUser=t,(n=e).lc.forEach(o=>{o.forEach(a=>{a.reject(new Ut(ft.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),n.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield Wv(e,i.ji)}var n}),hY.apply(this,arguments)}function LHe(r,t){const e=Ei(r),i=e.cc.get(t);if(i&&i.nc)return pr().add(i.key);{let n=pr();const s=e.rc.get(t);if(!s)return n;for(const o of s){const a=e.ic.get(o);n=n.unionWith(a.view.ju)}return n}}function OHe(r,t){return uY.apply(this,arguments)}function uY(){return uY=(0,Ct.Z)(function*(r,t){const e=Ei(r),i=yield oj(e.localStore,t.query,!0),n=t.view.tc(i);return e.isPrimaryClient&&oY(e,t.targetId,n.Xu),n}),uY.apply(this,arguments)}function PHe(r,t){return cY.apply(this,arguments)}function cY(){return cY=(0,Ct.Z)(function*(r,t){const e=Ei(r);return Upe(e.localStore,t).then(i=>Wv(e,i))}),cY.apply(this,arguments)}function FHe(r,t,e,i){return dY.apply(this,arguments)}function dY(){return dY=(0,Ct.Z)(function*(r,t,e,i){const n=Ei(r),s=yield function(o,a){const l=Ei(o),h=Ei(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>h.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):at.resolve(null)))}(n.localStore,t);var a;null!==s?("pending"===e?yield XD(n.remoteStore):"acknowledged"===e||"rejected"===e?(sY(n,t,i||null),rY(n,t),a=t,Ei(Ei(n.localStore).mutationQueue).An(a)):Yi(),yield Wv(n,s)):Xt("SyncEngine","Cannot apply mutation batch with id: "+t)}),dY.apply(this,arguments)}function pY(){return pY=(0,Ct.Z)(function*(r,t){const e=Ei(r);if(vY(e),yY(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),n=yield dfe(e,i.toArray());e.dc=!0,yield H$(e.remoteStore,!0);for(const s of n)uj(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let n=Promise.resolve();e.rc.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):n=n.then(()=>(iI(e,o),YD(e.localStore,o,!0))),UO(e.remoteStore,o)}),yield n,yield dfe(e,i),function(s){const o=Ei(s);o.cc.forEach((a,l)=>{UO(o.remoteStore,l)}),o.ac.fs(),o.cc=new Map,o.uc=new Ra(yi.comparator)}(e),e.dc=!1,yield H$(e.remoteStore,!1)}}),pY.apply(this,arguments)}function dfe(r,t,e){return fY.apply(this,arguments)}function fY(){return fY=(0,Ct.Z)(function*(r,t,e){const i=Ei(r),n=[],s=[];for(const o of t){let a;const l=i.rc.get(o);if(l&&0!==l.length){a=yield $D(i.localStore,mu(l[0]));for(const h of l){const u=i.ic.get(h),d=yield OHe(i,u);d.snapshot&&s.push(d.snapshot)}}else{const h=yield jpe(i.localStore,o);a=yield $D(i.localStore,h),yield Y$(i,pfe(h),o,!1,a.resumeToken)}n.push(a)}return i.sc.Wo(s),n}),fY.apply(this,arguments)}function pfe(r){return Sde(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function BHe(r){const t=Ei(r);return Ei(Ei(t.localStore).persistence).vi()}function HHe(r,t,e,i){return gY.apply(this,arguments)}function gY(){return gY=(0,Ct.Z)(function*(r,t,e,i){const n=Ei(r);if(n.dc)return void Xt("SyncEngine","Ignoring unexpected query state notification.");const s=n.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield Upe(n.localStore,xde(s[0])),a=IO.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Dl.EMPTY_BYTE_STRING);yield Wv(n,o,a);break}case"rejected":yield YD(n.localStore,t,!0),iI(n,t,i);break;default:Yi()}}),gY.apply(this,arguments)}function VHe(r,t,e){return mY.apply(this,arguments)}function mY(){return mY=(0,Ct.Z)(function*(r,t,e){const i=vY(r);if(i.dc){for(const n of t){if(i.rc.has(n)){Xt("SyncEngine","Adding an already active target "+n);continue}const s=yield jpe(i.localStore,n),o=yield $D(i.localStore,s);yield Y$(i,pfe(s),o.targetId,!1,o.resumeToken),uj(i.remoteStore,o)}for(const n of e)i.rc.has(n)&&(yield YD(i.localStore,n,!1).then(()=>{UO(i.remoteStore,n),iI(i,n)}).catch(wC))}}),mY.apply(this,arguments)}function vY(r){const t=Ei(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=hfe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LHe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=IHe.bind(null,t),t.sc.Wo=vHe.bind(null,t.eventManager),t.sc.wc=yHe.bind(null,t.eventManager),t}function yY(r){const t=Ei(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=AHe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=_He.bind(null,t),t}class ffe{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Ct.Z)(function*(){e.It=zO(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return Bpe(this.persistence,new Npe,t.initialUser,this.It)}yc(t){return new Ppe(rj.Bs,this.It)}gc(t){return new Kpe}terminate(){var t=this;return(0,Ct.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class gfe extends ffe{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Ct.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield yY(i.Ac.syncEngine),yield XD(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return Bpe(this.persistence,new Npe,t.initialUser,this.It)}Tc(t,e){return new kBe(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new pNe(e,this.persistence);return new dNe(t.asyncQueue,i)}yc(t){const e=d$(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?uc.withCacheSize(this.cacheSizeBytes):uc.DEFAULT;return new c$(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Ype(),hj(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new Kpe}}class jHe extends gfe{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Ct.Z)(function*(){yield e().call(i,t);const n=i.Ac.syncEngine;i.sharedClientState instanceof w$&&(i.sharedClientState.syncEngine={Fr:FHe.bind(null,n),$r:HHe.bind(null,n),Br:VHe.bind(null,n),vi:BHe.bind(null,n),Mr:PHe.bind(null,n)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Ct.Z)(function*(o){yield function NHe(r,t){return pY.apply(this,arguments)}(i.Ac.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(t){const e=Ype();if(!w$.C(e))throw new Ut(ft.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=d$(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new w$(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class bY{initialize(t,e){var i=this;return(0,Ct.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=n=>ufe(i.syncEngine,n,1),i.remoteStore.remoteSyncer.handleCredentialChange=MHe.bind(null,i.syncEngine),yield H$(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new mHe}createDatastore(t){const e=zO(t.databaseInfo.databaseId),i=new JBe(t.databaseInfo);return new iHe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,n=t.asyncQueue,s=a=>ufe(this.syncEngine,a,0),o=$pe.C()?new $pe:new ZBe,new sHe(e,i,n,s,o);var e,i,n,s,o}createSyncEngine(t,e){return function(i,n,s,o,a,l,h){const u=new EHe(i,n,s,o,a,l);return h&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return function(){var t=(0,Ct.Z)(function*(e){const i=Ei(e);Xt("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield ZD(i),i.mu.shutdown(),i.gu.set("Unknown")});return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}function CY(r,t,e){if(!e)throw new Ut(ft.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function mfe(r,t,e,i){if(!0===t&&!0===i)throw new Ut(ft.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function vfe(r){if(!yi.isDocumentKey(r))throw new Ut(ft.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function yfe(r){if(yi.isDocumentKey(r))throw new Ut(ft.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function dj(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const t=(e=r).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof r?"a function":Yi()}function Gr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Ut(ft.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=dj(r);throw new Ut(ft.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function bfe(r,t){if(t<=0)throw new Ut(ft.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}const Cfe=new Map;class wfe{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ut(ft.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ut(ft.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,mfe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class WO{constructor(t,e,i,n){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wfe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ut(ft.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Ut(ft.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wfe(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new eNe;switch(e.type){case"gapi":return new rNe(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ut(ft.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Cfe.get(t);e&&(Xt("ComponentProvider","Removing Datastore"),Cfe.delete(t),e.terminate())}(this),Promise.resolve()}}class Oo{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new em(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Oo(this.firestore,t,this._key)}}class Fh{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Fh(this.firestore,t,this._query)}}class em extends Fh{constructor(t,e,i){super(t,e,BD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Oo(this.firestore,null,new yi(t))}withConverter(t){return new em(this.firestore,t,this._path)}}function Efe(r,t,...e){if(r=(0,re.m9)(r),CY("collection","path",t),r instanceof WO){const i=ns.fromString(t,...e);return yfe(i),new em(r,null,i)}{if(!(r instanceof Oo||r instanceof em))throw new Ut(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ns.fromString(t,...e));return yfe(i),new em(r.firestore,null,i)}}function pj(r,t,...e){if(r=(0,re.m9)(r),1===arguments.length&&(t=Xce.R()),CY("doc","path",t),r instanceof WO){const i=ns.fromString(t,...e);return vfe(i),new Oo(r,null,new yi(i))}{if(!(r instanceof Oo||r instanceof em))throw new Ut(ft.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(ns.fromString(t,...e));return vfe(i),new Oo(r.firestore,r instanceof em?r.converter:null,new yi(i))}}function Tfe(r,t){return r=(0,re.m9)(r),t=(0,re.m9)(t),(r instanceof Oo||r instanceof em)&&(t instanceof Oo||t instanceof em)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function wY(r,t){return r=(0,re.m9)(r),t=(0,re.m9)(t),r instanceof Fh&&t instanceof Fh&&r.firestore===t.firestore&&SO(r._query,t._query)&&r.converter===t.converter}function xfe(r,t=10240){let e=0;return{read:()=>(0,Ct.Z)(function*(){if(e<r.byteLength){const i={value:r.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Ct.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fj{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):Ga("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class WHe{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new xl,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,Ct.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,Ct.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,Ct.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),n=Number(i);isNaN(n)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(n);return new bHe(JSON.parse(s),e.length+n)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,Ct.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,Ct.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,Ct.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class KHe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Ct.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Ut(ft.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(n=(0,Ct.Z)(function*(s,o){const a=Ei(s),l=RO(a.It)+"/documents",h={documents:o.map(y=>kO(a.It,y))},u=yield a._o("BatchGetDocuments",l,h,o.length),d=new Map;u.forEach(y=>{const C=function GNe(r,t){return"found"in t?function(e,i){Rn(!!i.found);const n=Qg(e,i.found.name),s=$l(i.found.updateTime),o=new Ch({mapValue:{fields:i.found.fields}});return To.newFoundDocument(n,s,o)}(r,t):"missing"in t?function(e,i){Rn(!!i.missing),Rn(!!i.readTime);const n=Qg(e,i.missing),s=$l(i.readTime);return To.newNoDocument(n,s)}(r,t):Yi()}(a.It,y);d.set(C.key.toString(),C)});const m=[];return o.forEach(y=>{const C=d.get(y.toString());Rn(!!C),m.push(C)}),m}),function(s,o){return n.apply(this,arguments)})(e.datastore,t);var n;return i.forEach(n=>e.recordVersion(n)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new UD(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Ct.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,n)=>{const s=yi.fromPath(n);t.mutations.push(new XK(s,t.precondition(s)))}),yield(i=(0,Ct.Z)(function*(n,s){const o=Ei(n),a=RO(o.It)+"/documents",l={writes:s.map(h=>MO(o.It,h))};yield o.ao("Commit",a,l)}),function(n,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Yi();e=Mn.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Ut(ft.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Mn.min())?Jo.exists(!1):Jo.updateTime(e):Jo.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Mn.min()))throw new Ut(ft.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jo.updateTime(e)}return Jo.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class $He{constructor(t,e,i,n,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=n,this.deferred=s,this.kc=i.maxAttempts,this.xo=new S$(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,Ct.Z)(function*(){const e=new KHe(t.datastore),i=t.Mc(e);i&&i.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(s=>{t.Fc(s)}))}).catch(n=>{t.Fc(n)})}))}Mc(t){try{const e=this.updateFunction(t);return!mO(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Vde(e)}return!1}}class YHe{constructor(t,e,i,n){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=n,this.user=Kl.UNAUTHENTICATED,this.clientId=Xce.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,Ct.Z)(function*(a){Xt("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>(Xt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var t=this;return(0,Ct.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ut(ft.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new xl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ct.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=JD(i,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}function Dfe(r,t){return SY.apply(this,arguments)}function SY(){return SY=(0,Ct.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress(),Xt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield r.getConfiguration();yield t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener(function(){var n=(0,Ct.Z)(function*(s){i.isEqual(s)||(yield Hpe(t.localStore,s),i=s)});return function(s){return n.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=t}),SY.apply(this,arguments)}function Ife(r,t){return EY.apply(this,arguments)}function EY(){return EY=(0,Ct.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress();const e=yield TY(r);Xt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield r.getConfiguration();yield t.initialize(e,i),r.setCredentialChangeListener(n=>ife(t.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>ife(t.remoteStore,s)),r.onlineComponents=t}),EY.apply(this,arguments)}function TY(r){return xY.apply(this,arguments)}function xY(){return xY=(0,Ct.Z)(function*(r){return r.offlineComponents||(Xt("FirestoreClient","Using default OfflineComponentProvider"),yield Dfe(r,new ffe)),r.offlineComponents}),xY.apply(this,arguments)}function gj(r){return DY.apply(this,arguments)}function DY(){return DY=(0,Ct.Z)(function*(r){return r.onlineComponents||(Xt("FirestoreClient","Using default OnlineComponentProvider"),yield Ife(r,new bY)),r.onlineComponents}),DY.apply(this,arguments)}function Afe(r){return TY(r).then(t=>t.persistence)}function mj(r){return TY(r).then(t=>t.localStore)}function IY(r){return gj(r).then(t=>t.remoteStore)}function AY(r){return gj(r).then(t=>t.syncEngine)}function nI(r){return _Y.apply(this,arguments)}function _Y(){return _Y=(0,Ct.Z)(function*(r){const t=yield gj(r),e=t.eventManager;return e.onListen=THe.bind(null,t.syncEngine),e.onUnlisten=xHe.bind(null,t.syncEngine),e}),_Y.apply(this,arguments)}function kfe(r,t,e={}){const i=new xl;return r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return function(n,s,o,a,l){const h=new fj({next:d=>{s.enqueueAndForget(()=>W$(n,u));const m=d.docs.has(o);!m&&d.fromCache?l.reject(new Ut(ft.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&d.fromCache&&a&&"server"===a.source?l.reject(new Ut(ft.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new K$(BD(o.path),h,{includeMetadataChanges:!0,Nu:!0});return j$(n,u)}(yield nI(r),r.asyncQueue,t,e,i)})),i.promise}function Rfe(r,t,e={}){const i=new xl;return r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return function(n,s,o,a,l){const h=new fj({next:d=>{s.enqueueAndForget(()=>W$(n,u)),d.fromCache&&"server"===a.source?l.reject(new Ut(ft.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new K$(o,h,{includeMetadataChanges:!0,Nu:!0});return j$(n,u)}(yield nI(r),r.asyncQueue,t,e,i)})),i.promise}class nVe{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new S$(this,"async_queue_retry"),this.Wc=()=>{const e=hj();e&&Xt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=hj();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=hj();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new xl;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,Ct.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!SC(e))throw e;Xt("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,Ga("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const n=z$.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(n),n}zc(){this.Kc&&Yi()}verifyOperationInProgress(){}Xc(){var t=this;return(0,Ct.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function kY(r){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const n of["next","error","complete"])if(n in i&&"function"==typeof i[n])return!0;return!1}(r)}class rVe{constructor(){this._progressObserver={},this._taskCompletionResolver=new xl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Po extends WO{constructor(t,e,i,n){super(t,e,i,n),this.type="firestore",this._queue=new nVe,this._persistenceKey=n?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Mfe(this),this._firestoreClient.terminate()}}function Ka(r){return r._firestoreClient||Mfe(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Mfe(r){var t;const e=r._freezeSettings(),i=(s=(null===(t=r._app)||void 0===t?void 0:t.options.appId)||"",new mNe(r._databaseId,s,r._persistenceKey,(a=e).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;r._firestoreClient=new YHe(r._authCredentials,r._appCheckCredentials,r._queue,i)}function Lfe(r,t,e){const i=new xl;return r.asyncQueue.enqueue((0,Ct.Z)(function*(){try{yield Dfe(r,e),yield Ife(r,t),i.resolve()}catch(n){const s=n;if(!("FirebaseError"===(o=s).name?o.code===ft.FAILED_PRECONDITION||o.code===ft.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;kS("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var o})).then(()=>i.promise)}function Ofe(r){if(r._initialized||r._terminated)throw new Ut(ft.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class tm{constructor(t){this._byteString=t}static fromBase64String(t){try{return new tm(Dl.fromBase64String(t))}catch(e){throw new Ut(ft.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new tm(Dl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class qv{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Ut(ft.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ka(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class $S{constructor(t){this._methodName=t}}class vj{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ut(ft.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ut(ft.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return $n(this._lat,t._lat)||$n(this._long,t._long)}}const fVe=/^__.*__$/;class gVe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new jv(t,this.data,this.fieldMask,e,this.fieldTransforms):new jD(t,this.data,e,this.fieldTransforms)}}class Pfe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new jv(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ffe(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Yi()}}class yj{constructor(t,e,i,n,s,o){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=n,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new yj(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.ua(t),n}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.na(),n}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return wj(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(Ffe(this.sa)&&fVe.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class mVe{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||zO(t)}da(t,e,i,n=!1){return new yj({sa:t,methodName:e,fa:i,path:ka.emptyPath(),oa:!1,la:n},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function YS(r){const t=r._freezeSettings(),e=zO(r._databaseId);return new mVe(r._databaseId,!!t.ignoreUndefinedProperties,e)}function bj(r,t,e,i,n,s={}){const o=r.da(s.merge||s.mergeFields?2:0,t,e,n);OY("Data must be an object, but it was:",o,i);const a=Hfe(i,o);let l,h;if(s.merge)l=new td(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const m=PY(t,d,e);if(!o.contains(m))throw new Ut(ft.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zfe(u,m)||u.push(m)}l=new td(u),h=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,h=o.fieldTransforms;return new gVe(new Ch(a),l,h)}class qO extends $S{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof qO}}function Nfe(r,t,e){return new yj({sa:3,fa:t.settings.fa,methodName:r._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class RY extends $S{_toFieldTransform(t){return new EO(t.path,new VD)}isEqual(t){return t instanceof RY}}class vVe extends $S{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=Nfe(this,t,!0),i=this._a.map(s=>ZS(s,e)),n=new BS(i);return new EO(t.path,n)}isEqual(t){return this===t}}class yVe extends $S{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=Nfe(this,t,!0),i=this._a.map(s=>ZS(s,e)),n=new HS(i);return new EO(t.path,n)}isEqual(t){return this===t}}class bVe extends $S{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new zD(t.It,_de(t.It,this.wa));return new EO(t.path,e)}isEqual(t){return this===t}}function MY(r,t,e,i){const n=r.da(1,t,e);OY("Data must be an object, but it was:",n,i);const s=[],o=Ch.empty();LS(i,(l,h)=>{const u=Cj(t,l,e);h=(0,re.m9)(h);const d=n.ca(u);if(h instanceof qO)s.push(u);else{const m=ZS(h,d);null!=m&&(s.push(u),o.set(u,m))}});const a=new td(s);return new Pfe(o,a,n.fieldTransforms)}function LY(r,t,e,i,n,s){const o=r.da(1,t,e),a=[PY(t,i,e)],l=[n];if(s.length%2!=0)throw new Ut(ft.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(PY(t,s[m])),l.push(s[m+1]);const h=[],u=Ch.empty();for(let m=a.length-1;m>=0;--m)if(!zfe(h,a[m])){const y=a[m];let C=l[m];C=(0,re.m9)(C);const S=o.ca(y);if(C instanceof qO)h.push(y);else{const I=ZS(C,S);null!=I&&(h.push(y),u.set(y,I))}}const d=new td(h);return new Pfe(u,d,o.fieldTransforms)}function Bfe(r,t,e,i=!1){return ZS(e,r.da(i?4:3,t))}function ZS(r,t){if(Vfe(r=(0,re.m9)(r)))return OY("Unsupported field value:",t,r),Hfe(r,t);if(r instanceof $S)return function(e,i){if(!Ffe(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(i);n&&i.fieldTransforms.push(n)}(r,t),null;if(void 0===r&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const n=[];let s=0;for(const o of e){let a=ZS(o,i.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),s++}return{arrayValue:{values:n}}}(r,t)}return function(e,i){if(null===(e=(0,re.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return _de(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Qo.fromDate(e);return{timestampValue:_O(i.It,n)}}if(e instanceof Qo){const n=new Qo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:_O(i.It,n)}}if(e instanceof vj)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof tm)return{bytesValue:Zde(i.It,e._byteString)};if(e instanceof Oo){const n=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:QK(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${dj(e)}`)}(r,t)}function Hfe(r,t){const e={};return sde(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):LS(r,(i,n)=>{const s=ZS(n,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function Vfe(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Qo||r instanceof vj||r instanceof tm||r instanceof Oo||r instanceof $S)}function OY(r,t,e){if(!Vfe(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=dj(e);throw t.ha("an object"===i?r+" a custom object":r+" "+i)}var i}function PY(r,t,e){if((t=(0,re.m9)(t))instanceof qv)return t._internalPath;if("string"==typeof t)return Cj(r,t);throw wj("Field path arguments must be of type string or ",r,!1,void 0,e)}const CVe=new RegExp("[~\\*/\\[\\]]");function Cj(r,t,e){if(t.search(CVe)>=0)throw wj(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new qv(...t.split("."))._internalPath}catch{throw wj(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function wj(r,t,e,i,n){const s=i&&!i.isEmpty(),o=void 0!==n;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${n}`),l+=")"),new Ut(ft.INVALID_ARGUMENT,a+r+l)}function zfe(r,t){return r.some(e=>e.isEqual(t))}class GO{constructor(t,e,i,n,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Oo(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new wVe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Sj("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class wVe extends GO{data(){return super.data()}}function Sj(r,t){return"string"==typeof t?Cj(r,t):t instanceof qv?t._internalPath:t._delegate._internalPath}function jfe(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Ut(ft.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KO{}function LC(r,...t){for(const e of t)r=e._apply(r);return r}class SVe extends KO{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=YS(t.firestore),i=function(n,s,o,a,l,h,u){let d;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Ut(ft.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){$fe(u,h);const y=[];for(const C of u)y.push(Kfe(a,n,C));d={arrayValue:{values:y}}}else d=Kfe(a,n,u)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||$fe(u,h),d=Bfe(o,"where",u,"in"===h||"not-in"===h);const m=wh.create(l,h,d);return function(y,C){if(C.dt()){const I=KK(y);if(null!==I&&!I.isEqual(C.field))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${I.toString()}' and '${C.field.toString()}'`);const k=GK(y);null!==k&&Yfe(0,C.field,k)}const S=function(I,k){for(const O of I.filters)if(k.indexOf(O.op)>=0)return O.op;return null}(y,function(I){switch(I){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(C.op));if(null!==S)throw new Ut(ft.INVALID_ARGUMENT,S===C.op?`Invalid query. You cannot use more than one '${C.op.toString()}' filter.`:`Invalid query. You cannot use '${C.op.toString()}' filters with '${S.toString()}' filters.`)}(n,m),m}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new Fh(t.firestore,t.converter,function(n,s){const o=n.filters.concat([s]);return new zv(n.path,n.collectionGroup,n.explicitOrderBy.slice(),o,n.limit,n.limitType,n.startAt,n.endAt)}(t._query,i))}}class TVe extends KO{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,n,s){if(null!==i.startAt)throw new Ut(ft.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ut(ft.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ND(n,s);return function(a,l){if(null===GK(a)){const h=KK(a);null!==h&&Yfe(0,h,l.field)}}(i,o),o}(t._query,this.ma,this.pa);return new Fh(t.firestore,t.converter,function(i,n){const s=i.explicitOrderBy.concat([n]);return new zv(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class Ufe extends KO{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new Fh(t.firestore,t.converter,Wz(t._query,this.Ia,this.Ta))}}class Wfe extends KO{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=Gfe(t,this.type,this.Ea,this.Aa);return new Fh(t.firestore,t.converter,(n=e,new zv((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,n,i.endAt)));var i,n}}class qfe extends KO{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=Gfe(t,this.type,this.Ea,this.Aa);return new Fh(t.firestore,t.converter,(n=e,new zv((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,n)));var i,n}}function Gfe(r,t,e,i){if(e[0]=(0,re.m9)(e[0]),e[0]instanceof GO)return function(n,s,o,a,l){if(!a)throw new Ut(ft.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const u of HD(n))if(u.field.isKeyField())h.push(FS(s,a.key));else{const d=a.data.field(u.field);if(UK(d))throw new Ut(ft.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const m=u.field.canonicalString();throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(d)}return new IC(h,l)}(r._query,r.firestore._databaseId,t,e[0]._document,i);{const n=YS(r.firestore);return function(s,o,a,l,h,u){const d=s.explicitOrderBy;if(h.length>d.length)throw new Ut(ft.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const C=h[y];if(d[y].field.isKeyField()){if("string"!=typeof C)throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!$K(s)&&-1!==C.indexOf("/"))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(ns.fromString(C));if(!yi.isDocumentKey(S))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const I=new yi(S);m.push(FS(o,I))}else{const S=Bfe(a,l,C);m.push(S)}}return new IC(m,u)}(r._query,r.firestore._databaseId,n,t,e,i)}}function Kfe(r,t,e){if("string"==typeof(e=(0,re.m9)(e))){if(""===e)throw new Ut(ft.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$K(t)&&-1!==e.indexOf("/"))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(ns.fromString(e));if(!yi.isDocumentKey(i))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return FS(r,new yi(i))}if(e instanceof Oo)return FS(r,e._key);throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dj(e)}.`)}function $fe(r,t){if(!Array.isArray(r)||0===r.length)throw new Ut(ft.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(r.length>10)throw new Ut(ft.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Yfe(r,t,e){if(!e.isEqual(t))throw new Ut(ft.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class FY{convertValue(t,e="none"){switch(PS(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ma(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(OS(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Yi()}}convertObject(t,e){const i={};return LS(t.fields,(n,s)=>{i[n]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new vj(Ma(t.latitude),Ma(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=ade(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(gO(t));default:return null}}convertTimestamp(t){const e=EC(t);return new Qo(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=ns.fromString(t);Rn(spe(i));const n=new TC(i.get(1),i.get(3)),s=new yi(i.popFirst(5));return n.isEqual(e)||Ga(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function Ej(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class MVe extends FY{constructor(t){super(),this.firestore=t}convertBytes(t){return new tm(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Oo(this.firestore,null,e)}}class XS{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Gv extends GO{constructor(t,e,i,n,s,o){super(t,e,i,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new $O(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Sj("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class $O extends Gv{data(t={}){return super.data(t)}}class OC{constructor(t,e,i,n){this._firestore=t,this._userDataWriter=e,this._snapshot=n,this.metadata=new XS(n.hasPendingWrites,n.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new $O(this._firestore,this._userDataWriter,i.key,i,new XS(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ut(ft.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,n){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new $O(i._firestore,i._userDataWriter,o.doc.key,o.doc,new XS(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>n||3!==o.type).map(o=>{const a=new $O(i._firestore,i._userDataWriter,o.doc.key,o.doc,new XS(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:LVe(o.type),doc:a,oldIndex:l,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function LVe(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Yi()}}function Zfe(r,t){return r instanceof Gv&&t instanceof Gv?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(null===r._document?null===t._document:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof OC&&t instanceof OC&&r._firestore===t._firestore&&wY(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}class PC extends FY{constructor(t){super(),this.firestore=t}convertBytes(t){return new tm(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Oo(this.firestore,null,e)}}function Xfe(r,t,e){r=Gr(r,Oo);const i=Gr(r.firestore,Po),n=Ej(r.converter,t,e);return rI(i,[bj(YS(i),"setDoc",r._key,n,null!==r.converter,e).toMutation(r._key,Jo.none())])}function Qfe(r,t,e,...i){r=Gr(r,Oo);const n=Gr(r.firestore,Po),s=YS(n);let o;return o="string"==typeof(t=(0,re.m9)(t))||t instanceof qv?LY(s,"updateDoc",r._key,t,e,i):MY(s,"updateDoc",r._key,t),rI(n,[o.toMutation(r._key,Jo.exists(!0))])}function Jfe(r,...t){var e,i,n;r=(0,re.m9)(r);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||kY(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(kY(t[o])){const d=t[o];t[o]=null===(e=d.next)||void 0===e?void 0:e.bind(d),t[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),t[o+2]=null===(n=d.complete)||void 0===n?void 0:n.bind(d)}let l,h,u;if(r instanceof Oo)h=Gr(r.firestore,Po),u=BD(r._key.path),l={next:d=>{t[o]&&t[o](NY(h,r,d))},error:t[o+1],complete:t[o+2]};else{const d=Gr(r,Fh);h=Gr(d.firestore,Po),u=d._query;const m=new PC(h);l={next:y=>{t[o]&&t[o](new OC(h,m,d,y))},error:t[o+1],complete:t[o+2]},jfe(r._query)}return function(d,m,y,C){const S=new fj(C),I=new K$(m,S,y);return d.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return j$(yield nI(d),I)})),()=>{S.bc(),d.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return W$(yield nI(d),I)}))}}(Ka(h),u,a,l)}function rI(r,t){return function(e,i){const n=new xl;return e.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return function DHe(r,t,e){return Q$.apply(this,arguments)}(yield AY(e),i,n)})),n.promise}(Ka(r),t)}function NY(r,t,e){const i=e.docs.get(t._key),n=new PC(r);return new Gv(r,n,t._key,i,new XS(e.hasPendingWrites,e.fromCache),t.converter)}const UVe={maxAttempts:5};class ege{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=YS(t)}set(t,e,i){this._verifyNotCommitted();const n=FC(t,this._firestore),s=Ej(n.converter,e,i),o=bj(this._dataReader,"WriteBatch.set",n._key,s,null!==n.converter,i);return this._mutations.push(o.toMutation(n._key,Jo.none())),this}update(t,e,i,...n){this._verifyNotCommitted();const s=FC(t,this._firestore);let o;return o="string"==typeof(e=(0,re.m9)(e))||e instanceof qv?LY(this._dataReader,"WriteBatch.update",s._key,e,i,n):MY(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Jo.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=FC(t,this._firestore);return this._mutations=this._mutations.concat(new UD(e._key,Jo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ut(ft.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function FC(r,t){if((r=(0,re.m9)(r)).firestore!==t)throw new Ut(ft.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class WVe extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=YS(t)}get(t){const e=FC(t,this._firestore),i=new MVe(this._firestore);return this._transaction.lookup([e._key]).then(n=>{if(!n||1!==n.length)return Yi();const s=n[0];if(s.isFoundDocument())return new GO(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new GO(this._firestore,i,e._key,null,e.converter);throw Yi()})}set(t,e,i){const n=FC(t,this._firestore),s=Ej(n.converter,e,i),o=bj(this._dataReader,"Transaction.set",n._key,s,null!==n.converter,i);return this._transaction.set(n._key,o),this}update(t,e,i,...n){const s=FC(t,this._firestore);let o;return o="string"==typeof(e=(0,re.m9)(e))||e instanceof qv?LY(this._dataReader,"Transaction.update",s._key,e,i,n):MY(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this}delete(t){const e=FC(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=FC(t,this._firestore),i=new PC(this._firestore);return super.get(t).then(n=>new Gv(this._firestore,i,e._key,n._document,new XS(!1,!1),e.converter))}}function BY(r,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Ut("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}function ige(){if(typeof Uint8Array>"u")throw new Ut("unimplemented","Uint8Arrays are not available in this environment.")}function nge(){if(!function fNe(){return typeof atob<"u"}())throw new Ut("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,t=!0){LD=Ha.SDK_VERSION,(0,Ha._registerComponent)(new Bu.wA("firestore",(e,{instanceIdentifier:i,options:n})=>{const s=e.getProvider("app").getImmediate(),o=new Po(new iNe(e.getProvider("auth-internal")),new sNe(e.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ut(ft.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new TC(a.options.projectId,l)}(s,i),s);return n=Object.assign({useFetchStreams:t},n),o._setSettings(n),o},"PUBLIC").setMultipleInstances(!0)),(0,Ha.registerVersion)($ce,"3.7.3",r),(0,Ha.registerVersion)($ce,"3.7.3","esm2017")}();class YO{constructor(t){this._delegate=t}static fromBase64String(t){return nge(),new YO(tm.fromBase64String(t))}static fromUint8Array(t){return ige(),new YO(tm.fromUint8Array(t))}toBase64(){return nge(),this._delegate.toBase64()}toUint8Array(){return ige(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function HY(r){return function JVe(r,t){if("object"!=typeof r||null===r)return!1;const e=r;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(r,["next","error","complete"])}class e2e{enableIndexedDbPersistence(t,e){return function oVe(r,t){Ofe(r=Gr(r,Po));const e=Ka(r),i=r._freezeSettings(),n=new bY;return Lfe(e,n,new gfe(n,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function aVe(r){Ofe(r=Gr(r,Po));const t=Ka(r),e=r._freezeSettings(),i=new bY;return Lfe(t,i,new jHe(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function lVe(r){if(r._initialized&&!r._terminated)throw new Ut(ft.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new xl;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ct.Z)(function*(){try{yield(e=(0,Ct.Z)(function*(i){if(!jf.C())return Promise.resolve();const n=i+"main";yield jf.delete(n)}),function(i){return e.apply(this,arguments)})(d$(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class rge{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof TC||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&kS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function Sfe(r,t,e,i={}){var n;const s=(r=Gr(r,WO))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&kS("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=Kl.MOCK_USER;else{o=(0,re.Sg)(i.mockUserToken,null===(n=r._app)||void 0===n?void 0:n.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new Ut(ft.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Kl(l)}r._authCredentials=new tNe(new Yce(o,a))}}(this._delegate,t,e,i)}enableNetwork(){return function uVe(r){return function ZHe(r){return r.asyncQueue.enqueue((0,Ct.Z)(function*(){const t=yield Afe(r),e=yield IY(r);return t.setNetworkEnabled(!0),function(i){const n=Ei(i);return n._u.delete(0),jO(n)}(e)}))}(Ka(r=Gr(r,Po)))}(this._delegate)}disableNetwork(){return function cVe(r){return function XHe(r){return r.asyncQueue.enqueue((0,Ct.Z)(function*(){const t=yield Afe(r),e=yield IY(r);return t.setNetworkEnabled(!1),(i=(0,Ct.Z)(function*(n){const s=Ei(n);s._u.add(0),yield ZD(s),s.gu.set("Offline")}),function(n){return i.apply(this,arguments)})(e);var i}))}(Ka(r=Gr(r,Po)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,mfe("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hVe(r){return function(t){const e=new xl;return t.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return function kHe(r,t){return nY.apply(this,arguments)}(yield AY(t),e)})),e.promise}(Ka(r=Gr(r,Po)))}(this._delegate)}onSnapshotsInSync(t){return function jVe(r,t){return function eVe(r,t){const e=new fj(t);return r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return i=yield nI(r),n=e,Ei(i).Ru.add(n),void n.next();var i,n})),()=>{e.bc(),r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return i=yield nI(r),n=e,void Ei(i).Ru.delete(n);var i,n}))}}(Ka(r=Gr(r,Po)),kY(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Ut("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new sI(this,Efe(this._delegate,t))}catch(e){throw yu(e,"collection()","Firestore.collection()")}}doc(t){try{return new pp(this,pj(this._delegate,t))}catch(e){throw yu(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new bu(this,function UHe(r,t){if(r=Gr(r,WO),CY("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Ut(ft.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fh(r,null,(e=t,new zv(ns.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw yu(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function qVe(r,t,e){r=Gr(r,Po);const i=Object.assign(Object.assign({},UVe),e);return function(n){if(n.maxAttempts<1)throw new Ut(ft.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(n,s,o){const a=new xl;return n.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){const l=yield function _fe(r){return gj(r).then(t=>t.datastore)}(n);new $He(n.asyncQueue,l,o,s,a).run()})),a.promise}(Ka(r),n=>t(new WVe(r,n)),i)}(this._delegate,e=>t(new sge(this,e)))}batch(){return Ka(this._delegate),new oge(new ege(this._delegate,t=>rI(this._delegate,t)))}loadBundle(t){return function dVe(r,t){const e=Ka(r=Gr(r,Po)),i=new rVe;return function tVe(r,t,e,i){const n=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,h){if(l instanceof Uint8Array)return xfe(l,h);if(l instanceof ArrayBuffer)return xfe(new Uint8Array(l),h);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new WHe(l,o);var l}(e,zO(t));r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){!function zHe(r,t,e){const i=Ei(r);var n;(n=(0,Ct.Z)(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(m,y){const C=Ei(m),S=$l(y.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",I=>C.Ns.getBundleMetadata(I,y.id)).then(I=>!!I&&I.createTime.compareTo(S)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(m=l).totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}),Promise.resolve(new Set);a._updateProgress(sfe(l));const h=new CHe(l,s.localStore,o.It);let u=yield o.mc();for(;u;){const m=yield h.Fu(u);m&&a._updateProgress(m),u=yield o.mc()}const d=yield h.complete();return yield Wv(s,d.Lu,void 0),yield function(m,y){const C=Ei(m);return C.persistence.runTransaction("Save bundle","readwrite",S=>C.Ns.saveBundleMetadata(S,y))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Bu)}catch(l){return kS("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var m}),function(s,o,a){return n.apply(this,arguments)})(i,t,e).then(n=>{i.sharedClientState.notifyBundleLoaded(n)})}(yield AY(r),n,i)}))}(e,r._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function pVe(r,t){return function iVe(r,t){return r.asyncQueue.enqueue((0,Ct.Z)(function*(){return function(e,i){const n=Ei(e);return n.persistence.runTransaction("Get named query","readonly",s=>n.Ns.getNamedQuery(s,i))}(yield mj(r),t)}))}(Ka(r=Gr(r,Po)),t).then(e=>e?new Fh(r,null,e.query):null)}(this._delegate,t).then(e=>e?new bu(this,e):null)}}class Tj extends FY{constructor(t){super(),this.firestore=t}convertBytes(t){return new YO(new tm(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return pp.forKey(e,this.firestore,null)}}class sge{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Tj(t)}get(t){const e=JS(t);return this._delegate.get(e).then(i=>new ZO(this._firestore,new Gv(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const n=JS(t);return i?(BY("Transaction.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=JS(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=JS(t);return this._delegate.delete(e),this}}class oge{constructor(t){this._delegate=t}set(t,e,i){const n=JS(t);return i?(BY("WriteBatch.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=JS(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=JS(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class QS{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new $O(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new XO(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=QS.INSTANCES;let n=i.get(t);n||(n=new WeakMap,i.set(t,n));let s=n.get(e);return s||(s=new QS(t,new Tj(t),e),n.set(e,s)),s}}QS.INSTANCES=new WeakMap;class pp{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tj(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Ut("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new pp(e,new Oo(e._delegate,i,new yi(t)))}static forKey(t,e,i){return new pp(e,new Oo(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new sI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new sI(this.firestore,Efe(this._delegate,t))}catch(e){throw yu(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,re.m9)(t))instanceof Oo&&Tfe(this._delegate,t)}set(t,e){e=BY("DocumentReference.set",e);try{return e?Xfe(this._delegate,t,e):Xfe(this._delegate,t)}catch(i){throw yu(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?Qfe(this._delegate,t):Qfe(this._delegate,t,e,...i)}catch(n){throw yu(n,"updateDoc()","DocumentReference.update()")}}delete(){return function VVe(r){return rI(Gr(r.firestore,Po),[new UD(r._key,Jo.none())])}(this._delegate)}onSnapshot(...t){const e=age(t),i=lge(t,n=>new ZO(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)));return Jfe(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function PVe(r){r=Gr(r,Oo);const t=Gr(r.firestore,Po),e=Ka(t),i=new PC(t);return function QHe(r,t){const e=new xl;return r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return(i=(0,Ct.Z)(function*(n,s,o){try{const a=yield function(l,h){const u=Ei(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,h))}(n,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Ut(ft.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=JD(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield mj(r),t,e);var i})),e.promise}(e,r._key).then(n=>new Gv(t,i,r._key,n,new XS(null!==n&&n.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===t?.source?function FVe(r){r=Gr(r,Oo);const t=Gr(r.firestore,Po);return kfe(Ka(t),r._key,{source:"server"}).then(e=>NY(t,r,e))}(this._delegate):function OVe(r){r=Gr(r,Oo);const t=Gr(r.firestore,Po);return kfe(Ka(t),r._key).then(e=>NY(t,r,e))}(this._delegate),e.then(i=>new ZO(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new pp(this.firestore,this._delegate.withConverter(t?QS.getInstance(this.firestore,t):null))}}function yu(r,t,e){return r.message=r.message.replace(t,e),r}function age(r){for(const t of r)if("object"==typeof t&&!HY(t))return t;return{}}function lge(r,t){var e,i;let n;return n=HY(r[0])?r[0]:HY(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:s=>{n.next&&n.next(t(s))},error:null===(e=n.error)||void 0===e?void 0:e.bind(n),complete:null===(i=n.complete)||void 0===i?void 0:i.bind(n)}}class ZO{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new pp(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Zfe(this._delegate,t._delegate)}}class XO extends ZO{data(t){const e=this._delegate.data(t);return function JFe(r,t){r||Yi()}(void 0!==e),e}}class bu{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Tj(t)}where(t,e,i){try{return new bu(this.firestore,LC(this._delegate,function EVe(r,t,e){const i=t,n=Sj("where",r);return new SVe(n,i,e)}(t,e,i)))}catch(n){throw yu(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new bu(this.firestore,LC(this._delegate,function xVe(r,t="asc"){const e=t,i=Sj("orderBy",r);return new TVe(i,e)}(t,e)))}catch(i){throw yu(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new bu(this.firestore,LC(this._delegate,function DVe(r){return bfe("limit",r),new Ufe("limit",r,"F")}(t)))}catch(e){throw yu(e,"limit()","Query.limit()")}}limitToLast(t){try{return new bu(this.firestore,LC(this._delegate,function IVe(r){return bfe("limitToLast",r),new Ufe("limitToLast",r,"L")}(t)))}catch(e){throw yu(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new bu(this.firestore,LC(this._delegate,function AVe(...r){return new Wfe("startAt",r,!0)}(...t)))}catch(e){throw yu(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new bu(this.firestore,LC(this._delegate,function _Ve(...r){return new Wfe("startAfter",r,!1)}(...t)))}catch(e){throw yu(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new bu(this.firestore,LC(this._delegate,function kVe(...r){return new qfe("endBefore",r,!1)}(...t)))}catch(e){throw yu(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new bu(this.firestore,LC(this._delegate,function RVe(...r){return new qfe("endAt",r,!0)}(...t)))}catch(e){throw yu(e,"endAt()","Query.endAt()")}}isEqual(t){return wY(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function BVe(r){r=Gr(r,Fh);const t=Gr(r.firestore,Po),e=Ka(t),i=new PC(t);return function JHe(r,t){const e=new xl;return r.asyncQueue.enqueueAndForget((0,Ct.Z)(function*(){return(i=(0,Ct.Z)(function*(n,s,o){try{const a=yield oj(n,s,!0),l=new lfe(s,a.Hi),h=l.Wu(a.documents),u=l.applyChanges(h,!1);o.resolve(u.snapshot)}catch(a){const l=JD(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield mj(r),t,e);var i})),e.promise}(e,r._query).then(n=>new OC(t,i,r,n))}(this._delegate):"server"===t?.source?function HVe(r){r=Gr(r,Fh);const t=Gr(r.firestore,Po),e=Ka(t),i=new PC(t);return Rfe(e,r._query,{source:"server"}).then(n=>new OC(t,i,r,n))}(this._delegate):function NVe(r){r=Gr(r,Fh);const t=Gr(r.firestore,Po),e=Ka(t),i=new PC(t);return jfe(r._query),Rfe(e,r._query).then(n=>new OC(t,i,r,n))}(this._delegate),e.then(i=>new VY(this.firestore,new OC(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=age(t),i=lge(t,n=>new VY(this.firestore,new OC(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)));return Jfe(this._delegate,e,i)}withConverter(t){return new bu(this.firestore,this._delegate.withConverter(t?QS.getInstance(this.firestore,t):null))}}class i2e{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new XO(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class VY{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new bu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new XO(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new i2e(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new XO(this._firestore,i))})}isEqual(t){return Zfe(this._delegate,t._delegate)}}class sI extends bu{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new pp(this.firestore,t):null}doc(t){try{return new pp(this.firestore,void 0===t?pj(this._delegate):pj(this._delegate,t))}catch(e){throw yu(e,"doc()","CollectionReference.doc()")}}add(t){return function zVe(r,t){const e=Gr(r.firestore,Po),i=pj(r),n=Ej(r.converter,t);return rI(e,[bj(YS(r.firestore),"addDoc",i._key,n,null!==r.converter,{}).toMutation(i._key,Jo.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new pp(this.firestore,e))}isEqual(t){return Tfe(this._delegate,t._delegate)}withConverter(t){return new sI(this.firestore,this._delegate.withConverter(t?QS.getInstance(this.firestore,t):null))}}function JS(r){return Gr(r,Oo)}class zY{constructor(...t){this._delegate=new qv(...t)}static documentId(){return new zY(ka.keyField().canonicalString())}isEqual(t){return(t=(0,re.m9)(t))instanceof qv&&this._delegate._internalPath.isEqual(t._internalPath)}}class eE{constructor(t){this._delegate=t}static serverTimestamp(){const t=function KVe(){return new RY("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new eE(t)}static delete(){const t=function GVe(){return new qO("deleteField")}();return t._methodName="FieldValue.delete",new eE(t)}static arrayUnion(...t){const e=function $Ve(...r){return new vVe("arrayUnion",r)}(...t);return e._methodName="FieldValue.arrayUnion",new eE(e)}static arrayRemove(...t){const e=function YVe(...r){return new yVe("arrayRemove",r)}(...t);return e._methodName="FieldValue.arrayRemove",new eE(e)}static increment(t){const e=function ZVe(r){return new bVe("increment",r)}(t);return e._methodName="FieldValue.increment",new eE(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const n2e={Firestore:rge,GeoPoint:vj,Timestamp:Qo,Blob:YO,Transaction:sge,WriteBatch:oge,DocumentReference:pp,DocumentSnapshot:ZO,Query:bu,QueryDocumentSnapshot:XO,QuerySnapshot:VY,CollectionReference:sI,FieldPath:zY,FieldValue:eE,setLogLevel:function t2e(r){!function QFe(r){CC.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};function hge(r,t){return function o2e(r,t=a9.z){return new Za.y(e=>{let i;return null!=t?t.schedule(()=>{i=r.onSnapshot({includeMetadataChanges:!0},e)}):i=r.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(r,t)}function jY(r,t){return hge(r,t).pipe((0,en.U)(e=>({payload:e,type:"query"})))}function xj(r,t){return jY(r,t).pipe(I0(void 0),Z9(),(0,en.U)(([e,i])=>{const n=i.payload.docChanges(),s=n.map(o=>({type:o.type,payload:o}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,a)=>{const l=n.find(u=>u.doc.ref.isEqual(o.ref)),h=e?.payload.docs.find(u=>u.ref.isEqual(o.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(o.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:o}})}),s}))}function uge(r,t,e){return xj(r,e).pipe(gg((i,n)=>function l2e(r,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(r=function h2e(r,t){switch(t.type){case"added":if(!r[t.newIndex]||!r[t.newIndex].doc.ref.isEqual(t.doc.ref))return UY(r,t.newIndex,0,t);break;case"modified":if(null==r[t.oldIndex]||r[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=r.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return UY(r,t.newIndex,1,t)}break;case"removed":if(r[t.oldIndex]&&r[t.oldIndex].doc.ref.isEqual(t.doc.ref))return UY(r,t.oldIndex,1)}return r}(r,i))}),r}(i,n.map(s=>s.payload),t),[]),lhe(),(0,en.U)(i=>i.map(n=>({type:n.type,payload:n}))))}function UY(r,t,e,...i){const n=r.slice();return n.splice(t,e,...i),n}function cge(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}!function s2e(r){(function r2e(r,t){r.INTERNAL.registerComponent(new Bu.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return t(i,n)},"PUBLIC").setServiceProps(Object.assign({},n2e)))})(r,(t,e)=>new rge(t,e,new e2e)),r.registerVersion("@firebase/firestore-compat","0.2.3")}(h9.Z);class dge{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=xj(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,en.U)(i=>i.filter(n=>t.indexOf(n.type)>-1)))),e.pipe(I0(void 0),Z9(),Th(([i,n])=>n.length>0||!i),(0,en.U)(([i,n])=>n),vs.iC)}auditTrail(t){return this.stateChanges(t).pipe(gg((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cge(t);return uge(this.query,e,this.afs.schedulers.outsideAngular).pipe(vs.iC)}valueChanges(t={}){return jY(this.query,this.afs.schedulers.outsideAngular).pipe((0,en.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),vs.iC)}get(t){return(0,Hr.D)(this.query.get(t)).pipe(vs.iC)}add(t){return this.ref.add(t)}doc(t){return new pge(this.ref.doc(t),this.afs)}}class pge{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:n,query:s}=mge(i,e);return new dge(n,s,this.afs)}snapshotChanges(){return function a2e(r,t){return hge(r,t).pipe(I0(void 0),Z9(),(0,en.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vs.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,en.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Hr.D)(this.ref.get(t)).pipe(vs.iC)}}class u2e{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?xj(this.query,this.afs.schedulers.outsideAngular).pipe((0,en.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Th(e=>e.length>0),vs.iC):xj(this.query,this.afs.schedulers.outsideAngular).pipe(vs.iC)}auditTrail(t){return this.stateChanges(t).pipe(gg((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=cge(t);return uge(this.query,e,this.afs.schedulers.outsideAngular).pipe(vs.iC)}valueChanges(t={}){return jY(this.query,this.afs.schedulers.outsideAngular).pipe((0,en.U)(i=>i.payload.docs.map(n=>t.idField?Object.assign({[t.idField]:n.id},n.data()):n.data())),vs.iC)}get(t){return(0,Hr.D)(this.query.get(t)).pipe(vs.iC)}}const fge=new v.OlP("angularfire2.enableFirestorePersistence"),gge=new v.OlP("angularfire2.firestore.persistenceSettings"),c2e=new v.OlP("angularfire2.firestore.settings"),d2e=new v.OlP("angularfire2.firestore.use-emulator");function mge(r,t=(e=>e)){return{query:t(r),ref:r}}let p2e=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,y,C,S,I,k,O){this.schedulers=l;const L=(0,Tl.on)(e,a,i),B=u;d&&N9(L,a,m,C,S,I,y,k),[this.firestore,this.persistenceEnabled$]=(0,Tl.cc)(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{const j=a.runOutsideAngular(()=>L.firestore());if(s&&j.settings(s),B&&j.useEmulator(...B),n&&!Xf(o)){const G=()=>{try{return(0,Hr.D)(j.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(ae){return typeof console<"u"&&console.warn(ae),$i(!1)}};return[j,a.runOutsideAngular(G)]}return[j,$i(!1)]},[s,B,n])}collection(e,i){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=mge(n,i),a=this.schedulers.ngZone.run(()=>s);return new dge(a,o,this)}collectionGroup(e,i){const n=i||(o=>o),s=this.firestore.collectionGroup(e);return new u2e(n(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>i);return new pge(n,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Tl.Dh),v.LFG(Tl.xv,8),v.LFG(fge,8),v.LFG(c2e,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(vs.HU),v.LFG(gge,8),v.LFG(d2e,8),v.LFG(ez,8),v.LFG(R9,8),v.LFG(M9,8),v.LFG(L9,8),v.LFG(O9,8),v.LFG(P9,8),v.LFG(F9,8),v.LFG(zL,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),f2e=(()=>{class r{constructor(){J2.Z.registerVersion("angularfire",vs.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:r,providers:[{provide:fge,useValue:!0},{provide:gge,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[p2e]}),r})();var g2e=ne(6148);const WY_firebase={apiKey:"AIzaSyD-2f_Tk0S8vGm4xeZB3IQ5ptb740Tdfz4",authDomain:"nutrition-genius.firebaseapp.com",databaseURL:"https://nutrition-genius-default-rtdb.firebaseio.com",projectId:"nutrition-genius",storageBucket:"nutrition-genius.appspot.com",messagingSenderId:"635447365282",appId:"1:635447365282:web:479bc667528ebb7f3e51fb",measurementId:"G-76TG9DZ5FM"},m2e=(0,c9.ZF)(WY_firebase),QO=((0,g2e.IH)(m2e),["footerTemplate"]),JO=["headerTemplate"],vge=["valueTemplate"],Dj=["groupTemplate"],oI=["itemTemplate"],aI=["noRecordsTemplate"],eP=["actionFailureTemplate"];var qY;const v2e=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","open","select","valueChange"],y2e=["value"];let id=qY=class extends Nb{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(v2e),this.addTwoWay.call(this,y2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};id.\u0275fac=function(t){return new(t||id)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},id.\u0275cmp=v.Xpm({type:id,selectors:[["ejs-dropdownlist"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,QO,5),v.Suo(i,JO,5),v.Suo(i,vge,5),v.Suo(i,Dj,5),v.Suo(i,oI,5),v.Suo(i,aI,5),v.Suo(i,eP,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.valueTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>qY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],id.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],id.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],id.prototype,"valueTemplate",void 0),(0,zi.gn)([yn()],id.prototype,"groupTemplate",void 0),(0,zi.gn)([yn()],id.prototype,"itemTemplate",void 0),(0,zi.gn)([yn("No records found")],id.prototype,"noRecordsTemplate",void 0),(0,zi.gn)([yn("Request failed")],id.prototype,"actionFailureTemplate",void 0),id=qY=(0,zi.gn)([Md([aa,el])],id);let yge=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();var GY;const b2e=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],C2e=["value"];let fp=GY=class extends d4{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(b2e),this.addTwoWay.call(this,C2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var KY;fp.\u0275fac=function(t){return new(t||fp)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},fp.\u0275cmp=v.Xpm({type:fp,selectors:[["ejs-combobox"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,QO,5),v.Suo(i,JO,5),v.Suo(i,Dj,5),v.Suo(i,oI,5),v.Suo(i,aI,5),v.Suo(i,eP,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>GY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],fp.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],fp.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],fp.prototype,"groupTemplate",void 0),(0,zi.gn)([yn()],fp.prototype,"itemTemplate",void 0),(0,zi.gn)([yn("No records found")],fp.prototype,"noRecordsTemplate",void 0),(0,zi.gn)([yn("Request failed")],fp.prototype,"actionFailureTemplate",void 0),fp=GY=(0,zi.gn)([Md([aa,el])],fp);const w2e=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],S2e=["value"];let gp=KY=class extends IH{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(w2e),this.addTwoWay.call(this,S2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var $Y;gp.\u0275fac=function(t){return new(t||gp)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},gp.\u0275cmp=v.Xpm({type:gp,selectors:[["ejs-autocomplete"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,QO,5),v.Suo(i,JO,5),v.Suo(i,Dj,5),v.Suo(i,oI,5),v.Suo(i,aI,5),v.Suo(i,eP,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",highlight:"highlight",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",minLength:"minLength",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",showPopupButton:"showPopupButton",sortOrder:"sortOrder",suggestionCount:"suggestionCount",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>KY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],gp.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],gp.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],gp.prototype,"groupTemplate",void 0),(0,zi.gn)([yn()],gp.prototype,"itemTemplate",void 0),(0,zi.gn)([yn("No records found")],gp.prototype,"noRecordsTemplate",void 0),(0,zi.gn)([yn("Request failed")],gp.prototype,"actionFailureTemplate",void 0),gp=KY=(0,zi.gn)([Md([aa,el])],gp);const E2e=["actionBegin","actionComplete","actionFailure","beforeOpen","beforeSelectAll","blur","change","chipSelection","close","created","customValueSelection","dataBound","destroyed","filtering","focus","open","removed","removing","select","selectedAll","tagging","valueChange"],T2e=["value"];let nd=$Y=class extends lie{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let s=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(s)&&this.injectedModules.push(s)}catch{}this.registerEvents(E2e),this.addTwoWay.call(this,T2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};nd.\u0275fac=function(t){return new(t||nd)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},nd.\u0275cmp=v.Xpm({type:nd,selectors:[["ejs-multiselect"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,QO,5),v.Suo(i,JO,5),v.Suo(i,vge,5),v.Suo(i,oI,5),v.Suo(i,Dj,5),v.Suo(i,aI,5),v.Suo(i,eP,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.valueTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",addTagOnBlur:"addTagOnBlur",allowCustomValue:"allowCustomValue",allowFiltering:"allowFiltering",changeOnBlur:"changeOnBlur",closePopupOnSelect:"closePopupOnSelect",cssClass:"cssClass",dataSource:"dataSource",delimiterChar:"delimiterChar",enableGroupCheckBox:"enableGroupCheckBox",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableSelectionOrder:"enableSelectionOrder",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",hideSelectedItem:"hideSelectedItem",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",mode:"mode",noRecordsTemplate:"noRecordsTemplate",openOnClick:"openOnClick",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",selectAllText:"selectAllText",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",unSelectAllText:"unSelectAllText",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",beforeSelectAll:"beforeSelectAll",blur:"blur",change:"change",chipSelection:"chipSelection",close:"close",created:"created",customValueSelection:"customValueSelection",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",removed:"removed",removing:"removing",select:"select",selectedAll:"selectedAll",tagging:"tagging",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>$Y),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],nd.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],nd.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],nd.prototype,"valueTemplate",void 0),(0,zi.gn)([yn()],nd.prototype,"itemTemplate",void 0),(0,zi.gn)([yn()],nd.prototype,"groupTemplate",void 0),(0,zi.gn)([yn("No records found")],nd.prototype,"noRecordsTemplate",void 0),(0,zi.gn)([yn("Request failed")],nd.prototype,"actionFailureTemplate",void 0),nd=$Y=(0,zi.gn)([Md([aa,el])],nd);let x2e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();var YY;const D2e=["focus","blur","actionBegin","actionComplete","actionFailure","beforeDrop","beforeItemRender","change","created","dataBound","destroyed","drag","dragStart","drop","filtering","select","valueChange"],I2e=["value"];let NC=YY=class extends b0e{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let s=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(s)&&this.injectedModules.push(s)}catch{}this.registerEvents(D2e),this.addTwoWay.call(this,I2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var ZY;NC.\u0275fac=function(t){return new(t||NC)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},NC.\u0275cmp=v.Xpm({type:NC,selectors:[["ejs-listbox"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,oI,5),v.Suo(i,aI,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowDragAndDrop:"allowDragAndDrop",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",groupTemplate:"groupTemplate",height:"height",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",noRecordsTemplate:"noRecordsTemplate",query:"query",scope:"scope",selectionSettings:"selectionSettings",sortOrder:"sortOrder",toolbarSettings:"toolbarSettings",value:"value",zIndex:"zIndex"},outputs:{focus:"focus",blur:"blur",actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeDrop:"beforeDrop",beforeItemRender:"beforeItemRender",change:"change",created:"created",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",drop:"drop",filtering:"filtering",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>YY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],NC.prototype,"itemTemplate",void 0),(0,zi.gn)([yn("No records found")],NC.prototype,"noRecordsTemplate",void 0),NC=YY=(0,zi.gn)([Md([aa,el])],NC);const A2e=["actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","keyPress","open","select","valueChange"],_2e=["value"];let Uf=ZY=class extends NCe{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(A2e),this.addTwoWay.call(this,_2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};Uf.\u0275fac=function(t){return new(t||Uf)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},Uf.\u0275cmp=v.Xpm({type:Uf,selectors:[["ejs-dropdowntree"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,QO,5),v.Suo(i,JO,5),v.Suo(i,oI,5),v.Suo(i,aI,5),v.Suo(i,eP,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",allowMultiSelection:"allowMultiSelection",changeOnBlur:"changeOnBlur",cssClass:"cssClass",customTemplate:"customTemplate",delimiterChar:"delimiterChar",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",mode:"mode",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",readonly:"readonly",selectAllText:"selectAllText",showCheckBox:"showCheckBox",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",treeSettings:"treeSettings",unSelectAllText:"unSelectAllText",value:"value",width:"width",wrapText:"wrapText",zIndex:"zIndex"},outputs:{actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",keyPress:"keyPress",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>ZY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,zi.gn)([yn()],Uf.prototype,"footerTemplate",void 0),(0,zi.gn)([yn()],Uf.prototype,"headerTemplate",void 0),(0,zi.gn)([yn()],Uf.prototype,"itemTemplate",void 0),(0,zi.gn)([yn("No records found")],Uf.prototype,"noRecordsTemplate",void 0),(0,zi.gn)([yn("Request failed")],Uf.prototype,"actionFailureTemplate",void 0),Uf=ZY=(0,zi.gn)([Md([aa,el])],Uf);let k2e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();var XY;const R2e=["focus","blur","change","created","checkedChange","indeterminateChange"],M2e=["checked","indeterminate"];let lI=XY=class extends qme{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(R2e),this.addTwoWay.call(this,M2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};lI.\u0275fac=function(t){return new(t||lI)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},lI.\u0275cmp=v.Xpm({type:lI,selectors:[["ejs-checkbox"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",indeterminate:"indeterminate",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange",indeterminateChange:"indeterminateChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>XY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),lI=XY=(0,zi.gn)([Md([aa,el])],lI);let L2e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Vh]]}),r})();var QY;const O2e=["focus","blur","change","created","valueChange"],P2e=["value"];let hI=QY=class extends $me{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(O2e),this.addTwoWay.call(this,P2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var JY;hI.\u0275fac=function(t){return new(t||hI)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},hI.\u0275cmp=v.Xpm({type:hI,selectors:[["ejs-radiobutton"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",valueChange:"valueChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>QY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),hI=QY=(0,zi.gn)([Md([aa,el])],hI);const F2e=["focus","blur","change","created","checkedChange"],N2e=["checked"];let uI=JY=class extends Zme{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(F2e),this.addTwoWay.call(this,N2e),th("currentInstance",this,this.viewContainerRef),this.formContext=new el,this.formCompContext=new aa}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};uI.\u0275fac=function(t){return new(t||uI)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},uI.\u0275cmp=v.Xpm({type:uI,selectors:[["ejs-switch"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",locale:"locale",name:"name",offLabel:"offLabel",onLabel:"onLabel",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange"},features:[v._Bn([{provide:Ho,useExisting:(0,v.Gpc)(()=>JY),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),uI=JY=(0,zi.gn)([Md([aa,el])],uI);let B2e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r,bootstrap:[sPe]}),r.\u0275inj=v.cJS({providers:[__e],imports:[tg,iPe,A_e,R_e,f5,Tl.hO.initializeApp(WY_firebase),EOe,f2e,Y1e,NOe,lZ,iA,yge,k2e,x2e,yge,L2e]}),r})();wT("ORg4AjUWIQA/Gnt2VVhjQlFac1lJXGFWfVJpTGpQdk5xdV9DaVZUTWY/P1ZhSXxRd0djWn9XcXJXRWVcUkU="),fm().bootstrapModule(B2e).catch(r=>console.error(r))},6148:(Wi,kt,ne)=>{ne.d(kt,{IH:()=>uo,Gb:()=>xo});var v=ne(5861),ue=ne(9681),ee=ne(1877),qe=ne(2090),ht=ne(4859);ne(2833);const it="analytics",ut="firebase_id",we="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Pe="https://www.googletagmanager.com/gtag/js",Lt=new ee.Yd("@firebase/analytics");function wt(J){return Promise.all(J.map(Y=>Y.catch(q=>q)))}function St(J,Y){const q=document.createElement("script");q.src=`${Pe}?l=${J}&id=${Y}`,q.async=!0,document.head.appendChild(q)}function gt(J,Y,q,Z,ye,et){return nt.apply(this,arguments)}function nt(){return(nt=(0,v.Z)(function*(J,Y,q,Z,ye,et){const Pt=Z[ye];try{if(Pt)yield Y[Pt];else{const ct=(yield wt(q)).find(Dt=>Dt.measurementId===ye);ct&&(yield Y[ct.appId])}}catch(Kt){Lt.error(Kt)}J("config",ye,et)})).apply(this,arguments)}function xi(J,Y,q,Z,ye){return hi.apply(this,arguments)}function hi(){return(hi=(0,v.Z)(function*(J,Y,q,Z,ye){try{let et=[];if(ye&&ye.send_to){let Pt=ye.send_to;Array.isArray(Pt)||(Pt=[Pt]);const Kt=yield wt(q);for(const ct of Pt){const Dt=Kt.find(zn=>zn.measurementId===ct),Mi=Dt&&Y[Dt.appId];if(!Mi){et=[];break}et.push(Mi)}}0===et.length&&(et=Object.values(Y)),yield Promise.all(et),J("event",Z,ye||{})}catch(et){Lt.error(et)}})).apply(this,arguments)}function yt(J){const Y=window.document.getElementsByTagName("script");for(const q of Object.values(Y))if(q.src&&q.src.includes(Pe)&&q.src.includes(J))return q;return null}const je=new qe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Be=new class Fe{constructor(Y={},q=1e3){this.throttleMetadata=Y,this.intervalMillis=q}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,q){this.throttleMetadata[Y]=q}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function st(J){return new Headers({Accept:"application/json","x-goog-api-key":J})}function $e(J){return zt.apply(this,arguments)}function zt(){return(zt=(0,v.Z)(function*(J){var Y;const{appId:q,apiKey:Z}=J,ye={method:"GET",headers:st(Z)},et=we.replace("{app-id}",q),Pt=yield fetch(et,ye);if(200!==Pt.status&&304!==Pt.status){let Kt="";try{const ct=yield Pt.json();null!==(Y=ct.error)&&void 0!==Y&&Y.message&&(Kt=ct.error.message)}catch{}throw je.create("config-fetch-failed",{httpStatus:Pt.status,responseMessage:Kt})}return Pt.json()})).apply(this,arguments)}function Ht(J){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,v.Z)(function*(J,Y=Be,q){const{appId:Z,apiKey:ye,measurementId:et}=J.options;if(!Z)throw je.create("no-app-id");if(!ye){if(et)return{measurementId:et,appId:Z};throw je.create("no-api-key")}const Pt=Y.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Kt=new Ds;return setTimeout((0,v.Z)(function*(){Kt.abort()}),void 0!==q?q:6e4),Jn({appId:Z,apiKey:ye,measurementId:et},Pt,Kt,Y)})).apply(this,arguments)}function Jn(J,Y,q){return bn.apply(this,arguments)}function bn(){return(bn=(0,v.Z)(function*(J,{throttleEndTimeMillis:Y,backoffCount:q},Z,ye=Be){var et,Pt;const{appId:Kt,measurementId:ct}=J;try{yield ti(Z,Y)}catch(Dt){if(ct)return Lt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${null===(et=Dt)||void 0===et?void 0:et.message}]`),{appId:Kt,measurementId:ct};throw Dt}try{const Dt=yield $e(J);return ye.deleteThrottleMetadata(Kt),Dt}catch(Dt){const Mi=Dt;if(!Er(Mi)){if(ye.deleteThrottleMetadata(Kt),ct)return Lt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${ct} provided in the "measurementId" field in the local Firebase config. [${Mi?.message}]`),{appId:Kt,measurementId:ct};throw Dt}const zn=503===Number(null===(Pt=Mi?.customData)||void 0===Pt?void 0:Pt.httpStatus)?(0,qe.$s)(q,ye.intervalMillis,30):(0,qe.$s)(q,ye.intervalMillis),un={throttleEndTimeMillis:Date.now()+zn,backoffCount:q+1};return ye.setThrottleMetadata(Kt,un),Lt.debug(`Calling attemptFetch again in ${zn} millis`),Jn(J,un,Z,ye)}})).apply(this,arguments)}function ti(J,Y){return new Promise((q,Z)=>{const ye=Math.max(Y-Date.now(),0),et=setTimeout(q,ye);J.addEventListener(()=>{clearTimeout(et),Z(je.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function Er(J){if(!(J instanceof qe.ZR&&J.customData))return!1;const Y=Number(J.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class Ds{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let vr,Ms;function _n(){return(_n=(0,v.Z)(function*(J,Y,q,Z,ye){if(ye&&ye.global)J("event",q,Z);else{const et=yield Y;J("event",q,Object.assign(Object.assign({},Z),{send_to:et}))}})).apply(this,arguments)}function No(J){Ms=J}function Oa(J){vr=J}function fi(){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,v.Z)(function*(){var J;if(!(0,qe.hl)())return Lt.warn(je.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,qe.eu)()}catch(Y){return Lt.warn(je.create("indexeddb-unavailable",{errorInfo:null===(J=Y)||void 0===J?void 0:J.toString()}).message),!1}return!0})).apply(this,arguments)}function _r(){return(_r=(0,v.Z)(function*(J,Y,q,Z,ye,et,Pt){var Kt;const ct=Ht(J);ct.then(Ln=>{q[Ln.measurementId]=Ln.appId,J.options.measurementId&&Ln.measurementId!==J.options.measurementId&&Lt.warn(`The measurement ID in the local Firebase config (${J.options.measurementId}) does not match the measurement ID fetched from the server (${Ln.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ln=>Lt.error(Ln)),Y.push(ct);const Dt=fi().then(Ln=>{if(Ln)return Z.getId()}),[Mi,zn]=yield Promise.all([ct,Dt]);yt(et)||St(et,Mi.measurementId),Ms&&(ye("consent","default",Ms),No(void 0)),ye("js",new Date);const un=null!==(Kt=Pt?.config)&&void 0!==Kt?Kt:{};return un.origin="firebase",un.update=!0,null!=zn&&(un[ut]=zn),ye("config",Mi.measurementId,un),vr&&(ye("set",vr),Oa(void 0)),Mi.measurementId})).apply(this,arguments)}class lo{constructor(Y){this.app=Y}_delete(){return delete ea[this.app.options.appId],Promise.resolve()}}let ea={},Ur=[];const Qr={};let Li,Oi,or="dataLayer",Kr=!1;function hn(J,Y,q){!function ho(){const J=[];if((0,qe.ru)()&&J.push("This is a browser extension environment."),(0,qe.zI)()||J.push("Cookies are not available."),J.length>0){const Y=J.map((Z,ye)=>`(${ye+1}) ${Z}`).join(" "),q=je.create("invalid-analytics-context",{errorInfo:Y});Lt.warn(q.message)}}();const Z=J.options.appId;if(!Z)throw je.create("no-app-id");if(!J.options.apiKey){if(!J.options.measurementId)throw je.create("no-api-key");Lt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${J.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ea[Z])throw je.create("already-exists",{id:Z});if(!Kr){!function ci(J){let Y=[];Array.isArray(window[J])?Y=window[J]:window[J]=Y}(or);const{wrappedGtag:et,gtagCore:Pt}=function Mt(J,Y,q,Z,ye){let et=function(...Pt){window[Z].push(arguments)};return window[ye]&&"function"==typeof window[ye]&&(et=window[ye]),window[ye]=function Ot(J,Y,q,Z){function et(){return(et=(0,v.Z)(function*(Pt,Kt,ct){try{"event"===Pt?yield xi(J,Y,q,Kt,ct):"config"===Pt?yield gt(J,Y,q,Z,Kt,ct):"consent"===Pt?J("consent","update",ct):J("set",Kt)}catch(Dt){Lt.error(Dt)}})).apply(this,arguments)}return function ye(Pt,Kt,ct){return et.apply(this,arguments)}}(et,J,Y,q),{gtagCore:et,wrappedGtag:window[ye]}}(ea,Ur,Qr,or,"gtag");Oi=et,Li=Pt,Kr=!0}return ea[Z]=function Is(J,Y,q,Z,ye,et,Pt){return _r.apply(this,arguments)}(J,Ur,Qr,Y,Li,or,q),new lo(J)}function uo(J=(0,ue.getApp)()){J=(0,qe.m9)(J);const Y=(0,ue._getProvider)(J,it);return Y.isInitialized()?Y.getImmediate():function vn(J,Y={}){const q=(0,ue._getProvider)(J,it);if(q.isInitialized()){const ye=q.getImmediate();if((0,qe.vZ)(Y,q.getOptions()))return ye;throw je.create("already-initialized")}return q.initialize({options:Y})}(J)}function xo(){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(){if((0,qe.ru)()||!(0,qe.zI)()||!(0,qe.hl)())return!1;try{return yield(0,qe.eu)()}catch{return!1}})).apply(this,arguments)}const Bn="@firebase/analytics";!function fe(){(0,ue._registerComponent)(new ht.wA(it,(Y,{options:q})=>hn(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,ue._registerComponent)(new ht.wA("analytics-internal",function J(Y){try{const q=Y.getProvider(it).getImmediate();return{logEvent:(Z,ye,et)=>function Zi(J,Y,q,Z){J=(0,qe.m9)(J),function er(J,Y,q,Z,ye){return _n.apply(this,arguments)}(Oi,ea[J.app.options.appId],Y,q,Z).catch(ye=>Lt.error(ye))}(q,Z,ye,et)}}catch(q){throw je.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,ue.registerVersion)(Bn,"0.8.4"),(0,ue.registerVersion)(Bn,"0.8.4","esm2017")}()},5867:(Wi,kt,ne)=>{ne.d(kt,{C6:()=>v.getApps,Mq:()=>v.getApp,ZF:()=>v.initializeApp});var v=ne(9681);(0,v.registerVersion)("firebase","9.14.0","app")},127:(Wi,kt,ne)=>{ne.d(kt,{Z:()=>v.Z});var v=ne(3942);v.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(Wi,kt,ne)=>{ne.r(kt);var v=ne(5861),ue=ne(3942),ee=ne(8247),qe=ne(2090),it=(ne(9681),ne(1877),ne(4859));function ut(){return window}function we(){return(we=(0,v.Z)(function*(Y,q,Z){var ye;const{BuildInfo:et}=ut();(0,ee.ap)(q.sessionId,"AuthEvent did not contain a session ID");const Pt=yield nt(q.sessionId),Kt={};return(0,ee.aq)()?Kt.ibi=et.packageName:(0,ee.ar)()?Kt.apn=et.packageName:(0,ee.as)(Y,"operation-not-supported-in-this-environment"),et.displayName&&(Kt.appDisplayName=et.displayName),Kt.sessionId=Pt,(0,ee.at)(Y,Z,q.type,void 0,null!==(ye=q.eventId)&&void 0!==ye?ye:void 0,Kt)})).apply(this,arguments)}function Lt(){return(Lt=(0,v.Z)(function*(Y){const{BuildInfo:q}=ut(),Z={};(0,ee.aq)()?Z.iosBundleId=q.packageName:(0,ee.ar)()?Z.androidPackageName=q.packageName:(0,ee.as)(Y,"operation-not-supported-in-this-environment"),yield(0,ee.au)(Y,Z)})).apply(this,arguments)}function ci(){return(ci=(0,v.Z)(function*(Y,q,Z){const{cordova:ye}=ut();let et=()=>{};try{yield new Promise((Pt,Kt)=>{let ct=null;function Dt(){var un;Pt();const Ln=null===(un=ye.plugins.browsertab)||void 0===un?void 0:un.close;"function"==typeof Ln&&Ln(),"function"==typeof Z?.close&&Z.close()}function Mi(){ct||(ct=window.setTimeout(()=>{Kt((0,ee.aw)(Y,"redirect-cancelled-by-user"))},2e3))}function zn(){"visible"===document?.visibilityState&&Mi()}q.addPassiveListener(Dt),document.addEventListener("resume",Mi,!1),(0,ee.ar)()&&document.addEventListener("visibilitychange",zn,!1),et=()=>{q.removePassiveListener(Dt),document.removeEventListener("resume",Mi,!1),document.removeEventListener("visibilitychange",zn,!1),ct&&window.clearTimeout(ct)}})}finally{et()}})).apply(this,arguments)}function nt(Y){return xi.apply(this,arguments)}function xi(){return(xi=(0,v.Z)(function*(Y){const q=hi(Y),Z=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(Z)).map(et=>et.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function hi(Y){if((0,ee.ap)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const q=new ArrayBuffer(Y.length),Z=new Uint8Array(q);for(let ye=0;ye<Y.length;ye++)Z[ye]=Y.charCodeAt(ye);return Z}class Mt extends ee.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(q)),super.onEvent(q)}initialized(){var q=this;return(0,v.Z)(function*(){yield q.initPromise})()}}function je(Y){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,v.Z)(function*(Y){const q=yield Be()._get(st(Y));return q&&(yield Be()._remove(st(Y))),q})).apply(this,arguments)}function Fe(){const Y=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const ye=Math.floor(Math.random()*q.length);Y.push(q.charAt(ye))}return Y.join("")}function Be(){return(0,ee.az)(ee.b)}function st(Y){return(0,ee.aA)("authEvent",Y.config.apiKey,Y.name)}function Ht(Y){if(!Y?.includes("?"))return{};const[q,...Z]=Y.split("?");return(0,qe.zd)(Z.join("?"))}function ti(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.aw)("no-auth-event")}}function _n(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function Xr(Y=(0,qe.z$)()){return!("file:"!==_n()&&"ionic:"!==_n()&&"capacitor:"!==_n()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Sa(){try{const Y=self.localStorage,q=ee.aI();if(Y)return Y.setItem(q,"1"),Y.removeItem(q),!function Xs(Y=(0,qe.z$)()){return function $a(){return(0,qe.w1)()&&11===document?.documentMode}()||function ys(Y=(0,qe.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,qe.hl)()}catch{return Us()&&(0,qe.hl)()}return!1}function Us(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ms(){return(function rn(){return"http:"===_n()||"https:"===_n()}()||(0,qe.ru)()||Xr())&&!function La(){return(0,qe.b$)()||(0,qe.UG)()}()&&Sa()&&!Us()}function No(){return Xr()&&typeof document<"u"}function fi(){return(fi=(0,v.Z)(function*(){return!!No()&&new Promise(Y=>{const q=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),Y(!0)})})})).apply(this,arguments)}const Is={LOCAL:"local",NONE:"none",SESSION:"session"},_r=ee.ax,lo="persistence";function Ur(Y){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,v.Z)(function*(Y){yield Y._initializationPromise;const q=Fi(),Z=ee.aA(lo,Y.config.apiKey,Y.name);q&&q.setItem(Z,Y._getPersistence())})).apply(this,arguments)}function Fi(){var Y;try{return(null===(Y=function Nr(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const Li=ee.ax;class Oi{constructor(){this.browserResolver=ee.az(ee.k),this.cordovaResolver=ee.az(class Jn{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(q){var Z=this;return(0,v.Z)(function*(){const ye=q._key();let et=Z.eventManagers.get(ye);return et||(et=new Mt(q),Z.eventManagers.set(ye,et),Z.attachCallbackListeners(q,et)),et})()}_openPopup(q){(0,ee.as)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,Z,ye,et){var Pt=this;return(0,v.Z)(function*(){!function gt(Y){var q,Z,ye,et,Pt,Kt,ct,Dt,Mi,zn;const un=ut();(0,ee.ax)("function"==typeof(null===(q=un?.universalLinks)||void 0===q?void 0:q.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.ax)(typeof(null===(Z=un?.BuildInfo)||void 0===Z?void 0:Z.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.ax)("function"==typeof(null===(Pt=null===(et=null===(ye=un?.cordova)||void 0===ye?void 0:ye.plugins)||void 0===et?void 0:et.browsertab)||void 0===Pt?void 0:Pt.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(Dt=null===(ct=null===(Kt=un?.cordova)||void 0===Kt?void 0:Kt.plugins)||void 0===ct?void 0:ct.browsertab)||void 0===Dt?void 0:Dt.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(zn=null===(Mi=un?.cordova)||void 0===Mi?void 0:Mi.InAppBrowser)||void 0===zn?void 0:zn.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Kt=yield Pt._initialize(q);yield Kt.initialized(),Kt.resetRedirect(),(0,ee.aD)(),yield Pt._originValidation(q);const ct=function yt(Y,q,Z=null){return{type:q,eventId:Z,urlResponse:null,sessionId:Fe(),postBody:null,tenantId:Y.tenantId,error:(0,ee.aw)(Y,"no-auth-event")}}(q,ye,et);yield function ii(Y,q){return Be()._set(st(Y),q)}(q,ct);const Dt=yield function Ce(Y,q,Z){return we.apply(this,arguments)}(q,ct,Z),Mi=yield function wt(Y){const{cordova:q}=ut();return new Promise(Z=>{q.plugins.browsertab.isAvailable(ye=>{let et=null;ye?q.plugins.browsertab.openUrl(Y):et=q.InAppBrowser.open(Y,(0,ee.av)()?"_blank":"_system","location=yes"),Z(et)})})}(Dt);return function St(Y,q,Z){return ci.apply(this,arguments)}(q,Kt,Mi)})()}_isIframeWebStorageSupported(q,Z){throw new Error("Method not implemented.")}_originValidation(q){const Z=q._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function Pe(Y){return Lt.apply(this,arguments)}(q)),this.originValidationPromises[Z]}attachCallbackListeners(q,Z){const{universalLinks:ye,handleOpenURL:et,BuildInfo:Pt}=ut(),Kt=setTimeout((0,v.Z)(function*(){yield je(q),Z.onEvent(ti())}),500),ct=function(){var zn=(0,v.Z)(function*(un){clearTimeout(Kt);const Ln=yield je(q);let ll=null;Ln&&un?.url&&(ll=function mt(Y,q){var Z,ye;const et=function zt(Y){const q=Ht(Y),Z=q.link?decodeURIComponent(q.link):void 0,ye=Ht(Z).link,et=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return Ht(et).link||et||ye||Z||Y}(q);if(et.includes("/__/auth/callback")){const Pt=Ht(et),Kt=Pt.firebaseError?function $e(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(Pt.firebaseError)):null,ct=null===(ye=null===(Z=Kt?.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===ye?void 0:ye[1],Dt=ct?(0,ee.aw)(ct):null;return Dt?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:et,postBody:null}}return null}(Ln,un.url)),Z.onEvent(ll||ti())});return function(Ln){return zn.apply(this,arguments)}}();typeof ye<"u"&&"function"==typeof ye.subscribe&&ye.subscribe(null,ct);const Dt=et,Mi=`${Pt.packageName.toLowerCase()}://`;ut().handleOpenURL=function(){var zn=(0,v.Z)(function*(un){if(un.toLowerCase().startsWith(Mi)&&ct({url:un}),"function"==typeof Dt)try{Dt(un)}catch(Ln){console.error(Ln)}});return function(un){return zn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(q){var Z=this;return(0,v.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,Z,ye,et){var Pt=this;return(0,v.Z)(function*(){return yield Pt.selectUnderlyingResolver(),Pt.assertedUnderlyingResolver._openPopup(q,Z,ye,et)})()}_openRedirect(q,Z,ye,et){var Pt=this;return(0,v.Z)(function*(){return yield Pt.selectUnderlyingResolver(),Pt.assertedUnderlyingResolver._openRedirect(q,Z,ye,et)})()}_isIframeWebStorageSupported(q,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,Z)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return No()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Li(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,v.Z)(function*(){if(q.underlyingResolver)return;const Z=yield function Oa(){return fi.apply(this,arguments)}();q.underlyingResolver=Z?q.cordovaResolver:q.browserResolver})()}}function Kr(Y){return Y.unwrap()}function ho(Y){return uo(Y)}function uo(Y){const{_tokenResponse:q}=Y instanceof qe.ZR?Y.customData:Y;if(!q)return null;if(!(Y instanceof qe.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return ee.P.credentialFromResult(Y);const Z=q.providerId;if(!Z||Z===ee.o.PASSWORD)return null;let ye;switch(Z){case ee.o.GOOGLE:ye=ee.Q;break;case ee.o.FACEBOOK:ye=ee.N;break;case ee.o.GITHUB:ye=ee.T;break;case ee.o.TWITTER:ye=ee.W;break;default:const{oauthIdToken:et,oauthAccessToken:Pt,oauthTokenSecret:Kt,pendingToken:ct,nonce:Dt}=q;return Pt||Kt||et||ct?ct?Z.startsWith("saml.")?ee.aL._create(Z,ct):ee.J._fromParams({providerId:Z,signInMethod:Z,pendingToken:ct,idToken:et,accessToken:Pt}):new ee.U(Z).credential({idToken:et,accessToken:Pt,rawNonce:Dt}):null}return Y instanceof qe.ZR?ye.credentialFromError(Y):ye.credentialFromResult(Y)}function vn(Y,q){return q.catch(Z=>{throw Z instanceof qe.ZR&&function hn(Y,q){var Z,ye;const et=null===(Z=q.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===(null===(ye=q)||void 0===ye?void 0:ye.code))q.resolver=new Js(Y,ee.an(Y,q));else if(et){const Pt=uo(q),Kt=q;Pt&&(Kt.credential=Pt,Kt.tenantId=et.tenantId||void 0,Kt.email=et.email||void 0,Kt.phoneNumber=et.phoneNumber||void 0)}}(Y,Z),Z}).then(Z=>{const et=Z.user;return{operationType:Z.operationType,credential:ho(Z),additionalUserInfo:ee.al(Z),user:ps.getOrCreate(et)}})}function xo(Y,q){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,v.Z)(function*(Y,q){const Z=yield q;return{verificationId:Z.verificationId,confirm:ye=>vn(Y,Z.confirm(ye))}})).apply(this,arguments)}class Js{constructor(q,Z){this.resolver=Z,this.auth=function Qs(Y){return Y.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return vn(Kr(this.auth),this.resolver.resolveSignIn(q))}}class ps{constructor(q){this._delegate=q,this.multiFactor=ee.ao(q)}static getOrCreate(q){return ps.USER_MAP.has(q)||ps.USER_MAP.set(q,new ps(q)),ps.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var Z=this;return(0,v.Z)(function*(){return vn(Z.auth,ee.Z(Z._delegate,q))})()}linkWithPhoneNumber(q,Z){var ye=this;return(0,v.Z)(function*(){return xo(ye.auth,ee.l(ye._delegate,q,Z))})()}linkWithPopup(q){var Z=this;return(0,v.Z)(function*(){return vn(Z.auth,ee.d(Z._delegate,q,Oi))})()}linkWithRedirect(q){var Z=this;return(0,v.Z)(function*(){return yield Ur(ee.aE(Z.auth)),ee.g(Z._delegate,q,Oi)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var Z=this;return(0,v.Z)(function*(){return vn(Z.auth,ee._(Z._delegate,q))})()}reauthenticateWithPhoneNumber(q,Z){return xo(this.auth,ee.r(this._delegate,q,Z))}reauthenticateWithPopup(q){return vn(this.auth,ee.e(this._delegate,q,Oi))}reauthenticateWithRedirect(q){var Z=this;return(0,v.Z)(function*(){return yield Ur(ee.aE(Z.auth)),ee.h(Z._delegate,q,Oi)})()}sendEmailVerification(q){return ee.ab(this._delegate,q)}unlink(q){var Z=this;return(0,v.Z)(function*(){return yield ee.ak(Z._delegate,q),Z})()}updateEmail(q){return ee.ag(this._delegate,q)}updatePassword(q){return ee.ah(this._delegate,q)}updatePhoneNumber(q){return ee.u(this._delegate,q)}updateProfile(q){return ee.af(this._delegate,q)}verifyBeforeUpdateEmail(q,Z){return ee.ac(this._delegate,q,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ps.USER_MAP=new WeakMap;const di=ee.ax;let xt=(()=>{class Y{constructor(Z,ye){if(this.app=Z,ye.isInitialized())return this._delegate=ye.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:et}=Z.options;di(et,"invalid-api-key",{appName:Z.name}),di(et,"invalid-api-key",{appName:Z.name});const Pt=typeof window<"u"?Oi:void 0;this._delegate=ye.initialize({options:{persistence:Zi(et,Z.name),popupRedirectResolver:Pt}}),this._delegate._updateErrorMap(ee.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ps.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,ye){ee.G(this._delegate,Z,ye)}applyActionCode(Z){return ee.a2(this._delegate,Z)}checkActionCode(Z){return ee.a3(this._delegate,Z)}confirmPasswordReset(Z,ye){return ee.a1(this._delegate,Z,ye)}createUserWithEmailAndPassword(Z,ye){var et=this;return(0,v.Z)(function*(){return vn(et._delegate,ee.a5(et._delegate,Z,ye))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return ee.aa(this._delegate,Z)}isSignInWithEmailLink(Z){return ee.a8(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,v.Z)(function*(){di(Ms(),Z._delegate,"operation-not-supported-in-this-environment");const ye=yield ee.j(Z._delegate,Oi);return ye?vn(Z._delegate,Promise.resolve(ye)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function Er(Y,q){(0,ee.aE)(Y)._logFramework(q)}(this._delegate,Z)}onAuthStateChanged(Z,ye,et){const{next:Pt,error:Kt,complete:ct}=vi(Z,ye,et);return this._delegate.onAuthStateChanged(Pt,Kt,ct)}onIdTokenChanged(Z,ye,et){const{next:Pt,error:Kt,complete:ct}=vi(Z,ye,et);return this._delegate.onIdTokenChanged(Pt,Kt,ct)}sendSignInLinkToEmail(Z,ye){return ee.a7(this._delegate,Z,ye)}sendPasswordResetEmail(Z,ye){return ee.a0(this._delegate,Z,ye||void 0)}setPersistence(Z){var ye=this;return(0,v.Z)(function*(){let et;switch(function ea(Y,q){_r(Object.values(Is).includes(q),Y,"invalid-persistence-type"),(0,qe.b$)()?_r(q!==Is.SESSION,Y,"unsupported-persistence-type"):(0,qe.UG)()?_r(q===Is.NONE,Y,"unsupported-persistence-type"):Us()?_r(q===Is.NONE||q===Is.LOCAL&&(0,qe.hl)(),Y,"unsupported-persistence-type"):_r(q===Is.NONE||Sa(),Y,"unsupported-persistence-type")}(ye._delegate,Z),Z){case Is.SESSION:et=ee.a;break;case Is.LOCAL:et=(yield ee.az(ee.i)._isAvailable())?ee.i:ee.b;break;case Is.NONE:et=ee.L;break;default:return ee.as("argument-error",{appName:ye._delegate.name})}return ye._delegate.setPersistence(et)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return vn(this._delegate,ee.X(this._delegate))}signInWithCredential(Z){return vn(this._delegate,ee.Y(this._delegate,Z))}signInWithCustomToken(Z){return vn(this._delegate,ee.$(this._delegate,Z))}signInWithEmailAndPassword(Z,ye){return vn(this._delegate,ee.a6(this._delegate,Z,ye))}signInWithEmailLink(Z,ye){return vn(this._delegate,ee.a9(this._delegate,Z,ye))}signInWithPhoneNumber(Z,ye){return xo(this._delegate,ee.s(this._delegate,Z,ye))}signInWithPopup(Z){var ye=this;return(0,v.Z)(function*(){return di(Ms(),ye._delegate,"operation-not-supported-in-this-environment"),vn(ye._delegate,ee.c(ye._delegate,Z,Oi))})()}signInWithRedirect(Z){var ye=this;return(0,v.Z)(function*(){return di(Ms(),ye._delegate,"operation-not-supported-in-this-environment"),yield Ur(ye._delegate),ee.f(ye._delegate,Z,Oi)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return ee.a4(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=Is,Y})();function vi(Y,q,Z){let ye=Y;"function"!=typeof Y&&({next:ye,error:q,complete:Z}=Y);const et=ye;return{next:Kt=>et(Kt&&ps.getOrCreate(Kt)),error:q,complete:Z}}function Zi(Y,q){const Z=function or(Y,q){const Z=Fi();if(!Z)return[];const ye=ee.aA(lo,Y,q);switch(Z.getItem(ye)){case Is.NONE:return[ee.L];case Is.LOCAL:return[ee.i,ee.a];case Is.SESSION:return[ee.a];default:return[]}}(Y,q);if(typeof self<"u"&&!Z.includes(ee.i)&&Z.push(ee.i),typeof window<"u")for(const ye of[ee.b,ee.a])Z.includes(ye)||Z.push(ye);return Z.includes(ee.L)||Z.push(ee.L),Z}class an{constructor(){this.providerId="phone",this._delegate=new ee.P(Kr(ue.Z.auth()))}static credential(q,Z){return ee.P.credential(q,Z)}verifyPhoneNumber(q,Z){return this._delegate.verifyPhoneNumber(q,Z)}unwrap(){return this._delegate}}an.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,an.PROVIDER_ID=ee.P.PROVIDER_ID;const Bn=ee.ax;class be{constructor(q,Z,ye=ue.Z.app()){var et;Bn(null===(et=ye.options)||void 0===et?void 0:et.apiKey,"invalid-api-key",{appName:ye.name}),this._delegate=new ee.R(q,Z,ye.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J(Y){Y.INTERNAL.registerComponent(new it.wA("auth-compat",q=>{const Z=q.getProvider("app-compat").getImmediate(),ye=q.getProvider("auth");return new xt(Z,ye)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.M,FacebookAuthProvider:ee.N,GithubAuthProvider:ee.T,GoogleAuthProvider:ee.Q,OAuthProvider:ee.U,SAMLAuthProvider:ee.V,PhoneAuthProvider:an,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:be,TwitterAuthProvider:ee.W,Auth:xt,AuthCredential:ee.H,Error:qe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.2.24")}(ue.Z)},9751:(Wi,kt,ne)=>{ne.d(kt,{y:()=>ut});var v=ne(930),ue=ne(727),ee=ne(8822),qe=ne(9635),ht=ne(2416),pt=ne(576),it=ne(2806);let ut=(()=>{class Pe{constructor(wt){wt&&(this._subscribe=wt)}lift(wt){const St=new Pe;return St.source=this,St.operator=wt,St}subscribe(wt,St,ci){const gt=function we(Pe){return Pe&&Pe instanceof v.Lv||function Ce(Pe){return Pe&&(0,pt.m)(Pe.next)&&(0,pt.m)(Pe.error)&&(0,pt.m)(Pe.complete)}(Pe)&&(0,ue.Nn)(Pe)}(wt)?wt:new v.Hp(wt,St,ci);return(0,it.x)(()=>{const{operator:nt,source:xi}=this;gt.add(nt?nt.call(gt,xi):xi?this._subscribe(gt):this._trySubscribe(gt))}),gt}_trySubscribe(wt){try{return this._subscribe(wt)}catch(St){wt.error(St)}}forEach(wt,St){return new(St=dt(St))((ci,gt)=>{const nt=new v.Hp({next:xi=>{try{wt(xi)}catch(hi){gt(hi),nt.unsubscribe()}},error:gt,complete:ci});this.subscribe(nt)})}_subscribe(wt){var St;return null===(St=this.source)||void 0===St?void 0:St.subscribe(wt)}[ee.L](){return this}pipe(...wt){return(0,qe.U)(wt)(this)}toPromise(wt){return new(wt=dt(wt))((St,ci)=>{let gt;this.subscribe(nt=>gt=nt,nt=>ci(nt),()=>St(gt))})}}return Pe.create=Lt=>new Pe(Lt),Pe})();function dt(Pe){var Lt;return null!==(Lt=Pe??ht.v.Promise)&&void 0!==Lt?Lt:Promise}},7579:(Wi,kt,ne)=>{ne.d(kt,{x:()=>it});var v=ne(9751),ue=ne(727);const qe=(0,ne(3888).d)(dt=>function(){dt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=ne(8737),pt=ne(2806);let it=(()=>{class dt extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(we){const Pe=new ut(this,this);return Pe.operator=we,Pe}_throwIfClosed(){if(this.closed)throw new qe}next(we){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(we)}})}error(we){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=we;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(we)}})}complete(){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:we}=this;for(;we.length;)we.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var we;return(null===(we=this.observers)||void 0===we?void 0:we.length)>0}_trySubscribe(we){return this._throwIfClosed(),super._trySubscribe(we)}_subscribe(we){return this._throwIfClosed(),this._checkFinalizedStatuses(we),this._innerSubscribe(we)}_innerSubscribe(we){const{hasError:Pe,isStopped:Lt,observers:wt}=this;return Pe||Lt?ue.Lc:(this.currentObservers=null,wt.push(we),new ue.w0(()=>{this.currentObservers=null,(0,ht.P)(wt,we)}))}_checkFinalizedStatuses(we){const{hasError:Pe,thrownError:Lt,isStopped:wt}=this;Pe?we.error(Lt):wt&&we.complete()}asObservable(){const we=new v.y;return we.source=this,we}}return dt.create=(Ce,we)=>new ut(Ce,we),dt})();class ut extends it{constructor(Ce,we){super(),this.destination=Ce,this.source=we}next(Ce){var we,Pe;null===(Pe=null===(we=this.destination)||void 0===we?void 0:we.next)||void 0===Pe||Pe.call(we,Ce)}error(Ce){var we,Pe;null===(Pe=null===(we=this.destination)||void 0===we?void 0:we.error)||void 0===Pe||Pe.call(we,Ce)}complete(){var Ce,we;null===(we=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.complete)||void 0===we||we.call(Ce)}_subscribe(Ce){var we,Pe;return null!==(Pe=null===(we=this.source)||void 0===we?void 0:we.subscribe(Ce))&&void 0!==Pe?Pe:ue.Lc}}},930:(Wi,kt,ne)=>{ne.d(kt,{Hp:()=>ci,Lv:()=>Pe});var v=ne(576),ue=ne(727),ee=ne(2416),qe=ne(7849),ht=ne(5032);const pt=dt("C",void 0,void 0);function dt(Ot,Mt,yt){return{kind:Ot,value:Mt,error:yt}}var Ce=ne(3410),we=ne(2806);class Pe extends ue.w0{constructor(Mt){super(),this.isStopped=!1,Mt?(this.destination=Mt,(0,ue.Nn)(Mt)&&Mt.add(this)):this.destination=hi}static create(Mt,yt,ii){return new ci(Mt,yt,ii)}next(Mt){this.isStopped?xi(function ut(Ot){return dt("N",Ot,void 0)}(Mt),this):this._next(Mt)}error(Mt){this.isStopped?xi(function it(Ot){return dt("E",void 0,Ot)}(Mt),this):(this.isStopped=!0,this._error(Mt))}complete(){this.isStopped?xi(pt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Mt){this.destination.next(Mt)}_error(Mt){try{this.destination.error(Mt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Lt=Function.prototype.bind;function wt(Ot,Mt){return Lt.call(Ot,Mt)}class St{constructor(Mt){this.partialObserver=Mt}next(Mt){const{partialObserver:yt}=this;if(yt.next)try{yt.next(Mt)}catch(ii){gt(ii)}}error(Mt){const{partialObserver:yt}=this;if(yt.error)try{yt.error(Mt)}catch(ii){gt(ii)}else gt(Mt)}complete(){const{partialObserver:Mt}=this;if(Mt.complete)try{Mt.complete()}catch(yt){gt(yt)}}}class ci extends Pe{constructor(Mt,yt,ii){let je;if(super(),(0,v.m)(Mt)||!Mt)je={next:Mt??void 0,error:yt??void 0,complete:ii??void 0};else{let Qe;this&&ee.v.useDeprecatedNextContext?(Qe=Object.create(Mt),Qe.unsubscribe=()=>this.unsubscribe(),je={next:Mt.next&&wt(Mt.next,Qe),error:Mt.error&&wt(Mt.error,Qe),complete:Mt.complete&&wt(Mt.complete,Qe)}):je=Mt}this.destination=new St(je)}}function gt(Ot){ee.v.useDeprecatedSynchronousErrorHandling?(0,we.O)(Ot):(0,qe.h)(Ot)}function xi(Ot,Mt){const{onStoppedNotification:yt}=ee.v;yt&&Ce.z.setTimeout(()=>yt(Ot,Mt))}const hi={closed:!0,next:ht.Z,error:function nt(Ot){throw Ot},complete:ht.Z}},727:(Wi,kt,ne)=>{ne.d(kt,{Lc:()=>pt,w0:()=>ht,Nn:()=>it});var v=ne(576);const ee=(0,ne(3888).d)(dt=>function(we){dt(this),this.message=we?`${we.length} errors occurred during unsubscription:\n${we.map((Pe,Lt)=>`${Lt+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=we});var qe=ne(8737);class ht{constructor(Ce){this.initialTeardown=Ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ce;if(!this.closed){this.closed=!0;const{_parentage:we}=this;if(we)if(this._parentage=null,Array.isArray(we))for(const wt of we)wt.remove(this);else we.remove(this);const{initialTeardown:Pe}=this;if((0,v.m)(Pe))try{Pe()}catch(wt){Ce=wt instanceof ee?wt.errors:[wt]}const{_finalizers:Lt}=this;if(Lt){this._finalizers=null;for(const wt of Lt)try{ut(wt)}catch(St){Ce=Ce??[],St instanceof ee?Ce=[...Ce,...St.errors]:Ce.push(St)}}if(Ce)throw new ee(Ce)}}add(Ce){var we;if(Ce&&Ce!==this)if(this.closed)ut(Ce);else{if(Ce instanceof ht){if(Ce.closed||Ce._hasParent(this))return;Ce._addParent(this)}(this._finalizers=null!==(we=this._finalizers)&&void 0!==we?we:[]).push(Ce)}}_hasParent(Ce){const{_parentage:we}=this;return we===Ce||Array.isArray(we)&&we.includes(Ce)}_addParent(Ce){const{_parentage:we}=this;this._parentage=Array.isArray(we)?(we.push(Ce),we):we?[we,Ce]:Ce}_removeParent(Ce){const{_parentage:we}=this;we===Ce?this._parentage=null:Array.isArray(we)&&(0,qe.P)(we,Ce)}remove(Ce){const{_finalizers:we}=this;we&&(0,qe.P)(we,Ce),Ce instanceof ht&&Ce._removeParent(this)}}ht.EMPTY=(()=>{const dt=new ht;return dt.closed=!0,dt})();const pt=ht.EMPTY;function it(dt){return dt instanceof ht||dt&&"closed"in dt&&(0,v.m)(dt.remove)&&(0,v.m)(dt.add)&&(0,v.m)(dt.unsubscribe)}function ut(dt){(0,v.m)(dt)?dt():dt.unsubscribe()}},2416:(Wi,kt,ne)=>{ne.d(kt,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Wi,kt,ne)=>{ne.d(kt,{E:()=>ue});const ue=new(ne(9751).y)(ht=>ht.complete())},8996:(Wi,kt,ne)=>{ne.d(kt,{D:()=>Mt});var v=ne(8421),ue=ne(5363),ee=ne(9468),pt=ne(9751),ut=ne(2202),dt=ne(576),Ce=ne(9672);function Pe(yt,ii){if(!yt)throw new Error("Iterable cannot be null");return new pt.y(je=>{(0,Ce.f)(je,ii,()=>{const Qe=yt[Symbol.asyncIterator]();(0,Ce.f)(je,ii,()=>{Qe.next().then(mt=>{mt.done?je.complete():je.next(mt.value)})},0,!0)})})}var Lt=ne(3670),wt=ne(8239),St=ne(1144),ci=ne(6495),gt=ne(2206),nt=ne(4532),xi=ne(3260);function Mt(yt,ii){return ii?function Ot(yt,ii){if(null!=yt){if((0,Lt.c)(yt))return function qe(yt,ii){return(0,v.Xf)(yt).pipe((0,ee.R)(ii),(0,ue.Q)(ii))}(yt,ii);if((0,St.z)(yt))return function it(yt,ii){return new pt.y(je=>{let Qe=0;return ii.schedule(function(){Qe===yt.length?je.complete():(je.next(yt[Qe++]),je.closed||this.schedule())})})}(yt,ii);if((0,wt.t)(yt))return function ht(yt,ii){return(0,v.Xf)(yt).pipe((0,ee.R)(ii),(0,ue.Q)(ii))}(yt,ii);if((0,gt.D)(yt))return Pe(yt,ii);if((0,ci.T)(yt))return function we(yt,ii){return new pt.y(je=>{let Qe;return(0,Ce.f)(je,ii,()=>{Qe=yt[ut.h](),(0,Ce.f)(je,ii,()=>{let mt,Fe;try{({value:mt,done:Fe}=Qe.next())}catch(Be){return void je.error(Be)}Fe?je.complete():je.next(mt)},0,!0)}),()=>(0,dt.m)(Qe?.return)&&Qe.return()})}(yt,ii);if((0,xi.L)(yt))return function hi(yt,ii){return Pe((0,xi.Q)(yt),ii)}(yt,ii)}throw(0,nt.z)(yt)}(yt,ii):(0,v.Xf)(yt)}},8421:(Wi,kt,ne)=>{ne.d(kt,{Xf:()=>Lt});var v=ne(655),ue=ne(1144),ee=ne(8239),qe=ne(9751),ht=ne(3670),pt=ne(2206),it=ne(4532),ut=ne(6495),dt=ne(3260),Ce=ne(576),we=ne(7849),Pe=ne(8822);function Lt(Ot){if(Ot instanceof qe.y)return Ot;if(null!=Ot){if((0,ht.c)(Ot))return function wt(Ot){return new qe.y(Mt=>{const yt=Ot[Pe.L]();if((0,Ce.m)(yt.subscribe))return yt.subscribe(Mt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ot);if((0,ue.z)(Ot))return function St(Ot){return new qe.y(Mt=>{for(let yt=0;yt<Ot.length&&!Mt.closed;yt++)Mt.next(Ot[yt]);Mt.complete()})}(Ot);if((0,ee.t)(Ot))return function ci(Ot){return new qe.y(Mt=>{Ot.then(yt=>{Mt.closed||(Mt.next(yt),Mt.complete())},yt=>Mt.error(yt)).then(null,we.h)})}(Ot);if((0,pt.D)(Ot))return nt(Ot);if((0,ut.T)(Ot))return function gt(Ot){return new qe.y(Mt=>{for(const yt of Ot)if(Mt.next(yt),Mt.closed)return;Mt.complete()})}(Ot);if((0,dt.L)(Ot))return function xi(Ot){return nt((0,dt.Q)(Ot))}(Ot)}throw(0,it.z)(Ot)}function nt(Ot){return new qe.y(Mt=>{(function hi(Ot,Mt){var yt,ii,je,Qe;return(0,v.mG)(this,void 0,void 0,function*(){try{for(yt=(0,v.KL)(Ot);!(ii=yield yt.next()).done;)if(Mt.next(ii.value),Mt.closed)return}catch(mt){je={error:mt}}finally{try{ii&&!ii.done&&(Qe=yt.return)&&(yield Qe.call(yt))}finally{if(je)throw je.error}}Mt.complete()})})(Ot,Mt).catch(yt=>Mt.error(yt))})}},6451:(Wi,kt,ne)=>{ne.d(kt,{T:()=>pt});var v=ne(8189),ue=ne(8421),ee=ne(515),qe=ne(7669),ht=ne(8996);function pt(...it){const ut=(0,qe.yG)(it),dt=(0,qe._6)(it,1/0),Ce=it;return Ce.length?1===Ce.length?(0,ue.Xf)(Ce[0]):(0,v.J)(dt)((0,ht.D)(Ce,ut)):ee.E}},5403:(Wi,kt,ne)=>{ne.d(kt,{x:()=>ue});var v=ne(930);function ue(qe,ht,pt,it,ut){return new ee(qe,ht,pt,it,ut)}class ee extends v.Lv{constructor(ht,pt,it,ut,dt,Ce){super(ht),this.onFinalize=dt,this.shouldUnsubscribe=Ce,this._next=pt?function(we){try{pt(we)}catch(Pe){ht.error(Pe)}}:super._next,this._error=ut?function(we){try{ut(we)}catch(Pe){ht.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=it?function(){try{it()}catch(we){ht.error(we)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ht;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pt}=this;super.unsubscribe(),!pt&&(null===(ht=this.onFinalize)||void 0===ht||ht.call(this))}}}},4004:(Wi,kt,ne)=>{ne.d(kt,{U:()=>ee});var v=ne(4482),ue=ne(5403);function ee(qe,ht){return(0,v.e)((pt,it)=>{let ut=0;pt.subscribe((0,ue.x)(it,dt=>{it.next(qe.call(ht,dt,ut++))}))})}},8189:(Wi,kt,ne)=>{ne.d(kt,{J:()=>ee});var v=ne(5577),ue=ne(4671);function ee(qe=1/0){return(0,v.z)(ue.y,qe)}},5577:(Wi,kt,ne)=>{ne.d(kt,{z:()=>ut});var v=ne(4004),ue=ne(8421),ee=ne(4482),qe=ne(9672),ht=ne(5403),it=ne(576);function ut(dt,Ce,we=1/0){return(0,it.m)(Ce)?ut((Pe,Lt)=>(0,v.U)((wt,St)=>Ce(Pe,wt,Lt,St))((0,ue.Xf)(dt(Pe,Lt))),we):("number"==typeof Ce&&(we=Ce),(0,ee.e)((Pe,Lt)=>function pt(dt,Ce,we,Pe,Lt,wt,St,ci){const gt=[];let nt=0,xi=0,hi=!1;const Ot=()=>{hi&&!gt.length&&!nt&&Ce.complete()},Mt=ii=>nt<Pe?yt(ii):gt.push(ii),yt=ii=>{wt&&Ce.next(ii),nt++;let je=!1;(0,ue.Xf)(we(ii,xi++)).subscribe((0,ht.x)(Ce,Qe=>{Lt?.(Qe),wt?Mt(Qe):Ce.next(Qe)},()=>{je=!0},void 0,()=>{if(je)try{for(nt--;gt.length&&nt<Pe;){const Qe=gt.shift();St?(0,qe.f)(Ce,St,()=>yt(Qe)):yt(Qe)}Ot()}catch(Qe){Ce.error(Qe)}}))};return dt.subscribe((0,ht.x)(Ce,Mt,()=>{hi=!0,Ot()})),()=>{ci?.()}}(Pe,Lt,dt,we)))}},5363:(Wi,kt,ne)=>{ne.d(kt,{Q:()=>qe});var v=ne(9672),ue=ne(4482),ee=ne(5403);function qe(ht,pt=0){return(0,ue.e)((it,ut)=>{it.subscribe((0,ee.x)(ut,dt=>(0,v.f)(ut,ht,()=>ut.next(dt),pt),()=>(0,v.f)(ut,ht,()=>ut.complete(),pt),dt=>(0,v.f)(ut,ht,()=>ut.error(dt),pt)))})}},3099:(Wi,kt,ne)=>{ne.d(kt,{B:()=>ht});var v=ne(8421),ue=ne(7579),ee=ne(930),qe=ne(4482);function ht(it={}){const{connector:ut=(()=>new ue.x),resetOnError:dt=!0,resetOnComplete:Ce=!0,resetOnRefCountZero:we=!0}=it;return Pe=>{let Lt,wt,St,ci=0,gt=!1,nt=!1;const xi=()=>{wt?.unsubscribe(),wt=void 0},hi=()=>{xi(),Lt=St=void 0,gt=nt=!1},Ot=()=>{const Mt=Lt;hi(),Mt?.unsubscribe()};return(0,qe.e)((Mt,yt)=>{ci++,!nt&&!gt&&xi();const ii=St=St??ut();yt.add(()=>{ci--,0===ci&&!nt&&!gt&&(wt=pt(Ot,we))}),ii.subscribe(yt),!Lt&&ci>0&&(Lt=new ee.Hp({next:je=>ii.next(je),error:je=>{nt=!0,xi(),wt=pt(hi,dt,je),ii.error(je)},complete:()=>{gt=!0,xi(),wt=pt(hi,Ce),ii.complete()}}),(0,v.Xf)(Mt).subscribe(Lt))})(Pe)}}function pt(it,ut,...dt){if(!0===ut)return void it();if(!1===ut)return;const Ce=new ee.Hp({next:()=>{Ce.unsubscribe(),it()}});return ut(...dt).subscribe(Ce)}},9468:(Wi,kt,ne)=>{ne.d(kt,{R:()=>ue});var v=ne(4482);function ue(ee,qe=0){return(0,v.e)((ht,pt)=>{pt.add(ee.schedule(()=>ht.subscribe(pt),qe))})}},8505:(Wi,kt,ne)=>{ne.d(kt,{b:()=>ht});var v=ne(576),ue=ne(4482),ee=ne(5403),qe=ne(4671);function ht(pt,it,ut){const dt=(0,v.m)(pt)||it||ut?{next:pt,error:it,complete:ut}:pt;return dt?(0,ue.e)((Ce,we)=>{var Pe;null===(Pe=dt.subscribe)||void 0===Pe||Pe.call(dt);let Lt=!0;Ce.subscribe((0,ee.x)(we,wt=>{var St;null===(St=dt.next)||void 0===St||St.call(dt,wt),we.next(wt)},()=>{var wt;Lt=!1,null===(wt=dt.complete)||void 0===wt||wt.call(dt),we.complete()},wt=>{var St;Lt=!1,null===(St=dt.error)||void 0===St||St.call(dt,wt),we.error(wt)},()=>{var wt,St;Lt&&(null===(wt=dt.unsubscribe)||void 0===wt||wt.call(dt)),null===(St=dt.finalize)||void 0===St||St.call(dt)}))}):qe.y}},4408:(Wi,kt,ne)=>{ne.d(kt,{o:()=>ht});var v=ne(727);class ue extends v.w0{constructor(it,ut){super()}schedule(it,ut=0){return this}}const ee={setInterval(pt,it,...ut){const{delegate:dt}=ee;return dt?.setInterval?dt.setInterval(pt,it,...ut):setInterval(pt,it,...ut)},clearInterval(pt){const{delegate:it}=ee;return(it?.clearInterval||clearInterval)(pt)},delegate:void 0};var qe=ne(8737);class ht extends ue{constructor(it,ut){super(it,ut),this.scheduler=it,this.work=ut,this.pending=!1}schedule(it,ut=0){if(this.closed)return this;this.state=it;const dt=this.id,Ce=this.scheduler;return null!=dt&&(this.id=this.recycleAsyncId(Ce,dt,ut)),this.pending=!0,this.delay=ut,this.id=this.id||this.requestAsyncId(Ce,this.id,ut),this}requestAsyncId(it,ut,dt=0){return ee.setInterval(it.flush.bind(it,this),dt)}recycleAsyncId(it,ut,dt=0){if(null!=dt&&this.delay===dt&&!1===this.pending)return ut;ee.clearInterval(ut)}execute(it,ut){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const dt=this._execute(it,ut);if(dt)return dt;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(it,ut){let Ce,dt=!1;try{this.work(it)}catch(we){dt=!0,Ce=we||new Error("Scheduled action threw falsy error")}if(dt)return this.unsubscribe(),Ce}unsubscribe(){if(!this.closed){const{id:it,scheduler:ut}=this,{actions:dt}=ut;this.work=this.state=this.scheduler=null,this.pending=!1,(0,qe.P)(dt,this),null!=it&&(this.id=this.recycleAsyncId(ut,it,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wi,kt,ne)=>{ne.d(kt,{v:()=>ee});var v=ne(6063);class ue{constructor(ht,pt=ue.now){this.schedulerActionCtor=ht,this.now=pt}schedule(ht,pt=0,it){return new this.schedulerActionCtor(this,ht).schedule(it,pt)}}ue.now=v.l.now;class ee extends ue{constructor(ht,pt=ue.now){super(ht,pt),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ht){const{actions:pt}=this;if(this._active)return void pt.push(ht);let it;this._active=!0;do{if(it=ht.execute(ht.state,ht.delay))break}while(ht=pt.shift());if(this._active=!1,it){for(;ht=pt.shift();)ht.unsubscribe();throw it}}}},4986:(Wi,kt,ne)=>{ne.d(kt,{z:()=>ee});var v=ne(4408);const ee=new(ne(7565).v)(v.o)},6063:(Wi,kt,ne)=>{ne.d(kt,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(Wi,kt,ne)=>{ne.d(kt,{z:()=>v});const v={setTimeout(ue,ee,...qe){const{delegate:ht}=v;return ht?.setTimeout?ht.setTimeout(ue,ee,...qe):setTimeout(ue,ee,...qe)},clearTimeout(ue){const{delegate:ee}=v;return(ee?.clearTimeout||clearTimeout)(ue)},delegate:void 0}},2202:(Wi,kt,ne)=>{ne.d(kt,{h:()=>ue});const ue=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wi,kt,ne)=>{ne.d(kt,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Wi,kt,ne)=>{ne.d(kt,{_6:()=>pt,jO:()=>qe,yG:()=>ht});var v=ne(576);function ee(it){return it[it.length-1]}function qe(it){return(0,v.m)(ee(it))?it.pop():void 0}function ht(it){return function ue(it){return it&&(0,v.m)(it.schedule)}(ee(it))?it.pop():void 0}function pt(it,ut){return"number"==typeof ee(it)?it.pop():ut}},8737:(Wi,kt,ne)=>{function v(ue,ee){if(ue){const qe=ue.indexOf(ee);0<=qe&&ue.splice(qe,1)}}ne.d(kt,{P:()=>v})},3888:(Wi,kt,ne)=>{function v(ue){const qe=ue(ht=>{Error.call(ht),ht.stack=(new Error).stack});return qe.prototype=Object.create(Error.prototype),qe.prototype.constructor=qe,qe}ne.d(kt,{d:()=>v})},2806:(Wi,kt,ne)=>{ne.d(kt,{O:()=>qe,x:()=>ee});var v=ne(2416);let ue=null;function ee(ht){if(v.v.useDeprecatedSynchronousErrorHandling){const pt=!ue;if(pt&&(ue={errorThrown:!1,error:null}),ht(),pt){const{errorThrown:it,error:ut}=ue;if(ue=null,it)throw ut}}else ht()}function qe(ht){v.v.useDeprecatedSynchronousErrorHandling&&ue&&(ue.errorThrown=!0,ue.error=ht)}},9672:(Wi,kt,ne)=>{function v(ue,ee,qe,ht=0,pt=!1){const it=ee.schedule(function(){qe(),pt?ue.add(this.schedule(null,ht)):this.unsubscribe()},ht);if(ue.add(it),!pt)return it}ne.d(kt,{f:()=>v})},4671:(Wi,kt,ne)=>{function v(ue){return ue}ne.d(kt,{y:()=>v})},1144:(Wi,kt,ne)=>{ne.d(kt,{z:()=>v});const v=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},2206:(Wi,kt,ne)=>{ne.d(kt,{D:()=>ue});var v=ne(576);function ue(ee){return Symbol.asyncIterator&&(0,v.m)(ee?.[Symbol.asyncIterator])}},576:(Wi,kt,ne)=>{function v(ue){return"function"==typeof ue}ne.d(kt,{m:()=>v})},3670:(Wi,kt,ne)=>{ne.d(kt,{c:()=>ee});var v=ne(8822),ue=ne(576);function ee(qe){return(0,ue.m)(qe[v.L])}},6495:(Wi,kt,ne)=>{ne.d(kt,{T:()=>ee});var v=ne(2202),ue=ne(576);function ee(qe){return(0,ue.m)(qe?.[v.h])}},8239:(Wi,kt,ne)=>{ne.d(kt,{t:()=>ue});var v=ne(576);function ue(ee){return(0,v.m)(ee?.then)}},3260:(Wi,kt,ne)=>{ne.d(kt,{L:()=>qe,Q:()=>ee});var v=ne(655),ue=ne(576);function ee(ht){return(0,v.FC)(this,arguments,function*(){const it=ht.getReader();try{for(;;){const{value:ut,done:dt}=yield(0,v.qq)(it.read());if(dt)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(ut)}}finally{it.releaseLock()}})}function qe(ht){return(0,ue.m)(ht?.getReader)}},4482:(Wi,kt,ne)=>{ne.d(kt,{A:()=>ue,e:()=>ee});var v=ne(576);function ue(qe){return(0,v.m)(qe?.lift)}function ee(qe){return ht=>{if(ue(ht))return ht.lift(function(pt){try{return qe(pt,this)}catch(it){this.error(it)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Wi,kt,ne)=>{function v(){}ne.d(kt,{Z:()=>v})},9635:(Wi,kt,ne)=>{ne.d(kt,{U:()=>ee,z:()=>ue});var v=ne(4671);function ue(...qe){return ee(qe)}function ee(qe){return 0===qe.length?v.y:1===qe.length?qe[0]:function(pt){return qe.reduce((it,ut)=>ut(it),pt)}}},7849:(Wi,kt,ne)=>{ne.d(kt,{h:()=>ee});var v=ne(2416),ue=ne(3410);function ee(qe){ue.z.setTimeout(()=>{const{onUnhandledError:ht}=v.v;if(!ht)throw qe;ht(qe)})}},4532:(Wi,kt,ne)=>{function v(ue){return new TypeError(`You provided ${null!==ue&&"object"==typeof ue?"an invalid object":`'${ue}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}ne.d(kt,{z:()=>v})},655:(Wi,kt,ne)=>{function qe(Fe,Be){var st={};for(var $e in Fe)Object.prototype.hasOwnProperty.call(Fe,$e)&&Be.indexOf($e)<0&&(st[$e]=Fe[$e]);if(null!=Fe&&"function"==typeof Object.getOwnPropertySymbols){var zt=0;for($e=Object.getOwnPropertySymbols(Fe);zt<$e.length;zt++)Be.indexOf($e[zt])<0&&Object.prototype.propertyIsEnumerable.call(Fe,$e[zt])&&(st[$e[zt]]=Fe[$e[zt]])}return st}function ht(Fe,Be,st,$e){var Vi,zt=arguments.length,Ht=zt<3?Be:null===$e?$e=Object.getOwnPropertyDescriptor(Be,st):$e;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)Ht=Reflect.decorate(Fe,Be,st,$e);else for(var Jn=Fe.length-1;Jn>=0;Jn--)(Vi=Fe[Jn])&&(Ht=(zt<3?Vi(Ht):zt>3?Vi(Be,st,Ht):Vi(Be,st))||Ht);return zt>3&&Ht&&Object.defineProperty(Be,st,Ht),Ht}function ut(Fe,Be,st,$e){return new(st||(st=Promise))(function(Ht,Vi){function Jn(Er){try{ti($e.next(Er))}catch(Ds){Vi(Ds)}}function bn(Er){try{ti($e.throw(Er))}catch(Ds){Vi(Ds)}}function ti(Er){Er.done?Ht(Er.value):function zt(Ht){return Ht instanceof st?Ht:new st(function(Vi){Vi(Ht)})}(Er.value).then(Jn,bn)}ti(($e=$e.apply(Fe,Be||[])).next())})}function gt(Fe){return this instanceof gt?(this.v=Fe,this):new gt(Fe)}function nt(Fe,Be,st){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var zt,$e=st.apply(Fe,Be||[]),Ht=[];return zt={},Vi("next"),Vi("throw"),Vi("return"),zt[Symbol.asyncIterator]=function(){return this},zt;function Vi(vr){$e[vr]&&(zt[vr]=function(er){return new Promise(function(_n,rn){Ht.push([vr,er,_n,rn])>1||Jn(vr,er)})})}function Jn(vr,er){try{!function bn(vr){vr.value instanceof gt?Promise.resolve(vr.value.v).then(ti,Er):Ds(Ht[0][2],vr)}($e[vr](er))}catch(_n){Ds(Ht[0][3],_n)}}function ti(vr){Jn("next",vr)}function Er(vr){Jn("throw",vr)}function Ds(vr,er){vr(er),Ht.shift(),Ht.length&&Jn(Ht[0][0],Ht[0][1])}}function hi(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var st,Be=Fe[Symbol.asyncIterator];return Be?Be.call(Fe):(Fe=function Pe(Fe){var Be="function"==typeof Symbol&&Symbol.iterator,st=Be&&Fe[Be],$e=0;if(st)return st.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&$e>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[$e++],done:!Fe}}};throw new TypeError(Be?"Object is not iterable.":"Symbol.iterator is not defined.")}(Fe),st={},$e("next"),$e("throw"),$e("return"),st[Symbol.asyncIterator]=function(){return this},st);function $e(Ht){st[Ht]=Fe[Ht]&&function(Vi){return new Promise(function(Jn,bn){!function zt(Ht,Vi,Jn,bn){Promise.resolve(bn).then(function(ti){Ht({value:ti,done:Jn})},Vi)}(Jn,bn,(Vi=Fe[Ht](Vi)).done,Vi.value)})}}}ne.d(kt,{FC:()=>nt,KL:()=>hi,_T:()=>qe,gn:()=>ht,mG:()=>ut,qq:()=>gt})},4650:(Wi,kt,ne)=>{ne.d(kt,{$8M:()=>py,$Z:()=>TA,AFp:()=>tk,ALo:()=>aa,AaK:()=>ut,CHM:()=>On,CRH:()=>kT,CZH:()=>mw,CqO:()=>o_,D6c:()=>_k,EJc:()=>sk,EpF:()=>r_,F4k:()=>z1,FYo:()=>eA,FiY:()=>vd,G48:()=>MN,Gf:()=>U_,GfV:()=>tA,Gpc:()=>we,JOm:()=>Ec,KtG:()=>Xl,LFG:()=>Do,LSH:()=>lP,Lbi:()=>mN,Lck:()=>q3,MAs:()=>n_,MMx:()=>M_,NdJ:()=>a_,OlP:()=>As,PXZ:()=>Qh,Q6J:()=>uT,QGY:()=>s_,QP$:()=>et,Qsj:()=>e5,R0b:()=>Uu,RDi:()=>sP,Rgc:()=>Jm,SBq:()=>Pm,Sil:()=>GT,Suo:()=>vb,TTD:()=>dc,TgZ:()=>cT,VKq:()=>KF,W1O:()=>LT,X6Q:()=>RN,XFs:()=>fi,Xpm:()=>xt,Xts:()=>jI,Y36:()=>zm,YKP:()=>k_,YNc:()=>hT,Yjl:()=>Y,Yz7:()=>er,Z0I:()=>La,ZZ4:()=>rx,_Bn:()=>__,_UZ:()=>pT,_Vd:()=>ky,_c5:()=>Ik,_uU:()=>sF,aQg:()=>Db,c2e:()=>rk,cJS:()=>rn,cg1:()=>ri,dDg:()=>nf,dqk:()=>Oi,eFA:()=>kN,ekj:()=>ot,eoX:()=>DN,f3M:()=>Dm,g9A:()=>nk,h0i:()=>db,hGG:()=>Ak,iGM:()=>_T,ifc:()=>Li,ip1:()=>WT,jDz:()=>DT,kL8:()=>z,lG2:()=>J,lcZ:()=>XF,lqb:()=>Hp,lri:()=>ko,n5z:()=>pd,oAB:()=>Bn,oxw:()=>q1,q4F:()=>wP,qLn:()=>My,qOj:()=>YA,qZA:()=>dT,rWj:()=>Nd,sBO:()=>za,sIi:()=>U0,s_b:()=>B_,soG:()=>yw,tb:()=>qT,tp0:()=>yd,uIk:()=>e_,vHH:()=>St,vpe:()=>Va,wAp:()=>bi,xp6:()=>VE,z2F:()=>Sb,zSh:()=>C0,zs3:()=>Vm});var v=ne(7579),ue=ne(727),ee=ne(9751),qe=ne(6451),ht=ne(3099);function pt(c){for(let p in c)if(c[p]===pt)return p;throw Error("Could not find renamed property on target object.")}function it(c,p){for(const g in p)p.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=p[g])}function ut(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(ut).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const p=c.toString();if(null==p)return""+p;const g=p.indexOf("\n");return-1===g?p:p.substring(0,g)}function dt(c,p){return null==c||""===c?null===p?"":p:null==p||""===p?c:c+" "+p}const Ce=pt({__forward_ref__:pt});function we(c){return c.__forward_ref__=we,c.toString=function(){return ut(this())},c}function Pe(c){return Lt(c)?c():c}function Lt(c){return"function"==typeof c&&c.hasOwnProperty(Ce)&&c.__forward_ref__===we}class St extends Error{constructor(p,g){super(function ci(c,p){return`NG0${Math.abs(c)}${p?": "+p.trim():""}`}(p,g)),this.code=p}}function gt(c){return"string"==typeof c?c:null==c?"":String(c)}function Mt(c,p){throw new St(-201,!1)}function bn(c,p){null==c&&function ti(c,p,g,b){throw new Error(`ASSERTION ERROR: ${c}`+(null==b?"":` [Expected=> ${g} ${b} ${p} <=Actual]`))}(p,c,null,"!=")}function er(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function rn(c){return{providers:c.providers||[],imports:c.imports||[]}}function Xr(c){return $a(c,Us)||$a(c,No)}function La(c){return null!==Xr(c)}function $a(c,p){return c.hasOwnProperty(p)?c[p]:null}function Sa(c){return c&&(c.hasOwnProperty(Ms)||c.hasOwnProperty(Oa))?c[Ms]:null}const Us=pt({\u0275prov:pt}),Ms=pt({\u0275inj:pt}),No=pt({ngInjectableDef:pt}),Oa=pt({ngInjectorDef:pt});var fi=(()=>((fi=fi||{})[fi.Default=0]="Default",fi[fi.Host=1]="Host",fi[fi.Self=2]="Self",fi[fi.SkipSelf=4]="SkipSelf",fi[fi.Optional=8]="Optional",fi))();let Nr;function _r(c){const p=Nr;return Nr=c,p}function lo(c,p,g){const b=Xr(c);return b&&"root"==b.providedIn?void 0===b.value?b.value=b.factory():b.value:g&fi.Optional?null:void 0!==p?p:void Mt(ut(c))}function Ur(c){return{toString:c}.toString()}var Qr=(()=>((Qr=Qr||{})[Qr.OnPush=0]="OnPush",Qr[Qr.Default=1]="Default",Qr))(),Li=(()=>{return(c=Li||(Li={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",Li;var c})();const Oi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ho={},hn=[],uo=pt({\u0275cmp:pt}),vn=pt({\u0275dir:pt}),xo=pt({\u0275pipe:pt}),Fn=pt({\u0275mod:pt}),Js=pt({\u0275fac:pt}),ps=pt({__NG_ELEMENT_ID__:pt});let di=0;function xt(c){return Ur(()=>{const g=!0===c.standalone,b={},w={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:b,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Qr.OnPush,directiveDefs:null,pipeDefs:null,standalone:g,dependencies:g&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||hn,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||Li.Emulated,id:"c"+di++,styles:c.styles||hn,_:null,setInput:null,schemas:c.schemas||null,tView:null},x=c.dependencies,_=c.features;return w.inputs=fe(c.inputs,b),w.outputs=fe(c.outputs),_&&_.forEach(M=>M(w)),w.directiveDefs=x?()=>("function"==typeof x?x():x).map(Zi).filter(an):null,w.pipeDefs=x?()=>("function"==typeof x?x():x).map(ye).filter(an):null,w})}function Zi(c){return q(c)||Z(c)}function an(c){return null!==c}function Bn(c){return Ur(()=>({type:c.type,bootstrap:c.bootstrap||hn,declarations:c.declarations||hn,imports:c.imports||hn,exports:c.exports||hn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function fe(c,p){if(null==c)return ho;const g={};for(const b in c)if(c.hasOwnProperty(b)){let w=c[b],x=w;Array.isArray(w)&&(x=w[1],w=w[0]),g[w]=b,p&&(p[w]=x)}return g}const J=xt;function Y(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function q(c){return c[uo]||null}function Z(c){return c[vn]||null}function ye(c){return c[xo]||null}function et(c){const p=q(c)||Z(c)||ye(c);return null!==p&&p.standalone}function Pt(c,p){const g=c[Fn]||null;if(!g&&!0===p)throw new Error(`Type ${ut(c)} does not have '\u0275mod' property.`);return g}function ta(c){return Array.isArray(c)&&"object"==typeof c[1]}function Fa(c){return Array.isArray(c)&&!0===c[1]}function Eu(c){return 0!=(8&c.flags)}function rd(c){return 2==(2&c.flags)}function sd(c){return 1==(1&c.flags)}function Il(c){return null!==c.template}function qf(c){return 0!=(256&c[2])}function Ta(c,p){return c.hasOwnProperty(Js)?c[Js]:null}class Cp{constructor(p,g,b){this.previousValue=p,this.currentValue=g,this.firstChange=b}isFirstChange(){return this.firstChange}}function dc(){return Zv}function Zv(c){return c.type.prototype.ngOnChanges&&(c.setInput=sm),Zf}function Zf(){const c=xu(this),p=c?.current;if(p){const g=c.previous;if(g===ho)c.previous=p;else for(let b in p)g[b]=p[b];c.current=null,this.ngOnChanges(p)}}function sm(c,p,g,b){const w=xu(c)||function Vh(c,p){return c[Xv]=p}(c,{previous:ho,current:null}),x=w.current||(w.current={}),_=w.previous,M=this.declaredInputs[g],F=_[M];x[M]=new Cp(F&&F.currentValue,p,_===ho),c[b]=p}dc.ngInherit=!0;const Xv="__ngSimpleChanges__";function xu(c){return c[Xv]||null}function Ws(c){for(;Array.isArray(c);)c=c[0];return c}function Ya(c,p){return Ws(p[c.index])}function _l(c,p){return c.data[p]}function Du(c,p){return c[p]}function ar(c,p){const g=p[c];return ta(g)?g:g[0]}function fc(c){return 64==(64&c[2])}function Sh(c,p){return null==p?null:c[p]}function wp(c){c[18]=0}function Qf(c,p){c[5]+=p;let g=c,b=c[3];for(;null!==b&&(1===p&&1===g[5]||-1===p&&0===g[5]);)b[5]+=p,g=b,b=b[3]}const X={lFrame:KC(null),bindingsEnabled:!0};function qi(){return X.bindingsEnabled}function It(){return X.lFrame.lView}function Xi(){return X.lFrame.tView}function On(c){return X.lFrame.contextLView=c,c[8]}function Xl(c){return X.lFrame.contextLView=null,c}function to(){let c=gc();for(;null!==c&&64===c.type;)c=c.parent;return c}function gc(){return X.lFrame.currentTNode}function ia(c,p){const g=X.lFrame;g.currentTNode=c,g.isParent=p}function am(){return X.lFrame.isParent}function na(){const c=X.lFrame;let p=c.bindingRootIndex;return-1===p&&(p=c.bindingRootIndex=c.tView.bindingStartIndex),p}function hm(){return X.lFrame.bindingIndex++}function oE(c,p){const g=X.lFrame;g.bindingIndex=g.bindingRootIndex=c,ty(p)}function ty(c){X.lFrame.currentDirectiveIndex=c}function WC(){return X.lFrame.currentQueryIndex}function qC(c){X.lFrame.currentQueryIndex=c}function GC(c){const p=c[1];return 2===p.type?p.declTNode:1===p.type?c[6]:null}function gI(c,p,g){if(g&fi.SkipSelf){let w=p,x=c;for(;!(w=w.parent,null!==w||g&fi.Host||(w=GC(x),null===w||(x=x[15],10&w.type))););if(null===w)return!1;p=w,c=x}const b=X.lFrame=mI();return b.currentTNode=p,b.lView=c,!0}function iy(c){const p=mI(),g=c[1];X.lFrame=p,p.currentTNode=g.firstChild,p.lView=c,p.tView=g,p.contextLView=c,p.bindingIndex=g.bindingStartIndex,p.inI18n=!1}function mI(){const c=X.lFrame,p=null===c?null:c.child;return null===p?KC(c):p}function KC(c){const p={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=p),p}function vI(){const c=X.lFrame;return X.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const aE=vI;function Jf(){const c=vI();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function io(){return X.lFrame.selectedIndex}function vc(c){X.lFrame.selectedIndex=c}function no(){const c=X.lFrame;return _l(c.tView,c.selectedIndex)}function um(c,p){for(let g=p.directiveStart,b=p.directiveEnd;g<b;g++){const x=c.data[g].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:M,ngAfterViewInit:F,ngAfterViewChecked:V,ngOnDestroy:$}=x;_&&(c.contentHooks||(c.contentHooks=[])).push(-g,_),M&&((c.contentHooks||(c.contentHooks=[])).push(g,M),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(g,M)),F&&(c.viewHooks||(c.viewHooks=[])).push(-g,F),V&&((c.viewHooks||(c.viewHooks=[])).push(g,V),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(g,V)),null!=$&&(c.destroyHooks||(c.destroyHooks=[])).push(g,$)}}function cm(c,p,g){ZC(c,p,3,g)}function xp(c,p,g,b){(3&c[2])===g&&ZC(c,p,g,b)}function YC(c,p){let g=c[2];(3&g)===p&&(g&=2047,g+=1,c[2]=g)}function ZC(c,p,g,b){const x=b??-1,_=p.length-1;let M=0;for(let F=void 0!==b?65535&c[18]:0;F<_;F++)if("number"==typeof p[F+1]){if(M=p[F],null!=b&&M>=b)break}else p[F]<0&&(c[18]+=65536),(M<x||-1==x)&&(lE(c,g,p,F),c[18]=(4294901760&c[18])+F+2),F++}function lE(c,p,g,b){const w=g[b]<0,x=g[b+1],M=c[w?-g[b]:g[b]];if(w){if(c[2]>>11<c[18]>>16&&(3&c[2])===p){c[2]+=2048;try{x.call(M)}finally{}}}else try{x.call(M)}finally{}}class Eh{constructor(p,g,b){this.factory=p,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=b}}function yc(c,p,g){let b=0;for(;b<g.length;){const w=g[b];if("number"==typeof w){if(0!==w)break;b++;const x=g[b++],_=g[b++],M=g[b++];c.setAttribute(p,_,M,x)}else{const x=w,_=g[++b];e0(x)?c.setProperty(p,x,_):c.setAttribute(p,x,_),b++}}return b}function JC(c){return 3===c||4===c||6===c}function e0(c){return 64===c.charCodeAt(0)}function pm(c,p){if(null!==p&&0!==p.length)if(null===c||0===c.length)c=p.slice();else{let g=-1;for(let b=0;b<p.length;b++){const w=p[b];"number"==typeof w?g=w:0===g||uE(c,g,w,null,-1===g||2===g?p[++b]:null)}}return c}function uE(c,p,g,b,w){let x=0,_=c.length;if(-1===p)_=-1;else for(;x<c.length;){const M=c[x++];if("number"==typeof M){if(M===p){_=-1;break}if(M>p){_=x-1;break}}}for(;x<c.length;){const M=c[x];if("number"==typeof M)break;if(M===g){if(null===b)return void(null!==w&&(c[x+1]=w));if(b===c[x+1])return void(c[x+2]=w)}x++,null!==b&&x++,null!==w&&x++}-1!==_&&(c.splice(_,0,p),x=_+1),c.splice(x++,0,g),null!==b&&c.splice(x++,0,b),null!==w&&c.splice(x++,0,w)}function xI(c){return-1!==c}function Dp(c){return 32767&c}function cd(c,p){let g=function DI(c){return c>>16}(c),b=p;for(;g>0;)b=b[15],g--;return b}let t0=!0;function oy(c){const p=t0;return t0=c,p}let cE=0;const Wh={};function Ip(c,p){const g=ay(c,p);if(-1!==g)return g;const b=p[1];b.firstCreatePass&&(c.injectorIndex=p.length,n0(b.data,c),n0(p,null),n0(b.blueprint,null));const w=fm(c,p),x=c.injectorIndex;if(xI(w)){const _=Dp(w),M=cd(w,p),F=M[1].data;for(let V=0;V<8;V++)p[x+V]=M[_+V]|F[_+V]}return p[x+8]=w,x}function n0(c,p){c.push(0,0,0,0,0,0,0,0,p)}function ay(c,p){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===p[c.injectorIndex+8]?-1:c.injectorIndex}function fm(c,p){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let g=0,b=null,w=p;for(;null!==w;){if(b=dy(w),null===b)return-1;if(g++,w=w[15],-1!==b.injectorIndex)return b.injectorIndex|g<<16}return-1}function gm(c,p,g){!function AI(c,p,g){let b;"string"==typeof g?b=g.charCodeAt(0)||0:g.hasOwnProperty(ps)&&(b=g[ps]),null==b&&(b=g[ps]=cE++);const w=255&b;p.data[c+(w>>5)]|=1<<w}(c,p,g)}function ly(c,p,g){if(g&fi.Optional||void 0!==c)return c;Mt()}function tg(c,p,g,b){if(g&fi.Optional&&void 0===b&&(b=null),0==(g&(fi.Self|fi.Host))){const w=c[9],x=_r(void 0);try{return w?w.get(p,b,g&fi.Optional):lo(p,b,g&fi.Optional)}finally{_r(x)}}return ly(b,0,g)}function hy(c,p,g,b=fi.Default,w){if(null!==c){if(1024&p[2]){const _=function kI(c,p,g,b,w){let x=c,_=p;for(;null!==x&&null!==_&&1024&_[2]&&!(256&_[2]);){const M=dE(x,_,g,b|fi.Self,Wh);if(M!==Wh)return M;let F=x.parent;if(!F){const V=_[21];if(V){const $=V.get(g,Wh,b);if($!==Wh)return $}F=dy(_),_=_[15]}x=F}return w}(c,p,g,b,Wh);if(_!==Wh)return _}const x=dE(c,p,g,b,Wh);if(x!==Wh)return x}return tg(p,g,b,w)}function dE(c,p,g,b,w){const x=function _I(c){if("string"==typeof c)return c.charCodeAt(0)||0;const p=c.hasOwnProperty(ps)?c[ps]:void 0;return"number"==typeof p?p>=0?255&p:gE:p}(g);if("function"==typeof x){if(!gI(p,c,b))return b&fi.Host?ly(w,0,b):tg(p,g,b,w);try{const _=x(b);if(null!=_||b&fi.Optional)return _;Mt()}finally{aE()}}else if("number"==typeof x){let _=null,M=ay(c,p),F=-1,V=b&fi.Host?p[16][6]:null;for((-1===M||b&fi.SkipSelf)&&(F=-1===M?fm(c,p):p[M+8],-1!==F&&fE(b,!1)?(_=p[1],M=Dp(F),p=cd(F,p)):M=-1);-1!==M;){const $=p[1];if(uy(x,M,$.data)){const he=pE(M,p,g,_,b,V);if(he!==Wh)return he}F=p[M+8],-1!==F&&fE(b,p[1].data[M+8]===V)&&uy(x,M,p)?(_=$,M=Dp(F),p=cd(F,p)):M=-1}}return w}function pE(c,p,g,b,w,x){const _=p[1],M=_.data[c+8],$=vm(M,_,g,null==b?rd(M)&&t0:b!=_&&0!=(3&M.type),w&fi.Host&&x===M);return null!==$?dd(p,_,$,M):Wh}function vm(c,p,g,b,w){const x=c.providerIndexes,_=p.data,M=1048575&x,F=c.directiveStart,$=x>>20,Te=w?M+$:c.directiveEnd;for(let Ke=b?M:M+$;Ke<Te;Ke++){const Et=_[Ke];if(Ke<F&&g===Et||Ke>=F&&Et.type===g)return Ke}if(w){const Ke=_[F];if(Ke&&Il(Ke)&&Ke.type===g)return F}return null}function dd(c,p,g,b){let w=c[g];const x=p.data;if(function XC(c){return c instanceof Eh}(w)){const _=w;_.resolving&&function xi(c,p){const g=p?`. Dependency path: ${p.join(" > ")} > ${c}`:"";throw new St(-200,`Circular dependency in DI detected for ${c}${g}`)}(function nt(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():gt(c)}(x[g]));const M=oy(_.canSeeViewProviders);_.resolving=!0;const F=_.injectImpl?_r(_.injectImpl):null;gI(c,b,fi.Default);try{w=c[g]=_.factory(void 0,x,c,b),p.firstCreatePass&&g>=b.directiveStart&&function ny(c,p,g){const{ngOnChanges:b,ngOnInit:w,ngDoCheck:x}=p.type.prototype;if(b){const _=Zv(p);(g.preOrderHooks||(g.preOrderHooks=[])).push(c,_),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,_)}w&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-c,w),x&&((g.preOrderHooks||(g.preOrderHooks=[])).push(c,x),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,x))}(g,x[g],p)}finally{null!==F&&_r(F),oy(M),_.resolving=!1,aE()}}return w}function uy(c,p,g){return!!(g[p+(c>>5)]&1<<c)}function fE(c,p){return!(c&fi.Self||c&fi.Host&&p)}class ym{constructor(p,g){this._tNode=p,this._lView=g}get(p,g,b){return hy(this._tNode,this._lView,p,b,g)}}function gE(){return new ym(to(),It())}function pd(c){return Ur(()=>{const p=c.prototype.constructor,g=p[Js]||cy(p),b=Object.prototype;let w=Object.getPrototypeOf(c.prototype).constructor;for(;w&&w!==b;){const x=w[Js]||cy(w);if(x&&x!==g)return x;w=Object.getPrototypeOf(w)}return x=>new x})}function cy(c){return Lt(c)?()=>{const p=cy(Pe(c));return p&&p()}:Ta(c)}function dy(c){const p=c[1],g=p.type;return 2===g?p.declTNode:1===g?c[6]:null}function py(c){return function mm(c,p){if("class"===p)return c.classes;if("style"===p)return c.styles;const g=c.attrs;if(g){const b=g.length;let w=0;for(;w<b;){const x=g[w];if(JC(x))break;if(0===x)w+=2;else if("number"==typeof x)for(w++;w<b&&"string"==typeof g[w];)w++;else{if(x===p)return g[w+1];w+=2}}}return null}(to(),c)}const bm="__parameters__";function Cm(c,p,g){return Ur(()=>{const b=function mE(c){return function(...g){if(c){const b=c(...g);for(const w in b)this[w]=b[w]}}}(p);function w(...x){if(this instanceof w)return b.apply(this,x),this;const _=new w(...x);return M.annotation=_,M;function M(F,V,$){const he=F.hasOwnProperty(bm)?F[bm]:Object.defineProperty(F,bm,{value:[]})[bm];for(;he.length<=$;)he.push(null);return(he[$]=he[$]||[]).push(_),F}}return g&&(w.prototype=Object.create(g.prototype)),w.prototype.ngMetadataName=c,w.annotationCls=w,w})}class As{constructor(p,g){this._desc=p,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=er({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ul(c,p){void 0===p&&(p=c);for(let g=0;g<c.length;g++){let b=c[g];Array.isArray(b)?(p===c&&(p=c.slice(0,g)),ul(b,p)):p!==c&&p.push(b)}return p}function bc(c,p){c.forEach(g=>Array.isArray(g)?bc(g,p):p(g))}function Sm(c,p,g){p>=c.length?c.push(g):c.splice(p,0,g)}function _p(c,p){return p>=c.length-1?c.pop():c.splice(p,1)[0]}function kl(c,p,g){let b=Cc(c,p);return b>=0?c[1|b]=g:(b=~b,function en(c,p,g,b){let w=c.length;if(w==p)c.push(g,b);else if(1===w)c.push(b,c[0]),c[0]=g;else{for(w--,c.push(c[w-1],c[w]);w>p;)c[w]=c[w-2],w--;c[p]=g,c[p+1]=b}}(c,b,p,g)),b}function o0(c,p){const g=Cc(c,p);if(g>=0)return c[1|g]}function Cc(c,p){return function Ho(c,p,g){let b=0,w=c.length>>g;for(;w!==b;){const x=b+(w-b>>1),_=c[x<<g];if(p===_)return x<<g;_>p?w=x:b=x+1}return~(w<<g)}(c,p,1)}const Vo={},_u="__NG_DI_FLAG__",sg="ngTempTokenPath",my=/\n/gm,vy="__source";let Rp;function gd(c){const p=Rp;return Rp=c,p}function wE(c,p=fi.Default){if(void 0===Rp)throw new St(-203,!1);return null===Rp?lo(c,void 0,p):Rp.get(c,p&fi.Optional?null:void 0,p)}function Do(c,p=fi.Default){return(function Is(){return Nr}()||wE)(Pe(c),p)}function Dm(c,p=fi.Default){return"number"!=typeof p&&(p=0|(p.optional&&8)|(p.host&&1)|(p.self&&2)|(p.skipSelf&&4)),Do(c,p)}function yy(c){const p=[];for(let g=0;g<c.length;g++){const b=Pe(c[g]);if(Array.isArray(b)){if(0===b.length)throw new St(900,!1);let w,x=fi.Default;for(let _=0;_<b.length;_++){const M=b[_],F=SE(M);"number"==typeof F?-1===F?w=M.token:x|=F:w=M}p.push(Do(w,x))}else p.push(Do(b))}return p}function md(c,p){return c[_u]=p,c.prototype[_u]=p,c}function SE(c){return c[_u]}const vd=md(Cm("Optional"),8),yd=md(Cm("SkipSelf"),4);let _E;function sP(c){_E=c}class wy{constructor(p){this.changingThisBreaksApplicationSecurity=p}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wc(c){return c instanceof wy?c.changingThisBreaksApplicationSecurity:c}const D=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Io=(()=>((Io=Io||{})[Io.NONE=0]="NONE",Io[Io.HTML=1]="HTML",Io[Io.STYLE=2]="STYLE",Io[Io.SCRIPT=3]="SCRIPT",Io[Io.URL=4]="URL",Io[Io.RESOURCE_URL=5]="RESOURCE_URL",Io))();function lP(c){const p=function cg(){const c=It();return c&&c[12]}();return p?p.sanitize(Io.URL,c)||"":function Fp(c,p){const g=function Rm(c){return c instanceof wy&&c.getTypeName()||null}(c);if(null!=g&&g!==p){if("ResourceURL"===g&&"URL"===p)return!0;throw new Error(`Required a safe ${p}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===p}(c,"URL")?wc(c):function A(c){return(c=String(c)).match(D)?c:"unsafe:"+c}(gt(c))}const jI=new As("ENVIRONMENT_INITIALIZER"),UI=new As("INJECTOR",-1),uP=new As("INJECTOR_DEF_TYPES");class Gj{get(p,g=Vo){if(g===Vo){const b=new Error(`NullInjectorError: No provider for ${ut(p)}!`);throw b.name="NullInjectorError",b}return g}}function cP(...c){return{\u0275providers:dP(0,c)}}function dP(c,...p){const g=[],b=new Set;let w;return bc(p,x=>{const _=x;qI(_,g,[],b)&&(w||(w=[]),w.push(_))}),void 0!==w&&WI(w,g),g}function WI(c,p){for(let g=0;g<c.length;g++){const{providers:w}=c[g];bc(w,x=>{p.push(x)})}}function qI(c,p,g,b){if(!(c=Pe(c)))return!1;let w=null,x=Sa(c);const _=!x&&q(c);if(x||_){if(_&&!_.standalone)return!1;w=c}else{const F=c.ngModule;if(x=Sa(F),!x)return!1;w=F}const M=b.has(w);if(_){if(M)return!1;if(b.add(w),_.dependencies){const F="function"==typeof _.dependencies?_.dependencies():_.dependencies;for(const V of F)qI(V,p,g,b)}}else{if(!x)return!1;{if(null!=x.imports&&!M){let V;b.add(w);try{bc(x.imports,$=>{qI($,p,g,b)&&(V||(V=[]),V.push($))})}finally{}void 0!==V&&WI(V,p)}if(!M){const V=Ta(w)||(()=>new w);p.push({provide:w,useFactory:V,deps:hn},{provide:uP,useValue:w,multi:!0},{provide:jI,useValue:()=>Do(w),multi:!0})}const F=x.providers;null==F||M||bc(F,$=>{p.push($)})}}return w!==c&&void 0!==c.providers}const GI=pt({provide:String,useValue:pt});function KI(c){return null!==c&&"object"==typeof c&&GI in c}function Ed(c){return"function"==typeof c}const C0=new As("Set Injector scope."),RE={},YI={};let ME;function LE(){return void 0===ME&&(ME=new Gj),ME}class Hp{}class fP extends Hp{constructor(p,g,b,w){super(),this.parent=g,this.source=b,this.scopes=w,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QI(p,_=>this.processProvider(_)),this.records.set(UI,_y(void 0,this)),w.has("environment")&&this.records.set(Hp,_y(void 0,this));const x=this.records.get(C0);null!=x&&"string"==typeof x.value&&this.scopes.add(x.value),this.injectorDefTypes=new Set(this.get(uP.multi,hn,fi.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const p of this._ngOnDestroyHooks)p.ngOnDestroy();for(const p of this._onDestroyHooks)p()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(p){this._onDestroyHooks.push(p)}runInContext(p){this.assertNotDestroyed();const g=gd(this),b=_r(void 0);try{return p()}finally{gd(g),_r(b)}}get(p,g=Vo,b=fi.Default){this.assertNotDestroyed();const w=gd(this),x=_r(void 0);try{if(!(b&fi.SkipSelf)){let M=this.records.get(p);if(void 0===M){const F=function rZ(c){return"function"==typeof c||"object"==typeof c&&c instanceof As}(p)&&Xr(p);M=F&&this.injectableDefInScope(F)?_y(OE(p),RE):null,this.records.set(p,M)}if(null!=M)return this.hydrate(p,M)}return(b&fi.Self?LE():this.parent).get(p,g=b&fi.Optional&&g===Vo?null:g)}catch(_){if("NullInjectorError"===_.name){if((_[sg]=_[sg]||[]).unshift(ut(p)),w)throw _;return function EE(c,p,g,b){const w=c[sg];throw p[vy]&&w.unshift(p[vy]),c.message=function l0(c,p,g,b=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let w=ut(p);if(Array.isArray(p))w=p.map(ut).join(" -> ");else if("object"==typeof p){let x=[];for(let _ in p)if(p.hasOwnProperty(_)){let M=p[_];x.push(_+":"+("string"==typeof M?JSON.stringify(M):ut(M)))}w=`{${x.join(", ")}}`}return`${g}${b?"("+b+")":""}[${w}]: ${c.replace(my,"\n  ")}`}("\n"+c.message,w,g,b),c.ngTokenPath=w,c[sg]=null,c}(_,p,"R3InjectorError",this.source)}throw _}finally{_r(x),gd(w)}}resolveInjectorInitializers(){const p=gd(this),g=_r(void 0);try{const b=this.get(jI.multi,hn,fi.Self);for(const w of b)w()}finally{gd(p),_r(g)}}toString(){const p=[],g=this.records;for(const b of g.keys())p.push(ut(b));return`R3Injector[${p.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new St(205,!1)}processProvider(p){let g=Ed(p=Pe(p))?p:Pe(p&&p.provide);const b=function ZI(c){return KI(c)?_y(void 0,c.useValue):_y(gP(c),RE)}(p);if(Ed(p)||!0!==p.multi)this.records.get(g);else{let w=this.records.get(g);w||(w=_y(void 0,RE,!0),w.factory=()=>yy(w.multi),this.records.set(g,w)),g=p,w.multi.push(p)}this.records.set(g,b)}hydrate(p,g){return g.value===RE&&(g.value=YI,g.value=g.factory()),"object"==typeof g.value&&g.value&&function Zj(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(g.value)&&this._ngOnDestroyHooks.add(g.value),g.value}injectableDefInScope(p){if(!p.providedIn)return!1;const g=Pe(p.providedIn);return"string"==typeof g?"any"===g||this.scopes.has(g):this.injectorDefTypes.has(g)}}function OE(c){const p=Xr(c),g=null!==p?p.factory:Ta(c);if(null!==g)return g;if(c instanceof As)throw new St(204,!1);if(c instanceof Function)return function Yj(c){const p=c.length;if(p>0)throw function qh(c,p){const g=[];for(let b=0;b<c;b++)g.push(p);return g}(p,"?"),new St(204,!1);const g=function ys(c){const p=c&&(c[Us]||c[No]);if(p){const g=function Xs(c){if(c.hasOwnProperty("name"))return c.name;const p=(""+c).match(/^function\s*([^\s(]+)/);return null===p?"":p[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),p}return null}(c);return null!==g?()=>g.factory(c):()=>new c}(c);throw new St(204,!1)}function gP(c,p,g){let b;if(Ed(c)){const w=Pe(c);return Ta(w)||OE(w)}if(KI(c))b=()=>Pe(c.useValue);else if(function pP(c){return!(!c||!c.useFactory)}(c))b=()=>c.useFactory(...yy(c.deps||[]));else if(function $I(c){return!(!c||!c.useExisting)}(c))b=()=>Do(Pe(c.useExisting));else{const w=Pe(c&&(c.useClass||c.provide));if(!function mP(c){return!!c.deps}(c))return Ta(w)||OE(w);b=()=>new w(...yy(c.deps))}return b}function _y(c,p,g=!1){return{factory:c,value:p,multi:g?[]:void 0}}function XI(c){return!!c.\u0275providers}function QI(c,p){for(const g of c)Array.isArray(g)?QI(g,p):XI(g)?QI(g.\u0275providers,p):p(g)}class JI{}class Qj{resolveComponentFactory(p){throw function Om(c){const p=Error(`No component factory found for ${ut(c)}. Did you add it to @NgModule.entryComponents?`);return p.ngComponent=c,p}(p)}}let ky=(()=>{class c{}return c.NULL=new Qj,c})();function Jj(){return Ry(to(),It())}function Ry(c,p){return new Pm(Ya(c,p))}let Pm=(()=>{class c{constructor(g){this.nativeElement=g}}return c.__NG_ELEMENT_ID__=Jj,c})();function bP(c){return c instanceof Pm?c.nativeElement:c}class eA{}let e5=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function CP(){const c=It(),g=ar(to().index,c);return(ta(g)?g:c)[11]}(),c})(),t5=(()=>{class c{}return c.\u0275prov=er({token:c,providedIn:"root",factory:()=>null}),c})();class tA{constructor(p){this.full=p,this.major=p.split(".")[0],this.minor=p.split(".")[1],this.patch=p.split(".").slice(2).join(".")}}const wP=new tA("14.2.2"),PE={};function Th(c){return c.ngOriginalError}class My{constructor(){this._console=console}handleError(p){const g=this._findOriginalError(p);this._console.error("ERROR",p),g&&this._console.error("ORIGINAL ERROR",g)}_findOriginalError(p){let g=p&&Th(p);for(;g&&Th(g);)g=Th(g);return g||null}}const Ly=new Map;let dg=0;const zo="__ngContext__";function Qa(c,p){ta(p)?(c[zo]=p[20],function a5(c){Ly.set(c[20],c)}(p)):c[zo]=p}function pg(c){return c instanceof Function?c():c}var Ec=(()=>((Ec=Ec||{})[Ec.Important=1]="Important",Ec[Ec.DashCase=2]="DashCase",Ec))();function E0(c,p){return undefined(c,p)}function T0(c){const p=c[3];return Fa(p)?p[3]:p}function OP(c){return Lu(c[13])}function Mu(c){return Lu(c[4])}function Lu(c){for(;null!==c&&!Fa(c);)c=c[4];return c}function zp(c,p,g,b,w){if(null!=b){let x,_=!1;Fa(b)?x=b:ta(b)&&(_=!0,b=b[0]);const M=Ws(b);0===c&&null!==g?null==w?uA(p,g,M):xd(p,g,M,w||null,!0):1===c&&null!==g?xd(p,g,M,w||null,!0):2===c?function Nm(c,p,g){const b=Tc(c,p);b&&function Up(c,p,g,b){c.removeChild(p,g,b)}(c,b,p,g)}(p,M,_):3===c&&p.destroyNode(M),null!=x&&function jP(c,p,g,b,w){const x=g[7];x!==Ws(g)&&zp(p,c,b,x,w);for(let M=10;M<g.length;M++){const F=g[M];A0(F[1],F,c,p,b,x)}}(p,c,x,g,w)}}function aA(c,p,g){return c.createElement(p,g)}function Py(c,p){const g=c[9],b=g.indexOf(p),w=p[3];512&p[2]&&(p[2]&=-513,Qf(w,-1)),g.splice(b,1)}function jp(c,p){if(c.length<=10)return;const g=10+p,b=c[g];if(b){const w=b[17];null!==w&&w!==c&&Py(w,b),p>0&&(c[g-1][4]=b[4]);const x=_p(c,10+p);!function NP(c,p){A0(c,p,p[11],2,null,null),p[0]=null,p[6]=null}(b[1],b);const _=x[19];null!==_&&_.detachView(x[1]),b[3]=null,b[4]=null,b[2]&=-65}return b}function hA(c,p){if(!(128&p[2])){const g=p[11];g.destroyNode&&A0(c,p,g,3,null,null),function lA(c){let p=c[13];if(!p)return D0(c[1],c);for(;p;){let g=null;if(ta(p))g=p[13];else{const b=p[10];b&&(g=b)}if(!g){for(;p&&!p[4]&&p!==c;)ta(p)&&D0(p[1],p),p=p[3];null===p&&(p=c),ta(p)&&D0(p[1],p),g=p&&p[4]}p=g}}(p)}}function D0(c,p){if(!(128&p[2])){p[2]&=-65,p[2]|=128,function sa(c,p){let g;if(null!=c&&null!=(g=c.destroyHooks))for(let b=0;b<g.length;b+=2){const w=p[g[b]];if(!(w instanceof Eh)){const x=g[b+1];if(Array.isArray(x))for(let _=0;_<x.length;_+=2){const M=w[x[_]],F=x[_+1];try{F.call(M)}finally{}}else try{x.call(w)}finally{}}}}(c,p),function HP(c,p){const g=c.cleanup,b=p[7];let w=-1;if(null!==g)for(let x=0;x<g.length-1;x+=2)if("string"==typeof g[x]){const _=g[x+1],M="function"==typeof _?_(p):Ws(p[_]),F=b[w=g[x+2]],V=g[x+3];"boolean"==typeof V?M.removeEventListener(g[x],F,V):V>=0?b[w=V]():b[w=-V].unsubscribe(),x+=2}else{const _=b[w=g[x+1]];g[x].call(_)}if(null!==b){for(let x=w+1;x<b.length;x++)(0,b[x])();p[7]=null}}(c,p),1===p[1].type&&p[11].destroy();const g=p[17];if(null!==g&&Fa(p[3])){g!==p[3]&&Py(g,p);const b=p[19];null!==b&&b.detachView(c)}!function AP(c){Ly.delete(c[20])}(p)}}function Fy(c,p,g){return function I0(c,p,g){let b=p;for(;null!==b&&40&b.type;)b=(p=b).parent;if(null===b)return g[0];if(2&b.flags){const w=c.data[b.directiveStart].encapsulation;if(w===Li.None||w===Li.Emulated)return null}return Ya(b,g)}(c,p.parent,g)}function xd(c,p,g,b,w){c.insertBefore(p,g,b,w)}function uA(c,p,g){c.appendChild(p,g)}function VP(c,p,g,b,w){null!==b?xd(c,p,g,b,w):uA(c,p,g)}function Tc(c,p){return c.parentNode(p)}let cA=function BE(c,p,g){return 40&c.type?Ya(c,g):null};function Ny(c,p,g,b){const w=Fy(c,b,p),x=p[11],M=function gg(c,p,g){return cA(c,p,g)}(b.parent||p[6],b,p);if(null!=w)if(Array.isArray(g))for(let F=0;F<g.length;F++)VP(x,w,g[F],M,!1);else VP(x,w,g,M,!1)}function Zn(c,p){if(null!==p){const g=p.type;if(3&g)return Ya(p,c);if(4&g)return pA(-1,c[p.index]);if(8&g){const b=p.child;if(null!==b)return Zn(c,b);{const w=c[p.index];return Fa(w)?pA(-1,w):Ws(w)}}if(32&g)return E0(p,c)()||Ws(c[p.index]);{const b=By(c,p);return null!==b?Array.isArray(b)?b[0]:Zn(T0(c[16]),b):Zn(c,p.next)}}return null}function By(c,p){return null!==p?c[16][6].projection[p.projection]:null}function pA(c,p){const g=10+c+1;if(g<p.length){const b=p[g],w=b[1].firstChild;if(null!==w)return Zn(b,w)}return p[7]}function fA(c,p,g,b,w,x,_){for(;null!=g;){const M=b[g.index],F=g.type;if(_&&0===p&&(M&&Qa(Ws(M),b),g.flags|=4),64!=(64&g.flags))if(8&F)fA(c,p,g.child,b,w,x,!1),zp(p,c,w,M,x);else if(32&F){const V=E0(g,b);let $;for(;$=V();)zp(p,c,w,$,x);zp(p,c,w,M,x)}else 16&F?gA(c,p,b,g,w,x):zp(p,c,w,M,x);g=_?g.projectionNext:g.next}}function A0(c,p,g,b,w,x){fA(g,b,c.firstChild,p,w,x,!1)}function gA(c,p,g,b,w,x){const _=g[16],F=_[6].projection[b.projection];if(Array.isArray(F))for(let V=0;V<F.length;V++)zp(p,c,w,F[V],x);else fA(c,p,F,_[3],w,x,!0)}function y5(c,p,g){c.setAttribute(p,"style",g)}function Ba(c,p,g){""===g?c.removeAttribute(p,"class"):c.setAttribute(p,"class",g)}function Wp(c,p,g){let b=c.length;for(;;){const w=c.indexOf(p,g);if(-1===w)return w;if(0===w||c.charCodeAt(w-1)<=32){const x=p.length;if(w+x===b||c.charCodeAt(w+x)<=32)return w}g=w+1}}const qP="ng-template";function b5(c,p,g){let b=0;for(;b<c.length;){let w=c[b++];if(g&&"class"===w){if(w=c[b],-1!==Wp(w.toLowerCase(),p,0))return!0}else if(1===w){for(;b<c.length&&"string"==typeof(w=c[b++]);)if(w.toLowerCase()===p)return!0;return!1}}return!1}function mA(c){return 4===c.type&&c.value!==qP}function GP(c,p,g){return p===(4!==c.type||g?c.value:qP)}function C5(c,p,g){let b=4;const w=c.attrs||[],x=function HE(c){for(let p=0;p<c.length;p++)if(JC(c[p]))return p;return c.length}(w);let _=!1;for(let M=0;M<p.length;M++){const F=p[M];if("number"!=typeof F){if(!_)if(4&b){if(b=2|1&b,""!==F&&!GP(c,F,g)||""===F&&1===p.length){if(Ou(b))return!1;_=!0}}else{const V=8&b?F:p[++M];if(8&b&&null!==c.attrs){if(!b5(c.attrs,V,g)){if(Ou(b))return!1;_=!0}continue}const he=w5(8&b?"class":F,w,mA(c),g);if(-1===he){if(Ou(b))return!1;_=!0;continue}if(""!==V){let Te;Te=he>x?"":w[he+1].toLowerCase();const Ke=8&b?Te:null;if(Ke&&-1!==Wp(Ke,V,0)||2&b&&V!==Te){if(Ou(b))return!1;_=!0}}}}else{if(!_&&!Ou(b)&&!Ou(F))return!1;if(_&&Ou(F))continue;_=!1,b=F|1&b}}return Ou(b)||_}function Ou(c){return 0==(1&c)}function w5(c,p,g,b){if(null===p)return-1;let w=0;if(b||!g){let x=!1;for(;w<p.length;){const _=p[w];if(_===c)return w;if(3===_||6===_)x=!0;else{if(1===_||2===_){let M=p[++w];for(;"string"==typeof M;)M=p[++w];continue}if(4===_)break;if(0===_){w+=4;continue}}w+=x?1:2}return-1}return function Bm(c,p){let g=c.indexOf(4);if(g>-1)for(g++;g<c.length;){const b=c[g];if("number"==typeof b)return-1;if(b===p)return g;g++}return-1}(p,c)}function vA(c,p,g=!1){for(let b=0;b<p.length;b++)if(C5(c,p[b],g))return!0;return!1}function Hy(c,p){return c?":not("+p.trim()+")":p}function S5(c){let p=c[0],g=1,b=2,w="",x=!1;for(;g<c.length;){let _=c[g];if("string"==typeof _)if(2&b){const M=c[++g];w+="["+_+(M.length>0?'="'+M+'"':"")+"]"}else 8&b?w+="."+_:4&b&&(w+=" "+_);else""!==w&&!Ou(_)&&(p+=Hy(x,w),w=""),b=_,x=x||!Ou(b);g++}return""!==w&&(p+=Hy(x,w)),p}const Vn={};function VE(c){$P(Xi(),It(),io()+c,!1)}function $P(c,p,g,b){if(!b)if(3==(3&p[2])){const x=c.preOrderCheckHooks;null!==x&&cm(p,x,g)}else{const x=c.preOrderHooks;null!==x&&xp(p,x,0,g)}vc(g)}function XP(c,p=null,g=null,b){const w=QP(c,p,g,b);return w.resolveInjectorInitializers(),w}function QP(c,p=null,g=null,b,w=new Set){const x=[g||hn,cP(c)];return b=b||("object"==typeof c?void 0:ut(c)),new fP(x,p||LE(),b||null,w)}let Vm=(()=>{class c{static create(g,b){if(Array.isArray(g))return XP({name:""},b,g,"");{const w=g.name??"";return XP({name:w},g.parent,g.providers,w)}}}return c.THROW_IF_NOT_FOUND=Vo,c.NULL=new Gj,c.\u0275prov=er({token:c,providedIn:"any",factory:()=>Do(UI)}),c.__NG_ELEMENT_ID__=-1,c})();function zm(c,p=fi.Default){const g=It();return null===g?Do(c,p):hy(to(),g,Pe(c),p)}function TA(){throw new Error("invalid")}function Wy(c,p){return c<<17|p<<2}function dl(c){return c>>17&32767}function xA(c){return 2|c}function qp(c){return(131068&c)>>2}function DA(c,p){return-131069&c|p<<2}function IA(c){return 1|c}function P5(c,p){const g=c.contentQueries;if(null!==g)for(let b=0;b<g.length;b+=2){const w=g[b],x=g[b+1];if(-1!==x){const _=c.data[x];qC(w),_.contentQueries(2,p[x],x)}}}function Ky(c,p,g,b,w,x,_,M,F,V,$){const he=p.blueprint.slice();return he[0]=w,he[2]=76|b,(null!==$||c&&1024&c[2])&&(he[2]|=1024),wp(he),he[3]=he[15]=c,he[8]=g,he[10]=_||c&&c[10],he[11]=M||c&&c[11],he[12]=F||c&&c[12]||null,he[9]=V||c&&c[9]||null,he[6]=x,he[20]=function dZ(){return dg++}(),he[21]=$,he[16]=2==p.type?c[16]:he,he}function $y(c,p,g,b,w){let x=c.data[p];if(null===x)x=function OA(c,p,g,b,w){const x=gc(),_=am(),F=c.data[p]=function N5(c,p,g,b,w,x){return{type:g,index:b,insertBeforeIndex:null,injectorIndex:p?p.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:w,attrs:x,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:p,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?x:x&&x.parent,g,p,b,w);return null===c.firstChild&&(c.firstChild=F),null!==x&&(_?null==x.child&&null!==F.parent&&(x.child=F):null===x.next&&(x.next=F)),F}(c,p,g,b,w),function sE(){return X.lFrame.inI18n}()&&(x.flags|=64);else if(64&x.type){x.type=g,x.value=b,x.attrs=w;const _=function Iu(){const c=X.lFrame,p=c.currentTNode;return c.isParent?p:p.parent}();x.injectorIndex=null===_?-1:_.injectorIndex}return ia(x,!0),x}function Yy(c,p,g,b){if(0===g)return-1;const w=p.length;for(let x=0;x<g;x++)p.push(b),c.blueprint.push(b),c.data.push(null);return w}function B0(c,p,g){iy(p);try{const b=c.viewQuery;null!==b&&tb(1,b,g);const w=c.template;null!==w&&PA(c,p,w,1,g),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&P5(c,p),c.staticViewQueries&&tb(2,c.viewQuery,g);const x=c.components;null!==x&&function LZ(c,p){for(let g=0;g<p.length;g++)$5(c,p[g])}(p,x)}catch(b){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),b}finally{p[2]&=-5,Jf()}}function Jl(c,p,g,b){const w=p[2];if(128!=(128&w)){iy(p);try{wp(p),function lm(c){return X.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==g&&PA(c,p,g,2,b);const _=3==(3&w);if(_){const V=c.preOrderCheckHooks;null!==V&&cm(p,V,null)}else{const V=c.preOrderHooks;null!==V&&xp(p,V,0,null),YC(p,0)}if(function iT(c){for(let p=OP(c);null!==p;p=Mu(p)){if(!p[2])continue;const g=p[9];for(let b=0;b<g.length;b++){const w=g[b],x=w[3];0==(512&w[2])&&Qf(x,1),w[2]|=512}}}(p),function UA(c){for(let p=OP(c);null!==p;p=Mu(p))for(let g=10;g<p.length;g++){const b=p[g],w=b[1];fc(b)&&Jl(w,b,w.template,b[8])}}(p),null!==c.contentQueries&&P5(c,p),_){const V=c.contentCheckHooks;null!==V&&cm(p,V)}else{const V=c.contentHooks;null!==V&&xp(p,V,1),YC(p,1)}!function RZ(c,p){const g=c.hostBindingOpCodes;if(null!==g)try{for(let b=0;b<g.length;b++){const w=g[b];if(w<0)vc(~w);else{const x=w,_=g[++b],M=g[++b];oE(_,x),M(2,p[x])}}}finally{vc(-1)}}(c,p);const M=c.components;null!==M&&function MZ(c,p){for(let g=0;g<p.length;g++)K5(c,p[g])}(p,M);const F=c.viewQuery;if(null!==F&&tb(2,F,b),_){const V=c.viewCheckHooks;null!==V&&cm(p,V)}else{const V=c.viewHooks;null!==V&&xp(p,V,2),YC(p,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),p[2]&=-41,512&p[2]&&(p[2]&=-513,Qf(p[3],-1))}finally{Jf()}}}function PA(c,p,g,b,w){const x=io(),_=2&b;try{vc(-1),_&&p.length>22&&$P(c,p,22,!1),g(b,w)}finally{vc(x)}}function FA(c,p,g){!qi()||(function VA(c,p,g,b){const w=g.directiveStart,x=g.directiveEnd;c.firstCreatePass||Ip(g,p),Qa(b,p);const _=g.initialInputs;for(let M=w;M<x;M++){const F=c.data[M],V=Il(F);V&&q5(p,g,F);const $=dd(p,c,M,g);Qa($,p),null!==_&&E1(0,M-w,$,F,0,_),V&&(ar(g.index,p)[8]=$)}}(c,p,g,Ya(g,p)),128==(128&g.flags)&&function tT(c,p,g){const b=g.directiveStart,w=g.directiveEnd,x=g.index,_=function tP(){return X.lFrame.currentDirectiveIndex}();try{vc(x);for(let M=b;M<w;M++){const F=c.data[M],V=p[M];ty(M),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&Um(F,V)}}finally{vc(-1),ty(_)}}(c,p,g))}function NA(c,p,g=Ya){const b=p.localNames;if(null!==b){let w=p.index+1;for(let x=0;x<b.length;x+=2){const _=b[x+1],M=-1===_?g(p,c):c[_];c[w++]=M}}}function BA(c){const p=c.tView;return null===p||p.incompleteFirstPass?c.tView=Xy(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):p}function Xy(c,p,g,b,w,x,_,M,F,V){const $=22+b,he=$+w,Te=function F5(c,p){const g=[];for(let b=0;b<p;b++)g.push(b<c?null:Vn);return g}($,he),Ke="function"==typeof V?V():V;return Te[1]={type:c,blueprint:Te,template:g,queries:null,viewQuery:M,declTNode:p,data:Te.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:he,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof x?x():x,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:F,consts:Ke,incompleteFirstPass:!1}}function Jy(c,p,g,b){const w=ib(p);null===g?w.push(b):(w.push(g),c.firstCreatePass&&GA(c).push(b,w.length-1))}function y1(c,p,g){for(let b in c)if(c.hasOwnProperty(b)){const w=c[b];(g=null===g?{}:g).hasOwnProperty(b)?g[b].push(p,w):g[b]=[p,w]}return g}function eb(c,p){const b=p.directiveEnd,w=c.data,x=p.attrs,_=[];let M=null,F=null;for(let V=p.directiveStart;V<b;V++){const $=w[V],he=$.inputs,Te=null===x||mA(p)?null:G5(he,x);_.push(Te),M=y1(he,V,M),F=y1($.outputs,V,F)}null!==M&&(M.hasOwnProperty("class")&&(p.flags|=16),M.hasOwnProperty("style")&&(p.flags|=32)),p.initialInputs=_,p.inputs=M,p.outputs=F}function b1(c,p){const g=ar(p,c);16&g[2]||(g[2]|=32)}function HA(c,p,g,b){let w=!1;if(qi()){const x=function j5(c,p,g){const b=c.directiveRegistry;let w=null;if(b)for(let x=0;x<b.length;x++){const _=b[x];vA(g,_.selectors,!1)&&(w||(w=[]),gm(Ip(g,p),c,_.type),Il(_)?(C1(c,g),w.unshift(_)):w.push(_))}return w}(c,p,g),_=null===b?null:{"":-1};if(null!==x){w=!0,w1(g,c.data.length,x.length);for(let $=0;$<x.length;$++){const he=x[$];he.providersResolver&&he.providersResolver(he)}let M=!1,F=!1,V=Yy(c,p,x.length,null);for(let $=0;$<x.length;$++){const he=x[$];g.mergedAttrs=pm(g.mergedAttrs,he.hostAttrs),S1(c,g,p,V,he),W5(V,he,_),null!==he.contentQueries&&(g.flags|=8),(null!==he.hostBindings||null!==he.hostAttrs||0!==he.hostVars)&&(g.flags|=128);const Te=he.type.prototype;!M&&(Te.ngOnChanges||Te.ngOnInit||Te.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(g.index),M=!0),!F&&(Te.ngOnChanges||Te.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(g.index),F=!0),V++}eb(c,g)}_&&function U5(c,p,g){if(p){const b=c.localNames=[];for(let w=0;w<p.length;w+=2){const x=g[p[w+1]];if(null==x)throw new St(-301,!1);b.push(p[w],x)}}}(g,b,_)}return g.mergedAttrs=pm(g.mergedAttrs,g.attrs),w}function V5(c,p,g,b,w,x){const _=x.hostBindings;if(_){let M=c.hostBindingOpCodes;null===M&&(M=c.hostBindingOpCodes=[]);const F=~p.index;(function z5(c){let p=c.length;for(;p>0;){const g=c[--p];if("number"==typeof g&&g<0)return g}return 0})(M)!=F&&M.push(F),M.push(b,w,_)}}function Um(c,p){null!==c.hostBindings&&c.hostBindings(1,p)}function C1(c,p){p.flags|=2,(c.components||(c.components=[])).push(p.index)}function W5(c,p,g){if(g){if(p.exportAs)for(let b=0;b<p.exportAs.length;b++)g[p.exportAs[b]]=c;Il(p)&&(g[""]=c)}}function w1(c,p,g){c.flags|=1,c.directiveStart=p,c.directiveEnd=p+g,c.providerIndexes=p}function S1(c,p,g,b,w){c.data[b]=w;const x=w.factory||(w.factory=Ta(w.type)),_=new Eh(x,Il(w),zm);c.blueprint[b]=_,g[b]=_,V5(c,p,0,b,Yy(c,g,w.hostVars,Vn),w)}function q5(c,p,g){const b=Ya(p,c),w=BA(g),x=c[10],_=Wm(c,Ky(c,w,null,g.onPush?32:16,b,p,x,x.createRenderer(b,g),null,null,null));c[p.index]=_}function Ad(c,p,g,b,w,x){const _=Ya(c,p);!function zA(c,p,g,b,w,x,_){if(null==x)c.removeAttribute(p,w,g);else{const M=null==_?gt(x):_(x,b||"",w);c.setAttribute(p,w,M,g)}}(p[11],_,x,c.value,g,b,w)}function E1(c,p,g,b,w,x){const _=x[p];if(null!==_){const M=b.setInput;for(let F=0;F<_.length;){const V=_[F++],$=_[F++],he=_[F++];null!==M?b.setInput(g,he,V,$):g[$]=he}}}function G5(c,p){let g=null,b=0;for(;b<p.length;){const w=p[b];if(0!==w)if(5!==w){if("number"==typeof w)break;c.hasOwnProperty(w)&&(null===g&&(g=[]),g.push(w,c[w],p[b+1])),b+=2}else b+=2;else b+=4}return g}function jA(c,p,g,b){return new Array(c,!0,!1,p,null,0,b,g,null,null)}function K5(c,p){const g=ar(p,c);if(fc(g)){const b=g[1];48&g[2]?Jl(b,g,b.template,g[8]):g[5]>0&&WA(g)}}function WA(c){for(let b=OP(c);null!==b;b=Mu(b))for(let w=10;w<b.length;w++){const x=b[w];if(fc(x))if(512&x[2]){const _=x[1];Jl(_,x,_.template,x[8])}else x[5]>0&&WA(x)}const g=c[1].components;if(null!==g)for(let b=0;b<g.length;b++){const w=ar(g[b],c);fc(w)&&w[5]>0&&WA(w)}}function $5(c,p){const g=ar(p,c),b=g[1];(function Y5(c,p){for(let g=p.length;g<c.blueprint.length;g++)p.push(c.blueprint[g])})(b,g),B0(b,g,g[8])}function Wm(c,p){return c[13]?c[14][4]=p:c[13]=p,c[14]=p,p}function nT(c){for(;c;){c[2]|=32;const p=T0(c);if(qf(c)&&!p)return c;c=p}return null}function V0(c,p,g,b=!0){const w=p[10];w.begin&&w.begin();try{Jl(c,p,c.template,g)}catch(_){throw b&&D1(p,_),_}finally{w.end&&w.end()}}function tb(c,p,g){qC(0),p(c,g)}function ib(c){return c[7]||(c[7]=[])}function GA(c){return c.cleanup||(c.cleanup=[])}function D1(c,p){const g=c[9],b=g?g.get(My,null):null;b&&b.handleError(p)}function KA(c,p,g,b,w){for(let x=0;x<g.length;){const _=g[x++],M=g[x++],F=p[_],V=c.data[_];null!==V.setInput?V.setInput(F,w,b,M):F[M]=w}}function rT(c,p,g){let b=g?c.styles:null,w=g?c.classes:null,x=0;if(null!==p)for(let _=0;_<p.length;_++){const M=p[_];"number"==typeof M?x=M:1==x?w=dt(w,M):2==x&&(b=dt(b,M+": "+p[++_]+";"))}g?c.styles=b:c.stylesWithoutHost=b,g?c.classes=w:c.classesWithoutHost=w}function qm(c,p,g,b,w=!1){for(;null!==g;){const x=p[g.index];if(null!==x&&b.push(Ws(x)),Fa(x))for(let M=10;M<x.length;M++){const F=x[M],V=F[1].firstChild;null!==V&&qm(F[1],F,V,b)}const _=g.type;if(8&_)qm(c,p,g.child,b);else if(32&_){const M=E0(g,p);let F;for(;F=M();)b.push(F)}else if(16&_){const M=By(p,g);if(Array.isArray(M))b.push(...M);else{const F=T0(p[16]);qm(F[1],F,M,b,!0)}}g=w?g.projectionNext:g.next}return b}class z0{constructor(p,g){this._lView=p,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const p=this._lView,g=p[1];return qm(g,p,g.firstChild,[])}get context(){return this._lView[8]}set context(p){this._lView[8]=p}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const p=this._lView[3];if(Fa(p)){const g=p[8],b=g?g.indexOf(this):-1;b>-1&&(jp(p,b),_p(g,b))}this._attachedToViewContainer=!1}hA(this._lView[1],this._lView)}onDestroy(p){Jy(this._lView[1],this._lView,null,p)}markForCheck(){nT(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){V0(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new St(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function g5(c,p){A0(c,p,p[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(p){if(this._attachedToViewContainer)throw new St(902,!1);this._appRef=p}}class X5 extends z0{constructor(p){super(p),this._view=p}detectChanges(){const p=this._view;V0(p[1],p,p[8],!1)}checkNoChanges(){}get context(){return null}}class $A extends ky{constructor(p){super(),this.ngModule=p}resolveComponentFactory(p){const g=q(p);return new j0(g,this.ngModule)}}function I1(c){const p=[];for(let g in c)c.hasOwnProperty(g)&&p.push({propName:c[g],templateName:g});return p}class J5{constructor(p,g){this.injector=p,this.parentInjector=g}get(p,g,b){const w=this.injector.get(p,PE,b);return w!==PE||g===PE?w:this.parentInjector.get(p,g,b)}}class j0 extends JI{constructor(p,g){super(),this.componentDef=p,this.ngModule=g,this.componentType=p.type,this.selector=function Hm(c){return c.map(S5).join(",")}(p.selectors),this.ngContentSelectors=p.ngContentSelectors?p.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return I1(this.componentDef.inputs)}get outputs(){return I1(this.componentDef.outputs)}create(p,g,b,w){let x=(w=w||this.ngModule)instanceof Hp?w:w?.injector;x&&null!==this.componentDef.getStandaloneInjector&&(x=this.componentDef.getStandaloneInjector(x)||x);const _=x?new J5(p,x):p,M=_.get(eA,null);if(null===M)throw new St(407,!1);const F=_.get(t5,null),V=M.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",he=b?function Qy(c,p,g){return c.selectRootElement(p,g===Li.ShadowDom)}(V,b,this.componentDef.encapsulation):aA(M.createRenderer(null,this.componentDef),$,function Q5(c){const p=c.toLowerCase();return"svg"===p?"svg":"math"===p?"math":null}($)),Te=this.componentDef.onPush?288:272,Ke=Xy(0,null,null,1,0,null,null,null,null,null),Et=Ky(null,Ke,null,Te,null,null,M,V,F,_,null);let Qt,gi;iy(Et);try{const Bi=function k1(c,p,g,b,w,x){const _=g[1];g[22]=c;const F=$y(_,22,2,"#host",null),V=F.mergedAttrs=p.hostAttrs;null!==V&&(rT(F,V,!0),null!==c&&(yc(w,c,V),null!==F.classes&&Ba(w,c,F.classes),null!==F.styles&&y5(w,c,F.styles)));const $=b.createRenderer(c,p),he=Ky(g,BA(p),null,p.onPush?32:16,g[22],F,b,$,x||null,null,null);return _.firstCreatePass&&(gm(Ip(F,g),_,p.type),C1(_,F),w1(F,g.length,1)),Wm(g,he),g[22]=he}(he,this.componentDef,Et,M,V);if(he)if(b)yc(V,he,["ng-version",wP.full]);else{const{attrs:mn,classes:Ft}=function E5(c){const p=[],g=[];let b=1,w=2;for(;b<c.length;){let x=c[b];if("string"==typeof x)2===w?""!==x&&p.push(x,c[++b]):8===w&&g.push(x);else{if(!Ou(w))break;w=x}b++}return{attrs:p,classes:g}}(this.componentDef.selectors[0]);mn&&yc(V,he,mn),Ft&&Ft.length>0&&Ba(V,he,Ft.join(" "))}if(gi=_l(Ke,22),void 0!==g){const mn=gi.projection=[];for(let Ft=0;Ft<this.ngContentSelectors.length;Ft++){const In=g[Ft];mn.push(null!=In?Array.from(In):null)}}Qt=function R1(c,p,g,b){const w=g[1],x=function H5(c,p,g){const b=to();c.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),S1(c,b,p,Yy(c,p,1,null),g),eb(c,b));const w=dd(p,c,b.directiveStart,b);Qa(w,p);const x=Ya(b,p);return x&&Qa(x,p),w}(w,g,p);if(c[8]=g[8]=x,null!==b)for(const M of b)M(x,p);if(p.contentQueries){const M=to();p.contentQueries(1,x,M.directiveStart)}const _=to();return!w.firstCreatePass||null===p.hostBindings&&null===p.hostAttrs||(vc(_.index),V5(g[1],_,0,_.directiveStart,_.directiveEnd,p),Um(p,x)),x}(Bi,this.componentDef,Et,[M1]),B0(Ke,Et,null)}finally{Jf()}return new _1(this.componentType,Qt,Ry(gi,Et),Et,gi)}}class _1 extends class vP{}{constructor(p,g,b,w,x){super(),this.location=b,this._rootLView=w,this._tNode=x,this.instance=g,this.hostView=this.changeDetectorRef=new X5(w),this.componentType=p}setInput(p,g){const b=this._tNode.inputs;let w;if(null!==b&&(w=b[p])){const x=this._rootLView;KA(x[1],x,w,p,g),b1(x,this._tNode.index)}}get injector(){return new ym(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(p){this.hostView.onDestroy(p)}}function M1(){const c=to();um(It()[1],c)}function YA(c){let p=function L1(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),g=!0;const b=[c];for(;p;){let w;if(Il(c))w=p.\u0275cmp||p.\u0275dir;else{if(p.\u0275cmp)throw new St(903,!1);w=p.\u0275dir}if(w){if(g){b.push(w);const _=c;_.inputs=ZA(c.inputs),_.declaredInputs=ZA(c.declaredInputs),_.outputs=ZA(c.outputs);const M=w.hostBindings;M&&O1(c,M);const F=w.viewQuery,V=w.contentQueries;if(F&&i3(c,F),V&&n3(c,V),it(c.inputs,w.inputs),it(c.declaredInputs,w.declaredInputs),it(c.outputs,w.outputs),Il(w)&&w.data.animation){const $=c.data;$.animation=($.animation||[]).concat(w.data.animation)}}const x=w.features;if(x)for(let _=0;_<x.length;_++){const M=x[_];M&&M.ngInherit&&M(c),M===YA&&(g=!1)}}p=Object.getPrototypeOf(p)}!function t3(c){let p=0,g=null;for(let b=c.length-1;b>=0;b--){const w=c[b];w.hostVars=p+=w.hostVars,w.hostAttrs=pm(w.hostAttrs,g=pm(g,w.hostAttrs))}}(b)}function ZA(c){return c===ho?{}:c===hn?[]:c}function i3(c,p){const g=c.viewQuery;c.viewQuery=g?(b,w)=>{p(b,w),g(b,w)}:p}function n3(c,p){const g=c.contentQueries;c.contentQueries=g?(b,w,x)=>{p(b,w,x),g(b,w,x)}:p}function O1(c,p){const g=c.hostBindings;c.hostBindings=g?(b,w)=>{p(b,w),g(b,w)}:p}let QA=null;function Gm(){if(!QA){const c=Oi.Symbol;if(c&&c.iterator)QA=c.iterator;else{const p=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<p.length;++g){const b=p[g];"entries"!==b&&"size"!==b&&Map.prototype[b]===Map.prototype.entries&&(QA=b)}}}return QA}function U0(c){return!!oT(c)&&(Array.isArray(c)||!(c instanceof Map)&&Gm()in c)}function oT(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function Ll(c,p,g){return!Object.is(c[p],g)&&(c[p]=g,!0)}function e_(c,p,g,b){const w=It();return Ll(w,hm(),p)&&(Xi(),Ad(no(),w,c,p,g,b)),e_}function hT(c,p,g,b,w,x,_,M){const F=It(),V=Xi(),$=c+22,he=V.firstCreatePass?function ab(c,p,g,b,w,x,_,M,F){const V=p.consts,$=$y(p,c,4,_||null,Sh(V,M));HA(p,g,$,Sh(V,F)),um(p,$);const he=$.tViews=Xy(2,$,b,w,x,p.directiveRegistry,p.pipeRegistry,null,p.schemas,V);return null!==p.queries&&(p.queries.template(p,$),he.queries=p.queries.embeddedTView($)),$}($,V,F,p,g,b,w,x,_):V.data[$];ia(he,!1);const Te=F[11].createComment("");Ny(V,F,Te,he),Qa(Te,F),Wm(F,F[$]=jA(Te,F,Te,he)),sd(he)&&FA(V,F,he),null!=_&&NA(F,he,M)}function n_(c){return Du(function jh(){return X.lFrame.contextLView}(),22+c)}function uT(c,p,g){const b=It();return Ll(b,hm(),p)&&function $h(c,p,g,b,w,x,_,M){const F=Ya(p,g);let $,V=p.inputs;!M&&null!=V&&($=V[b])?(KA(c,g,$,b,w),rd(p)&&b1(g,p.index)):3&p.type&&(b=function H0(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(b),w=null!=_?_(w,p.value||"",b):w,x.setProperty(F,b,w))}(Xi(),no(),b,c,p,b[11],g,!1),uT}function G0(c,p,g,b,w){const _=w?"class":"style";KA(c,g,p.inputs[_],_,b)}function cT(c,p,g,b){const w=It(),x=Xi(),_=22+c,M=w[11],F=w[_]=aA(M,p,function $C(){return X.lFrame.currentNamespace}()),V=x.firstCreatePass?function l3(c,p,g,b,w,x,_){const M=p.consts,V=$y(p,c,2,w,Sh(M,x));return HA(p,g,V,Sh(M,_)),null!==V.attrs&&rT(V,V.attrs,!1),null!==V.mergedAttrs&&rT(V,V.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,V),V}(_,x,w,0,p,g,b):x.data[_];ia(V,!0);const $=V.mergedAttrs;null!==$&&yc(M,F,$);const he=V.classes;null!==he&&Ba(M,F,he);const Te=V.styles;return null!==Te&&y5(M,F,Te),64!=(64&V.flags)&&Ny(x,w,F,V),0===function rt(){return X.lFrame.elementDepthCount}()&&Qa(F,w),function Wt(){X.lFrame.elementDepthCount++}(),sd(V)&&(FA(x,w,V),function Zy(c,p,g){if(Eu(p)){const w=p.directiveEnd;for(let x=p.directiveStart;x<w;x++){const _=c.data[x];_.contentQueries&&_.contentQueries(1,g[x],x)}}}(x,V,w)),null!==b&&NA(w,V),cT}function dT(){let c=to();am()?function hd(){X.lFrame.isParent=!1}():(c=c.parent,ia(c,!1));const p=c;!function ai(){X.lFrame.elementDepthCount--}();const g=Xi();return g.firstCreatePass&&(um(g,c),Eu(c)&&g.queries.elementEnd(c)),null!=p.classesWithoutHost&&function ry(c){return 0!=(16&c.flags)}(p)&&G0(g,p,It(),p.classesWithoutHost,!0),null!=p.stylesWithoutHost&&function sy(c){return 0!=(32&c.flags)}(p)&&G0(g,p,It(),p.stylesWithoutHost,!1),dT}function pT(c,p,g,b){return cT(c,p,g,b),dT(),pT}function r_(){return It()}function s_(c){return!!c&&"function"==typeof c.then}function z1(c){return!!c&&"function"==typeof c.subscribe}const o_=z1;function a_(c,p,g,b){const w=It(),x=Xi(),_=to();return function U1(c,p,g,b,w,x,_,M){const F=sd(b),$=c.firstCreatePass&&GA(c),he=p[8],Te=ib(p);let Ke=!0;if(3&b.type||M){const gi=Ya(b,p),Bi=M?M(gi):gi,mn=Te.length,Ft=M?$r=>M(Ws($r[b.index])):b.index;let In=null;if(!M&&F&&(In=function c3(c,p,g,b){const w=c.cleanup;if(null!=w)for(let x=0;x<w.length-1;x+=2){const _=w[x];if(_===g&&w[x+1]===b){const M=p[7],F=w[x+2];return M.length>F?M[F]:null}"string"==typeof _&&(x+=2)}return null}(c,p,w,b.index)),null!==In)(In.__ngLastListenerFn__||In).__ngNextListenerFn__=x,In.__ngLastListenerFn__=x,Ke=!1;else{x=l_(b,p,he,x,!1);const $r=g.listen(Bi,w,x);Te.push(x,$r),$&&$.push(w,Ft,mn,mn+1)}}else x=l_(b,p,he,x,!1);const Et=b.outputs;let Qt;if(Ke&&null!==Et&&(Qt=Et[w])){const gi=Qt.length;if(gi)for(let Bi=0;Bi<gi;Bi+=2){const Os=p[Qt[Bi]][Qt[Bi+1]].subscribe(x),wg=Te.length;Te.push(x,Os),$&&$.push(w,b.index,wg,-(wg+1))}}}(x,w,w[11],_,c,p,0,b),a_}function W1(c,p,g,b){try{return!1!==g(b)}catch(w){return D1(c,w),!1}}function l_(c,p,g,b,w){return function x(_){if(_===Function)return b;nT(2&c.flags?ar(c.index,p):p);let F=W1(p,0,b,_),V=x.__ngNextListenerFn__;for(;V;)F=W1(p,0,V,_)&&F,V=V.__ngNextListenerFn__;return w&&!1===F&&(_.preventDefault(),_.returnValue=!1),F}}function q1(c=1){return function Tp(c){return(X.lFrame.contextLView=function yI(c,p){for(;c>0;)p=p[15],c--;return p}(c,X.lFrame.contextLView))[8]}(c)}function Z1(c,p,g,b,w){const x=c[g+1],_=null===p;let M=b?dl(x):qp(x),F=!1;for(;0!==M&&(!1===F||_);){const $=c[M+1];ie(c[M],p)&&(F=!0,c[M+1]=b?IA($):xA($)),M=b?dl($):qp($)}F&&(c[g+1]=b?xA(x):IA(x))}function ie(c,p){return null===c||null==p||(Array.isArray(c)?c[1]:c)===p||!(!Array.isArray(c)||"string"!=typeof p)&&Cc(c,p)>=0}function ot(c,p){return function kd(c,p,g,b){const w=It(),x=Xi(),_=function ud(c){const p=X.lFrame,g=p.bindingIndex;return p.bindingIndex=p.bindingIndex+c,g}(2);x.firstUpdatePass&&function eF(c,p,g,b){const w=c.data;if(null===w[g+1]){const x=w[io()],_=function J1(c,p){return p>=c.expandoStartIndex}(c,g);(function p_(c,p){return 0!=(c.flags&(p?16:32))})(x,b)&&null===p&&!_&&(p=!1),p=function tF(c,p,g,b){const w=function UC(c){const p=X.lFrame.currentDirectiveIndex;return-1===p?null:c[p]}(c);let x=b?p.residualClasses:p.residualStyles;if(null===w)0===(b?p.classBindings:p.styleBindings)&&(g=eh(g=u_(null,c,p,g,b),p.attrs,b),x=null);else{const _=p.directiveStylingLast;if(-1===_||c[_]!==w)if(g=u_(w,c,p,g,b),null===x){let F=function iF(c,p,g){const b=g?p.classBindings:p.styleBindings;if(0!==qp(b))return c[dl(b)]}(c,p,b);void 0!==F&&Array.isArray(F)&&(F=u_(null,c,p,F[1],b),F=eh(F,p.attrs,b),function ro(c,p,g,b){c[dl(g?p.classBindings:p.styleBindings)]=b}(c,p,b,F))}else x=function f3(c,p,g){let b;const w=p.directiveEnd;for(let x=1+p.directiveStylingLast;x<w;x++)b=eh(b,c[x].hostAttrs,g);return eh(b,p.attrs,g)}(c,p,b)}return void 0!==x&&(b?p.residualClasses=x:p.residualStyles=x),g}(w,x,p,b),function VZ(c,p,g,b,w,x){let _=x?p.classBindings:p.styleBindings,M=dl(_),F=qp(_);c[b]=g;let $,V=!1;if(Array.isArray(g)){const he=g;$=he[1],(null===$||Cc(he,$)>0)&&(V=!0)}else $=g;if(w)if(0!==F){const Te=dl(c[M+1]);c[b+1]=Wy(Te,M),0!==Te&&(c[Te+1]=DA(c[Te+1],b)),c[M+1]=function a1(c,p){return 131071&c|p<<17}(c[M+1],b)}else c[b+1]=Wy(M,0),0!==M&&(c[M+1]=DA(c[M+1],b)),M=b;else c[b+1]=Wy(F,0),0===M?M=b:c[F+1]=DA(c[F+1],b),F=b;V&&(c[b+1]=xA(c[b+1])),Z1(c,$,b,!0),Z1(c,$,b,!1),function fT(c,p,g,b,w){const x=w?c.residualClasses:c.residualStyles;null!=x&&"string"==typeof p&&Cc(x,p)>=0&&(g[b+1]=IA(g[b+1]))}(p,$,c,b,x),_=Wy(M,F),x?p.classBindings=_:p.styleBindings=_}(w,x,p,g,_,b)}}(x,c,_,b),p!==Vn&&Ll(w,_,p)&&function d_(c,p,g,b,w,x,_,M){if(!(3&p.type))return;const F=c.data,V=F[M+1];vT(function l1(c){return 1==(1&c)}(V)?nF(F,p,g,w,qp(V),_):void 0)||(vT(x)||function P0(c){return 2==(2&c)}(V)&&(x=nF(F,null,g,w,M,_)),function UP(c,p,g,b,w){if(p)w?c.addClass(g,b):c.removeClass(g,b);else{let x=-1===b.indexOf("-")?void 0:Ec.DashCase;null==w?c.removeStyle(g,b,x):("string"==typeof w&&w.endsWith("!important")&&(w=w.slice(0,-10),x|=Ec.Important),c.setStyle(g,b,w,x))}}(b,_,function ld(c,p){return Ws(p[c])}(io(),g),w,x))}(x,x.data[io()],w,w[11],c,w[_+1]=function rF(c,p){return null==c||("string"==typeof p?c+=p:"object"==typeof c&&(c=ut(wc(c)))),c}(p,g),b,_)}(c,p,null,!0),ot}function u_(c,p,g,b,w){let x=null;const _=g.directiveEnd;let M=g.directiveStylingLast;for(-1===M?M=g.directiveStart:M++;M<_&&(x=p[M],b=eh(b,x.hostAttrs,w),x!==c);)M++;return null!==c&&(g.directiveStylingLast=M),b}function eh(c,p,g){const b=g?1:2;let w=-1;if(null!==p)for(let x=0;x<p.length;x++){const _=p[x];"number"==typeof _?w=_:w===b&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),kl(c,_,!!g||p[++x]))}return void 0===c?null:c}function nF(c,p,g,b,w,x){const _=null===p;let M;for(;w>0;){const F=c[w],V=Array.isArray(F),$=V?F[1]:F,he=null===$;let Te=g[w+1];Te===Vn&&(Te=he?hn:void 0);let Ke=he?o0(Te,b):$===b?Te:void 0;if(V&&!vT(Ke)&&(Ke=o0(F,b)),vT(Ke)&&(M=Ke,_))return M;const Et=c[w+1];w=_?dl(Et):qp(Et)}if(null!==p){let F=x?p.residualClasses:p.residualStyles;null!=F&&(M=o0(F,b))}return M}function vT(c){return void 0!==c}function sF(c,p=""){const g=It(),b=Xi(),w=c+22,x=b.firstCreatePass?$y(b,w,1,p,null):b.data[w],_=g[w]=function fg(c,p){return c.createText(p)}(g[11],p);Ny(b,g,_,x),ia(x,!1)}const Zm=void 0;var Q=["en",[["a","p"],["AM","PM"],Zm],[["AM","PM"],Zm,Zm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zm,"{1} 'at' {0}",Zm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function CF(c){const g=Math.floor(Math.abs(c)),b=c.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===b?1:5}];let T={};function ri(c){const p=function Zt(c){return c.toLowerCase().replace(/_/g,"-")}(c);let g=w_(p);if(g)return g;const b=p.split("-")[0];if(g=w_(b),g)return g;if("en"===b)return Q;throw new St(701,!1)}function z(c){return ri(c)[bi.PluralCase]}function w_(c){return c in T||(T[c]=Oi.ng&&Oi.ng.common&&Oi.ng.common.locales&&Oi.ng.common.locales[c]),T[c]}var bi=(()=>((bi=bi||{})[bi.LocaleId=0]="LocaleId",bi[bi.DayPeriodsFormat=1]="DayPeriodsFormat",bi[bi.DayPeriodsStandalone=2]="DayPeriodsStandalone",bi[bi.DaysFormat=3]="DaysFormat",bi[bi.DaysStandalone=4]="DaysStandalone",bi[bi.MonthsFormat=5]="MonthsFormat",bi[bi.MonthsStandalone=6]="MonthsStandalone",bi[bi.Eras=7]="Eras",bi[bi.FirstDayOfWeek=8]="FirstDayOfWeek",bi[bi.WeekendRange=9]="WeekendRange",bi[bi.DateFormat=10]="DateFormat",bi[bi.TimeFormat=11]="TimeFormat",bi[bi.DateTimeFormat=12]="DateTimeFormat",bi[bi.NumberSymbols=13]="NumberSymbols",bi[bi.NumberFormats=14]="NumberFormats",bi[bi.CurrencyCode=15]="CurrencyCode",bi[bi.CurrencySymbol=16]="CurrencySymbol",bi[bi.CurrencyName=17]="CurrencyName",bi[bi.Currencies=18]="Currencies",bi[bi.Directionality=19]="Directionality",bi[bi.PluralCase=20]="PluralCase",bi[bi.ExtraData=21]="ExtraData",bi))();const He="en-US";let C3=He;function Ic(c,p,g,b,w){if(c=Pe(c),Array.isArray(c))for(let x=0;x<c.length;x++)Ic(c[x],p,g,b,w);else{const x=Xi(),_=It();let M=Ed(c)?c:Pe(c.provide),F=gP(c);const V=to(),$=1048575&V.providerIndexes,he=V.directiveStart,Te=V.providerIndexes>>20;if(Ed(c)||!c.multi){const Ke=new Eh(F,w,zm),Et=Ja(M,p,w?$:$+Te,he);-1===Et?(gm(Ip(V,_),x,M),I_(x,c,p.length),p.push(M),V.directiveStart++,V.directiveEnd++,w&&(V.providerIndexes+=1048576),g.push(Ke),_.push(Ke)):(g[Et]=Ke,_[Et]=Ke)}else{const Ke=Ja(M,p,$+Te,he),Et=Ja(M,p,$,$+Te),Qt=Ke>=0&&g[Ke],gi=Et>=0&&g[Et];if(w&&!gi||!w&&!Qt){gm(Ip(V,_),x,M);const Bi=function W3(c,p,g,b,w){const x=new Eh(c,g,zm);return x.multi=[],x.index=p,x.componentProviders=0,NF(x,w,b&&!g),x}(w?U3:j3,g.length,w,b,F);!w&&gi&&(g[Et].providerFactory=Bi),I_(x,c,p.length,0),p.push(M),V.directiveStart++,V.directiveEnd++,w&&(V.providerIndexes+=1048576),g.push(Bi),_.push(Bi)}else I_(x,c,Ke>-1?Ke:Et,NF(g[w?Et:Ke],F,!w&&b));!w&&b&&gi&&g[Et].componentProviders++}}}function I_(c,p,g,b){const w=Ed(p),x=function $j(c){return!!c.useClass}(p);if(w||x){const F=(x?Pe(p.useClass):p).prototype.ngOnDestroy;if(F){const V=c.destroyHooks||(c.destroyHooks=[]);if(!w&&p.multi){const $=V.indexOf(g);-1===$?V.push(g,[b,F]):V[$+1].push(b,F)}else V.push(g,F)}}}function NF(c,p,g){return g&&c.componentProviders++,c.multi.push(p)-1}function Ja(c,p,g,b){for(let w=g;w<b;w++)if(p[w]===c)return w;return-1}function j3(c,p,g,b){return A_(this.multi,[])}function U3(c,p,g,b){const w=this.multi;let x;if(this.providerFactory){const _=this.providerFactory.componentProviders,M=dd(g,g[1],this.providerFactory.index,b);x=M.slice(0,_),A_(w,x);for(let F=_;F<M.length;F++)x.push(M[F])}else x=[],A_(w,x);return x}function A_(c,p){for(let g=0;g<c.length;g++)p.push((0,c[g])());return p}function __(c,p=[]){return g=>{g.providersResolver=(b,w)=>function FF(c,p,g){const b=Xi();if(b.firstCreatePass){const w=Il(c);Ic(g,b.data,b.blueprint,w,!0),Ic(p,b.data,b.blueprint,w,!1)}}(b,w?w(c):c,p)}}class db{}class k_{}function q3(c,p){return new HF(c,p??null)}class HF extends db{constructor(p,g){super(),this._parent=g,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $A(this);const b=Pt(p);this._bootstrapComponents=pg(b.bootstrap),this._r3Injector=QP(p,g,[{provide:db,useValue:this},{provide:ky,useValue:this.componentFactoryResolver}],ut(p),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(p)}get injector(){return this._r3Injector}destroy(){const p=this._r3Injector;!p.destroyed&&p.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(p){this.destroyCbs.push(p)}}class R_ extends k_{constructor(p){super(),this.moduleType=p}create(p){return new HF(this.moduleType,p)}}class G3 extends db{constructor(p,g,b){super(),this.componentFactoryResolver=new $A(this),this.instance=null;const w=new fP([...p,{provide:db,useValue:this},{provide:ky,useValue:this.componentFactoryResolver}],g||LE(),b,new Set(["environment"]));this.injector=w,w.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(p){this.injector.onDestroy(p)}}function M_(c,p,g=null){return new G3(c,p,g).injector}let K3=(()=>{class c{constructor(g){this._injector=g,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(g){if(!g.standalone)return null;if(!this.cachedInjectors.has(g.id)){const b=dP(0,g.type),w=b.length>0?M_([b],this._injector,`Standalone[${g.type.name}]`):null;this.cachedInjectors.set(g.id,w)}return this.cachedInjectors.get(g.id)}ngOnDestroy(){try{for(const g of this.cachedInjectors.values())null!==g&&g.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=er({token:c,providedIn:"environment",factory:()=>new c(Do(Hp))}),c})();function DT(c){c.getStandaloneInjector=p=>p.get(K3).getOrCreateStandaloneInjector(c)}function KF(c,p,g,b){return th(It(),na(),c,p,g,b)}function th(c,p,g,b,w,x){const _=p+g;return Ll(c,_,w)?function Pu(c,p,g){return c[p]=g}(c,_+1,x?b.call(x,w):b(w)):function gb(c,p){const g=c[p];return g===Vn?void 0:g}(c,_+1)}function aa(c,p){const g=Xi();let b;const w=c+22;g.firstCreatePass?(b=function el(c,p){if(p)for(let g=p.length-1;g>=0;g--){const b=p[g];if(c===b.name)return b}}(p,g.pipeRegistry),g.data[w]=b,b.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(w,b.onDestroy)):b=g.data[w];const x=b.factory||(b.factory=Ta(b.type)),_=_r(zm);try{const M=oy(!1),F=x();return oy(M),function BZ(c,p,g,b){g>=c.data.length&&(c.data[g]=null,c.blueprint[g]=null),p[g]=b}(g,It(),w,F),F}finally{_r(_)}}function XF(c,p,g){const b=c+22,w=It(),x=Du(w,b);return function kn(c,p){return c[1].data[p].pure}(w,b)?th(w,na(),p,x.transform,g,x):x.transform(g)}function Ye(c){return p=>{setTimeout(c,void 0,p)}}const Va=class QF extends v.x{constructor(p=!1){super(),this.__isAsync=p}emit(p){super.next(p)}subscribe(p,g,b){let w=p,x=g||(()=>null),_=b;if(p&&"object"==typeof p){const F=p;w=F.next?.bind(F),x=F.error?.bind(F),_=F.complete?.bind(F)}this.__isAsync&&(x=Ye(x),w&&(w=Ye(w)),_&&(_=Ye(_)));const M=super.subscribe({next:w,error:x,complete:_});return p instanceof ue.w0&&p.add(M),M}};function n6(){return this._results[Gm()]()}class IT{constructor(p=!1){this._emitDistinctChangesOnly=p,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=Gm(),b=IT.prototype;b[g]||(b[g]=n6)}get changes(){return this._changes||(this._changes=new Va)}get(p){return this._results[p]}map(p){return this._results.map(p)}filter(p){return this._results.filter(p)}find(p){return this._results.find(p)}reduce(p,g){return this._results.reduce(p,g)}forEach(p){this._results.forEach(p)}some(p){return this._results.some(p)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(p,g){const b=this;b.dirty=!1;const w=ul(p);(this._changesDetected=!function MI(c,p,g){if(c.length!==p.length)return!1;for(let b=0;b<c.length;b++){let w=c[b],x=p[b];if(g&&(w=g(w),x=g(x)),x!==w)return!1}return!0}(b._results,w,g))&&(b._results=w,b.length=w.length,b.last=w[this.length-1],b.first=w[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Jm=(()=>{class c{}return c.__NG_ELEMENT_ID__=JZ,c})();const Zh=Jm,mb=class extends Zh{constructor(p,g,b){super(),this._declarationLView=p,this._declarationTContainer=g,this.elementRef=b}createEmbeddedView(p,g){const b=this._declarationTContainer.tViews,w=Ky(this._declarationLView,b,p,16,null,b.declTNode,null,null,null,null,g||null);w[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(w[19]=_.createEmbeddedView(b)),B0(b,w,p),new z0(w)}};function JZ(){return N_(to(),It())}function N_(c,p){return 4&c.type?new mb(p,c,Ry(c,p)):null}let B_=(()=>{class c{}return c.__NG_ELEMENT_ID__=r6,c})();function r6(){return fl(to(),It())}const s6=B_,o6=class extends s6{constructor(p,g,b){super(),this._lContainer=p,this._hostTNode=g,this._hostLView=b}get element(){return Ry(this._hostTNode,this._hostLView)}get injector(){return new ym(this._hostTNode,this._hostLView)}get parentInjector(){const p=fm(this._hostTNode,this._hostLView);if(xI(p)){const g=cd(p,this._hostLView),b=Dp(p);return new ym(g[1].data[b+8],g)}return new ym(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(p){const g=JF(this._lContainer);return null!==g&&g[p]||null}get length(){return this._lContainer.length-10}createEmbeddedView(p,g,b){let w,x;"number"==typeof b?w=b:null!=b&&(w=b.index,x=b.injector);const _=p.createEmbeddedView(g||{},x);return this.insert(_,w),_}createComponent(p,g,b,w,x){const _=p&&!function Za(c){return"function"==typeof c}(p);let M;if(_)M=g;else{const he=g||{};M=he.index,b=he.injector,w=he.projectableNodes,x=he.environmentInjector||he.ngModuleRef}const F=_?p:new j0(q(p)),V=b||this.parentInjector;if(!x&&null==F.ngModule){const Te=(_?V:this.parentInjector).get(Hp,null);Te&&(x=Te)}const $=F.create(V,w,void 0,x);return this.insert($.hostView,M),$}insert(p,g){const b=p._lView,w=b[1];if(function ey(c){return Fa(c[3])}(b)){const $=this.indexOf(p);if(-1!==$)this.detach($);else{const he=b[3],Te=new o6(he,he[6],he[3]);Te.detach(Te.indexOf(p))}}const x=this._adjustIndex(g),_=this._lContainer;!function BP(c,p,g,b){const w=10+b,x=g.length;b>0&&(g[w-1][4]=p),b<x-10?(p[4]=g[w],Sm(g,10+b,p)):(g.push(p),p[4]=null),p[3]=g;const _=p[17];null!==_&&g!==_&&function m5(c,p){const g=c[9];p[16]!==p[3][3][16]&&(c[2]=!0),null===g?c[9]=[p]:g.push(p)}(_,p);const M=p[19];null!==M&&M.insertView(c),p[2]|=64}(w,b,_,x);const M=pA(x,_),F=b[11],V=Tc(F,_[7]);return null!==V&&function x0(c,p,g,b,w,x){b[0]=w,b[6]=p,A0(c,b,g,1,w,x)}(w,_[6],F,b,V,M),p.attachToViewContainerRef(),Sm(Je(_),x,p),p}move(p,g){return this.insert(p,g)}indexOf(p){const g=JF(this._lContainer);return null!==g?g.indexOf(p):-1}remove(p){const g=this._adjustIndex(p,-1),b=jp(this._lContainer,g);b&&(_p(Je(this._lContainer),g),hA(b[1],b))}detach(p){const g=this._adjustIndex(p,-1),b=jp(this._lContainer,g);return b&&null!=_p(Je(this._lContainer),g)?new z0(b):null}_adjustIndex(p,g=0){return p??this.length+g}};function JF(c){return c[8]}function Je(c){return c[8]||(c[8]=[])}function fl(c,p){let g;const b=p[c.index];if(Fa(b))g=b;else{let w;if(8&c.type)w=Ws(b);else{const x=p[11];w=x.createComment("");const _=Ya(c,p);xd(x,Tc(x,_),w,function v5(c,p){return c.nextSibling(p)}(x,_),!1)}p[c.index]=g=jA(b,p,w,c),Wm(p,g)}return new o6(g,c,p)}class V_{constructor(p){this.queryList=p,this.matches=null}clone(){return new V_(this.queryList)}setDirty(){this.queryList.setDirty()}}class eN{constructor(p=[]){this.queries=p}createEmbeddedView(p){const g=p.queries;if(null!==g){const b=null!==p.contentQueries?p.contentQueries[0]:g.length,w=[];for(let x=0;x<b;x++){const _=g.getByIndex(x);w.push(this.queries[_.indexInDeclarationView].clone())}return new eN(w)}return null}insertView(p){this.dirtyQueriesWithMatches(p)}detachView(p){this.dirtyQueriesWithMatches(p)}dirtyQueriesWithMatches(p){for(let g=0;g<this.queries.length;g++)null!==MT(p,g).matches&&this.queries[g].setDirty()}}class aw{constructor(p,g,b=null){this.predicate=p,this.flags=g,this.read=b}}class AT{constructor(p=[]){this.queries=p}elementStart(p,g){for(let b=0;b<this.queries.length;b++)this.queries[b].elementStart(p,g)}elementEnd(p){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(p)}embeddedTView(p){let g=null;for(let b=0;b<this.length;b++){const w=null!==g?g.length:0,x=this.getByIndex(b).embeddedTView(p,w);x&&(x.indexInDeclarationView=b,null!==g?g.push(x):g=[x])}return null!==g?new AT(g):null}template(p,g){for(let b=0;b<this.queries.length;b++)this.queries[b].template(p,g)}getByIndex(p){return this.queries[p]}get length(){return this.queries.length}track(p){this.queries.push(p)}}class z_{constructor(p,g=-1){this.metadata=p,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(p,g){this.isApplyingToNode(g)&&this.matchTNode(p,g)}elementEnd(p){this._declarationNodeIndex===p.index&&(this._appliesToNextNode=!1)}template(p,g){this.elementStart(p,g)}embeddedTView(p,g){return this.isApplyingToNode(p)?(this.crossesNgTemplate=!0,this.addMatch(-p.index,g),new z_(this.metadata)):null}isApplyingToNode(p){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let b=p.parent;for(;null!==b&&8&b.type&&b.index!==g;)b=b.parent;return g===(null!==b?b.index:-1)}return this._appliesToNextNode}matchTNode(p,g){const b=this.metadata.predicate;if(Array.isArray(b))for(let w=0;w<b.length;w++){const x=b[w];this.matchTNodeWithReadOption(p,g,_c(g,x)),this.matchTNodeWithReadOption(p,g,vm(g,p,x,!1,!1))}else b===Jm?4&g.type&&this.matchTNodeWithReadOption(p,g,-1):this.matchTNodeWithReadOption(p,g,vm(g,p,b,!1,!1))}matchTNodeWithReadOption(p,g,b){if(null!==b){const w=this.metadata.read;if(null!==w)if(w===Pm||w===B_||w===Jm&&4&g.type)this.addMatch(g.index,-2);else{const x=vm(g,p,w,!1,!1);null!==x&&this.addMatch(g.index,x)}else this.addMatch(g.index,b)}}addMatch(p,g){null===this.matches?this.matches=[p,g]:this.matches.push(p,g)}}function _c(c,p){const g=c.localNames;if(null!==g)for(let b=0;b<g.length;b+=2)if(g[b]===p)return g[b+1];return null}function Vu(c,p,g,b){return-1===g?function tX(c,p){return 11&c.type?Ry(c,p):4&c.type?N_(c,p):null}(p,c):-2===g?function j_(c,p,g){return g===Pm?Ry(p,c):g===Jm?N_(p,c):g===B_?fl(p,c):void 0}(c,p,b):dd(c,c[1],g,p)}function tN(c,p,g,b){const w=p[19].queries[b];if(null===w.matches){const x=c.data,_=g.matches,M=[];for(let F=0;F<_.length;F+=2){const V=_[F];M.push(V<0?null:Vu(p,x[V],_[F+1],g.metadata.read))}w.matches=M}return w.matches}function ih(c,p,g,b){const w=c.queries.getByIndex(g),x=w.matches;if(null!==x){const _=tN(c,p,w,g);for(let M=0;M<x.length;M+=2){const F=x[M];if(F>0)b.push(_[M/2]);else{const V=x[M+1],$=p[-F];for(let he=10;he<$.length;he++){const Te=$[he];Te[17]===Te[3]&&ih(Te[1],Te,V,b)}if(null!==$[9]){const he=$[9];for(let Te=0;Te<he.length;Te++){const Ke=he[Te];ih(Ke[1],Ke,V,b)}}}}}return b}function _T(c){const p=It(),g=Xi(),b=WC();qC(b+1);const w=MT(g,b);if(c.dirty&&function jC(c){return 4==(4&c[2])}(p)===(2==(2&w.metadata.flags))){if(null===w.matches)c.reset([]);else{const x=w.crossesNgTemplate?ih(g,p,b,[]):tN(g,p,w,b);c.reset(x,bP),c.notifyOnChanges()}return!0}return!1}function U_(c,p,g){const b=Xi();b.firstCreatePass&&(RT(b,new aw(c,p,g),-1),2==(2&p)&&(b.staticViewQueries=!0)),lw(b,It(),p)}function vb(c,p,g,b){const w=Xi();if(w.firstCreatePass){const x=to();RT(w,new aw(p,g,b),x.index),function q_(c,p){const g=c.contentQueries||(c.contentQueries=[]);p!==(g.length?g[g.length-1]:-1)&&g.push(c.queries.length-1,p)}(w,c),2==(2&g)&&(w.staticContentQueries=!0)}lw(w,It(),g)}function kT(){return function W_(c,p){return c[19].queries[p].queryList}(It(),WC())}function lw(c,p,g){const b=new IT(4==(4&g));Jy(c,p,b,b.destroy),null===p[19]&&(p[19]=new eN),p[19].queries.push(new V_(b))}function RT(c,p,g){null===c.queries&&(c.queries=new AT),c.queries.track(new z_(p,g))}function MT(c,p){return c.queries.getByIndex(p)}function LT(c,p){return N_(c,p)}function jT(...c){}const WT=new As("Application Initializer");let mw=(()=>{class c{constructor(g){this.appInits=g,this.resolve=jT,this.reject=jT,this.initialized=!1,this.done=!1,this.donePromise=new Promise((b,w)=>{this.resolve=b,this.reject=w})}runInitializers(){if(this.initialized)return;const g=[],b=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let w=0;w<this.appInits.length;w++){const x=this.appInits[w]();if(s_(x))g.push(x);else if(o_(x)){const _=new Promise((M,F)=>{x.subscribe({complete:M,error:F})});g.push(_)}}Promise.all(g).then(()=>{b()}).catch(w=>{this.reject(w)}),0===g.length&&b(),this.initialized=!0}}return c.\u0275fac=function(g){return new(g||c)(Do(WT,8))},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const tk=new As("AppId",{providedIn:"root",factory:function ik(){return`${vw()}${vw()}${vw()}`}});function vw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const nk=new As("Platform Initializer"),mN=new As("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),qT=new As("appBootstrapListener");let rk=(()=>{class c{log(g){console.log(g)}warn(g){console.warn(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const yw=new As("LocaleId",{providedIn:"root",factory:()=>Dm(yw,fi.Optional|fi.SkipSelf)||function bN(){return typeof $localize<"u"&&$localize.locale||He}()}),sk=new As("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class ok{constructor(p,g){this.ngModuleFactory=p,this.componentFactories=g}}let GT=(()=>{class c{compileModuleSync(g){return new R_(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const b=this.compileModuleSync(g),x=pg(Pt(g).declarations).reduce((_,M)=>{const F=q(M);return F&&_.push(new j0(F)),_},[]);return new ok(b,x)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const aX=(()=>Promise.resolve(0))();function TN(c){typeof Zone>"u"?aX.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class Uu{constructor({enableLongStackTrace:p=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:b=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Va(!1),this.onMicrotaskEmpty=new Va(!1),this.onStable=new Va(!1),this.onError=new Va(!1),typeof Zone>"u")throw new St(908,!1);Zone.assertZonePatched();const w=this;if(w._nesting=0,w._outer=w._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const x=Zone.AsyncStackTaggingZoneSpec;w._inner=w._inner.fork(new x("Angular"))}Zone.TaskTrackingZoneSpec&&(w._inner=w._inner.fork(new Zone.TaskTrackingZoneSpec)),p&&Zone.longStackTraceZoneSpec&&(w._inner=w._inner.fork(Zone.longStackTraceZoneSpec)),w.shouldCoalesceEventChangeDetection=!b&&g,w.shouldCoalesceRunChangeDetection=b,w.lastRequestAnimationFrameId=-1,w.nativeRequestAnimationFrame=function y6(){let c=Oi.requestAnimationFrame,p=Oi.cancelAnimationFrame;if(typeof Zone<"u"&&c&&p){const g=c[Zone.__symbol__("OriginalDelegate")];g&&(c=g);const b=p[Zone.__symbol__("OriginalDelegate")];b&&(p=b)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:p}}().nativeRequestAnimationFrame,function ev(c){const p=()=>{!function Fd(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(Oi,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,bb(c),c.isCheckStableRunning=!0,xN(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),bb(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,b,w,x,_,M)=>{try{return Cb(c),g.invokeTask(w,x,_,M)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===x.type||c.shouldCoalesceRunChangeDetection)&&p(),$T(c)}},onInvoke:(g,b,w,x,_,M,F)=>{try{return Cb(c),g.invoke(w,x,_,M,F)}finally{c.shouldCoalesceRunChangeDetection&&p(),$T(c)}},onHasTask:(g,b,w,x)=>{g.hasTask(w,x),b===w&&("microTask"==x.change?(c._hasPendingMicrotasks=x.microTask,bb(c),xN(c)):"macroTask"==x.change&&(c.hasPendingMacrotasks=x.macroTask))},onHandleError:(g,b,w,x)=>(g.handleError(w,x),c.runOutsideAngular(()=>c.onError.emit(x)),!1)})}(w)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Uu.isInAngularZone())throw new St(909,!1)}static assertNotInAngularZone(){if(Uu.isInAngularZone())throw new St(909,!1)}run(p,g,b){return this._inner.run(p,g,b)}runTask(p,g,b,w){const x=this._inner,_=x.scheduleEventTask("NgZoneEvent: "+w,p,b6,jT,jT);try{return x.runTask(_,g,b)}finally{x.cancelTask(_)}}runGuarded(p,g,b){return this._inner.runGuarded(p,g,b)}runOutsideAngular(p){return this._outer.run(p)}}const b6={};function xN(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function bb(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function Cb(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function $T(c){c._nesting--,xN(c)}class YT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Va,this.onMicrotaskEmpty=new Va,this.onStable=new Va,this.onError=new Va}run(p,g,b){return p.apply(g,b)}runGuarded(p,g,b){return p.apply(g,b)}runOutsideAngular(p){return p()}runTask(p,g,b,w){return p.apply(g,b)}}const ko=new As(""),Nd=new As("");let ZT,nf=(()=>{class c{constructor(g,b,w){this._ngZone=g,this.registry=b,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ZT||(function IN(c){ZT=c}(w),w.addToWindow(b)),this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Uu.assertNotInAngularZone(),TN(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())TN(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(b=>!b.updateCb||!b.updateCb(g)||(clearTimeout(b.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,b,w){let x=-1;b&&b>0&&(x=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==x),g(this._didWork,this.getPendingTasks())},b)),this._callbacks.push({doneCb:g,timeoutId:x,updateCb:w})}whenStable(g,b,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,b,w),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(g){this.registry.registerApplication(g,this)}unregisterApplication(g){this.registry.unregisterApplication(g)}findProviders(g,b,w){return[]}}return c.\u0275fac=function(g){return new(g||c)(Do(Uu),Do(DN),Do(Nd))},c.\u0275prov=er({token:c,factory:c.\u0275fac}),c})(),DN=(()=>{class c{constructor(){this._applications=new Map}registerApplication(g,b){this._applications.set(g,b)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,b=!0){return ZT?.findTestabilityInTree(this,g,b)??null}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Bd=null;const XT=new As("AllowMultipleToken"),wb=new As("PlatformDestroyListeners");class Qh{constructor(p,g){this.name=p,this.token=g}}function kN(c,p,g=[]){const b=`Platform: ${p}`,w=new As(b);return(x=[])=>{let _=QT();if(!_||_.injector.get(XT,!1)){const M=[...g,...x,{provide:w,useValue:!0}];c?c(M):function hk(c){if(Bd&&!Bd.get(XT,!1))throw new St(400,!1);Bd=c;const p=c.get(dk);(function _N(c){const p=c.get(nk,null);p&&p.forEach(g=>g())})(c)}(function ck(c=[],p){return Vm.create({name:p,providers:[{provide:C0,useValue:"platform"},{provide:wb,useValue:new Set([()=>Bd=null])},...c]})}(M,b))}return function uk(c){const p=QT();if(!p)throw new St(401,!1);return p}()}}function QT(){return Bd?.get(dk)??null}let dk=(()=>{class c{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,b){const w=function fk(c,p){let g;return g="noop"===c?new YT:("zone.js"===c?void 0:c)||new Uu(p),g}(b?.ngZone,function pk(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(b)),x=[{provide:Uu,useValue:w}];return w.run(()=>{const _=Vm.create({providers:x,parent:this.injector,name:g.moduleType.name}),M=g.create(_),F=M.injector.get(My,null);if(!F)throw new St(402,!1);return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:$=>{F.handleError($)}});M.onDestroy(()=>{Eb(this._modules,M),V.unsubscribe()})}),function gk(c,p,g){try{const b=g();return s_(b)?b.catch(w=>{throw p.runOutsideAngular(()=>c.handleError(w)),w}):b}catch(b){throw p.runOutsideAngular(()=>c.handleError(b)),b}}(F,w,()=>{const V=M.injector.get(mw);return V.runInitializers(),V.donePromise.then(()=>(function w3(c){bn(c,"Expected localeId to be defined"),"string"==typeof c&&(C3=c.toLowerCase().replace(/_/g,"-"))}(M.injector.get(yw,He)||He),this._moduleDoBootstrap(M),M))})})}bootstrapModule(g,b=[]){const w=mk({},b);return function lk(c,p,g){const b=new R_(g);return Promise.resolve(b)}(0,0,g).then(x=>this.bootstrapModuleFactory(x,w))}_moduleDoBootstrap(g){const b=g.injector.get(Sb);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(w=>b.bootstrap(w));else{if(!g.instance.ngDoBootstrap)throw new St(403,!1);g.instance.ngDoBootstrap(b)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new St(404,!1);this._modules.slice().forEach(b=>b.destroy()),this._destroyListeners.forEach(b=>b());const g=this._injector.get(wb,null);g&&(g.forEach(b=>b()),g.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(g){return new(g||c)(Do(Vm))},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function mk(c,p){return Array.isArray(p)?p.reduce(mk,c):{...c,...p}}let Sb=(()=>{class c{constructor(g,b,w){this._zone=g,this._injector=b,this._exceptionHandler=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new ee.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),_=new ee.y(M=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{Uu.assertNotInAngularZone(),TN(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{Uu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{F.unsubscribe(),V.unsubscribe()}});this.isStable=(0,qe.T)(x,_.pipe((0,ht.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(g,b){const w=g instanceof JI;if(!this._injector.get(mw).done)throw!w&&et(g),new St(405,false);let _;_=w?g:this._injector.get(ky).resolveComponentFactory(g),this.componentTypes.push(_.componentType);const M=function tv(c){return c.isBoundToModule}(_)?void 0:this._injector.get(db),V=_.create(Vm.NULL,[],b||_.selector,M),$=V.location.nativeElement,he=V.injector.get(ko,null);return he?.registerApplication($),V.onDestroy(()=>{this.detachView(V.hostView),Eb(this.components,V),he?.unregisterApplication($)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new St(101,!1);try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const b=g;this._views.push(b),b.attachToAppRef(this)}detachView(g){const b=g;Eb(this._views,b),b.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(qT,[]).concat(this._bootstrapListeners).forEach(w=>w(g))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(g=>g()),this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(g){return this._destroyListeners.push(g),()=>Eb(this._destroyListeners,g)}destroy(){if(this._destroyed)throw new St(406,!1);const g=this._injector;g.destroy&&!g.destroyed&&g.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(g){return new(g||c)(Do(Uu),Do(Hp),Do(My))},c.\u0275prov=er({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Eb(c,p){const g=c.indexOf(p);g>-1&&c.splice(g,1)}let bw=!0,Cw=!1;function RN(){return Cw=!0,bw}function MN(){if(Cw)throw new Error("Cannot enable prod mode after platform setup.");bw=!1}let za=(()=>{class c{}return c.__NG_ELEMENT_ID__=Ol,c})();function Ol(c){return function bk(c,p,g){if(rd(c)&&!g){const b=ar(c.index,p);return new z0(b,b)}return 47&c.type?new z0(p[16],p):null}(to(),It(),16==(16&c))}class xb{constructor(){}supports(p){return U0(p)}create(p){return new Sk(p)}}const wk=(c,p)=>p;class Sk{constructor(p){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=p||wk}forEachItem(p){let g;for(g=this._itHead;null!==g;g=g._next)p(g)}forEachOperation(p){let g=this._itHead,b=this._removalsHead,w=0,x=null;for(;g||b;){const _=!b||g&&g.currentIndex<nx(b,w,x)?g:b,M=nx(_,w,x),F=_.currentIndex;if(_===b)w--,b=b._nextRemoved;else if(g=g._next,null==_.previousIndex)w++;else{x||(x=[]);const V=M-w,$=F-w;if(V!=$){for(let Te=0;Te<V;Te++){const Ke=Te<x.length?x[Te]:x[Te]=0,Et=Ke+Te;$<=Et&&Et<V&&(x[Te]=Ke+1)}x[_.previousIndex]=$-V}}M!==F&&p(_,M,F)}}forEachPreviousItem(p){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachMovedItem(p){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}forEachIdentityChange(p){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)p(g)}diff(p){if(null==p&&(p=[]),!U0(p))throw new St(900,!1);return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let w,x,_,g=this._itHead,b=!1;if(Array.isArray(p)){this.length=p.length;for(let M=0;M<this.length;M++)x=p[M],_=this._trackByFn(M,x),null!==g&&Object.is(g.trackById,_)?(b&&(g=this._verifyReinsertion(g,x,_,M)),Object.is(g.item,x)||this._addIdentityChange(g,x)):(g=this._mismatch(g,x,_,M),b=!0),g=g._next}else w=0,function sT(c,p){if(Array.isArray(c))for(let g=0;g<c.length;g++)p(c[g]);else{const g=c[Gm()]();let b;for(;!(b=g.next()).done;)p(b.value)}}(p,M=>{_=this._trackByFn(w,M),null!==g&&Object.is(g.trackById,_)?(b&&(g=this._verifyReinsertion(g,M,_,w)),Object.is(g.item,M)||this._addIdentityChange(g,M)):(g=this._mismatch(g,M,_,w),b=!0),g=g._next,w++}),this.length=w;return this._truncate(g),this.collection=p,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let p;for(p=this._previousItHead=this._itHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._additionsHead;null!==p;p=p._nextAdded)p.previousIndex=p.currentIndex;for(this._additionsHead=this._additionsTail=null,p=this._movesHead;null!==p;p=p._nextMoved)p.previousIndex=p.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(p,g,b,w){let x;return null===p?x=this._itTail:(x=p._prev,this._remove(p)),null!==(p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._reinsertAfter(p,x,w)):null!==(p=null===this._linkedRecords?null:this._linkedRecords.get(b,w))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._moveAfter(p,x,w)):p=this._addAfter(new Cg(g,b),x,w),p}_verifyReinsertion(p,g,b,w){let x=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null);return null!==x?p=this._reinsertAfter(x,p._prev,w):p.currentIndex!=w&&(p.currentIndex=w,this._addToMoves(p,w)),p}_truncate(p){for(;null!==p;){const g=p._next;this._addToRemovals(this._unlink(p)),p=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(p,g,b){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(p);const w=p._prevRemoved,x=p._nextRemoved;return null===w?this._removalsHead=x:w._nextRemoved=x,null===x?this._removalsTail=w:x._prevRemoved=w,this._insertAfter(p,g,b),this._addToMoves(p,b),p}_moveAfter(p,g,b){return this._unlink(p),this._insertAfter(p,g,b),this._addToMoves(p,b),p}_addAfter(p,g,b){return this._insertAfter(p,g,b),this._additionsTail=null===this._additionsTail?this._additionsHead=p:this._additionsTail._nextAdded=p,p}_insertAfter(p,g,b){const w=null===g?this._itHead:g._next;return p._next=w,p._prev=g,null===w?this._itTail=p:w._prev=p,null===g?this._itHead=p:g._next=p,null===this._linkedRecords&&(this._linkedRecords=new Ek),this._linkedRecords.put(p),p.currentIndex=b,p}_remove(p){return this._addToRemovals(this._unlink(p))}_unlink(p){null!==this._linkedRecords&&this._linkedRecords.remove(p);const g=p._prev,b=p._next;return null===g?this._itHead=b:g._next=b,null===b?this._itTail=g:b._prev=g,p}_addToMoves(p,g){return p.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=p:this._movesTail._nextMoved=p),p}_addToRemovals(p){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ek),this._unlinkedRecords.put(p),p.currentIndex=null,p._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=p,p._prevRemoved=null):(p._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=p),p}_addIdentityChange(p,g){return p.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=p:this._identityChangesTail._nextIdentityChange=p,p}}class Cg{constructor(p,g){this.item=p,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ix{constructor(){this._head=null,this._tail=null}add(p){null===this._head?(this._head=this._tail=p,p._nextDup=null,p._prevDup=null):(this._tail._nextDup=p,p._prevDup=this._tail,p._nextDup=null,this._tail=p)}get(p,g){let b;for(b=this._head;null!==b;b=b._nextDup)if((null===g||g<=b.currentIndex)&&Object.is(b.trackById,p))return b;return null}remove(p){const g=p._prevDup,b=p._nextDup;return null===g?this._head=b:g._nextDup=b,null===b?this._tail=g:b._prevDup=g,null===this._head}}class Ek{constructor(){this.map=new Map}put(p){const g=p.trackById;let b=this.map.get(g);b||(b=new ix,this.map.set(g,b)),b.add(p)}get(p,g){const w=this.map.get(p);return w?w.get(p,g):null}remove(p){const g=p.trackById;return this.map.get(g).remove(p)&&this.map.delete(g),p}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function nx(c,p,g){const b=c.previousIndex;if(null===b)return b;let w=0;return g&&b<g.length&&(w=g[b]),b+p+w}class af{constructor(){}supports(p){return p instanceof Map||oT(p)}create(){return new T6}}class T6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(p){let g;for(g=this._mapHead;null!==g;g=g._next)p(g)}forEachPreviousItem(p){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)p(g)}forEachChangedItem(p){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}diff(p){if(p){if(!(p instanceof Map||oT(p)))throw new St(900,!1)}else p=new Map;return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(p,(b,w)=>{if(g&&g.key===w)this._maybeAddToChanges(g,b),this._appendAfter=g,g=g._next;else{const x=this._getOrCreateRecordForKey(w,b);g=this._insertBeforeOrAppend(g,x)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let b=g;null!==b;b=b._nextRemoved)b===this._mapHead&&(this._mapHead=null),this._records.delete(b.key),b._nextRemoved=b._next,b.previousValue=b.currentValue,b.currentValue=null,b._prev=null,b._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(p,g){if(p){const b=p._prev;return g._next=p,g._prev=b,p._prev=g,b&&(b._next=g),p===this._mapHead&&(this._mapHead=g),this._appendAfter=p,p}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(p,g){if(this._records.has(p)){const w=this._records.get(p);this._maybeAddToChanges(w,g);const x=w._prev,_=w._next;return x&&(x._next=_),_&&(_._prev=x),w._next=null,w._prev=null,w}const b=new x6(p);return this._records.set(p,b),b.currentValue=g,this._addToAdditions(b),b}_reset(){if(this.isDirty){let p;for(this._previousMapHead=this._mapHead,p=this._previousMapHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._changesHead;null!==p;p=p._nextChanged)p.previousValue=p.currentValue;for(p=this._additionsHead;null!=p;p=p._nextAdded)p.previousValue=p.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(p,g){Object.is(g,p.currentValue)||(p.previousValue=p.currentValue,p.currentValue=g,this._addToChanges(p))}_addToAdditions(p){null===this._additionsHead?this._additionsHead=this._additionsTail=p:(this._additionsTail._nextAdded=p,this._additionsTail=p)}_addToChanges(p){null===this._changesHead?this._changesHead=this._changesTail=p:(this._changesTail._nextChanged=p,this._changesTail=p)}_forEach(p,g){p instanceof Map?p.forEach(g):Object.keys(p).forEach(b=>g(p[b],b))}}class x6{constructor(p){this.key=p,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Tk(){return new rx([new xb])}let rx=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(null!=b){const w=b.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||Tk()),deps:[[c,new yd,new vd]]}}find(g){const b=this.factories.find(w=>w.supports(g));if(null!=b)return b;throw new St(901,!1)}}return c.\u0275prov=er({token:c,providedIn:"root",factory:Tk}),c})();function xk(){return new Db([new af])}let Db=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(b){const w=b.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||xk()),deps:[[c,new yd,new vd]]}}find(g){const b=this.factories.find(w=>w.supports(g));if(b)return b;throw new St(901,!1)}}return c.\u0275prov=er({token:c,providedIn:"root",factory:xk}),c})();const Ik=kN(null,"core",[]);let Ak=(()=>{class c{constructor(g){}}return c.\u0275fac=function(g){return new(g||c)(Do(Sb))},c.\u0275mod=Bn({type:c}),c.\u0275inj=rn({}),c})();function _k(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}},3942:(Wi,kt,ne)=>{ne.d(kt,{Z:()=>St});var v=ne(2090),ue=ne(4859),ee=ne(9681),qe=ne(1877);class ht{constructor(gt,nt){this._delegate=gt,this.firebase=nt,(0,ee._addComponent)(gt,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=gt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(gt){this._delegate.automaticDataCollectionEnabled=gt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(gt=>{this._delegate.checkDestroyed(),gt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(gt,nt=ee._DEFAULT_ENTRY_NAME){var xi;this._delegate.checkDestroyed();const hi=this._delegate.container.getProvider(gt);return!hi.isInitialized()&&"EXPLICIT"===(null===(xi=hi.getComponent())||void 0===xi?void 0:xi.instantiationMode)&&hi.initialize(),hi.getImmediate({identifier:nt})}_removeServiceInstance(gt,nt=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(gt).clearInstance(nt)}_addComponent(gt){(0,ee._addComponent)(this._delegate,gt)}_addOrOverwriteComponent(gt){(0,ee._addOrOverwriteComponent)(this._delegate,gt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const it=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function dt(){const ci=function ut(ci){const gt={},nt={__esModule:!0,initializeApp:function Ot(je,Qe={}){const mt=ee.initializeApp(je,Qe);if((0,v.r3)(gt,mt.name))return gt[mt.name];const Fe=new ci(mt,nt);return gt[mt.name]=Fe,Fe},app:hi,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function yt(je){const Qe=je.name,mt=Qe.replace("-compat","");if(ee._registerComponent(je)&&"PUBLIC"===je.type){const Fe=(Be=hi())=>{if("function"!=typeof Be[mt])throw it.create("invalid-app-argument",{appName:Qe});return Be[mt]()};void 0!==je.serviceProps&&(0,v.ZB)(Fe,je.serviceProps),nt[mt]=Fe,ci.prototype[mt]=function(...Be){return this._getService.bind(this,Qe).apply(this,je.multipleInstances?Be:[])}}return"PUBLIC"===je.type?nt[mt]:null},removeApp:function xi(je){delete gt[je]},useAsService:function ii(je,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:ee}};function hi(je){if(!(0,v.r3)(gt,je=je||ee._DEFAULT_ENTRY_NAME))throw it.create("no-app",{appName:je});return gt[je]}return nt.default=nt,Object.defineProperty(nt,"apps",{get:function Mt(){return Object.keys(gt).map(je=>gt[je])}}),hi.App=ci,nt}(ht);return ci.INTERNAL=Object.assign(Object.assign({},ci.INTERNAL),{createFirebaseNamespace:dt,extendNamespace:function gt(nt){(0,v.ZB)(ci,nt)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),ci}(),we=new qe.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ci=self.firebase.SDK_VERSION;ci&&ci.indexOf("LITE")>=0&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const St=Ce;!function wt(ci){(0,ee.registerVersion)("@firebase/app-compat","0.1.39",ci)}()},9681:(Wi,kt,ne)=>{ne.r(kt),ne.d(kt,{FirebaseError:()=>qe.ZR,SDK_VERSION:()=>Sa,_DEFAULT_ENTRY_NAME:()=>bn,_addComponent:()=>vr,_addOrOverwriteComponent:()=>er,_apps:()=>Er,_clearComponents:()=>La,_components:()=>Ds,_getProvider:()=>rn,_registerComponent:()=>_n,_removeServiceInstance:()=>Xr,deleteApp:()=>Oa,getApp:()=>Ms,getApps:()=>No,initializeApp:()=>Us,onLog:()=>Is,registerVersion:()=>Nr,setLogLevel:()=>_r});var v=ne(5861),ue=ne(4859),ee=ne(1877),qe=ne(2090),ht=ne(8766);class pt{constructor(xt){this.container=xt}getPlatformInfoString(){return this.container.getProviders().map(vi=>{if(function it(di){return"VERSION"===di.getComponent()?.type}(vi)){const Zi=vi.getImmediate();return`${Zi.library}/${Zi.version}`}return null}).filter(vi=>vi).join(" ")}}const ut="@firebase/app",Ce=new ee.Yd("@firebase/app"),bn="[DEFAULT]",ti={[ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Er=new Map,Ds=new Map;function vr(di,xt){try{di.container.addComponent(xt)}catch(vi){Ce.debug(`Component ${xt.name} failed to register with FirebaseApp ${di.name}`,vi)}}function er(di,xt){di.container.addOrOverwriteComponent(xt)}function _n(di){const xt=di.name;if(Ds.has(xt))return Ce.debug(`There were multiple attempts to register component ${xt}.`),!1;Ds.set(xt,di);for(const vi of Er.values())vr(vi,di);return!0}function rn(di,xt){const vi=di.container.getProvider("heartbeat").getImmediate({optional:!0});return vi&&vi.triggerHeartbeat(),di.container.getProvider(xt)}function Xr(di,xt,vi=bn){rn(di,xt).clearInstance(vi)}function La(){Ds.clear()}const ys=new qe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Xs{constructor(xt,vi,Zi){this._isDeleted=!1,this._options=Object.assign({},xt),this._config=Object.assign({},vi),this._name=vi.name,this._automaticDataCollectionEnabled=vi.automaticDataCollectionEnabled,this._container=Zi,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xt){this.checkDestroyed(),this._automaticDataCollectionEnabled=xt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(xt){this._isDeleted=xt}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}const Sa="9.14.0";function Us(di,xt={}){let vi=di;"object"!=typeof xt&&(xt={name:xt});const Zi=Object.assign({name:bn,automaticDataCollectionEnabled:!1},xt),an=Zi.name;if("string"!=typeof an||!an)throw ys.create("bad-app-name",{appName:String(an)});if(vi||(vi=(0,qe.aH)()),!vi)throw ys.create("no-options");const Bn=Er.get(an);if(Bn){if((0,qe.vZ)(vi,Bn.options)&&(0,qe.vZ)(Zi,Bn.config))return Bn;throw ys.create("duplicate-app",{appName:an})}const be=new ue.H0(an);for(const J of Ds.values())be.addComponent(J);const fe=new Xs(vi,Zi,be);return Er.set(an,fe),fe}function Ms(di=bn){const xt=Er.get(di);if(!xt&&di===bn)return Us();if(!xt)throw ys.create("no-app",{appName:di});return xt}function No(){return Array.from(Er.values())}function Oa(di){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(di){const xt=di.name;Er.has(xt)&&(Er.delete(xt),yield Promise.all(di.container.getProviders().map(vi=>vi.delete())),di.isDeleted=!0)})).apply(this,arguments)}function Nr(di,xt,vi){var Zi;let an=null!==(Zi=ti[di])&&void 0!==Zi?Zi:di;vi&&(an+=`-${vi}`);const Bn=an.match(/\s|\//),be=xt.match(/\s|\//);if(Bn||be){const fe=[`Unable to register library "${an}" with version "${xt}":`];return Bn&&fe.push(`library name "${an}" contains illegal characters (whitespace or "/")`),Bn&&be&&fe.push("and"),be&&fe.push(`version name "${xt}" contains illegal characters (whitespace or "/")`),void Ce.warn(fe.join(" "))}_n(new ue.wA(`${an}-version`,()=>({library:an,version:xt}),"VERSION"))}function Is(di,xt){if(null!==di&&"function"!=typeof di)throw ys.create("invalid-log-argument");(0,ee.Am)(di,xt)}function _r(di){(0,ee.Ub)(di)}const Ur="firebase-heartbeat-store";let Qr=null;function or(){return Qr||(Qr=(0,ht.X3)("firebase-heartbeat-database",1,{upgrade:(di,xt)=>{0===xt&&di.createObjectStore(Ur)}}).catch(di=>{throw ys.create("idb-open",{originalErrorMessage:di.message})})),Qr}function Li(){return(Li=(0,v.Z)(function*(di){var xt;try{return(yield or()).transaction(Ur).objectStore(Ur).get(Qs(di))}catch(vi){if(vi instanceof qe.ZR)Ce.warn(vi.message);else{const Zi=ys.create("idb-get",{originalErrorMessage:null===(xt=vi)||void 0===xt?void 0:xt.message});Ce.warn(Zi.message)}}})).apply(this,arguments)}function Oi(di,xt){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,v.Z)(function*(di,xt){var vi;try{const an=(yield or()).transaction(Ur,"readwrite");return yield an.objectStore(Ur).put(xt,Qs(di)),an.done}catch(Zi){if(Zi instanceof qe.ZR)Ce.warn(Zi.message);else{const an=ys.create("idb-set",{originalErrorMessage:null===(vi=Zi)||void 0===vi?void 0:vi.message});Ce.warn(an.message)}}})).apply(this,arguments)}function Qs(di){return`${di.name}!${di.options.appId}`}class uo{constructor(xt){this.container=xt,this._heartbeatsCache=null;const vi=this.container.getProvider("app").getImmediate();this._storage=new Fn(vi),this._heartbeatsCachePromise=this._storage.read().then(Zi=>(this._heartbeatsCache=Zi,Zi))}triggerHeartbeat(){var xt=this;return(0,v.Z)(function*(){const Zi=xt.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),an=vn();if(null===xt._heartbeatsCache&&(xt._heartbeatsCache=yield xt._heartbeatsCachePromise),xt._heartbeatsCache.lastSentHeartbeatDate!==an&&!xt._heartbeatsCache.heartbeats.some(Bn=>Bn.date===an))return xt._heartbeatsCache.heartbeats.push({date:an,agent:Zi}),xt._heartbeatsCache.heartbeats=xt._heartbeatsCache.heartbeats.filter(Bn=>{const be=new Date(Bn.date).valueOf();return Date.now()-be<=2592e6}),xt._storage.overwrite(xt._heartbeatsCache)})()}getHeartbeatsHeader(){var xt=this;return(0,v.Z)(function*(){if(null===xt._heartbeatsCache&&(yield xt._heartbeatsCachePromise),null===xt._heartbeatsCache||0===xt._heartbeatsCache.heartbeats.length)return"";const vi=vn(),{heartbeatsToSend:Zi,unsentEntries:an}=function xo(di,xt=1024){const vi=[];let Zi=di.slice();for(const an of di){const Bn=vi.find(be=>be.agent===an.agent);if(Bn){if(Bn.dates.push(an.date),Js(vi)>xt){Bn.dates.pop();break}}else if(vi.push({agent:an.agent,dates:[an.date]}),Js(vi)>xt){vi.pop();break}Zi=Zi.slice(1)}return{heartbeatsToSend:vi,unsentEntries:Zi}}(xt._heartbeatsCache.heartbeats),Bn=(0,qe.L)(JSON.stringify({version:2,heartbeats:Zi}));return xt._heartbeatsCache.lastSentHeartbeatDate=vi,an.length>0?(xt._heartbeatsCache.heartbeats=an,yield xt._storage.overwrite(xt._heartbeatsCache)):(xt._heartbeatsCache.heartbeats=[],xt._storage.overwrite(xt._heartbeatsCache)),Bn})()}}function vn(){return(new Date).toISOString().substring(0,10)}class Fn{constructor(xt){this.app=xt,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,qe.hl)()&&(0,qe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var xt=this;return(0,v.Z)(function*(){return(yield xt._canUseIndexedDBPromise)&&(yield function Fi(di){return Li.apply(this,arguments)}(xt.app))||{heartbeats:[]}})()}overwrite(xt){var vi=this;return(0,v.Z)(function*(){var Zi;if(yield vi._canUseIndexedDBPromise){const Bn=yield vi.read();return Oi(vi.app,{lastSentHeartbeatDate:null!==(Zi=xt.lastSentHeartbeatDate)&&void 0!==Zi?Zi:Bn.lastSentHeartbeatDate,heartbeats:xt.heartbeats})}})()}add(xt){var vi=this;return(0,v.Z)(function*(){var Zi;if(yield vi._canUseIndexedDBPromise){const Bn=yield vi.read();return Oi(vi.app,{lastSentHeartbeatDate:null!==(Zi=xt.lastSentHeartbeatDate)&&void 0!==Zi?Zi:Bn.lastSentHeartbeatDate,heartbeats:[...Bn.heartbeats,...xt.heartbeats]})}})()}}function Js(di){return(0,qe.L)(JSON.stringify({version:2,heartbeats:di})).length}!function ps(di){_n(new ue.wA("platform-logger",xt=>new pt(xt),"PRIVATE")),_n(new ue.wA("heartbeat",xt=>new uo(xt),"PRIVATE")),Nr(ut,"0.8.4",di),Nr(ut,"0.8.4","esm2017"),Nr("fire-js","")}("")},4859:(Wi,kt,ne)=>{ne.d(kt,{H0:()=>ut,wA:()=>ee,zt:()=>ht});var v=ne(5861),ue=ne(2090);class ee{constructor(Ce,we,Pe){this.name=Ce,this.instanceFactory=we,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const qe="[DEFAULT]";class ht{constructor(Ce,we){this.name=Ce,this.container=we,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const we=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(we)){const Pe=new ue.BH;if(this.instancesDeferred.set(we,Pe),this.isInitialized(we)||this.shouldAutoInitialize())try{const Lt=this.getOrInitializeService({instanceIdentifier:we});Lt&&Pe.resolve(Lt)}catch{}}return this.instancesDeferred.get(we).promise}getImmediate(Ce){var we;const Pe=this.normalizeInstanceIdentifier(Ce?.identifier),Lt=null!==(we=Ce?.optional)&&void 0!==we&&we;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(Lt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(wt){if(Lt)return null;throw wt}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function it(dt){return"EAGER"===dt.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:qe})}catch{}for(const[we,Pe]of this.instancesDeferred.entries()){const Lt=this.normalizeInstanceIdentifier(we);try{const wt=this.getOrInitializeService({instanceIdentifier:Lt});Pe.resolve(wt)}catch{}}}}clearInstance(Ce=qe){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,v.Z)(function*(){const we=Array.from(Ce.instances.values());yield Promise.all([...we.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...we.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=qe){return this.instances.has(Ce)}getOptions(Ce=qe){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:we={}}=Ce,Pe=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Lt=this.getOrInitializeService({instanceIdentifier:Pe,options:we});for(const[wt,St]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(wt)&&St.resolve(Lt);return Lt}onInit(Ce,we){var Pe;const Lt=this.normalizeInstanceIdentifier(we),wt=null!==(Pe=this.onInitCallbacks.get(Lt))&&void 0!==Pe?Pe:new Set;wt.add(Ce),this.onInitCallbacks.set(Lt,wt);const St=this.instances.get(Lt);return St&&Ce(St,Lt),()=>{wt.delete(Ce)}}invokeOnInitCallbacks(Ce,we){const Pe=this.onInitCallbacks.get(we);if(Pe)for(const Lt of Pe)try{Lt(Ce,we)}catch{}}getOrInitializeService({instanceIdentifier:Ce,options:we={}}){let Pe=this.instances.get(Ce);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(dt=Ce,dt===qe?void 0:dt),options:we}),this.instances.set(Ce,Pe),this.instancesOptions.set(Ce,we),this.invokeOnInitCallbacks(Pe,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,Pe)}catch{}var dt;return Pe||null}normalizeInstanceIdentifier(Ce=qe){return this.component?this.component.multipleInstances?Ce:qe:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ut{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const we=this.getProvider(Ce.name);if(we.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);we.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const we=new ht(Ce,this);return this.providers.set(Ce,we),we}getProviders(){return Array.from(this.providers.values())}}},2833:(Wi,kt,ne)=>{var v=ne(5861),ue=ne(9681),ee=ne(4859),qe=ne(2090),ht=ne(8766);const pt="@firebase/installations",it="0.5.16",dt=`w:${it}`,Ce="FIS_v2",ci=new qe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(ze){return ze instanceof qe.ZR&&ze.code.includes("request-failed")}function nt({projectId:ze}){return`https://firebaseinstallations.googleapis.com/v1/projects/${ze}/installations`}function xi(ze){return{token:ze.token,requestStatus:2,expiresIn:Qe(ze.expiresIn),creationTime:Date.now()}}function hi(ze,vt){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,v.Z)(function*(ze,vt){const Ni=(yield vt.json()).error;return ci.create("request-failed",{requestName:ze,serverCode:Ni.code,serverMessage:Ni.message,serverStatus:Ni.status})})).apply(this,arguments)}function Mt({apiKey:ze}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":ze})}function yt(ze,{refreshToken:vt}){const qt=Mt(ze);return qt.append("Authorization",function mt(ze){return`${Ce} ${ze}`}(vt)),qt}function ii(ze){return je.apply(this,arguments)}function je(){return(je=(0,v.Z)(function*(ze){const vt=yield ze();return vt.status>=500&&vt.status<600?ze():vt})).apply(this,arguments)}function Qe(ze){return Number(ze.replace("s","000"))}function Fe(ze,vt){return Be.apply(this,arguments)}function Be(){return(Be=(0,v.Z)(function*({appConfig:ze,heartbeatServiceProvider:vt},{fid:qt}){const Ni=nt(ze),Hn=Mt(ze),yr=vt.getImmediate({optional:!0});if(yr){const Ea=yield yr.getHeartbeatsHeader();Ea&&Hn.append("x-firebase-client",Ea)}const os={method:"POST",headers:Hn,body:JSON.stringify({fid:qt,authVersion:Ce,appId:ze.appId,sdkVersion:dt})},Pa=yield ii(()=>fetch(Ni,os));if(Pa.ok){const Ea=yield Pa.json();return{fid:Ea.fid||qt,registrationStatus:2,refreshToken:Ea.refreshToken,authToken:xi(Ea.authToken)}}throw yield hi("Create Installation",Pa)})).apply(this,arguments)}function st(ze){return new Promise(vt=>{setTimeout(vt,ze)})}const zt=/^[cdef][\w-]{21}$/;function Vi(){try{const ze=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(ze),ze[0]=112+ze[0]%16;const qt=function Jn(ze){return function $e(ze){return btoa(String.fromCharCode(...ze)).replace(/\+/g,"-").replace(/\//g,"_")}(ze).substr(0,22)}(ze);return zt.test(qt)?qt:""}catch{return""}}function bn(ze){return`${ze.appName}!${ze.appId}`}const ti=new Map;function Er(ze,vt){const qt=bn(ze);er(qt,vt),function _n(ze,vt){const qt=function Xr(){return!rn&&"BroadcastChannel"in self&&(rn=new BroadcastChannel("[Firebase] FID Change"),rn.onmessage=ze=>{er(ze.data.key,ze.data.fid)}),rn}();qt&&qt.postMessage({key:ze,fid:vt}),function La(){0===ti.size&&rn&&(rn.close(),rn=null)}()}(qt,vt)}function er(ze,vt){const qt=ti.get(ze);if(qt)for(const Ni of qt)Ni(vt)}let rn=null;const Xs="firebase-installations-store";let Sa=null;function Us(){return Sa||(Sa=(0,ht.X3)("firebase-installations-database",1,{upgrade:(ze,vt)=>{0===vt&&ze.createObjectStore(Xs)}})),Sa}function Ms(ze,vt){return No.apply(this,arguments)}function No(){return(No=(0,v.Z)(function*(ze,vt){const qt=bn(ze),Hn=(yield Us()).transaction(Xs,"readwrite"),yr=Hn.objectStore(Xs),fs=yield yr.get(qt);return yield yr.put(vt,qt),yield Hn.done,(!fs||fs.fid!==vt.fid)&&Er(ze,vt.fid),vt})).apply(this,arguments)}function Oa(ze){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(ze){const vt=bn(ze),Ni=(yield Us()).transaction(Xs,"readwrite");yield Ni.objectStore(Xs).delete(vt),yield Ni.done})).apply(this,arguments)}function Nr(ze,vt){return Is.apply(this,arguments)}function Is(){return(Is=(0,v.Z)(function*(ze,vt){const qt=bn(ze),Hn=(yield Us()).transaction(Xs,"readwrite"),yr=Hn.objectStore(Xs),fs=yield yr.get(qt),os=vt(fs);return void 0===os?yield yr.delete(qt):yield yr.put(os,qt),yield Hn.done,os&&(!fs||fs.fid!==os.fid)&&Er(ze,os.fid),os})).apply(this,arguments)}function _r(ze){return lo.apply(this,arguments)}function lo(){return(lo=(0,v.Z)(function*(ze){let vt;const qt=yield Nr(ze.appConfig,Ni=>{const Hn=ea(Ni),yr=Ur(ze,Hn);return vt=yr.registrationPromise,yr.installationEntry});return""===qt.fid?{installationEntry:yield vt}:{installationEntry:qt,registrationPromise:vt}})).apply(this,arguments)}function ea(ze){return Kr(ze||{fid:Vi(),registrationStatus:0})}function Ur(ze,vt){if(0===vt.registrationStatus){if(!navigator.onLine)return{installationEntry:vt,registrationPromise:Promise.reject(ci.create("app-offline"))};const qt={fid:vt.fid,registrationStatus:1,registrationTime:Date.now()},Ni=function Qr(ze,vt){return or.apply(this,arguments)}(ze,qt);return{installationEntry:qt,registrationPromise:Ni}}return 1===vt.registrationStatus?{installationEntry:vt,registrationPromise:Fi(ze)}:{installationEntry:vt}}function or(){return(or=(0,v.Z)(function*(ze,vt){try{const qt=yield Fe(ze,vt);return Ms(ze.appConfig,qt)}catch(qt){throw gt(qt)&&409===qt.customData.serverCode?yield Oa(ze.appConfig):yield Ms(ze.appConfig,{fid:vt.fid,registrationStatus:0}),qt}})).apply(this,arguments)}function Fi(ze){return Li.apply(this,arguments)}function Li(){return(Li=(0,v.Z)(function*(ze){let vt=yield Oi(ze.appConfig);for(;1===vt.registrationStatus;)yield st(100),vt=yield Oi(ze.appConfig);if(0===vt.registrationStatus){const{installationEntry:qt,registrationPromise:Ni}=yield _r(ze);return Ni||qt}return vt})).apply(this,arguments)}function Oi(ze){return Nr(ze,vt=>{if(!vt)throw ci.create("installation-not-found");return Kr(vt)})}function Kr(ze){return function Qs(ze){return 1===ze.registrationStatus&&ze.registrationTime+1e4<Date.now()}(ze)?{fid:ze.fid,registrationStatus:0}:ze}function ho(ze,vt){return hn.apply(this,arguments)}function hn(){return(hn=(0,v.Z)(function*({appConfig:ze,heartbeatServiceProvider:vt},qt){const Ni=uo(ze,qt),Hn=yt(ze,qt),yr=vt.getImmediate({optional:!0});if(yr){const Ea=yield yr.getHeartbeatsHeader();Ea&&Hn.append("x-firebase-client",Ea)}const os={method:"POST",headers:Hn,body:JSON.stringify({installation:{sdkVersion:dt,appId:ze.appId}})},Pa=yield ii(()=>fetch(Ni,os));if(Pa.ok)return xi(yield Pa.json());throw yield hi("Generate Auth Token",Pa)})).apply(this,arguments)}function uo(ze,{fid:vt}){return`${nt(ze)}/${vt}/authTokens:generate`}function vn(ze){return xo.apply(this,arguments)}function xo(){return(xo=(0,v.Z)(function*(ze,vt=!1){let qt;const Ni=yield Nr(ze.appConfig,yr=>{if(!vi(yr))throw ci.create("not-registered");const fs=yr.authToken;if(!vt&&Zi(fs))return yr;if(1===fs.requestStatus)return qt=Fn(ze,vt),yr;{if(!navigator.onLine)throw ci.create("app-offline");const os=Bn(yr);return qt=di(ze,os),os}});return qt?yield qt:Ni.authToken})).apply(this,arguments)}function Fn(ze,vt){return Js.apply(this,arguments)}function Js(){return(Js=(0,v.Z)(function*(ze,vt){let qt=yield ps(ze.appConfig);for(;1===qt.authToken.requestStatus;)yield st(100),qt=yield ps(ze.appConfig);const Ni=qt.authToken;return 0===Ni.requestStatus?vn(ze,vt):Ni})).apply(this,arguments)}function ps(ze){return Nr(ze,vt=>{if(!vi(vt))throw ci.create("not-registered");return function be(ze){return 1===ze.requestStatus&&ze.requestTime+1e4<Date.now()}(vt.authToken)?Object.assign(Object.assign({},vt),{authToken:{requestStatus:0}}):vt})}function di(ze,vt){return xt.apply(this,arguments)}function xt(){return(xt=(0,v.Z)(function*(ze,vt){try{const qt=yield ho(ze,vt),Ni=Object.assign(Object.assign({},vt),{authToken:qt});return yield Ms(ze.appConfig,Ni),qt}catch(qt){if(!gt(qt)||401!==qt.customData.serverCode&&404!==qt.customData.serverCode){const Ni=Object.assign(Object.assign({},vt),{authToken:{requestStatus:0}});yield Ms(ze.appConfig,Ni)}else yield Oa(ze.appConfig);throw qt}})).apply(this,arguments)}function vi(ze){return void 0!==ze&&2===ze.registrationStatus}function Zi(ze){return 2===ze.requestStatus&&!function an(ze){const vt=Date.now();return vt<ze.creationTime||ze.creationTime+ze.expiresIn<vt+36e5}(ze)}function Bn(ze){const vt={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},ze),{authToken:vt})}function J(){return(J=(0,v.Z)(function*(ze){const vt=ze,{installationEntry:qt,registrationPromise:Ni}=yield _r(vt);return Ni?Ni.catch(console.error):vn(vt).catch(console.error),qt.fid})).apply(this,arguments)}function q(){return(q=(0,v.Z)(function*(ze,vt=!1){const qt=ze;return yield Z(qt),(yield vn(qt,vt)).token})).apply(this,arguments)}function Z(ze){return ye.apply(this,arguments)}function ye(){return(ye=(0,v.Z)(function*(ze){const{registrationPromise:vt}=yield _r(ze);vt&&(yield vt)})).apply(this,arguments)}function Ln(ze){return ci.create("missing-app-config-values",{valueName:ze})}const ll="installations",Nh=ze=>{const vt=ze.getProvider("app").getImmediate(),qt=function un(ze){if(!ze||!ze.options)throw Ln("App Configuration");if(!ze.name)throw Ln("App Name");const vt=["projectId","apiKey","appId"];for(const qt of vt)if(!ze.options[qt])throw Ln(qt);return{appName:ze.name,projectId:ze.options.projectId,apiKey:ze.options.apiKey,appId:ze.options.appId}}(vt);return{app:vt,appConfig:qt,heartbeatServiceProvider:(0,ue._getProvider)(vt,"heartbeat"),_delete:()=>Promise.resolve()}},Cu=ze=>{const vt=ze.getProvider("app").getImmediate(),qt=(0,ue._getProvider)(vt,ll).getImmediate();return{getId:()=>function fe(ze){return J.apply(this,arguments)}(qt),getToken:Hn=>function Y(ze){return q.apply(this,arguments)}(qt,Hn)}};(function Ki(){(0,ue._registerComponent)(new ee.wA(ll,Nh,"PUBLIC")),(0,ue._registerComponent)(new ee.wA("installations-internal",Cu,"PRIVATE"))})(),(0,ue.registerVersion)(pt,it),(0,ue.registerVersion)(pt,it,"esm2017")},1877:(Wi,kt,ne)=>{ne.d(kt,{Am:()=>dt,Ub:()=>ut,Yd:()=>it,in:()=>ue});const v=[];var ue=(()=>{return(Ce=ue||(ue={}))[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",ue;var Ce})();const ee={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},qe=ue.INFO,ht={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},pt=(Ce,we,...Pe)=>{if(we<Ce.logLevel)return;const Lt=(new Date).toISOString(),wt=ht[we];if(!wt)throw new Error(`Attempted to log a message with an invalid logType (value: ${we})`);console[wt](`[${Lt}]  ${Ce.name}:`,...Pe)};class it{constructor(we){this.name=we,this._logLevel=qe,this._logHandler=pt,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(we){if(!(we in ue))throw new TypeError(`Invalid value "${we}" assigned to \`logLevel\``);this._logLevel=we}setLogLevel(we){this._logLevel="string"==typeof we?ee[we]:we}get logHandler(){return this._logHandler}set logHandler(we){if("function"!=typeof we)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=we}get userLogHandler(){return this._userLogHandler}set userLogHandler(we){this._userLogHandler=we}debug(...we){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...we),this._logHandler(this,ue.DEBUG,...we)}log(...we){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...we),this._logHandler(this,ue.VERBOSE,...we)}info(...we){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...we),this._logHandler(this,ue.INFO,...we)}warn(...we){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...we),this._logHandler(this,ue.WARN,...we)}error(...we){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...we),this._logHandler(this,ue.ERROR,...we)}}function ut(Ce){v.forEach(we=>{we.setLogLevel(Ce)})}function dt(Ce,we){for(const Pe of v){let Lt=null;we&&we.level&&(Lt=ee[we.level]),Pe.userLogHandler=null===Ce?null:(wt,St,...ci)=>{const gt=ci.map(nt=>{if(null==nt)return null;if("string"==typeof nt)return nt;if("number"==typeof nt||"boolean"==typeof nt)return nt.toString();if(nt instanceof Error)return nt.message;try{return JSON.stringify(nt)}catch{return null}}).filter(nt=>nt).join(" ");St>=(Lt??wt.logLevel)&&Ce({level:ue[St].toLowerCase(),message:gt,args:ci,type:wt.name})}}}},8766:(Wi,kt,ne)=>{ne.d(kt,{Lj:()=>Ot,X3:()=>hi});var v=ne(5861);let ee,qe;const it=new WeakMap,ut=new WeakMap,dt=new WeakMap,Ce=new WeakMap,we=new WeakMap;let wt={get(Qe,mt,Fe){if(Qe instanceof IDBTransaction){if("done"===mt)return ut.get(Qe);if("objectStoreNames"===mt)return Qe.objectStoreNames||dt.get(Qe);if("store"===mt)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return nt(Qe[mt])},set:(Qe,mt,Fe)=>(Qe[mt]=Fe,!0),has:(Qe,mt)=>Qe instanceof IDBTransaction&&("done"===mt||"store"===mt)||mt in Qe};function gt(Qe){return"function"==typeof Qe?function ci(Qe){return Qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pt(){return qe||(qe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Qe)?function(...mt){return Qe.apply(xi(this),mt),nt(it.get(this))}:function(...mt){return nt(Qe.apply(xi(this),mt))}:function(mt,...Fe){const Be=Qe.call(xi(this),mt,...Fe);return dt.set(Be,mt.sort?mt.sort():[mt]),nt(Be)}}(Qe):(Qe instanceof IDBTransaction&&function Lt(Qe){if(ut.has(Qe))return;const mt=new Promise((Fe,Be)=>{const st=()=>{Qe.removeEventListener("complete",$e),Qe.removeEventListener("error",zt),Qe.removeEventListener("abort",zt)},$e=()=>{Fe(),st()},zt=()=>{Be(Qe.error||new DOMException("AbortError","AbortError")),st()};Qe.addEventListener("complete",$e),Qe.addEventListener("error",zt),Qe.addEventListener("abort",zt)});ut.set(Qe,mt)}(Qe),((Qe,mt)=>mt.some(Fe=>Qe instanceof Fe))(Qe,function ht(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Qe,wt):Qe)}function nt(Qe){if(Qe instanceof IDBRequest)return function Pe(Qe){const mt=new Promise((Fe,Be)=>{const st=()=>{Qe.removeEventListener("success",$e),Qe.removeEventListener("error",zt)},$e=()=>{Fe(nt(Qe.result)),st()},zt=()=>{Be(Qe.error),st()};Qe.addEventListener("success",$e),Qe.addEventListener("error",zt)});return mt.then(Fe=>{Fe instanceof IDBCursor&&it.set(Fe,Qe)}).catch(()=>{}),we.set(mt,Qe),mt}(Qe);if(Ce.has(Qe))return Ce.get(Qe);const mt=gt(Qe);return mt!==Qe&&(Ce.set(Qe,mt),we.set(mt,Qe)),mt}const xi=Qe=>we.get(Qe);function hi(Qe,mt,{blocked:Fe,upgrade:Be,blocking:st,terminated:$e}={}){const zt=indexedDB.open(Qe,mt),Ht=nt(zt);return Be&&zt.addEventListener("upgradeneeded",Vi=>{Be(nt(zt.result),Vi.oldVersion,Vi.newVersion,nt(zt.transaction))}),Fe&&zt.addEventListener("blocked",()=>Fe()),Ht.then(Vi=>{$e&&Vi.addEventListener("close",()=>$e()),st&&Vi.addEventListener("versionchange",()=>st())}).catch(()=>{}),Ht}function Ot(Qe,{blocked:mt}={}){const Fe=indexedDB.deleteDatabase(Qe);return mt&&Fe.addEventListener("blocked",()=>mt()),nt(Fe).then(()=>{})}const Mt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],ii=new Map;function je(Qe,mt){if(!(Qe instanceof IDBDatabase)||mt in Qe||"string"!=typeof mt)return;if(ii.get(mt))return ii.get(mt);const Fe=mt.replace(/FromIndex$/,""),Be=mt!==Fe,st=yt.includes(Fe);if(!(Fe in(Be?IDBIndex:IDBObjectStore).prototype)||!st&&!Mt.includes(Fe))return;const $e=function(){var zt=(0,v.Z)(function*(Ht,...Vi){const Jn=this.transaction(Ht,st?"readwrite":"readonly");let bn=Jn.store;return Be&&(bn=bn.index(Vi.shift())),(yield Promise.all([bn[Fe](...Vi),st&&Jn.done]))[0]});return function(Vi){return zt.apply(this,arguments)}}();return ii.set(mt,$e),$e}!function St(Qe){wt=Qe(wt)}(Qe=>({...Qe,get:(mt,Fe,Be)=>je(mt,Fe)||Qe.get(mt,Fe,Be),has:(mt,Fe)=>!!je(mt,Fe)||Qe.has(mt,Fe)}))},5861:(Wi,kt,ne)=>{function v(ee,qe,ht,pt,it,ut,dt){try{var Ce=ee[ut](dt),we=Ce.value}catch(Pe){return void ht(Pe)}Ce.done?qe(we):Promise.resolve(we).then(pt,it)}function ue(ee){return function(){var qe=this,ht=arguments;return new Promise(function(pt,it){var ut=ee.apply(qe,ht);function dt(we){v(ut,pt,it,dt,Ce,"next",we)}function Ce(we){v(ut,pt,it,dt,Ce,"throw",we)}dt(void 0)})}}ne.d(kt,{Z:()=>ue})}},Wi=>{Wi(Wi.s=237)}]);