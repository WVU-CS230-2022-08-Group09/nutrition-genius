"use strict";(self.webpackChunknutrition_genius=self.webpackChunknutrition_genius||[]).push([[179],{2011:(Hi,_t,te)=>{te.d(_t,{Dh:()=>ot,GT:()=>pt,cc:()=>St,hO:()=>Ot,on:()=>Ce,pX:()=>lt,xv:()=>ct});var v=te(4650),ue=te(9260),ee=te(462);Hi=te.hmd(Hi);const Ue=["ngOnDestroy"],lt=(it,Si,oi,Ft={})=>new Proxy(it,{get:(Mt,yt)=>oi.runOutsideAngular(()=>{var ti;if(it[yt])return!(null===(ti=Ft?.spy)||void 0===ti)&&ti.get&&Ft.spy.get(yt,it[yt]),it[yt];if(Ue.indexOf(yt)>-1)return()=>{};const ze=Si.toPromise().then(Qe=>{const gt=Qe&&Qe[yt];return"function"==typeof gt?gt.bind(Qe):gt&&gt.then?gt.then(Fe=>oi.run(()=>Fe)):oi.run(()=>gt)});return new Proxy(()=>{},{get:(Qe,gt)=>ze[gt],apply:(Qe,gt,Fe)=>ze.then(Be=>{var nt;const Ke=Be&&Be(...Fe);return!(null===(nt=Ft?.spy)||void 0===nt)&&nt.apply&&Ft.spy.apply(yt,Fe,Ke),Ke})})})}),pt=(it,Si)=>{Si.forEach(oi=>{Object.getOwnPropertyNames(oi.prototype||oi).forEach(Ft=>{Object.defineProperty(it.prototype,Ft,Object.getOwnPropertyDescriptor(oi.prototype||oi,Ft))})})};class tt{constructor(Si){return Si}}const ot=new v.OlP("angularfire2.app.options"),ct=new v.OlP("angularfire2.app.name");function Ce(it,Si,oi){const Mt="object"==typeof oi&&oi||{};Mt.name=Mt.name||"string"==typeof oi&&oi||"[DEFAULT]";const ti=ue.Z.apps.filter(ze=>ze&&ze.name===Mt.name)[0]||Si.runOutsideAngular(()=>ue.Z.initializeApp(it,Mt));try{JSON.stringify(it)!==JSON.stringify(ti.options)&&be("error",`${ti.name} Firebase App already initialized with different options${Hi.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new tt(ti)}const be=(it,...Si)=>{(0,v.X6Q)()&&typeof console<"u"&&console[it](...Si)},Le={provide:tt,useFactory:Ce,deps:[ot,v.R0b,[new v.FiY,ct]]};let Ot=(()=>{class it{constructor(oi){ue.Z.registerVersion("angularfire",ee.q4.full,"core"),ue.Z.registerVersion("angularfire",ee.q4.full,"app-compat"),ue.Z.registerVersion("angular",v.q4F.full,oi.toString())}static initializeApp(oi,Ft){return{ngModule:it,providers:[{provide:ot,useValue:oi},{provide:ct,useValue:Ft}]}}}return it.\u0275fac=function(oi){return new(oi||it)(v.LFG(v.Lbi))},it.\u0275mod=v.oAB({type:it}),it.\u0275inj=v.cJS({providers:[Le]}),it})();function St(it,Si,oi,Ft,Mt){const[,yt,ti]=globalThis.\u0275AngularfireInstanceCache.find(ze=>ze[0]===it)||[];if(yt)return function Ct(it,Si){try{return it.toString()===Si.toString()}catch{return it===Si}}(Mt,ti)||(ft("error",`${Si} was already initialized on the ${oi} Firebase App with different settings.${li?" You may need to reload as Firebase is not HMR aware.":""}`),ft("warn",{is:Mt,was:ti})),yt;{const ze=Ft();return globalThis.\u0275AngularfireInstanceCache.push([it,ze,Mt]),ze}}const li=!!Hi.hot,ft=(it,...Si)=>{(0,v.X6Q)()&&typeof console<"u"&&console[it](...Si)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},462:(Hi,_t,te)=>{te.d(_t,{q4:()=>fv,iC:()=>vv,fc:()=>eC,HU:()=>mv,vb:()=>gv,JM:()=>Bs});var v=te(4650),ue=te(259),ee=te(5861),Ue=te(9681),lt=te(2090),pt=te(4859),tt=te(1877);te(2833);const ct="@firebase/remote-config",St=new lt.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ki{constructor(se,Re,ht,Gt){this.client=se,this.storage=Re,this.storageCache=ht,this.logger=Gt}isCachedDataFresh(se,Re){if(!Re)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ht=Date.now()-Re,Gt=ht<=se;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ht}. Cache max age millis (minimumFetchIntervalMillis setting): ${se}. Is cache hit: ${Gt}.`),Gt}fetch(se){var Re=this;return(0,ee.Z)(function*(){const[ht,Gt]=yield Promise.all([Re.storage.getLastSuccessfulFetchTimestampMillis(),Re.storage.getLastSuccessfulFetchResponse()]);if(Gt&&Re.isCachedDataFresh(se.cacheMaxAgeMillis,ht))return Gt;se.eTag=Gt&&Gt.eTag;const ii=yield Re.client.fetch(se),en=[Re.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ii.status&&en.push(Re.storage.setLastSuccessfulFetchResponse(ii)),yield Promise.all(en),ii})()}}function Un(Q=navigator){return Q.languages&&Q.languages[0]||Q.language}class vn{constructor(se,Re,ht,Gt,ii,en){this.firebaseInstallations=se,this.sdkVersion=Re,this.namespace=ht,this.projectId=Gt,this.apiKey=ii,this.appId=en}fetch(se){var Re=this;return(0,ee.Z)(function*(){const[ht,Gt]=yield Promise.all([Re.firebaseInstallations.getId(),Re.firebaseInstallations.getToken()]),en=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Re.projectId}/namespaces/${Re.namespace}:fetch?key=${Re.apiKey}`,as={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":se.eTag||"*"},xs={sdk_version:Re.sdkVersion,app_instance_id:ht,app_instance_id_token:Gt,app_id:Re.appId,language_code:Un()},vt={method:"POST",headers:as,body:JSON.stringify(xs)},ji=fetch(en,vt),Gn=new Promise((al,ql)=>{se.signal.addEventListener(()=>{const yv=new Error("The operation was aborted.");yv.name="AbortError",ql(yv)})});let hh;try{yield Promise.race([ji,Gn]),hh=yield ji}catch(al){let ql="fetch-client-network";throw"AbortError"===al?.name&&(ql="fetch-timeout"),St.create(ql,{originalErrorMessage:al?.message})}let ls=hh.status;const Ju=hh.headers.get("ETag")||void 0;let Yc,ga;if(200===hh.status){let al;try{al=yield hh.json()}catch(ql){throw St.create("fetch-client-parse",{originalErrorMessage:ql?.message})}Yc=al.entries,ga=al.state}if("INSTANCE_STATE_UNSPECIFIED"===ga?ls=500:"NO_CHANGE"===ga?ls=304:("NO_TEMPLATE"===ga||"EMPTY_CONFIG"===ga)&&(Yc={}),304!==ls&&200!==ls)throw St.create("fetch-status",{httpStatus:ls});return{status:ls,eTag:Ju,config:Yc}})()}}class gs{constructor(se,Re){this.client=se,this.storage=Re}fetch(se){var Re=this;return(0,ee.Z)(function*(){const ht=(yield Re.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Re.attemptFetch(se,ht)})()}attemptFetch(se,{throttleEndTimeMillis:Re,backoffCount:ht}){var Gt=this;return(0,ee.Z)(function*(){yield function Xt(Q,se){return new Promise((Re,ht)=>{const Gt=Math.max(se-Date.now(),0),ii=setTimeout(Re,Gt);Q.addEventListener(()=>{clearTimeout(ii),ht(St.create("fetch-throttle",{throttleEndTimeMillis:se}))})})}(se.signal,Re);try{const ii=yield Gt.client.fetch(se);return yield Gt.storage.deleteThrottleMetadata(),ii}catch(ii){if(!function pr(Q){if(!(Q instanceof lt.ZR&&Q.customData))return!1;const se=Number(Q.customData.httpStatus);return 429===se||500===se||503===se||504===se}(ii))throw ii;const en={throttleEndTimeMillis:Date.now()+(0,lt.$s)(ht),backoffCount:ht+1};return yield Gt.storage.setThrottleMetadata(en),Gt.attemptFetch(se,en)}})()}}class En{constructor(se,Re,ht,Gt,ii){this.app=se,this._client=Re,this._storageCache=ht,this._storage=Gt,this._logger=ii,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Yi(Q,se){const Re=Q.target.error||void 0;return St.create(se,{originalErrorMessage:Re&&Re?.message})}const Vr="app_namespace_store";class Gs{constructor(se,Re,ht,Gt=function os(){return new Promise((Q,se)=>{try{const Re=indexedDB.open("firebase_remote_config",1);Re.onerror=ht=>{se(Yi(ht,"storage-open"))},Re.onsuccess=ht=>{Q(ht.target.result)},Re.onupgradeneeded=ht=>{0===ht.oldVersion&&ht.target.result.createObjectStore(Vr,{keyPath:"compositeKey"})}}catch(Re){se(St.create("storage-open",{originalErrorMessage:Re?.message}))}})}()){this.appId=se,this.appName=Re,this.namespace=ht,this.openDbPromise=Gt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(se){return this.set("last_fetch_status",se)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(se){return this.set("last_successful_fetch_timestamp_millis",se)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(se){return this.set("last_successful_fetch_response",se)}getActiveConfig(){return this.get("active_config")}setActiveConfig(se){return this.set("active_config",se)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(se){return this.set("active_config_etag",se)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(se){return this.set("throttle_metadata",se)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(se){var Re=this;return(0,ee.Z)(function*(){const ht=yield Re.openDbPromise;return new Promise((Gt,ii)=>{const as=ht.transaction([Vr],"readonly").objectStore(Vr),xs=Re.createCompositeKey(se);try{const vt=as.get(xs);vt.onerror=ji=>{ii(Yi(ji,"storage-get"))},vt.onsuccess=ji=>{const Gn=ji.target.result;Gt(Gn?Gn.value:void 0)}}catch(vt){ii(St.create("storage-get",{originalErrorMessage:vt?.message}))}})})()}set(se,Re){var ht=this;return(0,ee.Z)(function*(){const Gt=yield ht.openDbPromise;return new Promise((ii,en)=>{const xs=Gt.transaction([Vr],"readwrite").objectStore(Vr),vt=ht.createCompositeKey(se);try{const ji=xs.put({compositeKey:vt,value:Re});ji.onerror=Gn=>{en(Yi(Gn,"storage-set"))},ji.onsuccess=()=>{ii()}}catch(ji){en(St.create("storage-set",{originalErrorMessage:ji?.message}))}})})()}delete(se){var Re=this;return(0,ee.Z)(function*(){const ht=yield Re.openDbPromise;return new Promise((Gt,ii)=>{const as=ht.transaction([Vr],"readwrite").objectStore(Vr),xs=Re.createCompositeKey(se);try{const vt=as.delete(xs);vt.onerror=ji=>{ii(Yi(ji,"storage-delete"))},vt.onsuccess=()=>{Gt()}}catch(vt){ii(St.create("storage-delete",{originalErrorMessage:vt?.message}))}})})()}createCompositeKey(se){return[this.appId,this.appName,this.namespace,se].join()}}class da{constructor(se){this.storage=se}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var se=this;return(0,ee.Z)(function*(){const Re=se.storage.getLastFetchStatus(),ht=se.storage.getLastSuccessfulFetchTimestampMillis(),Gt=se.storage.getActiveConfig(),ii=yield Re;ii&&(se.lastFetchStatus=ii);const en=yield ht;en&&(se.lastSuccessfulFetchTimestampMillis=en);const as=yield Gt;as&&(se.activeConfig=as)})()}setLastFetchStatus(se){return this.lastFetchStatus=se,this.storage.setLastFetchStatus(se)}setLastSuccessfulFetchTimestampMillis(se){return this.lastSuccessfulFetchTimestampMillis=se,this.storage.setLastSuccessfulFetchTimestampMillis(se)}setActiveConfig(se){return this.activeConfig=se,this.storage.setActiveConfig(se)}}function ka(){return fi.apply(this,arguments)}function fi(){return(fi=(0,ee.Z)(function*(){if(!(0,lt.hl)())return!1;try{return yield(0,lt.eu)()}catch{return!1}})).apply(this,arguments)}!function Ns(){(0,Ue._registerComponent)(new pt.wA("remote-config",function Q(se,{instanceIdentifier:Re}){const ht=se.getProvider("app").getImmediate(),Gt=se.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw St.create("registration-window");if(!(0,lt.hl)())throw St.create("indexed-db-unavailable");const{projectId:ii,apiKey:en,appId:as}=ht.options;if(!ii)throw St.create("registration-project-id");if(!en)throw St.create("registration-api-key");if(!as)throw St.create("registration-app-id");const xs=new Gs(as,ht.name,Re=Re||"firebase"),vt=new da(xs),ji=new tt.Yd(ct);ji.logLevel=tt.in.ERROR;const Gn=new vn(Gt,Ue.SDK_VERSION,Re,ii,en,as),hh=new gs(Gn,xs),ls=new ki(hh,xs,vt,ji),Ju=new En(ht,ls,vt,xs,ji);return function ti(Q){const se=(0,lt.m9)(Q);se._initializePromise||(se._initializePromise=se._storageCache.loadFromStorage().then(()=>{se._isInitializationComplete=!0}))}(Ju),Ju},"PUBLIC").setMultipleInstances(!0)),(0,Ue.registerVersion)(ct,"0.4.0"),(0,Ue.registerVersion)(ct,"0.4.0","esm2017")}();var Er=te(8766);const ms="/firebase-messaging-sw.js",br="/firebase-cloud-messaging-push-scope",io="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kr="google.c.a.c_id",Hr="google.c.a.c_l",Zn="google.c.a.ts",_i="google.c.a.e";var Mi=(()=>{return(Q=Mi||(Mi={})).PUSH_RECEIVED="push-received",Q.NOTIFICATION_CLICKED="notification-clicked",Mi;var Q})();function Pr(Q){const se=new Uint8Array(Q);return btoa(String.fromCharCode(...se)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ks(Q){const Re=(Q+"=".repeat((4-Q.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ht=atob(Re),Gt=new Uint8Array(ht.length);for(let ii=0;ii<ht.length;++ii)Gt[ii]=ht.charCodeAt(ii);return Gt}const no="fcm_token_details_db",ro="fcm_token_object_Store";function mn(Q){return bo.apply(this,arguments)}function bo(){return bo=(0,ee.Z)(function*(Q){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ii=>ii.name).includes(no))return null;let se=null;return(yield(0,Er.X3)(no,5,{upgrade:(ht=(0,ee.Z)(function*(Gt,ii,en,as){var xs;if(ii<2||!Gt.objectStoreNames.contains(ro))return;const vt=as.objectStore(ro),ji=yield vt.index("fcmSenderId").get(Q);if(yield vt.clear(),ji)if(2===ii){const Gn=ji;if(!Gn.auth||!Gn.p256dh||!Gn.endpoint)return;se={token:Gn.fcmToken,createTime:null!==(xs=Gn.createTime)&&void 0!==xs?xs:Date.now(),subscriptionOptions:{auth:Gn.auth,p256dh:Gn.p256dh,endpoint:Gn.endpoint,swScope:Gn.swScope,vapidKey:"string"==typeof Gn.vapidKey?Gn.vapidKey:Pr(Gn.vapidKey)}}}else if(3===ii){const Gn=ji;se={token:Gn.fcmToken,createTime:Gn.createTime,subscriptionOptions:{auth:Pr(Gn.auth),p256dh:Pr(Gn.p256dh),endpoint:Gn.endpoint,swScope:Gn.swScope,vapidKey:Pr(Gn.vapidKey)}}}else if(4===ii){const Gn=ji;se={token:Gn.fcmToken,createTime:Gn.createTime,subscriptionOptions:{auth:Pr(Gn.auth),p256dh:Pr(Gn.p256dh),endpoint:Gn.endpoint,swScope:Gn.swScope,vapidKey:Pr(Gn.vapidKey)}}}}),function(ii,en,as,xs){return ht.apply(this,arguments)})})).close(),yield(0,Er.Lj)(no),yield(0,Er.Lj)("fcm_vapid_details_db"),yield(0,Er.Lj)("undefined"),Dn(se)?se:null;var ht}),bo.apply(this,arguments)}function Dn(Q){if(!Q||!Q.subscriptionOptions)return!1;const{subscriptionOptions:se}=Q;return"number"==typeof Q.createTime&&Q.createTime>0&&"string"==typeof Q.token&&Q.token.length>0&&"string"==typeof se.auth&&se.auth.length>0&&"string"==typeof se.p256dh&&se.p256dh.length>0&&"string"==typeof se.endpoint&&se.endpoint.length>0&&"string"==typeof se.swScope&&se.swScope.length>0&&"string"==typeof se.vapidKey&&se.vapidKey.length>0}const hi="firebase-messaging-store";let Et=null;function mi(){return Et||(Et=(0,Er.X3)("firebase-messaging-database",1,{upgrade:(Q,se)=>{0===se&&Q.createObjectStore(hi)}})),Et}function Zi(Q){return cn.apply(this,arguments)}function cn(){return(cn=(0,ee.Z)(function*(Q){const se=Y(Q),ht=yield(yield mi()).transaction(hi).objectStore(hi).get(se);if(ht)return ht;{const Gt=yield mn(Q.appConfig.senderId);if(Gt)return yield Rn(Q,Gt),Gt}})).apply(this,arguments)}function Rn(Q,se){return ye.apply(this,arguments)}function ye(){return(ye=(0,ee.Z)(function*(Q,se){const Re=Y(Q),Gt=(yield mi()).transaction(hi,"readwrite");return yield Gt.objectStore(hi).put(se,Re),yield Gt.done,se})).apply(this,arguments)}function pe(Q){return J.apply(this,arguments)}function J(){return(J=(0,ee.Z)(function*(Q){const se=Y(Q),ht=(yield mi()).transaction(hi,"readwrite");yield ht.objectStore(hi).delete(se),yield ht.done})).apply(this,arguments)}function Y({appConfig:Q}){return Q.appId}const Z=new lt.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ve(Q,se){return Je.apply(this,arguments)}function Je(){return(Je=(0,ee.Z)(function*(Q,se){const Re=yield _n(Q),ht=xn(se),Gt={method:"POST",headers:Re,body:JSON.stringify(ht)};let ii;try{ii=yield(yield fetch(Ui(Q.appConfig),Gt)).json()}catch(en){throw Z.create("token-subscribe-failed",{errorInfo:en?.toString()})}if(ii.error)throw Z.create("token-subscribe-failed",{errorInfo:ii.error.message});if(!ii.token)throw Z.create("token-subscribe-no-token");return ii.token})).apply(this,arguments)}function Pt(Q,se){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,ee.Z)(function*(Q,se){const Re=yield _n(Q),ht=xn(se.subscriptionOptions),Gt={method:"PATCH",headers:Re,body:JSON.stringify(ht)};let ii;try{ii=yield(yield fetch(`${Ui(Q.appConfig)}/${se.token}`,Gt)).json()}catch(en){throw Z.create("token-update-failed",{errorInfo:en?.toString()})}if(ii.error)throw Z.create("token-update-failed",{errorInfo:ii.error.message});if(!ii.token)throw Z.create("token-update-no-token");return ii.token})).apply(this,arguments)}function at(Q,se){return At.apply(this,arguments)}function At(){return(At=(0,ee.Z)(function*(Q,se){const ht={method:"DELETE",headers:yield _n(Q)};try{const ii=yield(yield fetch(`${Ui(Q.appConfig)}/${se}`,ht)).json();if(ii.error)throw Z.create("token-unsubscribe-failed",{errorInfo:ii.error.message})}catch(Gt){throw Z.create("token-unsubscribe-failed",{errorInfo:Gt?.toString()})}})).apply(this,arguments)}function Ui({projectId:Q}){return`https://fcmregistrations.googleapis.com/v1/projects/${Q}/registrations`}function _n(Q){return dn.apply(this,arguments)}function dn(){return(dn=(0,ee.Z)(function*({appConfig:Q,installations:se}){const Re=yield se.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Q.apiKey,"x-goog-firebase-installations-auth":`FIS ${Re}`})})).apply(this,arguments)}function xn({p256dh:Q,auth:se,endpoint:Re,vapidKey:ht}){const Gt={web:{endpoint:Re,auth:se,p256dh:Q}};return ht!==io&&(Gt.web.applicationPubKey=ht),Gt}const sl=6048e5;function Gr(Q){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,ee.Z)(function*(Q){const se=yield kn(Q.swRegistration,Q.vapidKey),Re={vapidKey:Q.vapidKey,swScope:Q.swRegistration.scope,endpoint:se.endpoint,auth:Pr(se.getKey("auth")),p256dh:Pr(se.getKey("p256dh"))},ht=yield Zi(Q.firebaseDependencies);if(ht){if(is(ht.subscriptionOptions,Re))return Date.now()>=ht.createTime+sl?He(Q,{token:ht.token,createTime:Date.now(),subscriptionOptions:Re}):ht.token;try{yield at(Q.firebaseDependencies,ht.token)}catch(Gt){console.warn(Gt)}return Ut(Q.firebaseDependencies,Re)}return Ut(Q.firebaseDependencies,Re)})).apply(this,arguments)}function du(Q){return zi.apply(this,arguments)}function zi(){return(zi=(0,ee.Z)(function*(Q){const se=yield Zi(Q.firebaseDependencies);se&&(yield at(Q.firebaseDependencies,se.token),yield pe(Q.firebaseDependencies));const Re=yield Q.swRegistration.pushManager.getSubscription();return!Re||Re.unsubscribe()})).apply(this,arguments)}function He(Q,se){return mt.apply(this,arguments)}function mt(){return(mt=(0,ee.Z)(function*(Q,se){try{const Re=yield Pt(Q.firebaseDependencies,se),ht=Object.assign(Object.assign({},se),{token:Re,createTime:Date.now()});return yield Rn(Q.firebaseDependencies,ht),Re}catch(Re){throw yield du(Q),Re}})).apply(this,arguments)}function Ut(Q,se){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,ee.Z)(function*(Q,se){const ht={token:yield ve(Q,se),createTime:Date.now(),subscriptionOptions:se};return yield Rn(Q,ht),ht.token})).apply(this,arguments)}function kn(Q,se){return lr.apply(this,arguments)}function lr(){return(lr=(0,ee.Z)(function*(Q,se){return(yield Q.pushManager.getSubscription())||Q.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ks(se)})})).apply(this,arguments)}function is(Q,se){return se.vapidKey===Q.vapidKey&&se.endpoint===Q.endpoint&&se.auth===Q.auth&&se.p256dh===Q.p256dh}function Kr(Q){const se={from:Q.from,collapseKey:Q.collapse_key,messageId:Q.fcmMessageId};return function Ra(Q,se){if(!se.notification)return;Q.notification={};const Re=se.notification.title;Re&&(Q.notification.title=Re);const ht=se.notification.body;ht&&(Q.notification.body=ht);const Gt=se.notification.image;Gt&&(Q.notification.image=Gt);const ii=se.notification.icon;ii&&(Q.notification.icon=ii)}(se,Q),function pa(Q,se){!se.data||(Q.data=se.data)}(se,Q),function xr(Q,se){var Re,ht,Gt,ii,en;if(!(se.fcmOptions||null!==(Re=se.notification)&&void 0!==Re&&Re.click_action))return;Q.fcmOptions={};const as=null!==(Gt=null===(ht=se.fcmOptions)||void 0===ht?void 0:ht.link)&&void 0!==Gt?Gt:null===(ii=se.notification)||void 0===ii?void 0:ii.click_action;as&&(Q.fcmOptions.link=as);const xs=null===(en=se.fcmOptions)||void 0===en?void 0:en.analytics_label;xs&&(Q.fcmOptions.analyticsLabel=xs)}(se,Q),se}function Zb(Q){return"object"==typeof Q&&!!Q&&kr in Q}function qd(Q,se){const Re=[];for(let ht=0;ht<Q.length;ht++)Re.push(Q.charAt(ht)),ht<se.length&&Re.push(se.charAt(ht));return Re.join("")}function Yu(Q){return Z.create("missing-app-config-values",{valueName:Q})}qd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class pu{constructor(se,Re,ht){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Gt=function Ud(Q){if(!Q||!Q.options)throw Yu("App Configuration Object");if(!Q.name)throw Yu("App Name");const se=["projectId","apiKey","appId","messagingSenderId"],{options:Re}=Q;for(const ht of se)if(!Re[ht])throw Yu(ht);return{appName:Q.name,projectId:Re.projectId,apiKey:Re.apiKey,appId:Re.appId,senderId:Re.messagingSenderId}}(se);this.firebaseDependencies={app:se,appConfig:Gt,installations:Re,analyticsProvider:ht}}_delete(){return Promise.resolve()}}function fu(Q){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,ee.Z)(function*(Q){try{Q.swRegistration=yield navigator.serviceWorker.register(ms,{scope:br}),Q.swRegistration.update().catch(()=>{})}catch(se){throw Z.create("failed-service-worker-registration",{browserErrorMessage:se?.message})}})).apply(this,arguments)}function ko(Q,se){return gg.apply(this,arguments)}function gg(){return(gg=(0,ee.Z)(function*(Q,se){if(!se&&!Q.swRegistration&&(yield fu(Q)),se||!Q.swRegistration){if(!(se instanceof ServiceWorkerRegistration))throw Z.create("invalid-sw-registration");Q.swRegistration=se}})).apply(this,arguments)}function Ko(Q,se){return _a.apply(this,arguments)}function _a(){return(_a=(0,ee.Z)(function*(Q,se){se?Q.vapidKey=se:Q.vapidKey||(Q.vapidKey=io)})).apply(this,arguments)}function Uc(){return(Uc=(0,ee.Z)(function*(Q,se){if(!navigator)throw Z.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Z.create("permission-blocked");return yield Ko(Q,se?.vapidKey),yield ko(Q,se?.serviceWorkerRegistration),Gr(Q)})).apply(this,arguments)}function Wc(Q,se,Re){return El.apply(this,arguments)}function El(){return(El=(0,ee.Z)(function*(Q,se,Re){const ht=ef(se);(yield Q.firebaseDependencies.analyticsProvider.get()).logEvent(ht,{message_id:Re[kr],message_name:Re[Hr],message_time:Re[Zn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ef(Q){switch(Q){case Mi.NOTIFICATION_CLICKED:return"notification_open";case Mi.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wd(){return(Wd=(0,ee.Z)(function*(Q,se){const Re=se.data;if(!Re.isFirebaseMessaging)return;Q.onMessageHandler&&Re.messageType===Mi.PUSH_RECEIVED&&("function"==typeof Q.onMessageHandler?Q.onMessageHandler(Kr(Re)):Q.onMessageHandler.next(Kr(Re)));const ht=Re.data;Zb(ht)&&"1"===ht[_i]&&(yield Wc(Q,Re.messageType,ht))})).apply(this,arguments)}const Gc="@firebase/messaging",xl=Q=>{const se=new pu(Q.getProvider("app").getImmediate(),Q.getProvider("installations-internal").getImmediate(),Q.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Re=>function yS(Q,se){return Wd.apply(this,arguments)}(se,Re)),se},bS=Q=>{const se=Q.getProvider("messaging").getImmediate();return{getToken:ht=>function gu(Q,se){return Uc.apply(this,arguments)}(se,ht)}};function Qb(){return tf.apply(this,arguments)}function tf(){return(tf=(0,ee.Z)(function*(){try{yield(0,lt.eu)()}catch{return!1}return typeof window<"u"&&(0,lt.hl)()&&(0,lt.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kh(){(0,Ue._registerComponent)(new pt.wA("messaging",xl,"PUBLIC")),(0,Ue._registerComponent)(new pt.wA("messaging-internal",bS,"PRIVATE")),(0,Ue.registerVersion)(Gc,"0.12.0"),(0,Ue.registerVersion)(Gc,"0.12.0","esm2017")}();var cv=te(3008),mg=te(4408),zD=te(7565);const fa=new class dv extends zD.v{}(class sf extends mg.o{constructor(se,Re){super(se,Re),this.scheduler=se,this.work=Re}schedule(se,Re=0){return Re>0?super.schedule(se,Re):(this.delay=Re,this.state=se,this.scheduler.flush(this),this)}execute(se,Re){return Re>0||this.closed?super.execute(se,Re):this._execute(se,Re)}requestAsyncId(se,Re,ht=0){return null!=ht&&ht>0||null==ht&&this.delay>0?super.requestAsyncId(se,Re,ht):(se.flush(this),0)}});var Zu=te(4986),pv=te(8505),af=te(5363),vg=te(9468);const fv=new v.GfV("7.5.0"),vu="__angularfire_symbol__analyticsIsSupportedValue",Rh="__angularfire_symbol__analyticsIsSupported",_h="__angularfire_symbol__remoteConfigIsSupportedValue",yg="__angularfire_symbol__remoteConfigIsSupported",Ma="__angularfire_symbol__messagingIsSupportedValue",Qu="__angularfire_symbol__messagingIsSupported";function Bs(Q,se,Re){if(se){if(1===se.length)return se[0];const ii=se.filter(en=>en.app===Re);if(1===ii.length)return ii[0]}return Re.container.getProvider(Q).getImmediate({optional:!0})}globalThis[Rh]||(globalThis[Rh]=(0,cv.Gb)().then(Q=>globalThis[vu]=Q).catch(()=>globalThis[vu]=!1)),globalThis[Qu]||(globalThis[Qu]=Qb().then(Q=>globalThis[Ma]=Q).catch(()=>globalThis[Ma]=!1)),globalThis[yg]||(globalThis[yg]=ka().then(Q=>globalThis[_h]=Q).catch(()=>globalThis[_h]=!1));const gv=(Q,se)=>{const Re=se?[se]:(0,ue.C6)(),ht=[];return Re.forEach(Gt=>{Gt.container.getProvider(Q).instances.forEach(en=>{ht.includes(en)||ht.push(en)})}),ht};function Kc(){}class $c{constructor(se,Re=fa){this.zone=se,this.delegate=Re}now(){return this.delegate.now()}schedule(se,Re,ht){const Gt=this.zone;return this.delegate.schedule(function(en){Gt.runGuarded(()=>{se.apply(this,[en])})},Re,ht)}}class Oa{constructor(se){this.zone=se,this.task=null}call(se,Re){const ht=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Kc,{},Kc,Kc)),Re.pipe((0,pv.b)({next:ht,complete:ht,error:ht})).subscribe(se).add(ht)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let mv=(()=>{class Q{constructor(Re){this.ngZone=Re,this.outsideAngular=Re.runOutsideAngular(()=>new $c(Zone.current)),this.insideAngular=Re.run(()=>new $c(Zone.current,Zu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Q.\u0275fac=function(Re){return new(Re||Q)(v.LFG(v.R0b))},Q.\u0275prov=v.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})();function Tl(){const Q=globalThis.\u0275AngularFireScheduler;if(!Q)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Q}function eC(Q){return Q.pipe((0,af.Q)(Tl().outsideAngular))}function vv(Q){return Tl(),function lh(Q){return function(Re){return(Re=Re.lift(new Oa(Q.ngZone))).pipe((0,vg.R)(Q.outsideAngular),(0,af.Q)(Q.insideAngular))}}(Tl())(Q)}},552:(Hi,_t,te)=>{te.d(_t,{$:()=>en,A:()=>be,B:()=>St,G:()=>mt,H:()=>is,J:()=>kh,L:()=>ye,M:()=>dv,N:()=>pv,P:()=>$i,Q:()=>af,R:()=>j1,T:()=>vg,U:()=>Zu,V:()=>_h,W:()=>yg,X:()=>jD,Y:()=>$d,Z:()=>Q,_:()=>Re,a:()=>Qc,a0:()=>Gn,a1:()=>ls,a2:()=>Yc,a3:()=>al,a4:()=>yv,a5:()=>B1,a6:()=>$o,a7:()=>bu,a8:()=>Cg,a9:()=>Zc,aA:()=>pe,aB:()=>yf,aC:()=>Lv,aD:()=>VS,aE:()=>zi,aI:()=>df,aL:()=>vu,aa:()=>V1,ab:()=>iC,ac:()=>rC,af:()=>WD,ag:()=>GD,ah:()=>xS,ak:()=>$c,al:()=>YD,an:()=>ZD,ao:()=>AS,ap:()=>gt,aq:()=>At,ar:()=>Pt,as:()=>oi,at:()=>rc,au:()=>sd,av:()=>Ui,aw:()=>Ft,ax:()=>ze,ay:()=>Cf,az:()=>Be,b:()=>Qd,c:()=>oI,d:()=>lI,e:()=>aI,f:()=>HS,g:()=>zS,h:()=>Ng,i:()=>kv,j:()=>Nv,k:()=>ch,l:()=>sI,m:()=>YS,n:()=>Ef,o:()=>ot,r:()=>ic,s:()=>Wa,u:()=>ed,v:()=>Sg});var v=te(5861),ue=te(2090),ee=te(9681),Ue=te(1877),lt=te(655),pt=te(4859);const ot={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},be={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const St=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ct=function Ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},li=new ue.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),it=new Ue.Yd("@firebase/auth");function Si(_,...x){it.logLevel<=Ue.in.ERROR&&it.error(`Auth (${ee.SDK_VERSION}): ${_}`,...x)}function oi(_,...x){throw ti(_,...x)}function Ft(_,...x){return ti(_,...x)}function Mt(_,x,I){const L=Object.assign(Object.assign({},Ct()),{[x]:I});return new ue.LL("auth","Firebase",L).create(x,{appName:_.name})}function yt(_,x,I){if(!(x instanceof I))throw I.name!==x.constructor.name&&oi(_,"argument-error"),Mt(_,"argument-error",`Type of ${x.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ti(_,...x){if("string"!=typeof _){const I=x[0],L=[...x.slice(1)];return L[0]&&(L[0].appName=_.name),_._errorFactory.create(I,...L)}return li.create(_,...x)}function ze(_,x,...I){if(!_)throw ti(x,...I)}function Qe(_){const x="INTERNAL ASSERTION FAILED: "+_;throw Si(x),new Error(x)}function gt(_,x){_||Qe(x)}const Fe=new Map;function Be(_){gt(_ instanceof Function,"Expected a class definition");let x=Fe.get(_);return x?(gt(x instanceof _,"Instance stored in cache mismatched with class"),x):(x=new _,Fe.set(_,x),x)}function qt(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function jt(){return"http:"===ki()||"https:"===ki()}function ki(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Xt{constructor(x,I){this.shortDelay=x,this.longDelay=I,gt(I>x,"Short delay should be less than long delay!"),this.isMobile=(0,ue.uI)()||(0,ue.b$)()}get(){return function Un(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(jt()||(0,ue.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function pr(_,x){gt(_.emulator,"Emulator should always be set here");const{url:I}=_.emulator;return x?`${I}${x.startsWith("/")?x.slice(1):x}`:I}class gs{static initialize(x,I,L){this.fetchImpl=x,I&&(this.headersImpl=I),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ar={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Wn=new Xt(3e4,6e4);function En(_,x){return _.tenantId&&!x.tenantId?Object.assign(Object.assign({},x),{tenantId:_.tenantId}):x}function Yi(_,x,I,L){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,v.Z)(function*(_,x,I,L,G={}){return Aa(_,G,(0,v.Z)(function*(){let ie={},We={};L&&("GET"===x?We=L:ie={body:JSON.stringify(L)});const Lt=(0,ue.xO)(Object.assign({key:_.config.apiKey},We)).slice(1),Ti=yield _._getAdditionalHeaders();return Ti["Content-Type"]="application/json",_.languageCode&&(Ti["X-Firebase-Locale"]=_.languageCode),gs.fetch()(da(_,_.config.apiHost,I,Lt),Object.assign({method:x,headers:Ti,referrerPolicy:"no-referrer"},ie))}))})).apply(this,arguments)}function Aa(_,x,I){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,v.Z)(function*(_,x,I){_._canInitEmulator=!1;const L=Object.assign(Object.assign({},ar),x);try{const G=new Ns(_),ie=yield Promise.race([I(),G.promise]);G.clearNetworkTimeout();const We=yield ie.json();if("needConfirmation"in We)throw Es(_,"account-exists-with-different-credential",We);if(ie.ok&&!("errorMessage"in We))return We;{const Lt=ie.ok?We.errorMessage:We.error.message,[Ti,rn]=Lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ti)throw Es(_,"credential-already-in-use",We);if("EMAIL_EXISTS"===Ti)throw Es(_,"email-already-in-use",We);if("USER_DISABLED"===Ti)throw Es(_,"user-disabled",We);const Vn=L[Ti]||Ti.toLowerCase().replace(/[_\s]+/g,"-");if(rn)throw Mt(_,Vn,rn);oi(_,Vn)}}catch(G){if(G instanceof ue.ZR)throw G;oi(_,"network-request-failed")}})).apply(this,arguments)}function os(_,x,I,L){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,v.Z)(function*(_,x,I,L,G={}){const ie=yield Yi(_,x,I,L,G);return"mfaPendingCredential"in ie&&oi(_,"multi-factor-auth-required",{_serverResponse:ie}),ie})).apply(this,arguments)}function da(_,x,I,L){const G=`${x}${I}?${L}`;return _.config.emulator?pr(_.config,G):`${_.config.apiScheme}://${G}`}class Ns{constructor(x){this.auth=x,this.timer=null,this.promise=new Promise((I,L)=>{this.timer=setTimeout(()=>L(Ft(this.auth,"network-request-failed")),Wn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Es(_,x,I){const L={appName:_.name};I.email&&(L.email=I.email),I.phoneNumber&&(L.phoneNumber=I.phoneNumber);const G=Ft(_,x,L);return G.customData._tokenResponse=I,G}function ka(){return(ka=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:delete",x)})).apply(this,arguments)}function fi(_,x){return Er.apply(this,arguments)}function Er(){return(Er=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function ms(_,x){return br.apply(this,arguments)}function br(){return(br=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:lookup",x)})).apply(this,arguments)}function io(_){if(_)try{const x=new Date(Number(_));if(!isNaN(x.getTime()))return x.toUTCString()}catch{}}function Hr(){return(Hr=(0,v.Z)(function*(_,x=!1){const I=(0,ue.m9)(_),L=yield I.getIdToken(x),G=_i(L);ze(G&&G.exp&&G.auth_time&&G.iat,I.auth,"internal-error");const ie="object"==typeof G.firebase?G.firebase:void 0,We=ie?.sign_in_provider;return{claims:G,token:L,authTime:io(Zn(G.auth_time)),issuedAtTime:io(Zn(G.iat)),expirationTime:io(Zn(G.exp)),signInProvider:We||null,signInSecondFactor:ie?.sign_in_second_factor||null}})).apply(this,arguments)}function Zn(_){return 1e3*Number(_)}function _i(_){const[x,I,L]=_.split(".");if(void 0===x||void 0===I||void 0===L)return Si("JWT malformed, contained fewer than 3 sections"),null;try{const G=(0,ue.tV)(I);return G?JSON.parse(G):(Si("Failed to decode base64 JWT payload"),null)}catch(G){return Si("Caught error parsing JWT payload as JSON",G?.toString()),null}}function Mi(_,x){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,v.Z)(function*(_,x,I=!1){if(I)return x;try{return yield x}catch(L){throw L instanceof ue.ZR&&Ks(L)&&_.auth.currentUser===_&&(yield _.auth.signOut()),L}})).apply(this,arguments)}function Ks({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class no{constructor(x){this.user=x,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(x){var I;if(x){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const G=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(x=!1){var I=this;if(!this.isRunning)return;const L=this.getInterval(x);this.timerId=setTimeout((0,v.Z)(function*(){yield I.iteration()}),L)}iteration(){var x=this;return(0,v.Z)(function*(){try{yield x.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===I?.code&&x.schedule(!0))}x.schedule()})()}}class nn{constructor(x,I){this.createdAt=x,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=io(this.lastLoginAt),this.creationTime=io(this.createdAt)}_copy(x){this.createdAt=x.createdAt,this.lastLoginAt=x.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ro(_){return mn.apply(this,arguments)}function mn(){return(mn=(0,v.Z)(function*(_){var x;const I=_.auth,L=yield _.getIdToken(),G=yield Mi(_,ms(I,{idToken:L}));ze(G?.users.length,I,"internal-error");const ie=G.users[0];_._notifyReloadListener(ie);const We=null!==(x=ie.providerUserInfo)&&void 0!==x&&x.length?ts(ie.providerUserInfo):[],Lt=$s(_.providerData,We),Vn=!!_.isAnonymous&&!(_.email&&ie.passwordHash||Lt?.length),ys={uid:ie.localId,displayName:ie.displayName||null,photoURL:ie.photoUrl||null,email:ie.email||null,emailVerified:ie.emailVerified||!1,phoneNumber:ie.phoneNumber||null,tenantId:ie.tenantId||null,providerData:Lt,metadata:new nn(ie.createdAt,ie.lastLoginAt),isAnonymous:Vn};Object.assign(_,ys)})).apply(this,arguments)}function Dn(){return(Dn=(0,v.Z)(function*(_){const x=(0,ue.m9)(_);yield ro(x),yield x.auth._persistUserIfCurrent(x),x.auth._notifyListenersIfCurrent(x)})).apply(this,arguments)}function $s(_,x){return[..._.filter(L=>!x.some(G=>G.providerId===L.providerId)),...x]}function ts(_){return _.map(x=>{var{providerId:I}=x,L=(0,lt._T)(x,["providerId"]);return{providerId:I,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}function Et(){return(Et=(0,v.Z)(function*(_,x){const I=yield Aa(_,{},(0,v.Z)(function*(){const L=(0,ue.xO)({grant_type:"refresh_token",refresh_token:x}).slice(1),{tokenApiHost:G,apiKey:ie}=_.config,We=da(_,G,"/v1/token",`key=${ie}`),Lt=yield _._getAdditionalHeaders();return Lt["Content-Type"]="application/x-www-form-urlencoded",gs.fetch()(We,{method:"POST",headers:Lt,body:L})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class mi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(x){ze(x.idToken,"internal-error"),ze(typeof x.idToken<"u","internal-error"),ze(typeof x.refreshToken<"u","internal-error");const I="expiresIn"in x&&typeof x.expiresIn<"u"?Number(x.expiresIn):function Ri(_){const x=_i(_);return ze(x,"internal-error"),ze(typeof x.exp<"u","internal-error"),ze(typeof x.iat<"u","internal-error"),Number(x.exp)-Number(x.iat)}(x.idToken);this.updateTokensAndExpiration(x.idToken,x.refreshToken,I)}getToken(x,I=!1){var L=this;return(0,v.Z)(function*(){return ze(!L.accessToken||L.refreshToken,x,"user-token-expired"),I||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(x,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(x,I){var L=this;return(0,v.Z)(function*(){const{accessToken:G,refreshToken:ie,expiresIn:We}=yield function hi(_,x){return Et.apply(this,arguments)}(x,I);L.updateTokensAndExpiration(G,ie,Number(We))})()}updateTokensAndExpiration(x,I,L){this.refreshToken=I||null,this.accessToken=x||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(x,I){const{refreshToken:L,accessToken:G,expirationTime:ie}=I,We=new mi;return L&&(ze("string"==typeof L,"internal-error",{appName:x}),We.refreshToken=L),G&&(ze("string"==typeof G,"internal-error",{appName:x}),We.accessToken=G),ie&&(ze("number"==typeof ie,"internal-error",{appName:x}),We.expirationTime=ie),We}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(x){this.accessToken=x.accessToken,this.refreshToken=x.refreshToken,this.expirationTime=x.expirationTime}_clone(){return Object.assign(new mi,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function Zi(_,x){ze("string"==typeof _||typeof _>"u","internal-error",{appName:x})}class cn{constructor(x){var{uid:I,auth:L,stsTokenManager:G}=x,ie=(0,lt._T)(x,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new no(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=L,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ie.displayName||null,this.email=ie.email||null,this.emailVerified=ie.emailVerified||!1,this.phoneNumber=ie.phoneNumber||null,this.photoURL=ie.photoURL||null,this.isAnonymous=ie.isAnonymous||!1,this.tenantId=ie.tenantId||null,this.providerData=ie.providerData?[...ie.providerData]:[],this.metadata=new nn(ie.createdAt||void 0,ie.lastLoginAt||void 0)}getIdToken(x){var I=this;return(0,v.Z)(function*(){const L=yield Mi(I,I.stsTokenManager.getToken(I.auth,x));return ze(L,I.auth,"internal-error"),I.accessToken!==L&&(I.accessToken=L,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),L})()}getIdTokenResult(x){return function kr(_){return Hr.apply(this,arguments)}(this,x)}reload(){return function bo(_){return Dn.apply(this,arguments)}(this)}_assign(x){this!==x&&(ze(this.uid===x.uid,this.auth,"internal-error"),this.displayName=x.displayName,this.photoURL=x.photoURL,this.email=x.email,this.emailVerified=x.emailVerified,this.phoneNumber=x.phoneNumber,this.isAnonymous=x.isAnonymous,this.tenantId=x.tenantId,this.providerData=x.providerData.map(I=>Object.assign({},I)),this.metadata._copy(x.metadata),this.stsTokenManager._assign(x.stsTokenManager))}_clone(x){return new cn(Object.assign(Object.assign({},this),{auth:x,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(x){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=x,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(x){this.reloadListener?this.reloadListener(x):this.reloadUserInfo=x}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(x,I=!1){var L=this;return(0,v.Z)(function*(){let G=!1;x.idToken&&x.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(x),G=!0),I&&(yield ro(L)),yield L.auth._persistUserIfCurrent(L),G&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var x=this;return(0,v.Z)(function*(){const I=yield x.getIdToken();return yield Mi(x,function Ao(_,x){return ka.apply(this,arguments)}(x.auth,{idToken:I})),x.stsTokenManager.clearRefreshToken(),x.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(x=>Object.assign({},x)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(x,I){var L,G,ie,We,Lt,Ti,rn,Vn;const ys=null!==(L=I.displayName)&&void 0!==L?L:void 0,sc=null!==(G=I.email)&&void 0!==G?G:void 0,Su=null!==(ie=I.phoneNumber)&&void 0!==ie?ie:void 0,xf=null!==(We=I.photoURL)&&void 0!==We?We:void 0,jg=null!==(Lt=I.tenantId)&&void 0!==Lt?Lt:void 0,qg=null!==(Ti=I._redirectEventId)&&void 0!==Ti?Ti:void 0,xC=null!==(rn=I.createdAt)&&void 0!==rn?rn:void 0,pI=null!==(Vn=I.lastLoginAt)&&void 0!==Vn?Vn:void 0,{uid:op,emailVerified:Tf,isAnonymous:ap,providerData:Df,stsTokenManager:Ug}=I;ze(op&&Ug,x,"internal-error");const oc=mi.fromJSON(this.name,Ug);ze("string"==typeof op,x,"internal-error"),Zi(ys,x.name),Zi(sc,x.name),ze("boolean"==typeof Tf,x,"internal-error"),ze("boolean"==typeof ap,x,"internal-error"),Zi(Su,x.name),Zi(xf,x.name),Zi(jg,x.name),Zi(qg,x.name),Zi(xC,x.name),Zi(pI,x.name);const fI=new cn({uid:op,auth:x,email:sc,emailVerified:Tf,displayName:ys,isAnonymous:ap,photoURL:xf,phoneNumber:Su,tenantId:jg,stsTokenManager:oc,createdAt:xC,lastLoginAt:pI});return Df&&Array.isArray(Df)&&(fI.providerData=Df.map(If=>Object.assign({},If))),qg&&(fI._redirectEventId=qg),fI}static _fromIdTokenResponse(x,I,L=!1){return(0,v.Z)(function*(){const G=new mi;G.updateFromServerResponse(I);const ie=new cn({uid:I.localId,auth:x,stsTokenManager:G,isAnonymous:L});return yield ro(ie),ie})()}}const ye=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(I,L){var G=this;return(0,v.Z)(function*(){G.storage[I]=L})()}_get(I){var L=this;return(0,v.Z)(function*(){const G=L.storage[I];return void 0===G?null:G})()}_remove(I){var L=this;return(0,v.Z)(function*(){delete L.storage[I]})()}_addListener(I,L){}_removeListener(I,L){}}return _.type="NONE",_})();function pe(_,x,I){return`firebase:${_}:${x}:${I}`}class J{constructor(x,I,L){this.persistence=x,this.auth=I,this.userKey=L;const{config:G,name:ie}=this.auth;this.fullUserKey=pe(this.userKey,G.apiKey,ie),this.fullPersistenceKey=pe("persistence",G.apiKey,ie),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(x){return this.persistence._set(this.fullUserKey,x.toJSON())}getCurrentUser(){var x=this;return(0,v.Z)(function*(){const I=yield x.persistence._get(x.fullUserKey);return I?cn._fromJSON(x.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(x){var I=this;return(0,v.Z)(function*(){if(I.persistence===x)return;const L=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=x,L?I.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(x,I,L="authUser"){return(0,v.Z)(function*(){if(!I.length)return new J(Be(ye),x,L);const G=(yield Promise.all(I.map(function(){var rn=(0,v.Z)(function*(Vn){if(yield Vn._isAvailable())return Vn});return function(Vn){return rn.apply(this,arguments)}}()))).filter(rn=>rn);let ie=G[0]||Be(ye);const We=pe(L,x.config.apiKey,x.name);let Lt=null;for(const rn of I)try{const Vn=yield rn._get(We);if(Vn){const ys=cn._fromJSON(x,Vn);rn!==ie&&(Lt=ys),ie=rn;break}}catch{}const Ti=G.filter(rn=>rn._shouldAllowMigration);return ie._shouldAllowMigration&&Ti.length?(ie=Ti[0],Lt&&(yield ie._set(We,Lt.toJSON())),yield Promise.all(I.map(function(){var rn=(0,v.Z)(function*(Vn){if(Vn!==ie)try{yield Vn._remove(We)}catch{}});return function(Vn){return rn.apply(this,arguments)}}())),new J(ie,x,L)):new J(ie,x,L)})()}}function Y(_){const x=_.toLowerCase();if(x.includes("opera/")||x.includes("opr/")||x.includes("opios/"))return"Opera";if(Je(x))return"IEMobile";if(x.includes("msie")||x.includes("trident/"))return"IE";if(x.includes("edge/"))return"Edge";if(q(x))return"Firefox";if(x.includes("silk/"))return"Silk";if(Yt(x))return"Blackberry";if(at(x))return"Webos";if(Z(x))return"Safari";if((x.includes("chrome/")||ve(x))&&!x.includes("edge/"))return"Chrome";if(Pt(x))return"Android";{const L=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===L?.length)return L[1]}return"Other"}function q(_=(0,ue.z$)()){return/firefox\//i.test(_)}function Z(_=(0,ue.z$)()){const x=_.toLowerCase();return x.includes("safari/")&&!x.includes("chrome/")&&!x.includes("crios/")&&!x.includes("android")}function ve(_=(0,ue.z$)()){return/crios\//i.test(_)}function Je(_=(0,ue.z$)()){return/iemobile/i.test(_)}function Pt(_=(0,ue.z$)()){return/android/i.test(_)}function Yt(_=(0,ue.z$)()){return/blackberry/i.test(_)}function at(_=(0,ue.z$)()){return/webos/i.test(_)}function At(_=(0,ue.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ui(_=(0,ue.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function xn(_=(0,ue.z$)()){return At(_)||Pt(_)||at(_)||Yt(_)||/windows phone/i.test(_)||Je(_)}function Gr(_,x=[]){let I;switch(_){case"Browser":I=Y((0,ue.z$)());break;case"Worker":I=`${Y((0,ue.z$)())}-${_}`;break;default:I=_}const L=x.length?x.join(","):"FirebaseCore-web";return`${I}/JsCore/${ee.SDK_VERSION}/${L}`}class Ih{constructor(x){this.auth=x,this.queue=[]}pushCallback(x,I){const L=ie=>new Promise((We,Lt)=>{try{We(x(ie))}catch(Ti){Lt(Ti)}});L.onAbort=I,this.queue.push(L);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(x){var I=this;return(0,v.Z)(function*(){if(I.auth.currentUser===x)return;const L=[];try{for(const G of I.queue)yield G(x),G.onAbort&&L.push(G.onAbort)}catch(G){L.reverse();for(const ie of L)try{ie()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:G?.message})}})()}}class du{constructor(x,I,L){this.app=x,this.heartbeatServiceProvider=I,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new He(this),this.idTokenSubscription=new He(this),this.beforeStateQueue=new Ih(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=li,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=x.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(x,I){var L=this;return I&&(this._popupRedirectResolver=Be(I)),this._initializationPromise=this.queue((0,v.Z)(function*(){var G,ie;if(!L._deleted&&(L.persistenceManager=yield J.create(L,x),!L._deleted)){if(null!==(G=L._popupRedirectResolver)&&void 0!==G&&G._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch{}yield L.initializeCurrentUser(I),L.lastNotifiedUid=(null===(ie=L.currentUser)||void 0===ie?void 0:ie.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var x=this;return(0,v.Z)(function*(){if(x._deleted)return;const I=yield x.assertedPersistence.getCurrentUser();if(x.currentUser||I){if(x.currentUser&&I&&x.currentUser.uid===I.uid)return x._currentUser._assign(I),void(yield x.currentUser.getIdToken());yield x._updateCurrentUser(I,!0)}})()}initializeCurrentUser(x){var I=this;return(0,v.Z)(function*(){var L;const G=yield I.assertedPersistence.getCurrentUser();let ie=G,We=!1;if(x&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const Lt=null===(L=I.redirectUser)||void 0===L?void 0:L._redirectEventId,Ti=ie?._redirectEventId,rn=yield I.tryRedirectSignIn(x);(!Lt||Lt===Ti)&&rn?.user&&(ie=rn.user,We=!0)}if(!ie)return I.directlySetCurrentUser(null);if(!ie._redirectEventId){if(We)try{yield I.beforeStateQueue.runMiddleware(ie)}catch(Lt){ie=G,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(Lt))}return ie?I.reloadAndSetCurrentUserOrClear(ie):I.directlySetCurrentUser(null)}return ze(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===ie._redirectEventId?I.directlySetCurrentUser(ie):I.reloadAndSetCurrentUserOrClear(ie)})()}tryRedirectSignIn(x){var I=this;return(0,v.Z)(function*(){let L=null;try{L=yield I._popupRedirectResolver._completeRedirectFn(I,x,!0)}catch{yield I._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(x){var I=this;return(0,v.Z)(function*(){try{yield ro(x)}catch(L){if("auth/network-request-failed"!==L?.code)return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(x)})()}useDeviceLanguage(){this.languageCode=function vn(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var x=this;return(0,v.Z)(function*(){x._deleted=!0})()}updateCurrentUser(x){var I=this;return(0,v.Z)(function*(){const L=x?(0,ue.m9)(x):null;return L&&ze(L.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(L&&L._clone(I))})()}_updateCurrentUser(x,I=!1){var L=this;return(0,v.Z)(function*(){if(!L._deleted)return x&&ze(L.tenantId===x.tenantId,L,"tenant-id-mismatch"),I||(yield L.beforeStateQueue.runMiddleware(x)),L.queue((0,v.Z)(function*(){yield L.directlySetCurrentUser(x),L.notifyAuthListeners()}))})()}signOut(){var x=this;return(0,v.Z)(function*(){return yield x.beforeStateQueue.runMiddleware(null),(x.redirectPersistenceManager||x._popupRedirectResolver)&&(yield x._setRedirectUser(null)),x._updateCurrentUser(null,!0)})()}setPersistence(x){var I=this;return this.queue((0,v.Z)(function*(){yield I.assertedPersistence.setPersistence(Be(x))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(x){this._errorFactory=new ue.LL("auth","Firebase",x())}onAuthStateChanged(x,I,L){return this.registerStateListener(this.authStateSubscription,x,I,L)}beforeAuthStateChanged(x,I){return this.beforeStateQueue.pushCallback(x,I)}onIdTokenChanged(x,I,L){return this.registerStateListener(this.idTokenSubscription,x,I,L)}toJSON(){var x;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(x=this._currentUser)||void 0===x?void 0:x.toJSON()}}_setRedirectUser(x,I){var L=this;return(0,v.Z)(function*(){const G=yield L.getOrInitRedirectPersistenceManager(I);return null===x?G.removeCurrentUser():G.setCurrentUser(x)})()}getOrInitRedirectPersistenceManager(x){var I=this;return(0,v.Z)(function*(){if(!I.redirectPersistenceManager){const L=x&&Be(x)||I._popupRedirectResolver;ze(L,I,"argument-error"),I.redirectPersistenceManager=yield J.create(I,[Be(L._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(x){var I=this;return(0,v.Z)(function*(){var L,G;return I._isInitialized&&(yield I.queue((0,v.Z)(function*(){}))),(null===(L=I._currentUser)||void 0===L?void 0:L._redirectEventId)===x?I._currentUser:(null===(G=I.redirectUser)||void 0===G?void 0:G._redirectEventId)===x?I.redirectUser:null})()}_persistUserIfCurrent(x){var I=this;return(0,v.Z)(function*(){if(x===I.currentUser)return I.queue((0,v.Z)(function*(){return I.directlySetCurrentUser(x)}))})()}_notifyListenersIfCurrent(x){x===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var x,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(I=null===(x=this.currentUser)||void 0===x?void 0:x.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(x,I,L,G){if(this._deleted)return()=>{};const ie="function"==typeof I?I:I.next.bind(I),We=this._isInitialized?Promise.resolve():this._initializationPromise;return ze(We,this,"internal-error"),We.then(()=>ie(this.currentUser)),"function"==typeof I?x.addObserver(I,L,G):x.addObserver(I)}directlySetCurrentUser(x){var I=this;return(0,v.Z)(function*(){I.currentUser&&I.currentUser!==x&&I._currentUser._stopProactiveRefresh(),x&&I.isProactiveRefreshEnabled&&x._startProactiveRefresh(),I.currentUser=x,x?yield I.assertedPersistence.setCurrentUser(x):yield I.assertedPersistence.removeCurrentUser()})()}queue(x){return this.operations=this.operations.then(x,x),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(x){!x||this.frameworks.includes(x)||(this.frameworks.push(x),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var x=this;return(0,v.Z)(function*(){var I;const L={"X-Client-Version":x.clientVersion};x.app.options.appId&&(L["X-Firebase-gmpid"]=x.app.options.appId);const G=yield null===(I=x.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return G&&(L["X-Firebase-Client"]=G),L})()}}function zi(_){return(0,ue.m9)(_)}class He{constructor(x){this.auth=x,this.observer=null,this.addObserver=(0,ue.ne)(I=>this.observer=I)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function mt(_,x,I){const L=zi(_);ze(L._canInitEmulator,L,"emulator-config-failed"),ze(/^https?:\/\//.test(x),L,"invalid-emulator-scheme");const G=!!I?.disableWarnings,ie=Ut(x),{host:We,port:Lt}=function Oi(_){const x=Ut(_),I=/(\/\/)?([^?#/]+)/.exec(_.substr(x.length));if(!I)return{host:"",port:null};const L=I[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(L);if(G){const ie=G[1];return{host:ie,port:kn(L.substr(ie.length+1))}}{const[ie,We]=L.split(":");return{host:ie,port:kn(We)}}}(x);L.config.emulator={url:`${ie}//${We}${null===Lt?"":`:${Lt}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:We,port:Lt,protocol:ie.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function lr(){function _(){const x=document.createElement("p"),I=x.style;x.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",x.classList.add("firebase-emulator-warning"),document.body.appendChild(x)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Ut(_){const x=_.indexOf(":");return x<0?"":_.substr(0,x+1)}function kn(_){if(!_)return null;const x=Number(_);return isNaN(x)?null:x}class is{constructor(x,I){this.providerId=x,this.signInMethod=I}toJSON(){return Qe("not implemented")}_getIdTokenResponse(x){return Qe("not implemented")}_linkToIdToken(x,I){return Qe("not implemented")}_getReauthenticationResolver(x){return Qe("not implemented")}}function Kr(_,x){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:resetPassword",En(_,x))})).apply(this,arguments)}function pa(_,x){return xr.apply(this,arguments)}function xr(){return(xr=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function Zb(_,x){return qd.apply(this,arguments)}function qd(){return(qd=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:update",En(_,x))})).apply(this,arguments)}function Yu(){return(Yu=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithPassword",En(_,x))})).apply(this,arguments)}function pu(_,x){return fu.apply(this,arguments)}function fu(){return(fu=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:sendOobCode",En(_,x))})).apply(this,arguments)}function Ah(_,x){return ko.apply(this,arguments)}function ko(){return(ko=(0,v.Z)(function*(_,x){return pu(_,x)})).apply(this,arguments)}function gg(_,x){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,v.Z)(function*(_,x){return pu(_,x)})).apply(this,arguments)}function _a(_,x){return gu.apply(this,arguments)}function gu(){return(gu=(0,v.Z)(function*(_,x){return pu(_,x)})).apply(this,arguments)}function Uc(_,x){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,v.Z)(function*(_,x){return pu(_,x)})).apply(this,arguments)}function ef(){return(ef=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithEmailLink",En(_,x))})).apply(this,arguments)}function Wd(){return(Wd=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithEmailLink",En(_,x))})).apply(this,arguments)}class Gc extends is{constructor(x,I,L,G=null){super("password",L),this._email=x,this._password=I,this._tenantId=G}static _fromEmailAndPassword(x,I){return new Gc(x,I,"password")}static _fromEmailAndCode(x,I,L=null){return new Gc(x,I,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(x){var I=this;return(0,v.Z)(function*(){switch(I.signInMethod){case"password":return function Ud(_,x){return Yu.apply(this,arguments)}(x,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function El(_,x){return ef.apply(this,arguments)}(x,{email:I._email,oobCode:I._password});default:oi(x,"internal-error")}})()}_linkToIdToken(x,I){var L=this;return(0,v.Z)(function*(){switch(L.signInMethod){case"password":return pa(x,{idToken:I,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function yS(_,x){return Wd.apply(this,arguments)}(x,{idToken:I,email:L._email,oobCode:L._password});default:oi(x,"internal-error")}})()}_getReauthenticationResolver(x){return this._getIdTokenResponse(x)}}function mu(_,x){return xl.apply(this,arguments)}function xl(){return(xl=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithIdp",En(_,x))})).apply(this,arguments)}class kh extends is{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(x){const I=new kh(x.providerId,x.signInMethod);return x.idToken||x.accessToken?(x.idToken&&(I.idToken=x.idToken),x.accessToken&&(I.accessToken=x.accessToken),x.nonce&&!x.pendingToken&&(I.nonce=x.nonce),x.pendingToken&&(I.pendingToken=x.pendingToken)):x.oauthToken&&x.oauthTokenSecret?(I.accessToken=x.oauthToken,I.secret=x.oauthTokenSecret):oi("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:L,signInMethod:G}=I,ie=(0,lt._T)(I,["providerId","signInMethod"]);if(!L||!G)return null;const We=new kh(L,G);return We.idToken=ie.idToken||void 0,We.accessToken=ie.accessToken||void 0,We.secret=ie.secret,We.nonce=ie.nonce,We.pendingToken=ie.pendingToken||null,We}_getIdTokenResponse(x){return mu(x,this.buildRequest())}_linkToIdToken(x,I){const L=this.buildRequest();return L.idToken=I,mu(x,L)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,mu(x,I)}buildRequest(){const x={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)x.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),x.postBody=(0,ue.xO)(I)}return x}}function Qb(_,x){return tf.apply(this,arguments)}function tf(){return(tf=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:sendVerificationCode",En(_,x))})).apply(this,arguments)}function rf(){return(rf=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithPhoneNumber",En(_,x))})).apply(this,arguments)}function Xb(){return(Xb=(0,v.Z)(function*(_,x){const I=yield os(_,"POST","/v1/accounts:signInWithPhoneNumber",En(_,x));if(I.temporaryProof)throw Es(_,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const HD={USER_NOT_FOUND:"user-not-found"};function Jb(){return(Jb=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithPhoneNumber",En(_,Object.assign(Object.assign({},x),{operation:"REAUTH"})),HD)})).apply(this,arguments)}class Gd extends is{constructor(x){super("phone","phone"),this.params=x}static _fromVerification(x,I){return new Gd({verificationId:x,verificationCode:I})}static _fromTokenResponse(x,I){return new Gd({phoneNumber:x,temporaryProof:I})}_getIdTokenResponse(x){return function nf(_,x){return rf.apply(this,arguments)}(x,this._makeVerificationRequest())}_linkToIdToken(x,I){return function CS(_,x){return Xb.apply(this,arguments)}(x,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(x){return function uv(_,x){return Jb.apply(this,arguments)}(x,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:x,phoneNumber:I,verificationId:L,verificationCode:G}=this.params;return x&&I?{temporaryProof:x,phoneNumber:I}:{sessionInfo:L,code:G}}toJSON(){const x={providerId:this.providerId};return this.params.phoneNumber&&(x.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(x.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(x.verificationCode=this.params.verificationCode),this.params.verificationId&&(x.verificationId=this.params.verificationId),x}static fromJSON(x){"string"==typeof x&&(x=JSON.parse(x));const{verificationId:I,verificationCode:L,phoneNumber:G,temporaryProof:ie}=x;return L||I||G||ie?new Gd({verificationId:I,verificationCode:L,phoneNumber:G,temporaryProof:ie}):null}}class sf{constructor(x){var I,L,G,ie,We,Lt;const Ti=(0,ue.zd)((0,ue.pd)(x)),rn=null!==(I=Ti.apiKey)&&void 0!==I?I:null,Vn=null!==(L=Ti.oobCode)&&void 0!==L?L:null,ys=function cv(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=Ti.mode)&&void 0!==G?G:null);ze(rn&&Vn&&ys,"argument-error"),this.apiKey=rn,this.operation=ys,this.code=Vn,this.continueUrl=null!==(ie=Ti.continueUrl)&&void 0!==ie?ie:null,this.languageCode=null!==(We=Ti.languageCode)&&void 0!==We?We:null,this.tenantId=null!==(Lt=Ti.tenantId)&&void 0!==Lt?Lt:null}static parseLink(x){const I=function mg(_){const x=(0,ue.zd)((0,ue.pd)(_)).link,I=x?(0,ue.zd)((0,ue.pd)(x)).deep_link_id:null,L=(0,ue.zd)((0,ue.pd)(_)).deep_link_id;return(L?(0,ue.zd)((0,ue.pd)(L)).link:null)||L||I||x||_}(x);try{return new sf(I)}catch{return null}}}let dv=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(I,L){return Gc._fromEmailAndPassword(I,L)}static credentialWithLink(I,L){const G=sf.parseLink(L);return ze(G,"argument-error"),Gc._fromEmailAndCode(I,G.code,G.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class fa{constructor(x){this.providerId=x,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(x){this.defaultLanguageCode=x}setCustomParameters(x){return this.customParameters=x,this}getCustomParameters(){return this.customParameters}}class Kd extends fa{constructor(){super(...arguments),this.scopes=[]}addScope(x){return this.scopes.includes(x)||this.scopes.push(x),this}getScopes(){return[...this.scopes]}}class Zu extends Kd{static credentialFromJSON(x){const I="string"==typeof x?JSON.parse(x):x;return ze("providerId"in I&&"signInMethod"in I,"argument-error"),kh._fromParams(I)}credential(x){return this._credential(Object.assign(Object.assign({},x),{nonce:x.rawNonce}))}_credential(x){return ze(x.idToken||x.accessToken,"argument-error"),kh._fromParams(Object.assign(Object.assign({},x),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(x){return Zu.oauthCredentialFromTaggedObject(x)}static credentialFromError(x){return Zu.oauthCredentialFromTaggedObject(x.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{oauthIdToken:I,oauthAccessToken:L,oauthTokenSecret:G,pendingToken:ie,nonce:We,providerId:Lt}=x;if(!L&&!G&&!I&&!ie||!Lt)return null;try{return new Zu(Lt)._credential({idToken:I,accessToken:L,nonce:We,pendingToken:ie})}catch{return null}}}let pv=(()=>{class _ extends Kd{constructor(){super("facebook.com")}static credential(I){return kh._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return _.credentialFromTaggedObject(I)}static credentialFromError(I){return _.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return _.credential(I.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),af=(()=>{class _ extends Kd{constructor(){super("google.com"),this.addScope("profile")}static credential(I,L){return kh._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:L})}static credentialFromResult(I){return _.credentialFromTaggedObject(I)}static credentialFromError(I){return _.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:L,oauthAccessToken:G}=I;if(!L&&!G)return null;try{return _.credential(L,G)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),vg=(()=>{class _ extends Kd{constructor(){super("github.com")}static credential(I){return kh._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return _.credentialFromTaggedObject(I)}static credentialFromError(I){return _.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return _.credential(I.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class vu extends is{constructor(x,I){super(x,x),this.pendingToken=I}_getIdTokenResponse(x){return mu(x,this.buildRequest())}_linkToIdToken(x,I){const L=this.buildRequest();return L.idToken=I,mu(x,L)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,mu(x,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:L,signInMethod:G,pendingToken:ie}=I;return L&&G&&ie&&L===G?new vu(L,ie):null}static _create(x,I){return new vu(x,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _h extends fa{constructor(x){ze(x.startsWith("saml."),"argument-error"),super(x)}static credentialFromResult(x){return _h.samlCredentialFromTaggedObject(x)}static credentialFromError(x){return _h.samlCredentialFromTaggedObject(x.customData||{})}static credentialFromJSON(x){const I=vu.fromJSON(x);return ze(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{pendingToken:I,providerId:L}=x;if(!I||!L)return null;try{return vu._create(L,I)}catch{return null}}}let yg=(()=>{class _ extends Kd{constructor(){super("twitter.com")}static credential(I,L){return kh._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:L})}static credentialFromResult(I){return _.credentialFromTaggedObject(I)}static credentialFromError(I){return _.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:L,oauthTokenSecret:G}=I;if(!L||!G)return null;try{return _.credential(L,G)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Ma(_,x){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signUp",En(_,x))})).apply(this,arguments)}class ol{constructor(x){this.user=x.user,this.providerId=x.providerId,this._tokenResponse=x._tokenResponse,this.operationType=x.operationType}static _fromIdTokenResponse(x,I,L,G=!1){return(0,v.Z)(function*(){const ie=yield cn._fromIdTokenResponse(x,L,G),We=lf(L);return new ol({user:ie,providerId:We,_tokenResponse:L,operationType:I})})()}static _forOperation(x,I,L){return(0,v.Z)(function*(){yield x._updateTokensIfNecessary(L,!0);const G=lf(L);return new ol({user:x,providerId:G,_tokenResponse:L,operationType:I})})()}}function lf(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function jD(_){return wS.apply(this,arguments)}function wS(){return(wS=(0,v.Z)(function*(_){var x;const I=zi(_);if(yield I._initializationPromise,null!==(x=I.currentUser)&&void 0!==x&&x.isAnonymous)return new ol({user:I.currentUser,providerId:null,operationType:"signIn"});const L=yield Ma(I,{returnSecureToken:!0}),G=yield ol._fromIdTokenResponse(I,"signIn",L,!0);return yield I._updateCurrentUser(G.user),G})).apply(this,arguments)}class Bs extends ue.ZR{constructor(x,I,L,G){var ie;super(I.code,I.message),this.operationType=L,this.user=G,Object.setPrototypeOf(this,Bs.prototype),this.customData={appName:x.name,tenantId:null!==(ie=x.tenantId)&&void 0!==ie?ie:void 0,_serverResponse:I.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(x,I,L,G){return new Bs(x,I,L,G)}}function gv(_,x,I,L){return("reauthenticate"===x?I._getReauthenticationResolver(_):I._getIdTokenResponse(_)).catch(ie=>{throw"auth/multi-factor-auth-required"===ie.code?Bs._fromErrorAndOperation(_,ie,x,L):ie})}function Kc(_){return new Set(_.map(({providerId:x})=>x).filter(x=>!!x))}function $c(_,x){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,v.Z)(function*(_,x){const I=(0,ue.m9)(_);yield yu(!0,I,x);const{providerUserInfo:L}=yield fi(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[x]}),G=Kc(L||[]);return I.providerData=I.providerData.filter(ie=>G.has(ie.providerId)),G.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function mv(_,x){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,v.Z)(function*(_,x,I=!1){const L=yield Mi(_,x._linkToIdToken(_.auth,yield _.getIdToken()),I);return ol._forOperation(_,"link",L)})).apply(this,arguments)}function yu(_,x,I){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,v.Z)(function*(_,x,I){yield ro(x);const G=!1===_?"provider-already-linked":"no-such-provider";ze(Kc(x.providerData).has(I)===_,x.auth,G)})).apply(this,arguments)}function eC(_,x){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,v.Z)(function*(_,x,I=!1){const{auth:L}=_,G="reauthenticate";try{const ie=yield Mi(_,gv(L,G,x,_),I);ze(ie.idToken,L,"internal-error");const We=_i(ie.idToken);ze(We,L,"internal-error");const{sub:Lt}=We;return ze(_.uid===Lt,L,"user-mismatch"),ol._forOperation(_,G,ie)}catch(ie){throw"auth/user-not-found"===ie?.code&&oi(L,"user-mismatch"),ie}})).apply(this,arguments)}function vv(_,x){return lh.apply(this,arguments)}function lh(){return(lh=(0,v.Z)(function*(_,x,I=!1){const L="signIn",G=yield gv(_,L,x),ie=yield ol._fromIdTokenResponse(_,L,G);return I||(yield _._updateCurrentUser(ie.user)),ie})).apply(this,arguments)}function $d(_,x){return hf.apply(this,arguments)}function hf(){return(hf=(0,v.Z)(function*(_,x){return vv(zi(_),x)})).apply(this,arguments)}function Q(_,x){return se.apply(this,arguments)}function se(){return(se=(0,v.Z)(function*(_,x){const I=(0,ue.m9)(_);return yield yu(!1,I,x.providerId),mv(I,x)})).apply(this,arguments)}function Re(_,x){return ht.apply(this,arguments)}function ht(){return(ht=(0,v.Z)(function*(_,x){return eC((0,ue.m9)(_),x)})).apply(this,arguments)}function Gt(_,x){return ii.apply(this,arguments)}function ii(){return(ii=(0,v.Z)(function*(_,x){return os(_,"POST","/v1/accounts:signInWithCustomToken",En(_,x))})).apply(this,arguments)}function en(_,x){return as.apply(this,arguments)}function as(){return(as=(0,v.Z)(function*(_,x){const I=zi(_),L=yield Gt(I,{token:x,returnSecureToken:!0}),G=yield ol._fromIdTokenResponse(I,"signIn",L);return yield I._updateCurrentUser(G.user),G})).apply(this,arguments)}class xs{constructor(x,I){this.factorId=x,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(x,I){return"phoneInfo"in I?vt._fromServerResponse(x,I):oi(x,"internal-error")}}class vt extends xs{constructor(x){super("phone",x),this.phoneNumber=x.phoneInfo}static _fromServerResponse(x,I){return new vt(I)}}function ji(_,x,I){var L;ze((null===(L=I.url)||void 0===L?void 0:L.length)>0,_,"invalid-continue-uri"),ze(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),x.continueUrl=I.url,x.dynamicLinkDomain=I.dynamicLinkDomain,x.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(ze(I.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),x.iOSBundleId=I.iOS.bundleId),I.android&&(ze(I.android.packageName.length>0,_,"missing-android-pkg-name"),x.androidInstallApp=I.android.installApp,x.androidMinimumVersionCode=I.android.minimumVersion,x.androidPackageName=I.android.packageName)}function Gn(_,x,I){return hh.apply(this,arguments)}function hh(){return(hh=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_),G={requestType:"PASSWORD_RESET",email:x};I&&ji(L,G,I),yield gg(L,G)})).apply(this,arguments)}function ls(_,x,I){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,v.Z)(function*(_,x,I){yield Kr((0,ue.m9)(_),{oobCode:x,newPassword:I})})).apply(this,arguments)}function Yc(_,x){return ga.apply(this,arguments)}function ga(){return(ga=(0,v.Z)(function*(_,x){yield Zb((0,ue.m9)(_),{oobCode:x})})).apply(this,arguments)}function al(_,x){return ql.apply(this,arguments)}function ql(){return(ql=(0,v.Z)(function*(_,x){const I=(0,ue.m9)(_),L=yield Kr(I,{oobCode:x}),G=L.requestType;switch(ze(G,I,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ze(L.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ze(L.mfaInfo,I,"internal-error");default:ze(L.email,I,"internal-error")}let ie=null;return L.mfaInfo&&(ie=xs._fromServerResponse(zi(I),L.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.newEmail:L.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.email:L.newEmail)||null,multiFactorInfo:ie},operation:G}})).apply(this,arguments)}function yv(_,x){return tC.apply(this,arguments)}function tC(){return(tC=(0,v.Z)(function*(_,x){const{data:I}=yield al((0,ue.m9)(_),x);return I.email})).apply(this,arguments)}function B1(_,x,I){return uf.apply(this,arguments)}function uf(){return(uf=(0,v.Z)(function*(_,x,I){const L=zi(_),G=yield Ma(L,{returnSecureToken:!0,email:x,password:I}),ie=yield ol._fromIdTokenResponse(L,"signIn",G);return yield L._updateCurrentUser(ie.user),ie})).apply(this,arguments)}function $o(_,x,I){return $d((0,ue.m9)(_),dv.credential(x,I))}function bu(_,x,I){return bg.apply(this,arguments)}function bg(){return(bg=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_),G={requestType:"EMAIL_SIGNIN",email:x};ze(I.handleCodeInApp,L,"argument-error"),I&&ji(L,G,I),yield _a(L,G)})).apply(this,arguments)}function Cg(_,x){return"EMAIL_SIGNIN"===sf.parseLink(x)?.operation}function Zc(_,x,I){return SS.apply(this,arguments)}function SS(){return(SS=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_),G=dv.credentialWithLink(x,I||qt());return ze(G._tenantId===(L.tenantId||null),L,"tenant-id-mismatch"),$d(L,G)})).apply(this,arguments)}function qD(_,x){return ES.apply(this,arguments)}function ES(){return(ES=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:createAuthUri",En(_,x))})).apply(this,arguments)}function V1(_,x){return bv.apply(this,arguments)}function bv(){return(bv=(0,v.Z)(function*(_,x){const L={identifier:x,continueUri:jt()?qt():"http://localhost"},{signinMethods:G}=yield qD((0,ue.m9)(_),L);return G||[]})).apply(this,arguments)}function iC(_,x){return nC.apply(this,arguments)}function nC(){return(nC=(0,v.Z)(function*(_,x){const I=(0,ue.m9)(_),G={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};x&&ji(I.auth,G,x);const{email:ie}=yield Ah(I.auth,G);ie!==_.email&&(yield _.reload())})).apply(this,arguments)}function rC(_,x,I){return sC.apply(this,arguments)}function sC(){return(sC=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_),ie={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:x};I&&ji(L.auth,ie,I);const{email:We}=yield Uc(L.auth,ie);We!==_.email&&(yield _.reload())})).apply(this,arguments)}function UD(_,x){return Cv.apply(this,arguments)}function Cv(){return(Cv=(0,v.Z)(function*(_,x){return Yi(_,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function WD(_,x){return oC.apply(this,arguments)}function oC(){return(oC=(0,v.Z)(function*(_,{displayName:x,photoURL:I}){if(void 0===x&&void 0===I)return;const L=(0,ue.m9)(_),ie={idToken:yield L.getIdToken(),displayName:x,photoUrl:I,returnSecureToken:!0},We=yield Mi(L,UD(L.auth,ie));L.displayName=We.displayName||null,L.photoURL=We.photoUrl||null;const Lt=L.providerData.find(({providerId:Ti})=>"password"===Ti);Lt&&(Lt.displayName=L.displayName,Lt.photoURL=L.photoURL),yield L._updateTokensIfNecessary(We)})).apply(this,arguments)}function GD(_,x){return cf((0,ue.m9)(_),x,null)}function xS(_,x){return cf((0,ue.m9)(_),null,x)}function cf(_,x,I){return Yd.apply(this,arguments)}function Yd(){return(Yd=(0,v.Z)(function*(_,x,I){const{auth:L}=_,ie={idToken:yield _.getIdToken(),returnSecureToken:!0};x&&(ie.email=x),I&&(ie.password=I);const We=yield Mi(_,pa(L,ie));yield _._updateTokensIfNecessary(We,!0)})).apply(this,arguments)}class Ys{constructor(x,I,L={}){this.isNewUser=x,this.providerId=I,this.profile=L}}class ec extends Ys{constructor(x,I,L,G){super(x,I,L),this.username=G}}class Vs extends Ys{constructor(x,I){super(x,"facebook.com",I)}}class TS extends ec{constructor(x,I){super(x,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class $D extends Ys{constructor(x,I){super(x,"google.com",I)}}class DS extends ec{constructor(x,I,L){super(x,"twitter.com",I,L)}}function YD(_){const{user:x,_tokenResponse:I}=_;return x.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function KD(_){var x,I;if(!_)return null;const{providerId:L}=_,G=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},ie=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!L&&_?.idToken){const We=null===(I=null===(x=_i(_.idToken))||void 0===x?void 0:x.firebase)||void 0===I?void 0:I.sign_in_provider;if(We)return new Ys(ie,"anonymous"!==We&&"custom"!==We?We:null)}if(!L)return null;switch(L){case"facebook.com":return new Vs(ie,G);case"github.com":return new TS(ie,G);case"google.com":return new $D(ie,G);case"twitter.com":return new DS(ie,G,_.screenName||null);case"custom":case"anonymous":return new Ys(ie,null);default:return new Ys(ie,L,G)}}(I)}function Sg(_,x,I,L){return(0,ue.m9)(_).onAuthStateChanged(x,I,L)}class uh{constructor(x,I,L){this.type=x,this.credential=I,this.auth=L}static _fromIdtoken(x,I){return new uh("enroll",x,I)}static _fromMfaPendingCredential(x){return new uh("signin",x)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(x){var I,L;if(x?.multiFactorSession){if(null!==(I=x.multiFactorSession)&&void 0!==I&&I.pendingCredential)return uh._fromMfaPendingCredential(x.multiFactorSession.pendingCredential);if(null!==(L=x.multiFactorSession)&&void 0!==L&&L.idToken)return uh._fromIdtoken(x.multiFactorSession.idToken)}return null}}class uC{constructor(x,I,L){this.session=x,this.hints=I,this.signInResolver=L}static _fromError(x,I){const L=zi(x),G=I.customData._serverResponse,ie=(G.mfaInfo||[]).map(Lt=>xs._fromServerResponse(L,Lt));ze(G.mfaPendingCredential,L,"internal-error");const We=uh._fromMfaPendingCredential(G.mfaPendingCredential);return new uC(We,ie,function(){var Lt=(0,v.Z)(function*(Ti){const rn=yield Ti._process(L,We);delete G.mfaInfo,delete G.mfaPendingCredential;const Vn=Object.assign(Object.assign({},G),{idToken:rn.idToken,refreshToken:rn.refreshToken});switch(I.operationType){case"signIn":const ys=yield ol._fromIdTokenResponse(L,I.operationType,Vn);return yield L._updateCurrentUser(ys.user),ys;case"reauthenticate":return ze(I.user,L,"internal-error"),ol._forOperation(I.user,I.operationType,Vn);default:oi(L,"internal-error")}});return function(Ti){return Lt.apply(this,arguments)}}())}resolveSignIn(x){var I=this;return(0,v.Z)(function*(){return I.signInResolver(x)})()}}function ZD(_,x){var I;const L=(0,ue.m9)(_),G=x;return ze(x.customData.operationType,L,"argument-error"),ze(null===(I=G.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,L,"argument-error"),uC._fromError(L,G)}function Eg(_,x){return Yi(_,"POST","/v2/accounts/mfaEnrollment:start",En(_,x))}class Ev{constructor(x){this.user=x,this.enrolledFactors=[],x._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(L=>xs._fromServerResponse(x.auth,L)))})}static _fromUser(x){return new Ev(x)}getSession(){var x=this;return(0,v.Z)(function*(){return uh._fromIdtoken(yield x.user.getIdToken(),x.user.auth)})()}enroll(x,I){var L=this;return(0,v.Z)(function*(){const G=x,ie=yield L.getSession(),We=yield Mi(L.user,G._process(L.user.auth,ie,I));return yield L.user._updateTokensIfNecessary(We),L.user.reload()})()}unenroll(x){var I=this;return(0,v.Z)(function*(){const L="string"==typeof x?x:x.uid,G=yield I.user.getIdToken(),ie=yield Mi(I.user,function Sv(_,x){return Yi(_,"POST","/v2/accounts/mfaEnrollment:withdraw",En(_,x))}(I.user.auth,{idToken:G,mfaEnrollmentId:L}));I.enrolledFactors=I.enrolledFactors.filter(({uid:We})=>We!==L),yield I.user._updateTokensIfNecessary(ie);try{yield I.user.reload()}catch(We){if("auth/user-token-expired"!==We?.code)throw We}})()}}const QD=new WeakMap;function AS(_){const x=(0,ue.m9)(_);return QD.has(x)||QD.set(x,Ev._fromUser(x)),QD.get(x)}const tc="__sak";class dC{constructor(x,I){this.storageRetriever=x,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(tc,"1"),this.storage.removeItem(tc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(x,I){return this.storage.setItem(x,JSON.stringify(I)),Promise.resolve()}_get(x){const I=this.storage.getItem(x);return Promise.resolve(I?JSON.parse(I):null)}_remove(x){return this.storage.removeItem(x),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qd=(()=>{class _ extends dC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,L)=>this.onStorageEvent(I,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function pC(){const _=(0,ue.z$)();return Z(_)||At(_)}()&&function sl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=xn(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const L of Object.keys(this.listeners)){const G=this.storage.getItem(L),ie=this.localCache[L];G!==ie&&I(L,ie,G)}}onStorageEvent(I,L=!1){if(!I.key)return void this.forAllChangedKeys((Lt,Ti,rn)=>{this.notifyListeners(Lt,rn)});const G=I.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Lt=this.storage.getItem(G);if(I.newValue!==Lt)null!==I.newValue?this.storage.setItem(G,I.newValue):this.storage.removeItem(G);else if(this.localCache[G]===I.newValue&&!L)return}const ie=()=>{const Lt=this.storage.getItem(G);!L&&this.localCache[G]===Lt||this.notifyListeners(G,Lt)},We=this.storage.getItem(G);!function dn(){return(0,ue.w1)()&&10===document.documentMode}()||We===I.newValue||I.newValue===I.oldValue?ie():setTimeout(ie,10)}notifyListeners(I,L){this.localCache[I]=L;const G=this.listeners[I];if(G)for(const ie of Array.from(G))ie(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,L,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:L,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,L){var G=()=>super._set,ie=this;return(0,v.Z)(function*(){yield G().call(ie,I,L),ie.localCache[I]=JSON.stringify(L)})()}_get(I){var L=()=>super._get,G=this;return(0,v.Z)(function*(){const ie=yield L().call(G,I);return G.localCache[I]=JSON.stringify(ie),ie})()}_remove(I){var L=()=>super._remove,G=this;return(0,v.Z)(function*(){yield L().call(G,I),delete G.localCache[I]})()}}return _.type="LOCAL",_})(),Qc=(()=>{class _ extends dC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,L){}_removeListener(I,L){}}return _.type="SESSION",_})();let xv=(()=>{class _{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const L=this.receivers.find(ie=>ie.isListeningto(I));if(L)return L;const G=new _(I);return this.receivers.push(G),G}isListeningto(I){return this.eventTarget===I}handleEvent(I){var L=this;return(0,v.Z)(function*(){const G=I,{eventId:ie,eventType:We,data:Lt}=G.data,Ti=L.handlersMap[We];if(!Ti?.size)return;G.ports[0].postMessage({status:"ack",eventId:ie,eventType:We});const rn=Array.from(Ti).map(function(){var ys=(0,v.Z)(function*(sc){return sc(G.origin,Lt)});return function(sc){return ys.apply(this,arguments)}}()),Vn=yield function fC(_){return Promise.all(_.map(function(){var x=(0,v.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(L){return{fulfilled:!1,reason:L}}});return function(I){return x.apply(this,arguments)}}()))}(rn);G.ports[0].postMessage({status:"done",eventId:ie,eventType:We,response:Vn})})()}_subscribe(I,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(L)}_unsubscribe(I,L){this.handlersMap[I]&&L&&this.handlersMap[I].delete(L),(!L||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function df(_="",x=10){let I="";for(let L=0;L<x;L++)I+=Math.floor(10*Math.random());return _+I}class eI{constructor(x){this.target=x,this.handlers=new Set}removeMessageHandler(x){x.messageChannel&&(x.messageChannel.port1.removeEventListener("message",x.onMessage),x.messageChannel.port1.close()),this.handlers.delete(x)}_send(x,I,L=50){var G=this;return(0,v.Z)(function*(){const ie=typeof MessageChannel<"u"?new MessageChannel:null;if(!ie)throw new Error("connection_unavailable");let We,Lt;return new Promise((Ti,rn)=>{const Vn=df("",20);ie.port1.start();const ys=setTimeout(()=>{rn(new Error("unsupported_event"))},L);Lt={messageChannel:ie,onMessage(sc){const Su=sc;if(Su.data.eventId===Vn)switch(Su.data.status){case"ack":clearTimeout(ys),We=setTimeout(()=>{rn(new Error("timeout"))},3e3);break;case"done":clearTimeout(We),Ti(Su.data.response);break;default:clearTimeout(ys),clearTimeout(We),rn(new Error("invalid_response"))}}},G.handlers.add(Lt),ie.port1.addEventListener("message",Lt.onMessage),G.target.postMessage({eventType:x,eventId:Vn,data:I},[ie.port2])}).finally(()=>{Lt&&G.removeMessageHandler(Lt)})})()}}function Yo(){return window}function Oh(){return typeof Yo().WorkerGlobalScope<"u"&&"function"==typeof Yo().importScripts}function Xd(){return(Xd=(0,v.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Tg="firebaseLocalStorageDb",Ig="firebaseLocalStorage",Dv="fbase_key";class pf{constructor(x){this.request=x}toPromise(){return new Promise((x,I)=>{this.request.addEventListener("success",()=>{x(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function Iv(_,x){return _.transaction([Ig],x?"readwrite":"readonly").objectStore(Ig)}function MS(){const _=indexedDB.open(Tg,1);return new Promise((x,I)=>{_.addEventListener("error",()=>{I(_.error)}),_.addEventListener("upgradeneeded",()=>{const L=_.result;try{L.createObjectStore(Ig,{keyPath:Dv})}catch(G){I(G)}}),_.addEventListener("success",(0,v.Z)(function*(){const L=_.result;L.objectStoreNames.contains(Ig)?x(L):(L.close(),yield function _S(){const _=indexedDB.deleteDatabase(Tg);return new pf(_).toPromise()}(),x(yield MS()))}))})}function Ag(_,x,I){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,v.Z)(function*(_,x,I){const L=Iv(_,!0).put({[Dv]:x,value:I});return new pf(L).toPromise()})).apply(this,arguments)}function Av(){return(Av=(0,v.Z)(function*(_,x){const I=Iv(_,!1).get(x),L=yield new pf(I).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function OS(_,x){const I=Iv(_,!0).delete(x);return new pf(I).toPromise()}const kv=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,v.Z)(function*(){return I.db||(I.db=yield MS()),I.db})()}_withRetries(I){var L=this;return(0,v.Z)(function*(){let G=0;for(;;)try{const ie=yield L._openDb();return yield I(ie)}catch(ie){if(G++>3)throw ie;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,v.Z)(function*(){return Oh()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,v.Z)(function*(){I.receiver=xv._getInstance(function Tv(){return Oh()?self:null}()),I.receiver._subscribe("keyChanged",function(){var L=(0,v.Z)(function*(G,ie){return{keyProcessed:(yield I._poll()).includes(ie.key)}});return function(G,ie){return L.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var L=(0,v.Z)(function*(G,ie){return["keyChanged"]});return function(G,ie){return L.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,v.Z)(function*(){var L,G;if(I.activeServiceWorker=yield function tI(){return Xd.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new eI(I.activeServiceWorker);const ie=yield I.sender._send("ping",{},800);!ie||(null===(L=ie[0])||void 0===L?void 0:L.fulfilled)&&(null===(G=ie[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var L=this;return(0,v.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function gC(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:I},L.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const I=yield MS();return yield Ag(I,tc,"1"),yield OS(I,tc),!0}catch{}return!1})()}_withPendingWrite(I){var L=this;return(0,v.Z)(function*(){L.pendingWrites++;try{yield I()}finally{L.pendingWrites--}})()}_set(I,L){var G=this;return(0,v.Z)(function*(){return G._withPendingWrite((0,v.Z)(function*(){return yield G._withRetries(ie=>Ag(ie,I,L)),G.localCache[I]=L,G.notifyServiceWorker(I)}))})()}_get(I){var L=this;return(0,v.Z)(function*(){const G=yield L._withRetries(ie=>function iI(_,x){return Av.apply(this,arguments)}(ie,I));return L.localCache[I]=G,G})()}_remove(I){var L=this;return(0,v.Z)(function*(){return L._withPendingWrite((0,v.Z)(function*(){return yield L._withRetries(G=>OS(G,I)),delete L.localCache[I],L.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,v.Z)(function*(){const L=yield I._withRetries(We=>{const Lt=Iv(We,!1).getAll();return new pf(Lt).toPromise()});if(!L)return[];if(0!==I.pendingWrites)return[];const G=[],ie=new Set;for(const{fbase_key:We,value:Lt}of L)ie.add(We),JSON.stringify(I.localCache[We])!==JSON.stringify(Lt)&&(I.notifyListeners(We,Lt),G.push(We));for(const We of Object.keys(I.localCache))I.localCache[We]&&!ie.has(We)&&(I.notifyListeners(We,null),G.push(We));return G})()}notifyListeners(I,L){this.localCache[I]=L;const G=this.listeners[I];if(G)for(const ie of Array.from(G))ie(L)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function nI(_,x){return Yi(_,"POST","/v2/accounts/mfaSignIn:start",En(_,x))}function Jd(){return(Jd=(0,v.Z)(function*(_){return(yield Yi(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ff(_){return new Promise((x,I)=>{const L=document.createElement("script");L.setAttribute("src",_),L.onload=x,L.onerror=G=>{const ie=Ft("internal-error");ie.customData=G,I(ie)},L.type="text/javascript",L.charset="UTF-8",function Rg(){var _,x;return null!==(x=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==x?x:document}().appendChild(L)})}function mC(_){return`__${_}${Math.floor(1e6*Math.random())}`}const FS=1e12;class H1{constructor(x){this.auth=x,this.counter=FS,this._widgets=new Map}render(x,I){const L=this.counter;return this._widgets.set(L,new vs(x,this.auth.name,I||{})),this.counter++,L}reset(x){var I;const L=x||FS;null===(I=this._widgets.get(L))||void 0===I||I.delete(),this._widgets.delete(L)}getResponse(x){var I;return(null===(I=this._widgets.get(x||FS))||void 0===I?void 0:I.getResponse())||""}execute(x){var I=this;return(0,v.Z)(function*(){var L;return null===(L=I._widgets.get(x||FS))||void 0===L||L.execute(),""})()}}class vs{constructor(x,I,L){this.params=L,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof x?document.getElementById(x):x;ze(G,"argument-error",{appName:I}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function z1(_){const x=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<_;L++)x.push(I.charAt(Math.floor(Math.random()*I.length)));return x.join("")}(50);const{callback:x,"expired-callback":I}=this.params;if(x)try{x(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const rI=mC("rcb"),ZH=new Xt(3e4,6e4);class XH{constructor(){var x;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(x=Yo().grecaptcha)||void 0===x||!x.render)}load(x,I=""){return ze(function JH(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(I),x,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(Yo().grecaptcha):new Promise((L,G)=>{const ie=Yo().setTimeout(()=>{G(Ft(x,"network-request-failed"))},ZH.get());Yo()[rI]=()=>{Yo().clearTimeout(ie),delete Yo()[rI];const Lt=Yo().grecaptcha;if(!Lt)return void G(Ft(x,"internal-error"));const Ti=Lt.render;Lt.render=(rn,Vn)=>{const ys=Ti(rn,Vn);return this.counter++,ys},this.hostLanguage=I,L(Lt)},ff(`https://www.google.com/recaptcha/api.js??${(0,ue.xO)({onload:rI,render:"explicit",hl:I})}`).catch(()=>{clearTimeout(ie),G(Ft(x,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(x){var I;return!(null===(I=Yo().grecaptcha)||void 0===I||!I.render)&&(x===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ez{load(x){return(0,v.Z)(function*(){return new H1(x)})()}clearedOneInstance(){}}const Mg="recaptcha",tz={theme:"light",type:"image"};class j1{constructor(x,I=Object.assign({},tz),L){this.parameters=I,this.type=Mg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zi(L),this.isInvisible="invisible"===this.parameters.size,ze(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof x?document.getElementById(x):x;ze(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ez:new XH,this.validateStartingState()}verify(){var x=this;return(0,v.Z)(function*(){x.assertNotDestroyed();const I=yield x.render(),L=x.getAssertedRecaptcha();return L.getResponse(I)||new Promise(ie=>{const We=Lt=>{!Lt||(x.tokenChangeListeners.delete(We),ie(Lt))};x.tokenChangeListeners.add(We),x.isInvisible&&L.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(x){return Promise.reject(x)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(x=>{throw this.renderPromise=null,x})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(x=>{this.container.removeChild(x)})}validateStartingState(){ze(!this.parameters.sitekey,this.auth,"argument-error"),ze(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ze(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(x){return I=>{if(this.tokenChangeListeners.forEach(L=>L(I)),"function"==typeof x)x(I);else if("string"==typeof x){const L=Yo()[x];"function"==typeof L&&L(I)}}}assertNotDestroyed(){ze(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var x=this;return(0,v.Z)(function*(){if(yield x.init(),!x.widgetId){let I=x.container;if(!x.isInvisible){const L=document.createElement("div");I.appendChild(L),I=L}x.widgetId=x.getAssertedRecaptcha().render(I,x.parameters)}return x.widgetId})()}init(){var x=this;return(0,v.Z)(function*(){ze(jt()&&!Oh(),x.auth,"internal-error"),yield function ma(){let _=null;return new Promise(x=>{"complete"!==document.readyState?(_=()=>x(),window.addEventListener("load",_)):x()}).catch(x=>{throw _&&window.removeEventListener("load",_),x})}(),x.recaptcha=yield x._recaptchaLoader.load(x.auth,x.auth.languageCode||void 0);const I=yield function _v(_){return Jd.apply(this,arguments)}(x.auth);ze(I,x.auth,"internal-error"),x.parameters.sitekey=I})()}getAssertedRecaptcha(){return ze(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Tr{constructor(x,I){this.verificationId=x,this.onConfirmation=I}confirm(x){const I=Gd._fromVerification(this.verificationId,x);return this.onConfirmation(I)}}function Wa(_,x,I){return NS.apply(this,arguments)}function NS(){return(NS=(0,v.Z)(function*(_,x,I){const L=zi(_),G=yield ep(L,x,(0,ue.m9)(I));return new Tr(G,ie=>$d(L,ie))})).apply(this,arguments)}function sI(_,x,I){return ll.apply(this,arguments)}function ll(){return(ll=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_);yield yu(!1,L,"phone");const G=yield ep(L.auth,x,(0,ue.m9)(I));return new Tr(G,ie=>Q(L,ie))})).apply(this,arguments)}function ic(_,x,I){return Og.apply(this,arguments)}function Og(){return(Og=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_),G=yield ep(L.auth,x,(0,ue.m9)(I));return new Tr(G,ie=>Re(L,ie))})).apply(this,arguments)}function ep(_,x,I){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,v.Z)(function*(_,x,I){var L;const G=yield I.verify();try{let ie;if(ze("string"==typeof G,_,"argument-error"),ze(I.type===Mg,_,"argument-error"),ie="string"==typeof x?{phoneNumber:x}:x,"session"in ie){const We=ie.session;if("phoneNumber"in ie)return ze("enroll"===We.type,_,"internal-error"),(yield Eg(_,{idToken:We.credential,phoneEnrollmentInfo:{phoneNumber:ie.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{ze("signin"===We.type,_,"internal-error");const Lt=(null===(L=ie.multiFactorHint)||void 0===L?void 0:L.uid)||ie.multiFactorUid;return ze(Lt,_,"missing-multi-factor-info"),(yield nI(_,{mfaPendingCredential:We.credential,mfaEnrollmentId:Lt,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:We}=yield Qb(_,{phoneNumber:ie.phoneNumber,recaptchaToken:G});return We}}finally{I._reset()}})).apply(this,arguments)}function ed(_,x){return so.apply(this,arguments)}function so(){return(so=(0,v.Z)(function*(_,x){yield mv((0,ue.m9)(_),x)})).apply(this,arguments)}let $i=(()=>{class _{constructor(I){this.providerId=_.PROVIDER_ID,this.auth=zi(I)}verifyPhoneNumber(I,L){return ep(this.auth,I,(0,ue.m9)(L))}static credential(I,L){return Gd._fromVerification(I,L)}static credentialFromResult(I){return _.credentialFromTaggedObject(I)}static credentialFromError(I){return _.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:L,temporaryProof:G}=I;return L&&G?Gd._fromTokenResponse(L,G):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function gf(_,x){return x?Be(x):(ze(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class BS extends is{constructor(x){super("custom","custom"),this.params=x}_getIdTokenResponse(x){return mu(x,this._buildIdpRequest())}_linkToIdToken(x,I){return mu(x,this._buildIdpRequest(I))}_getReauthenticationResolver(x){return mu(x,this._buildIdpRequest())}_buildIdpRequest(x){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return x&&(I.idToken=x),I}}function vC(_){return vv(_.auth,new BS(_),_.bypassAuthState)}function Dl(_){const{auth:x,user:I}=_;return ze(I,x,"internal-error"),eC(I,new BS(_),_.bypassAuthState)}function yC(_){return nc.apply(this,arguments)}function nc(){return(nc=(0,v.Z)(function*(_){const{auth:x,user:I}=_;return ze(I,x,"internal-error"),mv(I,new BS(_),_.bypassAuthState)})).apply(this,arguments)}class tp{constructor(x,I,L,G,ie=!1){this.auth=x,this.resolver=L,this.user=G,this.bypassAuthState=ie,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var x=this;return new Promise(function(){var I=(0,v.Z)(function*(L,G){x.pendingPromise={resolve:L,reject:G};try{x.eventManager=yield x.resolver._initialize(x.auth),yield x.onExecution(),x.eventManager.registerConsumer(x)}catch(ie){x.reject(ie)}});return function(L,G){return I.apply(this,arguments)}}())}onAuthEvent(x){var I=this;return(0,v.Z)(function*(){const{urlResponse:L,sessionId:G,postBody:ie,tenantId:We,error:Lt,type:Ti}=x;if(Lt)return void I.reject(Lt);const rn={auth:I.auth,requestUri:L,sessionId:G,tenantId:We||void 0,postBody:ie||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(Ti)(rn))}catch(Vn){I.reject(Vn)}})()}onError(x){this.reject(x)}getIdpTask(x){switch(x){case"signInViaPopup":case"signInViaRedirect":return vC;case"linkViaPopup":case"linkViaRedirect":return yC;case"reauthViaPopup":case"reauthViaRedirect":return Dl;default:oi(this.auth,"internal-error")}}resolve(x){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(x),this.unregisterAndCleanUp()}reject(x){gt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(x),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ro=new Xt(2e3,1e4);function oI(_,x,I){return Mv.apply(this,arguments)}function Mv(){return(Mv=(0,v.Z)(function*(_,x,I){const L=zi(_);yt(_,x,fa);const G=gf(L,I);return new Pg(L,"signInViaPopup",x,G).executeNotNull()})).apply(this,arguments)}function aI(_,x,I){return bC.apply(this,arguments)}function bC(){return(bC=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_);yt(L.auth,x,fa);const G=gf(L.auth,I);return new Pg(L.auth,"reauthViaPopup",x,G,L).executeNotNull()})).apply(this,arguments)}function lI(_,x,I){return mf.apply(this,arguments)}function mf(){return(mf=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_);yt(L.auth,x,fa);const G=gf(L.auth,I);return new Pg(L.auth,"linkViaPopup",x,G,L).executeNotNull()})).apply(this,arguments)}let Pg=(()=>{class _ extends tp{constructor(I,L,G,ie,We){super(I,L,ie,We),this.provider=G,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var I=this;return(0,v.Z)(function*(){const L=yield I.execute();return ze(L,I.auth,"internal-error"),L})()}onExecution(){var I=this;return(0,v.Z)(function*(){gt(1===I.filter.length,"Popup operations only handle one event");const L=df();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],L),I.authWindow.associatedEvent=L,I.resolver._originValidation(I.auth).catch(G=>{I.reject(G)}),I.resolver._isIframeWebStorageSupported(I.auth,G=>{G||I.reject(Ft(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const I=()=>{var L,G;this.pollId=null!==(G=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==G&&G.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,Ro.get())};I()}}return _.currentPopupAction=null,_})();const Lg=new Map;class _o extends tp{constructor(x,I,L=!1){super(x,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,L),this.eventId=null}execute(){var x=()=>super.execute,I=this;return(0,v.Z)(function*(){let L=Lg.get(I.auth._key());if(!L){try{const ie=(yield function Cu(_,x){return vf.apply(this,arguments)}(I.resolver,I.auth))?yield x().call(I):null;L=()=>Promise.resolve(ie)}catch(G){L=()=>Promise.reject(G)}Lg.set(I.auth._key(),L)}return I.bypassAuthState||Lg.set(I.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(x){var I=()=>super.onAuthEvent,L=this;return(0,v.Z)(function*(){if("signInViaRedirect"===x.type)return I().call(L,x);if("unknown"!==x.type){if(x.eventId){const G=yield L.auth._redirectUserForId(x.eventId);if(G)return L.user=G,I().call(L,x);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function vf(){return(vf=(0,v.Z)(function*(_,x){const I=td(x),L=ip(_);if(!(yield L._isAvailable()))return!1;const G="true"===(yield L._get(I));return yield L._remove(I),G})).apply(this,arguments)}function Ov(_,x){return Pv.apply(this,arguments)}function Pv(){return(Pv=(0,v.Z)(function*(_,x){return ip(_)._set(td(x),"true")})).apply(this,arguments)}function VS(){Lg.clear()}function Lv(_,x){Lg.set(_._key(),x)}function ip(_){return Be(_._redirectPersistence)}function td(_){return pe("pendingRedirect",_.config.apiKey,_.name)}function HS(_,x,I){return function Co(_,x,I){return Fg.apply(this,arguments)}(_,x,I)}function Fg(){return(Fg=(0,v.Z)(function*(_,x,I){const L=zi(_);yt(_,x,fa);const G=gf(L,I);return yield Ov(G,L),G._openRedirect(L,x,"signInViaRedirect")})).apply(this,arguments)}function Ng(_,x,I){return function Fv(_,x,I){return id.apply(this,arguments)}(_,x,I)}function id(){return(id=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_);yt(L.auth,x,fa);const G=gf(L.auth,I);yield Ov(G,L.auth);const ie=yield Bv(L);return G._openRedirect(L.auth,x,"reauthViaRedirect",ie)})).apply(this,arguments)}function zS(_,x,I){return function jS(_,x,I){return CC.apply(this,arguments)}(_,x,I)}function CC(){return(CC=(0,v.Z)(function*(_,x,I){const L=(0,ue.m9)(_);yt(L.auth,x,fa);const G=gf(L.auth,I);yield yu(!1,L,x.providerId),yield Ov(G,L.auth);const ie=yield Bv(L);return G._openRedirect(L.auth,x,"linkViaRedirect",ie)})).apply(this,arguments)}function Nv(_,x){return nd.apply(this,arguments)}function nd(){return(nd=(0,v.Z)(function*(_,x){return yield zi(_)._initializationPromise,yf(_,x,!1)})).apply(this,arguments)}function yf(_,x){return rd.apply(this,arguments)}function rd(){return(rd=(0,v.Z)(function*(_,x,I=!1){const L=zi(_),G=gf(L,x),We=yield new _o(L,G,I).execute();return We&&!I&&(delete We.user._redirectEventId,yield L._persistUserIfCurrent(We.user),yield L._setRedirectUser(null,x)),We})).apply(this,arguments)}function Bv(_){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,v.Z)(function*(_){const x=df(`${_.uid}:::`);return _._redirectEventId=x,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),x})).apply(this,arguments)}class Cf{constructor(x){this.auth=x,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(x){this.consumers.add(x),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,x)&&(this.sendToConsumer(this.queuedRedirectEvent,x),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(x){this.consumers.delete(x)}onEvent(x){if(this.hasEventBeenHandled(x))return!1;let I=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(x,L)&&(I=!0,this.sendToConsumer(x,L),this.saveEventToCache(x))}),this.hasHandledPotentialRedirect||!function qS(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hg(_);default:return!1}}(x)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=x,I=!0)),I}sendToConsumer(x,I){var L;if(x.error&&!Hg(x)){const G=(null===(L=x.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";I.onError(Ft(this.auth,G))}else I.onAuthEvent(x)}isEventForConsumer(x,I){const L=null===I.eventId||!!x.eventId&&x.eventId===I.eventId;return I.filter.includes(x.type)&&L}hasEventBeenHandled(x){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vg(x))}saveEventToCache(x){this.cachedEventUids.add(Vg(x)),this.lastProcessedEventTime=Date.now()}}function Vg(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(x=>x).join("-")}function Hg({type:_,error:x}){return"unknown"===_&&"auth/no-auth-event"===x?.code}function sd(_){return od.apply(this,arguments)}function od(){return(od=(0,v.Z)(function*(_,x={}){return Yi(_,"GET","/v1/projects",x)})).apply(this,arguments)}const hl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,np=/^https?/;function US(){return(US=(0,v.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:x}=yield sd(_);for(const I of x)try{if(iz(I))return}catch{}oi(_,"unauthorized-domain")})).apply(this,arguments)}function iz(_){const x=qt(),{protocol:I,hostname:L}=new URL(x);if(_.startsWith("chrome-extension://")){const We=new URL(_);return""===We.hostname&&""===L?"chrome-extension:"===I&&_.replace("chrome-extension://","")===x.replace("chrome-extension://",""):"chrome-extension:"===I&&We.hostname===L}if(!np.test(I))return!1;if(hl.test(_))return L===_;const G=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(L)}const WS=new Xt(3e4,6e4);function wf(){const _=Yo().___jsl;if(_?.H)for(const x of Object.keys(_.H))if(_.H[x].r=_.H[x].r||[],_.H[x].L=_.H[x].L||[],_.H[x].r=[..._.H[x].L],_.CP)for(let I=0;I<_.CP.length;I++)_.CP[I]=null}let wu=null;function GS(_){return wu=wu||function SC(_){return new Promise((x,I)=>{var L,G,ie;function We(){wf(),gapi.load("gapi.iframes",{callback:()=>{x(gapi.iframes.getContext())},ontimeout:()=>{wf(),I(Ft(_,"network-request-failed"))},timeout:WS.get()})}if(null!==(G=null===(L=Yo().gapi)||void 0===L?void 0:L.iframes)&&void 0!==G&&G.Iframe)x(gapi.iframes.getContext());else{if(null===(ie=Yo().gapi)||void 0===ie||!ie.load){const Lt=mC("iframefcb");return Yo()[Lt]=()=>{gapi.load?We():I(Ft(_,"network-request-failed"))},ff(`https://apis.google.com/js/api.js?onload=${Lt}`).catch(Ti=>I(Ti))}We()}}).catch(x=>{throw wu=null,x})}(_),wu}const EC=new Xt(5e3,15e3),hI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function q1(_){const x=_.config;ze(x.authDomain,_,"auth-domain-config-required");const I=x.emulator?pr(x,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,L={apiKey:x.apiKey,appName:_.name,v:ee.SDK_VERSION},G=rz.get(_.config.apiHost);G&&(L.eid=G);const ie=_._getFrameworks();return ie.length&&(L.fw=ie.join(",")),`${I}?${(0,ue.xO)(L).slice(1)}`}function Vv(){return Vv=(0,v.Z)(function*(_){const x=yield GS(_),I=Yo().gapi;return ze(I,_,"internal-error"),x.open({where:document.body,url:q1(_),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hI,dontclear:!0},L=>new Promise(function(){var G=(0,v.Z)(function*(ie,We){yield L.restyle({setHideOnLeave:!1});const Lt=Ft(_,"network-request-failed"),Ti=Yo().setTimeout(()=>{We(Lt)},EC.get());function rn(){Yo().clearTimeout(Ti),ie(L)}L.ping(rn).then(rn,()=>{We(Lt)})});return function(ie,We){return G.apply(this,arguments)}}()))}),Vv.apply(this,arguments)}const sz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class uI{constructor(x){this.window=x,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rc(_,x,I,L,G,ie){ze(_.config.authDomain,_,"auth-domain-config-required"),ze(_.config.apiKey,_,"invalid-api-key");const We={apiKey:_.config.apiKey,appName:_.name,authType:I,redirectUrl:L,v:ee.SDK_VERSION,eventId:G};if(x instanceof fa){x.setDefaultLanguage(_.languageCode),We.providerId=x.providerId||"",(0,ue.xb)(x.getCustomParameters())||(We.customParameters=JSON.stringify(x.getCustomParameters()));for(const[Ti,rn]of Object.entries(ie||{}))We[Ti]=rn}if(x instanceof Kd){const Ti=x.getScopes().filter(rn=>""!==rn);Ti.length>0&&(We.scopes=Ti.join(","))}_.tenantId&&(We.tid=_.tenantId);const Lt=We;for(const Ti of Object.keys(Lt))void 0===Lt[Ti]&&delete Lt[Ti];return`${function qv({config:_}){return _.emulator?pr(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,ue.xO)(Lt).slice(1)}`}const zg="webStorageSupport",ch=class Uv{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qc,this._completeRedirectFn=yf,this._overrideRedirectResult=Lv}_openPopup(x,I,L,G){var ie=this;return(0,v.Z)(function*(){var We;gt(null===(We=ie.eventManagers[x._key()])||void 0===We?void 0:We.manager,"_initialize() not called before _openPopup()");const Lt=rc(x,I,L,qt(),G);return function $S(_,x,I,L=500,G=600){const ie=Math.max((window.screen.availHeight-G)/2,0).toString(),We=Math.max((window.screen.availWidth-L)/2,0).toString();let Lt="";const Ti=Object.assign(Object.assign({},sz),{width:L.toString(),height:G.toString(),top:ie,left:We}),rn=(0,ue.z$)().toLowerCase();I&&(Lt=ve(rn)?"_blank":I),q(rn)&&(x=x||"http://localhost",Ti.scrollbars="yes");const Vn=Object.entries(Ti).reduce((sc,[Su,xf])=>`${sc}${Su}=${xf},`,"");if(function _n(_=(0,ue.z$)()){var x;return At(_)&&!(null===(x=window.navigator)||void 0===x||!x.standalone)}(rn)&&"_self"!==Lt)return function zv(_,x){const I=document.createElement("a");I.href=_,I.target=x;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(L)}(x||"",Lt),new uI(null);const ys=window.open(x||"",Lt,Vn);ze(ys,_,"popup-blocked");try{ys.focus()}catch{}return new uI(ys)}(x,Lt,df())})()}_openRedirect(x,I,L,G){var ie=this;return(0,v.Z)(function*(){return yield ie._originValidation(x),function RS(_){Yo().location.href=_}(rc(x,I,L,qt(),G)),new Promise(()=>{})})()}_initialize(x){const I=x._key();if(this.eventManagers[I]){const{manager:G,promise:ie}=this.eventManagers[I];return G?Promise.resolve(G):(gt(ie,"If manager is not set, promise should be"),ie)}const L=this.initAndGetManager(x);return this.eventManagers[I]={promise:L},L.catch(()=>{delete this.eventManagers[I]}),L}initAndGetManager(x){var I=this;return(0,v.Z)(function*(){const L=yield function U1(_){return Vv.apply(this,arguments)}(x),G=new Cf(x);return L.register("authEvent",ie=>(ze(ie?.authEvent,x,"invalid-auth-event"),{status:G.onEvent(ie.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[x._key()]={manager:G},I.iframes[x._key()]=L,G})()}_isIframeWebStorageSupported(x,I){this.iframes[x._key()].send(zg,{type:zg},G=>{var ie;const We=null===(ie=G?.[0])||void 0===ie?void 0:ie[zg];void 0!==We&&I(!!We),oi(x,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(x){const I=x._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function wC(_){return US.apply(this,arguments)}(x)),this.originValidationPromises[I]}get _shouldInitProactively(){return xn()||Z()||At()}};class Gv extends class Wv{constructor(x){this.factorId=x}_process(x,I,L){switch(I.type){case"enroll":return this._finalizeEnroll(x,I.credential,L);case"signin":return this._finalizeSignIn(x,I.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(x){super("phone"),this.credential=x}static _fromCredential(x){return new Gv(x)}_finalizeEnroll(x,I,L){return function cC(_,x){return Yi(_,"POST","/v2/accounts/mfaEnrollment:finalize",En(_,x))}(x,{idToken:I,displayName:L,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(x,I){return function Rv(_,x){return Yi(_,"POST","/v2/accounts/mfaSignIn:finalize",En(_,x))}(x,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let YS=(()=>{class _{constructor(){}static assertion(I){return Gv._fromCredential(I)}}return _.FACTOR_ID="phone",_})();var Kv="@firebase/auth";class $1{constructor(x){this.auth=x,this.internalListeners=new Map}getUid(){var x;return this.assertAuthConfigured(),(null===(x=this.auth.currentUser)||void 0===x?void 0:x.uid)||null}getToken(x){var I=this;return(0,v.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(x)}:null})()}addAuthTokenListener(x){if(this.assertAuthConfigured(),this.internalListeners.has(x))return;const I=this.auth.onIdTokenChanged(L=>{x(L?.stsTokenManager.accessToken||null)});this.internalListeners.set(x,I),this.updateProactiveRefresh()}removeAuthTokenListener(x){this.assertAuthConfigured();const I=this.internalListeners.get(x);!I||(this.internalListeners.delete(x),I(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const $v=(0,ue.Pz)("authIdTokenMaxAge")||300;let Sf=null;const va=_=>function(){var x=(0,v.Z)(function*(I){const L=I&&(yield I.getIdTokenResult()),G=L&&((new Date).getTime()-Date.parse(L.issuedAtTime))/1e3;if(G&&G>$v)return;const ie=L?.token;Sf!==ie&&(Sf=ie,yield fetch(_,{method:ie?"POST":"DELETE",headers:ie?{Authorization:`Bearer ${ie}`}:{}}))});return function(I){return x.apply(this,arguments)}}();function Ef(_=(0,ee.getApp)()){const x=(0,ee._getProvider)(_,"auth");if(x.isInitialized())return x.getImmediate();const I=function nt(_,x){const I=(0,ee._getProvider)(_,"auth");if(I.isInitialized()){const G=I.getImmediate(),ie=I.getOptions();if((0,ue.vZ)(ie,x??{}))return G;oi(G,"already-initialized")}return I.initialize({options:x})}(_,{popupRedirectResolver:ch,persistence:[kv,Qd,Qc]}),L=(0,ue.Pz)("authTokenSyncURL");if(L){const ie=va(L);(function wg(_,x,I){(0,ue.m9)(_).beforeAuthStateChanged(x,I)})(I,ie,()=>ie(I.currentUser)),function wv(_,x,I,L){(0,ue.m9)(_).onIdTokenChanged(x,I,L)}(I,We=>ie(We))}const G=(0,ue.q4)("auth");return G&&mt(I,`http://${G}`),I}!function cI(_){(0,ee._registerComponent)(new pt.wA("auth",(x,{options:I})=>{const L=x.getProvider("app").getImmediate(),G=x.getProvider("heartbeat"),{apiKey:ie,authDomain:We}=L.options;return((Lt,Ti)=>{ze(ie&&!ie.includes(":"),"invalid-api-key",{appName:Lt.name}),ze(!We?.includes(":"),"argument-error",{appName:Lt.name});const rn={apiKey:ie,authDomain:We,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gr(_)},Vn=new du(Lt,Ti,rn);return function Ke(_,x){const I=x?.persistence||[],L=(Array.isArray(I)?I:[I]).map(Be);x?.errorMap&&_._updateErrorMap(x.errorMap),_._initializeWithPersistence(L,x?.popupRedirectResolver)}(Vn,I),Vn})(L,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((x,I,L)=>{x.getProvider("auth-internal").initialize()})),(0,ee._registerComponent)(new pt.wA("auth-internal",x=>{const I=zi(x.getProvider("auth").getImmediate());return new $1(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ee.registerVersion)(Kv,"0.21.0",function Y1(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,ee.registerVersion)(Kv,"0.21.0","esm2017")}("Browser")},2090:(Hi,_t,te)=>{te.d(_t,{$s:()=>mi,BH:()=>vn,DV:()=>Es,Dv:()=>Pr,G6:()=>yt,GJ:()=>da,L:()=>ot,LL:()=>ar,P0:()=>jt,Pz:()=>Un,Sg:()=>Xt,UG:()=>Ct,UI:()=>ka,US:()=>pt,Wj:()=>nn,Wl:()=>Vr,Yr:()=>Mt,ZB:()=>be,ZR:()=>gs,aH:()=>ki,b$:()=>it,cI:()=>Yi,dS:()=>mn,eu:()=>ze,g5:()=>ee,gK:()=>Ks,gQ:()=>kr,h$:()=>tt,hl:()=>ti,hu:()=>ue,jU:()=>li,lb:()=>ro,m9:()=>Rn,ne:()=>Hr,p$:()=>Ce,pd:()=>Go,q4:()=>qt,r3:()=>Ns,ru:()=>ft,tV:()=>ct,uI:()=>St,ug:()=>bo,vZ:()=>fi,w1:()=>oi,w9:()=>Gs,xO:()=>br,xb:()=>Ao,z$:()=>Ot,zI:()=>Qe,zd:()=>io});const ue=function(ye,pe){if(!ye)throw ee(pe)},ee=function(ye){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+ye)},Ue=function(ye){const pe=[];let J=0;for(let Y=0;Y<ye.length;Y++){let q=ye.charCodeAt(Y);q<128?pe[J++]=q:q<2048?(pe[J++]=q>>6|192,pe[J++]=63&q|128):55296==(64512&q)&&Y+1<ye.length&&56320==(64512&ye.charCodeAt(Y+1))?(q=65536+((1023&q)<<10)+(1023&ye.charCodeAt(++Y)),pe[J++]=q>>18|240,pe[J++]=q>>12&63|128,pe[J++]=q>>6&63|128,pe[J++]=63&q|128):(pe[J++]=q>>12|224,pe[J++]=q>>6&63|128,pe[J++]=63&q|128)}return pe},pt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ye,pe){if(!Array.isArray(ye))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let q=0;q<ye.length;q+=3){const Z=ye[q],ve=q+1<ye.length,Je=ve?ye[q+1]:0,Pt=q+2<ye.length,Yt=Pt?ye[q+2]:0;let Ui=(15&Je)<<2|Yt>>6,_n=63&Yt;Pt||(_n=64,ve||(Ui=64)),Y.push(J[Z>>2],J[(3&Z)<<4|Je>>4],J[Ui],J[_n])}return Y.join("")},encodeString(ye,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(ye):this.encodeByteArray(Ue(ye),pe)},decodeString(ye,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(ye):function(ye){const pe=[];let J=0,Y=0;for(;J<ye.length;){const q=ye[J++];if(q<128)pe[Y++]=String.fromCharCode(q);else if(q>191&&q<224){const Z=ye[J++];pe[Y++]=String.fromCharCode((31&q)<<6|63&Z)}else if(q>239&&q<365){const Pt=((7&q)<<18|(63&ye[J++])<<12|(63&ye[J++])<<6|63&ye[J++])-65536;pe[Y++]=String.fromCharCode(55296+(Pt>>10)),pe[Y++]=String.fromCharCode(56320+(1023&Pt))}else{const Z=ye[J++],ve=ye[J++];pe[Y++]=String.fromCharCode((15&q)<<12|(63&Z)<<6|63&ve)}}return pe.join("")}(this.decodeStringToByteArray(ye,pe))},decodeStringToByteArray(ye,pe){this.init_();const J=pe?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let q=0;q<ye.length;){const Z=J[ye.charAt(q++)],Je=q<ye.length?J[ye.charAt(q)]:0;++q;const Yt=q<ye.length?J[ye.charAt(q)]:64;++q;const At=q<ye.length?J[ye.charAt(q)]:64;if(++q,null==Z||null==Je||null==Yt||null==At)throw Error();Y.push(Z<<2|Je>>4),64!==Yt&&(Y.push(Je<<4&240|Yt>>2),64!==At&&Y.push(Yt<<6&192|At))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ye=0;ye<this.ENCODED_VALS.length;ye++)this.byteToCharMap_[ye]=this.ENCODED_VALS.charAt(ye),this.charToByteMap_[this.byteToCharMap_[ye]]=ye,this.byteToCharMapWebSafe_[ye]=this.ENCODED_VALS_WEBSAFE.charAt(ye),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ye]]=ye,ye>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ye)]=ye,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ye)]=ye)}}},tt=function(ye){const pe=Ue(ye);return pt.encodeByteArray(pe,!0)},ot=function(ye){return tt(ye).replace(/\./g,"")},ct=function(ye){try{return pt.decodeString(ye,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function Ce(ye){return be(void 0,ye)}function be(ye,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===ye&&(ye={});break;case Array:ye=[];break;default:return pe}for(const J in pe)!pe.hasOwnProperty(J)||!Le(J)||(ye[J]=be(ye[J],pe[J]));return ye}function Le(ye){return"__proto__"!==ye}function Ot(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function St(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ot())}function Ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function li(){return"object"==typeof self&&self.self===self}function ft(){const ye="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ye&&void 0!==ye.id}function it(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function oi(){const ye=Ot();return ye.indexOf("MSIE ")>=0||ye.indexOf("Trident/")>=0}function Mt(){return!1}function yt(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ti(){try{return"object"==typeof indexedDB}catch{return!1}}function ze(){return new Promise((ye,pe)=>{try{let J=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(Y);q.onsuccess=()=>{q.result.close(),J||self.indexedDB.deleteDatabase(Y),ye(!0)},q.onupgradeneeded=()=>{J=!1},q.onerror=()=>{var Z;pe((null===(Z=q.error)||void 0===Z?void 0:Z.message)||"")}}catch(J){pe(J)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ke=()=>{try{return function gt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ye=process.env.__FIREBASE_DEFAULTS__;return ye?JSON.parse(ye):void 0})()||(()=>{if(typeof document>"u")return;let ye;try{ye=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const pe=ye&&ct(ye[1]);return pe&&JSON.parse(pe)})()}catch(ye){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ye}`)}},qt=ye=>{var pe,J;return null===(J=null===(pe=Ke())||void 0===pe?void 0:pe.emulatorHosts)||void 0===J?void 0:J[ye]},jt=ye=>{const pe=qt(ye);if(!pe)return;const J=pe.lastIndexOf(":");if(J<=0||J+1===pe.length)throw new Error(`Invalid host ${pe} with no separate hostname and port!`);const Y=parseInt(pe.substring(J+1),10);return"["===pe[0]?[pe.substring(1,J-1),Y]:[pe.substring(0,J),Y]},ki=()=>{var ye;return null===(ye=Ke())||void 0===ye?void 0:ye.config},Un=ye=>{var pe;return null===(pe=Ke())||void 0===pe?void 0:pe[`_${ye}`]};class vn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,J)=>{this.resolve=pe,this.reject=J})}wrapCallback(pe){return(J,Y)=>{J?this.reject(J):this.resolve(Y),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(J):pe(J,Y))}}}function Xt(ye,pe){if(ye.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=pe||"demo-project",q=ye.iat||0,Z=ye.sub||ye.user_id;if(!Z)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ve=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:q,exp:q+3600,auth_time:q,sub:Z,user_id:Z,firebase:{sign_in_provider:"custom",identities:{}}},ye);return[ot(JSON.stringify({alg:"none",type:"JWT"})),ot(JSON.stringify(ve)),""].join(".")}class gs extends Error{constructor(pe,J,Y){super(J),this.code=pe,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,gs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ar.prototype.create)}}class ar{constructor(pe,J,Y){this.service=pe,this.serviceName=J,this.errors=Y}create(pe,...J){const Y=J[0]||{},q=`${this.service}/${pe}`,Z=this.errors[pe],ve=Z?function Wn(ye,pe){return ye.replace(En,(J,Y)=>{const q=pe[Y];return null!=q?String(q):`<${Y}?>`})}(Z,Y):"Error";return new gs(q,`${this.serviceName}: ${ve} (${q}).`,Y)}}const En=/\{\$([^}]+)}/g;function Yi(ye){return JSON.parse(ye)}function Vr(ye){return JSON.stringify(ye)}const Aa=function(ye){let pe={},J={},Y={},q="";try{const Z=ye.split(".");pe=Yi(ct(Z[0])||""),J=Yi(ct(Z[1])||""),q=Z[2],Y=J.d||{},delete J.d}catch{}return{header:pe,claims:J,data:Y,signature:q}},Gs=function(ye){const J=Aa(ye).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},da=function(ye){const pe=Aa(ye).claims;return"object"==typeof pe&&!0===pe.admin};function Ns(ye,pe){return Object.prototype.hasOwnProperty.call(ye,pe)}function Es(ye,pe){if(Object.prototype.hasOwnProperty.call(ye,pe))return ye[pe]}function Ao(ye){for(const pe in ye)if(Object.prototype.hasOwnProperty.call(ye,pe))return!1;return!0}function ka(ye,pe,J){const Y={};for(const q in ye)Object.prototype.hasOwnProperty.call(ye,q)&&(Y[q]=pe.call(J,ye[q],q,ye));return Y}function fi(ye,pe){if(ye===pe)return!0;const J=Object.keys(ye),Y=Object.keys(pe);for(const q of J){if(!Y.includes(q))return!1;const Z=ye[q],ve=pe[q];if(Er(Z)&&Er(ve)){if(!fi(Z,ve))return!1}else if(Z!==ve)return!1}for(const q of Y)if(!J.includes(q))return!1;return!0}function Er(ye){return null!==ye&&"object"==typeof ye}function br(ye){const pe=[];for(const[J,Y]of Object.entries(ye))Array.isArray(Y)?Y.forEach(q=>{pe.push(encodeURIComponent(J)+"="+encodeURIComponent(q))}):pe.push(encodeURIComponent(J)+"="+encodeURIComponent(Y));return pe.length?"&"+pe.join("&"):""}function io(ye){const pe={};return ye.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[q,Z]=Y.split("=");pe[decodeURIComponent(q)]=decodeURIComponent(Z)}}),pe}function Go(ye){const pe=ye.indexOf("?");if(!pe)return"";const J=ye.indexOf("#",pe);return ye.substring(pe,J>0?J:void 0)}class kr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,J){J||(J=0);const Y=this.W_;if("string"==typeof pe)for(let At=0;At<16;At++)Y[At]=pe.charCodeAt(J)<<24|pe.charCodeAt(J+1)<<16|pe.charCodeAt(J+2)<<8|pe.charCodeAt(J+3),J+=4;else for(let At=0;At<16;At++)Y[At]=pe[J]<<24|pe[J+1]<<16|pe[J+2]<<8|pe[J+3],J+=4;for(let At=16;At<80;At++){const Ui=Y[At-3]^Y[At-8]^Y[At-14]^Y[At-16];Y[At]=4294967295&(Ui<<1|Ui>>>31)}let Yt,at,q=this.chain_[0],Z=this.chain_[1],ve=this.chain_[2],Je=this.chain_[3],Pt=this.chain_[4];for(let At=0;At<80;At++){At<40?At<20?(Yt=Je^Z&(ve^Je),at=1518500249):(Yt=Z^ve^Je,at=1859775393):At<60?(Yt=Z&ve|Je&(Z|ve),at=2400959708):(Yt=Z^ve^Je,at=3395469782);const Ui=(q<<5|q>>>27)+Yt+Pt+at+Y[At]&4294967295;Pt=Je,Je=ve,ve=4294967295&(Z<<30|Z>>>2),Z=q,q=Ui}this.chain_[0]=this.chain_[0]+q&4294967295,this.chain_[1]=this.chain_[1]+Z&4294967295,this.chain_[2]=this.chain_[2]+ve&4294967295,this.chain_[3]=this.chain_[3]+Je&4294967295,this.chain_[4]=this.chain_[4]+Pt&4294967295}update(pe,J){if(null==pe)return;void 0===J&&(J=pe.length);const Y=J-this.blockSize;let q=0;const Z=this.buf_;let ve=this.inbuf_;for(;q<J;){if(0===ve)for(;q<=Y;)this.compress_(pe,q),q+=this.blockSize;if("string"==typeof pe){for(;q<J;)if(Z[ve]=pe.charCodeAt(q),++ve,++q,ve===this.blockSize){this.compress_(Z),ve=0;break}}else for(;q<J;)if(Z[ve]=pe[q],++ve,++q,ve===this.blockSize){this.compress_(Z),ve=0;break}}this.inbuf_=ve,this.total_+=J}digest(){const pe=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let q=this.blockSize-1;q>=56;q--)this.buf_[q]=255&J,J/=256;this.compress_(this.buf_);let Y=0;for(let q=0;q<5;q++)for(let Z=24;Z>=0;Z-=8)pe[Y]=this.chain_[q]>>Z&255,++Y;return pe}}function Hr(ye,pe){const J=new Zn(ye,pe);return J.subscribe.bind(J)}class Zn{constructor(pe,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{pe(this)}).catch(Y=>{this.error(Y)})}next(pe){this.forEachObserver(J=>{J.next(pe)})}error(pe){this.forEachObserver(J=>{J.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,J,Y){let q;if(void 0===pe&&void 0===J&&void 0===Y)throw new Error("Missing Observer.");q=function Ri(ye,pe){if("object"!=typeof ye||null===ye)return!1;for(const J of pe)if(J in ye&&"function"==typeof ye[J])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:J,complete:Y},void 0===q.next&&(q.next=Mi),void 0===q.error&&(q.error=Mi),void 0===q.complete&&(q.complete=Mi);const Z=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Z}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,pe)}sendOne(pe,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{J(this.observers[pe])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mi(){}const Pr=function(ye,pe,J,Y){let q;if(Y<pe?q="at least "+pe:Y>J&&(q=0===J?"none":"no more than "+J),q)throw new Error(ye+" failed: Was called with "+Y+(1===Y?" argument.":" arguments.")+" Expects "+q+".")};function Ks(ye,pe){return`${ye} failed: ${pe} argument `}function nn(ye,pe,J,Y){if((!Y||J)&&"function"!=typeof J)throw new Error(Ks(ye,pe)+"must be a valid function.")}function ro(ye,pe,J,Y){if((!Y||J)&&("object"!=typeof J||null===J))throw new Error(Ks(ye,pe)+"must be a valid context object.")}const mn=function(ye){const pe=[];let J=0;for(let Y=0;Y<ye.length;Y++){let q=ye.charCodeAt(Y);if(q>=55296&&q<=56319){const Z=q-55296;Y++,ue(Y<ye.length,"Surrogate pair missing trail surrogate."),q=65536+(Z<<10)+(ye.charCodeAt(Y)-56320)}q<128?pe[J++]=q:q<2048?(pe[J++]=q>>6|192,pe[J++]=63&q|128):q<65536?(pe[J++]=q>>12|224,pe[J++]=q>>6&63|128,pe[J++]=63&q|128):(pe[J++]=q>>18|240,pe[J++]=q>>12&63|128,pe[J++]=q>>6&63|128,pe[J++]=63&q|128)}return pe},bo=function(ye){let pe=0;for(let J=0;J<ye.length;J++){const Y=ye.charCodeAt(J);Y<128?pe++:Y<2048?pe+=2:Y>=55296&&Y<=56319?(pe+=4,J++):pe+=3}return pe};function mi(ye,pe=1e3,J=2){const Y=pe*Math.pow(J,ye),q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+q)}function Rn(ye){return ye&&ye._delegate?ye._delegate:ye}},6329:(Hi,_t,te)=>{var v=te(4650);let ue=null;function ee(){return ue}const tt=new v.OlP("DocumentToken");let ot=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return function ct(){return(0,v.LFG)(be)}()},providedIn:"platform"}),r})();const Ce=new v.OlP("Location Initialized");let be=(()=>{class r extends ot{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(e){const i=ee().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=ee().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,n){Le()?this._history.pushState(e,i,n):this.location.hash=n}replaceState(e,i,n){Le()?this._history.replaceState(e,i,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt))},r.\u0275prov=v.Yz7({token:r,factory:function(){return function Ot(){return new be((0,v.LFG)(tt))}()},providedIn:"platform"}),r})();function Le(){return!!window.history.pushState}function St(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function Ct(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function li(r){return r&&"?"!==r[0]?"?"+r:r}let ft=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return(0,v.f3M)(Si)},providedIn:"root"}),r})();const it=new v.OlP("appBaseHref");let Si=(()=>{class r extends ft{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,v.f3M)(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return St(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+li(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${i}${n}`:i}pushState(e,i,n,s){const o=this.prepareExternalUrl(n+li(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){const o=this.prepareExternalUrl(n+li(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(ot),v.LFG(it,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),oi=(()=>{class r extends ft{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=St(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,n,s){let o=this.prepareExternalUrl(n+li(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){let o=this.prepareExternalUrl(n+li(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(ot),v.LFG(it,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),Ft=(()=>{class r{constructor(e){this._subject=new v.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Ct(ti(i)),this._locationStrategy.onPopState(n=>{this._subject.emit({url:this.path(!0),pop:!0,state:n.state,type:n.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+li(i))}normalize(e){return r.stripTrailingSlash(function yt(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,ti(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",n=null){this._locationStrategy.pushState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+li(i)),n)}replaceState(e,i="",n=null){this._locationStrategy.replaceState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+li(i)),n)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(n=>n(e,i))}subscribe(e,i,n){return this._subject.subscribe({next:e,error:i,complete:n})}}return r.normalizeQueryParams=li,r.joinWithSlash=St,r.stripTrailingSlash=Ct,r.\u0275fac=function(e){return new(e||r)(v.LFG(ft))},r.\u0275prov=v.Yz7({token:r,factory:function(){return function Mt(){return new Ft((0,v.LFG)(ft))}()},providedIn:"root"}),r})();function ti(r){return r.replace(/\/index.html$/,"")}function pa(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const i=e.indexOf("="),[n,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(n.trim()===t)return decodeURIComponent(s)}return null}let xr=(()=>{class r{constructor(e,i,n,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=n,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,v.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,v.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(n=>{i?this._renderer.addClass(this._ngEl.nativeElement,n):this._renderer.removeClass(this._ngEl.nativeElement,n)})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.ZZ4),v.Y36(v.aQg),v.Y36(v.SBq),v.Y36(v.Qsj))},r.\u0275dir=v.lG2({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class bS{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class kh{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Qb=new kh,tf=new bS;let nf=(()=>{class r{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,v.QGY)(e))return Qb;if((0,v.F4k)(e))return tf;throw function xl(r,t){return new v.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.sBO,16))},r.\u0275pipe=v.Yjl({name:"async",type:r,pure:!1,standalone:!0}),r})(),Rh=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})();function lf(r){return"server"===r}let gv=(()=>{class r{}return r.\u0275prov=(0,v.Yz7)({token:r,providedIn:"root",factory:()=>new Kc((0,v.LFG)(tt),window)}),r})();class Kc{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function Oa(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let n=i.currentNode;for(;n;){const s=n.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}n=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],n-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=$c(this.window.history)||$c(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function $c(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Tl{}class cf extends class xS extends class pt{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function lt(r){ue||(ue=r)}(new cf)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function KD(){return Yd=Yd||document.querySelector("base"),Yd?Yd.getAttribute("href"):null}();return null==e?null:function ec(r){Ys=Ys||document.createElement("a"),Ys.setAttribute("href",r);const t=Ys.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Yd=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return pa(document.cookie,t)}}let Ys,Yd=null;const Vs=new v.OlP("TRANSITION_ID"),$D=[{provide:v.ip1,useFactory:function TS(r,t,e){return()=>{e.get(v.CZH).donePromise.then(()=>{const i=ee(),n=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<n.length;s++)i.remove(n[s])})}},deps:[Vs,tt,v.zs3],multi:!0}];let YD=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const aC=new v.OlP("EventManagerPlugins");let wv=(()=>{class r{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(n=>n.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,n){return this._findPluginFor(i).addEventListener(e,i,n)}addGlobalEventListener(e,i,n){return this._findPluginFor(i).addGlobalEventListener(e,i,n)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const n=this._plugins;for(let s=0;s<n.length;s++){const o=n[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(aC),v.LFG(v.R0b))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class wg{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const n=ee().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,i)}}let Sg=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(n=>{this._stylesSet.has(n)||(this._stylesSet.add(n),i.add(n))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),Zd=(()=>{class r extends Sg{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,n){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,n.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(lC),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,n)=>{this._addStylesToHost(e,n,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(lC))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();function lC(r){ee().remove(r)}const hC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},IS=/%COMP%/g;function Sv(r,t,e){for(let i=0;i<t.length;i++){let n=t[i];Array.isArray(n)?Sv(r,n,e):(n=n.replace(IS,r),e.push(n))}return e}function Ev(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let AS=(()=>{class r{constructor(e,i,n){this.eventManager=e,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new tc(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case v.ifc.Emulated:{let n=this.rendererByCompId.get(i.id);return n||(n=new kS(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,n)),n.applyToHost(e),n}case 1:case v.ifc.ShadowDom:return new XD(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const n=Sv(i.id,i.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(wv),v.LFG(Zd),v.LFG(v.AFp))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class tc{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(hC[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(xg(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(xg(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;const s=hC[n];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const n=hC[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&(v.JOm.DashCase|v.JOm.Important)?t.style.setProperty(e,i,n&v.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&v.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ev(i)):this.eventManager.addEventListener(t,e,Ev(i))}}function xg(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class kS extends tc{constructor(t,e,i,n){super(t),this.component=i;const s=Sv(n+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function Eg(r){return"_ngcontent-%COMP%".replace(IS,r)}(n+"-"+i.id),this.hostAttr=function cC(r){return"_nghost-%COMP%".replace(IS,r)}(n+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class XD extends tc{constructor(t,e,i,n){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Sv(n.id,n.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Qd=(()=>{class r extends wg{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,n){return e.addEventListener(i,n,!1),()=>this.removeEventListener(e,i,n)}removeEventListener(e,i,n){return e.removeEventListener(i,n)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const JD=["alt","control","meta","shift"],Qc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fC={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let xv=(()=>{class r extends wg{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,i,n){const s=r.parseEventName(i),o=r.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ee().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const s=r._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),JD.forEach(h=>{const u=i.indexOf(h);u>-1&&(i.splice(u,1),o+=h+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=n,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let n=Qc[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(n=e.code,s="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),JD.forEach(o=>{o!==n&&(0,fC[o])(e)&&(s+=o+".")}),s+=n,s===i)}static eventCallback(e,i,n){return s=>{r.matchEventFullKeyCode(s,e)&&n.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const Tg=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function tI(){cf.makeCurrent()},multi:!0},{provide:tt,useFactory:function gC(){return(0,v.RDi)(document),document},deps:[]}]),Dg=new v.OlP(""),Ig=[{provide:v.rWj,useClass:class DS{addToWindow(t){v.dqk.getAngularTestability=(i,n=!0)=>{const s=t.findTestabilityInTree(i,n);if(null==s)throw new Error("Could not find testability for element.");return s},v.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(i=>{const n=v.dqk.getAllAngularTestabilities();let s=n.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};n.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?ee().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:v.lri,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b,v.eoX,v.rWj]}],Dv=[{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function Xd(){return new v.qLn},deps:[]},{provide:aC,useClass:Qd,multi:!0,deps:[tt,v.R0b,v.Lbi]},{provide:aC,useClass:xv,multi:!0,deps:[tt]},{provide:AS,useClass:AS,deps:[wv,Zd,v.AFp]},{provide:v.FYo,useExisting:AS},{provide:Sg,useExisting:Zd},{provide:Zd,useClass:Zd,deps:[tt]},{provide:wv,useClass:wv,deps:[aC,v.R0b]},{provide:Tl,useClass:YD,deps:[]},[]];let pf=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:v.AFp,useValue:e.appId},{provide:Vs,useExisting:v.AFp},$D]}}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Dg,12))},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[...Dv,...Ig],imports:[Rh,v.hGG]}),r})(),Xc=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt))},r.\u0275prov=v.Yz7({token:r,factory:function(e){let i=null;return i=e?new e:function Ag(){return new Xc((0,v.LFG)(tt))}(),i},providedIn:"root"}),r})();typeof window<"u"&&window;var Tr=te(8996),Wa=te(9751);const{isArray:NS}=Array,{getPrototypeOf:sI,prototype:ll,keys:ic}=Object;function Og(r){if(1===r.length){const t=r[0];if(NS(t))return{args:t,keys:null};if(function ep(r){return r&&"object"==typeof r&&sI(r)===ll}(t)){const e=ic(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:r,keys:null}}var Ph=te(8421),ed=te(7669),so=te(5403),$i=te(4004);const{isArray:gf}=Array;function vC(r){return(0,$i.U)(t=>function BS(r,t){return gf(t)?r(...t):r(t)}(r,t))}function Dl(r,t){return r.reduce((e,i,n)=>(e[i]=t[n],e),{})}let nc=(()=>{class r{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.Qsj),v.Y36(v.SBq))},r.\u0275dir=v.lG2({type:r}),r})(),tp=(()=>{class r extends nc{}return r.\u0275fac=function(){let t;return function(i){return(t||(t=v.n5z(r)))(i||r)}}(),r.\u0275dir=v.lG2({type:r,features:[v.qOj]}),r})();const Ro=new v.OlP("NgValueAccessor"),aI={provide:Ro,useExisting:(0,v.Gpc)(()=>mf),multi:!0},lI=new v.OlP("CompositionEventMode");let mf=(()=>{class r extends nc{constructor(e,i,n){super(e,i),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bC(){const r=ee()?ee().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(lI,8))},r.\u0275dir=v.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&v.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[v._Bn([aI]),v.qOj]}),r})();function Lh(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function Lg(r){return null!=r&&"number"==typeof r.length}const _o=new v.OlP("NgValidators"),Cu=new v.OlP("NgAsyncValidators"),vf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ov{static min(t){return function Pv(r){return t=>{if(Lh(t.value)||Lh(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function VS(r){return t=>{if(Lh(t.value)||Lh(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function Lv(r){return Lh(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function ip(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function td(r){return Lh(r.value)||vf.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function HS(r){return t=>Lh(t.value)||!Lg(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Co(r){return t=>Lg(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Fg(r){if(!r)return Ng;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),i=>{if(Lh(i.value))return null;const n=i.value;return t.test(n)?null:{pattern:{requiredPattern:e,actualValue:n}}}}(t)}static nullValidator(t){return null}static compose(t){return nd(t)}static composeAsync(t){return rd(t)}}function Ng(r){return null}function Fv(r){return null!=r}function id(r){return(0,v.QGY)(r)?(0,Tr.D)(r):r}function zS(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function jS(r,t){return t.map(e=>e(r))}function Nv(r){return r.map(t=>function CC(r){return!r.validate}(t)?t:e=>t.validate(e))}function nd(r){if(!r)return null;const t=r.filter(Fv);return 0==t.length?null:function(e){return zS(jS(e,t))}}function yf(r){return null!=r?nd(Nv(r)):null}function rd(r){if(!r)return null;const t=r.filter(Fv);return 0==t.length?null:function(e){return function yC(...r){const t=(0,ed.jO)(r),{args:e,keys:i}=Og(r),n=new Wa.y(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,h=o;for(let u=0;u<o;u++){let p=!1;(0,Ph.Xf)(e[u]).subscribe((0,so.x)(s,m=>{p||(p=!0,h--),a[u]=m},()=>l--,void 0,()=>{(!l||!p)&&(h||s.next(i?Dl(i,a):a),s.complete())}))}});return t?n.pipe(vC(t)):n}(jS(e,t).map(id)).pipe((0,$i.U)(zS))}}function Bv(r){return null!=r?rd(Nv(r)):null}function Bg(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function bf(r){return r._rawValidators}function Cf(r){return r._rawAsyncValidators}function Vg(r){return r?Array.isArray(r)?r:[r]:[]}function Hg(r,t){return Array.isArray(r)?r.includes(t):r===t}function qS(r,t){const e=Vg(t);return Vg(r).forEach(n=>{Hg(e,n)||e.push(n)}),e}function sd(r,t){return Vg(t).filter(e=>!Hg(r,e))}class od{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=yf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Bv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class hl extends od{get formDirective(){return null}get path(){return null}}class np extends od{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class wC{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let WS=(()=>{class r extends wC{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(np,2))},r.\u0275dir=v.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&v.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[v.qOj]}),r})(),wf=(()=>{class r extends wC{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(hl,10))},r.\u0275dir=v.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&v.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[v.qOj]}),r})();const zv="VALID",jv="INVALID",rp="PENDING",rc="DISABLED";function qv(r){return(Wv(r)?r.validators:r)||null}function zg(r){return Array.isArray(r)?yf(r):r||null}function Uv(r,t){return(Wv(t)?t.asyncValidators:r)||null}function ch(r){return Array.isArray(r)?Bv(r):r||null}function Wv(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Kv{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=zg(this._rawValidators),this._composedAsyncValidatorFn=ch(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===zv}get invalid(){return this.status===jv}get pending(){return this.status==rp}get disabled(){return this.status===rc}get enabled(){return this.status!==rc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=zg(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ch(t)}addValidators(t){this.setValidators(qS(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(qS(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(sd(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(sd(t,this._rawAsyncValidators))}hasValidator(t){return Hg(this._rawValidators,t)}hasAsyncValidator(t){return Hg(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=rp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=rc,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=zv,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zv||this.status===rp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?rc:zv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=rp,this._hasOwnPendingAsyncValidator=!0;const e=id(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,n)=>i&&i._find(n),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new v.vpe,this.statusChanges=new v.vpe}_calculateStatus(){return this._allControlsDisabled()?rc:this.errors?jv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(rp)?rp:this._anyControlsHaveStatus(jv)?jv:zv}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Wv(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class sp extends Kv{constructor(t,e,i){super(qv(e),Uv(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function YS(r,t,e){r._forEachChild((i,n)=>{if(void 0===e[n])throw new v.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function Gv(r,t,e){const i=r.controls;if(!(t?Object.keys(i):i).length)throw new v.vHH(1e3,"");if(!i[e])throw new v.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const n=this.controls[i];n&&n.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,n)=>{i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,n)=>((i.enabled||this.disabled)&&(e[n]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((n,s)=>{i=e(i,n,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function Sf(r,t){x(r,t),t.valueAccessor.writeValue(r.value),r.disabled&&t.valueAccessor.setDisabledState?.(!0),function L(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&ie(r,t)})}(r,t),function We(r,t){const e=(i,n)=>{t.valueAccessor.writeValue(i),n&&t.viewToModelUpdate(i)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function G(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&ie(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function _(r,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function va(r,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),I(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Ef(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function x(r,t){const e=bf(r);null!==t.validator?r.setValidators(Bg(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const i=Cf(r);null!==t.asyncValidator?r.setAsyncValidators(Bg(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const n=()=>r.updateValueAndValidity();Ef(t._rawValidators,n),Ef(t._rawAsyncValidators,n)}function I(r,t){let e=!1;if(null!==r){if(null!==t.validator){const n=bf(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.validator);s.length!==n.length&&(e=!0,r.setValidators(s))}}if(null!==t.asyncValidator){const n=Cf(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.asyncValidator);s.length!==n.length&&(e=!0,r.setAsyncValidators(s))}}}const i=()=>{};return Ef(t._rawValidators,i),Ef(t._rawAsyncValidators,i),e}function ie(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Lt(r,t){x(r,t)}function jg(r,t){r._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const op={provide:hl,useExisting:(0,v.Gpc)(()=>ap)},Tf=(()=>Promise.resolve())();let ap=(()=>{class r extends hl{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new v.vpe,this.form=new sp({},yf(e),Bv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Tf.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),Sf(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Tf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Tf.then(()=>{const i=this._findContainer(e.path),n=new sp({});Lt(n,e),i.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Tf.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){Tf.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,jg(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(_o,10),v.Y36(Cu,10))},r.\u0275dir=v.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&v.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([op]),v.qOj]}),r})();function Df(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function Ug(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const oc=class extends Kv{constructor(t=null,e,i){super(qv(e),Uv(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wv(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=Ug(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Df(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Df(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Ug(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let TC=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),eO=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})();const QS=new v.OlP("NgModelWithFormControlWarning"),XS={provide:hl,useExisting:(0,v.Gpc)(()=>JS)};let JS=(()=>{class r extends hl{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new v.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(I(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return Sf(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){va(e.control||null,e,!1),function xC(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,jg(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,n=this.form.get(e.path);i!==n&&(va(i||null,e),(r=>r instanceof oc)(n)&&(Sf(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);Lt(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function Ti(r,t){return I(r,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){x(this.form,this),this._oldForm&&I(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(_o,10),v.Y36(Cu,10))},r.\u0275dir=v.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&v.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([XS]),v.qOj,v.TTD]}),r})();const tE={provide:np,useExisting:(0,v.Gpc)(()=>Yv)};let Yv=(()=>{class r extends np{constructor(e,i,n,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new v.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=function qg(r,t){if(!t)return null;let e,i,n;return Array.isArray(t),t.forEach(s=>{s.constructor===mf?e=s:function xf(r){return Object.getPrototypeOf(r.constructor)===tp}(s)?i=s:n=s}),n||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function Su(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function $v(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(v.Y36(hl,13),v.Y36(_o,10),v.Y36(Cu,10),v.Y36(Ro,10),v.Y36(QS,8))},r.\u0275dir=v.lG2({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[v._Bn([tE]),v.qOj,v.TTD]}),r})(),Zv=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[eO]}),r})(),mz=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[Zv]}),r})(),Z7=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:QS,useValue:e.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[Zv]}),r})();function Gi(...r){const t=(0,ed.yG)(r);return(0,Tr.D)(r,t)}var ul=te(5577),ac=te(576);function Eu(r,t){return(0,ac.m)(t)?(0,ul.z)(r,t,1):(0,ul.z)(r,1)}var Pa=te(4482);function Nh(r,t){return(0,Pa.e)((e,i)=>{let n=0;e.subscribe((0,so.x)(i,s=>r.call(t,s,n++)&&i.next(s)))})}class AI{}class yz{}class Af{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const n=e.slice(0,i),s=n.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(n,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const n=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(n,i),this.maybeSetNormalizedName(e,n))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Af?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Af;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Af?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const n=("a"===t.op?this.headers.get(e):void 0)||[];n.push(...i),this.headers.set(e,n);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class kI{encodeKey(t){return _I(t)}encodeValue(t){return _I(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const t9=/%(\d[a-f0-9])/gi,i9={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _I(r){return encodeURIComponent(r).replace(t9,(t,e)=>i9[e]??t)}function oE(r){return`${r}`}class kf{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new kI,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function RI(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(n=>{const s=n.indexOf("="),[o,a]=-1==s?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,s)),t.decodeValue(n.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],n=Array.isArray(i)?i.map(oE):[oE(i)];this.map.set(e,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const n=t[i];Array.isArray(n)?n.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:n,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new kf({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(oE(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const n=i.indexOf(oE(t.value));-1!==n&&i.splice(n,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class bz{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function _C(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function dO(r){return typeof Blob<"u"&&r instanceof Blob}function aE(r){return typeof FormData<"u"&&r instanceof FormData}class oo{constructor(t,e,i,n){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function cO(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Af),this.context||(this.context=new bz),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new kf,this.urlWithParams=e}serializeBody(){return null===this.body?null:_C(this.body)||dO(this.body)||aE(this.body)||function Cz(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof kf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||aE(this.body)?null:dO(this.body)?this.body.type||null:_C(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof kf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,h=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((p,m)=>p.set(m,t.setHeaders[m]),l)),t.setParams&&(h=Object.keys(t.setParams).reduce((p,m)=>p.set(m,t.setParams[m]),h)),new oo(e,i,s,{params:h,headers:l,context:u,reportProgress:a,responseType:n,withCredentials:o})}}var ya=(()=>((ya=ya||{})[ya.Sent=0]="Sent",ya[ya.UploadProgress=1]="UploadProgress",ya[ya.ResponseHeader=2]="ResponseHeader",ya[ya.DownloadProgress=3]="DownloadProgress",ya[ya.Response=4]="Response",ya[ya.User=5]="User",ya))();class MI{constructor(t,e=200,i="OK"){this.headers=t.headers||new Af,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class MC extends MI{constructor(t={}){super(t),this.type=ya.ResponseHeader}clone(t={}){return new MC({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class OC extends MI{constructor(t={}){super(t),this.type=ya.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new OC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class pO extends MI{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function OI(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let wz=(()=>{class r{constructor(e){this.handler=e}request(e,i,n={}){let s;if(e instanceof oo)s=e;else{let l,h;l=n.headers instanceof Af?n.headers:new Af(n.headers),n.params&&(h=n.params instanceof kf?n.params:new kf({fromObject:n.params})),s=new oo(e,i,void 0!==n.body?n.body:null,{headers:l,context:n.context,params:h,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const o=Gi(s).pipe(Eu(l=>this.handler.handle(l)));if(e instanceof oo||"events"===n.observe)return o;const a=o.pipe(Nh(l=>l instanceof OC));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe((0,$i.U)(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe((0,$i.U)(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe((0,$i.U)(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe((0,$i.U)(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new kf).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,n={}){return this.request("PATCH",e,OI(n,i))}post(e,i,n={}){return this.request("POST",e,OI(n,i))}put(e,i,n={}){return this.request("PUT",e,OI(n,i))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(AI))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();class fO{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const gO=new v.OlP("HTTP_INTERCEPTORS");let r9=(()=>{class r{intercept(e,i){return i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const PI=/^\)\]\}',?\n/;let vO=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Wa.y(i=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((y,C)=>n.setRequestHeader(y,C.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const y=e.detectContentTypeHeader();null!==y&&n.setRequestHeader("Content-Type",y)}if(e.responseType){const y=e.responseType.toLowerCase();n.responseType="json"!==y?y:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const y=n.statusText||"OK",C=new Af(n.getAllResponseHeaders()),S=function o9(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(n)||e.url;return o=new MC({headers:C,status:n.status,statusText:y,url:S}),o},l=()=>{let{headers:y,status:C,statusText:S,url:T}=a(),R=null;204!==C&&(R=typeof n.response>"u"?n.responseText:n.response),0===C&&(C=R?200:0);let P=C>=200&&C<300;if("json"===e.responseType&&"string"==typeof R){const O=R;R=R.replace(PI,"");try{R=""!==R?JSON.parse(R):null}catch(N){R=O,P&&(P=!1,R={error:N,text:R})}}P?(i.next(new OC({body:R,headers:y,status:C,statusText:S,url:T||void 0})),i.complete()):i.error(new pO({error:R,headers:y,status:C,statusText:S,url:T||void 0}))},h=y=>{const{url:C}=a(),S=new pO({error:y,status:n.status||0,statusText:n.statusText||"Unknown Error",url:C||void 0});i.error(S)};let u=!1;const p=y=>{u||(i.next(a()),u=!0);let C={type:ya.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(C.total=y.total),"text"===e.responseType&&!!n.responseText&&(C.partialText=n.responseText),i.next(C)},m=y=>{let C={type:ya.UploadProgress,loaded:y.loaded};y.lengthComputable&&(C.total=y.total),i.next(C)};return n.addEventListener("load",l),n.addEventListener("error",h),n.addEventListener("timeout",h),n.addEventListener("abort",h),e.reportProgress&&(n.addEventListener("progress",p),null!==s&&n.upload&&n.upload.addEventListener("progress",m)),n.send(s),i.next({type:ya.Sent}),()=>{n.removeEventListener("error",h),n.removeEventListener("abort",h),n.removeEventListener("load",l),n.removeEventListener("timeout",h),e.reportProgress&&(n.removeEventListener("progress",p),null!==s&&n.upload&&n.upload.removeEventListener("progress",m)),n.readyState!==n.DONE&&n.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Tl))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();const PC=new v.OlP("XSRF_COOKIE_NAME"),hE=new v.OlP("XSRF_HEADER_NAME");class LI{}let Kg=(()=>{class r{constructor(e,i,n){this.doc=e,this.platform=i,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=pa(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(tt),v.LFG(v.Lbi),v.LFG(PC))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),FI=(()=>{class r{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(LI),v.LFG(hE))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),NI=(()=>{class r{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(gO,[]);this.chain=i.reduceRight((n,s)=>new fO(n,s),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(yz),v.LFG(v.zs3))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})(),VI=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:FI,useClass:r9}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:PC,useValue:e.cookieName}:[],e.headerName?{provide:hE,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[FI,{provide:gO,useExisting:FI,multi:!0},{provide:LI,useClass:Kg},{provide:PC,useValue:"XSRF-TOKEN"},{provide:hE,useValue:"X-XSRF-TOKEN"}]}),r})(),uE=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[wz,{provide:AI,useClass:NI},vO,{provide:yz,useExisting:vO}],imports:[VI.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),r})();var xu=te(7579);class lc extends xu.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const LC=(0,te(3888).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var hc=te(4671),kz=te(9672);function yO(...r){const t=(0,ed.yG)(r),e=(0,ed.jO)(r),{args:i,keys:n}=Og(r);if(0===i.length)return(0,Tr.D)([],t);const s=new Wa.y(function Rz(r,t,e=hc.y){return i=>{bO(t,()=>{const{length:n}=r,s=new Array(n);let o=n,a=n;for(let l=0;l<n;l++)bO(t,()=>{const h=(0,Tr.D)(r[l],t);let u=!1;h.subscribe((0,so.x)(i,p=>{s[l]=p,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,n?o=>Dl(n,o):hc.y));return e?s.pipe(vC(e)):s}function bO(r,t,e){r?(0,kz.f)(e,r,t):t()}var $g=te(8189);function cE(...r){return function _z(){return(0,$g.J)(1)}()((0,Tr.D)(r,(0,ed.yG)(r)))}function CO(r){return new Wa.y(t=>{(0,Ph.Xf)(r()).subscribe(t)})}var wO=te(9635);function dE(r,t){const e=(0,ac.m)(r)?r:()=>r,i=n=>n.error(e());return new Wa.y(t?n=>t.schedule(i,0,n):i)}var Yg=te(515),Xv=te(727);function HI(){return(0,Pa.e)((r,t)=>{let e=null;r._refCount++;const i=(0,so.x)(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const n=r._connection,s=e;e=null,n&&(!s||n===s)&&n.unsubscribe(),t.unsubscribe()});r.subscribe(i),i.closed||(e=r.connect())})}class Zg extends Wa.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Pa.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Xv.w0;const e=this.getSubject();t.add(this.source.subscribe((0,so.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Xv.w0.EMPTY)}return t}refCount(){return HI()(this)}}function Zs(r,t){return(0,Pa.e)((e,i)=>{let n=null,s=0,o=!1;const a=()=>o&&!n&&i.complete();e.subscribe((0,so.x)(i,l=>{n?.unsubscribe();let h=0;const u=s++;(0,Ph.Xf)(r(l,u)).subscribe(n=(0,so.x)(i,p=>i.next(t?t(l,p,u,h++):p),()=>{n=null,a()}))},()=>{o=!0,a()}))})}function FC(r){return r<=0?()=>Yg.E:(0,Pa.e)((t,e)=>{let i=0;t.subscribe((0,so.x)(e,n=>{++i<=r&&(e.next(n),r<=i&&e.complete())}))})}function zI(...r){const t=(0,ed.yG)(r);return(0,Pa.e)((e,i)=>{(t?cE(r,e,t):cE(r,e)).subscribe(i)})}function NC(r){return(0,Pa.e)((t,e)=>{let i=!1;t.subscribe((0,so.x)(e,n=>{i=!0,e.next(n)},()=>{i||e.next(r),e.complete()}))})}function SO(r=Mz){return(0,Pa.e)((t,e)=>{let i=!1;t.subscribe((0,so.x)(e,n=>{i=!0,e.next(n)},()=>i?e.complete():e.error(r())))})}function Mz(){return new LC}function lp(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Nh((n,s)=>r(n,s,i)):hc.y,FC(1),e?NC(t):SO(()=>new LC))}var cl=te(8505);function hp(r){return(0,Pa.e)((t,e)=>{let s,i=null,n=!1;i=t.subscribe((0,so.x)(e,void 0,void 0,o=>{s=(0,Ph.Xf)(r(o,hp(r)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(e))})}function jI(r,t,e,i,n){return(s,o)=>{let a=e,l=t,h=0;s.subscribe((0,so.x)(o,u=>{const p=h++;l=a?r(l,u,p):(a=!0,u),i&&o.next(l)},n&&(()=>{a&&o.next(l),o.complete()})))}}function up(r,t){return(0,Pa.e)(jI(r,t,arguments.length>=2,!0))}function qI(r){return r<=0?()=>Yg.E:(0,Pa.e)((t,e)=>{let i=[];t.subscribe((0,so.x)(e,n=>{i.push(n),r<i.length&&i.shift()},()=>{for(const n of i)e.next(n);e.complete()},void 0,()=>{i=null}))})}function pE(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Nh((n,s)=>r(n,s,i)):hc.y,qI(1),e?NC(t):SO(()=>new LC))}function UI(r){return(0,Pa.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}const nr="primary",VC=Symbol("RouteTitle");class Pz{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Jv(r){return new Pz(r)}function Lz(r,t,e){const i=e.path.split("/");if(i.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const n={};for(let s=0;s<i.length;s++){const o=i[s],a=r[s];if(o.startsWith(":"))n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function Ga(r,t){const e=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let n;for(let s=0;s<e.length;s++)if(n=e[s],!EO(r[n],t[n]))return!1;return!0}function EO(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),i=[...t].sort();return e.every((n,s)=>i[s]===n)}return r===t}function xO(r){return Array.prototype.concat.apply([],r)}function Fz(r){return r.length>0?r[r.length-1]:null}function Ka(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Qg(r){return(0,v.CqO)(r)?r:(0,v.QGY)(r)?(0,Tr.D)(Promise.resolve(r)):Gi(r)}const TO={exact:function IO(r,t,e){if(!Jg(r.segments,t.segments)||!gE(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!IO(r.children[i],t.children[i],e))return!1;return!0},subset:AO},DO={exact:function Nz(r,t){return Ga(r,t)},subset:function uc(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>EO(r[e],t[e]))},ignored:()=>!0};function WI(r,t,e){return TO[e.paths](r.root,t.root,e.matrixParams)&&DO[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function AO(r,t,e){return GI(r,t,t.segments,e)}function GI(r,t,e,i){if(r.segments.length>e.length){const n=r.segments.slice(0,e.length);return!(!Jg(n,e)||t.hasChildren()||!gE(n,e,i))}if(r.segments.length===e.length){if(!Jg(r.segments,e)||!gE(r.segments,e,i))return!1;for(const n in t.children)if(!r.children[n]||!AO(r.children[n],t.children[n],i))return!1;return!0}{const n=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!!(Jg(r.segments,n)&&gE(r.segments,n,i)&&r.children[nr])&&GI(r.children[nr],t,s,i)}}function gE(r,t,e){return t.every((i,n)=>DO[e](r[n].parameters,i.parameters))}class Xg{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jv(this.queryParams)),this._queryParamMap}toString(){return _O.serialize(this)}}class hr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ka(e,(i,n)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zC(this)}}class HC{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Jv(this.parameters)),this._parameterMap}toString(){return LO(this)}}function Jg(r,t){return r.length===t.length&&r.every((e,i)=>e.path===t[i].path)}let RO=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return new In},providedIn:"root"}),r})();class In{parse(t){const e=new u9(t);return new Xg(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${ty(t.root,!0)}`,i=function FO(r){const t=Object.keys(r).map(e=>{const i=r[e];return Array.isArray(i)?i.map(n=>`${mE(e)}=${mE(n)}`).join("&"):`${mE(e)}=${mE(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function OO(r){return encodeURI(r)}(t.fragment)}`:""}`}}const _O=new In;function zC(r){return r.segments.map(t=>LO(t)).join("/")}function ty(r,t){if(!r.hasChildren())return zC(r);if(t){const e=r.children[nr]?ty(r.children[nr],!1):"",i=[];return Ka(r.children,(n,s)=>{s!==nr&&i.push(`${s}:${ty(n,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Bz(r,t){let e=[];return Ka(r.children,(i,n)=>{n===nr&&(e=e.concat(t(i,n)))}),Ka(r.children,(i,n)=>{n!==nr&&(e=e.concat(t(i,n)))}),e}(r,(i,n)=>n===nr?[ty(r.children[nr],!1)]:[`${n}:${ty(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[nr]?`${zC(r)}/${e[0]}`:`${zC(r)}/(${e.join("//")})`}}function MO(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mE(r){return MO(r).replace(/%3B/gi,";")}function KI(r){return MO(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jC(r){return decodeURIComponent(r)}function PO(r){return jC(r.replace(/\+/g,"%20"))}function LO(r){return`${KI(r.path)}${function h9(r){return Object.keys(r).map(t=>`;${KI(t)}=${KI(r[t])}`).join("")}(r.parameters)}`}const NO=/^[^\/()?;=#]+/;function ad(r){const t=r.match(NO);return t?t[0]:""}const Vz=/^[^=?&#]+/,YI=/^[^&#]+/;class u9{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new hr([],{}):new hr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[nr]=new hr(t,e)),i}parseSegment(){const t=ad(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new v.vHH(4009,!1);return this.capture(t),new HC(jC(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=ad(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const n=ad(this.remaining);n&&(i=n,this.capture(i))}t[jC(e)]=jC(i)}parseQueryParam(t){const e=function $I(r){const t=r.match(Vz);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function Hz(r){const t=r.match(YI);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const n=PO(e),s=PO(i);if(t.hasOwnProperty(n)){let o=t[n];Array.isArray(o)||(o=[o],t[n]=o),o.push(s)}else t[n]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=ad(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new v.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=nr);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[nr]:new hr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new v.vHH(4011,!1)}}function BO(r){return r.segments.length>0?new hr([],{[nr]:r}):r}function ZI(r){const t={};for(const i of Object.keys(r.children)){const s=ZI(r.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function zz(r){if(1===r.numberOfChildren&&r.children[nr]){const t=r.children[nr];return new hr(r.segments.concat(t.segments),t.children)}return r}(new hr(r.segments,t))}function Rf(r){return r instanceof Xg}function HO(r,t,e,i,n){if(0===e.length)return em(t.root,t.root,t.root,i,n);const s=function qO(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new jO(!0,0,r);let t=0,e=!1;const i=r.reduce((n,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ka(s.outlets,(l,h)=>{a[h]="string"==typeof l?l.split("/"):l}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return"string"!=typeof s?[...n,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&n.push(a))}),n):[...n,s]},[]);return new jO(e,t,i)}(e);return s.toRoot()?em(t.root,t.root,new hr([],{}),i,n):function o(l){const h=function UO(r,t,e,i){if(r.isAbsolute)return new ny(t.root,!0,0);if(-1===i)return new ny(e,e===t.root,0);return function WO(r,t,e){let i=r,n=t,s=e;for(;s>n;){if(s-=n,i=i.parent,!i)throw new v.vHH(4005,!1);n=i.segments.length}return new ny(i,!1,n-s)}(e,i+(_f(r.commands[0])?0:1),r.numberOfDoubleDots)}(s,t,r.snapshot?._urlSegment,l),u=h.processChildren?tm(h.segmentGroup,h.index,s.commands):vE(h.segmentGroup,h.index,s.commands);return em(t.root,h.segmentGroup,u,i,n)}(r.snapshot?._lastPathIndex)}function _f(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function qC(r){return"object"==typeof r&&null!=r&&r.outlets}function em(r,t,e,i,n){let o,s={};i&&Ka(i,(l,h)=>{s[h]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=r===t?e:zO(r,t,e);const a=BO(ZI(o));return new Xg(a,s,n)}function zO(r,t,e){const i={};return Ka(r.children,(n,s)=>{i[s]=n===t?e:zO(n,t,e)}),new hr(r.segments,i)}class jO{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&_f(i[0]))throw new v.vHH(4003,!1);const n=i.find(qC);if(n&&n!==Fz(i))throw new v.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ny{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function vE(r,t,e){if(r||(r=new hr([],{})),0===r.segments.length&&r.hasChildren())return tm(r,t,e);const i=function d9(r,t,e){let i=0,n=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=e.length)return s;const o=r.segments[n],a=e[i];if(qC(a))break;const l=`${a}`,h=i<e.length-1?e[i+1]:null;if(n>0&&void 0===l)break;if(l&&h&&"object"==typeof h&&void 0===h.outlets){if(!im(l,h,o))return s;i+=2}else{if(!im(l,{},o))return s;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}(r,t,e),n=e.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const s=new hr(r.segments.slice(0,i.pathIndex),{});return s.children[nr]=new hr(r.segments.slice(i.pathIndex),r.children),tm(s,0,n)}return i.match&&0===n.length?new hr(r.segments,{}):i.match&&!r.hasChildren()?UC(r,t,e):i.match?tm(r,0,n):UC(r,t,e)}function tm(r,t,e){if(0===e.length)return new hr(r.segments,{});{const i=function GO(r){return qC(r[0])?r[0].outlets:{[nr]:r}}(e),n={};return Ka(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(n[o]=vE(r.children[o],t,s))}),Ka(r.children,(s,o)=>{void 0===i[o]&&(n[o]=s)}),new hr(r.segments,n)}}function UC(r,t,e){const i=r.segments.slice(0,t);let n=0;for(;n<e.length;){const s=e[n];if(qC(s)){const l=Uz(s.outlets);return new hr(i,l)}if(0===n&&_f(e[0])){i.push(new HC(r.segments[t].path,Wz(e[0]))),n++;continue}const o=qC(s)?s.outlets[nr]:`${s}`,a=n<e.length-1?e[n+1]:null;o&&a&&_f(a)?(i.push(new HC(o,Wz(a))),n+=2):(i.push(new HC(o,{})),n++)}return new hr(i,{})}function Uz(r){const t={};return Ka(r,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=UC(new hr([],{}),0,e))}),t}function Wz(r){const t={};return Ka(r,(e,i)=>t[i]=`${e}`),t}function im(r,t,e){return r==e.path&&Ga(t,e.parameters)}class ld{constructor(t,e){this.id=t,this.url=e}}class yE extends ld{constructor(t,e,i="imperative",n=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hd extends ld{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dh extends ld{constructor(t,e,i,n){super(t,e),this.reason=i,this.code=n,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class QI extends ld{constructor(t,e,i,n){super(t,e),this.error=i,this.target=n,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gz extends ld{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class XI extends ld{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cp extends ld{constructor(t,e,i,n,s){super(t,e),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class JI extends ld{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KO extends ld{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class eA{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class p9{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class $O{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f9{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bE{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class CE{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wE{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class SE{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=YO(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=YO(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=iA(t,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return iA(t,this._root).map(e=>e.value)}}function YO(r,t){if(r===t.value)return t;for(const e of t.children){const i=YO(r,e);if(i)return i}return null}function iA(r,t){if(r===t.value)return[t];for(const e of t.children){const i=iA(r,e);if(i.length)return i.unshift(t),i}return[]}class dp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function ry(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class ZO extends SE{constructor(t,e){super(t),this.snapshot=e,GC(this,t)}toString(){return this.snapshot.toString()}}function nA(r,t){const e=function g9(r,t){const o=new WC([],{},{},"",{},nr,t,null,r.root,-1,{});return new XO("",new dp(o,[]))}(r,t),i=new lc([new HC("",{})]),n=new lc({}),s=new lc({}),o=new lc({}),a=new lc(""),l=new nm(i,n,o,a,s,nr,t,e.root);return l.snapshot=e.root,new ZO(new dp(l,[]),e)}class nm{constructor(t,e,i,n,s,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe((0,$i.U)(h=>h[VC]))??Gi(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$i.U)(t=>Jv(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$i.U)(t=>Jv(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Kz(r,t="emptyOnly"){const e=r.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const n=e[i],s=e[i-1];if(n.routeConfig&&""===n.routeConfig.path)i--;else{if(s.component)break;i--}}return function QO(r){return r.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class WC{constructor(t,e,i,n,s,o,a,l,h,u,p,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[VC],this.routeConfig=l,this._urlSegment=h,this._lastPathIndex=u,this._correctedLastPathIndex=m??u,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Jv(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Jv(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XO extends SE{constructor(t,e){super(e),this.url=t,GC(this,e)}toString(){return $z(this._root)}}function GC(r,t){t.value._routerState=r,t.children.forEach(e=>GC(r,e))}function $z(r){const t=r.children.length>0?` { ${r.children.map($z).join(", ")} } `:"";return`${r.value}${t}`}function JO(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,Ga(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),Ga(t.params,e.params)||r.params.next(e.params),function ey(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!Ga(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),Ga(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function eP(r,t){const e=Ga(r.params,t.params)&&function kO(r,t){return Jg(r,t)&&r.every((e,i)=>Ga(e.parameters,t[i].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||eP(r.parent,t.parent))}function EE(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const n=function v9(r,t,e){return t.children.map(i=>{for(const n of e.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return EE(r,i,n);return EE(r,i)})}(r,t,e);return new dp(i,n)}{if(r.shouldAttach(t.value)){const s=r.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>EE(r,a)),o}}const i=function y9(r){return new nm(new lc(r.url),new lc(r.params),new lc(r.queryParams),new lc(r.fragment),new lc(r.data),r.outlet,r.component,r)}(t.value),n=t.children.map(s=>EE(r,s));return new dp(i,n)}}const tP="ngNavigationCancelingError";function Yz(r,t){const{redirectTo:e,navigationBehaviorOptions:i}=Rf(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=Zz(!1,0,t);return n.url=e,n.navigationBehaviorOptions=i,n}function Zz(r,t,e){const i=new Error("NavigationCancelingError: "+(r||""));return i[tP]=!0,i.cancellationCode=t,e&&(i.url=e),i}function pp(r){return xE(r)&&Rf(r.url)}function xE(r){return r&&r[tP]}class Qz{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sy,this.attachRef=null}}let sy=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const n=this.getOrCreateContext(e);n.outlet=i,this.contexts.set(e,n)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new Qz,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const oy=!1;let TE=(()=>{class r{constructor(e,i,n,s,o){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.attachEvents=new v.vpe,this.detachEvents=new v.vpe,this.name=n||nr,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new v.vHH(4012,oy);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new v.vHH(4012,oy);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new v.vHH(4012,oy);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new v.vHH(4013,oy);this._activatedRoute=e;const n=this.location,o=e._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rA(e,a,n.injector);if(i&&function Xz(r){return!!r.resolveComponentFactory}(i)){const h=i.resolveComponentFactory(o);this.activated=n.createComponent(h,n.length,l)}else this.activated=n.createComponent(o,{index:n.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(sy),v.Y36(v.s_b),v.$8M("name"),v.Y36(v.sBO),v.Y36(v.lqb))},r.\u0275dir=v.lG2({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),r})();class rA{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===nm?this.route:t===sy?this.childContexts:this.parent.get(t,e)}}let ud=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["ng-component"]],standalone:!0,features:[v.jDz],decls:1,vars:0,template:function(e,i){1&e&&v._UZ(0,"router-outlet")},dependencies:[TE],encapsulation:2}),r})();function sA(r,t){return r.providers&&!r._injector&&(r._injector=(0,v.MMx)(r.providers,t,`Route: ${r.path}`)),r._injector??t}function Mf(r){const t=r.children&&r.children.map(Mf),e=t?{...r,children:t}:{...r};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==nr&&(e.component=ud),e}function ph(r){return r.outlet||nr}function KC(r,t){const e=r.filter(i=>ph(i)===t);return e.push(...r.filter(i=>ph(i)!==t)),e}function ly(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class lA{constructor(t,e,i,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=n}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),JO(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const n=ry(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,n[o],i),delete n[o]}),Ka(n,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(n===s)if(n.component){const o=i.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=ry(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=ry(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const n=ry(e);t.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],i),this.forwardEvent(new CE(s.value.snapshot))}),t.children.length&&this.forwardEvent(new f9(t.value.snapshot))}activateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(JO(n),n===s)if(n.component){const o=i.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(n.component){const o=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),JO(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=ly(n.snapshot),l=a?.get(v._Vd)??null;o.attachRef=null,o.route=n,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class IE{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class $C{constructor(t,e){this.component=t,this.route=e}}function hA(r,t,e){const i=r._root;return ZC(i,t?t._root:null,e,[i.value])}function YC(r,t){const e=Symbol(),i=t.get(r,e);return i===e?"function"!=typeof r||(0,v.Z0I)(r)?t.get(r):r:i}function ZC(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=ry(t);return r.children.forEach(o=>{(function nP(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,o=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function tj(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!Jg(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Jg(r.url,t.url)||!Ga(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eP(r,t)||!Ga(r.queryParams,t.queryParams);default:return!eP(r,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new IE(i)):(s.data=o.data,s._resolvedData=o._resolvedData),ZC(r,t,s.component?a?a.children:null:e,i,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new $C(a.outlet.component,o))}else o&&hy(t,a,n),n.canActivateChecks.push(new IE(i)),ZC(r,null,s.component?a?a.children:null:e,i,n)})(o,s[o.value.outlet],e,i.concat([o.value]),n),delete s[o.value.outlet]}),Ka(s,(o,a)=>hy(o,e.getContext(a),n)),n}function hy(r,t,e){const i=ry(r),n=r.value;Ka(i,(s,o)=>{hy(s,n.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new $C(n.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,n))}function uy(r){return"function"==typeof r}function uA(r){return r instanceof LC||"EmptyError"===r?.name}const AE=Symbol("INITIAL_VALUE");function cy(){return Zs(r=>yO(r.map(t=>t.pipe(FC(1),zI(AE)))).pipe((0,$i.U)(t=>{for(const e of t)if(!0!==e){if(e===AE)return AE;if(!1===e||e instanceof Xg)return e}return!0}),Nh(t=>t!==AE),FC(1)))}function kE(r){return(0,wO.z)((0,cl.b)(t=>{if(Rf(t))throw Yz(0,t)}),(0,$i.U)(t=>!0===t))}const cA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function uj(r,t,e,i,n){const s=RE(r,t,e);return s.matched?function hj(r,t,e,i){const n=t.canMatch;return n&&0!==n.length?Gi(n.map(o=>{const a=YC(o,r);return Qg(function rj(r){return r&&uy(r.canMatch)}(a)?a.canMatch(t,e):r.runInContext(()=>a(t,e)))})).pipe(cy(),kE()):Gi(!0)}(i=sA(t,i),t,e).pipe((0,$i.U)(o=>!0===o?s:{...cA})):Gi(s)}function RE(r,t,e){if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?{...cA}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const n=(t.matcher||Lz)(e,r,t);if(!n)return{...cA};const s={};Ka(n.posParams,(a,l)=>{s[l]=a.path});const o=n.consumed.length>0?{...s,...n.consumed[n.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function _E(r,t,e,i,n="corrected"){if(e.length>0&&function dA(r,t,e){return e.some(i=>ME(r,t,i)&&ph(i)!==nr)}(r,e,i)){const o=new hr(t,function dj(r,t,e,i){const n={};n[nr]=i,i._sourceSegment=r,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&ph(s)!==nr){const o=new hr([],{});o._sourceSegment=r,o._segmentIndexShift=t.length,n[ph(s)]=o}return n}(r,t,i,new hr(e,r.children)));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function pj(r,t,e){return e.some(i=>ME(r,t,i))}(r,e,i)){const o=new hr(r.segments,function cj(r,t,e,i,n,s){const o={};for(const a of i)if(ME(r,e,a)&&!n[ph(a)]){const l=new hr([],{});l._sourceSegment=r,l._segmentIndexShift="legacy"===s?r.segments.length:t.length,o[ph(a)]=l}return{...n,...o}}(r,t,e,i,r.children,n));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new hr(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function ME(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function QC(r,t,e,i){return!!(ph(r)===i||i!==nr&&ME(t,e,r))&&("**"===r.path||RE(t,r,e).matched)}function OE(r,t,e){return 0===t.length&&!r.children[e]}const rm=!1;class pA{constructor(t){this.segmentGroup=t||null}}class PE{constructor(t){this.urlTree=t}}function LE(r){return dE(new pA(r))}function fA(r){return dE(new PE(r))}class gA{constructor(t,e,i,n,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=n,this.config=s,this.allowRedirects=!0}apply(){const t=_E(this.urlTree.root,[],[],this.config).segmentGroup,e=new hr(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,nr).pipe((0,$i.U)(s=>this.createUrlTree(ZI(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hp(s=>{if(s instanceof PE)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof pA?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,nr).pipe((0,$i.U)(n=>this.createUrlTree(ZI(n),t.queryParams,t.fragment))).pipe(hp(n=>{throw n instanceof pA?this.noMatchError(n):n}))}noMatchError(t){return new v.vHH(4002,rm)}createUrlTree(t,e,i){const n=BO(t);return new Xg(n,e,i)}expandSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,$i.U)(s=>new hr([],s))):this.expandSegment(t,i,e,i.segments,n,!0)}expandChildren(t,e,i){const n=[];for(const s of Object.keys(i.children))"primary"===s?n.unshift(s):n.push(s);return(0,Tr.D)(n).pipe(Eu(s=>{const o=i.children[s],a=KC(e,s);return this.expandSegmentGroup(t,a,o,s).pipe((0,$i.U)(l=>({segment:l,outlet:s})))}),up((s,o)=>(s[o.outlet]=o.segment,s),{}),pE())}expandSegment(t,e,i,n,s,o){return(0,Tr.D)(i).pipe(Eu(a=>this.expandSegmentAgainstRoute(t,e,i,a,n,s,o).pipe(hp(h=>{if(h instanceof pA)return Gi(null);throw h}))),lp(a=>!!a),hp((a,l)=>{if(uA(a))return OE(e,n,s)?Gi(new hr([],{})):LE(e);throw a}))}expandSegmentAgainstRoute(t,e,i,n,s,o,a){return QC(n,e,s,o)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o):LE(e):LE(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,n,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,n){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fA(s):this.lineralizeSegments(i,s).pipe((0,ul.z)(o=>{const a=new hr(o,{});return this.expandSegment(t,a,e,o,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){const{matched:a,consumedSegments:l,remainingSegments:h,positionalParamSegments:u}=RE(e,n,s);if(!a)return LE(e);const p=this.applyRedirectCommands(l,n.redirectTo,u);return n.redirectTo.startsWith("/")?fA(p):this.lineralizeSegments(n,p).pipe((0,ul.z)(m=>this.expandSegment(t,e,i,m.concat(h),o,!1)))}matchSegmentAgainstRoute(t,e,i,n,s){return"**"===i.path?(t=sA(i,t),i.loadChildren?(i._loadedRoutes?Gi({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,$i.U)(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new hr(n,{})))):Gi(new hr(n,{}))):uj(e,i,n,t).pipe(Zs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=i._injector??t,i,n).pipe((0,ul.z)(u=>{const p=u.injector??t,m=u.routes,{segmentGroup:y,slicedSegments:C}=_E(e,a,l,m),S=new hr(y.segments,y.children);if(0===C.length&&S.hasChildren())return this.expandChildren(p,m,S).pipe((0,$i.U)(O=>new hr(a,O)));if(0===m.length&&0===C.length)return Gi(new hr(a,{}));const T=ph(i)===s;return this.expandSegment(p,S,m,C,T?nr:s,!0).pipe((0,$i.U)(P=>new hr(a.concat(P.segments),P.children)))})):LE(e)))}getChildConfig(t,e,i){return e.children?Gi({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Gi({routes:e._loadedRoutes,injector:e._loadedInjector}):function cd(r,t,e,i){const n=t.canLoad;return void 0===n||0===n.length?Gi(!0):Gi(n.map(o=>{const a=YC(o,r);return Qg(function Bh(r){return r&&uy(r.canLoad)}(a)?a.canLoad(t,e):r.runInContext(()=>a(t,e)))})).pipe(cy(),kE())}(t,e,i).pipe((0,ul.z)(n=>n?this.configLoader.loadChildren(t,e).pipe((0,cl.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function dP(r){return dE(Zz(rm,3))}())):Gi({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],n=e.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return Gi(i);if(n.numberOfChildren>1||!n.children[nr])return dE(new v.vHH(4e3,rm));n=n.children[nr]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,n){const s=this.createSegmentGroup(t,e.root,i,n);return new Xg(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Ka(t,(n,s)=>{if("string"==typeof n&&n.startsWith(":")){const a=n.substring(1);i[s]=e[a]}else i[s]=n}),i}createSegmentGroup(t,e,i,n){const s=this.createSegments(t,e.segments,i,n);let o={};return Ka(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,n)}),new hr(s,o)}createSegments(t,e,i,n){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,n):this.findOrReturn(s,i))}findPosParam(t,e,i){const n=i[e.path.substring(1)];if(!n)throw new v.vHH(4001,rm);return n}findOrReturn(t,e){let i=0;for(const n of e){if(n.path===t.path)return e.splice(i),n;i++}return t}}class FE{}class mA{constructor(t,e,i,n,s,o,a,l){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=n,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=_E(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,nr).pipe((0,$i.U)(e=>{if(null===e)return null;const i=new WC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nr,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new dp(i,e),s=new XO(this.url,n);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=Kz(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,n)}processChildren(t,e,i){return(0,Tr.D)(Object.keys(i.children)).pipe(Eu(n=>{const s=i.children[n],o=KC(e,n);return this.processSegmentGroup(t,o,s,n)}),up((n,s)=>n&&s?(n.push(...s),n):null),function BC(r,t=!1){return(0,Pa.e)((e,i)=>{let n=0;e.subscribe((0,so.x)(i,s=>{const o=r(s,n++);(o||t)&&i.next(s),!o&&i.complete()}))})}(n=>null!==n),NC(null),pE(),(0,$i.U)(n=>{if(null===n)return null;const s=dy(n);return function fP(r){r.sort((t,e)=>t.value.outlet===nr?-1:e.value.outlet===nr?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,n,s){return(0,Tr.D)(e).pipe(Eu(o=>this.processSegmentAgainstRoute(o._injector??t,o,i,n,s)),lp(o=>!!o),hp(o=>{if(uA(o))return OE(i,n,s)?Gi([]):Gi(null);throw o}))}processSegmentAgainstRoute(t,e,i,n,s){if(e.redirectTo||!QC(e,i,n,s))return Gi(null);let o;if("**"===e.path){const a=n.length>0?Fz(n).parameters:{},l=gP(i)+n.length;o=Gi({snapshot:new WC(n,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mP(e),ph(e),e.component??e._loadedComponent??null,e,yj(i),l,vP(e),l),consumedSegments:[],remainingSegments:[]})}else o=uj(i,e,n,t).pipe((0,$i.U)(({matched:a,consumedSegments:l,remainingSegments:h,parameters:u})=>{if(!a)return null;const p=gP(i)+l.length;return{snapshot:new WC(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,mP(e),ph(e),e.component??e._loadedComponent??null,e,yj(i),p,vP(e),p),consumedSegments:l,remainingSegments:h}}));return o.pipe(Zs(a=>{if(null===a)return Gi(null);const{snapshot:l,consumedSegments:h,remainingSegments:u}=a;t=e._injector??t;const p=e._loadedInjector??t,m=function gj(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(e),{segmentGroup:y,slicedSegments:C}=_E(i,h,u,m.filter(T=>void 0===T.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren())return this.processChildren(p,m,y).pipe((0,$i.U)(T=>null===T?null:[new dp(l,T)]));if(0===m.length&&0===C.length)return Gi([new dp(l,[])]);const S=ph(e)===s;return this.processSegment(p,m,y,C,S?nr:s).pipe((0,$i.U)(T=>null===T?null:[new dp(l,T)]))}))}}function mj(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function dy(r){const t=[],e=new Set;for(const i of r){if(!mj(i)){t.push(i);continue}const n=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==n?(n.children.push(...i.children),e.add(n)):t.push(i)}for(const i of e){const n=dy(i.children);t.push(new dp(i.value,n))}return t.filter(i=>!e.has(i))}function yj(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function gP(r){let t=r,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function mP(r){return r.data||{}}function vP(r){return r.resolve||{}}function bP(r){return"string"==typeof r.title||null===r.title}function bA(r){return Zs(t=>{const e=r(t);return e?(0,Tr.D)(e).pipe((0,$i.U)(()=>t)):Gi(t)})}let CP=(()=>{class r{buildTitle(e){let i,n=e.root;for(;void 0!==n;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(s=>s.outlet===nr);return i}getResolvedTitleForRoute(e){return e.data[VC]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:function(){return(0,v.f3M)(wP)},providedIn:"root"}),r})(),wP=(()=>{class r extends CP{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Xc))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class NE{}class x9 extends class om{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const BE=new v.OlP("",{providedIn:"root",factory:()=>({})}),e0=new v.OlP("ROUTES");let CA=(()=>{class r{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Gi(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Qg(e.loadComponent()).pipe((0,cl.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),UI(()=>{this.componentLoaders.delete(e)})),n=new Zg(i,()=>new xu.x).pipe(HI());return this.componentLoaders.set(e,n),n}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Gi({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,$i.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,h,u=!1;Array.isArray(a)?h=a:(l=a.create(e).injector,h=xO(l.get(e0,[],v.XFs.Self|v.XFs.Optional)));return{routes:h.map(Mf),injector:l}}),UI(()=>{this.childrenLoaders.delete(i)})),o=new Zg(s,()=>new xu.x).pipe(HI());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(e){return Qg(e()).pipe((0,ul.z)(i=>i instanceof v.YKP||Array.isArray(i)?Gi(i):(0,Tr.D)(this.compiler.compileModuleAsync(i))))}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(v.zs3),v.LFG(v.Sil))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class dd{}class t0{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function am(r){throw r}function VE(r,t,e){return t.parse("/")}const Tu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},wA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lm(){const r=(0,v.f3M)(RO),t=(0,v.f3M)(sy),e=(0,v.f3M)(Ft),i=(0,v.f3M)(v.zs3),n=(0,v.f3M)(v.Sil),s=(0,v.f3M)(e0,{optional:!0})??[],o=(0,v.f3M)(BE,{optional:!0})??{},a=(0,v.f3M)(wP),l=(0,v.f3M)(CP,{optional:!0}),h=(0,v.f3M)(dd,{optional:!0}),u=(0,v.f3M)(NE,{optional:!0}),p=new Mo(null,r,t,e,i,n,xO(s));return h&&(p.urlHandlingStrategy=h),u&&(p.routeReuseStrategy=u),p.titleStrategy=l??a,function py(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(o,p),p}let Mo=(()=>{class r{constructor(e,i,n,s,o,a,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=n,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new xu.x,this.errorHandler=am,this.malformedUriErrorHandler=VE,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Gi(void 0),this.urlHandlingStrategy=new t0,this.routeReuseStrategy=new x9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(CA),this.configLoader.onLoadEndListener=m=>this.triggerEvent(new p9(m)),this.configLoader.onLoadStartListener=m=>this.triggerEvent(new eA(m)),this.ngModule=o.get(v.h0i),this.console=o.get(v.c2e);const p=o.get(v.R0b);this.isNgZoneEnabled=p instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function l9(){return new Xg(new hr([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=nA(this.currentUrlTree,this.rootComponentType),this.transitions=new lc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Nh(n=>0!==n.id),(0,$i.U)(n=>({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),Zs(n=>{let s=!1,o=!1;return Gi(n).pipe((0,cl.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Zs(a=>{const l=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return hm(a.source)&&(this.browserUrlTree=a.extractedUrl),Gi(a).pipe(Zs(p=>{const m=this.transitions.getValue();return i.next(new yE(p.id,this.serializeUrl(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions.getValue()?Yg.E:Promise.resolve(p)}),function fp(r,t,e,i){return Zs(n=>function pP(r,t,e,i,n){return new gA(r,t,e,i,n).apply()}(r,t,e,n.extractedUrl,i).pipe((0,$i.U)(s=>({...n,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,cl.b)(p=>{this.currentNavigation={...this.currentNavigation,finalUrl:p.urlAfterRedirects},n.urlAfterRedirects=p.urlAfterRedirects}),function Cj(r,t,e,i,n,s){return(0,ul.z)(o=>function fj(r,t,e,i,n,s,o="emptyOnly",a="legacy"){return new mA(r,t,e,i,n,o,a,s).recognize().pipe(Zs(l=>null===l?function XC(r){return new Wa.y(t=>t.error(r))}(new FE):Gi(l)))}(r,t,e,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,n,s).pipe((0,$i.U)(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,cl.b)(p=>{if(n.targetSnapshot=p.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!p.extras.skipLocationChange){const y=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl);this.setBrowserUrl(y,p)}this.browserUrlTree=p.urlAfterRedirects}const m=new Gz(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);i.next(m)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:y,source:C,restoredState:S,extras:T}=a,R=new yE(m,this.serializeUrl(y),C,S);i.next(R);const P=nA(y,this.rootComponentType).snapshot;return Gi(n={...a,targetSnapshot:P,urlAfterRedirects:y,extras:{...T,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Yg.E}),(0,cl.b)(a=>{const l=new XI(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),(0,$i.U)(a=>n={...a,guards:hA(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function aP(r,t){return(0,ul.z)(e=>{const{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Gi({...e,guardsResult:!0}):function sj(r,t,e,i){return(0,Tr.D)(r).pipe((0,ul.z)(n=>function lj(r,t,e,i,n){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Gi(s.map(a=>{const l=ly(t)??n,h=YC(a,l);return Qg(function S9(r){return r&&uy(r.canDeactivate)}(h)?h.canDeactivate(r,t,e,i):l.runInContext(()=>h(r,t,e,i))).pipe(lp())})).pipe(cy()):Gi(!0)}(n.component,n.route,e,t,i)),lp(n=>!0!==n,!0))}(o,i,n,r).pipe((0,ul.z)(a=>a&&function ij(r){return"boolean"==typeof r}(a)?function lP(r,t,e,i){return(0,Tr.D)(t).pipe(Eu(n=>cE(function aj(r,t){return null!==r&&t&&t(new $O(r)),Gi(!0)}(n.route.parent,i),function oj(r,t){return null!==r&&t&&t(new bE(r)),Gi(!0)}(n.route,i),function uP(r,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function ej(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(o)).filter(o=>null!==o).map(o=>CO(()=>Gi(o.guards.map(l=>{const h=ly(o.node)??e,u=YC(l,h);return Qg(function nj(r){return r&&uy(r.canActivateChild)}(u)?u.canActivateChild(i,r):h.runInContext(()=>u(i,r))).pipe(lp())})).pipe(cy())));return Gi(s).pipe(cy())}(r,n.path,e),function hP(r,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Gi(!0);const n=i.map(s=>CO(()=>{const o=ly(t)??e,a=YC(s,o);return Qg(function rP(r){return r&&uy(r.canActivate)}(a)?a.canActivate(t,r):o.runInContext(()=>a(t,r))).pipe(lp())}));return Gi(n).pipe(cy())}(r,n.route,e))),lp(n=>!0!==n,!0))}(i,s,r,t):Gi(a)),(0,$i.U)(a=>({...e,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,cl.b)(a=>{if(n.guardsResult=a.guardsResult,Rf(a.guardsResult))throw Yz(0,a.guardsResult);const l=new cp(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Nh(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),bA(a=>{if(a.guards.canActivateChecks.length)return Gi(a).pipe((0,cl.b)(l=>{const h=new JI(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}),Zs(l=>{let h=!1;return Gi(l).pipe(function yP(r,t){return(0,ul.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:n}}=e;if(!n.length)return Gi(e);let s=0;return(0,Tr.D)(n).pipe(Eu(o=>function vA(r,t,e,i){const n=r.routeConfig,s=r._resolve;return void 0!==n?.title&&!bP(n)&&(s[VC]=n.title),function wj(r,t,e,i){const n=function yA(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===n.length)return Gi({});const s={};return(0,Tr.D)(n).pipe((0,ul.z)(o=>function Sj(r,t,e,i){const n=ly(t)??i,s=YC(r,n);return Qg(s.resolve?s.resolve(t,e):n.runInContext(()=>s(t,e)))}(r[o],t,e,i).pipe(lp(),(0,cl.b)(a=>{s[o]=a}))),qI(1),function Oz(r){return(0,$i.U)(()=>r)}(s),hp(o=>uA(o)?Yg.E:dE(o)))}(s,r,t,i).pipe((0,$i.U)(o=>(r._resolvedData=o,r.data=Kz(r,e).resolve,n&&bP(n)&&(r.data[VC]=n.title),null)))}(o.route,i,r,t)),(0,cl.b)(()=>s++),qI(1),(0,ul.z)(o=>s===n.length?Gi(e):Yg.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,cl.b)({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),(0,cl.b)(l=>{const h=new KO(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}))}),bA(a=>{const l=h=>{const u=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,cl.b)(p=>{h.component=p}),(0,$i.U)(()=>{})));for(const p of h.children)u.push(...l(p));return u};return yO(l(a.targetSnapshot.root)).pipe(NC(),FC(1))}),bA(()=>this.afterPreactivation()),(0,$i.U)(a=>{const l=function m9(r,t,e){const i=EE(r,t._root,e?e._root:void 0);return new ZO(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return n={...a,targetRouterState:l}}),(0,cl.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((r,t,e)=>(0,$i.U)(i=>(new lA(t,i.targetRouterState,i.currentRouterState,e).activate(r),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,cl.b)({next(){s=!0},complete(){s=!0}}),UI(()=>{s||o||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),hp(a=>{if(o=!0,xE(a)){pp(a)||(this.navigated=!0,this.restoreHistory(n,!0));const l=new dh(n.id,this.serializeUrl(n.extractedUrl),a.message,a.cancellationCode);if(i.next(l),pp(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hm(n.source)};this.scheduleNavigation(h,"imperative",null,u,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{this.restoreHistory(n,!0);const l=new QI(n.id,this.serializeUrl(n.extractedUrl),a,n.targetSnapshot??void 0);i.next(l);try{n.resolve(this.errorHandler(a))}catch(h){n.reject(h)}}return Yg.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const n={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(n.state=a)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,i,s,n)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(Mf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:n,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,h=n||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let p=null;switch(a){case"merge":p={...this.currentUrlTree.queryParams,...s};break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=s||null}return null!==p&&(p=this.removeEmptyProps(p)),HO(h,this.currentUrlTree,e,p,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){const n=Rf(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function fy(r){for(let t=0;t<r.length;t++){if(null==r[t])throw new v.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(n){i=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return i}isActive(e,i){let n;if(n=!0===i?{...Tu}:!1===i?{...wA}:i,Rf(e))return WI(this.currentUrlTree,e,n);const s=this.parseUrl(e);return WI(this.currentUrlTree,s,n)}removeEmptyProps(e){return Object.keys(e).reduce((i,n)=>{const s=e[n];return null!=s&&(i[n]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new hd(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,n,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,h;o?(a=o.resolve,l=o.reject,h=o.promise):h=new Promise((m,y)=>{a=m,l=y});const u=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):p=0,this.setTransition({id:u,targetPageId:p,source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}setBrowserUrl(e,i){const n=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl?this.location.replaceState(n,"",s):this.location.go(n,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const n=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===n?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===n&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(n)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,n){const s=new dh(e.id,this.serializeUrl(e.extractedUrl),i,n);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return r.\u0275fac=function(e){v.$Z()},r.\u0275prov=v.Yz7({token:r,factory:function(){return lm()},providedIn:"root"}),r})();function hm(r){return"imperative"!==r}let gp=(()=>{class r{constructor(e,i,n,s,o){this.router=e,this.route=i,this.tabIndexAttribute=n,this.renderer=s,this.el=o,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new xu.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(e){this._preserveFragment=(0,v.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,v.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,v.D6c)(e)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,n=this.el.nativeElement;null!==e?i.setAttribute(n,"tabindex",e):i.removeAttribute(n,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Mo),v.Y36(nm),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq))},r.\u0275dir=v.lG2({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&v.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[v.TTD]}),r})(),Vh=(()=>{class r{constructor(e,i,n){this.router=e,this.route=i,this.locationStrategy=n,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new xu.x,this.subscription=e.events.subscribe(s=>{s instanceof hd&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,v.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,v.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,v.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,n,s,o){return!!(0!==e||i||n||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(Mo),v.Y36(nm),v.Y36(ft))},r.\u0275dir=v.lG2({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&v.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&v.uIk("target",i.target)("href",i.href,v.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[v.TTD]}),r})();class SA{}let EP=(()=>{class r{constructor(e,i,n,s,o){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Nh(e=>e instanceof hd),Eu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const n=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,v.MMx)(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?n.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&n.push(this.processRoutes(a,s.children??s._loadedRoutes))}return(0,Tr.D)(n).pipe((0,$g.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let n;n=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Gi(null);const s=n.pipe((0,ul.z)(o=>null===o?Gi(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){const o=this.loader.loadComponent(i);return(0,Tr.D)([s,o]).pipe((0,$g.J)())}return s})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Mo),v.LFG(v.Sil),v.LFG(v.lqb),v.LFG(SA),v.LFG(CA))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const HE=new v.OlP("");let EA=(()=>{class r{constructor(e,i,n={}){this.router=e,this.viewportScroller=i,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof yE?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof hd&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof wE&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new wE(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){v.$Z()},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac}),r})();function vy(r,t){return{\u0275kind:r,\u0275providers:t}}function TA(r){return[{provide:e0,multi:!0,useValue:r}]}function xP(){const r=(0,v.f3M)(v.zs3);return t=>{const e=r.get(v.z2F);if(t!==e.components[0])return;const i=r.get(Mo),n=r.get(DA);1===r.get(r0)&&i.initialNavigation(),r.get(s0,null,v.XFs.Optional)?.setUpPreloading(),r.get(HE,null,v.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),n.closed||(n.next(),n.unsubscribe())}}const DA=new v.OlP("",{factory:()=>new xu.x}),r0=new v.OlP("",{providedIn:"root",factory:()=>1});const s0=new v.OlP("");function AA(r){return vy(0,[{provide:s0,useExisting:EP},{provide:SA,useExisting:r}])}const kA=new v.OlP("ROUTER_FORROOT_GUARD"),DP=[Ft,{provide:RO,useClass:In},{provide:Mo,useFactory:lm},sy,{provide:nm,useFactory:function xA(r){return r.routerState.root},deps:[Mo]},CA];function RA(){return new v.PXZ("Router",Mo)}let _A=(()=>{class r{constructor(e){}static forRoot(e,i){return{ngModule:r,providers:[DP,[],TA(e),{provide:kA,useFactory:Aj,deps:[[Mo,new v.FiY,new v.tp0]]},{provide:BE,useValue:i||{}},i?.useHash?{provide:ft,useClass:oi}:{provide:ft,useClass:Si},{provide:HE,useFactory:()=>{const r=(0,v.f3M)(Mo),t=(0,v.f3M)(gv),e=(0,v.f3M)(BE);return e.scrollOffset&&t.setOffset(e.scrollOffset),new EA(r,t,e)}},i?.preloadingStrategy?AA(i.preloadingStrategy).\u0275providers:[],{provide:v.PXZ,multi:!0,useFactory:RA},i?.initialNavigation?kP(i):[],[{provide:OA,useFactory:xP},{provide:v.tb,multi:!0,useExisting:OA}]]}}static forChild(e){return{ngModule:r,providers:[TA(e)]}}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(kA,8))},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[ud]}),r})();function Aj(r){return"guarded"}function kP(r){return["disabled"===r.initialNavigation?vy(3,[{provide:v.ip1,multi:!0,useFactory:()=>{const t=(0,v.f3M)(Mo);return()=>{t.setUpLocationChangeListener()}}},{provide:r0,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?vy(2,[{provide:r0,useValue:0},{provide:v.ip1,multi:!0,deps:[v.zs3],useFactory:t=>{const e=t.get(Ce,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const o=t.get(Mo),a=t.get(DA);(function n(s){t.get(Mo).events.pipe(Nh(a=>a instanceof hd||a instanceof dh||a instanceof QI),(0,$i.U)(a=>a instanceof hd||a instanceof dh&&(0===a.code||1===a.code)&&null),Nh(a=>null!==a),FC(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?Gi(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const OA=new v.OlP("");let Rj=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-home-page"]],decls:82,vars:0,consts:[[1,"d-flex","justify-content-center","container-fluid"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-success"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],[1,"container"],[1,"main-body"],[1,"features"],[1,"card-deck"],[1,"card"],["src","https://i.pinimg.com/474x/f0/db/e6/f0dbe691e4eaeb926b622a7cd9abfda2.jpg","alt","...","height","65.3%",1,"card-img-top"],[1,"text-muted"],["src","https://i.pinimg.com/474x/b2/02/a5/b202a5b11b6672344ba225a8c5889dc7.jpg","alt","...","height","65.3%",1,"card-img-top"],["src","https://assets-global.website-files.com/625d2a5ca1316da92392fd13/627085282b05ab11b9cfcdd2_Marco%20Lavalle.jpeg","loading","lazy","id","circle"],["src","https://i.pinimg.com/474x/fa/b1/74/fab174dc39b51001b31600ab52555c78.jpg","alt","... ","height","65.3%",1,"card-img-top"],[1,"container-b"],[1,"row"],[1,"card","card-circle"],[1,"card-icon"],[1,"fas","fa-apple-alt"],[1,"card-b"],["routerLink","Ingredients","href","#",1,"btn","btn-primary"],[1,"fas","fa-cookie"],["routerLink","Recipes","href","#",1,"btn","btn-primary"],[1,"fas","fa-carrot"],["routerLink","Meals","href","#",1,"btn","btn-primary"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"h1"),v._uU(2,"Welcome to Nutrition Genius"),v.qZA()(),v.TgZ(3,"div",1)(4,"div",2),v._uU(5," New to Nutrition Genius? Find Out What's New! "),v.qZA(),v.TgZ(6,"div",3)(7,"h5",4),v._uU(8,"Recipes Made Uniquely For You"),v.qZA(),v.TgZ(9,"p",5),v._uU(10,"Nutrition Genius formulates new recipes based on ingredients found in your home. Click Login / Sign up to get started on your nutrition journey! "),v.qZA(),v.TgZ(11,"button",6)(12,"a",7),v._uU(13,"Login"),v.qZA()()()(),v.TgZ(14,"div",8)(15,"div",9)(16,"h2",10),v._uU(17,"This Weeks Features:"),v.qZA(),v.TgZ(18,"div",11)(19,"div",12),v._UZ(20,"img",13),v.TgZ(21,"div",3)(22,"h5",4),v._uU(23,"Chicken Fajita Bowl"),v.qZA(),v.TgZ(24,"p",5),v._uU(25,"This healthy alternative to fast-food bowls, makes you never want to eat out again! Give this recipe and many other recipes a try when you sign up today!"),v.qZA(),v.TgZ(26,"p",5)(27,"small",14),v._uU(28,"Last updated 3 mins ago"),v.qZA()()()(),v.TgZ(29,"div",12),v._UZ(30,"img",15),v.TgZ(31,"div",3)(32,"h5",4),v._uU(33,"Salmon and Rice Bowl"),v.qZA(),v.TgZ(34,"p",5),v._UZ(35,"img",16),v._uU(36," Feeling like you want something fresh but tastes just so good? Try this recipe and more when you sign up to get personalized meals and recipes just for you!"),v.qZA(),v.TgZ(37,"p",5)(38,"small",14),v._uU(39,"Last updated 3 mins ago"),v.qZA()()()(),v.TgZ(40,"div",12),v._UZ(41,"img",17),v.TgZ(42,"div",3)(43,"h5",4),v._uU(44,"Meatball Chowmein"),v.qZA(),v.TgZ(45,"p",5),v._uU(46,"Looking for something filling and unique? Over 30,000 users just like you have favorited and tried this recipe. Sign up today to get started!"),v.qZA(),v.TgZ(47,"p",5)(48,"small",14),v._uU(49,"Last updated 3 mins ago"),v.qZA()()()()(),v.TgZ(50,"div",18)(51,"div",19)(52,"div",20)(53,"div",21),v._UZ(54,"i",22),v.qZA(),v.TgZ(55,"div",23)(56,"h5",4),v._uU(57,"Ingredients"),v.qZA(),v.TgZ(58,"p",5),v._uU(59,"Add any inhgredients to generate what meals are available"),v.qZA(),v.TgZ(60,"a",24),v._uU(61,"Add me"),v.qZA()()(),v.TgZ(62,"div",20)(63,"div",21),v._UZ(64,"em",25),v.qZA(),v.TgZ(65,"div",23)(66,"h5",4),v._uU(67,"Recipes"),v.qZA(),v.TgZ(68,"p",5),v._uU(69,"Check out some quick and easy recipes to make for the week"),v.qZA(),v.TgZ(70,"a",26),v._uU(71,"Eat me"),v.qZA()()(),v.TgZ(72,"div",20)(73,"div",21),v._UZ(74,"i",27),v.qZA(),v.TgZ(75,"div",23)(76,"h5",4),v._uU(77,"Meals"),v.qZA(),v.TgZ(78,"p",5),v._uU(79,"Look at feautured meals for the week"),v.qZA(),v.TgZ(80,"a",28),v._uU(81,"See me"),v.qZA()()()()()()())},dependencies:[Vh],styles:["HEAD[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#556b2fa0}.heading[_ngcontent-%COMP%], .slogan[_ngcontent-%COMP%]{text-align:center}.features[_ngcontent-%COMP%]{text-align:center;font-weight:lighter;margin:20px}.card-deck[_ngcontent-%COMP%]{display:flex;height:50%}#circle[_ngcontent-%COMP%]{float:left;width:80px;height:80px;margin:20px;shape-outside:circle();clip-path:circle();background:transparent;align-items:left}.card-header[_ngcontent-%COMP%]{background-color:#556b2fb1}.card-body[_ngcontent-%COMP%]{background-color:#f0f8ff}.card-b[_ngcontent-%COMP%]{background-color:transparent}.card-circle[_ngcontent-%COMP%]{text-align:center;margin-top:50px;background:rgba(85,107,47,.626);border:10px solid transparent;color:#000;font-family:Montserrat;padding:70px;border-radius:50%}.card-circle[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600;font-size:26px}.card-circle[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-weight:400}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;display:block}.card-circle[_ngcontent-%COMP%]:nth-child(2){background:rgba(40,51,22,.626)}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{Font-family:Montserrat;background:transparent;border:1px solid #fff;text-transform:uppercase;padding:5px 30px;border-radius:0;font-weight:600}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]{transition:all ease-in-out .2s}.card-circle[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background:#ebf2f3;color:#000;border:1px solid transparent}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.card-circle[_ngcontent-%COMP%]:hover{border:10px solid #bff2ff}.card-circle[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{text-shadow:0px -1px 10px #00A8CC;transform:scale(1.2)rotate(20deg)}@media only screen and (min-width: 1200px){.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-40px;z-index:0}.card-circle[_ngcontent-%COMP%]{width:410px;height:410px}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;box-shadow:1px 2px 20px 8px #f1ebeb1f;transform:scale(1.2);z-index:1}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:20px}}@media only screen and (min-width: 991px) and (max-width: 1200px){.card-circle[_ngcontent-%COMP%]{width:340px;height:340px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:-25px}.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-50px;z-index:0}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;z-index:1}}.container-b[_ngcontent-%COMP%]{padding:70px;position:relative}"]}),r})();var by=te(552),ne=te(2090),$a=te(9681),Hh=te(1877),Du=te(4859);let PA=(()=>{class r{signup(e,i){const n=(0,by.n)();(0,by.a5)(n,e,i).then(s=>{(0,by.v)(n,a=>{})}).catch(s=>{})}signin(e,i){const n=(0,by.n)();(0,by.a6)(n,e,i).then(s=>{(0,by.v)(n,a=>{})}).catch(s=>{const a=s.message;console.log(s.code),console.log(a)})}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),_P=(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authService.signin(e.value.email,e.value.password),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(PA))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-profile-page"]],decls:39,vars:1,consts:[[1,"card",2,"max-width","900px"],[1,"row","g-0"],[1,"col-md-4"],["src","\\assets\\images\\NutritionLogInBackground.jpg","alt","...",1,"img-fluid","rounded-start"],[3,"ngSubmit"],["authForm","ngForm"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"mb-3","row"],["for","inputEmail",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","email","id","inputEmail","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["for","inputPassword",1,"col-sm-2","col-form-label"],["type","password","id","inputPassword","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],["type","submit",1,"btn","btn-outline-success",3,"disabled","click"],["routerLink","../Main","href","#",1,"nav-item","nav-link","active"],[1,"forgot-password"],[1,"card-text",2,"transform","rotate(0)"],["href","#",1,"text-success","stretched-link"],[1,"create-account"],["routerLink","../SignUpPage","href","#",1,"text-success","stretched-link"]],template:function(e,i){if(1&e){const n=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"div",2),v._UZ(3,"img",3),v.qZA(),v.TgZ(4,"form",4,5),v.NdJ("ngSubmit",function(){v.CHM(n);const o=v.MAs(5);return v.KtG(i.onSubmit(o))}),v.TgZ(6,"div",6)(7,"div",7)(8,"h5",8),v._uU(9,"Welcome Back, Please Login To Get Started"),v.qZA(),v.TgZ(10,"div",9)(11,"label",10),v._uU(12,"Email"),v.qZA(),v.TgZ(13,"div",11),v._UZ(14,"input",12),v.qZA()(),v.TgZ(15,"div",9)(16,"label",13),v._uU(17,"Password"),v.qZA(),v.TgZ(18,"div",11),v._UZ(19,"input",14),v.qZA()(),v.TgZ(20,"button",15),v.NdJ("click",function(){return i.buttonClicked="../Main"}),v.TgZ(21,"a",16),v._uU(22,"Login"),v.qZA()(),v.TgZ(23,"div",17)(24,"p",18),v._uU(25," Forgot your Username / Password? "),v.TgZ(26,"a",19),v._uU(27,"Click Here"),v.qZA(),v._uU(28," to Get Back In"),v._UZ(29,"code"),v._uU(30,". "),v.qZA()(),v.TgZ(31,"div",20)(32,"p",18),v._uU(33," Don't Have an Account? "),v.TgZ(34,"a",21),v._uU(35,"Click Here"),v.qZA(),v._uU(36," to Get Started"),v._UZ(37,"code"),v._uU(38,". "),v.qZA()()()()()()()}if(2&e){const n=v.MAs(5);v.xp6(20),v.Q6J("disabled",!n.valid)}},dependencies:[Vh,TC,wf,ap],styles:[".card[_ngcontent-%COMP%]{margin:50px auto;float:none}.inputEmail[_ngcontent-%COMP%]{margin:200px}.card-body[_ngcontent-%COMP%]{margin-top:100px;text-align:center}.create-account[_ngcontent-%COMP%]{margin:10px auto}"]}),r})(),MP=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-about-us"]],decls:38,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6"],[1,"title"],[1,"card","text-white"],["src","https://i.pinimg.com/originals/de/ce/46/dece46917eb2d9ed453a9d3265837665.jpg",1,"card-img"],[1,"card-img-overlay"],[1,"card-title"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v._uU(4,"About Us"),v.qZA(),v.TgZ(5,"h1"),v._uU(6," Who We Are:"),v.qZA(),v.TgZ(7,"p"),v._uU(8," Nutrition genius serves as a database where we help our users achieve their nutrition goals. We were founded in 2022 in a small town named Morgantown. Our team consists of 6 individual who all play a big role on helping this site run. "),v.qZA(),v.TgZ(9,"h1"),v._uU(10," Our Mission:"),v.qZA(),v.TgZ(11,"p"),v._uU(12," Eating habits are defined as \u201cconscious, collective, and repetitive behaviors, which lead people to select, consume, and use certain foods or diets, in response to social and cultural influences\u201d -CDC Fundamentally, mindful eating involves: "),v.qZA(),v.TgZ(13,"p"),v._uU(14,"-eating slowly and without distraction"),v.qZA(),v.TgZ(15,"p"),v._uU(16,"- listening to physical hunger cues and eating only until you\u2019re full"),v.qZA(),v.TgZ(17,"p"),v._uU(18,"- distinguishing between true hunger and non-hunger triggers for eating"),v.qZA(),v.TgZ(19,"p"),v._uU(20,"- engaging your senses by noticing colors, smells, sounds, textures, and flavors"),v.qZA(),v.TgZ(21,"p"),v._uU(22,"- learning to cope with guilt and anxiety about food"),v.qZA(),v.TgZ(23,"p"),v._uU(24,"- eating to maintain overall health and well-being"),v.qZA(),v.TgZ(25,"p"),v._uU(26,"- noticing the effects food has on your feelings and figure"),v.qZA(),v.TgZ(27,"p"),v._uU(28,"- appreciating your food "),v.qZA(),v.TgZ(29,"h1"),v._uU(30," What We Do:"),v.qZA(),v.TgZ(31,"p"),v._uU(32," We have multiple tools on our website in order to achieve your nutritional goals. Our recipe and ingredients components allows you to generate your meals and also demonstrates each nutritional values. Our users can also set nutritional goals and track your goals. "),v.qZA()(),v.TgZ(33,"div",2)(34,"div",4),v._UZ(35,"img",5),v.TgZ(36,"div",6),v._UZ(37,"h5",7),v.qZA()()()()())},styles:[".title[_ngcontent-%COMP%]{font-size:120px;font-weight:700;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}p[_ngcontent-%COMP%]{align-items:right}h1[_ngcontent-%COMP%]{font:500;font-size:medium}"]}),r})();var Fi=te(655),Cy="ej2_instances",OP=0;function qE(r,t){var e=t;return e.unshift(void 0),new(Function.prototype.bind.apply(r,e))}function re(r,t){for(var e=t,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<i.length&&!Jt(e);n++)e=e[i[n]];return e}function ui(r,t,e){var o,l,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=n,a=i.length;for(o=0;o<a;o++)l=i[o],o+1===a?s[l]=void 0===t?{}:t:f(s[l])&&(s[l]={}),s=s[l];return n}function Oo(r,t){delete r[t]}var o0=typeof window<"u"?window:{};function Iu(r){return!f(r)&&r.constructor==={}.constructor}function Il(r,t){return r[t]}function Qs(r,t){if(!f(t))for(var e=r,i=t,s="deepMerge",o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];f(e[s])||-1===e[s].indexOf(l)||!Iu(i[l])&&!Array.isArray(i[l])?e[l]=i[l]:de(e[l],e[l],i[l],!0)}}function de(r,t,e,i){var n=r&&"object"==typeof r?r:{},s=arguments.length;i&&(s-=1);for(var o=function(h){if(!a[h])return"continue";var u=a[h];Object.keys(u).forEach(function(p){var C,m=n[p],y=u[p],S=Array.isArray(y)&&Array.isArray(m)&&y.length!==m.length,T=!ci()||!(m instanceof Event||S);i&&T&&(Iu(y)||Array.isArray(y))?Iu(y)?(C=m||{},Array.isArray(C)&&C.hasOwnProperty("isComplexArray")?de(C,{},y,i):n[p]=de(C,{},y,i)):(C=ci()?m&&Object.keys(y).length:m||[],n[p]=de([],C,y,C&&C.length||y&&y.length)):n[p]=y})},a=arguments,l=1;l<s;l++)o(l);return n}function f(r){return null==r}function Jt(r){return typeof r>"u"}function Sn(r){return r+"_"+OP++}function UE(r,t){var e;return function(){var i=this,n=arguments,s=function(){return e=null,r.apply(i,n)};clearTimeout(e),e=setTimeout(s,t)}}function WE(r,t){return r===t||!(r===document||!r)&&WE(r.parentNode,t)}function um(r){try{throw new Error(r)}catch(t){throw t.message+"\n"+t.stack}}function ut(r){var t=r+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function ci(){return false}function LP(r){return Node,r}function Zo(r,t){var e="string"==typeof r?document.querySelector(r):r;if(e[Cy])for(var i=0,n=e[Cy];i<n.length;i++){var s=n[i];if(s instanceof t)return s}return null}var zh,r,t,FP={latn:{_digits:"0123456789",_type:"numeric"}},LA={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},NP=[0,1,2,3,4,5,6,7,8,9],Xs=function(){function r(){}return r.getMainObject=function(t,e){return re("main."+e,t)},r.getNumberingSystem=function(t){return re("supplemental.numberingSystems",t)||this.numberingSystems},r.reverseObject=function(t,e){for(var n={},s=0,o=e||Object.keys(t);s<o.length;s++){var a=o[s];n.hasOwnProperty(t[a])||(n[t[a]]=a)}return n},r.getSymbolRegex=function(t){var e=t.map(function(i){return i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},r.getSymbolMatch=function(t){for(var i={},n=0,s=Object.keys(LA);n<s.length;n++){var o=s[n];i[t[o]]=LA[o]}return i},r.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[n]+"|":t[n];return i},r.convertValueParts=function(t,e,i){return t.replace(e,function(n){return i[n]})},r.getDefaultNumberingSystem=function(t){var e={};return e.obj=re("numbers",t),e.nSystem=re("defaultNumberingSystem",e.obj),e},r.getCurrentNumericOptions=function(t,e,i,n){var s={},o=this.getDefaultNumberingSystem(t);if(!Jt(o.nSystem)||n){var a=n?re("obj.mapperDigits",o):re(o.nSystem+"._digits",e);Jt(a)||(s.numericPair=this.reverseObject(a,NP),s.numberParseRegex=new RegExp(this.constructRegex(a),"g"),s.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(s.numericRegex=a[0]+"-"+a[9],s.symbolNumberSystem=re(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=o.nSystem))}return s},r.getNumberMapper=function(t,e,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(t);if(!Jt(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=re("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=re("timeSeparator",n.numberSymbols);var o=re(s.nSystem+"._digits",e);if(!Jt(o))for(var a=0,l=NP;a<l.length;a++){var h=l[a];n.mapper[h]=o[h]}}return n},r.nPair="numericPair",r.nRegex="numericRegex",r.numberingSystems=FP,r}(),Oj={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};r=zh||(zh={}),t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],r.getHijriDate=function e(n){var s=n.getDate(),o=n.getMonth(),a=n.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);var u=Math.floor(h/100),p=u-Math.floor(u/4)-2,m=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+s-p-1524,y=m+(p=(u=Math.floor((m-1867216.25)/36524.25))-Math.floor(u/4)+1)+1524,C=Math.floor((y-122.1)/365.25),S=Math.floor(365.25*C),T=Math.floor((y-S)/30.6001);s=y-S-Math.floor(30.6001*T),(o=Math.floor((y-S)/20.6001))>13&&(C+=1,o-=12),o-=1,a=C-4716;var R=m-24e5,P=10631/30,O=m-1948084,N=Math.floor(O/10631);O-=10631*N;var z=Math.floor((O-.1335)/P),U=30*N+z;O-=Math.floor(z*P+.1335);var ae=Math.floor((O+28.5001)/29.5);13===ae&&(ae=12);for(var me=O-Math.floor(29.5001*ae-29),Te=0;Te<t.length&&!(t[Te]>R);Te++);var Oe=Te+16260,oe=Math.floor((Oe-1)/12),Ie=oe+1,De=Oe-12*oe,fe=R-t[Te-1]+1;return(fe+"").length>2&&(fe=me,De=ae,Ie=U),{year:Ie,month:De,date:fe}},r.toGregorian=function i(n,s,o){var S=Math.floor(o+t[12*(n-1)+1+(s-1)-16260-1]-1+24e5+.5),T=Math.floor((S-1867216.25)/36524.25),R=1524+(T=S+1+T-Math.floor(T/4)),P=Math.floor((R-122.1)/365.25),O=Math.floor(365.25*P),N=Math.floor((R-O)/30.6001),z=R-O-Math.floor(30.6001*N),U=N-(N>13.5?13:1),ae=P-(U>2.5?4716:4715);return ae<=0&&U--,new Date(ae+"/"+U+"/"+z)};var a0=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,BP="stand-alone",VP=["sun","mon","tue","wed","thu","fri","sat"],HP={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},zP={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},l0=function(){function r(){}return r.dateFormat=function(t,e,i){var n=this,s=Qi.getDependables(i,t,e.calendar),a=(re("parserObject.numbers",s),s.dateObject),l={isIslamic:Qi.islamicRegex.test(e.calendar)},h=e.format||Qi.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,"");if(l.dateSeperator=Qi.getDateSeparator(s.dateObject),Jt(h))um("Format options or type given must be invalid");else{h=Qi.ConvertDateToWeekFormat(h),l.pattern=h,l.numMapper=Xs.getNumberMapper(s.parserObject,Xs.getNumberingSystem(i));for(var p=0,m=h.match(a0)||[];p<m.length;p++){var y=m[p],C=y.length,S=y[0];switch("K"===S&&(S="h"),S){case"E":case"c":l.weekday=s.dateObject[Qi.days][BP][Qi.monthIndex[C]];break;case"M":case"L":l.month=s.dateObject[Qi.month][BP][Qi.monthIndex[C]];break;case"a":l.designator=re("dayPeriods.format.wide",a);break;case"G":l.era=re("eras."+(C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow"),s.dateObject);break;case"z":l.timeZone=re("dates.timeZoneNames",s.parserObject)}}}return function(R){return isNaN(R.getDate())?null:n.intDateFormatter(R,l)}},r.intDateFormatter=function(t,e){for(var n="",s=e.pattern.match(Qi.dateParseRegex),o=this.getCurrentDateValue(t,e.isIslamic),a=0,l=s;a<l.length;a++){var h=l[a],u=h.length,p=h[0];"K"===p&&(p="h");var m=void 0,y="",C=void 0,S=void 0,T="";switch(p){case"M":case"L":m=o.month,u>2?n+=e.month[m]:C=!0;break;case"E":case"c":n+=e.weekday[VP[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(C=!0,"d"===p)m=o.date;else if("f"===p){C=!1,S=!0;var R=(y=(y=t[HP[p]]().toString()).substring(0,u)).length;if(u!==R){if(u>3)continue;for(var P=0;P<u-R;P++)y="0"+y.toString()}T+=y}else m=t[HP[p]]();"h"===p&&(m=m%12||12);break;case"y":S=!0,T+=o.year,2===u&&(T=T.substr(T.length-2));break;case"a":var O=t.getHours()<12?"am":"pm";n+=e.designator[O];break;case"G":var N=t.getFullYear()<0?0:1,z=e.era[N];f(z)&&(z=e.era[N?0:1]),n+=z||"";break;case"'":n+="''"===h?"'":h.replace(/'/g,"");break;case"z":var U=t.getTimezoneOffset(),ae=u<4?"+H;-H":e.timeZone.hourFormat;ae=ae.replace(/:/g,e.numMapper.timeSeparator),0===U?n+=e.timeZone.gmtZeroFormat:(S=!0,T=this.getTimeZoneValue(U,ae)),T=e.timeZone.gmtFormat.replace(/\{0\}/,T);break;case":":n+=e.numMapper.numberSymbols.timeSeparator;break;case"/":n+=e.dateSeperator;break;case"W":C=!0,m=Qi.getWeekOfYear(t);break;default:n+=h}C&&(S=!0,T=this.checkTwodigitNumber(m,u)),S&&(n+=Xs.convertValueParts(T,Qi.latnParseRegex,e.numMapper.mapper))}return n},r.getCurrentDateValue=function(t,e){return e?zh.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},r.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},r.getTimeZoneValue=function(t,e){var i=this,s=e.split(";")[t>0?1:0],o=Math.abs(t);return s.replace(/HH?|mm/g,function(a){var l=a.length,h=-1!==a.indexOf("H");return i.checkTwodigitNumber(Math.floor(h?o/60:o%60),l)})},r}(),qP={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},cm=["infinity","nan","group","decimal","exponential"],GE=function(){function r(){}return r.numberFormatter=function(t,e,i){var l,n=this,s=de({},e),o={},a={},h=Qi.getDependables(i,t,"",!0);a.numberMapper=Xs.getNumberMapper(h.parserObject,Xs.getNumberingSystem(i),!0),a.currencySymbol=Qi.getCurrencySymbol(h.numericObject,s.currency||c0,e.altSymbol),a.percentSymbol=a.numberMapper.numberSymbols.percentSign,a.minusSymbol=a.numberMapper.numberSymbols.minusSign;var p=a.numberMapper.numberSymbols;if(e.format&&!Qi.formatRegex.test(e.format))o=Qi.customFormat(e.format,a,h.numericObject);else{de(s,Qi.getProperNumericSkeleton(e.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,l=Qi.getSymbolPattern(s.type,a.numberMapper.numberSystem,h.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),Jt(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),Jt(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(l=l.replace(/\u00A4/g,Qi.defaultCurrency));var m=l.split(";");if(o.nData=Qi.getFormatData(m[1]||"-"+m[0],!0,a.currencySymbol),o.pData=Qi.getFormatData(m[0],!1,a.currencySymbol),s.useGrouping&&(s.groupSeparator=p[cm[2]],s.groupData=this.getGroupingDetails(m[0])),Jt(s.minimumFractionDigits)&&(s.minimumFractionDigits=o.nData.minimumFraction),Jt(s.maximumFractionDigits)){var C=o.nData.maximumFraction;s.maximumFractionDigits=Jt(C)&&s.isPercent?0:C}var S=s.minimumFractionDigits,T=s.maximumFractionDigits;!Jt(S)&&!Jt(T)&&S>T&&(s.maximumFractionDigits=S)}return de(o.nData,s),de(o.pData,s),function(R){return isNaN(R)?p[cm[1]]:isFinite(R)?n.intNumberFormatter(R,o,a):p[cm[0]]}},r.getGroupingDetails=function(t){var e={},i=t.match(Qi.negativeDataRegex);if(i&&i[4]){var n=i[4],s=n.lastIndexOf(",");if(-1!==s){var o=n.split(".")[0];e.primary=o.length-s-1;var a=n.lastIndexOf(",",s-1);-1!==a&&(e.secondary=s-1-a)}}return e},r.checkValueRange=function(t,e,i,n){var s=n?"f":"s",o=0,a=qP["l"+s],l=qP["m"+s];if(Jt(t)||(this.checkRange(t,a,n),o++),Jt(e)||(this.checkRange(e,l,n),o++),2===o){if(!(t<e))return!0;um(l+"specified must be less than the"+a)}else i&&1===o&&um("Both"+l+"and"+l+"must be present");return!1},r.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&um(e+"value must be within the range"+n[0]+"to"+n[1])},r.intNumberFormatter=function(t,e,i){var n;if(!Jt(e.nData.type)){t<0?(t*=-1,n=e.nData):n=0===t&&e.zeroData||e.pData;var s="";return n.isPercent&&(t*=100),n.groupOne?s=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits):(s=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(s=this.processMinimumIntegers(s,n.minimumIntegerDigits))),"scientific"===n.type&&(s=(s=t.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[cm[4]])),s=s.replace(".",i.numberMapper.numberSymbols[cm[3]]),n.useGrouping&&(s=this.groupNumbers(s,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[cm[3]]||".",n.groupData.secondary)),s=Xs.convertValueParts(s,Qi.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+s+n.nend}},r.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},r.groupNumbers=function(t,e,i,n,s){for(var o=!f(s)&&0!==s,a=t.split(n),l=a[0],h=l.length,u="";h>e;)u=l.slice(h-e,h)+(u.length?i+u:""),h-=e,o&&(e=s,o=!1);return a[0]=l.slice(0,h)+(u.length?i:"")+u,a.join(n)},r.processFraction=function(t,e,i){var n=(t+"").split(".")[1],s=n?n.length:0;if(e&&s<e){var o="";if(0!==s){o+=t;for(var a=0;a<e-s;a++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}return!f(i)&&(s>i||0===i)?t.toFixed(i):t+""},r.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],s=n.length;if(s<e){for(var o=0;o<e-s;o++)n="0"+n;i[0]=n}return i.join(".")},r}(),FA="stand-alone",GP=/^[0-9]*$/,NA={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},$P=function(){function r(){}return r.dateParser=function(t,e,i){var u,n=this,s=Qi.getDependables(i,t,e.calendar),o=Xs.getCurrentNumericOptions(s.parserObject,Xs.getNumberingSystem(i),!1,!1),a={},l=e.format||Qi.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,""),h="";if(Jt(l))um("Format options or type given must be invalid");else{l=Qi.ConvertDateToWeekFormat(l),a={isIslamic:Qi.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var p=l.match(Qi.dateParseRegex)||[],m=p.length,y=0,C=0,S=!1,T=o.numericRegex,R=Xs.getNumberMapper(s.parserObject,Xs.getNumberingSystem(i)),P=0;P<m;P++){var O=p[P],N=O.length,z="K"===O[0]?"h":O[0],U=void 0,ae=void 0,me=zP[z],Te=2===N?"":"?";switch(S&&(y=C,S=!1),z){case"E":case"c":var oe=Xs.reverseObject(s.dateObject[Qi.days][FA][Qi.monthIndex[N]]);h+="("+Object.keys(oe).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(ae=!0,("M"===z||"L"===z)&&N>2){a[me]=Xs.reverseObject(s.dateObject.months[FA][Qi.monthIndex[N]]),h+="("+Object.keys(a[me]).join("|")+")"}else if("f"===z){if(N>3)continue;U=!0,h+="("+T+T+"?"+T+"?)"}else U=!0,h+="("+T+T+Te+")";"h"===z&&(a.hour12=!0);break;case"W":h+="("+T+(1===N?"?":"")+T+")";break;case"y":ae=U=!0,h+=2===N?"("+T+T+")":"("+T+"{"+N+",})";break;case"a":ae=!0;var fe=re("dayPeriods.format.wide",s.dateObject);a[me]=Xs.reverseObject(fe),h+="("+Object.keys(a[me]).join("|")+")";break;case"G":ae=!0,a[me]=Xs.reverseObject(re("eras."+(N<=3?"eraAbbr":4===N?"eraNames":"eraNarrow"),s.dateObject)),h+="("+Object.keys(a[me]).join("|")+"?)";break;case"z":ae=0!==(new Date).getTimezoneOffset(),a[me]=re("dates.timeZoneNames",s.parserObject);var Se=a[me],Pe=(u=N<4)?"+H;-H":Se.hourFormat;Pe=Pe.replace(/:/g,R.timeSeparator),h+="("+this.parseTimeZoneRegx(Pe,Se,T)+")?",S=!0,C=u?6:12;break;case"'":h+="("+O.replace(/'/g,"")+")?";break;default:h+="([\\D])"}ae&&(a.evalposition[me]={isNumber:U,pos:P+1+y,hourOnly:u}),P===m-1&&!f(h)&&(a.parserRegex=new RegExp("^"+h+"$","i"))}}return function(Wt){var Kt=n.internalDateParse(Wt,a,o);if(f(Kt)||!Object.keys(Kt).length)return null;if(a.isIslamic){var ei={},yi=Kt.year,Ai=Kt.day,Ki=Kt.month,ri=yi?yi+"":"",Yn=2===ri.length;(!yi||!Ki||!Ai||Yn)&&(ei=zh.getHijriDate(new Date)),Yn&&(yi=parseInt((ei.year+"").slice(0,2)+ri,10));var es=zh.toGregorian(yi||ei.year,Ki||ei.month,Ai||ei.date);Kt.year=es.getFullYear(),Kt.month=es.getMonth()+1,Kt.day=es.getDate()}return n.getDateObject(Kt)}},r.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var s=t.year,o=t.designator,a=t.timeZone;Jt(s)||((s+"").length<=2&&(s+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(s));for(var u=0,p=["hour","minute","second","milliseconds","month","day"];u<p.length;u++){var m=p[u],y=t[m];if(Jt(y)&&"day"===m&&i.setDate(1),!Jt(y))if("month"===m){if((y-=1)<0||y>11)return new Date("invalid");var C=i.getDate();i.setDate(1),i[NA[m]](y);var S=new Date(i.getFullYear(),y+1,0).getDate();i.setDate(C<S?C:S)}else{if("day"===m){var T=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(y<1||y>T)return null}i[NA[m]](y)}}if(!Jt(o)){var R=i.getHours();"pm"===o?i.setHours(R+(12===R?0:12)):12===R&&i.setHours(0)}if(!Jt(a)){var P=a-i.getTimezoneOffset();0!==P&&i.setMinutes(i.getMinutes()+P)}return i},r.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),s={hour:0,minute:0,second:0};if(f(n))return null;for(var a=0,l=Object.keys(e.evalposition);a<l.length;a++){var h=l[a],u=e.evalposition[h],p=n[u.pos];if(u.isNumber)s[h]=this.internalNumberParser(p,i);else if("timeZone"!==h||Jt(p))p="month"!==h||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?p:p[0].toUpperCase()+p.substring(1).toLowerCase(),s[h]=e[h][p];else{var m=u.pos,y=void 0,C=n[m+1],S=!Jt(C);u.hourOnly?y=60*this.getZoneValue(S,C,n[m+4],i):(y=60*this.getZoneValue(S,C,n[m+7],i),y+=this.getZoneValue(S,n[m+4],n[m+10],i)),f(y)||(s[h]=y)}}return e.hour12&&(s.hour12=!0),s},r.internalNumberParser=function(t,e){return t=Xs.convertValueParts(t,e.numberParseRegex,e.numericPair),GP.test(t)?+t:null},r.parseTimeZoneRegx=function(t,e,i){var s,n=e.gmtFormat,o="("+i+")("+i+")";return s=t.replace("+","\\+"),(s=-1!==t.indexOf("HH")?s.replace(/HH|mm/g,"("+o+")"):s.replace(/H|m/g,"("+o+"?)")).split(";").map(function(l){return n.replace("{0}",l)}).join("|")+"|"+e.gmtZeroFormat},r.getZoneValue=function(t,e,i,n){var s=t?e:i;if(!s)return 0;var o=this.internalNumberParser(s,n);return t?-o:o},r}(),YP=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,ZP=/,/g,QP=["minusSign","infinity"],Lj=function(){function r(){}return r.numberParser=function(t,e,i){var a,n=this,s=Qi.getDependables(i,t,"",!0),o={custom:!0};Qi.formatRegex.test(e.format)||!e.format?(de(o,Qi.getProperNumericSkeleton(e.format||"N")),o.custom=!1,o.fractionDigits||e.maximumFractionDigits&&(o.maximumFractionDigits=e.maximumFractionDigits)):de(o,Qi.customFormat(e.format,null,null));var h;re("numbers",s.parserObject);if(a=Xs.getCurrentNumericOptions(s.parserObject,Xs.getNumberingSystem(i),!0,!1),o.symbolRegex=Xs.getSymbolRegex(Object.keys(a.symbolMatch)),o.infinity=a.symbolNumberSystem[QP[1]],h=Qi.getSymbolPattern(o.type,a.numberSystem,s.numericObject,o.isAccount)){var u=(h=h.replace(/\u00A4/g,Qi.defaultCurrency)).split(";");o.nData=Qi.getFormatData(u[1]||"-"+u[0],!0,""),o.pData=Qi.getFormatData(u[0],!0,"")}return function(p){return n.getParsedNumber(p,o,a)}},r.getParsedNumber=function(t,e,i){var n,s,o,a,l,h;if(-1!==t.indexOf(e.infinity))return 1/0;t=Xs.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=Xs.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var u=t.match(YP);if(f(u))return NaN;a=u[1],o=u[2];var p=u[5];return l=u[6],s=(n=e.custom?a===e.nData.nlead&&l===e.nData.nend:-1!==a.indexOf(e.nData.nlead)&&-1!==l.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,o=o.replace(ZP,""),p&&(o+=p),h=+o,("percent"===e.type||s)&&(h/=100),(e.custom||e.fractionDigits)&&(h=parseFloat(h.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,e,h,n)),n&&(h*=-1),h},r.convertMaxFracDigits=function(t,e,i,n){var s=t.split(".");return s[1]&&s[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},r}(),h0=function(){function r(t){this.ranArray=[],this.boundedEvents={},!f(t)&&(this.context=t)}return r.prototype.on=function(t,e,i,n){if(!f(e)){var s=i||this.context;if(this.notExist(t))return void(this.boundedEvents[t]=[{handler:e,context:s}]);f(n)?this.isHandlerPresent(this.boundedEvents[t],e)||this.boundedEvents[t].push({handler:e,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[t].push({handler:e,context:s,id:n}))}},r.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=re(t,this.boundedEvents);if(e){for(var s=0;s<n.length;s++)if(i){if(n[s].id===i){n.splice(s,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(e===n[s].handler){n.splice(s,1);break}}else delete this.boundedEvents[t]}},r.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var o=re(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,e,i,n,0);for(var a=0,l=o;a<l.length;a++){var h=l[a];h.handler.call(h.context,e)}i&&i.call(this,e)}},r.prototype.blazorCallback=function(t,e,i,n,s){var o=this,a=s===t.length-1;if(s<t.length){var l=t[s],h=l.handler.call(l.context,e);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(u){if(u="string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u,de(e,e,u,!0),!i||!a)return o.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}).catch(function(u){n&&n.call(l.context,"string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u)})}else{if(!i||!a)return this.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}}},r.prototype.dateReviver=function(t,e){return ci&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},r.prototype.isJson=function(t){try{JSON.parse(t)}catch{return!1}return!0},r.prototype.destroy=function(){this.boundedEvents=this.context=void 0},r.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},r.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++)if(n[i].handler===e)return!0;return!1},r}(),dm=new h0,Qo={},u0="en-US",c0="USD",VA=["numericObject","dateObject"],Rr=function(){function r(t){t&&(this.culture=t)}return r.prototype.getDateFormat=function(t){return l0.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},Qo)},r.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=c0),GE.numberFormatter(this.getCulture(),t||{},Qo)},r.prototype.getDateParser=function(t){return $P.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},Qo)},r.prototype.getNumberParser=function(t){return Lj.numberParser(this.getCulture(),t||{format:"N"},Qo)},r.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},r.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},r.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},r.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},r.prototype.getDatePattern=function(t,e){return Qi.getActualDateTimeFormat(this.getCulture(),t,Qo,e)},r.prototype.getNumberPattern=function(t,e){return Qi.getActualNumberFormat(this.getCulture(),t,Qo,e)},r.prototype.getFirstDayOfWeek=function(){return Qi.getWeekData(this.getCulture(),Qo)},r.prototype.getCulture=function(){return this.culture||u0},r}();function d0(r,t){var e=Qi.getDependables(Qo,r,"",!0)[VA[0]],i=Qi.getDependables(Qo,r,"")[VA[1]],n=re("defaultNumberingSystem",e),s=re("symbols-numberSystem-"+n,e),o=Qi.getSymbolPattern(t||"decimal",n,e,!1);return de(s,Qi.getFormatData(o,!0,"",!0),{dateSeparator:Qi.getDateSeparator(i)})}function vp(r){return Qi.getDependables(Qo,"",r,!1)[VA[1]]}var Qi,XP={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(r){r.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;r.defaultCurrency="$";var e=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r.dateConverterMapper=/dddd|ddd/gi,r.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};r.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,r.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,r.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(fe,_e,je,Se,Pe){var Ve,Wt=je||"date";if(Pe)Ve=m({skeleton:fe},Pe).format||m({skeleton:"d"},"en-US").format;else{if(-1!==r.basicPatterns.indexOf(fe)){if(Ve=re(Wt+"Formats."+fe,_e),"dateTime"===Wt){var Kt=re("dateFormats."+fe,_e),ei=re("timeFormats."+fe,_e);Ve=Ve.replace("{1}",Kt).replace("{0}",ei)}}else Ve=re("dateTimeFormats.availableFormats."+fe,_e);Jt(Ve)&&"yMd"===fe&&(Ve="M/d/y")}return Ve}function h(fe,_e,je,Se){var Pe={},Ve=je||"gregorian";(Pe.parserObject=Xs.getMainObject(fe,_e)||r.defaultObject,Se)?Pe.numericObject=re("numbers",Pe.parserObject):Pe.dateObject=re("dates.calendars."+Ve,Pe.parserObject);return Pe}function u(fe,_e,je,Se){return re(fe+"Formats-numberSystem-"+_e+(Se?".accounting":".standard"),je)||(Se?re(fe+"Formats-numberSystem-"+_e+".standard",je):"")}function p(fe){fe.match(r.dateConverterMapper);return fe}function m(fe,_e){var je=fe.format||fe.skeleton,Se=re((_e||"en-US")+"."+je,XP);return Se||(Se=re("en-US."+je,XP)),Se&&(Se=p(Se),fe.format=Se.replace(/tt/,"a")),fe}function y(fe){var _e=fe.match(r.formatRegex),je={},Se=_e[1].toUpperCase();return je.isAccount="A"===Se,je.type=r.patternMatcher[Se],fe.length>1&&(je.fractionDigits=parseInt(_e[2],10)),je}function C(fe,_e,je,Se){var Pe=Se?{}:{nlead:"",nend:""},Ve=fe.match(r.customRegex);if(Ve){Se||(Pe.nlead=S(Ve[1],je),Pe.nend=S(Ve[10],je),Pe.groupPattern=Ve[4]);var Wt=Ve[7];if(Wt&&_e){var Kt=Wt.match(t);Pe.minimumFraction=f(Kt)?0:Kt.length,Pe.maximumFraction=Wt.length-1}}return Pe}function S(fe,_e){return fe?fe.replace(r.defaultCurrency,_e):""}function T(fe,_e,je){return re("currencies."+_e+(je?"."+je:".symbol"),fe)||re("currencies."+_e+".symbol-alt-narrow",fe)||"$"}function P(fe,_e,je){var Se={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},Pe=fe.match(r.customRegex);if(f(Pe)||""===Pe[5]&&"N/A"!==fe)return Se.type=void 0,Se;Se.nlead=Pe[1],Se.nend=Pe[10];var Ve=Pe[6],Wt=!!Ve.match(/\ $/g),Kt=-1!==Ve.replace(/\ $/g,"").indexOf(" ");Se.useGrouping=-1!==Ve.indexOf(",")||Kt,Ve=Ve.replace(/,/g,"");var ei=Pe[7];if(-1!==Ve.indexOf("0")&&(Se.minimumIntegerDigits=Ve.length-Ve.indexOf("0")),f(ei)||(Se.minimumFractionDigits=ei.lastIndexOf("0"),Se.maximumFractionDigits=ei.lastIndexOf("#"),-1===Se.minimumFractionDigits&&(Se.minimumFractionDigits=0),(-1===Se.maximumFractionDigits||Se.maximumFractionDigits<Se.minimumFractionDigits)&&(Se.maximumFractionDigits=Se.minimumFractionDigits)),f(_e)?de(Se,O([Se.nlead,Se.nend],"%","%")):(de(Se,O([Se.nlead,Se.nend],"$",_e.currencySymbol)),Se.isCurrency||de(Se,O([Se.nlead,Se.nend],"%",_e.percentSymbol))),!f(je)){var yi=u(Se.type,_e.numberMapper.numberSystem,je,!1);Se.useGrouping&&(Se.groupSeparator=Kt?" ":_e.numberMapper.numberSymbols[e[2]],Se.groupData=GE.getGroupingDetails(yi.split(";")[0])),Se.nlead=Se.nlead.replace(/'/g,""),Se.nend=Wt?" "+Se.nend.replace(/'/g,""):Se.nend.replace(/'/g,"")}return Se}function O(fe,_e,je){for(var Se={nlead:fe[0],nend:fe[1]},Pe=0;Pe<2;Pe++){var Ve=fe[Pe],Wt=Ve.indexOf(_e);if(-1!==Wt&&(Wt<Ve.indexOf("'")||Wt>Ve.lastIndexOf("'"))){Se[a[Pe]]=Ve.substr(0,Wt)+je+Ve.substr(Wt+1),Se[a[_e]]=!0,Se.type=Se.isCurrency?"currency":"percent";break}}return Se}function me(fe,_e,je){fe+=".";for(var Se=0;Se<_e;Se++)fe+="0";if(_e<je)for(var Pe=je-_e,Ve=0;Ve<Pe;Ve++)fe+="#";return fe}function Te(fe,_e){for(var je=fe.split("."),Se="",Pe=0;Pe<_e;Pe++)Se+="0";return je[1]?Se+"."+je[1]:Se}function Oe(fe){var _e=fe.split("."),je=_e[0],Se=3-je.length%3;fe="";for(var Ve=(je=(Se&&1===Se?"#":2===Se?"##":"")+je).length-1;Ve>0;Ve-=3)fe=","+je[Ve-2]+je[Ve-1]+je[Ve]+fe;return fe=fe.slice(1),_e[1]?fe+"."+_e[1]:fe}r.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,r.basicPatterns=["short","medium","long","full"],r.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},r.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},r.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},r.month="months",r.days="days",r.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},r.getResultantPattern=l,r.getDependables=h,r.getSymbolPattern=u,r.ConvertDateToWeekFormat=p,r.compareBlazorDateFormats=m,r.getProperNumericSkeleton=y,r.getFormatData=C,r.changeCurrencySymbol=S,r.getCurrencySymbol=T,r.customFormat=function R(fe,_e,je){for(var Se={},Pe=fe.split(";"),Ve=["pData","nData","zeroData"],Wt=0;Wt<Pe.length;Wt++)Se[Ve[Wt]]=P(Pe[Wt],_e,je);return f(Se.nData)&&(Se.nData=de({},Se.pData),Se.nData.nlead=f(_e)?"-"+Se.nData.nlead:_e.minusSymbol+Se.nData.nlead),Se},r.customNumberFormat=P,r.isCurrencyPercent=O,r.getDateSeparator=function N(fe){var _e=(re("dateFormats.short",fe)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return _e?_e[1]:"/"},r.getActualDateTimeFormat=function z(fe,_e,je,Se){var Pe=h(je,fe,_e.calendar),Ve=_e.format||l(_e.skeleton,Pe.dateObject,_e.type);if(Se){if(-1!==(Ve=Ve.replace(i,function(ri){return n[ri]})).indexOf("z")){var Wt=Ve.match(/z/g).length,Kt=void 0,ei={timeZone:{}};ei.numMapper=Xs.getNumberMapper(Pe.parserObject,Xs.getNumberingSystem(je)),ei.timeZone=re("dates.timeZoneNames",Pe.parserObject);var Ai=(new Date).getTimezoneOffset(),Ki=Wt<4?"+H;-H":ei.timeZone.hourFormat;Ki=Ki.replace(/:/g,ei.numMapper.timeSeparator),0===Ai?Kt=ei.timeZone.gmtZeroFormat:(Kt=l0.getTimeZoneValue(Ai,Ki),Kt=ei.timeZone.gmtFormat.replace(/\{0\}/,Kt)),Ve=Ve.replace(/[z]+/,'"'+Kt+'"')}Ve=Ve.replace(/ $/,"")}return Ve},r.getActualNumberFormat=function ae(fe,_e,je,Se){var Kt,ce,Pe=h(je,fe,"",!0),Ve={custom:!0},ei={},yi=(_e.format||"").match(r.currencyFormatRegex),Ki=(r.formatRegex.test(_e.format)&&y(_e.format||"N"),{});if(yi){Ki.numberMapper=Xs.getNumberMapper(Pe.parserObject,Xs.getNumberingSystem(je),!0);var ri=T(Pe.numericObject,_e.currency||c0,_e.altSymbol),Yn=u("currency",Ki.numberMapper.numberSystem,Pe.numericObject,/a/i.test(_e.format)),es=(Yn=Yn.replace(/\u00A4/g,ri)).split(";");ei.hasNegativePattern=es.length>1,ei.nData=C(es[1]||"-"+es[0],!0,ri),ei.pData=C(es[0],!1,ri),!yi[2]&&!_e.minimumFractionDigits&&!_e.maximumFractionDigits&&(Kt=C(Yn.split(";")[0],!0,"",!0).minimumFraction)}if(r.formatRegex.test(_e.format)||!_e.format){if(de(Ve,y(_e.format||"N")),Ve.custom=!1,ce="###0",(Ve.fractionDigits||_e.minimumFractionDigits||_e.maximumFractionDigits||Kt)&&(Ve.fractionDigits&&(_e.minimumFractionDigits=_e.maximumFractionDigits=Ve.fractionDigits),ce=me(ce,Kt||Ve.fractionDigits||_e.minimumFractionDigits||0,_e.maximumFractionDigits||0)),_e.minimumIntegerDigits&&(ce=Te(ce,_e.minimumIntegerDigits)),_e.useGrouping&&(ce=Oe(ce)),"currency"===Ve.type){var Dt=ce;ce=ei.pData.nlead+Dt+ei.pData.nend,ei.hasNegativePattern&&(ce+=";"+ei.nData.nlead+Dt+ei.nData.nend)}"percent"===Ve.type&&(ce+=" %")}else ce=_e.format.replace(/'/g,'"');return Object.keys(Ki).length>0&&(ce=Se?ce:function U(fe,_e){if(-1!==fe.indexOf(",")){var je=fe.split(",");fe=je[0]+re("numberMapper.numberSymbols.group",_e)+je[1].replace(".",re("numberMapper.numberSymbols.decimal",_e))}else fe=fe.replace(".",re("numberMapper.numberSymbols.decimal",_e));return fe}(ce,Ki)),ce},r.fractionDigitsPattern=me,r.minimumIntegerPattern=Te,r.groupingPattern=Oe,r.getWeekData=function oe(fe,_e){var je="sun",Se=re("supplemental.weekData.firstDay",_e),Pe=fe;return/en-/.test(Pe)&&(Pe=Pe.slice(3)),Pe=Pe.slice(0,2).toUpperCase()+Pe.substr(2),Se&&(je=Se[Pe]||Se[Pe.slice(0,2)]||"sun"),o[je]},r.replaceBlazorCurrency=function Ie(fe,_e,je){var Se=function Pj(r){return re(r||"",Oj)}(je);if(_e!==Se)for(var Pe=0,Ve=fe;Pe<Ve.length;Pe++){var Wt=Ve[Pe];Wt.nend=Wt.nend.replace(_e,Se),Wt.nlead=Wt.nlead.replace(_e,Se)}},r.getWeekOfYear=function De(fe){var Se,_e=new Date(fe.getFullYear(),0,1),je=_e.getDay();je=je>=0?je:je+7;var Pe=Math.floor((fe.getTime()-_e.getTime()-6e4*(fe.getTimezoneOffset()-_e.getTimezoneOffset()))/864e5)+1;if(je<4){if((Se=Math.floor((Pe+je-1)/7)+1)>52){var Wt=new Date(fe.getFullYear()+1,0,1).getDay();Se=(Wt=Wt>=0?Wt:Wt+7)<4?1:53}}else Se=Math.floor((Pe+je-1)/7);return Se}}(Qi||(Qi={}));var HA=/^(.*?):[ \t]*([^\r\n]*)$/gm,yp=function(){function r(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():"GET",this.mode=!!f(i)||i):"object"==typeof t&&(this.options=t,Qs(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return r.prototype.send=function(t){var e=this;this.data=f(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(s,o){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(s,o)},f(e.onLoad)||(e.httpRequest.onload=e.onLoad),f(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),f(e.onAbort)||(e.httpRequest.onabort=e.onAbort),f(e.onError)||(e.httpRequest.onerror=e.onError),f(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),!f(e.data)&&null!==e.contentType&&e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(f(e.data)?null:e.data)})},r.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},r.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},r.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},r.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=HA.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=HA.exec(this.httpRequest.getAllResponseHeaders());return f(i=e[t.toLowerCase()])?null:i},r}(),JP=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,eL=/msie|trident/i,tL=/Trident\/7\./,iL=/(ipad|iphone|ipod touch)/i,nL=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,rL=/android/i,sL=/trident|windows phone|edge/i,oL=/(version)[ /]([\w.]+)/i,Of={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var X=function(){function r(){}return r.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,s=Object.keys(Of);n<s.length;n++)if(i=r.userAgent.match(Of[s[n]])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,r.userAgent.match(tL)){t.name="msie";break}var a=r.userAgent.match(oL);"safari"===t.name&&a&&(t.version=a[2]);break}return t},r.getEvent=function(t){var e={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return r.isPointer?e[t].isPointer:r.isTouch?e[t].isTouch+(r.isDevice?"":" "+e[t].isDevice):e[t].isDevice},r.getTouchStartEvent=function(){return r.getEvent("start")},r.getTouchEndEvent=function(){return r.getEvent("end")},r.getTouchMoveEvent=function(){return r.getEvent("move")},r.getTouchCancelEvent=function(){return r.getEvent("cancel")},r.getValue=function(t,e){var i=window.browserDetails;return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===r.isTouch&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),typeof i[t]>"u"?i[t]=e.test(r.userAgent):i[t]},Object.defineProperty(r,"userAgent",{get:function(){return r.uA},set:function(t){r.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(r,"info",{get:function(){return Jt(window.browserDetails.info)?window.browserDetails.info=r.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIE",{get:function(){return r.getValue("isIE",eL)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isTouch",{get:function(){return Jt(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isPointer",{get:function(){return Jt(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isMSPointer",{get:function(){return Jt(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isDevice",{get:function(){return r.getValue("isDevice",JP)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos",{get:function(){return r.getValue("isIos",iL)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos7",{get:function(){return r.getValue("isIos7",nL)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isAndroid",{get:function(){return r.getValue("isAndroid",rL)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWebView",{get:function(){return Jt(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(Jt(window.cordova)&&Jt(window.PhoneGap)&&Jt(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWindows",{get:function(){return r.getValue("isWindows",sL)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchStartEvent",{get:function(){return Jt(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=r.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchMoveEvent",{get:function(){return Jt(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=r.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchEndEvent",{get:function(){return Jt(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=r.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchCancelEvent",{get:function(){return Jt(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=r.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),r.uA=typeof navigator<"u"?navigator.userAgent:"",r}(),A=function(){function r(){}return r.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},r.add=function(t,e,i,n,s){var a,o=r.addOrGetEventData(t);a=s?UE(i,s):i,n&&(a=a.bind(n));for(var l=e.split(" "),h=0;h<l.length;h++)o.push({name:l[h],listener:i,debounce:a}),X.isIE?t.addEventListener(l[h],a):t.addEventListener(l[h],a,{passive:!1});return a},r.remove=function(t,e,i){for(var n=r.addOrGetEventData(t),s=e.split(" "),o=function(l){var u,h=-1;n&&0!==n.length&&n.some(function(p,m){return p.name===s[l]&&p.listener===i&&(h=m,u=p.debounce,!0)}),-1!==h&&n.splice(h,1),u&&t.removeEventListener(s[l],u)},a=0;a<s.length;a++)o(a)},r.clearEvents=function(t){var e,i;i=de([],i,e=r.addOrGetEventData(t));for(var n=0;n<i.length;n++)t.removeEventListener(i[n].name,i[n].debounce),e.shift()},r.trigger=function(t,e,i){for(var s=0,o=r.addOrGetEventData(t);s<o.length;s++){var a=o[s];a.name===e&&a.debounce.call(this,i)}},r}(),wy=/^svg|^path|^g/;function si(r,t){var e=wy.test(r)?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);return typeof t>"u"||(e.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(e.className=t.className),void 0!==t.id&&(e.id=t.id),void 0!==t.styles&&e.setAttribute("style",t.styles),void 0!==t.attrs&&qe(e,t.attrs)),e}function B(r,t){for(var e=jA(t),i=0,n=r;i<n.length;i++)for(var s=n[i],o=0,a=e;o<a.length;o++){var l=a[o];if(Iu(s)){var h=re("attributes.className",s);f(h)?ui("attributes.className",l,s):new RegExp("\\b"+l+"\\b","i").test(h)||ui("attributes.className",h+" "+l,s)}else s.classList.contains(l)||s.classList.add(l)}return r}function W(r,t){for(var e=jA(t),i=0,n=r;i<n.length;i++){var s=n[i],o=Iu(s);if(o?re("attributes.className",s):""!==s.className)for(var l=0,h=e;l<h.length;l++){var u=h[l];if(o){var m=re("attributes.className",s).split(" "),y=m.indexOf(u);-1!==y&&m.splice(y,1),ui("attributes.className",m.join(" "),s)}else s.classList.remove(u)}}return r}function jA(r){var t=[];return"string"==typeof r?t.push(r):t=r,t}function Ts(r){return""===r.style.visibility&&r.offsetWidth>0}function ao(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.insertBefore(i,t.firstElementChild),e&&aL(t),r}function xt(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.appendChild(i),e&&aL(t),r}function aL(r){r.querySelectorAll("script").forEach(function(e){var i=document.createElement("script");i.text=e.innerHTML,document.head.appendChild(i),we(i)})}function we(r){var t=r.parentNode;if(t)return t.removeChild(r)}function $e(r){var t=r.parentNode;A.clearEvents(r),t.removeChild(r)}function qe(r,t){for(var i=r,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(Iu(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[a]=t[o]}else i.setAttribute(o,t[o])}return i}function he(r,t,e){return void 0===t&&(t=document),r=p0(r),t.querySelector(r)}function Tt(r,t,e){return void 0===t&&(t=document),r=p0(r),t.querySelectorAll(r)}function p0(r){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(r.match(/#[0-9]/g)||r.match(t)){for(var e=r.split(","),i=0;i<e.length;i++){for(var n=e[i].split(" "),s=0;s<n.length;s++)if(n[s].indexOf("#")>-1&&!n[s].match(/\[.*\]/)){var o=n[s].split("#");if(o[1].match(/^\d/)||o[1].match(t)){var a=n[s].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[s]=a.join(".")}}e[i]=n.join(" ")}return e.join(",")}return r}function j(r,t){var e=r;if("function"==typeof e.closest)return e.closest(t);for(;e&&1===e.nodeType;){if(pm(e,t))return e;e=e.parentNode}return null}function Ht(r,t){void 0!==t&&Object.keys(t).forEach(function(e){r.style[e]=t[e]})}function ai(r,t,e){B([r],t),W([r],e)}function pm(r,t){var e=r.matches||r.msMatchesSelector||r.webkitMatchesSelector;return e?e.call(r,t):-1!==[].indexOf.call(document.querySelectorAll(t),r)}var zj=new RegExp("]"),bp=function(){function r(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new h0(this),Jt(e)||(this.element="string"==typeof e?document.querySelector(e):e,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),Jt(t)||this.setProperties(t,!0),this.isDestroyed=!1}return r.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,Qs(this,t),!0!==e&&(Qs(this.changedProperties,t),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},r.callChildDataBind=function(t,e){for(var n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(e[o]instanceof Array)for(var a=0,l=e[o];a<l.length;a++){var h=l[a];void 0!==h.dataBind&&h.dataBind()}else e[o].dataBind()}},r.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},r.prototype.dataBind=function(){if(r.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,e=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(e,i),this.isProtectedOnChange=t}},r.prototype.serverDataBind=function(t){},r.prototype.saveChanges=function(t,e,i){this.isProtectedOnChange||(this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate(),this.finalUpdate=function _j(r){var t,e=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(e);var n="ej2"+function dc(r){for(var t="",e=0;e<5;e++)t+=(e?",":"")+r[e];return t}(e),s=function(o){o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===n&&(r(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",s),r=s=n=void 0}}(this.dataBind.bind(this)))},r.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},r.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},r.prototype.trigger=function(t,e,i,n){var s=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,n);if(zj.test(t)){var l=re(t,this);if(l)if(window.Blazor){var u=l.call(this,e);u&&"function"==typeof u.then?i?u.then(function(p){i&&(p="string"==typeof p&&s.modelObserver.isJson(p)?JSON.parse(p):p,i.call(s,p))}).catch(function(p){n&&(p="string"==typeof p&&s.modelObserver.isJson(p)?JSON.parse(p):p,n.call(s,p))}):a=u:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e);else i&&i.call(this,e)}return this.isProtectedOnChange=o,a}},r.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();B([this.element],["e-lib",t]),f(this.element.ej2_instances)?ui("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},r.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),W([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&W([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},r}();function Ya(r,t){var e,i,n="string"==typeof r?document.getElementById(r):r;for(i=0;i<n.ej2_instances.length;i++)if(e=n.ej2_instances[i],"string"==typeof t){if(t===e.getModuleName())return e}else if(e instanceof t)return e}function $E(r,t,e,i){return(!r.properties.hasOwnProperty(t)||!(r.properties[t]instanceof i))&&(r.properties[t]=qE(i,[r,t,e])),r.properties[t]}function f0(r,t,e,i,n,s){for(var o=[],a=e?e.length:0,l=0;l<a;l++){var h=i;if(s&&(h=i(e[l],r)),n){var u=qE(h,[r,t,{},!0]);u.setProperties(e[l],!0),o.push(u)}else o.push(qE(h,[r,t,e[l],!1]))}return o}function lL(r,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=r),this.properties[t]}}function YE(r,t){return function(e){if(this.properties[t]!==e){var i=this.properties.hasOwnProperty(t)?this.properties[t]:r;this.saveChanges(t,e,i),this.properties[t]=e}}}function hL(r,t,e){return function(){return $E(this,t,r,e)}}function uL(r,t,e){return function(i){$E(this,t,r,e).setProperties(i)}}function g0(r,t,e){return function(){var i=this;if(!this.properties.hasOwnProperty(t)){var n=f0(this,t,r,e,!1);this.properties[t]=n}var s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[t].hasOwnProperty("push")&&!s&&["push","pop"].forEach(function(o){var a={value:Wj(o,t,0,i.properties[t]).bind(i),configurable:!0};Object.defineProperty(i.properties[t],o,a)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function m0(r,t,e){return function(i){this.isComplexArraySetter=!0;var n=f0(this,t,r,e,!1),s=f0(this,t,i,e,!0);this.isComplexArraySetter=!1,this.saveChanges(t,s,n),this.properties[t]=s}}function Wj(r,t,e,i){return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(r){case"push":for(var a=0;a<n.length;a++){Array.prototype[r].apply(i,[n[a]]);var l=qA(o+(i.length-1),n[a],!this.controlParent,r);this.serverDataBind(l,n[a],!1,r)}break;case"pop":Array.prototype[r].apply(i);var h=qA(o+i.length,null,!this.controlParent,r);this.serverDataBind(h,{ejsAction:"pop"},!1,r)}return i}}function qA(r,t,e,i){var n=r;return e&&((n={})[r]=t,t&&"object"==typeof t)&&(n[r].ejsAction=i),n}function D(r){return function(t,e){var i={set:YE(r,e),get:lL(r,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),v0(t,e,"prop",r)}}function Cn(r,t){return function(e,i){var n={set:uL(r,i,t),get:hL(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),v0(e,i,"complexProp",r,t)}}function ba(r,t){return function(e,i){var n={set:m0(r,i,t),get:g0(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),v0(e,i,"colProp",r,t)}}function K(){return function(r,t){var e={set:function(i){var n=this.properties[t];if(n!==i){var s=UA(this,t);!1===Jt(n)&&s.context.removeEventListener(s.prefix,n),s.context.addEventListener(s.prefix,i),this.properties[t]=i}},get:lL(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(r,t,e),v0(r,t,"event")}}function an(r){}function v0(r,t,e,i,n){Jt(r.propList)&&(r.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),r.propList[e+"s"].push({propertyName:t,defaultValue:i,type:n}),r.propList[e+"Names"].push(t)}function UA(r,t){if(!1===r.hasOwnProperty("parentObj"))return{context:r,prefix:t};var e=re("propName",r);return e&&(t=e+"-"+t),UA(re("parentObj",r),t)}var ZE=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Cp=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},hs=function(r){function t(i){var n=r.call(this,i,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var e;return ZE(t,r),e=t,t.prototype.animate=function(i,n){var s=this.getModel(n=n||{});if("string"==typeof i)for(var a=0,l=Array.prototype.slice.call(Tt(i,document));a<l.length;a++)s.element=l[a],e.delayAnimation(s);else s.element=i,e.delayAnimation(s)},t.stop=function(i,n){i.style.animation="",i.removeAttribute("e-animate");var s=i.getAttribute("e-animation-id");if(s){var o=parseInt(s,10);cancelAnimationFrame(o),i.removeAttribute("e-animation-id")}n&&n.end&&n.end.call(this,n)},t.delayAnimation=function(i){"Disable"===gL?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){e.applyAnimation(i)},i.delay):e.applyAnimation(i)},t.applyAnimation=function(i){var n=this;i.timeStamp=0;var s=0,o=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(u){try{u?(i.timeStamp=u+i.timeStamp-(a=0===a?u:a),a=u,!s&&i.begin&&i.begin.call(n,i),s+=1,i.timeStamp<l&&i.timeStamp+i.timeStamp/s<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(n,i),requestAnimationFrame(h)):(cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(n,i))):(o=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",o.toString()))}catch(m){cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(n,m)}};h()},t.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:void 0!==i.duration?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Cp([D("FadeIn")],t.prototype,"name",void 0),Cp([D(400)],t.prototype,"duration",void 0),Cp([D("ease")],t.prototype,"timingFunction",void 0),Cp([D(0)],t.prototype,"delay",void 0),Cp([K()],t.prototype,"progress",void 0),Cp([K()],t.prototype,"begin",void 0),Cp([K()],t.prototype,"end",void 0),Cp([K()],t.prototype,"fail",void 0),e=Cp([an],t)}(bp);function Lr(r,t,e){var i=function y0(r){return{selector:r&&r.selector?r.selector:null,ignore:r&&r.ignore?r.ignore:null,rippleFlag:r&&r.rippleFlag,isCenterRipple:r&&r.isCenterRipple,duration:r&&r.duration?r.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!pc?function(){}:(r.setAttribute("data-ripple","true"),A.add(r,"mousedown",dL,{parent:r,rippleOptions:i}),A.add(r,"mouseup",pL,{parent:r,rippleOptions:i,done:e}),A.add(r,"mouseleave",Sy,{parent:r,rippleOptions:i}),X.isPointer&&A.add(r,"transitionend",Sy,{parent:r,rippleOptions:i}),function(){r.removeAttribute("data-ripple"),A.remove(r,"mousedown",dL),A.remove(r,"mouseup",pL),A.remove(r,"mouseleave",Sy),A.remove(r,"transitionend",Sy)})}function dL(r){var t=r.target,e=this.rippleOptions.selector,i=e?j(t,e):t;if(!(!i||this.rippleOptions&&j(t,this.rippleOptions.ignore))){var n=i.getBoundingClientRect(),s=r.pageX-document.body.scrollLeft,o=r.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(s-n.left),Math.abs(s-n.right)),l=Math.max(Math.abs(o-n.top),Math.abs(o-n.bottom)),h=Math.sqrt(a*a+l*l),u=2*h+"px",p=s-n.left-h,m=o-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(p=0,m=0,u="100%"),i.classList.add("e-ripple");var S=si("div",{className:"e-ripple-element",styles:"width: "+u+";height: "+u+";left: "+p+"px;top: "+m+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(S),window.getComputedStyle(S).getPropertyValue("opacity"),S.style.transform="scale(1)",i!==this.parent&&A.add(i,"mouseleave",Sy,{parent:this.parent,rippleOptions:this.rippleOptions})}}function pL(r){fL(r,this)}function Sy(r){fL(r,this)}function fL(r,t){var e=t.rippleOptions.duration,i=r.target,n=t.rippleOptions.selector,s=n?j(i,n):i;if(s&&(!s||-1!==s.className.indexOf("e-ripple"))){var o=Tt(".e-ripple-element",s),a=o[o.length-1];a&&(a.style.opacity="0.5"),t.parent!==s&&A.remove(s,"mouseleave",Sy),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),s.getElementsByClassName("e-ripple-element").length||s.classList.remove("e-ripple"),t.done&&t.done(r)},e)}}var pc=!1,gL="",$j=function(){function r(t){this.loadedModules=[],this.parent=t}return r.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var s=t[n],o=0,a=e;o<a.length;o++){var l=a[o],h=s.member;if(l.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var u=qE(l,s.args),p=this.getMemberName(h);ui(p,s.isProperty?l:u,this.parent);var m=s;m.member=p,this.loadedModules.push(m)}}}else this.clean()},r.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||re(i.member,this.parent).destroy()}this.loadedModules=[]},r.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(l){return e.getMemberName(l.member)}),s=0,o=this.loadedModules.filter(function(l){return-1===i.indexOf(l.member)});s<o.length;s++){var a=o[s];a.isProperty||re(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),Oo(this.parent,a.member)}},r.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},r.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++)if(i[e].member===this.getMemberName(t))return!0;return!1},r}(),Wi=function(){function r(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=re("callChildDataBind",bp),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return r.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[e]=t:delete this.parentObj.childChangedProperties[e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},r.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},r.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},r.prototype.setProperties=function(t,e){!0===e?(Qs(this,t),this.updateChange(!1,this.propName),this.clearChanges()):Qs(this,t)},r.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(ui(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),ui(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},r.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[t]=i,this.changedProperties[t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},r.prototype.serverDataBind=function(t,e,i,n){},r.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},r}(),mL=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],WA=function(){function r(t){var e;this.isValidated=!1,this.version="20.3",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:'This application was built using a trial version of Syncfusion Essential Studio. Please include a valid license to permanently remove this license validation message. You can also obtain a free 30 day evaluation license to temporarily remove this message during the evaluation period. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing">help topic</a> for more information.',trailExpired:'Your Syncfusion trial license has expired. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#trial-expired">help topic</a> for more information.',versionMismatched:'The included Syncfusion license (v##LicenseVersion) is invalid for version ##Requireversion. Please refer to this <a class="e-license" href="https://help.syncfusion.com/es/licensing/version-mismatch/">help topic</a> for more information.',platformMismatched:'The included Syncfusion license is invalid (Platform mismatch). Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#platform-mismatch">help topic</a> for more information.',invalidKey:'The included Syncfusion license is invalid. Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#invalid-key">help topic</a> for more information.'},this.manager=(e=null,{setKey:function i(s){e=s},getKey:function n(){return e}}),this.npxManager={getKey:function i(){return"npxKeyReplace"}},this.manager.setKey(t)}return r.prototype.validate=function(){if(!this.isValidated&&o0&&!re(KA(mL),o0)&&!re("Blazor",o0)){var t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var e=this.getInfoFromKey();if(e&&e.length)for(var i=0,n=e;i<n.length;i++){var s=n[i];if(!this.platform.test(s.platform)||s.invalidPlatform)t=this.errors.platformMismatched;else if(-1===s.version.indexOf(this.version))t=(t=(t=this.errors.versionMismatched).replace("##LicenseVersion",s.version)).replace("##Requireversion",this.version+".x");else if(s.expiryDate){var o=new Date(s.expiryDate),a=new Date;if(!(o!==a&&o<a))break;t=this.errors.trailExpired}}else t=this.errors.invalidKey}else t=this.errors.noLicense;if(t&&typeof document<"u"&&!f(document)){var l=si("div",{innerHTML:t+'<span id="license-banner-event" class="e-license-banner" ><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><line x1="5" y1="5" x2="15" y2="15" stroke="yellow" stroke-width="2.5" stroke-miterlimit="10" stroke-linecap="round"></line><line x1="15" y1="5" x2="5" y2="15" stroke="yellow" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10"></line></svg></span>',styles:'position:fixed;top:0;left:0;right:0;font-family:"Segoe UI";font-size:16px;background:repeating-linear-gradient(45deg,#d70f0f,#d70f0f 10px,#e12121 10px,#e12121 17px);color:#ffffff;z-index:999999999;text-align:center;padding:10px 50px 10px 25px;'});l.setAttribute("id","js-licensing"),document.body.appendChild(l),document.getElementById("license-banner-event").addEventListener("click",function(){document.getElementById("js-licensing").remove()})}this.isValidated=!0,ui(KA(mL),this.isValidated,o0)}},r.prototype.getDecryptedData=function(t){try{return atob(t)}catch{return""}},r.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,o=!1;this.manager.getKey()?t=this.manager.getKey():(o=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=t.split(";"),l=0,h=a;l<h.length;l++){var p=this.getDecryptedData(h[l]);if(p){var m=0,y="";if(o){for(var T=p[p.length-1],R=[],C=0;C<p.length;C++)R[C]=p[C].charCodeAt(0)-T.charCodeAt(0);for(C=0;C<R.length;C++)y+=String.fromCharCode(R[C])}else for(C=0;C<p.length;C++,m++){m===e.length&&(m=0);var S=p.charCodeAt(C);y+=String.fromCharCode(S^e[m]>>16)}this.platform.test(y)?(i=y.split(";"),s=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):y&&y.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch{return null}},r}(),GA=new WA;function KA(r){for(var t="",e=0,i=r;e<i.length;e++)t+=String.fromCharCode(i[e]);return t}function vL(r){GA=new WA(r)}var ZA,yL=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),C0=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},YA=0,bL=0,ur=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.randomId=function cc(){if(!(typeof window>"u")){var r=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(r)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,f(n.enableRtl)&&n.setProperties({enableRtl:false},!0),f(n.locale)&&n.setProperties({locale:u0},!0),n.moduleLoader=new $j(n),n.localObserver=new h0(n),dm.on("notifyExternalChange",n.detectFunction,n,n.randomId),GA.validate(),Jt(i)||n.appendTo(),n}return yL(t,r),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(W([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),r.prototype.destroy.call(this),this.moduleLoader.clean(),dm.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new h0(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},t.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=he(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();B([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=re("ej2_instances",this.element);(!n||-1===n.indexOf(this))&&r.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),r.prototype.dataBind.call(this)},t.prototype.on=function(e,i,n){if("string"==typeof e)this.localObserver.on(e,i,n);else for(var s=0,o=e;s<o.length;s++){var a=o[s];this.localObserver.on(a.event,a.handler,a.context)}},t.prototype.off=function(e,i){if("string"==typeof e)this.localObserver.off(e,i);else for(var n=0,s=e;n<s.length;n++){var o=s[n];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,i){!0!==this.isDestroyed&&this.localObserver.notify(e,i)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.createElement=function(e,i,n){return si(e,i)},t.prototype.triggerStateChange=function(e,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:i})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var i=Object.keys(e);i.length&&(this[i[0]]=e[i[0]])},t.prototype.mergePersistData=function(){var e;f(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.renderReactTemplates=function(e){f(e)||e()},t.prototype.clearTemplate=function(e,i){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(YA=0),ZA=this.pageID(location.href),bL=history.length,e+"_"+ZA+"_"+YA++},t.prototype.pageID=function(e){var i=0;if(0===e.length)return i;for(var n=0;n<e.length;n++)i=(i<<5)-i+e.charCodeAt(n),i&=i;return Math.abs(i)},t.prototype.isHistoryChanged=function(){return ZA!==this.pageID(location.href)||bL!==history.length},t.prototype.addOnPersist=function(e){for(var i=this,n={},s=0,o=e;s<o.length;s++){var l,a=o[s];Jt(l=re(a,this))||ui(a,this.getActualProperties(l),n)}return JSON.stringify(n,function(h,u){return i.getActualProperties(u)})},t.prototype.getActualProperties=function(e){return e instanceof Wi?re("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,i){for(var n={},s=function(u){if(-1===i.indexOf(u)){var p=e[u];if("object"!=typeof p||p instanceof Array)n[u]=p;else{var m=i.filter(function(y){return new RegExp(u+".").test(y)}).map(function(y){return y.replace(u+".","")});n[u]=o.iterateJsonProperties(o.getActualProperties(p),m)}}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a]);return n},C0([D(!1)],t.prototype,"enablePersistence",void 0),C0([D()],t.prototype,"enableRtl",void 0),C0([D()],t.prototype,"locale",void 0),C0([an],t)}(bp);typeof window<"u"&&window.addEventListener("popstate",function(){YA=0});var CL=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ds=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Yj={left:0,top:0,bottom:0,right:0},QA={isDragged:!1},Zj=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return CL(t,r),Ds([D(0)],t.prototype,"left",void 0),Ds([D(0)],t.prototype,"top",void 0),t}(Wi),wp=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.dragLimit=e.getDefaultPosition(),s.borderWidth=e.getDefaultPosition(),s.padding=e.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var e;return CL(t,r),e=t,t.prototype.bind=function(){this.toggleEvents(),X.isIE&&B([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return de({},Yj)},t.prototype.toggleEvents=function(i){var n;Jt(this.handle)||(n=he(this.handle,this.element));var s=this.enableTapHold&&X.isDevice&&X.isTouch?this.mobileInitialize:this.initialize;i?A.remove(n||this.element,X.touchStartEvent,s):A.add(n||this.element,X.touchStartEvent,s,this)},t.prototype.mobileInitialize=function(i){var n=this,s=i.currentTarget;this.tapHoldTimer=setTimeout(function(){n.externalInitialize=!0,n.removeTapholdTimer(),n.initialize(i,s)},this.tapHoldThreshold),A.add(document,X.touchMoveEvent,this.removeTapholdTimer,this),A.add(document,X.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),A.remove(document,X.touchMoveEvent,this.removeTapholdTimer),A.remove(document,X.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(i,n){return f(i)?null:i[{vertical:"scrollHeight",horizontal:"scrollWidth"}[n]]>i[{vertical:"clientHeight",horizontal:"clientWidth"}[n]]&&("vertical"===n?i.scrollTop>0:i.scrollLeft>0)?("vertical"===n?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),f(i)?i:this.getScrollableParent(i.parentNode,n)):this.getScrollableParent(i.parentNode,n)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(i,n){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||n,this.dragProcessStarted=!1,this.abort){var s=this.abort;"string"==typeof s&&(s=[s]);for(var o=0;o<s.length;o++)if(!f(j(i.target,s[o])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!Jt(i.changedTouches)&&"touchstart"!==i.type&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(A.add(document,X.touchMoveEvent,this.intDragStart,this),A.add(document,X.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==i.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,A.trigger(document.documentElement,X.touchStartEvent,i)}},t.prototype.intDragStart=function(i){this.removeTapholdTimer();var n=!Jt(i.changedTouches);if(!n||1===i.changedTouches.length){var o,s=this.getCoordinates(i),a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=j(i.target,this.dragTarget);f(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var u=this.initialPosition.x-s.pageX,p=this.initialPosition.y-s.pageY;if(Math.sqrt(u*u+p*p)>=this.distance||this.externalInitialize){var y=this.getHelperElement(i);if(!y||f(y))return;n&&i.preventDefault();var C=this.helperElement=y;if(this.parentClientRect=this.calculateParentPosition(C.offsetParent),this.dragStart){var T={event:i,element:l,target:this.getProperTargetElement(i),bindEvents:null,dragElement:C};this.trigger("dragStart",T)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),o={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var R=getComputedStyle(l),P=parseFloat(R.marginTop);this.clone&&0!==P&&(o.top+=P),this.eleTop=isNaN(parseFloat(R.top))?0:parseFloat(R.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(o.top-=this.parentScrollY,o.left-=this.parentScrollX);var O=this.getProcessedPositionValue({top:o.top-this.diffY+"px",left:o.left-this.diffX+"px"});this.dragElePosition={top:o.top,left:o.left},Ht(C,this.getDragPosition({position:"absolute",left:O.left,top:O.top})),A.remove(document,X.touchMoveEvent,this.intDragStart),A.remove(document,X.touchEndEvent,this.intDestroy),this.bindDragEvents(C)}}},t.prototype.bindDragEvents=function(i){Ts(i)?(A.add(document,X.touchMoveEvent,this.intDrag,this),A.add(document,X.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)this.top+=(i=i.offsetParent).offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},t.prototype.calculateParentPosition=function(i){if(f(i))return{left:0,top:0};var n=i.getBoundingClientRect(),s=getComputedStyle(i);return{left:n.left+window.pageXOffset-parseInt(s.marginLeft,10),top:n.top+window.pageYOffset-parseInt(s.marginTop,10)}},t.prototype.intDrag=function(i){if(Jt(i.changedTouches)||1===i.changedTouches.length){var n,s;this.clone&&i.changedTouches&&X.isDevice&&X.isTouch&&i.preventDefault(),this.position=this.getMousePosition(i,this.isDragScroll);var o=this.getDocumentWidthHeight("Height");o<this.position.top&&(this.position.top=o);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var u=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):u=!1),u&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var p=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var m=this.parentClientRect.left,y=this.parentClientRect.top,C=this.getCoordinates(i),S=C.pageX,T=C.pageY,R=this.position.left-this.diffX,P=this.position.top-this.diffY,O=getComputedStyle(p);if(this.dragArea){if(this.pageX!==S||this.skipDistanceCheck){var N=p.offsetWidth+(parseFloat(O.marginLeft)+parseFloat(O.marginRight));n=this.dragLimit.left>R&&R>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<R+N&&R>0?R-(R-this.dragLimit.right)+window.pageXOffset-N:R<0?this.dragLimit.left:R}if(this.pageY!==T||this.skipDistanceCheck){var z=p.offsetHeight+(parseFloat(O.marginTop)+parseFloat(O.marginBottom));s=this.dragLimit.top>P&&P>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<P+z&&P>0?P-(P-this.dragLimit.bottom)+window.pageYOffset-z:P<0?this.dragLimit.top:P}}else n=R,s=P;var me,Te,U=y+this.borderWidth.top,ae=m+this.borderWidth.left;this.dragProcessStarted&&(f(s)&&(s=this.prevTop),f(n)&&(n=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,me=s-U<0?this.dragLimit.top:s-this.borderWidth.top,Te=n-ae<0?this.dragLimit.left:n-this.borderWidth.left):(me=s-this.borderWidth.top,Te=n-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,me=s-U<0?this.dragLimit.top:s-U,Te=n-ae<0?this.dragElePosition.left:n-ae):(me=s-U,Te=n-ae);var Oe=parseFloat(getComputedStyle(this.element).marginTop);if(Oe>0&&(this.clone&&(me+=Oe,P<0&&(Oe+P>=0?me=Oe+P:me-=Oe),me=this.dragLimit.bottom<me?this.dragLimit.bottom:me),s-U<0))if(P+Oe+(p.offsetHeight-U)>=0){var oe=this.dragLimit.top+P-U;oe+Oe+U<0?me-=Oe+U:me=oe}else me-=Oe+U;this.dragArea&&this.helperElement.classList.contains("e-treeview")&&(me=me+(z=p.offsetHeight+(parseFloat(O.marginTop)+parseFloat(O.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-z:me),this.enableScrollHandler&&!this.clone&&(me-=this.parentScrollY,Te-=this.parentScrollX);var Ie=this.getProcessedPositionValue({top:me+"px",left:Te+"px"});Ht(p,this.getDragPosition(Ie)),!this.elementInViewport(p)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var De=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===De.length&&(De=this.getPathElements(i));var fe=this.getScrollParent(De,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(fe,me):this.elementInViewport(this.helperElement)||(0===(De=[].slice.call(document.querySelectorAll(":hover"))).length&&(De=this.getPathElements(i)),fe=this.getScrollParent(De,!0),this.getScrollPosition(fe,me))}this.dragProcessStarted=!0,this.prevLeft=n,this.prevTop=s,this.position.left=n,this.position.top=s,this.pageX=S,this.pageY=T}},t.prototype.getScrollParent=function(i,n){for(var o,s=n?i.reverse():i,a=s.length-1;a>=0;a--)if(("auto"===(o=window.getComputedStyle(s[a])["overflow-y"])||"scroll"===o)&&s[a].scrollHeight>s[a].clientHeight)return s[a];if("visible"===(o=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(i,n){i&&i===document.scrollingElement?i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<n&&i.getBoundingClientRect().height+this.parentClientRect.top>n?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>n-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight):i&&i!==document.scrollingElement&&(i.clientHeight+i.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<n?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>n-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(i.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(i){return document.elementsFromPoint(i.clientX>0?i.clientX:0,i.clientY>0?i.clientY:0)},t.prototype.triggerOutFunction=function(i,n){this.hoverObject.instance.intOut(i,n.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(i){var n=de({},i);return this.axis&&("x"===this.axis?delete n.top:"y"===this.axis&&delete n.left),n},t.prototype.getDocumentWidthHeight=function(i){var n=document.body,s=document.documentElement;return Math.max(n["scroll"+i],s["scroll"+i],n["offset"+i],s["offset"+i],s["client"+i])},t.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,Jt(i.changedTouches)||1===i.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(i.type)){if(this.dragStop){var s=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:s,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var o=this.checkTargetElement(i);o.target&&o.instance&&(o.instance.dragStopCalled=!0,o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intDrop(i,o.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),A.remove(document,X.touchMoveEvent,this.intDragStart),A.remove(document,X.touchEndEvent,this.intDragStop),A.remove(document,X.touchEndEvent,this.intDestroy),A.remove(document,X.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(i){return i&&(QA.isDragged=!QA.isDragged),QA.isDragged},t.prototype.setDragArea=function(){var i,n,a,s=0,o=0;if(a="string"==typeof this.dragArea?he(this.dragArea):this.dragArea){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,n=a.scrollHeight?this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var u=["Top","Left","Bottom","Right"],p=getComputedStyle(a),m=0;m<u.length;m++){var y=u[m],C=p["border"+y+"Width"],S=p["padding"+y],T=y.toLowerCase();this.borderWidth[T]=isNaN(parseFloat(C))?0:parseFloat(C),this.padding[T]=isNaN(parseFloat(S))?0:parseFloat(S)}s=this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?h.top+document.scrollingElement.scrollTop:h.top,this.dragLimit.left=(o=h.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+n-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(i){var s,n=this.getCoordinates(i),o=this.helperElement.style.pointerEvents||"";return WE(i.target,this.helperElement)||-1!==i.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",s=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=o):s=i.target,s},t.prototype.currentStateCheck=function(i,n){return f(this.currentStateTarget)||this.currentStateTarget===i?f(n)?i:n:this.currentStateTarget},t.prototype.getMousePosition=function(i,n){var a,l,s=void 0!==i.srcElement?i.srcElement:i.target,o=this.getCoordinates(i),h=f(s.offsetParent);return n?(a=this.clone?o.pageX:o.pageX+(h?0:s.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+(h?0:s.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},t.prototype.getHelperElement=function(i){var n;return this.clone?this.helper?n=this.helper({sender:i,element:this.target}):(n=si("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(n)):n=this.element,n},t.prototype.setGlobalDroppables=function(i,n,s){this.droppables[this.scope]=i?null:{draggable:n,helper:s,draggedElement:this.element}},t.prototype.checkTargetElement=function(i){var n=this.getProperTargetElement(i),s=this.getDropInstance(n);if(!s&&n&&!f(n.parentNode)){var o=j(n.parentNode,".e-droppable")||n.parentElement;o&&(s=this.getDropInstance(o))}return{target:n,instance:s}},t.prototype.getDropInstance=function(i){var s,o=i&&i.ej2_instances;if(o)for(var a=0,l=o;a<l.length;a++){var h=l[a];if("droppable"===h.getModuleName()){s=h;break}}return s},t.prototype.destroy=function(){this.toggleEvents(!0),r.prototype.destroy.call(this)},Ds([Cn({},Zj)],t.prototype,"cursorAt",void 0),Ds([D(!0)],t.prototype,"clone",void 0),Ds([D()],t.prototype,"dragArea",void 0),Ds([D()],t.prototype,"isDragScroll",void 0),Ds([D()],t.prototype,"isReplaceDragEle",void 0),Ds([D(!0)],t.prototype,"isPreventSelect",void 0),Ds([K()],t.prototype,"drag",void 0),Ds([K()],t.prototype,"dragStart",void 0),Ds([K()],t.prototype,"dragStop",void 0),Ds([D(1)],t.prototype,"distance",void 0),Ds([D()],t.prototype,"handle",void 0),Ds([D()],t.prototype,"abort",void 0),Ds([D()],t.prototype,"helper",void 0),Ds([D("default")],t.prototype,"scope",void 0),Ds([D("")],t.prototype,"dragTarget",void 0),Ds([D()],t.prototype,"axis",void 0),Ds([D()],t.prototype,"queryPositionInfo",void 0),Ds([D(!1)],t.prototype,"enableTailMode",void 0),Ds([D(!1)],t.prototype,"skipDistanceCheck",void 0),Ds([D(!0)],t.prototype,"preventDefault",void 0),Ds([D(!1)],t.prototype,"enableAutoScroll",void 0),Ds([D(!1)],t.prototype,"enableTapHold",void 0),Ds([D(750)],t.prototype,"tapHoldThreshold",void 0),Ds([D(!1)],t.prototype,"enableScrollHandler",void 0),e=Ds([an],t)}(bp),Qj=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xy=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},w0=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return Qj(t,r),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){A.add(this.element,X.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,i){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,i){this.mouseOver||(this.trigger("over",{event:e,target:i,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},t.prototype.intOut=function(e,i){this.mouseOver&&(this.trigger("out",{evt:e,target:i}),this.mouseOver=!1)},t.prototype.intDrop=function(e,i){if(this.dragStopCalled){this.dragStopCalled=!1;var a,n=!0,s=this.dragData[this.scope],o=!!s&&s.helper&&Ts(s.helper);o&&(a=this.isDropArea(e,s.helper,i),this.accept&&(n=pm(s.helper,this.accept))),o&&this.drop&&a.canDrop&&n&&this.trigger("drop",{event:e,target:a.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,i,n){var s={canDrop:!0,target:n||e.target},o="touchend"===e.type;if(o||s.target===i){i.style.display="none";var a=o?e.changedTouches[0]:e,l=document.elementFromPoint(a.clientX,a.clientY);s.canDrop=!1,s.canDrop=WE(l,this.element),s.canDrop&&(s.target=l),i.style.display=""}return s},t.prototype.destroy=function(){A.remove(this.element,X.touchEndEvent,this.intDrop),r.prototype.destroy.call(this)},xy([D()],t.prototype,"accept",void 0),xy([D("default")],t.prototype,"scope",void 0),xy([K()],t.prototype,"drop",void 0),xy([K()],t.prototype,"over",void 0),xy([K()],t.prototype,"out",void 0),xy([an],t)}(bp),wL=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),QE=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Xj={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},Hn=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.keyPressHandler=function(o){for(var a=o.altKey,l=o.ctrlKey,h=o.shiftKey,u=o.which,m=0,y=Object.keys(s.keyConfigs);m<y.length;m++)for(var C=y[m],T=0,R=s.keyConfigs[C].split(",");T<R.length;T++){var O=e.getKeyConfigData(R[T].trim());a===O.altKey&&l===O.ctrlKey&&h===O.shiftKey&&u===O.keyCode&&(o.action=C,s.keyAction&&s.keyAction(o))}},s.bind(),s}var e;return wL(t,r),e=t,t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[i];var n=i.toLowerCase().split("+"),s={altKey:-1!==n.indexOf("alt"),ctrlKey:-1!==n.indexOf("ctrl"),shiftKey:-1!==n.indexOf("shift"),keyCode:null};return s.keyCode=n[n.length-1].length>1&&Number(n[n.length-1])?Number(n[n.length-1]):e.getKeyCode(n[n.length-1]),e.configCache[i]=s,s},t.getKeyCode=function(i){return Xj[i]||i.toUpperCase().charCodeAt(0)},t.configCache={},QE([D({})],t.prototype,"keyConfigs",void 0),QE([D("keyup")],t.prototype,"eventName",void 0),QE([K()],t.prototype,"keyAction",void 0),e=QE([an],t)}(bp),$r=function(){function r(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||u0)}return r.prototype.setLocale=function(t){var e=this.intGetControlConstant(r.locale,t);this.currentLocale=e||this.localeStrings},r.load=function(t){this.locale=de(this.locale,t,{},!0)},r.prototype.getConstant=function(t){return f(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]},r.prototype.intGetControlConstant=function(t,e){return t[e]?t[e][this.controlName]:null},r.locale={},r}(),SL=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sp=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},XA=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return SL(t,r),Sp([D(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Wi),JA=/(Up|Down)/,dl=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(s){if(!0===n.touchAction){var o=n.updateChangeTouches(s);void 0!==s.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY},n.startEventData=o,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(s)},n.tapHoldThreshold),A.add(n.element,X.touchMoveEvent,n.moveEvent,n),A.add(n.element,X.touchEndEvent,n.endEvent,n),A.add(n.element,X.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(s){var o=n.updateChangeTouches(s);n.movedPoint=o,n.isTouchMoved=!(o.clientX===n.startPoint.clientX&&o.clientY===n.startPoint.clientY);var a={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(s),a=de(a,{},{startEvents:n.startEventData,originalEvent:s,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(o)}),n.trigger("scroll",a),n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY})},n.cancelEvent=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(s),A.remove(n.element,X.touchCancelEvent,n.cancelEvent)},n.endEvent=function(s){n.swipeFn(s),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:s,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var o=n.updateChangeTouches(s),a=o.clientX-n.startPoint.clientX,l=o.clientY-n.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),n.isTouchMoved=a>1||l>1,/Firefox/.test(X.userAgent)&&0===o.clientX&&0===o.clientY&&"mouseup"===s.type&&(n.isTouchMoved=!1),n.endPoint=o,n.calcPoints(s);var u={originalEvent:s,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(o)};if(n.isTouchMoved){var p=void 0,m=n.swipeSettings.swipeThresholdDistance;p=de(p,n.defaultArgs,u);var y=!1,C=n.element,S=n.isScrollable(C),T=JA.test(n.movedDirection);(m<n.distanceX&&!T||m<n.distanceY&&T)&&(y=!S||n.checkSwipe(C,T)),y&&n.trigger("swipe",p)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),A.remove(n.element,X.touchMoveEvent,n.moveEvent),A.remove(n.element,X.touchEndEvent,n.endEvent),A.remove(n.element,X.touchCancelEvent,n.cancelEvent)},n.bind(),n}return SL(t,r),t.prototype.onPropertyChanged=function(e,i){},t.prototype.bind=function(){this.wireEvents(),X.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.wireEvents=function(){A.add(this.element,X.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){A.remove(this.element,X.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var i=getComputedStyle(e);return!!/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,A.remove(this.element,X.touchMoveEvent,this.moveEvent),A.remove(this.element,X.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),A.remove(this.element,X.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?i.clientX>this.startPoint.clientX?"Right":"Left":i.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var i=e.clientX,n=e.clientY,s=Date.now(),o=i-this.startPoint.clientX,a=n-this.startPoint.clientX,l=s-this.tStampStart;return Math.sqrt(o*o+a*a)/l},t.prototype.checkSwipe=function(e,i){var n=["scroll","offset"],s=i?["Height","Top"]:["Width","Left"];return e[n[0]+s[0]]<=e[n[1]+s[0]]||0===e[n[0]+s[1]]||e[n[1]+s[0]]+e[n[0]+s[1]]>=e[n[0]+s[0]]},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Sp([K()],t.prototype,"tap",void 0),Sp([K()],t.prototype,"tapHold",void 0),Sp([K()],t.prototype,"swipe",void 0),Sp([K()],t.prototype,"scroll",void 0),Sp([D(350)],t.prototype,"tapThreshold",void 0),Sp([D(750)],t.prototype,"tapHoldThreshold",void 0),Sp([Cn({},XA)],t.prototype,"swipeSettings",void 0),Sp([an],t)}(bp),ek=new RegExp("\\n|\\r|\\s\\s+","g"),Jj=new RegExp(/'|"/g),e3=new RegExp("if ?\\("),tk=new RegExp("else if ?\\("),EL=new RegExp("else"),xL=new RegExp("for ?\\("),fm=new RegExp("(/if|/for)"),TL=new RegExp("\\((.*)\\)",""),ik=new RegExp("^[0-9]+$","g"),N9=new RegExp("[\\w\"'.\\s+]+","g"),DL=new RegExp('"(.*?)"',"g"),nk=new RegExp("[\\w\"'@#$.\\s-+]+","g"),t3=new RegExp("\\${([^}]*)}","g"),rk=/^\..*/gm,sk=/\\/gi,IL=/\\\\/gi,ok=new RegExp("[\\w\"'@#$.\\s+]+","g"),AL=/\window\./gm;function gm(r,t,e,i,n){return!t||ik.test(r)||-1!==i.indexOf(r.split(".")[0])||n?r:e+"."+r}function ak(r,t,e,i){return t&&!ik.test(r)&&-1===i.indexOf(r.split(".")[0])?e+'["'+r:r}function _L(r){return r.match(IL)||(r=r.replace(sk,"\\\\")),r}function ML(r,t,e,i){if(r=r.trim(),/\window\./gm.test(r))return r;var s=/'|"/gm;return/@|\$|#/gm.test(r)&&(r=ak(r,-1===e.indexOf(r),t,e)+'"]'),rk.test(r)?function i3(r,t,e,i){return!t||ik.test(r)||-1!==i.indexOf(r.split(".")[0])||/^\..*/gm.test(r)?r:e+"."+r}(r,!s.test(r)&&-1===e.indexOf(r),t,e):gm(r,!s.test(r)&&-1===e.indexOf(r),t,e,i)}var OL=/^[\n\r.]+<tr|^<tr/,B9=/^[\n\r.]+<svg|^<path|^<g/,fc={};function qi(r,t,e){var i=XE.compile(r,t,e);return function(n,s,o,a,l,h,u,p){var m=i(n,s,o,u,p);return"string"==typeof m?B9.test(m)?si("svg",{innerHTML:m}).childNodes:si(OL.test(m)?"table":"div",{innerHTML:m}).childNodes:m}}function Ty(r,t,e,i,n){0}function pd(r,t,e){var i=document.getElementById(r);if(i)for(var n=i.getElementsByClassName("blazor-inner-template"),s=0;s<n.length;s++){var o;o=f(e)?n[s].getAttribute("data-templateId"):n[e].getAttribute("data-templateId");var a=document.getElementById(o);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)f(e)?n[s].appendChild(a.childNodes[0]):(n[e].appendChild(a.childNodes[0]),s=n.length)}}var s3=function(){function r(){}return r.prototype.compile=function(t,e,i){return void 0===e&&(e={}),function kL(r,t,e){var i="data",n=function RL(r,t,e,i){var n=0,s=[],o=r.match(/class="([^"]+|)\s{2}/g),a="";return o&&o.forEach(function(l){a=l.replace(/\s\s+/g," "),r=r.replace(l,a)}),r.replace(ek,"").replace(DL,"'$1'").replace(t3,function(l,h,u,p){var y=h.match(TL);if(y){var C=y[1];if(tk.test(h))h='";} '+h.replace(y[1],C.replace(N9,function(U){return gm(U=U.trim(),!Jj.test(U)&&-1===s.indexOf(U),t,s,i)}))+'{ \n str = str + "';else if(e3.test(h))h='"; '+h.replace(y[1],C.replace(nk,function(U){return ML(U,t,s,i)}))+'{ \n str = str + "';else if(xL.test(h)){var S=y[1].split(" of ");h='"; '+h.replace(y[1],function(U){return s.push(S[0]),s.push(S[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+gm(S[1],!0,t,s,i)+".length; i"+n+"++"})+"{ \n "+S[0]+"= "+gm(S[1],!0,t,s,i)+"[i"+n+"]; \n var "+S[0]+"Index=i"+n+'; \n str = str + "'}else{var T=h.split("("),R=e&&e.hasOwnProperty(T[0])?"this.":"global";R=/\./.test(T[0])?"":R;var P=y[1].split(",");0!==y[1].length&&!/data/.test(P[0])&&!/window./.test(P[0])&&(y[1]="global"===R?t+"."+y[1]:y[1]),AL.test(h)&&/\]\./gm.test(h)||/@|\$|#/gm.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===R?"":R)+h.replace(y[1],C.replace(ok,function(U){return ML(U,t,s,i)}))+'+ "'):h='" + '+("global"===R?"":R)+h.replace(C,gm(y[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==R,t,s,i))+'+"'}}else EL.test(h)?h='"; '+h.replace(EL,'} else { \n str = str + "'):h.match(fm)?h=h.replace(fm,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(sk)&&(h=_L(h)),h='"+'+ak(h,-1===s.indexOf(h),t,s)+'"]+"'):h=h.match(sk)?'"+'+ak(h=_L(h),-1===s.indexOf(h),t,s)+'"]+"':'"+'+gm(h.replace(/,/gi,"+"+t+"."),-1===s.indexOf(h),t,s,i)+'+"';return h})}(r,i,t,e);return new Function(i,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}(t,e)},r}(),XE={compile:(new s3).compile},o3=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],a3=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],LL=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],bs=function(){function r(){}return r.beforeSanitize=function(){return{selectors:{tags:o3,attributes:a3}}},r.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},r.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},r.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[e].attributes,n=0;n<i.length;n++)this.wrapElement.children[e].removeAttribute(i[n].localName)},r.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(e){we(e)})},r.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+LL.join("],[")+"]");t.length>0&&t.forEach(function(e){LL.forEach(function(i){e.hasAttribute(i)&&e.removeAttribute(i)})})},r.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(s){s.removeAttribute(e.attribute)})})},r}();function fd(r){return function(t){!function l3(r,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!r.prototype.hasOwnProperty(i)||e.isFormBase)&&(r.prototype[i]=e.prototype[i])})})}(t,r)}}function FL(r,t,e){var i={};if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var o=s[n];!0===e?(t.propCollection[o]=new v.vpe(!1),t[o]=t.propCollection[o]):i[o]=new v.vpe(!1)}!0!==e&&t.setProperties(i,!0)}}function NL(r,t,e){var i=Object.keys(r.registeredTemplate);if(i.length)for(var n=t&&t.filter(function(O){return!/\./g.test(O)}),s=0,o=n&&n||i;s<o.length;s++){var a=o[s];if(e&&e.length)for(var l=0;l<e.length;l++)for(var h=0;h<r.registeredTemplate.template.length;h++)r.registeredTemplate.template[h].rootNodes[0]===e[l]&&(p=r.registeredTemplate[a])[h].destroy();else if(r.registeredTemplate[a])for(var m=0,y=r.registeredTemplate[a];m<y.length;m++){var p;if(!(p=y[m]).destroyed){if(p._view){var C=p._view.renderer.parentNode(p.rootNodes[0]);if(!f(C))for(h=0;h<p.rootNodes.length;h++)C.appendChild(p.rootNodes[h])}p.destroy()}}delete r.registeredTemplate[a]}for(var S=function(O){O.instance&&O.instance.clearTemplate(t&&t.filter(function(N){return!!new RegExp(O.name).test(N)}))},T=0,R=r.tagObjects;T<R.length;T++)S(R[T])}function Za(r,t,e){for(var i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=0;s<i.length;s++){var o=i[s];s+1===i.length?n[o]=void 0===t?{}:t:void 0===n[o]&&(n[o]={}),n=n[o]}return n}var BL=/Ref$/,S0=function(){function r(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return r.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],n=re("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var s=Object.keys(this),o=0;o<s.length;o++){var a=re(s[o],this);"object"==typeof a&&a&&a.elementRef&&(re(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",this)||ui(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",a,this),re("viewContainerRef",this)&&!re("_viewContainerRef",a.elementRef.nativeElement)&&!re("propName",a.elementRef.nativeElement)&&(ui("_viewContainerRef",re("viewContainerRef",this),a.elementRef.nativeElement),ui("propName",s[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=s=(s=Object.keys(this)).filter(function(S){return/Ref$/i.test(S)});l<h.length;l++){var p=h[l].replace("Ref","");ui(p.replace("_","."),re(p,this),this.propCollection)}var m=Object.keys(this);if(this.directivePropList){for(var y=0;y<this.directivePropList.length;y++){var C=this.directivePropList[y];-1!==m.indexOf(C)&&(!1===re(C,this)||re(C,this))&&ui(C,re(C,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},r.prototype.registerEvents=function(t){FL(t,this,!0)},r.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.propCollection[n]=t[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},r.prototype.clearTemplate=function(t){NL(this,t)},r.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},r.prototype.isChanged=function(){var t=this.hasChanges;if(!f(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),n=0;n<i.length;n++)if(!f(this.propCollection[i[n]])){var s=re(i[n],this),o=this.propCollection[this.property][0][i[n]];!f(s)&&this.propCollection[i[n]]!==s&&o!==s&&(ui(i[n],s,this.propCollection[this.property][0]),ui(i[n],s,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)t=t||l[a].instance.hasChanges;return t||this.hasChanges},r.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var t=Object.keys(this),e=0,i=t=t.filter(function(o){return BL.test(o)});e<i.length;e++){var s=i[e].replace("Ref","");ui(s.replace("_","."),re(s,this),this.propCollection)}},r.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.directivePropList=[]},r}(),E0=function(){function r(t){this.list=[],this.hasChanges=!1,this.propertyName=t}return r.prototype.ngOnInit=function(){this.isInitChanges=!0},r.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},r.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++)t.push(i[e].getProperties());return t},r.prototype.isChanged=function(){var t=this,e=!1,i=0,n=!1,s=this.children.map(function(u){return u});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),n=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(s[o].propCollection.dataSource)),n=this.list[o].hasChanges!==s[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(u){return u.dirIndex=i++,u.property=t.propertyName,u}));for(var a=0,l=this.list;a<l.length;a++)e=e||l[a].hasChanges;return!!this.list.length&&e},r.prototype.clearTemplate=function(t){for(var e=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(t&&t.map(function(o){return new RegExp(e.propertyName).test(o)?o.replace(e.propertyName+".",""):o}))},r.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)re("childColumns",this.list[t])&&"columns"===re("property",this.list[t])&&ui("columns",re("childColumns",this.list[t]).getProperties(),this.list[t].propCollection),this.list[t].isUpdated=!0},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.list=[]},r}(),Xo=function(){function r(){this.isProtectedOnChange=!0,this.isFormInit=!0}return r.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},r.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(S,T){var R=e.srenderer?e.srenderer.createElement(S):si(S);return typeof T>"u"||(R.innerHTML=T.innerHTML?T.innerHTML:"",void 0!==T.className&&(R.className=T.className),void 0!==T.id&&(R.id=T.id),void 0!==T.styles&&R.setAttribute("style",T.styles),void 0!==e.ngAttr&&R.setAttribute(e.ngAttr,""),void 0!==T.attrs&&qe(R,T.attrs)),R};for(var i=0,n=e.tags;i<n.length;i++){var s=n[i],o={instance:re("child"+s.substring(0,1).toUpperCase()+s.substring(1),e),name:s};e.tagObjects.push(o)}for(var a=Object.keys(e),l=0;l<a.length;l++){var h=re(a[l],e);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&ui(a[l]+"Ref",h,e),e.viewContainerRef&&!re("_viewContainerRef",h.elementRef.nativeElement)&&!re("propName",h.elementRef.nativeElement)&&(ui("_viewContainerRef",e.viewContainerRef,h.elementRef.nativeElement),ui("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var u=0,p=a=(a=Object.keys(e)).filter(function(S){return/Ref$/i.test(S)&&/\_/i.test(S)});u<p.length;u++){var y=p[u].replace("Ref",""),C={};ui(y.replace("_","."),re(y,e),C),e.setProperties(C,!0)}},r.prototype.getAngularAttr=function(t){for(var n,e=t.attributes,i=e.length,s=0;s<i;s++)/_ngcontent/g.test(e[s].name)&&(n=e[s].name);return n},r.prototype.ngAfterViewInit=function(t){var e=t||this;/ejs-tab|ejs-accordion/g.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");for(var n=Object.keys(e),s=0,o=n=n.filter(function(h){return/Ref$/i.test(h)});s<o.length;s++){var l=o[s].replace("Ref","");ui(l.replace("_","."),re(l+"Ref",e),e)}setTimeout(function(){(typeof window<"u"&&e.element||e.getModuleName().includes("btn"))&&(e.appendTo(e.element),e.ngEle.nativeElement.style.visibility="")})},r.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){typeof window<"u"&&e.element.classList.contains("e-control")&&(e.destroy(),e.clearTemplate(null),e.ngBoundedEvents={},e.tagObjects={},e.ngEle=null)})},r.prototype.clearTemplate=function(t,e){NL(this,t,e)},r.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,n=e.tagObjects;i<n.length;i++){var s=n[i];if(!Jt(s.instance)&&(s.instance.isInitChanges||s.instance.hasChanges||s.instance.hasNewChildren))if(s.instance.isInitChanges){var o={},a=void 0;(l=re("instance.list",s))&&l.length&&(a=l[0].directivePropList);var h=!0;if(e.getModuleName&&"gantt"===e.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(s.instance.propertyName))for(var u=Object.keys(s.instance.list[0].propCollection),p=0;p<s.instance.list.length;p++){s.instance.list[p].propCollection[s.instance.propertyName]=[];for(var m={},y=0;y<u.length;y++)m[C=u[y]]=s.instance.list[p].propCollection[C];for(var S=0;S<s.instance.list[p].tags.length;S++){var T=s.instance.list[p].tags[S],R=re("child"+T.substring(0,1).toUpperCase()+T.substring(1),s.instance.list[p]);if(R){var P=s.instance.list[p]["child"+T.substring(0,1).toUpperCase()+T.substring(1)];if(P)for(var O=0;O<P.list.length;O++){var N=P.list[0].tags[0];if(N){var z=re("child"+N.substring(0,1).toUpperCase()+N.substring(1),P.list[O]);z&&P.list[O].tagObjects.push({instance:z,name:N})}}s.instance.list[p].tagObjects.push({instance:R,name:T})}}s.instance.list[p].propCollection[s.instance.propertyName].push(m)}o[s.name]=s.instance.getProperties(),e.setProperties(o,s.instance.isInitChanges)}else{(e[s.name].length!==s.instance.list.length||/diagram|tab|DashboardLayout/.test(e.getModuleName()))&&(e[s.name]=s.instance.list);for(var U=0,ae=s.instance.list;U<ae.length;U++){var l,me=s.instance.list.indexOf(l=ae[U]),Te=re(s.name,e)[me],Oe=Object.keys(Te);if(Oe=Oe.filter(function(fe){return/Ref$/i.test(fe)}),Te.properties&&0!==Object.keys(Te.properties).length)for(var oe=0,Ie=Oe;oe<Ie.length;oe++){var C;C=(C=Ie[oe]).replace(/Ref/,""),Te.properties[C]=Te.properties[C]?Te.properties[C]:Te.propCollection[C]}!Jt(Te)&&!Jt(Te.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?Te.setProperties(l.getProperties(),!0):Te.setProperties(l.getProperties())),l.isUpdated=!0}}}},r.prototype.registerEvents=function(t){FL(t,this)},r.prototype.twoWaySetter=function(t,e){var i=re(e,this.properties);i!==t&&(this.saveChanges(e,t,i),ui(e,f(t)?null:t,this.properties),re(e+"Change",this).emit(t))},r.prototype.addTwoWay=function(t){for(var e=this,i=function(l){re(l,n),Object.defineProperty(n,l,{get:function(){return re(l,e.properties)},set:function(h){return e.twoWaySetter(h,l)}}),ui(l+"Change",new v.vpe,n)},n=this,s=0,o=t;s<o.length;s++)i(o[s])},r.prototype.addEventListener=function(t,e){var i=re(t,this);Jt(i)||(this.ngBoundedEvents[t]||(this.ngBoundedEvents[t]=new Map),this.ngBoundedEvents[t].set(e,i.subscribe(e)))},r.prototype.removeEventListener=function(t,e){Jt(re(t,this))||this.ngBoundedEvents[t].get(e).unsubscribe()},r.prototype.trigger=function(t,e,i){var n=re(t,this),s=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),Jt(n)||n.next(e);var o=re("local"+t.charAt(0).toUpperCase()+t.slice(1),this);Jt(o)||o.call(this,e),this.isProtectedOnChange=s,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},r}(),Fa=function(){function r(){}return r.prototype.propagateChange=function(t){},r.prototype.propagateTouch=function(){},r.prototype.localChange=function(t){var e=void 0===t.checked?t.value:t.checked;this.objCheck=Iu(e),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)):e!==this.angularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)},r.prototype.registerOnChange=function(t){this.propagateChange=t},r.prototype.registerOnTouched=function(t){this.propagateTouch=t},r.prototype.twoWaySetter=function(t,e){var i=this.oldValue||re(e,this.properties),n=this.inputElement||this.element;n&&i===t&&this.value===t&&(void 0===n.value||""===n.value)||(this.saveChanges(e,t,i),ui(e,f(t)?null:t,this.properties),re(e+"Change",this).emit(t))},r.prototype.ngAfterViewInit=function(t){var e=this,i=t||this;setTimeout(function(){if(typeof window<"u"){i.appendTo(i.element);var n=i.inputElement||i.element;n.addEventListener("focus",i.ngOnFocus.bind(i)),n.addEventListener("blur",i.ngOnBlur.bind(i))}e.isFormInit=!1})},r.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},r.prototype.writeValue=function(t){void 0===this.checked?this.value=t:this.ngEle&&(this.checked="boolean"==typeof t?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?t===this.value:t:t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit},r.prototype.ngOnFocus=function(t){!0!==this.skipFromEvent&&this.focus.emit(t)},r.prototype.ngOnBlur=function(t){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(t)},r.isFormBase=!0,r}(),u3=function r3(){return XE.compile}();function pn(r){return function(t,e){var i={set:c3(e),get:d3(e,r),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}}function c3(r){return function(t){void 0!==t&&(ui(r+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=r):this.saveChanges&&(this.saveChanges(r,t,void 0),this.dataBind()))}}function d3(r,t){return function(){return re(r+"Ref",this)||t}}!function n3(r){XE.compile=r.compile}({compile:function V9(r,t){if("string"==typeof r)return u3(r,t);var e=r.elementRef.nativeElement._viewContainerRef,i=r.elementRef.nativeElement.propName;return function(n,s,o){var l=e||s.viewContainerRef,h=l.createEmbeddedView(r,{$implicit:n});h.detectChanges();var u=s&&s.registeredTemplate?s.registeredTemplate:re("currentInstance.registeredTemplate",l);return typeof u[o=o&&s.registeredTemplate?o:i]>"u"&&(u[o]=[]),u[o].push(h),h.rootNodes}}});var ni=function(){function r(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return r.prototype.setKey=function(t){return this.key=t,this},r.prototype.using=function(t){return this.dataManager=t,this},r.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):Ye.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):Ye.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.clone=function(){var t=new r;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},r.prototype.from=function(t){return this.fromTable=t,this},r.prototype.addParams=function(t,e){return this.params.push("function"==typeof e?{key:t,fn:e}:{key:t,value:e}),this},r.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.where=function(t,e,i,n,s,o){e=e?e.toLowerCase():null;var a=null;return"string"==typeof t?a=new Mn(t,e,i,n,s,o):t instanceof Mn&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},r.prototype.search=function(t,e,i,n,s){return"string"==typeof e&&(e=[e]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:s,comparer:Ye.fnOperators[i]}}),this},r.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},r.prototype.sortByForeignKey=function(t,e,i,n){var o,a,s=f(n)?"ascending":n;if("string"==typeof t&&Ye.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||"string"==typeof e)&&(s=e?e.toLowerCase():"ascending",e=Ye.fnSort(e)),i){o=r.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(a=o[l].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:s}}),this},r.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},r.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},r.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},r.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},r.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},r.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},r.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},r.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},r.prototype.foreignKey=function(t){return this.fKey=t,this},r.prototype.requiresCount=function(){return this.isCountRequired=!0,this},r.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},r.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},r.filterQueryLists=function(t,e){for(var i=t.filter(function(o){return-1!==e.indexOf(o.fn)}),n={},s=0;s<i.length;s++)n[i[s].fn]||(n[i[s].fn]=i[s].e);return n},r}(),Mn=function(){function r(t,e,i,n,s,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=n,this.ignoreAccent=s,this.isComplex=!1,this.comparer=Ye.fnOperators.processOperator(this.operator)):(t instanceof r&&i instanceof r||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return r.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"and")},r.prototype.and=function(t,e,i,n,s){return r.combine(this,t,e,i,"and",n,s)},r.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"or")},r.prototype.or=function(t,e,i,n,s){return r.combine(this,t,e,i,"or",n,s)},r.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}return this.fromJSONData(t)},r.prototype.validate=function(t){var i,n,e=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,Ye.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var s=0;s<e.length;s++)if(n=e[s].validate(t),i){if(!n)return!1}else if(n)return!0;return i},r.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},r.combinePredicates=function(t,e){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new r(t[0],e,t.slice(1))},r.combine=function(t,e,i,n,s,o,a){return e instanceof r?r[s](t,e):"string"==typeof e?r[s](t,new r(e,i,n,o,a)):Ye.throwError("Predicate - "+s+" : invalid arguments")},r.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,n=[],o=0;o<i;o++)n.push(this.fromJSONData(e[o]));return t.isComplex?new r(n[0],t.condition,n.slice(1)):new r(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},r}(),Dy={GroupGuid:"{271bbba0-1ee7}"},Ye=function(){function r(){}return r.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},r.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},r.startsWith=function(t,e){return t.slice(0,e.length)===e},r.fnSort=function(t){return"ascending"===(t=t?r.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},r.fnAscending=function(t,e){return f(t)&&f(e)||null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},r.fnDescending=function(t,e){return f(t)&&f(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},r.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},r.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},r.group=function(t,e,i,n,s,o,a){n=n||1;var l=t,h="GroupGuid";if(l.GroupGuid===Dy[h]){for(var u=function(O){if(f(s))l[O].items=p.group(l[O].items,e,i,l.level+1,null,o,a),l[O].count=l[O].items.length;else{var N,z=s.filter(function(U){return U.key===l[O].key});N=s.indexOf(z[0]),l[O].items=p.group(l[O].items,e,i,l.level+1,s[N].items,o,a),l[O].count=s[N].count}},p=this,m=0;m<l.length;m++)u(m);return l.childLevels+=1,l}var y={},C=[];C.GroupGuid=Dy[h],C.level=n,C.childLevels=0,C.records=l;for(var S=function(O){var N=T.getVal(l,O,e);if(f(o)||(N=o(N,e)),!y[N]&&(y[N]={key:N,count:0,items:[],aggregates:{},field:e},C.push(y[N]),!f(s))){var z=s.filter(function(U){return U.key===y[N].key});y[N].count=z[0].count}y[N].count=f(s)?y[N].count+=1:y[N].count,(!a||a&&i.length)&&y[N].items.push(l[O])},T=this,R=0;R<l.length;R++)S(R);if(i&&i.length){var P=function(O){for(var N={},z=void 0,U=i,ae=0;ae<i.length;ae++)if(z=r.aggregates[i[ae].type],f(s))z&&(N[U[ae].field+" - "+U[ae].type]=z(C[O].items,U[ae].field));else{var me=s.filter(function(Te){return Te.key===C[O].key});z&&(N[U[ae].field+" - "+U[ae].type]=z(me[0].items,U[ae].field))}C[O].aggregates=N};for(R=0;R<C.length;R++)P(R)}if(a&&C.length&&i.length)for(R=0;R<C.length;R++)C[R].items=[];return l.length&&C||l},r.buildHierarchy=function(t,e,i,n,s){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[h=this.getObject(t,n[o])]||(a[h]=[])).push(n[o]);for(o=0;o<i.length;o++){var h=this.getObject(s||t,i[o]);i[o][e]=a[h]}},r.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];"object"!=typeof n[l]||n[l]instanceof Array?e.push(i+l):this.getFieldList(n[l],e,i+l+".")}return e},r.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf("."))return e[t];for(var i=e,n=t.split("."),s=0;s<n.length&&null!=i;s++)i=i[n[s]];return i}},r.setValue=function(t,e,i){var a,h,n=t.toString().split("."),s=i||{},o=s,l=n.length;for(a=0;a<l;a++)h=n[a],a+1===l?o[h]=void 0===e?void 0:e:f(o[h])&&(o[h]={}),o=o[h];return s},r.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),s=t.slice(0,n),o=t.slice(n);return s=this.sort(s,e,i),o=this.sort(o,e,i),this.merge(s,o,e,i)},r.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(n){return n in r.diacritics?r.diacritics[n]:n}).join("")},r.merge=function(t,e,i,n){for(var o,s=[];t.length>0||e.length>0;)o=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,s.push(o.shift());return s},r.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},r.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},r.callAdaptorFunction=function(t,e,i,n){if(e in t){var s=t[e](i,n);f(s)||(i=s)}return i},r.getAddParams=function(t,e,i){var n={};return r.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i.params,reqParams:n}),n},r.isPlainObject=function(t){return!!t&&t.constructor===Object},r.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch{}return!!t&&"withCredentials"in t},r.getGuid=function(t){var i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,s){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===s?3&i|8:i]})},r.isNull=function(t){return null==t},r.getItemFromComparer=function(t,e,i){var n,s,o,a=0,l="string"==typeof r.getVal(t,0,e);if(t.length)for(;f(n)&&a<t.length;)n=r.getVal(t,a,e),o=t[a++];for(;a<t.length;a++)!f(s=r.getVal(t,a,e))&&(l&&(n=+n,s=+s),i(n,s)>0&&(n=s,o=t[a]));return o},r.distinct=function(t,e,i){i=!f(i)&&i;var s,n=[],o={};return t.forEach(function(a,l){(s="object"==typeof t[l]?r.getVal(t,l,e):t[l])in o||(n.push(i?t[l]:s),o[s]=1)}),n},r.processData=function(t,e){var i=this.prepareQuery(t),n=new Xe(e);t.requiresCounts&&i.requiresCount();var s=n.executeLocal(i),o={result:t.requiresCounts?s.result:s,count:s.count,aggregates:JSON.stringify(s.aggregates)};return t.requiresCounts?o:s},r.prepareQuery=function(t){var e=this,i=new ni;return t.select&&i.select(t.select),t.where&&r.parse.parseJson(t.where).filter(function(o){if(f(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var a=[];o.field?a.push(new Mn(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):a=a.concat(e.getPredicate(o.predicates)),"or"==o.condition?i.where(Mn.or(a)):"and"==o.condition&&i.where(Mn.and(a))}}),t.search&&r.parse.parseJson(t.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),t.aggregates&&t.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),t.sorted&&t.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(o){return i.group(o)}),i},r.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new Mn(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var s=[],o=this.getPredicate(n.predicates),a=0,l=Object.keys(o);a<l.length;a++)s.push(o[l[a]]);e.push("or"==n.condition?Mn.or(s):Mn.and(s))}}return e},r.serverTimezoneOffset=null,r.timeZoneHandling=!0,r.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},r.aggregates={sum:function(t,e){for(var n,i=0,s="number"!=typeof r.getVal(t,0,e),o=0;o<t.length;o++)n=r.getVal(t,o,e),!isNaN(n)&&null!==n&&(s&&(n=+n),i+=n);return i},average:function(t,e){return r.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnAscending))},max:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnDescending))},truecount:function(t,e){return new Xe(t).executeLocal((new ni).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new Xe(t).executeLocal((new ni).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},r.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},r.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},r.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},r.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},r.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},r.fnOperators={equal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?r.toLowerCase(t)===r.toLowerCase(e):t===e},notequal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),!r.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?r.toLowerCase(t)<r.toLowerCase(e):(f(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?r.toLowerCase(t)>r.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?r.toLowerCase(t)<=r.toLowerCase(e):(f(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?r.toLowerCase(t)>=r.toLowerCase(e):t>=e},contains:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?!f(t)&&!f(e)&&-1!==r.toLowerCase(t).indexOf(r.toLowerCase(e)):!f(t)&&!f(e)&&-1!==t.toString().indexOf(e)},notnull:function(t){return null!==t},isnull:function(t){return null===t},startswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.startsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.startsWith(t,e)},endswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.endsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.endsWith(t,e)},processSymbols:function(t){var e=r.operatorSymbols[t];return e?r.fnOperators[e]:r.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return r.fnOperators[t]||r.fnOperators.processSymbols(t)}},r.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,r.parse.jsonReviver):t instanceof Array?r.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&r.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&null!==t[e]?r.parse.iterateAndReviveJson(t[e]):t[e]="string"!=typeof t[e]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])?r.parse.parseJson(t[e]):r.parse.jsonReviver("",t[e])},iterateAndReviveJson:function(t){for(var e,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];r.startsWith(o,"__")||("object"==typeof(e=t[o])?e instanceof Array?r.parse.iterateAndReviveArray(e):e&&r.parse.iterateAndReviveJson(e):t[o]=r.parse.jsonReviver(t[o],e))}},jsonReviver:function(t,e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),n=r.timeZoneHandling?r.serverTimezoneOffset:null;if(i)return r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.indexOf("Z")>-1||e.indexOf("z")>-1,o=e.split(/[^0-9.]/);if(s){if(o[5].indexOf(".")>-1){var a=o[5].split(".");o[5]=a[0],o[6]=a[1]}else o[6]="00";e=r.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10),parseInt(o[6],10)),r.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),h=parseInt(o[6],10),u=parseInt(o[7],10);if(isNaN(h)&&isNaN(u))return l;e.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-u):l.setHours(l.getHours()+h,l.getMinutes()+u),e=r.dateParse.toTimeZone(l,r.serverTimezoneOffset,!1)}null==r.serverTimezoneOffset&&(e=r.dateParse.addSelfOffset(e))}}return e},isJson:function(t){return"string"==typeof t[0]?t:r.parse.parseJson(t)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(t,e){return r.isPlainObject(t)?r.parse.jsonReplacer(t,e):t instanceof Array?r.parse.arrayReplacer(t):t instanceof Date?r.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,s=0,o=Object.keys(t);s<o.length;s++){var a=o[s];if((i=t[a])instanceof Date){var l=i;null==r.serverTimezoneOffset?t[a]=r.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*r.serverTimezoneOffset),t[a]=r.dateParse.toTimeZone(r.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)r.isPlainObject(t[e])?t[e]=r.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=r.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if("value"===t&&e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.split(/[^0-9]/);e=r.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(e instanceof Date)return e=r.dateParse.addSelfOffset(e),null===r.serverTimezoneOffset?r.dateParse.toTimeZone(r.dateParse.addSelfOffset(e),null).toJSON():(e=r.dateParse.toTimeZone(e,e.getTimezoneOffset()/60*2-r.serverTimezoneOffset,!1)).toJSON()}return e}},r.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(t,e,i){if(null===e)return t;var n=i?r.dateParse.toUTC(t):t;return new Date(+n-36e5*e)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",s=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+n+s(i/60)+":"+s(i%60)}},r}(),Au=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gd={GroupGuid:"{271bbba0-1ee7}"},VL=function(){function r(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=r,this.dataSource=t,this.pvt={}}return r.prototype.processResponse=function(t,e,i,n){return t},r}(),x0=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Au(t,r),t.prototype.processQuery=function(e,i){for(var a,l,m,n=e.dataSource.json.slice(0),s=n.length,o=!0,h={},u=0,p=[],y=0;y<i.lazyLoad.length;y++)u++,h[i.lazyLoad[y].key]=i.lazyLoad[y].value;var C={};for(y=0;y<i.queries.length;y++)"onPage"!==(l=i.queries[y]).fn&&"onGroup"!==l.fn||!i.lazyLoad.length?(a=this[l.fn].call(this,n,l.e,i),"onAggregates"===l.fn?C[l.e.field+" - "+l.e.type]=a:n=void 0!==a?a:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(o=!1),o&&(s=n.length)):("onGroup"===l.fn&&p.push(l.e),"onPage"===l.fn&&(m=l.e));if(u){var T=this.lazyLoadGroup({query:i,lazyLoad:h,result:n,group:p,page:m});n=T.result,s=T.count}return i.isCountRequired&&(n={result:n,count:s,aggregates:C}),n},t.prototype.lazyLoadGroup=function(e){var i=0,n=this.getAggregate(e.query),s=e.result;if(f(e.lazyLoad.onDemandGroupInfo)){i=(s=Ye.group(s,e.group[0].fieldName,n,null,null,e.group[0].comparer,!0)).length;var h=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,h)}else{for(var o=e.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)s=this.onWhere(s,o.where[a]);e.group.length!==o.level&&(s=Ye.group(s,e.group[o.level].fieldName,n,null,null,e.group[0].comparer,!0)),i=s.length,h=s,s=(s=s.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(s,h)}return{result:s,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var n="GroupGuid",s="childLevels",o="level",a="records";e[n]=i[n],e[s]=i[s],e[o]=i[o],e[a]=i[a]}return e},t.prototype.getAggregate=function(e){var i=ni.filterQueries(e.queries,"onAggregates"),n=[];if(i.length)for(var s=void 0,o=0;o<i.length;o++)n.push({type:(s=i[o].e).type,field:Ye.getValue(s.field,e)});return n},t.prototype.batchRequest=function(e,i,n){var s,o=i.deletedRecords.length;for(s=0;s<i.addedRecords.length;s++)this.insert(e,i.addedRecords[s]);for(s=0;s<i.changedRecords.length;s++)this.update(e,n.key,i.changedRecords[s]);for(s=0;s<o;s++)this.remove(e,n.key,i.deletedRecords[s]);return i},t.prototype.onWhere=function(e,i){return e&&e.length?e.filter(function(n){if(i)return i.validate(n)}):e},t.prototype.onAggregates=function(e,i){var n=Ye.aggregates[i.type];return e&&n&&0!==e.length?n(e,i.field):null},t.prototype.onSearch=function(e,i){return e&&e.length?(0===i.fieldNames.length&&Ye.getFieldList(e[0],i.fieldNames),e.filter(function(n){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(n,Ye.getObject(i.fieldNames[s],n),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,i,n){if(!e||!e.length)return e;var s,o=Ye.getValue(i.fieldName,n);if(!o)return e.sort(i.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)!o[a]||(s=i.comparer,Ye.endsWith(o[a]," desc")&&(s=Ye.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=Ye.sort(e,o[a],s));return e}return Ye.sort(e,o,i.comparer)},t.prototype.onGroup=function(e,i,n){if(!e||!e.length)return e;var s=this.getAggregate(n);return Ye.group(e,Ye.getValue(i.fieldName,n),s,null,null,i.comparer)},t.prototype.onPage=function(e,i,n){var s=Ye.getValue(i.pageSize,n),o=(Ye.getValue(i.pageIndex,n)-1)*s;return e&&e.length?e.slice(o,o+s):e},t.prototype.onRange=function(e,i){return e&&e.length?e.slice(Ye.getValue(i.start),Ye.getValue(i.end)):e},t.prototype.onTake=function(e,i){return e&&e.length?e.slice(0,Ye.getValue(i.nos)):e},t.prototype.onSkip=function(e,i){return e&&e.length?e.slice(Ye.getValue(i.nos)):e},t.prototype.onSelect=function(e,i){return e&&e.length?Ye.select(e,Ye.getValue(i.fieldNames)):e},t.prototype.insert=function(e,i,n,s,o){return f(o)?e.dataSource.json.push(i):e.dataSource.json.splice(o,0,i)},t.prototype.remove=function(e,i,n,s){var a,o=e.dataSource.json;for("object"==typeof n&&!(n instanceof Date)&&(n=Ye.getObject(i,n)),a=0;a<o.length&&Ye.getObject(i,o[a])!==n;a++);return a!==o.length?o.splice(a,1):null},t.prototype.update=function(e,i,n,s){var a,l,o=e.dataSource.json;for(f(i)||(l=re(i,n)),a=0;a<o.length&&(f(i)||re(i,o[a])!==l);a++);return a<o.length?Qs(o[a],n):null},t}(VL),pl=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Au(t,r),t.prototype.processQuery=function(e,i,n){var h,u,s=this.getQueryRequest(i),o=ni.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=e.dataSource.url,p=null,m=this.options,y={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?u=((u=Ye.getValue((h=o.onPage).pageIndex,i))-1)*(p=Ye.getValue(h.pageSize,i)):"onRange"in o&&(u=(h=o.onRange).start,p=h.end-h.start);for(var C=0;C<s.sorts.length;C++)h=Ye.getValue(s.sorts[C].e.fieldName,i),y.sorts.push(Ye.callAdaptorFunction(this,"onEachSort",{name:h,direction:s.sorts[C].e.direction},i));for(n&&(h=this.getFiltersFrom(n,i))&&y.filters.push(Ye.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)),C=0;C<s.filters.length;C++){var S=Ye.callAdaptorFunction(this,"onEachWhere",s.filters[C].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!f(s.filters[C].e.key)&&s.filters.length>1&&(S="("+S+")"),y.filters.push(S);for(var R=0,P="object"==typeof y.filters[C]?Object.keys(y.filters[C]):[];R<P.length;R++)Ye.isNull(y[O=P[R]])&&delete y[O]}for(C=0;C<s.searches.length;C++)y.searches.push(Ye.callAdaptorFunction(this,"onEachSearch",{fields:(h=s.searches[C].e).fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(C=0;C<s.groups.length;C++)y.groups.push(Ye.getValue(s.groups[C].e.fieldName,i));for(C=0;C<s.aggregates.length;C++)y.aggregates.push({type:(h=s.aggregates[C].e).type,field:Ye.getValue(h.field,i)});var N={};if(this.getRequestQuery(m,i,o,y,N),Ye.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:a,reqParams:N}),i.lazyLoad.length)for(C=0;C<i.lazyLoad.length;C++)N[i.lazyLoad[C].key]=i.lazyLoad[C].value;for(var U=0,ae=Object.keys(N);U<ae.length;U++){var O;(Ye.isNull(N[O=ae[U]])||""===N[O]||0===N[O].length)&&delete N[O]}(!(m.skip in N)||!(m.take in N))&&null!==p&&(N[m.skip]=Ye.callAdaptorFunction(this,"onSkip",u,i),N[m.take]=Ye.callAdaptorFunction(this,"onTake",p,i));var me=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(N,Ye.parse.jsonDateReplacer),url:l,pvtData:me,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(N,i,e),{type:"GET",url:(h=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+h).length?l.replace(/\/*$/,h):l,pvtData:me})},t.prototype.getRequestQuery=function(e,i,n,s,o){var l=o;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?Ye.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in n?Ye.callAdaptorFunction(this,"onExpand",{selects:Ye.getValue(n.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in n&&!i.distincts.length?Ye.callAdaptorFunction(this,"onSelect",Ye.getValue(n.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?Ye.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=s.searches.length?Ye.callAdaptorFunction(this,"onSearch",s.searches,i):"",l[e.skip]="onSkip"in n?Ye.callAdaptorFunction(this,"onSkip",Ye.getValue(n.onSkip.nos,i),i):"",l[e.take]="onTake"in n?Ye.callAdaptorFunction(this,"onTake",Ye.getValue(n.onTake.nos,i),i):"",l[e.where]=s.filters.length||s.searches.length?Ye.callAdaptorFunction(this,"onWhere",s.filters,i):"",l[e.sortBy]=s.sorts.length?Ye.callAdaptorFunction(this,"onSortBy",s.sorts,i):"",l[e.group]=s.groups.length?Ye.callAdaptorFunction(this,"onGroup",s.groups,i):"",l[e.aggregates]=s.aggregates.length?Ye.callAdaptorFunction(this,"onAggregates",s.aggregates,i):"",l.param=[]},t.prototype.convertToQueryString=function(e,i,n){return""},t.prototype.processResponse=function(e,i,n,s,o,a){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){var l=Ye.timeZoneHandling;i&&!i.timeZoneHandling&&(Ye.timeZoneHandling=!1),e=Ye.parse.parseJson(e),Ye.timeZoneHandling=l}var h=o,u=h.pvtData||{},p=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var m=JSON.parse(h.data);if(m&&"batch"===m.action&&e&&e.addedRecords)return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var y={};e&&"count"in e&&(y.count=e.count),y.result=e&&e.result?e.result:e;var C=!1;if(Array.isArray(e.result)&&e.result.length&&(f(e.result[0].key)||(y.result=this.formRemoteGroupedData(y.result,1,u.groups.length-1)),n&&n.lazyLoad.length&&u.groups.length))for(var P=0;P<n.lazyLoad.length;P++)"onDemandGroupInfo"===n.lazyLoad[P].key&&u.groups.length===n.lazyLoad[P].value.level&&(C=!0);return C||this.getAggregateResult(u,e,y,p,n),Ye.isNull(y.count)?y.result:{result:y.result,count:y.count,aggregates:y.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,n){for(var s=0;s<e.length;s++)e[s].items.length&&Object.keys(e[s].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[s].items,i+1,n-1);var o="GroupGuid",h="records";return e[o]=gd[o],e.level=i,e.childLevels=n,e[h]=e[0].items.length?this.getGroupedRecords(e,!f(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var n=[],o=0;o<e.length;o++)if(i)n=n.concat(e[o].items.records);else for(var a=0;a<e[o].items.length;a++)n.push(e[o].items[a]);return n},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(de({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},Ye.getAddParams(this,e,s)))}},t.prototype.beforeSend=function(e,i){},t.prototype.insert=function(e,i,n,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:i,table:n,action:"insert"},Ye.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{key:n,keyColumn:i,table:s,action:"remove"},Ye.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:n,action:"update",keyColumn:i,key:Ye.getObject(i,n),table:s},Ye.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,i){var s,n=i.fKey,o=n,a=i.key,l=[];"object"!=typeof e[0]&&(o=null);for(var h=0;h<e.length;h++)s="object"==typeof e[0]?Ye.getObject(a||o,e[h]):e[h],l.push(new Mn(n,"equal",s));return Mn.or(l)},t.prototype.getAggregateResult=function(e,i,n,s,o){var a=i;if(i&&i.result&&(a=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,u=a,p={};i.aggregate&&(u=i.aggregate);for(var m=0;m<l.length;m++)(h=Ye.aggregates[l[m].type])&&(p[l[m].field+" - "+l[m].type]=h(u,l[m].field));n.aggregates=p}var C=Array.isArray(i.result)&&i.result.length&&!f(i.result[0].key);if(e&&e.groups&&e.groups.length&&!C){var S=e.groups;for(m=0;m<S.length;m++){f(s)||(s=Ye.group(s,S[m]));var R=ni.filterQueries(o.queries,"onGroup")[m].e;a=Ye.group(a,S[m],e.aggregates,null,s,R.comparer)}n.result=a}return n},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=ni.filterQueries(e.queries,"onSortBy"),i.groups=ni.filterQueries(e.queries,"onGroup"),i.filters=ni.filterQueries(e.queries,"onWhere"),i.searches=ni.filterQueries(e.queries,"onSearch"),i.aggregates=ni.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var n=0,s=e.params;n<s.length;n++){var o=s[n];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),i.params[o.key]=i[o.key]}},t}(VL),Iy=function(r){function t(e){var i=r.call(this)||this;return i.options=de({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),de(i.options,e||{}),i}return Au(t,r),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var o,a,s="",l=e.value,h=typeof l,u=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+Ye.parse.replacer(l)+"'"),"string"===h&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),l=encodeURIComponent(l),n&&(u="cast("+u+", 'Edm.String')"),Ye.parse.isGuid(l="'"+l+"'")&&(a="guid"),e.ignoreCase&&(a||(u="tolower("+u+")"),l=l.toLowerCase())),o=Ye.odBiOperator[e.operator])return s+=u,s+=o,a&&(s+=a),s+l;if("substringof"===(o=f(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?Ye.odUniOperator[e.operator]:Ye.odv4UniOperator[e.operator])){var p=l;l=u,u=p}return s+=o+"(",s+=u+",",a&&(s+=a),s+(l+")")},t.prototype.addParams=function(e){r.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,n){for(var s=[],o=0;o<e.predicates.length;o++)s.push("("+this.onEachWhere(e.predicates[o],i,n)+")");return s.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,n){return e.isComplex?this.onComplexPredicate(e,i,n):this.onPredicate(e,i,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&Ye.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],n=0;n<e.fields.length;n++)i.push(new Mn(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=Mn.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,i,n){Ye.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(i.setRequestHeader("Accept",this.options.multipartAccept),i.setRequestHeader("DataServiceVersion","2.0"),i.overrideMimeType("text/plain; charset=x-user-defined")):i.setRequestHeader("Accept",this.options.accept),i.setRequestHeader("DataServiceVersion","2.0"),i.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,n,s,o,a){var l="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}if(!f(e.d)){var p=n&&n.isCountRequired?e.d.results:e.d,m="__metadata";if(!f(p))for(var y=0;y<p.length;y++)f(p[y][m])||delete p[y][m]}var C=o&&o.pvtData,S=this.processBatchResponse(e,n,s,o,a);if(S)return S;var T=s&&o.getResponseHeader("DataServiceVersion"),R=null,P=T&&parseInt(T,10)||2;if(n&&n.isCountRequired){var O="__count";(e[O]||e["odata.count"])&&(R=e[O]||e["odata.count"]),e.d&&(e=e.d),(e[O]||e["odata.count"])&&(R=e[O]||e["odata.count"])}3===P&&e.value&&(e=e.value),e.d&&(e=e.d),P<3&&e.results&&(e=e.results);var N={};return N.count=R,N.result=e,this.getAggregateResult(C,e,N,null,n),Ye.isNull(R)?N.result:{result:N.result,count:N.count,aggregates:N.aggregates}},t.prototype.convertToQueryString=function(e,i,n){var s=[],o="table",a=e[o]||"";delete e[o],n.dataSource.requiresFormat&&(e.$format="json");for(var u=0,p=Object.keys(e);u<p.length;u++){var m=p[u];s.push(m+"="+e[m])}return s=s.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},t.prototype.localTimeReplacer=function(e,i){for(var n=0,s=f(i)?[]:Object.keys(i);n<s.length;n++){var o=s[n];i[o]instanceof Date&&(i[o]=Ye.dateParse.toLocalTime(i[o]))}return i},t.prototype.insert=function(e,i,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,n,s){var o;return o="string"!=typeof n||Ye.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+o}},t.prototype.update=function(e,i,n,s,o,a){var l;return"PATCH"===this.options.updateType&&!f(a)&&(n=this.compareAndRemove(n,a,i)),l="string"!=typeof n[i]||Ye.parse.isGuid(n[i])?"("+n[i]+")":"('"+n[i]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+l,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,n,s,o){var a=n.guid=Ye.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var h={url:n.url,key:n.key,cid:1,cSet:Ye.getGuid(this.options.changeSet)},u="--"+a+"\n";return u+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.addedRecords,h,e),u+=this.generateUpdateRequest(i.changedRecords,h,e,o?o.changedRecords:[]),u+=this.generateDeleteRequest(i.deletedRecords,h,e),u+=h.cSet+"--\n",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:u+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"DELETE ",url:function(a,l,h){var u=Ye.getObject(h,a[l]);return"number"==typeof u||Ye.parse.isGuid(u)?"("+u+")":u instanceof Date?"("+a[l][h].toJSON()+")":"('"+u+"')"},data:function(a,l){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,i,n,s){var o=this;return e?(e.forEach(function(h){return h=o.compareAndRemove(h,s.filter(function(u){return Ye.getObject(i.key,u)===Ye.getObject(i.key,h)})[0],i.key)}),this.generateBodyContent(e,i,{method:this.options.updateType+" ",url:function(h,u,p){return"number"==typeof h[u][p]||Ye.parse.isGuid(h[u][p])?"("+h[u][p]+")":h[u][p]instanceof Date?"("+h[u][p].toJSON()+")":"('"+h[u][p]+"')"},data:function(h,u){return JSON.stringify(h[u])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,n,s){for(var o="",a=0;a<e.length;a++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(s.dataSource.insertUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(s.dataSource.updateUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(s.dataSource.removeUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",f(e[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),o+=n.data(e,a);return o},t.prototype.processBatchResponse=function(e,i,n,s,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&Ye.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){var a=n.getResponseHeader("Content-Type"),l=void 0,h=void 0,u=e+"";if(a=a.substring(a.indexOf("=batchresponse")+1),(u=u.split(a)).length<2)return{};var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(u=u[1]);p&&u.replace(p[0],"");for(var y=(u=u.split(p?p[1]:"")).length;y>-1;y--)!/\bContent-ID:/i.test(u[y])||!/\bHTTP.+201/.test(u[y])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(u[y])[1],10),o.addedRecords[l]&&(h=Ye.parse.parseJson(/^\{.+\}/m.exec(u[y])[0]),de({},o.addedRecords[l],this.processResponse(h))));return o}return null},t.prototype.compareAndRemove=function(e,i,n){var s=this;return f(i)||Object.keys(e).forEach(function(o){o!==n&&"@odata.etag"!==o&&(Ye.isPlainObject(e[o])?(s.compareAndRemove(e[o],i[o]),0===Object.keys(e[o]).filter(function(l){return"@odata.etag"!==l}).length&&delete e[o]):(e[o]===i[o]||e[o]&&i[o]&&e[o].valueOf()===i[o].valueOf())&&delete e[o])}),e},t}(pl),JE=function(r){function t(){var e=r.call(this)||this;return ui("beforeSend",pl.prototype.beforeSend,e),e}return Au(t,r),t.prototype.insert=function(e,i,n,s,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:i,table:n,action:"insert"},Ye.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return r.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{key:n,keyColumn:i,table:s,action:"remove"},Ye.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(de({},{value:n,action:"update",keyColumn:i,key:n[i],table:s},Ye.getAddParams(this,e,o)))}},t.prototype.processResponse=function(e,i,n,s,o,a,l){var h;if(e="batch"===(o?JSON.parse(o.data):e).action?Ye.parse.parseJson(e):e,"add"===this.updateType&&r.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&r.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)r.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)r.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)r.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(de({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n.url,key:n.key},Ye.getAddParams(this,e,s)))}},t.prototype.addParams=function(e){(new pl).addParams(e)},t}(x0),p3=function(r){function t(e){var i=r.call(this)||this;return i.options=de({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),de(i.options,e||{}),i}return Au(t,r),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(pl),HL=function(r){function t(e,i,n){var s=r.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,f(e)||(s.cacheAdaptor=e),s.pageSize=n,s.guidId=Ye.getGuid("cacheAdaptor"),window.localStorage.setItem(s.guidId,JSON.stringify({keys:[],results:[]}));var a=s.guidId;return f(i)||setInterval(function(){var l;l=Ye.parse.parseJson(window.localStorage.getItem(a));for(var h=[],u=0;u<l.results.length;u++){var p=+new Date,m=+new Date(l.results[u].timeStamp);l.results[u].timeStamp=p-m,p-m>i&&h.push(u)}for(u=0;u<h.length;u++)l.results.splice(h[u],1),l.keys.splice(h[u],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),s}return Au(t,r),t.prototype.generateKey=function(e,i){var n=this.getQueryRequest(i),s=ni.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,a="onPage";a in s&&(o+=s[a].pageIndex),n.sorts.forEach(function(m){o+=m.e.direction+m.e.fieldName}),n.groups.forEach(function(m){o+=m.e.fieldName}),n.searches.forEach(function(m){o+=m.e.searchKey});for(var l=0;l<n.filters.length;l++){var h=n.filters[l];if(h.e.isComplex){var u=i.clone();u.queries=[];for(var p=0;p<h.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:h.e.predicates[p],filter:i.queries.filter});o+=h.e.condition+this.generateKey(e,u)}else o+=h.e.field+h.e.operator+h.e.value}return o},t.prototype.processQuery=function(e,i,n){var o,s=this.generateKey(e.dataSource.url,i),a=(o=Ye.parse.parseJson(window.localStorage.getItem(this.guidId)))?o.results[o.keys.indexOf(s)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,i,n,s,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&Ye.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,i,n,s,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=n?this.generateKey(i.dataSource.url,n):i.dataSource.url,h={},u=(h=Ye.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(l);for(-1!==u&&(h.results.splice(u,1),h.keys.splice(u,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,n){!f(this.cacheAdaptor.options.batch)&&Ye.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&i.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,n,s)},t.prototype.insert=function(e,i,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,n)},t.prototype.remove=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,n,s)},t.prototype.batchRequest=function(e,i,n){return this.cacheAdaptor.batchRequest(e,i,n)},t}(pl),Xe=function(){function r(t,e,i){var s,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?s={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),s={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof JE||t.adaptor instanceof p3||t.url),requiresFormat:t.requiresFormat}):Ye.throwError("DataManager: Invalid arguments"),void 0===s.requiresFormat&&!Ye.isCors()&&(s.requiresFormat=!!f(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=e,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Iy,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new ni),this.ready.then(function(o){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=o.result,n.adaptor=new x0})):this.adaptor=s.offline?new x0:new Iy,!s.jsonp&&this.adaptor instanceof Iy&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new HL(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}return r.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},r.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof ni)&&Ye.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||Ye.throwError("DataManager - executeLocal() : Json data is required to execute");var e=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,n=t.subQuery.lookups,s=t.isCountRequired?e.result:e;n&&n instanceof Array&&Ye.buildHierarchy(t.subQuery.fKey,i,s,n,t.subQuery.key);for(var o=0;o<s.length;o++)s[o][i]instanceof Array&&(s[o]=de({},{},s[o]),s[o][i]=this.adaptor.processResponse(t.subQuery.using(new r(s[o][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},r.prototype.executeQuery=function(t,e,i,n){var s=this,o="makeRequest";"function"==typeof t&&(n=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof ni||Ye.throwError("DataManager - executeQuery() : A query is required to execute");var a=new Qa,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!f(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,t);f(this.adaptor[o])?!f(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=r.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[o](h,a,l,t)}else r.nextTick(function(){var u=s.executeLocal(t);l=r.getDeferedArgs(t,u,l),a.resolve(l)});return(e||i)&&a.promise.then(e,i),n&&a.promise.then(n,n),a.promise},r.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},r.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},r.prototype.extendRequest=function(t,e,i){return de({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},r.prototype.makeRequest=function(t,e,i,n){var s=this,o=!!n.subQuerySelector,a=function(T){i.error=T,e.reject(i)},l=function(T,R,P,O,N,z,U){i.xhr=P,i.count=R?parseInt(R.toString(),10):0,i.result=T,i.request=O,i.aggregates=z,i.actual=N,i.virtualSelectRecords=U,e.resolve(i)},h=function(T,R){var P=new Qa,O={parent:i};n.subQuery.isChild=!0;var N=s.adaptor.processQuery(s,n.subQuery,T?s.adaptor.processResponse(T):R),z=s.makeRequest(N,P,O,n.subQuery);return o||P.then(function(U){T&&(Ye.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,T,U,n.subQuery.key),l(T,U.count,U.xhr))},a),z},p=this.extendRequest(t,function(T,R){if(s.isGraphQLAdaptor(s.adaptor)&&!f(T.errors))return a(T.errors);s.isCustomDataAdaptor(s.adaptor)&&(R=de({},s.ajaxReqOption,R)),-1===R.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&s.dateParse&&(T=Ye.parse.parseJson(T));var P=s.adaptor.processResponse(T,s,n,R.httpRequest,R),O=0,N=null,U=T.virtualSelectRecords;n.isCountRequired&&(O=P.count,N=P.aggregates,P=P.result),n.subQuery?o||h(P,R):l(P,O,R.httpRequest,R.type,T,N,U)},a);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=p,this.adaptor.options.getData({data:p.data,onSuccess:p.onSuccess,onFailure:p.onFailure});else{var m=new yp(p);m.beforeSend=function(){s.beforeSend(m.httpRequest,m)},(p=m.send()).catch(function(T){return!0}),this.requests.push(m)}if(o){var S=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});S&&S.length?Promise.all([p,h(null,S)]).then(function(){for(var T=[],R=0;R<arguments.length;R++)T[R]=arguments[R];var P=T[0],O=s.adaptor.processResponse(P[0],s,n,s.requests[0].httpRequest,s.requests[0]),N=0;n.isCountRequired&&(N=O.count,O=O.result);var z=s.adaptor.processResponse(P[1],s,n.subQuery,s.requests[1].httpRequest,s.requests[1]);N=0,n.subQuery.isCountRequired&&(N=z.count,z=z.result),Ye.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,O,z,n.subQuery.key),o=!1,l(O,N,s.requests[0].httpRequest)}):o=!1}return p},r.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var n,i=this.dataSource.headers,s=0;i&&s<i.length;s++){n=[];for(var a=0,l=Object.keys(i[s]);a<l.length;a++){var h=l[a];n.push(h),t.setRequestHeader(h,i[s][h])}}},r.prototype.saveChanges=function(t,e,i,n,s){var o=this;i instanceof ni&&(n=i,i=null);var a={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,n||new ni,s),h="doAjaxRequest";if(this.dataSource.offline)return l;if(f(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var u=new Qa,p=new yp(l);return p.beforeSend=function(){o.beforeSend(p.httpRequest,p)},p.onSuccess=function(m,y){o.isGraphQLAdaptor(o.adaptor)&&(f(m.errors)||p.onFailure(JSON.stringify(m.errors))),u.resolve(o.adaptor.processResponse(m,o,null,y.httpRequest,y,t,a))},p.onFailure=function(m){u.reject([{error:m}])},p.send().catch(function(m){return!0}),u.promise}return this.adaptor[h](l)},r.prototype.insert=function(t,e,i,n){e instanceof ni&&(i=e,e=null);var s=this.adaptor.insert(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.addRecord):this.adaptor[o](s)},r.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=Ye.getObject(t,e)),i instanceof ni&&(n=i,i=null);var s=this.adaptor.remove(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.deleteRecord):this.adaptor[o](s)},r.prototype.update=function(t,e,i,n,s){i instanceof ni&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,s),a="doAjaxRequest";return this.dataSource.offline?o:f(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)},r.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},r.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},r.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);f(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=de({},this.ajaxReqOption,e));try{Ye.parse.parseJson(t)}catch{t=[]}t=this.adaptor.processResponse(Ye.parse.parseJson(t),this,null,e.httpRequest,e),this.ajaxDeffered.resolve(t)},r.prototype.failureFunc=function(t){this.ajaxDeffered.reject([{error:t}])},r.prototype.doAjaxRequest=function(t,e){var i=this;if(t=de({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.ajaxDeffered=new Qa,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new yp(t);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(s){return!0})}return this.ajaxDeffered.promise},r}(),Qa=function(){return function r(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}();function ex(r,t,e,i,n,s){var o=i;if(i.tagName===t){var a=re("ej2_instances",i);o=r("input",{attrs:{type:e}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,u=i.attributes.length;h<u;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);qe(i,{class:n}),i.appendChild(o),ui("ej2_instances",a,o),Oo(i,"ej2_instances")}return o}function f3(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}function fh(r,t,e){void 0===t&&(t=!1),void 0===e&&(e={});var i=r("div",{className:"e-checkbox-wrapper e-css"});if(e.cssClass&&B([i],e.cssClass.split(" ")),e.enableRtl&&i.classList.add("e-rtl"),t){var n=r("span",{className:"e-ripple-container"});Lr(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var s=r("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),i.appendChild(s),e.label){var o=r("span",{className:"e-label"});e.disableHtmlEncode?o.textContent=e.label:o.innerHTML=e.label,i.appendChild(o)}return i}function mm(r,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(r.type,!1,!0),t.dispatchEvent(e)}}function hk(r,t){r.element.getAttribute("ejs-for")&&t.appendChild(r.createElement("input",{attrs:{name:r.name||r.element.name,value:"false",type:"hidden"}}))}var Ou,bm,bx,Cm,Py,Uh,uk=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),jh=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},ku_RTL=(new h0,"e-rtl"),Is=function(r){function t(e,i){return r.call(this,e,i)||this}return uk(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=Lr(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&B([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?bs.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(ku_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&A.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&A.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",ku_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),W([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&we(i),this.unWireEvents(),pc&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):we(n):this.setIconCss();break;case"iconPosition":W([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&we(n),this.setIconCss();break;case"cssClass":i.cssClass&&W([this.element],i.cssClass.split(" ")),e.cssClass&&B([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(ku_RTL):this.element.classList.remove(ku_RTL);break;case"content":f3(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=bs.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?A.add(this.element,"click",this.btnClickHandler,this):(A.remove(this.element,"click",this.btnClickHandler),W([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},jh([D("Left")],t.prototype,"iconPosition",void 0),jh([D("")],t.prototype,"iconCss",void 0),jh([D(!1)],t.prototype,"disabled",void 0),jh([D(!1)],t.prototype,"isPrimary",void 0),jh([D("")],t.prototype,"cssClass",void 0),jh([D("")],t.prototype,"content",void 0),jh([D(!1)],t.prototype,"isToggle",void 0),jh([D()],t.prototype,"locale",void 0),jh([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),jh([K()],t.prototype,"created",void 0),jh([an],t)}(ur),m3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),gh=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},T0="e-check",ck="e-checkbox-disabled",Ay="e-frame",tx="e-stop",ix="e-label",nx="e-ripple-container",rx="e-ripple-check",sx="e-ripple-stop",dk="e-rtl",ox="e-checkbox-wrapper",zL=["title","class","style","disabled","readonly","name","value"],fl=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return m3(t,r),t.prototype.changeState=function(e){var i,n=this.getWrapper().getElementsByClassName(Ay)[0];pc&&(i=this.getWrapper().getElementsByClassName(nx)[0]),"check"===e?(n.classList.remove(tx),n.classList.add(T0),i&&(i.classList.remove(sx),i.classList.add(rx)),this.element.checked=!0,this.element.required&&this.validCheck?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(W([n],[T0,tx]),i&&W([i],[rx,sx]),this.element.checked=!1,this.element.required&&this.validCheck?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(n.classList.remove(T0),n.classList.add(tx),i&&(i.classList.remove(rx),i.classList.add(sx)),this.element.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();r.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),we(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(n){e.element.removeAttribute(n)})):(["class"].forEach(function(n){i.removeAttribute(n)}),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(ox)||(e=this.createElement("div",{className:ox}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),n=this.createElement("span",{className:"e-icons "+Ay});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(dk),this.cssClass&&B([e],this.cssClass.split(" ")),e.appendChild(i),i.appendChild(this.element),hk(this,i),i.appendChild(n),pc){var s=this.createElement("span",{className:nx});"Before"===this.labelPosition?i.appendChild(s):i.insertBefore(s,n),Lr(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,mm(e,this.getWrapper().getElementsByClassName(nx)[0])},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(nx)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element"),s=0;s<n.length-1;s++)i.removeChild(i.childNodes[s]);mm(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,n.classList.remove(ck),n.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&W([n],i.cssClass.split(" ")),e.cssClass&&B([n],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?n.classList.add(dk):n.classList.remove(dk);break;case"label":this.setText(e.label);break;case"labelPosition":var l=n.getElementsByClassName(ix)[0],h=n.getElementsByTagName("label")[0];we(l),"After"===e.labelPosition?h.appendChild(l):h.insertBefore(l,n.getElementsByClassName(Ay)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=ex(this.createElement,"EJS-CHECKBOX","checkbox",e,ox),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Sn("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(ck),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var n=i.getElementsByClassName(ix)[0];if(n)n.textContent=e;else{e=this.enableHtmlSanitizer?bs.sanitize(e):e,n=this.createElement("span",{className:ix,innerHTML:e});var s=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(n,i.getElementsByClassName(Ay)[0]):s.appendChild(n)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;A.remove(e,"click",this.clickHandler),A.remove(this.element,"keyup",this.keyUpHandler),A.remove(this.element,"focus",this.focusHandler),A.remove(this.element,"focusout",this.focusOutHandler);var i=e.getElementsByTagName("label")[0];A.remove(i,"mousedown",this.labelMouseDownHandler),A.remove(i,"mouseup",this.labelMouseUpHandler);var n=j(this.element,"form");n&&A.remove(n,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&A.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();A.add(e,"click",this.clickHandler,this),A.add(this.element,"keyup",this.keyUpHandler,this),A.add(this.element,"focus",this.focusHandler,this),A.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];A.add(i,"mousedown",this.labelMouseDownHandler,this),A.add(i,"mouseup",this.labelMouseUpHandler,this);var n=j(this.element,"form");n&&A.add(n,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&A.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!e){var s=this.value.indexOf(i);return this.checked?s<0&&this.value.push(i):s>-1&&this.value.splice(s,1),this.value}for(var n=0;n<this.value.length;n++)i===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(zL.indexOf(n)>-1){var s=this.getWrapper();"class"===n?B([s],this.htmlAttributes[n].split(" ")):"title"===n?s.setAttribute(n,this.htmlAttributes[n]):"style"===n?this.getWrapper().getElementsByClassName(Ay)[0].setAttribute(n,this.htmlAttributes[n]):this.element.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},gh([K()],t.prototype,"change",void 0),gh([K()],t.prototype,"created",void 0),gh([D(!1)],t.prototype,"checked",void 0),gh([D("")],t.prototype,"cssClass",void 0),gh([D(!1)],t.prototype,"disabled",void 0),gh([D(!1)],t.prototype,"indeterminate",void 0),gh([D("")],t.prototype,"label",void 0),gh([D("After")],t.prototype,"labelPosition",void 0),gh([D("")],t.prototype,"name",void 0),gh([D("")],t.prototype,"value",void 0),gh([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),gh([D({})],t.prototype,"htmlAttributes",void 0),gh([an],t)}(ur),ky=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ru=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},pk="e-label",v3="e-ripple-container",jL="e-rtl",ax="e-radio-wrapper",qL=["title","class","style","disabled","readonly","name","value"],vm=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isFocused=!1,s}var e;return ky(t,r),e=t,t.prototype.changeHandler=function(i){this.checked=!0,this.dataBind();var n=this.element.getAttribute("value");this.trigger("change",{value:n=this.isVue&&n?this.element.value:this.value,event:i}),"EJS-RADIOBUTTON"===this.tagName&&i.stopPropagation()},t.prototype.updateChange=function(){for(var i,n,s=this.getRadioGroup(),o=0;o<s.length;o++)(i=s[o])!==this.element&&((n=Zo(i,e)).checked=!1,"EJS-RADIOBUTTON"===this.tagName&&(n.angularValue=this.value))},t.prototype.destroy=function(){var i=this,n=this.wrapper;r.prototype.destroy.call(this),n&&(this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(n.parentNode&&n.parentNode.insertBefore(this.element,n),we(n),this.element.checked=!1,["name","value","disabled"].forEach(function(s){i.element.removeAttribute(s)})):(["role","aria-checked","class"].forEach(function(s){n.removeAttribute(s)}),n.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var i=this.getLabel();i&&i.classList.remove("e-focus")},t.prototype.getModuleName=function(){return"radio"},t.prototype.getSelectedValue=function(){for(var i,n=this.getRadioGroup(),s=0,o=n.length;s<o;s++)if((i=n[s]).checked)return i.value;return""},t.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element?this.element.parentElement:null},t.prototype.getLabel=function(){return this.element?this.element.nextElementSibling:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var i=this.element.getAttribute("value");this.isVue&&i&&i===this.value&&(this.checked=!0),(this.isVue?this.value&&!i:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var i,n=this.element.parentElement;n.classList.contains(ax)||(n=this.createElement("div",{className:ax}),this.element.parentNode.insertBefore(n,this.element));var s=this.createElement("label",{attrs:{for:this.element.id}});n.appendChild(this.element),n.appendChild(s),pc&&(i=this.createElement("span",{className:v3}),s.appendChild(i),Lr(i,{duration:400,isCenterRipple:!0})),n.classList.add("e-wrapper"),this.enableRtl&&s.classList.add(jL),this.cssClass&&B([n],this.cssClass.split(" ")),this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},t.prototype.labelRippleHandler=function(i){mm(i,this.getLabel().getElementsByClassName(v3)[0])},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&qe(this.element,{checked:"true"})},t.prototype.onPropertyChanged=function(i,n){for(var s=this.getWrapper(),o=this.getLabel(),a=0,l=Object.keys(i);a<l.length;a++)switch(l[a]){case"checked":i.checked&&this.updateChange(),this.element.checked=i.checked;break;case"disabled":i.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":n.cssClass&&W([s],n.cssClass.split(" ")),i.cssClass&&B([s],i.cssClass.split(" "));break;case"enableRtl":i.enableRtl?o.classList.add(jL):o.classList.remove(jL);break;case"label":this.setText(i.label);break;case"labelPosition":"Before"===i.labelPosition?o.classList.add("e-right"):o.classList.remove("e-right");break;case"name":this.element.setAttribute("name",i.name);break;case"value":if(!f(this.htmlAttributes)&&this.htmlAttributes.value)break;this.element.setAttribute("value",i.value);break;case"htmlAttributes":this.updateHtmlAttribute()}},t.prototype.preRender=function(){var i=this.element;if(this.formElement=j(this.element,"form"),this.tagName=this.element.tagName,i=ex(this.createElement,"EJS-RADIOBUTTON","radio",i,ax),this.element=i,"radio"!==this.element.getAttribute("type")&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=Sn("e-"+this.getModuleName())),"EJS-RADIOBUTTON"===this.tagName){var n=this.element.getAttribute("formcontrolname");n&&(this.setProperties({name:n},!0),this.element.setAttribute("name",n))}},t.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){this.element.disabled=!0},t.prototype.setText=function(i){var n=this.getLabel(),s=n.getElementsByClassName(pk)[0];s?s.textContent=i:(i=this.enableHtmlSanitizer?bs.sanitize(i):i,s=this.createElement("span",{className:pk,innerHTML:i}),n.appendChild(s)),"Before"===this.labelPosition?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},t.prototype.updateHtmlAttribute=function(){if(!f(this.htmlAttributes))for(var i=0,n=Object.keys(this.htmlAttributes);i<n.length;i++){var s=n[i];if(qL.indexOf(s)>-1){var o=this.element.parentElement;"class"===s?B([o],this.htmlAttributes[s].split(" ")):"title"===s||"style"===s?o.setAttribute(s,this.htmlAttributes[s]):this.element.setAttribute(s,this.htmlAttributes[s])}}},t.prototype.unWireEvents=function(){var i=this.wrapper;A.remove(this.element,"change",this.changeHandler),A.remove(this.element,"focus",this.focusHandler),A.remove(this.element,"focusout",this.focusOutHandler),A.remove(this.element,"keyup",this.keyUpHandler);var n=i.getElementsByTagName("label")[0];n&&(A.remove(n,"mousedown",this.labelRippleHandler),A.remove(n,"mouseup",this.labelRippleHandler)),this.formElement&&A.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.wireEvents=function(){var i=this.getLabel();A.add(this.element,"change",this.changeHandler,this),A.add(this.element,"keyup",this.keyUpHandler,this),A.add(this.element,"focus",this.focusHandler,this),A.add(this.element,"focusout",this.focusOutHandler,this);var n=i.getElementsByClassName(pk)[0];n&&(A.add(n,"mousedown",this.labelRippleHandler,this),A.add(n,"mouseup",this.labelRippleHandler,this)),this.formElement&&A.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Ru([K()],t.prototype,"change",void 0),Ru([K()],t.prototype,"created",void 0),Ru([D(!1)],t.prototype,"checked",void 0),Ru([D("")],t.prototype,"cssClass",void 0),Ru([D(!1)],t.prototype,"disabled",void 0),Ru([D("")],t.prototype,"label",void 0),Ru([D("After")],t.prototype,"labelPosition",void 0),Ru([D("")],t.prototype,"name",void 0),Ru([D("")],t.prototype,"value",void 0),Ru([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ru([D({})],t.prototype,"htmlAttributes",void 0),e=Ru([an],t)}(ur),y3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_u=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},UL="e-switch-disabled",D0="e-ripple-container",WL="e-ripple-check",fk="e-rtl",gk="e-switch-wrapper",lx="e-switch-active",mk=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isDrag=!1,n.isWireEvents=!1,n}return y3(t,r),t.prototype.changeState=function(e){var i,n,s=this.getWrapper(),o=s.querySelector(".e-switch-inner"),a=s.querySelector(".e-switch-handle");pc&&(n=s.getElementsByClassName(D0)[0]),e?(B([o,a],lx),i="true",this.element.checked=!0,this.checked=!0,n&&B([n],[WL])):(W([o,a],lx),i="false",this.element.checked=!1,this.checked=!1,n&&W([n],[WL])),s.setAttribute("aria-checked",i)},t.prototype.clickHandler=function(e){this.isDrag=!1,this.focusOutHandler(),this.changeState(!this.checked),this.element.focus(),this.trigger("change",{checked:this.element.checked,event:e})},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.disabled||this.unWireEvents(),function g3(r,t,e){"INPUT"===e?(t.parentNode.insertBefore(r.element,t),we(t),r.element.checked=!1,["name","value","disabled"].forEach(function(i){r.element.removeAttribute(i)})):(["role","aria-checked","class"].forEach(function(i){t.removeAttribute(i)}),t.innerHTML="")}(this,this.getWrapper(),this.tagName)},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){this.getWrapper().classList.remove("e-focus")},t.prototype.getModuleName=function(){return"switch"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},t.prototype.getWrapper=function(){return this.element.parentElement},t.prototype.initialize=function(){f(this.initialSwitchCheckedValue)&&(this.initialSwitchCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&this.element.setAttribute("value",this.value),this.checked&&this.changeState(!0),this.disabled&&this.setDisabled(),(this.onLabel||this.offLabel)&&this.setLabel(this.onLabel,this.offLabel)},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(gk)||(e=this.createElement("div",{className:gk,attrs:{"aria-checked":"false"}}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("span",{className:"e-switch-inner"}),n=this.createElement("span",{className:"e-switch-on"}),s=this.createElement("span",{className:"e-switch-off"}),o=this.createElement("span",{className:"e-switch-handle"});if(e.appendChild(this.element),hk(this,e),i.appendChild(n),i.appendChild(s),e.appendChild(i),e.appendChild(o),pc){var a=this.createElement("span",{className:D0});o.appendChild(a),Lr(a,{duration:400,isCenterRipple:!0})}e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(fk),this.cssClass&&B([e],this.cssClass.split(" "))},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.changeState(e.checked);break;case"disabled":e.disabled?(this.setDisabled(),this.unWireEvents(),this.isWireEvents=!1):(this.element.disabled=!1,n.classList.remove(UL),n.setAttribute("aria-disabled","false"),this.isWireEvents||(this.wireEvents(),this.isWireEvents=!0));break;case"value":this.element.setAttribute("value",e.value);break;case"name":this.element.setAttribute("name",e.name);break;case"onLabel":case"offLabel":this.setLabel(e.onLabel,e.offLabel);break;case"enableRtl":e.enableRtl?n.classList.add(fk):n.classList.remove(fk);break;case"cssClass":i.cssClass&&W([n],i.cssClass.split(" ")),e.cssClass&&B([n],e.cssClass.split(" "))}},t.prototype.preRender=function(){var e=this.element;this.formElement=j(this.element,"form"),this.tagName=this.element.tagName,function q9(r,t,e,i,n){i=ex(r.createElement,t,"checkbox",i,e),r.element=i,"checkbox"!==r.element.getAttribute("type")&&r.element.setAttribute("type","checkbox"),r.element.id||(r.element.id=Sn("e-"+n))}(this,"EJS-SWITCH",gk,e,this.getModuleName())},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.renderComplete()},t.prototype.rippleHandler=function(e){mm(e,this.getWrapper().getElementsByClassName(D0)[0]),"mousedown"===e.type&&e.currentTarget.classList.contains("e-switch-wrapper")&&1===e.which&&(this.isDrag=!0,this.isFocused=!1)},t.prototype.rippleTouchHandler=function(e){var i=this.getWrapper().getElementsByClassName(D0)[0];if(i){var n=document.createEvent("MouseEvents");n.initEvent(e,!1,!0),i.dispatchEvent(n)}},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(UL),e.setAttribute("aria-disabled","true")},t.prototype.setLabel=function(e,i){var n=this.getWrapper();e&&(n.querySelector(".e-switch-on").textContent=e),i&&(n.querySelector(".e-switch-off").textContent=i)},t.prototype.switchFocusHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.switchMouseUp=function(e){var i=e.target;"touchmove"===e.type&&e.preventDefault(),"touchstart"===e.type&&(this.isDrag=!0,this.rippleTouchHandler("mousedown")),this.isDrag&&("mouseup"===e.type&&i.className.indexOf("e-switch")<0||"touchend"===e.type)&&(this.clickHandler(e),this.rippleTouchHandler("mouseup"),e.preventDefault())},t.prototype.formResetHandler=function(){this.checked=this.initialSwitchCheckedValue,this.element.checked=this.initialSwitchCheckedValue},t.prototype.toggle=function(){this.clickHandler()},t.prototype.wireEvents=function(){var e=this.getWrapper();this.delegateMouseUpHandler=this.switchMouseUp.bind(this),this.delegateKeyUpHandler=this.switchFocusHandler.bind(this),A.add(e,"click",this.clickHandler,this),A.add(this.element,"focus",this.focusHandler,this),A.add(this.element,"focusout",this.focusOutHandler,this),A.add(this.element,"mouseup",this.delegateMouseUpHandler,this),A.add(this.element,"keyup",this.delegateKeyUpHandler,this),A.add(e,"mousedown mouseup",this.rippleHandler,this),A.add(e,"touchstart touchmove touchend",this.switchMouseUp,this),this.formElement&&A.add(this.formElement,"reset",this.formResetHandler,this)},t.prototype.unWireEvents=function(){var e=this.getWrapper();A.remove(e,"click",this.clickHandler),A.remove(this.element,"focus",this.focusHandler),A.remove(this.element,"focusout",this.focusOutHandler),A.remove(this.element,"mouseup",this.delegateMouseUpHandler),A.remove(this.element,"keyup",this.delegateKeyUpHandler),A.remove(e,"mousedown mouseup",this.rippleHandler),A.remove(e,"touchstart touchmove touchend",this.switchMouseUp),this.formElement&&A.remove(this.formElement,"reset",this.formResetHandler)},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},_u([K()],t.prototype,"change",void 0),_u([K()],t.prototype,"created",void 0),_u([D(!1)],t.prototype,"checked",void 0),_u([D("")],t.prototype,"cssClass",void 0),_u([D(!1)],t.prototype,"disabled",void 0),_u([D("")],t.prototype,"name",void 0),_u([D("")],t.prototype,"onLabel",void 0),_u([D("")],t.prototype,"offLabel",void 0),_u([D("")],t.prototype,"value",void 0),_u([an],t)}(ur),Cx=!1;function M0(r,t){var e=!1,i={left:0,top:0},n=r;if(!r||!t)return i;for(f(t.offsetParent)&&"fixed"===t.style.position&&(e=!0);(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left+=r.offsetLeft,i.top+=r.offsetTop,r=r.offsetParent;for(r=n;(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left-=r.scrollLeft,i.top-=r.scrollTop,r=r.parentElement;return i}function Lo(r,t,e,i,n){return bm=void 0,bm=n,Cx=!!i,r?(t||(t="left"),e||(e="top"),Cm=r.ownerDocument,bx=r,function k3(r,t,e){switch(Ou=bx.getBoundingClientRect(),t+r){case"topcenter":vd(Ik(),e),yd(P0(),e);break;case"topright":vd(mc(),e),yd(P0(),e);break;case"centercenter":vd(Ik(),e),yd(bd(),e);break;case"centerright":vd(mc(),e),yd(bd(),e);break;case"centerleft":vd(Oy(),e),yd(bd(),e);break;case"bottomcenter":vd(Ik(),e),yd(O0(),e);break;case"bottomright":vd(mc(),e),yd(O0(),e);break;case"bottomleft":vd(Oy(),e),yd(O0(),e);break;default:vd(Oy(),e),yd(P0(),e)}return e}(t.toLowerCase(),e.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function vd(r,t){t.left=r}function yd(r,t){t.top=r}function Dk(){return Cm.documentElement.scrollTop||Cm.body.scrollTop}function gF(){return Cm.documentElement.scrollLeft||Cm.body.scrollLeft}function O0(){return Cx?Ou.bottom:Ou.bottom+Dk()}function bd(){return P0()+Ou.height/2}function P0(){return Cx?Ou.top:Ou.top+Dk()}function Oy(){return Ou.left+gF()}function mc(){var r=bx&&bx.classList.contains("e-date-range-wrapper")?bm?bm.width:0:bm&&Ou.width>=bm.width?bm.width:0;return Ou.right+gF()-r}function Ik(){return Oy()+Ou.width/2}function Ak(r,t,e,i){if(void 0===t&&(t=null),void 0===e&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var n=r.getBoundingClientRect();if(Uh=t,Py=r.ownerDocument,i||(i=Lo(r,"left","top")),e.X){var s=Uh?Rk():yF(),o=Ly(),a=Fy(),l=o-i.left,h=i.left+n.width-a;n.width>s?i.left=l>0&&h<=0?a-n.width:h>0&&l<=0?o:l>h?a-n.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var u=Uh?_k():Pk(),p=Ex(),m=xx(),y=p-i.top,C=i.top+n.height-m;n.height>u?i.top=y>0&&C<=0?m-n.height:C>0&&y<=0?p:y>C?m-n.height:p:y>0?i.top+=y:C>0&&(i.top-=C)}return i}function Ep(r,t,e,i){void 0===t&&(t=null);var n=Lo(r,"left","top");e&&(n.left=e),i&&(n.top=i);var s=[];Uh=t,Py=r.ownerDocument;var o=r.getBoundingClientRect(),l=n.left,h=n.left+o.width,p=Sx(n.top,n.top+o.height),m=vF(l,h);return p.topSide&&s.push("top"),m.rightSide&&s.push("right"),m.leftSide&&s.push("left"),p.bottomSide&&s.push("bottom"),s}function R3(r,t,e,i,n,s,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),t&&r&&n&&s&&(a.X||a.Y)){var p,h={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(r).display){var m=r.style.visibility;r.style.visibility="hidden",r.style.display="block",p=r.getBoundingClientRect(),r.style.removeProperty("display"),r.style.visibility=m}else p=r.getBoundingClientRect();var y={posX:n,posY:s,offsetX:e,offsetY:i,position:{left:0,top:0}};Uh=o,Py=t.ownerDocument,function Z9(r,t,e,i,n){e.position=Lo(r,e.posX,e.posY,i,n),t.TL=Lo(r,"left","top",i,n),t.TR=Lo(r,"right","top",i,n),t.BR=Lo(r,"left","bottom",i,n),t.BL=Lo(r,"right","bottom",i,n)}(t,h,y,l,p),wx(u,y,p),a.X&&kk(t,u,h,y,p,!0),a.Y&&h.TL.top>-1&&_3(t,u,h,y,p,!0),function mF(r,t,e){var i=0,n=0;if(null!=r.offsetParent&&("absolute"===getComputedStyle(r.offsetParent).position||"relative"===getComputedStyle(r.offsetParent).position)){var s=Lo(r.offsetParent,"left","top",!1,e);i=s.left,n=s.top}r.style.top=t.position.top+t.offsetY-n+"px",r.style.left=t.position.left+t.offsetX-i+"px"}(r,y,p)}}function wx(r,t,e){r.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},r.TR={top:r.TL.top,left:r.TL.left+e.width},r.BL={top:r.TL.top+e.height,left:r.TL.left},r.BR={top:r.TL.top+e.height,left:r.TL.left+e.width}}function vF(r,t){var e=!1,i=!1;return r-L0()<Ly()&&(e=!0),t>Fy()&&(i=!0),{leftSide:e,rightSide:i}}function kk(r,t,e,i,n,s){var o=vF(t.TL.left,t.TR.left);e.TL.left-L0()<=Ly()&&(o.leftSide=!1),e.TR.left>Fy()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+n.width,i.offsetX=-1*i.offsetX,i.position=Lo(r,i.posX,i.posY,!1),wx(t,i,n),s&&kk(r,t,e,i,n,!1))}function _3(r,t,e,i,n,s){var o=Sx(t.TL.top,t.BL.top);e.TL.top-Tx()<=Ex()&&(o.topSide=!1),e.BL.top>=xx()&&r.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+n.height,i.offsetY=-1*i.offsetY,i.position=Lo(r,i.posX,i.posY,!1,n),wx(t,i,n),s&&_3(r,t,e,i,n,!1))}function Sx(r,t){var e=!1,i=!1;return r-Tx()<Ex()&&(e=!0),t>xx()&&(i=!0),{topSide:e,bottomSide:i}}function Rk(){return Uh.getBoundingClientRect().width}function _k(){return Uh.getBoundingClientRect().height}function Mk(){return Uh.getBoundingClientRect().left}function Ok(){return Uh.getBoundingClientRect().top}function Ex(){return Uh?Ok():0}function Ly(){return Uh?Mk():0}function Fy(){return Uh?L0()+Mk()+Rk():L0()+yF()}function xx(){return Uh?Tx()+Ok()+_k():Tx()+Pk()}function Tx(){return Py.documentElement.scrollTop||Py.body.scrollTop}function L0(){return Py.documentElement.scrollLeft||Py.body.scrollLeft}function Pk(){return window.innerHeight}function yF(){var r=window.innerWidth,t=document.documentElement.getBoundingClientRect();return r-(r-(f(document.documentElement)?0:t.width))}var bF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ca=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},M3=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return bF(t,r),Ca([D("left")],t.prototype,"X",void 0),Ca([D("top")],t.prototype,"Y",void 0),t}(Wi),wa_OPEN="e-popup-open",wa_CLOSE="e-popup-close",Al=function(r){function t(e,i){return r.call(this,i,e)||this}return bF(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"width":Ht(this.element,{width:ut(e.width)});break;case"height":Ht(this.element,{height:ut(e.height)});break;case"zIndex":Ht(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",wa_OPEN,wa_CLOSE),r.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=ut(this.width)),"auto"!==this.height&&(e.height=ut(this.height)),Ht(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){X.isDevice&&A.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)A.add(i[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){X.isDevice&&A.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)A.remove(i[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||f(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?!f(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,i){for(var n=this.getScrollableParent(e),s=0;s<n.length;s++)if(!this.isElementVisible(e,n[s]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(f(this.checkGetBoundingClientRect(i))){var o=window,a={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},l=Lo(e),h={top:l.top,left:l.left,right:l.left+n.width,bottom:l.top+n.height},u={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return u.top>0&&u.left>0&&u.right>0&&u.bottom>0}var s=i.getBoundingClientRect();return!(n.bottom<s.top||n.bottom>s.bottom||n.right>s.right||n.left<s.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){if(!f(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||f(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){f(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var s=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else n?(o=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=o):e={left:0,top:0};f(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch{return null}},t.prototype.getAnchorPosition=function(e,i,n,s,o){var a=this.checkGetBoundingClientRect(i),l=this.checkGetBoundingClientRect(e);if(f(a)||f(l))return null;var h=e,u={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===e.tagName?u=Lo(e):(i.classList.contains("e-dlg-modal")&&"BODY"!==h.tagName&&(i=i.parentElement),u=M0(h,i)),n.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth/2-a.width/2:u.left+="container"===this.targetType?l.width/2-a.width/2:l.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth-a.width:u.left+="container"===this.targetType?l.width-a.width:l.width}switch(n.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight/2-a.height/2:u.top+="container"===this.targetType?l.height/2-a.height/2:l.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight-a.height:u.top+="container"===this.targetType?l.height-a.height:l.height}return u.left+=s,u.top+=o,u},t.prototype.callFlip=function(e){var i=this.getRelateToElement();R3(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Ep(this.element,this.viewPortElement).length)if(f(this.viewPortElement)){var i=Ak(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(f(n)||f(s))return null;e&&!0===e.Y&&(s.top>n.top?this.element.style.top="0px":s.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-s.bottom)+"px")),e&&!0===e.X&&(s.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-s.right)+"px":s.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;"none"===e&&"none"===i||("flip"===e&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var n=this;if(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0],this.wireEvents(),this.fmDialogContainer&&X.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!f(i)){var s=f(i)?this.element:i;this.zIndex=Lf(s),Ht(this.element,{zIndex:this.zIndex})}e=f(e)||"object"!=typeof e?this.showAnimation:e,("none"!==this.collision.X||"none"!==this.collision.Y)&&(W([this.element],wa_CLOSE),B([this.element],wa_OPEN),this.checkCollision(),W([this.element],wa_OPEN),B([this.element],wa_CLOSE)),f(e)?(W([this.element],wa_CLOSE),B([this.element],wa_OPEN),this.trigger("open")):(e.begin=function(){n.isDestroyed||(W([n.element],wa_CLOSE),B([n.element],wa_OPEN))},e.end=function(){n.isDestroyed||n.trigger("open")},new hs(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=f(e)||"object"!=typeof e?this.hideAnimation:e,f(e)?(W([this.element],wa_OPEN),B([this.element],wa_CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(W([i.element],wa_OPEN),B([i.element],wa_CLOSE),i.trigger("close"))},new hs(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),function Lk(r,t){for(var e=getComputedStyle(r),i=[],n=/(auto|scroll)/,s=r.parentElement;s&&"HTML"!==s.tagName;){var o=getComputedStyle(s);!("absolute"===e.position&&"static"===o.position)&&n.test(o.overflow+o.overflowY+o.overflowX)&&i.push(s),s=s.parentElement}return t||i.push(document),i}(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&"HTML"!==i.tagName;){var n=getComputedStyle(i);"fixed"===n.position&&!f(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?ut(window.scrollY-parseInt(this.element.style.top)):ut(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!f(this.element)&&f(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},Ca([D("auto")],t.prototype,"height",void 0),Ca([D("auto")],t.prototype,"width",void 0),Ca([D(null)],t.prototype,"content",void 0),Ca([D("container")],t.prototype,"targetType",void 0),Ca([D(null)],t.prototype,"viewPortElement",void 0),Ca([D({X:"none",Y:"none"})],t.prototype,"collision",void 0),Ca([D("")],t.prototype,"relateTo",void 0),Ca([Cn({},M3)],t.prototype,"position",void 0),Ca([D(0)],t.prototype,"offsetX",void 0),Ca([D(0)],t.prototype,"offsetY",void 0),Ca([D(1e3)],t.prototype,"zIndex",void 0),Ca([D(!1)],t.prototype,"enableRtl",void 0),Ca([D("reposition")],t.prototype,"actionOnScroll",void 0),Ca([D(null)],t.prototype,"showAnimation",void 0),Ca([D(null)],t.prototype,"hideAnimation",void 0),Ca([K()],t.prototype,"open",void 0),Ca([K()],t.prototype,"close",void 0),Ca([K()],t.prototype,"targetExitViewport",void 0),Ca([an],t)}(ur);function Lf(r){for(var t=r.parentElement,e=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==n&&e.push(i),t=t.parentElement}for(var s=[],o=0;o<document.body.children.length;o++)r.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&s.push(i));s.push("999");var a=[];if(!f(r.parentElement)&&"BODY"!==r.parentElement.tagName){var l=[].slice.call(r.parentElement.children);for(o=0;o<l.length;o++)r.isEqualNode(l[o])||(i=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&a.push(i))}var h=e.concat(s,a),u=Math.max.apply(Math,h)+1;return u>2147483647?2147483647:u}var Yr,vc,Ff,yc,SF,Nf,fr,Bf,CF=["north-west","north","north-east","west","east","south-west","south","south-east"],Fk="e-resize-handle",Ny="e-focused-handle",wF=["e-restrict-left"],F0="e-resize-viewport",O3=["north","west","east","south"],xp=0,Dx=0,Ix=0,Ax=0,N0=0,wm=0,kx=null,Rx=null,Nk=null,_x=!0,EF=0,Mx=!0;function P3(r){V0();var t=si("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+r),"south"===r&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===r&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===r&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===r&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Yr.appendChild(t)}function TF(r){var t;return f(r)||(t="string"==typeof r?document.querySelector(r):r),t}function Bk(r){f(r)&&(r=this);for(var t=Yr.querySelectorAll("."+Fk),e=0;e<t.length;e++)A.add(vc=t[e],"mousedown",L3,r),A.add(vc,"msie"===X.info.name?"pointerdown":"touchstart",DF,r);var n=Yr.querySelectorAll(".e-dialog-border-resize");if(!f(n))for(e=0;e<n.length;e++)A.add(vc=n[e],"mousedown",L3,r),A.add(vc,"msie"===X.info.name?"pointerdown":"touchstart",DF,r)}function Ox(r){return r.indexOf("mouse")>-1?"mouse":"touch"}function L3(r){if(r.preventDefault(),Yr=r.target.parentElement,V0(),N0=r.pageX,wm=r.pageY,r.target.classList.add(Ny),f(kx)||!0!==kx(r,this)){this.targetEle&&Yr&&Yr.querySelector(".e-dlg-resizable")&&(fr=null,Nf=this.targetEle.clientWidth,yc=this.targetEle.clientHeight);var t=f(fr)?document:fr;A.add(t,"mousemove",H0,this),A.add(document,"mouseup",B0,this);for(var e=0;e<wF.length;e++)_x=!Yr.classList.contains(wF[e])}}function B0(r){var t="msie"===X.info.name?"pointermove":"touchmove",e="msie"===X.info.name?"pointerup":"touchend",i=f(fr)?document:fr,n="msie"===X.info.name?"pointerdown":"touchstart";A.remove(i,"mousemove",H0),A.remove(i,t,H0),A.remove(i,n,H0),f(document.body.querySelector("."+Ny))||document.body.querySelector("."+Ny).classList.remove(Ny),f(Nk)||Nk(r,this),A.remove(document,"mouseup",B0),A.remove(document,e,B0)}function V0(){xp=parseFloat(getComputedStyle(Yr,null).getPropertyValue("width").replace("px","")),Dx=parseFloat(getComputedStyle(Yr,null).getPropertyValue("height").replace("px","")),Ix=Yr.getBoundingClientRect().left,Ax=Yr.getBoundingClientRect().top}function DF(r){Yr=r.target.parentElement,V0();var t=r.touches?r.changedTouches[0]:r;if(N0=t.pageX,wm=t.pageY,f(kx)||!0!==kx(r,this)){var e="msie"===X.info.name?"pointermove":"touchmove",i="msie"===X.info.name?"pointerup":"touchend",n=f(fr)?document:fr;A.add(n,e,H0,this),A.add(document,i,B0)}}function H0(r){if(r.target.classList.contains(Fk)&&r.target.classList.contains(Ny)?vc=r.target:f(document.body.querySelector("."+Ny))||(vc=document.body.querySelector("."+Ny)),!f(vc)){for(var t="",e=0;e<CF.length;e++)vc.classList.contains("e-"+CF[e])&&(t=CF[e]);switch(f(Rx)||Rx(r,this),t){case"south":IF(r);break;case"north":Vk(r);break;case"west":Hk(r);break;case"east":zk(r);break;case"south-east":IF(r),zk(r);break;case"south-west":IF(r),Hk(r);break;case"north-east":Vk(r),zk(r);break;case"north-west":Vk(r),Hk(r)}}}function Sm(r){return r.getBoundingClientRect()}function IF(r){var o,t=document.documentElement.clientHeight,e=!1,n=(r.touches?r.changedTouches[0]:r).pageY,s=Sm(Yr);f(fr)||(o=Sm(fr)),f(fr)?f(fr)&&(t-n>=0||s.top<0)&&(e=!0):e=!0;var a=Dx+(n-wm);a=a>Ff?a:Ff;var l=0;f(fr)||(l=o.top);var h=f(fr)?0:fr.offsetHeight-fr.clientHeight,u=s.top-l-h/2;if(u=u<0?0:u,s.top>0&&u+a>yc){if(e=!1,Yr.classList.contains(F0))return;Yr.style.height=yc-parseInt(u.toString(),10)+"px"}else{var p=0;if(e){s.top<0&&t+(s.height+s.top)>0&&a+(p=s.top)<=30&&(a=s.height-(s.height+s.top)+30),a+s.top>=yc&&(Yr.style.height=s.height+(t-(s.height+s.top))+"px");var m=f(fr)?p:u;a>=Ff&&a+m<=yc&&(Yr.style.height=a+"px")}}}function Vk(r){var e,t=!1,i="mouse"===Ox(r.type)?r.pageY:r.touches[0].pageY,n=Sm(Yr);f(fr)||(e=Sm(fr)),(!f(fr)&&n.top-e.top>0||f(fr)&&i>0)&&(t=!0);var s=Dx-(i-wm);if(t&&s>=Ff&&s<=yc){var o=0;f(fr)||(o=e.top);var a=Ax-o+(i-wm);a=a>0?a:1,Yr.style.height=s+"px",Yr.style.top=a+"px"}}function Hk(r){var i,t=document.documentElement.clientWidth,e=!1;f(fr)||(i=Sm(fr));var n="mouse"===Ox(r.type)?r.pageX:r.touches[0].pageX,s=Sm(Yr),o=f(fr)?0:fr.offsetWidth-fr.clientWidth,a=f(fr)?0:i.left,l=f(fr)?0:i.width;f(Bf)&&(f(fr)?Bf=t:(Bf=s.left-a-o/2+s.width,Bf+=l-o-Bf)),(!f(fr)&&Math.floor(s.left-i.left+s.width+(i.right-s.right))-o<=Nf||f(fr)&&n>=0)&&(e=!0);var h=xp-(n-N0);if(_x&&(h=h>Bf?Bf:h),e&&h>=SF&&h<=Nf){var u=0;f(fr)||(u=i.left);var p=Ix-u+(n-N0);p=p>0?p:1,h!==EF&&Mx&&(Yr.style.width=h+"px"),_x&&(Yr.style.left=p+"px",Mx=1!==p)}EF=h}function zk(r){var i,t=document.documentElement.clientWidth,e=!1;f(fr)||(i=Sm(fr));var s=(r.touches?r.changedTouches[0]:r).pageX,o=Sm(Yr);(!f(fr)&&(o.left-i.left+o.width<=Nf||o.right-i.left>=o.width)||f(fr)&&t-s>0)&&(e=!0);var a=xp+(s-N0),l=0;if(f(fr)||(l=i.left),o.left-l+a>Nf){if(e=!1,Yr.classList.contains(F0))return;Yr.style.width=Nf-(o.left-l)+"px"}e&&a>=SF&&a<=Nf&&(Yr.style.width=a+"px")}function F3(){for(var r=Yr.querySelectorAll("."+Fk),t=0;t<r.length;t++)we(r[t]);var e=Yr.querySelectorAll(".e-dialog-border-resize");if(!f(e))for(t=0;t<e.length;t++)we(e[t])}var Px,AF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zn=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},tK=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AF(t,r),zn([D(!0)],t.prototype,"isFlat",void 0),zn([D()],t.prototype,"buttonModel",void 0),zn([D("Button")],t.prototype,"type",void 0),zn([K()],t.prototype,"click",void 0),t}(Wi),iK=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AF(t,r),zn([D("Fade")],t.prototype,"effect",void 0),zn([D(400)],t.prototype,"duration",void 0),zn([D(0)],t.prototype,"delay",void 0),t}(Wi),jk="e-dialog",kF="e-rtl",RF="e-dlg-header-content",N3="e-dlg-header",c="e-footer-content",d="e-dlg-modal",b="e-icon-dlg-close",E="e-dlg-target",M="e-scroll-disabled",le="e-device",Ee="e-dlg-fullscreen",Ge="e-dlg-closeicon-btn",Zt="e-popup-open",di="Information",Ni="e-scroll-disabled",fn="e-alert-dialog",Nt="e-confirm-dialog",wn="e-dlg-resizable",_r="e-restrict-left",Js="e-resize-viewport",z0="user action",Cd=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.needsID=!0,n}return AF(t,r),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=ut(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=z0},t.prototype.preRender=function(){var e=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(s){e.dlgClosedBy="close icon",e.hide(s)},this.dlgOverlayClickEventHandler=function(s){e.dlgClosedBy="overlayClick",s.preventFocus=!1,e.trigger("overlayClick",s,function(o){o.preventFocus||e.focusContent(),e.dlgClosedBy=z0})},this.l10n=new $r("dialog",{close:"Close"},this.locale),this.checkPositionData(),f(this.target)){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=n}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!f(this.position)){if(!f(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}f(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},t.prototype.getEle=function(e,i){for(var n=void 0,s=0;s<e.length;s++)if(e[s].classList.contains(i)){n=e[s];break}return n},t.prototype.getMinHeight=function(){var e="0px",i="0px";f(this.element.querySelector("."+RF))||(e=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,c);f(n)||(i=getComputedStyle(n).height);var s=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function X9(r){Ff=r}(s+30+(isNaN(o)?0:o)),s+30+o},t.prototype.onResizeStart=function(e,i){return i.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!f(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(wn);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,n="",s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[s].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[s].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(_r):this.isModal&&this.target===document.body&&this.element.classList.add(Js),function xF(r){kx=r.resizeBegin,Rx=r.resizing,Nk=r.resizeComplete,Yr=TF(r.element),fr=TF(r.boundary);for(var t=r.direction.split(" "),e=0;e<t.length;e++)if(O3.indexOf(t[e])>=0&&t[e])P3(t[e]);else if(""!==t[e].trim()){var i=si("div",{className:"e-icons "+Fk+" e-"+t[e]});Yr.appendChild(i)}Ff=r.minHeight,SF=r.minWidth,Nf=r.maxWidth,yc=r.maxHeight,r.proxy&&r.proxy.element&&r.proxy.element.classList.contains("e-dialog")?Bk(r.proxy):Bk()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else F3(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?_r:Js),this.element.classList.remove(wn)},t.prototype.getFocusElement=function(e){var n=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:n[n.length-1]}},t.prototype.keyDown=function(e){var i=this;if(9===e.keyCode&&this.isModal){var n=void 0;f(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),f(this.btnObj)&&!f(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),f(this.btnObj)&&f(this.ftrTemplateContent)&&!f(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),!f(n)&&document.activeElement===n.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),f(n)||n.element.focus())}var l,s=document.activeElement,o=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,a=!1;o||(a=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(e)),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&o&&!f(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===s.tagName.toLowerCase()||a)&&!f(this.primaryButtonEle))&&this.buttons.some(function(u,p){l=p;var m=u.buttonModel;return!f(m)&&!0===m.isPrimary})&&"function"==typeof this.buttons[l].click&&setTimeout(function(){i.buttons[l].click.call(i,e)})},t.prototype.initialize=function(){f(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||B([this.element],jk),X.isDevice&&B([this.element],le),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||qe(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&f(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&f(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!f(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||f(this.footerTemplate)?f(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(qe(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&f(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,n=this.dlgContainer.children;i<n.length;i++)n[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[i])}if(!0!==this.element.classList.contains(fn)&&!0!==this.element.classList.contains(Nt)&&!f(this.element.parentElement)){var s=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),s.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}f(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new Al(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",a,function(l){l.preventFocus||e.focusContent()})},close:function(o){e.isModal&&B([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var a=document.activeElement;!f(a)&&!f(a.blur)&&a.blur(),!f(e.storeActiveElement)&&!f(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(B([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var n=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));f(n)||(n.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;i=f(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.element.classList.contains("e-draggable")||(this.dragObj=new wp(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(n){e.trigger("dragStart",n,function(s){})},dragStop:function(n){e.isModal&&(f(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",n),e.element.classList.remove(_r)},drag:function(n){e.trigger("drag",n)}}),f(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var i=f(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}e=0;for(var s,o=this.element.children;e<o.length;e++)o[e].classList.contains(c)&&(s=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new Is(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+c)),!f(this.ftrTemplateContent)&&s.length>0&&("function"==typeof this.buttons[e].click&&A.add(s[e],"click",this.buttons[e].click,this),"object"==typeof this.buttons[e].click&&A.add(s[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!f(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){qe(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!f(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),f(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&X.isIE&&""===this.element.style.width&&!f(this.width)&&(this.element.style.width=ut(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,n){var s,o;o=i.classList.contains(N3)?this.element.id+"header":i.classList.contains(c)?this.element.id+"footerTemplate":this.element.id+"content",f(e.outerHTML)?("string"==typeof e||"string"!=typeof e)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!=typeof e?s=qi(e):i.innerHTML=e):i.appendChild(e);var l=[];if(!f(s)){for(var u=0,p=s({},this,n,o,!0);u<p.length;u++)l.push(p[u]);xt([].slice.call(l),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=bs.beforeSanitize();de(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!f(i.helper)?e=i.helper(e):i.cancel||(e=bs.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!f(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,X.isIE&&"auto"===this.height&&!f(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?B([this.element],kF):W([this.element],kF)),f(this.element.querySelector(".e-resize-handle"))||(F3(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(f(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(n){8!==n.nodeType&&e.innerContentElement.appendChild(n)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:N3}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),qe(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:c}),""===this.footerTemplate||f(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){f(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:RF}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:Ge,attrs:{type:"button"}}),this.closeIconBtnObj=new Is({cssClass:"e-flat",iconCss:b+" e-icons"}),this.closeIconTitle(),f(this.headerContent)?(this.createHeaderContent(),ao([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):ao([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(W([this.element],e.split(" ")),this.isModal&&!f(this.dlgContainer)&&W([this.dlgContainer],e.split(" "))),this.cssClass&&(B([this.element],this.cssClass.split(" ")),this.isModal&&!f(this.dlgContainer)&&B([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(Zt),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),B([this.element],d),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,n=0;n<e.length;n++){if(((i=e[n]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!f(e)){var n=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(n)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+Ge),s=e.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(s);if(f(o)){if(!f(o=this.focusableElements(this.contentEle)))return o;if(!f(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},t.prototype.disableElement=function(e,i){var n=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,i))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=f(e)?this.element:e,n=X.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){A.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){A.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return!1},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(jk))for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"content":f(this.content)||""===this.content?f(this.contentEle)||(we(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),f(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),we(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||f(this.header)?this.headerEle&&(we(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||f(this.footerTemplate)){if(!this.ftrTemplateContent)return;we(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||f(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(b).length>0?this.showCloseIcon||""!==this.header&&!f(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():we(this.closeIcon):(we(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Ht(this.element,{height:ut(e.height)});break;case"width":Ht(this.element,{width:ut(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var a=this.buttons.length;!f(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(we(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)f(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!f(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=f(i.position.X)?this.position.X:i.position.X,u=f(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+u)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+u)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=ut(this.minHeight))}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)f(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",f(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(W([this.element],d),W([document.body],[E,M]),we(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&A.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0;var s=Lf(e);this.zIndex=s>this.zIndex?s:this.zIndex,this.isProtectedOnChange=n,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){(function J9(r){Nf=r})(this.targetEle.clientWidth),function eK(r){yc=r}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[kF,d,wn,_r,Ee,le],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(W([this.targetEle],[E,M]),!f(this.element)&&this.element.classList.contains(Ee)&&W([document.body],[E,M]),this.isModal&&W([f(this.targetEle)?document.body:this.targetEle],M),this.unWireEvents(),!f(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(f(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),f(this.dragObj)||this.dragObj.destroy(),!f(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),W([this.element],e),!f(this.cssClass)&&""!==this.cssClass&&W([this.element],this.cssClass.split(" ")),!f(this.refElement)&&!f(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),we(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(we(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),we(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!f(this.element.children))for(n=0;n<=this.element.children.length;n++)we(this.element.children[n-=n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:r.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&A.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&A.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&A.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&A.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&A.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(jk)){if(!this.element.classList.contains(Zt)||!f(e)){f(e)||this.fullScreen(e);var n={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(s){if(!s.cancel){i.element.style.maxHeight!==n.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=n.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!f(i.dlgOverlay)&&(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",W([i.dlgOverlay],"e-fade"),f(i.targetEle)?B([document.body],[E,M]):(i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute",i.element.style.position="relative",B([i.targetEle],[E,M])));var o={name:i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),Ht(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(o),i.dialogOpen=!0;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=l}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(jk)&&this.preventVisibility){var n={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=n,this.trigger("beforeClose",n,function(s){if(!s.cancel){i.isModal&&(f(i.targetEle)||W([i.targetEle],[E,M])),document.body.classList.contains(E)&&document.body.classList.contains(M)&&W([document.body],[E,M]);var o={name:i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=z0})}},t.prototype.fullScreen=function(e){if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",B([this.element],Ee);var s=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=f(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=s,B([document.body],[E,M]),this.allowDragging&&!f(this.dragObj)&&this.dragObj.destroy()}else W([this.element],Ee),W([document.body],[E,M]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return f(e)?this.btnObj:this.btnObj[e]},zn([D("")],t.prototype,"content",void 0),zn([D(!0)],t.prototype,"enableHtmlSanitizer",void 0),zn([D(!1)],t.prototype,"showCloseIcon",void 0),zn([D(!1)],t.prototype,"isModal",void 0),zn([D("")],t.prototype,"header",void 0),zn([D(!0)],t.prototype,"visible",void 0),zn([D(!1)],t.prototype,"enableResize",void 0),zn([D(["South-East"])],t.prototype,"resizeHandles",void 0),zn([D("auto")],t.prototype,"height",void 0),zn([D("")],t.prototype,"minHeight",void 0),zn([D("100%")],t.prototype,"width",void 0),zn([D("")],t.prototype,"cssClass",void 0),zn([D(1e3)],t.prototype,"zIndex",void 0),zn([D(null)],t.prototype,"target",void 0),zn([D("")],t.prototype,"footerTemplate",void 0),zn([D(!1)],t.prototype,"allowDragging",void 0),zn([ba([{}],tK)],t.prototype,"buttons",void 0),zn([D(!0)],t.prototype,"closeOnEscape",void 0),zn([Cn({},iK)],t.prototype,"animationSettings",void 0),zn([Cn({X:"center",Y:"center"},M3)],t.prototype,"position",void 0),zn([K()],t.prototype,"created",void 0),zn([K()],t.prototype,"open",void 0),zn([K()],t.prototype,"beforeSanitizeHtml",void 0),zn([K()],t.prototype,"beforeOpen",void 0),zn([K()],t.prototype,"close",void 0),zn([K()],t.prototype,"beforeClose",void 0),zn([K()],t.prototype,"dragStart",void 0),zn([K()],t.prototype,"dragStop",void 0),zn([K()],t.prototype,"drag",void 0),zn([K()],t.prototype,"overlayClick",void 0),zn([K()],t.prototype,"resizeStart",void 0),zn([K()],t.prototype,"resizing",void 0),zn([K()],t.prototype,"resizeStop",void 0),zn([K()],t.prototype,"destroyed",void 0),zn([an],t)}(ur);!function(r){function i(u,p){var m=new Cd(u);return m.appendTo(p),m}function o(u,p){return u.header=f(p.title)?di:p.title,u.content=f(p.content)?"":p.content,u.isModal=!!f(p.isModal)||p.isModal,u.showCloseIcon=!f(p.showCloseIcon)&&p.showCloseIcon,u.allowDragging=!f(p.isDraggable)&&p.isDraggable,u.closeOnEscape=!f(p.closeOnEscape)&&p.closeOnEscape,u.position=f(p.position)?{X:"center",Y:"top"}:p.position,u.animationSettings=f(p.animationSettings)?{effect:"Fade",duration:400,delay:0}:p.animationSettings,u.cssClass=f(p.cssClass)?"":p.cssClass,u.zIndex=f(p.zIndex)?1e3:p.zIndex,u.open=f(p.open)?null:p.open,u.width=f(p.width)?"auto":p.width,u.height=f(p.height)?"auto":p.height,u}function h(u,p,m){var y=m;return f(p.text)||(y.buttonModel.content=p.text),f(p.icon)||(y.buttonModel.iconCss=p.icon),f(p.cssClass)||(y.buttonModel.cssClass=p.cssClass),f(p.click)||(y.click=p.click),y}r.alert=function t(u){var m,p=si("div",{className:fn});return document.body.appendChild(p),m=i("string"==typeof u?{content:u,position:{X:"center",Y:"top"},isModal:!0,header:di,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function n(u){var p={buttons:[]};return function a(u,p){var m=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return f(p.okButton)?u.buttons=m:u.buttons[0]=h(0,p.okButton,m[0]),u}(p=o(p,u),u)}(u),p),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(Ni)):m.element.remove()},m},r.confirm=function e(u){var m,p=si("div",{className:Nt});return document.body.appendChild(p),m=i("string"==typeof u?{position:{X:"center",Y:"top"},content:u,isModal:!0,header:di,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function s(u){var p={buttons:[]};return function l(u,p){var m={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},y={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u.buttons[0]=f(p.okButton)?m:h(0,p.okButton,m),u.buttons[1]=f(p.cancelButton)?y:h(0,p.cancelButton,y),u}(p=o(p,u),u)}(u),p),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(Ni)):m.element.remove()},m}}(Px||(Px={}));var Lx=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Fr=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},B3="e-tooltip",V3="e-tooltip-wrap",rK="e-tip-content",Kk="e-arrow-tip",sK="e-arrow-tip-outer",_F="e-arrow-tip-inner",$k="e-tip-bottom",H3="e-tip-top",oK="e-tip-left",z3="e-tip-right",j3="e-popup",MF="e-popup-open",q3="e-popup-close",OF="e-lib",aK="e-tooltip-popup-container",Rhe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Lx(t,r),Fr([D({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Fr([D({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Wi),PF=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return Lx(t,r),t.prototype.initialize=function(){this.formatPosition(),B([this.element],B3),this.element.setAttribute("tabindex","0")},t.prototype.formatPosition=function(){var e,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:Kk+" "+this.tipClass});e.appendChild(this.createElement("div",{className:sK+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:_F+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?oK:0===e.indexOf("Bottom")?H3:0===e.indexOf("Left")?z3:$k},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(OF),this.popupObj=new Al(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=Lo(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.calculateTooltipOffset(this.position),s=this.calculateElementPosition(i,n),l=this.collisionFlipFit(e,s[0],s[1]);return this.tooltipEle.style.display="",l},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var i={top:0,left:0},n=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,o=he("."+Kk,this.tooltipEle),a=o?o.offsetWidth:0,l=o?o.offsetHeight:0,h=this.showTipPointer?0:8,u=l/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),p=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(h+=2),e){case"RightTop":i.left+=a+h,i.top-=s-u;break;case"RightCenter":i.left+=a+h,i.top-=s/2;break;case"RightBottom":i.left+=a+h,i.top-=u;break;case"BottomRight":i.top+=l+h,i.left-=p;break;case"BottomCenter":i.top+=l+h,i.left-=n/2;break;case"BottomLeft":i.top+=l+h,i.left-=n-p;break;case"LeftBottom":i.left-=a+n+h,i.top-=u;break;case"LeftCenter":i.left-=a+n+h,i.top-=s/2;break;case"LeftTop":i.left-=a+n+h,i.top-=s-u;break;case"TopLeft":i.top-=s+l+h,i.left-=n-p;break;case"TopRight":i.top-=s+l+h,i.left-=p;break;default:i.top-=s+l+h,i.left-=n/2}return i.left+=this.offsetX,i.top+=this.offsetY,i},t.prototype.updateTipPosition=function(e){var i=Tt("."+Kk+",."+sK+",."+_F,this.tooltipEle);W(i,[$k,H3,oK,z3]),this.setTipClass(e),B(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,n,s){if(!1!==this.showTipPointer){var o,a;this.updateTipPosition(i),this.tooltipEle.style.display="block";var C,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,u=he("."+Kk,this.tooltipEle),p=he("."+_F,this.tooltipEle),m=u.offsetWidth,y=u.offsetHeight;this.tooltipEle.style.display="",this.tipClass===$k||this.tipClass===H3?(this.tipClass===$k?(a="99.9%",p.style.top="-"+(y-2)+"px"):(a=-(y-1)+"px",p.style.top="-"+(y-6)+"px"),e&&(o=(C="Center"!==n||l>e.offsetWidth||this.mouseTrail)&&"Left"===n||!C&&"End"===this.tipPointerPosition?l-m-2+"px":C&&"Right"===n||!C&&"Start"===this.tipPointerPosition?"2px":!C||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-m/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2+2+"px")):(this.tipClass===z3?(o="99.9%",p.style.left="-"+(m-2)+"px"):(o=-(m-1)+"px",p.style.left=m-2-m+"px"),a=(C="Center"!==s||h>e.offsetHeight||this.mouseTrail)&&"Top"===s||!C&&"End"===this.tipPointerPosition?h-y-2+"px":C&&"Bottom"===s||!C&&"Start"===this.tipPointerPosition?"2px":h/2-y/2+"px"),u.style.top=a,u.style.left=o}},t.prototype.renderContent=function(e){var i=he("."+rK,this.tooltipEle);if(this.cssClass&&B([this.tooltipEle],this.cssClass.split(" ")),e&&!f(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),f(this.content))e&&!f(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:bs.sanitize(this.content)},!0),s=qi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))if(this.enableHtmlParse)for(var o=s.length,a=0;a<o;a++)i[(xt(s,i),"innerHTML")]=this.content;else i.textContent=this.content}else{var s;(s=qi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&xt(s,i),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),A.add(e,X.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,i){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(i)<0&&n.push(i),qe(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),n=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=n.indexOf(i);-1!==s&&n.splice(s,1),e.removeAttribute("data-tooltip-id");var o=n.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},t.prototype.targetClick=function(e){var i;!f(i=this.target?j(e.target,this.target):this.element)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i))},t.prototype.targetHover=function(e){var i;if(!(f(i=this.target?j(e.target,this.target):this.element)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var s=0,o=[].slice.call(Tt('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));s<o.length;s++)this.restoreElement(o[s]);this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&A.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,n){var s=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,A.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!f(n)},this.trigger("beforeRender",this.tooltipEventArgs,function(a){s.beforeRenderCallback(a,e,n,i)}.bind(this))},t.prototype.beforeRenderCallback=function(e,i,n,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,f(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Sn(this.element.getAttribute("id")):Sn("tooltip"),this.tooltipEle=this.createElement("div",{className:V3+" "+j3+" "+OF,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+ut(this.width)+";height:"+ut(this.height)+";position:absolute;"}),this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,n,s,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),hs.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,n,s,this)))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=he(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||B([this.containerElement],aK),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(X.isDevice&&B([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=ut(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:rK})),this.appendContainer(i),W([i.tooltipEle],"e-hidden"),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),B([i.tooltipEle],MF),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),hs.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,n,s){e&&(W([s.tooltipEle],MF),B([s.tooltipEle],q3),s.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:s.tooltipEle,isInteracted:!f(i)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none"),s.trigger("beforeOpen",s.tooltipEventArgs,function(a){s.beforeOpenCallback(a,e,n,i)}.bind(s)))},t.prototype.beforeOpenCallback=function(e,i,n,s){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&A.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(a,i)}s&&this.wireMouseEvents(s,i)},t.prototype.needTemplateReposition=function(){return!f(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},t.prototype.checkCollision=function(e,i,n){var s={left:i,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=Ep(this.tooltipEle,this.checkCollideTarget(),i,n);return o.length>0&&(s.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,n){var s=this.checkCollision(e,i,n),o=s.position;this.tooltipPositionY!==s.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===o.indexOf("Left")&&(s.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=s.vertical+"Left"),0===o.indexOf("Right")&&(s.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs);var a=s.vertical,l=s.horizontal;if(s.position!==o){var h=Lo(e,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,l,a);var u=this.calculateTooltipOffset(o);u.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),u.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),s.position=o;var p=this.calculateElementPosition(h,u);s.left=p[0],s.top=p[1]}else this.adjustArrow(e,o,l,a);var m={left:s.left,top:s.top},y=this.isBodyContainer?Ak(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},m).left:m.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var C=he("."+Kk,this.tooltipEle),S=parseInt(C.style.left,10)-(y-s.left);S<0?S=0:S+C.offsetWidth>this.tooltipEle.clientWidth&&(S=this.tooltipEle.clientWidth-C.offsetWidth),C.style.left=S.toString()+"px"}return this.tooltipEle.style.display="",m.left=y,m},t.prototype.getOffSetPosition=function(e,i,n){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(i.split(/(?=[A-Z])/)[0])?2*n:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,n){var s=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){s.closeDelay&&s.tooltipEle&&s.isTooltipOpen||s.tooltipHide(e,i,n)},this.closeDelay)):this.tooltipHide(e,i,n)},t.prototype.tooltipHide=function(e,i,n){var o,s=this;o=i?this.target?n||i.target:this.element:he('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!f(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?s.isHidden=!1:(s.mouseMoveBeforeRemove(),s.popupHide(e,o))})},t.prototype.popupHide=function(e,i){i&&this.restoreElement(i),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),f(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(W([this.tooltipEle],q3),B([this.tooltipEle],MF)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&$e(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var n=j(i,"."+V3+"."+OF+"."+j3);n?A.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),A.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var i=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,n=e.touches[0].pageY):(i=e.pageX,n=e.pageY),hs.stop(this.tooltipEle),W([this.tooltipEle],q3),B([this.tooltipEle],MF),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.calculateTooltipOffset(this.position),l=this.checkCollision(e.target,i+s.left+this.offsetX,n+s.top+this.offsetY);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(e.target,l.position,l.horizontal,l.vertical);var u=this.calculateTooltipOffset(l.position);l.left=i+u.left-this.offsetX,l.top=n+u.top-this.offsetY}this.tooltipEle.style.left=l.left+"px",this.tooltipEle.style.top=l.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===j(e.target,"."+B3)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(j(e.target,"."+V3+"."+OF+"."+j3)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=$k,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.wireFocusEvents(),A.add(this.element,"DOMNodeInserted",this.updateTarget,this)),"Click"===o&&A.add(this.element,X.touchStartEvent,this.targetClick,this),"Hover"===o&&(X.isDevice?(this.touchModule=new dl(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),A.add(this.element,X.touchEndEvent,this.touchEndHandler,this)):A.add(this.element,"mouseover",this.targetHover,this))}A.add(document,"touchend",this.touchEnd,this),A.add(document,"scroll wheel",this.scrollHandler,this),A.add(window,"resize",this.windowResize,this),A.add(document,"keydown",this.keyDown,this)},t.prototype.updateTarget=function(e){f(this.targetsList)||f(this.target)||[].slice.call(Tt(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=X.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(f(this.target))A.add(this.element,"focus",this.targetHover,this);else{var e=[].slice.call(Tt(this.target,this.element));this.targetsList=e;for(var i=0,n=e;i<n.length;i++){var s=n[i];s.setAttribute("tabindex","0"),A.add(s,"focus",this.targetHover,this)}}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||("focus"===e.type&&A.add(i,"blur",this.onMouseOut,this),"mouseover"===e.type&&A.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(A.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),A.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&A.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this),i.setAttribute("tabindex","0"))},t.prototype.unwireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.unwireFocusEvents(),A.remove(this.element,"DOMNodeInserted",this.updateTarget)),"Click"===o&&A.remove(this.element,X.touchStartEvent,this.targetClick),"Hover"===o&&(X.isDevice?(this.touchModule&&this.touchModule.destroy(),A.remove(this.element,X.touchEndEvent,this.touchEndHandler)):A.remove(this.element,"mouseover",this.targetHover))}A.remove(document,"touchend",this.touchEnd),A.remove(document,"scroll wheel",this.scrollHandler),A.remove(window,"resize",this.windowResize),A.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(f(this.target))A.remove(this.element,"focus",this.targetHover);else for(var i=0,n=[].slice.call(Tt(this.target,this.element));i<n.length;i++){var s=n[i];s.removeAttribute("tabindex"),A.remove(s,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var n=0,s=this.getTriggerList(this.opensOn);n<s.length;n++){var o=s[n];"Focus"===o&&A.remove(e,"blur",this.onMouseOut),"Hover"===o&&!X.isDevice&&A.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(A.remove(e,"mouseenter",this.tooltipHover),A.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&A.remove(e,"mousemove touchstart mouseenter",this.onMouseMove),e.removeAttribute("tabindex")},t.prototype.findTarget=function(){return he('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var n=this.findTarget(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=ut(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=ut(e.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var l=he("."+_F,this.tooltipEle);l.style.top=l.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var u=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+u).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&W([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&B([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?B([this.tooltipEle],"e-rtl"):W([this.tooltipEle],"e-rtl"));break;case"container":f(this.containerElement)||W([this.containerElement],aK),this.container=e.container,this.tooltipEle&&n&&(this.appendContainer(this),this.reposition(n))}},t.prototype.open=function(e,i){f(i)&&(i=this.animation.open),f(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltipEle&&$e(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),W([this.element],B3),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},Fr([D("auto")],t.prototype,"width",void 0),Fr([D("auto")],t.prototype,"height",void 0),Fr([D()],t.prototype,"content",void 0),Fr([D("body")],t.prototype,"container",void 0),Fr([D()],t.prototype,"target",void 0),Fr([D("TopCenter")],t.prototype,"position",void 0),Fr([D(0)],t.prototype,"offsetX",void 0),Fr([D(0)],t.prototype,"offsetY",void 0),Fr([D(!0)],t.prototype,"showTipPointer",void 0),Fr([D(!0)],t.prototype,"enableHtmlParse",void 0),Fr([D(!1)],t.prototype,"windowCollision",void 0),Fr([D("Auto")],t.prototype,"tipPointerPosition",void 0),Fr([D("Auto")],t.prototype,"opensOn",void 0),Fr([D(!1)],t.prototype,"mouseTrail",void 0),Fr([D(!1)],t.prototype,"isSticky",void 0),Fr([Cn({},Rhe)],t.prototype,"animation",void 0),Fr([D(0)],t.prototype,"openDelay",void 0),Fr([D(0)],t.prototype,"closeDelay",void 0),Fr([D()],t.prototype,"cssClass",void 0),Fr([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),Fr([K()],t.prototype,"beforeRender",void 0),Fr([K()],t.prototype,"beforeOpen",void 0),Fr([K()],t.prototype,"afterOpen",void 0),Fr([K()],t.prototype,"beforeClose",void 0),Fr([K()],t.prototype,"afterClose",void 0),Fr([K()],t.prototype,"beforeCollision",void 0),Fr([K()],t.prototype,"created",void 0),Fr([K()],t.prototype,"destroyed",void 0),Fr([an],t)}(ur),kl={},Yk="e-spin-show",Zk="e-spin-hide",hK="e-spin-material",uK="e-spin-fabric",cK="e-spin-fluent",dK="e-spin-tailwind",Fhe="e-spin-bootstrap",pK="e-spin-bootstrap4",fK="e-spin-bootstrap5",gK="e-spin-high-contrast",LF="e-spinner-pane",U3="e-spinner-inner",FF="e-path-circle",NF="e-spin-template";function bc(r,t){if(r.target){var e,i=f(t)?si:t,n=function nue(r,t){var e=t("div",{}),i=t("div",{});return e.classList.add(LF),i.classList.add(U3),r.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}(r.target,i);if(f(r.cssClass)||n.wrap.classList.add(r.cssClass),f(r.template)&&f(null)){var o=f(r.type)?function $he(r){return window.getComputedStyle(r,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):r.type;e=function tue(r,t){var e;switch(t){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":case"Fluent":default:e=30;break;case"Bootstrap4":case"Bootstrap5":e=36}return r=r?parseFloat(r+""):e,"Bootstrap"===t?r:r/2}(f(r.width)?void 0:r.width,o),function mK(r,t,e,i){var n=t.querySelector("."+U3),s=n.querySelector("svg");switch(f(s)||n.removeChild(s),r){case"Material":!function Hhe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Material",radius:t},G3(r,i,0,hK),K3(t,r,"Material",hK)}(n,e);break;case"Fabric":!function Uhe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Fabric",radius:t},VF(r,i,uK),HF(t,r,uK)}(n,e);break;case"Fluent":!function Whe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Fluent",radius:t},VF(r,i,cK),HF(t,r,cK)}(n,e);break;case"Bootstrap":!function Yhe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Bootstrap",radius:t},function Zhe(r,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,s=32,o=2;i.setAttribute("id",t),i.setAttribute("class",Fhe),i.setAttribute("viewBox","0 0 "+n+" "+n),r.insertBefore(i,r.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",FF+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+s+","+s+")"),i.appendChild(l)}}(r,i),function Qhe(r,t){var e=r.querySelector("svg.e-spin-bootstrap"),i=0,n=0,s=24;e.style.width=e.style.height=t+"px";for(var o=90,a=0;a<=7;a++){var l=$3(i,n,s,o),h=e.querySelector("."+FF+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(r,t)}(n,e);break;case"HighContrast":!function Khe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"HighContrast",radius:t},VF(r,i,gK),HF(t,r,gK)}(n,e);break;case"Bootstrap4":!function zhe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Bootstrap4",radius:t},G3(r,i,0,pK),K3(t,r,"Bootstrap4",pK)}(n,e);break;case"Bootstrap5":!function jhe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Bootstrap5",radius:t},G3(r,i,0,fK),K3(t,r,"Bootstrap5",fK)}(n,e);break;case"Tailwind":case"Tailwind-dark":!function Ghe(r,t,e){var i=Vy();kl[i]={timeOut:0,type:"Tailwind",radius:t},VF(r,i,dK),HF(t,r,dK)}(n,e)}}(o,n.wrap,e),f(r.label)||function Vhe(r,t,e){var i=e("div",{});i.classList.add("e-spin-label"),i.innerHTML=t,r.appendChild(i)}(n.inner_wrap,r.label,i)}else{var s=f(r.template)?null:r.template;n.wrap.classList.add(NF),function eue(r,t,e){f(e)||r.classList.add(e),r.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,s,null)}n.wrap.classList.add(Zk),n=null}}function Xhe(r,t){var e=[],i=r,n=t,s=!1,o=1;return function a(l){e.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!s?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),s=!0):l<8&&s?8===(l=parseFloat((l+.2).toFixed(2)))&&(s=!1):l<=8&&!s&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),e}function Vy(){for(var r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function VF(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",e);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",FF);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),r.insertBefore(n,r.firstChild),n.appendChild(s),n.appendChild(o)}function G3(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",i),n.setAttribute("id",t),s.setAttribute("class",FF),r.insertBefore(n,r.firstChild),n.appendChild(s)}function vK(r){(function rue(r,t,e,i,n,s,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=t-r,u=function sue(r){return parseFloat(r)}(2*o.globalInfo[o.uniqueID].radius+""),p=yK(u),m=-90*(o.globalInfo[o.uniqueID].count||0);!function y(S){var T=Math.max(0,Math.min((new Date).getTime()-l,i));(function C(S,T){if(!f(T.querySelector("svg.e-spin-material"))&&!f(T.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var P=T.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");P.setAttribute("stroke-dashoffset",bK(u,p,S,s)+""),P.setAttribute("transform","rotate("+m+" "+u/2+" "+u/2+")")}})(e(T,r,h,i),S.container),a===S.globalInfo[S.uniqueID].previousId&&T<i?kl[S.uniqueID].timeOut=setTimeout(y.bind(null,S),1):vK(S)}(o)})(1,149,aue,1333,0,75,r),r.globalInfo[r.uniqueID].count=++r.globalInfo[r.uniqueID].count%4}function K3(r,t,e,i){var n=2*r,s=t.querySelector("svg."+i),o=s.querySelector("path.e-path-circle"),a=yK(n),l=n/2+"px";s.setAttribute("viewBox","0 0 "+n+" "+n),s.style.width=s.style.height=n+"px",s.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function oue(r,t){var e=r/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}(n,a)),"Material"===e&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",bK(n,a,1,75)+""))}function yK(r){return.1*r}function bK(r,t,e,i){return(r-t)*Math.PI*(3*i/100-e/100)}function aue(r,t,e,i){var n=(r/=i)*r,s=n*r;return t+e*(6*s*n+-15*n*n+10*s)}function HF(r,t,e){var i=r,n=r,s=2*r,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),u=l.querySelector(".e-path-arc"),p=s/2+"px";h.setAttribute("d",function hue(r,t,e){return["M",r,t,"m",-e,0,"a",e,e,0,1,0,2*e,0,"a",e,e,0,1,0,2*-e,0].join(" ")}(i,n,r)),u.setAttribute("d",function lue(r,t,e,i,n){var s=$3(r,t,e,n),o=$3(r,t,e,i);return["M",s.x,s.y,"A",e,e,0,0,0,o.x,o.y].join(" ")}(i,n,r,315,45)),l.setAttribute("viewBox","0 0 "+s+" "+s),l.style.transformOrigin=p+" "+p+" "+p,l.style.width=l.style.height=s+"px"}function $3(r,t,e,i){var n=(i-90)*Math.PI/180;return{x:r+e*Math.cos(n),y:t+e*Math.sin(n)}}function Ul(r){CK(r,!1),r=null}function CK(r,t){var e;if(r&&(e=r.classList.contains(LF)?r:r.querySelector("."+LF)),r&&e){var i=e.querySelector("."+U3);if(t?!e.classList.contains(NF)&&!e.classList.contains(Zk):!e.classList.contains(NF)&&!e.classList.contains(Yk)){var s=e.querySelector("svg");if(f(s))return;var o=s.getAttribute("id");switch(kl[o].isAnimate=!t,kl[o].type){case"Material":t?clearTimeout(kl[o].timeOut):function qhe(r,t,e){var i={};kl[t].timeOut=0,i[t]=function iue(r,t,e,i){return{radius:t,count:e,previousId:i}}(0,e,0,0),vK({uniqueID:t,container:r,globalInfo:i,timeOutVar:0})}(i,o,kl[o].radius);break;case"Bootstrap":t?clearTimeout(kl[o].timeOut):function Jhe(r){for(var e=r.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)s(r.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,Xhe(i,i),e);function s(o,a,l,h,u){var p=0;!function m(y){kl[u].isAnimate&&(++p,o.setAttribute("r",y+""),p>=h.length&&(p=0),kl[u].timeOut=setTimeout(m.bind(null,h[p]),18))}(a)}}(i)}}t?ai(e,[Zk],[Yk]):ai(e,[Yk],[Zk]),r=null}}function Rl(r){CK(r,!0),r=null}var ke;!function(r){var t,e=!0;function n(ce){s(ce.floatLabelType,ce.element),ce.element.addEventListener("focus",function(){var Ae=S(this);(Ae.classList.contains("e-input-group")||Ae.classList.contains("e-outline")||Ae.classList.contains("e-filled"))&&Ae.classList.add("e-input-focus"),setTimeout(function(){r.calculateWidth(ce.element,Ae)},80)}),ce.element.addEventListener("blur",function(){var Ae=S(this);(Ae.classList.contains("e-input-group")||Ae.classList.contains("e-outline")||Ae.classList.contains("e-filled"))&&Ae.classList.remove("e-input-focus"),setTimeout(function(){r.calculateWidth(ce.element,Ae)},80)}),ce.element.addEventListener("input",function(){s(t,ce.element)})}function s(ce,Ae){var Dt=Ae.value;""!==Dt&&!f(Dt)&&Ae.parentElement?Ae.parentElement.classList.add("e-valid-input"):"Always"!==ce&&Ae.parentElement&&Ae.parentElement.classList.remove("e-valid-input")}function o(){var ce=S(this).getElementsByClassName("e-float-text")[0];f(ce)||(B([ce],"e-label-top"),ce.classList.contains("e-label-bottom")&&W([ce],"e-label-bottom"))}function a(){var ce=S(this);if(ce.getElementsByTagName("textarea")[0]?""===ce.getElementsByTagName("textarea")[0].value:""===ce.getElementsByTagName("input")[0].value){var Ae=ce.getElementsByClassName("e-float-text")[0];f(Ae)||(Ae.classList.contains("e-label-top")&&W([Ae],"e-label-top"),B([Ae],"e-label-bottom"))}}function l(ce){ce.addEventListener("focus",o),ce.addEventListener("blur",a)}function u(ce,Ae,Dt){var bi=f(Dt)?si:Dt;"Auto"===ce.floatLabelType&&l(ce.element),f(Ae.container)?(Ae.container=O(ce,"e-float-input","e-float-custom-tag","div",bi),ce.element.parentNode&&ce.element.parentNode.insertBefore(Ae.container,ce.element)):(f(ce.customTag)||Ae.container.classList.add("e-float-custom-tag"),Ae.container.classList.add("e-float-input"));var Ci=bi("span",{className:"e-float-line"}),pi=bi("label",{className:"e-float-text"});if(!f(ce.element.id)&&""!==ce.element.id&&(pi.id="label_"+ce.element.id.replace(/ /g,"_"),qe(ce.element,{"aria-labelledby":pi.id})),!f(ce.element.placeholder)&&""!==ce.element.placeholder&&(pi.innerText=N(ce.element.placeholder),ce.element.removeAttribute("placeholder")),!f(ce.properties)&&!f(ce.properties.placeholder)&&""!==ce.properties.placeholder&&(pi.innerText=N(ce.properties.placeholder)),pi.innerText||Ae.container.classList.add("e-no-float-label"),Ae.container.classList.contains("e-float-icon-left")){var yr=Ae.container.querySelector(".e-input-in-wrap");yr.appendChild(ce.element),yr.appendChild(Ci),yr.appendChild(pi)}else Ae.container.appendChild(ce.element),Ae.container.appendChild(Ci),Ae.container.appendChild(pi);C(ce.element.value,pi),"Always"===ce.floatLabelType&&(pi.classList.contains("e-label-bottom")&&W([pi],"e-label-bottom"),B([pi],"e-label-top")),"Auto"===ce.floatLabelType&&(ce.element.addEventListener("input",function(ca){C(ce.element.value,pi,ce.element)}),ce.element.addEventListener("blur",function(ca){C(ce.element.value,pi)})),f(ce.element.getAttribute("id"))||pi.setAttribute("for",ce.element.getAttribute("id"))}function p(ce,Ae){"Always"===ce&&Ae.classList.contains("e-outline")&&Ae.classList.add("e-valid-input")}function y(ce,Ae,Dt){ce&&!Dt?W([Ae],"e-clear-icon-hide"):B([Ae],"e-clear-icon-hide")}function C(ce,Ae,Dt){void 0===Dt&&(Dt=null),ce?(B([Ae],"e-label-top"),Ae.classList.contains("e-label-bottom")&&W([Ae],"e-label-bottom")):(null==Dt||Dt!==document.activeElement)&&(Ae.classList.contains("e-label-top")&&W([Ae],"e-label-top"),B([Ae],"e-label-bottom"))}function S(ce){var Ae=f(ce.parentNode)?ce:ce.parentNode;return Ae&&Ae.classList.contains("e-input-in-wrap")&&(Ae=Ae.parentNode),Ae}function R(ce,Ae,Dt){(null==e||e)&&Ae.addEventListener("click",function(bi){ce.classList.contains("e-disabled")||ce.readOnly||(bi.preventDefault(),ce!==document.activeElement&&ce.focus(),ce.value="",B([Ae],"e-clear-icon-hide"))}),ce.addEventListener("input",function(bi){y(ce.value,Ae)}),ce.addEventListener("focus",function(bi){y(ce.value,Ae,ce.readOnly)}),ce.addEventListener("blur",function(bi){setTimeout(function(){B([Ae],"e-clear-icon-hide")},200)})}function P(ce,Ae){if(S(ce).classList.contains("e-float-input")&&"Auto"===Ae){var bi=S(ce).getElementsByClassName("e-float-text")[0];C(ce.value,bi,ce)}}function O(ce,Ae,Dt,bi,Ci){var yr,pi=f(Ci)?si:Ci;return f(ce.customTag)?yr=pi(bi,{className:Ae}):(yr=pi(ce.customTag,{className:Ae})).classList.add(Dt),yr.classList.add("e-control-wrapper"),yr}function N(ce){var Ae="";if(!f(ce)&&""!==ce){var Dt=document.createElement("span");Dt.innerHTML='<input  placeholder="'+ce+'"/>',Ae=Dt.children[0].placeholder}return Ae}function U(ce,Ae,Dt){!f(Dt)&&""!==Dt&&W(Ae,Dt.split(" ")),!f(ce)&&""!==ce&&B(Ae,ce.split(" "))}function ae(ce,Ae){var Dt=ce.clientWidth-parseInt(getComputedStyle(ce,null).getPropertyValue("padding-left"));f(Ae.getElementsByClassName("e-float-text-content")[0])||(Ae.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&Ae.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(Dt<Ae.getElementsByClassName("e-float-text-content")[0].clientWidth||Dt===Ae.getElementsByClassName("e-float-text-content")[0].clientWidth)&&Ae.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function Te(ce,Ae){ce=N(ce);var Dt=S(Ae);Dt.classList.contains("e-float-input")?f(ce)||""===ce?(Dt.classList.add("e-no-float-label"),Dt.getElementsByClassName("e-float-text-content")[0]?Dt.getElementsByClassName("e-float-text")[0].children[0].textContent="":Dt.getElementsByClassName("e-float-text")[0].textContent=""):(Dt.getElementsByClassName("e-float-text-content")[0]?Dt.getElementsByClassName("e-float-text")[0].children[0].textContent=ce:Dt.getElementsByClassName("e-float-text")[0].textContent=ce,Dt.classList.remove("e-no-float-label"),Ae.removeAttribute("placeholder")):f(ce)||""===ce?Ae.removeAttribute("placeholder"):qe(Ae,{placeholder:ce})}function Oe(ce,Ae,Dt){ce?qe(Ae,{readonly:""}):Ae.removeAttribute("readonly"),f(Dt)||P(Ae,Dt)}function oe(ce,Ae){ce?B(Ae,"e-rtl"):W(Ae,"e-rtl")}function Ie(ce,Ae,Dt,bi){var Ci={disabled:"disabled","aria-disabled":"true"},pi=!f(bi);ce?(Ae.classList.remove("e-disabled"),fe(Ci,Ae),pi&&W([bi],"e-disabled")):(Ae.classList.add("e-disabled"),_e(Ci,Ae),pi&&B([bi],"e-disabled")),f(Dt)||P(Ae,Dt)}function De(ce,Ae,Dt,bi,Ci){var pi=f(Ci)?si:Ci;ce?Dt.clearButton=function T(ce,Ae,Dt,bi){var pi=(f(bi)?si:bi)("span",{className:"e-clear-icon"}),yr=Ae.container;return f(Dt)?(Ae.container.classList.contains("e-float-input")?Ae.container.querySelector(".e-float-text"):ce).insertAdjacentElement("afterend",pi):yr.appendChild(pi),!f(yr)&&yr.classList.contains("e-float-input")&&B([yr],"e-input-group"),B([pi],"e-clear-icon-hide"),R(ce,pi),pi.setAttribute("aria-label","close"),pi}(Ae,Dt,bi,pi):($e(Dt.clearButton),Dt.clearButton=null)}function fe(ce,Ae){for(var Dt=0,bi=Object.keys(ce);Dt<bi.length;Dt++){var Ci=bi[Dt],pi=S(Ae);"disabled"===Ci&&Ae.classList.remove("e-disabled"),"disabled"===Ci&&pi.classList.contains("e-input-group")&&pi.classList.remove("e-disabled"),"placeholder"===Ci&&pi.classList.contains("e-float-input")?pi.getElementsByClassName("e-float-text")[0].textContent="":Ae.removeAttribute(Ci)}}function _e(ce,Ae){for(var Dt=0,bi=Object.keys(ce);Dt<bi.length;Dt++){var Ci=bi[Dt],pi=S(Ae);"disabled"===Ci&&Ae.classList.add("e-disabled"),"disabled"===Ci&&pi.classList.contains("e-input-group")&&pi.classList.add("e-disabled"),"placeholder"===Ci&&pi.classList.contains("e-float-input")?pi.getElementsByClassName("e-float-text")[0].textContent=ce[Ci]:Ae.setAttribute(Ci,ce[Ci])}}function Pe(ce,Ae){if(ce.classList.contains("e-outline")&&ce.getElementsByClassName("e-float-text")[0]){var Dt=Ae("span",{className:"e-float-text-content"});Dt.innerHTML=ce.getElementsByClassName("e-float-text")[0].innerHTML,ce.getElementsByClassName("e-float-text")[0].innerHTML="",ce.getElementsByClassName("e-float-text")[0].appendChild(Dt)}}function Wt(ce,Ae,Dt){var bi=[];bi.push(Dt);var Ci=f(Dt)?Ae.querySelectorAll(".e-input-group-icon"):bi;if(ce&&Ci.length>0)for(var pi=0;pi<Ci.length;pi++)Ci[pi].addEventListener("mousedown",ei,!1),Ci[pi].addEventListener("mouseup",yi,!1);else if(Ci.length>0)for(pi=0;pi<Ci.length;pi++)Ci[pi].removeEventListener("mousedown",ei,this),Ci[pi].removeEventListener("mouseup",yi,this)}function ei(){for(var Ae=this.parentElement;!Ae.classList.contains("e-input-group");)Ae=Ae.parentElement;!function Kt(ce,Ae){!ce.classList.contains("e-disabled")&&!ce.querySelector("input").readOnly&&Ae.classList.add("e-input-btn-ripple")}(Ae,this)}function yi(){var ce=this;setTimeout(function(){ce.classList.remove("e-input-btn-ripple")},500)}function Ai(ce,Ae){var Dt=Ae("span",{className:ce});return Dt.classList.add("e-input-group-icon"),Dt}function ri(ce,Ae,Dt,bi){var Ci=f(bi)?si:bi,pi=Ai(ce,Ci);Ae.classList.add("e-float-icon-left");var yr=Ae.querySelector(".e-input-in-wrap");if(f(yr)){yr=Ci("span",{className:"e-input-in-wrap"}),Dt.parentNode.insertBefore(yr,Dt);var ca=Ae.querySelectorAll(Dt.tagName+" ~ *");yr.appendChild(Dt);for(var Io=0;Io<ca.length;Io++)yr.appendChild(ca[Io])}return yr.parentNode.insertBefore(pi,yr),Ae.classList.contains("e-input-group")||Ae.classList.add("e-input-group"),Wt(!0,Ae,pi),pi}function Yn(ce,Ae,Dt){var Ci=Ai(ce,f(Dt)?si:Dt);return Ae.classList.contains("e-input-group")||Ae.classList.add("e-input-group"),(Ae.classList.contains("e-float-icon-left")?Ae.querySelector(".e-input-in-wrap"):Ae).appendChild(Ci),Wt(!0,Ae,Ci),Ci}function es(ce,Ae){"hidden"===Ae.type?ce.classList.add("e-hidden"):ce.classList.contains("e-hidden")&&ce.classList.remove("e-hidden")}r.createInput=function i(ce,Ae){var Dt=f(Ae)?si:Ae,bi={container:null,buttons:[],clearButton:null};if(t=ce.floatLabelType,e=ce.bindClearAction,f(ce.floatLabelType)||"Never"===ce.floatLabelType?(bi.container=O(ce,"e-input-group","e-input-custom-tag","span",Dt),ce.element.parentNode.insertBefore(bi.container,ce.element),B([ce.element],"e-input"),bi.container.appendChild(ce.element)):u(ce,bi,Dt),n(ce),!f(ce.properties)&&!f(ce.properties.showClearButton)&&ce.properties.showClearButton&&"TEXTAREA"!==ce.element.tagName&&(De(ce.properties.showClearButton,ce.element,bi,!0,Dt),bi.clearButton.setAttribute("role","button"),bi.container.classList.contains("e-float-input")&&B([bi.container],"e-input-group")),!f(ce.buttons)&&"TEXTAREA"!==ce.element.tagName)for(var Ci=0;Ci<ce.buttons.length;Ci++)bi.buttons.push(Yn(ce.buttons[Ci],bi.container,Dt));return!f(ce.element)&&"TEXTAREA"===ce.element.tagName&&B([bi.container],"e-multi-line-input"),es(bi.container,ce.element),bi=function m(ce,Ae){if(!f(ce.properties))for(var Dt=0,bi=Object.keys(ce.properties);Dt<bi.length;Dt++)switch(bi[Dt]){case"cssClass":U(ce.properties.cssClass,[Ae.container]),p(ce.floatLabelType,Ae.container);break;case"enabled":Ie(ce.properties.enabled,ce.element,ce.floatLabelType,Ae.container);break;case"enableRtl":oe(ce.properties.enableRtl,[Ae.container]);break;case"placeholder":Te(ce.properties.placeholder,ce.element);break;case"readonly":Oe(ce.properties.readonly,ce.element)}return Ae}(ce,bi),Pe(bi.container,Dt),bi},r.bindInitialEvent=n,r.wireFloatingEvents=l,r.wireClearBtnEvents=R,r.setValue=function z(ce,Ae,Dt,bi){if(Ae.value=ce,ae(Ae,Ae.parentElement),!f(Dt)&&"Auto"===Dt&&P(Ae,Dt),!f(bi)&&bi){var Ci=S(Ae);if(!f(Ci)){var pi=Ci.getElementsByClassName("e-clear-icon")[0];f(pi)||(Ae.value&&Ci.classList.contains("e-input-focus")?W([pi],"e-clear-icon-hide"):B([pi],"e-clear-icon-hide"))}}s(Dt,Ae)},r.setCssClass=U,r.calculateWidth=ae,r.setWidth=function me(ce,Ae){"number"==typeof ce?Ae.style.width=ut(ce):"string"==typeof ce&&(Ae.style.width=ce.match(/px|%|em/)?ce:ut(ce)),ae(Ae.firstChild,Ae)},r.setPlaceholder=Te,r.setReadonly=Oe,r.setEnableRtl=oe,r.setEnabled=Ie,r.setClearButton=De,r.removeAttributes=fe,r.addAttributes=_e,r.removeFloating=function je(ce){var Ae=ce.container;if(!f(Ae)&&Ae.classList.contains("e-float-input")){var Dt=Ae.querySelector("textarea")?Ae.querySelector("textarea"):Ae.querySelector("input"),bi=Ae.querySelector(".e-float-text").textContent,Ci=null!==Ae.querySelector(".e-clear-icon");we(Ae.querySelector(".e-float-line")),we(Ae.querySelector(".e-float-text")),ai(Ae,["e-input-group"],["e-float-input"]),function h(ce){ce.removeEventListener("focus",o),ce.removeEventListener("blur",a)}(Dt),qe(Dt,{placeholder:bi}),Dt.classList.add("e-input"),!Ci&&"INPUT"===Dt.tagName&&Dt.removeAttribute("required")}},r.addFloating=function Se(ce,Ae,Dt,bi){var Ci=f(bi)?si:bi,pi=j(ce,".e-input-group");if(t=Ae,"Never"!==Ae){var yr=pi.tagName,ca={element:ce,floatLabelType:Ae,customTag:yr="DIV"!==yr&&"SPAN"!==yr?yr:null,properties:{placeholder:Dt}},Io=pi.querySelector(".e-clear-icon"),fg={container:pi};ce.classList.remove("e-input"),u(ca,fg,Ci),Pe(fg.container,Ci),ae(ca.element,fg.container);var Jp=pi.classList.contains("e-float-icon-left");if(f(Io)&&(Io=Jp?pi.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):pi.querySelector(".e-input-group-icon")),f(Io))Jp&&(Io=pi.querySelector(".e-input-group-icon")),f(Io)&&pi.classList.remove("e-input-group");else{var z7=pi.querySelector(".e-float-line"),j7=pi.querySelector(".e-float-text"),YH=Jp?pi.querySelector(".e-input-in-wrap"):pi;YH.insertBefore(ce,Io),YH.insertBefore(z7,Io),YH.insertBefore(j7,Io)}}p(Ae,ce.parentElement)},r.createSpanElement=Pe,r.setRipple=function Ve(ce,Ae){for(var Dt=0;Dt<Ae.length;Dt++)Wt(ce,Ae[Dt].container)},r.addIcon=function Ki(ce,Ae,Dt,bi,Ci){var pi="string"==typeof Ae?Ae.split(","):Ae;if("append"===ce.toLowerCase())for(var yr=0,ca=pi;yr<ca.length;yr++)Yn(ca[yr],Dt,Ci);else for(var fg=0,Jp=pi;fg<Jp.length;fg++)ri(Jp[fg],Dt,bi,Ci);Dt.getElementsByClassName("e-input-group-icon")[0]&&Dt.getElementsByClassName("e-float-text-overflow")[0]&&Dt.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},r.prependSpan=ri,r.appendSpan=Yn,r.validateInputType=es}(ke||(ke={}));var hn,wue=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},J3="e-input-group-icon",e5="e-spin-up",t5="e-error",Nx="increment",Jk="decrement",xue=new RegExp("^(-)?(\\d*)$"),xK="e-input-focus",TK=["title","style","class"],Bx=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return wue(t,r),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=re("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),W([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=j(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++){var s=this.element.attributes[n].nodeName;"id"!==s&&"class"!==s?(i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(a){return 0!==a.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,ui("ej2_instances",e,this.element)}qe(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new $r("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Sn("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.numericOptions)||void 0===this.numericOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.numericOptions)||void 0===this.numericOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(f(this.numericOptions)||void 0===this.numericOptions.value||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties(ui(o,h,{}),!e)}break;case"min":if(f(this.numericOptions)||void 0===this.numericOptions.min||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties(ui(o,u,{}),!e)}break;case"max":if(f(this.numericOptions)||void 0===this.numericOptions.max||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==p&&!isNaN(p)&&this.setProperties(ui(o,p,{}),!e)}break;case"step":if(f(this.numericOptions)||void 0===this.numericOptions.step||e){var m=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==m&&!isNaN(m)&&this.setProperties(ui(o,m,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var y=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==y&&!isNaN(y)||"value"===o)&&this.setProperties(ui(o,y,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new Rr(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==re("currency",this)&&(ui("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getNumericValidClassList(this.cssClass));var i=ke.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&qe(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),qe(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&qe(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var n=0;n<this.element.attributes.length;n++)i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name);for(var s=0,o=Object.keys(i);s<o.length;s++){var a=o[s];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,i[a])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];TK.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(TK.indexOf(n)>-1)if("class"===n){var s=this.getNumericValidClassList(this.htmlAttributes[n]);""!==s&&B([this.container],s.split(" "))}else if("style"===n){var o=this.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.container.setAttribute(n,o)}else this.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.setElementWidth=function(e){f(e)||("number"==typeof e?this.container.style.width=ut(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:ut(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=ke.appendSpan(J3+" e-spin-down",this.container,this.createElement),qe(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=ke.appendSpan(J3+" "+e5,this.container,this.createElement),qe(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&qe(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&qe(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var n=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(n,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?W([this.container],t5):B([this.container],t5),qe(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&A.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",j(this.element,"form")){var n=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},t.prototype.setSpinButton=function(){f(this.spinDown)||qe(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),f(this.spinUp)||qe(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){A.add(this.element,"focus",this.focusHandler,this),A.add(this.element,"blur",this.focusOutHandler,this),A.add(this.element,"keydown",this.keyDownHandler,this),A.add(this.element,"keyup",this.keyUpHandler,this),A.add(this.element,"input",this.inputHandler,this),A.add(this.element,"keypress",this.keyPressHandler,this),A.add(this.element,"change",this.changeHandler,this),A.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&A.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){A.add(this.spinUp,X.touchStartEvent,this.mouseDownOnSpinner,this),A.add(this.spinDown,X.touchStartEvent,this.mouseDownOnSpinner,this),A.add(this.spinUp,X.touchEndEvent,this.mouseUpOnSpinner,this),A.add(this.spinDown,X.touchEndEvent,this.mouseUpOnSpinner,this),A.add(this.spinUp,X.touchMoveEvent,this.touchMoveOnSpinner,this),A.add(this.spinDown,X.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){A.remove(this.element,"focus",this.focusHandler),A.remove(this.element,"blur",this.focusOutHandler),A.remove(this.element,"keyup",this.keyUpHandler),A.remove(this.element,"input",this.inputHandler),A.remove(this.element,"keydown",this.keyDownHandler),A.remove(this.element,"keypress",this.keyPressHandler),A.remove(this.element,"change",this.changeHandler),A.remove(this.element,"paste",this.pasteHandler),this.formEle&&A.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){A.remove(this.spinUp,X.touchStartEvent,this.mouseDownOnSpinner),A.remove(this.spinDown,X.touchStartEvent,this.mouseDownOnSpinner),A.remove(this.spinUp,X.touchEndEvent,this.mouseUpOnSpinner),A.remove(this.spinDown,X.touchEndEvent,this.mouseUpOnSpinner),A.remove(this.spinUp,X.touchMoveEvent,this.touchMoveOnSpinner),A.remove(this.spinDown,X.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),Qs(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var n=e.element.selectionStart,s=e.element.selectionStart-1,a=e.element.value.split(""),h=re("decimal",d0(e.locale)),u=h.charCodeAt(0);" "===e.element.value[s]&&e.element.selectionStart>0&&!i?(f(e.prevVal)?e.element.value=e.element.value.trim():0!==s?e.element.value=e.prevVal:0===s&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===u||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==u)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===u||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==u)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=f(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&X.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,j(this.element,"form")){var s=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),s.dispatchEvent(o)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||n)&&X.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==re("decimal",d0(this.locale))&&this.element.value!==re("minusSign",d0(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(a=this.value);var u={event:e,value:null===a||isNaN(a)?null:a,previousValue:null===l||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",u)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(Nx,e);break;case 40:e.preventDefault(),this.action(Jk,e)}},t.prototype.performAction=function(e,i,n){(null===e||isNaN(e))&&(e=0);var s=n===Nx?e+i:e-i;return s=this.correctRounding(e,i,s),this.strictMode?this.trimValue(s):s},t.prototype.correctRounding=function(e,i,n){var s=new RegExp("[,.](.*)"),o=s.test(e.toString()),a=s.test(i.toString());if(o||a){var l=o?s.exec(e.toString())[0].length:0,h=a?s.exec(i.toString())[0].length:0,u=Math.max(l,h);return this.roundValue(n,u)}return n},t.prototype.roundValue=function(e,i){i=i||0;var n=Math.pow(10,i);return Math.round(e*=n)/n},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),null!==e&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){ui(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),qe(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){ke.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,n=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(n.test(s)){var o=n.exec(s);f(o)||(s=e.toFixed(Math.min(parseInt(o[1],10),20)))}var a=s.split(".")[1];return i=a&&a.length?a.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var n=e,s=i||0,o=n.toString().split("e"),a=(n=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+s:s)))).toString().split("e");return n=Number(a[0]+"e"+(a[1]?Number(a[1])-s:-s)),Number(n.toFixed(s))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!X.isDevice&&"11.0"===X.info.version&&13===e.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var n=String.fromCharCode(e.which),s=re("decimal",d0(this.locale)),o="NumpadDecimal"===e.code&&n!==s;o&&(n=s);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+n+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(o){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var i=re("decimal",d0(this.locale)),n="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?xue:(this.decimals&&this.validateDecimalOnType&&(n="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+n+")?)|("+i+"\\d"+n+")))?$"))},t.prototype.mouseWheel=function(e){var i;e.preventDefault(),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i>0?this.action(Nx,e):i<0&&this.action(Jk,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,W([this.container],t5),this.prevValue=this.value,this.value||0===this.value){var n=this.formatNumber();this.setElementValue(n),this.isPrevFocused||(X.isDevice||"11.0"!==X.info.version?setTimeout(function(){i.element.setSelectionRange(0,n.length)},X.isDevice&&X.isIos?600:0):this.element.setSelectionRange(0,n.length))}X.isDevice||A.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),X.isDevice){var n=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){i.setElementValue(n,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),X.isDevice||A.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(j(this.element,"form")){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var s=e.currentTarget,o=s.classList.contains(e5)?Nx:Jk;A.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,e)},150),A.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if("touchmove"===e.type){var n=e.touches;i=n.length&&document.elementFromPoint(n[0].pageX,n[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(J3)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),X.isDevice||(this.isPrevFocused=!1)),X.isDevice||e.preventDefault(),this.getElementData(e)){var i=e.currentTarget,n=i.classList.contains(e5)?Nx:Jk;if(A.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(n,e),this.isCalled=!1,A.remove(document,"mouseup",this.mouseUpClick),j(this.element,"form")){var o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},t.prototype.floatLabelTypeUpdate=function(){ke.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),ke.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,A.remove(this.spinUp,"mouseleave",this.mouseUpClick),A.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Nx)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Jk)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),we(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),we(this.spinUp),we(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),we(this.container),r.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),B([this.container],[xK]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),W([this.container],[xK]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"width":this.setElementWidth(e.width),ke.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":ke.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":ke.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":ke.setReadonly(e.readonly,this.element),this.readonly?qe(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),ke.validateInputType(this.container,this.element);break;case"placeholder":ke.setPlaceholder(e.placeholder,this.element),ke.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":ui(o,re(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ke.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=re(o,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(o,a);break;case"currencyCode":var l=re(o,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":ui(o,re(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){ke.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(we(this.spinUp),we(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},lo([D("")],t.prototype,"cssClass",void 0),lo([D(null)],t.prototype,"value",void 0),lo([D(-Number.MAX_VALUE)],t.prototype,"min",void 0),lo([D(Number.MAX_VALUE)],t.prototype,"max",void 0),lo([D(1)],t.prototype,"step",void 0),lo([D(null)],t.prototype,"width",void 0),lo([D(null)],t.prototype,"placeholder",void 0),lo([D({})],t.prototype,"htmlAttributes",void 0),lo([D(!0)],t.prototype,"showSpinButton",void 0),lo([D(!1)],t.prototype,"readonly",void 0),lo([D(!0)],t.prototype,"enabled",void 0),lo([D(!1)],t.prototype,"showClearButton",void 0),lo([D(!1)],t.prototype,"enablePersistence",void 0),lo([D("n2")],t.prototype,"format",void 0),lo([D(null)],t.prototype,"decimals",void 0),lo([D(null)],t.prototype,"currency",void 0),lo([D(null)],t.prototype,"currencyCode",void 0),lo([D(!0)],t.prototype,"strictMode",void 0),lo([D(!1)],t.prototype,"validateDecimalOnType",void 0),lo([D("Never")],t.prototype,"floatLabelType",void 0),lo([K()],t.prototype,"created",void 0),lo([K()],t.prototype,"destroyed",void 0),lo([K()],t.prototype,"change",void 0),lo([K()],t.prototype,"focus",void 0),lo([K()],t.prototype,"blur",void 0),lo([an],t)}(ur),Xue=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gl=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Vx={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},tR=(()=>(function(r){r[r.Message=0]="Message",r[r.Label=1]="Label"}(tR||(tR={})),tR))(),Jue=function(r){function t(i,n){var s=r.call(this,n,i)||this;if(s.validated=[],s.errorRules=[],s.allowSubmit=!1,s.required="required",s.infoElement=null,s.inputElement=null,s.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",s.localyMessage={},s.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof s.rules>"u"&&(s.rules={}),s.l10n=new $r("formValidator",s.defaultMessages,s.locale),s.locale&&s.localeFunc(),dm.on("notifyExternalChange",s.afterLocalization,s),i="string"==typeof i?he(i,document):i,null!=s.element)return s.element.setAttribute("novalidate",""),s.inputElements=Tt(s.selectQuery,s.element),s.createHTML5Rules(),s.wireEvents(),s}var e;return Xue(t,r),e=t,t.prototype.addRules=function(i,n){i&&(this.rules.hasOwnProperty(i)?de(this.rules[i],n,{}):this.rules[i]=n)},t.prototype.removeRules=function(i,n){if(i||n)if(this.rules[i]&&!n)delete this.rules[i];else{if(f(this.rules[i]&&n))return;for(var s=0;s<n.length;s++)delete this.rules[i][n[s]]}else this.rules={}},t.prototype.validate=function(i){var n=Object.keys(this.rules);if(i&&n.length)return this.validateRules(i),-1!==n.indexOf(i)&&0===this.errorRules.filter(function(l){return l.name===i}).length;this.errorRules=[];for(var s=0,o=n;s<o.length;s++)this.validateRules(o[s]);return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(i){return this.inputElement=he('[name="'+i+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var n=0,s=Tt("."+this.errorClass+", ."+this.validClass,this.element);n<s.length;n++)we(s[n]);r.prototype.destroy.call(this),dm.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)"locale"===o[s]&&this.localeFunc()},t.prototype.localeFunc=function(){for(var i=0,n=Object.keys(this.defaultMessages);i<n.length;i++){var s=n[i];this.l10n.setLocale(this.locale);var o=this.l10n.getConstant(s);this.localyMessage[s]=o}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(i){this.locale=i.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=Tt(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var n=0,s=Tt(this.selectQuery,this.element);n<s.length;n++){var a=s[n];a.removeAttribute("aria-invalid"),a.classList.remove(this.errorClass),a.name.length>0&&(this.getInputElement(a.name),this.getErrorElement(a.name),this.hideMessage(a.name)),a.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var i=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],n=["hidden","email","url","date","number","tel"],s=0,o=this.inputElements;s<o.length;s++){for(var a=o[s],l={},h=0,u=i;h<u.length;h++){var p=u[h];if(null!==a.getAttribute(p))switch(p){case"required":this.defRule(a,l,p,a.required);break;case"data-validation":p=a.getAttribute(p),this.defRule(a,l,p,!0);break;case"type":-1!==n.indexOf(a.type)&&this.defRule(a,l,a.type,!0);break;case"rangeLength":case"range":this.defRule(a,l,p,JSON.parse(a.getAttribute(p)));break;case"equalTo":var m=a.getAttribute(p);this.defRule(a,l,p,m);break;default:"true"===a.getAttribute("data-val")?this.annotationRule(a,l,p,a.getAttribute(p)):this.defRule(a,l,p,a.getAttribute(p))}}0!==Object.keys(l).length&&this.addRules(a.name,l)}},t.prototype.annotationRule=function(i,n,s,o){var a=s.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=a[a.length-1],u=a[a.length-2];if(-1!==l.indexOf(h))switch(h){case"required":this.defRule(i,n,"required",o);break;case"creditcard":this.defRule(i,n,"creditcard",o);break;case"phone":this.defRule(i,n,"tel",o)}else if(-1!==l.indexOf(u))switch(u){case"maxlength":this.defRule(i,n,"maxLength",o);break;case"minlength":this.defRule(i,n,"minLength",o);break;case"range":var p=i.getAttribute("data-val-range-min"),m=i.getAttribute("data-val-range-max");this.defRule(i,n,"range",[p,m]);break;case"equalto":var y=i.getAttribute(s).split(".");this.defRule(i,n,"equalTo",y[y.length-1]);break;case"regex":this.defRule(i,n,"regex",o)}},t.prototype.defRule=function(i,n,s,o){var h,a=i.getAttribute("data-"+s+"-message"),l=i.getAttribute("data-val-"+s);this.rules[i.name]&&"validateHidden"!==s&&"hidden"!==s&&(this.getInputElement(i.name),h=this.getErrorMessage(this.rules[i.name][s],s)),a?o=[o,a]:l?o=[o,l]:h&&(o=[o,h]),n[s]=o},t.prototype.wireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++){var s=n[i];e.isCheckable(s)?A.add(s,"click",this.clickHandler,this):"SELECT"===s.tagName?A.add(s,"change",this.changeHandler,this):(A.add(s,"focusout",this.focusOutHandler,this),A.add(s,"keyup",this.keyUpHandler,this))}A.add(this.element,"submit",this.submitHandler,this),A.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++)A.clearEvents(n[i]);A.remove(this.element,"submit",this.submitHandler),A.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(i){this.trigger("focusout",i);var n=i.target;this.rules[n.name]&&(this.rules[n.name][this.required]||n.value.length>0?this.validate(n.name):-1===this.validated.indexOf(n.name)&&this.validated.push(n.name))},t.prototype.keyUpHandler=function(i){this.trigger("keyup",i);var n=i.target;9===i.which&&(!this.rules[n.name]||this.rules[n.name]&&!this.rules[n.name][this.required])||-1!==this.validated.indexOf(n.name)&&this.rules[n.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(i.which)&&this.validate(n.name)},t.prototype.clickHandler=function(i){this.trigger("click",i);var n=i.target;"submit"!==n.type?this.validate(n.name):null!==n.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(i){this.trigger("change",i),this.validate(i.target.name)},t.prototype.submitHandler=function(i){this.trigger("submit",i),this.allowSubmit||this.validate()?this.allowSubmit=!1:i.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(i){if(this.rules[i]){var n=Object.keys(this.rules[i]),s=!1,o=!1,a=n.indexOf("validateHidden"),l=n.indexOf("hidden");if(this.getInputElement(i),-1!==l&&(s=!0),-1!==a&&(o=!0),!(!s||s&&o))return;-1!==a&&n.splice(a,1),-1!==l&&n.splice(l-1,1),this.getErrorElement(i);for(var h=0,u=n;h<u.length;h++){var p=u[h],m=this.getErrorMessage(this.rules[i][p],p),y={name:i,message:m},C={inputName:i,element:this.inputElement,message:m};if(!this.isValid(i,p)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(i),this.errorRules.push(y),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(y):this.createErrorElement(i,y.message,this.inputElement),C.errorElement=this.infoElement,C.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(i,C),this.trigger("validationComplete",C),"required"===p&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(i),C.status="success",this.trigger("validationComplete",C)}}},t.prototype.optionalValidationStatus=function(i,n){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),n.status="",this.hideMessage(i))},t.prototype.isValid=function(i,n){var s=this.rules[i][n],a=this.rules[i][n],l={value:this.inputElement.value,param:s instanceof Array&&"string"==typeof s[1]?s[0]:s,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",l),!l.param&&"required"===n||(a&&"function"==typeof a[0]?a[0].call(this,{element:this.inputElement,value:this.inputElement.value}):e.isCheckable(this.inputElement)?"required"!==n||Tt('input[name="'+i+'"]:checked',this.element).length>0:e.checkValidator[n](l))},t.prototype.getErrorMessage=function(i,n){var s=this.inputElement.getAttribute("data-"+n+"-message")?this.inputElement.getAttribute("data-"+n+"-message"):i instanceof Array&&"string"==typeof i[1]?i[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[n]:this.defaultMessages[n],o=s.match(/{(\d)}/g);if(!f(o))for(var a=0;a<o.length;a++)s=s.replace(o[a],i instanceof Array?i[a]:i);return s},t.prototype.createErrorElement=function(i,n,s){var o=si(this.errorElement,{className:this.errorClass,innerHTML:n,attrs:{for:i}});this.errorOption===tR.Message&&(o.classList.remove(this.errorClass),o.classList.add("e-message"),o=si(this.errorContainer,{className:this.errorClass,innerHTML:o.outerHTML})),o.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+s.id+'"]')?this.element.querySelector('[data-valmsg-for="'+s.id+'"]').appendChild(o):!0===s.hasAttribute("data-msg-containerid")?he("#"+s.getAttribute("data-msg-containerid"),this.element).appendChild(o):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,o):this.inputElement.parentNode.insertBefore(o,this.inputElement.nextSibling),o.style.display="block",this.getErrorElement(i),this.validated.push(i),this.checkRequired(i)},t.prototype.getErrorElement=function(i){return this.infoElement=he(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=he(this.errorElement+"."+this.errorClass+'[for="'+i+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(i){for(var n=0;n<this.errorRules.length;n++)this.errorRules[n].name===i&&this.errorRules.splice(n,1)},t.prototype.showMessage=function(i){this.infoElement.style.display="block",this.infoElement.innerHTML=i.message,this.checkRequired(i.name)},t.prototype.hideMessage=function(i){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(i),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(i){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(i))},t.isCheckable=function(i){var n=i.getAttribute("type");return n&&("checkbox"===n||"radio"===n||"submit"===n)},t.checkValidator={required:function(i){return isNaN(Date.parse(i.value))?i.value.toString().length>0:!isNaN(new Date(i.value).getTime())},email:function(i){return Vx.EMAIL.test(i.value)},url:function(i){return Vx.URL.test(i.value)},dateIso:function(i){return Vx.DATE_ISO.test(i.value)},tel:function(i){return Vx.PHONE.test(i.value)},creditcard:function(i){return Vx.CREDITCARD.test(i.value)},number:function(i){return!isNaN(Number(i.value))&&-1===i.value.indexOf(" ")},digits:function(i){return Vx.DIGITS.test(i.value)},maxLength:function(i){return i.value.length<=i.param},minLength:function(i){return i.value.length>=i.param},rangeLength:function(i){var n=i.param;return i.value.length>=n[0]&&i.value.length<=n[1]},range:function(i){var n=i.param;return!isNaN(Number(i.value))&&Number(i.value)>=n[0]&&Number(i.value)<=n[1]},date:function(i){return!isNaN(new Date(i.value).getTime())},max:function(i){return isNaN(Number(i.value))?new Date(i.value).getTime()<=new Date(JSON.parse(JSON.stringify(i.param))).getTime():+i.value<=i.param},min:function(i){if(isNaN(Number(i.value))){if(-1!==i.value.indexOf(",")){var n=i.value.replace(/,/g,"");return parseFloat(n)>=i.param}return new Date(i.value).getTime()>=new Date(JSON.parse(JSON.stringify(i.param))).getTime()}return+i.value>=i.param},regex:function(i){return new RegExp(i.param).test(i.value)},equalTo:function(i){var n=i.formElement.querySelector("#"+i.param);return i.param=n.value,i.param===i.value}},Gl([D("")],t.prototype,"locale",void 0),Gl([D("e-hidden")],t.prototype,"ignore",void 0),Gl([D()],t.prototype,"rules",void 0),Gl([D("e-error")],t.prototype,"errorClass",void 0),Gl([D("e-valid")],t.prototype,"validClass",void 0),Gl([D("label")],t.prototype,"errorElement",void 0),Gl([D("div")],t.prototype,"errorContainer",void 0),Gl([D(tR.Label)],t.prototype,"errorOption",void 0),Gl([K()],t.prototype,"focusout",void 0),Gl([K()],t.prototype,"keyup",void 0),Gl([K()],t.prototype,"click",void 0),Gl([K()],t.prototype,"change",void 0),Gl([K()],t.prototype,"submit",void 0),Gl([K()],t.prototype,"validationBegin",void 0),Gl([K()],t.prototype,"validationComplete",void 0),Gl([K()],t.prototype,"customPlacement",void 0),e=Gl([an],t)}(bp),gce=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xa=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},m$="e-input-focus",w5=["title","style","class"],v$=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=e,n}return gce(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"floatLabelType":ke.removeFloating(this.textboxWrapper),ke.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ke.setWidth(e.width,this.textboxWrapper.container);break;case"value":var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(f(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&f(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),ke.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ke.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),ke.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(ke.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ke.setPlaceholder(this.placeholder,this.respectiveElement),ke.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"locale":this.globalize=new Rr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=j(this.element,"form"),f(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=re("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input"),n=0;n<this.element.attributes.length;n++)"id"!==(s=this.element.attributes[n].nodeName)&&"class"!==s?(i.setAttribute(s,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML,"name"===s&&this.element.removeAttribute("name")):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(l){return 0!==l.indexOf("ng-")}).join(" "));this.element.appendChild(i),this.element=i,ui("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),(f(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new Rr(this.locale),this.l10n=new $r("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Sn("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Sn("textarea"));var a=["placeholder","disabled","value","readonly","type","autocomplete"];for(n=0;n<this.element.attributes.length;n++){var s;this.element.hasAttribute(s=this.element.attributes[n].nodeName)&&w5.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[n].nodeValue),a.indexOf(s)<0&&(this.element.removeAttribute(s),n--))}}},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(f(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(f(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":(f(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ke.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),f(this.value)||(ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),f(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!f(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ke.setWidth(this.width,this.textboxWrapper.container),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(w5.indexOf(n)>-1)if("class"===n){var s=this.getInputValidClassList(this.htmlAttributes[n]);""!==s&&B([this.textboxWrapper.container],s.split(" "))}else if("style"===n){var o=this.textboxWrapper.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.textboxWrapper.container.setAttribute(n,o)}else this.textboxWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];w5.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(i))},t.prototype.getInputValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){A.add(this.respectiveElement,"focus",this.focusHandler,this),A.add(this.respectiveElement,"blur",this.focusOutHandler,this),A.add(this.respectiveElement,"input",this.inputHandler,this),A.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&A.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&A.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");f(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=i},t.prototype.resetForm=function(){if(this.resetValue(this.isAngular?"":this.initialValue),!f(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!f(e)&&"Always"!==this.floatLabelType&&(f(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.focusOutHandler=function(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.inputHandler=function(e){var n={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",n),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,i){var n={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",n),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===X.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?A.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):A.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(ke.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),j(this.element,"form"))){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.unWireEvents=function(){A.remove(this.respectiveElement,"focus",this.focusHandler),A.remove(this.respectiveElement,"blur",this.focusOutHandler),A.remove(this.respectiveElement,"input",this.inputHandler),A.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&A.remove(this.formElement,"reset",this.resetForm),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&A.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(we(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),f(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),we(this.textboxWrapper.container)),this.textboxWrapper=null,r.prototype.destroy.call(this)},t.prototype.addIcon=function(e,i){ke.addIcon(e,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!1},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!0},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"class"===s?this.respectiveElement.classList.add(e[s]):"placeholder"===s?(this.setProperties({placeholder:e[s]},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(s,e[s])}},t.prototype.removeAttributes=function(e){for(var i=0,n=e;i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!0},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!1},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===s?(this.setProperties({placeholder:null},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(s)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&B([this.textboxWrapper.container],[m$]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&W([this.textboxWrapper.container],[m$]))},Xa([D("text")],t.prototype,"type",void 0),Xa([D(!1)],t.prototype,"readonly",void 0),Xa([D(null)],t.prototype,"value",void 0),Xa([D("Never")],t.prototype,"floatLabelType",void 0),Xa([D("")],t.prototype,"cssClass",void 0),Xa([D(null)],t.prototype,"placeholder",void 0),Xa([D("on")],t.prototype,"autocomplete",void 0),Xa([D({})],t.prototype,"htmlAttributes",void 0),Xa([D(!1)],t.prototype,"multiline",void 0),Xa([D(!0)],t.prototype,"enabled",void 0),Xa([D(!1)],t.prototype,"showClearButton",void 0),Xa([D(!1)],t.prototype,"enablePersistence",void 0),Xa([D(null)],t.prototype,"width",void 0),Xa([K()],t.prototype,"created",void 0),Xa([K()],t.prototype,"destroyed",void 0),Xa([K()],t.prototype,"change",void 0),Xa([K()],t.prototype,"blur",void 0),Xa([K()],t.prototype,"focus",void 0),Xa([K()],t.prototype,"input",void 0),Xa([an],t)}(ur),sn={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Ol(r,t){var e={};if(f(r)||"string"==typeof r||"number"==typeof r||!f(r.isHeader))return r;for(var i=0,n=Object.keys(t);i<n.length;i++){var o=t[n[i]],a=f(o)||"string"!=typeof o?void 0:re(o,r);f(a)||(e[o]=a)}return e}function tN(r){if(r)try{return document.querySelector(r)?qi(document.querySelector(r).innerHTML.trim()):qi(r)}catch{return qi(r)}}!function(r){r.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:r.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(oe,Ie,De,fe,_e){return Te(oe,s(oe,Ie,De,fe,_e),null,fe)}function s(oe,Ie,De,fe,_e){var je=[],Se=de({},e,fe);sn=U(Se.moduleName);for(var Pe=O(),Ve=0;Ve<Ie.length;Ve++)if(!f(Ie[Ve])){var Wt;Se.itemCreating&&"function"==typeof Se.itemCreating&&Se.itemCreating({dataSource:Ie,curData:Ie[Ve],text:Ie[Ve],options:Se}),Wt=De?z(oe,Ie[Ve],void 0,null,null,[],null,Pe,Ve,fe):me(oe,Ie[Ve],void 0,null,null,fe,_e),Se.itemCreated&&"function"==typeof Se.itemCreated&&Se.itemCreated({dataSource:Ie,curData:Ie[Ve],text:Ie[Ve],item:Wt,options:Se}),je.push(Wt)}return je}function o(oe,Ie,De,fe,_e,je){var Se=de({},e,De);sn=U(Se.moduleName);var Wt,Pe=!je||"listview"!==je.getModuleName()&&"multiselect"!==je.getModuleName()?de({},r.defaultMappedFields,Se.fields):Se.fields,Ve=de({},t,Se.ariaAttributes),Kt=[];fe&&(Ve.level=fe);var yi,Ai,ei=[];Ie&&Ie.length&&!f(C(Ie).item)&&!C(Ie).item.hasOwnProperty(Pe.id)&&(Wt=O());for(var Ki=0;Ki<Ie.length;Ki++){var ri=Ol(Ie[Ki],Pe);if(!f(Ie[Ki])){Se.itemCreating&&"function"==typeof Se.itemCreating&&Se.itemCreating({dataSource:Ie,curData:Ie[Ki],text:ri[Pe.text],options:Se,fields:Pe});var es=Ie[Ki];Se.itemCreating&&"function"==typeof Se.itemCreating&&(ri=Ol(Ie[Ki],Pe)),ri.hasOwnProperty(Pe.id)&&!f(ri[Pe.id])&&(Wt=ri[Pe.id]);var ce=[];if(Se.showCheckBox&&(Se.itemNavigable&&(ri[Pe.url]||ri[Pe.urlAttributes])?Kt.push(oe("input",{className:sn.check,attrs:{type:"checkbox"}})):ce.push(oe("input",{className:sn.check,attrs:{type:"checkbox"}}))),!0===_e)Se.showIcon&&ri.hasOwnProperty(Pe.iconCss)&&!f(ri[Pe.iconCss])&&ce.push(oe("span",{className:sn.icon+" "+ri[Pe.iconCss]})),Ai=(yi=z(oe,es,ri,Pe,Se.itemClass,ce,!(!es.hasOwnProperty("isHeader")||!es.isHeader),Wt,Ki,De)).querySelector("."+sn.anchorWrap),Se.itemNavigable&&Kt.length&&ao(Kt,yi.firstElementChild);else{if((yi=me(oe,es,ri,Pe,Se.itemClass,De,je)).classList.add(sn.level+"-"+Ve.level),yi.setAttribute("aria-level",Ve.level.toString()),Ai=yi.querySelector("."+sn.anchorWrap),ri.hasOwnProperty(Pe.tooltip)&&yi.setAttribute("title",ri[Pe.tooltip]),ri.hasOwnProperty(Pe.htmlAttributes)&&ri[Pe.htmlAttributes]&&S(yi,ri[Pe.htmlAttributes]),ri.hasOwnProperty(Pe.enabled)&&!1===ri[Pe.enabled]&&yi.classList.add(sn.disabled),ri.hasOwnProperty(Pe.isVisible)&&!1===ri[Pe.isVisible]&&(yi.style.display="none"),ri.hasOwnProperty(Pe.imageUrl)&&!f(ri[Pe.imageUrl])&&!Se.template){var Ae={src:ri[Pe.imageUrl]};Qs(Ae,ri[Pe.imageAttributes]);var Dt=oe("img",{className:sn.image,attrs:Ae});Ai?Ai.insertAdjacentElement("afterbegin",Dt):ao([Dt],yi.firstElementChild)}if(Se.showIcon&&ri.hasOwnProperty(Pe.iconCss)&&!f(ri[Pe.iconCss])&&!Se.template){var bi=oe("div",{className:sn.icon+" "+ri[Pe.iconCss]});Ai?Ai.insertAdjacentElement("afterbegin",bi):ao([bi],yi.firstElementChild)}ce.length&&ao(ce,yi.firstElementChild),Se.itemNavigable&&Kt.length&&ao(Kt,yi.firstElementChild),N(oe,ri,Pe,0,Se,yi,Ve.level)}Ai&&B([yi],[sn.navigable]),Se.itemCreated&&"function"==typeof Se.itemCreated&&Se.itemCreated({dataSource:Ie,curData:Ie[Ki],text:ri[Pe.text],item:yi,options:Se,fields:Pe}),Kt=[],ei.push(yi)}}return ei}function a(oe,Ie,De,fe,_e,je){var Se=de({},e,De);return Te(oe,o(oe,Ie,De,fe,_e,je),Se.listClass,De)}function h(oe,Ie){if(Ie&&oe)return Array.prototype.slice.call(Ie).indexOf(oe)}function p(oe,Ie,De){if(void 0===De&&(De=new ni),"Ascending"===oe)De.sortBy(Ie,"ascending",!0);else if("Descending"===oe)De.sortBy(Ie,"descending",!0);else for(var fe=0;fe<De.queries.length;fe++)"onSortBy"===De.queries[fe].fn&&De.queries.splice(fe,1);return De}function m(oe,Ie){return new Xe(oe).executeLocal(Ie)}function C(oe){for(var De=0;De<oe.length;De++)if(!f(oe[De]))return{typeof:typeof oe[De],item:oe[De]};return{typeof:null,item:null}}function S(oe,Ie){var De={};Qs(De,Ie),De.class&&(B([oe],De.class.split(" ")),delete De.class),qe(oe,De)}function T(oe){for(var Ie={},De=oe.attributes,fe=0;fe<De.length;fe++)Ie[De[fe].nodeName]=De[fe].nodeValue;return Ie}function O(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function N(oe,Ie,De,fe,_e,je,Se){var Pe=Ie[De.child]||[],Ve=Ie[De.hasChildren];if(Pe.length&&(Ve=!0,je.classList.add(sn.hasChild),_e.processSubChild)){var Wt=a(oe,Pe,_e,++Se);je.appendChild(Wt)}_e.expandCollapse&&Ve&&!_e.template&&(je.firstElementChild.classList.add(sn.iconWrapper),("Left"===_e.expandIconPosition?ao:xt)([oe("div",{className:"e-icons "+_e.expandIconClass})],je.querySelector("."+sn.textContent)))}function z(oe,Ie,De,fe,_e,je,Se,Pe,Ve,Wt){var Ki,ri,Kt=de({},e,Wt),ei=de({},t,Kt.ariaAttributes),yi=Ie,Ai=Ie;"string"!=typeof Ie&&"number"!=typeof Ie&&"boolean"!=typeof Ie&&(Ki=Ie,yi="boolean"==typeof De[fe.text]||"number"==typeof De[fe.text]?De[fe.text]:De[fe.text]||"",Ai=De[fe.value]),ri=f(Ki)||f(De[fe.id])||""===De[fe.id]?Pe+"-"+Ve:Pe;var Yn=oe("li",{className:(!0===Se?sn.group:sn.li)+" "+(f(_e)?"":_e),id:ri,attrs:""!==ei.groupItemRole&&""!==ei.itemRole?{role:!0===Se?ei.groupItemRole:ei.itemRole}:{}});return Ki&&De.hasOwnProperty(fe.enabled)&&"false"===De[fe.enabled].toString()&&Yn.classList.add(sn.disabled),Se?Yn.innerText=yi:(Yn.setAttribute("data-value",f(Ai)?"null":Ai),Yn.setAttribute("role","option"),Ki&&De.hasOwnProperty(fe.htmlAttributes)&&De[fe.htmlAttributes]&&S(Yn,De[fe.htmlAttributes]),je.length&&!Kt.itemNavigable&&xt(je,Yn),Ki&&(De[fe.url]||De[fe.urlAttributes]&&De[fe.urlAttributes].href)?Yn.appendChild(ae(oe,Ki,fe,yi,je,Kt.itemNavigable)):(je.length&&Kt.itemNavigable&&xt(je,Yn),Yn.appendChild(document.createTextNode(yi)))),Yn}function U(oe){return{li:"e-"+oe+"-item",ul:"e-"+oe+"-parent e-ul",group:"e-"+oe+"-group-item",icon:"e-"+oe+"-icon",text:"e-"+oe+"-text",check:"e-"+oe+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+oe+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+oe+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function ae(oe,Ie,De,fe,_e,je){var Ve,Se=Ol(Ie,De),Pe={href:Se[De.url]};if(Se.hasOwnProperty(De.urlAttributes)&&Se[De.urlAttributes]&&(Qs(Pe,Se[De.urlAttributes]),Pe.href=Se[De.url]?Se[De.url]:Se[De.urlAttributes].href),je){Ve=oe("a",{className:sn.text+" "+sn.url});var Wt=oe("div",{className:sn.anchorWrap});_e&&_e.length&&xt(_e,Wt),Wt.appendChild(document.createTextNode(fe)),xt([Wt],Ve)}else Ve=oe("a",{className:sn.text+" "+sn.url,innerHTML:fe});return S(Ve,Pe),Ve}function me(oe,Ie,De,fe,_e,je,Se){var Kt,ei,yi,Pe=de({},e,je),Ve=de({},t,Pe.ariaAttributes),Wt=Ie;"string"!=typeof Ie&&"number"!=typeof Ie&&(yi=Ie,Wt=De[fe.text]||"",Kt=f(De._id)?De[fe.id]:De._id,ei=!(!Ie.hasOwnProperty("isHeader")||!Ie.isHeader));var Ai=oe("li",{className:(!0===ei?sn.group:sn.li)+" "+(f(_e)?"":_e),attrs:""!==Ve.groupItemRole&&""!==Ve.itemRole?{role:!0===ei?Ve.groupItemRole:Ve.itemRole}:{}});if(f(Kt)?Ai.setAttribute("data-uid",O()):Ai.setAttribute("data-uid",Kt),ei&&je&&je.groupTemplate){var Ki=tN(je.groupTemplate);Se&&"listview"!==Se.getModuleName()?(ri=Ki(Ie,Se,"groupTemplate",Pe.groupTemplateID,!!Pe.isStringTemplate,null,Ai))&&xt(ri,Ai):xt(Ki(Ie,Se,"groupTemplate",Pe.groupTemplateID,!!Pe.isStringTemplate),Ai)}else if(!ei&&je&&je.template){var ri;Ki=tN(je.template),Se&&"listview"!==Se.getModuleName()?(ri=Ki(Ie,Se,"template",Pe.templateID,!!Pe.isStringTemplate,null,Ai))&&xt(ri,Ai):xt(Ki(Ie,Se,"template",Pe.templateID,!!Pe.isStringTemplate),Ai)}else{var Yn=oe("div",{className:sn.textContent,attrs:""!==Ve.wrapperRole?{role:Ve.wrapperRole}:{}});if(yi&&(De[fe.url]||De[fe.urlAttributes]&&De[fe.urlAttributes].href))Yn.appendChild(ae(oe,yi,fe,Wt,null,Pe.itemNavigable));else{var es=oe("span",{className:sn.text,attrs:""!==Ve.itemText?{role:Ve.itemText}:{}});je&&je.enableHtmlSanitizer?es.innerText=Wt:es.innerHTML=Wt,Yn.appendChild(es)}Ai.appendChild(Yn)}return Ai}function Te(oe,Ie,De,fe){var _e=de({},e,fe),je=de({},t,_e.ariaAttributes),Se=oe("ul",{className:(sn=U(_e.moduleName)).ul+" "+(f(De)?"":De),attrs:""!==je.listRole?{role:je.listRole}:{}});return xt(Ie,Se),Se}r.createList=function i(oe,Ie,De,fe,_e){var je=de({},e,De),Se=de({},t,je.ariaAttributes),Pe=C(Ie).typeof;return"string"===Pe||"number"===Pe?n(oe,Ie,fe,De,_e):a(oe,Ie,De,Se.level,fe,_e)},r.createListFromArray=n,r.createListItemFromArray=s,r.createListItemFromJson=o,r.createListFromJson=a,r.getSiblingLI=function l(oe,Ie,De){if(sn=U(e.moduleName),oe&&oe.length){var fe,_e,je=Array.prototype.slice.call(oe);for(fe=je[(_e=Ie?h(Ie,je):!0===De?je.length:-1)+(!0===De?-1:1)];fe&&(!Ts(fe)||fe.classList.contains(sn.disabled));)fe=je[_e+=!0===De?-1:1];return fe}},r.indexOf=h,r.groupDataSource=function u(oe,Ie,De){void 0===De&&(De="None");var fe=de({},r.defaultMappedFields,Ie),_e=(new ni).group(fe.groupBy),je=m(oe,_e=p(De,"key",_e));oe=[];for(var Se=0;Se<je.length;Se++){var Pe=je[Se].items,Ve={};Ve[fe.text]=je[Se].key,Ve.isHeader=!0;var Kt=fe.text;"id"===Kt&&(Ve[Kt="text"]=je[Se].key),Ve._id="group-list-item-"+(je[Se].key?je[Se].key.toString().trim():"undefined"),Ve.items=Pe,oe.push(Ve);for(var ei=0;ei<Pe.length;ei++)oe.push(Pe[ei])}return oe},r.addSorting=p,r.getDataSource=m,r.createJsonFromElement=function y(oe,Ie){var De=de({},e,Ie),fe=de({},r.defaultMappedFields,De.fields),_e=oe.cloneNode(!0),je=[];_e.classList.add("json-parent");var Se=_e.querySelectorAll(".json-parent>li");_e.classList.remove("json-parent");for(var Pe=0;Pe<Se.length;Pe++){for(var Ve=Se[Pe],Wt=Ve.querySelector("a"),Kt=Ve.querySelector("ul"),ei={},yi=Wt?Wt.childNodes:Ve.childNodes,Ai=Object.keys(yi),Ki=0;Ki<yi.length;Ki++)yi[Number(Ai[Ki])].hasChildNodes()||(ei[fe.text]=yi[Number(Ai[Ki])].textContent);var ri=T(Ve);ri.id?(ei[fe.id]=ri.id,delete ri.id):ei[fe.id]=O(),Object.keys(ri).length&&(ei[fe.htmlAttributes]=ri),Wt&&(ri=T(Wt),Object.keys(ri).length&&(ei[fe.urlAttributes]=ri)),Kt&&(ei[fe.child]=y(Kt,Ie)),je.push(ei)}return je},r.renderContentTemplate=function R(oe,Ie,De,fe,_e,je){for(var ei,Se=oe("ul",{className:(sn=U(e.moduleName)).ul,attrs:{role:"presentation"}}),Pe=de({},e,_e),Ve=de({},r.defaultMappedFields,fe),Wt=tN(Ie),Kt=[],yi=O(),Ai=0;Ai<De.length;Ai++){var Ki=Ol(De[Ai],Ve),ri=De[Ai],Yn=ri.isHeader;ei="string"==typeof De[Ai]||"number"==typeof De[Ai]?ri:Ki[Ve.value],Pe.itemCreating&&"function"==typeof Pe.itemCreating&&Pe.itemCreating({dataSource:De,curData:ri,text:ei,options:Pe,fields:Ve}),Pe.itemCreating&&"function"==typeof Pe.itemCreating&&(Ki=Ol(De[Ai],Ve),ei="string"==typeof De[Ai]||"number"==typeof De[Ai]?ri:Ki[Ve.value]);var ce=oe("li",{id:yi+"-"+Ai,className:Yn?sn.group:sn.li,attrs:{role:"presentation"}});if(Yn)ce.innerText="string"==typeof De[Ai]||"number"==typeof De[Ai]?ri:Ki[Ve.text];else{var Ae=Yn?Pe.groupTemplateID:Pe.templateID;if(Yn)je&&"listview"!=je.getModuleName()?(Dt=Wt(ri,je,"headerTemplate",Ae,!!Pe.isStringTemplate,null,ce))&&xt(Dt,ce):xt(Wt(ri,je,"headerTemplate",Ae,!!Pe.isStringTemplate),ce);else if(je&&"listview"!==je.getModuleName()){var Dt;(Dt=Wt(ri,je,"template",Ae,!!Pe.isStringTemplate,null,ce))&&xt(Dt,ce)}else xt(Wt(ri,je,"template",Ae,!!Pe.isStringTemplate),ce);ce.setAttribute("data-value",f(ei)?"null":ei),ce.setAttribute("role","option")}Pe.itemCreated&&"function"==typeof Pe.itemCreated&&Pe.itemCreated({dataSource:De,curData:ri,text:ei,item:ce,options:Pe,fields:Ve}),Kt.push(ce)}return xt(Kt,Se),Se},r.renderGroupTemplate=function P(oe,Ie,De,fe,_e,je){for(var Se=tN(oe),Pe=de({},r.defaultMappedFields,De),Ve=de({},e,_e),Wt=Pe.groupBy,Kt=0,ei=fe;Kt<ei.length;Kt++){var yi=ei[Kt],Ai={};if(Ai[Wt]=yi.textContent,yi.innerHTML="",je&&"listview"!==je.getModuleName()){var Ki=Se(Ai,je,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate,null,yi);Ki&&xt(Ki,yi)}else xt(Se(Ai,je,"groupTemplate",Ve.groupTemplateID,!!Ve.isStringTemplate),yi)}return fe},r.generateId=O,r.generateUL=Te,r.generateIcon=function Oe(oe,Ie,De,fe){var _e=de({},e,fe);return sn=U(_e.moduleName),("Left"===_e.expandIconPosition?ao:xt)([oe("div",{className:"e-icons "+_e.expandIconClass+" "+(f(De)?"":De)})],Ie.querySelector("."+sn.textContent)),Ie}}(hn||(hn={}));var Tce=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ap=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Dce=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.getHelper=function(o){var l,a=s.getSortableElement(o.sender.target);return!!s.isValidTarget(a,s)&&(s.helper?l=s.helper({sender:a,element:o.element}):((l=a.cloneNode(!0)).style.width=a.offsetWidth+"px",l.style.height=a.offsetHeight+"px"),B([l],["e-sortableclone"]),document.body.appendChild(l),l)},s.onDrag=function(o){if(o.target){s.trigger("drag",{event:o.event,element:s.element,target:o.target});var S,a=s.getSortableInstance(o.target),l=s.getSortableElement(o.target,a);if(!(s.isValidTarget(l,a)||o.target.className.indexOf("e-list-group-item")>-1)||s.curTarget===l&&f(a.placeHolder)||a.placeHolderElement&&a.placeHolderElement===o.target)s.curTarget!==s.target&&s.scope&&s.curTarget!==l&&!f(a.placeHolder)&&($e(s.getSortableInstance(s.curTarget).placeHolderElement),s.curTarget=s.target);else{if(o.target.className.indexOf("e-list-group-item")>-1&&(l=o.target),s.curTarget=l,s.target===l)return;var h=s.getIndex(a.placeHolderElement,a),u=s.getPlaceHolder(l,a),p=void 0;if(u){h=f(h)?s.getIndex(s.target):h,p=s.getIndex(l,a,o.event);var m=s.isPlaceHolderPresent(a);if(m&&h===p)return;m&&$e(a.placeHolderElement),a.placeHolderElement=u,o.target.className.indexOf("e-list-group-item")>-1?a.element.insertBefore(a.placeHolderElement,a.element.children[p]):a.element!==s.element&&p===a.element.childElementCount?a.element.appendChild(a.placeHolderElement):a.element.insertBefore(a.placeHolderElement,a.element.children[p]),s.refreshDisabled(h,p,a)}else{h=f(h)?s.getIndex(s.target):s.getIndex(l,a)<h||!h?h:h-1,p=s.getIndex(l,a);var y=a.element!==s.element?p:h<p?p+1:p;s.updateItemClass(a),a.element.insertBefore(s.target,a.element.children[y]),s.refreshDisabled(h,p,a),s.curTarget=s.target,s.trigger("drop",{droppedElement:s.target,element:a.element,previousIndex:h,currentIndex:p,target:o.target,helper:document.getElementsByClassName("e-sortableclone")[0],event:o.event,scope:s.scope})}}a=s.getSortableInstance(s.curTarget),f(l)&&o.target!==a.placeHolderElement?s.isPlaceHolderPresent(a)&&s.removePlaceHolder(a):[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function(T){(S=s.getSortableInstance(T)).element&&S!==a&&s.removePlaceHolder(S)})}},s.onDragStart=function(o){s.target=s.getSortableElement(o.target);var a=!1;s.target.classList.add("e-grabbed"),s.curTarget=s.target,o.helper=document.getElementsByClassName("e-sortableclone")[0],s.trigger("beforeDragStart",{cancel:!1,element:s.element,target:s.target},function(h){h.cancel&&(a=h.cancel,s.onDragStop(o))}),!a&&s.trigger("dragStart",ci?{event:o.event,element:s.element,target:s.target,bindEvents:o.bindEvents,dragElement:o.dragElement}:{event:o.event,element:s.element,target:s.target})},s.onDragStop=function(o){var l,h,u,a=s.getSortableInstance(s.curTarget);l=s.getIndex(s.target);var p=s.isPlaceHolderPresent(a);if(p){var m=s.getIndex(a.placeHolderElement,a);s.trigger("beforeDrop",{previousIndex:l,currentIndex:m,target:o.target,droppedElement:s.target,helper:o.helper,cancel:!1,handled:!1},function(S){if(!S.cancel){if(u=S.handled,s.updateItemClass(a),S.handled){var T=s.target.cloneNode(!0);s.target.classList.remove("e-grabbed"),s.target=T}a.element.insertBefore(s.target,a.placeHolderElement);var R=s.getIndex(s.target,a);s.trigger("drop",{event:o.event,element:a.element,previousIndex:l=s===a&&l-R>1?l-1:l,currentIndex:R,target:o.target,helper:o.helper,droppedElement:s.target,scopeName:s.scope,handled:u})}$e(a.placeHolderElement)})}a=s.getSortableInstance(o.target),h=a.element.childElementCount,l=s.getIndex(s.target),(a.element===o.target||!p&&s.curTarget===s.target)&&s.trigger("beforeDrop",{previousIndex:l,currentIndex:s.curTarget===s.target?l:h,target:o.target,droppedElement:s.target,helper:o.helper,cancel:!1},function(S){a.element===o.target&&!S.cancel&&(s.updateItemClass(a),a.element.appendChild(s.target),s.trigger("drop",{event:o.event,element:a.element,previousIndex:l,currentIndex:h,target:o.target,helper:o.helper,droppedElement:s.target,scopeName:s.scope}))}),s.target.classList.remove("e-grabbed"),s.target=null,s.curTarget=null,$e(o.helper),Ya(s.element,wp).intDestroy(o.event)},s.bind(),s}var e;return Tce(t,r),e=t,t.prototype.bind=function(){this.element.id||(this.element.id=Sn("sortable")),this.itemClass||(this.itemClass="e-sort-item",this.dataBind()),this.initializeDraggable()},t.prototype.initializeDraggable=function(){new wp(this.element,{helper:this.getHelper,dragStart:this.onDragStart,drag:this.onDrag,dragStop:this.onDragStop,dragTarget:"."+this.itemClass,enableTapHold:!0,tapHoldThreshold:200,queryPositionInfo:this.queryPositionInfo,distance:5})},t.prototype.getPlaceHolder=function(i,n){if(n.placeHolder){var s=n.placeHolder({element:n.element,grabbedElement:this.target,target:i});return s.classList.add("e-sortable-placeholder"),s}return null},t.prototype.isValidTarget=function(i,n){return i&&WE(i,n.element)&&i.classList.contains(n.itemClass)&&!i.classList.contains("e-disabled")},t.prototype.removePlaceHolder=function(i){$e(i.placeHolderElement),i.placeHolderElement=null},t.prototype.updateItemClass=function(i){this!==i&&(this.target.classList.remove(this.itemClass),this.target.classList.add(i.itemClass))},t.prototype.getSortableInstance=function(i){if(i=j(i,".e-"+this.getModuleName())){var n=Ya(i,e);return n.scope&&this.scope&&n.scope===this.scope?n:this}return this},t.prototype.refreshDisabled=function(i,n,s){if(s===this)for(var o=void 0,a=i<n,l=void 0,h=a?i:n,u=a?n:i;h<=u;)(o=this.element.children[h]).classList.contains("e-disabled")?(l=this.getIndex(o),this.element.insertBefore(o,this.element.children[a?l+2:l-1]),h=a?l+2:l+1):h++},t.prototype.getIndex=function(i,n,s){var o,a;return void 0===n&&(n=this),[].slice.call(n.element.children).forEach(function(l,h){if(l.classList.contains("e-sortable-placeholder")&&(a=!0),l!==i);else if(o=h,!f(s)){a&&(o-=1);var u=i.getBoundingClientRect();o=s.clientY<=u.bottom-(u.bottom-u.top)/2?o:o+1}}),o},t.prototype.getSortableElement=function(i,n){return void 0===n&&(n=this),j(i,"."+n.itemClass)},t.prototype.queryPositionInfo=function(i){return i.left=pageXOffset?parseFloat(i.left)-pageXOffset+"px":i.left,i.top=pageYOffset?parseFloat(i.top)-pageYOffset+"px":i.top,i},t.prototype.isPlaceHolderPresent=function(i){return i.placeHolderElement&&!!j(i.placeHolderElement,"#"+i.element.id)},t.prototype.moveTo=function(i,n,s){iN(this.element,i,n,s)},t.prototype.destroy=function(){"e-sort-item"===this.itemClass&&(this.itemClass=null,this.dataBind()),Ya(this.element,wp).destroy(),r.prototype.destroy.call(this)},t.prototype.getModuleName=function(){return"sortable"},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)"itemClass"===o[s]&&[].slice.call(this.element.children).forEach(function(l){l.classList.contains(n.itemClass)&&l.classList.remove(n.itemClass),i.itemClass&&l.classList.add(i.itemClass)})},Ap([D(!1)],t.prototype,"enableAnimation",void 0),Ap([D(null)],t.prototype,"itemClass",void 0),Ap([D(null)],t.prototype,"scope",void 0),Ap([D()],t.prototype,"helper",void 0),Ap([D()],t.prototype,"placeHolder",void 0),Ap([K()],t.prototype,"drag",void 0),Ap([K()],t.prototype,"beforeDragStart",void 0),Ap([K()],t.prototype,"dragStart",void 0),Ap([K()],t.prototype,"beforeDrop",void 0),Ap([K()],t.prototype,"drop",void 0),e=Ap([an],t)}(bp);function iN(r,t,e,i){var n=[];if(t||(t=r),e&&e.length?e.forEach(function(o){n.push(r.children[o])}):n=[].slice.call(r.children),f(i))n.forEach(function(o){t.appendChild(o)});else{var s=t.children[i];n.forEach(function(o){t.insertBefore(o,s)})}}var Ice=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),E$=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},G0="e-rtl",jy="e-overlay",aR="e-nav-arrow",lR="e-nav-right-arrow",nN="e-nav-left-arrow",K0="e-scroll-nav",S5="e-scroll-right-nav",x$="e-scroll-left-nav",T$="e-scroll-device",rN="e-scroll-overlay",E5="e-scroll-right-overlay",x5="e-scroll-left-overlay",sN=function(r){function t(e,i){return r.call(this,e,i)||this}return Ice(t,r),t.prototype.preRender=function(){this.browser=X.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=X.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Sn("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(G0)},t.prototype.render=function(){this.touchModule=new dl(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),A.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(T$),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(T$);var i=Tt(".e-"+e.id+"_nav."+K0,e),n=Tt("."+rN,e);[].slice.call(n).forEach(function(l){we(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),we(this.scrollEle),i.length>0&&(we(i[0]),f(i[1])||we(i[1])),A.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Tt(".e-scroll-nav:not(."+jy+")",this.element);e?this.element.classList.add(jy):this.element.classList.remove(jy),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),n=this.createElement("div",{className:rN+" "+E5}),s="e-"+e.id.concat("_nav "+K0+" "+S5),o=this.createElement("div",{id:i.concat("_right"),className:s}),a=this.createElement("div",{className:lR+" "+aR+" e-icons"});o.appendChild(a);var l=this.createElement("div",{className:rN+" "+x5});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+K0+" "+S5),s={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:n,attrs:s});o.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:lR+" "+aR+" e-icons"}),l="e-"+e.id.concat("_nav "+K0+" "+x$),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},u=this.createElement("div",{className:l+" "+jy,attrs:h});u.setAttribute("aria-disabled","true");var p=this.createElement("div",{className:nN+" "+aR+" e-icons"});u.appendChild(p),o.appendChild(a),e.appendChild(o),e.insertBefore(u,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),u.classList.add("e-ie-align")),this.eventBinding([o,u])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new dl(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),A.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,K0)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=this.element,o=i.classList;o.contains(K0)&&(o=i.querySelector("."+aR).classList),this.contains(s,G0)&&this.browserCheck&&(e=-e),!this.contains(s,G0)||this.browserCheck||this.ieCheck?o.contains(lR)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):o.contains(nN)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Left"===e.swipeDirection?i.scrollLeft+=n*a:"Right"===e.swipeDirection&&(i.scrollLeft-=n*a),s-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Tt("."+rN,this.element)).forEach(function(l){e-=l.offsetWidth});var a=function(){var l,h;s.contains(s.element,G0)&&s.browserCheck?(l=-e,h=-10):(l=e,h=10),l<10?window.cancelAnimationFrame(h):(s.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceX;this.ieCheck&&this.contains(this.element,G0)&&(n=-n),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+n:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+aR);f(e)?ai(s,[lR],[nN]):ai(s,[nN],[lR])}else e&&i&&(e.classList.add(jy),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(jy),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,n=i.offsetWidth,o=this.element.querySelector("."+x$),a=this.element.querySelector("."+S5),l=this.element.querySelector("."+x5),h=this.element.querySelector("."+E5),u=i.scrollLeft;if(u<=0&&(u=-u),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+E5),h=this.element.querySelector("."+x5)),l.style.width=u<40?u+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(n+u)<40?i.scrollWidth-Math.ceil(n+u)+"px":"40px"),0===u)this.arrowDisabling(o,a);else if(Math.ceil(n+u+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{var p=this.element.querySelector("."+K0+"."+jy);p&&(p.classList.remove(jy),p.setAttribute("aria-disabled","false"),p.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(G0):this.element.classList.remove(G0)}},E$([D(null)],t.prototype,"scrollStep",void 0),E$([an],t)}(ur),_ce=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),I$=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},T5="e-rtl",qy="e-overlay",hR="e-nav-arrow",oN="e-nav-up-arrow",uR="e-nav-down-arrow",$0="e-scroll-nav",A$="e-scroll-up-nav",D5="e-scroll-down-nav",k$="e-scroll-device",aN="e-scroll-overlay",R$="e-scroll-up-overlay",_$="e-scroll-down-overlay",Ux=function(r){function t(e,i){return r.call(this,e,i)||this}return _ce(t,r),t.prototype.preRender=function(){this.browser=X.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=X.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Sn("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(T5)},t.prototype.render=function(){this.touchModule=new dl(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),A.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(k$),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),A.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=si("div",{className:"e-vscroll-content"}),i=si("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",W([this.element],["e-vscroll",k$]);var i=Tt(".e-"+e.id+"_nav."+$0,e),n=Tt("."+aN,e);[].slice.call(n).forEach(function(l){we(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),we(this.scrollEle),i.length>0&&(we(i[0]),f(i[1])||we(i[1])),A.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Tt(".e-scroll-nav:not(."+qy+")",this.element);e?this.element.classList.add(qy):this.element.classList.remove(qy),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),n=si("div",{className:aN+" "+_$}),s="e-"+e.id.concat("_nav "+$0+" "+D5),o=si("div",{id:i.concat("down"),className:s}),a=si("div",{className:uR+" "+hR+" e-icons"});o.appendChild(a);var l=si("div",{className:aN+" "+R$});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+$0+" "+D5),s=si("div",{id:i.concat("_down"),className:n});s.setAttribute("aria-disabled","false");var o=si("div",{className:uR+" "+hR+" e-icons"}),a="e-"+e.id.concat("_nav "+$0+" "+A$),l=si("div",{id:i.concat("_up"),className:a+" "+qy});l.setAttribute("aria-disabled","true");var h=si("div",{className:oN+" "+hR+" e-icons"});l.appendChild(h),s.appendChild(o),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new dl(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),A.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,$0)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=i.classList;s.contains($0)&&(s=i.querySelector("."+hR).classList),s.contains(uR)?this.frameScrollRequest(e,"add",n):s.contains(oN)&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Up"===e.swipeDirection?i.scrollTop+=n*a:"Down"===e.swipeDirection&&(i.scrollTop-=n*a),s-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Tt("."+aN,this.element)).forEach(function(l){e-=l.offsetHeight});var a=function(){e<10?window.cancelAnimationFrame(10):(s.scrollUpdating(10,i),e-=10,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceY;"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+n:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+hR);f(e)?ai(s,[uR],[oN]):ai(s,[oN],[uR])}else e.classList.add(qy),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(qy),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,n=i.offsetHeight,s=this.element.querySelector("."+A$),o=this.element.querySelector("."+D5),a=this.element.querySelector("."+R$),l=this.element.querySelector("."+_$),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(a.style.height=h<40?h+"px":"40px",l.style.height=i.scrollHeight-Math.ceil(n+h)<40?i.scrollHeight-Math.ceil(n+h)+"px":"40px"),0===h)this.arrowDisabling(s,o);else if(Math.ceil(n+h+.1)>=i.scrollHeight)this.arrowDisabling(o,s);else{var u=this.element.querySelector("."+$0+"."+qy);u&&(u.classList.remove(qy),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(T5):this.element.classList.remove(T5)}},I$([D(null)],t.prototype,"scrollStep",void 0),I$([an],t)}(ur),V$=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),us=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},R5="e-vertical",uo="e-toolbar-items",Ea="e-toolbar-item",Hf="e-rtl",ia="e-separator",fN="e-popup-up-icon",fR="e-popup-down-icon",H$="e-popup-open",z$="e-template",kp="e-overlay",j$="e-toolbar-text",_5="e-popup-text",Rp="e-overflow-show",gN="e-overflow-hide",Wh="e-hor-nav",q$="e-scroll-nav",U$="e-toolbar-center",_p="e-tbar-pos",W$="e-hscroll-bar",gR="e-toolbar-pop",Am="e-toolbar-popup",mR="e-nav-active",vR="e-ignore",M5="e-popup-alone",yR="e-hidden",G$="e-toolbar-multirow",K$="e-multirow-pos",O5="e-multirow-separator",P5="e-extended-separator",$$="e-extended-toolbar",mN="e-toolbar-extended",L5="e-tbar-extended",Wce=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return V$(t,r),us([D("")],t.prototype,"id",void 0),us([D("")],t.prototype,"text",void 0),us([D("auto")],t.prototype,"width",void 0),us([D("")],t.prototype,"cssClass",void 0),us([D(!1)],t.prototype,"showAlwaysInPopup",void 0),us([D(!1)],t.prototype,"disabled",void 0),us([D("")],t.prototype,"prefixIcon",void 0),us([D("")],t.prototype,"suffixIcon",void 0),us([D(!0)],t.prototype,"visible",void 0),us([D("None")],t.prototype,"overflow",void 0),us([D("")],t.prototype,"template",void 0),us([D("Button")],t.prototype,"type",void 0),us([D("Both")],t.prototype,"showTextOn",void 0),us([D(null)],t.prototype,"htmlAttributes",void 0),us([D("")],t.prototype,"tooltipText",void 0),us([D("Left")],t.prototype,"align",void 0),us([K()],t.prototype,"click",void 0),t}(Wi),Y$=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return V$(t,r),t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!f(n)&&!f(n.ej2_instances)&&!f(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){f(e.element.querySelector(n))||(document.body.appendChild(e.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),we(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&W([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(n){return e.element.removeAttribute(n)}),r.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(R5),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,Hf)},t.prototype.wireEvents=function(){A.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new Hn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),A.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(A.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var i=!f(this.popObj)&&Ts(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){A.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),A.remove(document,"scroll",this.docEvent),A.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=j(e.target,".e-popup");this.popObj&&Ts(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,_p),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Ea)).forEach(function(i){we(i)}),this.tbarAlign){var e=this.element.querySelector("."+uo);[].slice.call(e.children).forEach(function(i){we(i)}),this.tbarAlign=!1,this.remove(e,_p)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,Hf),this.destroyScroll()),this.remove(this.element,L5),this.remove(this.element,$$);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,G$),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){return e&&this.popObj&&Ts(this.popObj.element)?this.popObj.element.querySelector("."+Ea):this.element===i||e?this.element.querySelector("."+Ea+":not(."+kp+" ):not(."+ia+" ):not(."+yR+" )"):j(i,"."+Ea)},t.prototype.keyHandling=function(e,i,n,s,o){var p,m,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},u="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var y=j(e,".e-popup"),C=this.element.querySelector("."+mN);"Extended"===this.overflowMode&&C&&C.classList.contains("e-popup-open")&&(y="end"===i.action?C:null),y?Ts(this.popObj.element)&&(m=[].slice.call(y.children),p="home"===i.action?m[0]:m[m.length-1]):(m=this.element.querySelectorAll("."+uo+" ."+Ea+":not(."+ia+")"),p="home"===i.action?m[0]:m[m.length-1]),p&&this.elementFocus(p)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===i.action?"previous":"next");else if(a&&j(n,".e-popup")){var S=a.element;if("previous"===u&&S.firstElementChild===e||"next"===u&&S.lastElementChild===e)return;this.eleFocus(e,u)}else"moveDown"===i.action&&a&&Ts(a.element)&&this.elementFocus(e);break;case"tab":if(!o&&!s){var R=e.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(R),R.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!s)return;a&&!Ts(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},t.prototype.keyActionHandler=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(kp)){e.preventDefault();var n=i.classList.contains(Wh),s=i.classList.contains(q$),o=this.clstElement(n,i);(o||s)&&this.keyHandling(o,e,i,n,s)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(kp):i.classList.remove(kp),i.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Ts(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(ia)||e.classList.contains(kp)||e.getAttribute("disabled")||e.classList.contains(yR)||!Ts(e)},t.prototype.eleFocus=function(e,i){var n=Object(e)[i+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,i);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(e.parentElement)[i+"ElementSibling"];if(!f(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!f(o)&&o.children.length>0)if("next"===i){var a=o.querySelector("."+Ea);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else this.eleContains(a=o.lastElementChild)?this.eleFocus(a,i):this.elementFocus(a)}},t.prototype.clickHandler=function(e){var i=this,n=e.target,s=this.element,o=!f(j(n,"."+gR)),a=n.classList,l=j(n,"."+Wh);l||(l=n),!s.children[0].classList.contains("e-hscroll")&&!s.children[0].classList.contains("e-vscroll")&&a.contains(Wh)&&(a=n.querySelector(".e-icons").classList),(a.contains(fN)||a.contains(fR))&&this.popupClickHandler(s,l,Hf);var h,u=j(e.target,"."+Ea);if(!f(u)&&!u.classList.contains(kp)||l.classList.contains(Wh)){u&&(h=this.items[this.tbarEle.indexOf(u)]);var m={originalEvent:e,item:h};h&&!f(h.click)&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",m),m.cancel||this.trigger("clicked",m,function(y){!f(i.popObj)&&o&&!y.cancel&&"Popup"===i.overflowMode&&y.item&&"Input"!==y.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,n){var s=this.popObj;Ts(s.element)?(i.classList.remove(mR),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0===s.offsetX&&!e.classList.contains(n)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),i.classList.add(mR),s.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=ut(this.width),i=ut(this.height);("msie"!==X.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&Ht(this.element,{height:i}),Ht(this.element,{width:e}),qe(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&B([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var n,s;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)n=this.renderSubComponent(e[o],o),-1===this.tbarEle.indexOf(n)&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(e[o],i,o),(s=i.querySelector(".e-toolbar-"+e[o].align.toLowerCase()))?(e[o].showAlwaysInPopup&&"Show"!==e[o].overflow||this.tbarAlgEle[(e[o].align+"s").toLowerCase()].push(n),s.appendChild(n)):i.appendChild(n);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(R5),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(R5),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Ht(this.element,{height:ut(this.height),width:ut(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){!this.scrollModule&&this.checkOverflow(e,i[0])&&(this.tbarAlign&&this.element.querySelector("."+uo+" ."+U$).removeAttribute("style"),this.scrollModule=this.isVertical?new Ux({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new sN({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&B([i[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,_p),Ht(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var s,i=this,n=0;return[].slice.call(Tt("."+Ea,e)).forEach(function(o){Ts(o)&&(s=window.getComputedStyle(o),n+=i.isVertical?o.offsetHeight:o.offsetWidth,n+=parseFloat(i.isVertical?s.marginTop:s.marginRight),n+=parseFloat(i.isVertical?s.marginBottom:s.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,i){if(f(e)||f(i)||!Ts(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,s=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=e.querySelector("."+Wh),a=e.querySelector("."+q$),l=0;return o?l=this.isVertical?o.offsetHeight:o.offsetWidth:a&&(l=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),s>n-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,_p),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+uo),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===X.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":f(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(uo)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||n)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,G$),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,K$)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===X.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,$$),(this.checkOverflow(e,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Tt("."+uo+" ."+Ea,e))),this.element.querySelector("."+Wh).setAttribute("tabIndex","0"),this.element.querySelector("."+Wh).setAttribute("role","list")},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+ia)),n=e.querySelector("."+O5),s=e.querySelector("."+P5),o="MultiRow"===this.overflowMode?n:s;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(O5):"Extended"===this.overflowMode&&o.classList.remove(P5));for(var a=0;a<=i.length-1;a++)i[a].offsetLeft<30&&0!==i[a].offsetLeft&&("MultiRow"===this.overflowMode?i[a].classList.add(O5):"Extended"===this.overflowMode&&i[a].classList.add(P5))},t.prototype.createPopupEle=function(e,i){var n=e.querySelector("."+Wh),s=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector("."+Wh);var a=(s?e.offsetHeight:e.offsetWidth)-(s?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),Ht(this.element,{direction:"initial"}),this.checkPriority(e,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,n,s,o){var a=e.element,l=[].slice.call(Tt("."+Am,a.querySelector("."+uo))),h=Tt("."+Rp,n),u=0,p=0;l.forEach(function(S,T){h=Tt("."+Rp,n),S.classList.contains(Rp)&&h.length>0?e.tbResize&&h.length>T?(n.insertBefore(S,h[T]),++p):(n.insertBefore(S,n.children[h.length]),++p):S.classList.contains(Rp)||e.tbResize&&S.classList.contains(gN)&&n.children.length>0&&0===h.length?(n.insertBefore(S,n.firstChild),++p):S.classList.contains(gN)?i.push(S):e.tbResize?(n.insertBefore(S,n.childNodes[u+p]),++u):n.appendChild(S),S.classList.contains(ia)?Ht(S,{display:"",height:o+"px"}):Ht(S,{display:"",height:s+"px"})}),i.forEach(function(S){n.appendChild(S)});for(var m=Tt("."+Ea,a.querySelector("."+uo)),y=m.length-1;y>=0;y--){var C=m[y];if(!C.classList.contains(ia)||"Extended"===this.overflowMode)break;Ht(C,{display:"none"})}},t.prototype.createPopup=function(){var i,n,e=this.element;"Extended"===this.overflowMode&&(n=e.querySelector("."+ia+":not(."+Am+")"),i="auto"===e.style.height||""===e.style.height?null:n.offsetHeight);var a,s=e.querySelector("."+Ea+":not(."+ia+"):not(."+Am+")"),o="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;if(he("#"+e.id+"_popup."+gR,e))a=he("#"+e.id+"_popup."+gR,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:gR+" "+mN}),u=this.createElement("div",{id:e.id+"_popup",className:gR});a="Extended"===this.overflowMode?h:u}this.pushingPoppedEle(this,[],a,o,i),this.popupInit(e,a)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){var a=this.popObj.element;Ht(a,{maxHeight:"",display:"block"}),Ht(a,{maxHeight:a.offsetHeight+"px",display:""})}else{e.appendChild(i),this.cssClass&&B([i],this.cssClass.split(" ")),Ht(this.element,{overflow:""});var n=window.getComputedStyle(this.element),s=new Al(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(i),"Extended"===this.overflowMode&&(s.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),s.offsetX=0),A.add(document,"scroll",this.docEvent.bind(this)),A.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+Wh);o.classList.add(mR),ai(o.firstElementChild,[fN],[fR]),this.element.querySelector("."+mN).classList.add(H$)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,L5):this.remove(this.element,L5))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,s=this.popObj.element.parentElement,o=s.querySelector("."+Wh);Ht(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var a=n.offsetTop+n.offsetHeight+Lo(s).top,l=o.firstElementChild;o.classList.add(mR),ai(l,[fN],[fR]),this.tbarPopupHandler(!0);var h=f(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<n.offsetHeight){var u=n.offsetHeight-(a-window.innerHeight-h+5);i.height=u+"px";for(var p=0;p<=n.childElementCount;p++){var m=n.children[p];if(m.offsetTop+m.offsetHeight>u){u=m.offsetTop;break}}Ht(i.element,{maxHeight:u+"px"})}else if(this.isVertical){var y=this.element.getBoundingClientRect();Ht(i.element,{maxHeight:y.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var C=n.getBoundingClientRect();C.right>document.documentElement.clientWidth&&C.width>s.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var n=this.element.querySelector("."+Wh),s=n.firstElementChild;n.classList.remove(mR),ai(s,[fR],[fN]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,n,s){for(var h,o=this.popupPriCount>0,l=n,p=0,m=0,y=0,C=function(U,ae){var me=!1;return ae.forEach(function(Te){U.classList.contains(Te)&&(me=!0)}),me},S=i.length-1;S>=0;S--){var T=void 0,R=window.getComputedStyle(i[S]);this.isVertical?(T=parseFloat(R.marginTop),T+=parseFloat(R.marginBottom)):(T=parseFloat(R.marginRight),T+=parseFloat(R.marginLeft));var P=i[S]===this.tbarEle[0];P&&(this.tbarEleMrgn=T),h=this.isVertical?i[S].offsetHeight:i[S].offsetWidth;var O=P?h+T:h;if(C(i[S],[M5])&&o&&(i[S].classList.add(Am),Ht(i[S],this.isVertical?{display:"none",minHeight:O+"px"}:{display:"none",minWidth:O+"px"}),y++),this.isVertical?i[S].offsetTop+i[S].offsetHeight+T>n:i[S].offsetLeft+i[S].offsetWidth+T>n){if(i[S].classList.contains(ia)){if("Extended"===this.overflowMode)m===y&&C(N=i[S],[ia,vR])&&(i[S].classList.add(Am),y++),m++;else if("Popup"===this.overflowMode){var N;p>0&&m===y&&C(N=i[S+m+(p-1)],[ia,vR])&&Ht(N,{display:"none"}),p++,m=0,y=0}}else m++;i[S].classList.contains(Rp)&&s||C(i[S],[ia,vR])?n-=(this.isVertical?i[S].offsetHeight:i[S].offsetWidth)+T:(i[S].classList.add(Am),Ht(i[S],this.isVertical?{display:"none",minHeight:O+"px"}:{display:"none",minWidth:O+"px"}),y++)}}if(s){var z=Tt("."+Ea+":not(."+Am+")",this.element);this.checkPriority(e,z,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-hor-nav"),s=this.createElement("div",{id:i,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});("msie"===X.info.name||"edge"===X.info.name)&&s.classList.add("e-ie-align");var o=this.createElement("div",{className:fR+" e-icons"});s.appendChild(o),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)},t.prototype.tbarPriRef=function(e,i,n,s,o,a,l,h){var u=h,y=Tt("."+Am+":not(."+Rp+")",this.popObj.element).length,C=function(N,z){return N.classList.contains(z)};if(0===Tt(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var S=e.children[i-(i-n)-1],T=!f(S)&&C(S,vR);if(!f(S)&&C(S,ia)&&!Ts(S)||T){S.style.display="inherit";var P=S.offsetWidth+2*parseFloat(window.getComputedStyle(S).marginRight),O=S.previousElementSibling;a+P<l||o?(e.insertBefore(s,e.children[i+u-(i-n)]),f(O)||(O.style.display="")):O.classList.contains(ia)&&(O.style.display="none"),S.style.display=""}else e.insertBefore(s,e.children[i+u-(i-n)])}else e.insertBefore(s,e.children[i+u-y])},t.prototype.popupRefresh=function(e,i){var n=this,s=this.element,o=this.isVertical,a=s.querySelector("."+uo),l=s.querySelector("."+Wh);if(!f(l)){var h;a.removeAttribute("style"),e.style.display="block",h=o?s.offsetHeight-(l.offsetHeight+a.offsetHeight):s.offsetWidth-(l.offsetWidth+a.offsetWidth);var u=0;[].slice.call(e.children).forEach(function(p){u+=n.popupEleWidth(p),Ht(p,{position:""})}),h+(o?l.offsetHeight:l.offsetWidth)>u&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(h,e,i),e.style.display="",0===e.children.length&&l&&this.popObj&&(we(l),l=null,this.popObj.destroy(),we(this.popObj.element),this.popObj=null,s.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,i){var n=[].slice.call(i.querySelectorAll("."+vR)),s=[],o=0;return n.length>0?(n.forEach(function(a){s.push([].slice.call(i.children).indexOf(a))}),s.forEach(function(a){a<=e&&o++}),o):0},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var s=e.offsetWidth-e.querySelector("."+Wh).offsetWidth,o=e.querySelector("."+uo).offsetWidth;return i.style.removeProperty("display"),s>n+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(_5)){var s=e.children[0];!f(n)&&e.classList.contains(_5)?n.style.display="none":!f(n)&&e.classList.contains(j$)&&(n.style.display="block"),s.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",f(n)||(n.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,n){for(var a,l,s=this.popupPriCount>0,o=this.tbarEle,h=this.element.querySelector("."+uo),u=0,p=function(P){if(P.classList.contains(M5)&&s&&!n)return"continue";var O=m.popupEleWidth(P);if(P===m.tbarEle[0]&&(O+=m.tbarEleMrgn),P.style.position="",!(O<e||n))return"break";if(Ht(P,{minWidth:"",height:"",minHeight:""}),P.classList.contains(gN)||P.classList.remove(Am),l=m.tbarEle.indexOf(P),m.tbarAlign){var N=m.items[l].align;l=m.tbarAlgEle[(N+"s").toLowerCase()].indexOf(P),o=m.tbarAlgEle[(N+"s").toLowerCase()],h=m.element.querySelector("."+uo+" .e-toolbar-"+N.toLowerCase())}var z=0;"Extended"!==m.overflowMode&&o.slice(0,l).forEach(function(U){(U.classList.contains(Rp)||U.classList.contains(ia))&&(U.classList.contains(ia)&&(U.style.display="",e-=U.offsetWidth),z++)}),u=m.ignoreEleFetch(l,h),P.classList.contains(Rp)?(m.tbarPriRef(h,l,z,P,n,O,e,u),e-=P.offsetWidth):0===l?(h.insertBefore(P,h.firstChild),e-=P.offsetWidth):(a=Tt("."+Rp,m.popObj.element).length,h.insertBefore(P,h.children[l+u-a]),e-=P.offsetWidth),P.style.height=""},m=this,y=0,C=[].slice.call(i.children);y<C.length&&"break"!==p(C[y]);y++);this.checkOverflow(this.element,this.element.getElementsByClassName(uo)[0])&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+uo);if(!f(e)&&e.classList.contains(_p)){this.remove(e,_p);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+uo);this.add(e,_p),this.itemPositioning()},t.prototype.itemPositioning=function(){var i,e=this.element.querySelector("."+uo);if(!f(e)&&e.classList.contains(_p)){var s,n=this.element.querySelector("."+Wh);s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),i=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){a-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=l:s[2].style.bottom=l:this.enableRtl?s[2].style.left=l:s[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");var u=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=u:s[1].style.marginTop=u:this.enableRtl?s[1].style.marginRight=u:s[1].style.marginLeft=u}}},t.prototype.tbarItemAlign=function(e,i,n){var s=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:U$})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==e.align)o.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,_p);else if("Left"!==e.align){var l=o[0];[].slice.call(i.childNodes).forEach(function(h){s.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,_p)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,uo),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(n){"DIV"===n.tagName&&(e.tbarEle.push(n),n.setAttribute("aria-disabled","false"),e.add(n,Ea))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&i.length>0){var n=void 0;e&&e.children.length>0&&(n=e.querySelector("."+uo)),n||(n=this.createElement("div",{className:uo})),this.itemsAlign(i,n),e.appendChild(n)}},t.prototype.setAttr=function(e,i){for(var s,n=Object.keys(e),o=0;o<n.length;o++)"class"===(s=n[o])?this.add(i,e[s]):i.setAttribute(s,e[s])},t.prototype.enableItems=function(e,i){var o,n=e,s=n.length;f(i)&&(i=!0);var a=function(p,m){p?(m.classList.remove(kp),m.setAttribute("aria-disabled","false")):(m.classList.add(kp),m.setAttribute("aria-disabled","true"))};if(!f(s)&&s>=1){for(var l=0,h=[].slice.call(n);l<s;l++){var u=h[l];if("number"==typeof u){if(f(o=this.getElementByIndex(u)))return;n[l]=o}else o=u;a(i,o)}i?W(n,kp):B(n,kp)}else{if("number"==typeof n){if(f(o=this.getElementByIndex(n)))return}else o=e;a(i,o)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[e]?this.tbarEle[e]:null},t.prototype.addItems=function(e,i){var n;this.extendedOpen();var s=this.element.querySelector("."+uo);if(f(s))this.itemsRerender(e);else{var o,a="Left";f(i)&&(i=0),e.forEach(function(y){!f(y.align)&&"Left"!==y.align&&"Left"===a&&(a=y.align)});for(var l=0,h=e;l<h.length;l++){var u=h[l];if(f(u.type)&&(u.type="Button"),n=Tt("."+Ea,this.element),u.align=a,o=this.renderSubComponent(u,i),this.tbarEle.length>=i&&n.length>=0){f(this.scrollModule)&&this.destroyMode();var p="L"===u.align[0]?0:"C"===u.align[0]?1:2,m=void 0;this.tbarAlign||"Left"===a?this.tbarAlign?((m=j(n[0],"."+uo).children[p]).insertBefore(o,m.children[i]),this.tbarAlgEle[(u.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===n.length?(n=Tt("."+uo,this.element))[0].appendChild(o):n[0].parentNode.insertBefore(o,n[i]):(this.tbarItemAlign(u,s,1),this.tbarAlign=!0,(m=j(n[0],"."+uo).children[p]).appendChild(o),this.tbarAlgEle[(u.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,u),u.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=s.offsetWidth}}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var n,i=e,s=[].slice.call(Tt("."+Ea,this.element));if("number"==typeof i)n=parseInt(e.toString(),10),this.removeItemByIndex(n,s);else if(i&&i.length>1)for(var o=0,a=[].slice.call(i);o<a.length;o++)n=this.tbarEle.indexOf(a[o]),this.removeItemByIndex(n,s),s=Tt("."+Ea,this.element);else n=s.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(n,s);this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[e]&&i[e]){var n=this.tbarEle.indexOf(i[e]);if(this.tbarAlign){var s=this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].indexOf(this.tbarEle[n]);this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].splice(s,1)}this.isReact&&this.clearTemplate();var o=i[e].querySelector(".e-control.e-btn");!f(o)&&!f(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),we(i[e]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},t.prototype.templateRender=function(e,i,n,s){var l,a=e;if("object"==typeof e&&(l="function"==typeof a.appendTo),"string"!=typeof e&&l)"Input"===n.type&&((m=this.createElement("input")).id=n.id?n.id:Sn("tbr-ipt"),i.appendChild(m),a.appendTo(m));else{var u,h=void 0,p=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);u="string"==typeof e?e.trim():e;try{if("object"!=typeof e||f(e.tagName))if("string"==typeof e&&p.test(u))i.innerHTML=u;else if(document.querySelectorAll(u).length){var m,y=(m=document.querySelector(u)).outerHTML.trim();i.appendChild(m),m.style.display="",f(y)||this.tempId.push(u)}else h=qi(u);else i.appendChild(e)}catch{h=qi(u)}var C=void 0;f(h)||(C=h({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!f(C)&&C.length>0&&[].slice.call(C).forEach(function(T){f(T.tagName)||(T.style.display=""),i.appendChild(T)})}this.add(i,z$),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var o,a,s=e.text;n.id=e.id?e.id:Sn("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});s?(l.innerHTML=this.enableHtmlSanitizer?bs.sanitize(s):s,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(o=e.prefixIcon+" e-icons",a="Left"):(o=e.suffixIcon+" e-icons",a="Right"));var h=new Is({iconCss:o,iconPosition:a});return h.createElement=this.createElement,h.appendTo(n),e.width&&Ht(n,{width:ut(e.width)}),n},t.prototype.renderSubComponent=function(e,i){var n,s=this.createElement("div",{className:Ea});s.setAttribute("aria-disabled","false");var o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?bs.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",o.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,i);else switch(e.type){case"Button":(n=this.buttonRendering(e,s)).setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(n),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,ia)}if(e.showTextOn){var a=e.showTextOn;"Toolbar"===a?(this.add(s,j$),this.add(s,"e-tbtn-align")):"Overflow"===a&&this.add(s,_5)}if(e.overflow){var l=e.overflow;"Show"===l?this.add(s,Rp):"Hide"===l&&(s.classList.contains(ia)||this.add(s,gN))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(ia)&&(this.add(s,M5),this.popupPriCount++),e.disabled&&this.add(s,kp),!1===e.visible&&this.add(s,yR),s},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){f(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,f(this.trgtEle)&&!e.parentElement.classList.contains(z$)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(uo)[0]);if(!i){this.destroyScroll();var n=e.querySelector("."+uo);f(n)||(this.remove(n,K$),this.tbarAlign&&this.add(n,_p))}if(!i||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+W$)&&(this.scrollStep=this.element.querySelector("."+W$).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+mN);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(H$))},t.prototype.onPropertyChanged=function(e,i){var n=this.element,s=n.offsetWidth;this.extendedOpen();for(var o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var h=Object.keys(e.items),u=0;u<h.length;u++){var p=parseInt(Object.keys(e.items)[u],10),m=Object.keys(e.items[p])[0],y=Object(e.items[p])[m];if("function"!=typeof y){if(this.tbarAlign||"align"===m){this.refresh(),this.trigger("created");break}("showAlwaysInPopup"===m&&!y||this.items[p].showAlwaysInPopup&&"overflow"===m&&0!==this.popupPriCount)&&--this.popupPriCount,f(this.scrollModule)&&this.destroyMode();var T=[].slice.call(Tt("."+uo+" ."+Ea,n));this.isReact&&this.clearTemplate(),we(T[p]),this.tbarEle.splice(p,1),this.addItems([this.items[p]],p),this.items.splice(p,1),this.items[p].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":Ht(n,{width:ut(e.width)}),this.renderOverflowMode(),this.popObj&&s<n.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Ht(this.element,{height:ut(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,Hf),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,Hf):this.remove(n,Hf),f(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,Hf):this.remove(this.scrollModule.element,Hf)),f(this.popObj)||(e.enableRtl?this.add(this.popObj.element,Hf):this.remove(this.popObj.element,Hf)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&W([this.element],i.cssClass.split(" ")),e.cssClass&&B([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}},t.prototype.hideItem=function(e,i){var o,a,n="object"==typeof e,s=e,l=[].slice.call(Tt("."+Ea,this.element));if(n?a=e:this.tbarEle[s]&&(a=[].slice.call(Tt("."+Ea,this.element))[s]),a){if(i?a.classList.add(yR):a.classList.remove(yR),i&&f(this.element.getAttribute("tabindex"))&&!a.classList.contains(ia)){if(f(a.firstElementChild.getAttribute("tabindex"))){a.firstElementChild.setAttribute("tabindex","-1");var u=[].slice.call(Tt("."+Ea,this.element));n&&(s=u.indexOf(a));for(var p=u[++s];p;){if(!this.eleContains(p)){p.firstElementChild.removeAttribute("tabindex");break}p=u[++s]}}}else if(f(this.element.getAttribute("tabindex"))&&!a.classList.contains(ia))for(var y=!1,C=!1,S=l[o=0];S;)if(S.classList.contains(ia))S=l[++o];else if(f(S.firstElementChild.getAttribute("tabindex")))S.firstElementChild.setAttribute("tabindex","-1"),y=!0;else{if(y&&C)break;this.eleContains(S)||(S.firstElementChild.removeAttribute("tabindex"),C=!0),S=l[++o]}this.refreshOverflow()}},us([ba([],Wce)],t.prototype,"items",void 0),us([D("auto")],t.prototype,"width",void 0),us([D("auto")],t.prototype,"height",void 0),us([D("")],t.prototype,"cssClass",void 0),us([D("Scrollable")],t.prototype,"overflowMode",void 0),us([D()],t.prototype,"scrollStep",void 0),us([D(!0)],t.prototype,"enableCollision",void 0),us([D(!0)],t.prototype,"enableHtmlSanitizer",void 0),us([D(!0)],t.prototype,"allowKeyboard",void 0),us([K()],t.prototype,"clicked",void 0),us([K()],t.prototype,"created",void 0),us([K()],t.prototype,"destroyed",void 0),us([K()],t.prototype,"beforeCreate",void 0),us([an],t)}(ur),AN=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bi=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Pp="e-treeview",lY="e-control",vl="e-icon-collapsible",cs="e-icon-expandable",yn="e-list-item",Q0="e-list-text",dr="e-list-parent",zf="e-hover",Pu="e-active",X5="e-icons-spinner",_m="e-process",No="e-icons",el="e-text-content",kN="e-input",hY="e-input-group",RN="e-tree-input",J5="e-editing",cY="e-interaction",dY="e-droppable",e6="e-dragging",TR="e-sibling",_N="e-drop-in",DR="e-drop-next",t6="e-drop-out",i6="e-no-drop",Mm="e-fullrow",Yx="e-selected",MN="e-expanded",pY="e-node-collapsed",fY="e-disable",$l="e-check",Dd="e-stop",Sc="e-checkbox-wrapper",Om="e-frame",gY="e-ripple",Zx="e-node-focus",mY="e-list-img",ON="e-animation-active",vY="e-disabled",yY={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},Sde=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AN(t,r),Bi([D("child")],t.prototype,"child",void 0),Bi([D([])],t.prototype,"dataSource",void 0),Bi([D("expanded")],t.prototype,"expanded",void 0),Bi([D("hasChildren")],t.prototype,"hasChildren",void 0),Bi([D("htmlAttributes")],t.prototype,"htmlAttributes",void 0),Bi([D("iconCss")],t.prototype,"iconCss",void 0),Bi([D("id")],t.prototype,"id",void 0),Bi([D("imageUrl")],t.prototype,"imageUrl",void 0),Bi([D("isChecked")],t.prototype,"isChecked",void 0),Bi([D("parentID")],t.prototype,"parentID",void 0),Bi([D(null)],t.prototype,"query",void 0),Bi([D("selected")],t.prototype,"selected",void 0),Bi([D(null)],t.prototype,"tableName",void 0),Bi([D("text")],t.prototype,"text",void 0),Bi([D("tooltip")],t.prototype,"tooltip",void 0),Bi([D("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(Wi),bY=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AN(t,r),Bi([D("SlideDown")],t.prototype,"effect",void 0),Bi([D(400)],t.prototype,"duration",void 0),Bi([D("linear")],t.prototype,"easing",void 0),t}(Wi),Ede=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return AN(t,r),Bi([Cn({effect:"SlideUp",duration:400,easing:"linear"},bY)],t.prototype,"collapse",void 0),Bi([Cn({effect:"SlideDown",duration:400,easing:"linear"},bY)],t.prototype,"expand",void 0),t}(Wi),xde=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isRefreshed=!1,s.preventExpand=!1,s.checkedElement=[],s.disableNode=[],s.validArr=[],s.validNodes=[],s.expandChildren=[],s.isFieldChange=!1,s.changeDataSource=!1,s.hasTemplate=!1,s.isFirstRender=!1,s.isNodeDropped=!1,s.mouseDownStatus=!1,s}var e;return AN(t,r),e=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var i=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:cs,ariaAttributes:yY,expandIconPosition:"Left",itemCreated:function(n){i.beforeNodeCreate(n)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new hs({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),f(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),f(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),f(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){return this.addOnPersist(["selectedNodes","checkedNodes","expandedNodes"])},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("tabindex","0"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?this.element.classList.add(vY):this.element.classList.remove(vY)},t.prototype.setEnableRtl=function(){(this.enableRtl?B:W)([this.element],"e-rtl")},t.prototype.setRipple=function(){this.rippleFn=Lr(this.element,{selector:".e-fullrow,.e-text-content",ignore:"."+el+" > ."+No+",."+hY+",."+kN+", ."+Sc}),this.rippleIconFn=Lr(this.element,{selector:"."+el+" > ."+No,isCenterRipple:!0})},t.prototype.setFullRow=function(i){(i?B:W)([this.element],"e-fullrow-wrap")},t.prototype.setMultiSelect=function(i){var n=he("."+dr,this.element);i?n.setAttribute("aria-multiselectable","true"):n.removeAttribute("aria-multiselectable")},t.prototype.templateComplier=function(i){if(i){this.hasTemplate=!0,this.element.classList.add(cY);try{return document.querySelectorAll(i).length?qi(document.querySelector(i).innerHTML.trim()):qi(i)}catch{return qi(i)}}this.element.classList.remove(cY)},t.prototype.setDataBinding=function(i){var n=this;this.treeList.push("false"),this.fields.dataSource instanceof Xe?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(s){n.isOffline=n.fields.dataSource.dataSource.offline,n.fields.dataSource instanceof Xe&&n.isOffline&&(n.treeList.pop(),n.treeData=s.result,n.isNumberTypeId=n.getType(),n.setRootData(),n.renderItems(!0),0===n.treeList.length&&!n.isLoaded&&n.finalize())}).catch(function(s){n.trigger("actionFailure",{error:s})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(s){n.treeList.pop(),n.treeData=s.result,n.isNumberTypeId=n.getType(),n.setRootData(),i&&(n.changeDataSource=!0),n.renderItems(!0),n.changeDataSource=!1,0===n.treeList.length&&!n.isLoaded&&n.finalize()}).catch(function(s){n.trigger("actionFailure",{error:s})})):(this.treeList.pop(),f(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),0===this.treeList.length&&!this.isLoaded&&this.finalize()},t.prototype.getQuery=function(i,n){void 0===n&&(n=null);var o,s=[];if(i.query)o=i.query.clone();else{o=new ni;for(var a=this.getActualProperties(i),l=0,h=Object.keys(a);l<h.length;l++){var u=h[l];"dataSource"!==u&&"tableName"!==u&&"child"!==u&&i[u]&&"url"!==u&&-1===s.indexOf(i[u])&&s.push(i[u])}o.select(s),a.hasOwnProperty("tableName")&&o.from(i.tableName)}return hn.addSorting(this.sortOrder,i.text,o),!f(n)&&!f(i.parentID)&&o.where(i.parentID,"equal",this.isNumberTypeId?parseFloat(n):n),o},t.prototype.getType=function(){return!!this.treeData[0]&&"number"==typeof re(this.fields.id,this.treeData[0])},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),1===this.dataType){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var i=this.getChildNodes(this.treeData,void 0,!0);this.rootData=f(i)?[]:i}else this.rootData=this.treeData},t.prototype.renderItems=function(i){this.listBaseOption.ariaAttributes.level=1;var n=this.getSortedData(this.rootData);this.ulElement=hn.createList(this.createElement,i?this.rootData:n,this.listBaseOption),this.element.appendChild(this.ulElement);var s=this.ulElement.querySelectorAll(".e-list-item");if(!1===this.loadOnDemand)for(var o=0;o<s.length;)this.renderChildNodes(s[o],!0,null,!0),o++;(1===Tt("."+dr,this.element).length&&s&&0!==s.length||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(i){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(1===this.dataType){for(var n=this.fields,s=new Xe(this.treeData).executeLocal((new ni).where(n.isChecked,"equal",!0,!1)),o=0;o<s.length;o++){var a=s[o][this.fields.id]?s[o][this.fields.id].toString():null;if(s[o][this.fields.parentID]&&s[o][this.fields.parentID].toString(),-1===this.checkedNodes.indexOf(a)&&!this.isLoaded&&this.checkedNodes.push(a),s[o][this.fields.hasChildren])for(var h=s[o][this.fields.id],u=new Xe(this.treeData).executeLocal((new ni).where(n.parentID,"equal",h,!1)),p=0;p<u.length;p++){var m=u[p][this.fields.id]?u[p][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(m)&&this.autoCheck&&this.checkedNodes.push(m)}}for(o=0;o<this.checkedNodes.length;o++){var y=this.fields,C=new Xe(this.treeData).executeLocal((new ni).where(y.id,"equal",this.checkedNodes[o],!0));if(C[0]&&this.autoCheck&&(this.getCheckedNodeDetails(y,C),this.checkIndeterminateState(C[0])),C.length>0){var S=C[0][this.fields.id]?C[0][this.fields.id].toString():null;this.checkedNodes.indexOf(S)>-1&&-1===this.validNodes.indexOf(S)&&this.validNodes.push(S)}for(var T=new Xe(this.treeData).executeLocal((new ni).where(y.parentID,"equal",this.checkedNodes[o],!0)),R=0;R<T.length;R++)S=T[R][this.fields.id]?T[R][this.fields.id].toString():null,-1===this.checkedNodes.indexOf(S)&&this.autoCheck&&this.checkedNodes.push(S),this.checkedNodes.indexOf(S)>-1&&-1===this.validNodes.indexOf(S)&&this.validNodes.push(S)}}else if(2===this.dataType||this.fields.dataSource instanceof Xe&&this.isOffline){for(R=0;R<this.treeData.length;R++){var P=this.treeData[R][this.fields.id]?this.treeData[R][this.fields.id].toString():"";this.treeData[R][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(P)&&this.checkedNodes.push(P),this.checkedNodes.indexOf(P)>-1&&-1===this.validNodes.indexOf(P)&&this.validNodes.push(P);var O=re(this.fields.child.toString(),this.treeData[R]);O&&this.updateChildCheckState(O,this.treeData[R])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},t.prototype.getCheckedNodeDetails=function(i,n){var s=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,o=0,a=this.element.querySelector('[data-uid="'+n[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+n[0][this.fields.parentID]+'"]');if(a||l)l&&(he("."+$l,l)||this.changeState(l,"indeterminate",null,!0,!0));else{-1===this.parentNodeCheck.indexOf(s)&&this.parentNodeCheck.push(s);for(var u=this.getChildNodes(this.treeData,s),p=0;p<u.length;p++){var m=u[p][this.fields.id]?u[p][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(m)&&o++,o===u.length&&-1===this.checkedNodes.indexOf(s)&&this.checkedNodes.push(s)}var y=new Xe(this.treeData).executeLocal((new ni).where(i.id,"equal",s,!0));this.getCheckedNodeDetails(i,y)}},t.prototype.updateParentCheckState=function(){for(var n,i=Tt("."+Dd,this.element),s=0;s<i.length;s++){var o=j(i[s],"."+yn),a=o.getAttribute("data-uid").toString(),l=0;if(n=1===this.dataType?new Xe(this.treeData).executeLocal((new ni).where(this.fields.parentID,"equal",a,!0)):this.getChildNodes(this.treeData,a)){for(var h=0;h<n.length;h++){var u=n[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&l++}if(l===n.length){var p=o.getAttribute("data-uid");-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p),this.changeState(o,"check",null,!0,!0)}else 0===l&&0===this.checkedNodes.length&&this.changeState(o,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(i){var n;(n=this.element.querySelector(1===this.dataType?'[data-uid="'+i[this.fields.parentID]+'"]':'[data-uid="'+i[this.fields.id]+'"]'))?"true"!==n.querySelector("."+Sc).getAttribute("aria-checked")&&this.changeState(n,"indeterminate",null,!0,!0):2===this.dataType&&-1===this.parentNodeCheck.indexOf(i[this.fields.id].toString())&&this.parentNodeCheck.push(i[this.fields.id].toString())},t.prototype.updateChildCheckState=function(i,n){for(var s=0,o=n[this.fields.id]?n[this.fields.id].toString():"",a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"";i[a][this.fields.isChecked]&&!this.isLoaded&&-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(l)&&this.autoCheck&&this.checkedNodes.push(l),-1!==this.checkedNodes.indexOf(l)&&this.autoCheck&&s++,this.checkedNodes.indexOf(l)>-1&&-1===this.validNodes.indexOf(l)&&this.validNodes.push(l);var h=re(this.fields.child.toString(),i[a]);h&&h.length&&(-1===this.parentCheckData.indexOf(n)&&this.parentCheckData.push(n),this.updateChildCheckState(h,i[a])),s===i.length&&this.autoCheck&&-1===this.checkedNodes.indexOf(o)&&this.checkedNodes.push(o)}if(0!==s&&this.autoCheck){this.checkIndeterminateState(n);for(var u=0;u<this.parentCheckData.length;u++)n!==this.parentCheckData[u]&&this.parentCheckData[u]&&this.checkIndeterminateState(this.parentCheckData[u])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(i){if(this.showCheckBox){var n=fh(this.createElement,!0,{cssClass:this.touchClass});n.setAttribute("role","checkbox"),n.setAttribute("aria-label","checkbox");var s=he("div."+No,i.item),o=i.item.getAttribute("data-uid");i.item.childNodes[0].insertBefore(n,i.item.childNodes[0].childNodes[f(s)?0:1]);var a=re(i.fields.isChecked,i.curData);this.checkedNodes.indexOf(o)>-1?(he("."+Om,n).classList.add($l),n.setAttribute("aria-checked","true"),this.addCheck(i.item)):f(a)||"true"!==a.toString()?n.setAttribute("aria-checked","false"):(he("."+Om,n).classList.add($l),n.setAttribute("aria-checked","true"),this.addCheck(i.item));var l=he("."+Om,n);A.add(l,"mousedown",this.frameMouseHandler,this),A.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(i.item),this.allowMultiSelection&&!i.item.classList.contains(Yx)&&i.item.setAttribute("aria-selected","false");var h=i.fields;if(this.addActionClass(i,h.selected,Yx),this.addActionClass(i,h.expanded,MN),!f(this.nodeTemplateFn)){var u=i.item.querySelector("."+Q0),p=i.item.getAttribute("data-uid");u.innerHTML="",this.renderNodeTemplate(i.curData,u,p)}this.isRefreshed||this.trigger("drawNode",{node:i.item,nodeData:i.curData,text:i.text})},t.prototype.frameMouseHandler=function(i){mm(i,he(".e-ripple-container",i.target.parentElement))},t.prototype.addActionClass=function(i,n,s){var a=re(n,i.curData);!f(a)&&"false"!==a.toString()&&i.item.classList.add(s)},t.prototype.getDataType=function(i,n){if(this.fields.dataSource instanceof Xe){for(var s=0;s<i.length;s++)if(this.isOffline){if("string"==typeof n.child&&f(re(n.child,i[s]))&&!f(re(n.parentID,i[s])))return 1}else if("string"==typeof n.child&&f(re(n.child,i[s])))return 1;return 2}s=0;for(var o=i.length;s<o;s++){if("string"==typeof n.child&&!f(re(n.child,i[s])))return 2;if(!f(re(n.parentID,i[s]))||!f(re(n.hasChildren,i[s])))return 1}return 1},t.prototype.getGroupedData=function(i,n){for(var s=(new ni).group(n),o=hn.getDataSource(i,s),a=[],l=0;l<o.length;l++)a.push(o[l].items);return a},t.prototype.getSortedData=function(i){return i&&"None"!==this.sortOrder&&(i=hn.getDataSource(i,hn.addSorting(this.sortOrder,this.fields.text))),i},t.prototype.finalizeNode=function(i){for(var n=Tt("."+mY,i),s=0;s<n.length;s++)n[s].setAttribute("alt",mY);if(this.isLoaded){for(var o=Tt("."+Yx,i),a=0;a<o.length;a++){this.selectNode(o[a],null);break}W(o,Yx)}for(var l=Tt("."+yn+":not(."+MN+")",i),h=0;h<l.length;h++){var u=he("div."+No,l[h]);u&&u.classList.contains(cs)&&this.disableExpandAttr(l[h])}var p=Tt("."+MN,i);if(!this.isInitalExpand)for(a=0;a<p.length;a++)this.renderChildNodes(p[a]);W(p,MN),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var i=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:i},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var i=Tt("li",this.element),s=0;s<i.length;s++)i[s].classList.contains(yn)&&(he("."+dr,i[s])?this.ensureParentCheckState(i[s]):this.ensureChildCheckState(i[s]));else{var o=Tt("."+Dd,this.element);for(s=0;s<o.length;s++)o[s].classList.remove(Dd)}},t.prototype.ensureParentCheckState=function(i){if(!f(i)){if(i.classList.contains(Pp))return;var n=i;i.classList.contains(yn)&&(n=he("."+dr,i));var s=Tt("."+$l,n),o=Tt("."+Dd,n),a=Tt("."+yn,n),l=i.getElementsByClassName(Sc)[0];a.length===s.length?this.changeState(l,"check",null,!0,!0):s.length>0||o.length>0?this.changeState(l,"indeterminate",null,!0,!0):0===s.length&&this.changeState(l,"uncheck",null,!0,!0);var h=j(i,"."+dr);if(!f(h)){var u=j(h,"."+yn);this.ensureParentCheckState(u)}}},t.prototype.ensureChildCheckState=function(i,n){if(!f(i)){var s=he("."+dr,i),o=void 0;if(!f(s)){o=Tt("."+Sc,s);for(var a=i.getElementsByClassName(Om)[0].classList.contains($l),l=i.getElementsByClassName(Om)[0].classList.contains(Dd),h=s.querySelectorAll("li"),p=void s.parentElement.getAttribute("aria-expanded"),m=0;m<o.length;m++){var y=h[m].getAttribute("data-uid");if(f(this.currentLoadData)||f(re(this.fields.isChecked,this.currentLoadData[m]))){var C=o[m].getElementsByClassName(Om)[0].classList.contains($l);a||C&&!this.isLoaded||-1!==this.checkedNodes.indexOf(y)&&this.isLoaded&&(l||a)?p="check":h[m].classList.contains("e-has-child")&&!Jt(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(y)||1===this.dataType&&!Jt(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&-1!==this.parentNodeCheck.indexOf(y)?(p="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(y),1)):p="uncheck"}else p=re(this.fields.isChecked,this.currentLoadData[m])?"check":"uncheck",-1!==this.ele&&(p=a?"check":"uncheck"),"uncheck"===p&&!Jt(this.parentNodeCheck)&&this.autoCheck&&-1!==this.parentNodeCheck.indexOf(y)&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(y),1),p="indeterminate");this.changeState(o[m],p,n,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(i,n){if(Tt("."+yn,this.element),f(i)){var C=Tt("."+Sc,this.element);if(this.loadOnDemand)for(var S=0;S<C.length;S++)this.updateFieldChecked(C[S],n),this.changeState(C[S],n?"check":"uncheck",null,null,null,n);else for(S=0;S<C.length;S++)this.updateFieldChecked(C[S],n),this.changeState(C[S],n?"check":"uncheck")}else for(var o=i.length;o>=0;o--){var a;if(f(a=this.getElement(1===i.length?i[o-1]:i[o]))){var l=void 0;if(""!==(l=i[o-i.length]?i[o-i.length].toString():i[o]?i[o].toString():null)&&n&&l)this.setValidCheckedNode(l),this.dynamicCheckState(l,n);else if(-1!==this.checkedNodes.indexOf(l)&&""!==l&&!n){this.checkedNodes.splice(this.checkedNodes.indexOf(l),1);var h=this.getChildNodes(this.treeData,l);if(h){for(var u=0;u<h.length;u++){var p=h[u][this.fields.id]?h[u][this.fields.id].toString():null;if(-1!==this.checkedNodes.indexOf(p)){this.checkedNodes.splice(this.checkedNodes.indexOf(p),1);var m=this.element.querySelector('[data-uid="'+p+'"]');m&&this.changeState(m,"uncheck",null)}}-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)}l&&this.dynamicCheckState(l,n),this.updateField(this.treeData,this.fields,l,"isChecked",null)}}else{var y=he("."+dr+" ."+Sc,a);this.validateCheckNode(y,!n,a,null)}}if(i)for(var T=0;T<i.length;T++)l=i[T]?i[T].toString():"",n||this.updateField(this.treeData,this.fields,l,"isChecked",null);this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(i,n){var s=j(i,"."+yn),o=s.getAttribute("data-uid");"true"===this.getNodeData(s).isChecked&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null)},t.prototype.dynamicCheckState=function(i,n){if(1===this.dataType){var s=0,o=new Xe(this.treeData).executeLocal((new ni).where(this.fields.id,"equal",i,!0));if(o[0]){var a=o[0][this.fields.id]?o[0][this.fields.id].toString():null,l=o[0][this.fields.parentID]?o[0][this.fields.parentID].toString():null,p=((h=this.element.querySelector('[data-uid="'+l+'"]'))&&he("."+Dd,h),h?he("."+$l,h):null),m=this.element.querySelector('[data-uid="'+a+'"]'),y=this.getChildNodes(this.treeData,l);if(y)for(var C=0;C<y.length;C++){var S=y[C][this.fields.id]?y[C][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(S)&&s++}-1!==this.checkedNodes.indexOf(i)&&h&&a===i&&this.autoCheck?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&m&&a===i&&!n?this.changeState(m,"uncheck",null):-1!==this.checkedNodes.indexOf(i)&&m&&a===i&&n?this.changeState(m,"check",null):-1===this.checkedNodes.indexOf(i)&&!m&&h&&a===i&&this.autoCheck&&0!==s?this.changeState(h,"indeterminate",null):-1===this.checkedNodes.indexOf(i)&&!m&&h&&a===i&&this.autoCheck&&0===s?this.changeState(h,"uncheck",null):!m&&!h&&a===i&&this.autoCheck&&this.updateIndeterminate(i,n)}}else if(2===this.dataType||this.fields.dataSource instanceof Xe&&this.isOffline){a=void 0;var h=void 0;for(p=void 0,C=0;C<this.treeData.length;C++){a=this.treeData[C][this.fields.id]?this.treeData[C][this.fields.id].toString():"",p=(h=this.element.querySelector('[data-uid="'+a+'"]'))?he("."+$l,h):null,-1===this.checkedNodes.indexOf(a)&&h&&p&&!n&&this.changeState(h,"uncheck",null);var T=re(this.fields.child.toString(),this.treeData[C]);T&&this.updateChildIndeterminate(T,a,i,n,a)}}},t.prototype.updateIndeterminate=function(i,n){var a,s=this.getTreeData(i),o=0;1===this.dataType&&(a=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,a);if(l)for(var h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(u)&&o++}var p=this.element.querySelector('[data-uid="'+a+'"]');p&&n||!n&&p&&-1===this.parentNodeCheck.indexOf(a)&&0!==o?this.changeState(p,"indeterminate",null):!n&&p&&-1===this.parentNodeCheck.indexOf(a)&&0===o?this.changeState(p,"uncheck",null):p||(n||-1!==this.checkedNodes.indexOf(a)||-1===this.parentNodeCheck.indexOf(a)?(n&&-1===this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)||!n&&-1!==this.checkedNodes.indexOf(a)&&-1===this.parentNodeCheck.indexOf(a)&&0!==o)&&this.parentNodeCheck.push(a):this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1),this.updateIndeterminate(a,n),-1!==this.checkedNodes.indexOf(a)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1))},t.prototype.updateChildIndeterminate=function(i,n,s,o,a){for(var l=0,h=0;h<i.length;h++){var u=i[h][this.fields.id]?i[h][this.fields.id].toString():"";-1!==this.checkedNodes.indexOf(u)&&l++;var p=this.element.querySelector('[data-uid="'+n+'"]'),m=p?he("."+Dd,p):null,y=p?he("."+$l,p):null,C=this.element.querySelector('[data-uid="'+u+'"]'),S=C?he("."+$l,C):null;if(-1!==this.checkedNodes.indexOf(s)&&p&&u===s&&this.autoCheck)this.changeState(p,"indeterminate",null);else if(-1!==this.checkedNodes.indexOf(s)||!p||C||u!==s||o){if(-1===this.checkedNodes.indexOf(s)&&C&&u===s&&!o)this.changeState(C,"uncheck",null);else if(-1===this.checkedNodes.indexOf(s)&&m&&u===s&&this.autoCheck&&0===l&&!o)m.classList.remove(Dd);else if(-1===this.checkedNodes.indexOf(s)&&!C&&y&&u===s&&0===l)this.changeState(p,"uncheck",null);else if(-1===this.checkedNodes.indexOf(u)&&C&&S&&0===l)this.changeState(C,"uncheck",null);else if(!C&&!p&&u===s||-1!==this.parentNodeCheck.indexOf(n)&&this.autoCheck){var T=this.element.querySelector('[data-uid="'+a+'"]');o&&0!==l?this.changeState(T,"indeterminate",null):o&&l===i.length&&-1===this.checkedNodes.indexOf(n)?this.checkedNodes.push(n):!o&&0===l&&-1!==this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(n)),-1===this.parentNodeCheck.indexOf(n)&&this.parentNodeCheck.push(n)}}else this.changeState(p,this.autoCheck?"uncheck":0!==l?"indeterminate":"uncheck",null);var R=re(this.fields.child.toString(),i[h]);R&&this.updateChildIndeterminate(R,u,s,o,a)}},t.prototype.changeState=function(i,n,s,o,a,l){var u,h=this,p=j(i,"."+yn);i===p&&(i=he("."+Sc,p)),o?this.nodeCheckAction(i,n,p,u,s,o,a,l):(this.checkActionNodes=[],u=this.getCheckEvent(p,n,s),this.trigger("nodeChecking",u,function(m){m.cancel||h.nodeCheckAction(i,n,p,m,s,o,a,l)}))},t.prototype.nodeCheckAction=function(i,n,s,o,a,l,h,u){var p,m=i.getElementsByClassName(Om)[0];if("check"!==n||m.classList.contains($l)?"uncheck"===n&&(m.classList.contains($l)||m.classList.contains(Dd))?(W([m],[$l,Dd]),this.removeCheck(s),p="false"):"indeterminate"===n&&this.autoCheck&&(m.classList.remove($l),m.classList.add(Dd),this.removeCheck(s),p="mixed"):(m.classList.remove(Dd),m.classList.add($l),this.addCheck(s),p="true"),f(p="check"===n?"true":"uncheck"===n?"false":p)||i.setAttribute("aria-checked",p),h){var y=[].concat([],this.checkActionNodes);o=this.getCheckEvent(s,n,a),Jt(l)&&(o.data=y)}void 0!==u&&this.ensureStateChange(s,u),l||f(p)||(i.setAttribute("aria-checked",p),o.data[0].checked=p,this.trigger("nodeChecked",o),this.checkActionNodes=[])},t.prototype.addCheck=function(i){var n=i.getAttribute("data-uid");!f(n)&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n)},t.prototype.removeCheck=function(i){var n=this.checkedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.checkedNodes.splice(n,1)},t.prototype.getCheckEvent=function(i,n,s){this.checkActionNodes.push(this.getNodeData(i));var o=this.checkActionNodes;return{action:n,cancel:!1,isInteracted:!f(s),node:i,data:o}},t.prototype.finalize=function(){var i=he("."+dr,this.element);if(!f(i)){i.setAttribute("role",yY.treeRole),this.setMultiSelect(this.allowMultiSelection);var n=he("."+yn,this.element);n&&(B([n],Zx),this.updateIdAttr(null,n)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=!!this.rootData[0]&&this.rootData[0].hasOwnProperty(this.fields.parentID),this.doExpandAction()}},t.prototype.setTextWrap=function(){(this.allowTextWrap?B:W)([this.element],"e-text-wrap"),X.isIE&&(this.allowTextWrap?B:W)([this.element],"e-ie-wrap")},t.prototype.updateWrap=function(i){if(this.fullRowSelect)for(var n=i?Tt("."+yn,i):this.liList,s=n.length,o=0;o<s;o++)this.calculateWrap(n[o])},t.prototype.calculateWrap=function(i){var n=he("."+Mm,i);n&&n.nextElementSibling&&(n.style.height=this.allowTextWrap?n.nextElementSibling.offsetHeight+"px":"")},t.prototype.doExpandAction=function(){var i=this.expandedNodes;if(this.isInitalExpand&&i.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof Xe)this.expandGivenNodes(i);else{for(var n=0;n<i.length;n++){var s=he('[data-uid="'+i[n]+'"]',this.element);if(f(s))i[n]&&-1===this.expandChildren.indexOf(i[n])&&this.expandChildren.push(i[n].toString());else{var o=he("."+cs,he("."+el,s));f(o)||this.expandAction(s,o,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(i){var n=this;this.expandCallback(i[this.index],function(){n.index++,n.index<i.length?n.expandGivenNodes(i):n.afterFinalized()})},t.prototype.expandCallback=function(i,n){var s=he('[data-uid="'+i+'"]',this.element);if(f(s))n();else{var o=he("."+cs,he("."+el,s));f(o)?n():this.expandAction(s,o,null,!1,n)}},t.prototype.afterFinalized=function(){this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,this.isLoaded&&!this.isFieldChange||this.isNodeDropped||this.trigger("dataBound",{data:this.treeData}),this.isLoaded=!0,this.isNodeDropped=!1},t.prototype.doSelectionAction=function(){var i=Tt("."+Yx,this.element),n=this.selectedNodes;if(n.length>0){this.setProperties({selectedNodes:[]},!0);for(var s=0;s<n.length;s++){var o=he('[data-uid="'+n[s]+'"]',this.element);if(o&&!o.classList.contains("e-active")?this.selectNode(o,null,!0):this.selectedNodes.push(n[s]),!this.allowMultiSelection)break}}else this.selectGivenNodes(i);W(i,Yx)},t.prototype.selectGivenNodes=function(i){for(var n=0;n<i.length&&(i[n].classList.contains("e-disable")||this.selectNode(i[n],null,!0),this.allowMultiSelection);n++);},t.prototype.clickHandler=function(i){var n=i.originalEvent.target;if(A.remove(this.element,"contextmenu",this.preventContextMenu),n&&!this.dragStartAction){var s=n.classList,o=j(n,"."+yn);if(!o)return;if(3!==i.originalEvent.which){var a=he(".e-ripple-element",o),l=he("."+No,o);if(this.removeHover(),this.setFocusElement(o),this.showCheckBox&&!o.classList.contains("e-disable")){var h=j(n,"."+Sc);if(!f(h)){var u=he("."+Om,h);return this.validateCheckNode(h,u.classList.contains($l),o,i.originalEvent),void this.triggerClickEvent(i.originalEvent,o)}}s.contains(cs)?this.expandAction(o,n,i):s.contains(vl)?this.collapseNode(o,n,i):a&&l?l.classList.contains(gY)&&l.classList.contains(cs)?this.expandAction(o,l,i):l.classList.contains(gY)&&l.classList.contains(vl)?this.collapseNode(o,l,i):!s.contains(dr)&&!s.contains(yn)&&this.toggleSelect(o,i.originalEvent,!1):!s.contains(dr)&&!s.contains(yn)&&this.toggleSelect(o,i.originalEvent,!1)}this.triggerClickEvent(i.originalEvent,o)}},t.prototype.nodeCheckedEvent=function(i,n,s){j(i,"."+yn);var a=this.getCheckEvent(i,n?"uncheck":"check",s);a.data=a.data.splice(0,a.data.length-1),this.trigger("nodeChecked",a)},t.prototype.triggerClickEvent=function(i,n){this.trigger("nodeClicked",{event:i,node:n})},t.prototype.expandNode=function(i,n,s){var o=this;if(this.renderReactTemplates(),n.classList.contains(X5)&&this.hideSpinner(n),this.initialRender||n.classList.add("interaction"),!0!==s||!0===s&&i.classList.contains("e-expanded")){if(!0!==this.preventExpand){W([n],cs),B([n],vl);var a=0,l=0,h=this,u=he("."+dr,i),p=i;this.setHeight(p,u);var m=he("."+yn+"."+Pu,i);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(u,{name:this.animation.expand.effect,duration:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(C){p.style.overflow="hidden",!f(m)&&m instanceof HTMLElement&&m.classList.add(ON),a=p.offsetHeight,l=he("."+el,i).offsetHeight},progress:function(C){C.element.style.display="block",h.animateHeight(C,a,l)},end:function(C){C.element.style.display="block",!f(m)&&m instanceof HTMLElement&&m.classList.remove(ON),o.expandedNode(p,u,n)}}):this.expandedNode(p,u,n)}}else he("."+dr,i).style.display="none",this.fields.dataSource instanceof Xe&&(this.preventExpand=!1);this.initialRender&&n.classList.add("interaction")},t.prototype.expandedNode=function(i,n,s){n.style.display="block",i.style.display="block",i.style.overflow="",i.style.height="",W([s],_m),this.addExpand(i),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(i),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(i,null),this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(i){i.setAttribute("aria-expanded","true"),W([i],pY);var n=i.getAttribute("data-uid");!f(n)&&-1===this.expandedNodes.indexOf(n)&&this.expandedNodes.push(n)},t.prototype.collapseNode=function(i,n,s){var a,o=this;n.classList.contains(_m)||(B([n],_m),this.isLoaded?(a=this.getExpandEvent(i,s),this.trigger("nodeCollapsing",a,function(l){l.cancel?W([n],_m):o.nodeCollapseAction(i,n,l)})):this.nodeCollapseAction(i,n,a))},t.prototype.nodeCollapseAction=function(i,n,s){var o=this;W([n],vl),B([n],cs);var a=0,l=0,h=this,u=he("."+dr,i),p=i,m=he("."+yn+"."+Pu,i);this.isAnimate?this.aniObj.animate(u,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(y){p.style.overflow="hidden",!f(m)&&m instanceof HTMLElement&&m.classList.add(ON),a=he("."+el,i).offsetHeight,l=p.offsetHeight},progress:function(y){h.animateHeight(y,a,l)},end:function(y){y.element.style.display="none",!f(m)&&m instanceof HTMLElement&&m.classList.remove(ON),o.collapsedNode(p,u,n,s)}}):this.collapsedNode(p,u,n,s)},t.prototype.collapsedNode=function(i,n,s,o){n.style.display="none",i.style.overflow="",i.style.height="",W([s],_m),this.removeExpand(i),this.isLoaded&&(o=this.getExpandEvent(i,null),this.trigger("nodeCollapsed",o))},t.prototype.removeExpand=function(i,n){n?i.removeAttribute("aria-expanded"):this.disableExpandAttr(i);var s=this.expandedNodes.indexOf(i.getAttribute("data-uid"));s>-1&&this.expandedNodes.splice(s,1)},t.prototype.disableExpandAttr=function(i){i.setAttribute("aria-expanded","false"),B([i],pY)},t.prototype.setHeight=function(i,n){n.style.display="block",n.style.visibility="hidden",i.style.height=i.offsetHeight+"px",n.style.display="none",n.style.visibility=""},t.prototype.animateHeight=function(i,n,s){i.element.parentElement.style.height=(i.duration-i.timeStamp)/i.duration*(s-n)+n+"px"},t.prototype.renderChildNodes=function(i,n,s,o){var h,a=this,l=he("div."+No,i);if(!f(l))if(this.showSpinner(l),this.fields.dataSource instanceof Xe){var u=this.parents(i,"."+dr).length,p=this.getChildFields(this.fields,u,1);if(f(p)||f(p.dataSource))return we(l),void this.removeExpand(i,!0);this.treeList.push("false"),this.fields.dataSource instanceof Xe&&this.isOffline?(this.treeList.pop(),h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.loadChild(h,p,l,i,n,s,o)):p.dataSource.executeQuery(this.getQuery(p,i.getAttribute("data-uid"))).then(function(m){a.treeList.pop(),h=m.result,1===a.dataType&&(a.dataType=2),a.loadChild(h,p,l,i,n,s,o)}).catch(function(m){a.trigger("actionFailure",{error:m})})}else{if(h=this.getChildNodes(this.treeData,i.getAttribute("data-uid")),this.currentLoadData=this.getSortedData(h),f(h)||0===h.length)return we(l),void this.removeExpand(i,!0);this.listBaseOption.ariaAttributes.level=parseFloat(i.getAttribute("aria-level"))+1,i.appendChild(hn.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(i,l,o),this.setSelectionForChildNodes(h),this.ensureCheckNode(i),this.finalizeNode(i),this.disableTreeNodes(h),this.renderSubChild(i,n,o)}},t.prototype.loadChild=function(i,n,s,o,a,l,h){if(this.currentLoadData=i,f(i)||0===i.length)we(s),this.removeExpand(o,!0);else{if(this.updateListProp(n),this.fields.dataSource instanceof Xe&&!this.isOffline){var u=o.getAttribute("data-uid");ui("child",i,this.getNodeObject(u))}this.listBaseOption.ariaAttributes.level=parseFloat(o.getAttribute("aria-level"))+1,o.appendChild(hn.createList(this.createElement,i,this.listBaseOption)),this.expandNode(o,s,h),this.setSelectionForChildNodes(i),this.ensureCheckNode(o),this.finalizeNode(o),this.disableTreeNodes(i),this.renderSubChild(o,a,h)}l&&l(),0===this.treeList.length&&!this.isLoaded&&this.finalize()},t.prototype.disableTreeNodes=function(i){for(var n=0;n<i.length;){var s=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.disableNode&&-1!==this.disableNode.indexOf(s)&&this.doDisableAction([s]),n++}},t.prototype.setSelectionForChildNodes=function(i){var n;for(n=0;n<i.length;n++){var s=i[n][this.fields.id]?i[n][this.fields.id].toString():null;void 0!==this.selectedNodes&&-1!==this.selectedNodes.indexOf(s)&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(i){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(i.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(i),this.ensureParentCheckState(i))),this.currentLoadData=null},t.prototype.getFields=function(i,n,s){return n===s?i:this.getFields(this.getChildMapper(i),n,s+1)},t.prototype.getChildFields=function(i,n,s){return n===s?this.getChildMapper(i):this.getChildFields(this.getChildMapper(i),n,s+1)},t.prototype.getChildMapper=function(i){return"string"==typeof i.child||f(i.child)?i:i.child},t.prototype.getChildNodes=function(i,n,s){var a,o=this;if(void 0===s&&(s=!1),f(i))return a;if(1===this.dataType)return this.getChildGroup(this.groupedData,n,s);if("string"==typeof this.fields.child){var l=i.findIndex(function(y){return y[o.fields.id]&&y[o.fields.id].toString()===n});if(-1!==l)return re(this.fields.child,i[l]);if(-1===l)for(var h=0,u=i.length;h<u;h++){var p=re(this.fields.child,i[h]),m=f(p)?-1:p.findIndex(function(y){return y[o.fields.id]&&y[o.fields.id].toString()===n});if(-1!==m)return re(this.fields.child,p[m]);if(!f(p)&&void 0!==(a=this.getChildNodes(p,n)))break}}return a},t.prototype.getChildGroup=function(i,n,s){var o;if(f(i))return o;for(var a=0,l=i.length;a<l;a++){if(f(i[a][0])||f(re(this.fields.parentID,i[a][0])))return s?i[a]:[];if(re(this.fields.parentID,i[a][0]).toString()===n)return i[a]}return o},t.prototype.renderSubChild=function(i,n,s){if(n)for(var o=Tt("."+cs,i),a=0,l=o.length;a<l;a++){var h=o[a];if(i.querySelector(".e-icons")!==o[a]){var u=j(h,"."+yn);this.expandArgs=this.getExpandEvent(u,null),!0!==s&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(u,n,null,s)}}},t.prototype.toggleSelect=function(i,n,s){i.classList.contains("e-disable")||(this.allowMultiSelection&&(n&&n.ctrlKey||s)&&this.isActive(i)?this.unselectNode(i,n):this.selectNode(i,n,s))},t.prototype.isActive=function(i){return!!i.classList.contains(Pu)},t.prototype.selectNode=function(i,n,s){var a,o=this;f(i)||!this.allowMultiSelection&&this.isActive(i)&&!f(n)?this.setFocusElement(i):this.isLoaded?(a=this.getSelectEvent(i,"select",n),this.trigger("nodeSelecting",a,function(l){l.cancel||o.nodeSelectAction(i,n,l,s)})):this.nodeSelectAction(i,n,a,s)},t.prototype.nodeSelectAction=function(i,n,s,o){if((!this.allowMultiSelection||!o&&(!n||n&&!n.ctrlKey))&&this.removeSelectAll(),this.allowMultiSelection&&n&&n.shiftKey){this.startNode||(this.startNode=i);var a=this.liList.indexOf(this.startNode),l=this.liList.indexOf(i);if(a>l){var h=a;a=l,l=h}for(var u=a;u<=l;u++){var p=this.liList[u];Ts(p)&&!p.classList.contains("e-disable")&&this.addSelect(p)}}else this.startNode=i,this.addSelect(i);this.setFocusElement(i),this.isLoaded&&(s.nodeData=this.getNodeData(i),this.trigger("nodeSelected",s))},t.prototype.unselectNode=function(i,n){var o,s=this;this.isLoaded?(o=this.getSelectEvent(i,"un-select",n),this.trigger("nodeSelecting",o,function(a){a.cancel||s.nodeUnselectAction(i,a)})):this.nodeUnselectAction(i,o)},t.prototype.nodeUnselectAction=function(i,n){this.removeSelect(i),this.setFocusElement(i),this.isLoaded&&(n.nodeData=this.getNodeData(i),this.trigger("nodeSelected",n))},t.prototype.setFocusElement=function(i){if(!f(i)){var n=this.getFocusedNode();n&&W([n],Zx),B([i],Zx),this.updateIdAttr(n,i)}},t.prototype.addSelect=function(i){i.setAttribute("aria-selected","true"),B([i],Pu);var n=i.getAttribute("data-uid");!f(n)&&-1===this.selectedNodes.indexOf(n)&&this.selectedNodes.push(n)},t.prototype.removeSelect=function(i){this.allowMultiSelection?i.setAttribute("aria-selected","false"):i.removeAttribute("aria-selected"),W([i],Pu);var n=this.selectedNodes.indexOf(i.getAttribute("data-uid"));n>-1&&this.selectedNodes.splice(n,1)},t.prototype.removeSelectAll=function(){for(var i=this.element.querySelectorAll("."+Pu),n=0,s=i;n<s.length;n++){var o=s[n];this.allowMultiSelection?o.setAttribute("aria-selected","false"):o.removeAttribute("aria-selected")}W(i,Pu),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(i,n,s){var o=this.getNodeData(i);return{action:n,cancel:!1,isInteracted:!f(s),node:i,nodeData:o}},t.prototype.setExpandOnType=function(){this.expandOnType="Auto"===this.expandOn?X.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(i){var n=i.originalEvent.target;!n||n.classList.contains(kN)||n.classList.contains(Pp)||n.classList.contains(dr)||n.classList.contains(yn)||n.classList.contains(No)||this.showCheckBox&&j(n,"."+Sc)||this.expandCollapseAction(j(n,"."+yn),i)},t.prototype.expandCollapseAction=function(i,n){var s=he("div."+No,i);if(s&&!s.classList.contains(_m)){var o=s.classList;o.contains(cs)?this.expandAction(i,s,n):o.contains(vl)&&this.collapseNode(i,s,n)}},t.prototype.expandAction=function(i,n,s,o,a){var l=this;n.classList.contains(_m)||(B([n],_m),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(i,s),this.trigger("nodeExpanding",this.expandArgs,function(h){h.cancel?W([n],_m):l.nodeExpandAction(i,n,o,a)})):this.nodeExpandAction(i,n,o,a))},t.prototype.nodeExpandAction=function(i,n,s,o){var a=he("."+dr,i);if(a&&"UL"===a.nodeName)this.expandNode(i,n);else{this.isFirstRender=!0,this.renderChildNodes(i,s,o);for(var l=Tt("."+yn,i),h=0;h<l.length;h++){var u=this.getId(l[h]);if(-1!==this.expandChildren.indexOf(u)&&void 0!==this.expandChildren){var p=he("."+cs,he("."+el,l[h]));f(p)||this.expandAction(l[h],p,null),this.expandChildren.splice(this.expandChildren.indexOf(u),1)}}}},t.prototype.keyActionHandler=function(i){var n=this,s=i.target,o=this.getFocusedNode();if(s&&s.classList.contains(kN)){var a=s;"enter"===i.action?(a.blur(),this.element.focus(),B([o],zf)):"escape"===i.action&&(a.value=this.oldText,a.blur(),this.element.focus(),B([o],zf))}else i.preventDefault(),this.trigger("keyPress",{cancel:!1,event:i,node:o},function(h){if(!h.cancel)switch(i.action){case"space":n.showCheckBox&&n.checkNode(i);break;case"moveRight":n.openNode(!n.enableRtl,i);break;case"moveLeft":n.openNode(!!n.enableRtl,i);break;case"shiftDown":n.shiftKeySelect(!0,i);break;case"moveDown":case"ctrlDown":case"csDown":n.navigateNode(!0);break;case"shiftUp":n.shiftKeySelect(!1,i);break;case"moveUp":case"ctrlUp":case"csUp":n.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":n.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":n.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":n.toggleSelect(o,i);break;case"f2":n.allowEditing&&!o.classList.contains("e-disable")&&n.createTextbox(o,i);break;case"ctrlA":if(n.allowMultiSelection){var u=Tt("."+yn+":not(."+Pu+")",n.element);n.selectGivenNodes(u)}}})},t.prototype.navigateToFocus=function(i){var n=this.getFocusedNode().querySelector("."+el),s=n.getBoundingClientRect(),o=this.getScrollParent(this.element);if(!f(o)){var a=o.getBoundingClientRect();s.bottom>a.bottom?o.scrollTop+=s.bottom-a.bottom:s.top<a.top&&(o.scrollTop-=a.top-s.top)}this.isVisibleInViewport(n)||n.scrollIntoView(i)},t.prototype.isVisibleInViewport=function(i){var n=i.getBoundingClientRect();return n.top>=0&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(i){return f(i)?null:i.scrollHeight>i.clientHeight?i:this.getScrollParent(i.parentElement)},t.prototype.shiftKeySelect=function(i,n){if(this.allowMultiSelection){var s=this.getFocusedNode(),o=i?this.getNextNode(s):this.getPrevNode(s);this.removeHover(),this.setFocusElement(o),this.toggleSelect(o,n,!1),this.navigateToFocus(!i)}else this.navigateNode(i)},t.prototype.checkNode=function(i){var n=this.getFocusedNode(),s=he("."+Sc,n),o=he(" ."+Om,s).classList.contains($l);n.classList.contains("e-disable")||0==n.getElementsByClassName("e-checkbox-disabled").length&&this.validateCheckNode(s,o,n,i)},t.prototype.validateCheckNode=function(i,n,s,o){var a=this,l=j(i,"."+yn);this.checkActionNodes=[];var h=n?"false":"true";f(h)||i.setAttribute("aria-checked",h);var u=this.getCheckEvent(l,n?"uncheck":"check",o);this.trigger("nodeChecking",u,function(p){p.cancel||a.nodeCheckingAction(i,n,s,p,o)})},t.prototype.nodeCheckingAction=function(i,n,s,o,a){if(-1===this.checkedElement.indexOf(s.getAttribute("data-uid"))&&(this.checkedElement.push(s.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,s.getAttribute("data-uid"));null!==l?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(i,n?"uncheck":"check",a,!0),this.autoCheck){this.ensureChildCheckState(s),this.ensureParentCheckState(j(j(s,"."+dr),"."+yn));var h=void 0;"check"===o.action?h=!0:"uncheck"===o.action&&(h=!1),this.ensureStateChange(s,h)}this.nodeCheckedEvent(i,n,a)},t.prototype.ensureStateChange=function(i,n){var s=he("."+dr,i),o=i.getAttribute("data-uid"),a=this.fields;if(1===this.dataType&&this.autoCheck)for(var l=new Xe(this.treeData).executeLocal((new ni).where(a.parentID,"equal",o,!0)),h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null,p=l[h][this.fields.isChecked]?l[h][this.fields.isChecked].toString():null;if(-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(u)){this.checkedNodes.push(u);var m=this.getChildNodes(this.treeData,u);this.getChildItems(m,n),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}else if(-1===this.checkedNodes.indexOf(o)&&null===s&&-1!==this.checkedNodes.indexOf(u)){if(this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),"true"===p&&this.updateField(this.treeData,this.fields,u,"isChecked",null),-1===this.checkedNodes.indexOf(o)&&null===s||-1!==this.parentNodeCheck.indexOf(u)){var y=this.getChildNodes(this.treeData,u);this.getChildItems(y,n),-1!==this.parentNodeCheck.indexOf(u)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}}else m=this.getChildNodes(this.treeData,u),this.getChildItems(m,n)}else if(1!==this.dataType||this.autoCheck)(m=this.getChildNodes(this.treeData,o))&&this.childStateChange(m,o,s,n);else if(n)for(h=0;h<this.treeData.length;h++){var T=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():null;-1===this.checkedNodes.indexOf(T)&&this.checkedNodes.push(T)}else{var C=new Xe(this.treeData).executeLocal((new ni).where(a.isChecked,"equal",!0,!1));for(h=0;h<C.length;h++){var S=C[h][this.fields.id]?C[h][this.fields.id].toString():null;-1!==this.checkedNodes.indexOf(S)&&this.checkedNodes.splice(this.checkedNodes.indexOf(S),1),this.updateField(this.treeData,this.fields,S,"isChecked",null)}this.checkedNodes=[]}},t.prototype.getChildItems=function(i,n){for(var s=0;s<i.length;s++){var o=i[s][this.fields.id]?i[s][this.fields.id].toString():null,a=i[s][this.fields.isChecked]?i[s][this.fields.isChecked].toString():null;-1!==this.checkedNodes.indexOf(o)&&!n&&this.checkedNodes.splice(this.checkedNodes.indexOf(o),1),-1===this.checkedNodes.indexOf(o)&&n&&this.checkedNodes.push(o),"true"===a&&!n&&this.updateField(this.treeData,this.fields,o,"isChecked",null);var l=this.getChildNodes(this.treeData,o);l.length>0&&this.getChildItems(l,n)}},t.prototype.childStateChange=function(i,n,s,o){for(var a=0;a<i.length;a++){var l=i[a][this.fields.id]?i[a][this.fields.id].toString():"",h=i[a][this.fields.isChecked]?i[a][this.fields.isChecked].toString():null;this.autoCheck?-1!==this.checkedNodes.indexOf(n)&&-1===this.checkedNodes.indexOf(l)?(this.checkedNodes.push(l),-1!==this.parentNodeCheck.indexOf(l)&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):-1===this.checkedNodes.indexOf(n)&&-1!==this.checkedNodes.indexOf(l)&&!o&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),"true"===h&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(o?-1===this.checkedNodes.indexOf(l)&&this.checkedNodes.push(l):(-1!==this.checkedNodes.indexOf(l)&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var u=this.getChildNodes([i[a]],l);u&&this.childStateChange(u,n,s,o)}},t.prototype.allCheckNode=function(i,n,s,o,a){if(i)for(var l=0;l<i.length;l++){var h=re(this.fields.id,i[l]),u=this.element.querySelector('[data-uid="'+h+'"]');!1!==a&&-1===this.checkedElement.indexOf(h.toString())&&(null===u&&!f(i[l][this.fields.isChecked])&&-1===n.indexOf(h.toString())||0===o||2===s)&&(!1!==i[l][this.fields.isChecked]||2===s?n.push(h.toString()):o=null,o=!1!==i[l][this.fields.isChecked]||2===s?0:null),-1===n.indexOf(h.toString())&&f(s)&&n.push(h.toString());var p=re(this.fields.child.toString(),i[l]);if(!0===re(this.fields.hasChildren,i[l])||p){var y,m=re(this.fields.id,i[l]);(y=1===this.dataType?this.getChildNodes(this.treeData,m.toString()):p)&&(f(a)?this.allCheckNode(y,n,s,o):this.allCheckNode(y,n,s,o,a),o=null)}o=null}},t.prototype.openNode=function(i,n){var s=this.getFocusedNode(),o=he("div."+No,s);if(i){if(!o)return;o.classList.contains(cs)?this.expandAction(s,o,n):this.focusNextNode(s,!0)}else if(o&&o.classList.contains(vl))this.collapseNode(s,o,n);else{var a=j(j(s,"."+dr),"."+yn);if(!a)return;a.classList.contains("e-disable")||(this.setFocus(s,a),this.navigateToFocus(!0))}},t.prototype.navigateNode=function(i){var n=this.getFocusedNode();this.focusNextNode(n,i)},t.prototype.navigateRootNode=function(i){var n=this.getFocusedNode(),s=i?this.getRootNode():this.getEndNode();s.classList.contains("e-disable")||(this.setFocus(n,s),this.navigateToFocus(i))},t.prototype.getFocusedNode=function(){var i,n=he("."+yn+"."+Zx,this.element);return f(n)&&(i=he("."+yn,this.element)),f(n)?f(i)?this.element.firstElementChild:i:n},t.prototype.focusNextNode=function(i,n){var s=n?this.getNextNode(i):this.getPrevNode(i);if(this.setFocus(i,s),this.navigateToFocus(!n),s.classList.contains("e-disable")){var o=s.lastChild;null==s.previousSibling&&s.classList.contains("e-level-1")?this.focusNextNode(s,!0):null==s.nextSibling&&s.classList.contains("e-node-collapsed")||null==s.nextSibling&&o.classList.contains(el)?this.focusNextNode(s,!1):this.focusNextNode(s,n)}},t.prototype.getNextNode=function(i){var s,n=this.liList.indexOf(i);do{if(n++,f(s=this.liList[n]))return i}while(!Ts(s));return s},t.prototype.getPrevNode=function(i){var s,n=this.liList.indexOf(i);do{if(n--,f(s=this.liList[n]))return i}while(!Ts(s));return s},t.prototype.getRootNode=function(){var n,i=0;do{n=this.liList[i],i++}while(!Ts(n));return n},t.prototype.getEndNode=function(){var n,i=this.liList.length-1;do{n=this.liList[i],i--}while(!Ts(n));return n},t.prototype.setFocus=function(i,n){W([i],[zf,Zx]),n.classList.contains("e-disable")||(B([n],[zf,Zx]),this.updateIdAttr(i,n))},t.prototype.updateIdAttr=function(i,n){this.element.removeAttribute("aria-activedescendant"),i&&i.removeAttribute("id"),n.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){this.mouseDownStatus||B([this.getFocusedNode()],zf),this.mouseDownStatus=!1},t.prototype.focusOut=function(){W([this.getFocusedNode()],zf)},t.prototype.onMouseOver=function(i){var n=i.target,s=n.classList,o=j(n,"."+yn);!o||s.contains(dr)||s.contains(yn)?this.removeHover():o&&!o.classList.contains("e-disable")&&this.setHover(o)},t.prototype.setHover=function(i){i.classList.contains(zf)||(this.removeHover(),B([i],zf))},t.prototype.onMouseLeave=function(i){this.removeHover()},t.prototype.removeHover=function(){var i=Tt("."+zf,this.element);i&&i.length&&W(i,zf)},t.prototype.getNodeData=function(i,n){if(!f(i)&&i.classList.contains(yn)&&!f(j(i,"."+lY))&&j(i,"."+lY).classList.contains(Pp)){var s=i.getAttribute("data-uid"),o=this.getText(i,n),a=j(i.parentNode,"."+yn),l=a?a.getAttribute("data-uid"):null,h=i.classList.contains(Pu),u="true"===i.getAttribute("aria-expanded"),p=null!==i.getAttribute("aria-expanded")||null!=(he("."+cs,i)||he("."+vl,i)),m=null,y=he("."+Sc,i);return this.showCheckBox&&y&&(m=y.getAttribute("aria-checked")),{id:s,text:o,parentID:l,selected:h,expanded:u,isChecked:m,hasChildren:p}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(i,n){if(n){var s=this.getNodeObject(i.getAttribute("data-uid")),o=parseFloat(i.getAttribute("aria-level"));return re(this.getFields(this.fields,o,1).text,s)}return he("."+Q0,i).textContent},t.prototype.getExpandEvent=function(i,n){var s=this.getNodeData(i);return{cancel:!1,isInteracted:!f(n),node:i,nodeData:s,event:n}},t.prototype.renderNodeTemplate=function(i,n,s){var o=this.nodeTemplateFn(i,this,"nodeTemplate"+s,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,n,this.root);o&&xt(o=Array.prototype.slice.call(o),n)},t.prototype.destroyTemplate=function(i){this.clearTemplate(["nodeTemplate"+i.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),X.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",f(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(i,n){!f(i)&&""!==i&&W([this.element],i.split(" ")),!f(n)&&""!==n&&B([this.element],n.split(" "))},t.prototype.editingHandler=function(i){var n=i.target;if(!(!n||n.classList.contains(Pp)||n.classList.contains(dr)||n.classList.contains(yn)||n.classList.contains(No)||n.classList.contains(kN)||n.classList.contains(hY))){var s=j(n,"."+yn);this.createTextbox(s,i)}},t.prototype.createTextbox=function(i,n){var s=this,o=he("."+RN,this.element);o&&o.blur();var a=he("."+Q0,i);this.updateOldText(i);var l=this.createElement("input",{className:RN,attrs:{value:this.oldText}}),h=this.getEditEvent(i,null,l.outerHTML);this.trigger("nodeEditing",h,function(u){if(!u.cancel){var m="width:"+(a.offsetWidth+5)+"px";B([i],J5),f(s.nodeTemplateFn)||s.destroyTemplate(i),s.isReact?setTimeout(function(){s.renderTextBox(h,a,m)},5):s.renderTextBox(h,a,m)}})},t.prototype.renderTextBox=function(i,n,s){n.innerHTML=i.innerHtml;var o=he("."+RN,n);this.inputObj=ke.createInput({element:o,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",s),o.focus(),o.setSelectionRange(0,o.value.length),this.wireInputEvents(o)},t.prototype.updateOldText=function(i){var n=i.getAttribute("data-uid");this.editData=this.getNodeObject(n);var s=parseFloat(i.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,s,1),this.oldText=re(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(i){if(he("."+RN,this.element)){var n=i.target,s=n.value,o=j(n,"."+Q0),a=j(n,"."+yn);we(this.inputObj.container),this.fields.dataSource instanceof Xe&&!this.isOffline?this.crudOperation("update",null,a,s,null,null,!0):this.appendNewText(a,o,s,!0)}},t.prototype.appendNewText=function(i,n,s,o){var a=this,l=this.getEditEvent(i,s,null);this.trigger("nodeEdited",l,function(h){a.updateText(i,n,s=h.cancel?h.oldText:h.newText,o),h.oldText!==s&&a.triggerEvent()})},t.prototype.updateText=function(i,n,s,o){var a=ui(this.editFields.text,s,this.editData);if(f(this.nodeTemplateFn))n.innerText=s;else{n.innerText="";var l=i.getAttribute("data-uid");this.renderNodeTemplate(a,n,l),this.renderReactTemplates()}o&&(W([i],J5),n.focus()),this.allowTextWrap&&this.calculateWrap(i)},t.prototype.getElement=function(i){return f(i)?null:"string"==typeof i?this.element.querySelector('[data-uid="'+i+'"]'):"object"==typeof i?LP(i):null},t.prototype.getId=function(i){return f(i)?null:"string"==typeof i?i:"object"==typeof i?LP(i).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(i,n,s){return{cancel:!1,newText:n,node:i,nodeData:this.getNodeData(i),oldText:this.oldText,innerHtml:s}},t.prototype.getNodeObject=function(i){var n;if(f(i))return n;if(1!==this.dataType)return this.getChildNodeObject(this.treeData,this.fields,i);for(var s=0,o=this.treeData.length;s<o;s++){var a=re(this.fields.id,this.treeData[s]);if(!f(this.treeData[s])&&!f(a)&&a.toString()===i)return this.treeData[s]}return n},t.prototype.getChildNodeObject=function(i,n,s){var o;if(f(i))return o;for(var a=0,l=i.length;a<l;a++){var h=re(n.id,i[a]);if(i[a]&&h&&h.toString()===s)return i[a];if("string"!=typeof n.child||f(re(n.child,i[a]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",i[a]))&&void 0!==(o=this.getChildNodeObject(re("child",i[a]),this.getChildMapper(n),s)))break}else{var u=re(n.child,i[a]);if(void 0!==(o=this.getChildNodeObject(u,this.getChildMapper(n),s)))break}}return o},t.prototype.setDragAndDrop=function(i){i&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var n,i=this,s=this;this.dragObj=new wp(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+el,helper:function(o){i.dragTarget=o.sender.target;var a=j(i.dragTarget,"."+Pp),l=j(i.dragTarget,"."+el);if(i.dragLi=j(i.dragTarget,"."+yn),i.fullRowSelect&&!l&&i.dragTarget.classList.contains(Mm)&&(l=i.dragTarget.nextElementSibling),!i.dragTarget||!o.element.isSameNode(a)||!l||i.dragTarget.classList.contains(Pp)||i.dragTarget.classList.contains(dr)||i.dragTarget.classList.contains(yn)||i.dragLi.classList.contains("e-disable"))return!1;var h=l.cloneNode(!0);if(f(he("div."+No,h))){var u=s.createElement("div",{className:No+" "+cs});h.insertBefore(u,h.children[0])}(n=s.createElement("div",{className:"e-drag-item "+Pp+" "+i.cssClass+" "+(i.enableRtl?"e-rtl":"")})).appendChild(h);var m=i.selectedNodes.length;if(m>1&&i.allowMultiSelection&&i.dragLi.classList.contains(Pu)){var y=s.createElement("span",{className:"e-drop-count",innerHTML:""+m});n.appendChild(y)}return document.body.appendChild(n),document.body.style.cursor="",i.dragData=i.getNodeData(i.dragLi),n},dragStart:function(o){B([i.element],e6);var l,a=j(o.target,".e-list-item");a&&(l=parseInt(a.getAttribute("aria-level"),10));var h=i.getDragEvent(o.event,i,null,o.target,null,n,l);h.draggedNode.classList.contains(J5)?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.trigger("nodeDragStart",h,function(u){u.cancel?(i.dragObj.intDestroy(o.event),i.dragCancelAction(n)):i.dragStartAction=!0})},drag:function(o){i.dragObj.setProperties({cursorAt:{top:!f(o.event.targetTouches)||X.isDevice?60:-20}}),i.dragAction(o,n)},dragStop:function(o){W([i.element],e6),i.removeVirtualEle();var a=o.target,h=j(a,"."+dY);(!a||!h)&&(we(o.helper),document.body.style.cursor="");var p,u=j(a,".e-list-item");u&&(p=parseInt(u.getAttribute("aria-level"),10));var m=i.getDragEvent(o.event,i,a,a,null,o.helper,p);m.preventTargetExpand=!1,i.trigger("nodeDragStop",m,function(y){i.dragParent=y.draggedParentNode,i.preventExpand=y.preventTargetExpand,y.cancel&&(o.helper.parentNode&&we(o.helper),document.body.style.cursor=""),i.dragStartAction=!1})}}),this.dropObj=new w0(this.element,{out:function(o){!f(o)&&!o.target.classList.contains(TR)&&(document.body.style.cursor="not-allowed")},over:function(o){document.body.style.cursor=""},drop:function(o){i.dropAction(o)}})},t.prototype.dragCancelAction=function(i){we(i),W([this.element],e6),this.dragStartAction=!1},t.prototype.dragAction=function(i,n){var s=j(i.target,"."+dY),o=j(i.target,"."+el),a=he("div."+No,n);W([a],[_N,DR,t6,i6]),this.removeVirtualEle(),document.body.style.cursor="";var l=i.target.classList;if(this.fullRowSelect&&!o&&!f(l)&&l.contains(Mm)&&(o=i.target.nextElementSibling),s){var h=j(i.target,"."+yn),u=j(i.target,"."+Sc),p=j(i.target,"."+vl),m=j(i.target,"."+cs);if(!s.classList.contains(Pp)||o&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h))if(this.hasTemplate&&h){var y=he(this.fullRowSelect?"."+Mm:"."+el,h);i&&!m&&!p&&i.event.offsetY<7&&!u||m&&i.event.offsetY<5||p&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):i&&!m&&!p&&!u&&y&&i.event.offsetY>y.offsetHeight-10||m&&i.event.offsetY>19||p&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):B([a],_N)}else h&&i&&!m&&!p&&i.event.offsetY<7&&!u||m&&i.event.offsetY<5||p&&i.event.offsetX<3?this.appendIndicator(h,a,this.fullRowSelect?1:0):h&&i&&!m&&!p&&i.target.offsetHeight>0&&i.event.offsetY>i.target.offsetHeight-10&&!u||m&&i.event.offsetY>19||p&&i.event.offsetX>19?this.appendIndicator(h,a,this.fullRowSelect?2:1):B([a],_N);else"LI"!==i.target.nodeName||h.isSameNode(this.dragLi)||this.isDescendant(this.dragLi,h)?i.target.classList.contains(TR)?B([a],DR):B([a],t6):(B([a],DR),this.renderVirtualEle(i))}else B([a],i6),document.body.style.cursor="not-allowed";var T,S=j(i.target,".e-list-item");S&&(T=parseInt(S.getAttribute("aria-level"),10));var R=this.getDragEvent(i.event,this,i.target,i.target,null,n,T);R.dropIndicator&&W([a],R.dropIndicator),this.trigger("nodeDragging",R),R.dropIndicator&&B([a],R.dropIndicator)},t.prototype.appendIndicator=function(i,n,s){B([n],DR);var o=this.createElement("div",{className:TR});i.insertBefore(o,i.children[s])},t.prototype.dropAction=function(i){var o,a,h,n=i.event.offsetY,s=i.target,l=!1;h=i.dragData.draggable;for(var u=0;u<h.ej2_instances.length;u++)if(h.ej2_instances[u]instanceof e){o=h.ej2_instances[u];break}if(o&&o.dragTarget){var m=j(o.dragTarget,"."+yn),y=j(s,"."+yn);if(null==y&&s.classList.contains(Pp)&&(y=s.firstElementChild),we(i.droppedElement),document.body.style.cursor="",!y||y.isSameNode(m)||this.isDescendant(m,y))return void(this.fields.dataSource instanceof Xe||(this.preventExpand=!1));if(o.allowMultiSelection&&m.classList.contains(Pu)){var C=Tt("."+Pu,o.element);if(i.target.offsetHeight<=33&&n>i.target.offsetHeight-10&&n>6)for(u=C.length-1;u>=0;u--)y.isSameNode(C[u])||this.isDescendant(C[u],y)||this.appendNode(s,C[u],y,i,o,n);else for(u=0;u<C.length;u++)y.isSameNode(C[u])||this.isDescendant(C[u],y)||this.appendNode(s,C[u],y,i,o,n)}else this.appendNode(s,m,y,i,o,n);a=parseInt(m.getAttribute("aria-level"),10),l=!0}this.fields.dataSource instanceof Xe||(this.preventExpand=!1),this.trigger("nodeDropped",this.getDragEvent(i.event,o,s,i.target,i.dragData.draggedElement,null,a,l)),o.element.id!==this.element.id&&(o.triggerEvent(),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent()},t.prototype.appendNode=function(i,n,s,o,a,l){var h=j(i,"."+Sc),u=j(o.target,"."+vl),p=j(o.target,"."+cs);n.classList.contains("e-disable")||h||!(p&&o.event.offsetY<5||u&&o.event.offsetX<3||p&&o.event.offsetY>19||u&&o.event.offsetX>19||!p&&!u)?this.dropAsChildNode(n,s,a,null,o,l,!0):"LI"===i.nodeName?this.dropAsSiblingNode(n,s,o,a):i.firstElementChild&&i.classList.contains(Pp)?"UL"===i.firstElementChild.nodeName&&this.dropAsSiblingNode(n,s,o,a):i.classList.contains("e-icon-collapsible")||i.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(n,s,o,a):this.dropAsChildNode(n,s,a,null,o,l)},t.prototype.dropAsSiblingNode=function(i,n,s,o){var u,a=j(n,"."+dr),l=j(i,"."+dr),h=j(l,"."+yn);if(s.target.offsetHeight>0&&s.event.offsetY>s.target.offsetHeight-2?u=!1:s.event.offsetY<2?u=!0:(s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible"))&&(s.event.offsetY<5||s.event.offsetX<3?u=!0:(s.event.offsetY>15||s.event.offsetX>17)&&(u=!1)),s.target.classList.contains("e-icon-expandable")||s.target.classList.contains("e-icon-collapsible")){var p=s.target.closest("li");a.insertBefore(i,u?p:p.nextElementSibling)}else a.insertBefore(i,u?s.target:s.target.nextElementSibling);this.moveData(i,n,a,u,o),this.updateElement(l,h),this.updateAriaLevel(i),o.element.id===this.element.id?this.updateList():(o.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(i,n,s,o,a,l,h){var y,u=j(i,"."+dr),p=j(u,"."+yn),m=j(n,"."+dr);if(a&&a.target&&(y=he(this.fullRowSelect?"."+Mm:"."+el,n)),a&&l<7&&!h)m.insertBefore(i,n),this.moveData(i,n,m,!0,s);else if(a&&a.target.offsetHeight>0&&l>a.target.offsetHeight-10&&!h&&!this.hasTemplate)m.insertBefore(i,n.nextElementSibling),this.moveData(i,n,m,!1,s);else if(this.hasTemplate&&y&&l>y.offsetHeight-10&&!h)m.insertBefore(i,n.nextElementSibling),this.moveData(i,n,m,!1,s);else{var C=this.expandParent(n),S=C.childNodes[o];C.insertBefore(i,S),this.moveData(i,S,C,!0,s)}this.updateElement(u,p),this.updateAriaLevel(i),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},t.prototype.moveData=function(i,n,s,o,a){var l=j(s,"."+yn),h=this.getId(i),u=a.updateChildField(a.treeData,a.fields,h,null,null,!0),p=this.getId(n),m=this.getDataPos(this.treeData,this.fields,p),y=this.getId(l);if(1===this.dataType){this.updateField(this.treeData,this.fields,y,"hasChildren",!0);var C=f(m)?this.treeData.length:o?m:m+1;if(f(y)&&!this.hasPid)delete u[0][this.fields.parentID];else{var S=this.isNumberTypeId?parseFloat(y):y;ui(this.fields.parentID,S,u[0])}if(this.treeData.splice(C,0,u[0]),a.element.id!==this.element.id){var T=a.removeChildNodes(h);C++;for(var R=0,P=T.length;R<P;R++)this.treeData.splice(C,0,T[R]),C++;a.groupedData=a.getGroupedData(a.treeData,a.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,y,u,o?m:m+1)},t.prototype.expandParent=function(i){var n=he("div."+No,i);n&&n.classList.contains(cs)&&!0!==this.preventExpand&&this.expandAction(i,n,null);var o,s=he("."+dr,i);return!0===this.preventExpand&&!s&&n&&this.renderChildNodes(i),!f(s=he("."+dr,i))&&!0===this.preventExpand&&(s.style.display="none"),!f(s)&&!1===this.preventExpand&&(s.style.display="block"),f(s)&&!0===this.preventExpand&&(f(n)&&hn.generateIcon(this.createElement,i,cs,this.listBaseOption),(o=he("div."+No,i))&&o.classList.add("e-icon-expandable"),s=hn.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(s),o?W([o],vl):hn.generateIcon(this.createElement,i,cs,this.listBaseOption),i.setAttribute("aria-expanded","false"),s.style.display="none"),f(s)&&(this.trigger("nodeExpanding",this.getExpandEvent(i,null)),f(n)&&hn.generateIcon(this.createElement,i,vl,this.listBaseOption),(o=he("div."+No,i))||(hn.generateIcon(this.createElement,i,vl,this.listBaseOption),o=he("div."+No,i)),W([o],cs),s=hn.generateUL(this.createElement,[],null,this.listBaseOption),i.appendChild(s),this.addExpand(i),this.trigger("nodeExpanded",this.getExpandEvent(i,null))),s},t.prototype.updateElement=function(i,n){if(n&&0===i.childElementCount){var s=he("div."+No,n);we(i),we(s);var o=this.getId(n);this.updateField(this.treeData,this.fields,o,"hasChildren",!1),this.removeExpand(n,!0)}},t.prototype.updateAriaLevel=function(i){var n=this.parents(i,"."+dr).length;i.setAttribute("aria-level",""+n),this.updateChildAriaLevel(he("."+dr,i),n+1)},t.prototype.updateChildAriaLevel=function(i,n){if(!f(i))for(var s=i.childNodes,o=0,a=s.length;o<a;o++){var l=s[o];l.setAttribute("aria-level",""+n),this.updateChildAriaLevel(he("."+dr,l),n+1)}},t.prototype.renderVirtualEle=function(i){var n;i.event.offsetY>i.target.offsetHeight-2?n=!1:i.event.offsetY<2&&(n=!0);var s=this.createElement("div",{className:TR});i.target.insertBefore(s,i.target.children[this.fullRowSelect?n?1:2:n?0:1])},t.prototype.removeVirtualEle=function(){var i=he("."+TR);i&&we(i)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(i,n,s,o,a,l,h,u){var p=s?j(s,"."+yn):null,m=p?this.getNodeData(p):null,y=n?n.dragLi:a,C=n?n.dragData:null,S=s?this.parents(s,"."+yn):null,T=n.dragLi.parentElement,R=n.dragLi?j(T,"."+yn):null,P=null,O=null,N=[DR,_N,t6,i6],z=null,U=!0===u?y:p,ae=U?j(U,".e-list-parent"):null,me=0,Te=null;if(R=n.dragLi&&null===R?j(T,"."+Pp):R,R=!0===u?this.dragParent:R,l)for(;me<4;){if(he("."+No,l).classList.contains(N[me])){z=N[me];break}me++}if(ae){var Oe=0;for(me=0;me<ae.childElementCount;me++){if(Oe=!0!==u&&ae.children[me]===y&&p!==y?++Oe:Oe,!0!==u&&ae.children[me].classList.contains("e-hover")){O=i.offsetY>=23?me+1:me;break}if(ae.children[me]===U){O=me;break}}O=0!==Oe?--O:O,Te="e-drop-in"==z?"Inside":i.offsetY<7?"Before":"After"}if(s&&(P=0===S.length?null:s.classList.contains(yn)?S[0]:S[1]),p===y&&(P=p),s&&o.offsetHeight<=33&&i.offsetY<o.offsetHeight-10&&i.offsetY>6&&(P=p,!0!==u)){h=++h;var oe=P?he(".e-list-parent",P):null;if(O=oe?oe.children.length:0,!(this.fields.dataSource instanceof Xe)&&null===oe&&P){var Ie=P.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,P.getAttribute("data-uid").toString()):null;O=Ie?Ie.length:0}}return{cancel:!1,clonedNode:l,event:i,draggedNode:y,draggedNodeData:C,droppedNode:p,droppedNodeData:m,dropIndex:O,dropLevel:h,draggedParentNode:R,dropTarget:P,dropIndicator:z,target:o,position:Te}},t.prototype.addFullRow=function(i){var n=this.liList.length;if(i)for(var s=0;s<n;s++)this.createFullRow(this.liList[s]);else for(s=0;s<n;s++)we(he("."+Mm,this.liList[s]))},t.prototype.createFullRow=function(i){var n=this.createElement("div",{className:Mm});i.insertBefore(n,i.childNodes[0])},t.prototype.addMultiSelect=function(i){if(i)for(var s=0,o=Tt("."+yn+':not([aria-selected="true"])',this.element);s<o.length;s++)o[s].setAttribute("aria-selected","false");else for(var l=0,h=Tt("."+yn+'[aria-selected="false"]',this.element);l<h.length;l++)h[l].removeAttribute("aria-selected")},t.prototype.collapseByLevel=function(i,n,s){if(n>0&&!f(i))for(var o=this.getVisibleNodes(s,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],u=he("."+vl,he("."+el,h));f(u)||this.collapseNode(h,u,null),this.collapseByLevel(he("."+dr,h),n-1,s)}},t.prototype.collapseAllNodes=function(i){for(var n=this.getVisibleNodes(i,Tt("."+vl,this.element)),s=0,o=n.length;s<o;s++){var a=n[s],l=j(a,"."+yn);this.collapseNode(l,a,null)}},t.prototype.expandByLevel=function(i,n,s){if(n>0&&!f(i))for(var o=this.getVisibleNodes(s,i.childNodes),a=0,l=o.length;a<l;a++){var h=o[a],u=he("."+cs,he("."+el,h));f(u)||this.expandAction(h,u,null),this.expandByLevel(he("."+dr,h),n-1,s)}},t.prototype.expandAllNodes=function(i){for(var n=this.getVisibleNodes(i,Tt("."+cs,this.element)),s=0,o=n.length;s<o;s++){var a=n[s],l=j(a,"."+yn);this.expandAction(l,a,null,!0)}},t.prototype.getVisibleNodes=function(i,n){var s=Array.prototype.slice.call(n);if(i)for(var o=0;o<s.length;o++)Ts(s[o])||(s.splice(o,1),o--);return s},t.prototype.removeNode=function(i){var n=j(i,"."+dr),s=j(n,"."+yn);f(this.nodeTemplateFn)||this.destroyTemplate(i),we(i),this.updateElement(n,s),this.removeData(i)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(Tt("."+yn,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var i=Tt("."+Pu,this.element);this.selectGivenNodes(i)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var i=Tt('[aria-expanded="true"]',this.element),n=0,s=i.length;n<s;n++)this.addExpand(i[n])},t.prototype.removeData=function(i){if(1===this.dataType){var n=new Xe(this.treeData),s=this.getId(i),o={},a=this.isNumberTypeId?parseFloat(s):s;o[this.fields.id]=a,n.remove(this.fields.id,o),this.removeChildNodes(s)}else s=this.getId(i),this.updateChildField(this.treeData,this.fields,s,null,null,!0)},t.prototype.removeChildNodes=function(i){var n=this.getChildGroup(this.groupedData,i,!1),s=[];if(n)for(var o=0,a=n.length;o<a;o++){var l=new Xe(this.treeData),h=re(this.fields.id,n[o]).toString(),u={},p=this.isNumberTypeId?parseFloat(h):h;u[this.fields.id]=p;var m=l.remove(this.fields.id,u);s.push(m[0]),this.removeChildNodes(h)}return s},t.prototype.doGivenAction=function(i,n,s){for(var o=0,a=i.length;o<a;o++){var l=this.getElement(i[o]);if(!f(l)){var h=he("."+n,he("."+el,l));f(h)||(s?this.expandAction(l,h,null):this.collapseNode(l,h,null))}}},t.prototype.addGivenNodes=function(i,n,s,o,a){if(0!==i.length){var l=this.getSortedData(i),h=n?parseFloat(n.getAttribute("aria-level"))+1:1;o&&this.updateMapper(h);var m,y,C,u=hn.createListItemFromJson(this.createElement,l,this.listBaseOption,h),p=this.getId(n);if(f(n)||(y=he("div."+No,n)),1===this.dataType&&y&&y.classList.contains(cs)&&!f(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),1!==this.dataType&&(this.addChildData(this.treeData,this.fields,p,i,s),this.isFirstRender=!1),m=(C=a||(n?this.expandParent(n):he("."+dr,this.element))).childNodes[s],!this.isFirstRender||1===this.dataType){if(m||"None"===this.sortOrder){for(var S=0;S<u.length;S++)C.insertBefore(u[S],m);if(1===this.dataType&&!f(n)&&!f(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var T=he("div."+No,n);T&&T.classList.contains(cs)&&this.expandAction(n,T,null)}}if(!m&&("Ascending"===this.sortOrder||"Descending"===this.sortOrder)){var R=C.childNodes;for(S=0;S<u.length;S++)for(var P=0;P<R.length;P++){if("Ascending"===this.sortOrder?R[P].textContent.toUpperCase()>u[S].innerText.toUpperCase():R[P].textContent.toUpperCase()<u[S].innerText.toUpperCase()){C.insertBefore(u[S],R[P]);break}C.insertBefore(u[S],R[R.length])}}}if(1===this.dataType){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);var N=this.getId(m),z=f(N)?this.treeData.length:this.getDataPos(this.treeData,this.fields,N);for(P=0;P<i.length;P++){if(!f(p)){var U=this.isNumberTypeId?parseFloat(p):p;ui(this.fields.parentID,U,i[P])}this.treeData.splice(z,0,i[P]),z++}}this.finalizeNode(C)}},t.prototype.updateMapper=function(i){var n=1===i?this.fields:this.getChildFields(this.fields,i-1,1);this.updateListProp(n)},t.prototype.updateListProp=function(i){var n=this.getActualProperties(i);this.listBaseOption.fields=n,this.listBaseOption.fields.url=n.hasOwnProperty("navigateUrl")?n.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(i,n,s){for(var o=null,a=0,l=i.length;a<l;a++){var h=re(n.id,i[a]);if(i[a]&&h&&h.toString()===s)return a;if("string"!=typeof n.child||f(re(n.child,i[a]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",i[a]))){var p=re("child",i[a]);if(null!==(o=this.getDataPos(p,this.getChildMapper(n),s)))break}}else{var u=re(n.child,i[a]);if(null!==(o=this.getDataPos(u,this.getChildMapper(n),s)))break}}return o},t.prototype.addChildData=function(i,n,s,o,a){var l;if(f(s)){a=f(a)?i.length:a;for(var h=0,u=o.length;h<u;h++)i.splice(a,0,o[h]),a++;return l}for(var p=0,m=i.length;p<m;p++){var y=re(n.id,i[p]);if(i[p]&&y&&y.toString()===s){if("string"==typeof n.child&&i[p].hasOwnProperty(n.child)&&null!==i[p][n.child]||this.fields.dataSource instanceof Xe&&i[p].hasOwnProperty("child"))for(f(S=re("string"==typeof n.child?n.child:"child",i[p]))&&(S=[]),a=f(a)?S.length:a,h=0,u=o.length;h<u;h++)S.splice(a,0,o[h]),a++;else i[p]["string"==typeof n.child?n.child:"child"]=o;return!0}if("string"!=typeof n.child||f(re(n.child,i[p]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",i[p]))){var S=re("child",i[p]);if(void 0!==(l=this.addChildData(S,this.getChildMapper(n),s,o,a)))break}}else{var T=re(n.child,i[p]);if(void 0!==(l=this.addChildData(T,this.getChildMapper(n),s,o,a)))break}}return l},t.prototype.doDisableAction=function(i){var n=this.nodeType(i),s=this.checkValidId(n);this.validArr=[];for(var o=0,a=s.length;o<a;o++){var l=s[o][this.fields.id].toString();l&&-1===this.disableNode.indexOf(l)&&this.disableNode.push(l);var h=this.getElement(l);h&&(h.setAttribute("aria-disabled","true"),B([h],fY))}},t.prototype.doEnableAction=function(i){for(var n=this.nodeType(i),s=0,o=n.length;s<o;s++){var a=this.getElement(n[s]),l=n[s];l&&-1!==this.disableNode.indexOf(l)&&this.disableNode.splice(this.disableNode.indexOf(l),1),a&&(a.removeAttribute("aria-disabled"),W([a],fY))}},t.prototype.nodeType=function(i){for(var n=[],s=0,o=i.length;s<o;s++){var a=void 0;"string"==typeof i[s]?a=i[s]?i[s].toString():null:"object"==typeof i[s]&&(a=i[s]?i[s].getAttribute("data-uid").toString():null),-1==n.indexOf(a)&&n.push(a)}return n},t.prototype.checkValidId=function(i){var n=this;if(1===this.dataType)this.validArr=this.treeData.filter(function(l){return-1!==i.indexOf(l[n.fields.id]?l[n.fields.id].toString():null)});else if(2===this.dataType)for(var s=0;s<this.treeData.length;s++){var o=this.treeData[s][this.fields.id]?this.treeData[s][this.fields.id].toString():null;-1!==i.indexOf(o)&&this.validArr.push(this.treeData[s]);var a=re(this.fields.child.toString(),this.treeData[s]);a&&this.filterNestedChild(a,i)}return this.validArr},t.prototype.filterNestedChild=function(i,n){for(var s=0;s<i.length;s++){var o=i[s][this.fields.id]?i[s][this.fields.id].toString():null;-1!==n.indexOf(o)&&this.validArr.push(i[s]);var a=re(this.fields.child.toString(),i[s]);a&&this.filterNestedChild(a,n)}},t.prototype.setTouchClass=function(){var i=j(this.element,".e-bigger");this.touchClass=f(i)?"":"e-small"},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var i=this.selectedNodes,n=0,s=i.length;n<s;n++)this.updateField(this.treeData,this.fields,i[n],"selected",!0);for(var o=this.expandedNodes,a=0,l=o.length;a<l;a++)this.updateField(this.treeData,this.fields,o[a],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);var h=this.checkedNodes,u=0;for(l=h.length;u<l;u++)this.updateField(this.treeData,this.fields,h[u],"isChecked",!0)}},t.prototype.removeField=function(i,n,s){if(!f(i)&&!f(n))for(var o=0,a=i.length;o<a;o++){for(var l=0;l<s.length;l++){var h=this.getMapperProp(n,s[l]);f(i[o][h])||delete i[o][h]}"string"!=typeof n.child||f(re(n.child,i[o]))?this.fields.dataSource instanceof Xe&&!f(re("child",i[o]))&&this.removeField(re("child",i[o]),this.getChildMapper(n),s):this.removeField(re(n.child,i[o]),this.getChildMapper(n),s)}},t.prototype.getMapperProp=function(i,n){switch(n){case"selected":return f(i.selected)?"selected":i.selected;case"expanded":return f(i.expanded)?"expanded":i.expanded;case"isChecked":return f(i.isChecked)?"isChecked":i.isChecked;case"hasChildren":return f(i.hasChildren)?"hasChildren":i.hasChildren;default:return n}},t.prototype.updateField=function(i,n,s,o,a){if(!f(s))if(1===this.dataType){var l=this.isNumberTypeId?parseFloat(s):s,h=new Xe(this.treeData).executeLocal((new ni).where(n.id,"equal",l,!1));ui(this.getMapperProp(n,o),a,h[0])}else this.updateChildField(i,n,s,o,a)},t.prototype.updateChildField=function(i,n,s,o,a,l){var h;if(f(i))return h;for(var u=0,p=i.length;u<p;u++){var m=re(n.id,i[u]);if(i[u]&&m&&m.toString()===s)return l?h=i.splice(u,1):(ui(this.getMapperProp(n,o),a,i[u]),h=[]),h;if("string"!=typeof n.child||f(re(n.child,i[u]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",i[u]))){var C=re("child",i[u]);if(void 0!==(h=this.updateChildField(C,this.getChildMapper(n),s,o,a,l)))break}}else{var y=re(n.child,i[u]);if(void 0!==(h=this.updateChildField(y,this.getChildMapper(n),s,o,a,l)))break}}return h},t.prototype.triggerEvent=function(){this.renderReactTemplates(),this.trigger("dataSourceChanged",{data:this.treeData})},t.prototype.wireInputEvents=function(i){A.add(i,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(i){var n=this;if(i&&!this.disabled){var s=this;this.touchEditObj=new dl(this.element,{tap:function(o){n.isDoubleTapped(o)&&2===o.tapCount&&(o.originalEvent.preventDefault(),s.editingHandler(o.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(i){if(i){var n=this;this.touchClickObj=new dl(this.element,{tap:function(s){n.clickHandler(s)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(i){var n=this;if(i){var s=this;this.touchExpandObj=new dl(this.element,{tap:function(o){("Click"===n.expandOnType||"DblClick"===n.expandOnType&&n.isDoubleTapped(o)&&2===o.tapCount)&&3!==o.originalEvent.which&&s.expandHandler(o)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(i){this.mouseDownStatus=!0,(i.shiftKey||i.ctrlKey)&&i.preventDefault(),i.ctrlKey&&this.allowMultiSelection&&A.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(i){i.preventDefault()},t.prototype.wireEvents=function(){A.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),"None"!==this.expandOnType&&this.wireExpandOnEvent(!0),A.add(this.element,"focus",this.focusIn,this),A.add(this.element,"blur",this.focusOut,this),A.add(this.element,"mouseover",this.onMouseOver,this),A.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Hn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){A.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),A.remove(this.element,"focus",this.focusIn),A.remove(this.element,"blur",this.focusOut),A.remove(this.element,"mouseover",this.onMouseOver),A.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(i,n){for(var s=[],o=i.parentNode;!f(o);)pm(o,n)&&s.push(o),o=o.parentNode;return s},t.prototype.isDoubleTapped=function(i){var s,n=i.originalEvent.target;return n&&i.tapCount&&(1===i.tapCount?this.firstTap=j(n,"."+yn):2===i.tapCount&&(s=j(n,"."+yn))),this.firstTap===s},t.prototype.isDescendant=function(i,n){for(var s=n.parentNode;!f(s);){if(s===i)return!0;s=s.parentNode}return!1},t.prototype.showSpinner=function(i){B([i],X5),bc({target:i,width:X.isDevice?16:14},this.createElement),Ul(i)},t.prototype.hideSpinner=function(i){Rl(i),i.innerHTML="",W([i],X5)},t.prototype.setCheckedNodes=function(i){i=JSON.parse(JSON.stringify(i)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(i),i.length>0&&this.checkAll(i)},t.prototype.setValidCheckedNode=function(i){if(1===this.dataType){var n=this.fields,s=new Xe(this.treeData).executeLocal((new ni).where(n.id,"equal",i,!0));if(s[0]&&(this.setChildCheckState(s,i,s[0]),this.autoCheck)){for(var o=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,a=this.getChildNodes(this.treeData,o),l=0,h=0;h<a.length;h++){var u=a[h][this.fields.id].toString();-1!==this.checkedNodes.indexOf(u)&&l++}l===a.length&&-1===this.checkedNodes.indexOf(o)&&o&&this.checkedNodes.push(o)}}else if(2===this.dataType)for(var p=0;p<this.treeData.length;p++){if((this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():"")===i&&-1===this.checkedNodes.indexOf(i)){this.checkedNodes.push(i);break}var y=re(this.fields.child.toString(),this.treeData[p]);y&&this.setChildCheckState(y,i,this.treeData[p])}},t.prototype.setChildCheckState=function(i,n,s){var o,a=0;if(1===this.dataType){s&&(o=s[this.fields.id]?s[this.fields.id].toString():null);for(var l=0;l<i.length;l++){var h=i[l][this.fields.id]?i[l][this.fields.id].toString():null;s&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(h)&&this.checkedNodes.push(h),h===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(u=this.getChildNodes(this.treeData,h))&&this.setChildCheckState(u,n,s)}}else for(s&&(o=s[this.fields.id]?s[this.fields.id].toString():""),l=0;l<i.length;l++){var u,p=i[l][this.fields.id]?i[l][this.fields.id].toString():"";s&&o&&this.autoCheck&&-1!==this.checkedNodes.indexOf(o)&&-1===this.checkedNodes.indexOf(p)&&this.checkedNodes.push(p),p===n&&-1===this.checkedNodes.indexOf(n)&&this.checkedNodes.push(n),(u=re(this.fields.child.toString(),i[l]))&&this.setChildCheckState(u,n,i[l]),-1!==this.checkedNodes.indexOf(p)&&this.autoCheck&&a++,a===i.length&&-1===this.checkedNodes.indexOf(o)&&this.autoCheck&&this.checkedNodes.push(o)}},t.prototype.setIndeterminate=function(i){for(var n=0;n<i.length;n++)this.setValidCheckedNode(i[n])},t.prototype.updatePosition=function(i,n,s,o){if(1===this.dataType){var a=this.getDataPos(this.treeData,this.fields,i);if(this.treeData.splice(a,1,n),s){this.removeChildNodes(i);for(var l=0;l<o.length;l++)this.treeData.splice(a,0,o[l]),a++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,i,[n],void 0)},t.prototype.updateChildPosition=function(i,n,s,o,a){for(var l,h=0,u=i.length;h<u;h++){var p=re(n.id,i[h]);if(i[h]&&p&&p.toString()===s)return i[h]=o[0],!0;if("string"!=typeof n.child||f(re(n.child,i[h]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",i[h]))){var y=re("child",i[h]);if(void 0!==(l=this.updateChildPosition(y,this.getChildMapper(n),s,o,a)))break}}else{var m=re(n.child,i[h]);if(void 0!==(l=this.updateChildPosition(m,this.getChildMapper(n),s,o,a)))break}}return l},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(i,n,s,o,a,l,h){var S,u=this,p=this.fields.dataSource,m=[],y=this.getQuery(this.fields),C=this.fields.id,T={addedRecords:[],deletedRecords:[],changedRecords:[]},R=[];n?R=this.nodeType(n):s&&("string"==typeof s?R[0]=s.toString():"object"==typeof s&&(R[0]=s.getAttribute("data-uid").toString()));for(var P=0,O=R.length;P<O;P++)if(!f(this.getElement(R[P]))){var z=this.getNodeObject(R[P]);m.push(z)}switch(i){case"delete":1==n.length?S=p.remove(C,m[0],y.fromTable,y):(T.deletedRecords=m,S=p.saveChanges(T,C,y.fromTable,y)),S.then(function(ae){return u.deleteSuccess(R)}).catch(function(ae){return u.dmFailure(ae)});break;case"update":m[0][this.fields.text]=o,(S=p.update(C,m[0],y.fromTable,y)).then(function(ae){return u.editSucess(s,o,h)}).catch(function(ae){return u.dmFailure(ae,s,h)});break;case"insert":if(1==a.length)S=p.insert(a[0],y.fromTable,y);else{var U=[];for(P=0,O=a.length;P<O;P++)U.push(a[P]);T.addedRecords=U,S=p.saveChanges(T,C,y.fromTable,y)}S.then(function(ae){var me=u.getElement(s);u.addSuccess(a,me,l),u.preventExpand=!1}).catch(function(ae){return u.dmFailure(ae)})}},t.prototype.deleteSuccess=function(i){for(var n=0,s=i.length;n<s;n++){var o=this.getElement(i[n]);f(o)||this.removeNode(o)}this.updateInstance(),1===this.dataType&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent()},t.prototype.editSucess=function(i,n,s){var o=this.getElement(i),a=he("."+Q0,o);this.appendNewText(o,a,n,s)},t.prototype.addSuccess=function(i,n,s){var o,a=n?n.querySelector("."+No):null,l=this;n&&a&&a.classList.contains(cs)&&null===n.querySelector("."+dr)?l.renderChildNodes(n,null,function(){o=n.querySelector("."+dr),l.addGivenNodes(i,n,s,!0,o),l.triggerEvent()}):(this.addGivenNodes(i,n,s,!0),this.triggerEvent())},t.prototype.dmFailure=function(i,n,s){n&&this.updatePreviousText(n,s),this.trigger("actionFailure",{error:i})},t.prototype.updatePreviousText=function(i,n){var s=this.getElement(i),o=he("."+Q0,s);this.updateText(s,o,this.oldText,n)},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)switch(o[s]){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=n.checkedNodes,this.setCheckedNodes(i.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=i.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(n.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:f(i.expandedNodes)?[]:i.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),"None"!==this.expandOnType&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(!1===this.loadOnDemand&&!this.onLoaded){for(var h=this.element.querySelectorAll("li"),u=0;u<h.length;)"true"!==h[u].getAttribute("aria-expanded")&&this.renderChildNodes(h[u],!0,null,!0),u++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:i.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:i.fullRowNavigable},!0),this.listBaseOption.itemNavigable=i.fullRowNavigable,this.reRenderNodes()}},t.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.element.removeAttribute("tabindex"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),r.prototype.destroy.call(this)},t.prototype.addNodes=function(i,n,s,o){if(!f(i)){i=JSON.parse(JSON.stringify(i));var a=this.getElement(n);if(this.preventExpand=o,this.fields.dataSource instanceof Xe)this.isOffline?this.addSuccess(i,a,s):this.crudOperation("insert",null,n,null,i,s,this.preventExpand);else if(2===this.dataType)this.addGivenNodes(i,a,s);else{if(a)this.addGivenNodes(i,a,s);else{i=this.getSortedData(i);for(var l=0;l<i.length;l++){var h=re(this.fields.parentID,i[l]);a=h&&this.getElement(h.toString()),this.addGivenNodes([i[l]],a,s)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&a&&this.ensureParentCheckState(a),this.fields.dataSource instanceof Xe||(this.preventExpand=!1,this.triggerEvent())}},t.prototype.beginEdit=function(i){var n=this.getElement(i);f(n)||this.disabled||this.createTextbox(n,null)},t.prototype.checkAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!0)},t.prototype.collapseAll=function(i,n,s){f(i)?n>0?this.collapseByLevel(he("."+dr,this.element),n,s):this.collapseAllNodes(s):this.doGivenAction(i,vl,!1)},t.prototype.disableNodes=function(i){f(i)||this.doDisableAction(i)},t.prototype.enableNodes=function(i){f(i)||this.doEnableAction(i)},t.prototype.ensureVisible=function(i){var n=this.getElement(i);if(!f(n)){var s=this.parents(n,"."+yn);this.expandAll(s),setTimeout(function(){n.scrollIntoView(!0)},450)}},t.prototype.expandAll=function(i,n,s){f(i)?n>0?this.expandByLevel(he("."+dr,this.element),n,s):this.expandAllNodes(s):this.doGivenAction(i,cs,!0)},t.prototype.getAllCheckedNodes=function(){return this.checkedNodes},t.prototype.getDisabledNodes=function(){return this.disableNode},t.prototype.getNode=function(i){var n=this.getElement(i);return this.getNodeData(n,!0)},t.prototype.getTreeData=function(i){var n=this.getId(i);if(this.updatePersistProp(),f(n))return this.treeData;var s=this.getNodeObject(n);return f(s)?[]:[s]},t.prototype.moveNodes=function(i,n,s,o){var a=this.getElement(n);if(!f(a)){for(var l=0;l<i.length;l++){var h=this.getElement(i[l]);f(h)||a.isSameNode(h)||this.isDescendant(h,a)||(this.preventExpand=o,this.dropAsChildNode(h,a,this,s))}this.fields.dataSource instanceof Xe||(this.preventExpand=!1),this.triggerEvent()}},t.prototype.refreshNode=function(i,n){if(!f(i)&&!f(n)){var s,o=!1;1==this.dataType&&n.length>1?o=!0:2==this.dataType&&1===n.length&&(f(re(this.fields.child.toString(),n[0]))||(o=!0));var h,u,l=this.getElement(i);if(s=l?l.getAttribute("data-uid"):i?i.toString():null,this.refreshData=this.getNodeObject(s),n=JSON.parse(JSON.stringify(n)),1==this.dataType&&o){for(var p=0;p<n.length;p++)if(f(n[p][this.fields.parentID])){u=n[p],n.splice(p,1);break}h=de({},this.refreshData,u)}else h=de({},this.refreshData,n[0]);if(f(l))return void this.updatePosition(s,h,o,n);this.isRefreshed=!0;var m=parseFloat(l.getAttribute("aria-level")),y=hn.createListItemFromJson(this.createElement,[h],this.listBaseOption,m),C=he("."+dr,l),S=re(this.fields.child.toString(),h);if(o&&C||o&&!f(S)){var T=l.parentElement,R=Array.prototype.indexOf.call(T.childNodes,l);$e(l),T.insertBefore(y[0],T.childNodes[R]),this.updatePosition(s,h,o,n),o&&C&&this.expandAll([s])}else{var P=he("."+el,l),O=he("."+el,y[0]),N=he("div."+No,P),z=he("div."+No,O);N&&z&&(z.classList.contains(cs)&&N.classList.contains(vl)?(W([z],cs),B([z],vl)):z.classList.contains(vl)&&N.classList.contains(cs)?(W([z],vl),B([z],cs)):N.classList.contains("interaction")&&B([z],"interaction")),$e(P);var U=he("."+Mm,l);U.parentNode.insertBefore(O,U.nextSibling),this.updatePosition(s,h,o,n)}if(l=this.getElement(i),h[this.fields.tooltip]&&l.setAttribute("title",h[this.fields.tooltip]),h.hasOwnProperty(this.fields.htmlAttributes)&&h[this.fields.htmlAttributes]){var ae={};Qs(ae,h[this.fields.htmlAttributes]),ae.class?(B([l],ae.class.split(" ")),delete ae.class):qe(l,ae)}-1!==this.selectedNodes.indexOf(s)&&(l.setAttribute("aria-selected","true"),B([l],Pu)),this.isRefreshed=!1,this.triggerEvent()}},t.prototype.removeNodes=function(i){f(i)||(this.fields.dataSource instanceof Xe&&!this.isOffline?this.crudOperation("delete",i):this.deleteSuccess(i))},t.prototype.updateNode=function(i,n){var s=this;if(!f(i)&&!f(n)&&this.allowEditing){var o=this.getElement(i);if(!f(o)){var a=he("."+Q0,o);this.updateOldText(o);var l=this.getEditEvent(o,null,null);this.trigger("nodeEditing",l,function(h){h.cancel||(s.fields.dataSource instanceof Xe&&!s.isOffline?s.crudOperation("update",null,i,n,null,null,!1):s.appendNewText(o,a,n,!1))})}}},t.prototype.uncheckAll=function(i){this.showCheckBox&&this.doCheckBoxAction(i,!1)},Bi([D(!1)],t.prototype,"allowDragAndDrop",void 0),Bi([D(!1)],t.prototype,"allowEditing",void 0),Bi([D(!1)],t.prototype,"allowMultiSelection",void 0),Bi([D(!1)],t.prototype,"allowTextWrap",void 0),Bi([Cn({},Ede)],t.prototype,"animation",void 0),Bi([D()],t.prototype,"checkedNodes",void 0),Bi([D("")],t.prototype,"cssClass",void 0),Bi([D(!1)],t.prototype,"disabled",void 0),Bi([D(null)],t.prototype,"dragArea",void 0),Bi([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),Bi([D(!1)],t.prototype,"enablePersistence",void 0),Bi([D()],t.prototype,"expandedNodes",void 0),Bi([D("Auto")],t.prototype,"expandOn",void 0),Bi([Cn({},Sde)],t.prototype,"fields",void 0),Bi([D(!0)],t.prototype,"fullRowSelect",void 0),Bi([D(!0)],t.prototype,"loadOnDemand",void 0),Bi([D()],t.prototype,"locale",void 0),Bi([D()],t.prototype,"nodeTemplate",void 0),Bi([D()],t.prototype,"selectedNodes",void 0),Bi([D("None")],t.prototype,"sortOrder",void 0),Bi([D(!1)],t.prototype,"showCheckBox",void 0),Bi([D(!0)],t.prototype,"autoCheck",void 0),Bi([D(!1)],t.prototype,"fullRowNavigable",void 0),Bi([K()],t.prototype,"actionFailure",void 0),Bi([K()],t.prototype,"created",void 0),Bi([K()],t.prototype,"dataBound",void 0),Bi([K()],t.prototype,"dataSourceChanged",void 0),Bi([K()],t.prototype,"drawNode",void 0),Bi([K()],t.prototype,"destroyed",void 0),Bi([K()],t.prototype,"keyPress",void 0),Bi([K()],t.prototype,"nodeChecked",void 0),Bi([K()],t.prototype,"nodeChecking",void 0),Bi([K()],t.prototype,"nodeClicked",void 0),Bi([K()],t.prototype,"nodeCollapsed",void 0),Bi([K()],t.prototype,"nodeCollapsing",void 0),Bi([K()],t.prototype,"nodeDragging",void 0),Bi([K()],t.prototype,"nodeDragStart",void 0),Bi([K()],t.prototype,"nodeDragStop",void 0),Bi([K()],t.prototype,"nodeDropped",void 0),Bi([K()],t.prototype,"nodeEdited",void 0),Bi([K()],t.prototype,"nodeEditing",void 0),Bi([K()],t.prototype,"nodeExpanded",void 0),Bi([K()],t.prototype,"nodeExpanding",void 0),Bi([K()],t.prototype,"nodeSelected",void 0),Bi([K()],t.prototype,"nodeSelecting",void 0),e=Bi([an],t)}(ur),qf="",y6="",Lm=[],WN="";function ew(r,t,e,i,n,s,o){var a=t;i=i??!0;var l={item:null,index:null};if(r&&r.length){var h=r.length,u=i?r.toLocaleLowerCase():r;u=function jde(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(u);for(var p=function(S,T){var O,R=T[S],P=void 0;if(t&&n){var N=R,z=s.text.split(".");n.filter(function(U){Array.prototype.slice.call(z).forEach(function(ae){("object"===o&&-1!==N.textContent.toString().indexOf(U[ae])&&N.getAttribute("data-value")===U[s.value]||"string"===o&&-1!==N.textContent.toString().indexOf(U))&&(O="object"===o?U[ae]:U)})})}if(P=n&&O?(i?O.toLocaleLowerCase():O).replace(/^\s+|\s+$/g,""):(i?R.textContent.toLocaleLowerCase():R.textContent).replace(/^\s+|\s+$/g,""),"Equal"===e&&P===u||"StartsWith"===e&&P.substr(0,h)===u||"EndsWith"===e&&P.substr(P.length-u.length)===u||"Contains"===e&&new RegExp(u,"g").test(P))return l.item=R,l.index=S,{value:{item:R,index:S}}},m=0,y=a;m<y.length;m++){var C=p(m,y);if("object"==typeof C)return C.value}return l}return l}function Gy(r,t,e,i){if(""!==t){var n=e?"gim":"gm";t=/^[a-zA-Z0-9- ]*$/.test(t)?t:t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),qY(r,new RegExp("StartsWith"===i?"^("+t+")":"EndsWith"===i?"("+t+")$":"("+t+")",n))}}function qY(r,t){for(var e=0;r.childNodes&&e<r.childNodes.length;e++){if(3===r.childNodes[e].nodeType&&""!==r.childNodes[e].textContent.trim()){var i=r.childNodes[e].nodeValue.trim().replace(t,'<span class="e-highlight">$1</span>');r.childNodes[e].nodeValue="",r.innerHTML=r.innerHTML.trim()+i;break}qY(r.childNodes[e],t)}}function UY(r){for(var t=r.querySelectorAll(".e-highlight"),e=t.length-1;e>=0;e--){var i=t[e].parentNode,n=document.createTextNode(t[e].textContent);i.replaceChild(n,t[e])}}var WY=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zs=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},GN=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return WY(t,r),zs([D()],t.prototype,"text",void 0),zs([D()],t.prototype,"value",void 0),zs([D()],t.prototype,"iconCss",void 0),zs([D()],t.prototype,"groupBy",void 0),zs([D()],t.prototype,"htmlAttributes",void 0),t}(Wi),et_root="e-dropdownbase",et_focus="e-item-focus",et_li="e-list-item",et_group="e-list-group-item",KN=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.preventChange=!1,n.isAngular=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n}return WY(t,r),t.prototype.getPropObject=function(e,i,n){var s=new Object,o=new Object;s[e]=i[e],o[e]=n[e];var l=new Object;return l.newProperty=s,l.oldProperty=o,l},t.prototype.getValueByText=function(e,i,n){var s=null;return f(this.listData)||(s=this.checkValueCase(e,!!i,n)),s},t.prototype.checkValueCase=function(e,i,n,s){var o=this,a=null;s&&(a=e);var l=this.listData,h=this.fields,u=this.typeOfData(l).typeof;if("string"===u||"number"===u||"boolean"===u)for(var p=0,m=l;p<m.length;p++){var y=m[p];f(y)||(n?a=this.checkingAccent(String(y),e,i):i?this.checkIgnoreCase(String(y),e)&&(a=this.getItemValue(String(y),e,i)):this.checkNonIgnoreCase(String(y),e)&&(a=this.getItemValue(String(y),e,i,s)))}else if(i)l.filter(function(S){!f(re(h.value,S))&&o.checkIgnoreCase(re(h.text,S).toString(),e)&&(a=re(h.value,S))});else if(s){var C=null;C=a,l.filter(function(S){var T=re(h.value,S);!f(T)&&!f(a)&&T.toString()===C.toString()&&(a=re(h.text,S))})}else l.filter(function(S){o.checkNonIgnoreCase(re(h.text,S),e)&&(a=re(h.value,S))});return a},t.prototype.checkingAccent=function(e,i,n){var s=Ye.ignoreDiacritics(String(e)),o=Ye.ignoreDiacritics(i.toString()),a=null;return n?this.checkIgnoreCase(s,o)&&(a=this.getItemValue(String(e),i,n)):this.checkNonIgnoreCase(String(e),i)&&(a=this.getItemValue(String(e),i,n)),a},t.prototype.checkIgnoreCase=function(e,i){return String(e).toLowerCase()===i.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,i){return String(e)===i.toString()},t.prototype.getItemValue=function(e,i,n,s){var l=this.typeOfData(this.listData).typeof;return s?e.toString():n?"string"===l?String(e):this.getFormattedValue(String(e)):"string"===l?i:this.getFormattedValue(i)},t.prototype.templateCompiler=function(e){var i=!1;if(e)try{i=!!Tt(e,document).length}catch{i=!1}return i},t.prototype.l10nUpdate=function(e){var i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var n=e?this.actionFailureTemplate:this.noRecordsTemplate,o=e?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var h=qi(this.templateCompiler(n)?he(n,document).innerHTML.trim():n)({},this,e?"actionFailureTemplate":"noRecordsTemplate",o,this.isStringTemplate,null,i);if(h&&h.length>0)for(var u=0;u<h.length;u++)i.appendChild(h[u]);this.renderReactTemplates()}else{var m=new $r(this.getLocaleName(),{},this.locale);this.l10n=""!==m.getConstant("actionFailureTemplate")?m:new $r("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var y=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){var C=this.createElement("li");C.textContent=y,i.appendChild(C),C.classList.add("e-list-nrt"),C.setAttribute("role","option")}else i.innerHTML=y}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=this.typeOfData(this.listData);if("number"==typeof re(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(e);if("boolean"==typeof re(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===e||""+e=="true"}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?B(this.enableRtlElements,"e-rtl"):W(this.enableRtlElements,"e-rtl")},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var i=hn.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],n={},s=0;s<this.element.attributes.length;s++)-1===i.indexOf(this.element.attributes[s].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[s].name)&&(n[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));de(n,e,n),this.setProperties({htmlAttributes:n},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,i={value:"value",text:"text"},n=[],s=e.querySelectorAll("select>optgroup"),o=e.querySelectorAll("select>option");if(this.getJSONfromOption(n,o,i),s.length){for(var a=0;a<s.length;a++){var l=s[a],h={};h[i.text]=l.label,h.isHeader=!0;var u=l.querySelectorAll("option");n.push(h),this.getJSONfromOption(n,u,i)}e.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(n,i)},t.prototype.updateFields=function(e,i,n,s,o){var a={fields:{text:e,value:i,groupBy:f(n)?this.fields&&this.fields.groupBy:n,htmlAttributes:f(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:f(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)},t.prototype.getJSONfromOption=function(e,i,n){for(var s=0,o=i;s<o.length;s++){var a=o[s],l={};l[n.text]=a.innerText,l[n.value]=f(a.getAttribute(n.value))?a.innerText:a.getAttribute(n.value),e.push(l)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,i,n,s){var a,o=this;i=i||this.fields,this.isActive=!0;var l={cancel:!1,data:e,query:n};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",l,function(h){if(!h.cancel)if(o.showSpinner(),e instanceof Xe){if(o.isRequested=!0,o.isDataFetched)return void o.emptyDataRequest(i);h.data.executeQuery(o.getQuery(h.query)).then(function(y){o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",y,function(C){if(!C.cancel){var S=C.result;0===S.length&&(o.isDataFetched=!0),a=o.renderItems(S,i),o.groupTemplate&&o.renderGroupTemplate(a),o.onActionComplete(a,S,C),o.isRequested=!1,o.bindChildItems(S,a,i,C)}})}).catch(function(y){o.isRequested=!1,o.onActionFailure(y),o.hideSpinner()})}else{var u=new Xe(h.data),m={cancel:!1,result:o.getQuery(h.query).executeLocal(u)};o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",m,function(y){y.cancel||(a=o.renderItems(y.result,i),o.onActionComplete(a,y.result,s),o.groupTemplate&&o.renderGroupTemplate(a),o.bindChildItems(y.result,a,i),setTimeout(function(){"multiselect"===o.getModuleName()&&null!=o.itemTemplate&&a.childElementCount>0&&(a.children[0].childElementCount>0||o.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&o.updateDataList()}))})}})},t.prototype.bindChildItems=function(e,i,n,s){var o=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){xt(o.remainingItems(o.sortedData,n),i),o.liCollections=o.list.querySelectorAll("."+et_li),o.updateListValues(),o.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,i,n,s){var o=null;if(e)for(var a=[].slice.call(e.querySelectorAll(i)),l=0;l<a.length;l++)if(a[l].getAttribute(n)===s+""){o=a[l];break}return o},t.prototype.raiseDataBound=function(e,i){this.hideSpinner(),this.trigger("dataBound",{items:e,e:i})},t.prototype.remainingItems=function(e,i){var n=new Xe(e).executeLocal((new ni).skip(100));if(this.itemTemplate){var s=this.templateListItem(n,i);return[].slice.call(s.childNodes)}var o=this.typeOfData(n).typeof;return"string"===o||"number"===o||"boolean"===o?hn.createListItemFromArray(this.createElement,n,!0,this.listOption(n,i),this):hn.createListItemFromJson(this.createElement,n,this.listOption(n,i),1,!0,this)},t.prototype.emptyDataRequest=function(e){var i=[];this.onActionComplete(this.renderItems(i,e),i),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),B([this.list],"e-nodata")},t.prototype.onActionComplete=function(e,i,n){if(this.listData=i,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=f(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var s=0;s<e.childElementCount;s++)e.children[s].classList.contains("e-list-group-item")&&(f(e.children[s].innerHTML)||""==e.children[s].innerHTML)&&B([e.children[s]],"e-hide-group-header");f(this.list)||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+et_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},t.prototype.postRender=function(e,i,n){var s=e.querySelector("."+et_li),o=e.querySelector(".e-active");s&&!o&&s.classList.add(et_focus),i.length<=0?(this.l10nUpdate(),B([e],"e-nodata")):e.classList.remove("e-nodata")},t.prototype.getQuery=function(e){return e||(this.query?this.query:new ni)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+et_group)){var i=this.dataSource,n={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+et_group);if(this.templateCompiler(this.groupTemplate)){var a=he(this.groupTemplate,document).innerHTML.trim(),l=hn.renderGroupTemplate(a,i,this.fields.properties,s,n,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else if(l=hn.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,s,n,this),this.isGroupChecking)for(h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]});this.renderReactTemplates()}},t.prototype.createListItems=function(e,i){e&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=hn.groupDataSource(e,i.properties,this.sortOrder)),B([this.list],"e-dd-group")):e=this.getSortedDataSource(e);var n=this.listOption(e,i),s=e.length>100?new Xe(e).executeLocal((new ni).take(100)):e;return this.sortedData=e,hn.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,n,!0,this)},t.prototype.listOption=function(e,i){var n=!f(i.iconCss),s=f(i.properties)?i:i.properties;return de({},null!==i.text||null!==i.value?{fields:s,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)},t.prototype.setFloatingHeader=function(e){!f(this.list)&&!this.list.classList.contains("e-nodata")&&(f(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(et_group)||(this.fixedHeaderElement.style.display="none"),ao([this.fixedHeaderElement],this.list),this.setFixedHeader()),!f(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e){for(var i=f(e)?this.list:e.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),s=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),a=s;a>-1;a--){if(!f(o[a])&&o[a].classList.contains(et_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(e,i){var n;if(this.itemTemplate&&e){var s=e;s&&i.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=hn.groupDataSource(s,i.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var o=s.length>100?new Xe(s).executeLocal((new ni).take(100)):s;n=this.templateListItem("autocomplete"===this.getModuleName()?o:s,i)}else n=this.createListItems(e,i);return n},t.prototype.templateListItem=function(e,i){var n=this.listOption(e,i);if(n.templateID=this.itemTemplateId,n.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var o=he(this.itemTemplate,document).innerHTML.trim();return hn.renderContentTemplate(this.createElement,o,e,i.properties,n,this)}return hn.renderContentTemplate(this.createElement,this.itemTemplate,e,i.properties,n,this)},t.prototype.typeOfData=function(e){for(var n=0;!f(e)&&n<e.length;n++)if(!f(e[n])&&!f("string"==typeof e[n]||"number"==typeof e[n]||"boolean"==typeof e[n]?e[n]:re(this.fields.value?this.fields.value:"value",e[n])))return{typeof:typeof e[n],item:e[n]};return{typeof:null,item:null}},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));var a=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=a.toString()+"px",Ht(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+et_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(e).typeof||"number"===this.typeOfData(e).typeof||"boolean"===this.typeOfData(e).typeof)&&(i=""),e=hn.getDataSource(e,hn.addSorting(this.sortOrder,i))}return e},t.prototype.getIndexByValue=function(e){for(var i,n=this.getItems(),s=0;s<n.length;s++)if(!f(e)&&n[s].getAttribute("data-value")===e.toString()){i=s;break}return i},t.prototype.dispatchEvent=function(e,i){var n=document.createEvent("HTMLEvents");n.initEvent(i,!1,!0),e.dispatchEvent(n)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},t.prototype.resetList=function(e,i,n,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!f(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),e="combobox"===this.getModuleName()&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,i,n,s))},t.prototype.updateSelectElementData=function(e){e&&f(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,i){this.isDataFetched=!1;for(var n={},s=0;e.length>s;s++)i[e[s]]&&"fields"===e[s]?(this.setFields(),n[e[s]]=i[e[s]]):i[e[s]]&&(n[e[s]]=i[e[s]]);Object.keys(n).length>0&&(-1===Object.keys(n).indexOf("dataSource")&&(n.dataSource=this.dataSource),this.updateDataSource(n))},t.prototype.onPropertyChanged=function(e,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+et_group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!f(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}},t.prototype.render=function(e,i){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(et_root),this.setFields(),this.rippleFun=Lr(this.list,{duration:300,selector:"."+et_li});var s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!f(s))&&!this.isGroupChecking&&A.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),W([this.element],et_root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),i||this.initialize(e)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+et_li)},t.prototype.addItem=function(e,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&f(i)){var n=[].slice.call(this.listData);n.push(e),n=this.getSortedDataSource(n),this.fields.groupBy&&(n=hn.groupDataSource(n,this.fields.properties,this.sortOrder)),i=n.indexOf(e)}var a,s=this.getItems().length,o=this.list.querySelector(".e-active");e=e instanceof Array?e:[e],a=f(i)||i<0||i>s-1?s:i;var l=this.fields;e&&l.groupBy&&(e=hn.groupDataSource(e,l.properties));for(var h=[],u=0;u<e.length;u++){var p=e[u],m=p.isHeader,y=this.createElement("li",{className:m?et_group:et_li,id:"option-add-"+u}),C=p instanceof Object?re(l.text,p):p;if(m&&(y.innerText=C),this.itemTemplate&&!m){var R=qi(this.templateCompiler(this.itemTemplate)?he(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(p,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,y);R&&xt(R,y)}else m||y.appendChild(document.createTextNode(C));y.setAttribute("data-value",p instanceof Object?re(l.value,p):p),y.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:y}),h.push(y),this.listData.push(p),"None"===this.sortOrder&&f(i)&&0===a&&(a=null),this.updateActionCompleteData(y,p,a),this.trigger("beforeItemRender",{element:y,item:p})}if(0===s&&f(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=h,xt(h,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");var P=[];for(u=0;u<e.length;u++){for(var O=this.ulElement.querySelectorAll(".e-list-group-item"),N=0;N<O.length;N++)P[N]=O[N].innerText;if(P.indexOf(h[u].innerText)>-1&&l.groupBy){for(N=0;N<O.length;N++)if(P[N]===h[u].innerText){this.ulElement.insertBefore(h[u+1],"None"===this.sortOrder?O[N+1]:this.ulElement.childNodes[i]),u+=1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(h[u],this.liCollections[a]):this.ulElement.appendChild(h[u]);var z=[].slice.call(this.liCollections);z.splice(a,0,h[u]),this.liCollections=z,a+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(o||0===i)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(e.getAttribute(s[o])){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,i,n){},t.prototype.updateAddItemList=function(e,i){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!f(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(var n=0,s=this.listData;n<s.length;n++)if(!f(o=s[n])&&o===e)return o}else for(var a=0,l=this.listData;a<l.length;a++){var o;if(!f(o=l[a])&&re(this.fields.value?this.fields.value:"value",o)===e)return o}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(A.remove(this.list,"scroll",this.setFloatingHeader),f(this.rippleFun)||this.rippleFun(),we(this.list)),r.prototype.destroy.call(this)},zs([Cn({text:null,value:null,iconCss:null,groupBy:null},GN)],t.prototype,"fields",void 0),zs([D(!1)],t.prototype,"enablePersistence",void 0),zs([D(null)],t.prototype,"itemTemplate",void 0),zs([D(null)],t.prototype,"groupTemplate",void 0),zs([D("No records found")],t.prototype,"noRecordsTemplate",void 0),zs([D("Request failed")],t.prototype,"actionFailureTemplate",void 0),zs([D("None")],t.prototype,"sortOrder",void 0),zs([D(!0)],t.prototype,"enabled",void 0),zs([D([])],t.prototype,"dataSource",void 0),zs([D(null)],t.prototype,"query",void 0),zs([D("StartsWith")],t.prototype,"filterType",void 0),zs([D(!0)],t.prototype,"ignoreCase",void 0),zs([D(1e3)],t.prototype,"zIndex",void 0),zs([D(!1)],t.prototype,"ignoreAccent",void 0),zs([D()],t.prototype,"locale",void 0),zs([K()],t.prototype,"actionBegin",void 0),zs([K()],t.prototype,"actionComplete",void 0),zs([K()],t.prototype,"actionFailure",void 0),zs([K()],t.prototype,"select",void 0),zs([K()],t.prototype,"dataBound",void 0),zs([K()],t.prototype,"created",void 0),zs([K()],t.prototype,"destroyed",void 0),zs([an],t)}(ur),epe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),co=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Di={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:et_li,disable:"e-disabled",base:et_root,focus:et_focus,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},tpe={container:null,buttons:[]},Ky=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isAngular=!1,n}return epe(t,r),t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),r.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(e,i){r.prototype.render.call(this,e,i),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?ai(e,["e-label-top"],["e-label-bottom"]):ai(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!f(this.ulElement)){var e=this.ulElement.querySelector("."+Di.li);e&&e.classList.add(Di.focus)}},t.prototype.clearAll=function(e,i){this.previousItemData=f(this.itemData)?null:this.itemData,(f(i)||!f(i)&&(f(i.dataSource)||!(i.dataSource instanceof Xe)&&0===i.dataSource.length))&&(this.isActive=!0,this.resetSelection(i));var n=this.getItemData();this.previousValue!==n.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){this.list&&(f(e)||!f(e.dataSource)&&(e.dataSource instanceof Xe||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(we(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&B([this.inputWrapper.container],s.split(" "))}else if("disabled"===n&&"disabled"===this.htmlAttributes[n])this.enabled=!1,this.setEnable();else if("readonly"!==n||f(this.htmlAttributes[n]))if("style"===n)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[n]);else{var o=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&o.push("tabindex"),["name","required"].indexOf(n)>-1||0===n.indexOf("data")?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):o.indexOf(n)>-1?"placeholder"===n?ke.setPlaceholder(this.htmlAttributes[n],this.inputElement):this.inputElement.setAttribute(n,this.htmlAttributes[n]):this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){ke.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){ke.setEnabled(this.enabled,this.inputElement),this.enabled?(W([this.inputWrapper.container],Di.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),B([this.inputWrapper.container],Di.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var i,s=0,o=this.getItems();s<o.length;s++){var a=o[s];if(this.getFormattedValue(a.getAttribute("data-value"))===e){i=a;break}}return i},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof Xe?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(f(this.value))if(this.text&&f(this.value)){var e=this.getElementByText(this.text);if(f(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var i=e.relatedTarget,n=e.target,s=this.isPreventBlur;if(this.isPreventBlur=!1,s&&!this.isDocumentClick&&this.isPopupOpen&&(!f(n)||!this.isFilterLayout()&&f(i)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Di.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&n.classList.contains(Di.inputFocus))||f(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&n!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&B([this.inputWrapper.clearButton],Di.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()},t.prototype.resetValueHandler=function(e){var i=j(this.inputElement,"form");if(i&&e.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=n}},t.prototype.wireEvent=function(){A.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),A.add(this.inputWrapper.container,"focus",this.focusIn,this),A.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){A.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=j(this.inputElement,"form");e&&A.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Hn(this.targetElement(),X.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&A.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){this.targetElement()&&A.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&j(this.inputElement,"form");e&&A.remove(e,"reset",this.resetValueHandler),X.isDevice||this.keyboardModule.destroy(),this.showClearButton&&A.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?B([this.inputWrapper.clearButton],Di.clearIconHide):W([this.inputWrapper.clearButton],Di.clearIconHide))},t.prototype.wireListEvents=function(){A.add(this.list,"click",this.onMouseClick,this),A.add(this.list,"mouseover",this.onMouseOver,this),A.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){!this.isRequested&&!f(this.list)&&!f(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var n=j(e.target,"."+et_li);this.isValidLI(n)&&(this.setSelection(n,e),X.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,e))},t.prototype.onMouseOver=function(e){var i=j(e.target,"."+et_li);this.setHover(i)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),B([e],"e-hover"))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&W(e,"e-hover")}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var i=function zde(r,t,e,i,n){var s;if(qf+=String.fromCharCode(r),setTimeout(function(){qf=""},1e3),qf=i?qf.toLowerCase():qf,WN===n&&y6===qf){for(var o=0;o<Lm.length;o++)if(Lm[o].classList.contains("e-active")){s=o;break}return Lm[s+=1]?Lm[s]:Lm[0]}var a=t,l=qf.length,u=void 0;o=e=e?e+1:0,Lm=[];do{o===a.length&&(o=-1),u=a[s=-1===o?0:o],(i?u.innerText.toLowerCase():u.innerText).substr(0,l)===qf&&Lm.push(a[s]),o++}while(o!==e);return y6=qf,WN=n,Lm[0]}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);f(i)||(this.setSelection(i,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],Di.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){f(this.spinnerElement)&&(this.spinnerElement=X.isDevice&&!f(this.filterInputObj)&&this.filterInputObj.buttons[1]||!f(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],B([this.spinnerElement],Di.disableIcon),bc({target:this.spinnerElement,width:X.isDevice?"16px":"14px"},this.createElement),Ul(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var i="pageUp"===e.action||"pageDown"===e.action,n="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var o="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||i||n)||this.isPopupOpen)&&!this.readonly){var a="tab"===e.action||"close"===e.action;if(void 0===this.list&&!this.isRequested&&!a&&"escape"!==e.action&&(this.searchKeyEvent=e,this.renderList(e)),f(this.list)||!f(this.liCollections)&&o&&0===this.liCollections.length||this.isRequested)return;switch((a&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!o&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){var i=this.list.querySelector("."+Di.focus);if(this.isSelectFocusItem(i))this.setSelection(i,e);else if(!f(this.liCollections)){var n="down"===e.action?this.activeIndex+1:this.activeIndex-1,s=0;"autocomplete"===this.getModuleName()&&(s="down"===e.action&&f(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n);var o=f(this.activeIndex)?this.liCollections[s]:this.liCollections[n];f(o)||this.setSelection(o,e)}e.preventDefault()},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName()){var i;if(i="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===i)return;this.setSelection(this.liCollections[i],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),f(this.list)||!f(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var i=this.list.querySelector("."+Di.focus);i&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!f(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,i){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],i)},t.prototype.pageDownSelection=function(e,i){var n=this.getItems();this.setSelection(e<=n.length?this.liCollections[e-1]:this.liCollections[n.length-1],i)},t.prototype.unWireEvent=function(){A.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),A.remove(this.inputWrapper.container,"keypress",this.onSearch),A.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){A.remove(this.list,"click",this.onMouseClick),A.remove(this.list,"mouseover",this.onMouseOver),A.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var i=e.target;if(!f(this.popupObj)&&j(i,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))i!==this.inputElement&&(!this.allowFiltering||i!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!X.isDevice||i!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(X.isIE||"edge"===X.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(Di.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var n=this.isRequested;this.isInteracted=!1,this.hidePopup(e),n||(this.onFocusOut(),this.inputWrapper.container.classList.remove(Di.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Di.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(Di.disable)&&this.inputWrapper.clearButton!==e.target){var i=e.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&"combobox"!==this.getModuleName()&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var n=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){n.cloneElements(),n.isSecondClick=!0},s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,i,n,s){var o=this;this.removeSelection(),e.classList.add("e-active"),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),l=this.getDataByValue(a);if(this.initial||n||f(i))this.selectEventCallback(e,i,n,l,a),s&&this.setSelectOptions(e,i);else{var h=this.detachChanges(l);this.isSelected=!0,this.trigger("select",{e:i,item:e,itemData:h,isInteracted:!!i,cancel:!1},function(p){p.cancel?e.classList.remove("e-active"):(o.selectEventCallback(e,i,n,l,a),s&&o.setSelectOptions(e,i))})}},t.prototype.selectEventCallback=function(e,i,n,s,o){this.previousItemData=f(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;var a=this.list.querySelector("."+et_focus);a&&W([a],et_focus),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(o)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var i=this.getItemData();ke.setValue(null===i.value?null:i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!f(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(we(this.valueTempElement),this.inputElement.style.display="block");var n=Di.clearIcon,o=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+n);return this.isFiltering()&&o&&o.style.removeProperty("visibility"),this.previousValue===i.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,i){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,i,!1,!0):this.setSelectOptions(e,i)},t.prototype.setSelectOptions=function(e,i){this.list&&this.removeHover(),this.previousSelectedLI=f(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(i)&&((!this.isPopupOpen&&!f(e)||this.isPopupOpen&&!f(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!f(this.selectedLI)&&null!==this.itemData&&(!i||"click"!==i.type)&&this.setScrollPosition(i),"mozilla"!==X.info.name&&(qe(this.targetElement(),{"aria-label":this.inputElement.value}),qe(this.targetElement(),{"aria-describedby":""!=this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),!this.isPopupOpen||f(this.ulElement)||f(this.ulElement.getElementsByClassName("e-item-focus")[0])?this.isPopupOpen&&!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-active")[0])&&qe(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):qe(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.dropdownCompiler=function(e){var i=!1;if(e)try{i=!!document.querySelectorAll(e).length}catch{i=!1}return i},t.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(we(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Di.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var n=qi(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.valueTempElement.appendChild(n[s]);this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll(".e-active");e.length&&(W(e,"e-active"),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var i,n,s,e=this.fields;return f(i=this.itemData)||(n=re(e.value,i),s=re(e.text,i)),{value:f(i)||Jt(n)?i:n,text:f(i)||Jt(n)?i:s}},t.prototype.onChangeEvent=function(e){var i=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:i.text,value:i.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=f(this.text)?"":this.text,!this.initial){var n,i=this.detachChanges(this.itemData);n="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:n,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(f(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&W([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(f(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString());else{var e;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,"autocomplete"===this.getModuleName()&&!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-item-focus")[0])&&qe(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=e?e.clone():this.query?this.query.clone():new ni;var n=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;i.where((this.dataSource instanceof Xe||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",n,this.typedString,this.ignoreCase,this.ignoreAccent)}else i=e?e.clone():this.query?this.query.clone():new ni;return i},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Di.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Di.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(o,a,l){s.cancel||(i.isCustomFilter=!0,i.filteringAction(o,a,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",s,function(o){!o.cancel&&!i.isCustomFilter&&!o.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},t.prototype.filter=function(e,i,n){this.isCustomFilter=!0,this.filteringAction(e,i,n)},t.prototype.filteringAction=function(e,i,n){f(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,i=""===this.filterInput.value.trim()?null:i,this.resetList(e,n,i)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!f(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=e.querySelector("."+Di.filterParent)?e.querySelector("."+Di.filterParent):this.createElement("span",{className:Di.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Di.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var n=!1;return X.isDevice&&(n=!0),this.filterInputObj=ke.createInput({element:this.filterInput,buttons:n?[Di.backIcon,Di.filterBarClearIcon]:[Di.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),f(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?B([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&B([this.filterInputObj.container],"e-filled")),xt([this.filterInputObj.container],i),ao([i],e),qe(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Di.clearIcon),!X.isDevice&&this.clearIconElement&&(A.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new Hn(this.filterInput,X.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),A.add(this.filterInput,"input",this.onInput,this),A.add(this.filterInput,"keyup",this.onFilterUp,this),A.add(this.filterInput,"keydown",this.onFilterDown,this),A.add(this.filterInput,"blur",this.onBlurHandler,this),A.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return tpe},t.prototype.onInput=function(e){this.isValidKey=!0,X.isDevice&&"mozilla"===X.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.searchLists(e)})},t.prototype.onActionFailure=function(e){r.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(e,i,n,s){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(r.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!f(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!f(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,f(e)||qe(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initRemoteRender=!1,this.value&&this.dataSource instanceof Xe){var l=f(this.fields.value)?this.fields.text:this.fields.value,h=this.fields.value.split(".");i.some(function(p){return f(p[l])&&h.length>1?o.checkFieldValue(p,h)===o.value:p[l]===o.value})?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new Mn(l,"equal",this.value))).then(function(p){p.result.length>0&&o.addItem(p.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||f(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Xe||!f(this.dataSource)&&!f(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&("EJS-COMBOBOX"===this.element.tagName||"EJS-DROPDOWNLIST"===this.element.tagName)&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.addNewItem(i,a),f(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup(n)}},t.prototype.checkFieldValue=function(e,i){var n=e;return i.forEach(function(s){n=n[s]}),n},t.prototype.updateActionCompleteDataValues=function(e,i){this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,i){var n=this;if(!f(this.itemData)&&!f(i)){var s=this.getItemData().value;e.some(function(a){return("string"==typeof a||"number"==typeof a)&&a===s||re(n.fields.value,a)===s})||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,i,n){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,i,n)},0):this.actionCompleteDataUpdate(e,i,n))},t.prototype.actionCompleteDataUpdate=function(e,i,n){null!=n?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[n]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var i=this.findListElement(this.list,"li","data-value",e);this.selectedLI=i,this.activeItem(i),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+et_li).classList.add(Di.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+Di.focus);e&&e.length&&W(e,Di.focus)},t.prototype.renderPopup=function(e){var i=this;this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},function(s){if(s.cancel)i.beforePopupOpen=!1;else{var o=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(null!=i.cssClass?i.cssClass:"")}),a=i.setSearchBox(o);if(i.listHeight=ut(i.popupHeight),i.headerTemplate&&i.setHeaderTemplate(o),xt([i.list],o),i.footerTemplate&&i.setFooterTemplate(o),document.body.appendChild(o),o.style.visibility="hidden","auto"!==i.popupHeight){if(i.searchBoxHeight=0,f(a.container)||(i.searchBoxHeight=a.container.parentElement.getBoundingClientRect().height,i.listHeight=(parseInt(i.listHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:o.querySelector(".e-ddl-header");var l=Math.round(i.header.getBoundingClientRect().height);i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"}i.footerTemplate&&(i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer"),l=Math.round(i.footer.getBoundingClientRect().height),i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"),i.list.style.maxHeight=(parseInt(i.listHeight,10)-2).toString()+"px",o.style.maxHeight=ut(i.popupHeight)}else o.style.height="auto";var h=0,u=void 0;if(!f(i.selectedLI)&&!f(i.activeIndex)&&i.activeIndex>=0?i.setScrollPosition():i.list.scrollTop=0,X.isDevice&&!i.allowFiltering&&("dropdownlist"===i.getModuleName()||i.isDropDownClick&&"combobox"===i.getModuleName())){h=i.getOffsetValue(o);var p=i.isEmptyList()?i.list:i.liCollections[0];u=-(parseInt(getComputedStyle(p).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10))}i.getFocusElement(),i.createPopup(o,h,u),i.checkCollision(o),X.isDevice&&(i.popupObj.element.classList.add(Di.device),("dropdownlist"===i.getModuleName()||"combobox"===i.getModuleName()&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&(i.popupObj.element.classList.add(Di.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),qe(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),B([document.body,i.popupObj.element],Di.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=a.container.querySelector(".e-back-icon"),i.clearIconElement=a.container.querySelector("."+Di.clearIcon),A.add(i.backIconElement,"click",i.clickOnBackIcon,i),A.add(i.clearIconElement,"click",i.clearText,i))),o.style.visibility="visible",B([o],"e-popup-close");for(var y=0,C=i.popupObj.getScrollableParent(i.inputWrapper.container);y<C.length;y++)A.add(C[y],"scroll",i.scrollHandler,i);f(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,qe(i.targetElement(),{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.inputElement.setAttribute("aria-expanded","true"),B([i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container],[Di.inputFocus]),i.beforePopupOpen=!0,i.trigger("open",{popup:i.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}},function(N){N.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(B([i.inputWrapper.container],[Di.iconAnimation]),i.renderReactTemplates(),i.popupObj.show(new hs(N.animation),1e3===i.zIndex?i.element:null))})}})},t.prototype.checkCollision=function(e){(!X.isDevice||X.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Ep(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())},t.prototype.getOffsetValue=function(e){var i=getComputedStyle(e),n=parseInt(i.borderTopWidth,10),s=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(n+s)},t.prototype.createPopup=function(e,i,n){var s=this;this.popupObj=new Al(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]),s.getModuleName(),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup(),s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list[0]&&(s.isActive=!0,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0))},open:function(){A.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var o=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),a=s.list.querySelector("ul li");f(s.ulElement)||f(s.ulElement.getElementsByClassName("e-item-focus")[0])?!f(s.ulElement)&&!f(s.ulElement.getElementsByClassName("e-active")[0])&&qe(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-active")[0].id}):qe(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-item-focus")[0].id}),s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&o&&a&&o.textContent!==a.textContent&&"EJS-COMBOBOX"!==s.element.tagName&&s.cloneElements(),s.isFilterLayout()&&(W([s.inputWrapper.container],[Di.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&B([s.inputWrapper.clearButton],Di.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){X.isDevice||s.hidePopup()}})},t.prototype.isEmptyList=function(){return!f(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){X.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+Di.clearIcon);we(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},t.prototype.setPopupPosition=function(e){var i,n=e,s=this.list.querySelector("."+Di.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=o.getBoundingClientRect().height,h=this.list.offsetHeight/2,u=f(s)?o.offsetTop:s.offsetTop;if(a.offsetTop-h<u&&!f(this.liCollections)&&this.liCollections.length>0&&!f(s)){var m=this.list.offsetHeight/l,y=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(m-(this.liCollections.length-this.activeIndex))*l-n+y,this.list.scrollTop=s.offsetTop}else u>h?(i=h-l/2,this.list.scrollTop=u-h+l/2):i=u;return-(i=i+l+n-(l-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=ut(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),X.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var n=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(n).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!f(this.selectedLI)){var i=this.list.offsetHeight,n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+n-i;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!f(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(n>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=s)}},t.prototype.scrollTop=function(){if(!f(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!f(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!f(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(f(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},t.prototype.setEleWidth=function(e){f(e)||("number"==typeof e?this.inputWrapper.container.style.width=ut(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:ut(e)))},t.prototype.closePopup=function(e,i){var n=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){A.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=0,a=this.popupObj.getScrollableParent(this.inputWrapper.container);o<a.length;o++)A.remove(a[o],"scroll",this.scrollHandler);X.isDevice&&this.isFilterLayout()&&W([document.body,this.popupObj.element],Di.popupFullScreen),this.isFilterLayout()&&(X.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&A.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(A.remove(this.backIconElement,"click",this.clickOnBackIcon),A.remove(this.clearIconElement,"click",this.clearText)),A.remove(this.filterInput,"input",this.onInput),A.remove(this.filterInput,"keyup",this.onFilterUp),A.remove(this.filterInput,"keydown",this.onFilterDown),A.remove(this.filterInput,"blur",this.onBlurHandler),A.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),qe(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(Di.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0},event:i||null},function(m){if(!f(n.popupObj)&&!f(n.popupObj.element.querySelector(".e-fixed-head"))){var y=n.popupObj.element.querySelector(".e-fixed-head");y.parentNode.removeChild(y),n.fixedHeaderElement=null}m.cancel||("autocomplete"===n.getModuleName()&&n.rippleFun(),n.isPopupOpen?n.popupObj.hide(new hs(m.animation)):n.destroyPopup())})}},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),we(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,f(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),f(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.cssClass.replace(/\s+/g," ").trim()),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=ke.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Di.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Di.hiddenElement}}),ao([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=ut(this.width),this.inputWrapper.container.classList.add("e-ddl"),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):Sn("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),qe(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var n=this.element;this.value=n.options[n.selectedIndex].value,this.text=f(this.value)?null:n.options[n.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(o){o.stopImmediatePropagation()},this.inputElement.onchange=function(o){o.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),f(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var s=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!f(this.element.id)&&""!==this.element.id&&!f(s)&&(s.id="label_"+this.element.id.replace(/ /g,"_"),qe(this.inputElement,{"aria-labelledby":s.id})),this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.isReact?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),B([this.footer],Di.footer));var s=qi(this.dropdownCompiler(this.footerTemplate)?he(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(s&&s.length>0)for(var o=0;o<s.length;o++)this.footer.appendChild(s[o]);xt([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),B([this.header],Di.header));var s=qi(this.dropdownCompiler(this.headerTemplate)?he(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(s&&s.length)for(var o=0;o<s.length;o++)this.header.appendChild(s[o]);var a=e.querySelector("div.e-content");e.insertBefore(this.header,a)},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!X.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(W([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){e.dataSource&&!f(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof Xe)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=-1!==Object.keys(e).indexOf("value")&&f(e.value),n=-1!==Object.keys(e).indexOf("text")&&f(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(i||n)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!f(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!f(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e){(""!==this.inputElement.value||!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Xe)&&0===e.dataSource.length))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(A.remove(this.list,"scroll",this.setFloatingHeader),A.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Xe)&&0===e.dataSource.length))||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({text:e.text,value:e.value})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(e,i){var n=this;"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=function(u){switch(u){case"query":case"dataSource":break;case"htmlAttributes":o.setHTMLAttributes();break;case"width":o.setEleWidth(e.width),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"placeholder":ke.setPlaceholder(e.placeholder,o.inputElement);break;case"filterBarPlaceholder":o.filterInput&&ke.setPlaceholder(e.filterBarPlaceholder,o.filterInput);break;case"readonly":"dropdownlist"!==o.getModuleName()&&ke.setReadonly(e.readonly,o.inputElement),o.setReadOnly();break;case"cssClass":o.setCssClass(e.cssClass,i.cssClass),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"enableRtl":o.setEnableRtl();break;case"enabled":o.setEnable();break;case"text":if(null===e.text){o.clearAll();break}if(o.list||(o.dataSource instanceof Xe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var p=o.getElementByText(e.text);if(!o.checkValidLi(p))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.text,i.text,"text");else if(e.text&&o.dataSource instanceof Xe){var m=o.getItems().length,y=f(o.fields.text)?o.fields.value:o.fields.text;o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new Mn(y,"equal",e.text))).then(function(P){P.result.length>0?(n.addItem(P.result,m),n.updateValues()):n.setOldText(i.text)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldText(i.text);o.updateInputFields()}break;case"value":if(null===e.value){o.clearAll();break}if(o.notify("beforeValueChange",{newProp:e}),o.list||(o.dataSource instanceof Xe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var C=o.getElementByValue(e.value);if(!o.checkValidLi(C))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.value,i.value,"value");else if(e.value&&o.dataSource instanceof Xe){var S=o.getItems().length;y=f(o.fields.value)?o.fields.text:o.fields.value,o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new Mn(y,"equal",e.value))).then(function(O){O.result.length>0?(n.addItem(O.result,S),n.updateValues()):n.setOldValue(i.value)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldValue(i.value);o.updateInputFields(),o.preventChange=o.isAngular&&o.preventChange?!o.preventChange:o.preventChange}break;case"index":if(null===e.index){o.clearAll();break}o.list||(o.dataSource instanceof Xe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender&&o.liCollections&&(o.checkValidLi(o.liCollections[e.index])||(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100?o.setSelectionData(e.index,i.index,"index"):o.index=i.index),o.updateInputFields());break;case"footerTemplate":o.popupObj&&o.setFooterTemplate(o.popupObj.element);break;case"headerTemplate":o.popupObj&&o.setHeaderTemplate(o.popupObj.element);break;case"valueTemplate":!f(o.itemData)&&null!=o.valueTemplate&&o.setValueTemplate();break;case"allowFiltering":o.allowFiltering&&(o.actionCompleteData={ulElement:o.ulElement,list:o.listData,isUpdated:!0},o.actionData=o.actionCompleteData,o.updateSelectElementData(o.allowFiltering));break;case"floatLabelType":ke.removeFloating(o.inputWrapper),ke.addFloating(o.inputElement,e.floatLabelType,o.placeholder,o.createElement),!f(o.inputWrapper.buttons[0])&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==o.floatLabelType&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":ke.setClearButton(e.showClearButton,o.inputElement,o.inputWrapper,null,o.createElement),o.bindClearEvent();break;default:var R=o.getPropObject(u,e,i);r.prototype.onPropertyChanged.call(o,R.newProperty,R.oldProperty)}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a])},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,i,n){var o,s=this;this.updateListValues=function(){"text"===n?(o=s.getElementByText(e),s.checkValidLi(o)||s.setOldText(i)):"value"===n?(o=s.getElementByValue(e),s.checkValidLi(o)||s.setOldValue(i)):"index"===n&&(s.checkValidLi(o=s.liCollections[e])||(s.index=i))}},t.prototype.setReadOnly=function(){this.readonly?B([this.inputWrapper.container],["e-readonly"]):W([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,i){},t.prototype.setCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupObj&&ke.setCssClass(e,[this.popupObj.element],i)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof Xe&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(f(this.list)||!Jt(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+et_li).length<=0))&&this.renderList(e),this.invokeRenderPopup(e)}},t.prototype.invokeRenderPopup=function(e){if(X.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}(!f(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,f(this.index))this.resetSelection();else{var i=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,e);var n=this.getItemData(),s=!f(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(Di.disable)){var i=!1;this.preventFocus&&X.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),B([this.inputWrapper.container],[Di.inputFocus]),this.onFocus(e),ke.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){!this.enabled||(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),W([this.inputWrapper.container],[Di.inputFocus]),ke.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){if(this.isActive=!1,function qde(r){WN===r&&(WN="",y6="",qf="",Lm=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ke.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),we(this.inputWrapper.container),r.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof Xe&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?r.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(e){return r.prototype.getDataByValue.call(this,e)},t.prototype.clear=function(){this.value=null},co([D(null)],t.prototype,"cssClass",void 0),co([D("100%")],t.prototype,"width",void 0),co([D("300px")],t.prototype,"popupHeight",void 0),co([D("100%")],t.prototype,"popupWidth",void 0),co([D(null)],t.prototype,"placeholder",void 0),co([D(null)],t.prototype,"filterBarPlaceholder",void 0),co([D({})],t.prototype,"htmlAttributes",void 0),co([D(null)],t.prototype,"query",void 0),co([D(null)],t.prototype,"valueTemplate",void 0),co([D(null)],t.prototype,"headerTemplate",void 0),co([D(null)],t.prototype,"footerTemplate",void 0),co([D(!1)],t.prototype,"allowFiltering",void 0),co([D(!1)],t.prototype,"readonly",void 0),co([D(null)],t.prototype,"text",void 0),co([D(null)],t.prototype,"value",void 0),co([D(null)],t.prototype,"index",void 0),co([D("Never")],t.prototype,"floatLabelType",void 0),co([D(!1)],t.prototype,"showClearButton",void 0),co([K()],t.prototype,"filtering",void 0),co([K()],t.prototype,"change",void 0),co([K()],t.prototype,"beforeOpen",void 0),co([K()],t.prototype,"open",void 0),co([K()],t.prototype,"close",void 0),co([K()],t.prototype,"blur",void 0),co([K()],t.prototype,"focus",void 0),co([an],t)}(KN),b6=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Pi=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},KY="e-ddt-hidden",$Y="e-input-group-icon e-ddt-icon e-icons",Ec="e-show-chip",tw="e-show-clear",C6="e-show-dd-icon",Pl="e-chip-input",sT="e-input-focus",YY="e-input-group",ZY="e-icon-anim",w6="e-chips",QY="e-chipcontent",S6="e-chips-close",Qr="e-icon-hide",$N="e-ddt-icon-hide",XY="e-list-parent",JY="e-dropdown",eZ="e-disabled",YN="e-selectall-parent",ZN="e-hide-selectall",tZ="e-all-text",E6="e-frame",OR="e-check",x6="e-checkbox-wrapper",iZ="e-filter-wrap",nZ="e-ddt-icon",rZ="e-ddt-footer",sZ="e-ddt-header",oT="e-no-data",T6="e-remain",D6="e-overflow",aT="e-show-text",PR="e-total-count",lT="e-wrap-count",vpe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return b6(t,r),Pi([D("child")],t.prototype,"child",void 0),Pi([D([])],t.prototype,"dataSource",void 0),Pi([D("expanded")],t.prototype,"expanded",void 0),Pi([D("hasChildren")],t.prototype,"hasChildren",void 0),Pi([D("htmlAttributes")],t.prototype,"htmlAttributes",void 0),Pi([D("iconCss")],t.prototype,"iconCss",void 0),Pi([D("imageUrl")],t.prototype,"imageUrl",void 0),Pi([D("parentValue")],t.prototype,"parentValue",void 0),Pi([D(null)],t.prototype,"query",void 0),Pi([D("selected")],t.prototype,"selected",void 0),Pi([D(null)],t.prototype,"tableName",void 0),Pi([D("text")],t.prototype,"text",void 0),Pi([D("tooltip")],t.prototype,"tooltip",void 0),Pi([D("value")],t.prototype,"value",void 0),t}(Wi),ype=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return b6(t,r),Pi([D(!1)],t.prototype,"autoCheck",void 0),Pi([D("Auto")],t.prototype,"expandOn",void 0),Pi([D(!1)],t.prototype,"loadOnDemand",void 0),t}(Wi),bpe=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.filterTimer=null,n.isFilteredData=!1,n.isFilterRestore=!1,n.selectedData=[],n.filterDelayTime=300,n.isClicked=!1,n}return b6(t,r),t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-tree"},t.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate",this.customTemplateId=this.element.id+"CustomTemplate",this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},t.prototype.render=function(){var e=he("#"+this.element.id+"_tree",document);e&&we(he("#"+this.element.id+"_popup",document)||e.parentElement),this.ensureAutoCheck(),"INPUT"===this.element.tagName?(this.inputEle=this.element,f(this.inputEle.getAttribute("role"))&&this.inputEle.setAttribute("role","textbox"),f(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=ke.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[$Y]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(YY)||this.inputWrapper.classList.add(YY),this.showDropDownIcon&&this.inputWrapper.classList.add(C6),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add("e-ddt"),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:"e-popup-content"}),this.popupDiv.classList.add(JY),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),document.body.appendChild(this.popupDiv),this.wireTreeEvents(),B([this.popupDiv],$N),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof Xe,(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.createChip(),!this.wrapText&&"Custom"!==this.mode&&(this.overFlowWrapper=this.createElement("span",{className:D6+" "+Qr}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),"Box"!==this.mode&&B([this.overFlowWrapper],aT))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var n=he("."+XY,this.treeObj.element);n&&n.getAttribute("aria-multiselectable")&&n.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()},t.prototype.ensureAutoCheck=function(){this.allowFiltering&&this.treeSettings.autoCheck&&this.setProperties({treeSettings:{autoCheck:!1}},!0)},t.prototype.hideCheckAll=function(e){var i=f(this.popupEle)?null:this.popupEle.querySelector("."+YN);f(i)||(e&&!i.classList.contains(ZN)?B([i],ZN):!e&&i.classList.contains(ZN)&&W([i],ZN))},t.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:iZ});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),ao([this.filterContainer],this.popupEle),this.filterObj=new v$({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},t.prototype.filterChangeHandler=function(e){var i=this;f(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){i.filterHandler(e.value,e.event)},this.filterDelayTime))},t.prototype.filterHandler=function(e,i){var n=this;this.isFilteredData||(this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields);this.trigger("filtering",{cancel:!1,preventDefaultAction:!1,event:i,text:e,fields:s},function(a){if(!a.cancel){var l=!1,h=void 0;if(n.isFilteredData=!0,""===e?(n.isFilteredData=!1,n.isFilterRestore=!0,h=n.cloneFields(n.fields)):a.preventDefaultAction?h=a.fields:1===n.treeDataType?h=n.selfReferencefilter(e,a.fields):n.fields.dataSource instanceof Xe?l=!0:h=n.nestedFilter(e,a.fields),n.hideCheckAll(n.isFilteredData),l)return;n.treeObj.fields=n.getTreeFields(h),n.treeObj.dataBind()}})},t.prototype.nestedFilter=function(e,i){for(var n=[],s=0;s<this.treeData.length;s++){var o=this.nestedChildFilter(e,this.treeData[s]);f(o)||n.push(o)}return i.dataSource=n,i},t.prototype.nestedChildFilter=function(e,i){var n=i[this.fields.child];if(f(n))return this.isMatchedNode(e,i)?i:null;for(var s=[],o=0;o<n.length;o++){var a=this.nestedChildFilter(e,n[o]);f(a)||s.push(a)}var l=Object.assign({},i);return 0!==s.length?(l[this.fields.child]=s,l):(l[this.fields.child]=null,this.isMatchedNode(e,l)?l:null)},t.prototype.selfReferencefilter=function(e,i){for(var n=[],s=[],o=0;o<this.treeData.length;o++)this.isMatchedNode(e,this.treeData[o])&&n.push(this.treeData[o]);for(o=0;o<n.length;o++)if(-1===s.indexOf(n[o])){s.push(n[o]);for(var a=n[o][this.fields.parentValue];!f(a);){for(var l=null,h=0;h<this.treeData.length;h++){var u=this.treeData[h][this.fields.value];if(!f(u)&&u===a){l=this.treeData[h];break}}if(f(l)||-1!==s.indexOf(l))break;s.push(l),a=l[this.fields.parentValue]}}return i.dataSource=s,i},t.prototype.isMatchedNode=function(e,i){var n=i[this.fields.text];return this.ignoreCase&&(n=n.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(n=Ye.ignoreDiacritics(n),e=Ye.ignoreDiacritics(e)),"StartsWith"===this.filterType?n.slice(0,e.length)===e:"EndsWith"===this.filterType?n.slice(-e.length)===e:-1!==n.indexOf(e)},t.prototype.wireEvents=function(){A.add(this.inputWrapper,"mouseup",this.dropDownClick,this),A.add(this.inputWrapper,"focus",this.focusIn,this),A.add(this.inputWrapper,"blur",this.focusOut,this),A.add(this.inputWrapper,"mousemove",this.mouseIn,this),A.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),A.add(this.overAllClear,"mousedown",this.clearAll,this),A.add(window,"resize",this.windowResize,this);var e=j(this.inputWrapper,"form");e&&A.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new Hn(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireTreeEvents=function(){this.keyboardModule=new Hn(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new Hn(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){A.remove(this.inputWrapper,"mouseup",this.dropDownClick),A.remove(this.inputWrapper,"focus",this.focusIn),A.remove(this.inputWrapper,"blur",this.focusOut),A.remove(this.inputWrapper,"mousemove",this.mouseIn),A.remove(this.inputWrapper,"mouseout",this.onMouseLeave),A.remove(this.overAllClear,"mousedown",this.clearAll),A.remove(window,"resize",this.windowResize);var e=j(this.inputWrapper,"form");e&&A.remove(e,"reset",this.resetValueHandler)},t.prototype.dropDownClick=function(e){if(this.enabled&&!this.readonly){if(this.isClearButtonClick)return void(this.isClearButtonClick=!1);this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}},t.prototype.mouseIn=function(){(this.enabled||!this.readonly)&&this.showOverAllClear()},t.prototype.onMouseLeave=function(){this.inputFocus||(B([this.overAllClear],Qr),W([this.inputWrapper],tw))},t.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},t.prototype.focusOut=function(e){if(this.enabled&&!this.readonly&&this.inputFocus&&(!X.isIE&&"edge"!==X.info.name||e.target!==this.inputWrapper)){var i=e.relatedTarget;i!==this.inputEle&&f(i)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}},t.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=he(".e-clear-icon",this.inputWrapper).offsetWidth,B([this.overAllClear],Qr),W([this.inputWrapper],tw)),W([this.inputWrapper],[sT]),this.allowMultiSelection||this.showCheckBox){var i=!!this.value&&!!this.value.length;"Delimiter"!==this.mode&&"Custom"!==this.mode&&this.chipWrapper&&"Default"===this.mode&&(B([this.chipWrapper],Qr),W([this.inputWrapper],Ec),W([this.inputEle],Pl)),!this.wrapText&&i&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},t.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||"Custom"===this.mode||this.inputFocus||("Box"!==this.mode?B([this.inputWrapper,this.overFlowWrapper],aT):B([this.inputWrapper],Ec),this.value&&0!==this.value.length&&(this.inputWrapper.contains(this.chipWrapper)&&B([this.chipWrapper],Qr),B([this.inputEle],Pl),this.updateOverFlowView(),this.ensurePlaceHolder()))},t.prototype.triggerChangeEvent=function(e){this.ddtCompareValues(this.oldValue,this.value)&&!this.isChipDelete||this.removeValue||(this.trigger("change",{e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element}),this.oldValue=this.value)},t.prototype.ddtCompareValues=function(e,i){if(null===e||null===i)return(null===e||0===e.length)&&i===e;if(e.length!==i.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==i[s])return!1;return!0},t.prototype.focusIn=function(e){!this.enabled||this.readonly||this.inputFocus||(this.showOverAllClear(),this.inputFocus=!0,B([this.inputWrapper],[sT]),(this.allowMultiSelection||this.showCheckBox)&&("Delimiter"!==this.mode&&this.inputFocus&&(this.chipWrapper&&this.value&&0!==this.value.length&&(W([this.chipWrapper],Qr),B([this.inputEle],Pl)),B([this.inputWrapper],Ec),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&"Custom"!==this.mode&&(this.inputWrapper.contains(this.overFlowWrapper)&&B([this.overFlowWrapper],Qr),"Delimiter"===this.mode?(W([this.inputWrapper],Ec),W([this.inputEle],Pl)):B([this.inputWrapper],Ec),W([this.inputWrapper],aT),this.ensurePlaceHolder())),this.trigger("focus",{isInteracted:!!e,event:e}))},t.prototype.treeAction=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(s.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":i.inputWrapper.focus(),e.preventDefault(),i.isPopupOpen&&i.hidePopup();break;case"tab":case"shiftTab":i.isPopupOpen&&i.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":i.showCheckBox||(i.isValueChange=!0,i.keyEventArgs=e);break;case"space":i.isValueChange=!0,i.keyEventArgs=e;break;case"ctrlA":i.allowMultiSelection&&i.selectAll(!0)}})},t.prototype.keyActionHandler=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(!s.cancel)switch(e.action){case"escape":case"altUp":i.isPopupOpen&&i.hidePopup();break;case"shiftTab":case"tab":i.isPopupOpen&&i.hidePopup(),i.inputFocus&&i.onFocusOut();break;case"altDown":i.isPopupOpen||(i.showPopup(),e.preventDefault());break;case"moveDown":i.showSelectAll&&i.showCheckBox&&i.checkAllParent.focus()}})},t.prototype.checkAllAction=function(e){var i=this;this.trigger("keyPress",{cancel:!1,event:e},function(s){if(!s.cancel)switch(e.action){case"space":i.clickHandler(e);break;case"moveDown":i.treeObj.element.focus()}})},t.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},t.prototype.resetValueHandler=function(e){var i=j(this.inputWrapper,"form");i&&e.target===i&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},t.prototype.getAriaAttributes=function(){return{"aria-disabled":this.enabled?"false":"true","aria-owns":this.element.id+"_options",role:"listbox","aria-haspopup":"true","aria-expanded":"false","aria-activedescendant":"null","aria-labelledby":this.hiddenElement.id}},t.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove(PR),W([this.overFlowWrapper],Qr),this.value&&this.value.length){var e="",i=void 0,n=void 0,s=void 0,o=1,a=void 0,l=void 0,h=0;this.overFlowWrapper.innerHTML="",this.l10n=new $r(this.getLocaleName(),{overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},this.locale);var p=this.l10n.getConstant("overflowCountTemplate"),m=this.l10n.getConstant("totalCountTemplate"),y=this.createElement("span",{className:T6});this.overFlowWrapper.appendChild(y),y.innerText=p.replace("${count}",this.value.length.toString());var C=y.offsetWidth;if($e(y),this.showDropDownIcon&&(h=he("."+nZ,this.inputWrapper).offsetWidth),!f(this.value))if("Box"!==this.mode)for(var S=0;!f(this.value[S]);S++){if(e+=0===S?"":this.delimiterChar+" ",e+=n=this.getOverflowVal(S),n=this.overFlowWrapper.innerHTML,this.overFlowWrapper.innerHTML=e,(a=this.overFlowWrapper.offsetWidth)+h+this.clearIconWidth>(i=this.inputWrapper.offsetWidth)){for(void 0!==s&&""!==s&&(n=s,S=o+1),this.overFlowWrapper.innerHTML=n,l=this.value.length-S,a=this.overFlowWrapper.offsetWidth;a+C+h+this.clearIconWidth>=i&&0!==a&&""!==this.overFlowWrapper.innerHTML;){var T=this.overFlowWrapper.innerHTML.split(this.delimiterChar);T.pop(),this.overFlowWrapper.innerHTML=T.join(this.delimiterChar),l++,a=this.overFlowWrapper.offsetWidth}break}a+C+h+this.clearIconWidth<=i?(s=e,o=S):0===S&&(s="",o=-1)}else{B([this.chipWrapper],Qr);for(var R=this.chipWrapper.cloneNode(!0),P=Tt("."+w6,R),O=0;O<P.length;O++){if(n=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(P[O]),e=this.overFlowWrapper.innerHTML,(a=this.overFlowWrapper.offsetWidth)+h+this.clearIconWidth>(i=this.inputWrapper.offsetWidth)){for(void 0!==s&&""!==s&&(n=s,O=o+1),this.overFlowWrapper.innerHTML=n,l=this.value.length-O,a=this.overFlowWrapper.offsetWidth;a+C+h+this.clearIconWidth>=i&&0!==a&&""!==this.overFlowWrapper.innerHTML;)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),l++,a=this.overFlowWrapper.offsetWidth;break}a+C+h+this.clearIconWidth<=i?(s=e,o=O):0===O&&(s="",o=-1)}}l>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(y,l,p,m)),"Box"===this.mode&&!this.overFlowWrapper.classList.contains(PR)&&B([y],lT)}else this.overFlowWrapper.innerHTML="",B([this.overFlowWrapper],Qr);this.updateDelimMode()},t.prototype.updateRemainTemplate=function(e,i,n,s){return this.overFlowWrapper.firstChild&&3===this.overFlowWrapper.firstChild.nodeType&&""===this.overFlowWrapper.firstChild.nodeValue&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?s.replace("${count}",i.toString()):n.replace("${count}",i.toString()),!this.overFlowWrapper.firstChild||3!==this.overFlowWrapper.firstChild.nodeType&&"Box"!==this.mode?(B([this.overFlowWrapper],PR),W([this.overFlowWrapper],lT)):W([this.overFlowWrapper],PR),e},t.prototype.getOverflowVal=function(e){var i=this.getSelectedData(this.value[e]);return re(this.treeSettings.loadOnDemand?this.fields.text:"text",i)},t.prototype.updateDelimMode=function(){"Box"!==this.mode?he("."+T6,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(PR)?(B([this.overFlowWrapper],lT),B([this.overFlowWrapper],aT)):(this.overFlowWrapper.classList.remove(lT),W([this.overFlowWrapper],lT)):he("."+T6,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(lT)},t.prototype.createHiddenElement=function(){this.hiddenElement=this.createElement("select",this.allowMultiSelection||this.showCheckBox?{attrs:{"aria-hidden":"true",class:KY,tabindex:"-1",multiple:""}}:{attrs:{"aria-hidden":"true",tabindex:"-1",class:KY}}),ao([this.hiddenElement],this.inputWrapper),this.validationAttribute()},t.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:"e-clear-icon e-icons"}),B([this.overAllClear],Qr),W([this.inputWrapper],tw),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var i=["required","aria-required","form"],n=0;n<i.length;n++){var s=this.inputEle.getAttribute(i[n]);s&&(this.hiddenElement.setAttribute(i[n],s),this.inputEle.removeAttribute(i[n]))}},t.prototype.createChip=function(){this.inputWrapper.contains(this.chipWrapper)||(this.chipWrapper=this.createElement("span",{className:"e-chips-wrapper"}),this.chipCollection=this.createElement("span",{className:"e-chips-collection"}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),B([this.inputWrapper],Ec),this.getValidMode()&&null!==this.value&&this.value&&0!==this.value.length?B([this.inputEle],Pl):(null===this.value||this.value&&0===this.value.length)&&B([this.chipWrapper],Qr))},t.prototype.getValidMode=function(){return!(!this.allowMultiSelection&&!this.showCheckBox||"Box"!==this.mode&&("Default"!==this.mode||!this.inputFocus))},t.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:YN,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:tZ}),this.selectAllSpan.textContent="";var i=f(j(this.element,".e-bigger"))?"":"e-small";this.checkBoxElement=fh(this.createElement,!0,{cssClass:i}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),A.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},t.prototype.clickHandler=function(e){var i;if(i=e.currentTarget&&e.currentTarget.classList.contains(YN)?e.currentTarget.firstElementChild.lastElementChild:e.target,this.checkWrapper=j(i,"."+x6),!f(this.checkWrapper)){this.isClicked=!0;var n=he("."+E6,this.checkWrapper);this.changeState(this.checkWrapper,n.classList.contains(OR)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()},t.prototype.changeState=function(e,i,n){var s,o=e.getElementsByClassName(E6)[0];"check"!==i||o.classList.contains(OR)?"uncheck"===i&&o.classList.contains(OR)&&(o.classList.remove(OR),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(n)),this.setLocale(!1)):(o.classList.add(OR),s="true",this.isReverseUpdate||(this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(n)),this.setLocale(!0)),this.setMultiSelect(),this.ensurePlaceHolder(),f(s="check"===i?"true":"false")||e.setAttribute("aria-checked",s)},t.prototype.setLocale=function(e){if(this.selectAllSpan)if("Select All"!==this.selectAllText||"Unselect All"!==this.unSelectAllText){var i=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var o=0,a=qi(i)({},this,e?"unSelectAllText":"selectAllText",null,!this.isStringTemplate);o<a.length;o++)this.selectAllSpan.textContent=a[o].textContent}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},t.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),qe(this.inputWrapper,this.getAriaAttributes())},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];"class"===n?this.inputWrapper.classList.add(this.htmlAttributes[n]):"disabled"===n&&"disabled"===this.htmlAttributes[n]?(this.setProperties({enabled:!1},!0),this.setEnable()):"readonly"!==n||f(this.htmlAttributes[n])?"style"===n?this.inputWrapper.setAttribute("style",this.htmlAttributes[n]):0===n.indexOf("data")||["name","required"].indexOf(n)>-1?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"].indexOf(n)>-1?"placeholder"===n?ke.setPlaceholder(this.htmlAttributes[n],this.inputEle):this.inputEle.setAttribute(n,this.htmlAttributes[n]):this.inputWrapper.setAttribute(n,this.htmlAttributes[n]):(this.setProperties({readonly:!0},!0),this.dataBind())}},t.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,i=["class","style","id","type"],n={},s=0;s<this.element.attributes.length;s++)-1===i.indexOf(this.element.attributes[s].name)&&"readonly"!==this.element.attributes[s].name&&(n[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));de(n,e,n),this.setProperties({htmlAttributes:n},!0)},t.prototype.showOverAllClear=function(){this.enabled&&!this.readonly&&this.overAllClear&&(this.value&&this.value.length&&this.showClearButton?(W([this.overAllClear],Qr),B([this.inputWrapper],tw)):(B([this.overAllClear],Qr),W([this.inputWrapper],tw)))},t.prototype.setTreeValue=function(){if(null!==this.value&&0!==this.value.length){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var i=0;i<this.value.length;i++)f(e=this.treeObj.getTreeData(this.value[i])[0])&&this.value.splice(this.value.indexOf(this.value[i]),1);0!==this.value.length&&this.setValidValue()}else f(e=this.treeObj.getTreeData(this.value[0])[0])?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},t.prototype.setTreeText=function(){if((null===this.value||this.isInitialized)&&null!==this.text){var e=void 0,i=[];if(this.showCheckBox||this.allowMultiSelection){for(var n=this.text.split(this.delimiterChar),s=0;s<n.length;s++)f(e=this.getItems(n[s]))||i.push(e[this.fields.value].toString());0!==i.length?(this.oldValue=this.value,this.setProperties({value:i},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else f(e=this.getItems(this.text))?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},t.prototype.setSelectedValue=function(){null==this.value&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),ui("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},t.prototype.setValidValue=function(){var e=this;if(this.showCheckBox||this.allowMultiSelection)this.showCheckBox?(this.value.filter(function(s){return-1===e.treeObj.checkedNodes.indexOf(s)}).length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect()):(this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues()),this.treeObj.dataBind();else{ke.setValue(this.text,this.inputEle,this.floatLabelType);var i=this.value[0].toString();this.treeObj.selectedNodes[0]!==i&&ui("selectedNodes",[i],this.treeObj)}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},t.prototype.getItems=function(e){var i;if(1===this.treeDataType)for(var n=0;n<this.treeItems.length;n++){var s=re(this.fields.text,this.treeItems[n]);if(!f(this.treeItems[n])&&!f(s)&&s===e){i=this.treeItems[n];break}}else i=this.getNestedItems(this.treeItems,this.fields,e);return i},t.prototype.getNestedItems=function(e,i,n){for(var s,o=0,a=e.length;o<a;o++){var l=re(this.fields.text,e[o]);if(e[o]&&l&&l.toString()===n)return e[o];if("string"!=typeof i.child||f(re(i.child,e[o]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",e[o]))&&void 0!==(s=this.getNestedItems(re("child",e[o]),this.getChildType(i),n)))break}else{var h=re(i.child,e[o]);if(void 0!==(s=this.getNestedItems(h,this.getChildType(i),n)))break}}return s},t.prototype.getChildType=function(e){return"string"==typeof e.child||f(e.child)?e:e.child},t.prototype.renderTree=function(){this.treeObj=new xde({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo("#"+this.tree.id)},t.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var i=!1;this.trigger("beforeOpen",{cancel:!1},function(s){if(s.cancel?i=!0:(B([e.inputWrapper],[ZY]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddt e-popup "+(null!=e.cssClass?e.cssClass:"")}),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):e.popupEle=e.popupObj.element),e.isFirstRender&&!i&&(ao([e.popupDiv],e.popupEle),W([e.popupDiv],$N),e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(oT)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.portals=e.portals.concat(e.treeObj.portals),e.renderReactTemplates())),!i){if(qe(e.inputWrapper,{"aria-expanded":"true"}),e.popupObj.show(null,1e3===e.zIndex?e.inputEle:null),W([e.popupEle],$N),e.updatePopupHeight(),e.popupObj.refreshPosition(),!(e.showCheckBox&&e.showSelectAll)&&!e.popupDiv.classList.contains(oT)&&e.treeItems.length>0&&e.treeObj.element.focus(),e.checkSelectAll&&e.checkBoxElement){var o=j(e.checkBoxElement,"."+x6);e.changeState(o,"check"),e.checkSelectAll=!1}e.allowFiltering&&(W([e.inputWrapper],[sT]),e.filterObj.element.focus()),e.trigger("open",{popup:e.popupObj})}})},t.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var i=Math.round(this.filterContainer.getBoundingClientRect().height);e=ut(parseInt(e,10)-i+"px")}this.headerTemplate&&(i=Math.round(this.header.getBoundingClientRect().height),e=ut(parseInt(e,10)-i+"px")),this.showCheckBox&&this.showSelectAll&&(i=Math.round(this.checkAllParent.getBoundingClientRect().height),e=ut(parseInt(e,10)-i+"px")),this.footerTemplate&&(i=Math.round(this.footer.getBoundingClientRect().height),e=ut(parseInt(e,10)-i+"px"));var n=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);n+=parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=ut(parseInt(e,10)-n+"px"),this.popupDiv.style.maxHeight=e}},t.prototype.createPopup=function(e){var i=this;this.isFirstRender&&(this.popupObj=new Al(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){i.isPopupOpen=!1},open:function(){A.add(document,"mousedown",i.onDocumentClick,i),i.isPopupOpen=!0},targetExitViewport:function(){X.isDevice||i.hidePopup()}}))},t.prototype.setElementWidth=function(e){var i=this.inputWrapper;f(e)||("number"==typeof e?i.style.width=ut(e):"string"==typeof e&&(i.style.width=e.match(/px|%|em/)?e:ut(e)))},t.prototype.setWidth=function(){var e=ut(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupWidth&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e},t.prototype.getHeight=function(){var e=ut(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":"string"==typeof this.popupHeight&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e},t.prototype.onDocumentClick=function(e){var i=e.target,n=j(i,"."+XY),s=j(i,"."+iZ),o=j(i,"."+sZ),a=j(i,"."+rZ),l=!!i.classList.contains(JY)||pm(i,".e-ddt .e-popup")||pm(i,".e-ddt .e-treeview");this.isPopupOpen&&(this.inputWrapper.contains(i)||n||l||o||a)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&i.classList.contains(S6)||this.isPopupOpen&&(i.classList.contains(YN)||i.classList.contains(tZ)||i.classList.contains(E6)))?(this.isDocumentClick=!1,e.preventDefault()):!this.inputWrapper.contains(i)&&this.inputFocus&&!s&&this.focusOut(e)},t.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),B([this.popupDiv],oT)},t.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),B([this.popupDiv],oT),this.hideCheckAll(!0)):this.popupDiv.classList.contains(oT)&&this.treeItems.length>=1&&(W([this.popupDiv],oT),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus()),this.trigger("dataBound",{data:e.data}),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},t.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},t.prototype.setCssClass=function(e,i){var n=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!f(i)&&""!==i&&W(n,i.split(" ")),!f(e)&&""!==e&&B(n,e.split(" "))},t.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add("e-rtl"):this.inputWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},t.prototype.setEnable=function(){ke.setEnabled(this.enabled,this.inputEle),this.enabled?(W([this.inputWrapper],eZ),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),B([this.inputWrapper],eZ),this.inputWrapper&&this.inputWrapper.classList.contains(sT)&&W([this.inputWrapper],[sT]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},t.prototype.cloneFields=function(e){return{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.cloneChildField=function(e){return"string"==typeof e?e:{dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeFields=function(e){return{dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip}},t.prototype.getTreeChildren=function(e){if("string"==typeof e)return e;if(!f(e)){var i=e=this.getActualProperties(e);return e.value&&(i.id=e.value),e.parentValue&&(i.parentID=e.parentValue),e.child&&(i.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(i.isChecked=e.selected),i}return null},t.prototype.getTreeDataType=function(e,i){if(this.fields.dataSource instanceof Xe){for(var n=0;n<e.length;n++)if("string"==typeof i.child&&f(re(i.child,e[n])))return 1;return 2}f(this.fields.dataSource)&&(this.fields.dataSource=[]),n=0;for(var s=this.fields.dataSource.length;n<s;n++){if("string"==typeof i.child&&!f(re(i.child,this.fields.dataSource[n])))return 2;if(!f(re(i.parentValue,this.fields.dataSource[n]))||!f(re(i.hasChildren,this.fields.dataSource[n])))return 1}return 1},t.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},t.prototype.getEventArgs=function(e){var s;return this.showCheckBox&&("check"===e.action?s="select":"uncheck"===e.action&&(s="un-select")),{action:this.showCheckBox?s:e.action,isInteracted:!!this.isClicked||e.isInteracted,item:e.node,itemData:this.showCheckBox?e.data[0]:e.nodeData}},t.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,null===this.value&&this.setProperties({value:[]},!0))},t.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.hiddenElement.innerHTML=this.value&&this.value.length?'<option selected value ="'+this.value[0]+'">'+this.text+"</option>":"")},t.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var i;if(e.isInteracted){var n=re("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[n]},!0),i=this.itemTemplate?re("text",this.treeObj.getNode(n)):re("text",e.nodeData).toString(),ke.setValue(i,this.inputEle,this.floatLabelType),this.setProperties({text:i},!0),this.currentText=this.text,this.currentValue=this.value,qe(this.inputWrapper,{"aria-describedby":this.element.id}),qe(this.inputWrapper,{"aria-activedescendant":n.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var s=this.getEventArgs(e);this.trigger("select",s),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},t.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var i=e.event.target;(i.classList.contains("e-fullrow")||i.classList.contains("e-list-text"))&&this.showCheckBox&&(this.isClicked=!0,"true"===this.treeObj.getNode(e.node).isChecked?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()),!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)},t.prototype.onNodeChecked=function(e){var i=this.getEventArgs(e);if(this.trigger("select",i),this.isFilteredData&&"uncheck"===e.action){var n=re("id",e.data[0]).toString();this.removeSelectedData(n,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li"),o=this.treeObj.element.querySelectorAll("li .e-checkbox-wrapper[aria-checked=true]"),a=j(this.checkBoxElement,"."+x6);a&&"uncheck"===e.action?(this.isReverseUpdate=!0,this.changeState(a,"uncheck"),this.isReverseUpdate=!1):a&&"check"===e.action&&o.length===s.length&&(this.isReverseUpdate=!0,this.changeState(a,"check"),this.isReverseUpdate=!1)}},t.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},t.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(W([this.overAllClear],Qr),B([this.inputWrapper],tw)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(B([this.overAllClear],Qr),W([this.inputWrapper],tw)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var i=Tt("."+S6,this.chipWrapper),n=0;n<i.length;n++)e?W([i[n]],Qr):B([i[n]],Qr)},t.prototype.updateDropDownIconState=function(e){var i=he("."+nZ,this.inputWrapper);e?(i?W([i],Qr):ke.appendSpan($Y,this.inputWrapper,this.createElement),B([this.inputWrapper],C6)):(B([i],Qr),W([this.inputWrapper],C6))},t.prototype.updateMode=function(){if("Custom"!==this.mode)if("Delimiter"!==this.mode){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(Qr)&&e?(W([this.chipWrapper],Qr),B([this.inputWrapper],Ec)):e||(B([this.chipWrapper],Qr),W([this.inputWrapper],Ec)),e&&null!==this.value&&0!==this.value.length?B([this.inputEle],Pl):W([this.inputEle],Pl)}else this.inputEle.classList.contains(Pl)&&(W([this.inputEle],Pl),this.chipWrapper&&(B([this.chipWrapper],Qr),W([this.inputWrapper],Ec)))},t.prototype.ensurePlaceHolder=function(){this.value&&0===this.value.length&&(W([this.inputEle],Pl),this.chipWrapper&&B([this.chipWrapper],Qr))},t.prototype.ensureClearIconPosition=function(e){"Never"!==e&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},t.prototype.setMultiSelectValue=function(e){if(this.isFilteredData){for(var i=f(this.value)?[]:this.value,n=0;n<e.length;n++)(f(this.value)||-1===this.value.indexOf(e[n]))&&i.push(e[n]);this.setProperties({value:i},!0)}else this.setProperties({value:e},!0),e&&0!==e.length&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind())},t.prototype.setMultiSelect=function(){this.showCheckBox&&!this.isDynamicChange?this.setMultiSelectValue(this.treeObj.checkedNodes.slice()):(this.setMultiSelectValue(this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null),this.showCheckBox&&null!==this.value&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())),this.selectedText=[];var i=!!this.allowMultiSelection||!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!i&&(W([this.inputEle],Pl),we(this.chipWrapper)),this.getValidMode()&&null!==this.value&&(B([this.inputEle],Pl),this.chipWrapper&&W([this.chipWrapper],Qr)),this.chipWrapper&&"Box"===this.mode&&!(this.value&&this.value.length)&&(B([this.chipWrapper],Qr),W([this.inputEle],Pl)),this.updateSelectedValues()},t.prototype.getSelectedData=function(e){var i=null;if(this.isFilteredData)for(var n=0;n<this.selectedData.length;n++)if(re(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[n]).toString()===e){i=this.selectedData[n];break}return f(i)&&(f(i=this.treeSettings.loadOnDemand?this.getNodeData(e):this.treeObj.getNode(e))||this.selectedData.push(i)),i},t.prototype.getNodeData=function(e){var i;if(f(e))return i;if(1!==this.treeDataType)return this.getChildNodeData(this.treeItems,this.fields,e);for(var n=0,s=this.treeItems.length;n<s;n++){var o=re(this.fields.value,this.treeItems[n]);if(!f(this.treeItems[n])&&!f(o)&&o.toString()===e)return this.treeItems[n]}return i},t.prototype.getChildNodeData=function(e,i,n){var s;if(f(e))return s;for(var o=0,a=e.length;o<a;o++){var l=re(i.value,e[o]);if(e[o]&&l&&l.toString()===n)return e[o];if("string"!=typeof i.child||f(re(i.child,e[o]))){if(this.fields.dataSource instanceof Xe&&!f(re("child",e[o]))&&void 0!==(s=this.getChildNodeData(re("child",e[o]),this.getChildMapperFields(i),n)))break}else{var h=re(i.child,e[o]);if(void 0!==(s=this.getChildNodeData(h,this.getChildMapperFields(i),n)))break}}return s},t.prototype.getChildMapperFields=function(e){return"string"==typeof e.child||f(e.child)?e:e.child},t.prototype.removeSelectedData=function(e,i){var n=f(this.value)?[]:this.value.slice();n.splice(n.indexOf(e),1),this.setProperties({value:n},i);for(var s=0;s<this.selectedData.length;s++)if(re(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},t.prototype.updateSelectedValues=function(){this.dataValue="";var e,i,s,n="";this.hiddenElement.innerHTML="";var o="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!f(this.value)){for(var a=0,l=this.value.length;a<l;a++)s=this.getSelectedData(this.value[a]),i=re(this.treeSettings.loadOnDemand?this.fields.text:"text",s),this.selectedText.push(i),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,n+=","+e):(this.dataValue+=e,n+=e),"Custom"!==this.mode&&"Delimiter"!==this.mode&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(e,this.value[a]),o+='<option selected value ="'+this.value[a]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:n},!0),this.hiddenElement.innerHTML=o,"Custom"===this.mode&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var h=this.getValidMode();"Custom"!==this.mode&&"Box"!==this.mode&&(this.allowMultiSelection||this.showCheckBox)&&!h&&this.chipWrapper&&(B([this.chipWrapper],Qr),W([this.inputWrapper],Ec)),ke.setValue(this.dataValue,this.inputEle,this.floatLabelType),this.setProperties(""===n?{text:null}:{text:n},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},t.prototype.setChipValues=function(e,i){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var n=this.createElement("span",{className:w6,attrs:{"data-value":i}}),s=this.createElement("span",{className:QY}),o=this.createElement("span",{className:S6+" e-icons"});s.innerHTML=e,n.appendChild(s),this.chipCollection.appendChild(n),this.showClearButton&&(n.appendChild(o),A.add(o,"mousedown",this.removeChip,this))},t.prototype.setTagValues=function(){if(null!==this.value&&null!=this.text){this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(Ec)||B([this.inputWrapper],Ec);var e=this.createElement("span",{className:w6});this.inputEle.classList.contains(Pl)||B([this.inputEle],Pl),this.chipWrapper.classList.contains(Qr)&&W([this.chipWrapper],Qr);var i=this.createElement("span",{className:QY}),s=this.customTemplateId,l=this.templateComplier(this.customTemplate)({value:this.value,text:this.text},this,"customTemplate",s,this.isStringTemplate,void 0,i);l&&xt(l=Array.prototype.slice.call(l),i),e.appendChild(i),this.chipCollection.appendChild(e)}},t.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(we(this.checkAllParent),this.checkAllParent=null))},t.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),B([this.header],sZ));var i=this.templateComplier(this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);i&&xt(i=Array.prototype.slice.call(i),this.header),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},t.prototype.templateComplier=function(e){if(e)try{return document.querySelectorAll(e).length?qi(document.querySelector(e).innerHTML.trim()):qi(e)}catch{return qi(e)}return qi(e)},t.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),B([this.footer],rZ));var i=this.templateComplier(this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);i&&xt(i=Array.prototype.slice.call(i),this.footer),xt([this.footer],this.popupEle)},t.prototype.clearAll=function(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},t.prototype.removeChip=function(e){if(this.enabled&&!this.readonly){var i=e.target.parentElement,n=i.getAttribute("data-value");this.chipCollection&&i&&$e(i),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(n,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([n]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},t.prototype.resetValue=function(e){this.value==[]&&null==this.text||(ke.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],ui("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.checkedNodes=[],this.treeObj.dataBind(),this.setMultiSelect(),this.clearCheckAll()),null!==this.oldValue||e?e&&this.triggerChangeEvent():this.removeValue=!0,(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},t.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&0===this.value.length&&this.setLocale(!1)},t.prototype.selectAllItems=function(e){if(this.showCheckBox)e?this.treeObj.checkAll():this.treeObj.uncheckAll(),this.checkSelectAll=!0;else if(this.allowMultiSelection)if(e){for(var i=Tt("li",this.treeObj.element),n=void 0,s=[],o=0;o<i.length;o++)n=i[o].getAttribute("data-uid").toString(),s.push(n);this.treeObj.selectedNodes=s}else this.treeObj.selectedNodes=[];this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},t.prototype.updateTreeSettings=function(e){var i=Object.keys(e.treeSettings)[0];if("autoCheck"===i)this.ensureAutoCheck(),this.treeObj.autoCheck=this.treeSettings.autoCheck;else if("loadOnDemand"===i)this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if("expandOn"===i)return this.treeObj.expandOn=this.treeSettings.expandOn,void this.treeObj.dataBind();this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},t.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},t.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},t.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":(this.noRecord=this.createElement("div"),B([this.noRecord],"e-ddt-nodata"),ao([this.noRecord],this.popupDiv)),"No Records Found"!==this.noRecordsTemplate||"The Request Failed"!==this.actionFailureTemplate){var n=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate",a=this.templateComplier(e?this.actionFailureTemplate:this.noRecordsTemplate)({},this,s,n,this.isStringTemplate,void 0,this.noRecord);a&&xt(a=Array.prototype.slice.call(a),this.noRecord)}else this.l10n=new $r(this.getLocaleName(),{noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"},this.locale),this.noRecord.innerHTML=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate")},t.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},t.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:D6+" "+Qr}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},t.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},t.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter()),this.ensureAutoCheck()},t.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},t.prototype.updateValue=function(e){this.isDynamicChange=!0,f(e)||0===e.length?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},t.prototype.updateText=function(e){f(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},t.prototype.updateModelMode=function(){if(this.allowMultiSelection||this.showCheckBox){if(!this.wrapText){var i=he("."+D6,this.inputWrapper);i&&(i.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&0!==this.value.length&&(this.updateOverFlowView(),B([this.inputEle],Pl),"Box"===this.mode?W([this.overFlowWrapper,this.inputWrapper],aT):B([this.overFlowWrapper,this.inputWrapper],aT))}},t.prototype.updateOption=function(){this.hiddenElement.hasAttribute("multiple")||!this.allowMultiSelection&&!this.showCheckBox?this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple"):this.hiddenElement.setAttribute("multiple","")},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":ke.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,i.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":ke.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":ke.removeFloating(this.inputObj),ke.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=i.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;"Custom"===this.mode?(this.overFlowWrapper&&we(this.overFlowWrapper),this.chipWrapper&&we(this.chipWrapper),this.setTagValues()):("Custom"===i.mode&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if("Box"===this.mode)return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if("Custom"!==this.mode)return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),!this.allowMultiSelection&&!this.showCheckBox||this.wrapText?(B([this.overFlowWrapper],Qr),this.chipWrapper&&"Box"===this.mode?W([this.chipWrapper],Qr):(W([this.inputWrapper],Ec),W([this.inputEle],Pl)),this.ensurePlaceHolder()):this.updateView()}},t.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},t.prototype.destroy=function(){this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({value:[]},!0),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),we(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),ke.setValue(null,this.inputEle,this.floatLabelType),we(this.inputWrapper),we(this.popupDiv),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(Pl),r.prototype.destroy.call(this)},t.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),we(this.filterObj.element),we(this.filterContainer),this.filterObj=null)},t.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},t.prototype.getData=function(e){return this.treeObj.getTreeData(e)},t.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove(ZY),this.popupEle&&B([this.popupEle],$N),qe(this.inputWrapper,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&B([this.inputWrapper],[sT])),this.trigger("close",e))},t.prototype.selectAll=function(e){this.selectAllItems(e)},t.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},t.prototype.getModuleName=function(){return"dropdowntree"},Pi([D("The Request Failed")],t.prototype,"actionFailureTemplate",void 0),Pi([D(!1)],t.prototype,"allowFiltering",void 0),Pi([D(!1)],t.prototype,"allowMultiSelection",void 0),Pi([D(!0)],t.prototype,"changeOnBlur",void 0),Pi([D("")],t.prototype,"cssClass",void 0),Pi([D("${value.length} item(s) selected")],t.prototype,"customTemplate",void 0),Pi([D(",")],t.prototype,"delimiterChar",void 0),Pi([D(!0)],t.prototype,"enabled",void 0),Pi([Cn({},vpe)],t.prototype,"fields",void 0),Pi([D(null)],t.prototype,"filterBarPlaceholder",void 0),Pi([D("StartsWith")],t.prototype,"filterType",void 0),Pi([D("Never")],t.prototype,"floatLabelType",void 0),Pi([D(null)],t.prototype,"footerTemplate",void 0),Pi([D(!1)],t.prototype,"ignoreAccent",void 0),Pi([D(!0)],t.prototype,"ignoreCase",void 0),Pi([D(null)],t.prototype,"headerTemplate",void 0),Pi([D({})],t.prototype,"htmlAttributes",void 0),Pi([D(null)],t.prototype,"itemTemplate",void 0),Pi([D("Default")],t.prototype,"mode",void 0),Pi([D("No Records Found")],t.prototype,"noRecordsTemplate",void 0),Pi([D(null)],t.prototype,"placeholder",void 0),Pi([D("300px")],t.prototype,"popupHeight",void 0),Pi([D("100%")],t.prototype,"popupWidth",void 0),Pi([D(!1)],t.prototype,"readonly",void 0),Pi([D(!1)],t.prototype,"showSelectAll",void 0),Pi([D("Select All")],t.prototype,"selectAllText",void 0),Pi([D(!1)],t.prototype,"showCheckBox",void 0),Pi([D(!0)],t.prototype,"showClearButton",void 0),Pi([D(!0)],t.prototype,"showDropDownIcon",void 0),Pi([D("None")],t.prototype,"sortOrder",void 0),Pi([D(null)],t.prototype,"text",void 0),Pi([Cn({},ype)],t.prototype,"treeSettings",void 0),Pi([D("Unselect All")],t.prototype,"unSelectAllText",void 0),Pi([D(null)],t.prototype,"value",void 0),Pi([D("100%")],t.prototype,"width",void 0),Pi([D(1e3)],t.prototype,"zIndex",void 0),Pi([D(!1)],t.prototype,"wrapText",void 0),Pi([K()],t.prototype,"actionFailure",void 0),Pi([K()],t.prototype,"beforeOpen",void 0),Pi([K()],t.prototype,"change",void 0),Pi([K()],t.prototype,"close",void 0),Pi([K()],t.prototype,"blur",void 0),Pi([K()],t.prototype,"created",void 0),Pi([K()],t.prototype,"dataBound",void 0),Pi([K()],t.prototype,"destroyed",void 0),Pi([K()],t.prototype,"filtering",void 0),Pi([K()],t.prototype,"focus",void 0),Pi([K()],t.prototype,"keyPress",void 0),Pi([K()],t.prototype,"open",void 0),Pi([K()],t.prototype,"select",void 0),Pi([an],t)}(ur),Cpe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Bo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},oZ="e-atc-spinner-icon";Di.root="e-combobox";var wpe={container:null,buttons:[]},I6=function(r){function t(e,i){return r.call(this,e,i)||this}return Cpe(t,r),t.prototype.preRender=function(){r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"combo-box"},t.prototype.wireEvent=function(){"combobox"===this.getModuleName()&&(A.add(this.inputWrapper.buttons[0],"mousedown",this.preventBlur,this),A.add(this.inputWrapper.container,"blur",this.onBlurHandler,this)),f(this.inputWrapper.buttons[0])||A.add(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick,this),A.add(this.inputElement,"focus",this.targetFocus,this),this.readonly||(A.add(this.inputElement,"input",this.onInput,this),A.add(this.inputElement,"keyup",this.onFilterUp,this),A.add(this.inputElement,"keydown",this.onFilterDown,this),A.add(this.inputElement,"paste",this.pasteHandler,this)),this.bindCommonEvent()},t.prototype.preventBlur=function(e){(!this.allowFiltering&&document.activeElement!==this.inputElement&&!document.activeElement.classList.contains(Di.input)&&X.isDevice||!X.isDevice)&&e.preventDefault()},t.prototype.onBlurHandler=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;!f(this.listData)&&!f(i)&&i!==this.text&&this.customValue(e),r.prototype.onBlurHandler.call(this,e)},t.prototype.targetElement=function(){return this.inputElement},t.prototype.setOldText=function(e){ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue(),this.removeSelection()},t.prototype.setOldValue=function(e){this.valueMuteChange(this.allowCustom?this.value:null),this.removeSelection(),this.setHiddenValue()},t.prototype.valueMuteChange=function(e){var i=f(e)?null:e.toString();ke.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e,text:e,index:null},!0),this.activeIndex=this.index;var n=this.fields,s={};s[n.text]=f(e)?null:e.toString(),s[n.value]=f(e)?null:e.toString(),this.itemData=s,this.item=null,this.previousValue!==this.value&&this.detachChangeEvent(null)},t.prototype.updateValues=function(){if(f(this.value))if(this.text&&f(this.value)){var e;(e=this.getElementByText(this.text))?this.setSelection(e,null):(ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.customValue())}else this.setSelection(this.liCollections[this.activeIndex],null);else(e=this.getElementByValue(this.value))?this.setSelection(e,null):this.valueMuteChange(this.allowCustom?this.value:null);this.setHiddenValue(),ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement&&""!==this.inputElement.value&&!this.readonly?W([this.inputWrapper.clearButton],Di.clearIconHide):B([this.inputWrapper.clearButton],Di.clearIconHide))},t.prototype.getAriaAttributes=function(){return{role:"combobox","aria-autocomplete":"both","aria-labelledby":this.hiddenElement.id,"aria-expanded":"false","aria-readonly":this.readonly.toString(),autocomplete:"off",autocapitalize:"off",spellcheck:"false"}},t.prototype.searchLists=function(e){this.isTyped=!0,this.isFiltering()?(r.prototype.searchLists.call(this,e),this.ulElement&&""===this.filterInput.value.trim()&&this.setHoverList(this.ulElement.querySelector("."+Di.li))):(this.ulElement&&""===this.inputElement.value&&this.preventAutoFill&&this.setHoverList(this.ulElement.querySelector("."+Di.li)),this.incrementalSearch(e))},t.prototype.getNgDirective=function(){return"EJS-COMBOBOX"},t.prototype.setSearchBox=function(){return this.filterInput=this.inputElement,this.isFiltering()?this.inputWrapper:wpe},t.prototype.onActionComplete=function(e,i,n,s){var o=this;r.prototype.onActionComplete.call(this,e,i,n),this.isSelectCustom&&this.removeSelection(),!this.preventAutoFill&&"combobox"===this.getModuleName()&&this.isTyped&&setTimeout(function(){o.inlineSearch()})},t.prototype.getFocusElement=function(){var e=this.isSelectCustom?{text:""}:this.getItemData(),i=this.list.querySelector("."+Di.selected);if(e.text===this.inputElement.value&&!f(i))return i;if((X.isDevice&&!this.isDropDownClick||!X.isDevice)&&!f(this.liCollections)&&this.liCollections.length>0){var s=this.inputElement.value,o=this.sortedData,a=this.typeOfData(o).typeof,h=ew(s,this.liCollections,this.filterType,!0,o,this.fields,a).item;if(f(h))this.isSelectCustom&&""!==this.inputElement.value.trim()&&(this.removeFocus(),this.list.scrollTop=0);else{var u=this.getIndexByValue(h.getAttribute("data-value"))-1,p=parseInt(getComputedStyle(this.liCollections[0],null).getPropertyValue("height"),10);isNaN(p)||"autocomplete"===this.getModuleName()||(this.removeFocus(),this.list.scrollTop=u*p+(this.fields.groupBy?this.liCollections[0].offsetHeight:0),B([h],Di.focus))}return h}return null},t.prototype.setValue=function(e){return e&&"keydown"===e.type&&"enter"===e.action&&this.removeFillSelection(),this.autofill&&"combobox"===this.getModuleName()&&e&&"keydown"===e.type&&"enter"!==e.action?(this.preventAutoFill=!1,this.inlineSearch(e),!1):r.prototype.setValue.call(this,e)},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.allowCustom&&f(e.value)&&f(e.text)||this.setProperties({value:e.value},!this.allowCustom)},t.prototype.showSpinner=function(){f(this.spinnerElement)&&(this.spinnerElement="autocomplete"===this.getModuleName()?this.inputWrapper.buttons[0]||this.inputWrapper.clearButton||ke.appendSpan("e-input-group-icon "+oZ,this.inputWrapper.container,this.createElement):this.inputWrapper.buttons[0]||this.inputWrapper.clearButton,B([this.spinnerElement],Di.disableIcon),bc({target:this.spinnerElement,width:X.isDevice?"16px":"14px"},this.createElement),Ul(this.spinnerElement))},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],Di.disableIcon),this.spinnerElement.classList.contains(oZ)?we(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.setAutoFill=function(e,i){if(i||this.setHoverList(e),this.autofill&&!this.preventAutoFill){var n=this.getTextByValue(e.getAttribute("data-value")).toString(),s=this.getFormattedValue(e.getAttribute("data-value"));"combobox"===this.getModuleName()&&(this.isSelected||this.previousValue===s?this.updateSelectedItem(e,null,!0):(this.updateSelectedItem(e,null),this.isSelected=!0,this.previousValue=this.getFormattedValue(e.getAttribute("data-value")))),this.isAndroidAutoFill(n)||this.setAutoFillSelection(n,i)}},t.prototype.isAndroidAutoFill=function(e){if(X.isAndroid){var i=this.getSelectionPoints(),n=this.prevSelectPoints.end,s=i.end,o=this.prevSelectPoints.start,a=i.start;return 0!==n&&(n===e.length&&o===e.length||o>a&&n>s||n===s&&o===a)}return!1},t.prototype.clearAll=function(e,i){(f(i)||!f(i)&&f(i.dataSource))&&r.prototype.clearAll.call(this,e),this.isFiltering()&&!f(e)&&e.target===this.inputWrapper.clearButton&&this.searchLists(e)},t.prototype.isSelectFocusItem=function(e){return!f(e)},t.prototype.inlineSearch=function(e){var i=e&&("down"===e.action||"up"===e.action||"home"===e.action||"end"===e.action||"pageUp"===e.action||"pageDown"===e.action),n=i?this.liCollections[this.activeIndex]:this.getFocusElement();if(f(n))if(""===this.inputElement.value){this.activeIndex=null,this.list.scrollTop=0;var o=this.list.querySelector("."+Di.li);this.setHoverList(o)}else this.activeIndex=null,this.removeSelection(),this.liCollections&&this.liCollections.length>0&&!this.isCustomFilter&&this.removeFocus();else{if(!i){var s=this.getFormattedValue(n.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(s),this.activeIndex=f(this.activeIndex)?null:this.activeIndex}this.preventAutoFill=""!==this.inputElement.value&&this.preventAutoFill,this.setAutoFill(n,i)}},t.prototype.incrementalSearch=function(e){this.showPopup(e),f(this.listData)||(this.inlineSearch(e),e.preventDefault())},t.prototype.setAutoFillSelection=function(e,i){void 0===i&&(i=!1);var n=this.getSelectionPoints(),s=this.inputElement.value.substr(0,n.start);if(s&&s.toLowerCase()===e.substr(0,n.start).toLowerCase()){var o=s+e.substr(s.length,e.length);ke.setValue(o,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(n.start,this.inputElement.value.length)}else i&&(ke.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton),this.inputElement.setSelectionRange(0,this.inputElement.value.length))},t.prototype.getValueByText=function(e){return r.prototype.getValueByText.call(this,e,!0,this.ignoreAccent)},t.prototype.unWireEvent=function(){"combobox"===this.getModuleName()&&(A.remove(this.inputWrapper.buttons[0],"mousedown",this.preventBlur),A.remove(this.inputWrapper.container,"blur",this.onBlurHandler)),f(this.inputWrapper.buttons[0])||A.remove(this.inputWrapper.buttons[0],"mousedown",this.dropDownClick),this.inputElement&&(A.remove(this.inputElement,"focus",this.targetFocus),this.readonly||(A.remove(this.inputElement,"input",this.onInput),A.remove(this.inputElement,"keyup",this.onFilterUp),A.remove(this.inputElement,"keydown",this.onFilterDown),A.remove(this.inputElement,"paste",this.pasteHandler))),this.unBindCommonEvent()},t.prototype.setSelection=function(e,i){r.prototype.setSelection.call(this,e,i),!f(e)&&!this.autofill&&!this.isDropDownClick&&this.removeFocus()},t.prototype.selectCurrentItem=function(e){var i;this.isPopupOpen&&((i=this.list.querySelector(this.isSelected?"."+Di.selected:"."+Di.focus))&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e))),"enter"===e.action&&""===this.inputElement.value.trim()?this.clearAll(e):this.isTyped&&!this.isSelected&&f(i)&&this.customValue(e),this.hidePopup(e)},t.prototype.setHoverList=function(e){this.removeSelection(),this.isValidLI(e)&&!e.classList.contains(Di.selected)&&(this.removeFocus(),e.classList.add(Di.focus))},t.prototype.targetFocus=function(e){X.isDevice&&!this.allowFiltering&&(this.preventFocus=!1),this.onFocus(e),ke.calculateWidth(this.inputElement,this.inputWrapper.container)},t.prototype.dropDownClick=function(e){e.preventDefault(),X.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),r.prototype.dropDownClick.call(this,e)},t.prototype.customValue=function(e){var i=this,n=this.getValueByText(this.inputElement.value);if(this.allowCustom||""===this.inputElement.value)if(""!==this.inputElement.value.trim()){var a=this.value;if(f(n)){var l=""===this.inputElement.value?null:this.inputElement.value,h={text:l,item:{}};this.initial?this.updateCustomValueCallback(l,h,a):this.trigger("customValueSpecifier",h,function(u){i.updateCustomValueCallback(l,u,a,e)})}else this.isSelectCustom=!1,this.setProperties({value:n}),a!==this.value&&this.onChangeEvent(e)}else this.allowCustom&&(this.isSelectCustom=!0);else{var s=this.previousValue,o=this.value;this.setProperties({value:n}),f(this.value)&&ke.setValue("",this.inputElement,this.floatLabelType,this.showClearButton),this.autofill&&s===this.value&&o!==this.value&&this.onChangeEvent(null)}},t.prototype.updateCustomValueCallback=function(e,i,n,s){var o=this.fields,a=i.item,l={};a&&re(o.text,a)&&re(o.value,a)?l=a:(ui(o.text,e,l),ui(o.value,e,l)),this.itemData=l;var h={text:re(o.text,this.itemData),value:re(o.value,this.itemData),index:null};this.setProperties(h,!0),this.setSelection(null,null),this.isSelectCustom=!0,n!==this.value&&this.onChangeEvent(s)},t.prototype.onPropertyChanged=function(e,i){"combobox"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"readonly":ke.setReadonly(this.readonly,this.inputElement),this.readonly?(A.remove(this.inputElement,"input",this.onInput),A.remove(this.inputElement,"keyup",this.onFilterUp),A.remove(this.inputElement,"keydown",this.onFilterDown)):(A.add(this.inputElement,"input",this.onInput,this),A.add(this.inputElement,"keyup",this.onFilterUp,this),A.add(this.inputElement,"keydown",this.onFilterDown,this)),this.setReadOnly();break;case"allowFiltering":this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&r.prototype.renderList.call(this);break;case"allowCustom":break;default:var a=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,a.newProperty,a.oldProperty),this.isFiltering()&&"dataSource"===o&&f(this.list)&&this.itemTemplate&&"combobox"===this.getModuleName()&&r.prototype.renderList.call(this)}}},t.prototype.render=function(){r.prototype.render.call(this),this.setSearchBox(),this.isFiltering()&&"combobox"===this.getModuleName()&&f(this.list)&&r.prototype.renderList.call(this),this.renderComplete()},t.prototype.getModuleName=function(){return"combobox"},t.prototype.addItem=function(e,i){r.prototype.addItem.call(this,e,i)},t.prototype.filter=function(e,i,n){r.prototype.filter.call(this,e,i,n)},t.prototype.showPopup=function(e){r.prototype.showPopup.call(this,e)},t.prototype.hidePopup=function(e){var i=this.inputElement&&""===this.inputElement.value?null:this.inputElement&&this.inputElement.value;if(!f(this.listData)){var n=this.isEscapeKey;this.isEscapeKey&&(ke.setValue(this.typedString,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1),this.autofill&&this.removeFillSelection();var s=this.isSelectCustom?{text:""}:this.getItemData(),o=this.list.querySelector("."+Di.selected);if(this.inputElement&&s.text===this.inputElement.value&&!f(o))return this.isSelected&&(this.onChangeEvent(e),this.isSelectCustom=!1),void r.prototype.hidePopup.call(this,e);if("combobox"===this.getModuleName()&&""!==this.inputElement.value.trim()){var a=this.sortedData,l=this.typeOfData(a).typeof,h=ew(this.inputElement.value,this.liCollections,"Equal",!0,a,this.fields,l);this.selectedLI=h.item,f(h.index)&&(h.index=ew(this.inputElement.value,this.liCollections,"StartsWith",!0,a,this.fields,l).index),this.activeIndex=h.index,f(this.selectedLI)?n&&(this.isSelectCustom=!0,this.removeSelection()):this.updateSelectedItem(this.selectedLI,null,!0)}!this.isEscapeKey&&this.isTyped&&!this.isInteracted&&this.customValue(e)}f(this.listData)&&this.allowCustom&&!f(i)&&i!==this.value&&this.customValue(),r.prototype.hidePopup.call(this,e)},t.prototype.focusIn=function(){!this.enabled||(X.isDevice&&!this.isFiltering()&&(this.preventFocus=!0),r.prototype.focusIn.call(this))},t.prototype.clear=function(){this.value=null},t.prototype.focusOut=function(e){r.prototype.focusOut.call(this,e)},t.prototype.getItems=function(){return r.prototype.getItems.call(this)},t.prototype.getDataByValue=function(e){return r.prototype.getDataByValue.call(this,e)},t.prototype.renderHightSearch=function(){},Bo([D(!1)],t.prototype,"autofill",void 0),Bo([D(!0)],t.prototype,"allowCustom",void 0),Bo([D({})],t.prototype,"htmlAttributes",void 0),Bo([D(!1)],t.prototype,"allowFiltering",void 0),Bo([D(null)],t.prototype,"query",void 0),Bo([D(null)],t.prototype,"index",void 0),Bo([D(!0)],t.prototype,"showClearButton",void 0),Bo([D(!1)],t.prototype,"enableRtl",void 0),Bo([K()],t.prototype,"customValueSpecifier",void 0),Bo([K()],t.prototype,"filtering",void 0),Bo([D(null)],t.prototype,"valueTemplate",void 0),Bo([D("Never")],t.prototype,"floatLabelType",void 0),Bo([D(null)],t.prototype,"filterBarPlaceholder",void 0),Bo([D(null)],t.prototype,"cssClass",void 0),Bo([D(null)],t.prototype,"headerTemplate",void 0),Bo([D(null)],t.prototype,"footerTemplate",void 0),Bo([D(null)],t.prototype,"placeholder",void 0),Bo([D("100%")],t.prototype,"width",void 0),Bo([D("300px")],t.prototype,"popupHeight",void 0),Bo([D("100%")],t.prototype,"popupWidth",void 0),Bo([D(!1)],t.prototype,"readonly",void 0),Bo([D(null)],t.prototype,"text",void 0),Bo([D(null)],t.prototype,"value",void 0),Bo([an],t)}(Ky),Spe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yl=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s};Di.root="e-autocomplete",Di.icon="e-input-group-icon e-ddl-icon e-search-icon";var QN=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFiltered=!1,n.searchList=!1,n}return Spe(t,r),t.prototype.preRender=function(){r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"auto-complete"},t.prototype.getNgDirective=function(){return"EJS-AUTOCOMPLETE"},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new ni,n=""!==this.queryString||f(this.value)?this.filterType:"equal",s=""!==this.queryString||f(this.value)?this.queryString:this.value;if(this.isFiltered)return i;if(null!==this.queryString&&""!==this.queryString){var o=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Xe||"string"!==o)&&"number"!==o){var a=f(this.fields.value)?"":this.fields.value;i.where(a,n,s,this.ignoreCase,this.ignoreAccent)}else i.where("",n,s,this.ignoreCase,this.ignoreAccent)}if(!f(this.suggestionCount)){if(20!==this.suggestionCount)for(var l=0;l<i.queries.length;l++)"onTake"===i.queries[l].fn&&i.queries.splice(l,1);i.take(this.suggestionCount)}return i},t.prototype.searchLists=function(e){var i=this;if(this.isTyped=!0,this.isDataFetched=this.isSelectCustom=!1,f(this.list)&&r.prototype.renderList.call(this,e,!0),this.queryString=this.filterInput.value,"mousedown"!==e.type&&(40===e.keyCode||38===e.keyCode))return this.queryString=""===this.queryString?null:this.queryString,this.beforePopupOpen=!0,void this.resetList(this.dataSource,this.fields,null,e);this.isSelected=!1,this.activeIndex=null;var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(s,o,a){n.cancel||(i.isFiltered=!0,i.filterAction(s,o,a))},cancel:!1};this.trigger("filtering",n,function(s){!s.cancel&&!i.isFiltered&&!s.preventDefaultAction&&(i.searchList=!0,i.filterAction(i.dataSource,null,i.fields,e))})},t.prototype.filter=function(e,i,n){this.isFiltered=!0,this.filterAction(e,i,n)},t.prototype.filterAction=function(e,i,n,s){this.beforePopupOpen=!0,""!==this.queryString&&this.queryString.length>=this.minLength?this.resetList(e,n,i,s):(this.hidePopup(s),this.beforePopupOpen=!1),this.renderReactTemplates()},t.prototype.clearAll=function(e,i){(f(i)||!f(i)&&f(i.dataSource))&&r.prototype.clearAll.call(this,e),this.beforePopupOpen&&this.hidePopup()},t.prototype.onActionComplete=function(e,i,n,s){this.fixedHeaderElement=null,r.prototype.onActionComplete.call(this,e,i,n);var o=this.list.querySelector("."+Di.li);f(o)||W([o],Di.focus),this.postBackAction()},t.prototype.postBackAction=function(){if(this.autofill&&!f(this.liCollections[0])&&this.searchList){var e=[this.liCollections[0]],i=this.listData,n=this.typeOfData(i).typeof,s=ew(this.inputElement.value,e,"StartsWith",this.ignoreCase,i,this.fields,n);this.searchList=!1,f(s.item)||r.prototype.setAutoFill.call(this,this.liCollections[0],!0)}},t.prototype.setSelection=function(e,i){if(this.isValidLI(e))if(!f(i)&&"keydown"===i.type&&"enter"!==i.action&&"tab"!==i.action&&this.isValidLI(e)){var n=this.getFormattedValue(e.getAttribute("data-value"));this.activeIndex=this.getIndexByValue(n),this.setHoverList(e),this.selectedLI=e,this.setScrollPosition(i),this.autofill&&this.isPopupOpen&&(this.preventAutoFill=!1,r.prototype.setAutoFill.call(this,e,i&&"down"===i.action||"up"===i.action||"home"===i.action||"end"===i.action||"pageUp"===i.action||"pageDown"===i.action))}else r.prototype.setSelection.call(this,e,i);else this.selectedLI=e},t.prototype.listOption=function(e,i){var n=this,s=r.prototype.listOption.call(this,e,i);if(f(s.itemCreated))s.itemCreated=function(a){n.highlight&&(n.element.tagName===n.getNgDirective()&&n.itemTemplate?setTimeout(function(){Gy(a.item,n.queryString,n.ignoreCase,n.filterType)},0):Gy(a.item,n.queryString,n.ignoreCase,n.filterType))};else{var o=s.itemCreated;s.itemCreated=function(a){n.highlight&&Gy(a.item,n.queryString,n.ignoreCase,n.filterType),o.apply(n,[a])}}return s},t.prototype.isFiltering=function(){return!0},t.prototype.renderPopup=function(e){this.list.scrollTop=0,r.prototype.renderPopup.call(this,e)},t.prototype.isEditTextBox=function(){return""!==this.inputElement.value.trim()},t.prototype.isPopupButton=function(){return this.showPopupButton},t.prototype.isSelectFocusItem=function(e){return!1},t.prototype.setInputValue=function(e,i){var n=i&&i.text?i.text:i&&i.value,s=e&&e.text?e.text:e&&e.value?e.value:this.value;if(!s||""!==this.typedString||this.allowCustom||this.dataSource instanceof Xe)e&&(e.text?this.setOldText(n):this.setOldValue(n));else{var o="string"===this.typeOfData(this.dataSource).typeof?"":this.fields.value,a=this.getItems().length,l=new ni,h=this;new Xe(this.dataSource).executeQuery(l.where(new Mn(o,"equal",s))).then(function(u){u.result.length>0?(h.value=""!==o?u.result[0][h.fields.value].toString():u.result[0].toString(),h.addItem(u.result,a),h.updateValues()):e&&e.text?h.setOldText(n):e&&e.value?h.setOldValue(n):h.updateValues()})}},t.prototype.showPopup=function(e){if(this.enabled){if(this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.preventAutoFill=!0,f(this.list)?this.renderList(e):this.resetList(this.dataSource,this.fields,null,e)}},t.prototype.hidePopup=function(e){r.prototype.hidePopup.call(this,e),this.activeIndex=-1},t.prototype.onPropertyChanged=function(e,i){"autocomplete"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e);for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];if("showPopupButton"===o)if(this.showPopupButton){var a=ke.appendSpan(Di.icon,this.inputWrapper.container,this.createElement);this.inputWrapper.buttons[0]=a,ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),this.inputWrapper&&this.inputWrapper.buttons&&this.inputWrapper.buttons[0]&&A.add(this.inputWrapper.buttons[0],"click",this.dropDownClick,this)}else we(this.inputWrapper.buttons[0]),this.inputWrapper.buttons[0]=null;else{var l=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty)}}},t.prototype.renderHightSearch=function(){if(this.highlight)for(var e=0;e<this.liCollections.length;e++)this.ulElement.querySelector(".e-active")||(UY(this.liCollections[e]),Gy(this.liCollections[e],this.queryString,this.ignoreCase,this.filterType))},t.prototype.getModuleName=function(){return"autocomplete"},t.prototype.render=function(){r.prototype.render.call(this)},Yl([Cn({value:null,iconCss:null,groupBy:null},GN)],t.prototype,"fields",void 0),Yl([D(!0)],t.prototype,"ignoreCase",void 0),Yl([D(!1)],t.prototype,"showPopupButton",void 0),Yl([D(!1)],t.prototype,"highlight",void 0),Yl([D(20)],t.prototype,"suggestionCount",void 0),Yl([D({})],t.prototype,"htmlAttributes",void 0),Yl([D(null)],t.prototype,"query",void 0),Yl([D(1)],t.prototype,"minLength",void 0),Yl([D("Contains")],t.prototype,"filterType",void 0),Yl([K()],t.prototype,"filtering",void 0),Yl([D(null)],t.prototype,"index",void 0),Yl([D("Never")],t.prototype,"floatLabelType",void 0),Yl([D(null)],t.prototype,"valueTemplate",void 0),Yl([D(null)],t.prototype,"filterBarPlaceholder",void 0),Yl([D(!1)],t.prototype,"allowFiltering",void 0),Yl([D(null)],t.prototype,"text",void 0),Yl([an],t)}(I6),A6="e-float-line",LR="e-float-text",hT="e-label-top",iw="e-label-bottom";function aZ(r,t,e,i,n,s,o){var a=si("span",{className:A6}),l=si("label",{className:LR}),h=e.getAttribute("id")?e.getAttribute("id"):Sn("ej2_multiselect");e.id=h,!f(e.id)&&""!==e.id&&(l.id="label_"+e.id.replace(/ /g,"_"),qe(i,{"aria-labelledby":l.id})),!f(i.placeholder)&&""!==i.placeholder&&(l.innerText=k6(i.placeholder),i.removeAttribute("placeholder")),l.innerText=k6(o),t.appendChild(a),t.appendChild(l),r.classList.add("e-float-input"),function Epe(r,t){r&&r.length>0?(B([t],hT),W([t],iw)):(W([t],hT),B([t],iw))}(n,l),"Always"===s&&(l.classList.contains(iw)&&W([l],iw),B([l],hT))}function lZ(r,t,e){t.placeholder=r&&r.length?"":e}function k6(r){var t="";if(!f(r)&&""!==r){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+r+'"/>',t=e.children[0].placeholder}return t}var $6,Ipe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xi=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},nw="e-input-focus",hZ="e-disabled",eo="e-hide-listitem",uT="e-chips",XN="e-chips-close",cT="e-chip-selected",uZ="e-delimiter",JN="e-zero-size",cZ="e-chips-close e-close-hooker",dZ="e-delim-values",R6="e-close-icon-hide",fZ="e-ddl-disable-icon",gZ="e-ms-spinner-icon",mZ="e-input-group-icon e-ddl-icon",vZ="e-icon-anim",eB="e-delim-total",yZ="e-search-custom-width",tB="e-input-filter",bZ=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.clearIconWidth=0,n.previousFilterText="",n.isValidKey=!1,n.selectAllEventData=[],n.selectAllEventEle=[],n.scrollFocusStatus=!1,n.keyDownStatus=!1,n}return Ipe(t,r),t.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add("e-rtl"):this.overAllWrapper.classList.remove("e-rtl"),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},t.prototype.requiredModules=function(){var e=[];if("CheckBox"===this.mode){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=i}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},t.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];switch(n){case"class":var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&(B([this.overAllWrapper],s.split(" ")),B([this.popupWrapper],s.split(" ")));break;case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(n,this.htmlAttributes[n]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:["id"].indexOf(n)>-1?this.element.setAttribute(n,this.htmlAttributes[n]):0===n.indexOf("data")||["name","required","aria-required","form"].indexOf(n)>-1?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):["title","role","style","class"].indexOf(n)>-1?this.overAllWrapper.setAttribute(n,this.htmlAttributes[n]):"size"!==n&&this.inputElement.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.updateReadonly=function(e){e||"CheckBox"===this.mode?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly")},t.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(R6)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(R6))},t.prototype.updateCssClass=function(){if(!f(this.cssClass)&&""!==this.cssClass){var e=this.cssClass;""!==(e=this.cssClass.replace(/\s+/g," ").trim())&&(B([this.overAllWrapper],e.split(" ")),B([this.popupWrapper],e.split(" ")))}},t.prototype.updateOldPropCssClass=function(e){!f(e)&&""!==e&&""!==(e=e.replace(/\s+/g," ").trim())&&(W([this.overAllWrapper],e.split(" ")),W([this.popupWrapper],e.split(" ")))},t.prototype.onPopupShown=function(e){var i=this;if(X.isDevice&&"CheckBox"===this.mode&&this.allowFiltering){var n=this;window.onpopstate=function(){n.hidePopup(),n.inputElement.focus()},history.pushState({},"")}this.trigger("open",{popup:this.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}},function(a){a.cancel||(i.focusAtFirstListItem(),document.body.appendChild(i.popupObj.element),"CheckBox"===i.mode&&i.enableGroupCheckBox&&!f(i.fields.groupBy)&&i.updateListItems(i.list.querySelectorAll("li.e-list-item"),i.mainList.querySelectorAll("li.e-list-item")),("CheckBox"===i.mode||i.showDropDownIcon)&&B([i.overAllWrapper],[vZ]),i.refreshPopup(),i.renderReactTemplates(),i.popupObj.show(a.animation,1e3===i.zIndex?i.element:null),qe(i.inputElement,{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.updateAriaActiveDescendant(),i.isFirstClick&&i.loadTemplate())})},t.prototype.updateListItems=function(e,i){for(var n=0;n<e.length;n++)this.findGroupStart(e[n]),this.findGroupStart(i[n]);this.deselectHeader()},t.prototype.loadTemplate=function(){this.refreshListItems(null),"CheckBox"===this.mode&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this})},t.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&"CheckBox"!==this.mode||"CheckBox"===this.mode&&!this.enableSelectionOrder)&&!f(this.value)&&this.value.length>0){var e=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",this.value[this.value.length-1]);f(e)||this.scrollBottom(e)}},t.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+et_li)){var e;if("CheckBox"===this.mode)return void this.removeFocus();null!==(e=this.ulElement.querySelector("li."+et_li+":not(."+eo+")"))&&(this.removeFocus(),this.addListFocus(e))}},t.prototype.focusAtLastListItem=function(e){var i;e?i=ew(e,this.liCollections,"StartsWith",this.ignoreCase):this.value&&this.value.length?ew(this.value[this.value.length-1],this.liCollections,"StartsWith",this.ignoreCase):i=null,i&&null!==i.item&&(this.addListFocus(i.item),this.scrollBottom(i.item,i.index))},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false"}},t.prototype.updateListARIA=function(){f(this.ulElement)||qe(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"});var e=!!this.inputElement.disabled;this.isPopupOpen()||qe(this.inputElement,this.getAriaAttributes()),e&&qe(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},t.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var i=this.htmlAttributes;de(i,{"aria-disabled":e},i),this.setProperties({htmlAttributes:i},!0)}},t.prototype.removelastSelection=function(e){var i=this.chipCollectionWrapper.querySelectorAll("span."+uT),n=i[i.length-1].getAttribute("data-value");f(this.value)||(this.tempValues=this.value.slice());var s=this.getFormattedValue(n);this.allowCustomValue&&("false"!==n&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=n),this.removeValue(s,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},t.prototype.onActionFailure=function(e){r.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},t.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,"CheckBox"===this.mode&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.targetInputElement.value},t.prototype.getForQuery=function(e){for(var i,n=f(this.fields.value)?this.fields.text:this.fields.value,s=0;s<e.length;s++)i=0===s?new Mn(n,"equal",e[s]):i.or(n,"equal",e[s]);return this.getQuery(this.query).where(i)},t.prototype.onActionComplete=function(e,i,n,s){if(r.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),!f(this.value)&&!this.allowCustomValue)for(var a=0;a<this.value.length;a++)!this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",this.value[a])&&!(this.dataSource instanceof Xe)&&(this.value.splice(a,1),a-=1);var h=[];!f(this.value)&&!this.allowCustomValue&&(h=this.presentItemValue(this.ulElement)),h.length>0&&this.dataSource instanceof Xe&&!f(this.value)&&null!=this.listData?this.addNonPresentItems(h,this.ulElement,this.listData):this.updateActionList(e,i,n),this.dataSource instanceof Xe&&"CheckBox"===this.mode&&this.allowFiltering&&this.removeFocus()},t.prototype.updateActionList=function(e,i,n,s){"CheckBox"===this.mode&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.mainList||this.mainData?(f(this.mainData)||0===this.mainData.length)&&(this.mainData=i):(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=i,this.mainListCollection=this.liCollections),(this.remoteCustomValue||i.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&""!==this.inputElement.value?this.checkForCustomValue(this.tempQuery,this.fields):(this.value&&this.value.length&&("CheckBox"!==this.mode&&""!==this.inputElement.value.trim()||"CheckBox"===this.mode||(8===this.keyCode||46===this.keyCode)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof Xe&&""===this.inputElement.value)&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),f(this.setInitialValue)||this.setInitialValue(),f(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(n)))},t.prototype.refreshSelection=function(){var e,i,n=this.hideSelectedItem?eo:"e-active";if(!f(this.value))for(var s=0;!f(this.value[s]);s++)if(i=this.findListElement(this.list,"li","data-value",e=this.value[s])){if(B([i],n),this.hideSelectedItem&&i.previousSibling&&i.previousElementSibling.classList.contains(et_group)&&(!i.nextElementSibling||i.nextElementSibling.classList.contains(et_group))&&B([i.previousElementSibling],n),this.hideSelectedItem&&this.fields.groupBy&&!i.previousElementSibling.classList.contains(eo)&&this.hideGroupItem(e),this.hideSelectedItem&&i.classList.contains(et_focus)){W([i],et_focus);var o=i.parentElement.querySelectorAll("."+et_li+":not(."+eo+")");o.length>0?(B([o[0]],et_focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+et_li).length>0||(this.l10nUpdate(),B([this.list],"e-nodata"))}if(i.setAttribute("aria-selected","true"),"CheckBox"===this.mode&&i.classList.contains("e-active")){var a=i.firstElementChild.getAttribute("aria-checked");(f(a)||"false"===a)&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:i,e:null})}}this.checkSelectAll(),this.checkMaxSelection()},t.prototype.hideGroupItem=function(e){var i,n,s=this.hideSelectedItem?eo:"e-active";n=i=this.findListElement(this.ulElement,"li","data-value",e);var o=0,a=0,l=!0,h=!0;do{i&&i.previousElementSibling&&!i.previousElementSibling.classList.contains(eo)&&i.previousElementSibling.classList.contains(et_li)&&(l=!1),!l||!i||i.previousElementSibling&&i.previousElementSibling.classList.contains(et_group)?o=10:i=i.previousElementSibling,n&&n.nextElementSibling&&!n.nextElementSibling.classList.contains(eo)&&n.nextElementSibling.classList.contains(et_li)&&(h=!1),!h||!n||n.nextElementSibling&&n.nextElementSibling.classList.contains(et_group)?a=10:n=n.nextElementSibling}while(o<10||a<10);l&&h&&!i.previousElementSibling.classList.contains(eo)?B([i.previousElementSibling],s):l&&h&&i.previousElementSibling.classList.contains(eo)&&W([i.previousElementSibling],s)},t.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+et_li+":not(."+eo+")");return f(e)?this.liCollections[0]:e},t.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,i=this.list.querySelectorAll("li.e-list-item"),n=this.list.querySelectorAll("li."+et_li).length,s=this.list.querySelectorAll("li.e-active").length;if(this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(s-=e),n!==s&&s!==this.maximumSelectionLength||"CheckBox"!==this.mode||!this.showSelectAll?n!==s&&"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}):this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"check"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var o=0;o<i.length;o++)this.findGroupStart(i[o]);this.deselectHeader()}},t.prototype.openClick=function(e){this.openOnClick||"CheckBox"===this.mode?!this.openOnClick&&"CheckBox"===this.mode&&!this.isPopupOpen()&&this.showPopup():""!==this.targetElement()?this.showPopup():this.hidePopup(e)},t.prototype.keyUp=function(e){"CheckBox"!==this.mode||this.openOnClick||f(String.fromCharCode(e.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=this.isPopupOpen()&&8===e.keyCode||this.isValidKey,this.isValidKey=(!e.ctrlKey||86!==e.keyCode)&&this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),this.search(e))},t.prototype.filter=function(e,i,n){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,i,n)},t.prototype.getQuery=function(e){var i=e?e.clone():this.query?this.query.clone():new ni;if(this.isFiltered)return i;if(this.filterAction){if(null!==this.targetElement()){var n=this.typeOfData(this.dataSource).typeof;if((this.dataSource instanceof Xe||"string"!==n)&&"number"!==n){var s=this.fields;i.where(f(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}else i.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}return i}return e||(this.query?this.query:new ni)},t.prototype.dataUpdater=function(e,i,n){if(this.isDataFetched=!1,""===this.targetElement().trim()){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.backCommand&&(this.remoteCustomValue=!1,this.allowCustomValue&&0==s.querySelectorAll("li").length&&this.mainData.length>0&&(this.mainData=[]),this.onActionComplete(s,this.mainData),this.value&&this.value.length&&this.refreshSelection(),8!==this.keyCode&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,e:this}))}else this.resetList(e,n,i),this.allowCustomValue&&(e instanceof Xe?(this.remoteCustomValue=!0,this.tempQuery=i):this.checkForCustomValue(i,n));this.refreshPopup(),"CheckBox"===this.mode&&this.removeFocus()},t.prototype.checkForCustomValue=function(e,i){var n=!this.getValueByText(this.inputElement.value,this.ignoreCase);if(this.allowCustomValue&&n){var s=this.inputElement.value,o=i||this.fields,a=!f(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if("string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a){var l={};ui(o.text,s,l),"number"==typeof re(this.fields.value?this.fields.value:"value",a)?ui(o.value,Math.random(),l):ui(o.value,s,l),(h=JSON.parse(JSON.stringify(this.listData))).splice(0,0,l),this.resetList(h,o,e)}else{var h;(h=JSON.parse(JSON.stringify(this.listData))).splice(0,0,this.inputElement.value),h[0]="number"!=typeof a||isNaN(parseFloat(h[0]))?h[0]:parseFloat(h[0]),h[0]="boolean"==typeof a?"true"===h[0]||"false"!==h[0]&&h[0]:h[0],this.resetList(h,o)}}this.value&&this.value.length&&this.refreshSelection()},t.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},t.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.enabled){if(e.target===this.overAllClear)return void e.preventDefault();if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&-1!==e.target.classList.toString().indexOf(XN))return void(this.isPopupOpen()&&this.refreshPopup());!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===mZ)?this.showPopup(e):(this.hidePopup(e),"CheckBox"===this.mode&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(nw)||this.overAllWrapper.classList.add(nw)))}this.targetElement()&&""!==this.targetElement()||e.preventDefault()}},t.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(hZ),this.inputElement.removeAttribute("disabled"),qe(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(hZ),this.inputElement.setAttribute("disabled","true"),qe(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},t.prototype.onBlurHandler=function(e,i){var n;if(f(e)||(n=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(n))"CheckBox"!==this.mode?this.inputElement.focus():"Auto"===this.floatLabelType&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&B([this.overAllWrapper],"e-valid-input");else{if("Auto"===this.floatLabelType&&this.overAllWrapper.classList.contains("e-outline")&&"CheckBox"===this.mode&&(f(this.value)||0===this.value.length)&&W([this.overAllWrapper],"e-valid-input"),"CheckBox"===this.mode&&X.isIE&&!f(e)&&!i)return this.inputFocus=!1,void this.overAllWrapper.classList.remove(nw);if(this.scrollFocusStatus)return f(e)||e.preventDefault(),this.inputElement.focus(),void(this.scrollFocusStatus=!1);if(this.inputFocus=!1,this.overAllWrapper.classList.remove(nw),this.addTagOnBlur){var s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),o=this.findListElement(this.list,"li","data-value",s);o&&!o.classList.contains(this.hideSelectedItem?eo:"e-active")&&(this.updateListSelection(o,e),"Delimiter"===this.mode&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.refreshListItems(null),"Box"!==this.mode&&"CheckBox"!==this.mode&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,X.isDevice&&"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),function Dpe(r,t,e,i,n){r.classList.remove("e-input-focus");var s=t.querySelector("."+LR);e&&e.length<=0&&"Auto"===i&&!f(s)&&(s.classList.contains(hT)&&W([s],hT),B([s],iw))}(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType),this.refreshPlaceHolder(),(this.allowFiltering||!0===this.enableSelectionOrder&&"CheckBox"===this.mode)&&!f(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon")}},t.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else f(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},t.prototype.setPlaceholderSize=function(e){f(this.value)||0===this.value.length?0!==this.dropIcon.offsetWidth?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":B([this.searchWrapper],yZ):f(this.value)||(this.searchWrapper.removeAttribute("style"),W([this.searchWrapper],yZ))},t.prototype.refreshInputHight=function(){this.value&&this.value.length||!f(this.text)&&""!==this.text?this.searchWrapper.classList.add(JN):this.searchWrapper.classList.remove(JN)},t.prototype.validateValues=function(e,i){return JSON.stringify(e.slice().sort())!==JSON.stringify(i.slice().sort())},t.prototype.updateValueState=function(e,i,n){if(this.initStatus&&this.validateValues(i||[],n||[])){var a={e,oldValue:n,value:i,isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",a),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}},t.prototype.updateTempValue=function(){this.tempValues=this.value?this.value.slice():this.value},t.prototype.updateAriaActiveDescendant=function(){!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-item-focus")[0])&&qe(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},t.prototype.getPagingCount=function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.offsetHeight/parseInt(e,10))},t.prototype.pageUpSelection=function(e){var i=this.list.querySelectorAll("li."+et_li+":not(."+eo+"):not(.e-reorder-hide)"),n=e>=0?i[e+1]:i[0];this.addListFocus(n),this.scrollBottom(n,this.getIndexByValue(n.getAttribute("data-value")))},t.prototype.pageDownSelection=function(e){this.getItems();var n=this.list.querySelectorAll("li."+et_li+":not(."+eo+"):not(.e-reorder-hide)"),s=e<=n.length?n[e-1]:n[n.length-1];this.addListFocus(s),this.scrollBottom(s,this.getIndexByValue(s.getAttribute("data-value")))},t.prototype.getItems=function(){return this.list||r.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+et_li).length>0?this.ulElement.querySelectorAll("."+et_li+":not(."+eo+")"):[]},t.prototype.focusInHandler=function(e){return!!this.enabled&&(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&("Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),"CheckBox"!==this.mode&&(this.viewWrapper.style.display="none")),"CheckBox"!==this.mode&&this.searchWrapper.classList.remove(JN),this.checkPlaceholderSize(),this.focused&&(this.trigger("focus",{isInteracted:!!e,event:e}),this.focused=!1),this.overAllWrapper.classList.contains(nw)||this.overAllWrapper.classList.add(nw),function Tpe(r,t){r.classList.add("e-input-focus");var e=t.querySelector("."+LR);f(e)||(B([e],hT),e.classList.contains(iw)&&W([e],iw))}(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),ke.calculateWidth(this.inputElement,this.overAllWrapper),!0)},t.prototype.showDelimWrapper=function(){"CheckBox"===this.mode?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(uZ)},t.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(uZ)},t.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.size=this.inputElement.value.length>e?this.inputElement.value.length:e},t.prototype.isPopupOpen=function(){return null!==this.popupWrapper&&null!==this.popupWrapper.parentElement},t.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},t.prototype.checkTextLength=function(){return this.targetElement().length<1},t.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),"CheckBox"===this.mode&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault())}},t.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+et_focus);if(!f(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var i=this.popupWrapper.querySelector("."+tB);i&&i.setAttribute("aria-activedescendant",e.id)}else"CheckBox"==this.mode&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},t.prototype.homeNavigation=function(e){this.removeFocus();var i=this.ulElement.querySelectorAll("li."+et_li+":not(."+eo+"):not(.e-reorder-hide)");if(i.length>0){var n=i[e?0:i.length-1];n.classList.add(et_focus),this.scrollBottom(n),this.updateAriaActiveDescendant()}},t.prototype.onKeyDown=function(e){if(!this.readonly&&(this.enabled||"CheckBox"===this.mode)&&(this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey)return void this.popupKeyActions(e);if(this.isPopupOpen()){var i=this.list.querySelector("."+et_focus),n=void 0;switch(e.keyCode){case 36:case 35:this.homeNavigation(36===e.keyCode);break;case 33:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageUpSelection(n-this.getPagingCount()),this.updateAriaAttribute()));case 34:return e.preventDefault(),void(i&&(this.getIndexByValue(i.getAttribute("data-value")),this.pageDownSelection(n+this.getPagingCount()),this.updateAriaAttribute()));case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:return e.preventDefault(),this.hidePopup(e),void("CheckBox"===this.mode&&this.inputElement.focus());case 13:return e.preventDefault(),"CheckBox"!==this.mode&&this.selectByKey(e),void this.checkPlaceholderSize();case 32:return void this.spaceKeySelection(e);case 9:e.preventDefault(),this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(nw)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:return e.preventDefault(),void this.escapeAction()}this.checkTextLength()&&this.keyNavigation(e),"CheckBox"===this.mode&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),"CheckBox"===this.mode&&this.showSelectAll||this.refreshPopup()}},t.prototype.arrowDown=function(e){e.preventDefault(),this.moveByList(1),this.keyAction=!0,(document.activeElement.classList.contains(tB)||"CheckBox"===this.mode&&!this.allowFiltering&&document.activeElement!==this.list)&&A.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},t.prototype.arrowUp=function(e){e.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+et_li+":not(."+eo+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+et_li+",li."+et_group+":not(."+eo+"):not(.e-reorder-hide)"));var n=this.list.querySelector("li."+et_focus);Array.prototype.slice.call(i).indexOf(n)<=0&&"CheckBox"===this.mode&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"focus"})),this.moveByList(-1),this.updateAriaAttribute()},t.prototype.spaceKeySelection=function(e){"CheckBox"===this.mode&&(document.activeElement.classList.contains(tB)||(e.preventDefault(),this.keyAction=!0),this.selectByKey(e)),this.checkPlaceholderSize()},t.prototype.checkBackCommand=function(e){this.backCommand=8===e.keyCode&&this.allowFiltering?this.targetElement()===this.previousFilterText:""!==this.targetElement()},t.prototype.keyNavigation=function(e){if("Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e)}else if(8===e.keyCode&&"Delimiter"===this.mode&&this.value&&this.value.length){e.preventDefault();var i=this.value[this.value.length-1];this.removeValue(i,e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(i)}},t.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},t.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.value&&this.validateValues(this.value,e)&&("CheckBox"!==this.mode&&(this.value=e,this.initialValueUpdate()),"Delimiter"!==this.mode&&"CheckBox"!==this.mode?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},t.prototype.scrollBottom=function(e,i){var n=this.list.offsetHeight,s=e.offsetTop+e.offsetHeight-this.list.scrollTop,o=this.list.scrollTop+s-n,a=e.offsetTop+e.offsetHeight-this.list.scrollTop;a=this.fields.groupBy&&!f(this.fixedHeaderElement)?a-this.fixedHeaderElement.offsetHeight:a,0===i?this.list.scrollTop=0:s>n?this.list.scrollTop=o:a>0&&this.list.offsetHeight>a||(this.list.scrollTop=o)},t.prototype.scrollTop=function(e,i){var n=e.offsetTop-this.list.scrollTop;n=this.fields.groupBy&&!Jt(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var s=e.offsetTop+e.offsetHeight-this.list.scrollTop;0===i?this.list.scrollTop=0:n<0?this.list.scrollTop=this.list.scrollTop+n:s>0&&this.list.offsetHeight>s||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!Jt(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},t.prototype.selectListByKey=function(e){var i=this.list.querySelector("li."+et_focus),n=this.value&&this.value.length?this.value.length:0;null!==i&&(i.classList.contains("e-active")&&(n-=1),this.isValidLI(i)&&n<this.maximumSelectionLength?(this.updateListSelection(i,e),this.addListFocus(i),"CheckBox"===this.mode?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(this.findGroupStart(i.firstElementChild.lastElementChild),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),"CheckBox"!==this.mode&&this.refreshListItems(i.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(i)&&n<this.maximumSelectionLength&&(i.firstElementChild.lastElementChild.classList.contains("e-check")?this.selectAllItem(!1,e,i):this.selectAllItem(!0,e,i)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e)),this.refreshPlaceHolder()},t.prototype.refreshListItems=function(e){if((this.allowFiltering||"CheckBox"===this.mode&&!0===this.enableSelectionOrder||this.allowCustomValue)&&this.mainList&&this.listData){var i=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(i,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}},t.prototype.removeSelectedChip=function(e){var n,i=this.chipCollectionWrapper.querySelector("span."+cT);null!==i&&(f(this.value)||(this.tempValues=this.value.slice()),null!==(n=i.nextElementSibling)&&(this.removeChipSelection(),this.addChipSelection(n,e)),this.removeValue(i.getAttribute("data-value"),e),this.makeTextBoxEmpty()),this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},t.prototype.moveByTop=function(e){var n,i=this.list.querySelectorAll("li."+et_li);i.length>1&&(this.removeFocus(),this.addListFocus(i[n=e?0:i.length-1]),this.scrollBottom(i[n],n)),this.updateAriaAttribute()},t.prototype.moveByList=function(e){if(this.list){var i=this.list.querySelectorAll("li."+et_li+":not(."+eo+"):not(.e-reorder-hide)");"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+et_li+",li."+et_group+":not(."+eo+"):not(.e-reorder-hide)"));var n=this.list.querySelector("li."+et_focus),s=-1;if(i.length){for(var o=0;o<i.length;o++)if(i[o]===n){s=o;break}e>0?s<i.length-1&&(this.removeFocus(),this.addListFocus(i[++s]),this.updateCheck(i[s]),this.scrollBottom(i[s],s)):s>0&&(this.removeFocus(),this.addListFocus(i[--s]),this.updateCheck(i[s]),this.scrollTop(i[s],s))}}},t.prototype.updateCheck=function(e){"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&(e.firstElementChild.lastElementChild.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active"))},t.prototype.moveBy=function(e,i){var n,s=this.chipCollectionWrapper.querySelectorAll("span."+uT),o=this.chipCollectionWrapper.querySelector("span."+cT);null===o?e<0&&this.addChipSelection(s[s.length-1],i):e<0?null!==(n=o.previousElementSibling)&&(this.removeChipSelection(),this.addChipSelection(n,i)):(n=o.nextElementSibling,this.removeChipSelection(),null!==n&&this.addChipSelection(n,i))},t.prototype.chipClick=function(e){if(this.enabled){var i=j(e.target,"."+uT);this.removeChipSelection(),this.addChipSelection(i,e)}},t.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},t.prototype.addChipSelection=function(e,i){B([e],cT),this.trigger("chipSelection",i)},t.prototype.onChipRemove=function(e){if(3!==e.which&&2!==e.button&&this.enabled&&!this.readonly){var n=e.target.parentElement.getAttribute("data-value"),s=this.getFormattedValue(n);if(this.allowCustomValue&&("false"!==n&&!1===s||!f(s)&&"NaN"===s.toString())&&(s=n),this.isPopupOpen()&&"CheckBox"!==this.mode&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),f(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var o=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(o,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&"Never"===this.floatLabelType?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},t.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},t.prototype.refreshPlaceHolder=function(){this.placeholder&&"Never"===this.floatLabelType?this.inputElement.placeholder=this.value&&this.value.length||!f(this.text)&&""!==this.text?"":k6(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},t.prototype.removeAllItems=function(e,i,n,s,o){var a=this.value.indexOf(e),l=this.value.slice(0);l.splice(a,1),this.setProperties({value:[].concat([],l)},!0),s.setAttribute("aria-selected","false"),W([s],this.hideSelectedItem?eo:"e-active"),this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:s,e:this,index:a}),this.invokeCheckboxSelection(s,i,n),this.updateMainList(!0,e,o),this.updateChipStatus()},t.prototype.invokeCheckboxSelection=function(e,i,n){this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:i}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&"CheckBox"===this.mode&&this.showSelectAll&&!this.isSelectAll&&!n&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"})},t.prototype.removeValue=function(e,i,n,s){var o=this,a=this.value.indexOf(this.getFormattedValue(e));-1===a&&this.allowCustomValue&&!f(e)&&(a=this.value.indexOf(e.toString()));var l=i&&i.target;s=!!(s||l&&l.classList.contains("e-close-hooker"))||null;var h=this.hideSelectedItem?eo:"e-active";if(-1!==a){var u=this.findListElement(this.list,"li","data-value",e),p=this.getDataByValue(e);this.trigger("removing",{e:i,item:u,itemData:p,isInteracted:!!i,cancel:!1},function(y){if(y.cancel)o.removeIndex++;else{var C=o.value.slice(0);if(C.splice(a,1),o.setProperties({value:[].concat([],C)},!0),null!==u){var S=o.findListElement(o.mainList,"li","data-value",e);u.setAttribute("aria-selected","false"),W([u],h),S&&(S.setAttribute("aria-selected","false"),W([u,S],h)),o.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===o.mode,li:u,e:o,index:a}),o.invokeCheckboxSelection(u,i,s)}o.hideSelectedItem&&o.fields.groupBy&&u&&o.hideGroupItem(e),o.hideSelectedItem&&o.fixedHeaderElement&&o.fields.groupBy&&"CheckBox"!==o.mode&&o.isPopupOpen()&&r.prototype.scrollStop.call(o),o.updateMainList(!0,e),o.removeChip(e),o.updateChipStatus(),(o.value&&o.value.length?o.value.length:0)<o.maximumSelectionLength&&W(o.list.querySelectorAll("li."+et_li+":not(.e-active)"),"e-disable"),o.trigger("removed",y);var P=i&&i.currentTarget,O=!(!P||!P.classList.contains("e-selectall-parent"))||null;!o.changeOnBlur&&!s&&i&&n&&!O&&o.updateValueState(i,o.value,o.tempValues),n&&(o.selectAllEventData.push(p),o.selectAllEventEle.push(u)),1===n&&(o.changeOnBlur||o.updateValueState(i,o.value,o.tempValues),o.trigger("selectedAll",{event:i,items:o.selectAllEventEle,itemData:o.selectAllEventData,isInteracted:!!i,isChecked:!1}),o.selectAllEventData=[],o.selectAllEventEle=[]),s&&(1===n||null===n)&&o.clearAllCallback(i,s)}})}},t.prototype.updateMainList=function(e,i,n){if(this.allowFiltering||"CheckBox"===this.mode){var s=n||this.findListElement(this.mainList,"li","data-value",i);s&&(e?(s.setAttribute("aria-selected","false"),W([s],this.hideSelectedItem?eo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","false"),W([s.firstElementChild.lastElementChild],"e-check"))):(s.setAttribute("aria-selected","true"),B([s],this.hideSelectedItem?eo:"e-active"),"CheckBox"===this.mode&&(s.firstElementChild.setAttribute("aria-checked","true"),B([s.firstElementChild.lastElementChild],"e-check"))))}},t.prototype.removeChip=function(e){if(this.chipCollectionWrapper){var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);i&&$e(i)}},t.prototype.setWidth=function(e){f(e)||("number"==typeof e?this.overAllWrapper.style.width=ut(e):"string"==typeof e&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:ut(e)))},t.prototype.updateChipStatus=function(){this.value&&this.value.length?(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper(),this.showOverAllClear()):(f(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),f(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},t.prototype.addValue=function(e,i,n){this.value||(this.value=[]),this.value.indexOf(e)<0&&this.setProperties({value:[].concat([],this.value,[e])},!0);var s=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),s&&(this.addListFocus(s),this.addListSelection(s)),"Delimiter"!==this.mode&&"CheckBox"!==this.mode&&this.addChip(i,e,n),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},t.prototype.checkMaxSelection=function(){(this.value&&this.value.length?this.value.length:0)===this.maximumSelectionLength&&B(this.list.querySelectorAll("li."+et_li+":not(.e-active)"),"e-disable")},t.prototype.dispatchSelect=function(e,i,n,s,o){var a=this,l=this.listData;if(this.initStatus&&!s){var h=this.getDataByValue(e);this.trigger("select",{e:i,item:n,itemData:h,isInteracted:!!i,cancel:!1},function(p){p.cancel||(o&&(a.selectAllEventData.push(h),a.selectAllEventEle.push(n)),1===o&&(a.trigger("selectedAll",{event:i,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!i,isChecked:!0}),a.selectAllEventData=[]),a.allowCustomValue&&a.isServerRendered&&a.listData!==l&&(a.listData=l),a.updateListSelectEventCallback(e,n,i),a.hideSelectedItem&&a.fixedHeaderElement&&a.fields.groupBy&&"CheckBox"!==a.mode&&r.prototype.scrollStop.call(a))})}},t.prototype.addChip=function(e,i,n){this.chipCollectionWrapper&&this.getChip(e,i,n)},t.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+uT),i=this.chipCollectionWrapper.querySelectorAll("span."+XN.split(" ")[0]);if(W(e,cT),X.isDevice)for(var n=0;n<i.length;n++)i[n].style.display="none"},t.prototype.onMobileChipInteraction=function(e){var i=j(e.target,"."+uT),n=i.querySelector("span."+XN.split(" ")[0]);this.enabled&&!this.readonly&&(i.classList.contains(cT)||(this.removeChipFocus(),n.style.display="",i.classList.add(cT)),this.refreshPopup(),e.preventDefault())},t.prototype.multiCompiler=function(e){var i=!1;if(e)try{i=!!Tt(e,document).length}catch{i=!1}return i},t.prototype.getChip=function(e,i,n){var s=this,o={text:i,value:i},a=this.createElement("span",{className:uT,attrs:{"data-value":i,title:e}}),h=this.createElement("span",{className:"e-chipcontent"}),u=this.createElement("span",{className:XN});if(this.mainData&&(o=this.getDataByValue(i)),this.valueTemplate&&!f(o)){var m=qi(this.multiCompiler(this.valueTemplate)?he(this.valueTemplate,document).innerHTML.trim():this.valueTemplate)(o,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);if(m&&m.length>0)for(var y=0;y<m.length;y++)h.appendChild(m[y]);this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=e;a.appendChild(h);var C={isInteracted:!!n,itemData:o,e:n,setClass:function(S){B([a],S)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",C,function(S){S.cancel||(X.isDevice?(a.classList.add("e-mob-chip"),xt([u],a),u.style.display="none",A.add(a,"click",s.onMobileChipInteraction,s)):(A.add(a,"mousedown",s.chipClick,s),s.showClearButton&&a.appendChild(u)),A.add(u,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(a),!s.changeOnBlur&&n&&s.updateValueState(n,s.value,s.tempValues))})},t.prototype.calcPopupWidth=function(){var e=ut(this.popupWidth);return e.indexOf("%")>-1&&(e=(this.componentWrapper.offsetWidth*parseFloat(e)/100).toString()+"px"),e},t.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},t.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},t.prototype.listOption=function(e,i){var n=!f(i.iconCss),s=f(i.properties)?i:i.properties;return this.listCurrentOptions=null!==i.text||null!==i.value?{fields:s,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},de(this.listCurrentOptions,this.listCurrentOptions,i,!0),"CheckBox"===this.mode&&this.notify("listoption",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,dataSource:e,fieldProperty:s}),this.listCurrentOptions},t.prototype.renderPopup=function(){var e=this;if(this.list||r.prototype.render.call(this),!this.popupObj){document.body.appendChild(this.popupWrapper);var i=this.popupWrapper.querySelector(".e-filter-parent");"CheckBox"===this.mode&&!this.allowFiltering&&i&&this.filterParent&&(i.remove(),this.filterParent=null);var n=parseInt(this.popupHeight,10);this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),n-=this.header.offsetHeight),xt([this.list],this.popupWrapper),this.footerTemplate&&(this.setFooterTemplate(),n-=this.footer.offsetHeight),"CheckBox"===this.mode&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n-=this.selectAllHeight):"CheckBox"!==this.mode||this.showSelectAll||this.headerTemplate||this.footerTemplate?"CheckBox"===this.mode&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(n-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(n-=this.footer.offsetHeight)):(this.notify("selectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),n=parseInt(this.popupHeight,10)),"CheckBox"===this.mode&&(this.allowFiltering&&(this.notify("searchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,popupElement:this.popupWrapper}),n-=this.searchBoxHeight),B([this.popupWrapper],"e-checkbox")),"auto"!==this.popupHeight?(this.list.style.maxHeight=ut(n),this.popupWrapper.style.maxHeight=ut(this.popupHeight)):this.list.style.maxHeight=ut(this.popupHeight),this.popupObj=new Al(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var o=e.popupWrapper.querySelector("."+tB);"CheckBox"===e.mode&&o&&document.activeElement===o&&o.blur(),we(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var o=e.list.querySelector("ul");o&&("CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||(e.mainList=o.cloneNode?o.cloneNode(!0):o)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),"CheckBox"!==e.mode&&(e.allowFiltering||e.allowCustomValue)&&""!==e.targetElement().trim()||e.loadTemplate(),e.setScrollPosition(),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===e.mode,value:"focus"})},targetExitViewport:function(){X.isDevice||e.hidePopup()}}),"CheckBox"===this.mode&&X.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},t.prototype.setHeaderTemplate=function(){this.header&&this.header.remove(),this.header=this.createElement("div"),B([this.header],"e-ddl-header");var n=qi(this.multiCompiler(this.headerTemplate)?he(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.header.appendChild(n[s]);"CheckBox"===this.mode&&this.showSelectAll?ao([this.header],this.popupWrapper):xt([this.header],this.popupWrapper),A.add(this.header,"mousedown",this.onListMouseDown,this)},t.prototype.setFooterTemplate=function(){this.footer&&this.footer.remove(),this.footer=this.createElement("div"),B([this.footer],"e-ddl-footer");var n=qi(this.multiCompiler(this.footerTemplate)?he(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.footer.appendChild(n[s]);xt([this.footer],this.popupWrapper),A.add(this.footer,"mousedown",this.onListMouseDown,this)},t.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var i=void 0;if(this.value&&this.value.length>0){var n=this.list&&this.list.querySelectorAll("li.e-list-item");if(n&&n.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,i=this.value[this.removeIndex];this.removeIndex<this.value.length;i=this.value[this.removeIndex])this.removeValue(i,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e)}},t.prototype.clearAllCallback=function(e,i){var n=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&"CheckBox"!==this.mode||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),"Box"!==this.mode&&(!this.inputFocus||"CheckBox"===this.mode)&&this.updateDelimView(),""!==this.inputElement.value&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,n),"CheckBox"!==this.mode&&this.inputElement.focus()),"CheckBox"===this.mode&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&i&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&i&&(f(this.value)||0===this.value.length)&&this.updateValueState(e,this.value,this.tempValues),"CheckBox"===this.mode&&this.enableGroupCheckBox&&!f(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},t.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||"CheckBox"===this.mode)&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},t.prototype.resetValueHandler=function(e){var i=j(this.inputElement,"form");if(i&&e.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=n}},t.prototype.wireEvent=function(){A.add(this.componentWrapper,"mousedown",this.wrapperClick,this),A.add(window,"resize",this.windowResize,this),A.add(this.inputElement,"focus",this.focusInHandler,this),A.add(this.inputElement,"keydown",this.onKeyDown,this),A.add(this.inputElement,"keyup",this.keyUp,this),"CheckBox"!==this.mode&&A.add(this.inputElement,"input",this.onInput,this),A.add(this.inputElement,"blur",this.onBlurHandler,this),A.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=j(this.inputElement,"form");e&&A.add(e,"reset",this.resetValueHandler,this),A.add(this.componentWrapper,"mouseout",this.mouseOut,this),A.add(this.overAllClear,"mouseup",this.clearAll,this),A.add(this.inputElement,"paste",this.pasteHandler,this)},t.prototype.onInput=function(e){this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,X.isDevice&&"mozilla"===X.info.name&&this.search(e)},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.expandTextbox(),i.search(e)})},t.prototype.search=function(e){var i=this;if(f(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),!this.checkTextLength()||this.allowFiltering||f(e)||8===e.keyCode){var n=this.targetElement();if(this.allowFiltering){var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(h,u,p){s.cancel||(i.isFiltered=!0,i.remoteFilterAction=!0,i.dataUpdater(h,u,p))},event:e,cancel:!1};this.trigger("filtering",s,function(h){h.cancel||!i.isFiltered&&!h.preventDefaultAction&&(i.filterAction=!0,i.dataUpdater(i.dataSource,null,i.fields))})}else if(this.allowCustomValue){var o=new ni;o=""!==n?o.where(this.fields.text,"startswith",n,this.ignoreCase,this.ignoreAccent):o,this.dataUpdater(this.mainData,o,this.fields)}else{var a=this.list.querySelectorAll("li."+et_li+":not(.e-hide-listitem)"),l=ew(this.targetElement(),a,"StartsWith",this.ignoreCase);l&&null!==l.item?(this.addListFocus(l.item),this.list.scrollTop=l.item.offsetHeight*l.index):""!==this.targetElement()?this.removeFocus():this.focusAtFirstListItem()}}else this.focusAtFirstListItem()},t.prototype.preRender=function(){null===this.allowFiltering&&(this.allowFiltering="CheckBox"===this.mode),this.initializeData(),this.updateDataAttribute(this.htmlAttributes),r.prototype.preRender.call(this)},t.prototype.getLocaleName=function(){return"multi-select"},t.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0},t.prototype.updateData=function(e,i){var a,n="",s="Delimiter"===this.mode||"CheckBox"===this.mode,o=[],l=this.listData;if(this.listData=this.mainData,this.hiddenElement.innerHTML="",!f(this.value))for(var h=0;!f(this.value[h]);h++){var u=this.findListElement(f(this.mainList)?this.ulElement:this.mainList,"li","data-value",this.value[h]);f(u)&&!this.allowCustomValue?(this.value.splice(h,1),h-=1):(n+=(a=this.listData?this.getTextByValue(this.value[h]):this.value[h])+e+" ",o.push(a)),this.hiddenElement.innerHTML+='<option selected value ="'+this.value[h]+'">'+h+"</option>"}this.setProperties({text:o.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",Sn("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id));var p=i&&i.target,m=!(!p||!p.classList.contains("e-close-hooker"))||null;(!this.changeOnBlur&&i&&!m||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(i,this.value,this.tempValues)),this.listData=l,this.addValidInputClass()},t.prototype.initialTextUpdate=function(){if(f(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),i=[],n=0;e.length>n;n++){var s=this.getValueByText(e[n]);f(s)?this.allowCustomValue&&i.push(e[n]):i.push(s)}i&&i.length&&this.setProperties({value:i},!0)}},t.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&0===this.list.querySelector(".e-ul").childElementCount)&&(e=!0),r.prototype.render.call(this,null,e),this.unwireListEvents(),this.wireListEvents()},t.prototype.initialValueUpdate=function(){if(this.list){var e=void 0,i=void 0,n=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!f(this.value))for(var s=0;!f(this.value[s]);s++)if(i=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n=this.value[s]),e=this.getTextByValue(n),i&&"true"!==i.getAttribute("aria-selected")||i&&"true"===i.getAttribute("aria-selected")&&this.hideSelectedItem&&("Box"===this.mode||"Default"===this.mode))this.addChip(e,n),this.addListSelection(i);else if(n&&this.allowCustomValue){var o=this.listData.length,a={};ui(this.fields.text,n,a),ui(this.fields.value,n,a);var l=this.popupWrapper.querySelector(".e-nodata");this.addItem(a,o),i=i||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",n),this.popupWrapper.contains(l)&&(this.list.setAttribute("style",l.getAttribute("style")),this.popupWrapper.replaceChild(this.list,l),this.wireListEvents()),this.addChip(e,n),this.addListSelection(i)}"CheckBox"===this.mode?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),"CheckBox"===this.mode&&this.showSelectAll&&(f(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,value:"uncheck"}),"Box"===this.mode||"Default"===this.mode&&this.inputFocus?this.chipCollectionWrapper.style.display="":("Delimiter"===this.mode||"CheckBox"===this.mode)&&this.showDelimWrapper()}},t.prototype.updateActionCompleteData=function(e,i){this.value&&this.value.indexOf(e.getAttribute("data-value"))>-1&&(this.mainList=this.ulElement,this.hideSelectedItem&&B([e],eo))},t.prototype.updateAddItemList=function(e,i){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector(".e-nodata")&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),$e(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},t.prototype.updateDataList=function(){this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())&&(this.mainList.childElementCount<this.ulElement.childElementCount||this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount||this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0))&&(this.mainList=this.ulElement)},t.prototype.isValidLI=function(e){return e&&!e.classList.contains("e-disabled")&&!e.classList.contains(et_group)&&e.classList.contains(et_li)},t.prototype.updateListSelection=function(e,i,n){var s=e.getAttribute("data-value"),o=this.getFormattedValue(s);this.allowCustomValue&&("false"!==s&&!1===o||!f(o)&&"NaN"===o.toString())&&(o=s),this.removeHover(),this.value&&-1!==this.value.indexOf(o)?this.removeValue(o,i,n):this.dispatchSelect(o,i,e,"true"===e.getAttribute("aria-selected"),n)},t.prototype.updateListSelectEventCallback=function(e,i,n){var s=this,o=this.getTextByValue(e);if(!this.allowCustomValue&&!this.allowFiltering||this.findListElement(this.mainList,"li","data-value",e))this.remoteCustomValue=!1,this.addValue(e,o,n);else{var a=i.cloneNode(!0);this.allowCustomValue&&this.mainData.length&&"number"==typeof re(this.fields.value?this.fields.value:"value",this.mainData[0])&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var h=this.getDataByValue(e);this.trigger("customValueSelection",{newData:h,cancel:!1},function(p){p.cancel||(xt([a],s.mainList),s.mainData.push(h),s.remoteCustomValue=!1,s.addValue(e,o,n))})}},t.prototype.removeListSelection=function(){var e=this.hideSelectedItem?eo:"e-active",i=this.list.querySelectorAll("."+e),n=i.length;if(i&&i.length)for(W(i,e);n>0;)i[n-1].setAttribute("aria-selected","false"),n--;if(!f(this.mainList)){var s=this.mainList.querySelectorAll("."+e),o=s.length;if(s&&s.length)for(W(s,e);o>0;)s[o-1].setAttribute("aria-selected","false"),"CheckBox"===this.mode&&(i&&i.length>o-1&&(i[o-1].firstElementChild.setAttribute("aria-checked","false"),W([i[o-1].firstElementChild.lastElementChild],"e-check")),s[o-1].firstElementChild.setAttribute("aria-checked","false"),W([s[o-1].firstElementChild.lastElementChild],"e-check")),o--}},t.prototype.removeHover=function(){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&W(e,"e-hover")},t.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+et_focus),i=this.mainList.querySelectorAll("."+et_focus);e&&e.length&&(W(e,et_focus),W(i,et_focus))}},t.prototype.addListHover=function(e){(this.enabled&&this.isValidLI(e)||null!==e&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy))&&(this.removeHover(),B([e],"e-hover"))},t.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),B([e],et_focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&(B([e],et_focus),this.updateAriaActiveDescendant())},t.prototype.addListSelection=function(e,i){var n=this.hideSelectedItem?eo:"e-active";if(this.isValidLI(e)&&!e.classList.contains("e-hover")){if(B([e],n),this.updateMainList(!1,e.getAttribute("data-value"),i),e.setAttribute("aria-selected","true"),"CheckBox"===this.mode){var s=e.firstElementChild.getAttribute("aria-checked");("false"===s||f(s))&&this.notify("updatelist",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:"CheckBox"===this.mode,li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},t.prototype.updateDelimeter=function(e,i){this.updateData(e,i)},t.prototype.onMouseClick=function(e){var i=this;this.keyCode=null,this.scrollFocusStatus=!1;var n=e.target,s=j(n,"."+et_li);if(j(n,"."+et_group)&&this.enableGroupCheckBox&&"CheckBox"===this.mode&&this.fields.groupBy)(n=n.classList.contains("e-list-group-item")?n.firstElementChild.lastElementChild:e.target).classList.contains("e-check")?(this.selectAllItem(!1,e),n.classList.remove("e-check"),n.classList.remove("e-stop"),j(n,".e-list-group-item").classList.remove("e-active"),n.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),n.classList.remove("e-stop"),n.classList.add("e-check"),j(n,".e-list-group-item").classList.add("e-active"),n.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var a=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(a-=1),a<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?"CheckBox"!==this.mode&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),"CheckBox"===this.mode?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){i.updateDelimeter(i.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(n),"CheckBox"!==this.mode&&this.refreshListItems(f(s)?null:s.textContent)}else e.preventDefault();this.refreshPlaceHolder(),this.deselectHeader()}},t.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){var o=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),o=this.findGroupAttrtibutes(e,0,0,0,0),o=this.findGroupAttrtibutes(e,o[0],o[1],o[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),null!=(e=e.previousElementSibling)););this.updateCheckBox(e,o[0],o[1],o[2])}},t.prototype.findGroupAttrtibutes=function(e,i,n,s,o){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?i++:e.classList.contains("e-list-item")&&n++,s++,null!=(e=o?e.nextElementSibling:e.previousElementSibling)););return[i,n,s]},t.prototype.updateCheckBox=function(e,i,n,s){if(null!==e){var o=e.getElementsByClassName("e-frame")[0];s===i?(o.classList.remove("e-stop"),o.classList.add("e-check"),j(o,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===n?(o.classList.remove("e-check"),o.classList.remove("e-stop"),j(o,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===i-1?(o.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),j(o,".e-list-group-item").classList.add("e-active"),o.classList.add("e-check")):(o.classList.remove("e-check"),o.classList.add("e-stop"),j(o,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},t.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,i=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&W(i,"e-disable"),e===this.maximumSelectionLength&&B(i,"e-disable")},t.prototype.onMouseOver=function(e){var i=j(e.target,"."+et_li);null===i&&"CheckBox"===this.mode&&!f(this.fields.groupBy)&&this.enableGroupCheckBox&&(i=j(e.target,"."+et_group)),this.addListHover(i)},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},t.prototype.onDocumentClick=function(e){if("CheckBox"!==this.mode){var i=e.target;this.scrollFocusStatus=!!(!f(this.popupObj)&&j(i,'[id="'+this.popupObj.element.id+'"]')||this.overAllWrapper.contains(e.target))&&(X.isIE||"edge"===X.info.name)&&document.activeElement===this.inputElement}},t.prototype.wireListEvents=function(){f(this.list)||(A.add(document,"mousedown",this.onDocumentClick,this),A.add(this.list,"mousedown",this.onListMouseDown,this),A.add(this.list,"mouseup",this.onMouseClick,this),A.add(this.list,"mouseover",this.onMouseOver,this),A.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.unwireListEvents=function(){A.remove(document,"mousedown",this.onDocumentClick),this.list&&(A.remove(this.list,"mousedown",this.onListMouseDown),A.remove(this.list,"mouseup",this.onMouseClick),A.remove(this.list,"mouseover",this.onMouseOver),A.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||""===this.inputElement.value)&&(this.overAllClear.style.display="none")},t.prototype.showOverAllClear=function(){this.overAllClear.style.display=(this.value&&this.value.length||""!==this.inputElement.value)&&this.showClearButton&&!0!==this.readonly?"":"none"},t.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},t.prototype.showSpinner=function(){if(f(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");"none"!==this.overAllClear.style.display||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:cZ+" "+gZ}),this.componentWrapper.appendChild(this.spinnerElement)),bc({target:this.spinnerElement,width:X.isDevice?"16px":"14px"},this.createElement),B([this.spinnerElement],fZ),Ul(this.spinnerElement)}},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Rl(this.spinnerElement),W([this.spinnerElement],fZ),this.spinnerElement.classList.contains(gZ)?we(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.updateWrapperText=function(e,i){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=i:e.innerText=bs.sanitize(i)},t.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(eB),this.value&&this.value.length){var e="",i=void 0,n=void 0,s=1,o=void 0,a=void 0,l=0,h=void 0;this.updateWrapperText(this.viewWrapper,e);var u={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},p=new $r(this.getLocaleName(),u,this.locale);""===p.getConstant("actionFailureTemplate")&&(p=new $r("dropdowns",u,this.locale)),""===p.getConstant("noRecordsTemplate")&&(p=new $r("dropdowns",u,this.locale));var m=p.getConstant("overflowCountTemplate"),y=p.getConstant("totalCountTemplate"),C=this.createElement("span",{className:"e-remain"}),S=m.replace("${count}",this.value.length.toString());C.innerText=S,this.viewWrapper.appendChild(C),this.renderReactTemplates();var T=C.offsetWidth;if($e(C),this.showDropDownIcon&&(l=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!f(this.value))for(var R=0;!f(this.value[R]);R++){if(e+=0===R?"":this.delimiterChar+" ",e+=i=this.getOverflowVal(R),i=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e),o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),o+l+this.clearIconWidth>h){for(void 0!==n&&""!==n&&(i=n,R=s+1),this.updateWrapperText(this.viewWrapper,i),a=this.value.length-R,o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);o+T+l+this.clearIconWidth>h&&0!==o&&""!==this.viewWrapper.innerHTML;)this.viewWrapper.innerHTML=[].join(this.delimiterChar),a=this.value.length,o=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);break}o+T+l+this.clearIconWidth<=h?(n=e,s=R):0===R&&(n="",s=-1)}if(a>0){var O=h-l-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(C,this.viewWrapper,a,m,y,O)),this.updateRemainWidth(this.viewWrapper,O),this.updateRemainingText(C,l,a,m,y)}}else this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none"},t.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},t.prototype.updateRemainWidth=function(e,i){e.classList.contains(eB)&&i<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=i+"px")},t.prototype.updateRemainTemplate=function(e,i,n,s,o,a){i.firstChild&&3===i.firstChild.nodeType&&""===i.firstChild.nodeValue&&i.removeChild(i.firstChild),e.innerHTML="";var l=s.replace("${count}",n.toString()),h=o.replace("${count}",n.toString());return e.innerText=i.firstChild&&3===i.firstChild.nodeType?l:h,i.firstChild&&3===i.firstChild.nodeType?i.classList.remove(eB):(i.classList.add(eB),this.updateRemainWidth(i,a)),e},t.prototype.updateRemainingText=function(e,i,n,s,o){var a=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),l=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(l+i>=a&&0!==l&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType){for(;l+i>a&&0!==l&&this.viewWrapper.firstChild&&3===this.viewWrapper.firstChild.nodeType;){var h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),""===this.viewWrapper.firstChild.nodeValue&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),n++,l=this.viewWrapper.offsetWidth}this.updateRemainTemplate(e,this.viewWrapper,n,s,o,a-i)}},t.prototype.getOverflowVal=function(e){var i;if(this.mainData&&this.mainData.length)if("CheckBox"===this.mode){var n=this.listData;this.listData=this.mainData,i=this.getTextByValue(this.value[e]),this.listData=n}else i=this.getTextByValue(this.value[e]);else i=this.value[e];return i},t.prototype.unWireEvent=function(){A.remove(this.componentWrapper,"mousedown",this.wrapperClick),A.remove(window,"resize",this.windowResize),A.remove(this.inputElement,"focus",this.focusInHandler),A.remove(this.inputElement,"keydown",this.onKeyDown),"CheckBox"!==this.mode&&A.remove(this.inputElement,"input",this.onInput),A.remove(this.inputElement,"keyup",this.keyUp);var e=j(this.inputElement,"form");e&&A.remove(e,"reset",this.resetValueHandler),A.remove(this.inputElement,"blur",this.onBlurHandler),A.remove(this.componentWrapper,"mouseover",this.mouseIn),A.remove(this.componentWrapper,"mouseout",this.mouseOut),A.remove(this.overAllClear,"mousedown",this.clearAll),A.remove(this.inputElement,"paste",this.pasteHandler)},t.prototype.selectAllItem=function(e,i,n){var s;if(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)'),this.value&&this.value.length&&i&&i.target&&j(i.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&"CheckBox"===this.mode&&!f(this.fields.groupBy)){var o=i?this.groupTemplate?j(i.target,".e-list-group-item"):i.target:null;if((o=(o=i&&32===i.keyCode?n:o)&&o.classList.contains("e-frame")?o.parentElement.parentElement:o)&&o.classList.contains("e-list-group-item")){var a=o.nextElementSibling;if(f(a))return;for(;a.classList.contains("e-list-item");){if(e){if(!a.firstElementChild.lastElementChild.classList.contains("e-check")){var l=this.value&&this.value.length?this.value.length:0;a.classList.contains("e-active")&&(l-=1),l<this.maximumSelectionLength&&this.updateListSelection(a,i)}}else a.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(a,i);if(null==(a=a.nextElementSibling))break}if(o.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?o.classList.add("e-active"):o.classList.remove("e-active"),o.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&i&&this.updateValueState(i,this.value,this.tempValues)}else this.updateValue(i,s,e)}else this.updateValue(i,s,e)},t.prototype.updateValue=function(e,i,n){var s=this,o=i.length,a={event:e,items:n?i:[],itemData:n?this.listData:[],isInteracted:!!e,isChecked:n,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",a),i&&i.length){var h,l=0;if(h=this.enableGroupCheckBox?n?this.maximumSelectionLength-(this.value?this.value.length:0):i.length:n?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,a.preventSelectEvent){for(var u=0;u<i.length&&u<h;u++){this.removeHover();var p=i[u].getAttribute("data-value"),m=this.getFormattedValue(p),y=this.mainList?this.mainList.querySelectorAll(n?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[u]:null;n?(this.value=this.value?this.value:[],this.value.indexOf(m)<0&&this.setProperties({value:[].concat([],this.value,[m])},!0),this.removeFocus(),this.addListSelection(i[u],y),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(m,e,!1,i[u],y),this.enableGroupCheckBox&&this.findGroupStart(i[u])}n||(this.value&&this.value.length?this.value.length:0)<this.maximumSelectionLength&&W(this.list.querySelectorAll("li."+et_li+":not(.e-active)"),"e-disable"),this.trigger("selectedAll",{event:e,items:n?i:[],itemData:n?this.listData:[],isInteracted:!!e,isChecked:n})}else{for(;l<o&&l<=50&&l<h;)this.updateListSelection(i[l],e,o-l),this.enableGroupCheckBox&&this.findGroupStart(i[l]),l++;o>50&&setTimeout(function(){for(;l<o&&l<h;)s.updateListSelection(i[l],e,o-l),s.enableGroupCheckBox&&s.findGroupStart(i[l]),l++;s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement()},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),o<=50&&!a.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())},t.prototype.updateHiddenElement=function(){var e=this,i="",n="",s="",o=[];"CheckBox"===this.mode&&(this.value.map(function(a,l){i+='<option selected value ="'+a+'">'+l+"</option>",s=e.listData?e.getTextByValue(a):a,n+=s+e.delimiterChar+" ",o.push(s)}),this.hiddenElement.innerHTML=i,this.updateWrapperText(this.delimiterWrapper,n),this.delimiterWrapper.setAttribute("id",Sn("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.inputElement.setAttribute("aria-labelledby",this.delimiterWrapper.id),this.setProperties({text:o.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())},t.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},t.prototype.textboxValueUpdate=function(e){var i=e&&e.target&&(j(e.target,".e-selectall-parent")||j(e.target,".e-close-hooker"));"Box"===this.mode||this.isPopupOpen()||"CheckBox"===this.mode&&(this.isSelectAll||i)?this.searchWrapper.classList.remove(JN):this.updateDelimView(),"CheckBox"===this.mode?(this.updateDelimView(),i||this.isSelectAll||this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.updateDataSource=function(e){f(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},t.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},t.prototype.selectAllItems=function(e,i){var n=this;f(this.list)?(this.selectAllAction=function(){"CheckBox"===n.mode&&n.showSelectAll&&n.notify("checkSelectAll",{module:"CheckBoxSelection",enable:"CheckBox"===n.mode,value:e?"check":"uncheck"}),n.selectAllItem(e,i),n.selectAllAction=null},r.prototype.render.call(this)):(this.selectAllAction=null,"CheckBox"===this.mode&&this.showSelectAll&&this.notify("checkSelectAll",{value:e?"check":"uncheck",enable:"CheckBox"===this.mode,module:"CheckBoxSelection"}),this.selectAllItem(e,i))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){(e.dataSource&&!f(Object.keys(e.dataSource))||e.query&&!f(Object.keys(e.query)))&&(this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),"multiselect"===this.getModuleName()&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"query":case"dataSource":"CheckBox"===this.mode&&this.showSelectAll&&(f(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,i.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":"Box"!==this.mode&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(i.cssClass),this.updateCssClass(),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper);break;case"enableRtl":this.enableRTL(e.enableRtl),r.prototype.onPropertyChanged.call(this,e,i);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var a=parseInt(this.popupHeight,10);"auto"!==this.popupHeight?(this.list.style.maxHeight=ut(a),this.popupWrapper.style.maxHeight=ut(this.popupHeight)):this.list.style.maxHeight=ut(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":"CheckBox"===this.mode&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;default:var l=this.getPropObject(o,e,i);r.prototype.onPropertyChanged.call(this,l.newProperty,l.oldProperty)}}},t.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},t.prototype.presentItemValue=function(e){for(var i=[],n=0;n<this.value.length;n++)this.findListElement(this.allowFiltering&&!f(this.mainList)?this.mainList:e,"li","data-value",this.value[n])||i.push(this.value[n]);return i},t.prototype.addNonPresentItems=function(e,i,n,s){var o=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(a){a.result.length>0&&o.addItem(a.result,n.length),o.updateActionList(i,n,s)})},t.prototype.updateVal=function(e,i,n){if(this.list)if(!(this.dataSource instanceof Xe)||this.listData&&this.mainList&&this.mainData){var s=[];if(!f(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),"value"==n&&s.length>0&&this.dataSource instanceof Xe&&!f(this.value)&&null!=this.listData)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(s,this.ulElement,this.listData);else{if("text"===n&&(this.initialTextUpdate(),e=this.value),(f(this.value)||0===this.value.length)&&(this.tempValues=i),this.allowCustomValue&&("Default"===this.mode||"Box"===this.mode)&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var o=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(o,this.mainData)}this.initialValueUpdate(),"Box"!==this.mode&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),"CheckBox"!==this.mode&&this.changeOnBlur&&this.updateValueState(null,e,i),this.checkPlaceholderSize()}}else this.onLoadSelect();else this.onLoadSelect();this.changeOnBlur||this.updateValueState(null,e,i)},t.prototype.addItem=function(e,i){r.prototype.addItem.call(this,e,i)},t.prototype.hidePopup=function(e){var i=this;this.isPopupOpen()&&this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:100},event:e||null},function(a){a.cancel||(i.fields.groupBy&&"CheckBox"!==i.mode&&i.fixedHeaderElement&&($e(i.fixedHeaderElement),i.fixedHeaderElement=null),i.beforePopupOpen=!1,i.overAllWrapper.classList.remove(vZ),i.popupObj.hide(new hs(a.animation)),qe(i.inputElement,{"aria-expanded":"false"}),i.inputElement.removeAttribute("aria-owns"),i.inputElement.removeAttribute("aria-activedescendant"),i.allowFiltering&&i.notify("inputFocus",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode,value:"clear"}),i.popupObj.hide(),W([document.body,i.popupObj.element],"e-popup-full-page"),A.remove(i.list,"keydown",i.onKeyDown))})},t.prototype.showPopup=function(e){var i=this;this.enabled&&this.trigger("beforeOpen",{cancel:!1},function(s){if(!s.cancel){if(!i.ulElement)return i.beforePopupOpen=!0,r.prototype.render.call(i,e),void("CheckBox"===i.mode&&X.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode}));"CheckBox"===i.mode&&X.isDevice&&i.allowFiltering&&i.notify("popupFullScreen",{module:"CheckBoxSelection",enable:"CheckBox"===i.mode});var o=i.ulElement.querySelectorAll("li.e-list-item").length,a=i.ulElement.querySelectorAll("li."+et_li+"."+eo).length;if(o>0&&o===a&&a===i.mainData.length&&(""===i.targetElement()||!i.allowCustomValue))return void(i.beforePopupOpen=!1);i.onPopupShown(e)}})},t.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},t.prototype.getModuleName=function(){return"multiselect"},t.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},t.prototype.render=function(){this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.searchWrapper=this.createElement("span",{className:"e-searcher "+("Box"===this.mode?"e-multiselect-box":"")}),this.viewWrapper=this.createElement("span",{className:"e-delim-view "+dZ,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:cZ,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:"e-multi-select-wrapper"}),this.overAllWrapper=this.createElement("div",{className:"e-multiselect e-input-group e-control-wrapper"}),"CheckBox"===this.mode&&B([this.overAllWrapper],"e-checkbox"),X.isDevice&&this.componentWrapper.classList.add("e-mob-wrapper"),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:"e-ddl e-popup e-multi-select-list-wrapper"}),"Delimiter"===this.mode||"CheckBox"===this.mode?(this.delimiterWrapper=this.createElement("span",{className:dZ,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:"e-chips-collection",styles:"display:none"}),"Default"===this.mode?this.chipCollectionWrapper.setAttribute("id",Sn("chip_default")):"Box"===this.mode&&this.chipCollectionWrapper.setAttribute("id",Sn("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),"Box"!==this.mode&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!X.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(R6),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:"e-dropdownbase",attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),("Default"===this.mode||"Box"===this.mode)&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),"Never"!==this.floatLabelType?aZ(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):"Never"===this.floatLabelType&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):Sn("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:"e-multi-hidden",tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),"CheckBox"!==this.mode&&this.hideOverAllClear(),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),ke.createSpanElement(this.overAllWrapper,this.createElement),ke.calculateWidth(this.inputElement.parentElement.parentElement,this.overAllWrapper),!f(this.overAllWrapper)&&!f(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType)&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},t.prototype.checkInitialValue=function(){var e=this,i=this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource);if((!this.value||!this.value.length)&&f(this.text)&&!i&&"SELECT"===this.element.tagName&&this.element.options.length>0){for(var n=this.element.options,s=[],o="",a=0,l=n.length;a<l;a++){var h=n[a];f(h.getAttribute("selected"))||(h.getAttribute("value")?s.push(h.getAttribute("value")):o+=h.text+this.delimiterChar)}s.length>0?this.setProperties({value:s},!0):""!==o&&this.setProperties({text:o},!0),(s.length>0||""!==o)&&(this.refreshInputHight(),this.refreshPlaceHolder())}(this.value&&this.value.length||!f(this.text))&&(this.list||r.prototype.render.call(this)),!f(this.text)&&(f(this.value)||0===this.value.length)&&this.initialTextUpdate(),this.value&&this.value.length?(this.dataSource instanceof Xe?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(),this.initialUpdate()),this.updateTempValue()):this.initialUpdate(),this.initStatus=!0,this.checkAutoFocus(),f(this.text)||this.element.setAttribute("data-initial-value",this.text)},t.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},t.prototype.setFloatLabelType=function(){(function xpe(r,t,e,i,n,s,o){var h,a=t.querySelector("."+LR),l=t.querySelector("."+A6);f(a)?lZ(n,i,h=null!==o?o:""):(h=a.innerText,we(e.querySelector("."+LR)),lZ(n,i,h),f(l)||we(e.querySelector("."+A6))),r.classList.remove("e-float-input")})(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,0,this.placeholder),"Never"!==this.floatLabelType&&aZ(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},t.prototype.addValidInputClass=function(){!f(this.value)&&this.value.length||"Always"===this.floatLabelType?B([this.overAllWrapper],"e-valid-input"):W([this.overAllWrapper],"e-valid-input")},t.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:mZ}),this.componentWrapper.appendChild(this.dropIcon),B([this.componentWrapper],["e-down-icon"])):f(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),W([this.componentWrapper],["e-down-icon"]))},t.prototype.initialUpdate=function(){"Box"!==this.mode&&!(this.setDynValue&&"Default"===this.mode&&this.inputFocus)&&this.updateDelimView(),this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},t.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify("destroy",{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,r.prototype.destroy.call(this);for(var e=["readonly","aria-disabled","placeholder"],i=e.length;i>0;)this.inputElement.removeAttribute(e[i-1]),i--;this.element.removeAttribute("data-initial-value"),this.element.style.display="block",this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()||this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),$e(this.overAllWrapper))},Xi([Cn({text:null,value:null,iconCss:null,groupBy:null},GN)],t.prototype,"fields",void 0),Xi([D(!1)],t.prototype,"enablePersistence",void 0),Xi([D(null)],t.prototype,"groupTemplate",void 0),Xi([D("No records found")],t.prototype,"noRecordsTemplate",void 0),Xi([D("Request failed")],t.prototype,"actionFailureTemplate",void 0),Xi([D("None")],t.prototype,"sortOrder",void 0),Xi([D(!0)],t.prototype,"enabled",void 0),Xi([D(!1)],t.prototype,"enableHtmlSanitizer",void 0),Xi([D([])],t.prototype,"dataSource",void 0),Xi([D(null)],t.prototype,"query",void 0),Xi([D("StartsWith")],t.prototype,"filterType",void 0),Xi([D(1e3)],t.prototype,"zIndex",void 0),Xi([D(!1)],t.prototype,"ignoreAccent",void 0),Xi([D()],t.prototype,"locale",void 0),Xi([D(!1)],t.prototype,"enableGroupCheckBox",void 0),Xi([D(null)],t.prototype,"cssClass",void 0),Xi([D("100%")],t.prototype,"width",void 0),Xi([D("300px")],t.prototype,"popupHeight",void 0),Xi([D("100%")],t.prototype,"popupWidth",void 0),Xi([D(null)],t.prototype,"placeholder",void 0),Xi([D(null)],t.prototype,"filterBarPlaceholder",void 0),Xi([D({})],t.prototype,"htmlAttributes",void 0),Xi([D(null)],t.prototype,"valueTemplate",void 0),Xi([D(null)],t.prototype,"headerTemplate",void 0),Xi([D(null)],t.prototype,"footerTemplate",void 0),Xi([D(null)],t.prototype,"itemTemplate",void 0),Xi([D(null)],t.prototype,"allowFiltering",void 0),Xi([D(!0)],t.prototype,"changeOnBlur",void 0),Xi([D(!1)],t.prototype,"allowCustomValue",void 0),Xi([D(!0)],t.prototype,"showClearButton",void 0),Xi([D(1e3)],t.prototype,"maximumSelectionLength",void 0),Xi([D(!1)],t.prototype,"readonly",void 0),Xi([D(null)],t.prototype,"text",void 0),Xi([D(null)],t.prototype,"value",void 0),Xi([D(!0)],t.prototype,"hideSelectedItem",void 0),Xi([D(!0)],t.prototype,"closePopupOnSelect",void 0),Xi([D("Default")],t.prototype,"mode",void 0),Xi([D(",")],t.prototype,"delimiterChar",void 0),Xi([D(!0)],t.prototype,"ignoreCase",void 0),Xi([D(!1)],t.prototype,"showDropDownIcon",void 0),Xi([D("Never")],t.prototype,"floatLabelType",void 0),Xi([D(!1)],t.prototype,"showSelectAll",void 0),Xi([D("Select All")],t.prototype,"selectAllText",void 0),Xi([D("Unselect All")],t.prototype,"unSelectAllText",void 0),Xi([D(!0)],t.prototype,"enableSelectionOrder",void 0),Xi([D(!0)],t.prototype,"openOnClick",void 0),Xi([D(!1)],t.prototype,"addTagOnBlur",void 0),Xi([K()],t.prototype,"change",void 0),Xi([K()],t.prototype,"removing",void 0),Xi([K()],t.prototype,"removed",void 0),Xi([K()],t.prototype,"beforeSelectAll",void 0),Xi([K()],t.prototype,"selectedAll",void 0),Xi([K()],t.prototype,"beforeOpen",void 0),Xi([K()],t.prototype,"open",void 0),Xi([K()],t.prototype,"close",void 0),Xi([K()],t.prototype,"blur",void 0),Xi([K()],t.prototype,"focus",void 0),Xi([K()],t.prototype,"chipSelection",void 0),Xi([K()],t.prototype,"filtering",void 0),Xi([K()],t.prototype,"tagging",void 0),Xi([K()],t.prototype,"customValueSelection",void 0),Xi([an],t)}(KN),M6=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ds=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Jpe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return M6(t,r),ds([D("Multiple")],t.prototype,"mode",void 0),ds([D(!1)],t.prototype,"showCheckbox",void 0),ds([D(!1)],t.prototype,"showSelectAll",void 0),ds([D("Left")],t.prototype,"checkboxPosition",void 0),t}(Wi),efe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return M6(t,r),ds([D([])],t.prototype,"items",void 0),ds([D("Right")],t.prototype,"position",void 0),t}(Wi),tfe=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isValidKey=!1,s.isDataSourceUpdate=!1,s.keyDownStatus=!1,s}var e;return M6(t,r),e=t,t.prototype.addItem=function(i,n){r.prototype.addItem.call(this,i,n)},t.prototype.render=function(){this.inputString="",this.initLoad=!0,this.isCustomFiltering=!1,this.initialSelectedOptions=this.value,r.prototype.render.call(this),this.renderComplete()},t.prototype.initWrapper=function(){var i=this.createElement("select",{className:"e-hidden-select",attrs:{multiple:""}});i.style.visibility="hidden",this.list.classList.add("e-listbox-wrapper"),this.itemTemplate&&this.list.classList.add("e-list-template"),this.list.classList.add("e-wrapper"),this.list.classList.add("e-lib"),"EJS-LISTBOX"===this.element.tagName?(this.element.setAttribute("tabindex","0"),this.initLoad&&this.element.appendChild(this.list)):(this.initLoad&&this.element.parentElement.insertBefore(this.list,this.element),this.list.insertBefore(this.element,this.list.firstChild),this.element.style.display="none"),this.list.insertBefore(i,this.list.firstChild),this.list.getElementsByClassName("e-list-item")[0]&&this.list.getElementsByClassName("e-list-item")[0].classList.remove(et_focus),this.itemTemplate&&this.renderReactTemplates(),W([this.list],["e-content",et_root]),this.validationAttribute(this.element,i),this.list.setAttribute("role","listbox"),qe(this.list,{role:"listbox","aria-label":"listbox","aria-multiselectable":"Multiple"===this.selectionSettings.mode?"true":"false"}),this.updateSelectionSettings()},t.prototype.updateSelectionSettings=function(){if(this.selectionSettings.showCheckbox&&this.selectionSettings.showSelectAll&&this.liCollections.length){var i=new $r(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=i.getConstant("selectAllText"),this.unSelectAllText=i.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{})}},t.prototype.initDraggable=function(){var i=this;this.ulElement&&(this.ulElement.id=this.element.id+"_parent"),this.allowDragAndDrop&&new Dce(this.ulElement,{scope:this.scope,itemClass:"e-list-item",dragStart:this.triggerDragStart.bind(this),drag:this.triggerDrag.bind(this),beforeDrop:this.beforeDragEnd.bind(this),drop:this.dragEnd.bind(this),placeHolder:function(){return i.createElement("span",{className:"e-placeholder"})},helper:function(n){var s=i.list.cloneNode(),o=n.sender.cloneNode(!0);s.appendChild(o);var a=i.getItems()[0];return s.style.width=a.offsetWidth+"px",s.style.height=a.offsetHeight+"px",(i.value&&i.value.length)>1&&i.isSelected(o)&&o.appendChild(i.createElement("span",{className:"e-list-badge",innerHTML:i.value.length+""})),s.style.zIndex=Lf(i.element)+"",s}})},t.prototype.updateActionCompleteData=function(i,n,s){this.jsonData.splice(s,0,n)},t.prototype.initToolbar=function(){var i=this.toolbarSettings.position,n=this.element.getAttribute("data-value");if(this.toolbarSettings.items.length){var s=this.createElement("div",{className:"e-listbox-tool",attrs:{role:"toolbar"}}),o=this.createElement("div",{className:"e-listboxtool-wrapper e-lib e-"+i.toLowerCase()});this.list.parentElement.insertBefore(o,this.list),o.appendChild("Right"===i?this.list:s),o.appendChild("Right"===i?s:this.list),this.createButtons(s),this.element.id||(this.element.id=Sn("e-"+this.getModuleName())),this.scope?document.querySelector(this.scope).setAttribute("data-value",this.element.id):this.updateToolBarState()}var a=this.element.getAttribute("data-value");n&&a&&n!==a?(this.tBListBox=Ya(document.getElementById(n),this.getModuleName()),this.tBListBox.updateToolBarState()):a&&(this.tBListBox=Ya(document.getElementById(a),this.getModuleName()),this.tBListBox.updateToolBarState())},t.prototype.createButtons=function(i){var o,a,n=this,l=new $r(this.getModuleName(),{moveUp:"Move Up",moveDown:"Move Down",moveTo:"Move To",moveFrom:"Move From",moveAllTo:"Move All To",moveAllFrom:"Move All From"},this.locale);this.toolbarSettings.items.forEach(function(h){a=l.getConstant(h),o=n.createElement("button",{attrs:{type:"button","data-value":h,title:a,"aria-label":a}}),i.appendChild(o),new Is({iconCss:"e-icons e-"+h.toLowerCase()},o).createElement=n.createElement})},t.prototype.validationAttribute=function(i,n){r.prototype.validationAttribute.call(this,i,n),n.required=i.required,i.required=!1},t.prototype.setHeight=function(){(this.toolbarSettings.items.length?this.list.parentElement:this.list).style.height=ut(this.height),this.allowFiltering&&this.height.toString().indexOf("%")<0?B([this.list],"e-filter-list"):W([this.list],"e-filter-list")},t.prototype.setCssClass=function(){this.cssClass&&B([this.toolbarSettings.items.length?this.list.parentElement:this.list],this.cssClass.split(" ")),this.enableRtl&&B([this.list],"e-rtl")},t.prototype.setEnable=function(){var i=this.toolbarSettings.items.length?this.list.parentElement:this.list;this.enabled?W([i],sn.disabled):B([i],sn.disabled)},t.prototype.showSpinner=function(){this.spinner||(this.spinner=this.createElement("div",{className:"e-listbox-wrapper"})),this.spinner.style.height=ut(this.height),this.element.parentElement.insertBefore(this.spinner,this.element.nextSibling),bc({target:this.spinner},this.createElement),Ul(this.spinner)},t.prototype.hideSpinner=function(){this.spinner.querySelector(".e-spinner-pane")&&Rl(this.spinner),this.spinner.parentElement&&we(this.spinner)},t.prototype.onInput=function(){this.isDataSourceUpdate=!1,this.isValidKey=!!this.keyDownStatus,this.keyDownStatus=!1,this.refreshClearIcon()},t.prototype.clearText=function(){this.filterInput.value="",this.refreshClearIcon();var i=document.createEvent("KeyboardEvent");this.isValidKey=!0,this.KeyUp(i)},t.prototype.refreshClearIcon=function(){this.filterInput.parentElement.querySelector("."+dT.clearIcon)&&(this.filterInput.parentElement.querySelector("."+dT.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible")},t.prototype.onActionComplete=function(i,n,s){var o;if(this.allowFiltering&&this.list.getElementsByClassName("e-filter-parent")[0]&&(o=this.list.getElementsByClassName("e-filter-parent")[0].cloneNode(!0)),0===n.length){var a=i.childNodes[0];a&&i.removeChild(a)}if(r.prototype.onActionComplete.call(this,i,n,s),this.allowFiltering&&!f(o)&&(this.list.insertBefore(o,this.list.firstElementChild),this.filterParent=this.list.getElementsByClassName("e-filter-parent")[0],this.filterWireEvents(o)),this.initWrapper(),this.setSelection(),this.initDraggable(),this.mainList=this.ulElement,this.initLoad)this.jsonData=[],de(this.jsonData,n,[]),this.initToolbarAndStyles(),this.wireEvents(),this.showCheckbox&&this.setCheckboxPosition(),this.allowFiltering&&this.setFiltering();else if(this.isDataSourceUpdate&&(this.jsonData=[],de(this.jsonData,n,[]),this.isDataSourceUpdate=!1),this.allowFiltering){var l=this.list.getElementsByClassName("e-input-filter")[0],h=this.filterInput.value.length;l.selectionStart=h,l.selectionEnd=h,l.focus()}if(this.toolbarSettings.items.length&&this.scope&&this.scope.indexOf("#")>-1&&!f(s)){var u=this.scope.replace("#","");Ya(document.getElementById(u),this.getModuleName()).initToolbar()}this.initLoad=!1},t.prototype.initToolbarAndStyles=function(){this.initToolbar(),this.setCssClass(),this.setEnable(),this.setHeight()},t.prototype.triggerDragStart=function(i){var s,n=this;i=de(this.getDragArgs(i),{dragSelected:!0}),X.isIos&&(this.list.style.overflow="hidden"),this.trigger("dragStart",i,function(o){n.allowDragAll=o.dragSelected,n.allowDragAll||(s=n.ulElement.getElementsByClassName("e-list-badge")[0])&&we(s)})},t.prototype.triggerDrag=function(i){var n,s,l,a=i.event;if(i.target&&(i.target.classList.contains("e-listbox-wrapper")||i.target.classList.contains("e-list-item")||i.target.classList.contains("e-filter-parent")||i.target.classList.contains("e-input-group"))&&(l=i.target.classList.contains("e-list-item")||i.target.classList.contains("e-filter-parent")||i.target.classList.contains("e-input-group")?i.target.closest(".e-listbox-wrapper"):i.target,(s=(n=this.allowFiltering?l.querySelector(".e-list-parent"):l).getBoundingClientRect()).y+n.offsetHeight-(a.pageY+36)<1?n.scrollTop=n.scrollTop+10:a.pageY-36-s.y<1&&(n.scrollTop=n.scrollTop-10)),null!==i.target){this.trigger("drag",this.getDragArgs(i));var h=this.getComponent(i.target);if(h&&0===h.listData.length){var u=h.ulElement.childNodes[0];u&&h.ulElement.removeChild(u)}}},t.prototype.beforeDragEnd=function(i){this.dragValue=this.getFormattedValue(i.droppedElement.getAttribute("data-value")),i.items=this.value.indexOf(this.dragValue)>-1?this.getDataByValues(this.value):this.getDataByValues([this.dragValue]),this.trigger("beforeDrop",i)},t.prototype.dragEnd=function(i){var s,o,a,l,h,u,n=this,p=this.getFormattedValue(i.droppedElement.getAttribute("data-value")),m=this.getComponent(i.droppedElement),y=this.getDragArgs({target:i.droppedElement},!0),C={previousData:this.dataSource},S={previousData:m.dataSource},T=de({},y,{target:i.target,source:{previousData:this.dataSource},previousIndex:i.previousIndex,currentIndex:i.currentIndex});if(m!==this){var R=de(C,{currentData:this.listData});T=de(T,{source:R,destination:S})}if(X.isIos&&(this.list.style.overflow=""),m===this){var P=this.ulElement;s=[].slice.call(this.listData),o=[].slice.call(this.liCollections),a=[].slice.call(this.jsonData),u=[].slice.call(this.sortedData);var O=i.currentIndex,N=i.currentIndex=this.getCurIdx(this,i.currentIndex),z=s.indexOf(this.getDataByValue(p)),U=a.indexOf(this.getDataByValue(p)),ae=u.indexOf(this.getDataByValue(p));s.splice(N,0,s.splice(z,1)[0]),u.splice(O,0,u.splice(ae,1)[0]),a.splice(N,0,a.splice(U,1)[0]),o.splice(N,0,o.splice(z,1)[0]),this.allowDragAll&&(h=this.value&&Array.prototype.indexOf.call(this.value,p)>-1?this.value:[p]).forEach(function(Ve){if(Ve!==p){var Wt=s.indexOf(n.getDataByValue(Ve)),Kt=a.indexOf(n.getDataByValue(Ve)),ei=u.indexOf(n.getDataByValue(Ve));Wt>N&&N++,a.splice(N,0,a.splice(Kt,1)[0]),s.splice(N,0,s.splice(Wt,1)[0]),u.splice(O,0,u.splice(ei,1)[0]),o.splice(N,0,o.splice(Wt,1)[0]),P.insertBefore(n.getItems()[n.getIndexByValue(Ve)],P.getElementsByClassName("e-placeholder")[0])}}),this.listData=s,this.jsonData=a,this.sortedData=u,this.liCollections=o}else{var me,Te=[].slice.call(this.liCollections),Oe=i.currentIndex=this.getCurIdx(m,i.currentIndex),oe=m.ulElement;s=[].slice.call(m.listData),o=[].slice.call(m.liCollections),a=[].slice.call(m.jsonData),u=[].slice.call(m.sortedData),h=this.value&&Array.prototype.indexOf.call(this.value,p)>-1&&this.allowDragAll?this.value:[p];var Ie=[].slice.call(this.listData),De=[].slice.call(this.sortedData);if(h.forEach(function(Ve,Wt){l=n.getDataByValue(Ve);var Kt=n.listData.indexOf(l),ei=n.jsonData.indexOf(l),yi=n.sortedData.indexOf(l);Ie.splice(Kt,1),n.jsonData.splice(ei,1),De.splice(yi,1),n.listData=Ie,n.sortedData=De;var Ai=Ve===p?i.currentIndex:Oe;if(s.splice(Ai,0,l),a.splice(Ai,0,l),u.splice(Ai,0,l),o.splice(Ai,0,Te.splice(Kt,1)[0]),Ve)me=n.getItems()[n.getIndexByValue(Ve)];else for(var Ki=n.getItems(),ri=0;ri<Ki.length;ri++)if(null===Ki[ri].getAttribute("data-value")&&Ki[ri].classList.contains("e-list-item")){me=Ki[ri];break}me||(me=i.helper),n.removeSelected(n,Ve===p?[i.droppedElement]:[me]),oe.insertBefore(me,oe.getElementsByClassName("e-placeholder")[0]),Oe++}),this.fields.groupBy){var fe=this.renderItems(this.listData,this.fields);this.updateListItems(fe,this.ulElement),this.setSelection()}if("None"!==m.sortOrder||this.selectionSettings.showCheckbox!==m.selectionSettings.showCheckbox||m.fields.groupBy||m.itemTemplate||this.itemTemplate){var _e=Ya(oe,"sortable");fe=m.renderItems(s,m.fields),m.updateListItems(fe,oe),this.setSelection(),_e.placeHolderElement&&oe.appendChild(_e.placeHolderElement),oe.appendChild(i.helper),m.setSelection()}this.liCollections=Te,m.liCollections=o,m.jsonData=de([],[],a,!1),m.listData=de([],[],s,!1),m.sortedData=de([],[],u,!1),0===this.listData.length&&this.l10nUpdate()}if(this===m)R=de(C,{currentData:s}),T=de(T,{source:R});else{var je=de(S,{currentData:s});T=de(T,{destination:je})}this.trigger("drop",T);var Se=T.elements;if(Se.length)for(var Pe=0;Pe<Se.length;Pe++)Se[Pe].classList.remove("e-grabbed")},t.prototype.updateListItems=function(i,n){for(n.innerHTML="";0<i.childNodes.length;)n.appendChild(i.childNodes[0])},t.prototype.removeSelected=function(i,n){i.selectionSettings.showCheckbox?n.forEach(function(s){s.getElementsByClassName("e-frame")[0].classList.remove("e-check")}):W(n,sn.selected)},t.prototype.getCurIdx=function(i,n){return i.fields.groupBy&&(n-=[].slice.call(i.ulElement.children).slice(0,n).filter(function(s){return s.classList.contains(sn.group)}).length),n},t.prototype.getComponent=function(i){var n,s="EJS-LISTBOX"===this.element.tagName?j(i,".e-listbox"):j(i,".e-listbox-wrapper")&&j(i,".e-listbox-wrapper").querySelector(".e-listbox");return s&&(n=Ya(s,this.getModuleName())),n},t.prototype.listOption=function(i,n){return this.listCurrentOptions=r.prototype.listOption.call(this,i,n),this.listCurrentOptions=de({},this.listCurrentOptions,{itemCreated:this.triggerBeforeItemRender.bind(this)},!0),this.notify("listoption",{module:"CheckBoxSelection"}),this.listCurrentOptions},t.prototype.triggerBeforeItemRender=function(i){i.item.setAttribute("tabindex","-1"),this.trigger("beforeItemRender",{element:i.item,item:i.curData})},t.prototype.requiredModules=function(){var i=[];return this.selectionSettings.showCheckbox&&i.push({member:"CheckBoxSelection",args:[this]}),i},t.prototype.enableItems=function(i,n,s){var a,o=this;void 0===n&&(n=!0),i.forEach(function(l){(a=o.findListElement(o.list,"li","data-value",s?l:o.getValueByText(l)))&&(n?(W([a],sn.disabled),a.removeAttribute("aria-disabled")):(B([a],sn.disabled),a.setAttribute("aria-disabled","true")))})},t.prototype.selectItems=function(i,n,s){void 0===n&&(n=!0),this.setSelection(i,n,!s),this.updateSelectedOptions()},t.prototype.selectAll=function(i){void 0===i&&(i=!0),this.selectAllItems(i)},t.prototype.addItems=function(i,n){r.prototype.addItem.call(this,i,n)},t.prototype.removeItems=function(i,n){this.removeItem(i,n)},t.prototype.removeItem=function(i,n){var s=[],o=this.list.querySelectorAll("."+et_li);if(i){i=i instanceof Array?i:[i];var a=this.fields,l=void 0,u=[],p=void 0;de(u,[],this.jsonData);for(var m=[],y=[],C=0;C<i.length;C++){l=i[C]instanceof Object?re(a.value,i[C]):i[C].toString();for(var S=0,T=u.length;S<T;S++)if((u[S]instanceof Object?re(a.value,u[S]):u[S].toString())===l){var R=(p=this.getIndexByValue(l))===S?p:S;s.push(o[R]),m.push(R),y.push(R)}}for(var P=m.length-1;P>=0;P--)this.listData.splice(m[P],1);for(P=m.length-1;P>=0;P--)this.jsonData.splice(m[P],1);for(P=y.length-1;P>=0;P--)this.updateLiCollection(y[P])}else s.push(o[n=n||0]),this.listData.splice(n,1),this.jsonData.splice(n,1),this.updateLiCollection(n);for(S=0;S<s.length;S++)this.ulElement.removeChild(s[S]);0===this.listData.length&&this.l10nUpdate(),this.value=[],this.updateToolBarState()},t.prototype.getDataByValues=function(i){for(var n=[],s=0;s<i.length;s++)n.push(this.getDataByValue(i[s]));return n},t.prototype.moveUp=function(i){var n=i?this.getElemByValue(i):this.getSelectedItems();this.moveUpDown(!0,!1,n)},t.prototype.moveDown=function(i){var n=i?this.getElemByValue(i):this.getSelectedItems();this.moveUpDown(!1,!1,n)},t.prototype.moveTo=function(i,n,s){var o=i?this.getElemByValue(i):this.getSelectedItems(),a=s?Ya(s,e):this.getScopedListBox();this.moveData(this,a,!1,o,n)},t.prototype.moveAllTo=function(i,n){if(this.listData.length>0){var s=i?Ya(i,e):this.getScopedListBox();this.moveAllData(this,s,!1,n)}},t.prototype.getDataList=function(){return this.jsonData},t.prototype.getSortedList=function(){var i,n;if(i=n=this.sortedData,this.fields.groupBy){i=[];for(var s=0;s<n.length;s++)n[s].isHeader||i.push(n[s])}return i},t.prototype.getElemByValue=function(i){for(var n=[],s=0;s<i.length;s++)n.push(this.ulElement.querySelector('[data-value ="'+i[s]+'"]'));return n},t.prototype.updateLiCollection=function(i){var n=[].slice.call(this.liCollections);n.splice(i,1),this.liCollections=n},t.prototype.selectAllItems=function(i,n){var s=this;if([].slice.call(this.getItems()).forEach(function(m){if(!m.classList.contains(sn.disabled))if(s.selectionSettings.showCheckbox){var y=m.getElementsByClassName("e-check")[0];(!y&&i||y&&!i)&&(s.notify("updatelist",{li:m,module:"listbox"}),s.maximumSelectionLength>=s.list.querySelectorAll(".e-list-item span.e-check").length&&s.checkMaxSelection())}else i?m.classList.add(sn.selected):m.classList.remove(sn.selected)}),this.updateSelectedOptions(),this.allowFiltering&&this.selectionSettings.showCheckbox){var o=this.list.getElementsByTagName("li"),a=0;if(i){var l=function(){var m=h.getFormattedValue(o[a].getAttribute("data-value"));h.value.some(function(y){return y===m})||h.value.push(h.getFormattedValue(o[a].getAttribute("data-value")))},h=this;for(a=0;a<o.length;a++)l()}else{var u=function(){var m=p.getFormattedValue(o[a].getAttribute("data-value"));p.value=p.value.filter(function(y){return y!==m})},p=this;for(a=0;a<o.length;a++)u()}document.querySelectorAll("ul").length<2&&this.updateMainList()}this.triggerChange(this.getSelectedItems(),n)},t.prototype.updateMainList=function(){var i=this.mainList.querySelectorAll(".e-list-item"),n=this.ulElement.querySelectorAll(".e-list-item"),s=i.length,o=n.length;if(this.selectionSettings.showCheckbox||document.querySelectorAll("ul").length>1||s!==o)for(var a=0,l=0,h=0;a<s;){if(this.value)for(;l<this.value.length;l++)i[a].getAttribute("data-value")===this.value[l]&&h++;!h&&this.selectionSettings.showCheckbox&&i[a].getElementsByClassName("e-frame")[0].classList.remove("e-check"),document.querySelectorAll("ul").length>1&&h&&s!==o?(this.mainList.removeChild(this.mainList.getElementsByTagName("li")[a]),a=0):a++,h=0,l=0}},t.prototype.wireEvents=function(){var i=j(this.element,"form"),n="EJS-LISTBOX"===this.element.tagName?this.element:this.list;A.add(this.list,"click",this.clickHandler,this),A.add(n,"keydown",this.keyDownHandler,this),A.add(n,"focusout",this.focusOutHandler,this),this.wireToolbarEvent(),this.selectionSettings.showCheckbox&&A.remove(document,"mousedown",this.checkBoxSelectionModule.onDocumentClick),(this.fields.groupBy||this.element.querySelector("select>optgroup"))&&A.remove(this.list,"scroll",this.setFloatingHeader),i&&A.add(i,"reset",this.formResetHandler,this)},t.prototype.wireToolbarEvent=function(){this.toolbarSettings.items.length&&A.add(this.getToolElem(),"click",this.toolbarClickHandler,this)},t.prototype.unwireEvents=function(){var i=j(this.element,"form"),n="EJS-LISTBOX"===this.element.tagName?this.element:this.list;A.remove(this.list,"click",this.clickHandler),A.remove(n,"keydown",this.keyDownHandler),A.remove(n,"focusout",this.focusOutHandler),this.allowFiltering&&this.clearFilterIconElem&&A.remove(this.clearFilterIconElem,"click",this.clearText),this.toolbarSettings.items.length&&A.remove(this.getToolElem(),"click",this.toolbarClickHandler),i&&A.remove(i,"reset",this.formResetHandler)},t.prototype.clickHandler=function(i){this.selectHandler(i)},t.prototype.checkSelectAll=function(){for(var i=0,n=this.list.querySelectorAll("li."+et_li),s=0;s<n.length;s++)n[s].classList.contains("e-disabled")||i++;var o=this.getSelectedItems().length;this.showSelectAll&&i&&this.notify("checkSelectAll",{module:"CheckBoxSelection",value:i===o?"check":0===o?"uncheck":"indeterminate"})},t.prototype.getQuery=function(i){var n=i?i.clone():this.query?this.query.clone():new ni;if(this.allowFiltering){var s=""===this.inputString?"contains":this.filterType,o=this.typeOfData(this.dataSource).typeof;null===o&&(o=this.typeOfData(this.jsonData).typeof),n.where((this.dataSource instanceof Xe||"string"!==o)&&"number"!==o&&this.fields.text?this.fields.text:"",s,this.inputString,this.ignoreCase,this.ignoreAccent)}else n=i||(this.query?this.query:new ni);return n},t.prototype.setFiltering=function(){var i;if(this.initLoad||f(this.filterParent))return this.filterParent=this.createElement("span",{className:dT.filterParent}),this.filterInput=this.createElement("input",{attrs:{type:"text"},className:dT.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element),xt([(i=ke.createInput({element:this.filterInput,buttons:[dT.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement)).container],this.filterParent),ao([this.filterParent],this.list),qe(this.filterInput,{"aria-disabled":"false","aria-owns":this.element.id+"_options",role:"listbox","aria-activedescendant":null,autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"}),this.height.toString().indexOf("%")<0&&B([this.list],"e-filter-list"),this.inputString=this.filterInput.value,this.filterWireEvents(),i},t.prototype.filterWireEvents=function(i){i&&(this.filterInput=i.querySelector(".e-input-filter")),this.clearFilterIconElem=this.filterInput.parentElement.querySelector("."+dT.clearIcon),this.clearFilterIconElem&&(A.add(this.clearFilterIconElem,"click",this.clearText,this),i||(this.clearFilterIconElem.style.visibility="hidden")),A.add(this.filterInput,"input",this.onInput,this),A.add(this.filterInput,"keyup",this.KeyUp,this),A.add(this.filterInput,"keydown",this.onKeyDown,this)},t.prototype.selectHandler=function(i,n){var o,s=!0,a=j(i.target,".e-list-item"),l=[a];if(a&&a.parentElement){if(o=[].slice.call(a.parentElement.children).indexOf(a),this.selectionSettings.showCheckbox?s=!a.getElementsByClassName("e-frame")[0].classList.contains("e-check"):(i.ctrlKey||i.metaKey||X.isDevice)&&this.isSelected(a)?(a.classList.remove(sn.selected),a.removeAttribute("aria-selected"),s=!1):"Multiple"===this.selectionSettings.mode&&(i.ctrlKey||i.metaKey||X.isDevice)||(this.getSelectedItems().forEach(function(p){p.removeAttribute("aria-selected")}),W(this.getSelectedItems(),sn.selected)),i.shiftKey&&!this.selectionSettings.showCheckbox&&"Single"!==this.selectionSettings.mode?l=[].slice.call(a.parentElement.children).slice(Math.min(o,this.prevSelIdx),Math.max(o,this.prevSelIdx)+1).filter(function(p){return p.classList.contains("e-list-item")}):this.prevSelIdx=[].slice.call(a.parentElement.children).indexOf(a),s?(this.selectionSettings.showCheckbox||B(l,sn.selected),l.forEach(function(p){p.setAttribute("aria-selected","true")}),this.list.setAttribute("aria-activedescendant",a.id)):l.forEach(function(p){p.setAttribute("aria-selected","false")}),!n&&(this.maximumSelectionLength>(this.value&&this.value.length)||!s)&&(this.maximumSelectionLength>=(this.value&&this.value.length)||!s)&&!(this.maximumSelectionLength<(this.value&&this.value.length))&&this.notify("updatelist",{li:a,e:i,module:"listbox"}),this.allowFiltering&&!n){var h=this.getFormattedValue(a.getAttribute("data-value"));if(s){var u=[];de(u,this.value),u.push(h),this.value=u}else this.value=this.value.filter(function(p){return p!==h});document.querySelectorAll("ul").length<2&&this.updateMainList()}this.updateSelectedOptions(),this.triggerChange(this.getSelectedItems(),i),this.checkMaxSelection()}},t.prototype.triggerChange=function(i,n){this.trigger("change",{elements:i,items:this.getDataByElements(i),value:this.value,event:n})},t.prototype.getDataByElems=function(i){for(var n=[],s=0,o=i.length;s<o;s++)n.push(this.getDataByValue(this.getFormattedValue(i[s].getAttribute("data-value"))));return n},t.prototype.getDataByElements=function(i){var s,n=[],o=0;if(!f(this.listData)){var a=this.typeOfData(this.listData).typeof;if("string"===a||"number"===a||"boolean"===a)for(var l=0,h=this.listData;l<h.length;l++){for(var u=h[l],p=o,m=i.length;p<m;p++)if(s=this.getFormattedValue(i[p].getAttribute("data-value")),!f(u)&&u===s){o=p,n.push(u);break}if(i.length===n.length)break}else for(var y=0,C=this.listData;y<C.length;y++){for(u=C[y],p=o,m=i.length;p<m;p++)if(s=this.getFormattedValue(i[p].getAttribute("data-value")),!f(u)&&re(this.fields.value?this.fields.value:"value",u)===s){o=p,n.push(u);break}if(i.length===n.length)break}return n}return null},t.prototype.checkMaxSelection=function(){var i=this.list.querySelectorAll(".e-list-item span.e-check").length;if(this.selectionSettings.showCheckbox)for(var n=0,s=this.list.getElementsByClassName("e-list-item");n<s.length;n++)s[n].querySelector(".e-frame.e-check")||(i===this.maximumSelectionLength?s[n].classList.add("e-disable"):s[n].classList.contains("e-disable")&&s[n].classList.remove("e-disable"))},t.prototype.toolbarClickHandler=function(i){var n=j(i.target,"button");if(n){if(this.toolbarAction=n.getAttribute("data-value"),n.disabled)return;switch(this.toolbarAction){case"moveUp":this.moveUpDown(!0);break;case"moveDown":this.moveUpDown();break;case"moveTo":this.moveItemTo();break;case"moveFrom":this.moveItemFrom();break;case"moveAllTo":this.moveAllItemTo();break;case"moveAllFrom":this.moveAllItemFrom();break;default:this.trigger("actionBegin",{cancel:!1,items:this.getDataByElems(this.getSelectedItems()),eventName:this.toolbarAction})}}},t.prototype.moveUpDown=function(i,n,s){var o=this,a=this.getSelectedItems();if(s&&(a=s),!(i&&this.isSelected(this.ulElement.firstElementChild)||!i&&this.isSelected(this.ulElement.lastElementChild))||s){var l=this.getDataByElems(a),h={cancel:!1,items:l,eventName:this.toolbarAction};this.trigger("actionBegin",h),!h.cancel&&((i?a:a.reverse()).forEach(function(u){var p=Array.prototype.indexOf.call(o.ulElement.querySelectorAll(".e-list-item"),u),m=Array.prototype.indexOf.call(o.ulElement.children,u);iN(o.ulElement,o.ulElement,[m],i?m-1:m+2),o.changeData(m,i?m-1:m+1,i?p-1:p+1,u)}),this.trigger("actionComplete",{items:l,eventName:this.toolbarAction}),a[0].focus(),!n&&this.toolbarSettings.items.length&&this.getToolElem().querySelector("[data-value="+(i?"moveUp":"moveDown")+"]").focus(),this.updateToolBarState())}},t.prototype.moveItemTo=function(){this.moveData(this,this.getScopedListBox())},t.prototype.moveItemFrom=function(){this.moveData(this.getScopedListBox(),this)},t.prototype.moveData=function(i,n,s,o,a){var l=[],h=[],u=[],p=[],m=[].slice.call(i.listData),y=[].slice.call(n.listData),C=[].slice.call(i.sortedData),S=[].slice.call(n.sortedData),T=[].slice.call(i.liCollections),R=[],P=[].slice.call(n.liCollections),O=[],N=[],z=i.getSelectedItems();o&&(z=o);var U="None"!==n.sortOrder||n.selectionSettings.showCheckbox!==i.selectionSettings.showCheckbox||n.fields.groupBy||n.itemTemplate||i.itemTemplate;if(i.value=[],z.length){this.removeSelected(i,z),z.forEach(function(fe){l.push(Array.prototype.indexOf.call(i.ulElement.children,fe)),R.push(Array.prototype.indexOf.call(i.ulElement.querySelectorAll(".e-list-item"),fe)),h.push(Array.prototype.indexOf.call(i.listData,i.getDataByElems([fe])[0])),p.push(Array.prototype.indexOf.call(i.sortedData,i.getDataByElems([fe])[0])),u.push(Array.prototype.indexOf.call(i.jsonData,i.getDataByElems([fe])[0]))}),"None"!==this.sortOrder?p.forEach(function(fe){O.push(i.sortedData[fe])}):u.forEach(function(fe){O.push(i.jsonData[fe])});var ae={cancel:!1,items:O,eventName:this.toolbarAction};if(i.trigger("actionBegin",ae),ae.cancel)return;var me=[];if(R.sort(function(fe,_e){return fe-_e}).reverse().forEach(function(fe){me.push(T.splice(fe,1)[0])}),i.liCollections=T,a){var Te=P.splice(0,a);n.liCollections=Te.concat(me.reverse()).concat(P)}else n.liCollections=P.concat(me.reverse());if(0===n.listData.length){var Oe=n.ulElement.childNodes[0];Oe&&n.ulElement.removeChild(Oe)}if(h.sort(function(fe,_e){return _e-fe}).forEach(function(fe){m.splice(fe,1)}),p.sort(function(fe,_e){return _e-fe}).forEach(function(fe){C.splice(fe,1)}),u.slice().reverse().forEach(function(fe){N.push(i.jsonData.splice(fe,1)[0])}),U)if(i.fields.groupBy){var oe=i.renderItems(m,i.fields);i.updateListItems(oe,i.ulElement)}else z.forEach(function(fe){we(fe)});else iN(i.ulElement,n.ulElement,l,a),i.trigger("actionComplete",{items:O,eventName:this.toolbarAction});n.mainList.childElementCount!==n.jsonData.length&&(n.mainList=n.ulElement),i.updateMainList();var Ie=[].slice.call(n.jsonData);S=[].slice.call(n.sortedData),this.selectNextList(z,R,h,i),s&&this.list.focus(),i.listData=m,i.sortedData=C,a=a||y.length;for(var De=O.length-1;De>=0;De--)y.splice(a,0,O[De]),Ie.splice(a,0,O[De]),S.splice(a,0,O[De]);n.listData=y,n.jsonData=Ie,n.sortedData=S,U&&(oe=n.renderItems(y,n.fields),n.updateListItems(oe,n.ulElement),n.setSelection(),i.trigger("actionComplete",{items:O,eventName:this.toolbarAction})),i.updateSelectedOptions(),0===i.listData.length&&i.l10nUpdate()}1===i.value.length&&i.getSelectedItems().length&&(i.value[0]=i.getFormattedValue(i.getSelectedItems()[0].getAttribute("data-value")))},t.prototype.selectNextList=function(i,n,s,o){var l,h,a=o.ulElement.querySelectorAll(".e-list-item").length,u=-1;1===i.length&&a&&!o.selectionSettings.showCheckbox&&(h=a<=n[0]?a-1:n[0],l=o.ulElement.querySelectorAll(".e-list-item")[h],(u=o.getValidIndex(l,h,a===s[0]?38:40))>-1&&o.ulElement.querySelectorAll(".e-list-item")[u].classList.add(sn.selected))},t.prototype.moveAllItemTo=function(){this.moveAllData(this,this.getScopedListBox())},t.prototype.moveAllItemFrom=function(){this.moveAllData(this.getScopedListBox(),this)},t.prototype.moveAllData=function(i,n,s,o){var a=[].slice.call(n.listData),l=[].slice.call(n.jsonData),h="None"!==n.sortOrder||n.selectionSettings.showCheckbox!==i.selectionSettings.showCheckbox||n.fields.groupBy||n.itemTemplate||i.itemTemplate;this.removeSelected(i,i.getSelectedItems());var u=[].slice.call(i.jsonData),p={cancel:!1,items:u,eventName:this.toolbarAction};if(i.trigger("actionBegin",p),!p.cancel){var m;0===n.listData.length&&(m=n.ulElement.childNodes[0])&&n.ulElement.removeChild(m),h&&(m=i.ulElement.childNodes[0])&&i.ulElement.removeChild(m),iN(i.ulElement,n.ulElement,Array.apply(null,{length:i.ulElement.childElementCount}).map(Number.call,Number),o),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction}),s&&this.list.focus(),o=o||a.length;for(var y=0;y<i.listData.length;y++)a.splice(o+y,0,i.listData[y]);for(y=0;y<i.jsonData.length;y++)l.splice(o+y,0,i.jsonData[y]);var C=[].slice.call(i.liCollections),S=[].slice.call(n.liCollections);if(i.liCollections=[],o){var T=S.splice(0,o);n.liCollections=T.concat(C).concat(S)}else n.liCollections=S.concat(C);if(i.value=[],a=a.filter(function(O){return!0!==O.isHeader}),n.listData=n.jsonData=a,i.listData.length==i.jsonData.length)i.listData=i.sortedData=i.jsonData=[];else if(this.allowFiltering){for(y=0;y<i.listData.length;y++)for(var R=0;R<i.jsonData.length;R++)i.listData[y]===i.jsonData[R]&&i.jsonData.splice(R,1);i.listData=i.sortedData=[]}if(h){var P=n.renderItems(a,n.fields);n.updateListItems(P,n.ulElement),this.trigger("actionComplete",{items:u,eventName:this.toolbarAction})}else n.sortedData=a;i.updateSelectedOptions(),0===i.listData.length&&i.l10nUpdate()}},t.prototype.changeData=function(i,n,s,o){var a=[].slice.call(this.listData),l=[].slice.call(this.jsonData),h=[].slice.call(this.sortedData),u=Array.prototype.indexOf.call(this.jsonData,this.getDataByElems([o])[0]),p=Array.prototype.indexOf.call(this.sortedData,this.getDataByElems([o])[0]),m=[].slice.call(this.liCollections);a.splice(n,0,a.splice(i,1)[0]),l.splice(s,0,l.splice(u,1)[0]),h.splice(n,0,h.splice(p,1)[0]),m.splice(n,0,m.splice(i,1)[0]),this.listData=a,this.jsonData=l,this.liCollections=m,this.sortedData=h},t.prototype.getSelectedItems=function(){var i=[];return this.selectionSettings.showCheckbox?[].slice.call(this.ulElement.getElementsByClassName("e-check")).forEach(function(n){i.push(j(n,".e-list-item"))}):i=[].slice.call(this.ulElement.getElementsByClassName(sn.selected)),i},t.prototype.getScopedListBox=function(){var n,i=this;return this.scope&&[].slice.call(document.querySelectorAll(this.scope)).forEach(function(s){Ya(s,i.getModuleName())&&(n=Ya(s,i.getModuleName()))}),n},t.prototype.getGrabbedItems=function(i){for(var n=!1,s=0;s<this.value.length;s++)if(this.value[s]===this.getFormattedValue(i.target.getAttribute("data-value"))){n=!0;break}if(n)for(s=0;s<this.value.length;s++)for(var o=this.list.querySelectorAll('[aria-selected="true"]'),a=0;a<o.length;a++)this.value[s]===this.getFormattedValue(o[a].getAttribute("data-value"))&&o[a].classList.add("e-grabbed");return Array.prototype.slice.call(this.isAngular?this.element.getElementsByClassName("e-list-parent")[0].querySelectorAll(".e-grabbed"):this.element.nextElementSibling.querySelectorAll(".e-grabbed"))},t.prototype.getDragArgs=function(i,n){var s=this.getGrabbedItems(i);return s.length?n&&s.push(i.target):s=[i.target],{elements:s,items:this.getDataByElems(s)}},t.prototype.onKeyDown=function(i){this.keyDownHandler(i),i.stopPropagation()},t.prototype.keyDownHandler=function(i){if([32,35,36,37,38,39,40,65].indexOf(i.keyCode)>-1&&!this.allowFiltering){if(i.target&&i.target.className.indexOf("e-edit-template")>-1)return;if(i.preventDefault(),32===i.keyCode&&this.ulElement.children.length)this.selectHandler({target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey});else if(65===i.keyCode&&i.ctrlKey)this.selectAll();else if((38===i.keyCode||40===i.keyCode)&&i.ctrlKey&&i.shiftKey)this.moveUpDown(38===i.keyCode,!0);else if(!this.toolbarSettings.items.length&&!this.tBListBox||39!==i.keyCode&&37!==i.keyCode||!i.ctrlKey)37!==i.keyCode&&39!==i.keyCode&&"KeyA"!==i.code&&this.upDownKeyHandler(i);else{var n=this.tBListBox||this.getScopedListBox();39===i.keyCode?i.shiftKey?this.moveAllData(this,n,!0):this.moveData(this,n,!0):i.shiftKey?this.moveAllData(n,this,!0):this.moveData(n,this,!0)}}else this.allowFiltering&&(40===i.keyCode||38===i.keyCode)&&this.upDownKeyHandler(i)},t.prototype.upDownKeyHandler=function(i){var n=this.ulElement,o=40===i.keyCode||36===i.keyCode?0:n.childElementCount-1,a=n.getElementsByClassName("e-focused")[0]||n.getElementsByClassName(sn.selected)[0];if(a){if(35!==i.keyCode&&36!==i.keyCode&&(o=Array.prototype.indexOf.call(n.children,a),40===i.keyCode?o++:o--,o<0||o>n.childElementCount-1))return;W([a],"e-focused")}var l=n.children[o];if(l){if(-1===(o=this.getValidIndex(l,o,i.keyCode)))return void B([a],"e-focused");if(n.children[o].focus(),n.children[o].classList.add("e-focused"),(!i.ctrlKey||!this.selectionSettings.showCheckbox&&i.shiftKey&&(36===i.keyCode||35===i.keyCode))&&this.selectHandler({target:n.children[o],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},!0),this.selectionSettings.showCheckbox&&i.ctrlKey&&i.shiftKey&&(36===i.keyCode||35===i.keyCode))for(var h=Array.prototype.indexOf.call(n.children,a),p="Home"===i.code?h:n.children.length-1,m="Home"===i.code?0:h;m<=p;m++)this.notify("updatelist",{li:n.children[m],e:{target:this.ulElement.getElementsByClassName("e-focused")[0],ctrlKey:i.ctrlKey,shiftKey:i.shiftKey},module:"listbox"})}},t.prototype.KeyUp=function(i){var n=this;if(f(String.fromCharCode(i.keyCode).match(/\w/))||(this.isValidKey=!0),this.isValidKey=8===i.keyCode||46===i.keyCode||this.isValidKey,this.isValidKey&&(this.isValidKey=!1,this.allowFiltering)){var a={preventDefaultAction:!1,text:this.targetElement(),updateData:function(l,h,u){a.cancel||(n.isFiltered=!0,n.remoteFilterAction=!0,n.dataUpdater(l,h,u))},event:i,cancel:!1};this.trigger("filtering",a,function(l){n.isDataFetched=!1,!(l.cancel||""!==n.filterInput.value&&n.isFiltered)&&(!l.cancel&&!n.isCustomFiltering&&!l.preventDefaultAction&&(n.inputString=n.filterInput.value,n.filteringAction(n.jsonData,new ni,n.fields)),!n.isFiltered&&!n.isCustomFiltering&&!l.preventDefaultAction&&n.dataUpdater(n.jsonData,new ni,n.fields))})}},t.prototype.filter=function(i,n,s){this.isCustomFiltering=!0,this.filteringAction(i,n,s)},t.prototype.filteringAction=function(i,n,s){this.resetList(i,s,n)},t.prototype.targetElement=function(){return this.targetInputElement=this.list.getElementsByClassName("e-input-filter")[0],this.targetInputElement.value},t.prototype.dataUpdater=function(i,n,s){if(this.isDataFetched=!1,""===this.targetElement().trim()){var a=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.remoteCustomValue=!1,this.onActionComplete(a,this.jsonData),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.selectionSettings.showCheckbox,e:this})}else this.resetList(i,s,n)},t.prototype.focusOutHandler=function(){var i=this.list.getElementsByClassName("e-focused")[0];i&&i.classList.remove("e-focused"),this.allowFiltering&&this.refreshClearIcon()},t.prototype.getValidIndex=function(i,n,s){var o=this.ulElement;return(i.classList.contains("e-disabled")||i.classList.contains(sn.group))&&(40===s||36===s?n++:n--),n<0||n===o.childElementCount?-1:(((i=o.querySelectorAll(".e-list-item")[n]).classList.contains("e-disabled")||i.classList.contains(sn.group))&&(n=this.getValidIndex(i,n,s)),n)},t.prototype.updateSelectedOptions=function(){var i=this,n=[],s=[];if(de(s,this.value),this.getSelectedItems().forEach(function(a){a.classList.contains("e-grabbed")||n.push(i.getFormattedValue(a.getAttribute("data-value")))}),this.mainList.childElementCount===this.ulElement.childElementCount)if(this.allowFiltering&&this.selectionSettings.showCheckbox){for(var o=0;o<n.length;o++)s.indexOf(n[o])>-1||s.push(n[o]);this.setProperties({value:s},!0)}else this.setProperties({value:n},!0);this.updateSelectTag(),this.updateToolBarState(),this.tBListBox&&this.tBListBox.updateToolBarState()},t.prototype.clearSelection=function(i){var s,n=this;void 0===i&&(i=this.value),this.selectionSettings.showCheckbox&&this.getSelectedItems().forEach(function(o){s=n.getFormattedValue(o.getAttribute("data-value")),i.indexOf(s)<0&&(o.getElementsByClassName("e-check")[0].classList.remove("e-check"),o.getElementsByClassName("e-checkbox-wrapper")[0].removeAttribute("aria-checked"),o.removeAttribute("aria-selected"))})},t.prototype.setSelection=function(i,n,s){var a,l,o=this;void 0===i&&(i=this.value),void 0===n&&(n=!0),void 0===s&&(s=!1),i&&i.forEach(function(h){var u;u=s?o.getValueByText(h):h,(a=o.list.querySelector('[data-value="'+u+'"]'))&&(l=o.selectionSettings.showCheckbox?a.getElementsByClassName("e-frame")[0].classList.contains("e-check"):a.classList.contains("e-selected"),(!n&&l||n&&!l&&a)&&(o.selectionSettings.showCheckbox?o.notify("updatelist",{li:a,module:"listbox"}):n?(a.classList.add(sn.selected),a.setAttribute("aria-selected","true")):(a.classList.remove(sn.selected),a.removeAttribute("aria-selected"))))}),this.updateSelectTag()},t.prototype.updateSelectTag=function(){var i=this.getSelectTag(),n="";if(i.innerHTML="",this.value){for(var s=0,o=this.value.length;s<o;s++)n+='<option selected value="'+this.value[s]+'"></option>';i.innerHTML+=n}this.checkSelectAll()},t.prototype.checkDisabledState=function(i){return 0===i.ulElement.querySelectorAll("."+sn.li).length},t.prototype.updateToolBarState=function(){var i=this;if(this.toolbarSettings.items.length){var n=this.getScopedListBox(),s=this.list.parentElement.getElementsByClassName("e-listbox-tool")[0];this.toolbarSettings.items.forEach(function(o){var a=s.querySelector('[data-value="'+o+'"]');switch(o){case"moveAllTo":a.disabled=i.checkDisabledState(i);break;case"moveAllFrom":a.disabled=i.checkDisabledState(n);break;case"moveFrom":a.disabled=!(n.value&&n.value.length);break;case"moveUp":a.disabled=!(i.value&&i.value.length&&!i.isSelected(i.ulElement.children[0]));break;case"moveDown":a.disabled=!(i.value&&i.value.length&&!i.isSelected(i.ulElement.children[i.ulElement.childElementCount-1]));break;default:a.disabled=!(i.value&&i.value.length)}})}},t.prototype.setCheckboxPosition=function(){var i=this.list;!this.initLoad&&"Left"===this.selectionSettings.checkboxPosition&&i.classList.remove("e-right"),"Right"===this.selectionSettings.checkboxPosition&&i.classList.add("e-right")},t.prototype.showCheckbox=function(i){var n=0,s=this.list.lastElementChild.querySelectorAll("li"),o=this.list.lastElementChild.getElementsByClassName("e-list-item").length;if(i){if(this.ulElement=this.renderItems(this.listData,this.fields),this.mainList=this.ulElement,this.list.removeChild(this.list.getElementsByTagName("ul")[0]),this.list.appendChild(this.ulElement),this.selectionSettings.showSelectAll&&!this.list.getElementsByClassName("e-selectall-parent")[0]){var a=new $r(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.showSelectAll=!0,this.selectAllText=a.getConstant("selectAllText"),this.unSelectAllText=a.getConstant("unSelectAllText"),this.popupWrapper=this.list,this.checkBoxSelectionModule.checkAllParent=null,this.notify("selectAll",{}),this.checkSelectAll()}}else{for(this.list.getElementsByClassName("e-selectall-parent")[0]&&this.list.removeChild(this.list.getElementsByClassName("e-selectall-parent")[0]);n<o;n++)s[n].classList.contains("e-list-item")&&s[n].removeChild(s[n].getElementsByClassName("e-checkbox-wrapper")[0]),s[n].hasAttribute("aria-selected")&&s[n].removeAttribute("aria-selected");this.mainList=this.ulElement}this.value=[]},t.prototype.isSelected=function(i){return!f(i)&&(i.classList.contains(sn.selected)||null!==i.querySelector(".e-check"))},t.prototype.getSelectTag=function(){return this.list.getElementsByClassName("e-hidden-select")[0]},t.prototype.getToolElem=function(){return this.list.parentElement.getElementsByClassName("e-listbox-tool")[0]},t.prototype.formResetHandler=function(){this.value=this.initialSelectedOptions},t.prototype.getModuleName=function(){return"listbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"listbox"},t.prototype.destroy=function(){this.unwireEvents(),"EJS-LISTBOX"===this.element.tagName?this.element.innerHTML="":(this.element.style.display="inline-block",this.toolbarSettings.items.length&&(this.list.parentElement.parentElement.insertBefore(this.list,this.list.parentElement),we(this.list.nextElementSibling)),this.list.parentElement.insertBefore(this.element,this.list)),r.prototype.destroy.call(this),this.enableRtlElements=[],this.liCollections=null,this.list=null,this.ulElement=null,this.mainList=null,this.spinner=null,this.rippleFun=null,this.itemTemplate&&this.clearTemplate()},t.prototype.onPropertyChanged=function(i,n){var s=this.toolbarSettings.items.length?this.list.parentElement:this.list;r.prototype.onPropertyChanged.call(this,i,n),this.setUpdateInitial(["fields","query","dataSource"],i);for(var o=0,a=Object.keys(i);o<a.length;o++)switch(a[o]){case"cssClass":n.cssClass&&W([s],n.cssClass.split(" ")),i.cssClass&&B([s],i.cssClass.split(" "));break;case"enableRtl":i.enableRtl?this.list.classList.add("e-rtl"):this.list.classList.remove("e-rtl");break;case"value":W(this.list.querySelectorAll("."+sn.selected),sn.selected),this.clearSelection(this.value),this.setSelection();break;case"height":this.setHeight();break;case"enabled":this.setEnable();break;case"allowDragAndDrop":i.allowDragAndDrop?this.initDraggable():Ya(this.ulElement,"sortable").destroy();break;case"allowFiltering":this.allowFiltering?this.setFiltering():(this.list.removeChild(this.list.getElementsByClassName("e-filter-parent")[0]),this.filterParent=null,W([this.list],"e-filter-list"));break;case"filterBarPlaceholder":this.allowFiltering&&this.filterInput&&ke.setPlaceholder(i.filterBarPlaceholder,this.filterInput);break;case"scope":this.allowDragAndDrop&&(Ya(this.ulElement,"sortable").scope=i.scope),this.toolbarSettings.items.length&&(n.scope&&(Ya(document.querySelector(n.scope),this.getModuleName()).tBListBox=null),i.scope&&(Ya(document.querySelector(i.scope),this.getModuleName()).tBListBox=this));break;case"toolbarSettings":var h=void 0,u=i.toolbarSettings.position,p=this.getToolElem();u&&(W([s],["e-right","e-left"]),s.classList.add("e-"+u.toLowerCase()),"Left"===u?s.insertBefore(p,this.list):s.appendChild(p)),i.toolbarSettings.items&&(n.toolbarSettings&&n.toolbarSettings.items.length&&((h=this.list.parentElement).parentElement.insertBefore(this.list,h),we(h)),this.initToolbarAndStyles(),this.wireToolbarEvent());break;case"selectionSettings":var m=i.selectionSettings.showSelectAll,y=i.selectionSettings.showCheckbox;if(!f(m)){if(this.showSelectAll=m,this.showSelectAll){var C=new $r(this.getModuleName(),{selectAllText:"Select All",unSelectAllText:"Unselect All"},this.locale);this.checkBoxSelectionModule.checkAllParent=null,this.showSelectAll=!0,this.selectAllText=C.getConstant("selectAllText"),this.unSelectAllText=C.getConstant("selectAllText"),this.popupWrapper=this.list}this.notify("selectAll",{}),this.checkSelectAll()}f(y)||this.showCheckbox(y),this.selectionSettings.showCheckbox&&this.setCheckboxPosition();break;case"dataSource":this.isDataSourceUpdate=!0,this.jsonData=[].slice.call(this.dataSource)}},ds([D("")],t.prototype,"cssClass",void 0),ds([D([])],t.prototype,"value",void 0),ds([D("")],t.prototype,"height",void 0),ds([D(!1)],t.prototype,"allowDragAndDrop",void 0),ds([D(1e3)],t.prototype,"maximumSelectionLength",void 0),ds([D(!1)],t.prototype,"allowFiltering",void 0),ds([D("")],t.prototype,"scope",void 0),ds([D(!0)],t.prototype,"ignoreCase",void 0),ds([D(null)],t.prototype,"filterBarPlaceholder",void 0),ds([K()],t.prototype,"beforeItemRender",void 0),ds([K()],t.prototype,"filtering",void 0),ds([K()],t.prototype,"select",void 0),ds([K()],t.prototype,"change",void 0),ds([K()],t.prototype,"beforeDrop",void 0),ds([K()],t.prototype,"dragStart",void 0),ds([K()],t.prototype,"drag",void 0),ds([K()],t.prototype,"drop",void 0),ds([K()],t.prototype,"dataBound",void 0),ds([D(null)],t.prototype,"groupTemplate",void 0),ds([D("Request failed")],t.prototype,"actionFailureTemplate",void 0),ds([D(1e3)],t.prototype,"zIndex",void 0),ds([D(!1)],t.prototype,"ignoreAccent",void 0),ds([Cn({},efe)],t.prototype,"toolbarSettings",void 0),ds([Cn({},Jpe)],t.prototype,"selectionSettings",void 0),e=ds([an],t)}(KN),dT={backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",clearIcon:"e-clear-icon"},xZ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Np="e-other-month",O6="e-other-year",NR="e-calendar",TZ="e-device",P6="e-year",L6="e-month",IZ="e-decade",AZ="e-icons",ra="e-disabled",$y="e-overlay",F6="e-week-number",Ll="e-selected",Zl="e-focused-date",nB="e-month-hide",kZ="e-today",rB="e-zoomin",MZ="e-calendar-day-header-lg",N6=864e5,OZ=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return xZ(t,r),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new Rr(this.locale),(f(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(NR),this.enableRtl&&this.element.classList.add("e-rtl"),X.isDevice&&this.element.classList.add(TZ),qe(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(NR),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),X.isDevice&&this.calendarElement.classList.add(TZ),qe(this.calendarElement,{"data-role":"calendar"})),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,i){f(e)&&this.setProperties({min:new Date(1900,0,1)},!0),f(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!f(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,i,n,s){if(s&&!f(i)&&!f(n)&&!f(e)){var o=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;n.style.zIndex=(o-1).toString(),e.style.zIndex=o.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?W([this.element],$y):(this.setProperties({min:this.min},!0),B([this.element],$y)),this.min=f(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=f(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var s=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),Lr(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),qe(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),Lr(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(qe(this.previousIcon,{tabIndex:"-1"}),qe(this.nextIcon,{tabIndex:"-1"})),qe(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),qe(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev "+AZ})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  "+AZ})),s.appendChild(this.previousIcon),s.appendChild(this.nextIcon),this.headerElement.appendChild(s),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var i,e=[],n="days.stand-alone."+this.dayHeaderFormat.toLowerCase();i="en"===this.locale||"en-US"===this.locale?re(n,vp()):this.getCultureObjects(Qo,""+this.locale);for(var s=0,o=Object.keys(i);s<o.length;s++)e.push(re(o[s],i));return e},t.prototype.toCapitalize=function(e){return!f(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content .e-week-header")[0])||we(this.element.querySelectorAll(".e-content .e-week-header")[0]):f(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||we(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(i+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?B([this.element],""+F6):B([this.calendarElement],""+F6));for(var n=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek),s=0;s<=6;s++)i+='<th  class="">'+this.toCapitalize(n[s])+"</th>";this.tableHeadElement.innerHTML=i="<tr>"+i+"</tr>",this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content tbody")[0])||we(this.element.querySelectorAll(".e-content tbody")[0]):f(this.calendarElement.querySelectorAll(".e-content tbody")[0])||we(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),i=new Date(+this.max);this.globalize=new Rr(this.locale),this.l10=new $r(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),Lr(this.todayElement),this.updateFooter(),B([this.todayElement],["e-btn",kZ,"e-flat","e-primary","e-css"]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&B([this.todayElement],ra),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(ra)||A.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,i,n,s){A.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new Hn(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new Hn(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,i,n,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=de(this.defaultKeyConfigs,n),this.serverModuleName=s},t.prototype.todayButtonClick=function(e,i,n){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),n):this.navigateTo("Month",new Date(this.checkValue(i)),n))},t.prototype.resetCalendar=function(){this.calendarElement&&we(this.calendarElement),this.tableBodyElement&&we(this.tableBodyElement),this.table&&we(this.table),this.tableHeadElement&&we(this.tableHeadElement),this.nextIcon&&we(this.nextIcon),this.previousIcon&&we(this.previousIcon),this.footer&&we(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,i,n){var o,s=this.tableBodyElement.querySelector("tr td.e-focused-date");o=n?f(s)||+i!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.keyboardNavigate(0===a?-7:-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.keyboardNavigate(0===a?7:4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,i);else{var u=f(s)?o:s;if(!f(u)&&!u.classList.contains(ra))if(h){var p=new Date(parseInt(""+u.id,0));this.selectDate(e,p,u)}else this.contentClick(null,--a,u,i)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!f(s)||!f(o)&&!h)&&this.contentClick(null,--a,s||o,i),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),we(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),we(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.keyboardNavigate=function(e,i,n,s,o){var a=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(we(this.tableBodyElement),this.renderDecades(n)):this.currentDate=a;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(we(this.tableBodyElement),this.renderYears(n)):this.currentDate=a;break;case 0:this.addDay(this.currentDate,e,n,s,o),this.isMinMaxRange(this.currentDate)?(we(this.tableBodyElement),this.renderMonths(n)):this.currentDate=a}},t.prototype.preRender=function(e){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(n){i.triggerNavigate(n)}},t.prototype.minMaxDate=function(e){var i=new Date(new Date(+e).setHours(0,0,0,0)),n=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+n||+i==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,i,n){var o,s=this.weekNumber?8:7;o="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,i,null,null,n,e):this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(o,s,L6,e,i):this.islamicModule.islamicRenderTemplate(o,s,L6,e,i)},t.prototype.renderDays=function(e,i,n,s,o,a){var m,l=[],u=o?new Date(+e):this.getDate(new Date,this.timezone),p=new Date(this.checkValue(e)),y=p.getMonth();this.titleUpdate(e,"days");var C=p;for(p=new Date(C.getFullYear(),C.getMonth(),0,C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds());p.getDay()!==this.firstDayOfWeek;)this.setStartDate(p,-1*N6);for(var S=0;S<42;++S){var T=this.createElement("td",{className:"e-cell"}),R=this.createElement("span");if(S%7==0&&this.weekNumber){var P="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,O=new Date(p.getFullYear(),p.getMonth(),p.getDate()+P);R.textContent=""+this.getWeek(O),T.appendChild(R),B([T],""+F6),l.push(T)}m=new Date(+p),p=this.minMaxDate(p);var N={type:"dateTime",skeleton:"full"},z=this.globalize.parseDate(this.globalize.formatDate(p,N),N),U=this.dayCell(p),ae=this.globalize.formatDate(p,{type:"date",skeleton:"full"}),me=this.createElement("span");me.textContent=this.globalize.formatDate(p,{format:"d",type:"date",skeleton:"yMd"});var Te=this.min>p||this.max<p;Te?(B([U],ra),B([U],$y)):me.setAttribute("title",""+ae),y!==p.getMonth()&&B([U],Np),(0===p.getDay()||6===p.getDay())&&B([U],"e-weekend"),U.appendChild(me),this.renderDayCellArgs={date:p,isDisabled:!1,element:U,isOutOfRange:Te};var Oe=this.renderDayCellArgs;if(this.renderDayCellEvent(Oe),Oe.isDisabled){var oe=new Date(this.checkValue(i)),Ie=new Date(this.checkValue(Oe.date));if(n){if(!f(s)&&s.length>0)for(var De=0;De<s.length;De++)+new Date(this.globalize.formatDate(Oe.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[De],{type:"date",skeleton:"yMd"}))&&(s.splice(De,1),De=-1)}else oe&&+oe==+Ie&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!U.classList.contains(Ll)&&(B([U],ra),B([U],$y),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var je=U.classList.contains(Np),Se=U.classList.contains(ra);Se||A.add(U,"click",this.clickHandler,this);var Pe=void 0;if(!f(a)&&"click"==a.type&&(Pe=a.currentTarget),!n||f(s)||Se)!Se&&this.getDateVal(p,i)&&B([U],Ll);else{for(var Ve=0;Ve<s.length;Ve++){var Kt={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(p,Kt)===this.globalize.formatDate(s[Ve],Kt)&&this.getDateVal(p,s[Ve])||this.getDateVal(p,i))&&B([U],Ll),!f(Pe)&&Pe.innerText===U.innerText&&this.previousDates&&U.classList.contains(Ll)&&Pe.classList.contains(Ll)){W([U],Ll),this.previousDates=!1;for(var ei=this.copyValues(s),yi=0;yi<ei.length;yi++){var Ki={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(z,Ki)===this.globalize.formatDate(ei[yi],Ki)&&(De=ei.indexOf(ei[yi]),ei.splice(De,1),s.splice(De,1))}this.setProperties({values:ei},!0)}else this.updateFocus(je,Se,p,U,e)}s.length<=0&&this.updateFocus(je,Se,p,U,e)}this.updateFocus(je,Se,p,U,e),z.getFullYear()===u.getFullYear()&&z.getMonth()===u.getMonth()&&z.getDate()===u.getDate()&&B([U],kZ),l.push(this.renderDayCellArgs.element),p=new Date(+m),this.addDay(p,1,null,this.max,this.min)}return l},t.prototype.updateFocus=function(e,i,n,s,o){o.getDate()!==n.getDate()||e||i?(o>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!i&&B([s],Zl),o<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!i&&B([s],Zl)):B([s],Zl)},t.prototype.renderYears=function(e,i){this.removeTableHeadElement();var s=[],o=f(i),a=new Date(this.checkValue(this.currentDate)),l=a.getMonth(),h=a.getFullYear(),u=a,p=u.getFullYear(),m=new Date(this.checkValue(this.min)).getFullYear(),y=new Date(this.checkValue(this.min)).getMonth(),C=new Date(this.checkValue(this.max)).getFullYear(),S=new Date(this.checkValue(this.max)).getMonth();u.setMonth(0),this.titleUpdate(this.currentDate,"months"),u.setDate(1);for(var T=0;T<12;++T){var R=this.dayCell(u),P=this.createElement("span"),O=i&&i.getMonth()===u.getMonth(),N=i&&i.getFullYear()===h&&O;P.textContent=this.toCapitalize(this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(p<m||T<y&&p===m)||this.max&&(p>C||T>S&&p>=C)?B([R],ra):!o&&N?B([R],Ll):u.getMonth()===l&&this.currentDate.getMonth()===l&&B([R],Zl),u.setDate(1),u.setMonth(u.getMonth()+1),R.classList.contains(ra)||A.add(R,"click",this.clickHandler,this),R.appendChild(P),s.push(R)}this.renderTemplate(s,4,P6,e,i)},t.prototype.renderDecades=function(e,i){this.removeTableHeadElement();var o=[],a=new Date(this.checkValue(this.currentDate));a.setMonth(0),a.setDate(1);var l=a.getFullYear(),h=new Date(a.setFullYear(l-l%10)),u=new Date(a.setFullYear(l-l%10+9)),p=h.getFullYear(),m=u.getFullYear(),y=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),C=this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=y+" - "+C;for(var T=new Date(l-l%10-1,0,1).getFullYear(),R=0;R<12;++R){var P=T+R;a.setFullYear(P);var O=this.dayCell(a),N=this.createElement("span");N.textContent=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"}),P<p||P>m?(B([O],O6),!f(i)&&a.getFullYear()===i.getFullYear()&&B([O],Ll),(P<new Date(this.checkValue(this.min)).getFullYear()||P>new Date(this.checkValue(this.max)).getFullYear())&&B([O],ra)):P<new Date(this.checkValue(this.min)).getFullYear()||P>new Date(this.checkValue(this.max)).getFullYear()?B([O],ra):f(i)||a.getFullYear()!==i.getFullYear()?a.getFullYear()===this.currentDate.getFullYear()&&!O.classList.contains(ra)&&B([O],Zl):B([O],Ll),O.classList.contains(ra)||A.add(O,"click",this.clickHandler,this),O.appendChild(N),o.push(O)}this.renderTemplate(o,4,"e-decade",e,i)},t.prototype.dayCell=function(e){var n={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a={className:"e-cell",attrs:{id:""+Sn(""+this.globalize.parseDate(this.globalize.formatDate(e,n),n).valueOf()),"aria-selected":"false"}};return this.createElement("td",a)},t.prototype.firstDay=function(e){var i="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Np):this.tableBodyElement.querySelectorAll("td:not(."+O6);if(i.length)for(var n=0;n<i.length;n++)if(!i[n].classList.contains(ra)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.lastDay=function(e,i){var n=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==i){var s=Math.abs(n.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&n.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(n)}return this.findLastDay(this.firstDay(n))},t.prototype.checkDateValue=function(e){return!f(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var i="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+O6):this.tableBodyElement.querySelectorAll("td:not(."+Np);if(i.length)for(var n=i.length-1;n>=0;n--)if(!i[n].classList.contains(ra)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content table thead")[0])||we(this.tableHeadElement):f(this.calendarElement.querySelectorAll(".e-content table thead")[0])||we(this.tableHeadElement)},t.prototype.renderTemplate=function(e,i,n,s,o){var l,a=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),W([this.contentElement,this.headerElement],[L6,IZ,P6]),B([this.contentElement,this.headerElement],[n]);for(var m=i,y=0,C=0;C<e.length/i;++C){for(l=this.createElement("tr"),y=0+y;y<m;y++)!e[y].classList.contains("e-week-number")&&!f(e[y].children[0])&&(B([e[y].children[0]],["e-day"]),Lr(e[y].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[y]),this.weekNumber&&7===y&&e[7].classList.contains(Np)&&B([l],nB),!this.weekNumber&&6===y&&e[6].classList.contains(Np)&&B([l],nB),this.weekNumber?41===y&&e[41].classList.contains(Np)&&B([l],nB):35===y&&e[35].classList.contains(Np)&&B([l],nB);m+=i,y+=0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(a!==this.getViewNumber(this.currentView())||0===a&&a!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,i){this.clickEventEmitter(e);var n=e.currentTarget,s=this.getViewNumber(this.currentView());n.classList.contains(Np)?this.contentClick(e,0,null,i):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===s?this.contentClick(e,1,null,i):n.classList.contains(Np)||0!==s?this.contentClick(e,0,n,i):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,i,n,s){var o=this.getViewNumber(this.currentView()),a=this.getIdValue(e,n);switch(i){case 0:o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(we(this.tableBodyElement),this.currentDate=a,this.effect=rB,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(a.getMonth()),a.getMonth()>0&&this.currentDate.getMonth()!==a.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(a.getFullYear())):this.currentDate=a,this.effect=rB,we(this.tableBodyElement),this.renderMonths(e));break;case 1:if(o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,a,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(a.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(a);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=rB,we(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,i,n,s){switch(e){case 0:we(this.tableBodyElement),this.renderMonths(i,null,s),n&&!f(this.tableBodyElement.querySelectorAll("."+Zl)[0])&&this.tableBodyElement.querySelectorAll("."+Zl)[0].classList.remove(Zl);break;case 1:we(this.tableBodyElement),this.renderYears(i);break;case 2:we(this.tableBodyElement),this.renderDecades(i)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i,n,s){this.effect="";for(var o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];switch(l){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===l?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&we(this.tableBodyElement),this.minMaxUpdate(),n&&this.validateValues(n,s),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(we(this.todayElement),we(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(W([this.todayElement],ra),we(this.todayElement),we(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new Rr(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!f(this.todayElement)&&!f(this.footer)&&(we(this.todayElement),we(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,i){if(e&&!f(i)&&i.length>0){for(var n=this.copyValues(i),s=0;s<n.length;s++){var l,a="Gregorian"===this.calendarMode?"gregorian":"islamic";l=this.globalize.formatDate(n[s],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});var p=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:a}),C=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:a});(+new Date(l)<+new Date(p)||+new Date(l)>+new Date(C))&&(n.splice(s,1),s=-1)}this.setProperties({values:n},!0)}},t.prototype.setValueUpdate=function(){f(this.tableBodyElement)||(we(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var i=[];if(!f(e)&&e.length>0)for(var n=0;n<e.length;n++)i.push(new Date(+e[n]));return i},t.prototype.titleUpdate=function(e,i){var s,o,n=new Rr(this.locale),a="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(s=n.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:a}),o=n.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:a})):(s=n.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:a}),o=n.formatDate(e,{type:"dateTime",format:"y",calendar:a})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=o}},t.prototype.setActiveDescendant=function(){var e,o,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic",a=this.currentView();return o=this.globalize.formatDate(this.currentDate,"Month"===a?{type:"date",skeleton:"full",calendar:s}:"Year"===a?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(n||i)&&(f(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",o),e=(i||n).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&W([this.element],[NR]),"calendar"===this.getModuleName()&&this.element&&(A.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&A.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),f(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),r.prototype.destroy.call(this)},t.prototype.title=function(e){var i=this.getViewNumber(this.currentView());this.effect=rB,this.switchView(++i,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,i,n){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,n)},t.prototype.currentView=function(){return this.contentElement.classList.contains(P6)?"Year":this.contentElement.classList.contains(IZ)?"Decade":"Month"},t.prototype.getDateVal=function(e,i){return!f(i)&&e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()},t.prototype.getCultureObjects=function(e,i){var n=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return re("Gregorian"===this.calendarMode?"main."+this.locale+n:"main."+this.locale+s,e)},t.prototype.getWeek=function(e){var i=new Date(this.checkValue(e)).valueOf(),n=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((i-n+N6)/N6/7)},t.prototype.setStartDate=function(e,i){var n=e.getTimezoneOffset(),s=new Date(e.getTime()+i),o=s.getTimezoneOffset()-n;e.setTime(s.getTime()+6e4*o)},t.prototype.addMonths=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+i,1)}},t.prototype.addYears=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+i,s.month,1)}},t.prototype.getIdValue=function(e,i){var o={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a=this.globalize.formatDate(new Date(parseInt(""+(e?e.currentTarget:i).getAttribute("id"),0)),o),l=this.globalize.parseDate(a,o),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},t.prototype.adjustLongHeaderSize=function(){W([this.element],MZ),"Wide"===this.dayHeaderFormat&&B(["calendar"===this.getModuleName()?this.element:this.calendarElement],MZ)},t.prototype.selectDate=function(e,i,n,s,o){var a=n||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,i.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,i);else{if(s&&!this.checkPresentDate(i,o)){var l=this.copyValues(o);!f(o)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:o[o.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=j(a,"."+NR);if(f(h)&&(h=this.tableBodyElement),!s&&!f(h.querySelector("."+Ll))&&W([h.querySelector("."+Ll)],Ll),!s&&!f(h.querySelector("."+Zl))&&W([h.querySelector("."+Zl)],Zl),s){l=this.copyValues(o);for(var u=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),p=0;p<u.length;p++){var m=h.querySelectorAll("td."+Zl)[0],y=h.querySelectorAll("td."+Ll)[0];u[p]===m&&W([u[p]],Zl),u[p]===y&&!this.checkPresentDate(new Date(parseInt(y.getAttribute("id").split("_")[0],10)),o)&&W([u[p]],Ll)}if(a.classList.contains(Ll)){W([a],Ll);for(var C=0;C<l.length;C++){var T={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(i,T)===this.globalize.formatDate(l[C],T)&&(p=l.indexOf(l[C]),l.splice(p,1),B([a],Zl))}this.setProperties({values:l},!0)}else B([a],Ll)}else B([a],Ll);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,i){var n=!1;if(!f(i))for(var s=0;s<i.length;s++){var o="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:o})===this.globalize.formatDate(i[s],{format:null,type:"date",skeleton:"short",calendar:o})&&(n=!0)}return n},t.prototype.setAriaActiveDescendant=function(){qe(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?(A.remove(this.previousIcon,"click",this.navigatePreviousHandler),B([this.previousIcon],""+ra),B([this.previousIcon],""+$y),this.previousIcon.setAttribute("aria-disabled","true")):(A.add(this.previousIcon,"click",this.navigatePreviousHandler),W([this.previousIcon],""+ra),W([this.previousIcon],""+$y),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){de(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){de(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?(A.remove(this.nextIcon,"click",this.navigateNextHandler),B([this.nextIcon],ra),B([this.nextIcon],$y),this.nextIcon.setAttribute("aria-disabled","true")):(A.add(this.nextIcon,"click",this.navigateNextHandler),W([this.nextIcon],ra),W([this.nextIcon],$y),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,i,n){var o,a,s=i.getFullYear();return o=s,a=0,n&&(o=(s-=s%n)-s%n+n-1),e.getFullYear()>o?a=1:e.getFullYear()<s&&(a=-1),a},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(e);return i.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,i){return this.compare(e,i,0)},t.prototype.compareDecade=function(e,i){return this.compare(e,i,10)},t.prototype.shiftArray=function(e,i){return e.slice(i).concat(e.slice(0,i))},t.prototype.addDay=function(e,i,n,s,o){var a=i,l=new Date(+e);if(!f(this.tableBodyElement)&&!f(n)){for(;this.findNextTD(new Date(+e),a,s,o);)a+=i;var h=new Date(l.setDate(l.getDate()+a));a=+h>+s||+h<+o?a===i?i-i:i:a}e.setDate(e.getDate()+a)},t.prototype.findNextTD=function(e,i,n,s){var o=new Date(e.setDate(e.getDate()+i)),a=[],l=!1;if(a=(!f(o)&&o.getMonth())===(!f(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(o):this.islamicModule.islamicRenderDays(this.currentDate,o)).filter(function(p){return p.classList.contains(ra)}):this.tableBodyElement.querySelectorAll("td."+ra),+o<=+n&&+o>=+s&&a.length)for(var u=0;u<a.length&&!(l=+o==+new Date(parseInt(a[u].id,0)));u++);return l},t.prototype.getMaxDays=function(e){var i,n=new Date(this.checkValue(e));i=28;for(var s=n.getMonth();n.getMonth()===s;)++i,n.setDate(i);return i-1},t.prototype.setDateDecade=function(e,i){e.setFullYear(i),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,i){e.setFullYear(i.getFullYear(),i.getMonth(),e.getDate()),i.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,i){return e.getFullYear()>i.getFullYear()?1:e.getFullYear()<i.getFullYear()?-1:e.getMonth()===i.getMonth()?0:e.getMonth()>i.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,i){return i&&(e=new Date(e.toLocaleString("en-US",{timeZone:i}))),e},wo([D(new Date(1900,0,1))],t.prototype,"min",void 0),wo([D(!0)],t.prototype,"enabled",void 0),wo([D(null)],t.prototype,"cssClass",void 0),wo([D(new Date(2099,11,31))],t.prototype,"max",void 0),wo([D(null)],t.prototype,"firstDayOfWeek",void 0),wo([D("Gregorian")],t.prototype,"calendarMode",void 0),wo([D("Month")],t.prototype,"start",void 0),wo([D("Month")],t.prototype,"depth",void 0),wo([D(!1)],t.prototype,"weekNumber",void 0),wo([D("FirstDay")],t.prototype,"weekRule",void 0),wo([D(!0)],t.prototype,"showTodayButton",void 0),wo([D("Short")],t.prototype,"dayHeaderFormat",void 0),wo([D(!1)],t.prototype,"enablePersistence",void 0),wo([D(null)],t.prototype,"keyConfigs",void 0),wo([D(null)],t.prototype,"serverTimezoneOffset",void 0),wo([K()],t.prototype,"created",void 0),wo([K()],t.prototype,"destroyed",void 0),wo([K()],t.prototype,"navigated",void 0),wo([K()],t.prototype,"renderDayCell",void 0),wo([an],t)}(ur),bfe=function(r){function t(e,i){return r.call(this,e,i)||this}return xZ(t,r),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&um("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!f(this.values)&&this.values.length>0){for(var e=[],i=[],n=0;n<this.values.length;n++)-1===e.indexOf(+this.values[n])&&(e.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if("string"==typeof this.values[s]&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var o=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,o)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),r.prototype.render.call(this),"calendar"===this.getModuleName()){var a=j(this.element,"form");a&&A.add(a,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?W([this.element],ra):B([this.element],ra)},t.prototype.setClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),!f(i)&&""!==i&&W([this.element],i.split(" ")),f(e)||B([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,e)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),r.prototype.validateDate.call(this,this.value),!f(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!f(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||f(this.value)?r.prototype.minMaxUpdate.call(this,this.value):!f(this.value)&&this.value<this.min&&this.min<=this.max?r.prototype.minMaxUpdate.call(this,this.min):!f(this.value)&&this.value>this.max&&this.min<=this.max&&r.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(e){var i=new Date;return f(this.timezone)||(i=r.prototype.getDate.call(this,i,this.timezone)),e&&f(this.timezone)?(i.setHours(e.getHours()),i.setMinutes(e.getMinutes()),i.setSeconds(e.getSeconds()),i.setMilliseconds(e.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(e){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var n=this.copyValues(this.values);r.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}r.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},t.prototype.keyActionHandle=function(e){r.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var e=this;this.changeHandler=function(i){e.triggerChange(i)},this.checkView(),r.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,r.prototype.createContent.call(this)},t.prototype.minMaxDate=function(e){return r.prototype.minMaxDate.call(this,e)},t.prototype.renderMonths=function(e,i,n){r.prototype.renderMonths.call(this,e,this.value,n)},t.prototype.renderDays=function(e,i,n,s,o,a){var l=r.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,o,a);return this.isMultiSelection&&r.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},t.prototype.renderYears=function(e){"Gregorian"===this.calendarMode?r.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},t.prototype.renderDecades=function(e){"Gregorian"===this.calendarMode?r.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},t.prototype.renderTemplate=function(e,i,n,s){"Gregorian"===this.calendarMode?r.prototype.renderTemplate.call(this,e,i,n,s,this.value):this.islamicModule.islamicRenderTemplate(e,i,n,s,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(e){var i=e.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(Np))if(this.isMultiSelection){var n=this.copyValues(this.values);-1===n.toString().indexOf(this.getIdValue(e,null).toString())?(n.push(this.getIdValue(e,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();r.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!f(this.tableBodyElement.querySelectorAll("."+Zl)[0])&&"Year"===s&&this.tableBodyElement.querySelectorAll("."+Zl)[0].classList.remove(Zl)},t.prototype.switchView=function(e,i,n,s){r.prototype.switchView.call(this,e,i,this.isMultiSelection,s)},t.prototype.getModuleName=function(){return r.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){return r.prototype.getPersistData.call(this),this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(e,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),l=0;l<a.length;l++){var h=a[l];this.checkDateValue(h)&&!r.prototype.checkPresentDate.call(this,h,a)&&a.push(h)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(e.cssClass,i.cssClass);break;default:r.prototype.onPropertyChanged.call(this,e,i,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(r.prototype.destroy.call(this),"calendar"===this.getModuleName()){var e=j(this.element,"form");e&&A.remove(e,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(e,i,n){this.minMaxUpdate(),r.prototype.navigateTo.call(this,e,i,n)},t.prototype.currentView=function(){return r.prototype.currentView.call(this)},t.prototype.addDate=function(e){if("string"!=typeof e&&"number"!=typeof e){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)this.checkDateValue(n[s])&&!r.prototype.checkPresentDate.call(this,n[s],i)&&(!f(i)&&i.length>0?i.push(n[s]):i=[new Date(+n[s])]);else this.checkDateValue(e)&&!r.prototype.checkPresentDate.call(this,e,i)&&(!f(i)&&i.length>0?i.push(e):i=[new Date(+e)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!f(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)for(var o=0;o<i.length;o++)+i[o]==+n[s]&&i.splice(o,1);else for(o=0;o<i.length;o++)+i[o]==+e&&i.splice(o,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(e){var i=new Date(+e);this.setProperties({value:i},!0),r.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),r.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(e,i,n){r.prototype.selectDate.call(this,e,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!f(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!f(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!f(e),f(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(f(this.value)||f(this.previousDate)||+new Date(this.value.toDateString())==+new Date(this.previousDate.toDateString()))&&(null!=this.previousDate||isNaN(+this.value))?!f(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},wo([D(null)],t.prototype,"value",void 0),wo([D(null)],t.prototype,"values",void 0),wo([D(!1)],t.prototype,"isMultiSelection",void 0),wo([K()],t.prototype,"change",void 0),wo([an],t)}(OZ),kfe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_s=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},oB="e-datepicker",BZ="e-popup-wrapper",B6="e-input-focus",VZ="e-error",aB="e-active",HZ="e-date-overflow",lB="e-selected",V6="e-non-edit",zZ=["title","class","style"],hB=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousElementValue="",n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.datepickerOptions=e,n}return kfe(t,r),t.prototype.render=function(){this.initialize(),this.bindEvents(),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,i)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):qe(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&W([this.inputWrapper.container],[V6]):""===this.inputElement.value?W([this.inputWrapper.container],[V6]):B([this.inputWrapper.container],[V6])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=f(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var i={placeholder:this.placeholder};this.globalize=new Rr(this.locale),this.l10n=new $r("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var n=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(n=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ke.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:n,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),qe(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),ke.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),B([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(e){if(void 0===e&&(e=!1),this.value&&!this.isCalendar()&&!e&&this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(r.prototype.validateDate.call(this),this.minMaxUpdates(),r.prototype.minMaxUpdate.call(this)),!f(this.value)){var n=this.value,s=void 0,o=f(this.formatString)?this.dateTimeFormat:this.formatString;s="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:o,type:"dateTime",skeleton:"yMd"}:{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),(+n<=+this.max&&+n>=+this.min||!this.strictMode&&(+n>=+this.max||!+this.value||!+this.value||+n<=+this.min))&&this.updateInputValue(s)}f(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&f(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!f(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var i=null,n=null,s=null;if("datetimepicker"===this.getModuleName()){var o=new Rr(this.locale);"Gregorian"===this.calendarMode?(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return f(i=this.checkDateValue(this.globalize.parseDate(e,n)))&&"datetimepicker"===this.getModuleName()&&(i=this.checkDateValue(this.globalize.parseDate(e,s))),i},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||f(e))){var i=null,n=e;if("number"==typeof e&&(n=e.toString()),"datetimepicker"===this.getModuleName()){var a=new Rr(this.locale);a.getDatePattern({skeleton:"yMd"})}var l=!1;if("string"!=typeof n)n=null,l=!0;else if("string"==typeof n&&(n=n.trim()),!(i=this.checkStringValue(n))){var u=null;u=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(n)&&!u.test(n)||/^[a-zA-Z0-9- ]*$/.test(n)||isNaN(+new Date(this.checkValue(n)))?l=!0:i=new Date(n)}l?(this.strictMode||(this.invalidValueString=n),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},t.prototype.bindInputEvent=function(){(!f(this.formatString)||this.enableMask)&&(this.enableMask||-1===this.formatString.indexOf("y")?A.add(this.inputElement,"input",this.inputHandler,this):A.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){A.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),A.add(this.inputElement,"mouseup",this.mouseUpHandler,this),A.add(this.inputElement,"focus",this.inputFocusHandler,this),A.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&A.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),A.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&A.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&A.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new Hn(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}))}},t.prototype.unBindEvents=function(){A.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),A.remove(this.inputElement,"mouseup",this.mouseUpHandler),A.remove(this.inputElement,"focus",this.inputFocusHandler),A.remove(this.inputElement,"blur",this.inputBlurHandler),A.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&A.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&A.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&A.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=f(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){!this.enabled||e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&A.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){!this.enabled||(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),j(this.element,"form")){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){ke.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){!this.enabled||(this.isIconClicked=!0,X.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),B([this.inputWrapper.container],[B6]),B(this.inputWrapper.buttons,aB))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(!f(this.htmlAttributes[n])&&zZ.indexOf(n)>-1)if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&B([this.inputWrapper.container],s.split(" "))}else if("style"===n){var o=this.inputWrapper.container.getAttribute(n);f(o)?o=this.htmlAttributes[n]:";"===o.charAt(o.length-1)?o+=this.htmlAttributes[n]:o=o+";"+this.htmlAttributes[n],this.inputWrapper.container.setAttribute(n,o)}else this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHtmlAttributeToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];zZ.indexOf(n)<0&&this.inputElement.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupWrapper&&ke.setCssClass(e,[this.popupWrapper],i)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){if(this.isFocused=!0,this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.inputBlurHandler=function(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&f(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value==this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new Hn(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)},t.prototype.documentHandler=function(e){!f(this.popupObj)&&(this.inputWrapper.container.contains(e.target)&&"mousedown"!==e.type||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var i=e.target;j(i,".e-datepicker.e-popup-wrapper")||j(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?j(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!f(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&j(i,".e-content")&&j(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||j(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+r.prototype.generateTodayVal.call(this,this.value))&&this.hide(e):(this.hide(e),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var i=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":var n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var o=this.inputElement.value.length;(0==n&&s==o||s!==o&&"tab"==e.action||0!==n&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=n,this.inputElement.selectionEnd=s),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&i===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(e){this.previousDate=!f(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(r.prototype.keyActionHandle.call(this,e),this.isCalendar()&&qe(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((f(this.value)&&!f(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+lB).length>0&&W(this.popupObj.element.querySelectorAll("."+lB),[lB]),!f(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));r.prototype.navigateTo.call(this,"Month",e)}},t.prototype.strictModeUpdate=function(){var e,s,o;e="datetimepicker"===this.getModuleName()?f(this.formatString)?this.dateTimeFormat:this.formatString:f(this.formatString)?this.formatString:this.formatString.replace("dd","d"),f(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),s="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?o=this.checkDateValue(this.globalize.parseDate(this.inputElement.value,s))?this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),s):this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(o=!f(o=this.globalize.parseDate(this.inputElement.value,s))&&isNaN(+o)?null:o,!f(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&o.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&o&&o.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&o?(this.updateInputValue(this.globalize.formatDate(o,s)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0),this.strictMode&&!o&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),f(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:oB+" "+BZ}),f(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),X.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=oB+" e-date-modal",document.body.className+=" "+HZ,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new Al(this.popupWrapper,{content:this.calendarElement,relateTo:X.isDevice?document.body:this.inputWrapper.container,position:X.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:X.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=de(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new Hn(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new Hn(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),we(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){X.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,i=this.createElement("div",{className:"e-model-header"}),n=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),o=this.createElement("span",{className:"e-model-day"}),a=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},o.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e),i.appendChild(n),s.appendChild(o),s.appendChild(a),i.appendChild(s),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!f(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var i,n;n="datetimepicker"===this.getModuleName()&&f(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&(i="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:n,type:"dateTime",skeleton:"yMd"}:{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),f(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+BZ))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?ut(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:ut(this.width):"100%"},t.prototype.show=function(e,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,o=void 0;f(this.value)||+this.value>=+this.min&&+this.value<=+this.max?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(r.prototype.render.call(this),this.setProperties({value:o||null},!0),this.previousDate=o,this.createCalendar()),X.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:X.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,function(l){(n.preventArgs=l,s&&!n.preventArgs.cancel)?(B(n.inputWrapper.buttons,aB),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement),n.popupObj.show(new hs({name:"FadeIn",duration:X.isDevice?0:300}),1e3===n.zIndex?n.element:null),r.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,X.isDevice),n.setAriaAttributes()):(n.popupObj.destroy(),n.popupWrapper=n.popupObj=null);!f(n.inputElement)&&""===n.inputElement.value&&!f(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(B([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),W(n.tableBodyElement.querySelectorAll("td.e-selected"),lB)),A.add(document,"mousedown touchstart",n.documentHandler,n)})}},t.prototype.hide=function(e){var i=this;if(f(this.popupWrapper))X.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var n=!0;this.preventArgs={preventDefault:function(){n=!1},popup:this.popupObj,event:e||null,cancel:!1},W(this.inputWrapper.buttons,aB),W([document.body],HZ);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(o){i.closeEventCallback(n,o)}):this.closeEventCallback(n,s)}},t.prototype.closeEventCallback=function(e,i){this.preventArgs=i,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),W(this.inputWrapper.buttons,aB)),this.setAriaAttributes(),X.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),X.isDevice&&(f(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),A.remove(document,"mousedown touchstart",this.documentHandler),X.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),B([this.inputWrapper.container],[B6]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(W([this.inputWrapper.container],[B6]),this.inputElement.blur())},t.prototype.currentView=function(){var e;return this.calendarElement&&(e=r.prototype.currentView.call(this)),e},t.prototype.navigateTo=function(e,i){this.calendarElement&&r.prototype.navigateTo.call(this,e,i)},t.prototype.destroy=function(){this.unBindEvents(),r.prototype.destroy.call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&r.prototype.destroy.call(this),this.inputElement&&(ke.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),f(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),A.remove(this.inputElement,"blur",this.inputBlurHandler),A.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&we(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),W([this.inputElement],["e-input"])),W([this.element],[oB]),we(this.inputWrapper.container)),this.formElement&&A.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.ensureInputAttribute=function(){for(var e=[],i=0;i<this.inputElement.attributes.length;i++)e[i]=this.inputElement.attributes[i].name;for(i=0;i<e.length;i++)f(this.inputElementCopy.getAttribute(e[i]))?("value"===e[i].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[i])):("value"===e[i].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[i])),this.inputElement.setAttribute(e[i],this.inputElementCopy.getAttribute(e[i])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),W([this.inputElementCopy],[oB,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=j(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=Sn("ej2-datetimepicker"),null!==this.ngTag&&qe(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=Sn("ej2-datepicker"),null!==this.ngTag&&qe(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),r.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(!f(e.getAttribute(s[o]))){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.checkFormat=function(){var e=new Rr(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||f(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{var i=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:i,type:"dateTime"}):e.getDatePattern({skeleton:i,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new Rr(this.locale),this.checkFormat(),this.checkView();var n,i=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];n="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){var l=!("disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a));this.setProperties({enabled:l},!e)}break;case"readonly":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){var h="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:h},!e)}break;case"placeholder":(f(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){var u=this.inputElement.getAttribute(a);this.setProperties(ui(a,this.globalize.parseDate(u,n),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var p=this.inputElement.getAttribute(a);this.setProperties(ui(a,this.globalize.parseDate(p),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var m=this.inputElement.getAttribute(a);this.setProperties(ui(a,this.globalize.parseDate(m),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(){var n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),s=this.previousDate;this.minMaxUpdates(),r.prototype.render.call(this),this.previousDate=s;var l,a='*[id^="/id"]'.replace("/id",""+(n&&+n));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+n)&&this.setProperties({value:n},!0),f(this.calendarElement.querySelectorAll(a)[0])||this.calendarElement.querySelectorAll(a)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),l="datetimepicker"===this.getModuleName()?this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.popupObj||(this.updateInputValue(l),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(ke.addAttributes({"aria-expanded":"true"},this.inputElement),qe(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&qe(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(ke.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!f(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&f(this.value)||i?(B([this.inputWrapper.container],VZ),qe(this.inputElement,{"aria-invalid":"true"})):(W([this.inputWrapper.container],VZ),qe(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,f(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":ke.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new Rr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&r.prototype.onPropertyChanged.call(this,e,i);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"showClearButton":ke.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},_s([D(null)],t.prototype,"width",void 0),_s([D(null)],t.prototype,"value",void 0),_s([D(null)],t.prototype,"cssClass",void 0),_s([D(!1)],t.prototype,"strictMode",void 0),_s([D(null)],t.prototype,"format",void 0),_s([D(!0)],t.prototype,"enabled",void 0),_s([D({})],t.prototype,"htmlAttributes",void 0),_s([D(null)],t.prototype,"values",void 0),_s([D(!1)],t.prototype,"isMultiSelection",void 0),_s([D(!0)],t.prototype,"showClearButton",void 0),_s([D(!0)],t.prototype,"allowEdit",void 0),_s([D(null)],t.prototype,"keyConfigs",void 0),_s([D(!1)],t.prototype,"enablePersistence",void 0),_s([D(1e3)],t.prototype,"zIndex",void 0),_s([D(!1)],t.prototype,"readonly",void 0),_s([D(null)],t.prototype,"placeholder",void 0),_s([D("Never")],t.prototype,"floatLabelType",void 0),_s([D(null)],t.prototype,"serverTimezoneOffset",void 0),_s([D(!1)],t.prototype,"openOnFocus",void 0),_s([D(!1)],t.prototype,"enableMask",void 0),_s([D({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),_s([K()],t.prototype,"open",void 0),_s([K()],t.prototype,"cleared",void 0),_s([K()],t.prototype,"close",void 0),_s([K()],t.prototype,"blur",void 0),_s([K()],t.prototype,"focus",void 0),_s([K()],t.prototype,"created",void 0),_s([K()],t.prototype,"destroyed",void 0),_s([an],t)}(bfe);(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),function(r){r.createListItems=function t(e,i,n,s,o,a){var l,h=6e4*a,u=[],p=[];l=+i.setMilliseconds(0);for(var m=+n.setMilliseconds(0);m>=l;)p.push(l),u.push(s.formatDate(new Date(l),{format:o,type:"time"})),l+=h;return{collection:p,list:hn.createList(e,u,null,!0)}}}($6||($6={}));var ZR,yge=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Br=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Sge=(new Date).getDate(),Ege=(new Date).getMonth(),xge=(new Date).getFullYear(),Tge=(new Date).getHours(),Dge=(new Date).getMinutes(),Ige=(new Date).getSeconds(),Age=(new Date).getMilliseconds(),qR="e-datetimepicker",hQ="e-datetimepopup-wrapper",uQ="e-popup",UR="e-input-focus",dQ="e-icon-anim",Y6="e-disabled",pQ="e-error",Zy="e-active",Z6="e-hover",Qy="e-list-item",mQ="e-time-overflow",Q6=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=e,n}return yge(t,r),t.prototype.focusHandler=function(){!this.enabled||B([this.inputWrapper.container],UR)},t.prototype.focusIn=function(){r.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),W([this.inputWrapper.container],[UR]))},t.prototype.blurHandler=function(e){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();W([this.inputWrapper.container],UR);var i={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",i)}},t.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains(uQ)&&(this.popupObject.destroy(),we(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],f(this.rippleFn)||this.rippleFn()),this.inputElement&&ke.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&we(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),r.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!f(j(this.element,"fieldset"))&&j(this.element,"fieldset").disabled&&(this.enabled=!1),r.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1),this.l10n=new $r("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),r.prototype.render.call(this),this.createInputElement(),r.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},t.prototype.setValue=function(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var e=this.validateMinMaxRange(this.initValue);ke.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else f(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,r.prototype.updateInput.call(this)},t.prototype.validateMinMaxRange=function(e){var i=e;return this.isDateObject(e)?i=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?W([this.inputWrapper.container],pQ):B([this.inputWrapper.container],pQ),qe(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.validateValue=function(e){var i=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+e<+this.min?i=this.min:+e>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=e),i},t.prototype.disablePopupButton=function(e){e?(B([this.inputWrapper.buttons[0],this.timeIcon],Y6),this.hide()):W([this.inputWrapper.buttons[0],this.timeIcon],Y6)},t.prototype.getFormattedValue=function(e){var i;return f(e)?null:(i="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,i))},t.prototype.isDateObject=function(e){return!f(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){W([this.inputElement],"e-datepicker"),W([this.inputWrapper.container],"e-date-wrapper"),B([this.inputWrapper.container],"e-datetime-wrapper"),B([this.inputElement],qR),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=ke.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},t.prototype.bindInputEvents=function(){A.add(this.timeIcon,"mousedown",this.timeHandler,this),A.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),A.add(this.inputElement,"blur",this.blurHandler,this),A.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=de(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new Hn(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){A.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),A.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(A.remove(this.inputElement,"blur",this.blurHandler),A.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?re("timeFormats.short",vp()):this.getCultureTimeObject(Qo,""+this.locale):this.timeFormat},t.prototype.cldrDateTimeFormat=function(){var n=new Rr(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?n+" "+this.getCldrFormat("time"):this.formatString},t.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?re("timeFormats.short",vp()):this.getCultureTimeObject(Qo,""+this.locale)},t.prototype.isNullOrEmpty=function(e){return!!(f(e)||"string"==typeof e&&""===e.trim())},t.prototype.getCultureTimeObject=function(e,i){return re("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(e){!this.enabled||(this.isIconClicked=!0,X.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&r.prototype.hide.call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),B([this.inputWrapper.container],[UR]))),this.isIconClicked=!1)},t.prototype.dateHandler=function(e){!this.enabled||(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),f(this.popupWrapper)||this.popupCreation("date",e)))},t.prototype.show=function(e,i){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),r.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},t.prototype.toggle=function(e){this.isDatePopupOpen()?(r.prototype.hide.call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),r.prototype.show.call(this,null,e),this.popupCreation("date",null)):this.show(null,e)},t.prototype.listCreation=function(){var e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=f(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=si("div",{className:"e-content",attrs:{tabindex:"0"}});var n=this.startTime(i),s=this.endTime(i),o=$6.createListItems(this.createElement,n,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=o.collection,this.listTag=o.list,qe(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),xt([o.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=Lr(this.listWrapper,{duration:300,selector:"."+Qy}),this.liCollections=this.listWrapper.querySelectorAll("."+Qy)},t.prototype.popupCreation=function(e,i){X.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(B([this.popupWrapper],hQ),qe(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=si("div",{className:qR+" "+uQ,attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),f(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!f(this.step)&&this.step>0&&(this.listCreation(),xt([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),this.popupObject.refreshPosition(this.inputElement))},t.prototype.openPopup=function(e){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,function(s){if(i.preventArgs=s,!i.preventArgs.cancel&&!i.readonly){i.popupObject.show(new hs({name:"FadeIn",duration:100}),1e3===i.zIndex?i.element:null),B([i.inputWrapper.container],[dQ]),qe(i.inputElement,{"aria-expanded":"true"}),qe(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),A.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},t.prototype.documentClickHandler=function(e){var i=e.target;!f(this.popupObject)&&(this.inputWrapper.container.contains(i)&&"mousedown"!==e.type||this.popupObject.element&&this.popupObject.element.contains(i))&&"touchstart"!==e.type&&e.preventDefault(),j(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||i===this.inputElement||i===this.timeIcon||i===this.inputWrapper.container?i!==this.inputElement&&(X.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(X.isIE||"edge"===X.info.name)&&i===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())},t.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+qR))},t.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+hQ))},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),X.isDevice&&(this.timeModal=si("div"),this.timeModal.className=qR+" e-time-modal",document.body.className+=" "+mQ,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new Al(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:X.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:X.isDevice?document.body:this.inputWrapper.container,position:X.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",B([e.timeIcon],Zy),X.isDevice||(e.timekeyConfigure=de(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new Hn(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){W([e.timeIcon],Zy),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),$e(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){X.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight="250px"},t.prototype.setDimension=function(e){return"number"==typeof e?e=ut(e):"string"==typeof e||(e="100%"),e},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e},t.prototype.wireTimeListEvents=function(){A.add(this.listWrapper,"click",this.onMouseClick,this),X.isDevice||(A.add(this.listWrapper,"mouseover",this.onMouseOver,this),A.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(A.remove(this.listWrapper,"click",this.onMouseClick),A.remove(document,"mousedown touchstart",this.documentClickHandler),X.isDevice||(A.add(this.listWrapper,"mouseover",this.onMouseOver,this),A.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var i=j(e.target,"."+Qy);this.setTimeHover(i,Z6)},t.prototype.onMouseLeave=function(){this.removeTimeHover(Z6)},t.prototype.setTimeHover=function(e,i){this.enabled&&this.isValidLI(e)&&!e.classList.contains(i)&&(this.removeTimeHover(i),B([e],i))},t.prototype.getPopupHeight=function(){var e=parseInt("250px",10),i=this.dateTimeWrapper.getBoundingClientRect().height;return i>e?e:i},t.prototype.changeEvent=function(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(r.prototype.changeEvent.call(this,e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!f(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},t.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;f(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var i=this.getPopupHeight(),n=e.nextElementSibling,s=n?n.offsetTop:e.offsetTop,o=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=s+e.offsetTop>i?n?s-(i/2+o/2):s:0},t.prototype.setScrollTo=function(){var e,i=this.dateTimeWrapper.querySelectorAll("."+Qy);if(i.length>=0){this.scrollInvoked=!0;var n=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=i[Math.round((s-n)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;f(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));ke.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},t.prototype.getFullDateTime=function(){var e;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var i=this.previousDate.getDate(),n=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return new Date(s,n,i,o,a,l)}return this.previousDate},t.prototype.onMouseClick=function(e){var n=this.selectedElement=j(e.target,"."+Qy);n&&n.classList.contains(Qy)&&(this.timeValue=n.getAttribute("data-value"),this.hide(e)),this.setSelection(n,e)},t.prototype.setSelection=function(e,i){if(this.isValidLI(e)&&!e.classList.contains(Zy)){this.selectedElement=e;var n=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=n,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),B([this.selectedElement],Zy),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},t.prototype.setTimeActiveClass=function(){var e=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!f(e)){var i=e.querySelectorAll("."+Qy);if(i.length)for(var n=0;n<i.length;n++)if(this.timeCollections[n]===+this.valueWithMinutes){i[n].setAttribute("aria-selected","true"),this.selectedElement=i[n],this.activeIndex=n,this.setTimeActiveDescendant();break}}},t.prototype.setTimeActiveDescendant=function(){!f(this.selectedElement)&&this.value?qe(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),f(this.selectedElement)||(B([this.selectedElement],Zy),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover(Z6),!f(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+Zy);e.length&&(W(e,Zy),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var i=this.getTimeHoverItem(e);i&&i.length&&W(i,e)},t.prototype.getTimeHoverItem=function(e){var n,i=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return f(i)||(n=i.querySelectorAll("."+e)),n},t.prototype.isValidLI=function(e){return e&&e.classList.contains(Qy)&&!e.classList.contains(Y6)},t.prototype.calculateStartEnd=function(e,i,n){var s=e.getDate(),o=e.getMonth(),a=e.getFullYear(),l=e.getHours(),h=e.getMinutes(),u=e.getSeconds(),p=e.getMilliseconds();return i?"starttime"===n?new Date(a,o,s,0,0,0):new Date(a,o,s,23,59,59):new Date(a,o,s,l,h,u,p)},t.prototype.startTime=function(e){var i,n,s=this.min,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getFullYear(),o.getMonth(),o.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.min):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o>=+this.max&&(n=!0,i=this.max),this.calculateStartEnd(i,n,"starttime")},t.prototype.endTime=function(e){var i,n,s=this.max,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getUTCFullYear(),o.getMonth(),o.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.max):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o<=+this.min&&(n=!0,i=this.min),this.calculateStartEnd(i,n,"endtime")},t.prototype.hide=function(e){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var n=this.preventArgs;f(this.popupObj)?this.trigger("close",n,function(s){i.dateTimeCloseEventCallback(e,s)}):this.dateTimeCloseEventCallback(e,n)}else X.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(e,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?r.prototype.hide.call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),W([document.body],mQ),X.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),X.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new hs({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(dQ),qe(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),A.remove(document,"mousedown touchstart",this.documentClickHandler))},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.preRender.call(this),W([this.inputElementCopy],[qR])},t.prototype.getProperty=function(e,i){this.setProperties("min"===i?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var n,s=0,o=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"readonly":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var l="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"min":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({min:n},!e));break;case"disabled":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var h=!("disabled"===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a));this.setProperties({enabled:h},!e)}break;case"value":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({value:n},!e));break;case"max":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({max:n},!e))}}},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},t.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},t.prototype.getTimeActiveElement=function(){return f(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+Zy)},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var i=this.createDateObj(e),n=this.valueWithMinutes,s=!f(n);if(this.checkDateValue(i)){var o=s?n.getDate():Sge,a=s?n.getMonth():Ege,l=s?n.getFullYear():xge,h=s?n.getHours():Tge,u=s?n.getMinutes():Dge,p=s?n.getSeconds():Ige,m=s?n.getMilliseconds():Age;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,a,o,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,a,o,h,u,p,m)}}return null},t.prototype.findNextTimeElement=function(e){var i=this.inputElement.value,n=f(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),s=null,o=this.liCollections.length;if(!f(this.activeIndex)||!f(this.checkDateValue(n))){if("home"===e.action)s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var a=0;a<o;a++)if(+n<this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(a=o-1;a>=0;a--)if(+n>this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(f(s)?null:new Date(s))}},t.prototype.setTimeValue=function(e,i){var n,s,o=this.validateMinMaxRange(i),a=this.createDateObj(o);return this.getFormattedValue(a)!==(f(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=f(a)?null:a,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),n=this.globalize.formatDate(s,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&f(s),ke.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),s},t.prototype.timeElementValue=function(e){if(!f(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var i=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(i,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(f(this.step)||this.step<=0)){var i=this.timeCollections.length;if(f(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(f(this.value)&&f(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var n=void 0;if(e.keyCode>=37&&e.keyCode<=40){var s=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===i?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?i-1:this.activeIndex,n=f(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else"home"===e.action?(this.activeIndex=0,n=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=i-1,n=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(n))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&null!==this.selectedElement&&(!e||"click"!==e.type)&&this.setTimeScrollPosition()}},t.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),B([this.inputWrapper.container],UR),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},t.prototype.inputKeyAction=function(e){"altDownArrow"===e.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(e))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),ke.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,o),this.updateInput();break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":f(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),f(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),ke.setCssClass(e.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&ke.setCssClass(e.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new Rr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":ke.setPlaceholder(e.placeholder,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=f(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Br([D(null)],t.prototype,"timeFormat",void 0),Br([D(30)],t.prototype,"step",void 0),Br([D(null)],t.prototype,"scrollTo",void 0),Br([D(1e3)],t.prototype,"zIndex",void 0),Br([D(null)],t.prototype,"value",void 0),Br([D(null)],t.prototype,"keyConfigs",void 0),Br([D({})],t.prototype,"htmlAttributes",void 0),Br([D(!1)],t.prototype,"enablePersistence",void 0),Br([D(!0)],t.prototype,"allowEdit",void 0),Br([D(!1)],t.prototype,"isMultiSelection",void 0),Br([D(null)],t.prototype,"values",void 0),Br([D(!0)],t.prototype,"showClearButton",void 0),Br([D(null)],t.prototype,"placeholder",void 0),Br([D(!1)],t.prototype,"strictMode",void 0),Br([D(null)],t.prototype,"serverTimezoneOffset",void 0),Br([D(new Date(1900,0,1))],t.prototype,"min",void 0),Br([D(new Date(2099,11,31))],t.prototype,"max",void 0),Br([D(null)],t.prototype,"firstDayOfWeek",void 0),Br([D("Gregorian")],t.prototype,"calendarMode",void 0),Br([D("Month")],t.prototype,"start",void 0),Br([D("Month")],t.prototype,"depth",void 0),Br([D(!1)],t.prototype,"weekNumber",void 0),Br([D(!0)],t.prototype,"showTodayButton",void 0),Br([D("Short")],t.prototype,"dayHeaderFormat",void 0),Br([D(!1)],t.prototype,"openOnFocus",void 0),Br([D(!1)],t.prototype,"enableMask",void 0),Br([D({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Br([K()],t.prototype,"open",void 0),Br([K()],t.prototype,"close",void 0),Br([K()],t.prototype,"cleared",void 0),Br([K()],t.prototype,"blur",void 0),Br([K()],t.prototype,"focus",void 0),Br([K()],t.prototype,"created",void 0),Br([K()],t.prototype,"destroyed",void 0),Br([an],t)}(hB);new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(r){var i;(i=r.ForceEncoding||(r.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode"}(ZR||(ZR={}));var mw=function(){function r(t){this.intl=new Rr,f(t)||(this.intl.culture=t)}return r.prototype.getFormatFunction=function(t){return t.type?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},r.prototype.getParserFunction=function(t){return t.type?this.intl.getDateParser(t):this.intl.getNumberParser(t)},r.prototype.fromView=function(t,e,i){return"date"!==i&&"datetime"!==i&&"number"!==i||f(e)?t:e(t)},r.prototype.toView=function(t,e){var i=t;return!f(e)&&!f(t)&&(i=e(t)),i},r.prototype.setCulture=function(t){f(t)||function Fj(r){dm.notify("notifyExternalChange",{locale:u0=r})}(t)},r}(),Ch=function(){function r(t,e){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},Qs(this,t),this.parent=e,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),f(this.uid)&&(this.uid=Od("grid-column"));var n=new mw;if(t.format&&(t.format.skeleton||t.format.format&&"string"==typeof t.format.format)&&(this.setFormatter(n.getFormatFunction(de({},t.format))),this.setParser(n.getParserFunction(t.format))),this.toJSON=function(){for(var o={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if("columns"===l[h]){o[l[h]]=[];for(var u=0;u<i[l[h]].length;u++)o[l[h]].push(i[l[h]][u].toJSON())}else a.indexOf(l[h])<0&&(o[l[h]]=i[l[h]]);return o},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(o){return o.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=bl(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=bl(this.headerTemplate)),!f(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=bl(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=bl(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=bl(this.filterTemplate)),this.isForeignColumn()&&(f(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=de({dataSource:this.dataSource,query:new ni,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var s=this.sortComparer;this.sortComparer=function(o,a,l,h){if("string"==typeof s&&(s=fs(s,window)),"Descending"===i.sortDirection){var u=o;o=a,a=u;var p=l;l=h,h=p}return s(o,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(o,a){return o=fs(i.foreignKeyValue,db(i,{},o)[0]),a=fs(i.foreignKeyValue,db(i,{},a)[0]),"Descending"===i.sortDirection?Ye.fnDescending(o,a):Ye.fnAscending(o,a)})}return r.prototype.getSortDirection=function(){return this.sortDirection},r.prototype.setSortDirection=function(t){this.sortDirection=t},r.prototype.getFreezeTableName=function(){return this.freezeTable},r.prototype.setProperties=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)this[e[i]]=t[e[i]],this.parent&&this.parent.isReact&&("template"===e[i]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===e[i]?(this.headerTemplateFn=bl(t[e[i]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)):"editTemplate"===e[i]&&(this.editTemplateFn=bl(t[e[i]])))},r.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},r.prototype.getFormatter=function(){return this.formatFn},r.prototype.setFormatter=function(t){this.formatFn=t},r.prototype.getParser=function(){return this.parserFn},r.prototype.setParser=function(t){this.parserFn=t},r.prototype.getColumnTemplate=function(){return this.templateFn},r.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},r.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},r.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},r}(),CX="rowDataBound",dq="queryCellInfo",wX="headerCellInfo",or="actionBegin",Vi="actionComplete",ST="actionFailure",Jl="dataBound",pq="rowSelecting",ET="rowSelected",SX="rowDeselecting",kB="rowDeselected",c_="cellSelecting",RB="cellSelected",EX="cellDeselecting",xX="cellDeselected",fq="columnSelecting",gq="columnSelected",xT="columnDragStart",vw="columnDrag",TT="columnDrop",TX="beforePrint",DX="printComplete",yw="batchAdd",Zf="batchCancel",_B="batchDelete",MB="beforeDataBound",IX="beforeOpenAdaptiveDialog",kX="filterchoicerequest",jp="initial-load",Ba="initial-end",Ac="data-ready",qr="content-ready",Ar="ui-update",Rd="on-empty",Va="inbound-model-changed",zo="model-changed",OB="colgroup-refresh",So="header-refreshed",vq="sorting-complete",PX="searching-complete",yq="grouping-complete",NX="ungrouping-complete",ob="group-aggregates",Wm="refresh-footer-rendered",DT="beforecellfocused",PB="cellfocused",Cs="key-pressed",nl="click",un="destroy",kc="column-visible-changed",d_="column-width-changed",IT="column-position-changed",Cq="rows-added",LB="rows-removed",AT="header-drop",p_="datasource-modified",f_="dblclick",Gm="toolbar-refresh",HX="bulk-save",bw="auto-col",Cw="tooltip-destroy",g_="update-data",eu="prevent-batch",NB="dialog-destroy",jX="crud-Action",qX="add-delete-Action",Eq="destroy-form",xq="double-tap",tu="freezerender",Dq="initForeignKeyColumn",BB="getForeignKeyData",kT="generateQuery",GX="showEmptyGrid",KX="foreignKeyData",v_="dataStateChange",$X="dataSourceChanged",YX="beforeFragAppend",y_="frozenHeight",Aq="textWrapRefresh",kq="recordAdded",VB="cancel-Begin",HB="editNextValCell",Rq="hierarchyprint",b_="partial-refresh",Mq="columns-prepared",RT="cbox-filter-complete",C_="filter-Prevent",ww="restore-Focus",eJ="detail-indentcell-info",w_="virtual-scroll-edit-success",Km="get-virtual-data",WB="infinite-scroll-handler",GB="infinite-edit-handler",qq="group-collapse",S_="refreshResizeHandlers",Wq="before-refresh-on-data-change",KB="filter-dialog-close",$q="refresh-cutsom-filter-ok-button",E_="set-fullscreen-dialog",Sw="refresh-Expand-and-Collapse",Zq="row-mode-change",$B="enter-key-handler",fJ="close-edit",ZB="create-virtual-validation-form",iU="refresh-infinite-persist-selection",Bt=(()=>(function(r){r[r.Data=0]="Data",r[r.Header=1]="Header",r[r.Summary=2]="Summary",r[r.GroupSummary=3]="GroupSummary",r[r.CaptionSummary=4]="CaptionSummary",r[r.Filter=5]="Filter",r[r.Indent=6]="Indent",r[r.GroupCaption=7]="GroupCaption",r[r.GroupCaptionEmpty=8]="GroupCaptionEmpty",r[r.Expand=9]="Expand",r[r.HeaderIndent=10]="HeaderIndent",r[r.StackedHeader=11]="StackedHeader",r[r.DetailHeader=12]="DetailHeader",r[r.DetailExpand=13]="DetailExpand",r[r.CommandColumn=14]="CommandColumn",r[r.DetailFooterIntent=15]="DetailFooterIntent",r[r.RowDragIcon=16]="RowDragIcon",r[r.RowDragHIcon=17]="RowDragHIcon"}(Bt||(Bt={})),Bt))(),js=(()=>(function(r){r[r.Header=0]="Header",r[r.Content=1]="Content",r[r.Summary=2]="Summary"}(js||(js={})),js))(),Jn=(()=>(function(r){r[r.isEdit=0]="isEdit",r[r.isAdd=1]="isAdd",r[r.isSort=2]="isSort",r[r.isFilter=3]="isFilter"}(Jn||(Jn={})),Jn))(),ab=(()=>(function(r){r[r.isInitial=0]="isInitial",r[r.isSearch=1]="isSearch"}(ab||(ab={})),ab))(),XB=function(){function r(t,e){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=t,this.serviceLocator=e,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(Cq,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(LB,this.removeRows,this),this.parent.on(p_,this.initDataManager,this),this.parent.on(un,this.destroy,this),this.parent.on(g_,this.crudActions,this),this.parent.on(qX,this.getData,this),this.parent.on(bw,this.refreshFilteredCols,this),this.parent.on(Mq,this.refreshFilteredCols,this))}return r.prototype.reorderRows=function(t){this.dataManager.dataSource.json.splice(t.toIndex,0,this.dataManager.dataSource.json.splice(t.fromIndex,1)[0])},r.prototype.getModuleName=function(){return"data"},r.prototype.initDataManager=function(){var t=this.parent;this.dataManager=t.dataSource instanceof Xe?t.dataSource:f(t.dataSource)?new Xe:new Xe(t.dataSource),!t.isAngular||t.query instanceof ni?(this.isQueryInvokedFromData=!0,t.query=t.query instanceof ni?t.query:new ni):t.setProperties({query:new ni},!0)},r.prototype.generateQuery=function(t){var i=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(function(a){return!(!0!==a.isPrimaryKey&&!1===a.visible||void 0===a.field)}).map(function(a){return a.field}));else if("Schema"===this.parent.columnQueryMode){for(var n=[],s=this.parent.columns,o=0;o<s.length;o++)n.push(s[o].field);i.select(n)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),ws(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,t),this.groupQuery(i),i},r.prototype.aggregateQuery=function(t){for(var e=this.parent.aggregates,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.columns.length;s++)for(var o=n.columns[s],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)t.aggregate(a[l].toLowerCase(),o.field);return t},r.prototype.virtualGroupPageQuery=function(t){if(t.queries.length)for(var i=0;i<t.queries.length;i++)"onPage"===t.queries[i].fn&&t.queries.splice(i,1);return t},r.prototype.pageQuery=function(t,e){var i=this.parent,s={query:t,skipPage:!1};if(i.notify("set-virtual-page-query",s),s.skipPage)return t;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==e){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),t.queries.length)for(var o=0;o<t.queries.length;o++)"onPage"===t.queries[o].fn&&t.queries.splice(o,1);!f(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",t):t.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:i.pageSettings.pageSize)}return t},r.prototype.groupQuery=function(t){var e=this.parent;if(e.allowGrouping&&e.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&t.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=e.groupSettings.columns,n=0,s=i.length;n<s;n++){var o=this.getColumnByField(i[n]);o||this.parent.log("initial_action",{moduleName:"group",columnName:i[n]});var l=o.format;o.enableGroupByFormat?t.group(i[n],this.formatGroupColumn.bind(this),l):t.group(i[n],null)}}return t},r.prototype.sortQuery=function(t){var e=this.parent;if((e.allowSorting||e.allowGrouping)&&e.sortSettings.columns.length){for(var i=e.sortSettings.columns,n=[],s=i.length-1;s>-1;s--){if(!(o=this.getColumnByField(i[s].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[s].field}),t;o.setSortDirection(i[s].direction);var a=i[s].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[s].direction:o.sortComparer.bind(o)),-1===e.groupSettings.columns.indexOf(i[s].field)?o.isForeignColumn()||o.sortComparer?t.sortByForeignKey(o.field,a,void 0,i[s].direction.toLowerCase()):t.sortBy(o.field,a):n.push({direction:a,field:o.field})}s=0;for(var l=n.length;s<l;s++)if("string"==typeof n[s].direction)t.sortBy(n[s].field,n[s].direction);else{var o=this.getColumnByField(n[s].field);t.sortByForeignKey(n[s].field,n[s].direction,void 0,o.getSortDirection().toLowerCase())}}return t},r.prototype.searchQuery=function(t,e,i){var n=this.parent.searchSettings,s=n.fields.length?n.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(m){return s.indexOf(m.field)>-1});var l=i?e.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){s=i?[e.foreignKeyValue]:s;for(var h=0;h<s.length;h++){var u=i?e:this.getColumnByField(s[h]);u.isForeignColumn()&&!i?o=this.fGeneratePredicate(u,o):o.push(new Mn(s[h],n.operator,n.key,n.ignoreCase,n.ignoreAccent))}var p=Mn.or(o);p.key=n.key,t.where(p)}else t.search(n.key,s,n.operator,n.ignoreCase,n.ignoreAccent)}return t},r.prototype.filterQuery=function(t,e,i){var l,n=this.parent,s=[],o=[],a=this.parent.getForeignKeyColumns();if(n.allowFiltering&&n.filterSettings.columns.length){for(var h=e||n.filterSettings.columns,u={},p=0,m=n.getColumns();p<m.length;p++)u[(y=m[p]).field]=y.filter.type?y.filter.type:n.filterSettings.type;for(var C=[],S=[],T=0,R=h;T<R.length;T++){var P=n.getColumnByField((y=R[T]).field);f(y.type)&&P&&("date"===P.type||"datetime"===P.type)&&(y.type=n.getColumnByField(y.field).type),y.isForeignKey?C.push(y):S.push(y)}if(S.length){for(var O=0,N=S.length;O<N;O++)S[O].uid=S[O].uid||this.parent.grabColumnByFieldFromAllCols(S[O].field).uid;for(var z=gb.getPredicate(S),U=0,ae=Object.keys(z);U<ae.length;U++)s.push(z[ae[U]])}if(C.length)for(var Te=0,Oe=C;Te<Oe.length;Te++){var y;(y=Oe[Te]).uid=y.uid||this.parent.grabColumnByFieldFromAllCols(y.field).uid;var oe=this.parent.grabColumnByUidFromAllCols(y.uid);if(oe||this.parent.log("initial_action",{moduleName:"filter",columnName:y.field}),oe.isForeignColumn()&&F_(y.field,a)&&!i)o.push(y),oe.columnData.length||(l=!0),s=this.fGeneratePredicate(oe,s);else{z=gb.getPredicate(h);for(var Ie=0,De=Object.keys(z);Ie<De.length;Ie++)s.push(z[De[Ie]])}}s.length&&!l?t.where(Mn.and(s)):this.parent.notify(GX,{})}return t},r.prototype.fGeneratePredicate=function(t,e){var i={};return t&&(this.parent.notify(kT,{predicate:i,column:t}),i.predicate.predicates.length&&e.push(i.predicate)),e},r.prototype.getData=function(t,e){var i=this;void 0===t&&(t={requestType:""});var n=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(t,e,n).promise;var o=void 0;switch(t.requestType){case"delete":if(e=e||this.generateQuery(),1===Object.keys(t.data).length)o=this.dataManager.remove(n,t.data[0],e.fromTable,e);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=t.data,o=this.dataManager.saveChanges(l,n,e.fromTable,e.requiresCount())}break;case"save":e=e||this.generateQuery(),t.index=f(t.index)?0:t.index,o=this.dataManager.insert(t.data,e.fromTable,e,t.index)}return t.promise=o,!o||Array.isArray(o)||o.hasOwnProperty("deletedRecords")?this.insert(e,t):o.then(function(){return i.insert(e,t)})},r.prototype.insert=function(t,e){return"save"===e.requestType&&this.parent.notify(kq,e),this.executeQuery(t)},r.prototype.executeQuery=function(t){var e=this;if(this.dataManager.ready){var i=new Qa;return this.dataManager.ready.then(function(){e.dataManager.executeQuery(t).then(function(s){i.resolve(s)})}).catch(function(s){i.reject(s)}),i.promise}return this.dataManager.executeQuery(t)},r.prototype.formatGroupColumn=function(t,e){var i=this.serviceLocator,n=this.getColumnByField(e),s=t;return n.type||(n.type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":typeof t),f(n.getFormatter())&&VJ(i,n),mw.prototype.toView(t,n.getFormatter())},r.prototype.crudActions=function(t){var e=this.generateQuery(),i=null,n="promise",s=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(t,e,s),t.requestType)&&(i=this.dataManager.update(s,t.data,e.fromTable,e,t.previousData)),t[n]=i||t[n],this.parent.notify(jX,t)},r.prototype.saveChanges=function(t,e,i,n){if(void 0===n&&(n=this.generateQuery()),n.requiresCount(),"result"in this.parent.dataSource){var s=new Qa,o={requestType:"batchsave",changes:t,key:e,query:n,endEdit:s.resolve};return this.setState({isPending:!0,resolver:s.resolve}),this.parent.trigger($X,o),s.promise}return this.dataManager.saveChanges(t,e,n.fromTable,n,i)},r.prototype.getKey=function(t){if(t&&t.length)return t[0]},r.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},r.prototype.addRows=function(t){for(var e=t.records.length;e>0;e--)this.dataManager.dataSource.json.splice(t.toIndex,0,t.records[e-1])},r.prototype.removeRows=function(t){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(function(i){return-1===t.records.indexOf(i)})},r.prototype.getColumnByField=function(t){var e;return this.parent.columnModel.some(function(i){return e=i,i.field===t})&&e},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Cq,this.addRows),this.parent.off(LB,this.removeRows),this.parent.off(p_,this.initDataManager),this.parent.off(un,this.destroy),this.parent.off(g_,this.crudActions),this.parent.off(qX,this.getData),this.parent.off(bw,this.refreshFilteredCols),this.parent.off(Mq,this.refreshFilteredCols))},r.prototype.getState=function(){return this.dataState},r.prototype.setState=function(t){return this.dataState=t},r.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},r.prototype.setForeignKeyDataState=function(t){this.foreignKeyDataState=t},r.prototype.getStateEventArgument=function(t){var e=new pl,i=new Xe({url:"",adaptor:new pl}),n=e.processQuery(i,t);return de(JSON.parse(n.data),n.pvtData)},r.prototype.eventPromise=function(t,e,i){var n=this,s=t,o=this.getStateEventArgument(e),a=new Qa,l=new Qa;if(void 0!==t.requestType&&!1!==this.dataState.isDataChanged)if(o.action=t,"save"===t.requestType||"delete"===t.requestType){var h=t;h.key=i,h.promise=l.promise,h.state=o,this.setState({isPending:!0,resolver:l.resolve}),s.endEdit=l.resolve,s.cancelEdit=l.reject,this.parent.trigger($X,h),l.promise.then(function(){n.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),"save"===h.requestType&&n.parent.notify(kq,h),n.parent.trigger(v_,o)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(v_,o);else this.setState({}),a.resolve(this.parent.dataSource);return a},r.prototype.getSearchColumnFieldNames=function(){for(var t=[],i=0,n=this.parent.getColumns();i<n.length;i++){var s=n[i];s.allowSearching&&!f(s.field)&&t.push(s.field)}return t},r.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function UCe(r,t){for(var e=0;e<t.length;e++)t[e].uid=t[e].isForeignKey?F_(t[e].field,r.getForeignKeyColumns()).uid:r.enableColumnVirtualization?YJ(r,t[e].field).uid:r.getColumnByField(t[e].field).uid}(this.parent,this.parent.filterSettings.columns)},r}(),qp=function(){function r(t,e){Qs(this,t),this.parent=e}return r.prototype.clone=function(){var t=new r({});return Qs(t,this),t.cells=this.cells.map(function(e){return e.clone()}),t},r.prototype.setRowValue=function(t){if(this.parent){var e=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(e,t)}},r.prototype.setCellValue=function(t,e){if(this.parent){if(this.data[t].toString()===e.toString())return;var n=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[n],t,e),this.makechanges(n,this.data)}},r.prototype.makechanges=function(t,e){this.parent&&this.parent.getDataModule().dataManager.update(t,e)},r}(),zu=function(){function r(t){this.isSpanned=!1,this.isRowSpanned=!1,Qs(this,t)}return r.prototype.clone=function(){var t=new r({});return Qs(t,this),t},r}(),yJ=function(){function r(t,e){this.serviceLocator=t,this.parent=e}return r.prototype.render=function(t,e,i,n){var u,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(e.cells[i].cellType||Bt.Data),a=e.cells[i].cellSpan?e.cells[i].cellSpan:t.colSpan+i<=e.cells.length?t.colSpan:e.cells.length-i,l=t.rowSpan,h=0;if(e.index>0){var p=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,m=e.cells[i];u=p.filter(function(T){return T.column.uid===m.column.uid})[0]}for(var C=u&&u.colSpanRange>1&&u.rowSpanRange>1?u.colSpanRange:a,S=i+1;S<i+C&&S<e.cells.length;S++)!1===e.cells[S].visible?h++:e.cells[S].isSpanned=!0;if(h>0){for(S=i+a;S<i+a+h&&S<e.cells.length;S++)e.cells[S].isSpanned=!0;i+a+h>=e.cells.length&&(a-=i+a+h-e.cells.length)}return e.cells[i].cellSpan&&(e.data[t.column.field]=e.cells[i].spanText,n=o.render(e.cells[i],e.data,{index:f(e.index)?"":e.index.toString()})),a>1&&qe(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(qe(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),e.cells[i].isRowSpanned=!0,e.cells[i].rowSpanRange=Number(l),a>1&&(e.cells[i].colSpanRange=Number(a))),e.index>0&&u.rowSpanRange>1&&(e.cells[i].isSpanned=!0,e.cells[i].rowSpanRange=Number(u.rowSpanRange-1),e.cells[i].colSpanRange=u.rowSpanRange>0?u.colSpanRange:1),this.parent.enableColumnVirtualization&&!e.cells[i].cellSpan&&!this.containsKey(t.column.field,t.data[t.column.field])&&this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),n},r.prototype.backupMergeCells=function(t,e,i){this.setMergeCells(this.generteKey(t,e),i)},r.prototype.generteKey=function(t,e){return t+"__"+e.toString()},r.prototype.splitKey=function(t){return t.split("__")},r.prototype.containsKey=function(t,e){return this.getMergeCells().hasOwnProperty(this.generteKey(t,e))},r.prototype.getMergeCells=function(){return this.parent.mergeCells},r.prototype.setMergeCells=function(t,e){this.parent.mergeCells[t]=e},r.prototype.updateVirtualCells=function(t){for(var e=this.getMergeCells(),i=0,n=Object.keys(e);i<n.length;i++){var s=n[i],o=e[s],a=this.splitKey(s),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),u=o-(h[0]-l);if(l<h[0]&&u>1)for(var p=0,m=t;p<m.length;p++){var y=m[p];if(y.data[a[0]].toString()===a[1].toString()){y.cells[0].cellSpan=u,y.cells[0].spanText=a[1];break}}}return t},r.prototype.getIndexFromAllColumns=function(t){return Iw(this.parent.getVisibleColumns(),function(i,n){if(i.field===t)return n})[0]},r}(),Ji="e-rowcell",qs="e-gridheader",Ps="e-gridcontent",lb="e-gridfooter",Ls="e-headercontent",Fn="e-movablecontent",Kn="e-movableheader",ju="e-frozencontent",_d="e-frozenheader",ns="e-content",er="e-table",bn="e-row",Ew="e-gridchkbox",Ha="e-editedrow",Fl="e-addedrow",Up="addedRecords",hb="deletedRecords",Qt="Left-Right",tr="frozen-right",Jr="frozen-left",Us="data-colindex",bJ="aria-colindex",Ii="data-rowindex",x_="aria-rowindex",rt="tbody",xi="colgroup",JB="created",CJ="beforeOpen",wh=function(){function r(t,e,i){this.isSpan=!1,this.cellType=e,this.serviceLocator=t,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return r.prototype.render=function(t,e,i,n,s){return this.refreshRow(t,e,i,n,s)},r.prototype.refresh=function(t,e,i,n,s){var o=this;i&&(t.data=dV({},t.changes),this.refreshMergeCells(t));var a=this.parent.element.querySelector("[data-uid="+t.uid+"]"),l=this.refreshRow(t,e,n,s,null,i),h=[].slice.call(l.cells),u=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&u.length)for(var p=function(O){if(O.template)return setTimeout(function(){o.parent.refreshReactColumnTemplateByUid(O.uid)},0),"break"},m=0,y=e;m<y.length&&"break"!==p(y[m]);m++);a.innerHTML="";for(var T=0,R=h;T<R.length;T++)a.appendChild(R[T])},r.prototype.refreshRow=function(t,e,i,n,s,o){var a=f(s)?this.element.cloneNode():s,l={data:t.data},h={data:t.data},u=this.parent.getColumns().filter(function(Ve){return"checkbox"===Ve.type&&Ve.field})[0],p=!1;u&&(p=fs(u.field,l.data));var m=this.parent.getSelectedRowIndexes();t.isDataRow&&(t.isSelected=m.indexOf(t.index)>-1||p),t.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0,-1===m.indexOf(t.index)&&m.push(t.index)),this.buildAttributeFromRow(a,t),qe(a,de({},i,{})),Wp(a,t.attributes);for(var y=this.serviceLocator.getService("cellRendererFactory"),C=function(Ve,Wt){var Kt=t.cells[Ve];Kt.isSelected=t.isSelected,Kt.isColumnSelected=Kt.column.isSelected;var ei=y.getCellRenderer(t.cells[Ve].cellType||Bt.Data),yi={index:f(t.index)?"":t.index.toString()};t.isExpand&&t.cells[Ve].cellType===Bt.DetailExpand&&(yi.class=S.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var Ai=ei.render(t.cells[Ve],t.data,yi,t.isExpand,o);if(t.cells[Ve].cellType!==Bt.Filter){if(t.cells[Ve].cellType===Bt.Data||t.cells[Ve].cellType===Bt.CommandColumn){S.parent.trigger(dq,de(h,{cell:Ai,column:Kt.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[Ve].foreignKeyData,requestType:S.parent.requestTypeAction}));var Ki=!1;if(t.index>0&&S.isSpan){var es=(S.parent.groupSettings.columns.length>0&&!S.parent.getRowsObject()[t.index-1].isDataRow?S.parent.getRowsObject()[t.index].cells:S.parent.getRowsObject()[t.index-1].cells).filter(function(Ae){return Ae.column.uid===t.cells[Ve].column.uid})[0];Ki=es.isRowSpanned?es.isRowSpanned:es.rowSpanRange>1}(h.colSpan>1||t.cells[Ve].cellSpan>1||h.rowSpan>1||Ki)&&(S.isSpan=!0,Ai=new yJ(S.serviceLocator,S.parent).render(h,t,Ve,Ai))}t.cells[Ve].isSpanned||a.appendChild(Ai)}},S=this,T=0,R=t.cells.length;T<R;T++)C(T);var P={row:a,rowHeight:this.parent.rowHeight};if(t.isDataRow){var O=de(l,P);O.isSelectable=!0,this.parent.trigger(CX,O),t.isSelectable=O.isSelectable;var N=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var z=this.parent.getPrimaryKeyFieldNames()[0],U=t.data?t.data[z]:null,ae=O.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;ae.some(function(Ve){return Ve[z]===U})||ae.push(t.data)}if(!O.isSelectable){this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1;var me=P.row.querySelectorAll(".e-rowcell.e-gridchkbox"),Te=O.row.querySelector(".e-rowdragdrop"),Oe=this.parent.groupSettings.columns.length+(Te||this.parent.isDetail()?1:0);for(T=0;T<me.length;T++)me[T].firstElementChild.classList.add("e-checkbox-disabled"),me[T].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(T=Oe;T<t.cells.length;T++){var oe=O.row.querySelector('.e-rowcell[data-colindex="'+t.cells[T].index+'"]');oe&&W([oe],["e-selectionbackground","e-active"])}Te&&W([Te],["e-selectionbackground","e-active"])}if(this.parent.childGrid||N||this.parent.detailTemplate){var Ie=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];Ie&&Ie.classList.add("e-detailrowvisible")}}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),t.cssClass&&a.classList.add(t.cssClass),t.lazyLoadCssClass&&a.classList.add(t.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(T=0;T<this.parent.aggregates.length;T++)if(this.parent.aggregates[T].properties.columns[0].footerTemplate){var je=[].slice.call(a.getElementsByClassName("e-summarycell"));je.length&&(B([je[je.length-1]],["e-lastsummarycell"]),B([je[0]],["e-firstsummarycell"]))}return a},r.prototype.refreshMergeCells=function(t){for(var e=0,i=t.cells;e<i.length;e++)i[e].isSpanned=!1;return t},r.prototype.buildAttributeFromRow=function(t,e){var i={},s=[];e.isDataRow&&s.push(bn),e.isAltRow&&s.push("e-altrow"),f(e.index)||(i[x_]=e.index+1,i["data-rowindex"]=e.index),e.rowSpan&&(i.rowSpan=e.rowSpan),e.uid&&(i["data-uid"]=e.uid),e.isSelected&&(i["aria-selected"]=!0),!1===e.visible&&s.push("e-hide"),i.class=s,Wp(t,i)},r}(),Md=function(){function r(t){this.parent=t}return r.prototype.generateRows=function(t,e){var i=[],n=this.parent.enableVirtualization&&e?e.startIndex:0;n=this.parent.enableInfiniteScrolling&&e?this.getInfiniteIndex(e):n;for(var s=0,o=Object.keys(t).length;s<o;s++,n++)i[s]=this.generateRow(t[s],n);return i},r.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var e={};this.parent.notify(eJ,e),t.push(this.generateCell(e,null,Bt.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,Bt.RowDragIcon)),t},r.prototype.generateRow=function(t,e,i,n,s,o,a){var l={foreignKeyData:{}};l.uid=Od("grid-row"),l.data=t,l.index=e,l.indent=n,l.tIndex=o,l.isDataRow=!0,l.parentGid=s,l.parentUid=a,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[e]&&(l.isExpand=this.parent.expandedRows[e].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(e)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),u=new qp(l,this.parent);return u.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),u},r.prototype.refreshForeignKeyRow=function(t){for(var e=this.parent.getForeignKeyColumns(),i=0;i<e.length;i++)ui(e[i].field,db(e[i],t.data),t.foreignKeyData)},r.prototype.generateCells=function(t){for(var e=this.parent.getColumns(),i=[],n=0;n<e.length;n++)i.push(this.generateCell(e[n],t.uid,f(e[n].commands)?void 0:Bt.CommandColumn,null,n,t.foreignKeyData));return i},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!f(t.field||t.template),isTemplate:!f(t.template),rowID:e,column:t,cellType:f(i)?Bt.Data:i,colSpan:n,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&re(t.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=s),new zu(a)},r.prototype.refreshRows=function(t){for(var e=0;e<t.length;e++)this.refreshForeignKeyRow(t[e]),t[e].cells=this.generateCells(t[e]);return t},r.prototype.getInfiniteIndex=function(t){return"infiniteScroll"===t.requestType||"delete"===t.requestType||"add"===t.action?t.startIndex:0},r}(),wJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),D_=function(){function r(t){this.parent=t}return r.prototype.getData=function(){for(var t=this,e=[],i=this.parent.aggregates.slice(),n=0;n<i.length;n++){var s=i[n].columns.filter(function(o){return!(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate)||t.columnSelector(o)});s.length&&e.push({columns:s})}return e},r.prototype.columnSelector=function(t){return void 0!==t.footerTemplate},r.prototype.getColumns=function(t,e){var i=[];if((this.parent.detailTemplate||!f(this.parent.childGrid))&&i.push(new Ch({})),this.parent.allowGrouping)for(var n=0;n<this.parent.groupSettings.columns.length;n++)i.push(new Ch({}));return this.parent.isRowDragable()&&!t&&i.push(new Ch({})),i.push.apply(i,this.parent.getColumns()),e=e&&!t?e+this.parent.getIndentCount():e,f(t)?i:i.slice(t,e)},r.prototype.generateRows=function(t,e,i,n,s){if(0===t.length&&(void 0===e||!e.count))return[];for(var o=this.buildSummaryData(t,e),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[h],o[h],e?e.level:void 0,i,n,e?e.parentUid:void 0,s));return a},r.prototype.getGeneratedRow=function(t,e,i,n,s,o,a){var l=[],h=this.getIndentByLevel(),u=!f(this.parent.childGrid),p=n?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!n&&(h=["e-indentcelltop"]);for(var m=a||this.getColumns(n,s),y=0;y<m.length;y++)l.push(this.getGeneratedCell(m[y],t,y>=p?this.getCellType():0===y&&this.parent.childGrid?Bt.DetailFooterIntent:Bt.Indent,h[y],u));var C=new qp({data:e,attributes:{class:"e-summaryrow"}});return C.cells=l,C.uid=Od("grid-row"),C.parentUid=o,C.isAggregateRow=!0,C.visible=l.some(function(S){return S.isDataCell&&S.visible}),C},r.prototype.getGeneratedCell=function(t,e,i,n,s){var o=e.columns.filter(function(h){return h.columnName===t.field})[0],a={style:{textAlign:t.textAlign},"e-mappinguid":t.uid,index:t.index};n&&(a.class=n),f(n)&&s&&(a.class="e-detailindentcelltop");var l={visible:t.visible,isDataCell:!f(o),isTemplate:o&&!f(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:i};return l.column.headerText=t.headerText,new zu(l)},r.prototype.buildSummaryData=function(t,e){for(var i=[],n=this.getData(),s={},o=0;o<n.length;o++){s={};for(var a=n[o].columns,l=0;l<a.length;l++)s=this.setTemplate(a[l],e&&e.aggregates?e:t,s);i.push(s)}return i},r.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},r.prototype.setTemplate=function(t,e,i){var n=t.type,s={},o=t.getFormatter()||function(m){return m},a=e;n instanceof Array||(n=[t.type]);for(var l=0;l<n.length;l++){var h=t.field+" - "+n[l].toLowerCase(),u=t.columnName,p="Custom"!==n[l]&&a.aggregates&&h in a.aggregates?a.aggregates[h]:BJ(n[l],a.aggregates?a:e,t,this.parent);i[u]=i[u]||{},i[u][h]=p,i[u][n[l]]=f(p)?" ":o(p),a.field&&(i[u].field=a.field,i[u].key=a.key)}return s.format=t.getFormatter(),t.setTemplate(s),i},r.prototype.getCellType=function(){return Bt.Summary},r}(),PT=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wJ(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},t.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(i,n){return n<=e-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return Bt.GroupSummary},t}(D_),I_=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return wJ(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},t.prototype.getData=function(){return[r.prototype.getData.call(this).reduce(function(i,n){return i.columns=i.columns.concat(n.columns),i},{columns:[]})]},t.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},t.prototype.getCellType=function(){return Bt.CaptionSummary},t}(D_),Nbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tV=function(r){function t(e){var i=r.call(this,e)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=e,i.summaryModelGen=new PT(e),i.captionModelGen=new I_(e),i}return Nbe(t,r),t.prototype.generateRows=function(e,i){if(0===this.parent.groupSettings.columns.length)return r.prototype.generateRows.call(this,e,i);this.isInfiniteScroll="infiniteScroll"===i.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var n=0,s=e.length;n<s;n++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[n],e.level,n,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},t.prototype.getGroupedRecords=function(e,i,n,s,o,a,l){var h,u=n;if(f(i.items))if(f(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,e,s,this.rows.length,l));else for(var p=0,m=i.length;p<m;p++)this.getGroupedRecords(e,i[p],i.level,s,e,this.rows.length,l);else{var y=void 0,C=this.generateCaptionRow(i,e,s,o,a,l);if(this.isInfiniteScroll&&(y=this.getPreCaption(e,C.data.key)),y?C.uid=y.uid:this.rows=this.rows.concat(C),i.items&&i.items.length&&this.getGroupedRecords(e+1,i.items,i.items.level,s,e+1,this.rows.length,C.uid),this.parent.aggregates.length&&this.isRenderAggregate(C)){var S=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:u,parentUid:C.uid}));for(var T=S-1;T>=0;T--)if(this.rows[T].isCaptionRow)this.rows[T].aggregatesCount=this.rows.length-S;else if(!this.rows[T].isCaptionRow&&!this.rows[T].isDataRow)break}y&&this.setInfiniteRowVisibility(y)}},t.prototype.isRenderAggregate=function(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},t.prototype.getPreCaption=function(e,i){var s,n=this.parent.getRowsObject().concat(this.rows);this.infiniteChildCount=0;for(var o=n.length;o--&&(n[o].isCaptionRow&&n[o].indent===e&&n[o].data.key===i&&(s=n[o]),!(n[o].indent===e||n[o].indent<e));)n[o].indent===e+1&&this.infiniteChildCount++;return s},t.prototype.getCaptionRowCells=function(e,i,n){var s=[],o=[],a=this.parent.getColumnByField(e),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(O){return O.field===e})[0]);var h=this.parent.groupSettings.columns.length,u=this.parent;if(!this.parent.enableColumnVirtualization||-1!==l.indexOf(i)){for(var p=0;p<i;p++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,Bt.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(u.detailTemplate||u.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var m=this.captionModelGen.generateRows(n)[0];de(n,m.data);var y=0;m.cells.some(function(O,N){return y=N,O.visible&&O.isDataCell}),o=m.cells.slice(y).filter(function(O){return O.visible}),m.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),1===this.parent.getVisibleColumns().length&&(o=[]),i-=o.length}for(var C=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],S=!0,T=0;T<C.length;T++){var R=S&&-1!==l.indexOf(i);R&&(S=!1);var P=!this.parent.enableColumnVirtualization||R?Bt.GroupCaption:Bt.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&P===Bt.GroupCaption?i+h:i,u.isRowDragable()&&i++,s.push(this.generateCell(a,null,P,i))}return s.push.apply(s,o),s},t.prototype.generateCaptionRow=function(e,i,n,s,o,a){var l={},h="records",u=this.parent.getColumnByField(e.field);l.data=de({},e),u&&(l.data.field=e.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=n,l.childGid=s,l.tIndex=o,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=f(e.items[h])?e.items.length:e.items[h].length,l.uid=Od("grid-row");var p=new qp(l);return p.indent=i,this.getForeignKeyData(p),p.cells=this.getCaptionRowCells(e.field,i,p.data),p},t.prototype.getForeignKeyData=function(e){var i=e.data,n=this.parent.getColumnByField(i.field);n&&n.isForeignColumn&&n.isForeignColumn()&&ui("foreignKey",f(i.key)?"":n.valueAccessor(n.foreignKeyValue,db(n,{},i.key)[0],n),e.data)},t.prototype.generateDataRows=function(e,i,n,s,o){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,u=e.length;h<u;h++,s++){a[h]=this.generateRow(e[h],this.index,h?void 0:"e-firstchildrow",i,n,s,o);for(var p=0;p<i;p++)this.parent.enableColumnVirtualization&&-1===l.indexOf(i)||a[h].cells.unshift(this.generateIndentCell());this.index++}return a},t.prototype.generateIndentCell=function(){return this.generateCell({},null,Bt.Indent)},t.prototype.refreshRows=function(e){for(var i=this.parent.getColumnIndexesInView(),n=0;n<e.length;n++)if(e[n].isDataRow){e[n].cells=this.generateCells(e[n]);for(var s=0;s<e[n].indent;s++)this.parent.enableColumnVirtualization&&-1===i.indexOf(e[n].indent)||e[n].cells.unshift(this.generateIndentCell())}else{var o=this.generateCaptionRow(e[n].data,e[n].indent);e[n].cells=o.cells}return e},t.prototype.setInfiniteRowVisibility=function(e){if(!e.isExpand||!1===e.visible)for(var i=0,n=this.rows;i<n.length;i++){var s=n[i];s.parentUid===e.uid&&(s.visible=!1,s.isCaptionRow&&this.setInfiniteRowVisibility(s))}},t.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var i=this.rows[e];if(i.isCaptionRow)for(var n=e+1;n<this.rows.length;n++)i.uid===this.rows[n].parentUid&&(this.rows[n].visible=i.isExpand)}},t}(Md),A_=function(){function r(t,e){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(n){i.parent.notify(TT,{target:n.target,droppedElement:n.droppedElement}),$e(n.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=function(n){var s=n;return function(){if(i.parent.isFrozenGrid()&&i.parent.enableVirtualization){var o=n.tableName;if(i.isLoaded=i.parent.getFrozenMode()===Qt?"frozen-right"===o:"movable"===o,i.parent.enableColumnVirtualization&&"virtualscroll"===n.requestType&&i.isLoaded){var a=[].slice.call(i.parent.getMovableVirtualHeader().getElementsByClassName(bn)),l=[].slice.call(i.parent.getFrozenVirtualHeader().getElementsByClassName(bn));i.isLoaded=a.length===l.length}}if(i.ariaService.setBusy(i.getPanel().querySelector("."+ns),!1),!i.parent.isDestroyed){var h=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var u=0;u<i.visibleRows.length;u++)i.setRowsInLazyGroup(i.visibleRows[u],u);if(h=i.parent.getRowsObject(),i.parent.infiniteScrollSettings.enableCache&&s.prevPage){var m=i.parent.infiniteScrollSettings.maxBlocks;h=[];for(var y=parseInt(i.rowElements[0].getAttribute("data-rowindex"),10)+1,S=(u=0,Math.ceil(y/i.parent.pageSettings.pageSize));u<m;u++,S++)i.infiniteCache[S]&&(h=h.concat(i.infiniteCache[S]))}}if(i.parent.isFrozenGrid()&&(h=n.isFrozen?i.freezeRows:n.renderFrozenRightContent?i.parent.getFrozenRightRowsObject():i.movableRows),i.parent.notify(qr,{rows:h,args:s}),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded&&(i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&"sorting"===n.requestType&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0),i.parent.trigger(Jl,{},function(){i.parent.allowTextWrap&&i.parent.notify(tu,{case:"textwrap"})})),s){var T=(s.requestType||"").toLowerCase()+"-complete";i.parent.notify(T,s),"batchsave"===n.requestType&&(n.cancel=!1,i.parent.trigger(Vi,n))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(kc,this.setVisible,this),this.parent.on(OB,this.colGroupRefresh,this),this.parent.on(Ar,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(DT,this.beforeCellFocused,this),this.parent.on(un,this.droppableDestroy,this))}return r.prototype.beforeCellFocused=function(t){this.pressedKey=!t.byKey||"upArrow"!==t.keyArgs.action&&"downArrow"!==t.keyArgs.action?void 0:t.keyArgs.action},r.prototype.renderPanel=function(){var t=this.parent,e=this.parent.element.querySelector("."+Ps);if(e)return this.ariaService.setOptions(this.parent.element.querySelector("."+ns),{busy:!1}),void this.setPanel(e);e=this.parent.createElement("div",{className:Ps});var i=this.parent.createElement("div",{className:ns});this.ariaService.setOptions(i,{busy:!1}),e.appendChild(i),this.setPanel(e),t.element.appendChild(e)},r.prototype.renderTable=function(){var t=this.getPanel(),e=t.querySelector(".e-virtualtable"),i=t.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!f(e)&&!f(i)&&($e(e),$e(i)),t.appendChild(this.createContentTable("_content_table")),this.setTable(t.querySelector("."+er)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},r.prototype.createContentTable=function(t){var e=this.getPanel().firstElementChild;this.getTable()&&$e(this.getTable());var i=e.querySelector("."+er)?e.querySelector("."+er):this.parent.createElement("table",{className:er,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+t}});return this.setColGroup(this.parent.getHeaderTable().querySelector(xi).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(rt,{attrs:{role:"rowgroup"}})),e.appendChild(i),e},r.prototype.refreshContentRows=function(t){var e=this;void 0===t&&(t={});var i=this.parent;if(0!==i.currentViewData.length){var n=this.currentMovableRows||i.currentViewData,s=this.parent.contentModule,o=i.isReact&&!f(i.rowTemplate),a=o?i.createElement(rt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=de([],n));var u,p,C,l=o?i.createElement(rt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h=i.getColumns(),m=i.getFrozenColumns(),y=this.parent.isFrozenGrid(),S=new wh(this.serviceLocator,null,this.parent),T=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;i.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];var N,z,U,R=this.getPanel().querySelector("."+ju),P=this.getPanel().querySelector("."+Fn),O=this.getPanel().querySelector("."+ns);ws(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(ca){return t.requestType===ca})&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis&&(U=this.parent.contentModule.generateRows(n,t),t.renderMovableContent=!0),U=this.parent.contentModule.generateRows(n,t)):(U=this.checkCache(U,t),!this.isAddRows&&!this.useGroupCache&&(U=this.generator.generateRows(n,t))),this.setGroupCache(U,t),this.parent.notify("set-infinite-cache",{isInfiniteScroll:T,modelData:U,args:t});var ae=U[0].cells[0].index;y&&(z=s.setTbody(U,t),N=s.getTbody(z));var me=this.parent.getFrozenMode()===Qt&&z===tr;if("infiniteScroll"!==t.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!t.isFrozen&&!me){for(var Te=[],Oe=0;Oe<this.parent.registeredTemplate.template.length;Oe++)for(var oe=0;oe<this.parent.registeredTemplate.template[Oe].rootNodes.length;oe++)f(this.parent.registeredTemplate.template[Oe].rootNodes[oe].parentNode)&&Te.push(this.parent.registeredTemplate.template[Oe]);this.parent.destroyTemplate(["template"],Te)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===t.requestType||t.isFrozen||H_(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new yJ(this.serviceLocator,this.parent).updateVirtualCells(U),y||(this.tbody=this.getTable().querySelector(rt));var fe=0,_e=!0;if(ws(i)&&i.vcRows.length){var Se=f(t.virtualInfo.offsets)?f(t.scrollTop)?0:t.scrollTop.top:t.virtualInfo.offsets.top;if(0!==Se){for(var Pe=i.vGroupOffsets,Ve=i.pageSettings.pageSize/2,Wt=Object.keys(Pe).map(function(ca){return Pe[ca]}),Kt=0;Kt<Wt.length;Kt++)if(Se<Wt[Kt]){if(f(t.virtualInfo)||"up"!==t.virtualInfo.direction){fe=Kt*Ve,(this.parent.contentModule.isEndBlock(Kt)||this.parent.contentModule.isEndBlock(Kt+1))&&(t.virtualInfo.blockIndexes=[Kt,Kt+1]);break}fe=Kt>0?(Kt-1)*Ve:Kt*Ve;break}Math.round(Se+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!t.rowObject&&(_e=!1)}}var ei=i.frozenRows&&!i.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===t.requestType;if(i.frozenRows&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis||ei){var yi=t.virtualInfo.blockIndexes,Ai=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],ei&&(t.virtualInfo.page=1);var ri=this.vgenerator.generateRows(ei?this.initialPageRecords:n,t);for(ri.splice(this.parent.frozenRows),Oe=0;Oe<this.parent.frozenRows;Oe++)ri[Oe].cells.splice(0,this.parent.getFrozenColumns()),u=S.render(ri[Oe],h),l.appendChild(u);t.virtualInfo.blockIndexes=yi,t.virtualInfo.page=Ai,ei&&1===t.virtualInfo.page&&U.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,U,S,t,n,h),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===t.requestType&&(this.visibleRows=[]),Oe=fe;for(var Yn=U.length;Oe<Yn;Oe++)if(this.rows.push(U[Oe]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(U[Oe]),this.setRowsInLazyGroup(U[Oe],Oe),!f(U[Oe].indent))){if(this.setInfiniteVisibleRows(t,U[Oe],z),ws(i)&&t.virtualInfo&&t.virtualInfo.blockIndexes&&this.rowElements.length>=t.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&_e){this.parent.currentViewData.records=this.rows.map(function(Io){return Io.data});break}if(i.rowTemplate){var ce=i.element.id+"rowTemplate",Ae=void 0;if(i.isReact){var Dt=i.frozenRows&&Oe<i.frozenRows,bi=de({index:Oe},n[Oe]);i.getRowTemplate()(bi,i,"rowTemplate",ce,null,null,Dt?l:a),i.renderTemplates()}else Ae=i.getRowTemplate()(de({index:Oe},n[Oe]),i,"rowTemplate",ce,void 0,void 0,void 0,this.parent.root);if(i.isReact||"TBODY"!==Ae[0].tagName)i.frozenRows&&Oe<i.frozenRows?u=i.isReact?l.lastElementChild:la(l,Ae):(i.isReact||(u=la(a,Ae)),C=i.isReact?a.lastElementChild:u.lastElementChild);else{for(oe=0;oe<Ae.length;oe++){var Ci="tr"===Ae[oe].nodeName.toLowerCase();(Ci||Ae[oe].querySelectorAll&&Ae[oe].querySelectorAll("tr").length)&&(u=Ci?Ae[oe]:Ae[oe].querySelector("tr"))}i.frozenRows&&Oe<i.frozenRows?l.appendChild(u):a.appendChild(u)}this.parent.trigger(CX,{data:U[Oe].data,row:C||u})}else{u=S.render(U[Oe],h);var es=this.ensureFrozenHeaderRender(t);i.frozenRows&&Oe<i.frozenRows&&!T&&"virtualscroll"!==t.requestType&&es&&this.ensureVirtualFrozenHeaderRender(t)?l.appendChild(u):a.appendChild(u),U[Oe].isExpand&&i.notify("expandchildgrid",u.cells[i.groupSettings.columns.length])}U[Oe].isDataRow&&this.rowElements.push(u),this.ariaService.setOptions(this.getTable(),{colcount:i.getColumns().length.toString()})}if(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(Sw,{rows:this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]}),y&&s.splitRows(z),i.removeMaskRow(),i.frozenRows&&"virtualscroll"!==t.requestType&&!T&&this.ensureVirtualFrozenHeaderRender(t)||"virtualscroll"===t.requestType&&t.virtualInfo.sentinelInfo&&"X"===t.virtualInfo.sentinelInfo.axis)if(p=y?s.getFrozenHeader(z):i.getHeaderTable().querySelector(rt),o){var yr=p.parentElement;$e(p),yr.appendChild(l)}else p.innerHTML="",p.appendChild(l);!i.enableVirtualization&&i.frozenRows&&0===ae&&O.offsetHeight===Number(i.height)&&(O.style.height=O.offsetHeight-p.offsetHeight+"px"),t.rows=this.rows.slice(0),y&&s.setIsFrozen(t,z),this.index=ae,PJ(function(){e.parent.notify(YX,t);var ca=e.parent.enableVirtualization&&e.parent.isFrozenGrid();if(!e.parent.enableVirtualization&&!T&&(e.parent.isFrozenGrid()?($e(s.getTbody(z)),N=e.parent.createElement(rt,{attrs:{role:"rowgroup"}})):(e.tbody.innerHTML="",f(e.tbody.parentElement)?$e(i.getContentTable().querySelector(rt)):$e(e.tbody),e.tbody=e.parent.createElement(rt,{attrs:{role:"rowgroup"}}))),!y||ca||e.parent.enableInfiniteScrolling)if(i.rowTemplate&&Ty(),ca){if(t.renderFrozenRightContent){var Io=i.getContent().querySelector(".e-frozen-right-content").querySelector(rt);e.appendContent(Io,a,t)}else t.renderMovableContent?(e.appendContent(P.querySelector(rt),a,t),t.renderMovableContent=!1):e.appendContent(R.querySelector(rt),a,t);e.parent.getFrozenColumns()||s.renderNextFrozentPart(t,z)}else!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling?(e.isAddRows=!1,e.parent.notify("remove-infinite-rows",{args:t}),e.parent.notify("append-infinite-content",{tbody:N||e.tbody,frag:a,args:t,rows:e.rows,rowElements:e.rowElements,visibleRows:e.visibleRows,tableName:z}),!m&&y&&(i.getFrozenMode()!==Qt&&(z===Jr||z===tr)||i.getFrozenMode()===Qt&&(z===Jr||"movable"===z))&&e.refreshContentRows(de({},t))):(e.useGroupCache=!1,e.appendContent(e.tbody,a,t));else e.appendContent(N,a,t,z);m&&s.renderNextFrozentPart(t,z),a=null},this.rafCallback(de({},t)))}},r.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},r.prototype.appendContent=function(t,e,i,n){this.parent.isReact&&!f(this.parent.rowTemplate)?this.getTable().appendChild(e):(t.appendChild(e),this.getTable().appendChild(t))},r.prototype.setRowsInLazyGroup=function(t,e){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(t,e)},r.prototype.setGroupCache=function(t,e){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:e,data:t})},r.prototype.ensureFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&("reorder"===t.requestType||"refresh"===t.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},r.prototype.ensureVirtualFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&"delete"===t.requestType)},r.prototype.checkCache=function(t,e){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===e.requestType){var i=e.isFrozen?1:0,n=this.parent.isFrozenGrid();if(this.isAddRows=!f(this.infiniteCache[this.parent.pageSettings.currentPage]),n&&!f(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){var s=n?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];t=1===this.parent.pageSettings.currentPage?s.slice(this.parent.frozenRows):s}return t}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===e.requestType)):null},r.prototype.setInfiniteVisibleRows=function(t,e,i){var n=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(n?i===Jr||"Right"===this.parent.getFrozenMode()&&i===tr?this.visibleFrozenRows.push(e):"movable"===i?this.visibleRows.push(e):this.rightFreezeRows.push(e):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(e))},r.prototype.getCurrentBlockInfiniteRecords=function(t){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.isFrozenGrid(),n=this.parent.getRows(),s=parseInt(n[this.parent.frozenRows].getAttribute(Ii),10),o=Math.ceil((s+1)/this.parent.pageSettings.pageSize);s=parseInt(n[n.length-1].getAttribute(Ii),10);var a=Math.ceil(s/this.parent.pageSettings.pageSize);if(i){for(var l=t?0:1,h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h][l]):this.infiniteCache[h][l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1][l].slice(0,this.parent.frozenRows).concat(e))}else{for(h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h]):this.infiniteCache[h];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}}return e},r.prototype.getReorderedVFRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.getReorderedRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.virtualFrozenHdrRefresh=function(t,e,i,n,s,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)){var a=void 0,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=s,l=this.getReorderedVFRows(n)):l=this.getReorderedRows(n);for(var h=0;h<l.length;h++)a=i.render(l[h],o),t.appendChild(a);1===n.virtualInfo.page&&e.splice(0,this.parent.frozenRows),n.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},r.prototype.getInfiniteRows=function(){var t=[],e=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),n=0;n<i.length;n++)t=t.concat(e?this.infiniteCache[i[n]][0]:this.infiniteCache[i[n]]);else t=e?this.visibleFrozenRows:this.visibleRows;return t},r.prototype.getInfiniteMovableRows=function(){var t=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?t.length?t:this.visibleRows:[]},r.prototype.getPanel=function(){return this.contentPanel},r.prototype.setPanel=function(t){this.contentPanel=t},r.prototype.getTable=function(){return this.contentTable},r.prototype.setTable=function(t){this.contentTable=t},r.prototype.getRows=function(){var t=this.getInfiniteRows();return t.length?t:this.parent.getFrozenColumns()?this.freezeRows:this.rows},r.prototype.getMovableRows=function(){var t=this.getInfiniteMovableRows();return t.length?t:this.movableRows},r.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},r.prototype.getMovableRowElements=function(){return this.rowElements},r.prototype.setRowElements=function(t){this.rowElements=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return f(t)||(t.id="content-"+t.id),this.colgroup=t},r.prototype.setVisible=function(t){var T,e=this.parent,i=this.parent.isFrozenGrid(),n=e.getFrozenColumns(),s=[];if(i){var o=this.freezeRows,a=this.movableRows,l=o.length,h=void 0,u=[];e.getFrozenMode()===Qt&&(u=e.getFrozenRightRowsObject());for(var p=0,m=void 0;p<l;p++){h=a[p].cells.length;var y=u.length?u[p].cells.length:0;m=o[p].clone();for(var C=0;C<h;C++)m.cells.push(a[p].cells[C]);for(var S=0;S<y;S++)m.cells.push(u[p].cells[S]);s.push(m)}}else s=this.getRows();s.some(function(Pe){return Pe.isDataRow&&(T=Pe),Pe.isDataRow});var R=!0;!e.groupSettings.columns.length&&T&&(R=!1);for(var P=e.getDataRows(),z=this.infiniteRowVisibility()||this.rows.filter(function(Pe){return!Pe.isDetailRow}),U=0,ae=t.length;U<ae;U++){var me=t[U],Te=this.parent.getNormalizedColumnIndex(me.uid),Oe=this.parent.getColumnIndexByUid(me.uid),oe=!0===me.visible?"":"none";if(-1!==Te&&T&&Te<T.cells.length)if(i)if("movable"!==me.getFreezeTableName())me.getFreezeTableName()===tr?(Oe=Te-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount(),Ht(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(xi).childNodes[Te],{display:oe}),z=e.getFrozenRightRowsObject(),P=e.getFrozenRightDataRows()):(Ht(this.getColGroup().childNodes[Te],{display:oe}),z=this.infiniteRowVisibility(!0)||this.freezeRows,P=e.getDataRows());else{var je=e.getContent().querySelector("."+Fn).querySelector(xi);Oe=Te=Te-n-this.parent.getFrozenLeftColumnsCount(),Ht(je.childNodes[Te],{display:oe}),P=e.getMovableDataRows(),z=this.infiniteRowVisibility()||this.movableRows}else Ht(this.getColGroup().childNodes[Te],{display:oe});R||(this.setDisplayNone(P,Oe,oe,z),i&&this.parent.notify(tu,{case:"refreshHeight",isModeChg:!0})),!this.parent.invokedFromMedia&&me.hideAtMedia&&this.parent.updateMediaColumns(me),this.parent.invokedFromMedia=!1}R?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(b_,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(b_,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(b_,{rows:z,args:{}})},r.prototype.setDisplayNone=function(t,e,i,n){(function $J(r,t,e,i,n,s){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=r[o[a]].querySelectorAll("td.e-rowcell")[t];if(r[o[a]].querySelectorAll("td.e-rowcell").length&&l)if(Ht(r[o[a]].querySelectorAll("td.e-rowcell")[t],{display:e}),r[o[a]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&W([r[o[a]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),s&&n.isRowDragable()){var h=n.getFrozenColumns()?t:t+1;i[o[a]].cells[h].visible=""===e}else i[o[a]].cells[t].visible=""===e}})(t,e,i,n,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:e,isFreeze:this.isInfiniteFreeze})},r.prototype.infiniteRowVisibility=function(t){var e;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=t,e=this.parent.infiniteScrollSettings.enableCache?t?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():t?this.visibleFrozenRows:this.visibleRows),e},r.prototype.colGroupRefresh=function(){if(this.getColGroup()){var t;t=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(xi+":not(.e-masked-colgroup)").cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(t,this.getColGroup()),this.setColGroup(t)}},r.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+qs).querySelector(xi+":not(.e-masked-colgroup)").cloneNode(!0)},r.prototype.initializeContentDrop=function(){this.droppable=new w0(this.parent.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},r.prototype.canSkip=function(t,e,i){return f(e)||f(t.visible)||e.cells[i].visible===t.visible},r.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new tV(this.parent):new Md(this.parent)},r.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(rt).innerHTML="")},r.prototype.setSelection=function(t,e,i){this.parent.notify("set-freeze-selection",{uid:t,set:e,clearAll:i});var n=this.parent.isFrozenGrid();if(!n||!this.parent.enableVirtualization){if(n)for(var s=this.getMovableRows().filter(function(p){return i||t===p.uid}),o=0;o<s.length;o++)s[o].isSelected=e;for(var a=this.getRows().filter(function(p){return i||t===p.uid}),l=0;l<a.length;l++){a[l].isSelected=e;for(var h=a[l].cells,u=0;u<h.length;u++)h[u].isSelected=e}}},r.prototype.getRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getDataRows()[t]},r.prototype.getInfiniteRowIndex=function(t){if(this.parent.infiniteScrollSettings.enableCache){var e=this.parent.frozenRows,i=e>t?0:e,n=parseInt(this.parent.getRows()[i].getAttribute(Ii),10);t=e>t?t:t-n+e}return t},r.prototype.getVirtualRowIndex=function(t){return t},r.prototype.getMovableRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getMovableDataRows()[t]},r.prototype.enableAfterRender=function(t){"group"===t.module&&t.enable&&(this.generator=this.getModelGenerator())},r.prototype.setRowObjects=function(t){this.rows=t},r.prototype.immutableModeRendering=function(t){var e=this;void 0===t&&(t={});var i=this.parent;i.hideSpinner();var n=i.getPrimaryKeyFieldNames()[0],s={},o={},a=[],l={},h=i.getRowsObject().slice(),u=this.getBatchEditedRecords(n,h),p={},m=0!==Object.keys(u).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===t.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(t);else{if(0===i.currentViewData.length)return;var y={},C=i.createElement(rt,{attrs:{role:"rowgroup"}}),S=i.currentViewData,T=[].slice.call(this.getTable().querySelector(rt).children);if(this.prevCurrentView.length){var R=this.prevCurrentView.length,P=S.length;if(R===P)for(var O=0;O<P;O++)"Batch"===this.parent.editSettings.mode&&T[O].classList.contains("e-insertedrow")?(T.splice(O,1),--O):(o[S[O][n]]=s[this.prevCurrentView[O][n]]=O,p[O]=S[O][n],y[h[O].uid]=T[O],l[O]=this.prevCurrentView[O][n]);else{for(O=0;O<P;O++)o[S[O][n]]=O,p[O]=S[O][n];for(O=0;O<R;O++)"Batch"===this.parent.editSettings.mode&&T[O].classList.contains("e-insertedrow")?(T.splice(O,1),--O):(y[h[O].uid]=T[O],s[this.prevCurrentView[O][n]]=O,l[O]=this.prevCurrentView[O][n])}}for(O=0;O<S.length;O++){var N=s[S[O][n]];if(f(N)){var ae=new wh(this.serviceLocator,null,i),me=this.generator.generateRows([S[O]]);a.push(me[0]);var U=ae.render(me[0],i.getColumns());C.appendChild(U),this.refreshImmutableContent(O,U,a[O])}else{var z=!1;if(this.parent.enableDeepCompare&&(z=this.objectEqualityChecker(this.prevCurrentView[N],S[O])),U=y[h[N].uid],a.push(h[N]),this.rowElements[N]&&this.rowElements[N].getAttribute("data-uid")===a[O].uid&&(m&&f(u[p[O]])||!m&&(z||this.prevCurrentView[N]===S[O]))){N!==O&&this.refreshImmutableContent(O,U,a[O]),C.appendChild(U);continue}(m&&!f(u[p[O]])||!this.parent.enableDeepCompare&&S[O]!==this.prevCurrentView[N]||this.parent.enableDeepCompare&&!z)&&h[N].setRowValue(S[O]),C.appendChild(U),this.refreshImmutableContent(O,U,a[O])}}if(this.rows=a,this.rowElements=[].slice.call(C.children),$e(this.getTable().querySelector(rt)),this.getTable().appendChild(C),this.parent.trigger(Jl,{},function(){e.parent.allowTextWrap&&e.parent.notify(tu,{case:"textwrap"})}),t){var Te=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(Te,t)}}},r.prototype.objectEqualityChecker=function(t,e){for(var i=Object.keys(t),n=!0,s=0;s<i.length;s++)if(!(t[i[s]]===e[i[s]]||t[i[s]]instanceof Date&&e[i[s]]instanceof Date&&t[i[s]].getTime()===e[i[s]].getTime())){n=!1;break}return n},r.prototype.getBatchEditedRecords=function(t,e){var i={},n=this.parent.getBatchChanges(),s=[],o=[];Object.keys(n).length&&(s=n.changedRecords,o=n.addedRecords);var a={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:e,args:a}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?e.splice(e.length-1,o.length):a.cancel||e.splice(0,o.length));for(var l=0;l<s.length;l++)i[s[l][t]]=l;return i},r.prototype.refreshImmutableContent=function(t,e,i){i.isAltRow=!!this.parent.enableAltRow&&t%2!=0,i.isAltRow?e.classList.add("e-altrow"):e.classList.remove("e-altrow"),i.index=t,i.edit=void 0,i.isDirty=!1,e.setAttribute(Ii,t.toString()),e.setAttribute(x_,(t+1).toString()),this.updateCellIndex(e,t)},r.prototype.updateCellIndex=function(t,e){for(var i=0;i<t.cells.length;i++)t.cells[i].setAttribute("index",e.toString())},r}(),aU=function(){function r(t,e){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(n){var s=i.parent,o=i.draggable.currentStateTarget,a=ge(o,"e-headercell");if(!s.allowReordering&&!s.allowGrouping||!f(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=o.classList.contains("e-headercell")?o:a;if(!h||!s.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var m,u=h.offsetHeight,p=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv");if(p){if(m=h.querySelector(".e-stackedheadercelldiv")?s.getStackedHeaderColumnByHeaderText(p.innerText.trim(),s.columns):s.getColumnByUid(p.getAttribute("e-mappinguid")),i.column=m,i.column.lockColumn)return!1;l.setAttribute("e-mappinguid",i.column.uid)}if(m&&!f(m.headerTemplate))if(f(m.headerTemplate))l.innerHTML=m.headerTemplate;else{var y=s.getColumnIndexByField(m.field);la(l,m.getHeaderTemplate()(de({index:y},m),s,"headerTemplate"))}else l.innerHTML=p?m.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(u-6).toString()+"px",s.element.appendChild(l),l},this.dragStart=function(n){var s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",s.notify(xT,{target:i.draggable.currentStateTarget,column:i.column,event:n.event})},this.drag=function(n){var s=i.parent,o=n.target;if(o){var a=j(o,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if(!(a&&a.getAttribute("id")===s.element.getAttribute("id")||(ai(l,["e-notallowedcur"],["e-defaultcur"]),s.allowReordering&&(s.element.querySelector(".e-reorderuparrow").style.display="none",s.element.querySelector(".e-reorderdownarrow").style.display="none"),s.groupSettings.allowReordering)))return;s.notify(vw,{target:n.target,column:i.column,event:n.event})}},this.dragStop=function(n){var o,s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",(!ge(n.target,"e-headercell")&&!ge(n.target,"e-groupdroparea")||!s.allowReordering&&ge(n.target,"e-headercell")||!n.helper.getAttribute("e-mappinguid")&&ge(n.target,"e-groupdroparea"))&&($e(n.helper),o=!0),s.notify("column-drag-stop",{target:n.target,event:n.event,column:i.column,cancel:o})},this.drop=function(n){var s=i.parent,o=n.droppedElement.getAttribute("e-mappinguid"),a=j(n.target,".e-grid");$e(n.droppedElement),!(a&&a.getAttribute("id")!==s.element.getAttribute("id")||!s.allowReordering&&!s.allowGrouping)&&s.notify(AT,{target:n.target,uid:o,droppedElement:n.droppedElement})},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(kc,this.setVisible,this),this.parent.on(IT,this.colPosRefresh,this),this.parent.on(Ba,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(Ar,this.updateCustomResponsiveToolbar,this))}return r.prototype.renderPanel=function(){var t=this.parent.element.querySelector("."+qs),e=null!=t;t=e?t:this.parent.createElement("div",{className:"e-gridheader"});var i=e?t.querySelector("."+Ls):this.parent.createElement("div",{className:Ls});this.toggleStackClass(t),t.appendChild(i),this.setPanel(t),e||this.parent.element.appendChild(t)},r.prototype.renderTable=function(){var t=this.getPanel();t.appendChild(this.createHeaderTable()),this.setTable(t.querySelector("."+er)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(So,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})},r.prototype.getPanel=function(){return this.headerPanel},r.prototype.setPanel=function(t){this.headerPanel=t},r.prototype.getTable=function(){return this.headerTable},r.prototype.setTable=function(t){this.headerTable=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return this.colgroup=t},r.prototype.getRows=function(){return this.getTable().tHead.rows},r.prototype.createHeaderTable=function(){var t=this.createTable(),e=this.getPanel().querySelector("."+Ls);return e.appendChild(t),e},r.prototype.createHeader=function(t,e){void 0===t&&(t=null);var i=this.parent,n=i.isFrozenGrid();this.getTable()&&!n&&$e(this.getTable());var s=this.parent.createElement("table",{className:er,attrs:{cellspacing:"0.25px",role:"grid"}}),o=e||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),a=this.createHeaderContent(o),l=a.thead,h=this.parent.createElement(rt,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var m,u=this.parent.createElement(xi),p=this.parent.createElement("tr",{attrs:{role:"row"}}),y=this.rows=a.rows,C=0,S=y.length;C<S;C++)for(var T=0,R=y[C].cells.length;T<R;T++)m=this.parent.createElement("td"),p.appendChild(m);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&s.classList.add("e-sortfilter"),this.updateColGroup(u),h.appendChild(p),s.appendChild(this.setColGroup(u)),s.appendChild(l),s.appendChild(h),s.appendChild(this.caption),this.ariaService.setOptions(s,{colcount:i.getColumns().length.toString()}),s},r.prototype.createTable=function(t){return void 0===t&&(t=null),this.createHeader(t)},r.prototype.createHeaderContent=function(t){var e=this.parent,i=1,n=e.getFrozenMode(),s=e.getColumns(),o=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),a=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),l=new wh(this.serviceLocator,Bt.Header,e);l.element=a;var u,h=[];this.colDepth=function pV(r){for(var t=0,e=0;e<r.length;e++){var i=qJ(r[e],0);t<i&&(t=i)}return t+1}(e.columns);for(var p=0,m=this.colDepth;p<m;p++)h[p]=this.generateRow(p),h[p].cells=[];"Right"!==n&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,t),"Right"===n&&(i=0,h=this.ensureColumns(h));var y=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){var C=h[0].cells[i].column.getFreezeTableName();"movable"===C||n===Qt&&C===tr?"Right"===n?h[0].cells.pop():h[0].cells.shift():y||C!==Jr?"Right"===n&&C===tr&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=C===Jr?"Left":"Right"}for(p=0,m=this.colDepth;p<m;p++)u=l.render(h[p],s),this.parent.rowHeight&&u.querySelector(".e-headercell")&&(u.style.height=this.parent.rowHeight+"px"),o.appendChild(u);return{thead:o,rows:h}},r.prototype.updateColGroup=function(t){var i,e=this.parent.getColumns(),n=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(e=de([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),t.id=this.parent.element.id+xi,this.parent.allowGrouping)for(var s=0,o=this.parent.groupSettings.columns.length;s<o;s++)this.parent.enableColumnVirtualization&&-1===n.indexOf(s)||(i=this.parent.createElement("col",{className:"e-group-intent"}),t.appendChild(i));for((this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),t.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),s=0,o=e.length;s<o;s++)i=this.parent.createElement("col"),!1===e[s].visible&&Ht(i,{display:"none"}),t.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),t},r.prototype.ensureColumns=function(t){for(var e=this.parent,i=this.parent.getColumnIndexesInView(),n=0,s=t.length;n<s;n++){if(e.allowGrouping)for(var o=0,a=e.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||t[n].cells.push(this.generateCell({},Bt.HeaderIndent));if(e.detailTemplate||e.childGrid){var l={};this.parent.notify(eJ,l),t[n].cells.push(this.generateCell(l,Bt.DetailHeader))}e.isRowDragable()&&t[n].cells.push(this.generateCell({},Bt.RowDragHIcon))}return t},r.prototype.getHeaderCells=function(t,e){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var s=0;s<n.length;s++)this.lockColsRendered=!1,t=this.appendCells(n[s],t,0,0===s,!1,s===n.length-1,i,e,!1);s=0;for(var o=n.length;s<o;s++)this.notfrzIdx=0,this.lockColsRendered=!0,t=this.appendCells(n[s],t,0,0===s,!1,s===o-1,i,e,!1);return t},r.prototype.appendCells=function(t,e,i,n,s,o,a,l,h){var S,u=o?h?"e-laststackcell":"e-lastcell":"",p=this.parent.isFrozenGrid(),m=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,y=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,C=this.parent.getContent().querySelector(".e-movablescrollbar");if(p&&C&&this.parent.enableColumnVirtualization&&(S=C.scrollLeft),t.columns){this.isFirstCol=!1;var T=this.getCellCnt(t,0);if(T){var R=this.getStackedLockColsCount(t,0),P=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==R||this.lockColsRendered&&T-R!=0,O=p&&this.ensureStackedFrozen(t.columns,l,!1);(!p&&P||O)&&e[i].cells.push(new zu({cellType:Bt.StackedHeader,column:t,colSpan:this.getColSpan(T,R,t.columns,l,p),className:n?"":s?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var N=0;N<t.columns.length;N++)e=this.appendCells(t.columns[N],e,i+1,n,0===N,N===t.columns.length-1&&o,a,l,!1);if(this.lockColsRendered){N=0;for(var z=t.columns.length;N<z;N++){n=n&&0===N;var U=this.isFirstCol=t.columns[N].visible&&!n,ae=N===z-1&&o;e=this.appendCells(t.columns[N],e,i+1,n,U&&!ae,ae,a,l,!0)}}}else(S&&S>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===t.getFreezeTableName()||!p&&m||p&&t.getFreezeTableName()===l&&y)&&e[i].cells.push(this.generateCell(t,Bt.Header,this.colDepth-i,(n?"":s?"e-firstcell":"")+u,i,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return e},r.prototype.ensureStackedFrozen=function(t,e,i){for(var n=t.length,s=0;s<n;s++)if(t[s].columns)i=this.ensureStackedFrozen(t[s].columns,e,i);else if(t[s].getFreezeTableName()===e){i=!0;break}return i},r.prototype.getStackedLockColsCount=function(t,e){if(t.columns)for(var i=0;i<t.columns.length;i++)e=this.getStackedLockColsCount(t.columns[i],e);else t.lockColumn&&e++;return e},r.prototype.getColSpan=function(t,e,i,n,s){return s?t=this.getFrozenColSpan(i,n,0):this.parent.lockcolPositionCount&&(t=this.lockColsRendered?t-e:e),t},r.prototype.getFrozenColSpan=function(t,e,i){for(var n=t.length,s=0;s<n;s++)t[s].columns?i=this.getFrozenColSpan(t[s].columns,e,i):t[s].getFreezeTableName()===e&&t[s].visible&&i++;return i},r.prototype.generateRow=function(t){return new qp({})},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!1,isTemplate:!f(t.headerTemplate),rowID:"",column:t,cellType:e,rowSpan:i,className:n,index:s,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new zu(a)},r.prototype.setVisible=function(t){for(var i,n,e=this.parent,s=e.getFrozenColumns(),o=0,a=t.length;o<a;o++){var l=t[o];if(n=e.getNormalizedColumnIndex(l.uid),i=l.visible?"":"none",s){var h=this.parent.isRowDragable()?s+1:s;Ht(n<h?this.getColGroup().children[n]:e.getHeaderContent().querySelector("."+Kn).querySelector(xi).children[n-h],{display:i})}else Ht(this.getColGroup().children[n],{display:i})}this.refreshUI()},r.prototype.colPosRefresh=function(){this.refreshUI()},r.prototype.refreshUI=function(){var t=this.parent.isFrozenGrid(),e=this.parent.enableColumnVirtualization&&t,i=this.getPanel();this.toggleStackClass(i);var n=this.freezeReorder?this.headerPanel.querySelector("."+Kn).querySelector("."+er):this.getTable(),s=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(e&&(n=this.parent.contentModule.getVirtualFreezeHeader(),s=this.parent.contentModule.isXaxis()?"movable":s),n){$e(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]);var o=this.parent.createElement(xi),a=this.createHeaderContent(s);this.rows=a.rows,n.insertBefore(a.thead,n.firstChild),this.updateColGroup(o),n.insertBefore(this.setColGroup(o),n.firstChild),e||this.setTable(n),this.appendContent(n),this.parent.notify(OB,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!t||this.parent.enableColumnVirtualization&&t)&&this.initializeHeaderDrag();for(var l=[].slice.call(i.querySelectorAll("tr.e-columnheader")),h=0,u=l;h<u.length;h++){var m=[].slice.call(u[h].getElementsByClassName("e-grouptopleftcell"));m.length&&m[m.length-1].classList.add("e-lastgrouptopleftcell")}t||this.parent.notify(So,{rows:this.rows,args:{isFrozen:t}}),this.parent.enableColumnVirtualization&&ge(n,Kn)&&this.parent.notify(So,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&iu(l,!0)}},r.prototype.toggleStackClass=function(t){this.parent.columns.some(function(n){return!f(n.columns)})?t.classList.add("e-stackedheader"):t.classList.remove("e-stackedheader")},r.prototype.appendContent=function(t){this.getPanel().querySelector("."+Ls).appendChild(t)},r.prototype.getCellCnt=function(t,e){if(t.columns)for(var i=0,n=t.columns.length;i<n;i++)e=this.getCellCnt(t.columns[i],e);else t.visible&&e++;return e},r.prototype.initializeHeaderDrag=function(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new wp(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))},r.prototype.initializeHeaderDrop=function(){new w0(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},r.prototype.renderCustomToolbar=function(){var t=this,e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){for(var i=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),n=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<o;a++){var l=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=1===o?this.parent.allowSorting?"sort":"filter":1===a?"sort":"filter",u=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),p=e.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});u.appendChild(p),new Is({cssClass:this.parent.cssClass?this.parent.cssClass:""}).appendTo(u),u.onclick=function(y){y.target.classList.contains("e-ressort-btn")||y.target.classList.contains("e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},l.appendChild(u),s.appendChild(l)}n.appendChild(s),i.appendChild(n),e.element.insertBefore(i,this.parent.element.querySelector("."+qs))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")},r.prototype.updateCustomResponsiveToolbar=function(t){var e=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===t.module&&(e?$e(e):this.renderCustomToolbar())},r}(),eh=function(){function r(t,e){this.localizer=e.getService("localization"),this.formatter=e.getService("valueFormatter"),this.parent=t,this.element=this.parent.createElement("TD",{className:Ji,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("CheckBoxLabel")}})}return r.prototype.getGui=function(){return""},r.prototype.format=function(t,e,i){return f(t.format)||("number"===t.type&&isNaN(parseInt(e,10))&&(e=null),e=this.formatter.toView(e,t.getFormatter())),f(e)?"":e.toString()},r.prototype.evaluate=function(t,e,i,n,s,o){var a,l;if(e.column.template){var h=this.parent.isReact&&"string"!=typeof e.column.template,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,p=["index"],m=dV({},i,((a={})[KX]=s,a.column=e.column,a)),y=this.parent.element.id+e.column.uid,C="isStringTemplate";if(h||u){var S={index:n[p[0]]};e.column.getColumnTemplate()(de(S,m),this.parent,"columnTemplate",y,this.parent[C],null,t),this.parent.renderTemplates()}else l=e.column.getColumnTemplate()(de({index:n[p[0]]},m),this.parent,"template",y,this.parent[C],void 0,void 0,this.parent.root);return!h&&!u&&la(t,l),this.parent.notify("template-result",{template:l}),l=null,t.setAttribute("aria-label",t.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+e.column.headerText),!1}return!0},r.prototype.invokeFormatter=function(t,e,i){return f(t.formatter)||(e=function OCe(r,t){return r.prototype&&t in r.prototype}(t.formatter,"getValue")?(new(0,t.formatter)).getValue(t,i):"function"==typeof t.formatter?t.formatter(t,i):t.formatter.getValue(t,i)),e},r.prototype.render=function(t,e,i,n,s){return this.refreshCell(t,e,i,s)},r.prototype.refreshTD=function(t,e,i,n){var s="Batch"===this.parent.editSettings.mode&&t.classList.contains("e-editedbatchcell");if(this.parent.isReact){t.innerHTML="";var o=t.cellIndex,a=t.parentElement;$e(t);var l=this.refreshCell(e,i,n,s);this.cloneAttributes(l,t),a.cells.length!==o-1?a.insertBefore(l,a.cells[o]):a.appendChild(l)}else{var h=this.refreshCell(e,i,n,s);t.innerHTML="",t.setAttribute("aria-label",h.getAttribute("aria-label"));for(var p=0,m=[].slice.call(h.childNodes);p<m.length;p++)t.appendChild(m[p])}},r.prototype.cloneAttributes=function(t,e){for(var s,i=e.attributes,n=i.length;n--;)t.setAttribute((s=i[n]).name,s.value)},r.prototype.refreshCell=function(t,e,i,n){var s,l,o=this.element.cloneNode(),a=t.column;t.isForeignKey&&(l=t.foreignKeyData[0]||((s={})[a.foreignKeyValue]=a.format?null:"",s));var h=this.getGui(),u=t.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,e,a);if(("date"===a.type||"datetime"===a.type)&&!f(u)&&(u=new Date(u)),h=(u=this.format(a,u,e)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var p="true"!==u&&"false"!==u?null:"true"===u?"True":"False";h=p?this.localizer.getConstant(p):h}var m=this.invokeFormatter(a,u,e);if(h=f(a.formatter)?h:f(m)?"":m.toString(),o.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+t.column.headerText),this.evaluate(o,t,e,i,l,n)&&"checkbox"!==a.type)this.appendHtml(o,h,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add(Ew),o.setAttribute("aria-label",this.localizer.getConstant("CheckBoxLabel"));var y=fh(this.parent.createElement,!1,{checked:u=!!this.parent.selectionSettings.persistSelection&&"true"===u,label:" "});this.parent.cssClass&&B([y],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+t.rowID,y.insertBefore(this.rowChkBox.cloneNode(),y.firstChild),o.appendChild(y)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0),this.setAttributes(o,t,i),"boolean"===a.type&&a.displayAsCheckBox){var C=isNaN(parseInt(u.toString(),10))?"true"===u:parseInt(u.toString(),10)>0;y=fh(this.parent.createElement,!1,{checked:C,label:" "}),o.innerHTML="",o.classList.add("e-gridchkbox-cell"),y.classList.add("e-checkbox-disabled"),this.parent.cssClass&&B([y],[this.parent.cssClass]),o.appendChild(y),o.setAttribute("aria-label",C+this.localizer.getConstant("ColumnHeader")+t.column.headerText)}return o},r.prototype.appendHtml=function(t,e,i){return void 0===i&&(i="innerHTML"),t[i]=e,t},r.prototype.setAttributes=function(t,e,i){var n=e.column;this.buildAttributeFromCell(t,e,"checkbox"===n.type),Wp(t,i),Wp(t,e.attributes),n.customAttributes&&Wp(t,n.customAttributes),"Vertical"===this.parent.rowRenderingMode&&Wp(t,{"data-cell":n.headerText}),n.textAlign&&(t.style.textAlign=n.textAlign),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&t.classList.add("e-ellipsistooltip")},r.prototype.buildAttributeFromCell=function(t,e,i){var n={},o=[];e.colSpan&&(n.colSpan=e.colSpan),e.rowSpan&&(n.rowSpan=e.rowSpan),e.isTemplate&&o.push("e-templatecell"),e.isSelected&&(o.push.apply(o,["e-selectionbackground","e-active"]),i&&t.querySelector(".e-frame").classList.add("e-check")),e.isColumnSelected&&o.push.apply(o,["e-columnselection"]),e.cellType===Bt.Header?(n["data-colindex"]=e.colIndex,n[bJ]=e.colIndex+1):f(e.index)||(n["data-colindex"]=e.index,n[bJ]=e.index+1),e.visible||o.push("e-hide"),n.class=o,Wp(t,n)},r.prototype.getValue=function(t,e,i){return i.valueAccessor(t,e,i)},r}(),k_=function(){function r(){}return r.prototype.setOptions=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)xw(t,Tw[i[n]],e[i[n]])},r.prototype.setExpand=function(t,e){xw(t,Tw.expand,e)},r.prototype.setSort=function(t,e){xw(t,Tw.sort,e,"boolean"==typeof e)},r.prototype.setBusy=function(t,e){xw(t,Tw.busy,e),xw(t,Tw.invalid,null,!0)},r.prototype.setGrabbed=function(t,e,i){xw(t,Tw.grabbed,e,i)},r.prototype.setDropTarget=function(t,e){xw(t,Tw.dropeffect,"copy",!e)},r}();function xw(r,t,e,i){i&&r?r.removeAttribute(t):r&&r.setAttribute(t,e)}var Tw={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},Bbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),SJ=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),e.ariaService=new k_,e.hTxtEle=e.parent.createElement("span",{className:"e-headertext"}),e.sortEle=e.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),e.gui=e.parent.createElement("div"),e.chkAllBox=e.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":e.localizer.getConstant("CheckBoxLabel")}}),e}return Bbe(t,r),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,s,o)},t.prototype.refresh=function(e,i){this.clean(i);var n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,i,n)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,i,n){var h,s=e.column,o={},a="",l=this.getGui();if(qe(l,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),f(s.headerValueAccessor)||(h=this.getValue(s.headerText,s)),"checkbox"!==s.type){var u=s.headerText;f(h)||(u=h);var p=this.hTxtEle.cloneNode();p[s.getDomSetter()]=u,l.appendChild(p)}else{s.editType="booleanedit";var m=fh(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+s.uid,m.insertBefore(this.chkAllBox.cloneNode(),m.firstChild),this.parent.cssClass&&B([m],[this.parent.cssClass]),l.appendChild(m),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,e),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!f(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){qe(n,{"e-mappinguid":"e-flmenu-"+s.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var y=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==y.length)for(var C=this.parent.getForeignKeyColumns(),S=0;S<this.parent.columns.length;S++)for(var T=0;T<this.parent.filterSettings.columns.length;T++)if(this.parent.filterSettings.columns[T].field===s.field||C.length&&s.foreignKeyValue===this.parent.filterSettings.columns[T].field){n.classList.add("e-filtered"),y.push(s.field);break}i.appendChild(n.cloneNode())}e.className&&i.classList.add(e.className),s.customAttributes&&Wp(i,s.customAttributes),this.parent.allowSorting&&s.allowSorting&&(o.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&s.allowGrouping||this.parent.allowReordering&&s.allowReordering)&&(o.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(s,i);var R,P=this.parent,O=P.getColumnIndexByField(s.field);if(!f(s.headerTemplate)){var N=P.element.id+s.uid+"headerTemplate",z="isStringTemplate",U=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact){var Te={index:O};i.firstElementChild.innerHTML="",s.getHeaderTemplate()(de(Te,U),P,"headerTemplate",N,this.parent[z],null,i.firstElementChild),this.parent.renderTemplates()}else R=s.getHeaderTemplate()(de({index:O},U),P,"headerTemplate",N,this.parent[z],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",la(i.firstElementChild,R)}if(this.ariaService.setOptions(i,o),!f(s.headerTextAlign)||!f(s.textAlign)){var Oe=s.headerTextAlign||s.textAlign;l.style.textAlign=Oe,"Right"===Oe||"Left"===Oe?i.classList.add("Right"===Oe?"e-rightalign":"e-leftalign"):"Center"===Oe&&i.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&i.classList.add("e-ellipsistooltip"),a&&i.setAttribute("aria-description",a),i.setAttribute("aria-rowspan",(f(e.rowSpan)?1:e.rowSpan).toString()),i.setAttribute("aria-colspan","1"),this.parent.trigger(wX,{cell:e,node:i}),i},t.prototype.getValue=function(e,i){return i.headerValueAccessor(e,i)},t.prototype.extendPrepareHeader=function(e,i){if(this.parent.showColumnMenu&&e.showColumnMenu&&!f(e.field)){var n=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(var o=0;o<this.parent.columns.length;o++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[a].field===e.field){n.classList.add("e-filtered"),s.push(e.field);break}i.classList.add("e-fltr-icon"),i.appendChild(n)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},t.prototype.appendHtml=function(e,i){return e.appendChild(i),e},t}(eh),Vbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),EJ=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),e}return Vbe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),a=e.column;if(s.appendChild(o),f(a.headerTemplate)?this.appendHtml(o,a.headerText,a.getDomSetter()):la(o,a.getHeaderTemplate()(a,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===a.clipMode||!a.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===a.clipMode||!a.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),f(e.column.textAlign)||(o.style.textAlign=e.column.textAlign),e.column.customAttributes&&Wp(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(l)}return e.className&&s.classList.add(e.className),this.parent.trigger(wX,{cell:e,node:s}),s},t}(eh),Hbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lU=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-indentcell"}),e}return Hbe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return Wp(n,e.attributes),n},t}(eh),xJ=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zbe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cellUid=0,e.element=e.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:e.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),e}return xJ(t,r),t.prototype.render=function(e,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var o,a,l,n=this.element.cloneNode(),s=this.parent;i.headerText=e.column.headerText,e.isForeignKey&&(a=this.format(e.column,e.column.valueAccessor("foreignKey",i,e.column)));for(var h=e.isForeignKey?a:e.column.enableGroupByFormat?i.key:this.format(e.column,e.column.valueAccessor("key",i,e.column)),u=0;u<s.aggregates.length;u++)for(var p=0;p<s.aggregates[u].columns.length;p++)if(s.getVisibleColumns()[0].field===s.aggregates[u].columns[p].field&&s.aggregates[u].columns[p].groupCaptionTemplate){l=s.aggregates[u].columns[p].groupCaptionTemplate.includes("$")?s.aggregates[u].columns[p].groupCaptionTemplate.split("$")[0]+i[s.getVisibleColumns()[0].field][s.aggregates[u].columns[p].type]+s.aggregates[u].columns[p].groupCaptionTemplate.split("}")[1]:s.aggregates[u].columns[p].groupCaptionTemplate;break}if(f(s.groupSettings.captionTemplate))n.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+h+(l?"   "+l:""):e.column.headerText+": "+h+" - "+i.count+" "+this.localizer.getConstant(i.count<2?"Item":"Items")+(l?"   "+l:"");else{var m=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate,y=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(m||y){var C=s.element.id+"captionTemplate";bl(s.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",C,null,null,n),this.parent.renderTemplates()}else o=this.parent.isVue?bl(s.groupSettings.captionTemplate)(i,this.parent):bl(s.groupSettings.captionTemplate)(i);!m&&!y&&la(n,o)}return n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-label",n.innerHTML+this.localizer.getConstant("GroupCaption")),n.setAttribute("title",n.innerHTML),n},t}(eh),jbe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-groupcaption"}),e}return xJ(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.innerHTML="&nbsp;",n.setAttribute("colspan",e.colSpan.toString()),n},t}(eh),qbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ube=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return qbe(t,r),t.prototype.render=function(e,i,n,s){var o=this.element.cloneNode();return o.setAttribute("ej-mappingname",i.field),o.setAttribute("ej-mappingvalue",i.key),o.setAttribute("aria-expanded",s?"true":"false"),o.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache?(e.cellType=Bt.Indent,o.className=s?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(o.className=s?"e-recordplusexpand":"e-recordpluscollapse",o.appendChild(this.parent.createElement("a",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:s?"expanded":"collapsed"}}))),o},t}(lU),Wbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gbe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-grouptopleftcell"}),e}return Wbe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),n},t}(eh),Kbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$be=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-detailheadercell"}),e}return Kbe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),n},t}(eh),Ybe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Zbe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),e}return Ybe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode();return n&&!f(n.class)?(s.className="",s.className=n.class,s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"javascript:void(0);",title:"expanded"}}))):s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:"collapsed"}})),s},t}(eh),Qbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Xbe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}}),e}return Qbe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),e.isSelected&&(n.classList.add("e-selectionbackground"),n.classList.add("e-active")),n},t}(eh),Jbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),eCe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-rowdragheader"}),e}return Jbe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(si("div",{className:"e-emptycell"})),n},t}(eh),tCe=function(){function r(t,e){this.emptyGrid=!1,this.counter=0,this.parent=t,this.locator=e,this.data=new XB(t,e),this.l10n=e.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return r.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(js.Header),this.contentRenderer=this.renderer.getRenderer(js.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},r.prototype.refresh=function(t){var e=this;void 0===t&&(t={requestType:"refresh"});var i=this.parent;i.notify(t.requestType+"-begin",t),i.trigger(or,t,function(n){if(void 0===n&&(n={requestType:"refresh"}),n.cancel)i.notify(VB,n);else{if("delete"===n.requestType&&i.allowPaging){var s=n.data.length,o=i.pageSettings.totalRecordsCount-s;!(i.getCurrentViewRecords().length-s)&&o&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===o&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:o,currentPage:Math.ceil(o/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=o)}"reorder"===n.requestType&&e.parent.dataSource&&"result"in e.parent.dataSource||("paging"===n.requestType||"columnstate"===n.requestType||"reorder"===n.requestType)&&e.parent.groupSettings.enableLazyLoading&&e.parent.groupSettings.columns.length&&e.parent.contentModule.getGroupCache()[e.parent.pageSettings.currentPage]?e.contentRenderer.refreshContentRows(n):e.refreshDataManager(n)}})},r.prototype.resetTemplates=function(){var t=this.parent,e=t.getColumns();if(t.detailTemplate){var i=t.element.id+"detailTemplate";fc[i]=[],pd(i)}t.groupSettings.captionTemplate&&pd(t.element.id+"captionTemplate"),t.rowTemplate&&pd(t.element.id+"rowTemplate"),t.toolbarTemplate&&pd(t.element.id+"toolbarTemplate"),t.pageSettings.template&&pd(t.element.id+"_template");for(var n=0;n<e.length;n++)e[n].template&&(fc[t.element.id+e[n].uid]=[],pd(t.element.id+e[n].uid)),e[n].headerTemplate&&pd(t.element.id+e[n].uid+"headerTemplate"),e[n].filterTemplate&&pd(t.element.id+e[n].uid+"filterTemplate");for(var s="guid",o=0;o<t.aggregates.length;o++)for(var a=0;a<t.aggregates[o].columns.length;a++)t.aggregates[o].columns[a].footerTemplate&&pd(t.element.id+t.aggregates[o].columns[a][s]+"footerTemplate"),t.aggregates[o].columns[a].groupFooterTemplate&&pd(t.element.id+t.aggregates[o].columns[a][s]+"groupFooterTemplate"),t.aggregates[o].columns[a].groupCaptionTemplate&&pd(t.element.id+t.aggregates[o].columns[a][s]+"groupCaptionTemplate")},r.prototype.refreshComplete=function(t){this.parent.trigger(Vi,t)},r.prototype.refreshDataManager=function(t){var e=this;void 0===t&&(t={});var i=this.parent,n="Shimmer"===i.loadingIndicator.indicatorType&&"virtualscroll"!==t.requestType&&"infiniteScroll"!==t.requestType||("virtualscroll"===t.requestType||"infiniteScroll"===t.requestType)&&i.enableVirtualMaskRow;"virtualscroll"!==t.requestType&&!t.isCaptionCollapse&&!n&&this.parent.showSpinner(),n&&i.showMaskRow("virtualscroll"===t.requestType?t.virtualInfo.sentinelInfo.axis:"infiniteScroll"===t.requestType?t.direction:void 0),this.parent.notify("reset-infinite-blocks",t),this.emptyGrid=!1;var s,o=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+ns),!0),o){var a=new Qa;s=this.getFData(a,t)}if(s=s?s.then(function(h){var u=e.data.generateQuery().requiresCount();if(e.emptyGrid){var p=new Qa;return p.resolve({result:[],count:0}),p.promise}return e.data.getData(t,u)}):this.data.getData(t,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!o||this.parent.searchSettings.key.length)){var l=new Qa;s=s.then(function(h){return e.parent.notify(BB,{dataManager:s,result:h,promise:l,action:t}),l.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(s=s.then(function(h){return e.validateGroupRecords(h)})),s.then(function(h){return e.dataManagerSuccess(h,t)}).catch(function(h){return e.dataManagerFailure(h,t)})},r.prototype.getFData=function(t,e){return this.parent.notify(BB,{isComplex:!0,promise:t,action:e}),t.promise},r.prototype.isNeedForeignAction=function(){var t=this.parent;return!!(t.allowFiltering&&t.filterSettings.columns.length||t.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},r.prototype.foreignKey=function(t){var e=this;return t.some(function(i){return!(!e.parent.filterSettings.columns.some(function(s){return i.uid===s.uid})&&!e.parent.searchSettings.key.length)})},r.prototype.sendBulkRequest=function(t){var e=this;t.requestType="batchsave";var i=this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original),n=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):i.then(function(s){e.data.getData(t,n).then(function(o){return e.dmSuccess(o,t)}).catch(function(o){return e.dmFailure(o,t)})}).catch(function(s){return e.dmFailure(s,t)})},r.prototype.dmSuccess=function(t,e){this.dataManagerSuccess(t,e)},r.prototype.dmFailure=function(t,e){this.dataManagerFailure(t,e)},r.prototype.renderEmptyRow=function(){this.emptyRow(!0)},r.prototype.emptyRow=function(t){var e=this.parent,i=this.contentRenderer.getTable().querySelector(rt);f(i)||$e(i),i=this.parent.createElement(rt,{attrs:{role:"rowgroup"}});var n=0;(e.detailTemplate||e.childGrid)&&++n;var s=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}});s.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(e.getVisibleColumns().length+n+e.groupSettings.columns.length).toString()}})),i.appendChild(s),this.contentRenderer.renderEmpty(i),t&&(this.parent.trigger(Jl,{}),this.parent.notify(Rd,{rows:[new qp({isDataRow:!0,cells:[new zu({isDataCell:!0,visible:!0})]})]}))},r.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},r.prototype.updateColumnType=function(t){for(var i,e=this.parent.getColumns(),n="customFormat",s="equalTo",o=t&&t.items?t.items[0]:t,a=this.locator.getService("valueFormatter"),l=0,h=e.length;l<h;l++){i=fs(e[l].field||"",o),f(e[l][n])||(e[l].format=e[l][n]),!f(e[l].validationRules)&&!f(e[l].validationRules[s])&&(e[l].validationRules[s][0]=this.parent.element.id+e[l].validationRules[s][0]),e[l].isForeignColumn()&&e[l].columnData&&(i=fs(e[l].foreignKeyValue||"",e[l].columnData[0])),f(i)?e[l].type=e[l].type||null:(this.isColTypeDef=!0,e[l].type||(e[l].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var u=new mw;e[l].format&&(e[l].format.skeleton||e[l].format.format&&"string"==typeof e[l].format.format)&&(e[l].setFormatter(u.getFormatFunction(de({},e[l].format))),e[l].setParser(u.getParserFunction(e[l].format))),"string"==typeof e[l].format?VJ(this.locator,e[l]):!e[l].format&&"number"===e[l].type&&e[l].setParser(a.getParserFunction({format:"n2"}))}},r.prototype.dataManagerSuccess=function(t,e){var i=this,n=this.parent;this.contentRenderer=this.renderer.getRenderer(js.Content),this.headerRenderer=this.renderer.getRenderer(js.Header),t.actionArgs=e;var s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!n.groupSettings.enableLazyLoading&&("delete"===e.requestType||"save"===e.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(n.sortSettings.columns.length||n.filterSettings.columns.length||this.parent.groupSettings.columns.length||n.searchSettings.key));n.trigger(MB,t,function(o){if(!o.cancel){o.result=f(o.result)?[]:o.result;var a=Object.keys(o.result).length;if(!i.parent.isDestroyed){if(!(n.getColumns().length||a||n.columns.length&&n.columns[0]instanceof Ch))return void n.hideSpinner();if(i.isInfiniteEnd(e)&&!a)return void i.parent.notify(GB,{e,result:t.result,count:t.count,agg:t.aggregates});if(i.parent.isEdit=!1,i.parent.notify("edit-reset",{}),i.parent.notify(Cw,{}),e&&"infiniteScroll"!==e.requestType&&i.parent.notify("commandColumnDestroy",{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=i.parent.currentViewData.slice(),n.currentViewData=o.result,n.notify("refresh-infinite-current-view-data",{args:e,data:o.result}),o.count&&!n.allowPaging&&(n.enableVirtualization||n.enableInfiniteScrolling)&&(n.totalDataRecordsCount=o.count),!a&&o.count&&n.allowPaging&&e&&"delete"!==e.requestType)return i.parent.groupSettings.enableLazyLoading&&("grouping"===e.requestType||"ungrouping"===e.requestType)&&i.parent.notify(yq,e),n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=o.count,"paging"!==e.requestType&&(n.pageSettings.currentPage=Math.ceil(o.count/n.pageSettings.pageSize)),void n.dataBind();if((!n.getColumns().length&&a||!i.isLayoutRendered)&&!ws(n)&&(n.removeMaskRow(),i.updatesOnInitialRender(o)),!i.isColTypeDef&&n.getCurrentViewRecords()&&i.updateColumnType(i.data.dataManager.dataSource.offline&&n.dataSource&&n.dataSource.length?n.dataSource[0]:n.getCurrentViewRecords()[0]),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(o.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!f(e)&&"infiniteScroll"!==e.requestType&&!e.isFrozen&&H_(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!f(e)&&"infiniteScroll"===e.requestType)&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(Ac,de({count:o.count,result:o.result,aggregates:o.aggregates},e)),(n.groupSettings.columns.length||e&&"ungrouping"===e.requestType)&&e&&"filtering"!==e.requestType&&i.headerRenderer.refreshUI(),a)ws(n)&&(e.scrollTop={top:i.contentRenderer.content.scrollTop}),s?i.parent.notify(GB,{e,result:t.result,count:t.count,agg:t.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(e):i.contentRenderer.refreshContentRows(e);else{if(e&&e.isCaptionCollapse)return;if(!n.getColumns().length)return n.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+ns),!1),n.removeMaskRow(),i.renderEmptyRow(),e){var h=(e.requestType||"").toLowerCase()+"-complete";i.parent.notify(h,e),"batchsave"===e.requestType&&(e.cancel=!1,e.rows=[],e.isFrozen=0!==i.parent.getFrozenColumns()&&!e.isFrozen,i.parent.trigger(Vi,e))}i.parent.hideSpinner()}i.parent.notify(Gm,{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in t&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},r.prototype.dataManagerFailure=function(t,e){this.ariaService.setOptions(this.parent.getContent().querySelector("."+ns),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(ST,{error:t}),this.parent.hideSpinner(),this.parent.removeMaskRow(),"save"!==e.requestType&&"delete"!==e.requestType&&"bulk-save"!==e.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:t}))},r.prototype.setRowCount=function(t){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:t?t.toString():"1"})},r.prototype.isInfiniteEnd=function(t){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===t.requestType},r.prototype.updatesOnInitialRender=function(t){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(t.result[0]),LT(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(bw,{})},r.prototype.iterateComplexColumns=function(t,e,i){for(var n=Object.keys(t),s=0;s<n.length;s++)("object"!=typeof t[n[s]]||!t[n[s]]||t[n[s]]instanceof Date?[]:Object.keys(t[n[s]])).length?this.iterateComplexColumns(t[n[s]],e+(n[s]+"."),i):(i[this.counter]=e+n[s],this.counter++)},r.prototype.buildColumns=function(t){var e=[],i={};this.iterateComplexColumns(t,"",i);for(var n=Object.keys(i).filter(function(a){return"BlazId"!==i[a]}).map(function(a){return i[a]}),s=0,o=n.length;s<o;s++)e[s]={field:n[s]},this.parent.enableColumnVirtualization&&(e[s].width=f(e[s].width)?200:e[s].width);this.parent.setProperties({columns:e},!0)},r.prototype.instantiateRenderer=function(){this.renderer.addRenderer(js.Header,new aU(this.parent,this.locator)),this.renderer.addRenderer(js.Content,new A_(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(Bt.Header,new SJ(this.parent,this.locator)),t.addCellRenderer(Bt.Data,new eh(this.parent,this.locator)),t.addCellRenderer(Bt.StackedHeader,new EJ(this.parent,this.locator)),t.addCellRenderer(Bt.Indent,new lU(this.parent,this.locator)),t.addCellRenderer(Bt.GroupCaption,new zbe(this.parent,this.locator)),t.addCellRenderer(Bt.GroupCaptionEmpty,new jbe(this.parent,this.locator)),t.addCellRenderer(Bt.Expand,new Ube(this.parent,this.locator)),t.addCellRenderer(Bt.HeaderIndent,new Gbe(this.parent,this.locator)),t.addCellRenderer(Bt.StackedHeader,new EJ(this.parent,this.locator)),t.addCellRenderer(Bt.DetailHeader,new $be(this.parent,this.locator)),t.addCellRenderer(Bt.RowDragHIcon,new eCe(this.parent,this.locator)),t.addCellRenderer(Bt.DetailExpand,new Zbe(this.parent,this.locator)),t.addCellRenderer(Bt.DetailFooterIntent,new lU(this.parent,this.locator)),t.addCellRenderer(Bt.RowDragIcon,new Xbe(this.parent,this.locator))},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(this.parent.on(jp,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(zo,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on(HX,this.sendBulkRequest,this),this.parent.on(GX,function(){t.emptyGrid=!0},this),this.parent.on(bw,this.dynamicColumnChange,this))},r.prototype.validateGroupRecords=function(t){var e=this,i=t.result.length-1;if(i<0)return Promise.resolve(t);var n=t.result[0],s=t.result[i],o=[],a=function(T){for(var R=[n,s],P=0;P<R.length;P++)o.push(new Mn("field","==",R[P].field).and(e.getPredicate("key","equal",R[P].key)));T.where(Mn.or(o))},l=new ni;a(l);var u=new Xe(t.result).executeLocal(l),p=this.data.generateQuery(!0),m=[];if(this.data.isRemote()){for(var y=[n,s],C=0;C<y.length;C++)m.push(this.getPredicate(y[C].field,"equal",y[C].key));p.where(Mn.or(m))}else a(p);var S=new Qa;return this.data.getData({},p).then(function(T){e.updateGroupInfo(u,T.result),S.resolve(t)}).catch(function(T){return S.reject(T)}),S.promise},r.prototype.getPredicate=function(t,e,i){return i instanceof Date?pb({field:t,operator:e,value:i}):new Mn(t,e,i)},r.prototype.updateGroupInfo=function(t,e){for(var i=new Xe(e),n=t,s=0;s<n.length;s++){var o=i.executeLocal((new ni).where(new Mn("field","==",n[s].field).and(this.getPredicate("key","equal",n[s].key))))[0];n[s].count=o.count;var a=n[s].items,l=o.items;a.GroupGuid&&(n[s].items=this.updateGroupInfo(n[s].items,o.items));for(var h=this.parent.aggregates,u=0;u<h.length;u++)for(var p=h[u],m=0;m<p.columns.length;m++)for(var y=p.columns[m].type instanceof Array?p.columns[m].type:[p.columns[m].type],C=0;C<y.length;C++){var S=p.columns[m].field+" - "+y[C].toLowerCase(),T=a.level?l.records:o.items,R=this.parent;if("Custom"===y[C]){var P=a.level?l:o,O=p.columns[m].customAggregate;"string"==typeof O&&(O=re(O,window)),n[s].aggregates[S]=O?O.call(R,P,p.columns[m]):""}else n[s].aggregates[S]=Ye.aggregates[y[C].toLowerCase()](T,p.columns[m].field)}}return t},r}(),iCe=function(){function r(){this.cellRenderMap={}}return r.prototype.addCellRenderer=function(t,e){t="string"==typeof t?t:Il(Bt,t),f(this.cellRenderMap[t])&&(this.cellRenderMap[t]=e)},r.prototype.getCellRenderer=function(t){if(t="string"==typeof t?t:Il(Bt,t),f(this.cellRenderMap[t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[t]},r}(),TJ=function(){function r(t,e){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.evtHandlers=[{event:KB,handler:this.closeCustomDialog},{event:$q,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],mo(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Vi,this.onActionCompleteFn)},r.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},r.prototype.renderCustomFilterDiv=function(){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),e=t.querySelector(".e-dlg-custom-header"),i=t.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",e.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var n=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),n.appendChild(this.customExcelFilterParent)},r.prototype.renderResponsiveContextMenu=function(t){if(this.action===Jn.isFilter){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),n=i.querySelector(".e-dlg-closeicon-btn"),s=i.querySelector(".e-dlg-custom-header");if(t.isOpen){e.firstChild.style.display="none",e.appendChild(t.target),n.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",s.innerHTML=t.header;var o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new Is({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),s.parentElement.insertBefore(o,s)}else this.backBtn&&!this.isCustomDlgRender&&(e.firstChild.style.display="",$e(this.backBtn.element),n.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),s.innerHTML=this.getHeaderTitle({action:Jn.isFilter},t.col))}},r.prototype.refreshCustomFilterClearBtn=function(t){this.filterClearBtn&&(this.isFiltered=t.isFiltered,this.filterClearBtn.element.style.display=t.isFiltered?"":"none")},r.prototype.refreshCustomFilterOkBtn=function(t){this.saveBtn&&(this.saveBtn.disabled=t.disabled)},r.prototype.renderResponsiveContent=function(t){var e=this,i=this.parent;if(t)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:t.uid+"-main-filter"}),this.filterParent;var n=i.getColumns();this.customColumnDiv=i.createElement("div",{className:"columndiv",styles:"width: 100%"});var s=i.createElement("div",{className:"e-ressortbutton-parent"}),o=[],a=this.action===Jn.isSort,l=this.action===Jn.isFilter;if(l)for(var h=0;h<i.filterSettings.columns.length;h++)o.push(i.filterSettings.columns[h].field);for(h=0;h<n.length;h++)if(!(!n[h].visible||!n[h].allowSorting&&a||!n[h].allowFiltering&&l)){var u=i.createElement("div",{className:"e-responsivecoldiv"});u.setAttribute("data-e-mappingname",n[h].field),u.setAttribute("data-e-mappinguid",n[h].uid);var p=i.createElement("span",{innerHTML:n[h].headerText,className:"e-res-header-text"});if(u.appendChild(p),this.customColumnDiv.appendChild(u),a){var y=this.getSortedFieldsAndDirections("field").indexOf(n[h].field),C=i.createElement("button",{id:i.element.id+n[h].field+"sortbutton"}),S=s.cloneNode();S.appendChild(C),u.appendChild(S),new Is({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(C);var R=void 0;f(this.parent.sortSettings.columns[y])||(R=this.parent.localeObj.getConstant("Ascending"===this.parent.sortSettings.columns[y].direction?"AscendingText":"DescendingText")),C.innerHTML=y>-1?R:this.parent.localeObj.getConstant("NoneText"),C.onclick=function(z){e.sortButtonClickHandler(z.target)}}if(l&&o.indexOf(n[h].field)>-1){var P=i.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),O=i.createElement("span",{className:"e-icons e-res-icon e-filterset"});O.setAttribute("colType",n[h].type),P.appendChild(O),u.appendChild(P)}}return A.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},r.prototype.getSortedFieldsAndDirections=function(t){for(var e=[],i=0;i<this.parent.sortSettings.columns.length;i++)e.push(this.parent.sortSettings.columns[i][t]);return e},r.prototype.sortButtonClickHandler=function(t){if(t){var i=ge(t,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(t));var n=t.textContent,s=n===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):n===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),o=s===this.parent.localeObj.getConstant("AscendingText")?"Ascending":s===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";t.innerHTML=s,this.setSortedCols(i,o)}},r.prototype.resetSortButtons=function(t){for(var e=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<e.length;i++)e[i]!==t&&(e[i].innerHTML="None")},r.prototype.setSortedCols=function(t,e){var n=this.getCurrentSortedFields().indexOf(t);this.parent.allowMultiSorting&&n>-1&&(this.sortedCols.splice(n,1),this.sortPredicate.splice(n,1)),this.isSortApplied=!0,"None"!==e&&(this.sortedCols.push(t),this.sortPredicate.push({field:t,direction:e}))},r.prototype.getCurrentSortedFields=function(){for(var t=[],e=0;e<this.sortedCols.length;e++)t.push(this.sortedCols[e]);return t},r.prototype.customFilterColumnClickHandler=function(t){if(this.action===Jn.isFilter){var e=this.parent,i=t.target;if("FilterBar"!==e.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){if((n=i.getAttribute("data-e-mappingname"))||(n=i.parentElement.getAttribute("data-e-mappingname")),n){var s=e.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=ge(i,"e-responsivecoldiv");if(o){var n=o.getAttribute("data-e-mappingname");("Menu"===(s=e.getColumnByField(n)).filter.type||!s.filter.type&&"Menu"===e.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(i)}}}},r.prototype.showResponsiveDialog=function(t){if(this.isCustomDialog&&this.action===Jn.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=t,this.renderResponsiveDialog(t),this.parent.enableAdaptiveUI&&t&&(this.parent.filterModule.setFilterModel(t),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(t,void 0))),this.action===Jn.isSort){var e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(IX,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},r.prototype.setTopToChildDialog=function(t){var e=t.querySelector(".e-dialog");if(e){var i=t.querySelector(".e-dlg-header-content").getBoundingClientRect().height;e.style.top=i+"px"}},r.prototype.renderCustomFilterDialog=function(t){var e=this.parent;if(this.action!==Jn.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.parent.createElement("div",{id:e.element.id+"customfilter",className:this.parent.cssClass?"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(t,!0);var n={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(IX,n),!n.cancel&&(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},r.prototype.getDialogOptions=function(t,e,i){var n=new Cd({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(t),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});return n.isStringTemplate=!0,e?(n.header=this.renderResponsiveHeader(t,void 0,!0),n.cssClass="e-customfilter"):(n.header=this.renderResponsiveHeader(t),n.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===Jn.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),n},r.prototype.renderResponsiveDialog=function(t){var e=this.parent;if(this.action!==Jn.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.action===Jn.isFilter?"filter":"sort",n=this.parent.createElement("div",{id:e.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(n),this.customResponsiveDlg=this.getDialogOptions(t,!1,i),this.customResponsiveDlg.appendTo(n)}},r.prototype.dialogCreated=function(){KJ(this.parent)},r.prototype.dialogOpen=function(){if(this.action===Jn.isSort&&this.parent.allowMultiSorting)for(var t=0;t<this.parent.sortSettings.columns.length;t++)this.sortedCols.push(this.parent.sortSettings.columns[t].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[t].field,direction:this.parent.sortSettings.columns[t].direction})},r.prototype.beforeDialogClose=function(t){this.isDialogClose=t.element&&!t.element.querySelector(".e-xl-customfilterdiv")&&t.element.classList.contains("e-resfilterdiv"),this.action===Jn.isFilter?t.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):t.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===Jn.isSort&&this.closeCustomDialog(),this.parent.off($B,this.keyHandler)},r.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var t=0;t<this.sortPredicate.length;t++)this.parent.sortColumn(this.sortPredicate[t].field,this.sortPredicate[t].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()},r.prototype.getHeaderTitle=function(t,e){var n,i=this.parent;return this.action===Jn.isEdit?n=i.localeObj.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.action===Jn.isAdd?n=i.localeObj.getConstant("AddFormTitle"):this.action===Jn.isFilter?n=e?e.headerText||e.field:i.localeObj.getConstant("FilterButton"):this.action===Jn.isSort&&(n=i.localeObj.getConstant("Sort")),n},r.prototype.getDialogName=function(t){var e;return t===Jn.isAdd||t===Jn.isEdit?e="dialogEdit_wrapper_title":t===Jn.isFilter&&(e="responsive_filter_dialog_wrapper"),e},r.prototype.getButtonText=function(t){var e;return t===Jn.isAdd||t===Jn.isEdit?e="Save":(t===Jn.isFilter||this.action===Jn.isSort)&&(e="OKButton"),e},r.prototype.renderResponsiveHeader=function(t,e,i){var n=this,s=this.parent;s.on($B,this.keyHandler,this);var o=s.element.id+this.getDialogName(this.action),a=s.createElement("div",{className:"e-res-custom-element"}),l=s.createElement("div",{className:"e-dlg-custom-header",id:o});l.innerHTML=this.getHeaderTitle(e,t),a.appendChild(l);var h=s.createElement("button");i||(this.saveBtn=new Is({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(S){n.dialogHdrBtnClickHandler()});var u=this.action===Jn.isSort,p=this.action===Jn.isFilter;if(p||u){var m=u?"sort":"filter",y=s.createElement("button");if(this.filterClearBtn=new Is({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+m+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+m+"-clear-btn"}),p){var C=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});y.appendChild(C)}else y.innerHTML=s.localeObj.getConstant("Clear");a.appendChild(y),this.filterClearBtn.appendTo(y),y.onclick=function(S){ge(S.target,"e-customfilter")?(n.parent.filterModule.clearFiltering(),n.removeCustomDlgFilterEle()):p?n.filterClear():(n.resetSortButtons(),n.sortedCols=[],n.sortPredicate=[],n.isSortApplied=!0)},a.appendChild(y)}return i||a.appendChild(h),a},r.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},r.prototype.dialogHdrBtnClickHandler=function(){this.action===Jn.isEdit||this.action===Jn.isAdd?this.parent.endEdit():this.action===Jn.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===Jn.isSort&&this.sortColumn()},r.prototype.closeCustomDialog=function(){this.isCustomDlgRender?$e(this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv")):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())},r.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var t=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&t&&(this.customResponsiveDlg.destroy(),$e(t)),this.closeCustomFilter(),this.action===Jn.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},r.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var t=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&t&&(this.customFilterDlg.destroy(),$e(t))}this.isCustomDialog=!1,this.isDialogClose=!1},r.prototype.removeCustomDlgFilterEle=function(t){if(t)t.parentElement.classList.contains("e-filtersetdiv")?$e(t.parentElement):$e(t);else for(var e=this.customColumnDiv.children,i=0;i<e.length;i++)(t=e[i].querySelector(".e-filtersetdiv"))&&($e(t),i--)},r.prototype.keyHandler=function(t){13===t.keyCode&&(this.action===Jn.isFilter&&t.target.classList.contains("e-searchinput")||this.action===Jn.isEdit||this.action===Jn.isAdd)&&this.dialogHdrBtnClickHandler()},r.prototype.editComplate=function(t){("save"===t.requestType||"cancel"===t.requestType)&&this.parent.off($B,this.keyHandler)},r.prototype.removeEventListener=function(){this.customColumnDiv&&A.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),mo(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Vi,this.onActionCompleteFn)},r}(),nCe=function(){function r(){this.services={}}return r.prototype.register=function(t,e){f(this.services[t])&&(this.services[t]=e)},r.prototype.getService=function(t){if(f(this.services[t]))throw"The service "+t+" is not registered";return this.services[t]},r.prototype.registerAdaptiveService=function(t,e,i){e?(t.responsiveDialogRenderer=new TJ(t.parent,t.serviceLocator),t.responsiveDialogRenderer.action=i):t.responsiveDialogRenderer&&(t.responsiveDialogRenderer.removeEventListener(),t.responsiveDialogRenderer=void 0)},r}(),rCe=function(){function r(){this.rendererMap={}}return r.prototype.addRenderer=function(t,e){var i=Il(js,t);f(this.rendererMap[i])&&(this.rendererMap[i]=e)},r.prototype.getRenderer=function(t){var e=Il(js,t);if(f(this.rendererMap[e]))throw"The renderer "+e+" is not found";return this.rendererMap[e]},r}(),hU=function(){function r(t){this.parent=t}return r.prototype.setWidthToColumns=function(){var n,t=0,e=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var s=this.parent.groupSettings.columns.length;t<s;t++)this.parent.enableColumnVirtualization&&-1===e.indexOf(t)?i=!1:this.setColumnWidth(new Ch({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Ch({width:"30px"}),t),t++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new Ch({width:"30px"}),t),t++);for(var o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[a],i&&this.parent.enableColumnVirtualization?void 0:a+t);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new Ch({width:"30px"}),o.length),n=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(n)},r.prototype.setMinwidthBycalculation=function(t){var e=0,i=this.parent.getColumns().filter(function(u){return f(u.width)||"auto"===u.width});if(i.length){e=f(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-t:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-t;for(var n=0,s=0,o=i;s<o.length;s++){var a=o[s];n+=f(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l=0;l<i.length;l++){0===t&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==i.length-1&&this.setUndefinedColumnWidth(i);var h=this.parent.getColumnIndexByField(i[l].field)+this.parent.getIndentCount();0!==t&&e<n?this.setWidth(i[l].minWidth,h):0!==t&&e>n&&this.setWidth("",h,!0)}}},r.prototype.setUndefinedColumnWidth=function(t){for(var e=0;e<t.length;e++)e!==t.length-1&&(t[e].width=200,this.setWidth(200,this.parent.getColumnIndexByField(t[e].field)))},r.prototype.setColumnWidth=function(t,e,i){if(!(this.parent.getColumns().length<1)){var n=f(e)?this.parent.getNormalizedColumnIndex(t.uid):e,s=this.getWidth(t),o=this.getTableWidth(this.parent.getColumns());null!==s&&(this.setWidth(s,n),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(d_,{index:n,width:s,column:t,module:i}))}},r.prototype.setWidth=function(t,e,i){this.parent.groupSettings.columns.length>e&&bU(this.parent)&&(t=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var l,s=this.parent.getHeaderTable(),o=this.parent.getContentTable(),a=ut(t),h=this.parent.getFrozenColumns(),u=this.parent.isRowDragable();h=h&&u?h+1:h;var N,p=this.parent.getHeaderContent().querySelector("."+Kn),m=this.parent.getContent().querySelector("."+Fn),y=this.parent.getFrozenLeftColumnsCount(),C=this.parent.getFrozenRightColumnsCount(),S=this.parent.getMovableColumnsCount(),T=0!==y||0!==C;if(h&&e>=h){if(!p||!p.querySelector(xi))return;l=p.querySelector(xi+":not(.e-masked-colgroup)").children[e-h]}else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&p.scrollLeft>0)l=(R=p.querySelector(xi)).children[R.children.length-1-e];else if(T){var P=void 0;if(y&&!C)P=(e=u?e-1:e)<y?s:p;else if(!y&&C)P=e>=S?s:p;else if(y&&C){e=u?e-1:e;var O=this.parent.getFrozenRightHeader();P=e<y?s:e<y+S?p:O}if(!(l=this.getColumnLevelFrozenColgroup(e,y,S,P)))return}else l=s.querySelector(xi).children[e];if(l&&!i?l.style.width=a:l&&i&&(l.style.width=""),h&&e>=h)N=this.parent.getContent().querySelector("."+Fn).querySelector(xi+":not(.e-masked-colgroup)").children[e-h];else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&m.scrollLeft>0){var R;N=(R=this.parent.getContent().querySelector("."+Fn).querySelector(xi)).children[R.children.length-1-e]}else if(T){if(P=void 0,y&&!C&&(P=e<y?o:m),!y&&C&&(P=e>=S?o:m),y&&C){var z=this.parent.getContent().querySelector(".e-frozen-right-content");P=e<y?o:e<y+S?m:z}N=this.getColumnLevelFrozenColgroup(e,y,S,P)}else N=o.querySelector(xi).children[e];if(N&&!i?N.style.width=a:N&&i&&(N.style.width=""),!this.parent.enableColumnVirtualization){for(var U=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),ae=[],me=0;me<U.length;me++)if(ge(U[me],"e-grid").id===this.parent.element.id)for(var Te=0;Te<U[me].querySelector("colgroup").children.length;Te++)ae.push(U[me].querySelector("colgroup").children[Te]);U.length&&ae.length&&(ae[e].style.width=a)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()},r.prototype.getColumnLevelFrozenColgroup=function(t,e,i,n){if(!n||!n.querySelector(xi))return null;var s=this.parent.getColumns(),o=this.parent.isRowDragable(),a=this.parent.getFrozenMode(),h=[].slice.call(n.querySelector(xi+":not(.e-masked-colgroup)").children);return"Right"===a&&o&&t===i+this.parent.getFrozenRightColumnsCount()?h[h.length-1]:o&&-1===t?h[0]:"Left"===s[t].freeze?h[o?t+1:t]:"Right"===s[t].freeze?h[t-(e+i)]:h[t-e]},r.prototype.refreshFrozenScrollbar=function(){var t={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",t),!t.cancel){var e=cb(),i=this.parent.element.querySelector(".e-frozenscrollbar"),n=this.parent.element.querySelector(".e-movablescrollbar"),s=this.parent.getContent().querySelector("."+ju),o=this.parent.getContent().querySelector("."+Fn),a=s.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(a+=e),i.style.width=a+"px",this.parent.getFrozenMode()===Qt){var h=this.parent.element.querySelector(".e-frozen-right-scrollbar"),u=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(u+=e),h.style.width=u+"px"}else{if(this.parent.enableColumnVirtualization){var p=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");p&&(l=p.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=e)}n.firstElementChild.style.width=l+"px"}},r.prototype.getSiblingsHeight=function(t){return this.getHeightFromDirection(t,"previous")+this.getHeightFromDirection(t,"next")},r.prototype.getHeightFromDirection=function(t,e){for(var i=t[e+"ElementSibling"],n=0,s=[qs,lb,"e-groupdroparea","e-gridpager","e-toolbar"];i;)s.some(function(o){return i.classList.contains(o)})&&(n+=i.offsetHeight),i=i[e+"ElementSibling"];return n},r.prototype.isWidthUndefined=function(){var t=this.parent.getColumns().filter(function(e){return f(e.width)&&f(e.minWidth)}).length;return this.parent.getColumns().length===t},r.prototype.getWidth=function(t){if(f(t.width)&&this.parent.allowResizing&&f(t.minWidth)&&!this.isWidthUndefined()&&(t.width=200),this.parent.isFrozenGrid()&&f(t.width)&&(t.getFreezeTableName()===Jr||t.getFreezeTableName()===tr)&&(t.width=200),!t.width)return null;var e=parseInt(t.width.toString(),10);return t.minWidth&&e<parseInt(t.minWidth.toString(),10)?t.minWidth:t.maxWidth&&e>parseInt(t.maxWidth.toString(),10)?t.maxWidth:t.width},r.prototype.getTableWidth=function(t){for(var e=0,i=0,n=t;i<n.length;i++){var s=n[i],o=this.getWidth(s);"auto"===s.width&&(o=0),!1!==s.visible&&null!==o&&(e+=parseInt(o.toString(),10))}return e},r.prototype.calcMovableOrFreezeColWidth=function(t){var e=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenRightColumnsCount();return"movable"===t?(s&&e.splice(i+n,e.length),i&&e.splice(0,i)):"freeze-left"===t?e.splice(i,e.length):"freeze-right"===t&&e.splice(0,i+n),ut(this.getTableWidth(e))},r.prototype.setWidthToFrozenRightTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-right");t=this.isAutoResize()?"100%":t;var e=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+er+":not(.e-masked-table)"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+er+":not(.e-masked-table)");e.style.width=t,i.style.width=t},r.prototype.setWidthToFrozenLeftTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-left");t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t},r.prototype.setWidthToMovableTable=function(){var t="",e=this.parent.getColumns().filter(function(o){return f(o.width)}).length>=1,i=this.parent.getColumns().filter(function(o){return"auto"===o.width}).length>=1,n=this.parent.getHeaderContent().querySelector("."+Kn),s=this.parent.getContent().querySelector("."+Fn);"number"!=typeof this.parent.width||e||i?!e&&!i&&(t=this.calcMovableOrFreezeColWidth("movable")):t=ut(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),t=this.isAutoResize()?"100%":t,n.firstElementChild&&(n.firstElementChild.classList.contains("e-masked-table")?n.childNodes[1].style.width=t:n.firstElementChild.style.width=t),s.firstElementChild.classList.contains("e-masked-table")?s.childNodes[1].style.width=t:s.firstElementChild.style.width=t},r.prototype.setWidthToFrozenEditTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=t},r.prototype.setWidthToMovableEditTable=function(){var t=this.calcMovableOrFreezeColWidth("movable");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=t},r.prototype.setWidthToTable=function(){var t=ut(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Ch({width:"30px"})),t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t);var e=this.parent.element.querySelector(".e-table.e-inline-edit");e&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):e&&(e.style.width=t)},r.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},r}(),R_=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),sCe=function(){function r(t){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=t,this.rowModelGen=new Md(this.parent),this.addEventListener()}return r.prototype.focusCheck=function(t){var e=t.target;this.focusByClick=!0,this.skipFocus=e.classList.contains("e-grid")},r.prototype.onFocus=function(t){if(!(this.parent.isDestroyed||X.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&t&&t.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[Up].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new qp({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(!t||t.target!==this.parent.element)&&(this.focus(t),this.skipFocus=!1)}},r.prototype.passiveFocus=function(t){this.parent.isDestroyed||t.target&&t.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,B([this.currentInfo.element],["e-focused","e-focus"]))},r.prototype.onBlur=function(t){(this.parent.isEdit||t&&(!t.relatedTarget||j(t.relatedTarget,".e-grid"))&&(!this.parent.element.classList.contains("e-childgrid")||this.parent.element.matches(":focus-within")))&&(!f(t.relatedTarget)||0!==parseInt(t.target.getAttribute("data-colindex"),10)||0!==parseInt(t.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex())},r.prototype.setFirstFocusableTabIndex=function(){var t=this.parent;if(t.element.tabIndex=-1,t.allowGrouping&&t.groupSettings.showDropArea){var e=t.groupModule,i=e.getFocusableGroupedItems();i.length>0?(e.element.tabIndex=-1,i[0].tabIndex=0):e.element.tabIndex=0}else if(t.toolbar||t.toolbarTemplate){var n=t.toolbarModule.element,s=n.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");s.length>0?(n.tabIndex=-1,s[0].querySelector(".e-btn,.e-input").tabIndex=0):n.tabIndex=0}else if(t.getColumns().length&&(t.getHeaderContent().querySelector(".e-headercell").tabIndex=0,!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Qt?this.setActive(!1):this.setActive(!1,!0),!f(this.active))){var a=[0,0];0===this.active.matrix.matrix[a[0]][a[1]]&&(a=Xf(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}},r.prototype.setLastContentCellTabIndex=function(){var t=this.parent.getContentTable();t.rows[t.rows.length-1].lastElementChild.tabIndex=0},r.prototype.onClick=function(t,e){if(!ge(t.target,"e-filterbarcell")||!ge(t.target,"e-multiselect")&&!t.target.classList.contains("e-input-group-icon")){var i=!f(j(t.target,"."+Ps)),n=!f(j(t.target,"."+qs));i=i&&n?!i:i;var s=!f(j(t.target,"."+ju))||!f(j(t.target,"."+_d)),o=!1;if(this.parent.getFrozenMode()===Qt&&(o=!f(j(t.target,".e-frozen-right-content"))||!f(j(t.target,".e-frozen-right-header")),s=s&&!o),!(!i&&f(j(t.target,"."+qs))||t.target.classList.contains(ns))&&f(j(t.target,".e-unboundcell"))){if(this.setActive(i,s,o),!i&&f(j(t.target,"."+qs)))return void this.clearOutline();var a={cancel:!1,byKey:!1,byClick:!f(t.target),clickArgs:t};if(this.parent.notify(DT,a),!a.cancel&&!j(t.target,".e-inline-edit")&&(this.setActive(i,s,o),this.getContent())){if(!1===this.getContent().onClick(t,e))return;this.parent.isFrozenGrid()&&n&&t.target===this.parent.getHeaderContent().firstChild&&-1===this.active.matrix.current[0]&&this.active.matrix.current[1]===this.active.matrix.columns&&(this.active.matrix.current=[0,0]),this.focus()}}}},r.prototype.onKeyPress=function(t){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(this.parent.pagerModule.pagerObj.element,[]);if(this.parent.childGrid&&this.allowToPaging(t)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===t.action&&i.length&&i[0]===t.target)return this.setActive(!0),0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Xf(this.active.matrix.matrix,n,!1)),this.active.matrix.current=n,t.preventDefault(),void this.focus(t);if("tab"!==t.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!i.length||i[i.length-1]!==t.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==t.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(t);var s=ge(this.parent.element,"e-detailcell");W([this.parent.element],["e-focus"]),W([s],["e-focused"]),s.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===t.keyCode||t.shiftKey&&9===t.keyCode))return t.preventDefault(),void this.getFocusedElement().focus();if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===t.keyCode)return t.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(!this.skipOn(t)){if(t.target&&ge(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()){var l=[].slice.call(this.parent.getContentTable().rows);t.target===l[l.length-1].lastElementChild&&(this.setActive(!0),this.setLastContentCellActive())}if("shiftTab"===t.action&&t.target&&(t.target===this.parent.element||ge(t.target,"e-toolbar")||ge(t.target,"e-groupdroparea"))){if(t.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t));if(ge(t.target,"e-groupdroparea"))return void(this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus()));if(ge(t.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var p=(u=this.parent.groupModule).getFocusableGroupedItems();t.preventDefault(),p.length>0?p[p.length-1].focus():u.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}}var m=!1;if("tab"===t.action&&t.target&&(t.target===this.parent.element||ge(t.target,"e-toolbar")||ge(t.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(t.target===this.parent.element||t.target.classList.contains("e-groupdroparea"))){var u;if((p=(u=this.parent.groupModule).getFocusableGroupedItems()).length>0)return t.preventDefault(),void p[0].focus();if(!t.target.classList.contains("e-groupdroparea"))return t.preventDefault(),void u.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(t.target===this.parent.element||ge(t.target,"e-groupdroparea")||t.target.classList.contains("e-toolbar"))){var y=this.parent.toolbarModule.element,C=y.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(C.length>0)return t.preventDefault(),void C[0].querySelector(".e-btn,.e-input").focus();if(!t.target.classList.contains("e-toolbar"))return t.preventDefault(),void y.focus()}(t.target===this.parent.element||ge(t.target,"e-toolbar")||ge(t.target,"e-groupdroparea"))&&(m=!0)}m&&(!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Qt?this.setActive(!(!this.parent.allowGrouping||this.parent.groupSettings.columns.length!==this.parent.columns.length)):this.setActive(!1,!0),this.active.matrix.current=[0,-1]),this.activeKey=t.action;var S={cancel:!1,byKey:!0,byClick:!1,keyArgs:t};if(this.parent.notify(DT,S),!S.cancel){var T=this.getContent().matrix.current;this.currentInfo.outline=!0;var R=this.getContent().jump(t.action,T);this.swap=R,R.swap&&(this.setActive(!R.toHeader,R.toFrozen,R.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(T,R,this.active,t.action),this.prevIndexes={}),this.setActiveByKey(t.action,this.getContent());var P=!this.content.lastIdxCell&&this.getContent().onKeyPress(t);if(t.target&&ge(t.target,"e-gridheader"))if(this.parent.isFrozenGrid()){if("shiftTab"===t.action&&T.toString()===this.active.matrix.current.toString()&&!R.swap)return void this.focusOutFromHeader(t)}else{if("tab"===t.action&&T.toString()===this.active.matrix.current.toString()){var n,O=Xf(this.active.matrix.matrix,this.active.matrix.current,!0);0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Xf(this.active.matrix.matrix,n,!1)),this.active.matrix.current.toString()===n.toString()?(P=!0,this.setActive(!0),0===this.active.matrix.matrix[(N=[0,0])[0]][N[1]]&&(N=Xf(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=N):this.active.matrix.current.toString()!==O.toString()&&(this.active.matrix.current=O)}if("shiftTab"===t.action&&T.toString()===this.active.matrix.current.toString()){var z=Xf(this.active.matrix.matrix,this.active.matrix.current,!1);if(z.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(t);this.active.matrix.current.toString()!==z.toString()&&!P&&(P=!0,this.active.matrix.current=z)}}if(t.target&&ge(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()&&"shiftTab"===t.action&&T.toString()===this.active.matrix.current.toString()){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(t);var N;0===this.active.matrix.matrix[(N=[0,0])[0]][N[1]]&&(N=Xf(this.active.matrix.matrix,[0,0],!0)),!P&&N.toString()===this.active.matrix.current.toString()&&(P=!0,this.setActive(!1),this.setLastContentCellActive())}if(!1===P){if(this.clearIndicator(),"shiftTab"===t.action&&T.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(t)&&T.toString()!==[0,0].toString()){if(t.preventDefault(),40===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t))}t.preventDefault(),this.focus(t)}}},r.prototype.setLastContentCellActive=function(){var t=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];0===this.active.matrix.matrix[t[0]][t[1]]&&(t=Xf(this.active.matrix.matrix,t,!1)),this.active.matrix.current=t},r.prototype.focusOutFromChildGrid=function(t){var e=ge(this.parent.element,"e-table"),i=ge(e,"e-grid").ej2_instances[0],n=ge(this.parent.element,"e-detailcell"),s=ge(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=[].slice.call(i.getContentTable().rows),a=o.map(function(m){return m.getAttribute("data-uid")}).indexOf(s);if(!("tab"===t.action&&a>=o.length-1)){var l;if(W([this.parent.element],["e-focus"]),W([n],["e-focused"]),n.tabIndex=-1,t.preventDefault(),i.focusModule.removeFocus(),"shiftTab"===t.action){for(var u=o[a-1].cells,p=u.length-1;p>=0;p--)if(!(l=u[p]).classList.contains("e-hide")){i.focusModule.active.matrix.current=[a-1,p];break}}else l=o[a+1].cells[0],i.focusModule.active.matrix.current=[a+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,B([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},r.prototype.focusOutFromHeader=function(t){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var e=this.parent.toolbarModule.element,i=e.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");return t.preventDefault(),void(i.length>0?i[i.length-1].querySelector(".e-btn,.e-input").focus():e.focus())}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var n=this.parent.groupModule,s=n.getFocusableGroupedItems();return t.preventDefault(),void(s.length>0?s[s.length-1].focus():n.element.focus())}this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus())},r.prototype.allowToPaging=function(t){return!("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40!==t.keyCode)},r.prototype.skipOn=function(t){var e=t.target;if(!e)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(t.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(ge(t.target,"e-groupheadercell")&&!(t.target===i[0]&&"shiftTab"===t.action||t.target===i[i.length-1]&&"tab"===t.action))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var s=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(ge(t.target,"e-toolbar-item")&&!(s.length>0&&(ge(t.target,"e-toolbar-item")===s[0]&&"shiftTab"===t.action||ge(t.target,"e-toolbar-item")===s[s.length-1]&&"tab"===t.action)))return!0}var o=j(e,"th")&&!j(e,"th").tabIndex;!t.target.classList.contains("e-filterbaroperator")||13!==t.keyCode&&27!==t.keyCode||j(t.target,".e-filterbarcell").querySelector("input").focus(),o&&null!==j(document.activeElement,".e-filterbarcell")&&this.removeFocus();var l=null!==j(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&l){var h=this.active.matrix,u=h.current;l=h.matrix[u[0]].lastIndexOf(1)!==u[1]}return"delete"===t.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(t.action)>-1)||l&&this.parent.enableHeaderFocus||l&&"tab"!==t.action&&"shiftTab"!==t.action||null!==j(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(t.action)>-1||null===j(e,"."+Ps)&&null===j(e,"."+qs)&&!(t.target===this.parent.element||ge(t.target,"e-toolbar")||ge(t.target,"e-groupdroparea"))||"space"===t.action&&!e.classList.contains(Ew)&&null===j(e,"."+Ew)&&null===j(e,".e-headerchkcelldiv")||null!==j(e,".e-filter-popup")},r.prototype.focusVirtualElement=function(t){var e=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(Km,i);var n=this.actions.some(function(o){return o===e.activeKey}),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;i.isAdd||Object.keys(i.virtualData).length||n||i.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,n&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",t)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},r.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},r.prototype.getContent=function(){return this.active||this.content},r.prototype.setActive=function(t,e,i){this.active=t?e?this.fContent:i?this.frContent:this.content:e?this.fHeader:i?this.frHeader:this.header},r.prototype.setFocusedElement=function(t,e){var i=this;this.currentInfo.elementToFocus=t,setTimeout(function(){f(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(e):i.currentInfo.elementToFocus.focus())},0)},r.prototype.focus=function(t){this.parent.notify("virtaul-cell-focus",t),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)},r.prototype.removeFocus=function(t){!this.currentInfo.element||(W([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},r.prototype.addOutline=function(){var t=this.getContent().getFocusInfo();t.element&&(B([t.element],["e-focused"]),B([t.elementToFocus],["e-focus"]))},r.prototype.focusHeader=function(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.focusContent=function(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.resetFocus=function(){var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.focus()},r.prototype.addFocus=function(t,e){if(this.currentInfo=t,this.currentInfo.outline=t.outline&&!f(e),this.isInfiniteScroll&&(this.currentInfo.outline=!0),t.element){var i=t.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&B([t.element],["e-focused"]),B([t.elementToFocus],["e-focus"]),t.element.tabIndex=0,i||this.setFocusedElement(t.elementToFocus,e),this.parent.notify(PB,{element:t.elementToFocus,parent:t.element,indexes:this.getContent().matrix.current,byKey:!f(e),byClick:f(e),keyArgs:e,isJump:this.swap.swap,container:this.getContent().getInfo(e),outline:!f(e),swapInfo:this.swap});var n=this.getContent().matrix.current,o=n[1];this.prevIndexes={rowIndex:n[0],cellIndex:o},this.focusedColumnUid=this.parent.getColumnByIndex(o).uid,this.focusByClick=!1}}},r.prototype.refreshMatrix=function(t){var e=this;return function(i){t&&i.args&&i.args.isFrozen&&!e.fContent?e.fContent=new aCe(e.parent):t&&!e.frContent&&i.args&&i.args.renderFrozenRightContent?e.frContent=new hCe(e.parent):t&&!e.content&&(e.content=new iV(e.parent)),!t&&i.args&&i.args.isFrozen&&!e.fHeader?e.fHeader=new lCe(e.parent):!t&&i.args&&i.args.renderFrozenRightContent&&!e.frHeader?e.frHeader=new uCe(e.parent):!t&&!e.header&&(e.header=new uU(e.parent));var n=t?i.args&&i.args.isFrozen?e.fContent:i.args&&i.args.renderFrozenRightContent?e.frContent:e.content:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header,s=t?i.rows.slice(e.parent.frozenRows):i.rows,o=t?i.rows.slice(0,e.parent.frozenRows):i.rows;e.parent.isCollapseStateEnabled()&&t&&(s=s.filter(function(O){return!1!==O.visible}));var C,a=!f(e.parent.rowTemplate),l=n.matrix.generate(o,n.selector,a);if("batchAdd"===i.name&&e.parent.isFrozenGrid()){var u=e.parent.getMovableRowsObject().map(function(O){return O.clone()}),p=s.map(function(O){return O.clone()});if(e.fContent.matrix.generate(p,e.fContent.selector,a),e.content.matrix.generate(u,e.content.selector,a),e.parent.getFrozenMode()===Qt){var y=e.parent.getFrozenRightRowsObject().map(function(O){return O.clone()});e.frContent.matrix.generate(y,e.frContent.selector,a)}}else n.matrix.generate(s,n.selector,a);if(e.parent.isFrozenGrid()&&i.args&&"sorting"===i.args.requestType||n.generateRows(o,{matrix:l,handlerInstance:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header}),!X.isDevice&&i&&i.args&&(!e.focusByClick&&"paging"===i.args.requestType&&!e.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(e.skipFocus=!1,e.parent.element.focus()),"grouping"===i.args.requestType&&(e.skipFocus=!0)),i&&i.args&&"virtualscroll"===i.args.requestType)if(e.currentInfo.uid){if(i.rows.some(function(O,N){return C=N,O.uid===e.currentInfo.uid})&&(e.content.matrix.current[0]=C,e.content.matrix.current[1]=e.parent.getColumnIndexByUid(e.focusedColumnUid)||0,T=e.getContent().getFocusInfo().elementToFocus)){var R=T.getBoundingClientRect(),P=e.parent.element.getBoundingClientRect();R.top>=0&&R.left>=0&&R.right<=Math.min(P.right,window.innerWidth||document.documentElement.clientWidth)&&R.bottom<=Math.min(P.bottom,window.innerHeight||document.documentElement.clientHeight)&&(e.isVirtualScroll=!0,e.focus())}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var T;(T=e.parent.element.querySelector("#"+i.args.focusElement.id))&&T.focus()}i&&i.args&&"infiniteScroll"===i.args.requestType&&(e.isInfiniteScroll=!0)}},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(A.add(this.parent.element,"mousedown",this.focusCheck,this),A.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(e){return t.passiveFocus(e)},!0),A.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Cs,handler:this.onKeyPress},{event:nl,handler:this.onClick},{event:qr,handler:this.refMatrix},{event:b_,handler:this.refMatrix},{event:Sw,handler:this.refMatrix},{event:So,handler:this.refreshMatrix()},{event:fJ,handler:this.restoreFocus},{event:ww,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:yw,handler:this.refMatrix},{event:Zf,handler:this.refMatrix},{event:_B,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:Rd,handler:this.refMatrix},{event:PB,handler:this.internalCellFocus}],mo(this.parent,this.evtHandlers,!0,this))},r.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(A.remove(this.parent.element,"mousedown",this.focusCheck),A.remove(this.parent.element,"focus",this.onFocus),A.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),mo(this.parent,this.evtHandlers,!1))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.restoreFocus=function(){var t=this.parent.groupModule;this.parent.allowGrouping&&t&&t.groupSortFocus?t.groupSortFocus=!1:this.addFocus(this.getContent().getFocusInfo())},r.prototype.restoreFocusWithAction=function(t){if(!this.parent.enableInfiniteScrolling){var e=this.getContent().matrix,i=e.current;switch(t.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||f(e.matrix[i[0]])?"grouping"===t.requestType?i[1]+1:i[1]-1:e.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i;var n=this.parent.groupModule;if(this.parent.allowGrouping&&n&&n.groupCancelFocus){var s=n.getFocusableGroupedItems();return s.length?s[0].parentElement.getAttribute("ej-mappingname")===t.columnName?s[3].focus():s[0].focus():n.element.focus(),void(n.groupCancelFocus=!1)}this.addFocus(this.getContent().getFocusInfo())}},r.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},r.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||W([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},r.prototype.getPrevIndexes=function(){var t=this.forget;return this.forget=!1,t||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},r.prototype.forgetPrevious=function(){this.forget=!0},r.prototype.setActiveByKey=function(t,e){var i=this;if(this.parent.isFrozenGrid()||0!==this.parent.frozenRows){var n,s={home:function(){return{toHeader:!n.isContent,toFrozen:!0}},end:function(){return{toHeader:!n.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:i.parent.isFrozenGrid()}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(t in s){n=e.getInfo();var o=s[t]();this.setActive(!o.toHeader,o.toFrozen),this.getContent().matrix.current=e.matrix.current}}},r.prototype.internalCellFocus=function(t){if(t.byKey&&t.container.isContent&&"enter"===t.keyArgs.action&&(t.parent.classList.contains("e-detailcell")||t.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var e=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(e),this.currentInfo.skipAction=!0}},r}(),oCe=function(){function r(){this.matrix=[],this.current=[]}return r.prototype.set=function(t,e,i){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.columns)),this.matrix[t]=this.matrix[t]||[],this.matrix[t][e]=i?1:0},r.prototype.get=function(t,e,i,n,s){var o=e;if(t+i[0]<0)return[t,e];t=Math.max(0,Math.min(t+i[0],this.rows));var a=!0;if(f(this.matrix[t]))return null;if(e=Math.max(0,Math.min(e+i[1],this.matrix[t].length-1)),o+i[1]>this.matrix[t].length-1&&s(t,e,n))return[t,o];var l=this.first(this.matrix[t],e,i,!0,n),h=re(t+"."+(e=null===l?o:l),this.matrix);if(t===this.rows&&("downArrow"===n||"enter"===n)&&(i[0]=-1),null===l){for(var u=0;u<this.rows;u++)if(this.matrix[u].some(function(p){return 1===p})){a=!1;break}if(a)return[t=this.current.length?this.current[0]:0,e]}return this.inValid(h)||!s(t,e,n)?this.get(t,o,i,n,s):[t,e]},r.prototype.first=function(t,e,i,n,s){return(e<0||e===t.length)&&this.inValid(t[e])&&"upArrow"!==s&&"downArrow"!==s||!t.some(function(o){return 1===o})?null:this.inValid(t[e])?this.first(t,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(s)?n?0:++e:e+i[1],i,!1,s):e},r.prototype.select=function(t,e){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.matrix[t].length-1)),this.current=[t,e]},r.prototype.generate=function(t,e,i){this.rows=t.length-1,this.matrix=[];for(var n=0;n<t.length;n++){var s=t[n].cells.filter(function(l){return!0!==l.isSpanned});this.columns=Math.max(s.length-1,0|this.columns);for(var o=0,a=0;a<s.length;a++)s[a].column&&s[a].column.columns?o=this.columnsCount(s[a].column.columns,o):o++,this.set(n,a,!1!==t[n].visible&&e(t[n],s[a],i));this.columns=Math.max(o-1,0|this.columns)}return this.matrix},r.prototype.columnsCount=function(t,e){for(var i=t,n=e,s=0;s<i.length;s++)i[s].columns?n=this.columnsCount(i[s].columns,n):n++;return n},r.prototype.inValid=function(t){return 0===t||void 0===t},r}(),iV=function(){function r(t){var e=this;this.matrix=new oCe,this.lastIdxCell=!1,this.parent=t,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){return{home:[e.matrix.current[0],-1,0,1],end:[e.matrix.current[0],e.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[e.matrix.rows,e.matrix.columns+1,0,-1]}[i]||null}}return r.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},r.prototype.onKeyPress=function(t){var i=this.getCurrentFromAction(t.action,this.keyActions[t.action],t.action in this.keyActions,t);if(i){if((["tab","shiftTab"].indexOf(t.action)>-1&&this.matrix.current||[]).toString()===i.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===t.keyCode||40===t.keyCode)){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&i.toString()===[0,1].toString())return!1;i=this.editNextRow(i[0],i[1],t.action)}this.matrix.select(i[0],i[1])}},r.prototype.editNextRow=function(t,e,i){var n=this.parent,s=n.editSettings.allowNextRowEdit&&(n.isEdit||n.isLastCellPrimaryKey),o=n.getColumnIndexByField(n.getVisibleColumns()[0].field),a=this.getTable().rows[t].cells[e];return"tab"===i&&s&&(t++,e=o+(this.getTable().rows[t].getElementsByClassName("e-indentcell").length+this.getTable().rows[t].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&s&&(t--,e=n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length-1].field)),a.classList.contains(Ji)||a.classList.contains("e-headercell")||a.classList.contains("e-groupcaption")||a.classList.contains("e-filterbarcell")?[t,e]:this.editNextRow(t,e,i)},r.prototype.getCurrentFromAction=function(t,e,i,n){if(void 0===e&&(e=[0,0]),!i&&!this.indexesByKey(t)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(n))return this.matrix.current;var s=this.indexesByKey(t)||this.matrix.current.concat(e),o=s[0],a=s[1],l=s[2],h=s[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===t)for(var u=o;u<this.matrix.matrix.length;u++){var p=this.getTable().rows[u+1];if(p&&p.cells[a]&&p.cells[a].classList.contains("e-rowcell"))return[u+1,a];if(u===this.matrix.matrix.length-1)return[o,a]}if("ctrlEnd"===t){var m=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];0===this.matrix.matrix[m[0]][m[1]]&&(m=Xf(this.matrix.matrix,m,!1)),o=m[0],a=m[1]+1}return this.matrix.get(o,a,[l,h],t,this.validator())},r.prototype.onClick=function(t,e){var i=t.target;if(this.target=i,i=(i=i.classList.contains(Ji)?i:j(i,"td"))||j(t.target,"td.e-detailrowcollapse")||j(t.target,"td.e-detailrowexpand"),!(i=(i=j(t.target,"td.e-detailcell")&&f(j(j(t.target,".e-grid"),"td.e-detailcell"))?null:i)&&j(i,"table").classList.contains(er)?i:null))return!1;var n=[i.parentElement.rowIndex,i.cellIndex],s=n[0],o=n[1],a=this.matrix.current,l=a[0],h=a[1],u=re(s+"."+o,this.matrix.matrix);if(this.matrix.inValid(u)||!e&&l===s&&h===o||!ge(t.target,Ji)&&!ge(t.target,"e-groupcaption")&&!ge(t.target,"e-recordpluscollapse")&&!ge(t.target,"e-recordplusexpand")&&!ge(t.target,"e-detailrowcollapse")&&!ge(t.target,"e-detailrowexpand")&&!ge(t.target,"e-templatecell"))return!1;this.matrix.select(s,o)},r.prototype.getFocusInfo=function(){var t={},e=this.matrix.current,i=e[0],n=void 0===i?0:i,s=e[1],o=void 0===s?0:s;return this.matrix.current=[n,o],t.element=f(this.getTable().rows[n])?null:this.getTable().rows[n].cells[o],t.element&&(t.elementToFocus=t.element.classList.contains("e-unboundcell")||t.element.classList.contains("e-detailcell")?t.element:this.getFocusable(t.element),t.elementToFocus=t.element.classList.contains("e-detailcell")&&t.element.querySelector(".e-childgrid")?t.element.querySelector(".e-childgrid"):t.elementToFocus,t.outline=!0,t.uid=t.element.parentElement.getAttribute("data-uid")),t},r.prototype.getFocusable=function(t){var e='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!f(j(t,".e-templatecell"));this.parent.isEdit&&(e='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var n=[].slice.call(t.querySelectorAll(e));return n.length?i&&n.length>1?this.target?this.target:t:n[0]:t},r.prototype.selector=function(t,e,i){var n=[Bt.Expand,Bt.GroupCaption,Bt.CaptionSummary,Bt.GroupSummary];return(t.isDataRow&&e.visible&&(e.isDataCell||e.isTemplate)||t.isDataRow&&e.cellType===Bt.DetailExpand&&f(e.visible)||!t.isDataRow&&n.indexOf(e.cellType)>-1&&!!(e.cellType!==Bt.GroupSummary&&e.cellType!==Bt.CaptionSummary||e.isDataCell&&e.visible)||e.column&&e.visible&&"checkbox"===e.column.type||e.cellType===Bt.CommandColumn||t.isDataRow&&i)&&!("delete"===t.edit&&t.isDirty)},r.prototype.nextRowFocusValidate=function(t){for(var e=t,i=t,n=this.matrix.rows;i<=n;i++){if(-1!==this.matrix.matrix[t].indexOf(1))return t;t+=1}return this.lastIdxCell=!0,e},r.prototype.previousRowFocusValidate=function(t){for(var e=t,i=t;i>=0;i--){if(-1!==this.matrix.matrix[t].indexOf(1))return t;if((t-=1)<0)return this.lastIdxCell=!0,e}return e},r.prototype.jump=function(t,e){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===t||"shiftTab"===t)&&0===e[1]||e[0]<this.matrix.matrix.length-1&&"tab"===t&&"Left"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1),n=("rightArrow"===t||"tab"===t)&&e[1]===this.matrix.columns||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].indexOf(1),s=this.parent.getFrozenMode()===Qt&&n;"Right"===this.parent.getFrozenMode()&&(i=n),this.lastIdxCell=!1;var o=0!==this.parent.frozenRows&&"shiftEnter"===t,a=("upArrow"===t||o)&&0===e[0]||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1);!this.parent.isFrozenGrid()&&"tab"===t&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==e[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),!this.parent.isFrozenGrid()&&"shiftTab"===t&&0!==e[0]&&this.matrix.matrix[e[0]].indexOf(1)===e[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[e[0]].length);var l=!1,h=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&h.classList.contains(bn)&&(l=parseInt(h.getAttribute(Ii),10)>0),"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:!l&&(("upArrow"===t||o)&&0===e[0]||i||s),toHeader:a,toFrozen:i,toFrozenRight:s}},r.prototype.getNextCurrent=function(t,e,i,n){void 0===t&&(t=[]);var s=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Qt?(("leftArrow"===n||"shiftTab"===n)&&(s[0]=t[0],s[1]=this.matrix.matrix[s[0]].length),this.parent.getFrozenMode()===Qt&&("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),"Right"===this.parent.getFrozenMode()&&"tab"===n&&(s[0]=t[0]+1,s[1]=-1)):("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),("downArrow"===n||"enter"===n)&&(s[0]=-1,s[1]=t[1]),"shiftTab"===n&&"Left"===this.parent.getFrozenMode()&&(s[0]=t[0]-1,s[1]=this.matrix.matrix[s[0]].length),s},r.prototype.generateRows=function(t,e){var i,n=e.matrix,s=e.handlerInstance,o=s.matrix.matrix.length,a=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?o+1:o;s.matrix.matrix=s.matrix.matrix.slice(0,a),s.matrix.rows=a,(i=s.matrix.matrix).push.apply(i,n),s.matrix.rows+=n.length},r.prototype.getInfo=function(t){var e=this.getFocusInfo(),i=this.matrix.current,n=i[0],s=i[1],o=e.element.classList.contains(Ji),a=o||t&&"enter"!==t.action&&(e.element.classList.contains("e-detailrowcollapse")||e.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(e.element.parentElement.getAttribute(Ii),10),n),Math.min(parseInt(e.element.getAttribute(Us),10),s)],h=l[0],u=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&o&&(h=this.parent.getDataRows().indexOf(e.element.parentElement)),{isContent:!0,isDataCell:o,indexes:[h,u],isSelectable:a}},r.prototype.validator=function(){var t=this.getTable();return function(e,i,n){if(!f(t.rows[e])){var s=void 0;i=t.querySelector(".e-emptyrow")?0:i;var o=0!==(s=t.rows[e].cells[0].classList.contains("e-editcell")?t.rows[e].cells[0].querySelectorAll("td")[i]:t.rows[e].cells[i]).getBoundingClientRect().width;if("enter"===n||"shiftEnter"===n)return o&&s.classList.contains(Ji);if(("shiftUp"===n||"shiftDown"===n)&&s.classList.contains(Ji))return o;if("shiftUp"!==n&&"shiftDown"!==n)return o}return!1}},r.prototype.shouldFocusChange=function(t){var e=this.matrix.current,i=e[0],n=void 0===i?-1:i,s=e[1],o=void 0===s?-1:s;if(n<0||o<0)return!0;var a=re(n+".cells."+o,this.getTable().rows);return!a||"enter"!==t.action&&"shiftEnter"!==t.action||a.classList.contains(Ji)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell")},r.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},r}(),uU=function(r){function t(e){return r.call(this,e)||this}return R_(t,r),t.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},t.prototype.onClick=function(e){var i=e.target;if(this.target=i,!(i=i.classList.contains("e-headercell")?i:j(i,"th"))&&0!==this.parent.frozenRows&&(i=e.target.classList.contains(Ji)?e.target:j(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(i){var n=[i.parentElement.rowIndex,i.cellIndex],a=re(n[0]+"."+n[1],this.matrix.matrix);if(this.matrix.inValid(a))return!1;this.matrix.select(i.parentElement.rowIndex,i.cellIndex)}},t.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,n=i[0],s=void 0===n?0:n,o=i[1],a=void 0===o?0:o;return e.element=this.getTable().rows[s].cells[a],f(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},t.prototype.selector=function(e,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!f(i.column.template))||"checkbox"===i.column.type||i.cellType===Bt.StackedHeader},t.prototype.jump=function(e,i){var n=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||"Left"===this.parent.getFrozenMode()&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||i[0]>0&&"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=this.parent.getFrozenMode()===Qt&&s;"Right"===this.parent.getFrozenMode()&&(n=s);var l,h,a=0!==this.parent.frozenRows&&"enter"===e,u=n&&!("Left"===this.parent.getFrozenMode()&&"tab"===e&&i[0]===this.matrix.matrix.length-1)||o,p=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,m=p&&!f(p[i[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(h=this.matrix.matrix.length-1===i[0],(l=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&(this.matrix.current[0]=h?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&h&&l&&(n=!0,u=!1)),"tab"===e&&"Left"===this.parent.getFrozenMode()&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:("downArrow"===e||a)&&i[0]===this.matrix.matrix.length-1||m&&(n||o)||"tab"===e&&h&&l,toHeader:u,toFrozen:n,toFrozenRight:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Qt?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),this.parent.getFrozenMode()===Qt&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"Left"===this.parent.getFrozenMode()&&"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),"Right"===this.parent.getFrozenMode()&&"tab"===s&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.generateRows=function(e){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var n=e[0].cells,s=0,o="FixedHeaderFocus"===this.getHeaderType()&&"Right"!==this.parent.getFrozenMode()?Jr:"FixedHeaderFocus"===this.getHeaderType()||"FixedRightHeaderFocus"===this.getHeaderType()?tr:"movable",a=0;a<n.length;a++)n[a].column&&n[a].column.columns?s=this.checkFilterColumn(n[a].column.columns,i,s,o):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&n[a].column.freezeTable===o)&&(this.matrix.set(i,s,n[a].visible&&!1!==n[a].column.allowFiltering),s++)}},t.prototype.checkFilterColumn=function(e,i,n,s){for(var o=e,a=n,l=0;l<o.length;l++)o[l].columns?a=this.checkFilterColumn(o[l].columns,i,a,s):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&o[l].freezeTable===s)&&(this.matrix.set(i,a,o[l].visible&&!1!==o[l].allowFiltering),a++);return a},t.prototype.getInfo=function(e){return de(r.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(e){var i=this.matrix.current,n=i[0],s=i[1];if(n<0||s<0)return!0;var o=re(n+".cells."+s,this.getTable().rows);return!o||"enter"!==e.action&&"altDownArrow"!==e.action||!o.classList.contains("e-headercell")},t.prototype.getHeaderType=function(){return"HeaderFocus"},t}(iV),aCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return R_(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"shiftEnter"===e,s=("upArrow"===e||n)&&0===i[0]||"shiftTab"===e&&"Right"!==this.parent.getFrozenMode()&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=("upArrow"===e||n)&&0===i[0],a="shiftTab"===e&&this.parent.getFrozenMode()===Qt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return"Right"===this.parent.getFrozenMode()?{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozen:o}:("shiftTab"===e&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:s||("tab"===e||"rightArrow"===e)&&i[1]===this.matrix.columns||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1),toHeader:s,toFrozen:o,toFrozenRight:a})},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("tab"===s&&this.parent.enableHeaderFocus&&(o[0]=e[0],o[1]=-1),("leftArrow"===s||"shiftTab"===s)&&(o[0]=e[0],o[1]=n.matrix.columns+1)),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t}(iV),lCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return R_(t,r),t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,o=s&&!f(s[i[0]]);if("Right"===this.parent.getFrozenMode()){var a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||n||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||o&&a,h=("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h}}var u=i[0]>0&&"shiftTab"===e&&this.parent.getFrozenMode()===Qt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return{swap:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toFrozen:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.getHeaderType=function(){return"FixedHeaderFocus"},t}(uU),DJ=function(){function r(t){this.searchBox=t}return r.prototype.searchFocus=function(t){if(t.target.parentElement.classList.add("e-input-focus"),t.target.classList.contains("e-input")&&t.target.classList.contains("e-search")&&t.target.value){var e=t.target.parentElement.querySelector(".e-sicon");e.classList.add("e-clear-icon"),e.setAttribute("title","Clear"),e.style.cursor="pointer"}},r.prototype.searchBlur=function(t){var e=t.relatedTarget?t.relatedTarget:null;if(e&&e.classList.contains("e-sicon")?e.classList.contains("e-clear-icon")&&t.target.parentElement.classList.remove("e-input-focus"):t.target.parentElement.classList.remove("e-input-focus"),t.target.classList.contains("e-search")&&e&&!e.classList.contains("e-sicon e-clear-icon")&&!e.classList.contains("e-sicon")){var i=t.target.parentElement.querySelector(".e-sicon");i.classList.remove("e-clear-icon"),i.removeAttribute("title"),i.style.cursor="default"}},r.prototype.wireEvent=function(){this.searchBox&&(A.add(this.searchBox,"focus",this.searchFocus,this),A.add(this.searchBox,"blur",this.searchBlur,this))},r.prototype.unWireEvent=function(){this.searchBox&&(A.remove(this.searchBox,"focus",this.searchFocus),A.remove(this.searchBox,"blur",this.searchBlur))},r}(),hCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return R_(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")},t.prototype.jump=function(e,i){var s=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===i[0],o=this.parent.getFrozenMode()===Qt&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1);return{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozenRight:s,toFrozen:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t}(iV),uCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return R_(t,r),t.prototype.jump=function(e,i){var n=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=n&&!f(n[i[0]]),o=0!==this.parent.frozenRows&&"enter"===e,a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||s&&a,h="tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),u=("downArrow"===e||o)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t.prototype.getHeaderType=function(){return"FixedRightHeaderFocus"},t}(uU),cCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dw=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},dCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return cCe(t,r),Dw([D(12)],t.prototype,"pageSize",void 0),Dw([D(8)],t.prototype,"pageCount",void 0),Dw([D(1)],t.prototype,"currentPage",void 0),Dw([D()],t.prototype,"totalRecordsCount",void 0),Dw([D(!1)],t.prototype,"enableQueryString",void 0),Dw([D(!1)],t.prototype,"pageSizes",void 0),Dw([D(null)],t.prototype,"template",void 0),t}(Wi),pCe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),IJ=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},fCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return pCe(t,r),IJ([D("startsWith")],t.prototype,"operator",void 0),IJ([D(!1)],t.prototype,"ignoreAccent",void 0),t}(Wi),nV=function(){return nV=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},nV.apply(this,arguments)},AJ=function(){function r(t,e,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=t,this.selectionSettings=e,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return r.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},r.prototype.onActionBegin=function(t,e){this.parent.trigger(e,this.fDataUpdate(t))},r.prototype.fDataUpdate=function(t){if(!(this.isMultiSelection||f(t.cellIndex)&&f(t.rowIndex))){var e=this.getRowObj(f(t.rowIndex)?f(t.cellIndex)?this.currentIndex:t.cellIndex.rowIndex:t.rowIndex);t.foreignKeyData=e.foreignKeyData}return t},r.prototype.onActionComplete=function(t,e){this.parent.trigger(e,this.fDataUpdate(t)),this.isMultiSelection=!1},r.prototype.getModuleName=function(){return"selection"},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+qs)&&!t.querySelector("."+Ps)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),A.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),A.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},r.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},r.prototype.getSelectedMovableRow=function(t){var e=this.parent;return e.isFrozenGrid()&&this.parent.getContent().querySelector("."+Fn)?e.getMovableRowByIndex(t):null},r.prototype.getSelectedFrozenRightRow=function(t){var e=this.parent;return e.isFrozenGrid()&&e.getFrozenMode()===Qt&&e.getFrozenRightContent()?e.getFrozenRightRowByIndex(t):null},r.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent;if("Batch"===t.editSettings.mode&&t.editModule){var e=__(this.parent.getCurrentViewRecords());e="Bottom"===t.editSettings.newRowPosition?e.concat(this.parent.editModule.getBatchChanges()[Up]):this.parent.editModule.getBatchChanges()[Up].concat(e);for(var i=this.parent.editModule.getBatchChanges()[hb],n=this.parent.getPrimaryKeyFieldNames()[0],s=0;s<i.length;s++)for(var o=0;o<e.length;o++)if(i[s][n]===e[o][n]){e.splice(o,1);break}return e}return t.getCurrentViewRecords()},r.prototype.selectRow=function(t,e){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([t]);else{var i=this.parent,n=i.getRowByIndex(t),s=n&&i.getRowObjectFromUID(n.getAttribute("data-uid"));if(!(this.isPartialSelection&&s&&s.isDataRow)||s.isSelectable){var l,o=this.getSelectedMovableRow(t),a=this.getSelectedFrozenRightRow(t);if(i.enableVirtualization&&t>-1){var u={selectedIndex:t,isAvailable:!0};this.parent.notify("select-virtual-Row",u);var p=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(t):null;if(!n||!i.getRowObjectFromUID(n.getAttribute("data-uid"))&&!p)return void(u.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());l=p||i.getRowObjectFromUID(n.getAttribute("data-uid")).data}else l=this.getRowObj(t).data;if(this.isRowType()&&n&&!this.isEditing()){var y=n.hasAttribute("aria-selected");this.activeTarget(),e=e&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&t===this.selectedRowIndexes[0],this.isKeyAction=!1;var C,S="cancel";e?this.rowSelectingCallBack(C,e,t,l,!1,y,S)(C):(C={data:l,rowIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},C=this.addMovableArgs(C,o,a),this.parent.trigger(pq,this.fDataUpdate(C),this.rowSelectingCallBack(C,e,t,l,!1,y,S)))}}}},r.prototype.rowSelectingCallBack=function(t,e,i,n,s,o,a){var l=this;return function(h){f(h)||!0!==h[a]?(l.index=i,l.toggle=e,l.data=n,l.removed=s,o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode?(l.clearSelectedRow(i),l.selectRowCallBack()):!o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode&&l.selectRowCallBack(),"ResetOnRowClick"===l.selectionSettings.checkboxMode&&l.clearSelection(),(!l.selectionSettings.persistSelection||"ResetOnRowClick"===l.selectionSettings.checkboxMode||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())):l.disableInteracted()}},r.prototype.selectRowCallBack=function(){var e,t=this.parent,i=this.index,n=this.toggle,s=this.data,o=this.removed,a=t.getRowByIndex(i),l=this.getSelectedMovableRow(i),h=this.getSelectedFrozenRightRow(i);!n&&!o&&(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(a,i),this.selectMovableRow(l,h,i)),this.selectRowIndex(i)),n||(e={data:s,rowIndex:i,row:a,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},e=this.addMovableArgs(e,l,h),this.onActionComplete(e,ET)),this.isInteracted=!1,this.updateRowProps(i)},r.prototype.selectMovableRow=function(t,e,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(t,i),this.parent.getFrozenMode()===Qt&&e&&this.updateRowSelection(e,i))},r.prototype.addMovableArgs=function(t,e,i){if(this.parent.isFrozenGrid()){var n={mRow:e,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};this.parent.getFrozenMode()===Qt&&i&&(n.frozenRightRow=i,n.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),t=nV({},t,n)}return t},r.prototype.selectRowsByRange=function(t,e){this.selectRows(this.getCollectionFromIndexes(t,e)),this.selectRowIndex(e)},r.prototype.selectedDataUpdate=function(t,e,i,n,s){for(var o=0,a=n.length;o<a;o++){var l=this.parent.getDataRows()[n[o]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(n[o]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(t.push(h.data),i.push(l),e.push(h.foreignKeyData)):this.isPartialSelection&&s&&s.splice(s.indexOf(n[o]),1)}},r.prototype.selectRows=function(t){var e=this,i=this.parent,n=t.slice(),s=this.isSingleSel()?t[t.length-1]:t[0];this.isMultiSelection=!0;var o=[],a=[],l=this.getSelectedMovableRow(s),h=this.getSelectedFrozenRightRow(s),p=[];if(this.isRowType()&&!this.isEditing()){this.selectedDataUpdate(p,a,o,t,n),this.activeTarget();var m={cancel:!1,rowIndexes:n,row:o,rowIndex:s,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:p,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};m=this.addMovableArgs(m,l,h),this.parent.trigger(pq,this.fDataUpdate(m),function(y){if(f(y)||!0!==y.cancel){e.clearRow(),e.selectRowIndex(n.slice(-1)[0]);var C=function(P){if(e.updateRowSelection(i.getRowByIndex(P),P),i.isFrozenGrid()){var O=e.parent.getFrozenMode()===Qt?i.getFrozenRightRowByIndex(P):void 0;e.selectMovableRow(i.getMovableRowByIndex(P),O,P)}e.updateRowProps(s)};if(e.isSingleSel())C(s);else for(var S=0,T=n;S<T.length;S++)C(T[S]);y={rowIndexes:n,row:o,rowIndex:s,target:e.actualTarget,prevRow:i.getRows()[e.prevRowIndex],previousRowIndex:e.prevRowIndex,data:e.getSelectedRecords(),isInteracted:e.isInteracted,isHeaderCheckboxClicked:e.isHeaderCheckboxClicked,foreignKeyData:a},y=e.addMovableArgs(y,l,h),e.isRowSelected&&e.onActionComplete(y,ET),e.isInteracted=!1}else e.disableInteracted()})}},r.prototype.addRowsToSelection=function(t){var e=this.parent,n=this.target;this.isMultiSelection=!0;var s=[],o=[],a=[],l=e.getSelectedRowIndexes().concat(t),h=this.isSingleSel()?e.getRowByIndex(t[t.length-1]):e.getRowByIndex(t[0]),u=this.isSingleSel()?this.getSelectedMovableRow(t[t.length-1]):this.getSelectedMovableRow(t[0]),p=this.isSingleSel()?this.getSelectedFrozenRightRow(t[t.length-1]):this.getSelectedFrozenRightRow(t[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly){var m,y=this.parent.getColumns().filter(function(O){return"checkbox"===O.type});this.isMultiCtrlRequest&&!y.length&&this.selectedDataUpdate(a,o,s,l);for(var C=0,S=t;C<S.length;C++){var T=S[C],R=this.getRowObj(T),P=this.selectedRowIndexes.indexOf(T)>-1;if(!(this.isPartialSelection&&R&&R.isDataRow)||R.isSelectable){if(this.selectRowIndex(T),P&&(y.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(SX,[T],[R.data],[h],[R.foreignKeyData],n),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(T),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),u&&(this.selectedRecords.splice(this.selectedRecords.indexOf(u),1),u.removeAttribute("aria-selected"),this.addRemoveClassesForRow(u,!1,null,"e-selectionbackground","e-active")),p&&(this.selectedRecords.splice(this.selectedRecords.indexOf(p),1),p.removeAttribute("aria-selected"),this.addRemoveClassesForRow(p,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(kB,[T],[R.data],[h],[R.foreignKeyData],n,[u],void 0,[p]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),m={cancel:!1,data:a.length?a:R.data,rowIndex:T,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:R.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,p),this.parent.trigger(pq,this.fDataUpdate(m)),!f(m)&&!0===m.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,T),this.selectMovableRow(u,p,T)}if(P||(m={data:a.length?a:R.data,rowIndex:T,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:R.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,p),this.onActionComplete(m,ET)),this.isInteracted=!1,this.updateRowProps(T),this.isSingleSel())break}}}},r.prototype.getCollectionFromIndexes=function(t,e){for(var i=[],n=t<=e?{i:t,max:e}:{i:e,max:t},s=n.i,o=n.max;s<=o;s++)i.push(s);return t>e&&i.reverse(),i},r.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},r.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},r.prototype.clearSelectedRow=function(t){if(this.toggle){var e=this.parent.getRowByIndex(t);this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(e,!1),this.updateCheckBoxes(e),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(t),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(t)),1)}},r.prototype.updateRowProps=function(t){this.prevRowIndex=t,this.isRowSelected=this.selectedRowIndexes.length&&!0},r.prototype.getPkValue=function(t,e){return t&&_c(t)?fs(t,e):e[t]},r.prototype.updatePersistCollection=function(t,e){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!f(t)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var n=this.getRowObj(t),s=n.data?this.getPkValue(this.primaryKey,n.data):null;if(null===s)return;n.isSelected=e,e&&!this.isPartialSelection||this.isPartialSelection&&n.isSelectable&&n.isSelected?(this.selectedRowState[s]=e,delete this.unSelectedRowState[s],this.persistSelectedData.some(function(o){return i.getPkValue(i.primaryKey,o)===s})||this.persistSelectedData.push(n.data)):this.updatePersistDelete(s)}},r.prototype.updatePersistDelete=function(t,e){var n,i=this;delete this.selectedRowState[t],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[t]=!0),this.persistSelectedData.some(function(o,a){return n=a,i.getPkValue(i.primaryKey,o)===t})&&(this.persistSelectedData.splice(n,1),e&&this.parent.partialSelectedRecords.splice(n,1))},r.prototype.updateCheckBoxes=function(t,e,i){if(!f(t)){var n=t.querySelector(".e-checkselect");f(n)||(L_(n.nextElementSibling,e),kw(n,e),(f(this.checkedTarget)||!f(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},r.prototype.updateRowSelection=function(t,e){if(t){this.selectedRowIndexes.push(e);var i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(t),t.setAttribute("aria-selected","true"),this.updatePersistCollection(t,!0),this.updateCheckBoxes(t,!0),this.addRemoveClassesForRow(t,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var n=this.focus.getPrevIndexes().cellIndex?t.cells[this.focus.getPrevIndexes().cellIndex]:t.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(n=this.parent.contextMenuModule.cell),!n)return;this.focus.onClick({target:n},!0)}}},r.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=__(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!f(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var t=this.parent.element.querySelector(".e-gridpopup").querySelector("span");t.classList.contains("e-rowselect")&&t.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},r.prototype.clearRowSelection=function(){var t=this;if(this.isRowSelected){for(var e=this.parent,i=this.parent.getDataRows(),n=[],s=[],o=[],a=[],l=[],h=[],u=this.target,p=0,m=this.selectedRowIndexes.length;p<m;p++){var y="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[p]]:this.parent.getDataRows()[this.selectedRowIndexes[p]],C=this.getRowObj(y);if(C&&(n.push(C.data),s.push(y),l.push(this.selectedRowIndexes[p]),h.push(C.foreignKeyData)),e.isFrozenGrid()){var S=e.getMovableRows();if(S&&S.length&&o.push(S[this.selectedRowIndexes[p]]),e.getFrozenMode()===Qt){var T=e.getFrozenRightRows();T&&T.length&&a.push(T[this.selectedRowIndexes[p]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(SX,l,n,s,h,u,o,function(){if(t.isCancelDeSelect&&(t.isRowClicked||t.checkSelectAllClicked||t.isInteracted&&!t.parent.isPersistSelection)){if(t.parent.isPersistSelection)if("Intermediate"===t.getCheckAllStatus(t.parent.element.querySelector(".e-checkselectall")))for(var R=0;R<t.selectedRecords.length;R++)t.updatePersistCollection(t.selectedRecords[R],!0);else t.parent.checkAllRows="Check",t.updatePersistSelectedData(!0);t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}else{for(var P=[].slice.call(i.filter(function(ae){return ae.hasAttribute("aria-selected")})),O=0;O<P.length;O++)t.disableUI||(P[O].removeAttribute("aria-selected"),t.addRemoveClassesForRow(P[O],!1,!0,"e-selectionbackground","e-active")),t.isPrevRowSelection||t.updatePersistCollection(P[O],!1),t.updateCheckBoxes(P[O]);R=0;for(var N=t.selectedRowIndexes.length;R<N;R++){var z=t.getSelectedMovableRow(t.selectedRowIndexes[R]);z&&(t.disableUI||(z.removeAttribute("aria-selected"),t.addRemoveClassesForRow(z,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(z),t.isPrevRowSelection||t.updatePersistCollection(z,!1));var U=t.getSelectedFrozenRightRow(t.selectedRowIndexes[R]);U&&(t.disableUI||(U.removeAttribute("aria-selected"),t.addRemoveClassesForRow(U,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(U),t.isPrevRowSelection||t.updatePersistCollection(U,!1))}t.selectedRowIndexes=[],t.selectedRecords=[],t.isRowSelected=!1,t.selectRowIndex(-1),t.isPrevRowSelection=!1,t.rowDeselect(kB,l,n,s,h,u,o,void 0,a),t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}},a)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},r.prototype.rowDeselect=function(t,e,i,n,s,o,a,l,h){var u=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){var y={rowIndex:e[0],data:!this.selectionSettings.persistSelection||"Uncheck"!==this.parent.checkAllRows||1===e.length&&1===this.deSelectedData.length||"ResetOnRowClick"===this.selectionSettings.checkboxMode?i:this.deSelectedData,foreignKeyData:s,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===t&&delete y.cancel;var C="row",R="rowIndexes",P="data",O="foreignKeyData";y[C]=n,y.target=this.actualTarget,this.actualTarget&&!f(j(this.actualTarget,"thead"))||e.length>1?(y.rowIndex=e[0],y[R]=e):1===e.length&&(y[P]=y[P][0],y[C]=y[C][0],y[O]=y[O][0],this.isAddRowsToSelection&&(y[R]=e)),this.parent.trigger(t,this.parent.isFrozenGrid()?nV({},y,{mRow:a,frozenRightRow:h}):y,function(z){u.isCancelDeSelect=z.cancel,(!u.isCancelDeSelect||!u.isRowClicked&&!u.isInteracted&&!u.checkSelectAllClicked)&&(u.updatePersistCollection(n[0],!1),u.updateCheckBoxes(n[0],void 0,e[0]),a&&u.updateCheckBoxes(a[0],void 0,e[0]),h&&u.updateCheckBoxes(h[0],void 0,e[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()},r.prototype.getRowObj=function(t){return void 0===t&&(t=this.currentIndex),f(t)?{}:("number"==typeof t&&(t=this.parent.getRowByIndex(t)),t&&this.parent.getRowObjectFromUID(t.getAttribute("data-uid"))||{})},r.prototype.getSelectedMovableCell=function(t){var e=this.parent,i=e.getColumnByIndex(t.cellIndex);return e.isFrozenGrid()&&"movable"===i.getFreezeTableName()?e.getMovableCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex)):null},r.prototype.selectCell=function(t,e){if(this.isCellType()){var s,i=this.parent,n=this.getSelectedMovableCell(t);n||(n=i.getCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex))),this.currentIndex=t.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var a=n.classList.contains("e-cellselectionbackground");(e=e&&!Jt(this.prevCIdxs)&&t.rowIndex===this.prevCIdxs.rowIndex&&t.cellIndex===this.prevCIdxs.cellIndex&&a)?this.successCallBack(s,e,t,n,o)(s):((s={data:o,cellIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=n,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(c_,this.fDataUpdate(s),this.successCallBack(s,e,t,n,o)),this.cellselected=!0)}}},r.prototype.successCallBack=function(t,e,i,n,s){var o=this;return function(a){var h="currentCell";if((f(a)||!0!==a.cancel)&&(e||(a[h]=a[h]?a[h]:n),o.clearCell(),e||o.updateCellSelection(n,i.rowIndex,i.cellIndex),!e)){var u={data:s,cellIndex:i,currentCell:n,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};u.previousRowCellIndex=o.prevECIdxs,o.updateCellProps(i,i),o.onActionComplete(u,RB)}}},r.prototype.getCellIndex=function(t,e){return this.parent.getFrozenColumns()&&e>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(t,e):this.parent.getCellFromIndex(t,e)},r.prototype.selectCellsByRange=function(t,e){var i=this;if(this.isCellType()){var n=this.parent,s=this.getSelectedMovableCell(t),o=n.getFrozenColumns();s||(s=n.getCellFromIndex(t.rowIndex,t.cellIndex));var a,l,p,h=t,u=e=e||t;this.currentIndex=t.rowIndex;var y=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var C={data:y,cellIndex:t,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};C.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(c_,this.fDataUpdate(C),function(T){if(f(T)||!0!==T.cancel){if(i.clearCell(),t.rowIndex>e.rowIndex){var R=t;t=e,e=R}for(var P=t.rowIndex;P<=e.rowIndex;P++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(a=P===t.rowIndex?t.cellIndex:0,l=P===e.rowIndex?e.cellIndex:i.getLastColIndex(P)):(a=t.cellIndex,l=e.cellIndex),p=[];for(var O=a<l?a:l,N=a>l?a:l;O<=N;O++)(s=o?O<o?n.getCellFromIndex(P,O):n.getMovableCellFromIndex(P,O):n.getCellFromIndex(P,O))&&(p.push(O),i.updateCellSelection(s),i.addAttribute(s));i.selectedRowCellIndexes.push({rowIndex:P,cellIndexes:p})}var z={data:y,cellIndex:u,currentCell:n.getCellFromIndex(u.rowIndex,u.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0};z.previousRowCellIndex=i.prevECIdxs,i.isDragged||(i.onActionComplete(z,RB),i.cellselected=!0),i.updateCellProps(h,u)}})}}},r.prototype.selectCells=function(t){if(this.isCellType()){var e=this.parent,i=this.getSelectedMovableCell(t[0]),n=e.getFrozenColumns();i||(i=e.getCellFromIndex(t[0].rowIndex,t[0].cellIndexes[0])),this.currentIndex=t[0].rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var o={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,c_);for(var l=0,h=t.length;l<h;l++)for(var u=0,p=t[l].cellIndexes.length;u<p;u++)(i=n?t[l].cellIndexes[u]<n?e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getMovableCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:t[l].rowIndex,cellIndex:t[l].cellIndexes[u]}));this.updateCellProps({rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]},{rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]});var m={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};m.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(m,RB)}}},r.prototype.addCellsToSelection=function(t){if(this.isCellType()){var i,n,e=this.parent;this.currentIndex=t[0].rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex],a=e.getFrozenLeftCount(),l=e.getMovableColumnsCount();if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill();var u,h=e.getColumnByIndex(t[0].cellIndex);fb(this.parent,function(ae,me){u=me[t[0].rowIndex]},[h.getFreezeTableName()&&h.getFreezeTableName()!==Jr?[]:e.getRowsObject(),"movable"===h.getFreezeTableName()?e.getMovableRowsObject():[],h.getFreezeTableName()===tr?e.getFrozenRightRowsObject():[]]),e.groupSettings.columns.length>0&&(u=e.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var p=[],m=0,y=t;m<y.length;m++){for(var C=y[m],S=0,T=this.selectedRowCellIndexes.length;S<T;S++)if(this.selectedRowCellIndexes[S].rowIndex===C.rowIndex){n=S;break}(i=this.getSelectedMovableCell(C))||(i=e.getCellFromIndex(C.rowIndex,this.getColIndex(C.rowIndex,C.cellIndex)));var R="movable"===h.getFreezeTableName()?C.cellIndex-a:h.getFreezeTableName()===tr?C.cellIndex-(a+l):C.cellIndex;p.push(e.groupSettings.columns.length>0?u.cells[R+e.groupSettings.columns.length].foreignKeyData:u.cells[R].foreignKeyData);var P={cancel:!1,data:o,cellIndex:t[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?e.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},O="previousRowCellIndex";P[O]=this.prevECIdxs;var N=n>-1;if(N){var z=this.selectedRowCellIndexes[n].cellIndexes;z.indexOf(C.cellIndex)>-1?(this.cellDeselect(EX,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],p),z.splice(z.indexOf(C.cellIndex),1),0===z.length&&this.selectedRowCellIndexes.splice(n,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(xX,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],p)):(N=!1,this.onActionBegin(P,c_),this.addRowCellIndex({rowIndex:C.rowIndex,cellIndex:C.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(P,c_),!f(P)&&!0===P.cancel)return;this.updateCellSelection(i,C.rowIndex,C.cellIndex)}if(!N){var U={data:o,cellIndex:t[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};U[O]=this.prevECIdxs,this.onActionComplete(U,RB),this.cellselected=!0}this.updateCellProps(C,C)}}}},r.prototype.getColIndex=function(t,e){var i=this.parent.isFrozenGrid(),n=this.parent.getColumnByIndex(e),s=UJ(this.parent,n,t);if(s)for(var o=0;o<s.length;o++)if(parseInt(s[o].getAttribute(Us),10)===e)return i&&("movable"===n.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():n.getFreezeTableName()===tr&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1},r.prototype.getLastColIndex=function(t){var e=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[t].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[t].querySelectorAll("td.e-rowcell");return parseInt(e[e.length-1].getAttribute(Us),10)},r.prototype.clearCell=function(){this.clearCellSelection()},r.prototype.cellDeselect=function(t,e,i,n,s){n[0]&&n[0].classList.contains(Ew)&&this.updateCheckBoxes(j(n[0],"tr"));var a={cells:n,data:i,cellIndexes:e,foreignKeyData:s,cancel:!1};this.parent.trigger(t,a),this.isPreventCellSelect=a.cancel},r.prototype.updateCellSelection=function(t,e,i){f(e)||this.addRowCellIndex({rowIndex:e,cellIndex:i}),t.classList.add("e-cellselectionbackground"),t.classList.contains(Ew)&&this.updateCheckBoxes(j(t,"tr"),!0),this.addAttribute(t)},r.prototype.addAttribute=function(t){this.target=t,f(t)||(t.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:t},!0))},r.prototype.updateCellProps=function(t,e){this.prevCIdxs=t,this.prevECIdxs=e,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},r.prototype.addRowCellIndex=function(t){for(var e,i,n=0,s=this.selectedRowCellIndexes.length;n<s;n++)if(this.selectedRowCellIndexes[n].rowIndex===t.rowIndex){e=!0,i=n;break}e?this.selectedRowCellIndexes[i].cellIndexes.indexOf(t.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(t.cellIndex):this.selectedRowCellIndexes.push({rowIndex:t.rowIndex,cellIndexes:[t.cellIndex]})},r.prototype.clearCellSelection=function(){if(this.isCellSelected){var t=this.parent,e=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,n=[],s=[],o=[],a=this.getCurrentBatchRecordChanges(),l=t.isFrozenGrid();this.hideAutoFill();for(var h=0,u=i.length;h<u;h++){n.push(a[i[h].rowIndex]);for(var p=this.getRowObj(i[h].rowIndex),m=0,y=i[h].cellIndexes.length;m<y;m++)if(l){var C=t.getColumnByIndex(i[h].cellIndexes[m]);s.push(wU(this.parent,C,i[h].rowIndex,i[h].cellIndexes[m]))}else p.cells&&o.push(p.cells[i[h].cellIndexes[m]].foreignKeyData),s.push(t.getCellFromIndex(i[h].rowIndex,i[h].cellIndexes[m]))}if(this.cellDeselect(EX,i,n,s,o),!0===this.isPreventCellSelect)return;for(h=0,u=e.length;h<u;h++)e[h].classList.remove("e-cellselectionbackground"),e[h].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(xX,i,n,s,o)}},r.prototype.getSelectedCellsElement=function(){var i,t=this.parent,e=t.getDataRows();t.isFrozenGrid()&&(i=t.getMovableDataRows(),e=t.addMovableRows(e,i),t.getFrozenMode()===Qt&&(e=t.addMovableRows(e,t.getFrozenRightDataRows())));for(var n=[],s=0,o=e.length;s<o;s++)n=n.concat([].slice.call(e[s].getElementsByClassName("e-cellselectionbackground")));return n},r.prototype.mouseMoveHandler=function(t){t.preventDefault();var l,e=this.parent.element.getBoundingClientRect(),i=this.x,n=this.y,s=ub(t),o=s.x-e.left,a=s.y-e.top,h=j(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=j(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),i>o&&(l=o,o=i,i=l),n>a&&(l=a,a=n,n=l),this.element.style.left=i+"px",this.element.style.top=n+"px",this.element.style.width=o-i+"px",this.element.style.height=a-n+"px"),h&&!t.ctrlKey&&!t.shiftKey){var u=parseInt(h.getAttribute(Ii),10);if(this.isCellDrag){var p=ge(t.target,Ji);p&&(this.startAFCell=this.startCell,this.endAFCell=ge(t.target,Ji),this.selectLikeExcel(t,u,parseInt(p.getAttribute(Us),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,u),this.isRowDragSelected=!0}},r.prototype.selectLikeExcel=function(t,e,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(t)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:e,cellIndex:i}),this.drawBorders())},r.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},r.prototype.isLastCell=function(t){var e=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return e[e.length-1]===t},r.prototype.isLastRow=function(t){var e=[].slice.call(j(t,rt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[e.length-1]},r.prototype.isFirstRow=function(t){var e=[].slice.call(j(t,rt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[0]},r.prototype.isFirstCell=function(t){return[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===t},r.prototype.setBorders=function(t,e,i){var n=[].slice.call(t.getElementsByClassName("e-cellselectionbackground")).filter(function(S){return""===S.style.display});if(n.length){var s=this.parent.isFrozenGrid(),o=n[0],a=n[n.length-1],l=o.getBoundingClientRect(),h=a.getBoundingClientRect(),u=o.offsetParent.getBoundingClientRect(),p=!this.isLastRow(a)||"1"!==i&&"2"!==i&&"5"!==i?0:2,m=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(o)?1.5:0,y=s&&("2"===i||"4"===i)&&this.isFirstCell(o)?1:0,C=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Qt||"5"!==i&&"6"!==i)||!this.isFirstCell(o)?0:1;this.parent.enableRtl?(e.style.right=u.right-l.right-y+"px",e.style.width=l.right-h.left+y+1+"px"):(e.style.left=l.left-u.left-y-C+"px",e.style.width=h.right-l.left+y-C+1+"px"),e.style.top=l.top-u.top-m+"px",e.style.height=h.top-l.top>0?h.top-u.top+h.height+1-(l.top-u.top)-p+m+"px":h.height+m-p+1+"px",this.selectDirection+=i}else e.style.display="none"},r.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Qt&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Qt&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},r.prototype.applyBothFrozenBorders=function(t){var e=this.parent.enableRtl;switch(t.length){case 6:this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right;break;case 4:t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom),t.includes("2")&&t.includes("4")&&t.includes("5")&&t.includes("6")&&(this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom);break;case 2:t.includes("1")&&(this.mcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),t.includes("2")&&(this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),t.includes("3")&&(this.mhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),t.includes("5")&&(this.mcBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),t.includes("6")&&(this.mhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},r.prototype.applyBorders=function(t){var e=this.parent.enableRtl;if(this.parent.getFrozenMode()===Qt)this.applyBothFrozenBorders(t);else switch(t.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},r.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Qt&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Qt&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(si("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},r.prototype.showHideBorders=function(t){this.bdrElement&&(this.bdrElement.style.display=t,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=t,this.parent.getFrozenMode()===Qt&&(this.frcBdrElement.style.display=t)),this.parent.frozenRows&&(this.fhBdrElement.style.display=t),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=t,this.parent.getFrozenMode()===Qt&&(this.frhBdrElement.style.display=t)))},r.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},r.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var t=this.startAFCell.getBoundingClientRect(),e=this.endAFCell.getBoundingClientRect(),i=e.top-t.top>0?1:0,n=e.top-t.top>=0&&(ge(this.startAFCell,Fn)||ge(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(ge(this.startAFCell,Fn)||ge(this.startAFCell,Kn))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(ge(this.endAFCell,Fn)||ge(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),p=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,m=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft,y=this.parent.element.clientHeight,C=this.parent.element.clientWidth;p=p>0?Math.floor(p)-1:0,m=m>0?m:0;var S=t.left-l.left;if(this.parent.enableRtl){var R=ge(this.startAFCell,Fn)||ge(this.startAFCell,Kn)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-e.right-2+e.width+"px",this.bdrAFLeft.style.width=C<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-t.right-s+R-1+"px",this.bdrAFTop.style.left=e.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-s+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=S-s+m-1+"px",this.bdrAFRight.style.left=e.left-l.left-2+e.width+"px",this.bdrAFRight.style.width=C<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=S+m-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-s+1+"px",C<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var T=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-C;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-T+"px"}if(this.bdrAFLeft.style.top=t.top-l.top-n+p+"px",this.bdrAFLeft.style.height=e.top-t.top>0?e.top-a.top+e.height+1-(t.top-a.top)+n-o-p+"px":e.height+n-o-p+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=y<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,y<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var P=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-y;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-P+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},r.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(si("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(si("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(si("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(si("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},r.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},r.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},r.prototype.updateValue=function(t,e,i){var n=this.createBeforeAutoFill(t,e,i);if(!n.cancel){var s=this.parent.getColumnByIndex(e);this.parent.editModule&&i&&this.parent.editModule.updateCell(t,s.field,"number"===s.type?parseFloat(n.value):n.value)}},r.prototype.createBeforeAutoFill=function(t,e,i){var s={column:this.parent.getColumnByIndex(e),value:i.innerText};return this.parent.trigger("beforeAutoFill",s),s},r.prototype.getAutoFillCells=function(t,e){var i=".e-cellselectionbackground",n=[].slice.call(this.parent.getDataRows()[t].querySelectorAll(i));return this.parent.isFrozenGrid()&&(n=n.concat([].slice.call(this.parent.getMovableDataRows()[t].querySelectorAll(i))),this.parent.getFrozenMode()===Qt&&(n=n.concat([].slice.call(this.parent.getFrozenRightDataRows()[t].querySelectorAll(i))))),n},r.prototype.selectLikeAutoFill=function(t,e){var i=parseInt(ge(this.startAFCell,bn).getAttribute(Ii),10),n=parseInt(this.startAFCell.getAttribute(Us),10),s=parseInt(ge(this.endAFCell,bn).getAttribute(Ii),10),o=parseInt(this.endAFCell.getAttribute(Us),10),a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!e&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!ge(t.target,Ji):this.startAFCell=this.parent.getCellFromIndex(i,n),this.endAFCell=this.parent.getCellFromIndex(i+a,n+l),this.drawAFBorders();break;case this.autoFillRLselection&&n+l<o&&o-n-l+1>s-i-a&&o-n-l+1>i-s:if(this.endAFCell=this.parent.getCellFromIndex(i+a,o),s=parseInt(ge(this.endAFCell,bn).getAttribute(Ii),10),o=parseInt(this.endAFCell.getAttribute(Us),10),e){for(var h=parseInt(this.endCell.getAttribute(Us),10),u=i;u<=s;u++)for(var p=this.getAutoFillCells(u,n),m=0,y=h+1;y<=o;y++)m>l&&(m=0),this.updateValue(u,y,p[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:s,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&n>o&&n-o+1>s-i-a&&n-o+1>i-s:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,e){for(u=i;u<=i+a;u++)for((p=this.getAutoFillCells(u,n)).reverse(),m=0,y=this.startCellIndex-1;y>=o;y--)m>l&&(m=0),this.updateValue(u,y,p[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+a,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>s:if(this.startAFCell=this.parent.getCellFromIndex(s,n),this.endAFCell=this.endCell,e){var S=C=parseInt(this.endCell.parentElement.getAttribute(Ii),10);for(u=i-1;u>=s;u--)for(S===this.startIndex-1&&(S=C),p=this.getAutoFillCells(S,n),m=0,S--,y=this.startCellIndex;y<=this.startCellIndex+l;y++)this.updateValue(u,y,p[m]),m++;this.selectCellsByRange({rowIndex:s,cellIndex:n+l},{rowIndex:i+a,cellIndex:n})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(s,n+l),e){var C=parseInt(this.endCell.parentElement.getAttribute(Ii),10);for(S=this.startIndex,u=C+1;u<=s;u++){S===C+1&&(S=this.startIndex),p=this.getAutoFillCells(S,n),S++,m=0;for(var T=this.startCellIndex;T<=this.startCellIndex+l;T++)this.updateValue(u,T,p[m]),m++}this.selectCellsByRange({rowIndex:C-a,cellIndex:n},{rowIndex:s,cellIndex:n+l})}else this.drawAFBorders()}},r.prototype.mouseUpHandler=function(t){document.body.classList.remove("e-disableuserselect"),this.element&&$e(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?ge(t.target,Ji):null;var e=j(t.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e&&e.classList.contains(Ji)){var n=parseInt(e.parentElement.getAttribute(Ii),10),s=parseInt(e.getAttribute(Us),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:n,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var o=ge(t.target,Ji);this.endAFCell=o||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(t,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}A.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&A.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),A.remove(document,"mouseup",this.mouseUpHandler)},r.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},r.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var t=parseInt(this.target.getAttribute(Us),10),e=parseInt(this.target.getAttribute("index"),10),n=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,t).filter(function(C){return""===C.style.display}),s=this.parent.getColumnByIndex(t),o="movable"===s.getFreezeTableName(),a=e<this.parent.frozenRows,l=this.parent.getFrozenMode()===Qt&&s.getFreezeTableName()===tr;he("#"+this.parent.element.id+"_autofill",ge(this.target,er))||(he("#"+this.parent.element.id+"_autofill",this.parent.element)&&he("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=si("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",a?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var h=n[n.length-1];if(h&&h.offsetParent){var u=h.getBoundingClientRect(),p=h.offsetParent.getBoundingClientRect(),m=this.isLastCell(h)?4:0,y=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=p.right-u.right+u.width-4-m+"px":this.autofill.style.left=u.left-p.left+u.width-4-m+"px",this.autofill.style.top=u.top-p.top+u.height-5-y+"px"}this.autofill.style.display=""}else this.hideAutoFill()},r.prototype.mouseDownHandler=function(t){this.mouseButton=t.button;var n,e=t.target,i=this.parent,s=ge(e,"e-grid");if(!(s&&s.id!==i.element.id||ge(e,Ls)&&!this.parent.frozenRows||ge(e,"e-editedbatchcell")||ge(e,Ha))){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),ge(e,Ji)&&!t.shiftKey&&!t.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,n=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||j(e,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);n=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}n&&this.enableDrag(t,!0)}this.updateStartEndCells(),(e.classList.contains("e-autofill")||e.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t))}},r.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=t[0],this.endCell=t[t.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ii),10),this.startCellIndex=parseInt(ge(this.startCell,Ji).getAttribute(Us),10))},r.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ii),10),this.startCellIndex=parseInt(ge(this.startCell,Ji).getAttribute(Us),10))},r.prototype.enableDrag=function(t,e){var i=this.parent;if(e){var n=j(t.target,"tr");this.startDIndex=parseInt(n.getAttribute(Ii),10),this.startDCellIndex=parseInt(ge(t.target,Ji).getAttribute(Us),10)}document.body.classList.add("e-disableuserselect");var s=i.element.getBoundingClientRect(),o=ub(t);this.x=o.x-s.left,this.y=o.y-s.top,A.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&A.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),A.add(document,"mouseup",this.mouseUpHandler,this)},r.prototype.clearSelAfterRefresh=function(t){var e=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;if("virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&!e&&this.clearSelection(),("virtualscroll"===t.requestType||e)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),n=[];this.selectedRowState={},this.persistSelectedData=[];for(var s=0;s<i.length;s++){n.push(i[s].index);var o=this.getPkValue(this.primaryKey,i[s].data);this.selectedRowState[o]=!0,this.persistSelectedData.push(i[s].data)}this.selectedRowIndexes=n}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Ar,handler:this.enableAfterRender},{event:Ba,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:Va,handler:this.onPropertyChanged},{event:PB,handler:this.onCellFocused},{event:YX,handler:this.clearSelAfterRefresh},{event:IT,handler:this.columnPositionChanged},{event:qr,handler:this.initialEnd},{event:LB,handler:this.rowsRemoved},{event:So,handler:this.refreshHeader},{event:un,handler:this.destroy}],mo(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(or,this.actionBeginFunction),this.parent.addEventListener(Vi,this.actionCompleteFunction),this.addEventListener_checkbox())},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(mo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(or,this.actionBeginFunction),this.parent.removeEventListener(Vi,this.actionCompleteFunction),this.removeEventListener_checkbox())},r.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(A.add(this.parent.element,"keydown",this.keyDownHandler,this),A.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||A.add(this.parent.element,"keydown",this.keyDownHandler,this)},r.prototype.unWireEvents=function(){this.isMacOS?(A.remove(this.parent.element,"keydown",this.keyDownHandler),A.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||A.remove(this.parent.element,"keydown",this.keyDownHandler)},r.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},r.prototype.refreshHeader=function(){this.setCheckAllState()},r.prototype.rowsRemoved=function(t){for(var e=0;e<t.records.length;e++){var i=this.getPkValue(this.primaryKey,t.records[e]);delete this.selectedRowState[i],--this.totalRecordsCount}this.setCheckAllState()},r.prototype.beforeFragAppend=function(t){"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&this.clearSelection()},r.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.initPerisistSelection())},r.prototype.render=function(t){A.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),A.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){var e=this.parent;!f(t.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!f(t.properties.mode)||!f(t.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&(e.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}},r.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},r.prototype.initialEnd=function(t){var e=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Qt;(!e||e&&!i&&!t.args.isFrozen||i&&t.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(qr,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},r.prototype.checkBoxSelectionChanged=function(){var t=this.parent;t.off(qr,this.checkBoxSelectionChanged);var e=t.getColumns().filter(function(i){return"checkbox"===i.type});e.length>0&&(t.isCheckBoxSelection=!0,this.chkField=e[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,f(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(t.selectionSettings.type="Multiple",t.dataBind()):this.initPerisistSelection()),!t.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},r.prototype.initPerisistSelection=function(){var t=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(t.isPersistSelection=!1,this.selectedRowState={})},r.prototype.ensureCheckboxFieldSelection=function(){var t=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!t.enableVirtualization&&this.chkField&&(t.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!t.isPersistSelection)){var e=this.parent.getDataModule(),i=(new ni).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var n=e.getData({},i),s=this;this.parent.showSpinner(),n.then(function(o){s.dataSuccess(o.result),s.refreshPersistSelection(),s.parent.hideSpinner()})}},r.prototype.dataSuccess=function(t){for(var e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);f(this.selectedRowState[i])&&t[e][this.chkField]&&(this.selectedRowState[i]=t[e][this.chkField])}this.persistSelectedData=t},r.prototype.setRowSelection=function(t){if(this.parent.getDataModule().isRemote())if(t)for(var m=Object.keys(this.selectedRowState),y=Object.keys(this.unSelectedRowState),C=0,S=this.parent.currentViewData;C<S.length;C++){var T=(h=S[C])[this.primaryKey].toString();-1===m.indexOf(T)&&-1===y.indexOf(T)&&(this.selectedRowState[h[this.primaryKey]]=!0)}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(t)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=0,n=this.parent.getRowsObject().filter(function(R){return R.isSelectable});i<n.length;i++)this.selectedRowState[this.getPkValue(this.primaryKey,n[i].data)]=!0;else{var o=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?o:o.records;a<l.length;a++)this.selectedRowState[this.getPkValue(this.primaryKey,h=l[a])]=!0;else for(var u=0,p=o;u<p.length;u++){var h;this.selectedRowState[this.getPkValue(this.primaryKey,h=p[u])]=!0}}else this.selectedRowState={}},r.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},r.prototype.refreshPersistSelection=function(){var t=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getMovableRows()),this.parent.getFrozenMode()===Qt&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==t&&t.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var n=[],s=0;s<t.length;s++){var o=this.getRowObj(t[s]),a=o&&o.data?this.getPkValue(this.primaryKey,o.data):null;if(null===a)return;if(!this.isPartialSelection||o.isSelectable){var l=void 0,h=t[s].querySelector(".e-checkselect");this.selectedRowState[a]||"Check"===this.parent.checkAllRows&&this.selectedRowState[a]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(a)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(a)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!f(this.chkField)&&o.data[this.chkField]?(n.push(parseInt(t[s].getAttribute(Ii),10)),l=!0):(l=!1,this.checkedTarget!==h&&this.parent.isCheckBoxSelection&&h&&L_(h.nextElementSibling,l)),this.updatePersistCollection(t[s],l)}}this.isSingleSel()&&n.length>0?this.selectRow(n[0],!0):this.selectRows(n)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},r.prototype.actionBegin=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){var e=this.parent.element.querySelector(".e-edit-checkselect");if(!f(e)){var i=j(e,"."+Ha);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var n=this.getRowObj(i);if(!n)return;this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=n.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===t.requestType&&this.parent.getDataModule().isRemote()&&(this.selectedRowIndexes=[]),("filtering"===t.requestType||"searching"===t.requestType)&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},r.prototype.actionComplete=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){if("add"===t.action){if(this.isCheckedOnAdd){var e=this.parent.getRowObjectFromUID(this.parent.getRows()[t.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,e.data)]=e.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if("delete"===t.requestType&&this.parent.isPersistSelection){for(var n=t.data.slice(),s=0;s<n.length;s++){var o=this.getPkValue(this.primaryKey,n[s]);f(o)||this.updatePersistDelete(o,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===t.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var a=this.parent.getRowsObject(),l=[];for(s=0;s<a.length;s++)a[s].isSelectable&&l.push(a[s].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},r.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.parent.getDataModule().isRemote()&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var t=this.parent.getRowsObject(),e=[],i=0;i<t.length;i++)t[i].isSelected&&e.push(i);e.length&&this.selectRows(e),this.initialRowSelection=!0}},r.prototype.updatePersistSelectedData=function(t){if(this.parent.isPersistSelection){for(var e=this.parent.getRows(),i=0;i<e.length;i++)this.updatePersistCollection(e[i],t);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},r.prototype.checkSelectAllAction=function(t){var e=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),t&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(t),this.selectRowsByRange(e.getVirtualRowIndex(0),e.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(t),this.clearSelection()),this.chkAllCollec=[],!f(i)){var n=i.querySelector(".e-edit-checkselect");f(n)||L_(n.nextElementSibling,t)}},r.prototype.checkSelectAll=function(t){var e=this,i=this.getCheckAllStatus(t),n="Check"===i;this.isHeaderCheckboxClicked=!0,this.rmtHdrChkbxClicked=!(!this.parent.getDataModule().isRemote()||"Uncheck"!==i),"Intermediate"===i&&(n=this.getCurrentBatchRecordChanges().some(function(s){return e.getPkValue(e.primaryKey,s)in e.selectedRowState})),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!n),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(t,!n)},r.prototype.getCheckAllStatus=function(t){var e=t?t.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return e.contains("e-check")?"Check":e.contains("e-uncheck")?"Uncheck":e.contains("e-stop")?"Intermediate":"None"},r.prototype.checkSelect=function(t){var e=j(this.checkedTarget,"."+Ji),i=this.parent;this.isMultiCtrlRequest=!0;var n=0;if(this.isHeaderCheckboxClicked=!1,ws(i)){var s=e.parentElement.getAttribute("data-uid");n=i.getRows().map(function(o){return o.getAttribute("data-uid")}).indexOf(s)}else n=parseInt(e.parentElement.getAttribute(Ii),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Fl).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++n,this.rowCellSelectionHandler(n,parseInt(e.getAttribute(Us),10)),this.moveIntoUncheckCollection(j(e,"."+bn)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"))},r.prototype.moveIntoUncheckCollection=function(t){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var e=this.getRowObj(t),i=e&&e.data?this.getPkValue(this.primaryKey,e.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},r.prototype.triggerChkChangeEvent=function(t,e){this.parent.trigger("checkBoxChange",{checked:e,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:t}),this.parent.isEdit||(this.checkedTarget=null)},r.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!this.parent.getDataModule().isRemote()&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var e=0,i=this.parent.getRowsObject().filter(function(s){return s.isSelectable});e<i.length;e++)this.selectedRowIndexes.push(i[e].index)},r.prototype.updateSelectedRowIndex=function(t){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var e=this.getData().length,i=0;i<e;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{var n=this.parent.getRowByIndex(t);if(t&&n&&"false"===n.getAttribute("aria-selected")){var s=this.selectedRowIndexes.indexOf(t);this.selectedRowIndexes.splice(s,1)}}},r.prototype.isAllSelected=function(t){if(this.isPartialSelection){if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var e=this.parent.partialSelectedRecords,i=0;i<e.length;i++){var n=this.getPkValue(this.primaryKey,e[i]);if(!this.selectedRowState[n])return!1}return!0}return this.isSelectAllRowCount(t)}for(e=this.getData(),i=0;i<e.length;i++)if(n=this.getPkValue(this.primaryKey,e[i]),!this.selectedRowState[n])return!1;return!0},r.prototype.someDataSelected=function(){for(var t=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);if(this.selectedRowState[i])return!1}return!0},r.prototype.setCheckAllState=function(t,e){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=!1,n=!1,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(n=!0,i=this.isAllSelected(s));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;W([a],["e-check","e-stop","e-uncheck"]),kw(o,!1),o.indeterminate=!1,i&&n&&this.getData().length||!n&&(s===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.enableVirtualization||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(s)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length||this.parent.getDataModule().isRemote()&&!this.isPartialSelection&&s===this.parent.totalDataRecordsCount||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(s))))?(B([a],["e-check"]),kw(o,!0),e&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&!this.parent.enableVirtualization||this.parent.enableVirtualization&&(!this.persistSelectedData.length&&!n||n&&this.someDataSelected())||0===s&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===s||s&&n&&this.someDataSelected())?(B([a],["e-uncheck"]),e&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?B([a.parentElement],["e-checkbox-disabled"]):W([a.parentElement],["e-checkbox-disabled"])):(B([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(h){return h.isSelectable}).length&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?B([a.parentElement],["e-checkbox-disabled"]):W([a.parentElement],["e-checkbox-disabled"])),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(t)}}},r.prototype.isSelectAllRowCount=function(t){var e=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(e=i.filter(function(s){return s.isSelectable}).length)&&t===e:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(e=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&t===this.parent.partialSelectedRecords.length:(e=i.filter(function(s){return s.isSelectable}).length)&&t===e},r.prototype.keyDownHandler=function(t){(("chrome"===X.info.name||"safari"===X.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===X.info.name&&17===t.keyCode||"mozilla"===X.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!0);var e=ge(t.target,"e-headercell"),i=ge(t.target,Ji);(e?e.children[0].classList.contains("e-headerchkcelldiv"):i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===t.keyCode&&t.preventDefault()},r.prototype.keyUpHandler=function(t){(("chrome"===X.info.name||"safari"===X.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===X.info.name&&17===t.keyCode||"mozilla"===X.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!1)},r.prototype.clickHandler=function(t){var e=t.target;this.actualTarget=e,this.selectionSettings.persistSelection&&(this.deSelectedData=__(this.persistSelectedData)),(ge(e,bn)||ge(e,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&e.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=t.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=t.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(t);var i=!1;this.preventFocus=!0;var n,s=ge(e,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(s&&s.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&ge(e,bn)),this.selectionSettings.persistSelection&&this.isPartialSelection&&ge(e,"e-headerchkcelldiv")&&!e.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),s&&s.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=s.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),((e=ge(e,Ji))&&e.parentElement.classList.contains(bn)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=e,f(n)){var o=this.parent,a=0;if(ws(o)){var l=e.parentElement.getAttribute("data-uid");a=o.getRows().map(function(h){return h.getAttribute("data-uid")}).indexOf(l)}else a=parseInt(e.parentElement.getAttribute(Ii),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Fl).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(e))&&this.rowCellSelectionHandler(a,parseInt(e.getAttribute(Us),10)),this.parent.hoverFrozenRows(t),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(j(e,"."+bn)),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):this.checkSelect(n);!this.parent.isCheckBoxSelection&&X.isDevice&&!this.isSingleSel()&&this.showPopup(t)}else t.target.classList.contains("e-headercell")&&!t.target.classList.contains("e-stackedheadercell")&&(l=t.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(l)));this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,f(j(t.target,".e-unboundcell"))&&(this.preventFocus=!1)},r.prototype.popUpClickHandler=function(t){var e=t.target;j(e,".e-headercell")||t.target.classList.contains(Ji)||j(e,".e-gridpopup")?e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?(e.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(e.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},r.prototype.showPopup=function(t){this.selectionSettings.enableSimpleMultiRowSelection||function NJ(r,t,e){var i=r.querySelector("span"),n=r.parentElement.getBoundingClientRect(),s=t.target.getBoundingClientRect();i.className=e,r.style.display="";var o=(f(t.clientY)?t.changedTouches[0].clientY:t.clientY)>r.offsetHeight+10;r.style.top=s.top-n.top+(o?-(r.offsetHeight+10):r.offsetHeight+10)+"px",r.style.left=function FCe(r,t,e,i){var n=r.offsetWidth/2,s=ub(t).x;return s-e.left<n?e.left-i:e.right-s<n?e.right-i-2*n:s-i-n}(r,t,s,n.left)+"px",o?(r.querySelector(".e-downtail").style.display="",r.querySelector(".e-uptail").style.display="none"):(r.querySelector(".e-downtail").style.display="none",r.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),t,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},r.prototype.rowCellSelectionHandler=function(t,e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(t,this.selectionSettings.enableToggle),this.selectCell({rowIndex:t,cellIndex:e},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!j(this.target,"."+Ji).classList.contains(Ew)?this.selectRowsByRange(Jt(this.prevRowIndex)?t:this.prevRowIndex,t):this.addRowsToSelection([t]),this.selectCellsByRange(Jt(this.prevCIdxs)?{rowIndex:t,cellIndex:e}:this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([t]),this.addCellsToSelection([{rowIndex:t,cellIndex:e}]),this.showHideBorders("none")),this.isDragged=!1},r.prototype.onCellFocused=function(t){if(this.parent.frozenRows&&t.container.isHeader&&t.byKey)if("upArrow"===t.keyArgs.action)t.isJump=this.parent.allowFiltering?"INPUT"===t.element.tagName:"TH"===t.element.tagName;else if("downArrow"===t.keyArgs.action){var e=Number(t.element.parentElement.getAttribute(Ii));t.isJump=0===e}else"ctrlHome"===t.keyArgs.action&&(t.isJump=!0);var i=this.parent.isFrozenGrid()?(t.container.isHeader&&"TD"!==t.element.tagName&&t.isJump&&!this.selectionSettings.allowColumnSelection||(t.container.isContent||"TD"===t.element.tagName)&&!(t.container.isSelectable||"TD"===t.element.tagName))&&!(t.byKey&&"space"===t.keyArgs.action):(t.container.isHeader&&t.isJump||t.container.isContent&&!t.container.isSelectable)&&!(t.byKey&&"space"===t.keyArgs.action)&&!(t.element.classList.contains("e-detailrowexpand")||t.element.classList.contains("e-detailrowcollapse")),n=t.container.isHeader&&"TD"!==t.element.tagName&&!j(t.element,"."+Ji)&&!(t.byKey&&"space"===t.keyArgs.action);if(t.byKey&&!i){var s=t.container.isContent?t.container.indexes:t.indexes,o=s[0],a=s[1],l=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(t.container.isHeader&&("TD"===t.element.tagName||j(t.element,"."+Ji))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;o-=h,l.rowIndex=f(l.rowIndex)?null:l.rowIndex-h}else o+=this.parent.frozenRows,l.rowIndex=0!==l.rowIndex&&f(l.rowIndex)?null:l.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){var u=Number(t.element.getAttribute(Us)),p=this.parent.getSelectedRowCellIndexes();p.length&&0===l.cellIndex&&(l.cellIndex=p[p.length-1].cellIndexes[0]),l.cellIndex=f(l.cellIndex)?null:l.cellIndex===a?u:u-1,a=u}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(o=parseInt(t.element.parentElement.getAttribute("data-rowindex"),10)),!(n||-1===["ctrlPlusA","escape"].indexOf(t.keyArgs.action)&&"space"!==t.keyArgs.action&&o===l.rowIndex&&a===l.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var m=this.getKeyColIndex(t);if(this.needColumnSelection&&(a=m),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===t.keyArgs.action||"shiftTab"===t.keyArgs.action||"rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)){var y=this.target.getAttribute("aria-label");y=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",y)}switch(t.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=t.element,this.isKeyAction=!0,this.applyDownUpKey(o,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,a);break;case"home":case"end":a="end"===t.keyArgs.action?this.getLastColIndex(o):0,this.applyHomeEndKey(o,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,a);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(t.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else i&&!this.parent.isCheckBoxSelection&&this.clearSelection()},r.prototype.getKeyColIndex=function(t){var e,i=null,n=t.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&ge(t.element,"e-columnheader"))if(this.needColumnSelection=!!t.container.isHeader,n){if("rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)return i;e=n.getAttribute("e-mappinguid");var s=this.getstackedColumns(this.parent.getColumnByUid(e).columns),o=this.parent.getColumnIndexByUid(s[s.length-1].uid),a=this.parent.getColumnIndexByUid(s[0].uid);i=this.prevColIndex>=o?a:o}else i=this.parent.getColumnIndexByUid(t.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},r.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},r.prototype.applySpaceSelection=function(t){t.classList.contains("e-checkselectall")?(this.checkedTarget=t,this.checkSelectAll(this.checkedTarget)):t.classList.contains("e-checkselect")&&(this.checkedTarget=t,this.checkSelect(this.checkedTarget))},r.prototype.applyDownUpKey=function(t,e){var i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.selectRow(t,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(e)},r.prototype.applyUpDown=function(t){if(!(t<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var e=parseInt(this.target.getAttribute(Us),10),i=this.parent.getFrozenColumns();if(i)this.target=e>=i?this.contentRenderer.getMovableRowByIndex(t).getElementsByClassName(Ji)[e-i]:this.contentRenderer.getRowByIndex(t).getElementsByClassName(Ji)[e];else{var n=this.contentRenderer.getRowByIndex(t);n&&(this.target=n.getElementsByClassName(Ji)[e])}this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")&&(this.target.getAttribute("aria-label"),this.target.setAttribute("aria-label",this.target.innerHTML))}},r.prototype.applyRightLeftKey=function(t,e){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(e):this.isCellType()&&(this.selectCell({rowIndex:t,cellIndex:e},!0),this.addAttribute(this.target))},r.prototype.applyHomeEndKey=function(t,e){this.isCellType()?this.selectCell({rowIndex:t,cellIndex:e},!0):this.addAttribute(this.parent.getCellFromIndex(t,e))},r.prototype.shiftDownKey=function(t,e){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(Jt(this.prevRowIndex)?this.selectRow(this.isPartialSelection?t:0,!0):(this.selectRowsByRange(this.prevRowIndex,t),this.applyUpDown(t))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.applyShiftLeftRightKey=function(t,e){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,e):this.selectCellsByRange(this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.getstackedColumns=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i].columns?this.getstackedColumns(t[i].columns):e.push(t[i]);return e},r.prototype.applyCtrlHomeEndKey=function(t,e){this.isRowType()&&(this.selectRow(t,!0),this.addAttribute(this.parent.getCellFromIndex(t,e))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0)},r.prototype.addRemoveClassesForRow=function(t,e,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];if(t){var o=[].slice.call(t.getElementsByClassName(Ji)),a=t.querySelector(".e-detailrowcollapse")||t.querySelector(".e-detailrowexpand"),l=t.querySelector(".e-rowdragdrop");a&&o.push(a),l&&o.push(l),Mc.apply(void 0,[o,e].concat(n))}this.getRenderer().setSelection(t?t.getAttribute("data-uid"):null,e,i)},r.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},r.prototype.getRenderer=function(){return f(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(js.Content)),this.contentRenderer},r.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):this.persistSelectedData},r.prototype.selectColumn=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnByIndex(t),n=e.getColumnHeaderByUid(i.uid),s=n.classList.contains("e-columnselection");if(e.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(t)>-1;if(this.clearColDependency(),!s||!this.selectionSettings.enableToggle||o){var a={columnIndex:t,headerCell:n,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,fq),a.cancel)return void this.disableInteracted();(!e.selectionSettings.enableToggle||t!==this.prevColIndex||!s||o)&&this.updateColSelection(n,t),this.onActionComplete({columnIndex:t,headerCell:n,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},gq)}this.updateColProps(t)}}},r.prototype.selectColumnsByRange=function(t,e){var i=this.parent;if(!f(i.getColumns()[t])){var n=[];if("Single"===i.selectionSettings.type||f(e))n[0]=t;else for(var s=t<e,o=t;s?o<=e:o>=e;s?o++:o--)n.push(o);this.selectColumns(n)}},r.prototype.selectColumns=function(t){var e=this.parent,i=this.getselectedCols();if("Single"===e.selectionSettings.type&&(t=[t[0]]),e.selectionSettings.allowColumnSelection){this.clearColDependency();var n={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,fq),n.cancel)return void this.disableInteracted();for(var s=0,o=t.length;s<o;s++)this.updateColSelection(e.getColumnHeaderByUid(e.getColumnByIndex(t[s]).uid),t[s]);i=this.getselectedCols();var a={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,gq),this.updateColProps(t[0])}},r.prototype.selectColumnWithExisting=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnHeaderByUid(e.getColumnByIndex(t).uid),n=this.getselectedCols();if("Single"===e.selectionSettings.type&&this.clearColDependency(),e.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(t)>-1)this.clearColumnSelection(t);else{var s={columnIndex:t,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:e.getColumnByIndex(t),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,fq),s.cancel)return void this.disableInteracted();this.updateColSelection(i,t);var o={columnIndex:t,headerCell:n=this.getselectedCols(),column:e.getColumnByIndex(t),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,gq)}this.updateColProps(t)}}},r.prototype.clearColumnSelection=function(t){if(this.isColumnSelected){var e=this.parent;if(!f(t)&&-1===this.selectedColumnsIndexes.indexOf(t))return;var s,i=f(t)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:t,n=e.getColumnByIndex(i),o=e.getColumnByIndex(i),a={columnIndex:i,headerCell:s=n.getFreezeTableName()===tr?e.getFrozenRightColumnHeaderByIndex(i):"movable"===n.getFreezeTableName()?e.getMovableColumnHeaderByIndex(i):e.getColumnHeaderByUid(o.uid),columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(a,"columnDeselecting"))return void this.disableInteracted();for(var h=f(t)?[].slice.call(e.getHeaderContent().getElementsByClassName("e-columnselection")):[s],u=this.getSelectedColumnCells(t),p=0,m=h.length;p<m;p++)Mc([h[p]],!1,"e-columnselection");for(p=0,m=u.length;p<m;p++)Mc([u[p]],!1,"e-columnselection");f(t)?(this.columnDeselect(a,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(y){return y.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(t),1),this.parent.getColumns()[t].isSelected=!1)}},r.prototype.getselectedCols=function(){var e,t=this.parent;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},r.prototype.getSelectedColumnCells=function(t){var s,o,e=this.parent,i=!f(this.parent.rowTemplate),n=i?e.getRows():e.getDataRows();e.isFrozenGrid()&&e.getContent().querySelector("."+Fn)&&(s=i?e.getMovableRows():e.getMovableDataRows(),n=e.addMovableRows(n,s),e.getFrozenMode()===Qt&&(o=i?e.getFrozenRightRows():e.getFrozenRightDataRows(),n=e.addMovableRows(n,o)));for(var a=[],l=f(t)?".e-columnselection":'[data-colindex="'+t+'"]',h=0,u=n.length;h<u;h++)a=a.concat([].slice.call(n[h].querySelectorAll(l)));return a},r.prototype.columnDeselect=function(t,e){return"columnDeselected"===e&&delete t.cancel,this.onActionComplete(t,e),t.cancel},r.prototype.updateColProps=function(t){this.prevColIndex=t,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},r.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},r.prototype.updateColSelection=function(t,e){if(!f(this.parent.getColumns()[e])){var a,i=this.parent.getFrozenLeftCount(),n=this.parent.getMovableColumnsCount(),s=this.parent.getColumnByIndex(e),o=!f(this.parent.rowTemplate);this.selectedColumnsIndexes.push(e),this.parent.getColumns()[e].isSelected=!0,s.getFreezeTableName()===tr?(e-=i+n,a=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===s.getFreezeTableName()?(e-=i,a=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(e+=this.parent.getIndentCount(),a=o?this.parent.getRows():this.parent.getDataRows()),Mc([t],!0,"e-columnselection");for(var l=0,h=a.length;l<h;l++)a[l].classList.contains(bn)&&(!a[l].classList.contains(Ha)&&!a[l].classList.contains(Fl)||"Normal"!==this.parent.editSettings.mode||f(a[l].querySelector("tr").childNodes[e])?f(a[l].childNodes[e])||Mc([a[l].childNodes[e]],!0,"e-columnselection"):Mc([a[l].querySelector("tr").childNodes[e]],!0,"e-columnselection"))}},r.prototype.headerSelectionHandler=function(t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(t):this.isMultiShiftRequest?this.selectColumnsByRange(Jt(this.prevColIndex)?t:this.prevColIndex,t):this.selectColumnWithExisting(t)},r.prototype.addEventListener_checkbox=function(){var t=this;this.parent.on(Ac,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Jl,this.onDataBoundFunction),this.parent.on(iU,this.onDataBoundFunction),this.parent.on(qr,this.checkBoxSelectionChanged,this),this.parent.on(Wq,this.initPerisistSelection,this),this.parent.on(Rd,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Vi,this.actionCompleteFunc),this.parent.on(nl,this.clickHandler,this),this.resizeEndFn=function(){t.updateAutoFillPosition(),t.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},r.prototype.removeEventListener_checkbox=function(){this.parent.off(Ac,this.dataReady),this.parent.removeEventListener(Jl,this.onDataBoundFunction),this.parent.removeEventListener(Vi,this.actionCompleteFunc),this.parent.off(iU,this.onDataBoundFunction),this.parent.off(Rd,this.setCheckAllForEmptyGrid),this.parent.off(nl,this.clickHandler),this.parent.off(Wq,this.initPerisistSelection)},r.prototype.setCheckAllForEmptyGrid=function(){var t=this.getCheckAllBox();t&&(this.parent.isCheckBoxSelection=!0,W([t.nextElementSibling],["e-check","e-stop","e-uncheck"]))},r.prototype.dataReady=function(t){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==t.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},r.prototype.actionCompleteHandler=function(t){"save"===t.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},r.prototype.selectRowIndex=function(t){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=f(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex?t:-1},r.prototype.disableInteracted=function(){this.isInteracted=!1},r.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},r}(),kJ=function(){function r(t){this.parent=t,this.addEventListener()}return r.prototype.search=function(t){var e=this.parent;t=f(t)?"":t,Pd(e)?e.notify(eu,{instance:this,handler:this.search,arg1:t}):t!==e.searchSettings.key?(e.searchSettings.key=t.toString(),e.dataBind()):this.refreshSearch&&e.refresh()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Va,this.onPropertyChanged,this),this.parent.on(PX,this.onSearchComplete,this),this.parent.on(un,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Vi,this.actionCompleteFunc),this.parent.on(VB,this.cancelBeginEvent,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Va,this.onPropertyChanged),this.parent.off(PX,this.onSearchComplete),this.parent.off(un,this.destroy),this.parent.removeEventListener(Vi,this.actionCompleteFunc),this.parent.off(VB,this.cancelBeginEvent))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(f(t.properties.key)?this.parent.notify(zo,{requestType:"searching",type:or}):this.parent.notify(zo,{requestType:"searching",type:or,searchString:this.parent.searchSettings.key}))},r.prototype.onSearchComplete=function(t){this.parent.trigger(Vi,de(t,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Vi}))},r.prototype.onActionComplete=function(t){this.refreshSearch="searching"!==t.requestType},r.prototype.cancelBeginEvent=function(t){"searching"===t.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},r.prototype.getModuleName=function(){return"search"},r}(),gCe=function(){function r(t){this.colName=[],this.isShowHide=!1,this.parent=t,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Zf,handler:this.batchChanges},{event:"cancelcnfrmDlg",handler:this.resetColumnState}],mo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||mo(this.parent,this.evtHandlers,!1)},r.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},r.prototype.show=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(Cw,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!0;this.setVisible(n)},r.prototype.hide=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(Cw,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!1;this.setVisible(n)},r.prototype.getToggleFields=function(t){return"string"==typeof t?[t]:t},r.prototype.getColumns=function(t,e){var i=this;return Iw(t,function(s){return Iw(i.parent.columnModel,function(o){if(o[e]===s)return o})[0]})},r.prototype.batchActionPrevent=function(t,e){return void 0===e&&(e=[]),!Pd(this.parent)||(this.colName=t,this.changedCol=e,this.parent.closeEdit(),!1)},r.prototype.resetColumnState=function(){if(this.isShowHide)for(var t=0;t<this.colName.length;t++)this.colName[t].visible=!this.colName[t].visible},r.prototype.setVisible=function(t,e){var i=this;if(void 0===e&&(e=[]),this.isShowHide=!0,this.batchActionPrevent(t,e)){var n={requestType:"columnstate",cancel:!1,columns:e=e.length>0?e:t};this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(or,n,function(o){var a=i.parent.getColumns();if(t=f(t)?a:t,o.cancel)return i.parent.notify("reset-columns",{showHideArgs:o}),void(t.length>0&&(t[0].visible=!0));ws(i.parent)&&i.parent.contentModule.emptyVcRows(),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?t.filter(function(u){return a.some(function(p){return u.field===p.field})}).length&&i.parent.notify(kc,t):i.parent.notify(kc,t),i.parent.trigger(Vi,{requestType:"columnstate",columns:e}),"All"!==i.parent.columnQueryMode&&i.parent.refresh()})}},r}(),RJ=function(){function r(t){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=t,this.widthService=new hU(t),this.addEventListener()}return r.prototype.getModuleName=function(){return"scroll"},r.prototype.setWidth=function(t){this.parent.element.style.width=ut(this.parent.width),t&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},r.prototype.setHeight=function(){var t=0,e=this.parent.getContent().querySelector("."+ns),i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-r.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var n=this.parent.getHeaderContent().querySelector(rt+":not(.e-masked-tbody)");t=n?n.offsetHeight:0,n&&t?t-=n.getElementsByClassName(Fl).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight()),e.style.height=ut(i-t)}else e.style.height=ut(i);this.ensureOverflow(e),this.parent.isFrozenGrid()&&this.refresh()},r.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),e=r.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),n="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Qt?"0.5px":"1px";t.querySelector("."+Ls).style[i.border]=e>0?n:"0px",t.style[i.padding]=e>0?e+"px":"0px"},r.prototype.removePadding=function(t){var e=this.getCssProperties(t),i=this.parent.getHeaderContent().querySelector("."+Ls);i.style[e.border]="",i.parentElement.style[e.padding]="";var n=this.parent.getFooterContent();n&&n.classList.contains("e-footerpadding")&&n.classList.remove("e-footerpadding")},r.prototype.refresh=function(){if("100%"===this.parent.height){var t=this.parent.getContent();this.parent.element.style.height="100%";var e=this.widthService.getSiblingsHeight(t);t.style.height="calc(100% - "+e+"px)",this.parent.isFrozenGrid()&&(t.firstElementChild.style.height="calc(100% - "+cb()+"px)")}},r.prototype.getThreshold=function(){return"mozilla"===X.info.name?.5:1},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Rd,this.wireEvents,this),this.parent.on(qr,this.wireEvents,this),this.parent.on(Ar,this.onPropertyChanged,this),this.parent.on(Aq,this.wireEvents,this),this.parent.on(So,this.setScrollLeft,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Rd,this.wireEvents),this.parent.off(qr,this.wireEvents),this.parent.off(Ar,this.onPropertyChanged),this.parent.off(Aq,this.wireEvents),this.parent.off(So,this.setScrollLeft))},r.prototype.setScrollLeft=function(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+Ls).scrollLeft=this.previousValues.left},r.prototype.onFrozenContentScroll=function(){var t=this;return function(e){null===t.content.querySelector(rt)||t.parent.isPreventScrollEvent||(!f(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify(WB,e),t.previousValues.top=e.target.scrollTop)}},r.prototype.onContentScroll=function(t){var e=this,i=t,n=i.classList.contains(Ls);return function(s){if(null!==e.content.querySelector(rt)&&!e.parent.isPreventScrollEvent){var o=s.target,a=o.scrollLeft;if(!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&e.parent.notify(WB,{target:s.target,isLeft:e.previousValues.left!==a}),e.parent.groupSettings.columns.length&&e.parent.groupSettings.enableLazyLoading){var l=e.previousValues.top<e.parent.getContent().firstElementChild.scrollTop;e.parent.notify("lazy-load-scroll-handler",{scrollDown:l})}e.parent.notify("virtual-scroll-edit",{});var h=o.classList.contains("e-summarycontent");if(e.previousValues.left===a)return void(e.previousValues.top=n?o.scrollTop:e.previousValues.top);e.parent.notify("close-filter-dialog",s),i.scrollLeft=a,h&&(e.header.scrollLeft=a),e.previousValues.left=a,e.parent.notify("scroll",{left:a})}}},r.prototype.onCustomScrollbarScroll=function(t,e){var i=this,n=t,s=e;return function(o){if(null!==i.content.querySelector(rt)){var l=o.target.scrollLeft;i.previousValues.left!==l&&(n.scrollLeft=l,s.scrollLeft=l,i.previousValues.left=l,i.parent.notify("scroll",{left:l}))}}},r.prototype.onTouchScroll=function(t){var e=this,i=t;return function(n){if("mouse"!==n.pointerType){var s=e.parent.isFrozenGrid(),o=e.getPointXY(n),a=i.scrollLeft+(e.pageXY.x-o.x),l=s?e.parent.getHeaderContent().querySelector("."+Kn):e.parent.getHeaderContent().querySelector("."+Ls),h=s?e.parent.getContent().querySelector("."+Fn):e.parent.getContent().querySelector("."+ns);e.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a||(n.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,s&&(e.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=a),e.pageXY.x=o.x,e.previousValues.left=a)}}},r.prototype.setPageXY=function(){var t=this;return function(e){"mouse"!==e.pointerType&&(t.pageXY=t.getPointXY(e))}},r.prototype.getPointXY=function(t){var e={x:0,y:0};return t.touches&&t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e},r.prototype.getScrollbleParent=function(t){if(null===t)return null;var e=f(t.tagName)?t.scrollingElement:t,i=document.defaultView.getComputedStyle(e,null).overflowY;return e.scrollHeight>e.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===t.tagName||"BODY"===t.tagName?t:this.getScrollbleParent(t.parentNode)},r.prototype.addStickyListener=function(t){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),t&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,A.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(A.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},r.prototype.wireEvents=function(){var t=this;if(this.oneTimeReady){var e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+ns),this.header=this.parent.getHeaderContent().querySelector("."+Ls);var i=this.content.querySelector("."+Fn),n=this.header.querySelector("."+Kn),s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(A.add(e?n:this.header,"touchstart pointerdown",this.setPageXY(),this),A.add(e?n:this.header,"touchmove pointermove",this.onTouchScroll(e?i:this.content),this)),this.parent.isFrozenGrid()?(A.add(s,"scroll",this.onCustomScrollbarScroll(i,n),this),A.add(i,"scroll",this.onCustomScrollbarScroll(s,n),this),A.add(n,"scroll",this.onCustomScrollbarScroll(s,i),this),A.add(this.content,"scroll",this.onFrozenContentScroll(),this),A.add(n,"touchstart pointerdown",this.setPageXY(),this),A.add(n,"touchmove pointermove",this.onTouchScroll(i),this),A.add(i,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(X.userAgent.toLowerCase())&&X.isDevice||A.add(i,"touchmove pointermove",this.onTouchScroll(n),this)):(A.add(this.content,"scroll",this.onContentScroll(this.header),this),A.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&A.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,l,h,o=this.parent.getContentTable();PJ(function(){a=t.header.scrollLeft,l=o.scrollHeight,h=t.parent.getContent().clientHeight},function(){var u={cancel:!1};t.parent.notify("check-scroll-reset",u),!t.parent.enableVirtualization&&!t.parent.enableInfiniteScrolling&&(l<h&&(B(o.querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.isFrozenGrid()&&(B(t.parent.getContent().querySelector("."+Fn).querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.getFrozenRightColumnsCount()&&B(t.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),u.cancel||((t.parent.frozenRows>0||t.parent.isFrozenGrid())&&t.header.querySelector("."+Kn)?t.header.querySelector("."+Kn).scrollLeft=t.previousValues.left:t.header.scrollLeft=t.previousValues.left,t.content.scrollLeft=t.previousValues.left,t.content.scrollTop=t.previousValues.top)),t.parent.enableColumnVirtualization||(t.content.scrollLeft=a),t.parent.isFrozenGrid()&&t.header.querySelector("."+Kn)&&(t.header.querySelector("."+Kn).scrollLeft=t.content.querySelector("."+Fn).scrollLeft)}),this.parent.isPreventScrollEvent=!1},r.prototype.getCssProperties=function(t){var e={},i=f(t)?this.parent.enableRtl:t;return e.border=i?"borderLeftWidth":"borderRightWidth",e.padding=i?"paddingLeft":"paddingRight",e},r.prototype.ensureOverflow=function(t){t.style.overflowY="auto"===this.parent.height?"auto":"scroll"},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!f(t.properties.width)))},r.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var t=this.parent.getContent().getClientRects()[0];if(t){var e=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=e.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,a=t.top-(o<0?0:o),l=t.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(a<s&&t.bottom>0){e.classList.add("e-sticky");var u=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,u,t.width,l,!0),u+=n.getClientRects()[0].height),i&&(this.setSticky(i,u,t.width,l,!0),u+=i.getClientRects()[0].height),this.setSticky(e,u,t.width,l,!0),f(h)||(h.style.position="fixed")}else if(e.classList.contains("e-sticky")){this.setSticky(e,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);var p=this.parent.element.querySelector(".e-ccdlg");p&&p.classList.remove("e-sticky"),f(h)||(h.style.position="absolute")}this.parent.notify("sticky-scroll-complete",{})}}},r.prototype.setSticky=function(t,e,i,n,s){s?(t.style.width=i+"px",t.classList.add("e-sticky")):t.classList.remove("e-sticky"),t.style.top=null!=e?e+"px":"",t.style.left=null!==n?parseInt(t.style.left,10)!==n?n+"px":t.style.left:""},r.prototype.destroy=function(){var t=this.parent.element;if(t&&(t.querySelector("."+qs)||t.querySelector("."+Ps))){this.removeEventListener();var e=this.parent.getContent().querySelector("."+ns);A.remove(e,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),W([this.parent.getHeaderContent().querySelector("."+Ls)],Ls),W([e],ns),e.style.height="",this.parent.element.style.width=""}},r.getScrollBarWidth=function(){return cb()},r}(),_J=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$m=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},mCe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.templateFn={},e}return _J(t,r),t.prototype.setFormatter=function(e){this.formatFn=e},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[Il(Bt,Bt.Summary)]={fn:qi(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[Il(Bt,Bt.GroupSummary)]={fn:qi(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[Il(Bt,Bt.CaptionSummary)]={fn:qi(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(e){return this.templateFn[Il(Bt,e)]},t.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},$m([D()],t.prototype,"type",void 0),$m([D()],t.prototype,"field",void 0),$m([D()],t.prototype,"columnName",void 0),$m([D()],t.prototype,"format",void 0),$m([D()],t.prototype,"footerTemplate",void 0),$m([D()],t.prototype,"groupFooterTemplate",void 0),$m([D()],t.prototype,"groupCaptionTemplate",void 0),$m([D()],t.prototype,"customAggregate",void 0),t}(Wi),vCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return _J(t,r),$m([ba([],mCe)],t.prototype,"columns",void 0),t}(Wi),yCe=function(){function r(t,e){this.copyContent="",this.isSelect=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(qr,this.initialEnd,this),this.parent.on(Cs,this.keyDownHandler,this),this.parent.on(nl,this.clickHandler,this),A.add(this.parent.element,"keydown",this.pasteHandler,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Cs,this.keyDownHandler),this.parent.off(qr,this.initialEnd),this.parent.off(nl,this.clickHandler),A.remove(this.parent.element,"keydown",this.pasteHandler))},r.prototype.clickHandler=function(t){var e=t.target;e=ge(e,"e-rowcell")},r.prototype.pasteHandler=function(t){var e=this,i=this.parent,n=/(Mac)/i.test(navigator.platform);if(67===t.keyCode&&n&&t.metaKey&&!i.isEdit&&this.copy(),86===t.keyCode&&(t.ctrlKey||n&&t.metaKey)&&!i.isEdit){if(!j(document.activeElement,"."+Ji)||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var o=window.scrollX,a=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){e.activeElement.focus(),window.scrollTo(o,a),e.paste(e.clipBoardTextArea.value,e.parent.getSelectedRowCellIndexes()[0].rowIndex,e.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}},r.prototype.paste=function(t,e,i){var a,l,h,n=this.parent,s=i,o=e;if(n.editSettings.allowEditing&&"Batch"===n.editSettings.mode&&"Cell"===n.selectionSettings.mode&&"Flow"!==n.selectionSettings.cellSelectionMode){var p,y,C,u=t.split("\n"),m=n.getDataRows(),S=this.parent.isFrozenGrid();S&&(y=n.getMovableDataRows(),n.getFrozenRightColumnsCount()&&(C=n.getFrozenRightDataRows()));for(var T=0;T<u.length;T++){if(p=u[T].split("\t"),s=i,T===u.length-1&&""===u[T]||Jt(n.getRowByIndex(o))){s++;break}for(var R=0;R<p.length;R++){if(h=n.getCellFromIndex(o,s),S){var O=y[o];h=!!m[o].querySelector('[data-colindex="'+s+'"]')||O.querySelector('[data-colindex="'+s+'"]'),C&&!h&&(h=C[o].querySelector('[data-colindex="'+s+'"]'))}if(!h){s++;break}if(l=(a=n.getColumnByIndex(s)).getParser()?a.getParser()(p[R]):p[R],a.allowEditing&&!a.isPrimaryKey&&!a.template){var z={column:a,data:l,rowIndex:o};this.parent.trigger("beforePaste",z),o=z.rowIndex,z.cancel||n.editModule&&("number"===a.type?this.parent.editModule.updateCell(o,a.field,parseFloat(z.data)):n.editModule.updateCell(o,a.field,z.data))}s++}o++}n.selectionModule.selectCellsByRange({rowIndex:e,cellIndex:i},{rowIndex:o-1,cellIndex:s-1});var U=this.parent.getCellFromIndex(o-1,s-1);U&&ai(U,["e-focus","e-focused"],[])}},r.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(qr,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},r.prototype.keyDownHandler=function(t){"ctrlPlusC"===t.action?this.copy():"ctrlShiftPlusH"===t.action&&this.copy(!0)},r.prototype.setCopyData=function(t){if(""===window.getSelection().toString()){var e=this.parent.isFrozenGrid();this.clipBoardTextArea.value=this.copyContent="";var i=void 0,n=void 0,s=this.parent.getRows();if(e&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Qt&&(n=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){var o=this.parent.getSelectedRowIndexes().sort(function(y,C){return y-C});if(t){for(var a=[],l=0;l<this.parent.getVisibleColumns().length;l++)a[l]=this.parent.getVisibleColumns()[l].headerText;this.getCopyData(a,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<o.length;l++){l>0&&(this.copyContent+="\n");var h=[].slice.call(s[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"));e&&(h.push.apply(h,[].slice.call(i[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"))),n&&h.push.apply(h,[].slice.call(n[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(h,!1,"\t",t)}}else{var u=this.checkBoxSelection();if(u.status){if(t){var p=[];for(l=0;l<u.colIndexes.length;l++)p.push(this.parent.getColumnHeaderByIndex(u.colIndexes[l]));this.getCopyData(p,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<u.rowIndexes.length;l++)l>0&&(this.copyContent+="\n"),h=[].slice.call(s[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")),e&&(h.push.apply(h,[].slice.call(i[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground"))),n&&h.push.apply(h,[].slice.call(n[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(h,!1,"\t",t)}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",t)}var m={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",m),m.cancel)return;this.clipBoardTextArea.value=this.copyContent=m.data,X.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},r.prototype.getCopyData=function(t,e,i,n){for(var s="string"!=typeof t[0],o=0;o<t.length;o++){if(n&&e){var a=parseInt(t[o].getAttribute(Us),10);this.copyContent+=this.parent.getColumns()[a].headerText+"\n"}s?t[o].classList.contains("e-hide")||(this.copyContent+=t[o].innerText):this.copyContent+=t[o],o<t.length-1&&(this.copyContent+=i)}},r.prototype.copy=function(t){document.queryCommandSupported("copy")&&(this.setCopyData(t),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},r.prototype.getModuleName=function(){return"clipboard"},r.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&$e(this.clipBoardTextArea)},r.prototype.checkBoxSelection=function(){var t=this.parent,e={status:!1};if("Cell"===t.selectionSettings.mode){var i=t.getSelectedRowCellIndexes(),n=void 0,s=[],o=void 0;for(o=0;o<i.length&&(i[o].cellIndexes.length&&s.push(i[o].rowIndex),!i[o].cellIndexes.length||(n||(n=JSON.stringify(i[o].cellIndexes.sort())),n===JSON.stringify(i[o].cellIndexes.sort())));o++);s.sort(function(a,l){return a-l}),o===i.length&&s[s.length-1]-s[0]==s.length-1&&(e={status:!0,rowIndexes:s,colIndexes:i[0].cellIndexes})}return e},r}(),Uu=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),xe=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},bCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D()],t.prototype,"field",void 0),xe([D()],t.prototype,"direction",void 0),xe([D(!1)],t.prototype,"isFromGroup",void 0),t}(Wi),CCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([ba([],bCe)],t.prototype,"columns",void 0),xe([D(!0)],t.prototype,"allowUnsort",void 0),t}(Wi),wCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D()],t.prototype,"field",void 0),xe([D()],t.prototype,"operator",void 0),xe([D()],t.prototype,"value",void 0),xe([D()],t.prototype,"matchCase",void 0),xe([D(!1)],t.prototype,"ignoreAccent",void 0),xe([D()],t.prototype,"predicate",void 0),xe([D({})],t.prototype,"actualFilterValue",void 0),xe([D({})],t.prototype,"actualOperator",void 0),xe([D()],t.prototype,"type",void 0),xe([D()],t.prototype,"ejpredicate",void 0),xe([D()],t.prototype,"uid",void 0),xe([D()],t.prototype,"isForeignKey",void 0),xe([D()],t.prototype,"condition",void 0),t}(Wi),SCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D(!1)],t.prototype,"enableCache",void 0),xe([D(3)],t.prototype,"maxBlocks",void 0),xe([D(3)],t.prototype,"initialBlocks",void 0),t}(Wi),ECe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([ba([],wCe)],t.prototype,"columns",void 0),xe([D("FilterBar")],t.prototype,"type",void 0),xe([D()],t.prototype,"mode",void 0),xe([D(!0)],t.prototype,"showFilterBarStatus",void 0),xe([D(1500)],t.prototype,"immediateModeDelay",void 0),xe([D()],t.prototype,"operators",void 0),xe([D(!1)],t.prototype,"ignoreAccent",void 0),xe([D(!1)],t.prototype,"enableCaseSensitivity",void 0),xe([D(!1)],t.prototype,"showFilterBarOperator",void 0),t}(Wi),xCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D("Row")],t.prototype,"mode",void 0),xe([D("Flow")],t.prototype,"cellSelectionMode",void 0),xe([D("Single")],t.prototype,"type",void 0),xe([D(!1)],t.prototype,"checkboxOnly",void 0),xe([D(!1)],t.prototype,"persistSelection",void 0),xe([D("Default")],t.prototype,"checkboxMode",void 0),xe([D(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),xe([D(!0)],t.prototype,"enableToggle",void 0),xe([D(!1)],t.prototype,"allowColumnSelection",void 0),t}(Wi),TCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D([])],t.prototype,"fields",void 0),xe([D("")],t.prototype,"key",void 0),xe([D("contains")],t.prototype,"operator",void 0),xe([D(!0)],t.prototype,"ignoreCase",void 0),xe([D(!1)],t.prototype,"ignoreAccent",void 0),t}(Wi),DCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D()],t.prototype,"targetID",void 0),t}(Wi),ICe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D("Both")],t.prototype,"wrapMode",void 0),t}(Wi),ACe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D("Normal")],t.prototype,"mode",void 0),t}(Wi),kCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D(!0)],t.prototype,"showDropArea",void 0),xe([D(!1)],t.prototype,"allowReordering",void 0),xe([D(!1)],t.prototype,"showToggleButton",void 0),xe([D(!1)],t.prototype,"showGroupedColumn",void 0),xe([D(!0)],t.prototype,"showUngroupButton",void 0),xe([D(!1)],t.prototype,"disablePageWiseAggregates",void 0),xe([D([])],t.prototype,"columns",void 0),xe([D()],t.prototype,"captionTemplate",void 0),xe([D(!1)],t.prototype,"enableLazyLoading",void 0),t}(Wi),RCe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D(!1)],t.prototype,"allowAdding",void 0),xe([D(!1)],t.prototype,"allowEditing",void 0),xe([D(!1)],t.prototype,"allowDeleting",void 0),xe([D("Normal")],t.prototype,"mode",void 0),xe([D(!0)],t.prototype,"allowEditOnDblClick",void 0),xe([D(!0)],t.prototype,"showConfirmDialog",void 0),xe([D(!1)],t.prototype,"showDeleteConfirmDialog",void 0),xe([D("")],t.prototype,"template",void 0),xe([D("")],t.prototype,"headerTemplate",void 0),xe([D("")],t.prototype,"footerTemplate",void 0),xe([D("Top")],t.prototype,"newRowPosition",void 0),xe([D({})],t.prototype,"dialog",void 0),xe([D(!1)],t.prototype,"allowNextRowEdit",void 0),t}(Wi),_Ce=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Uu(t,r),xe([D("Spinner")],t.prototype,"indicatorType",void 0),t}(Wi),rV=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isPreventScrollEvent=!1,s.inViewIndexes=[],s.keyA=!1,s.frozenRightCount=0,s.frozenLeftCount=0,s.tablesCount=1,s.movableCount=0,s.visibleFrozenLeft=0,s.visibleFrozenRight=0,s.visibleMovable=0,s.frozenLeftColumns=[],s.frozenRightColumns=[],s.movableColumns=[],s.media={},s.isFreezeRefresh=!1,s.tableIndex=0,s.componentRefresh=ur.prototype.refresh,s.isVirtualAdaptive=!1,s.vRows=[],s.vcRows=[],s.vGroupOffsets={},s.rowUid=0,s.currentViewData=[],s.isManualRefresh=!1,s.isAutoFitColumns=!1,s.enableDeepCompare=!1,s.totalDataRecordsCount=0,s.disableSelectedRecords=[],s.partialSelectedRecords=[],s.lockcolPositionCount=0,s.prevPageMoving=!1,s.pageTemplateChange=!1,s.isAutoGen=!1,s.mediaBindInstance={},s.commandDelIndex=void 0,s.asyncTimeOut=50,s.isExportGrid=!1,s.enableLogger=!0,s.needsID=!0,e.Inject(AJ),ui("mergePersistData",s.mergePersistGridData,s),s}var e;return Uu(t,r),e=t,t.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],n={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},s=0;s<i.length;s++)for(var o=this[i[s]],a=0,l=n[i[s]];a<l.length;a++)delete o[l[a]];var u=this.pageSettings.template,p=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:p},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!f(this.pagerTemplate);var m=this.addOnPersist(i);return p.template=u,this.setProperties({pageSettings:p},!0),m},t.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this]}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),i.push({member:"resize",args:[this]}),this.allowReordering&&i.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(i)),i},t.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&i.push({member:"logger",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new nCe,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=ur.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{datarole:"grid"}),bc({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new tCe(this,this.serviceLocator),this.searchModule=new kJ(this),this.scrollModule=new RJ(this),this.notify(jp,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),LT(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(Mq,{}),this.getMediaColumns(),oV(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner(),this.notify(Ba,{}),"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},t.prototype.showSpinner=function(){this.isExportGrid||Ul(this.element)},t.prototype.hideSpinner=function(){this.isExportGrid||Rl(this.element)},t.prototype.showMaskRow=function(i,n){var s=this.getHeaderContent().firstChild,o=this.getContent().firstChild,a=this.getFooterContent();if(n){var l=n.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),u='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var p=0;p<h;p++){l.innerHTML+=u;var m=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));m[0].classList.add("e-mask-checkbox-filter-intent"),m[1].classList.add("e-mask-checkbox-filter-span-intent")}}else{if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(o.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var C=0===(y=o.getBoundingClientRect().height)?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:y,S=Math.ceil(C/this.getRowHeight());return"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(s,1)),void(this.contentMaskTable=this.createEmptyMaskTable(o,S))}if(this.maskRowContentScroll=!(!this.enableVirtualization||!i),!(this.contentMaskTable||this.isFrozenGrid()&&this.enableColumnVirtualization&&"X"===i)){var T=o;if(this.isFrozenGrid()){if(!this.isInitialLoad&&!this.enableVirtualization&&this.frozenRows&&"auto"!==this.height){var y=T.getBoundingClientRect().height-this.frozenRows*this.getRowHeight();T.style.height=y+"px"}T=T.querySelector(".e-frozen-left-content, .e-frozen-right-content")}else this.enableVirtualization&&(T=T.querySelector(".e-virtualtable"));f(T.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(T,this.getContentMaskColumns(),i))}if(this.headerMaskTable||!(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===i)||this.isFrozenGrid()&&(this.enableVirtualization&&"Y"===i||this.enableColumnVirtualization&&"X"===i||this.enableInfiniteScrolling&&"down"===i)||(T=s,this.isFrozenGrid()?T=T.querySelector(".e-frozen-left-header, .e-frozen-right-header"):this.enableColumnVirtualization&&"X"===i&&(T=T.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(T,this.getContentMaskColumns(),i)),this.movableHeaderMaskTable||!this.isFrozenGrid()||this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i||(T=s.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(T=T.querySelector(".e-virtualtable")),this.movableHeaderMaskTable=this.createMaskTable(T,this.getMovableContentMaskColumns(),i)),!this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&!(this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i)&&(this.rightHeaderMaskTable=this.createMaskTable(s.querySelector(".e-frozen-right-header"),this.getRightContentMaskColumns(),i)),!this.movableContentMaskTable&&this.isFrozenGrid()&&(T=o.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(T=T.querySelector(".e-virtualtable")),f(T.querySelector("tbody"))||(this.movableContentMaskTable=this.createMaskTable(T,this.getMovableContentMaskColumns(),i))),!this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&(this.rightContentMaskTable=this.createMaskTable(o.querySelector(".e-frozen-right-content"),this.getRightContentMaskColumns(),i)),a&&a.querySelector(".e-summaryrow")){var R=a.firstChild;if(!this.footerContentMaskTable){var P=R;this.isFrozenGrid()&&(P=P.querySelector(".e-frozen-left-footercontent, .e-frozen-right-footercontent")),this.footerContentMaskTable=this.createMaskTable(P)}this.isFrozenGrid()&&(this.movableFooterContentMaskTable||(this.movableFooterContentMaskTable=this.createMaskTable(R.querySelector(".e-movablefootercontent"))),"Left-Right"===this.getFrozenMode()&&!this.rightFooterContentMaskTable&&(this.rightFooterContentMaskTable=this.createMaskTable(R.querySelector(".e-frozen-right-footercontent"))))}this.enableVirtualization&&i||A.add(o,"scroll",this.translateMaskRow,this)}},t.prototype.getContentMaskColumns=function(){var i=this.getColumns();return this.isFrozenGrid()&&("Left"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode()?i=this.frozenColumns?i.slice(0,this.frozenColumns):this.getFrozenLeftColumns():"Right"===this.getFrozenMode()&&(i=this.getFrozenRightColumns())),i},t.prototype.getMovableContentMaskColumns=function(){var i=this.getColumns();return this.frozenColumns?i.slice(this.frozenColumns,i.length):this.getMovableColumns()},t.prototype.getRightContentMaskColumns=function(){return this.getFrozenRightColumns()},t.prototype.createEmptyMaskTable=function(i,n){var s=this.createElement("table",{className:"e-table e-masked-table"}),o=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<n;h++)o.appendChild(a.cloneNode(!0));return s.appendChild(o),i.appendChild(s),s},t.prototype.createMaskTable=function(i,n,s){var o=i,a=!!j(o,".e-gridheader"),l=!!j(o,".e-gridcontent"),h=!!j(o,".e-gridfooter"),u=this.getContent().firstChild,p=u.scrollHeight,m=o.querySelector("table");this.isFrozenGrid()&&(l&&(o.style.overflow="hidden"),o.style.position="relative");var y=m.cloneNode();y.removeAttribute("role"),y.removeAttribute("id"),y.removeAttribute("aria-multiselectable"),y.removeAttribute("aria-colcount"),y.removeAttribute("aria-rowcount"),y.style.position="absolute",y.style.zIndex="1",y.style.width=m.getBoundingClientRect().width+"px",a&&!(this.enableColumnVirtualization&&"X"===s)&&(y.style.transform="translate(0px,"+m.querySelector("thead").getBoundingClientRect().height+"px)"),y.setAttribute("class","e-table e-masked-table");var C=m.querySelector("colgroup").cloneNode(!0);if(C.removeAttribute("id"),C.setAttribute("class","e-masked-colgroup"),y.appendChild(C),a&&this.enableColumnVirtualization&&"X"===s){var S=this.createMaskRow(C,n),T=m.querySelector("thead"),R=[].slice.call(T.querySelectorAll("tr")),P=T.cloneNode();P.removeAttribute("role"),P.setAttribute("class","e-masked-thead");for(var O=R.length,N=0;N<O;N++)P.appendChild(S.cloneNode(!0)),P.childNodes[N].style.height=R[N].getBoundingClientRect().height+"px";y.appendChild(P)}var z=m.querySelector("tbody").cloneNode();z.removeAttribute("role"),z.setAttribute("class","e-masked-tbody");var U=m.querySelector("tbody");if(l||a&&this.isFrozenGrid()){var ae=u;if(O=a&&this.isFrozenGrid()?this.frozenRows:Math.ceil(ae.getBoundingClientRect().height/this.getRowHeight()),U.querySelector(".e-emptyrow")||!U.childNodes.length||l&&this.childGrid){var me=(S=this.createMaskRow(C,n)).cloneNode(!0);for(me.classList.add("e-altrow"),N=0;N<O;N++){var Te=l&&this.isFrozenGrid()&&this.frozenRows?this.frozenRows+1:1;z.appendChild((N+Te)%2==0?me.cloneNode(!0):S.cloneNode(!0))}}else{R=[].slice.call(U.querySelectorAll('tr:not([style*="display:none"]):not([style*="display: none"])'));var oe=U.querySelector(".e-addedrow, .e-editedrow"),Ie=void 0;for(oe&&(Ie=R.indexOf(oe),oe.classList.contains("e-addedrow")?R.splice(Ie,2):R.splice(Ie,1)),O=a&&this.isFrozenGrid()||this.enableVirtualization&&s?R.length:O<=R.length?O:R.length,N=0;N<O;N++)z.appendChild(this.applyMaskRow(R[N].cloneNode(!0),R[N].getBoundingClientRect().height));if(oe&&oe.classList.contains("e-editedrow")){var De=z.childNodes[Ie];De.style.height=this.getRowHeight()+"px",De.classList.add("e-row"),oe.classList.contains("e-altrow")&&De.classList.add("e-altrow")}}}if(y.appendChild(z),h){var fe=m.querySelector("tfoot"),_e=fe.cloneNode();for(_e.setAttribute("class","e-masked-tfoot"),R=[].slice.call(fe.querySelectorAll("tr")),N=0;N<R.length;N++)_e.appendChild(this.applyMaskRow(R[N].cloneNode(!0),R[N].getBoundingClientRect().height));y.appendChild(_e)}if(o.insertBefore(y,o.firstChild),a&&this.isFrozenGrid()&&U.getBoundingClientRect().height<y.querySelector("tbody").getBoundingClientRect().height){var je=y.querySelector("tbody").getBoundingClientRect().height-U.getBoundingClientRect().height,Se=this.createElement("div",{className:"e-masked-table-holder",attrs:{style:"height: "+je+"px;"}});o.appendChild(Se)}else a&&this.isFrozenGrid()&&(!this.enableColumnVirtualization||"X"!==s)&&(y.style.height=o.getBoundingClientRect().height-m.querySelector("thead").getBoundingClientRect().height+"px");if(l&&(!this.enableVirtualization||!s)){var Pe=p-y.getBoundingClientRect().height,Ve=u.scrollTop<=(Pe=Pe<0?0:Pe)?u.scrollTop:Pe;this.enableVirtualization&&(Ve-=mU(j(o,".e-virtualtable")).height),y.style.transform="translate(0px,"+Ve+"px)"}return y},t.prototype.applyMaskRow=function(i,n){var s=i;s.removeAttribute("role"),s.removeAttribute("aria-rowindex"),s.removeAttribute("data-rowindex"),s.removeAttribute("data-uid"),s.classList.add("e-masked-row"),s.style.height=n+"px";for(var o=[].slice.call(s.childNodes),a=0;a<o.length;a++){var l=o[a],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return s},t.prototype.createMaskRow=function(i,n){var s=i,o=n,a=this.createElement("tr",{className:"e-masked-row e-row"});"Vertical"!==this.rowRenderingMode&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,u=0;h<s.childNodes.length;h++){var p=s.childNodes[h],m=l.cloneNode();m.innerHTML=this.getShimmerTemplate(),p.classList.contains("e-group-intent")||p.classList.contains("e-detail-intent")||p.classList.contains("e-drag-intent")?p.classList.contains("e-group-intent")?m.firstChild.classList.add("e-mask-group-intent"):p.classList.contains("e-detail-intent")?m.firstChild.classList.add("e-mask-detail-intent"):p.classList.contains("e-drag-intent")&&m.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&o[u]&&m.setAttribute("data-cell",o[u].headerText?o[u].headerText:o[u].field),"none"===p.style.display?m.classList.add("e-hide"):(m.style.textAlign=o[u]&&o[u].textAlign?o[u].textAlign.toLowerCase():this.enableRtl?"right":"left",o[u]&&("checkbox"===o[u].type||o[u].displayAsCheckBox)&&m.firstChild.classList.add("e-mask-checkbox-intent")),u++),a.appendChild(m)}return a},t.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},t.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),n=0;n<i.length;n++)i[n]&&i[n].classList.add("e-shimmer-wave")},t.prototype.translateMaskRow=function(i){for(var n=i.target,s=n.querySelectorAll(".e-masked-table"),o=0;o<s.length;o++){var a=s[o];if(a){var l=n.scrollHeight-a.getBoundingClientRect().height,h=n.scrollTop<=(l=l<0?0:l)?n.scrollTop:l;this.enableVirtualization&&(h-=mU(j(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},t.prototype.removeMaskRow=function(){var i=this.getContent().firstChild;A.remove(i,"scroll",this.translateMaskRow);for(var n=[this.headerMaskTable,this.movableHeaderMaskTable,this.rightHeaderMaskTable,this.contentMaskTable,this.movableContentMaskTable,this.rightContentMaskTable,this.footerContentMaskTable,this.movableFooterContentMaskTable,this.rightFooterContentMaskTable],s=0;s<n.length;s++){var o=n[s];if(o){if(this.isFrozenGrid()&&!j(o,".e-gridfooter")){var a=o.parentElement;if(a.style.overflow="",a.style.position="",j(o,".e-frozen-left-header")||j(o,".e-movableheader")||j(o,".e-frozen-right-header")){var l=a.querySelector(".e-masked-table-holder");l&&$e(l)}}$e(o)}}this.headerMaskTable=null,this.movableHeaderMaskTable=null,this.rightHeaderMaskTable=null,this.contentMaskTable=null,this.movableContentMaskTable=null,this.rightContentMaskTable=null,this.footerContentMaskTable=null,this.movableFooterContentMaskTable=null,this.rightFooterContentMaskTable=null},t.prototype.refreshMaskRow=function(){var i=this.getHeaderContent().firstChild,n=this.getContent().firstChild;if(this.isInitialLoad||this.getColumns().length){if(this.contentMaskTable){var s=n;this.isFrozenGrid()?s=s.querySelector(".e-frozen-left-content, .e-frozen-right-content"):this.enableVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)}this.headerMaskTable&&this.isFrozenGrid()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-left-header, .e-frozen-right-header")),this.movableHeaderMaskTable&&this.isFrozenGrid()&&(s=i.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-right-header")),this.movableContentMaskTable&&this.isFrozenGrid()&&(s=n.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(n.querySelector(".e-frozen-right-content"))}},t.prototype.refreshMaskRowColgroupWidth=function(i){var n=i.querySelector("table:not(.e-masked-table)"),s=n.querySelector(xi).cloneNode(!0),o=i.querySelector(".e-masked-table");s.removeAttribute("id"),s.setAttribute("class","e-masked-colgroup");for(var a=0;a<s.childNodes.length;a++)s.childNodes[a].removeAttribute("class");$e(o.querySelector(".e-masked-colgroup")),o.insertBefore(s,o.firstChild),o.style.width=n.getBoundingClientRect().width+"px"},t.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!f(i))for(var n=0;n<i.length;n++)!f(i[n].hideAtMedia)&&(f(i[n].visible)||i[n].visible)&&this.pushMediaColumn(i[n],n)}},t.prototype.pushMediaColumn=function(i,n){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(n,this.media[i.uid]),this.mediaBindInstance[n]=this.mediaQueryUpdate.bind(this,n),this.media[i.uid].addListener(this.mediaBindInstance[n])},t.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var n=this.getColumnIndexByUid(i.uid),s=0;s<this.mediaCol.length;s++)if(i.uid===this.mediaCol[s].uid)return void this.mediaCol.splice(s,1);this.pushMediaColumn(i,n)}},t.prototype.mediaQueryUpdate=function(i,n){var s=this.getColumns()[i];this.mediaCol.some(function(o){return o.uid===s.uid})&&(s.visible=n.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,s.visible?this.showHider.show(s.headerText,"headerText"):this.showHider.hide(s.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+lb);this.aggregates.length&&this.element.scrollHeight>this.height&&i&&B([i],["e-footerpadding"]),this.getColumns().filter(function(s){return"checkbox"===s.type}).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),W([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()},t.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var i=this.element;if(i){var n=!(!i.querySelector("."+qs)||!i.querySelector("."+Ps));n&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(un,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),n&&r.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!X.isIE&&(this.element.innerHTML="");for(var s=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],o=0;o<s.length;o++)this[s[o]]&&(this[s[o]]=null);this.element.innerHTML="",ai(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}},t.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+qs)&&!i.querySelector("."+Ps)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},t.prototype.setCSSClass=function(i){this.cssClass&&B([this.element],this.cssClass.split(" ")),i&&W([this.element],i.split(" "))},t.prototype.onPropertyChanged=function(i,n){var l,s=!1,o=!1,a=!1;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var u=Object.keys(i);u.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0);for(var p=0,m=u;p<m.length;p++){var y=m[p];switch(y){case"allowPaging":this.notify(Ar,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Va,{module:"pager",properties:i.pageSettings});break}this.notify(Va,{module:"pager",properties:i.pageSettings}),(f(i.pageSettings.currentPage)&&f(i.pageSettings.pageSize)&&f(i.pageSettings.totalRecordsCount)||!f(n.pageSettings)&&i.pageSettings.currentPage!==n.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(Ar,{module:"sort",enable:this.allowSorting}),s=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(Ar,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(Ar,{module:"scroll",properties:{width:i.width,height:i.height}});break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(Ar,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(Ar,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(n.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=bl(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=bl(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(Ar,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,l=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(Ar,{module:"toolbar"});break;case"groupSettings":this.notify(Va,{module:"group",properties:i.groupSettings,oldProperties:n.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(Ar,{module:"aggregate",properties:i});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),a=!0,o=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(y,i,o)}}l&&this.updateDefaultCursor(),o?a||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(zo,{requestType:"refresh"}),s=!1,this.maintainSelection(i.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(i,n,s){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=n.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!n.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=n.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=n.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=n.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?B([this.element],"e-grid-min-height"):W([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(Ar,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(Ar,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(Ar,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(Ar,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Va,{module:"filter",properties:n.filterSettings});break;case"searchSettings":this.notify(Va,{module:"search",properties:n.searchSettings});break;case"sortSettings":this.notify(Va,{module:"sort"});break;case"selectionSettings":this.notify(Va,{module:"selection",properties:n.selectionSettings});break;case"editSettings":this.notify(Va,{module:"edit",properties:n.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(tu,{case:"textwrap",isModeChg:"textWrapSettings"===i});break;case"dataSource":var o=this.getDataModule().getState();if(Object.getPrototypeOf(n).deepWatch)for(var a=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(n.dataSource);l<h.length;l++)this.setRowData(re(a,this.dataSource[h[l]]),this.dataSource[h[l]]);else if(o.isPending){var u=f(this.dataSource)?[]:this.dataSource.result,p=o.group||[];for(l=0;l<p.length;l++)u=Ye.group(u,p[l],o.aggregates||[]);this.dataSource={result:u,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),o.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(p_,{}),s||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Wq,{}));this.scrollRefresh();break;case"enableHover":(n.enableHover?B:W)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(n.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(E_,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(Zq,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(n.enableStickyHeader)}},t.prototype.maintainSelection=function(i){var n=this;if(-1!==i){var s=function(){n.selectRow(i),n.off(qr,s)};this.on(qr,s,this)}},t.prototype.setProperties=function(i,n){r.prototype.setProperties.call(this,i,n),i.filterSettings&&this.filterModule&&n&&this.filterModule.refreshFilter()},t.prototype.setTablesCount=function(){var i=this.getFrozenColumns(),n=this.getFrozenLeftColumnsCount(),s=this.getFrozenRightColumnsCount();!i||n||s?!i&&(n||s)&&(n&&!s||s&&!n?this.tablesCount=2:n&&s&&(this.tablesCount=3)):this.tablesCount=2},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),n=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),s=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var o=this.contentModule.getHeaderCells();i=o.length?o:i}for(var a=0;a<i.length;a++){(this.allowGrouping||this.allowReordering||this.allowSorting)&&i[a].classList.add(s[a].allowReordering&&s[a].allowSorting&&s[a].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(var h=0;h<n.length;h++)this.allowReordering&&n[h].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(i,n){for(var s=0,o=i.length;s<o;s++)i[s].columns?this.updateColumnModel(i[s].columns,!0):this.columnModel.push(i[s]);(f(n)||!n)&&(this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns())},t.prototype.updateColumnLevelFrozen=function(){var i=this.columnModel,n=[],s=[],o=[];if(this.frozenLeftCount||this.frozenRightCount){for(var a=0,l=i.length;a<l;a++){var h=i[a];"Left"===h.freeze?(h.freezeTable=Jr,n.push(h)):"Right"===h.freeze?(h.freezeTable=tr,s.push(h)):(h.freezeTable="movable",o.push(h))}this.columnModel=n.concat(o).concat(s)}},t.prototype.updateFrozenColumns=function(){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var i=this.columnModel,n=this.frozenColumns,s=this.getFrozenColumns(),o=0,a=0,l=i.length;a<l;a++){var h=i[a];n&&(h.freezeTable=a<n?Jr:"movable"),h.isFrozen&&a>=n?(h.freezeTable=Jr,i.splice(this.frozenColumns+o,0,i.splice(a,1)[0]),o++):s&&!n&&(h.freezeTable="movable")}},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var i=this.columnModel,n=0,s=0,o=this.getFrozenColumns(),a=0;a<i.length;a++)i[a].lockColumn&&(a<o?(i.splice(n,0,i.splice(a,1)[0]),n++):(i.splice(o+s,0,i.splice(a,1)[0]),s++))},t.prototype.checkLockColumns=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.checkLockColumns(i[n].columns):i[n].lockColumn&&this.lockcolPositionCount++},t.prototype.getColumns=function(i){var n=this,s=this.inViewIndexes.map(function(h){return h-n.groupSettings.columns.length}).filter(function(h){return h>-1}),o=s.length;(!this.enableColumnVirtualization||f(this.columnModel)||0===this.columnModel.length||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=0===o?this.columnModel:this.columnModel.slice(s[0],s[o-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&s.length&&s[0]>0&&(a=this.contentModule.ensureFrozenCols(a)),a},t.prototype.getStackedHeaderColumnByHeaderText=function(i,n){for(var s=0;s<n.length;s++){var o=n[s];if(o.field===i||o.headerText===i){this.stackedColumn=o;break}o.columns&&this.getStackedHeaderColumnByHeaderText(i,o.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},t.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(lb)[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(lb)[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(i){this.gridPager=i},t.prototype.getRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getMovableRowByIndex=function(i){return this.contentModule.getMovableRowByIndex(i)},t.prototype.getFrozenRowByIndex=function(i){return this.getFrozenDataRows()[i]},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getFrozenRightRowByIndex(i)},t.prototype.getRowInfo=function(i){var n=i,s={target:i};if(!f(i)&&f(ge(n,"e-detailrowcollapse")&&f(ge(n,"e-recordplusexpand")))){var o=j(n,"."+Ji);if(!o){var a=j(n,"."+bn);if(!f(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(Ii),10);s={row:a,rowData:l.data,rowIndex:h}}return s}var u=parseInt(o.getAttribute(Us),10);if(!f(o)&&!isNaN(u)){var p=j(o,"."+bn),m=(h=parseInt(p.getAttribute(Ii),10),this.getFrozenColumns()),y=this.columnModel[u].getFreezeTableName(),C=this.contentModule.getRows(),S=u+this.getIndentCount();this.isFrozenGrid()&&(y===Jr?C=this.contentModule.getRows():"movable"===y?(S=u-m-this.frozenLeftCount,C=this.contentModule.getMovableRows()):y===tr&&(S=u-(this.frozenLeftCount+this.movableCount),C=this.contentModule.getFrozenRightRows()));var T=C.filter(function(N){return N.uid===p.getAttribute("data-uid")}),R={},P=void 0;Object.keys(T).length&&(R=T[0].data,P=T[0].cells[S].column),s={cell:o,cellIndex:u,row:p,rowIndex:h,rowData:R,column:P,target:i}}}return s},t.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getFrozenRightRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(i){if(f(this.getContentTable().querySelector(rt)))return[];var n=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(rt),s=[].slice.call(n.children);if(this.frozenRows){var o=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+_d).querySelector(rt):this.getHeaderTable().querySelector(rt),a=[].slice.call(o.children);s=this.addMovableRows(a,s)}return this.generateDataRows(s,i)},t.prototype.addMovableRows=function(i,n){for(var s=0,o=n.length;s<o;s++)i.push(n[s]);return i},t.prototype.generateDataRows=function(i,n){for(var s=[],o=0,a=i.length;o<a;o++)i[o].classList.contains(bn)&&(!i[o].classList.contains("e-hiddenrow")||n)&&(this.isCollapseStateEnabled()?s[parseInt(i[o].getAttribute("data-rowindex"),10)]=i[o]:s.push(i[o]));return s},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(i){if(!this.isFrozenGrid())return[];var n=[].slice.call(this.getContent().querySelector("."+Fn).querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+Kn).querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(i){var n=[].slice.call(this.getContent().querySelector("."+ju).querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+_d).querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(i){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];var n=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.setCellValue=function(i,n,s){var a="data",l="index",u="Right"===this.getFrozenMode(),p=this.getPrimaryKeyFieldNames()[0],m=new eh(this,this.serviceLocator),y=this.getColumnIndexByField(n),C=this.getColumnByField(n),T=("movable"===C.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===C.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(function(me){return re(p,me.data)===i})[0],R=T?this.element.querySelector("[data-uid="+T.uid+"]"):null;if(!f(R)){ui(n,s,T[a]);var P=this.getFrozenLeftColumnsCount()||this.getFrozenColumns(),O=this.getMovableColumnsCount();this.isRowDragable()&&!u&&P++;var N=P+O,z=this.enableVirtualization?R.children[y]:this.getCellFromIndex(T[l],y);if(!f(z)){var U="movable"===C.getFreezeTableName()?P:"frozen-right"===C.getFreezeTableName()?N:0;this.groupSettings.columns.length&&(y+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&y++,this.isRowDragable()&&!u&&y++,m.refreshTD(z,T.cells[y-U],T[a],{index:T[l]}),this.aggregates.length>0&&(this.notify(Wm,{}),this.groupSettings.columns.length>0&&this.notify(ob,{})),!f(T)&&!f(T.changes)&&(T.changes[n]=s),this.trigger(dq,{cell:z,column:C,data:T[a]})}}},t.prototype.refreshReactColumnTemplateByUid=function(i){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){for(var s="cells",a=!(!n.childGrid||!n.element.querySelectorAll(".e-childgrid").length),l=a?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows(),h=n.getIndentCount(),u=0,p=!1,y=(n.getNormalizedColumnIndex(i),0);y<l.length;y++){var C=n.getRowObjectFromUID(l[y].getAttribute("data-uid"));if(a&&!C&&ge(l[y],"e-childgrid")){var S=ge(l[y],"e-childgrid").ej2_instances[0];C=S.getRowObjectFromUID(l[y].getAttribute("data-uid")),u=S.getIndentCount(),p=!0}if(C&&C.isDataRow&&!f(C.index)&&!l[y].classList.contains("e-editedrow"))for(var T=0;T<C[s].length;T++){var R=C[s][T];if(R.isTemplate){var P=new eh(n,n.serviceLocator),O=a?l[y].children[R.index+(p?u:h)]:n.getCellFromIndex(y,T-h);P.refreshTD(O,R,C.data,{index:C.index})}}p=!1}})},t.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var s=this.headerModule.rows,o=this.getNormalizedColumnIndex(i),a=0;a<s.length;a++){var l=s[a].cells[o];if(l&&l.column.uid===i){var h=new SJ(this,this.serviceLocator),u=ge(this.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");h.refresh(l,u)}}},t.prototype.setRowData=function(i,n){var o=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(o=o.filter(function(T){return T.isDataRow}));var l=o.filter(function(T){return re(a,T.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l.uid+"]")):void 0;if(!f(l)&&h.length){if(l.changes=n,this.isFrozenGrid()){var u=ge(h[0],"e-table"),p=u.parentElement.matches(".e-frozen-left-header,.e-frozen-left-content")?"left":u.parentElement.matches(".e-frozen-right-header,.e-frozen-right-content")?"right":"movable",m=this.getMovableRowsObject()[l.index];if(this.setFrozenRowData(m,n),"left"===p){var y=this.getRowsObject()[l.index];this.setFrozenRowData(y,n)}if("right"===p||this.frozenRightColumns.length>0){var C=this.getFrozenRightRowsObject()[l.index];this.setFrozenRowData(C,n)}}else if(this.frozenRows){var S=this.getRowsObject()[l.index];this.setFrozenRowData(S,n)}else this.setFrozenRowData(l,n);this.aggregates.length>0&&(this.notify(Wm,{}),this.groupSettings.columns.length>0&&this.notify(ob,{}))}},t.prototype.setFrozenRowData=function(i,n){var s=new wh(this.serviceLocator,null,this);i.changes=n,lV(i,this.getForeignKeyColumns(),i.changes),s.refresh(i,this.getColumns(),!0)},t.prototype.getCellFromIndex=function(i,n){return wU(this,this.getColumnByIndex(n),i,n)},t.prototype.getMovableCellFromIndex=function(i,n){if(!("Left-Right"===this.frozenName&&n>=this.movableCount)){var s=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[i]&&this.getMovableDataRows()[i].getElementsByClassName(Ji)[n-s]}},t.prototype.getFrozenRightCellFromIndex=function(i,n){var s=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),o=this.getFrozenRightDataRows();return o[i]&&o[i].getElementsByClassName(Ji)[n-s]},t.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[i]},t.prototype.getMovableColumnHeaderByIndex=function(i){var n=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenRightColumnHeaderByIndex=function(i){var n=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[i]},t.prototype.getRowObjectFromUID=function(i,n,s){var o=this.contentModule.getRows(),a=this.rowObject(o,i);return this.isFrozenGrid()&&(!a||n||s)?((!(a=this.rowObject(this.contentModule.getMovableRows(),i))&&"Left-Right"===this.getFrozenMode()||s)&&(a=this.rowObject(this.contentModule.getFrozenRightRows(),i)),a):(f(a)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(a=this.rowObject(this.vRows,i)),a)},t.prototype.rowObject=function(i,n){if(i)for(var s=0,o=i;s<o.length;s++){var a=o[s];if(a.uid===n)return a}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){var i=[];return this.isFrozenGrid()&&(i=this.contentModule.getMovableRows()),i},t.prototype.getFrozenRightRowsObject=function(){var i=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(i=this.contentModule.getFrozenRightRows()),i},t.prototype.getColumnHeaderByField=function(i){var n=this.getColumnByField(i);return n?this.getColumnHeaderByUid(n.uid):void 0},t.prototype.getColumnHeaderByUid=function(i){var n=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return n?n.parentElement:void 0},t.prototype.getColumnByIndex=function(i){var n;return this.getColumns().some(function(s,o){return n=s,o===i}),n},t.prototype.getColumnByField=function(i){return Iw(this.getColumns(),function(n){if(n.field===i)return n})[0]},t.prototype.getColumnIndexByField=function(i){for(var n=this.getColumns(),s=0;s<n.length;s++)if(n[s].field===i)return s;return-1},t.prototype.getColumnByUid=function(i){return Iw(this.getColumns().concat(this.getStackedColumns(this.columns)),function(n){if(n.uid===i)return n})[0]},t.prototype.getStackedColumns=function(i,n){void 0===n&&(n=[]);for(var s=0,o=i;s<o.length;s++){var a=o[s];a.columns&&(n.push(a),this.getStackedColumns(a.columns,n))}return n},t.prototype.getColumnIndexByUid=function(i){var n=Iw(this.getColumns(),function(s,o){if(s.uid===i)return o})[0];return f(n)?-1:n},t.prototype.getUidByColumnField=function(i){return Iw(this.getColumns(),function(n){if(n.field===i)return n.uid})[0]},t.prototype.getNormalizedColumnIndex=function(i){return this.getColumnIndexByUid(i)+this.getIndentCount()},t.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&f(this.rowDropSettings.targetID)&&i++,i},t.prototype.getColumnFieldNames=function(){for(var n,i=[],s=0,o=this.getColumns().length;s<o;s++)(n=this.getColumns()[s]).visible&&i.push(n.field);return i},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],n=0;n<this.columnModel.length;n++)this.columnModel[n].isPrimaryKey&&i.push(this.columnModel[n].field);return i},t.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var i=this,n=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(s){return n.push(i.getColumns()[s].uid)}),n},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(i,n){this.showHider.show(i,n=n||"headerText")},t.prototype.hideColumns=function(i,n){this.showHider.hide(i,n=n||"headerText")},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount},t.prototype.getMovableColumnsCount=function(){return this.movableCount},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":this.frozenColumns&&this.frozenRows?"Left":void 0},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitFrozenCount=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.splitFrozenCount(i[n].columns):"Right"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[n]),this.frozenRightCount++):"Left"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[n]),this.frozenLeftCount++):(!1!==i[n].visible&&this.visibleMovable++,this.movableColumns.push(i[n]),this.movableCount++)},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,n=this.columnModel,s=0;s<this.frozenColumns;s++)n[s].visible&&i++;if(this.frozenLeftCount||this.frozenRightCount)for(s=0;s<n.length;s++)n[s].visible&&("Left"===n[s].freeze||"Right"===n[s].freeze)&&i++;return i},t.prototype.getVisibleFrozenCount=function(i,n){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var s=0,o=i.length;s<o;s++)i[s].columns?n=this.getVisibleFrozenCount(i[s].columns,n):i[s].isFrozen&&i[s].visible&&n++;return n},t.prototype.getFrozenCount=function(i,n,s){for(var o=0,a=i.length;o<a;o++)i[o].columns?n=this.getFrozenCount(i[o].columns,n,s):(i[o].isFrozen&&s>this.frozenColumns-1&&n++,s++);return n},t.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},t.prototype.updateExternalMessage=function(i){this.pagerModule&&this.pagerModule.updateExternalMessage(i)},t.prototype.sortColumn=function(i,n,s){this.sortModule&&this.sortModule.sortColumn(i,n,s)},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},t.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},t.prototype.filterByColumn=function(i,n,s,o,a,l,h,u){this.filterModule&&this.filterModule.filterByColumn(i,n,s,o,a,l,h,u)},t.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},t.prototype.removeFilteredColsByField=function(i,n){this.filterModule&&this.filterModule.removeFilteredColsByField(i,n)},t.prototype.selectRow=function(i,n){this.selectionModule&&this.selectionModule.selectRow(i,n)},t.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(i,n){this.selectionModule&&this.selectionModule.selectCell(i,n)},t.prototype.selectCellsByRange=function(i,n){this.selectionModule.selectCellsByRange(i,n)},t.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(i,n){this.editModule&&this.editModule.deleteRecord(i,n)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(i,n){this.editModule&&this.editModule.addRecord(i,n)},t.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},t.prototype.editCell=function(i,n){this.editModule&&this.editModule.editCell(i,n)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(i,n,s){this.editModule&&this.editModule.updateCell(i,n,s)},t.prototype.updateRow=function(i,n){this.editModule&&this.editModule.updateRow(i,n)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(i,n){this.toolbarModule&&this.toolbarModule.enableItems(i,n)},t.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},t.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var n=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,s=[].slice.call(this.getHeaderTable().querySelector(xi).childNodes),o=[].slice.call(this.getContentTable().querySelector(xi).childNodes),a=n/30,l="Right"===this.getFrozenMode()?this.frozenRightCount:0,h=this.element.offsetWidth,u=function(p,m){if(bU(i)){var y=(m/h*100).toFixed(1)+"%";s[p].style.width=y,o[p].style.width=y}else s[p].style.width=m+"px",o[p].style.width=m+"px";i.notify(d_,{index:p,width:m})};for(a>=1&&(n=30/a),n<1&&(n=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(n=30);l<this.groupSettings.columns.length;)u(l,n),l++;this.isDetail()&&(u(l,n),l++),this.isRowDragable()&&u(l,n),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.resetIndentWidth=function(){if(bU(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(function(n){return(!n.width||"auto"===n.width)&&n.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(S_,{})},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(i,n){this.reorderModule&&this.reorderModule.reorderColumns(i,n)},t.prototype.reorderColumnByIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,n)},t.prototype.reorderColumnByTargetIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,n)},t.prototype.reorderRows=function(i,n){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,n)},t.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},t.prototype.disableRowDD=function(i){var n=this.getHeaderTable(),s=this.getContentTable(),o=n.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=i?"none":"";Ht(n.querySelector(xi).childNodes[0],{display:l}),Ht(s.querySelector(xi).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var u=a[h].firstElementChild;i?B([u],"e-hide"):W([u],["e-hide"])}for(var p=0;p<n.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;p++)u=o[p],i?B([u],"e-hide"):W([u],["e-hide"])},t.prototype.autoFitColumns=function(i){this.resizeModule&&this.resizeModule.autoFitColumns(i)},t.prototype.createColumnchooser=function(i,n,s){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,n,s)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new hU(this)),this.serviceLocator.register("cellRendererFactory",new iCe),this.serviceLocator.register("rendererFactory",new rCe),this.serviceLocator.register("localization",this.localeObj=new $r(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new mw(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new gCe(this)),this.serviceLocator.register("ariaService",this.ariaService=new k_),this.serviceLocator.register("focus",this.focusModule=new sCe(this))},t.prototype.processModel=function(){var s,o,i=this.groupSettings.columns,n=this.sortSettings.columns;if(this.allowGrouping)for(var a=function(m,y){o=0;for(var C=n.length;o<C;o++)if(n[o].field===i[m]){s=!0;break}if(s?l.allowSorting?l.sortedColumns.push(n[o].field):n[o].direction="Ascending":n.push({field:i[m],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var S=l.enableColumnVirtualization?l.columns.filter(function(T){return T.field===i[m]})[0]:l.getColumnByField(i[m]);S?S.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[m]})}},l=this,h=0,u=i.length;h<u;h++)a(h);if(!i.length)for(h=0;h<n.length;h++)this.sortedColumns.push(n[h].field);if(this.rowTemplateFn=bl(this.rowTemplate),this.detailTemplateFn=bl(this.detailTemplate),this.editTemplateFn=bl(this.editSettings.template),this.editHeaderTemplateFn=bl(this.editSettings.headerTemplate),this.editFooterTemplateFn=bl(this.editSettings.footerTemplate),!f(this.parentDetails)){var p=f(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",p,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(Dq,this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},t.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),X.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&this.element.classList.add(this.cssClass),ai(this.element,["e-responsive","e-default"],[]);var i=this.serviceLocator.getService("rendererFactory");this.headerModule=i.getRenderer(js.Header),this.contentModule=i.getRenderer(js.Content),this.printModule=new MJ(this,this.scrollModule),this.clipboardModule=new yCe(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),n=this.createElement("div",{className:ns,attrs:{tabIndex:"-1"}});xt([n,this.createElement("div",{className:"e-uptail e-tail"})],i),n.appendChild(this.createElement("span")),xt([n,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},t.prototype.updateGridLines=function(){switch(ai(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":iu(this.element,!1),iu(this.getContent(),!1),iu(i,!0);break;case"Content":iu(this.getContent(),!0),iu(this.element,!1),iu(i,!1);break;default:iu(this.element,!0),iu(this.getContent(),!1),iu(i,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(S_,{})}},t.prototype.removeTextWrap=function(){iu(this.element,!1),iu([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),iu(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(S_,{})},t.prototype.createTooltip=function(){this.toolTipObj=new PF({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},t.prototype.freezeRefresh=function(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(i){var n=this.getHeaderTable(),s="e-gridheader",o=this.createTable(n,s,"header"),a=this.createTable(n,s,"content"),l=i.classList.contains("e-headercell")?o:a,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className,l.querySelector(h).innerHTML=i.innerHTML;var u=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(o),document.body.removeChild(a),u>i.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var n=ge(i.target,"e-ellipsistooltip");if((this.prevElement!==n||"mouseout"===i.type)&&this.toolTipObj.close(),n&&"mouseout"!==i.type&&(!X.isDevice||-1===["A","BUTTON","INPUT"].indexOf(i.target.tagName))){if(n.getAttribute("aria-describedby"))return;if(this.getTooltipStatus(n)){var a=this.createElement("div");n.getElementsByClassName("e-headertext").length?(a.innerHTML=n.getElementsByClassName("e-headertext")[0].innerText,this.toolTipObj.content=a):(a.innerHTML=n.innerText,this.toolTipObj.content=a),this.prevElement=n,this.getColumns()[parseInt(n.getAttribute(Us),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(n)}}}this.hoverFrozenRows(i)},t.prototype.hoverFrozenRows=function(i){if(this.isFrozenGrid()){var n=ge(i.target,bn);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===i.type)for(var s=[].slice.call(this.element.getElementsByClassName("e-frozenhover")),o=0;o<s.length;o++)s[o].classList.remove("e-frozenhover");else if(n)for((s=[].slice.call(this.element.querySelectorAll('tr[data-rowindex="'+n.getAttribute(Ii)+'"]'))).splice(s.indexOf(n),1),o=0;o<s.length;o++)"true"!==n.getAttribute("aria-selected")&&s[o]?s[o].classList.add("e-frozenhover"):s[o]&&s[o].classList.remove("e-frozenhover")}},t.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var n=0;n<i.length;n++)if("EllipsisWithTooltip"===i[n].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(i,n,s){var o=this.createElement("div");o.className=this.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=n;var l=this.createElement("table",{attrs:{role:"grid"}});l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h="header"===s?"th":"td",u=this.createElement("tr",{attrs:{role:"row"}}),p=this.createElement(h);return u.appendChild(p),l.appendChild(u),a.appendChild(l),o.appendChild(a),document.body.appendChild(o),o},t.prototype.onKeyPressed=function(i){("tab"===i.action||"shiftTab"===i.action)&&this.toolTipObj.close()},t.prototype.wireEvents=function(){A.add(this.element,"click",this.mouseClickHandler,this),A.add(this.element,"touchend",this.mouseClickHandler,this),A.add(this.element,"focusout",this.focusOutHandler,this),A.add(this.element,"dblclick",this.dblClickHandler,this),A.add(this.element,"keydown",this.keyPressHandler,this),A.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new Hn(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),A.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),A.add(this.element,"mousemove",this.mouseMoveHandler,this),A.add(this.element,"mouseout",this.mouseMoveHandler,this),A.add(this.getContent(),"touchstart",this.tapEvent,this),A.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){A.remove(this.element,"click",this.mouseClickHandler),A.remove(this.element,"touchend",this.mouseClickHandler),A.remove(this.element,"focusout",this.focusOutHandler),A.remove(this.element,"dblclick",this.dblClickHandler),A.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),A.remove(this.element,"mousemove",this.mouseMoveHandler),A.remove(this.element,"mouseout",this.mouseMoveHandler),A.remove(this.element,"keydown",this.keyPressHandler),A.remove(this.getContent(),"touchstart",this.tapEvent),A.remove(document.body,"keydown",this.keyDownHandler),A.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on(Ac,this.dataReady,this),this.on(qr,this.recalcIndentWidth,this),this.on(So,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Jl,this.dataBoundFunction),this.on(Cs,this.onKeyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off(Ac,this.dataReady),this.off(qr,this.recalcIndentWidth),this.off(So,this.recalcIndentWidth),this.removeEventListener(Jl,this.dataBoundFunction),this.off(Cs,this.onKeyPressed))},t.prototype.getCurrentViewRecords=function(){return ws(this)?f(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||ge(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&((this.allowRowDragAndDrop||!ge(i.target,Ps)&&"TD"!==i.target.tagName)&&(this.allowGrouping||this.allowReordering||!ge(i.target,"e-gridheader"))||!i.touches)){ge(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!ge(i.target,"e-filterbarcell")&&i.preventDefault();var n=this.getRowInfo(i.target);n.cancel=!1;var o=!1,a=j(i.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));o=!!l&&l.isDataRow}o&&this.trigger("recordClick",n),this.notify(nl,i)}},t.prototype.checkEdit=function(i){var n=ge(i.target,bn),s="Batch"!==this.editSettings.mode&&this.isEdit&&n&&(n.classList.contains(Ha)||n.classList.contains(Fl));return!ge(i.target,"e-unboundcelldiv")&&(s||ge(i.target,Ji)&&ge(i.target,Ji).classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(i){var n=ge(i.target,"e-grid");if(!f(n)&&n.id===this.element.id&&!j(i.target,".e-unboundcelldiv")){var s=!1,o=j(i.target,"tr");if(o&&o.getAttribute("data-uid")){var a=this.getRowObjectFromUID(o.getAttribute("data-uid"));s=!!a&&a.isDataRow}var l=this.getRowInfo(i.target);l.target=i.target,s&&this.trigger("recordDoubleClick",l),this.notify(f_,i)}},t.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){ge(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var n=this.element.querySelector(".e-cancel:not(.e-hide)");n&&n.classList.add("e-hide");var s=i.relatedTarget,o=s?s.getAttribute("aria-owns"):null;(!s||!ge(s,"e-grid")&&(!f(o)&&o)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!X.isDevice&&("Batch"===this.editSettings.mode&&!((ge(s,"e-ddl")||ge(s,"e-ddt"))&&ge(s,"e-input-group"))&&!f(ge(s,"e-input-group"))&&(this.editModule.saveCell(),this.notify(HB,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(i){var n=ge(i.target,"e-grid");return!!(n&&n.id!==this.element.id||ge(i.target,"e-unboundcelldiv")&&f(n))},t.prototype.mergePersistGridData=function(i){var n=this.getLocalData();if(!f(n)&&""!==n||!f(i)){var s=f(i)?JSON.parse(n):i;this.enableVirtualization&&s.pageSettings&&(s.pageSettings.currentPage=1);var o=Object.keys(s);this.isProtectedOnChange=!0;for(var a=0,l=o;a<l.length;a++){var h=l[a];"object"!=typeof this[h]||f(this[h])?this[h]=s[h]:Array.isArray(this[h])&&"columns"===h?(oV(this[h]),this.mergeColumns(s[h],this[h]),this[h]=s[h]):de(this[h],s[h])}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(i,n){for(var s=i,o=function(h){var u=n.filter(function(p){return p.index===s[h].index})[0];f(u)||(u.columns&&u.columns.length?(a.mergeColumns(s[h].columns,u.columns),s[h]=de(u,s[h],{},!0)):s[h]=de(u,s[h],{},!0))},a=this,l=0;l<s.length;l++)o(l)},t.prototype.isDetail=function(){return!f(this.detailTemplate)||!f(this.childGrid)},t.prototype.isCommandColumn=function(i){var n=this;return i.some(function(s){return s.columns?n.isCommandColumn(s.columns):!(!s.commands&&!s.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(i){var n=this;return i.some(function(s){return s.columns?n.isForeignKeyEnabled(s.columns):!(!s.dataSource||!s.foreignKeyValue)})},t.prototype.keyPressHandler=function(i){var n=de(i,{cancel:!1});this.trigger("keyPressed",n),!0===n.cancel&&i.stopImmediatePropagation()},t.prototype.keyDownHandler=function(i){if(i.altKey){if(74===i.keyCode&&(this.keyA?(this.notify(qq,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(W([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===i.keyCode){var n=this.focusModule;if(n){if(!this.currentViewData.length)return;n.focusContent(),n.addOutline()}}65===i.keyCode&&(this.keyA=!0),72===i.keyCode&&this.keyA&&(this.notify(qq,{target:i.target,collapse:!0}),this.keyA=!1)}13===i.keyCode&&this.notify($B,i)},t.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.isEdit&&"escape"!==i.action&&"enter"!==i.action&&"shiftEnter"!==i.action&&"tab"!==i.action&&"shiftTab"!==i.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===i.action&&(i.preventDefault(),this.print()),this.notify(Cs,i)))},t.prototype.setInjectedModules=function(i){this.injectedModules=i},t.prototype.updateColumnObject=function(){LT(this.columns,this.enableColumnVirtualization,this),oV(this.columns),this.initForeignColumn(),this.notify(bw,{})},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function VCe(r){if(void 0!==P_)return P_;var t=si("table",{className:er,styles:"visibility: hidden",attrs:{role:"grid"}});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',r.appendChild(t);var e=t.querySelector("td").getBoundingClientRect();return r.removeChild(t),P_=Math.ceil(e.height)}(this.element)},t.prototype.refreshColumns=function(){this.setFrozenCount();var i=this.getContent().querySelector(".e-frozen-left-content"),n=this.getContent().querySelector(".e-frozen-right-content"),s=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!i&&this.frozenLeftCount||!n&&this.frozenRightCount||i&&!this.frozenLeftCount||n&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(s&&(1===this.getFrozenColumns()&&!i||0===this.getFrozenColumns()&&i))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){var a=this.contentModule.getMovableContent().querySelector("."+er);$e(a.querySelector(xi));var l=this.getHeaderContent().querySelector("."+Kn).querySelector(xi).cloneNode(!0);if(a.insertBefore(l,a.querySelector(rt)),"Left-Right"===this.getFrozenMode()){var h=this.contentModule.getFrozenRightContent().querySelector("."+er);$e(h.querySelector(xi));var u=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(xi).cloneNode(!0);h.insertBefore(u,h.querySelector(rt))}}if(this.isFrozenGrid()){var p=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=p,this.contentModule.getMovableContent().scrollLeft=p}},t.prototype.excelExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!1,o):null},t.prototype.csvExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!0,o):null},t.prototype.pdfExport=function(i,n,s,o){return this.pdfExportModule?this.pdfExportModule.Map(this,i,n,s,o):null},t.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},t.prototype.openColumnChooser=function(i,n){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,n)},t.prototype.scrollRefresh=function(){var i=this,n=function(){i.scrollModule.refresh(),i.off(qr,n)};this.on(qr,n,this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},t.prototype.selectRowsByRange=function(i,n){this.selectionModule&&this.selectionModule.selectRowsByRange(i,n)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},t.prototype.destroyTemplate=function(i,n){this.clearTemplate(i,n)},t.prototype.log=function(i,n){this.loggerModule&&this.loggerModule.log(i,n)},t.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},t.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+ns),n=this.getContent().querySelector(".e-scrollbar");if(i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto"),this.isFrozenGrid()&&n){var s=this.getContent().querySelector(".e-movablescrollbar"),o=this.getContent().querySelector(".e-movablechild");n.style.display="flex",s.offsetWidth>=o.offsetWidth&&(n.style.display="none",this.notify(y_,0))}},t.prototype.getRowIndexByPrimaryKey=function(i){var n=this.getPrimaryKeyFieldNames()[0];i="object"==typeof i?i[n]:i;for(var s=this.getRowsObject(),o=0;o<s.length;o++)if(!s[o].isDetailRow&&!s[o].isCaptionRow){var a=s[o].data[n];if(n.split(".").length>1&&(a=SU(n,s[o].data)),a===i)return s[o].index}return-1},t.prototype.grabColumnByFieldFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].field&&(n=s[o]);return n},t.prototype.grabColumnByUidFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].uid&&(n=s[o]);return n},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof Xe?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof Xe?this.dataSource.executeLocal(i):new Xe(this.dataSource,i).executeLocal(i)}return[]},t.prototype.getUserAgent=function(){var i=X.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(i)},t.prototype.tapEvent=function(i){this.getUserAgent()&&(Oc.timer?(clearTimeout(Oc.timer),Oc.timer=null,this.dblClickHandler(i),this.notify(xq,i)):Oc.timer=setTimeout(function(){Oc.timer=null},300))},t.prototype.getRowUid=function(i){return""+i+this.rowUid++},t.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector("."+Fn)},t.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector("."+ju)},t.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector("."+Kn)},t.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector("."+_d)},t.prototype.getRowElementByUID=function(i){var n,s=[];if(this.isFrozenGrid()){var o=[].slice.call(this.getFrozenVirtualContent().querySelector(rt).children),a=[].slice.call(this.getMovableVirtualContent().querySelector(rt).children),l=[];if(3===this.tablesCount&&(l=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(rt).children)),this.frozenRows){if(s=(s=[].slice.call(this.getFrozenVirtualHeader().querySelector(rt).children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector(rt).children)),3===this.tablesCount){var h=this.getHeaderContent().querySelector(".e-frozen-right-header");s=s.concat([].slice.call(h.querySelector(rt).children)).concat(l)}s=s.concat(o).concat(a)}else s=o.concat(a).concat(l)}else{var u=[].slice.call(this.getContent().querySelector(rt).children);s=this.frozenRows?(s=[].slice.call(this.getHeaderContent().querySelector(rt).children)).concat(u):u}for(var p=0,m=s;p<m.length;p++){var y=m[p];if(y.getAttribute("data-uid")===i){n=y;break}}return n},t.prototype.getHiddenColumns=function(){for(var i=[],n=0,s=this.columnModel;n<s.length;n++){var o=s[n];!1===o.visible&&i.push(o)}return i},t.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var n=0;if(-1!==i.indexOf("%")&&(i=parseInt(i,10)/100*this.element.clientHeight),i>this.getNoncontentHeight()+this.getRowHeight()&&(n=(i-this.getNoncontentHeight())/this.getRowHeight()),n>0)return Math.floor(n)}return 0},t.prototype.getNoncontentHeight=function(){var i=0;if(f(this.getHeaderContent().clientHeight)||(i+=this.getHeaderContent().clientHeight),this.toolbar&&!f(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!f(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!f(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!f(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!f(this.element.querySelector(".e-summaryrow").clientHeight))for(var n=0;n<this.element.getElementsByClassName("e-summaryrow").length;n++)i+=this.element.getElementsByClassName("e-summaryrow")[n].clientHeight;return i},t.prototype.getSummaryValues=function(i,n){return Ye.aggregates[i.type.toLowerCase()](n,i.field)},t.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportGrid(i)},t.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.exportGrid=function(i){var s=this.getDataModule().generateQuery(!0),o=(new pl).processQuery(new Xe({url:""}),s),a=JSON.parse(o.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));l.filterSettings.columns=a.where,l.searchSettings.fields=a.search&&a.search[0].fields||[],l.sortSettings.columns=a.sorted,l.columns=this.setHeaderText(l.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);var u=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),p=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});p.value=JSON.stringify(l),u.method="POST",u.action=i,u.appendChild(p),document.body.appendChild(u),u.submit(),u.remove()},t.prototype.setHeaderText=function(i,n){for(var s=0;s<i.length;s++){var o=this.getColumnByUid(i[s].uid);i[s].headerText=o.headerText,f(o.template)||(i[s].template="true"),i[s].format&&(i[s].format=JCe(this.getFormat(i[s].format),i[s].type,this.isExcel)),i[s].columns&&this.setHeaderText(i[s].columns,n);for(var a=Object.keys(i[s]),l=0;l<a.length;l++)n.indexOf(a[l])<0&&delete i[s][a[l]]}return i},t.prototype.getFormat=function(i){return"object"==typeof i?f(i.format)?i.skeleton:i.format:i},t.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},t.prototype.updateRowValue=function(i,n){var s={requestType:"save",data:n};this.showSpinner(),this.notify(g_,s),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(i){var n=this.getColumnHeaderByField(i);if(n){var s=n.querySelector(".e-filtermenudiv"),o=this.element.querySelector(".e-filter-popup");if(s&&o){var a=this.element.getBoundingClientRect(),l=s.getBoundingClientRect();o&&(o.style.left=o.offsetWidth+l.right>a.right?(l.right-o.offsetWidth-a.left).toString()+"px":(l.right-a.left).toString()+"px")}}},t.prototype.renderTemplates=function(){this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact?(this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates())},t.prototype.batchUpdate=function(i){this.processRowChanges(i)},t.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},t.prototype.processBulkRowChanges=function(i){var n=this;if(this.dataToBeUpdated)for(var s=[Up,"changedRecords",hb],o=this.getPrimaryKeyFieldNames()[0],a=0;a<s.length;a++)i[s[a]]&&YCe(this,i,s[a],o);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){n.processRowChanges(n.dataToBeUpdated),n.dataToBeUpdated=null},this.asyncTimeOut)},t.prototype.processRowChanges=function(i){var n=this,s=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var o=this.getDataModule().saveChanges(i,s,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?o.then(function(){n.setNewData()}):this.setNewData()},t.prototype.setNewData=function(){var i=this,n=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(o){i.bulkRefresh(o.result,n,o.count)})},t.prototype.deleteRowElement=function(i){var n=this.getRowElementByUID(i.uid),s=parseInt(n.getAttribute(Ii),10);$e(n),this.getFrozenColumns()&&$e(this.getMovableRows()[s])},t.prototype.bulkRefresh=function(i,n,s){for(var p,o=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(T){i.filter(function(R){return R[l]===a[T].data[l]}).length||(u.deleteRowElement(a[T]),a.splice(T,1),T--),p=T},u=this,m=0;m<a.length;m++)h(m),m=p;var y=function(T){var R;n.filter(function(P){P[l]===i[T][l]&&(P!==i[T]&&o.setRowData(i[T][l],i[T]),R=!0)}),R||C.renderRowElement(i[T],T)},C=this;for(m=0;m<i.length;m++)y(m);this.currentViewData=i;var S=[].slice.call(this.getContentTable().getElementsByClassName(bn));(function B_(r,t,e,i,n){for(var s=i||0,o=n||0;o<t.length;o++)if(t[o].isDataRow){t[o].index=s,t[o].isAltRow=!!r.enableAltRow&&s%2!=0,e[o].setAttribute(Ii,s.toString()),e[o].setAttribute(x_,(s+1).toString()),t[o].isAltRow?e[o].classList.add("e-altrow"):e[o].classList.remove("e-altrow");for(var a=0;a<e[o].cells.length;a++)e[o].cells[a].setAttribute("index",s.toString());s++}t.length||r.renderModule.emptyRow(!0)})(this,this.getRowsObject(),S),function FT(r){if(r.isFrozenGrid()){r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));var t=r.getFrozenMode()===Qt?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";r.contentModule.freezeRowElements=[].slice.call(r.element.querySelectorAll(t)),r.getFrozenMode()===Qt&&(r.contentModule.frozenRightRowElements=[].slice.call(r.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(Va,{module:"pager",properties:{totalRecordsCount:s}})},t.prototype.renderRowElement=function(i,n){var h,s=new wh(this.serviceLocator,null,this),a=new Md(this).generateRows([i]),l=s.render(a[0],this.getColumns());this.addRowObject(a[0],n);var p=this.getContentTable().querySelector(rt);if(p.querySelector(".e-emptyrow")){var m=p.querySelector(".e-emptyrow");if(m.parentNode.removeChild(m),this.getFrozenColumns()){var y=this.getContent().querySelector("."+Fn).querySelector(rt);y.firstElementChild.parentNode.removeChild(y.firstElementChild)}}this.getFrozenColumns()&&(h=function hV(r,t,e){t=t&&e&&e.isRowDragable()?t+1:t;for(var i=r.cloneNode(!0),n=0;n<t;n++)i.removeChild(i.children[0]);n=t;for(var s=r.childElementCount;n<s;n++)r.removeChild(r.children[r.childElementCount-1]);return i}(l,this.getFrozenColumns(),this),(this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector("."+Kn).querySelector(rt):this.getContent().querySelector("."+Fn).querySelector(rt)).appendChild(h),"auto"===this.height&&this.notify(y_,{})),p=this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector(rt):this.getContent().querySelector(rt),(p=this.getContent().querySelector(rt)).appendChild(l)},t.prototype.addRowObject=function(i,n){var s=this.getFrozenColumns();if(s){var o=this.getMovableRowsObject(),a=i.clone();a.cells=a.cells.slice(s),i.cells=i.cells.slice(0,s),o.splice(n,1,a)}this.getRowsObject().splice(n,1,i)},t.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),n=0,s=i.length;n<s;n++)i[n].visible=!i[n].isDataRow&&!i[n].isAggregateRow||"none"!==this.getRowElementByUID(i[n].uid).style.display},t.prototype.getHeight=function(i){return Number.isInteger(i)||-1===i.indexOf("%")?Number.isInteger(i)||"auto"===this.height?this.height:parseInt(i,10):parseInt(i,10)/100*this.element.clientHeight},t.prototype.getFrozenRightContent=function(){return this.getContent().querySelector(".e-frozen-right-content")},t.prototype.getFrozenRightHeader=function(){return this.getHeaderContent().querySelector(".e-frozen-right-header")},t.prototype.getMovableHeaderTbody=function(){return this.getMovableVirtualHeader().querySelector(rt)},t.prototype.getMovableContentTbody=function(){return this.getMovableVirtualContent().querySelector(rt)},t.prototype.getFrozenHeaderTbody=function(){return this.getFrozenVirtualHeader().querySelector(rt)},t.prototype.getFrozenLeftContentTbody=function(){return this.getFrozenVirtualContent().querySelector(rt)},t.prototype.getFrozenRightHeaderTbody=function(){return this.getFrozenRightHeader().querySelector(rt)},t.prototype.getFrozenRightContentTbody=function(){var n;return this.getFrozenRightContent()&&(n=this.getFrozenRightContent().querySelector(rt)),n},t.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||"Vertical"===this.rowRenderingMode)},t.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||"Vertical"===this.rowRenderingMode)},t.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},t.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},t.prototype.getCurrentVisibleColumns=function(i){for(var n=[],o=0,a=i?this.getColumns():this.columnModel;o<a.length;o++){var l=a[o];l.visible&&n.push(l)}return n},t.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},xe([D()],t.prototype,"parentDetails",void 0),xe([D([])],t.prototype,"columns",void 0),xe([D(!0)],t.prototype,"enableAltRow",void 0),xe([D(!0)],t.prototype,"enableHover",void 0),xe([D(!1)],t.prototype,"enableAutoFill",void 0),xe([D(!0)],t.prototype,"allowKeyboard",void 0),xe([D(!1)],t.prototype,"enableStickyHeader",void 0),xe([D(!1)],t.prototype,"allowTextWrap",void 0),xe([Cn({},ICe)],t.prototype,"textWrapSettings",void 0),xe([Cn({},ACe)],t.prototype,"resizeSettings",void 0),xe([D(!1)],t.prototype,"allowPaging",void 0),xe([Cn({},dCe)],t.prototype,"pageSettings",void 0),xe([Cn({},_Ce)],t.prototype,"loadingIndicator",void 0),xe([D(!0)],t.prototype,"enableVirtualMaskRow",void 0),xe([D(!1)],t.prototype,"enableVirtualization",void 0),xe([D(!1)],t.prototype,"enableColumnVirtualization",void 0),xe([D(!1)],t.prototype,"enableInfiniteScrolling",void 0),xe([Cn({},TCe)],t.prototype,"searchSettings",void 0),xe([D(!1)],t.prototype,"allowSorting",void 0),xe([D("Ellipsis")],t.prototype,"clipMode",void 0),xe([D(!0)],t.prototype,"allowMultiSorting",void 0),xe([D(!1)],t.prototype,"allowExcelExport",void 0),xe([D(!1)],t.prototype,"allowPdfExport",void 0),xe([Cn({},CCe)],t.prototype,"sortSettings",void 0),xe([Cn({},SCe)],t.prototype,"infiniteScrollSettings",void 0),xe([D(!0)],t.prototype,"allowSelection",void 0),xe([D(-1)],t.prototype,"selectedRowIndex",void 0),xe([Cn({},xCe)],t.prototype,"selectionSettings",void 0),xe([D(!1)],t.prototype,"allowFiltering",void 0),xe([D("Horizontal")],t.prototype,"rowRenderingMode",void 0),xe([D(!1)],t.prototype,"enableAdaptiveUI",void 0),xe([D(!1)],t.prototype,"allowReordering",void 0),xe([D(!1)],t.prototype,"allowResizing",void 0),xe([D(!1)],t.prototype,"allowRowDragAndDrop",void 0),xe([Cn({},DCe)],t.prototype,"rowDropSettings",void 0),xe([Cn({},ECe)],t.prototype,"filterSettings",void 0),xe([D(!1)],t.prototype,"allowGrouping",void 0),xe([D(!1)],t.prototype,"enableImmutableMode",void 0),xe([D(!1)],t.prototype,"showColumnMenu",void 0),xe([Cn({},kCe)],t.prototype,"groupSettings",void 0),xe([Cn({},RCe)],t.prototype,"editSettings",void 0),xe([ba([],vCe)],t.prototype,"aggregates",void 0),xe([D(!1)],t.prototype,"showColumnChooser",void 0),xe([Cn({},fCe)],t.prototype,"columnChooserSettings",void 0),xe([D(!1)],t.prototype,"enableHeaderFocus",void 0),xe([D("auto")],t.prototype,"height",void 0),xe([D("auto")],t.prototype,"width",void 0),xe([D("Default")],t.prototype,"gridLines",void 0),xe([D()],t.prototype,"rowTemplate",void 0),xe([D()],t.prototype,"detailTemplate",void 0),xe([D()],t.prototype,"childGrid",void 0),xe([D()],t.prototype,"queryString",void 0),xe([D("AllPages")],t.prototype,"printMode",void 0),xe([D("Expanded")],t.prototype,"hierarchyPrintMode",void 0),xe([D([])],t.prototype,"dataSource",void 0),xe([D(null)],t.prototype,"rowHeight",void 0),xe([D()],t.prototype,"query",void 0),xe([D("USD")],t.prototype,"currencyCode",void 0),xe([D()],t.prototype,"toolbar",void 0),xe([D()],t.prototype,"contextMenuItems",void 0),xe([D()],t.prototype,"columnMenuItems",void 0),xe([D()],t.prototype,"toolbarTemplate",void 0),xe([D()],t.prototype,"pagerTemplate",void 0),xe([D(0)],t.prototype,"frozenRows",void 0),xe([D(0)],t.prototype,"frozenColumns",void 0),xe([D("")],t.prototype,"cssClass",void 0),xe([D("All")],t.prototype,"columnQueryMode",void 0),xe([D({})],t.prototype,"currentAction",void 0),xe([D("default version")],t.prototype,"ej2StatePersistenceVersion",void 0),xe([K()],t.prototype,"created",void 0),xe([K()],t.prototype,"destroyed",void 0),xe([K()],t.prototype,"load",void 0),xe([K()],t.prototype,"rowDataBound",void 0),xe([K()],t.prototype,"queryCellInfo",void 0),xe([K()],t.prototype,"headerCellInfo",void 0),xe([K()],t.prototype,"actionBegin",void 0),xe([K()],t.prototype,"actionComplete",void 0),xe([K()],t.prototype,"actionFailure",void 0),xe([K()],t.prototype,"dataBound",void 0),xe([K()],t.prototype,"recordDoubleClick",void 0),xe([K()],t.prototype,"recordClick",void 0),xe([K()],t.prototype,"rowSelecting",void 0),xe([K()],t.prototype,"rowSelected",void 0),xe([K()],t.prototype,"rowDeselecting",void 0),xe([K()],t.prototype,"rowDeselected",void 0),xe([K()],t.prototype,"cellSelecting",void 0),xe([K()],t.prototype,"cellSelected",void 0),xe([K()],t.prototype,"cellDeselecting",void 0),xe([K()],t.prototype,"cellDeselected",void 0),xe([K()],t.prototype,"columnSelecting",void 0),xe([K()],t.prototype,"columnSelected",void 0),xe([K()],t.prototype,"columnDeselecting",void 0),xe([K()],t.prototype,"columnDeselected",void 0),xe([K()],t.prototype,"columnDragStart",void 0),xe([K()],t.prototype,"columnDrag",void 0),xe([K()],t.prototype,"columnDrop",void 0),xe([K()],t.prototype,"printComplete",void 0),xe([K()],t.prototype,"beforePrint",void 0),xe([K()],t.prototype,"pdfQueryCellInfo",void 0),xe([K()],t.prototype,"pdfHeaderQueryCellInfo",void 0),xe([K()],t.prototype,"pdfAggregateQueryCellInfo",void 0),xe([K()],t.prototype,"excelAggregateQueryCellInfo",void 0),xe([K()],t.prototype,"exportDetailDataBound",void 0),xe([K()],t.prototype,"excelQueryCellInfo",void 0),xe([K()],t.prototype,"excelHeaderQueryCellInfo",void 0),xe([K()],t.prototype,"beforeExcelExport",void 0),xe([K()],t.prototype,"excelExportComplete",void 0),xe([K()],t.prototype,"beforePdfExport",void 0),xe([K()],t.prototype,"pdfExportComplete",void 0),xe([K()],t.prototype,"rowDragStartHelper",void 0),xe([K()],t.prototype,"detailDataBound",void 0),xe([K()],t.prototype,"rowDragStart",void 0),xe([K()],t.prototype,"rowDrag",void 0),xe([K()],t.prototype,"rowDrop",void 0),xe([K()],t.prototype,"toolbarClick",void 0),xe([K()],t.prototype,"beforeOpenColumnChooser",void 0),xe([K()],t.prototype,"beforeOpenAdaptiveDialog",void 0),xe([K()],t.prototype,"batchAdd",void 0),xe([K()],t.prototype,"batchDelete",void 0),xe([K()],t.prototype,"batchCancel",void 0),xe([K()],t.prototype,"beforeBatchAdd",void 0),xe([K()],t.prototype,"beforeBatchDelete",void 0),xe([K()],t.prototype,"beforeBatchSave",void 0),xe([K()],t.prototype,"beginEdit",void 0),xe([K()],t.prototype,"commandClick",void 0),xe([K()],t.prototype,"cellEdit",void 0),xe([K()],t.prototype,"cellSave",void 0),xe([K()],t.prototype,"cellSaved",void 0),xe([K()],t.prototype,"resizeStart",void 0),xe([K()],t.prototype,"resizing",void 0),xe([K()],t.prototype,"resizeStop",void 0),xe([K()],t.prototype,"keyPressed",void 0),xe([K()],t.prototype,"beforeDataBound",void 0),xe([K()],t.prototype,"contextMenuOpen",void 0),xe([K()],t.prototype,"contextMenuClick",void 0),xe([K()],t.prototype,"columnMenuOpen",void 0),xe([K()],t.prototype,"columnMenuClick",void 0),xe([K()],t.prototype,"checkBoxChange",void 0),xe([K()],t.prototype,"beforeCopy",void 0),xe([K()],t.prototype,"beforePaste",void 0),xe([K()],t.prototype,"beforeAutoFill",void 0),xe([K()],t.prototype,"columnDataStateChange",void 0),xe([K()],t.prototype,"dataStateChange",void 0),xe([K()],t.prototype,"dataSourceChanged",void 0),xe([K()],t.prototype,"exportGroupCaption",void 0),xe([K()],t.prototype,"lazyLoadGroupExpand",void 0),xe([K()],t.prototype,"lazyLoadGroupCollapse",void 0),e=xe([an],t)}(ur),MJ=function(){function r(t,e){this.isAsyncPrint=!1,this.defered=new Qa,this.parent=t,!this.parent.isDestroyed&&(this.parent.on(qr,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(or,this.actionBeginFunction),this.parent.on(Rd,this.onEmpty.bind(this)),this.parent.on(Rq,this.hierarchyPrint,this),this.scrollModule=e)}return r.prototype.isContentReady=function(){var t=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){t.defered.promise.then(function(){t.contentReady()}),t.isPrintGrid()&&t.hierarchyPrint()}:this.contentReady},r.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var t=window.printGridObj;t&&!t.element.querySelector("[aria-busy=true")&&t.printModule.defered.resolve()},r.prototype.print=function(){this.renderPrintGrid()},r.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},r.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},r.prototype.renderPrintGrid=function(){var t=this.parent,e=si("div",{id:this.parent.element.id+"_print",className:t.element.className+" e-print-grid"});e.classList.remove("e-gridhover"),document.body.appendChild(e);for(var i=new rV(cV(t,t.hierarchyPrintMode)),n=0;n<i.columns.length;n++)i.columns[n]=de({},i.columns[n]),t.isFrozenGrid()&&!t.getFrozenColumns()&&(i.columns[n].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=t.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var s=i.getInjectedModules(),o=t.getInjectedModules();(!s||s.length!==o.length)&&i.setInjectedModules(o),t.notify("printGrid-Init",{element:e,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(e),i.trigger=t.trigger},r.prototype.contentReady=function(){if(this.isPrintGrid()){var t=this.parent;if(this.isAsyncPrint)return void this.printGrid();var e={requestType:"print",element:t.element,selectedRows:t.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:t.hierarchyPrintMode};if(this.isAsyncPrint||t.trigger(TX,e),e.cancel)return void we(t.element);this.isAsyncPrint||this.printGrid()}},r.prototype.printGrid=function(){var t=this.parent;if("auto"!==t.height){var e=this.scrollModule.getCssProperties(),i=t.element.querySelector("."+ns),n=t.element.querySelector("."+qs);i.style.height="auto",i.style.overflowY="auto",n.style[e.padding]="",n.firstElementChild.style[e.border]=""}t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var s=0,o=[].slice.call(t.element.getElementsByClassName(ns));s<o.length;s++)o[s].style.overflowX="hidden";for(var l=[].slice.call(t.element.getElementsByClassName("e-spin-show")),h=0,u=[].slice.call(l);h<u.length;h++)ai(u[h],["e-spin-hide"],["e-spin-show"]);this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj,t.trigger(DX,{element:t.element}),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},r.prototype.printGridElement=function(t){ai(t.element,["e-print-grid-layout"],["e-print-grid"]),t.isPrinting&&we(t.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=function I9(r,t){var e=document.createElement("div"),i=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(n.length)for(var s=0,o=n.length;s<o;s++)i.push(n[s]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),e.appendChild(r.cloneNode(!0));var l=0;for(o=i.length;l<o;l++)a+=i[l].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+e.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(h))},500);return t}(t.element,this.printWind)},r.prototype.removeColGroup=function(t){var e=t.groupSettings.columns.length,i=t.element,n="#"+t.element.id;if(e){for(var s=Tt(".e-groupcaption",i),o=s[e-1].getAttribute("colspan"),a=0;a<s.length;a++)s[a].setAttribute("colspan",o);var l=Tt("colgroup"+n+"colgroup",i),h=Tt(".e-content colgroup",i);this.hideColGroup(l,e),this.hideColGroup(h,e)}},r.prototype.hideColGroup=function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<e;n++)t[i].children[n].style.display="none"},r.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(qr,this.contentReady.bind(this)),this.parent.removeEventListener(or,this.actionBeginFunction),this.parent.off(Rd,this.onEmpty.bind(this)),this.parent.off(Rq,this.hierarchyPrint))},r.prototype.getModuleName=function(){return"print"},r.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat([TX,DX,"load"]),r}();function OJ(r,t,e){return f(r)||""===r?"":Ye.getObject(r,t)}function PJ(r,t){requestAnimationFrame(function(){try{t(null,r())}catch(e){t(e)}})}var Rc=0;function LCe(r,t){Rc=0;var e="gSummary",n=t.groupSettings.columns.length,s="records",o="items",a=r[e],l=0,h="aggregatesCount";if(a===r.data.count)return t.groupSettings.columns.length&&!f(r[h])&&r[h]?1!==t.groupSettings.columns.length?Rc+=0!==r.indent&&a<2?r[e]*(n-r.indent+(n-r.indent)*r[h]):r[e]*(n-r.indent+(n-r.indent-1)*r[h])+r[h]:1===t.groupSettings.columns.length&&(Rc+=r[e]*(n-r.indent)+r[h]):t.groupSettings.columns.length&&(Rc+=1!==t.groupSettings.columns.length?r[e]*(t.groupSettings.columns.length-r.indent):r[e]),Rc;for(var u=0,p=r.data[o].length;u<p;u++){var m=r.data[o][u];Rc+=m[o].length+(n===t.columns.length||f(m[o][s])?0:m[o][s].length),l+=f(m[o][s])||f(r[h])?m[o].length:m[o][s].length,m[o].GroupGuid&&0!==m[o].childLevels&&FJ(m)}return Rc+=r.data[o].length,f(r[h])||r[h]&&Rc&&0!==l&&(Rc+=(Rc-l)*r[h]+r[h]),Rc}function FJ(r){for(var t="items",i=0,n=r[t].length;i<n;i++){var s=r[t][i];Rc+=s.count,0!==s[t].childLevels&&FJ(s)}}function Iw(r,t){for(var e=[],i=0,n=r.length;i<n;i++){var s=t(r[i],i);f(s)||e.push(s)}return e}function __(r){for(var t=[],e=0;e<r.length;e++)t.push(de({},M_(r[e]),{},!0));return t}function bl(r){if(r)try{return document.querySelectorAll(r).length?qi(document.querySelector(r).innerHTML.trim()):qi(r)}catch{return qi(r)}}function Wp(r,t){var e={},i=["style","class"];de(e,t,{}),"style"in e&&(Ht(r,e[i[0]]),delete e[i[0]]),"class"in e&&(B([r],e[i[1]]),delete e[i[1]]),qe(r,e)}function oV(r,t){void 0===t&&(t=0);for(var e=0,i=r.length;e<i;e++)r[e].columns?(r[e].index=f(r[e].index)?t:r[e].index,t++,t=oV(r[e].columns,t)):(r[e].index=f(r[e].index)?t:r[e].index,t++);return t}function LT(r,t,e){for(var i=0,n=r.length;i<n;i++){var s=void 0;"string"==typeof r[i]?s=new Ch({field:r[i]},e):r[i]instanceof Ch&&!r[i].columns?s=r[i]:r[i].columns?(r[i].columns=LT(r[i].columns,null,e),s=new Ch(r[i],e)):s=new Ch(r[i],e),s.type&&"checkbox"===s.type.toLowerCase()&&(s.allowReordering=!1),s.headerText=f(s.headerText)?s.foreignKeyValue||s.field||"":s.headerText,s.foreignKeyField=s.foreignKeyField||s.field,s.valueAccessor=("string"==typeof s.valueAccessor?re(s.valueAccessor,window):s.valueAccessor)||OJ,s.width=t&&f(s.width)?200:s.width,f(s.visible)&&(s.visible=!0),r[i]=s}return r}function M_(r){return r instanceof Wi?re("properties",r):r}function ge(r,t,e){for(var i=r;i&&!(e?i.id===t:i.classList.contains(t));)i=i.parentElement;return i}function dU(r){for(var t=[],e=0,i=r.length;e<i;e++)r[e].hasOwnProperty("properties")?t.push(r[e].properties):t.push(r[e]);return t}function ub(r){var t={};return t.x=f(r.clientX)?r.changedTouches[0].clientX:r.clientX,t.y=f(r.clientY)?r.changedTouches[0].clientY:r.clientY,t}var NCe=0;function Od(r){return r+NCe++}function la(r,t){for(var e=0,i=t.length;e<i;e++)r.appendChild(i===t.length?t[e]:t[0]);return r}function BJ(r,t,e,i){if("Custom"===r){var n=e.customAggregate;return"string"==typeof n&&(n=re(n,window)),n?n.call(i,t,e):""}return e.field in t||t instanceof Array?Ye.aggregates[r.toLowerCase()](t,e.field):null}var P_,fU=null;function cb(){if(null!==fU)return fU;var t,r=document.createElement("div");return r.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(r),t=r.offsetWidth-r.clientWidth|0,document.body.removeChild(r),fU=t}function _c(r){return r.split(".").length>1}function Eo(r){return void 0===r&&(r=""),r.replace(/\./g,"___")}function aV(r){return void 0===r&&(r=""),r.replace(/___/g,".")}function Qf(r,t,e){var i=ge(e,bn),n=!i||i&&!i.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(r.isIdentity||r.isPrimaryKey||!r.allowEditing):!("add"===t&&r.isIdentity||n&&!r.allowEditing&&!r.isIdentity&&!r.isPrimaryKey)}function Pd(r){var t=he("#"+r.element.id+"EditConfirm",r.element);return"Batch"===r.editSettings.mode&&Tt(".e-updatedtd",r.element).length&&r.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function iu(r,t){var e="e-wrap";r=r instanceof Array?r:[r];for(var i=0;i<r.length;i++)t?r[i].classList.add(e):r[i].classList.remove(e)}function VJ(r,t){var n,e=r.getService("valueFormatter");switch(("date"===t.type||"datetime"===t.type)&&(n={type:t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(n.format=t.format)),t.type){case"date":case"datetime":t.setFormatter(e.getFormatFunction(n)),t.setParser(e.getParserFunction(n));break;case"number":t.setFormatter(e.getFormatFunction({format:t.format})),t.setParser(e.getParserFunction({format:t.format}))}}function Mc(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];for(var n=0,s=r.length;n<s;n++)t?(ai(r[n],e.slice(),[]),r[n].setAttribute("aria-selected","true")):(ai(r[n],[],e.slice()),r[n].removeAttribute("aria-selected"))}function kw(r,t){r.checked=t}function gU(r,t,e){var i=si("div",{className:e});return i.appendChild(t),i.setAttribute("uid",r),i}function L_(r,t){W([r],["e-check","e-stop","e-uncheck"]),r.classList.add(t?"e-check":"e-uncheck")}function lV(r,t,e){for(var i=0;i<t.length;i++)ui(t[i].field,db(t[i],e),r.foreignKeyData);var n=r.cells;for(i=0;i<n.length;i++)n[i].isForeignKey&&ui("foreignKeyData",re(n[i].column.field,r.foreignKeyData),n[i])}function db(r,t,e,i){var n=r.foreignKeyField,s=f(e)?OJ(r.field,t):e;s=f(s)?"":s;var o=new ni,a=i||(r.dataSource instanceof Xe&&r.dataSource.dataSource.json.length?r.dataSource.dataSource.json:r.columnData);return s.getDay?o.where(pb({field:n,operator:"equal",value:s,matchCase:!1})):o.where(n,"==",s,!1),new Xe(a).executeLocal(o)}function F_(r,t){var e;return t.some(function(i){return e=i,i.foreignKeyValue===r})&&e}function pb(r,t){var e,i,n,s=de({},M_(r)),o=de({},M_(r));if(f(r.value)||""===r.value)return new Mn(s.field,s.operator,s.value,!1);var a=new Date(r.value);if("equal"===r.operator||"notequal"===r.operator){"datetime"===t?(i=new Date(a.setSeconds(a.getSeconds()-1)),n=new Date(a.setSeconds(a.getSeconds()+2)),r.value=new Date(a.setSeconds(n.getSeconds()-1))):(i=new Date(a.setHours(0)-1),n=new Date(a.setHours(24))),s.value=i,o.value=n,"equal"===r.operator?(s.operator="greaterthan",o.operator="lessthan"):"notequal"===r.operator&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var l=new Mn(s.field,s.operator,s.value,!1),h=new Mn(o.field,o.operator,o.value,!1);e="equal"===r.operator?l.and(h):l.or(h)}else"date"===t&&("lessthanorequal"===r.operator||"greaterthan"===r.operator)&&(s.value=new Date(a.setHours(24)-1)),"string"==typeof s.value&&(s.value=new Date(s.value)),e=new Mn(s.field,s.operator,s.value,!1);return r.setProperties?r.setProperties({ejpredicate:e},!0):r.ejpredicate=e,e}function ws(r){return r.enableVirtualization&&r.groupSettings.columns.length>0&&r.isVirtualAdaptive}function fs(r,t){if(void 0===r&&(r=""),r){for(var e=t,i=r.split("."),n=0;n<i.length&&!f(e);n++)e=e[i[n]];return e}}function cV(r,t){void 0===t&&(t="Expanded");var e={};if(!r)return e;for(var i=r.isFrozenGrid()&&!r.getFrozenColumns(),n=0,s=MJ.printGridProp;n<s.length;n++){var o=s[n];e[o]="columns"===o?dU(i?r.getColumns():r[o]):"allowPaging"===o?"CurrentPage"===r.printMode:M_(r[o])}return e.enableHover=!1,r.childGrid&&"None"!==t&&(e.expandedRows=function jCe(r,t){for(var i={},n=0,s=r.getRowsObject();n<s.length;n++){var o=s[n];if(o.isExpand&&!o.isDetailRow){var a=r.allowPaging&&"AllPages"===r.printMode?o.index+r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize:o.index;i[a]={},i[a].isExpand=!0,i[a].gridModel=cV(o.childGrid,t),i[a].gridModel.query=r.childGrid.query}}return i}(r,t)),e}function dV(r,t,e,i){var n=r||{},s=arguments.length;i&&(s-=1);for(var o=1;o<s;o++)if(arguments[o])for(var a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(qCe(a)):Object.keys(a),h=0;h<l.length;h++){var u=n[l[h]],p=a[l[h]];n[l[h]]=i&&(Iu(p)||Array.isArray(p))?Iu(p)?de({},u||{},p,i):de([],u||[],p,i):p}return n}function qCe(r){for(var t=[];Object.getPrototypeOf(r)&&Object.keys(Object.getPrototypeOf(r)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(r))),r=Object.getPrototypeOf(r);return t}function qJ(r,t){var e=t,i=[];if(r.columns){t++;for(var n=0;n<r.columns.length;n++)i[n]=qJ(r.columns[n],t);for(var s=0;s<i.length;s++)e<i[s]&&(e=i[s]);t=e}return t}var Oc=(()=>(function(r){r.timer=null}(Oc||(Oc={})),Oc))();function mU(r){var i=document.defaultView.getComputedStyle(r,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(i.split(" ")[4]),height:parseFloat(i.split(" ")[5])}}function fV(r,t){if(r&&t){var e=j(r,"."+bn).getBoundingClientRect().height,i=j(t,"."+bn).getBoundingClientRect().height;e>i?t.style.height=e+"px":r.style.height=i+"px"}}function bU(r){for(var t=r.getVisibleColumns(),e=0,i=0,n=0;n<t.length;n++)Jt(t[n].width)?i++:-1!==t[n].width.toString().indexOf("%")&&e++;return("auto"===r.width||"string"==typeof r.width&&-1!==r.width.indexOf("%"))&&!r.groupSettings.showGroupedColumn&&r.groupSettings.columns.length&&e&&!i}function YCe(r,t,e,i){var n=r.dataToBeUpdated[e].concat(t[e]).reduce(function(s,o){return s[o[i]]=void 0===s[o[i]]?o:Object.assign(s[o[i]],o),s},{});r.dataToBeUpdated[e]=Object.keys(n).map(function(s){return n[s]})}function gV(r,t,e){var i=r.getFrozenLeftCount(),n=r.getMovableColumnsCount(),s=r.getFrozenRightColumnsCount(),o=r.getFrozenMode(),a=r.isRowDragable()?1:0,l="Right"===o?i+n:i+n+a,h="Right"===o?i:i+a,u="Right"===o?t.length-s-a:s?t.length-s:t.length;return e===Jr?t=t.slice(0,i?i+a:t.length):e===tr?t=t.slice(l,t.length):"movable"===e&&(t=t.slice(h,u)),t}function fb(r,t,e,i,n){(e[0].length||i)&&(n?t(Jr,e[0],n[0]):t(Jr,e[0])),r.isFrozenGrid()&&(e[1].length||i)&&(n?t("movable",e[1],n[1]):t("movable",e[1])),(r.getFrozenMode()===Qt||"Right"===r.getFrozenMode())&&(e[2].length||i)&&(n?t(tr,e[2],n[2]):t(tr,e[2]))}function mV(r){return["Right"!==r.getFrozenMode()?r.getRowsObject():[],r.getMovableRowsObject(),r.getFrozenRightRowsObject()]}function CU(r,t,e){for(var n=r.children.length,s=0,o=0;o<n;o++,s++)o>=t&&o<e||(r.removeChild(r.children[s]),s--)}function UJ(r,t,e){return"movable"===t.getFreezeTableName()?[].slice.call(r.getMovableDataRows()[e].getElementsByClassName(Ji)):t.getFreezeTableName()===tr?[].slice.call(r.getFrozenRightDataRows()[e].getElementsByClassName(Ji)):[].slice.call(r.getDataRows()[e].getElementsByClassName(Ji))}function wU(r,t,e,i){var n=r.getFrozenLeftCount(),s=r.getMovableColumnsCount();return i="movable"===t.getFreezeTableName()?i-n:t.getFreezeTableName()===tr?i-(n+s):i,UJ(r,t,e)[i]}function WJ(r,t,e,i,n,s,o){o||r.getFreezeTableName()===Jr||!t&&r.getFreezeTableName()===tr||1===s?e[Eo(r.field)]=r.validationRules:"movable"!==r.getFreezeTableName()&&r.getFreezeTableName()?r.getFreezeTableName()===tr&&(n[Eo(r.field)]=r.validationRules):i[Eo(r.field)]=r.validationRules}function JCe(r,t,e){var i,n=new Rr;if("number"===t)try{i=n.getNumberPattern({format:r,currency:this.currency,useGrouping:!0},!0)}catch{i=r}else if("date"===t||"time"===t||"datetime"===t)try{if(f(i=n.getDatePattern({skeleton:r,type:t},e)))throw"error"}catch{try{i=n.getDatePattern({format:r,type:t},e)}catch{i=r}}else i=r;if("number"!==t){var o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(a){return o[a]})}return i}function KJ(r){if(r.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),e=0;e<t.length;e++)t[e].classList.add("e-bigger")}function SU(r,t){for(var e,i=r.split(".").length,n=r.split("."),s=t,o=0;o<i;o++)s=e=s[n[o]];return e}function mo(r,t,e,i){for(var n=0,s=t;n<s.length;n++){var o=s[n];e?r.on(o.event,o.handler,i):r.off(o.event,o.handler)}}function V_(r,t,e,i){var n=Eo(t.field);return i=Object.assign(i,{id:r.element.id+n,name:n,"e-mappinguid":t.uid}),r.createElement("input",{className:e,attrs:i})}function YJ(r,t){var e;r.columnModel||r.getColumns();for(var i=0,n=r.columnModel;i<n.length;i++){var s=n[i];if(s.field===t){e=s;break}}return e}function H_(r,t){r.destroyTemplate(t),r.isReact&&r.renderTemplates()}function Xf(r,t,e){var i=r,n=t,s=!1;if(e)for(var o=n[0];o<i.length;o++)for(var a=i[o],l=0;l<a.length;l++){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}else for(o=n[0];o>=0;o--)for(l=(a=i[o]).length-1;l>=0;l--){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}return n}var gb=function(){function r(t){this.existingPredicate={},this.foreignKeyQuery=new ni,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.parent=t,this.id=this.parent.element.id,this.valueFormatter=new mw(this.parent.locale),this.cBoxTrue=fh(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=fh(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&B([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&B([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])}return r.prototype.destroy=function(){this.closeDialog()},r.prototype.wireEvents=function(){A.add(this.dlg,"click",this.clickHandler,this),A.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=UE(this.searchBoxKeyUp,200);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&A.add(t,"keyup",this.searchHandler,this)},r.prototype.unWireEvents=function(){A.remove(this.dlg,"click",this.clickHandler),A.remove(this.dlg,"keyup",this.keyupHandler);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&A.remove(t,"keyup",this.searchHandler)},r.prototype.foreignKeyFilter=function(t,e,i){var n=this,s={},o=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(i)).then(function(l){n.options.column.columnData=l.result,n.parent.notify(kT,{predicate:s,column:n.options.column}),t.ejpredicate=s.predicate.predicates;for(var h=s.predicate.predicates,u=0;u<h.length;u++)o.push({field:h[u].field,predicate:"or",matchCase:h[u].ignoreCase,ignoreAccent:h[u].ignoreAccent,operator:h[u].operator,value:h[u].value,type:n.options.type});t.filterCollection=o.length?o:e.filter(function(p){return p.field=n.options.field}),n.options.handler(t)})},r.prototype.foreignFilter=function(t,e){var n=new Mn(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",e,!0,this.options.ignoreAccent);this.foreignKeyFilter(t,[t.filterCollection],n)},r.prototype.searchBoxClick=function(t){var e=t.target;e.classList.contains("e-searchclear")&&(this.sInput.value=e.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},r.prototype.searchBoxKeyUp=function(t){!f(this.parent.loadingIndicator)&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon()},r.prototype.updateSearchIcon=function(){this.sInput.value.length?ai(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):ai(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},r.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},r.prototype.updateDataSource=function(){var t=this.options.dataSource;if(!(t instanceof Xe))for(var i=0;i<t.length;i++)if("object"!=typeof t){var n={};n[this.options.field]=t[i],t[i]=n}},r.prototype.updateModel=function(t){this.options=t,this.existingPredicate=t.actualPredicate||{},this.options.dataSource=t.dataSource,this.options.dataManager=t.dataManager?t.dataManager:t.dataSource,this.updateDataSource(),this.options.type=t.type,this.options.format=t.format||"",this.options.ignoreAccent=t.ignoreAccent||!1,this.options.filteredColumns=t.filteredColumns||this.parent.filterSettings.columns,this.options.query=t.query||new ni,this.options.allowCaseSensitive=t.allowCaseSensitive||!1,this.options.uid=t.column.uid,this.options.disableHtmlEncode=t.column.disableHtmlEncode||!1,this.values={},this.localeObj=t.localeObj,this.isFiltered=t.filteredColumns.length},r.prototype.getAndSetChkElem=function(t){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!t.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};ke.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},r.prototype.showDialog=function(t){var e={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};e.filterModel=this,this.parent.notify("cbox-filter-begin",e),e.cancel?t.cancel=e.cancel:(this.dialogObj=new Cd({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!f(ge(t.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(t),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),t.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=t.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType?(bc({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),Ul(this.spinner)):this.parent.showMaskRow(void 0,this.dialogObj.element),this.getAllData())},r.prototype.renderResponsiveFilter=function(t){t.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},r.prototype.dialogCreated=function(t){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":X.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function HJ(r,t){var e=t.element.style.display;t.element.style.display="block";var i=t.width,n=M0(r,t.element);t.element.style.display=e,t.element.style.top=n.top+r.getBoundingClientRect().height-5+"px";var s=n.left-i+r.clientWidth;t.element.style.left=s<1?i+s-16+"px":s+-4+"px"}(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify("filterDialogCreated",t)},r.prototype.openDialog=function(t){this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t)},r.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var t=this.options.columns.filter(function(i){return i.getFilterItemTemplate()}),e=this.parent.registeredTemplate;t.length&&!f(e)&&e.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&H_(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),$e(this.dlg),this.dlg=null,this.parent.notify(KB,{})}},r.prototype.clearFilter=function(t){var e={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(C_,e),!e.cancel&&this.options.handler({action:"clear-filter",field:t?t.field:this.options.field})},r.prototype.btnClick=function(t){if(this.filterState){if("input"===t.target.tagName.toLowerCase()&&t.target.classList.contains("e-searchinput")||13===t.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var e=t.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===e?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===e&&this.clearFilter()}this.closeDialog()}else"input"!==t.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify("after-filter-column-menu-close",{})},r.prototype.fltrBtnHandler=function(){var o,t=this,e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i=e,n="equal",s=this.dialogObj.element.querySelector(".e-dropdownlist");s&&(this.options.operator=n=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(o=this.searchBox.querySelector(".e-searchinput"));var l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:n,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;h&&o&&""===o.value&&(n=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=n);var u,y,C=[];if(e.length!==this.itemsCnt||o&&o.value&&""!==o.value){for(var S=0;S<e.length;S++){y=de({},{value:u=this.values[ge(e[S],"e-ftrchk").getAttribute("uid")]},l),u&&!u.toString().length&&(y.operator=h?"notequal":"equal"),""===u||f(u)?C=C.concat(r.generateNullValuePredicates(l)):C.push(y);var T={instance:this,handler:this.fltrBtnHandler,arg1:y.field,arg2:y.predicate,arg3:y.operator,arg4:y.matchCase,arg5:y.ignoreAccent,arg6:y.value,cancel:!1};if(this.parent.notify(C_,T),T.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&f(this.values[ge(i[i.length-1],"e-ftrchk").getAttribute("uid")])&&h&&C.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"and",value:null}),this.initiateFilter(C)}else this.options.filteredColumns.some(function(P){return t.options.field===P.field})&&this.clearFilter()},r.generateNullValuePredicates=function(t){var e=[];return"string"===t.type&&e.push({field:t.field,ignoreAccent:t.ignoreAccent,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:""}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:null}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:void 0}),e},r.prototype.initiateFilter=function(t){var i,e=t[0];if(!f(e)){i=e.ejpredicate?e.ejpredicate:new Mn(e.field,e.operator,e.value,!e.matchCase,e.ignoreAccent);for(var n=1;n<t.length;n++)i=void 0!==t[n].ejpredicate?i[t[n].predicate](t[n].ejpredicate):i[t[n].predicate](t[n].field,t[n].operator,t[n].value,!t[n].matchCase,t[n].ignoreAccent);var s={action:"filtering",filterCollection:t,field:this.options.field,ejpredicate:Mn.or(i)};this.options.handler(s)}},r.prototype.isForeignColumn=function(t){return!!t.isForeignColumn&&t.isForeignColumn()},r.prototype.refreshCheckboxes=function(){var t=this,e=this.sInput.value,i=this.options.column,n=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),o=n.queries.filter(function(O){return O&&"onWhere"===O.fn})[0];n.queries=[],s.queries=[];var a="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,l=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",h=!0,u=this.options.ignoreAccent,p=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=""===a||void 0===a?void 0:a;var C,m=[],y={field:p,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:u},S=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())?a="true":void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&(a="false"),void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&S?(S(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&S&&(S(),a=!1),l="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){var T=new Rr,R="string"==typeof this.options.format?this.options.format:this.options.format.format;a=R&&T.parseDate(e,{format:R})||new Date(e)}this.addDistinct(n),this.parent.trigger(or,{requestType:"filtersearchbegin",filterModel:this,columnName:p,column:i,operator:l,matchCase:h,ignoreAccent:u,filterChoiceCount:null,query:n,value:a},function(O){if(O.operator=O.operator,C=new Mn(p,O.operator,a,O.matchCase,O.ignoreAccent),"date"===t.options.type||"datetime"===t.options.type){var N={field:p,operator:l="equal",value:a,matchCase:h,ignoreAccent:u};f(a)||(C=pb(N,t.options.type))}if(e&&"string"==typeof e&&t.isBlanks&&t.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){m=m.concat(r.generateNullValuePredicates(y));var z=r.generatePredicate(m);z.predicates.push(C),n.where(z)}else e.length?(C=f(o)?C:C.and(o.e),n.where(C)):f(o)||n.where(o.e);O.filterChoiceCount=f(O.filterChoiceCount)?1e3:O.filterChoiceCount;var U={};Ul(t.spinner),t.renderEmpty=!1,t.isForeignColumn(i)&&e.length?("result"in i.dataSource?new Xe(i.dataSource.result):i.dataSource).executeQuery(n).then(function(me){var Te=t.options.column.columnData;t.options.column.columnData=me.result,t.parent.notify(kT,{predicate:U,column:i}),U.predicate.predicates.length?s.where(U.predicate):t.renderEmpty=!0,t.options.column.columnData=Te,s.take(O.filterChoiceCount),t.search(O,s)}):(n.take(O.filterChoiceCount),t.search(O,n))})},r.prototype.search=function(t,e){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processSearch(e)},r.prototype.getPredicateFromCols=function(t){for(var e=r.getPredicate(t),i=[],n={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(e);a<l.length;a++){var h=l[a],u=void 0;s&&!this.parent.getColumnByField(h)&&(u=F_(h,o)),u?(this.parent.notify(kT,{predicate:n,column:u}),n.predicate.predicates.length&&i.push(Mn.or(n.predicate.predicates))):i.push(e[h])}return i.length&&Mn.and(i)},r.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new ni},r.prototype.getAllData=function(){var t=this;this.customQuery=!1;var e=this.getQuery();e.requiresCount(),this.addDistinct(e);var i={requestType:kX,query:e,filterChoiceCount:null};i.filterModel=this,this.parent.trigger(or,i,function(s){s.filterChoiceCount=f(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.take(s.filterChoiceCount),s.query.distincts.length||(t.customQuery=!0,t.queryGenerate(e)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(s,e):t.processDataOperation(e,!0)})},r.prototype.addDistinct=function(t){var e=Ye.distinct(this.options.filteredColumns,"field");return e.indexOf(this.options.column.field)<=-1&&(e=e.concat(this.options.column.field)),t.distinct(e),t},r.prototype.filterEvent=function(t,e){var i=this,n=function yU(r,t){var e=function $Ce(r){var t=new pl,e=new Xe({url:"",adaptor:new pl}),i=t.processQuery(e,r);return JSON.parse(i.data)}(t),i=new Qa;return e.dataSource=i.resolve,e.action=r,{state:e,deffered:i}}(t,e);this.parent.trigger(v_,n.state),n.deffered.promise.then(function(o){i.dataSuccess(o)})},r.prototype.processDataOperation=function(t,e){var i=this;this.options.dataSource=this.options.dataSource instanceof Xe?this.options.dataSource:new Xe(this.options.dataSource);var n=[],s=[];if(this.isForeignColumn(this.options.column)&&e){var o="result"in this.options.column.dataSource?new Xe(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=t.params,n.push(o.executeQuery(this.foreignKeyQuery)),s.push(function(l){return i.foreignKeyData=l})}n.push(this.options.dataSource.executeQuery(t)),s.push(this.dataSuccess.bind(this));var a=0;Promise.all(n).then(function(l){for(var h=0;h<l.length;h++)s[a++](l[h].result)})},r.prototype.dataSuccess=function(t){this.fullData=t;var e={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",e),e.executeQuery){var i=new ni;this.customQuery||this.queryGenerate(i);var n=new Xe(e.dataSource).executeLocal(i);this.filteredData=r.getDistinct(n,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,e.executeQuery?this.filteredData:e.dataSource,e),this.sInput&&this.sInput.focus();var a={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};a.filterModel=this,this.parent.notify(RT,a),this.isCheckboxFilterTemplate&&Rl(this.spinner)},r.prototype.queryGenerate=function(t){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var e=this.parent.searchSettings,i=e.fields.length?e.fields:this.options.columns.map(function(l){return l.field});t.search(e.key,i,e.operator,e.ignoreCase,e.ignoreAccent)}if(this.options.filteredColumns.length){for(var n=[],s=0;s<this.options.filteredColumns.length;s++){var o=this.options.filteredColumns[s];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&n.push(this.options.filteredColumns[s])):o.field!==this.options.field&&n.push(this.options.filteredColumns[s])}var a=this.getPredicateFromCols(n);a&&t.where(a)}},r.prototype.processDataSource=function(t,e,i,n){Ul(this.spinner),this.updateResult();var s={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify("beforeCheckboxfilterRenderer",s),this.isCheckboxFilterTemplate=s.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate||this.createFilterItems(i,e,n)},r.prototype.processSearch=function(t){this.processDataOperation(t)},r.prototype.updateResult=function(){this.result={};var t=this.getPredicateFromCols(this.options.filteredColumns),e=new ni;t&&e.where(t),this.parent.notify("before-checkbox-renderer-query",{query:e});for(var n=0,s=new Xe(this.fullData).executeLocal(e);n<s.length;n++)this.result[fs(this.options.field,s[n])]=!0},r.prototype.clickHandler=function(t){var e=t.target;if(f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||!ge(e,"e-mask-ftrchk")){var i=ge(e,"e-checkbox-wrapper");if(ge(e,"e-searchbox")&&this.searchBoxClick(t),i&&!this.isCheckboxFilterTemplate){var n=i.querySelector(".e-selectall");n?this.updateAllCBoxes(!n.classList.contains("e-check")):function jJ(r){var t=r.querySelector(".e-frame"),e=t.previousSibling;t.classList.contains("e-check")?(e.checked=!1,ai(t,["e-uncheck"],["e-check"])):(e.checked=!0,ai(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(ge(i,"e-ftrchk"))}},r.prototype.keyupHandler=function(t){this.setFocus(ge(t.target,"e-ftrchk"))},r.prototype.setFocus=function(t){var e=this.dlg.querySelector(".e-chkfocus");e&&e.classList.remove("e-chkfocus"),t&&t.classList.add("e-chkfocus")},r.prototype.updateAllCBoxes=function(t){for(var i=0,n=[].slice.call(this.cBox.getElementsByClassName("e-frame"));i<n.length;i++){var s=n[i];L_(s,t),kw(s.previousSibling,t)}},r.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},r.prototype.createCheckbox=function(t,e,i){var n=e?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);kw(n.querySelector("input"),e);var s=n.querySelector(".e-label"),o=dV({},i,{column:this.options.column,parent:this.parent});return s[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!f(t)&&t.toString().length?t:this.getLocalizedLabel("Blanks"),s.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof t&&(s.innerHTML=this.getLocalizedLabel(!0===t?"FilterTrue":"FilterFalse")),B([s],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(s.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,s),this.parent.renderTemplates()):la(s,this.options.template(o,this.parent,"filterItemTemplate"))),n},r.prototype.updateIndeterminatenBtn=function(){var o,t=this.cBox.children.length-1,e=[],i=!1,n=this.cBox.querySelector(".e-selectall"),s=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;this.options.isResponsiveFilter||((o=this.dialogObj.btnObj[0]).disabled=!1);var a=n.previousSibling;kw(a,!1),a.indeterminate=!1,t===s?(e=["e-check"],kw(a,!0)):s?(e=["e-stop"],a.indeterminate=!0):(e=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),W([n],["e-check","e-stop","e-uncheck"]),B([n],e),this.parent.notify($q,{disabled:i})},r.prototype.createFilterItems=function(t,e,i){var n,o,s=this.parent.createElement("div"),a=!1;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0]);var l=-1,h="ejValue";i.executeQuery||(h=i.field);for(var u=0;u<t.length;u++){var p=re(h,t[u]);(""===p||f(p))&&(l+=1)}if(this.itemsCnt=-1!==l?t.length-l:t.length,t.length&&!this.renderEmpty){var m=this.getLocalizedLabel("SelectAll"),y=this.cBox.querySelector(".e-checkfltrnmdiv");y&&y.classList.remove("e-checkfltrnmdiv");var C=this.createCheckbox(m,!1,((n={})[this.options.field]=m,n));this.parent.cssClass&&B([C],[this.parent.cssClass]);var S=gU(Od("cbox"),C,"e-ftrchk");S.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(S);var T=new Mn("field","equal",this.options.field);this.options.foreignKeyValue&&(T=T.or("field","equal",this.options.foreignKeyValue));var R=new Xe(this.options.filteredColumns).executeLocal((new ni).where(T)).length,P=void 0;for(u=0;u<t.length;u++){var O=Od("cbox");this.values[O]=re(h,t[u]);var N=re(this.options.field,t[u]);this.options.formatFn&&(N=this.valueFormatter.toView(N,this.options.formatFn));var z={value:N,column:this.options.column,data:t[u]};if(this.parent.notify("filter-cbox-value",z),""===(N=z.value)||f(N)){if(P)continue;P=!0}var U=this.createCheckbox(N,this.getCheckedState(R,this.values[O]),re("dataObj",t[u]));s.appendChild(gU(O,U,"e-ftrchk"))}this.cBox.innerHTML="",la(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),o&&(o.disabled=!1),a=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),la(this.cBox.children[0],[].slice.call(s.children)),o&&(o.disabled=!0),a=!0;o&&t.length&&(this.filterState=!o.disabled,o.dataBind());var ae={requestType:kX,dataSource:this.renderEmpty?[]:t};ae.filterModel=this,this.parent.notify(RT,ae),this.parent.notify($q,{disabled:a}),Rl(this.spinner)},r.prototype.getCheckedState=function(t,e){if(!this.isFiltered||!t)return!0;var i=this.result[e];return"notequal"===this.options.operator?!i:i},r.getDistinct=function(t,e,i,n){for(var a,s=t.length,o=[],h={},u=!(!i||!i.isForeignColumn)&&i.isForeignColumn();s--;)if(!((a=fs(e,a=t[s]))in h)){var p={};if(p.ejValue=a,h[a]=!0,u){var m=db(i,{},a,n)[0];ui(KX,m,t[s]),a=re(i.foreignKeyValue,m)}ui(e,f(a)?null:a,p),ui("dataObj",t[s],p),o.push(p)}return Ye.group(Ye.sort(o,e,Ye.fnAscending),"ejValue")},r.getPredicate=function(t){for(var e=Ye.distinct(t,"field",!0)||[],i=[],n={},s=0;s<e.length;s++)0!==(i=new Xe(t).executeLocal((new ni).where("field","equal",e[s].field))).length&&(n[e[s].field]=r.generatePredicate(i));return n},r.generatePredicate=function(t){var i,e=t?t.length:0,s=r.updateDateFilter(t[0]);s.ignoreAccent=!f(s.ignoreAccent)&&s.ignoreAccent,i="date"===s.type||"datetime"===s.type?pb(s,s.type):s.ejpredicate?s.ejpredicate:new Mn(s.field,s.operator,s.value,!r.getCaseValue(s),s.ignoreAccent);for(var o=1;o<e;o++)t[o]=r.updateDateFilter(t[o]),e>2&&o>1&&"or"===t[o].predicate?i.predicates.push("date"===t[o].type||"datetime"===t[o].type?pb(t[o],t[o].type):new Mn(t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent)):i="date"===t[o].type||"datetime"===t[o].type?"and"===t[o].predicate&&"equal"===t[o].operator?i.or(pb(t[o],t[o].type),t[o].type,t[o].ignoreAccent):i[t[o].predicate](pb(t[o],t[o].type),t[o].type,t[o].ignoreAccent):t[o].ejpredicate?i[t[o].predicate](t[o].ejpredicate):i[t[o].predicate](t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent);return i||null},r.getCaseValue=function(t){return f(t.matchCase)?!("string"===t.type||f(t.type)&&"string"==typeof t.value):t.matchCase},r.updateDateFilter=function(t){return("date"===t.type||"datetime"===t.type||t.value instanceof Date)&&(t.type=t.type||"date"),t},r}(),mb=function(){function r(t,e,i,n){var s=this;this.sortRequired=!0,this.groupSortFocus=!1,this.groupCancelFocus=!1,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=si("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(o){var a=s.parent,l=o.sender.target,h=l.classList.contains("e-groupheadercell")?l:ge(l,"e-groupheadercell");return!(!h||!l.classList.contains("e-drag")&&s.groupSettings.allowReordering)&&(s.column=a.getColumnByField(h.firstElementChild.getAttribute("ej-mappingname")),s.visualElement.textContent=h.textContent,s.visualElement.style.width=h.offsetWidth+2+"px",s.visualElement.style.height=h.offsetHeight+2+"px",s.visualElement.setAttribute("e-mappinguid",s.column.uid),a.element.appendChild(s.visualElement),s.visualElement)},this.dragStart=function(o){s.parent.element.classList.add("e-ungroupdrag")},this.drag=function(o){s.groupSettings.allowReordering&&s.animateDropper(o);var a=o.target,l=s.parent.element.querySelector(".e-cloneproperties");s.parent.trigger(vw,{target:a,draggableType:"headercell",column:s.column}),s.groupSettings.allowReordering||(ai(l,["e-defaultcur"],["e-notallowedcur"]),ge(a,Ps)||ge(a,"e-headercell")||ai(l,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(o){s.parent.element.classList.remove("e-ungroupdrag");var a=!(ge(o.target,Ps)||ge(o.target,"e-gridheader"));if(s.groupSettings.allowReordering&&a){if($e(o.helper),ge(o.target,"e-groupdroparea"))s.rearrangeGroup();else if(!ge(o.target,"e-grid")){var l=s.parent.getColumnByUid(o.helper.getAttribute("e-mappinguid")).field;-1!==s.groupSettings.columns.indexOf(l)&&s.ungroupColumn(l)}}else a&&$e(o.helper)},this.animateDropper=function(o){var a=s.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),l=s.parent.getColumnByUid(a).field,h=ge(o.target,"e-groupdroparea"),u=ge(o.target,"e-group-animator"),p=[].slice.call(s.element.getElementsByClassName("e-groupheadercell")).map(function(P){return P.querySelector("div").getAttribute("ej-mappingname")}),m=JSON.parse(JSON.stringify(p));if(u||h){if(u){var y=u.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),C=+u.getAttribute("index");if(y!==l){var S=m.indexOf(l);-1!==S&&m.splice(S,1),m.splice(C+(-1!==C&&S===C?1:0),0,l)}}else h&&-1===m.indexOf(l)&&m.push(l);s.element.innerHTML="",m.length&&!s.element.classList.contains("e-grouped")&&s.element.classList.add("e-grouped"),s.reorderingColumns=m;for(var R=0;R<m.length;R++)s.addColToGroupDrop(m[R])}else s.addLabel(),s.removeColFromGroupDrop(l)},this.drop=function(o){var a=s.parent,l=a.getColumnByUid(o.droppedElement.getAttribute("e-mappinguid"));s.element.classList.remove("e-hover"),$e(o.droppedElement),s.aria.setDropTarget(s.parent.element.querySelector(".e-groupdroparea"),!1),s.aria.setGrabbed(s.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),f(l)||!1===l.allowGrouping||ge(a.getColumnHeaderByUid(l.uid),"e-grid").getAttribute("id")!==a.element.getAttribute("id")?s.parent.log("action_disabled_column",{moduleName:s.getModuleName(),columnName:l.headerText}):s.groupColumn(l.field)},this.contentRefresh=!0,this.aria=new k_,this.parent=t,this.groupSettings=e,this.serviceLocator=n,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new tV(this.parent)}return r.prototype.addLabel=function(){if(!this.element.getElementsByClassName("e-group-animator").length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}},r.prototype.rearrangeGroup=function(){this.sortRequired=!1,this.updateModel()},r.prototype.columnDrag=function(t){this.groupSettings.allowReordering&&t.column.allowGrouping&&this.animateDropper(t);var e=this.parent.element.querySelector(".e-cloneproperties");ai(e,["e-defaultcur"],["e-notallowedcur"]),!ge(t.target,"e-groupdroparea")&&!(this.parent.allowReordering&&ge(t.target,"e-headercell"))&&ai(e,["e-notallowedcur"],["e-defaultcur"]),t.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},r.prototype.columnDragStart=function(t){if(!t.target.classList.contains("e-stackedheadercell")){var e=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(e,t.column.allowGrouping);var i=t.target.classList.contains("e-headercell")?t.target:ge(t.target,"e-headercell");this.aria.setGrabbed(i,!0,!t.column.allowGrouping)}},r.prototype.columnDrop=function(t){var e=this.parent;if("grouping"===t.droppedElement.getAttribute("action")){var i=e.getColumnByUid(t.droppedElement.getAttribute("e-mappinguid"));if(f(i)||!1===i.allowGrouping||ge(e.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==e.element.getAttribute("id"))return;this.ungroupColumn(i.field)}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ar,this.enableAfterRender,this),this.parent.on(yq,this.onActionComplete,this),this.parent.on(NX,this.onActionComplete,this),this.parent.on(Va,this.onPropertyChanged,this),this.parent.on(nl,this.clickHandler,this),this.parent.on(vw,this.columnDrag,this),this.parent.on(xT,this.columnDragStart,this),this.parent.on(AT,this.columnDrop,this),this.parent.on(TT,this.columnDrop,this),this.parent.on(So,this.refreshSortIcons,this),this.parent.on(vq,this.refreshSortIcons,this),this.parent.on(Cs,this.keyPressHandler,this),this.parent.on(qr,this.initialEnd,this),this.parent.on(Rd,this.initialEnd,this),this.parent.on(Ba,this.render,this),this.parent.on(ob,this.onGroupAggregates,this),this.parent.on(un,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ba,this.render),this.parent.off(Ar,this.enableAfterRender),this.parent.off(yq,this.onActionComplete),this.parent.off(NX,this.onActionComplete),this.parent.off(Va,this.onPropertyChanged),this.parent.off(nl,this.clickHandler),this.parent.off(vw,this.columnDrag),this.parent.off(xT,this.columnDragStart),this.parent.off(TT,this.columnDrop),this.parent.off(AT,this.columnDrop),this.parent.off(So,this.refreshSortIcons),this.parent.off(vq,this.refreshSortIcons),this.parent.off(Cs,this.keyPressHandler),this.parent.off(ob,this.onGroupAggregates),this.parent.off(un,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},r.prototype.initialEnd=function(){var t=this.parent;if(this.parent.off(qr,this.initialEnd),this.parent.off(Rd,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var e=0,i=t.groupSettings.columns;e<i.length;e++)this.groupColumn(i[e]);this.contentRefresh=!0}},r.prototype.keyPressHandler=function(t){var e=this.parent;if(t.target&&ge(t.target,"e-groupheadercell")&&("tab"===t.action||"shiftTab"===t.action)){var i=this.getFocusableGroupedItems();if("tab"===t.action&&t.target===i[i.length-1]||"shiftTab"===t.action&&t.target===i[0])return;for(var n=0;n<i.length;n++)if(t.target===i[n])return t.preventDefault(),void i["tab"===t.action?n+1:n-1].focus()}if("ctrlSpace"===t.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(t.action))switch(t.preventDefault(),t.action){case"altDownArrow":case"altUpArrow":var o=e.allowSelection?e.getSelectedRowIndexes():[];if(o.length){var a=e.getContentTable().querySelector(rt).children,h=void 0;for(n=e.getDataRows()[o[o.length-1]].rowIndex;n>=0;n--)if(!a[n].classList.contains(bn)&&!a[n].classList.contains("e-detailrow")){h=a[n];break}this.expandCollapseRows(h.querySelector("altUpArrow"===t.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(t.target.classList.contains("e-groupsort")){this.groupSortFocus=!0,this.applySortFromTarget(t.target);break}if(t.target.classList.contains("e-ungroupbutton")){this.groupCancelFocus=!0,this.unGroupFromTarget(t.target);break}if(this.parent.isEdit||null!==j(t.target,"#"+this.parent.element.id+"_searchbar")||ge(t.target,"e-pager"))return;var u=this.focus.getFocusedElement();(u.classList.contains("e-icon-grightarrow")||u.classList.contains("e-icon-gdownarrow"))&&(u=u.parentElement);var p=u?u.parentElement.querySelector('[class^="e-record"]'):null;if(!p)break;u.children.length&&(u.children[0].classList.contains("e-icon-grightarrow")||u.children[0].classList.contains("e-icon-gdownarrow"))&&this.expandCollapseRows(p);break;case"ctrlSpace":var m=e.focusModule.currentInfo.element;if(m&&m.classList.contains("e-headercell")){var y=e.getColumnByUid(m.firstElementChild.getAttribute("e-mappinguid"));y.field&&e.groupSettings.columns.indexOf(y.field)<0?this.groupColumn(y.field):this.ungroupColumn(y.field)}}},r.prototype.getFocusableGroupedItems=function(){var t=[];if(this.groupSettings.columns.length)for(var e=this.element.querySelectorAll(".e-groupheadercell"),i=0;i<e.length;i++)t.push(e[i].querySelector(".e-grouptext")),t.push(e[i].querySelector(".e-groupsort")),t.push(e[i].querySelector(".e-ungroupbutton"));return t},r.prototype.wireEvent=function(){A.add(this.element,"focusin",this.onFocusIn,this),A.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){A.remove(this.element,"focusin",this.onFocusIn),A.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&(W([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1),this.addOrRemoveFocus(t)},r.prototype.onFocusOut=function(t){this.addOrRemoveFocus(t)},r.prototype.addOrRemoveFocus=function(t){if(t.target.classList.contains("e-groupdroparea")||t.target.classList.contains("e-grouptext")||t.target.classList.contains("e-groupsort")||t.target.classList.contains("e-ungroupbutton")){var e=t.target.classList.contains("e-grouptext")?t.target.parentElement.parentElement:t.target;"focusin"===t.type?(B([e],["e-focused","e-focus"]),t.target.tabIndex=0):(W([e],["e-focused","e-focus"]),t.target.tabIndex=-1)}},r.prototype.clickHandler=function(t){t.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0),t.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0);var e=ge(t.target,"e-recordplusexpand")||ge(t.target,"e-recordpluscollapse");e&&(e.children[0].classList.contains("e-icon-gdownarrow")||e.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(t.target),this.applySortFromTarget(t.target),this.unGroupFromTarget(t.target),this.toogleGroupFromHeader(t.target)},r.prototype.unGroupFromTarget=function(t){t.classList.contains("e-ungroupbutton")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname"))},r.prototype.toogleGroupFromHeader=function(t){this.groupSettings.showToggleButton&&(t.classList.contains("e-grptogglebtn")?t.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):t.classList.contains("e-toggleungroup")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname")))},r.prototype.applySortFromTarget=function(t){var e=this.parent,i=j(t,".e-groupheadercell");if(e.allowSorting&&i&&!t.classList.contains("e-ungroupbutton")&&!t.classList.contains("e-toggleungroup")){var n=i.firstElementChild.getAttribute("ej-mappingname");e.getColumnHeaderByField(n).getElementsByClassName("e-ascending").length?e.sortColumn(n,"Descending",!0):e.sortColumn(n,"Ascending",!0)}},r.prototype.expandCollapseRows=function(t){var e=ge(t,"e-recordplusexpand")||ge(t,"e-recordpluscollapse");if(e){var i=this.parent.getContentTable().querySelector(rt).children,n=void 0,s=void 0,o=void 0,a=this.parent,l=e.parentElement.getElementsByClassName("e-indentcell").length,h=e.parentElement.getAttribute("data-uid"),u=a.getRowObjectFromUID(h),p=!1;if(e.classList.contains("e-recordpluscollapse")?(B([e],"e-recordplusexpand"),W([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",e.firstElementChild.setAttribute("title","expanded"),p=!0,u.isExpand=!0,ws(a)&&this.updateVirtualRows(a,t,p,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(e.parentElement)):(n=!0,u.isExpand=!1,W([e],"e-recordplusexpand"),B([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",e.firstElementChild.setAttribute("title","collapsed"),ws(a)&&this.updateVirtualRows(a,t,!n,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(e.parentElement)),this.aria.setExpand(e,p),!ws(a)&&!this.parent.groupSettings.enableLazyLoading){for(var m=a.getRowsObject(),y=m.indexOf(u),C={},S=a.enableInfiniteScrolling&&a.infiniteScrollSettings&&a.infiniteScrollSettings.enableCache&&m.length!==i.length?Array.from(i).indexOf(e.parentElement):void 0,T=y;T<m.length&&!(T>y&&m[T].indent===l);T++){if(m[T].isDetailRow){var R=m[T-1].isExpand&&m[T-1].visible;S&&S>0&&S<i.length?i[S].style.display=R?"":"none":f(S)&&(i[T].style.display=R?"":"none")}else if(!1===C[m[T].parentUid])m[T].visible=!1,S&&S>0&&S<i.length?i[S].style.display="none":f(S)&&(i[T].style.display="none");else{if(!(m[T].isDataRow||m[T].isCaptionRow||m[T].isDetailRow||m[T].isAggregateRow)&&(R=m[T].cells.some(function(O){return O.isDataCell&&O.visible}))===m[T].visible)continue;m[T].visible=!0,S&&S>0&&S<i.length?(i[S].style.display="",i[S].classList.remove("e-hide")):f(S)&&(i[T].style.display="",i[T].classList.remove("e-hide"))}m[T].isCaptionRow&&(C[m[T].uid]=m[T].isExpand&&m[T].visible),f(S)||S++}this.parent.notify(Sw,{rows:this.parent.getRowsObject()})}(!this.parent.enableInfiniteScrolling||!this.parent.groupSettings.enableLazyLoading)&&this.parent.notify("infinite-group-collapse",{isCollapse:n,parentUid:h})}},r.prototype.updateVirtualRows=function(t,e,i,n,s){var o=t.getRowObjectFromUID(e.closest("tr").getAttribute("data-uid"));o.isExpand=i,function PCe(r){for(var t=[],e=r.vRows,i=0;i<e.length;i++)e[i].isDataRow?t.push(e[i]):e[i].isDataRow||(t.push(e[i]),!e[i].isExpand&&e[i].isCaptionRow&&(i+=LCe(e[i],r)));r.vcRows=t}(t),this.parent.notify("refresh-virtual-max-page",{}),(n=t.getDataModule().generateQuery(!1)).queries=t.getDataModule().aggregateQuery(t.getQuery().clone()).queries;var a={requestType:"virtualscroll",rowObject:o};t.contentModule&&(a.virtualInfo=t.contentModule.prevInfo),t.getDataModule().getData(a,n.requiresCount()).then(function(l){return t.renderModule.dataManagerSuccess(l,a)})},r.prototype.expandCollapse=function(t){if(this.parent.groupSettings.columns.length){t||this.parent.notify("initial-collapse",t);for(var n,e=this.parent.getContentTable().querySelector(rt).children,i=this.parent.getRowsObject(),s=0,o=e.length;s<o;s++)e[s].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((n=e[s].querySelector(t?".e-recordpluscollapse":".e-recordplusexpand"))&&(t?(n.className="e-recordplusexpand",n.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",n.setAttribute("aria-expanded","true"),n.firstElementChild.setAttribute("title","expanded")):(n.className="e-recordpluscollapse",n.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",n.setAttribute("aria-expanded","false"),n.firstElementChild.setAttribute("title","collapsed"))),e[s].firstElementChild.classList.contains("e-recordplusexpand")||e[s].firstElementChild.classList.contains("e-recordpluscollapse")||(e[s].style.display=t?"":"none")):e[s].style.display=t?"":"none",i[s].isCaptionRow&&(i[s].isExpand=!!t);this.parent.updateVisibleExpandCollapseRows(),this.parent.notify(Sw,{rows:this.parent.getRowsObject()})}},r.prototype.expandAll=function(){this.expandCollapse(!0)},r.prototype.collapseAll=function(){this.expandCollapse(!1)},r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn(),this.wireEvent()},r.prototype.renderGroupDropArea=function(){var t=this.parent.element.querySelector(".e-groupdroparea");t&&$e(t),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},r.prototype.updateGroupDropArea=function(t){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||t)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},r.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},r.prototype.initializeGHeaderDrag=function(){new wp(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},r.prototype.initializeGHeaderDrop=function(){new w0(this.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.groupColumn=function(t){var e=this.parent,i=e.getColumnByField(t);f(i)||!1===i.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(t)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):Pd(e)?e.notify(eu,{instance:this,handler:this.groupColumn,arg1:t}):(i.visible=e.groupSettings.showGroupedColumn,this.colName=t,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(t),this.updateGroupDropArea(),this.isAppliedGroup=!1)},r.prototype.ungroupColumn=function(t){var e=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(a){return a.field===t})[0]:e.getColumnByField(t);if(!(f(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(t)<0)){if(Pd(e))return void e.notify(eu,{instance:this,handler:this.ungroupColumn,arg1:t});i.visible=!0,this.colName=i.field;var n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(t)<0)for(var s=0,o=e.sortSettings.columns.length;s<o;s++)if(t===e.sortSettings.columns[s].field){e.sortSettings.columns.splice(s,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=n),this.groupSettings.columns=n,e.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},r.prototype.updateModel=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));t=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):t,this.sortRequired&&(-1===t.indexOf(this.colName)&&t.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=t,this.parent.dataBind()},r.prototype.onActionComplete=function(t){"grouping"===t.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var e=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:Vi}:{requestType:"ungrouping",type:Vi};this.parent.trigger(Vi,de(t,e)),this.colName=null},r.prototype.groupAddSortingQuery=function(t){for(var e=0;e<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[e].field!==t;)e++;this.parent.sortSettings.columns.length===e?this.parent.sortSettings.columns.push({field:t,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[e].direction="Ascending")},r.prototype.createElement=function(t){var e=this.parent,i="Ascending",n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),s=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=this.parent.createElement("div",{attrs:{"ej-mappingname":t}});_c(t)&&o.setAttribute("ej-complexname",Eo(t));var a=this.parent.getColumnByField(t),l=e.getColumnHeaderByUid(a.uid);return this.groupSettings.allowReordering&&o.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag")}})),o.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:a.headerText,attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText}})),this.groupSettings.showToggleButton&&o.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),l.querySelectorAll(".e-ascending,.e-descending").length&&(i=l.querySelector(".e-ascending")?"Ascending":"Descending"),o.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText,role:"button"}})),o.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+a.headerText,role:"button"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),s.appendChild(o),this.groupSettings.allowReordering&&(n.appendChild(s),n.appendChild(this.createSeparator()),s=n),s},r.prototype.addColToGroupDrop=function(t){var e=_c(t)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+Eo(t)+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+t+"]");if(!(this.groupSettings.allowReordering&&e||f(this.parent.getColumnByField(t)))){var n=this.createElement(t);if(this.groupSettings.allowReordering){var s=this.element.getElementsByClassName("e-group-animator").length;n.setAttribute("index",s.toString())}this.element.appendChild(n);var o=this.parent.focusModule;o.setActive(!0);var a=[0,0];0===o.active.matrix.matrix[a[0]][a[1]]&&(a=Xf(o.active.matrix.matrix,a,!0)),o.active.matrix.current=a,o.active.getTable().rows[o.active.matrix.current[0]].cells[o.active.matrix.current[1]].focus()}},r.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator")},styles:this.groupSettings.showUngroupButton?"":"display:none"})},r.prototype.refreshToggleBtn=function(t){if(this.groupSettings.showToggleButton)for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,n=e.length;i<n;i++)if(!e[i].classList.contains("e-emptycell")&&!e[i].classList.contains("e-headerchkcelldiv")){var s=this.parent.getColumnByUid(e[i].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!s.showColumnMenu)&&(e[i].getElementsByClassName("e-grptogglebtn").length&&$e(e[i].querySelectorAll(".e-grptogglebtn")[0]),t||e[i].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(s.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":f(this.l10n)?this.parent.localeObj.getConstant("GroupButton"):this.l10n.getConstant("GroupButton")}})))}},r.prototype.removeColFromGroupDrop=function(t){if(!f(this.getGHeaderCell(t))){var e=this.getGHeaderCell(t);$e(this.groupSettings.allowReordering?ge(e,"e-group-animator"):e),this.updateGroupDropArea()}this.isAppliedUnGroup=!1},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=0,i=Object.keys(t.properties);e<i.length;e++){var n=i[e];switch(n){case"columns":var s=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)s={columnName:this.colName,requestType:"ungrouping",type:or};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var o=0;o<this.parent.sortSettings.columns.length;o++)this.parent.sortSettings.columns[o].isFromGroup&&(this.parent.sortSettings.columns.splice(o,1),o--);for(var a=0;a<this.groupSettings.columns.length;a++)this.colName=this.groupSettings.columns[a],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),a<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[a])}s={columnName:this.colName,requestType:t.properties[n].length?"grouping":"ungrouping",type:or}}if(!this.groupSettings.showGroupedColumn){var h=t.oldProperties[n];for(a=0;a<h.length;a++)-1===t.properties[n].indexOf(h[a])&&(this.parent.getColumnByField(h[a]).visible=!0)}this.parent.notify(zo,s)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(zo,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},r.prototype.updateGroupedColumn=function(t){for(var e=0;e<this.groupSettings.columns.length;e++)this.parent.getColumnByField(this.groupSettings.columns[e]).visible=t},r.prototype.updateButtonVisibility=function(t,e){for(var i=[].slice.call(this.element.getElementsByClassName(e)),n=0;n<i.length;n++)i[n].style.display=t?"":"none"},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&this.render()},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+qs)&&!t.querySelector("."+Ps)||((this.parent.isDestroyed||!this.parent.allowGrouping)&&!this.parent.refreshing&&this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&$e(this.element))},r.prototype.clearGrouping=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var e=0,i=t.length;e<i;e++)e===i-1&&(this.contentRefresh=!0),this.ungroupColumn(t[e]);this.contentRefresh=!0},r.prototype.getModuleName=function(){return"group"},r.prototype.refreshSortIcons=function(){var e,t=this.parent,i=t.sortSettings.columns,n=t.groupSettings.columns,s=this.parent.getColumns().map(function(l){return l.field});this.refreshToggleBtn();for(var o=0,a=i.length;o<a;o++)-1!==s.indexOf(i[o].field)&&(e=t.getColumnHeaderByField(i[o].field),!t.allowSorting&&(this.sortedColumns.indexOf(i[o].field)>-1||this.groupSettings.columns.indexOf(i[o].field)>-1)?(ai(e.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&e.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}))):this.getGHeaderCell(i[o].field)&&this.getGHeaderCell(i[o].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[o].direction?ai(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):ai(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(o=0,a=n.length;o<a;o++)-1!==s.indexOf(n[o])&&t.getColumnHeaderByField(n[o]).setAttribute("aria-grouped","true")},r.prototype.getGHeaderCell=function(t){return this.element&&this.element.querySelector('[ej-mappingname="'+t+'"]')?this.element.querySelector('[ej-mappingname="'+t+'"]').parentElement:null},r.prototype.onGroupAggregates=function(t){var e=this.iterateGroupAggregates(t),i=this.groupGenerator.generateRows(e,{}),n=this.parent.getRowsObject().filter(function(u){return!u.isDataRow}),s=i.filter(function(u){return!u.isDataRow});(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var o=0;o<s.length;o++){var a=s[o],l=a.cells.filter(function(u){return u.isDataCell});this.parent.notify("refresh-aggregate-cell",{cells:l,data:a.data,dataUid:n[o]?n[o].uid:""})}},r.prototype.iterateGroupAggregates=function(t){var e=t instanceof Array?t:[],i=this.parent.getRowsObject(),n=this.parent.getCurrentViewRecords(),s=[],o=i.map(function(ae){return"delete"===ae.edit&&s.push(ae.data),ae.changes instanceof Object?ae.changes:ae.data}),a=this.parent.getPrimaryKeyFieldNames()[0];o=0===e.length?o:e;var l=n.map(function(ae){var Te,me=Ye.getObject(a,ae);return o.some(function(oe){return Te=oe,me===Ye.getObject(a,oe)})?Te:ae});if((!t.type||"cancel"!==t.type)&&s.length>0)for(var u=0;u<s.length;u++){var p=l.indexOf(s[u]);l.splice(p,1)}for(var m=[],y=this.parent.aggregates,C=0;C<y.length;C++)for(var S=y[C],T=0;T<S.columns.length;T++){var R;R={type:S.columns[T].type.toString().toLowerCase(),field:S.columns[T].field},m.push(R)}for(var O,z=this.parent.groupSettings.columns,U=0;U<z.length;U++)O=Ye.group(O||l,z[U],m,null,null);return O},r.prototype.updateExpand=function(t){for(var e=t.uid,i=t.isExpand,n=this.parent.getRowsObject(),s=0;s<n.length;s++){var o=n[s];if(o.uid===e||f(e)){o.isExpand=i;for(var a=function(u){var p=n[u],m=void 0;if(p.parentUid!==o.uid&&(m=n.filter(function(y){return y.uid===p.parentUid})[0]),p.parentUid===o.uid?p.visible=o.isExpand:!f(m)&&p.parentUid===m.uid&&(m.isExpand&&!0===m.visible?p.visible=!0:m.isExpand&&!1===m.visible&&(p.visible=!1)),f(e))return"break"},l=s+1;l<n.length&&"break"!==a(l);l++);}}this.parent.notify(qr,{rows:n,args:{isFrozen:!1,rows:n}})},r}(),C0e=function(){function r(t,e){this.predefinedItems={},this.isSearched=!1,this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=t,this.gridID=t.element.id,this.serviceLocator=e,this.addEventListener()}return r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=this.parent.enableAdaptiveUI,i=["Edit","Delete","Update","Cancel"],n=0,s=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];n<s.length;n++){var o=s[n],a=o.toLowerCase(),l=a[0].toUpperCase()+a.slice(1);this.predefinedItems[o]={id:this.gridID+"_"+a,prefixIcon:"e-"+a,text:this.l10n.getConstant(l),tooltipText:this.l10n.getConstant(l)},e&&(this.predefinedItems[o].text="",this.predefinedItems[o].visible=-1===i.indexOf(o))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:e?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()},r.prototype.getToolbar=function(){return this.toolbar.element},r.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&$e(this.element))},r.prototype.bindSearchEvents=function(){this.searchElement=he("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},r.prototype.toolbarCreated=function(t){if(this.element.querySelector(".e-search-wrapper"))if(!this.parent.enableAdaptiveUI||t){var e=this.parent.cssClass?"e-input-group e-search "+this.parent.cssClass:"e-input-group e-search";this.element.querySelector(".e-search-wrapper").innerHTML='<div class="'+e+'" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input e-search" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" aria-label= "clear" role= "clear" style="cursor: default"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search" role= "search"></span>                     </div>'}else this.element.querySelector(".e-search-wrapper").innerHTML='<span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon"                     tabindex="-1" aria-label= "clear" style="cursor: default"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>';this.bindSearchEvents()},r.prototype.createToolbar=function(){var t=this.getItems();this.toolbar=new Y$({items:t,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;var i="viewContainerRef";if(this.parent[i]&&(this.toolbar.registeredTemplate={},this.toolbar[i]=this.parent[i]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{var a=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(bl(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",a,null,null,this.element),this.parent.renderTemplates()):la(this.element,bl(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent());var l=this.element.querySelector(".e-toolbar-left"),h=this.element.querySelector(".e-toolbar-center"),u=this.element.querySelector(".e-toolbar-right"),p=this.element.querySelector(".e-toolbar-items"),m=this.element,R=m?m.clientWidth:0;((l?l.clientWidth:0)>R||(h?h.clientWidth:0)>R||(u?u.clientWidth:0)>R||(p?p.clientWidth:0)>R)&&this.toolbar.refreshOverflow()},r.prototype.addReactToolbarPortals=function(t){this.parent.isReact&&t&&(this.parent.portals=this.parent.portals.concat(t),this.parent.renderTemplates())},r.prototype.renderResponsiveSearch=function(t){t?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(ab.isSearch),this.searchElement=he("#"+this.gridID+"_searchbar",this.element),ge(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(ab.isInitial)},r.prototype.refreshResponsiveToolbarItems=function(t){if(t===ab.isInitial){for(var e=this.parent.element.id,i=[e+"_edit",e+"_delete"],n=this.parent.getSelectedRowIndexes(),s=[e+"_responsiveback",e+"_update",e+"_cancel"],o=0,a=this.toolbar.items;o<a.length;o++)(h=this.toolbar.element.querySelector((l=a[o]).template.length?l.template:"#"+l.id))&&(i.indexOf(l.id)>-1?n.length?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"):-1===s.indexOf(l.id)?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"));this.searchElement&&(ge(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(t===ab.isSearch){i=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(var p=0,m=this.toolbar.items;p<m.length;p++){var l,h;(h=this.toolbar.element.querySelector("#"+(l=m[p]).id))&&(i.indexOf(l.id)>-1?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"))}}},r.prototype.refreshToolbarItems=function(t){var e=this.parent,i=[],n=[],s=e.editSettings,o=e.currentViewData&&e.currentViewData.length;s.allowAdding?i.push(this.gridID+"_add"):n.push(this.gridID+"_add"),s.allowEditing&&o?i.push(this.gridID+"_edit"):n.push(this.gridID+"_edit"),s.allowDeleting&&o?i.push(this.gridID+"_delete"):n.push(this.gridID+"_delete"),"Batch"===e.editSettings.mode?e.element.getElementsByClassName("e-updatedtd").length&&(s.allowAdding||s.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):e.isEdit&&(s.allowAdding||s.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],n=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(n,!1)},r.prototype.getItems=function(){var t=[],e=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&t.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&t.push(this.getItemObject("responsiveSort")));for(var i=0,n=e;i<n.length;i++){var s=n[i];switch(typeof s){case"number":t.push(this.getItemObject(this.items[s]));break;case"string":t.push(this.getItemObject(s));break;default:t.push(this.getItem(s))}}return this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&t.push(this.getItemObject("responsiveBack")),t},r.prototype.getItem=function(t){var e=this.predefinedItems[t.text];return e?de(e,e,t):t},r.prototype.getItemObject=function(t){return this.predefinedItems[t]||{text:t,id:this.gridID+"_"+t}},r.prototype.enableItems=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=he("#"+n[i],this.element);o&&this.toolbar.enableItems(o.parentElement,e)}},r.prototype.toolbarClickHandler=function(t){var e=this,i=this.parent,n=this.gridID;de(t,{cancel:!1});var o=t.originalEvent;i.trigger("toolbarClick",t,function(a){if(a.originalEvent=a.originalEvent?a.originalEvent:o,!a.cancel)switch(!f(a.item)&&a.item.id){case n+"_print":i.print();break;case n+"_edit":i.startEdit();break;case n+"_update":i.endEdit();break;case n+"_cancel":i.closeEdit();break;case n+"_add":i.addRecord();break;case n+"_delete":i.deleteRecord();break;case n+"_search":a.originalEvent.target.id===n+"_searchbutton"&&e.searchElement?e.search():!i.enableAdaptiveUI||e.searchElement||!a.originalEvent.target.classList.contains("e-search-wrapper")&&a.originalEvent.target.id!==n+"_searchbutton"?a.originalEvent.target.classList.contains("e-clear-icon")&&a.originalEvent.target.id===n+"_clearbutton"&&e.searchElement&&(e.searchElement.value="",e.sIcon.classList.remove("e-clear-icon"),e.sIcon.removeAttribute("title"),e.sIcon.style.cursor="default",e.isSearched&&(e.parent.search(e.searchElement.value),e.isSearched=!1)):e.renderResponsiveSearch(!0);break;case n+"_columnchooser":var l=e.parent.element.querySelector(".e-ccdiv"),h=l.getBoundingClientRect(),u=l.getBoundingClientRect().left,p=a.originalEvent.target;h=l.getBoundingClientRect().top+l.offsetTop,i.createColumnchooser(u,h,p);break;case n+"_responsivefilter":i.showResponsiveCustomFilter();break;case n+"_responsivesort":i.showResponsiveCustomSort();break;case n+"_responsiveback":e.renderResponsiveSearch(!1)}})},r.prototype.modelChanged=function(t){"edit"===t.module&&this.refreshToolbarItems()},r.prototype.onPropertyChanged=function(t){t.module!==this.getModuleName()||!this.parent.toolbar||(this.element&&$e(this.element),this.render())},r.prototype.keyUpHandler=function(t){13===t.keyCode&&this.search(),this.searchElement&&(this.sIcon=this.searchElement.parentElement.querySelector(".e-sicon"),this.searchElement.value.length&&!f(this.sIcon)?(this.sIcon.classList.add("e-clear-icon"),this.sIcon.setAttribute("title","Clear"),this.sIcon.style.cursor="pointer"):(this.sIcon.classList.remove("e-clear-icon"),this.sIcon.removeAttribute("title"),this.sIcon.style.cursor="default"))},r.prototype.search=function(){this.isSearched=!0,this.parent.search(this.searchElement.value)},r.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},r.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new DJ(this.searchElement),A.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()),A.add(this.element,"focusin",this.onFocusIn,this),A.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){this.searchElement&&(A.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent()),A.remove(this.element,"focusin",this.onFocusIn),A.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){var e=this.parent.focusModule.currentInfo;e&&e.element&&(W([e.element,e.elementToFocus],["e-focused","e-focus"]),e.element.tabIndex=-1),t.target.tabIndex=0},r.prototype.onFocusOut=function(t){t.target.tabIndex=-1},r.prototype.setFocusToolbarItem=function(t){var e=t.querySelector(".e-btn,.e-input");!e&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.classList.contains("e-search-wrapper")&&(e=t.querySelector("#"+this.gridID+"_searchbutton")),e.focus()},r.prototype.getFocusableToolbarItems=function(){return this.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)")},r.prototype.keyPressedHandler=function(t){if(t.target&&ge(t.target,"e-toolbar-item")){var e=ge(t.target,"e-toolbar-item"),i=this.getFocusableToolbarItems();if("tab"===t.action||"shiftTab"===t.action){if("tab"===t.action&&e===i[i.length-1]||"shiftTab"===t.action&&e===i[0])return;for(var n=0;n<i.length;n++)if(e===i[n])return t.preventDefault(),void this.setFocusToolbarItem(i["tab"===t.action?n+1:n-1])}"enter"===t.action&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.target.id===this.gridID+"_searchbutton"&&this.renderResponsiveSearch(!0)}},r.prototype.reRenderToolbar=function(){this.element&&$e(this.element),this.render()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:E_,handler:this.reRenderToolbar},{event:Ba,handler:this.render},{event:Ar,handler:this.onPropertyChanged},{event:Va,handler:this.updateSearchBox.bind(this)},{event:zo,handler:this.refreshToolbarItems},{event:Gm,handler:this.refreshToolbarItems},{event:Va,handler:this.modelChanged},{event:Jl,handler:this.refreshToolbarItems},{event:nl,handler:this.removeResponsiveSearch},{event:Zq,handler:this.reRenderToolbar},{event:un,handler:this.destroy},{event:Cs,handler:this.keyPressedHandler}],mo(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(ET,this.rowSelectedFunction),this.parent.addEventListener(kB,this.rowDeSelectedFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(mo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(ET,this.rowSelectedFunction),this.parent.removeEventListener(kB,this.rowDeSelectedFunction))},r.prototype.removeResponsiveSearch=function(t){var e=t.target,i=e.classList.contains("e-search-icon")||e.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!i&&this.searchElement&&!ge(t.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)},r.prototype.rowSelected=function(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(ab.isInitial)},r.prototype.getModuleName=function(){return"toolbar"},r}(),hee=function(){function r(t){this.parent=t}return r.prototype.addNew=function(t,e){this.isEdit=!1;var i,n=function QCe(r){var t;return r.isFrozenGrid()&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getMovableHeaderTbody():r.getMovableContentTbody()),t}(this.parent),s=function XCe(r){var t;return r.getFrozenMode()===Qt&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getFrozenRightHeaderTbody():r.getFrozenRightContentTbody()),t}(this.parent),o=this.parent.isFrozenGrid(),a=o&&this.parent.enableColumnVirtualization&&e.isScroll;if(i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?a?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(rt):a?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(rt),e.row=this.parent.createElement("tr",{className:"e-row e-addedrow",attrs:{role:"row"}}),i.querySelector(".e-emptyrow")){var l=i.querySelector(".e-emptyrow");if(l.parentNode.removeChild(l),o&&!a){var h=this.parent.getContent().querySelector("."+Fn).querySelector(rt);if(h.firstElementChild.parentNode.removeChild(h.firstElementChild),this.parent.getFrozenMode()===Qt){var u=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(rt);u.firstElementChild.parentNode.removeChild(u.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(e.row,i.firstChild):i.appendChild(e.row),e.row.appendChild(this.getEditElement(t,!1,void 0,e,!0)),this.parent.editModule.checkLastRow(e.row,e),o&&!a){var p=this.renderMovableform(e.row,e);if("Top"===this.parent.editSettings.newRowPosition?n.insertBefore(p,n.firstChild):n.appendChild(p),e.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),p.querySelector(".e-normaledit").setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),s){var m=this.renderFrozenRightForm(e.row,e);"Top"===this.parent.editSettings.newRowPosition?s.insertBefore(m,s.firstChild):s.appendChild(m);var y=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();e.row.querySelector(".e-normaledit").setAttribute("colspan",y+""),m.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(y_,{})}},r.prototype.renderFrozenRightForm=function(t,e){var i=t.cloneNode(!0),n=e.frozenRightForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderRightFrozen(t,i),i.querySelector(xi).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(xi).innerHTML,i)},r.prototype.renderMovableform=function(t,e){var i=t.cloneNode(!0),n=e.movableForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderMovable(t,i),i.querySelector(xi).innerHTML=this.parent.getHeaderContent().querySelector("."+Kn).querySelector(xi).innerHTML,i)},r.prototype.updateFreezeEdit=function(t,e){return e=e.concat([].slice.call(this.getFreezeRow(t).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===Qt&&(e=e.concat([].slice.call(this.getFreezeRightRow(t).querySelectorAll("td.e-rowcell")))),e},r.prototype.getFreezeRightRow=function(t){var e=parseInt(t.getAttribute(Ii),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getFrozenHeaderTbody(),s=this.parent.getFrozenRightHeaderTbody(),o=this.parent.getFrozenRightContentTbody();return i.contains(t)||n.contains(t)?this.parent.getFrozenRightRowByIndex(e):o.contains(t)||s.contains(t)?this.parent.getRowByIndex(e):t},r.prototype.getFreezeRow=function(t){if(this.parent.isFrozenGrid()){var e=parseInt(t.getAttribute(Ii),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getMovableContentTbody(),s=this.parent.getFrozenHeaderTbody(),o=this.parent.getMovableHeaderTbody();if(i.contains(t)||s.contains(t))return this.parent.getMovableRowByIndex(e);if(n.contains(t)||o.contains(t))return this.parent.getRowByIndex(e)}return t},r.prototype.update=function(t,e){this.isEdit=!0;var i=e.isCustomFormValidation,n=e.isScroll;!n&&(j(e.row,"."+Fn)||j(e.row,"."+Kn))&&(e.row=this.getFreezeRow(e.row)),(j(e.row,".e-frozen-right-content")||j(e.row,".e-frozen-right-header"))&&(e.row=this.getFreezeRightRow(e.row));var s=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&n,o=[].slice.call(e.row.querySelectorAll("td.e-rowcell"));e.row.innerHTML="",!s&&!i&&(o=this.updateFreezeEdit(e.row,o)),e.row.appendChild(this.getEditElement(t,!0,o,e,!0)),e.row.classList.add(Ha),this.parent.editModule.checkLastRow(e.row,e),!s&&!i&&this.refreshFreezeEdit(e.row,e)},r.prototype.refreshFreezeEdit=function(t,e){var i=t.firstChild;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(i.querySelector(xi).innerHTML=this.parent.getHeaderContent().querySelector("."+_d).querySelector(xi).innerHTML);var n,s,o=parseInt(t.getAttribute(Ii),10);if(this.parent.isFrozenGrid()){o<this.parent.frozenRows?(s=this.parent.getHeaderContent(),n="."+_d):(s=this.parent.getContent(),n="."+ju);var a=i.cloneNode(!0),l=i.cloneNode(!0),h=e.movableForm=a.querySelector("form");this.parent.editSettings.template&&this.refreshEditForm(h,e.rowData);var u=void 0,p=void 0;s.querySelector(n).contains(t)?(u=this.parent.getMovableRowByIndex(o),this.updateFrozenCont(u,i,a),this.parent.getFrozenMode()===Qt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),p=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(p,i,l))):(u=this.parent.getRowByIndex(o),this.updateFrozenCont(u,a,i),this.parent.getFrozenMode()===Qt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),p=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(p,l,i))),u.appendChild(a),u.classList.add(Ha),this.parent.getFrozenMode()===Qt&&(p.appendChild(l),p.classList.add(Ha),fV(e.frozenRightForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))),fV(e.movableForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))}},r.prototype.refreshEditForm=function(t,e){this.parent.editSettings.template&&(t.innerHTML="",this.appendChildren(t,e,!1))},r.prototype.updateFrozenRightCont=function(t,e,i){t.innerHTML="",this.renderRightFrozen(e,i),i.querySelector(xi).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(xi).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),i.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")},r.prototype.updateFrozenCont=function(t,e,i){t.innerHTML="",this.renderMovable(e,i),i.querySelector(xi).innerHTML=this.parent.getHeaderContent().querySelector("."+Kn).querySelector(xi).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),i.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")},r.prototype.renderRightFrozen=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=0,s=0;s<i.length;s++,n++)if(i[s].getFreezeTableName()===tr){var o=n-this.parent.getMovableColumnsCount();e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[o])),n--}},r.prototype.renderMovable=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=this.parent.isRowDragable()?1:0,s=0;s<i.length;s++,n++)"movable"===i[s].getFreezeTableName()&&(e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[n])),n--)},r.prototype.getEditElement=function(t,e,i,n,s){var o=this.parent,a=0,l=f(o.detailTemplate)&&f(o.childGrid)?0:1;o.allowGrouping&&(a=o.groupSettings.columns.length);var h=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(o.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-o.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),u=n.form=this.parent.createElement("form",{id:o.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(u,n.rowData,s),h.appendChild(u),h;var p=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}});p.appendChild(o.getContentTable().querySelector(xi).cloneNode(!0));var m=this.parent.createElement(rt,{attrs:{role:"rowgroup"}}),y=this.parent.createElement("tr",{attrs:{role:"row"}}),C=0;for(l&&y.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),y.firstChild),o.isRowDragable()&&y.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));C<a;)y.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),C++;var S=0;C=0;for(var T=o.isFrozenGrid()&&o.enableColumnVirtualization&&n.isScroll,R=n.isCustomFormValidation?this.parent.columnModel:o.getColumns();e&&S<i.length&&C<R.length||C<R.length;){var P=e?i[S].getAttribute("colspan"):null,O=R[C];if(T&&"movable"!==O.getFreezeTableName()||n.isCustomFormValidation&&(O.commands||O.commandsTemplate||!O.field))C++;else{var N=this.parent.createElement("td",{className:Ji,attrs:{style:"text-align:"+(O.textAlign?O.textAlign:""),colspan:P||""}});O.visible?(N.appendChild(t[O.uid]),"Vertical"===this.parent.rowRenderingMode&&(Wp(N,{"data-cell":O.headerText}),0===C&&N.classList.add("e-responsive-editcell")),"booleanedit"===O.editType?N.classList.add("e-boolcell"):(O.commands||O.commandsTemplate)&&B([N],"e-unboundcell")):N.classList.add("e-hide"),y.appendChild(N),C=P?C+parseInt(P,10):C+1,S++}}return m.appendChild(y),p.appendChild(m),u.appendChild(p),h.appendChild(u),h},r.prototype.removeEventListener=function(){},r.prototype.appendChildren=function(t,e,i){var n=de({},e,{isAdd:!this.isEdit,isFrozen:i},!0),s=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s,null,null,t),this.parent.renderTemplates()):la(t,this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s))},r}(),A0e=function(){function r(t){this.parent=t}return r.prototype.update=function(t,e){if(this.parent.isReact&&e.columnObject&&e.columnObject.template){var i=e.cell.parentElement,n=e.cell.cloneNode(!0);i.insertBefore(n,e.cell),n.focus(),e.cell.remove(),e.cell=n}e.cell.innerHTML="",e.cell.appendChild(this.getEditElement(t,e)),e.cell.classList.remove("e-ellipsistooltip"),e.cell.classList.add("e-editedbatchcell"),ai(e.row,[Ha,"e-batchrow"],[])},r.prototype.getEditElement=function(t,e){var n=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return n.appendChild(t[e.columnObject.uid]),"booleanedit"===e.columnObject.editType&&e.cell.classList.add("e-boolcell"),e.columnObject.editType||e.cell.classList.add("e-inputbox"),n},r.prototype.removeEventListener=function(){},r}(),k0e=function(){function r(t,e){this.parent=t,this.serviceLocator=e,!this.parent.isDestroyed&&(this.parent.on(NB,this.destroy,this),this.parent.on(un,this.destroy,this))}return r.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},r.prototype.addNew=function(t,e){this.isEdit=!1,this.createDialog(t,e)},r.prototype.update=function(t,e){this.isEdit=!0,this.createDialog(t,e)},r.prototype.createDialogHeader=function(t){var e=this.parent;if(this.parent.enableAdaptiveUI){var n=new TJ(this.parent,this.serviceLocator);return n.action=this.isEdit?Jn.isEdit:Jn.isAdd,n.renderResponsiveHeader(void 0,t)}return e.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",t):this.isEdit?this.l10n.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle")},r.prototype.createDialog=function(t,e){var i=this.parent;this.dialog=this.parent.createElement("div",{id:i.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),i.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),i.element.appendChild(this.dialog),this.setLocaleObj(),this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit")),this.dialogObj=new Cd(de({header:this.createDialogHeader(e),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(t,e),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:i.editSettings.template?"auto":"330px",target:e.target?e.target:document.body,animationSettings:{effect:"None"},footerTemplate:i.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",e):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},i.editSettings.dialog&&i.editSettings.dialog.params||{})),e.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),function N_(r,t){r.classList.contains("e-bigger")&&t.classList.add("e-bigger")}(this.parent.element,this.dialogObj.element.parentElement),i.enableAdaptiveUI&&this.dialogObj.show(!0)},r.prototype.dialogCreated=function(){KJ(this.parent)},r.prototype.renderResponsiveDialog=function(){var t=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){t.dialogObj.element.style.maxHeight="100%"})},r.prototype.btnClick=function(t){this.l10n.getConstant("CancelButton").toLowerCase()===t.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},r.prototype.dialogClose=function(){this.parent.closeEdit()},r.prototype.destroy=function(t){for(var e=["template","headerTemplate","footerTemplate"],i=0;i<e.length;i++)if(this.parent.editSettings[e[i]]){e[i].charAt(0).toUpperCase(),e[i].slice(1);Ty()}this.parent.notify(Eq,{}),this.parent.isEdit=!1,this.parent.notify(Gm,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),$e(this.dialog))},r.prototype.getDialogEditTemplateElement=function(t,e){var i=this.parent.createElement("div",{className:"e-dialog"+t}),n=de({},e.rowData,{isAdd:!this.isEdit},!0),s=this.parent.element.id+"editSettings"+t;return la(i,("HeaderTemplate"===t?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(n,this.parent,"editSettings"+t,s)),Ty(),i},r.prototype.getEditElement=function(t,e){var n=this.parent,s=this.parent.createElement("div",{className:this.isEdit?Ha:"e-insertedrow"}),o=e.form=this.parent.createElement("form",{id:n.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){var a=this.parent.element.id+"editSettingsTemplate",l=de({},e.rowData,{isAdd:!this.isEdit},!0);return this.parent.isReact&&"string"!=typeof this.parent.editSettings.template||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a,null,null,o),this.parent.renderTemplates()):la(o,this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a)),Ty(),s.appendChild(o),s}for(var m=this.parent.createElement("table",{className:er,attrs:{cellspacing:"6px",role:"grid"}}),y=this.parent.createElement(rt,{attrs:{role:"rowgroup"}}),C=n.getColumns(),S=0;S<C.length;S++)if(!(this.parent.editModule.checkColumnIsGrouped(C[S])||C[S].commands||C[S].commandsTemplate||"checkbox"===C[S].type)){var T=this.parent.createElement("tr",{attrs:{role:"row"}}),R=this.parent.createElement("td",{className:Ji,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});t[C[S].uid].classList.remove("e-input"),R.appendChild(t[C[S].uid]),T.appendChild(R),y.appendChild(T)}return m.appendChild(y),o.appendChild(m),s.appendChild(o),s},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(NB,this.destroy),this.parent.off(un,this.destroy))},r}(),R0e=function(){function r(t,e){this.editType={Inline:hee,Normal:hee,Batch:A0e,Dialog:k0e},this.parent=t,this.serviceLocator=e,this.renderer=new this.editType[this.parent.editSettings.mode](t,e),this.focus=e.getService("focus")}return r.prototype.addNew=function(t){this.renderer.addNew(this.getEditElements(t),t),this.convertWidget(t)},r.prototype.update=function(t){this.renderer.update(this.getEditElements(t),t),t.isCustomFormValidation||(this.parent.notify("edit-form",t),this.convertWidget(t))},r.prototype.convertWidget=function(t){var i,n,o,a,e=this.parent,l=e.isFrozenGrid(),h="Right"===e.getFrozenMode()&&"Normal"===e.editSettings.mode?1:0,u="Dialog"===e.editSettings.mode?he("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document):e.element.getElementsByClassName("e-gridform")[h],p=l&&this.parent.enableColumnVirtualization&&t.isScroll;if(l&&"Normal"===e.editSettings.mode){var m=parseInt(t.row.getAttribute(Ii),10);e.frozenRows&&("add"===t.requestType&&"Top"===e.editSettings.newRowPosition||m<e.frozenRows)?(o=e.element.querySelector("."+Kn).querySelector(".e-gridform"),this.parent.getFrozenMode()===Qt&&(a=t.frozenRightForm)):(o=e.element.querySelector("."+Fn).querySelector(".e-gridform"),this.parent.getFrozenMode()===Qt&&(a=t.frozenRightForm))}for(var C=0,S="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];C<S.length;C++){var T=S[C];if(!p||"movable"===T.getFreezeTableName()){if(this.parent.editSettings.template&&!f(T.field)){var R=de({},t);R.element=u.querySelector("[name="+Eo(T.field)+"]"),f(R.element)&&l&&(R.element=o.querySelector("[name="+Eo(T.field)+"]")),"string"==typeof T.edit.write?fs(T.edit.write,window)(R):T.edit.write(R);continue}if(!this.parent.editModule.checkColumnIsGrouped(T)&&!T.commands){T.valueAccessor(T.field,t.rowData,T),n=o&&"movable"===T.getFreezeTableName()&&"Normal"===e.editSettings.mode?o.querySelector("[e-mappinguid="+T.uid+"]"):a&&T.getFreezeTableName()===tr&&"Normal"===e.editSettings.mode?a.querySelector("[e-mappinguid="+T.uid+"]"):u.querySelector("[e-mappinguid="+T.uid+"]");var P=T.edit.write;f(n)||("string"==typeof P?(P=fs(P,window))({rowData:t.rowData,element:n,column:T,requestType:t.requestType,row:t.row,foreignKeyData:T.isForeignColumn()&&fs(T.field,t.foreignKeyData)}):T.edit.write({rowData:t.rowData,element:n,column:T,requestType:t.requestType,row:t.row,foreignKeyData:T.isForeignColumn()&&fs(T.field,t.foreignKeyData)}),!i&&!n.getAttribute("disabled")&&!ge(n,"e-checkbox-disabled")&&(this.focusElement(n,t.type),i=!0))}}}if(l&&!this.parent.allowTextWrap&&("add"===t.requestType||"beginEdit"===t.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!f(u)&&!f(o)){var O=o.querySelector("tr").children[0],N=u.querySelector("tr").children[0];N.offsetHeight>O.offsetHeight?(O.style.height=N.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=N.offsetHeight+"px")):(N.style.height=O.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=O.offsetHeight+"px"))}},r.prototype.focusElement=function(t,e){var i=this.parent.element.querySelector(".e-edit-checkselect");!f(i)&&i.nextElementSibling&&i.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:j(t,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&ge(t,Fl)?t.focus():t.focus({preventScroll:!0}),t.classList.contains("e-defaultcell")&&t.setSelectionRange(t.value.length,t.value.length)},r.prototype.getEditElements=function(t){var e=this.parent,i={},n="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];if(t.isCustomFormValidation&&(n=this.parent.columnModel),this.parent.editSettings.template)return{};for(var s=e.isFrozenGrid()&&e.enableColumnVirtualization&&t.isScroll,o=0,a=n.length;o<a;o++){var l=n[o];if(!(this.parent.editModule.checkColumnIsGrouped(l)||s&&"movable"!==n[o].getFreezeTableName()||t.isCustomFormValidation&&(l.commands||l.commandsTemplate||!l.field))){if(l.commands||l.commandsTemplate){var h=this.serviceLocator.getService("cellRendererFactory"),u=new Md(this.parent),p=h.getCellRenderer(Bt.CommandColumn),y=u.generateRows(t.rowData)[0].cells.filter(function(oe){return oe.rowID}),C=p.render(y[o],t.rowData,{index:t.row?t.row.getAttribute(Ii):0},this.parent.enableVirtualization);(S=C.firstElementChild).setAttribute("textAlign",C.getAttribute("textAlign")),i[l.uid]=S;continue}var T=l.valueAccessor(l.field,t.rowData,l),R={column:l,value:T,type:t.requestType,data:t.rowData},P=l.edit.create,O=void 0;if(l.editTemplate){O=this.parent.createElement("span",{attrs:{"e-mappinguid":l.uid}});var N=this.parent.element.id+l.uid+"editTemplate",z=dV({},t.rowData,{column:l});this.parent.isReact&&"string"!=typeof l.editTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(l.getEditTemplate()(de({index:t.rowIndex},z),this.parent,"editTemplate",N,null,null,O),this.parent.renderTemplates()):la(O,l.getEditTemplate()(de({index:t.rowIndex},z),this.parent,"editTemplate",N))}else{var S;"string"==typeof(O="string"==typeof P?(P=fs(P,window))(R):l.edit.create(R))&&((S=this.parent.createElement("div")).innerHTML=O,O=S.firstChild);var Te="input"!==O.tagName&&O.querySelectorAll("input").length,Oe=Eo(l.field);qe(Te?O.querySelector("input"):O,{name:Oe,"e-mappinguid":l.uid,id:e.element.id+Oe}),ai(O,["e-input","e-field"],[]),"Right"===l.textAlign&&O.classList.add("e-ralign"),((l.isPrimaryKey||l.isIdentity)&&"beginEdit"===t.requestType||l.isIdentity&&"add"===t.requestType)&&O.setAttribute("disabled","")}i[l.uid]=O}}return i},r.prototype.destroy=function(){this.renderer.removeEventListener()},r}(),Jf=function(){function r(t){this.parent=t}return r.prototype.create=function(t){return V_(this.parent,t.column,"e-field",{type:"text"})},r.prototype.read=function(t){return t.ej2_instances[0].value},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())},r}(),_0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),M0e=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.activeClasses=["e-selectionbackground","e-active"],e}return _0e(t,r),t.prototype.create=function(e){var n="e-field e-boolcell";return"checkbox"===e.column.type&&(n="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,V_(this.parent,e.column,n,{type:"checkbox",value:e.value})},t.prototype.read=function(e){return e.checked},t.prototype.write=function(e){var i,n;if(f(e.row)||(i=e.row.querySelector(".e-edit-checkselect")),fs(e.column.field,e.rowData)&&(n=JSON.parse(fs(e.column.field,e.rowData).toString().toLowerCase())),!f(i)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var s=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));n=!!s&&s.isSelected}Mc.apply(void 0,[[].slice.call(e.row.getElementsByClassName(Ji)),n].concat(this.activeClasses))}this.obj=new fl(de({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:n,disabled:!Qf(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)},t.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener("change",this.cbChange)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener("change",this.cbChange)},t.prototype.checkBoxChange=function(e){if(this.editRow&&"Dialog"!==this.editType){var i=!1;e.checked?this.editRow.setAttribute("aria-selected",(i=!0).toString()):this.editRow.removeAttribute("aria-selected"),Mc.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(Ji)),i].concat(this.activeClasses))}},t}(Jf),O0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),P0e=function(r){function t(e){var i=r.call(this)||this;return i.parent=e,i.flag=!1,i.removeEventHandler=i.removeEventListener,i}return O0e(t,r),t.prototype.write=function(e){var i="Dialog"!==this.parent.editSettings.mode;this.column=e.column;var n=new Mn(e.column.field,"notequal",null,!0,!1),s={};if(e.column.edit.params)for(var o=Object.keys(e.column.edit.params),a=0;a<o.length;a++)s[o[a]]="query"===o[a]?e.column.edit.params[o[a]].clone():e.column.edit.params[o[a]];this.obj=new Ky(de({dataSource:this.parent.dataSource instanceof Xe?this.parent.dataSource:new Xe(this.parent.dataSource),query:(new ni).where(n).select(e.column.field),enabled:Qf(e.column,e.requestType,e.element),fields:{value:e.column.field},value:fs(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass?this.parent.cssClass:null,close:this.dropDownClose.bind(this)},s)),this.parent.enableVirtualization&&(this.obj.dataSource=e.column.isForeignColumn()?[e.foreignKeyData[0]]:[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",Eo(e.column.field))},t.prototype.dropDownClose=function(e){},t.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(JB,this.ddCreated),this.obj.addEventListener("open",this.ddOpen),this.obj.addEventListener(CJ,this.ddBeforeOpen),this.obj.addEventListener(Vi,this.ddComplete)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(JB,this.ddCreated),this.obj.removeEventListener("open",this.ddOpen),this.obj.removeEventListener(CJ,this.ddBeforeOpen),this.obj.removeEventListener(Vi,this.ddComplete))},t.prototype.dropdownCreated=function(e){this.flag=!0},t.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof Xe?this.column.dataSource:new Xe(this.column.dataSource):this.parent.dataSource instanceof Xe?this.parent.dataSource:new Xe(this.parent.dataSource))},t.prototype.ddActionComplete=function(e){e.result=Ye.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&!(this.column.edit.params&&this.column.edit.params.ddEditedData)&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof Xe&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},t.prototype.dropDownOpen=function(e){var i=ge(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!f(i)){var n=he("#"+i.id,document).ej2_instances[0];e.popup.element.style.zIndex=(n.zIndex+1).toString()}},t}(Jf),L0e=function(){function r(t){this.parent=t}return r.prototype.keyEventHandler=function(t){if(13===t.keyCode||9===t.keyCode){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}},r.prototype.create=function(t){return this.instances=new Rr(this.parent.locale),V_(this.parent,t.column,"e-field",{})},r.prototype.read=function(t){return this.obj.value},r.prototype.write=function(t){var e=t.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new Bx(de({value:parseFloat(fs(t.column.field,t.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":t.column.headerText,enabled:Qf(t.column,t.requestType,t.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},e.edit.params)),t.element.setAttribute("name",Eo(t.column.field)),this.obj.appendTo(t.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},r}(),F0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),N0e=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return F0e(t,r),t.prototype.create=function(e){var i={type:"text",value:f(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return V_(this.parent,e.column,"e-field e-input e-defaultcell",i)},t.prototype.read=function(e){return e.value},t.prototype.write=function(e){var i=e.column,n="Dialog"!==this.parent.editSettings.mode;this.obj=new v$(de({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Qf(e.column,e.requestType,e.element),placeholder:n?"":e.column.headerText,cssClass:this.parent.cssClass?this.parent.cssClass:""},i.edit.params)),this.obj.appendTo(e.element)},t}(Jf),uee=function(){function r(t,e,i){this.args={},this.currentVirtualData={},this.parent=t,this.renderer=i,this.serviceLocator=e,this.addEventListener()}return r.prototype.clickHandler=function(t){var e=t.target,i=this.parent;(ge(e,Ps)&&ge(ge(e,Ps),"e-grid").id===i.element.id||i.frozenRows&&ge(e,Ls))&&!ge(e,"e-unboundcelldiv")&&(this.rowIndex=ge(e,Ji)?parseInt(e.parentElement.getAttribute(Ii),10):-1,i.isEdit&&i.editModule.endEdit())},r.prototype.dblClickHandler=function(t){ge(t.target,Ji)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(ge(t.target,bn))},r.prototype.editComplete=function(t){switch(this.parent.isEdit=!1,t.requestType){case"save":(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection)&&"edit"!==t.action&&this.parent.selectRow(0),this.parent.trigger(Vi,de(t,{requestType:"save",type:Vi}));break;case"delete":this.parent.trigger(Vi,de(t,{requestType:"delete",type:Vi})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}},r.prototype.getEditArgs=function(t,e,i){for(var n=this.parent.getPrimaryKeyFieldNames(),s=[],o=0;o<n.length;o++)s.push(fs(n[o],t));return{primaryKey:n,primaryKeyValue:s,requestType:"beginEdit",rowData:t,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:e&&e.foreignKeyData,target:void 0,isScroll:i}},r.prototype.startEdit=function(t){var e=this,i=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(t.getAttribute(Ii),10),!i.enableVirtualization&&!i.enableInfiniteScrolling||this.parent.element.querySelector('.e-row[data-rowindex="'+this.rowIndex+'"]')){var o={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",o),ws(i)){var a=i.getRowObjectFromUID(t.getAttribute("data-uid"));this.previousData=a.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=de({},{},i.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=o.data;var l=de({},{},o.data||this.previousData,!0);this.uid=t.getAttribute("data-uid");var h=i.getRowObjectFromUID(this.uid),u=this.getEditArgs(l,h,o.isScroll);u.row=t,u.isScroll?this.inlineEditHandler(u,t):(this.parent.notify(ZB,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger("beginEdit",u,function(p){p.type="actionBegin",i.trigger(or,p,function(m){m.cancel||e.inlineEditHandler(m,t)})}))}},r.prototype.inlineEditHandler=function(t,e){var i=this.parent;i.isEdit=!0,t.row=t.row?t.row:e,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,t.row.classList.add("e-dlgeditrow")),this.renderer.update(t),this.uid=e.getAttribute("data-uid"),i.editModule.applyFormValidation(),t.type="actionComplete",i.trigger(Vi,t),this.args=t,this.parent.allowTextWrap&&this.parent.notify(tu,{case:"textwrap"})},r.prototype.updateRow=function(t,e){var i=this,n=this.parent;this.editRowIndex=t;var s={requestType:"save",action:"edit",type:or,data:e,cancel:!1,previousData:n.getCurrentViewRecords()[t],row:n.getRowByIndex(t)};if(n.showSpinner(),n.enableInfiniteScrolling){this.uid=s.row.getAttribute("data-uid");var o=parseInt(s.row.getAttribute("data-rowindex"),10);this.parent.notify("refresh-infinite-editrowindex",{index:o})}n.notify(g_,s),s.promise?s.promise.then(function(){return n.refresh()}).catch(function(a){return i.edFail(a)}):n.enableInfiniteScrolling||n.refresh()},r.prototype.editFormValidate=function(){var t=this.parent,e=t.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return t.notify("validate-virtual-form",i),e&&i.isValid},r.prototype.endEdit=function(){var t=this,e=this.parent;if(this.parent.isEdit&&this.editFormValidate()){var i=de({},{},this.previousData,!0),n=de(this.args,{requestType:"save",type:or,data:i,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),s="Right"===e.getFrozenMode()?1:0,o="Dialog"===e.editSettings.mode,a=he("#"+e.element.id+"_dialogEdit_wrapper",document),l=o?a.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[s],h={virtualData:de({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(Km,h),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(h.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=i=n.data=h.virtualData):i=e.editModule.getCurrentEditedData(l,i),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){var u=e.getMovableVirtualHeader().querySelector(".e-gridform"),p=e.getMovableVirtualContent().querySelector(".e-gridform"),m=[u||p],y=void 0,C=void 0,S=[];e.getFrozenMode()===Qt&&(y=e.getFrozenRightHeader().querySelector(".e-gridform"),C=e.getFrozenRightContent().querySelector(".e-gridform"),S=[y||C]),fb(this.parent,function(R,P){for(var O=0,N=P;O<N.length;O++){var z=N[O];z&&(i=e.editModule.getCurrentEditedData(z,i))}},[[],m,S])}var T=[].slice.call(e.element.getElementsByClassName(Ha)).length;if(!h.isAdd&&Object.keys(this.currentVirtualData).length&&!T&&(T=1),o?a.getElementsByClassName(Ha).length:T)n.action="edit",e.trigger(or,n,function(R){R.cancel||("Spinner"===t.parent.loadingIndicator.indicatorType&&e.showSpinner(),"Shimmer"===t.parent.loadingIndicator.indicatorType&&t.parent.showMaskRow(),e.notify(g_,R))});else if(n.action="add",n.selectedRow=0,n.index=this.addedRowIndex,e.notify(w_,{}),e.notify(zo,n),this.addedRowIndex=null,n.cancel)return}},r.prototype.destroyElements=function(){var t=this.parent;t.editModule.destroyWidgets(),t.editModule.destroyForm(),this.parent.notify(NB,{})},r.prototype.editHandler=function(t){var e=this;t.promise?t.promise.then(function(i){return e.edSucc(i,t)}).catch(function(i){return e.edFail(i)}):this.editSuccess(t.data,t)},r.prototype.edSucc=function(t,e){this.editSuccess(t,e)},r.prototype.edFail=function(t){this.editFailure(t)},r.prototype.updateCurrentViewData=function(t){!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(this.parent.getCurrentViewRecords()[this.editRowIndex]=t)},r.prototype.requestSuccess=function(t){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==t.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},r.prototype.editSuccess=function(t,e){f(t)||t instanceof Array||(e.data=de({},de({},e.rowData,e.data),t)),this.requestSuccess(e),this.parent.trigger(MB,e),e.type=Vi,this.parent.isEdit=!1,this.refreshRow(e.data),this.parent.notify(w_,e),this.parent.editModule.checkLastRow(e.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(e.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(Vi,e),(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.removeMaskRow(),this.parent.hideSpinner()},r.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))},r.prototype.blazorTemplate=function(){var t=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&Ty();for(var e=0;e<t.length;e++){var i=t[e];i.template&&Ty(),i.editTemplate&&Ty()}},r.prototype.editFailure=function(t){this.parent.removeMaskRow(),this.parent.trigger(ST,{error:t}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:t})},r.prototype.needRefresh=function(){var t=!0,e=this.parent.element.querySelector(".e-gridform");return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&"Normal"===this.parent.editSettings.mode&&!e&&(t=!1),t},r.prototype.refreshRow=function(t){var e=this.parent.isFrozenGrid(),i=new wh(this.serviceLocator,null,this.parent),n=this.parent.getRowObjectFromUID(this.uid);if(n){n.changes=t,this.parent.notify("refresh-virtual-cache",{data:t}),lV(n,this.parent.getForeignKeyColumns(),n.changes),this.needRefresh()&&i.refresh(n,this.parent.getColumns(),!0);var s=[].slice.call(this.parent.element.querySelectorAll('[data-rowindex="'+n.index+'"]'));if(e&&s.length)for(var o=0;o<s.length;o++){var a=s[o].getAttribute("data-uid");a!==this.uid&&((n=this.parent.getRowObjectFromUID(a)).changes=t,i.refresh(n,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(s[o]))}}},r.prototype.closeEdit=function(){var t=this;if(this.parent.isEdit){var e=this.parent,i=de(this.args,{requestType:"cancel",type:or,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",i),this.blazorTemplate(),e.trigger(or,i,function(n){if(!n.cancel){"Dialog"===t.parent.editSettings.mode&&t.parent.notify(NB,{}),e.isEdit=!1,t.stopEditStatus(),n.type=Vi,"Dialog"!==e.editSettings.mode&&t.refreshRow(n.data);var s=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");!e.getContentTable().querySelector("tr.e-emptyrow")&&!e.getContentTable().querySelector("tr.e-row")&&!s&&e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(t.rowIndex),e.trigger(Vi,n)}})}},r.prototype.addRecord=function(t,e){var i=this,n=this.parent;if(this.addedRowIndex=e=f(e)?0:e,t)n.notify(zo,{requestType:"save",type:or,data:t,selectedRow:0,action:"add",index:e});else if(!n.isEdit){this.previousData={},this.uid="";var s=n.getColumns(),o={virtualData:{},isScroll:!1};this.parent.notify(Km,o);for(var a=0;a<s.length;a++)o.isScroll&&"movable"!==s[a].getFreezeTableName()||s[a].field&&Ye.setValue(s[a].field,s[a].defaultValue,this.previousData);var l={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:or,index:e,rowData:this.previousData,target:void 0,isScroll:o.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(o.virtualData).length&&(l.data=l.rowData=o.virtualData),l.isScroll?this.inlineAddHandler(l):(this.parent.notify(ZB,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),n.trigger(or,l,function(h){h.cancel||i.inlineAddHandler(h)}))}},r.prototype.inlineAddHandler=function(t){var e=this.parent;e.isEdit=!0,"Dialog"!==e.editSettings.mode&&e.clearSelection(),this.renderer.addNew(t),e.editModule.applyFormValidation(),t.type=Vi,t.row=e.element.querySelector("."+Fl),e.trigger(Vi,t),this.args=t},r.prototype.deleteRecord=function(t,e){if(this.editRowIndex=this.parent.selectedRowIndex,e){e=e instanceof Array?e:[e];var i=this.parent,n=Object.keys(e).length;t=t||this.parent.getPrimaryKeyFieldNames()[0];for(var s=function(h){var u,p,m=i.currentViewData.some(function(y){return p=y,e[h]===fs(t,y)||e[h]===y});e[h]=m?p:e[h][t]?e[h]:((u={})[t]=e[h],u)},o=0;o<n;o++)s(o)}var a={requestType:"delete",type:or,foreignKeyData:{},data:e||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(f(this.parent.commandDelIndex)||(a.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&a.data.length>1){var l=this.parent.getSelectedRows()[0].getAttribute("data-uid");a.data=[this.parent.getRowObjectFromUID(l).data]}this.parent.notify(zo,a)},r.prototype.stopEditStatus=function(){for(var t=this.parent,e=[].slice.call(t.element.getElementsByClassName(Fl)),i=[].slice.call(t.element.getElementsByClassName(Ha)),n=0;n<e.length;n++)$e(e[n]);for(n=0;n<i.length;n++)i[n].classList.remove(Ha)},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:jX,handler:this.editHandler},{event:xq,handler:this.dblClickHandler},{event:nl,handler:this.clickHandler},{event:kq,handler:this.requestSuccess},{event:f_,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:Zq,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],mo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||mo(this.parent,this.evtHandlers,!1)},r.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},r}(),B0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cee=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return B0e(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(uee),V0e=function(){function r(t,e,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.initialRender=!0,this.validationColObj=[],this.parent=t,this.serviceLocator=e,this.renderer=i,this.focus=e.getService("focus"),this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:nl,handler:this.clickHandler},{event:f_,handler:this.dblClickHandler},{event:DT,handler:this.onBeforeCellFocused},{event:PB,handler:this.onCellFocused},{event:xq,handler:this.dblClickHandler},{event:Cs,handler:this.keyDownHandler},{event:HB,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:un,handler:this.destroy}],mo(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(Jl,this.dataBoundFunction),this.parent.addEventListener(Zf,this.batchCancelFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(mo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(Jl,this.dataBoundFunction),this.parent.removeEventListener(Zf,this.batchCancelFunction))},r.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus()},r.prototype.dataBound=function(){this.parent.notify(Gm,{})},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.clickHandler=function(t){ge(t.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&j(this.form,"td")!==j(t.target,"td")&&(this.saveCell(),this.editNextValCell()),ge(t.target,Ji)&&!this.parent.isEdit&&this.setCellIdx(t.target))},r.prototype.dblClickHandler=function(t){var e=ge(t.target,Ji),i=ge(t.target,bn),n=i&&parseInt(i.getAttribute(Ii),10),s=e&&parseInt(e.getAttribute(Us),10);!f(e)&&!f(n)&&!isNaN(s)&&!e.parentElement.classList.contains(Ha)&&this.editCell(n,this.parent.getColumns()[s].field,this.isAddRow(n))},r.prototype.onBeforeCellFocused=function(t){this.parent.isEdit&&this.validateFormObj()&&(t.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(t.keyArgs.action)>-1)&&(t.cancel=!0,t.byClick?t.clickArgs.preventDefault():t.keyArgs.preventDefault())},r.prototype.onCellFocused=function(t){var e=this.parent.getFrozenLeftCount(),i=this.parent.getFrozenRightColumnsCount(),n=this.parent.getContent().querySelector("."+Fn),s=this.parent.getHeaderContent().querySelector("."+Kn),o=!(t.container.isContent&&t.container.isDataCell||this.parent.frozenRows&&t.container.isHeader);if(!t.byKey||o||this.parent.isFrozenGrid()&&t.element&&j(t.element,".e-gridheader")&&!t.element.parentElement.hasAttribute("data-rowindex"))this.parent.isEdit&&o&&this.saveCell();else{var a=t.container.indexes,l=a[0],h=a[1];if(e&&(n.contains(t.element)||this.parent.frozenRows&&s.contains(t.element))&&(h+=e),i){var u=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(t.element)||this.parent.frozenRows&&u.contains(t.element))&&(h+=e+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&t.container.isContent&&(l+=this.parent.frozenRows);var m=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(m=m&&!this.validateFormObj(),t.keyArgs.action){case"tab":case"shiftTab":var y=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0,C=this.parent.getColumns()[h-y];C&&!this.parent.isEdit&&this.editCell(l,C.field),(m||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(l,h);break;case"enter":case"shiftEnter":t.keyArgs.preventDefault();var S={cancel:!1,keyArgs:t.keyArgs};this.parent.notify("beforeFocusCellEdit",S),!S.cancel&&m&&this.editCell(l,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(l,h),this.focus.focus()}}},r.prototype.isAddRow=function(t){return this.parent.getDataRows()[t].classList.contains("e-insertedrow")},r.prototype.editCellFromIndex=function(t,e){this.cellDetails.rowIndex=t,this.cellDetails.cellIndex=e,this.editCell(t,this.parent.getColumns()[e].field,this.isAddRow(t))},r.prototype.closeEdit=function(){var t=this,e=this.parent,i=this.parent.getRowsObject(),n={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",n),!n.cancel){e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(var l,s=mV(this.parent),o=function(p){var m=!1,y=i[p].isDirty;fb(a.parent,function(C,S){(m=t.removeBatchElementChanges(S[p],y))&&S.splice(p,1)},s),m&&p--,l=p},a=this,h=0;h<i.length;h++)o(h),h=l;e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var u=this.parent.getRowsObject();this.parent.isFrozenGrid()?(this.parent.getRowsObject().length&&e.notify(Zf,{rows:this.parent.getRowsObject(),args:{isFrozen:!0}}),this.parent.getMovableRowsObject().length&&e.notify(Zf,{rows:this.parent.getMovableRowsObject()}),this.parent.getFrozenRightRowsObject().length&&e.notify(Zf,{rows:this.parent.getFrozenRightRowsObject(),args:{renderFrozenRightContent:!0}})):e.notify(Zf,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new qp({isDataRow:!0,cells:[new zu({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(Gm,{}),this.parent.notify(Cw,{}),u={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(Zf,u)}},r.prototype.removeBatchElementChanges=function(t,e){var i=this.parent,n=new wh(this.serviceLocator,null,this.parent),s=!1;if(e){t.isDirty=e;var o=i.getRowElementByUID(t.uid);if(o&&(o.classList.contains("e-insertedrow")?($e(o),s=!0):(lV(t,this.parent.getForeignKeyColumns(),t.data),delete t.changes,delete t.edit,t.isDirty=!1,ai(o,[],["e-hiddenrow","e-updatedtd"]),n.refresh(t,i.getColumns(),!1)),this.parent.aggregates.length>0)){var l=[];l.type="cancel",this.parent.notify(Wm,l),this.parent.groupSettings.columns.length>0&&this.parent.notify(ob,l)}}return s},r.prototype.removeHideAndSelection=function(t){if(t.classList.contains("e-hiddenrow")){t.removeAttribute("aria-selected");for(var e=[].slice.call(t.getElementsByClassName("e-selectionbackground")),i=0;i<e.length;i++)W([e[i]],["e-selectionbackground","e-active"])}ai(t,[],["e-hiddenrow","e-updatedtd"])},r.prototype.deleteRecord=function(t,e){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(t,e),this.parent.aggregates.length>0&&(this.parent.notify(Wm,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(ob,{}))},r.prototype.addRecord=function(t){this.bulkAddRow(t)},r.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},r.prototype.closeForm=function(){for(var t=0;t<Object.keys(this.originalCell).length;t++)for(var e=0;e<Object.keys(this.cloneCell).length;e++)Object.keys(this.originalCell)[t]===Object.keys(this.cloneCell)[e]&&(this.cloneCell[Object.keys(this.cloneCell)[e]].replaceWith(this.originalCell[Object.keys(this.originalCell)[t]]),this.originalCell[Object.keys(this.originalCell)[t]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[t]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}},r.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},r.prototype.batchSave=function(){var t=this.parent,e="deletedRecords";if(t.isCheckBoxSelection){var i=t.element.querySelector(".e-checkselectall").parentElement;i.classList.contains("e-checkbox-disabled")&&t.pageSettings.totalRecordsCount>t.currentViewData.length&&W([i],["e-checkbox-disabled"])}if(this.saveCell(),!(t.isEdit||this.editNextValCell()||t.isEdit)){var n=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&n[e].length&&this.parent.selectionSettings.persistSelection&&(n[e]=this.removeSelectedData,this.removeSelectedData=[]);var s={changedRecords:this.parent.getRowsObject().filter(function(a){return a.isDirty&&-1===["add","delete"].indexOf(a.edit)}).map(function(a){return a.data})};t.trigger("beforeBatchSave",{batchChanges:n,cancel:!1},function(a){a.cancel||(t.showSpinner(),t.notify(HX,{changes:n,original:s}))})}},r.prototype.getBatchChanges=function(){for(var t={addedRecords:[],deletedRecords:[],changedRecords:[]},i=0,n=this.parent.getRowsObject();i<n.length;i++){var s=n[i];if(s.isDirty)switch(s.edit){case"add":t.addedRecords.push(s.changes);break;case"delete":t.deletedRecords.push(s.data);break;default:t.changedRecords.push(s.changes)}}return t},r.prototype.removeRowObjectFromUID=function(t){for(var e=this.parent.getRowsObject(),i=0,n=e.length;i<n&&e[i].uid!==t;i++);fb(this.parent,function(s,o){o.splice(i,1)},mV(this.parent))},r.prototype.addRowObject=function(t,e){var i=this.parent,n="Top"===i.editSettings.newRowPosition;fb(this.parent,function(s,o){var a=t.clone();i.isFrozenGrid()?e===s&&(n?o.unshift(a):o.push(a)):n?o.unshift(a):o.push(a)},mV(this.parent),!0)},r.prototype.bulkDelete=function(t,e){var i=this;this.removeSelectedData=[];var n=this.parent,s=n.selectedRowIndex,o=n.getSelectedRows(),a={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:s,rowData:e||n.getSelectedRecords()[0],cancel:!1};a.row=e?n.editModule.deleteRowUid?n.getRowElementByUID(n.editModule.deleteRowUid):n.getRows()[n.getCurrentViewRecords().indexOf(e)]:e?n.getRows()[s]:o[0],a.row&&n.trigger("beforeBatchDelete",a,function(l){if(!l.cancel){if(i.removeSelectedData=n.getSelectedRecords(),n.clearSelection(),l.row=l.row?l.row:e?n.getRows()[s]:o[0],i.parent.isFrozenGrid()){e&&(s=parseInt(l.row.getAttribute(Ii),10),(o=[]).push(n.getRowByIndex(s)),o.push(n.getMovableRowByIndex(s)),n.getFrozenMode()===Qt&&o.push(n.getFrozenRightRowByIndex(s)));for(var h=0;h<o.length;h++){var u=o[h].getAttribute("data-uid");o[h].classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),$e(o[h])):((p=n.getRowObjectFromUID(u)).isDirty=!0,p.edit="delete",ai(o[h],["e-hiddenrow","e-updatedtd"],[]),n.frozenRows&&s<n.frozenRows&&n.getMovableDataRows().length>=n.frozenRows&&(n.getMovableHeaderTbody().appendChild(n.getMovableRowByIndex(n.frozenRows-1)),n.getFrozenHeaderTbody().appendChild(n.getRowByIndex(n.frozenRows-1)),n.getFrozenMode()===Qt&&n.getFrozenRightHeaderTbody().appendChild(n.getFrozenRightRowByIndex(n.frozenRows-1))),n.frozenRows&&s<n.frozenRows&&n.getDataRows().length>=n.frozenRows&&n.getHeaderTable().querySelector(rt).appendChild(n.getRowByIndex(n.frozenRows-1))),delete o[h]}}else if(i.parent.isFrozenGrid()||1!==o.length&&!e)for(h=0;h<o.length;h++){var m=o[h].getAttribute("data-uid");if(o[h].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(m),$e(o[h]);else{ai(o[h],["e-hiddenrow","e-updatedtd"],[]);var y=n.getRowObjectFromUID(m);y.isDirty=!0,y.edit="delete",delete o[h]}}else{var p;u=l.row.getAttribute("data-uid"),u=e&&i.parent.editModule.deleteRowUid?u=i.parent.editModule.deleteRowUid:u,l.row.classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),$e(l.row)):((p=n.getRowObjectFromUID(u)).isDirty=!0,p.edit="delete",ai(l.row,["e-hiddenrow","e-updatedtd"],[])),delete l.row}i.refreshRowIdx(),e&&(n.editModule.deleteRowUid=void 0,n.getSelectedRows().length&&(s=parseInt(n.getSelectedRows()[0].getAttribute(Ii),10))),n.isCheckBoxSelection||n.selectRow(s),n.trigger(_B,l),n.notify(_B,{rows:i.parent.getRowsObject()}),n.notify(Gm,{})}})},r.prototype.refreshRowIdx=function(){for(var a,e=this.parent.getAllDataRows(!0),i=function ZCe(r){return["Right"!==r.getFrozenMode()?r.getAllDataRows(!0):[],r.getAllMovableDataRows(!0),r.getAllFrozenRightDataRows(!0)]}(this.parent),n=mV(this.parent),s=function(p,m,y){e[p].classList.contains(bn)&&!e[p].classList.contains("e-hiddenrow")?(fb(o.parent,function(C,S,T){S[p].setAttribute(Ii,m.toString()),S[p].setAttribute(x_,(m+1).toString()),T[p].index=m},i,null,n),m++):fb(o.parent,function(C,S,T){S[p].removeAttribute(Ii),S[p].removeAttribute(x_),T[p].index=-1},i,null,n),a=m},o=this,l=0,h=0,u=e.length;l<u;l++)s(l,h),h=a},r.prototype.getIndexFromData=function(t){return function O_(r,t){for(var e=0,i=t.length;e<i;e++)if(t[e]===r)return e;return-1}(t,this.parent.getCurrentViewRecords())},r.prototype.bulkAddRow=function(t){var e=this,i=this.parent;if(i.editSettings.allowAdding&&(i.isEdit&&(this.saveCell(),this.parent.notify(HB,{})),!i.isEdit)){if(this.initialRender){for(var n=i.getVisibleColumns(),s=0;s<n.length;s++)if(n[s].validationRules&&n[s].validationRules.required){var o={field:n[s].field.slice(),cellIdx:s};this.validationColObj.push(o)}this.initialRender=!1}this.parent.element.classList.add("e-editing");var l={defaultData:t||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger("beforeBatchAdd",l,function(h){if(!h.cancel)if(e.isAdded=!0,i.clearSelection(),i.isFrozenGrid()){for(var u=e.parent.getMovableColumnsCount(),p=e.parent.getFrozenLeftCount(),m=e.parent.getFrozenRightColumnsCount(),y=i.getContentTable().querySelector(rt),C=u+p+m,S=void 0,T=[],R=[],P=void 0,O=void 0,N=void 0,z=void 0,U=void 0,ae=0;ae<C;){var me=new wh(e.serviceLocator,null,e.parent),Oe=new Md(e.parent).generateRows([h.defaultData]);p>0?(S="frozen-left",C=(p=0)+m+u):u>0?(S="movable",C=p+m+(u=0)):(S="frozen-right",C=p+(m=0)+u);for(var oe=0;oe<Oe.length;oe++)Oe[oe].cells=gV(e.parent,Oe[oe].cells,S);"frozen-left"===S?(N=me.render(Oe[0],i.getColumns())).classList.add("e-insertedrow"):"movable"===S?(z=me.render(Oe[0],i.getColumns())).classList.add("e-insertedrow"):(U=me.render(Oe[0],i.getColumns())).classList.add("e-insertedrow");for(var Ie=0;Ie<e.parent.groupSettings.columns.length;Ie++)N.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),N.firstChild),Oe[0].cells.unshift(new zu({cellType:Bt.Indent}));y.querySelector(".e-emptyrow")&&((De=y.querySelector(".e-emptyrow")).parentNode.removeChild(De),e.removeFrozenTbody()),"frozen-left"===S&&(y=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(rt):i.getContentTable().querySelector(rt),"Top"===e.parent.editSettings.newRowPosition?(y.insertBefore(N,y.firstChild),B([].slice.call(N.getElementsByClassName(Ji)),["e-updatedtd"])):(y.appendChild(N),B([].slice.call(N.getElementsByClassName(Ji)),["e-updatedtd"]))),("movable"===S||"frozen-right"===S)&&e.renderFrozenAddRow(z,U,S),Oe[0].isDirty=!0,Oe[0].changes=de({},{},Oe[0].data,!0),Oe[0].edit="add",e.addRowObject(Oe[0],S)}e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(yw,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}});var fe=e.getBatchChanges(),_e=e.getBottomIndex();i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:_e),t||(O=e.findNextEditableCell(0,!0),P=i.getColumns()[O],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:_e,P.field,!0)),e.parent.aggregates.length>0&&(t||fe[Up].length)&&e.parent.notify(Wm,{}),N&&(fV(z.querySelector("td:not(.e-hide)"),N.querySelector("td:not(.e-hide)")),T.push(N),R.push(N.cells)),T.push(z),R.push(z.cells),U&&(T.push(U),R.push(U.cells)),i.trigger(yw,{defaultData:h.defaultData,row:T,columnObject:P,columnIndex:O,primaryKey:h.primaryKey,cell:R})}else{for(me=new wh(e.serviceLocator,null,e.parent),Oe=new Md(e.parent).generateRows([h.defaultData]),N=me.render(Oe[0],i.getColumns()),P=void 0,O=void 0,ae=0;ae<e.parent.groupSettings.columns.length;ae++)N.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),N.firstChild),Oe[0].cells.unshift(new zu({cellType:Bt.Indent}));var De;y=i.getContentTable().querySelector(rt),N.classList.add("e-insertedrow"),y.querySelector(".e-emptyrow")&&((De=y.querySelector(".e-emptyrow")).parentNode.removeChild(De),e.removeFrozenTbody()),y=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(rt):i.getContentTable().querySelector(rt),"Top"===e.parent.editSettings.newRowPosition?y.insertBefore(N,y.firstChild):y.appendChild(N),B([].slice.call(N.getElementsByClassName(Ji)),["e-updatedtd"]),Oe[0].isDirty=!0,Oe[0].changes=de({},{},Oe[0].data,!0),Oe[0].edit="add",e.addRowObject(Oe[0]),e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(yw,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}}),fe=e.getBatchChanges(),_e=e.getBottomIndex(),i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:_e),t||(O=e.findNextEditableCell(0,!0),P=i.getColumns()[O],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:_e,P.field,!0)),e.parent.aggregates.length>0&&(t||fe[Up].length)&&e.parent.notify(Wm,{}),i.trigger(yw,{defaultData:h.defaultData,row:N,columnObject:P,columnIndex:O,primaryKey:h.primaryKey,cell:N.cells[O]})}})}},r.prototype.renderFrozenAddRow=function(t,e,i){var s,o,n=this.parent;"movable"===i&&(s=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getMovableHeaderTbody():this.parent.getContent().querySelector(".e-movablecontent").querySelector(rt),"Top"===n.editSettings.newRowPosition?s.insertBefore(t,s.firstChild):s.appendChild(t),B([].slice.call(t.getElementsByClassName(Ji)),["e-updatedtd"])),"frozen-right"===i&&(o=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getFrozenRightHeaderTbody():this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(rt),"Top"===n.editSettings.newRowPosition?o.insertBefore(e,o.firstChild):o.appendChild(e),B([].slice.call(e.getElementsByClassName(Ji)),["e-updatedtd"]),fV(e.querySelector("td:not(.e-hide)"),t.querySelector("td:not(.e-hide)"))),"auto"===n.height&&n.notify(y_,{})},r.prototype.removeFrozenTbody=function(){var t=this.parent;if(t.isFrozenGrid()){var e=t.getContent().querySelector("."+Fn).querySelector(rt);if(e.firstElementChild.parentNode.removeChild(e.firstElementChild),t.getFrozenMode()===Qt){var i=t.getContent().querySelector(".e-frozen-right-content").querySelector(rt);i.firstElementChild.parentNode.removeChild(i.firstElementChild)}}},r.prototype.renderMovable=function(t,e){var i=t.cloneNode(!0),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenLeftCount(),o=this.parent.getFrozenRightColumnsCount();return CU(t,0,s),CU(i,s,o?i.children.length-o:i.children.length),CU(e,s+n,e.children.length),i},r.prototype.findNextEditableCell=function(t,e,i){for(var o,n=this.parent.getColumns(),s=n.length,a=t;a<s;a++){if(o=!!i&&f(n[a].validationRules),!e&&this.checkNPCell(n[a]))return a;if(e&&(!n[a].template||n[a].field)&&n[a].visible&&n[a].allowEditing&&(!n[a].isIdentity||!n[a].isPrimaryKey)&&!o)return a}return-1},r.prototype.checkNPCell=function(t){return!t.template&&t.visible&&!t.isPrimaryKey&&!t.isIdentity&&t.allowEditing},r.prototype.getDefaultData=function(){for(var e={},i={number:0,string:null,boolean:!1,date:null,datetime:null},n=0,s=this.parent.columnModel;n<s.length;n++){var o=s[n];o.field&&ui(o.field,Object.keys(o).indexOf("defaultValue")>=0?o.defaultValue:i[o.type],e)}return e},r.prototype.setCellIdx=function(t){var e=0;this.parent.allowGrouping&&(e=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=t.cellIndex-e,this.cellDetails.rowIndex=parseInt(t.getAttribute("index"),10)},r.prototype.editCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e);this.index=t,this.field=e,this.isAdd=i;var o=n.isEdit&&!(this.cellDetails.column.field===e&&this.cellDetails.rowIndex===t&&this.parent.getDataRows().length-1!==t);n.editSettings.allowEditing&&(!o&&s.allowEditing?this.editCellExtend(t,e,i):o&&(this.editNext=!0,this.saveCell()))},r.prototype.editCellExtend=function(t,e,i){var n=this,s=this.parent,o=s.getColumnByField(e),a=s.getPrimaryKeyFieldNames();if(!s.isEdit){var l,h,u=de({},{},this.getDataByIndex(t),!0);if("movable"===o.getFreezeTableName()||o.getFreezeTableName()===tr?(l="movable"===o.getFreezeTableName()?s.getMovableDataRows()[t]:s.getFrozenRightDataRows()[t],h=this.parent.getRowObjectFromUID(l.getAttribute("data-uid")),u=h.changes?de({},{},h.changes,!0):u):(l=s.getDataRows()[t],u=de({},{},this.getDataByIndex(t),!0)),a[0]===o.field&&!l.classList.contains("e-insertedrow")||o.columns||o.isPrimaryKey&&o.isIdentity||o.commands)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");var p=s.getRowObjectFromUID(l.getAttribute("data-uid")),m=[].slice.apply(l.cells),y={columnName:o.field,isForeignKey:!f(o.foreignKeyValue),primaryKey:a,rowData:u,validationRules:de({},o.validationRules?o.validationRules:{}),value:fs(o.field,u),type:i?"add":"edit",cancel:!1,foreignKeyData:p&&p.foreignKeyData};y.cell=m[this.getColIndex(m,this.getCellIdx(o.uid))],y.row=l,y.columnObject=o,y.cell&&s.trigger("cellEdit",y,function(C){C.cancel||(C.cell=C.cell?C.cell:m[n.getColIndex(m,n.getCellIdx(o.uid))],C.row=C.row?C.row:l,C.columnObject=C.columnObject?C.columnObject:o,C.columnObject.index=f(C.columnObject.index)?0:C.columnObject.index,n.cellDetails={rowData:u,column:o,value:C.value,isForeignKey:C.isForeignKey,rowIndex:t,cellIndex:parseInt(C.cell.getAttribute(Us),10),foreignKeyData:C.foreignKeyData},C.cell.classList.contains("e-updatedtd")&&(n.isColored=!0,C.cell.classList.remove("e-updatedtd")),s.isEdit=!0,s.clearSelection(),(!s.isCheckBoxSelection||!s.isPersistSelection)&&s.selectRow(n.cellDetails.rowIndex,!0),n.renderer.update(C),n.parent.notify("batcheditform-rendered",C),n.form=he("#"+s.element.id+"EditForm",s.element),s.editModule.applyFormValidation([o]),n.parent.element.querySelector(".e-gridpopup").style.display="none")})}},r.prototype.updateCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e),o=n.getColumnIndexByField(e);if(s&&!s.isPrimaryKey&&s.allowEditing){var a=wU(this.parent,s,t,o),l="movable"===s.getFreezeTableName()?this.parent.getMovableRowsObject()[t]:s.getFreezeTableName()===tr?n.getFrozenRightRowsObject()[t]:n.getRowObjectFromUID(a.parentElement.getAttribute("data-uid"));this.refreshTD(a,s,l,i),this.parent.trigger(dq,{cell:this.newReactTd||a,column:s,data:l.changes})}},r.prototype.setChanges=function(t,e,i){var n;if(this.parent.isFrozenGrid()){var o=this.parent.getRowElementByUID(t.uid),a=parseInt(o.getAttribute(Ii),10);(n=this.parent.getRowsObject()[a]).changes||(n.changes=de({},{},t.data,!0)),f(e)||ui(e,i,n.changes);var l=this.parent.getMovableRowsObject()[a];if(l.changes=de({},{},n.changes,!0),t.data[e]!==i&&(l.isDirty=!0,n.isDirty=!0),this.parent.getFrozenMode()===Qt){var h=this.parent.getFrozenRightRowsObject()[a];h.changes=de({},{},n.changes,!0),t.data[e]!==i&&(h.isDirty=!0)}}else if(t.changes||(t.changes=de({},{},t.data,!0)),f(e)||Ye.setValue(e,i,t.changes),t.data[e]!==i){var s=this.parent.getColumnByField(e).type;"date"===s||"datetime"===s?new Date(t.data[e]).toString()!==new Date(i).toString()&&(t.isDirty=!0):t.isDirty=!0}},r.prototype.updateRow=function(t,e){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];this.updateCell(t,o,e[o])}},r.prototype.getCellIdx=function(t){var e=this.parent.getColumnIndexByUid(t)+this.parent.groupSettings.columns.length;return(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&e++,this.parent.isRowDragable()&&e++,e},r.prototype.refreshTD=function(t,e,i,n){var o,s=new eh(this.parent,this.serviceLocator);n="number"!==e.type||f(n)?n:parseFloat(n),this.setChanges(i,e.field,n);var l,h,a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a=a&&this.parent.isRowDragable()?a+1:a,lV(i,this.parent.getForeignKeyColumns(),i.changes),o=a&&"movable"===e.getFreezeTableName()&&this.parent.getColumns().length===i.cells.length?i.cells.slice(a,i.cells.length):i.cells,this.parent.isReact&&(l=t.parentElement,h=t.cellIndex);var u=0;a&&(u="movable"===e.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?a:e.getFreezeTableName()===tr?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():u),s.refreshTD(t,o[this.getCellIdx(e.uid)-u],i.changes,{index:this.getCellIdx(e.uid)}),this.parent.isReact?(this.newReactTd=l.cells[h],l.cells[h].classList.add("e-updatedtd")):t.classList.add("e-updatedtd"),t.classList.add("e-updatedtd"),this.parent.notify(Gm,{})},r.prototype.getColIndex=function(t,e){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&i++,this.parent.isRowDragable()&&i++;for(var n=0;n<t.length;n++)if(parseInt(t[n].getAttribute(Us),10)===e-i)return n;return-1},r.prototype.editNextValCell=function(){var t=this.parent,e=t.element.querySelectorAll(".e-insertedrow"),i=1===e.length||(t.getFrozenColumns()>0||t.getFrozenRightColumnsCount()>0||t.getFrozenLeftColumnsCount()>0)&&(2===e.length||3===e.length);if(i&&this.isAdded&&!t.isEdit){for(var n=this.getBottomIndex(),s=this.cellDetails.cellIndex;s<t.getColumns().length;s++){if(t.isEdit)return;var o=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),a=t.getColumns()[o];if(a){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(n,a.field,!0);else{var l={index:0,column:a};this.parent.notify("next-cell-index",l),this.editCell(l.index,a.field,!0)}this.saveCell()}}t.isEdit||(this.isAdded=!1)}else if(i||!this.isAdded||t.isEdit||t.isFrozenGrid()){if(!i&&this.isAdded&&!t.isEdit&&t.isFrozenGrid()){var m=t.getFrozenLeftContentTbody()?t.getFrozenLeftContentTbody().querySelectorAll(".e-insertedrow"):void 0,y=t.getFrozenRightContentTbody()?t.getFrozenRightContentTbody().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableContentTbody().querySelectorAll(".e-insertedrow"),S=(h=0,t.getVisibleFrozenLeftCount()?t.getVisibleFrozenLeftCount():t.getFrozenColumns()),T=t.getVisibleFrozenRightCount(),R=t.getVisibleMovableCount();for("Bottom"===t.editSettings.newRowPosition?(u=this.getBatchChanges(),h=t.getCurrentViewRecords().length-u[hb].length):"Top"===t.editSettings.newRowPosition&&t.frozenRows&&(m=t.getFrozenHeaderTbody()?t.getFrozenHeaderTbody().querySelectorAll(".e-insertedrow"):void 0,y=t.getFrozenRightHeader()?t.getFrozenRightHeader().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableHeaderTbody().querySelectorAll(".e-insertedrow")),s=0;s<C.length&&!t.isEdit;s++,h++)for(p=0;p<this.validationColObj.length&&!t.isEdit;p++)S&&this.validationColObj[p].cellIdx<S?""===m[s].querySelectorAll("td")[this.validationColObj[p].cellIdx].innerText&&(this.editCell(h,this.validationColObj[p].field),t.editModule.formObj.validate()&&this.saveCell()):T&&R<=this.validationColObj[p].cellIdx?""===y[s].querySelectorAll("td")[this.validationColObj[p].cellIdx-(R+S)].innerText&&(this.editCell(h,this.validationColObj[p].field),t.editModule.formObj.validate()&&this.saveCell()):""===C[s].querySelectorAll("td")[this.validationColObj[p].cellIdx-S].innerText&&(this.editCell(h,this.validationColObj[p].field),t.editModule.formObj.validate()&&this.saveCell());t.isEdit||(this.isAdded=!1)}}else{var h=0;if("Bottom"===t.editSettings.newRowPosition){var u=this.getBatchChanges();h=t.getCurrentViewRecords().length-u[hb].length}for(s=0;s<e.length&&!t.isEdit;s++,h++)for(var p=0;p<this.validationColObj.length&&!t.isEdit;p++)""===e[s].querySelectorAll("td")[this.validationColObj[p].cellIdx].innerText&&(this.editCell(h,this.validationColObj[p].field),this.validateFormObj()&&this.saveCell());t.isEdit||(this.isAdded=!1)}},r.prototype.escapeCellEdit=function(){var t=this.generateCellArgs();t.value=t.previousValue,(t.value||!this.cellDetails.column.validationRules)&&this.successCallBack(t,t.cell.parentElement,t.column,!0)(t)},r.prototype.generateCellArgs=function(){var t=this.parent;this.parent.element.classList.remove("e-editing");var e=this.cellDetails.column,i={};i[e.field]=fs(e.field,this.cellDetails.rowData);var n=t.editModule.getCurrentEditedData(this.form,i),s=de({},n);n=de({},n,this.cellDetails.rowData);var o=fs(e.field,s);!f(e.field)&&!Jt(o)&&ui(e.field,o,n);var a={columnName:e.field,value:fs(e.field,n),rowData:this.cellDetails.rowData,column:e,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return a.cell=this.form.parentElement,a.columnObject=e,a},r.prototype.saveCell=function(t){if(!this.preventSaveCell&&this.form){var e=this.parent;if(t||e.isEdit&&!this.validateFormObj()){this.preventSaveCell=!0;var i=this.generateCellArgs(),n=i.cell.parentElement,s=i.column;t?this.successCallBack(i,n,s)(i):(e.trigger("cellSave",i,this.successCallBack(i,n,s)),e.notify("batchedit-form",{formObj:this.form}))}}},r.prototype.successCallBack=function(t,e,i,n){var s=this;return function(o){var a=s.parent;if(o.cell=o.cell?o.cell:s.form.parentElement,o.columnObject=o.columnObject?o.columnObject:i,o.columnObject.index=f(o.columnObject.index)?0:o.columnObject.index,o.cancel){if(s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;s.editCellExtend(s.index,s.field,s.isAdd)}}else{a.editModule.destroyWidgets([i]),a.isEdit=!1,a.editModule.destroyForm(),s.parent.notify(Cw,{});var l=ge(o.cell,Fn)||ge(o.cell,Kn)?a.getRowObjectFromUID(e.getAttribute("data-uid"),!0):a.getRowObjectFromUID(e.getAttribute("data-uid"));if(a.getFrozenMode()===Qt&&(ge(o.cell,"e-frozen-right-header")||ge(o.cell,"e-frozen-right-content"))&&(l=a.getRowObjectFromUID(e.getAttribute("data-uid"),!1,!0)),s.refreshTD(o.cell,i,l,o.value),s.parent.isReact&&(o.cell=s.newReactTd),W([e],[Ha,"e-batchrow"]),W([o.cell],["e-editedbatchcell","e-boolcell"]),(!f(o.value)&&o.value.toString()===(f(s.cellDetails.value)?"":s.cellDetails.value).toString()&&!s.isColored||f(o.value)&&f(l.data[i.field])&&f(s.cellDetails.value)&&!o.cell.parentElement.classList.contains("e-insertedrow"))&&o.cell.classList.remove("e-updatedtd"),f(n)&&a.trigger("cellSaved",o),a.notify(Gm,{}),s.isColored=!1,s.parent.aggregates.length>0&&(s.parent.notify(Wm,{}),s.parent.groupSettings.columns.length>0&&!s.isAddRow(s.cellDetails.rowIndex)&&s.parent.notify(ob,{})),s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;var h=a.getColumnByField(s.field);h&&h.allowEditing&&s.editCellExtend(s.index,s.field,s.isAdd)}n&&a.notify(ww,{})}}},r.prototype.getDataByIndex=function(t){var e=this.parent.getRowObjectFromUID(this.parent.getDataRows()[t].getAttribute("data-uid"));return e.changes?e.changes:e.data},r.prototype.keyDownHandler=function(t){if(("tab"===t.action||"shiftTab"===t.action)&&this.parent.isEdit){var e=this.parent,i=this.getBottomIndex(),n=ge(t.target,Ji);if(n){var s=n.querySelector(".e-field");if(s){var o=this.parent.getVisibleColumns();o["tab"===t.action?o.length-1:0].field===s.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===t.action?"Top"===e.editSettings.newRowPosition?(e.editSettings.newRowPosition="Bottom",this.addRecord(),e.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}},r.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(Eq,{}),this.parent.isEdit=!1,this.isColored=!1)},r.prototype.getBottomIndex=function(){var t=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+t[Up].length-t[hb].length-1},r}(),H0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),z0e=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return H0e(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(uee),j0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),dee=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return j0e(t,r),t.prototype.write=function(e){this.edit=this.parent.editModule,"datepickeredit"===e.column.editType?this.obj=new hB(de(pee(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new Q6(de(pee(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params))),this.obj.appendTo(e.element)},t}(Jf);function pee(r,t,e,i,n){var s="Dialog"!==t,o=function uV(r,t){var n="format",s="type";return(new Rr).getDatePattern("date"===t?"object"==typeof r?{type:r[s]?r[s]:"date",format:r[n]}:{type:"dateTime",skeleton:r}:"object"==typeof r?{type:r[s]?r[s]:"dateTime",format:r[n]}:{type:"dateTime",skeleton:r},!1)}(r.column.format,r.column.type),a=fs(r.column.field,r.rowData);return{floatLabelType:s?"Never":"Always",value:a=a?new Date(a):null,format:o,placeholder:s?"":r.column.headerText,enableRtl:e,enabled:Qf(r.column,r.requestType,r.element),cssClass:i||null,close:q0e.bind(n)}}function q0e(r){r.event&&"escape"===r.event.action&&(this.edit.editCellDialogClose=!0)}var U0e=function(){function r(t){this.parent=t}return r.prototype.read=function(t,e){return e},r.prototype.write=function(){},r.prototype.destroy=function(){},r}(),W0e=function(){function r(t,e){this.editType={Inline:cee,Normal:cee,Batch:V0e,Dialog:z0e},this.editCellDialogClose=!1,this.parent=t,this.serviceLocator=e,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return r.prototype.updateColTypeObj=function(){for(var t=this.parent.columnModel,e=0;e<t.length;e++)t[e].edit=de(this.parent.editSettings.template||t[e].editTemplate?new r.editCellType.templateedit(this.parent):new r.editCellType[t[e].editType&&r.editCellType[t[e].editType]?t[e].editType:"defaultedit"](this.parent,this.serviceLocator),t[e].edit||{});this.parent.log("primary_column_missing")},r.prototype.getModuleName=function(){return"edit"},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=this.parent,i=0,n=Object.keys(t.properties);i<n.length;i++)switch(n[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(e.editSettings.allowAdding||e.editSettings.allowEditing||e.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),e.isEdit=!1,e.refresh()}},r.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new R0e(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},r.prototype.initialEnd=function(){this.updateColTypeObj()},r.prototype.startEdit=function(t){var e=this.parent;if(e.editSettings.allowEditing&&!e.isEdit&&"Batch"!==e.editSettings.mode){if(this.parent.element.classList.add("e-editing"),e.getSelectedRows().length)t||(t=e.getSelectedRows()[0]);else if(!t)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=t.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==t.style.display&&(this.editModule.startEdit(t),this.refreshToolbar(),e.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}},r.prototype.checkLastRow=function(t,e){var i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&e&&"add"===e.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?B([].slice.call(t.getElementsByClassName(Ji)),"e-lastrowadded"):i&&t&&t.classList&&B([].slice.call(t.getElementsByClassName(Ji)),"e-lastrowcell")},r.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(fJ,{}))},r.prototype.refreshToolbar=function(){this.parent.notify(Gm,{})},r.prototype.addRecord=function(t,e){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};t||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(t,e),this.refreshToolbar(),this.parent.notify("start-add",{}))}},r.prototype.deleteRecord=function(t,e){var i=this.parent;if(i.editSettings.allowDeleting){if(!e&&!i.getSelectedRecords().length&&f(i.commandDelIndex))return void this.showDialog("DeleteOperationAlert",this.alertDObj);if(i.editSettings.showDeleteConfirmDialog)return void this.showDialog("ConfirmDelete",this.dialogObj);this.editModule.deleteRecord(t,e)}},r.prototype.deleteRow=function(t){this.deleteRowUid=t.getAttribute("data-uid");var e=this.parent.getRowObjectFromUID(this.deleteRowUid);f(e)||this.deleteRecord(null,e.data)},r.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(f(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(HB,{}),f(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},r.prototype.updateCell=function(t,e,i){this.editModule.updateCell(t,e,i)},r.prototype.updateRow=function(t,e){this.editModule.updateRow(t,e)},r.prototype.batchCancel=function(){this.closeEdit()},r.prototype.batchSave=function(){this.endEdit()},r.prototype.editCell=function(t,e){this.editModule.editCell(t,e)},r.prototype.editFormValidate=function(){var t=!this.formObj||this.formObj.validate(),e=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return t&&e&&i},r.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},r.prototype.getCurrentEditCellData=function(){var t=this.getCurrentEditedData(this.formObj.element,{});return t[Object.keys(t)[0]]},r.prototype.saveCell=function(){this.editModule.saveCell()},r.prototype.endEditing=function(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()},r.prototype.showDialog=function(t,e){e.content="<div>"+this.l10n.getConstant(t)+"</div>",e.dataBind(),e.show()},r.prototype.getValueFromType=function(t,e){var i=e;switch(t.type){case"number":i=isNaN(parseFloat(e))?null:parseFloat(e);break;case"boolean":"booleanedit"!==t.editType&&(i=e===this.l10n.getConstant("True")||!0===e);break;case"date":case"datetime":"datepickeredit"!==t.editType&&"datetimepickeredit"!==t.editType&&e&&e.length?i=new Date(e):""===e&&(i=null)}return i},r.prototype.destroyToolTip=function(){for(var e=0,i=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));e<i.length;e++)$e(i[e]);this.parent.getContent().firstElementChild.style.position="relative"},r.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},r.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},r.prototype.alertClick=function(){this.alertDObj.hide()},r.prototype.dlgWidget=function(t,e){var i=this.parent.createElement("div",{id:this.parent.element.id+e});this.parent.element.appendChild(i);var n={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""};n.buttons=t;var s=new Cd(n);return s.isStringTemplate=!0,s.appendTo(i),s},r.prototype.dlgCancel=function(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide(),this.parent.notify("cancelcnfrmDlg",{})},r.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()},r.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:Va,handler:this.onPropertyChanged},{event:Ba,handler:this.initialEnd},{event:Cs,handler:this.keyPressHandler},{event:bw,handler:this.updateColTypeObj},{event:Cw,handler:this.destroyToolTip},{event:eu,handler:this.preventBatch},{event:Eq,handler:this.destroyForm},{event:un,handler:this.destroyEditComponents}],mo(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(or,this.actionBeginFunction),this.parent.addEventListener(Vi,this.actionCompleteFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(mo(this.parent,this.eventDetails,!1),this.parent.removeEventListener(Vi,this.actionCompleteFunction),this.parent.removeEventListener(or,this.actionBeginFunction))},r.prototype.actionComplete=function(t){["add","beginEdit","save","delete","cancel"].indexOf(t.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===t.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},r.prototype.getCurrentEditedData=function(t,e){var i=this.parent;if(i.editSettings.template){for(var n=[].slice.call(t.elements),s=0;s<n.length;s++)if((n[s].hasAttribute("name")&&"e-multi-hidden"!==n[s].className||n[s].classList.contains("e-multiselect"))&&("hidden"!==n[s].type||!ge(n[s],"e-switch-wrapper")&&!ge(n[s],"e-checkbox-wrapper"))){var o=n[s].hasAttribute("name")?aV(n[s].getAttribute("name")):aV(n[s].getAttribute("id")),a=i.getColumnByField(o)||{field:o,type:n[s].getAttribute("type")},l=void 0;"checkbox"===a.type||"boolean"===a.type?l=n[s].checked:n[s].value?(l=n[s].value,n[s].ej2_instances&&n[s].ej2_instances.length&&!f(n[s].ej2_instances[0].value)&&(n[s].blur(),l=n[s].ej2_instances[0].value)):n[s].ej2_instances&&(l=n[s].ej2_instances[0].value),a.edit&&"string"==typeof a.edit.read?l=re(a.edit.read,window)(n[s],l):a.edit&&a.edit.read&&(l=a.edit.read(n[s],l)),l=i.editModule.getValueFromType(a,l),"radio"===n[s].type?n[s].checked&&Ye.setValue(a.field,l,e):Ye.setValue(a.field,l,e)}return e}for(var h=i.columnModel.filter(function(R){return R.editTemplate}),u=0;u<h.length;u++)if(t[Eo(h[u].field)]){var p=[].slice.call(t[Eo(h[u].field)]),m=(p=p.length?p:[t[Eo(h[u].field)]]).filter(function(R){return!f(R.ej2_instances)});for(0===m.length&&(m=p.filter(function(R){return R.hasAttribute("name")})),s=0;s<m.length;s++)l=this.getValue(h[u],m[s],e),Ye.setValue(h[u].field,l,e)}for(var y=[].slice.call(t.getElementsByClassName("e-field")),C=0,S=y.length;C<S;C++){var T=i.getColumnByUid(y[C].getAttribute("e-mappinguid"));T&&T.field&&(l=this.getValue(T,y[C],e),Ye.setValue(T.field,l,e))}return e},r.prototype.getValue=function(t,e,i){var n=e.ej2_instances?e.ej2_instances[0].value:e.value,s=this.parent,o=t.edit.read;return("checkbox"===t.type||"boolean"===t.type)&&(n=e.checked),"string"==typeof o?(o=re(o,window),n=s.editModule.getValueFromType(t,o(e,n))):n=s.editModule.getValueFromType(t,t.edit.read(e,n)),f(i[t.field])&&""===n&&(n=i[t.field]),n},r.prototype.onActionBegin=function(t){if("columnstate"===t.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{var e=this.parent.element.querySelector("."+Ha),i=this.parent.element.querySelector("."+Fl);if(e&&this.parent.frozenRows&&"virtualscroll"===t.requestType&&parseInt(ge(e,bn).getAttribute(Ii),10)<this.parent.frozenRows)return;var s=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(t.requestType);(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&s&&!t.cancel||this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(e||i||"cancel"===t.requestType)&&s)&&(this.destroyWidgets(),this.destroyForm())}},r.prototype.destroyWidgets=function(t){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(t=t||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(function(h){return!f(h.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(var i=0,n=t;i<n.length;i++){var s=n[i],o=s.edit.destroy;s.edit.destroy&&("string"==typeof o?(o=re(o,window))():s.edit.destroy())}for(var a=[].slice.call(this.formObj.element.elements),l=0;l<a.length;l++)a[l].hasAttribute("name")&&a[l].ej2_instances&&a[l].ej2_instances.length&&!a[l].ej2_instances[0].isDestroyed&&a[l].ej2_instances[0].destroy()},r.prototype.destroyForm=function(){this.destroyToolTip();for(var t=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj],e=0;e<t.length;e++)t[e]&&t[e].element&&!t[e].isDestroyed&&t[e].destroy();this.destroyToolTip()},r.prototype.destroy=function(){var t=this.parent.element;if(t){var e=!(!t.querySelector("."+qs)||!t.querySelector("."+Ps));e&&this.destroyForm(),this.removeEventListener();var i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),$e(i)),(i=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),$e(i)),e&&this.editModule&&this.editModule.destroy()}},r.prototype.keyPressHandler=function(t){switch(t.action){case"insert":this.addRecord();break;case"delete":("INPUT"!==t.target.tagName||t.target.classList.contains("e-checkselect"))&&!document.querySelector(".e-popup-open.e-edit-dialog")&&this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!ge(t.target,"e-unboundcelldiv")&&"Batch"!==this.parent.editSettings.mode&&(ge(t.target,Ps)||this.parent.frozenRows&&ge(t.target,Ls))&&!document.getElementsByClassName("e-popup-open").length&&(t.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.curretRowFocus(t)),this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(t)}},r.prototype.curretRowFocus=function(t){if(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode){var e=ge(t.target,"e-editedrow")||ge(t.target,"e-addedrow");if(e){var i=e.classList.contains("e-addedrow")?"e-addedrow":"e-editedrow",n=[].slice.call(e.querySelectorAll(".e-input:not(.e-disabled)")),s=[].slice.call(e.querySelectorAll(".e-unboundcell"));if(s)for(var o=0;o<s.length;o++)n=n.concat([].slice.call(s[o].querySelectorAll(".e-btn:not(.e-hide)")));if(this.parent.isFrozenGrid())if(f(this.parent.frozenRows)||f(ge(t.target,"e-frozenheader"))&&f(ge(t.target,"e-movableheader"))){var h=this.parent.getContent().querySelector(".e-movablecontent ."+i);if(n.push.apply(n,[].slice.call(h.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var u=this.parent.getContent().querySelector(".e-frozen-right-content ."+i);n.push.apply(n,[].slice.call(u.querySelectorAll(".e-input:not(.e-disabled)")))}}else{var a=this.parent.getHeaderContent().querySelector(".e-movableheader ."+i);if(n.push.apply(n,[].slice.call(a.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var l=this.parent.getHeaderContent().querySelector(".e-frozen-right-header ."+i);n.push.apply(n,[].slice.call(l.querySelectorAll(".e-input:not(.e-disabled)")))}}var p=ge(t.target,"e-rowcell");if(p===ge(n[n.length-1],"e-rowcell")&&"tab"===t.action&&!p.classList.contains("e-unboundcell")||p===ge(n[0],"e-rowcell")&&"shiftTab"===t.action||"escape"===t.action){var m=e.getAttribute("data-uid"),y=this.parent.getRows();("Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode())&&(y=this.parent.getFrozenRightRows()),(this.parent.getFrozenColumns()||"Left"===this.parent.getFrozenMode())&&(y=this.parent.getMovableRows());var C=y.map(function(S){return S.getAttribute("data-uid")}).indexOf(m);this.parent.frozenRows&&ge(e,"e-content")&&(C-=this.parent.frozenRows),e.classList.contains("e-addedrow")&&(C=0),"escape"===t.action?this.closeEdit():this.endEdit(),this.parent.focusModule.active&&(this.parent.focusModule.active.matrix.current=[C,0])}}}},r.prototype.preventBatch=function(t){this.preventObj=t,this.showDialog("BatchSaveLostChanges",this.dialogObj)},r.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},r.prototype.applyFormValidation=function(t){var e=this.parent,i=e.isFrozenGrid(),n="Normal"===this.parent.editSettings.mode,s="Right"===this.parent.getFrozenMode()&&n?1:0,o="Dialog"!==this.parent.editSettings.mode?e.element.getElementsByClassName("e-gridform")[s]:he("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document),a="Right"===this.parent.getFrozenMode()&&n?0:1,l=e.element.getElementsByClassName("e-gridform")[a],h={},u={},p={};t=t||e.getColumns();for(var m=0;m<t.length;m++)!t[m].visible&&("Dialog"!==e.editSettings.mode||-1===e.groupSettings.columns.indexOf(t[m].field)&&"Dialog"===e.editSettings.mode)||t[m].validationRules&&WJ(t[m],a,h,u,p,t.length);if(i&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(l,u),this.parent.getFrozenMode()===Qt){var y=e.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(y,p)}}else h=de(h,u,p);this.parent.editModule.formObj=this.createFormObj(o,h)},r.prototype.createFormObj=function(t,e){var i=this;return new Jue(t,{rules:e,locale:this.parent.locale,validationComplete:function(n){i.validationComplete(n)},customPlacement:function(n,s){var o=n.getAttribute("e-mappinguid"),a={column:i.parent.getColumnByUid(o),error:s,inputElement:n,value:n.value};i.valErrorPlacement(n,s),i.parent.notify("validation-custom-placement",a)}})},r.prototype.valErrorPlacement=function(t,e){if(this.parent.isEdit){var i=e.getAttribute("for"),n=this.getElemTable(t).querySelector("#"+i+"_Error");n?n.querySelector(".e-tip-content").innerHTML=e.outerHTML:this.createTooltip(t,e,i,"")}},r.prototype.getElemTable=function(t){var e,n,i=this.parent;if("Dialog"!==i.editSettings.mode){e=i.frozenRows&&i.frozenRows>(parseInt(j(t,"."+bn).getAttribute(Ii),10)||0);var s=t.name,o=void 0;s&&(o=YJ(this.parent,aV(s))),o&&i.isFrozenGrid()?"frozen-left"===o.getFreezeTableName()?n=e?i.getFrozenVirtualHeader().querySelector("table"):i.getFrozenVirtualContent().querySelector("table"):"frozen-right"===o.getFreezeTableName()?n=e?i.getFrozenRightHeader().querySelector("table"):i.getFrozenRightContent().querySelector("table"):"movable"===o.getFreezeTableName()&&(n=e?i.getMovableVirtualHeader().querySelector("table"):i.getMovableVirtualContent().querySelector("table")):n=e?i.getHeaderTable():i.getContentTable()}else n=he("#"+i.element.id+"_dialogEdit_wrapper",document);return n},r.prototype.resetElemPosition=function(t,e){var i=ge(e.element,Ji);if(i){var n=i.getBoundingClientRect().right,s=t.getBoundingClientRect().right;s>n&&(t.style.left=t.offsetLeft-(s-n)+"px")}},r.prototype.validationComplete=function(t){if(this.parent.isEdit){var e=this.getElemTable(t.element).querySelector("#"+t.inputName+"_Error");e&&("failure"===t.status?(e.style.display="",this.resetElemPosition(e,t)):e.style.display="none")}},r.prototype.createTooltip=function(t,e,i,n){var s=this.parent.getColumnByField(i),o=this.parent.getFrozenMode()===Qt&&"Normal"===this.parent.editSettings.mode&&s.getFreezeTableName()===tr?this.frFormObj.element:this.formObj.element,a=ge(t,"e-virtual-validation");a&&(o=this.virtualFormObj.element);var l=this.parent.getContent().firstElementChild,h=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();h&&(l=this.parent.getMovableVirtualContent());var S,R,u=l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth,p="Dialog"!==this.parent.editSettings.mode,m=j(t,"."+Ji),y=j(t,"."+bn),C=this.parent.getContent().querySelector("."+ju),T=!1,P=!1,O=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,N=[].slice.call(C?this.parent.getFrozenVirtualContent().getElementsByClassName(bn):this.parent.getContent().getElementsByClassName(bn));if("Batch"===this.parent.editSettings.mode&&O>1&&N.length>=O&&N[N.length-1].getAttribute(Ii)===y.getAttribute(Ii)&&(P=!0),p){if(this.parent.frozenRows){var z=h?this.parent.getFrozenVirtualHeader().querySelector(rt).children:this.parent.getHeaderTable().querySelector(rt).children;T=(S=z.length>(parseInt(y.getAttribute(Ii),10)||0))&&parseInt(y.getAttribute(Ii),10)===z.length-1}(T||O>1&&N.length>=O&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||m.classList.contains("e-lastrowcell")&&!y.classList.contains(Fl))||P)&&(R=!0)}var U=p?S?this.parent.getHeaderTable():this.parent.getContentTable():he("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),ae=U.getBoundingClientRect(),me=p?this.parent.element.getBoundingClientRect().left:ae.left,Te=j(t,"td"),Oe=Te?Te.getBoundingClientRect():t.parentElement.getBoundingClientRect(),oe=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+n+";top:"+((S?Oe.top+Oe.height:Oe.bottom-ae.top-(h?C.scrollTop:0))+U.scrollTop+9)+"px;left:"+(Oe.left-me+U.scrollLeft+Oe.width/2)+"px;max-width:"+Oe.width+"px;text-align:center;"});this.parent.cssClass&&oe.classList.add(this.parent.cssClass),p&&ae.left<me&&(oe.style.left=parseInt(oe.style.left,10)-ae.left+me+"px");var De,Ie=this.parent.createElement("div",{className:"e-tip-content"});if(Ie.appendChild(e),R?((De=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),De.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((De=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),De.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),oe.appendChild(Ie),oe.appendChild(De),a||!h&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?a?this.virtualFormObj.element.appendChild(oe):this.formObj.element.appendChild(oe):(j(t,"Normal"===this.parent.editSettings.mode?".e-editcell":"."+er).style.position=0===this.parent.currentViewData.length&&j(t,"."+Fn)?"absolute":"relative",oe.style.position="absolute","Batch"===this.parent.editSettings.mode||j(t,"."+ju)||j(t,"."+_d)||this.parent.frozenRows&&!h?o.appendChild(oe):this.mFormObj.element.appendChild(oe)),!R&&p&&l.getBoundingClientRect().bottom<Oe.bottom+Oe.height){var _e=this.parent.getContent().querySelector(".e-content");h&&0===this.parent.currentViewData.length&&0===_e.scrollTop?_e.scrollTop=oe.offsetHeight+De.scrollHeight:l.scrollTop=l.scrollTop+oe.offsetHeight+De.scrollHeight}var je=parseInt(document.defaultView.getComputedStyle(oe,null).getPropertyValue("font-size"),10);if(oe.getBoundingClientRect().width<Oe.width&&oe.querySelector("label").getBoundingClientRect().height/(1.2*je)>=2&&(oe.style.width=oe.style.maxWidth),oe.style.left=(h||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?Te.offsetLeft+(Te.offsetWidth/2-oe.offsetWidth/2)+"px":parseInt(oe.style.left,10)-oe.offsetWidth/2+"px",p&&!u&&!this.parent.allowPaging||h||this.parent.frozenRows){l.style.position="static";var Se=M0(Te,oe);oe.style.top=Se.top+Oe.height+9+"px"}if(R){if(!u||h||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)oe.style.bottom=Oe.height+9+"px";else{var Pe=l.scrollWidth>l.offsetWidth?cb():0;oe.style.bottom=this.parent.height-l.querySelector("table").offsetHeight-Pe+Oe.height+9+"px"}if(N.length<O&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){var Wt=(this.parent.frozenRows?this.parent.frozenRows+(N.length-1):N.length-1)*this.parent.getRowHeight(),Kt=this.parent.getContent().clientHeight-Wt;oe.style.bottom=Kt+9+"px"}oe.style.top=null}},r.prototype.checkColumnIsGrouped=function(t){return!(t.visible||this.parent.groupSettings.columns.indexOf(t.field)>-1)},r.AddEditors=function(t){r.editCellType=de(r.editCellType,t)},r.editCellType={dropdownedit:P0e,numericedit:L0e,datepickeredit:dee,datetimepickeredit:dee,booleanedit:M0e,defaultedit:N0e,templateedit:U0e},r}(),swe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),owe=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.parent=e,n.serviceLocator=i,n.initEvent(),n}return swe(t,r),t.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(Dq,this.initForeignKeyColumns,this),this.parent.on(BB,this.getForeignKeyData,this),this.parent.on(kT,this.generateQueryFormData,this))},t.prototype.initForeignKeyColumns=function(e){for(var i=0;i<e.length;i++)e[i].dataSource=e[i].dataSource instanceof Xe?e[i].dataSource:f(e[i].dataSource)?new Xe:"result"in e[i].dataSource?e[i].dataSource:new Xe(e[i].dataSource)},t.prototype.eventfPromise=function(e,i,n,s){var o=this.getStateEventArgument(i),a=new Qa,l=new Qa;o.action=e.action;var h=this.parent.getDataModule();return!f(e.action)&&e.action.requestType&&!1!==h.foreignKeyDataState.isDataChanged?(h.setForeignKeyDataState({isPending:!0,resolver:l.resolve}),l.promise.then(function(){a.resolve(s.dataSource)}),o.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger("columnDataStateChange",o)):(h.setForeignKeyDataState({}),a.resolve(n)),a},t.prototype.getForeignKeyData=function(e){for(var i=this,n=e.column?[e.column]:this.parent.getForeignKeyColumns(),s=[],o=function(h){var u=void 0,p=e.isComplex?a.genarateColumnQuery(n[h]):a.genarateQuery(n[h],e.result.result,!1,!0);p.params=a.parent.query.params;var m=n[h].dataSource;u=m&&"result"in m?a.eventfPromise(e,p,m,n[h]).promise:!m.ready||m.dataSource.offline?m.executeQuery(p):m.ready.then(function(){return m.executeQuery(p)}),s.push(u)},a=this,l=0;l<n.length;l++)o(l);Promise.all(s).then(function(h){for(var u=0;u<h.length;u++)n[u].columnData=h[u].result,"dropdownedit"===n[u].editType&&"result"in n[u].dataSource&&(n[u].edit.params=de(n[u].edit.params,{dataSource:h[u].result,query:new ni,fields:{value:n[u].foreignKeyField||n[u].field,text:n[u].foreignKeyValue}}));e.promise.resolve(e.result)}).catch(function(h){return i.parent.log(["actionfailure","foreign_key_failure"]),e.promise&&e.promise.reject&&e.promise.reject(h),h})},t.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},t.prototype.genarateQuery=function(e,i,n,s){var o=this.parent,a=[],l=new ni,h=n?e.foreignKeyField:e.field;if(o.allowPaging||o.enableVirtualization||n){i=new Xe(o.allowGrouping&&o.groupSettings.columns.length&&!n?i.records:i).executeLocal((new ni).select(h));var u=Ye.distinct(i,h,!1);h=n?e.field:e.foreignKeyField;for(var p=0;p<u.length;p++)a.push(u[p]&&u[p].getDay?pb({field:h,operator:"equal",value:u[p],matchCase:!1}):new Mn(h,"equal",u[p],!1))}return s?a.length?l.where(Mn.or(a)):l:a.length?Mn.or(a):{predicates:[]}},t.prototype.genarateColumnQuery=function(e){var i=this.parent,n=new ni,s=this.isFiltered(e);if(s.isTrue&&(n=this.filterQuery(n,s.column,!0)),i.searchSettings.key.length){var o=i.searchSettings;e.dataSource instanceof Xe&&e.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===e.dataSource.adaptor.getModuleName()?n=this.searchQuery(n,e,!0):n.search(o.key,e.foreignKeyValue,o.operator,o.ignoreCase)}return n},t.prototype.isFiltered=function(e){var i=this.parent.filterSettings.columns.filter(function(n){return n.field===e.foreignKeyValue&&n.uid===e.uid});return{column:i,isTrue:!!i.length}},t.prototype.getModuleName=function(){return"foreignKey"},t.prototype.destroy=function(){this.destroyEvent()},t.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(Dq,this.initForeignKeyColumns),this.parent.off(BB,this.getForeignKeyData),this.parent.off(kT,this.generateQueryFormData))},t}(XB);const kee=["template"],Ree=["headerTemplate"],_ee=["commandsTemplate"],Mee=["filterItemTemplate"],Oee=["editTemplate"],Pee=["filterTemplate"],Cwe=["footerTemplate"],wwe=["groupFooterTemplate"],Swe=["groupCaptionTemplate"],Ewe=["rowTemplate"],xwe=["detailTemplate"],Twe=["toolbarTemplate"],Dwe=["pagerTemplate"],Iwe=["editSettingsTemplate"],Awe=["groupSettingsCaptionTemplate"];let kwe=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],Rwe=[],_we=(()=>{class r extends S0{constructor(e){super(),this.viewContainerRef=e,Za("currentInstance",this,this.viewContainerRef),this.registerEvents(Rwe),this.directivePropList=kwe}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-stacked-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,kee,5),v.Suo(n,Ree,5),v.Suo(n,_ee,5),v.Suo(n,Mee,5),v.Suo(n,Oee,5),v.Suo(n,Pee,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.template=s.first),v.iGM(s=v.CRH())&&(i.headerTemplate=s.first),v.iGM(s=v.CRH())&&(i.commandsTemplate=s.first),v.iGM(s=v.CRH())&&(i.filter_itemTemplate=s.first),v.iGM(s=v.CRH())&&(i.editTemplate=s.first),v.iGM(s=v.CRH())&&(i.filterTemplate=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[v.qOj]}),(0,Fi.gn)([pn()],r.prototype,"template",void 0),(0,Fi.gn)([pn()],r.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"commandsTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"filter_itemTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"editTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"filterTemplate",void 0),r})(),Mwe=(()=>{class r extends E0{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-stacked-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,_we,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),Owe=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],Pwe=[],q_=(()=>{class r extends S0{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],Za("currentInstance",this,this.viewContainerRef),this.registerEvents(Pwe),this.directivePropList=Owe}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,kee,5),v.Suo(n,Ree,5),v.Suo(n,_ee,5),v.Suo(n,Mee,5),v.Suo(n,Oee,5),v.Suo(n,Pee,5),v.Suo(n,Mwe,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.template=s.first),v.iGM(s=v.CRH())&&(i.headerTemplate=s.first),v.iGM(s=v.CRH())&&(i.commandsTemplate=s.first),v.iGM(s=v.CRH())&&(i.filter_itemTemplate=s.first),v.iGM(s=v.CRH())&&(i.editTemplate=s.first),v.iGM(s=v.CRH())&&(i.filterTemplate=s.first),v.iGM(s=v.CRH())&&(i.childColumns=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[v.qOj]}),(0,Fi.gn)([pn()],r.prototype,"template",void 0),(0,Fi.gn)([pn()],r.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"commandsTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"filter_itemTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"editTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"filterTemplate",void 0),r})(),U_=(()=>{class r extends E0{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,q_,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),Lwe=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],Fwe=[],W_=(()=>{class r extends S0{constructor(e){super(),this.viewContainerRef=e,Za("currentInstance",this,this.viewContainerRef),this.registerEvents(Fwe),this.directivePropList=Lwe}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,Cwe,5),v.Suo(n,wwe,5),v.Suo(n,Swe,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.footerTemplate=s.first),v.iGM(s=v.CRH())&&(i.groupFooterTemplate=s.first),v.iGM(s=v.CRH())&&(i.groupCaptionTemplate=s.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[v.qOj]}),(0,Fi.gn)([pn()],r.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"groupFooterTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"groupCaptionTemplate",void 0),r})(),G_=(()=>{class r extends E0{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,W_,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})(),Nwe=["columns"],Bwe=[],Vwe=(()=>{class r extends S0{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],Za("currentInstance",this,this.viewContainerRef),this.registerEvents(Bwe),this.directivePropList=Nwe}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.s_b))},r.\u0275dir=v.lG2({type:r,selectors:[["e-aggregate"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,G_,5),2&e){let s;v.iGM(s=v.CRH())&&(i.childColumns=s.first)}},inputs:{columns:"columns"},features:[v.qOj]}),r})(),Hwe=(()=>{class r extends E0{constructor(){super("aggregates")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=v.lG2({type:r,selectors:[["e-aggregates"]],contentQueries:function(e,i,n){if(1&e&&v.Suo(n,Vwe,4),2&e){let s;v.iGM(s=v.CRH())&&(i.children=s)}},features:[v.qOj]}),r})();const zwe=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],jwe=["dataSource"];let SV=(()=>{let r=class extends rV{constructor(e,i,n,s){super(),this.ngEle=e,this.srenderer=i,this.viewContainerRef=n,this.injector=s,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let o=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}this.registerEvents(zwe),this.addTwoWay.call(this,jwe),Za("currentInstance",this,this.viewContainerRef),this.context=new Xo}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return r.\u0275fac=function(e){return new(e||r)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},r.\u0275cmp=v.Xpm({type:r,selectors:[["ejs-grid"]],contentQueries:function(e,i,n){if(1&e&&(v.Suo(n,Ewe,5),v.Suo(n,xwe,5),v.Suo(n,Twe,5),v.Suo(n,Dwe,5),v.Suo(n,Iwe,5),v.Suo(n,Awe,5),v.Suo(n,U_,5),v.Suo(n,Hwe,5)),2&e){let s;v.iGM(s=v.CRH())&&(i.rowTemplate=s.first),v.iGM(s=v.CRH())&&(i.detailTemplate=s.first),v.iGM(s=v.CRH())&&(i.toolbarTemplate=s.first),v.iGM(s=v.CRH())&&(i.pagerTemplate=s.first),v.iGM(s=v.CRH())&&(i.editSettings_template=s.first),v.iGM(s=v.CRH())&&(i.groupSettings_captionTemplate=s.first),v.iGM(s=v.CRH())&&(i.childColumns=s.first),v.iGM(s=v.CRH())&&(i.childAggregates=s.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",cssClass:"cssClass",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualMaskRow:"enableVirtualMaskRow",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",loadingIndicator:"loadingIndicator",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[v.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],r.prototype,"rowTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"detailTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"toolbarTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"pagerTemplate",void 0),(0,Fi.gn)([pn()],r.prototype,"editSettings_template",void 0),(0,Fi.gn)([pn()],r.prototype,"groupSettings_captionTemplate",void 0),r=(0,Fi.gn)([fd([Xo])],r),r})(),qwe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();const Uwe={provide:"GridsGroup",useValue:mb},EV={provide:"GridsToolbar",useValue:C0e},xV={provide:"GridsEdit",useValue:W0e},Wwe={provide:"GridsForeignKey",useValue:owe};let Gwe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();var wt=te(5861);const Lee="@firebase/database";let _U="";function Nee(r){_U=r}class Kwe{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,ne.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,ne.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class $we{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,ne.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Bee=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Kwe(t)}}catch{}return new $we},Mw=Bee("localStorage"),MU=Bee("sessionStorage"),VT=new Hh.Yd("@firebase/database"),Vee=function(){let r=1;return function(){return r++}}(),Hee=function(r){const t=(0,ne.dS)(r),e=new ne.gQ;e.update(t);const i=e.digest();return ne.US.encodeByteArray(i)},K_=function(...r){let t="";for(let e=0;e<r.length;e++){const i=r[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=K_.apply(null,i):t+="object"==typeof i?(0,ne.Wl)(i):i,t+=" "}return t};let Ow=null,zee=!0;const jee=function(r,t){(0,ne.hu)(!t||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(VT.logLevel=Hh.in.VERBOSE,Ow=VT.log.bind(VT),t&&MU.set("logging_enabled",!0)):"function"==typeof r?Ow=r:(Ow=null,MU.remove("logging_enabled"))},Nl=function(...r){if(!0===zee&&(zee=!1,null===Ow&&!0===MU.get("logging_enabled")&&jee(!0)),Ow){const t=K_.apply(null,r);Ow(t)}},$_=function(r){return function(...t){Nl(r,...t)}},OU=function(...r){const t="FIREBASE INTERNAL ERROR: "+K_(...r);VT.error(t)},eg=function(...r){const t=`FIREBASE FATAL ERROR: ${K_(...r)}`;throw VT.error(t),new Error(t)},Eh=function(...r){const t="FIREBASE WARNING: "+K_(...r);VT.warn(t)},TV=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},vb="[MIN_NAME]",Qm="[MAX_NAME]",Pw=function(r,t){if(r===t)return 0;if(r===vb||t===Qm)return-1;if(t===vb||r===Qm)return 1;{const e=Wee(r),i=Wee(t);return null!==e?null!==i?e-i==0?r.length-t.length:e-i:-1:null!==i?1:r<t?-1:1}},Qwe=function(r,t){return r===t?0:r<t?-1:1},Y_=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+(0,ne.Wl)(t))},PU=function(r){if("object"!=typeof r||null===r)return(0,ne.Wl)(r);const t=[];for(const i in r)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,ne.Wl)(t[i]),e+=":",e+=PU(r[t[i]]);return e+="}",e},qee=function(r,t){const e=r.length;if(e<=t)return[r];const i=[];for(let n=0;n<e;n+=t)i.push(r.substring(n,n+t>e?e:n+t));return i};function Bl(r,t){for(const e in r)r.hasOwnProperty(e)&&t(e,r[e])}const Uee=function(r){(0,ne.hu)(!TV(r),"Invalid JSON number");const i=1023;let n,s,o,a,l;0===r?(s=0,o=0,n=1/r==-1/0?1:0):(n=r<0,(r=Math.abs(r))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(r)/Math.LN2),i),s=a+i,o=Math.round(r*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(r/Math.pow(2,-1074))));const h=[];for(l=52;l;l-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(n?1:0),h.reverse();const u=h.join("");let p="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),p+=m}return p.toLowerCase()},tSe=new RegExp("^-?(0*)\\d{1,10}$"),Wee=function(r){if(tSe.test(r)){const t=Number(r);if(t>=-2147483648&&t<=2147483647)return t}return null},HT=function(r){try{r()}catch(t){setTimeout(()=>{throw Eh("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},Z_=function(r,t){const e=setTimeout(r,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class sSe{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Eh(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class oSe{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(n=>this.auth_=n)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Nl("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Eh(t)}}let Q_=(()=>{class r{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const Zee=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ete="long_polling";class FU{constructor(t,e,i,n,s=!1,o="",a=!1){this.secure=e,this.namespace=i,this.webSocketOnly=n,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mw.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Mw.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tte(r,t,e){let i;if((0,ne.hu)("string"==typeof t,"typeof type must == string"),(0,ne.hu)("object"==typeof e,"typeof params must == object"),"websocket"===t)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(t!==ete)throw new Error("Unknown connection type: "+t);i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function aSe(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(e.ns=r.namespace);const n=[];return Bl(e,(s,o)=>{n.push(s+"="+o)}),i+n.join("&")}class lSe{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,ne.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,ne.p$)(this.counters_)}}const NU={},BU={};function VU(r){const t=r.toString();return NU[t]||(NU[t]=new lSe),NU[t]}class uSe{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let n=0;n<i.length;++n)i[n]&&HT(()=>{this.onMessage_(i[n])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yb{constructor(t,e,i,n,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=n,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$_(t),this.stats_=VU(e),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),tte(e,ete,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new uSe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if((0,ne.Yr)()||"complete"===document.readyState)r();else{let t=!1;const e=function(){document.body?t||(t=!0,r()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new HU((...s)=>{const[o,a,l,h,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Zee.test(location.hostname)&&(i.r="f");const n=this.urlFn(i);this.log_("Connecting via long-poll to "+n),this.scriptTagHolder.addTag(n,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yb.forceAllow_=!0}static forceDisallow(){yb.forceDisallow_=!0}static isAvailable(){return!((0,ne.Yr)()||!yb.forceAllow_&&(yb.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,ne.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,ne.h$)(e),n=qee(i,1840);for(let s=0;s<n.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,ne.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,ne.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class HU{constructor(t,e,i,n){if(this.onDisconnect=i,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ne.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Vee(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=HU.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Nl("frame writing exception"),a.stack&&Nl(a.stack),Nl(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Nl("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+n+"="+o.seg+"&ts"+n+"="+o.ts+"&d"+n+"="+o.d,n++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},n=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(n),i()})}addTag(t,e){(0,ne.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const n=i.readyState;(!n||"loaded"===n||"complete"===n)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Nl("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let IV=null;typeof MozWebSocket<"u"?IV=MozWebSocket:typeof WebSocket<"u"&&(IV=WebSocket);let zT=(()=>{class r{constructor(e,i,n,s,o,a,l){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$_(this.connId),this.stats_=VU(i),this.connURL=r.connectionURL_(i,a,l,s,n),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,s,o){const a={v:"5"};return!(0,ne.Yr)()&&typeof location<"u"&&location.hostname&&Zee.test(location.hostname)&&(a.r="f"),i&&(a.s=i),n&&(a.ls=n),s&&(a.ac=s),o&&(a.p=o),tte(e,"websocket",a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mw.set("previous_websocket_failure",!0);try{let n;if((0,ne.Yr)()){n={headers:{"User-Agent":`Firebase/5/${_U}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(n.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(n.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(n.proxy={origin:a})}this.mySock=new IV(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==IV&&!r.forceDisallow_}static previouslyFailed(){return Mw.isInMemoryStorage||!0===Mw.get("previous_websocket_failure")}markConnectionHealthy(){Mw.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=(0,ne.cI)(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,ne.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);null!==n&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=(0,ne.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=qee(i,16384);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),lte=(()=>{class r{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[yb,zT]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=zT&&zT.isAvailable();let n=i&&!zT.previouslyFailed();if(e.webSocketOnly&&(i||Eh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[zT];else{const s=this.transports_=[];for(const o of r.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class gte{constructor(t,e,i,n,s,o,a,l,h,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=n,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$_("c:"+this.id+":"),this.transportManager_=new lte(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const n=t.healthyTimeout||0;n>0&&(this.healthyTimeout_=Z_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=Y_("t",t),i=Y_("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=Y_("t",t),i=Y_("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=Y_("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?OU("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):OU("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,n=t.h;this.sessionId=t.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Eh("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),Z_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Z_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mw.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mte{put(t,e,i,n){}merge(t,e,i,n){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class vte{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,ne.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let n=0;n<i.length;n++)i[n].callback.apply(i[n].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const n=this.getInitialEvent(t);n&&e.apply(i,n)}off(t,e,i){this.validateEventType_(t);const n=this.listeners_[t]||[];for(let s=0;s<n.length;s++)if(n[s].callback===e&&(!i||i===n[s].context))return void n.splice(s,1)}validateEventType_(t){(0,ne.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class AV extends vte{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ne.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new AV}getInitialEvent(t){return(0,ne.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ss{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let n=0;n<this.pieces_.length;n++)this.pieces_[n].length>0&&(this.pieces_[i]=this.pieces_[n],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function rs(){return new Ss("")}function mr(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function bb(r){return r.pieces_.length-r.pieceNum_}function to(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new Ss(r.pieces_,t)}function jU(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function X_(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function Cte(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let e=r.pieceNum_;e<r.pieces_.length-1;e++)t.push(r.pieces_[e]);return new Ss(t,0)}function jo(r,t){const e=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)e.push(r.pieces_[i]);if(t instanceof Ss)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let n=0;n<i.length;n++)i[n].length>0&&e.push(i[n])}return new Ss(e,0)}function vr(r){return r.pieceNum_>=r.pieces_.length}function nu(r,t){const e=mr(r),i=mr(t);if(null===e)return t;if(e===i)return nu(to(r),to(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function MSe(r,t){const e=X_(r,0),i=X_(t,0);for(let n=0;n<e.length&&n<i.length;n++){const s=Pw(e[n],i[n]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function qU(r,t){if(bb(r)!==bb(t))return!1;for(let e=r.pieceNum_,i=t.pieceNum_;e<=r.pieces_.length;e++,i++)if(r.pieces_[e]!==t.pieces_[i])return!1;return!0}function Fd(r,t){let e=r.pieceNum_,i=t.pieceNum_;if(bb(r)>bb(t))return!1;for(;e<r.pieces_.length;){if(r.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class OSe{constructor(t,e){this.errorPrefix_=e,this.parts_=X_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,ne.ug)(this.parts_[i]);wte(this)}}function wte(r){if(r.byteLength_>768)throw new Error(r.errorPrefix_+"has a key path longer than 768 bytes ("+r.byteLength_+").");if(r.parts_.length>32)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Lw(r))}function Lw(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class UU extends vte{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new UU}getInitialEvent(t){return(0,ne.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const J_=1e3;let RV,Fw=(()=>{class r extends mte{constructor(e,i,n,s,o,a,l,h){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=h,this.id=r.nextPersistentConnectionId_++,this.log_=$_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=J_,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!(0,ne.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UU.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&AV.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_((0,ne.Wl)(o)),(0,ne.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const i=new ne.BH,n={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:n,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,n,s){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,ne.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ne.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:e,tag:n};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+n+" for "+s);const o={p:n};e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,l=>{const h=l.d,u=l.s;r.warnOnListenWarnings_(h,i),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(n,s),e.onComplete&&e.onComplete(u,h))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,ne.r3)(e,"w")){const n=(0,ne.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Eh(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,ne.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,ne.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(i,n,s=>{const o=s.s,a=s.d||"error";this.authToken_===e&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),(0,ne.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,i)}sendUnlisten_(e,i,n,s){this.log_("Unlisten on "+e+" for "+i);const o={p:e};s&&(o.q=n,o.t=s),this.sendRequest("n",o)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,s){const o={p:i,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,n,s){this.putInternal("p",e,i,n,s)}merge(e,i,n,s){this.putInternal("m",e,i,n,s)}putInternal(e,i,n,s,o){this.initConnection_();const a={p:i,d:n};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{"ok"!==n.s&&this.log_("reportStats","Error sending stats: "+n.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,ne.Wl)(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):OU("Unrecognized action received from server: "+(0,ne.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,ne.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=J_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=J_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=J_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,wt.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),n=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),o=e.id+":"+r.nextConnectionId_++,a=e.lastSessionId;let l=!1,h=null;const u=function(){h?h.close():(l=!0,s())};e.realtime_={close:u,sendRequest:function(y){(0,ne.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(y)}};const m=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[y,C]=yield Promise.all([e.authTokenProvider_.getToken(m),e.appCheckTokenProvider_.getToken(m)]);l?Nl("getToken() completed but was canceled"):(Nl("getToken() completed. Creating connection."),e.authToken_=y&&y.accessToken,e.appCheckToken_=C&&C.token,h=new gte(o,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,n,s,S=>{Eh(S+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(y){e.log_("Failed to get token: "+y),l||(e.repoInfo_.nodeAdmin&&Eh(y),u())}}})()}interrupt(e){Nl("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Nl("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,ne.xb)(this.interruptReasons_)&&(this.reconnectDelay_=J_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;n=i?i.map(o=>PU(o)).join("$"):"default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const n=new Ss(e).toString();let s;if(this.listens.has(n)){const o=this.listens.get(n);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,i){Nl("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Nl("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,ne.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+_U.replace(/\./g,"-")]=1,(0,ne.uI)()?e["framework.cordova"]=1:(0,ne.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=AV.getInstance().currentlyOnline();return(0,ne.xb)(this.interruptReasons_)&&e}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class Sr{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Sr(t,e)}}class kV{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Sr(vb,t),n=new Sr(vb,e);return 0!==this.compare(i,n)}minPost(){return Sr.MIN}}class xte extends kV{static get __EMPTY_NODE(){return RV}static set __EMPTY_NODE(t){RV=t}compare(t,e){return Pw(t.name,e.name)}isDefinedOn(t){throw(0,ne.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Sr.MIN}maxPost(){return new Sr(Qm,RV)}makePost(t,e){return(0,ne.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Sr(t,RV)}toString(){return".key"}}const tg=new xte;class _V{constructor(t,e,i,n,s=null){this.isReverse_=n,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,n&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let GU,Gp=(()=>{class r{constructor(e,i,n,s,o){this.key=e,this.value=i,this.color=n??r.RED,this.left=s??Wu.EMPTY_NODE,this.right=o??Wu.EMPTY_NODE}copy(e,i,n,s,o){return new r(e??this.key,i??this.value,n??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,i,n),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wu.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,s;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===i(e,n.key)){if(n.right.isEmpty())return Wu.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class Wu{constructor(t,e=Wu.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Wu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Gp.BLACK,null,null))}remove(t){return new Wu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Gp.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,n=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return n?n.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(n=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new _V(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new _V(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new _V(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new _V(this.root_,null,this.comparator_,!0,t)}}function zSe(r,t){return Pw(r.name,t.name)}function WU(r,t){return Pw(r,t)}Wu.EMPTY_NODE=new class HSe{copy(t,e,i,n,s){return this}insert(t,e,i){return new Gp(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Tte=function(r){return"number"==typeof r?"number:"+Uee(r):"string:"+r},Dte=function(r){if(r.isLeafNode()){const t=r.val();(0,ne.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,ne.r3)(t,".sv"),"Priority must be a string or number.")}else(0,ne.hu)(r===GU||r.isEmpty(),"priority of unexpected type.");(0,ne.hu)(r===GU||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ite,Ate,kte,jT=(()=>{class r{constructor(e,i=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,ne.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Dte(this.priorityNode_)}static set __childrenNodeConstructor(e){Ite=e}static get __childrenNodeConstructor(){return Ite}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new r(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return vr(e)?this:".priority"===mr(e)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=mr(e);return null===n?i:i.isEmpty()&&".priority"!==n?this:((0,ne.hu)(".priority"!==n||1===bb(e),".priority must be the last token in a path"),this.updateImmediateChild(n,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(to(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Tte(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?Uee(this.value_):this.value_,this.lazyHash_=Hee(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===r.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof r.__childrenNodeConstructor?-1:((0,ne.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,s=r.VALUE_TYPE_ORDER.indexOf(i),o=r.VALUE_TYPE_ORDER.indexOf(n);return(0,ne.hu)(s>=0,"Unknown leaf type: "+i),(0,ne.hu)(o>=0,"Unknown leaf type: "+n),s===o?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const vo=new class WSe extends kV{compare(t,e){const i=t.node.getPriority(),n=e.node.getPriority(),s=i.compareTo(n);return 0===s?Pw(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Sr.MIN}maxPost(){return new Sr(Qm,new jT("[PRIORITY-POST]",kte))}makePost(t,e){const i=Ate(t);return new Sr(e,new jT("[PRIORITY-POST]",i))}toString(){return".priority"}},GSe=Math.log(2);class KSe{constructor(t){this.count=parseInt(Math.log(t+1)/GSe,10),this.current_=this.count-1;const n=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const MV=function(r,t,e,i){r.sort(t);const n=function(l,h){const u=h-l;let p,m;if(0===u)return null;if(1===u)return p=r[l],m=e?e(p):p,new Gp(m,p.node,Gp.BLACK,null,null);{const y=parseInt(u/2,10)+l,C=n(l,y),S=n(y+1,h);return p=r[y],m=e?e(p):p,new Gp(m,p.node,Gp.BLACK,C,S)}},a=function(l){let h=null,u=null,p=r.length;const m=function(C,S){const T=p-C,R=p;p-=C;const P=n(T+1,R),O=r[T],N=e?e(O):O;y(new Gp(N,O.node,S,null,P))},y=function(C){h?(h.left=C,h=C):(u=C,h=C)};for(let C=0;C<l.count;++C){const S=l.nextBitIsOne(),T=Math.pow(2,l.count-(C+1));S?m(T,Gp.BLACK):(m(T,Gp.BLACK),m(T,Gp.RED))}return u}(new KSe(r.length));return new Wu(i||t,a)};let KU;const qT={};class Xm{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,ne.hu)(qT&&vo,"ChildrenNode.ts has not been loaded"),KU=KU||new Xm({".priority":qT},{".priority":vo}),KU}get(t){const e=(0,ne.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Wu?e:null}hasIndex(t){return(0,ne.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,ne.hu)(t!==tg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let n=!1;const s=e.getIterator(Sr.Wrap);let a,o=s.getNext();for(;o;)n=n||t.isDefinedOn(o.node),i.push(o),o=s.getNext();a=n?MV(i,t.getCompare()):qT;const l=t.toString(),h=Object.assign({},this.indexSet_);h[l]=t;const u=Object.assign({},this.indexes_);return u[l]=a,new Xm(u,h)}addToIndexes(t,e){const i=(0,ne.UI)(this.indexes_,(n,s)=>{const o=(0,ne.DV)(this.indexSet_,s);if((0,ne.hu)(o,"Missing index implementation for "+s),n===qT){if(o.isDefinedOn(t.node)){const a=[],l=e.getIterator(Sr.Wrap);let h=l.getNext();for(;h;)h.name!==t.name&&a.push(h),h=l.getNext();return a.push(t),MV(a,o.getCompare())}return qT}{const a=e.get(t.name);let l=n;return a&&(l=l.remove(new Sr(t.name,a))),l.insert(t,t.node)}});return new Xm(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,ne.UI)(this.indexes_,n=>{if(n===qT)return n;{const s=e.get(t.name);return s?n.remove(new Sr(t.name,s)):n}});return new Xm(i,this.indexSet_)}}let eM,$n=(()=>{class r{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Dte(this.priorityNode_),this.children_.isEmpty()&&(0,ne.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eM||(eM=new r(new Wu(WU),null,Xm.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eM}updatePriority(e){return this.children_.isEmpty()?this:new r(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?eM:i}}getChild(e){const i=mr(e);return null===i?this:this.getImmediateChild(i).getChild(to(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,ne.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const n=new Sr(e,i);let s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(n,this.children_));const a=s.isEmpty()?eM:this.priorityNode_;return new r(s,a,o)}}updateChild(e,i){const n=mr(e);if(null===n)return i;{(0,ne.hu)(".priority"!==mr(e)||1===bb(e),".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(to(e),i);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,s=0,o=!0;if(this.forEachChild(vo,(a,l)=>{i[a]=l.val(e),n++,o&&r.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*n){const a=[];for(const l in i)a[l]=i[l];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Tte(this.getPriority().val())+":"),this.forEachChild(vo,(i,n)=>{const s=n.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":Hee(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const s=this.resolveIndex_(n);if(s){const o=s.getPredecessorKey(new Sr(e,i));return o?o.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Sr(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Sr(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Sr.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Sr.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===tM?-1:0}withIndex(e){if(e===tg||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new r(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===tg||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const n=this.getIterator(vo),s=i.getIterator(vo);let o=n.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=n.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(e){return e===tg?null:this.indexMap_.get(e.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const tM=new class $Se extends $n{constructor(){super(new Wu(WU),$n.EMPTY_NODE,Xm.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return $n.EMPTY_NODE}isEmpty(){return!1}};function ha(r,t=null){if(null===r)return $n.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),(0,ne.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new jT(r,ha(t));if(r instanceof Array){let e=$n.EMPTY_NODE;return Bl(r,(i,n)=>{if((0,ne.r3)(r,i)&&"."!==i.substring(0,1)){const s=ha(n);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(ha(t))}{const e=[];let i=!1;if(Bl(r,(o,a)=>{if("."!==o.substring(0,1)){const l=ha(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),e.push(new Sr(o,l)))}}),0===e.length)return $n.EMPTY_NODE;const s=MV(e,zSe,o=>o.name,WU);if(i){const o=MV(e,vo.getCompare());return new $n(s,ha(t),new Xm({".priority":o},{".priority":vo}))}return new $n(s,ha(t),Xm.Default)}}Object.defineProperties(Sr,{MIN:{value:new Sr(vb,$n.EMPTY_NODE)},MAX:{value:new Sr(Qm,tM)}}),xte.__EMPTY_NODE=$n.EMPTY_NODE,jT.__childrenNodeConstructor=$n,function jSe(r){GU=r}(tM),function USe(r){kte=r}(tM),function qSe(r){Ate=r}(ha);class $U extends kV{constructor(t){super(),this.indexPath_=t,(0,ne.hu)(!vr(t)&&".priority"!==mr(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),n=this.extractChild(e.node),s=i.compareTo(n);return 0===s?Pw(t.name,e.name):s}makePost(t,e){const i=ha(t),n=$n.EMPTY_NODE.updateChild(this.indexPath_,i);return new Sr(e,n)}maxPost(){const t=$n.EMPTY_NODE.updateChild(this.indexPath_,tM);return new Sr(Qm,t)}toString(){return X_(this.indexPath_,0).join("/")}}const YU=new class ZSe extends kV{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Pw(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Sr.MIN}maxPost(){return Sr.MAX}makePost(t,e){const i=ha(t);return new Sr(e,i)}toString(){return".value"}};function Rte(r){return{type:"value",snapshotNode:r}}function UT(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function iM(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function nM(r,t,e){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:e}}class ZU{constructor(t){this.index_=t}updateChild(t,e,i,n,s,o){(0,ne.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(n).equals(i.getChild(n))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(iM(e,a)):(0,ne.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(UT(e,i)):o.trackChildChange(nM(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(vo,(n,s)=>{e.hasChild(n)||i.trackChildChange(iM(n,s))}),e.isLeafNode()||e.forEachChild(vo,(n,s)=>{if(t.hasChild(n)){const o=t.getImmediateChild(n);o.equals(s)||i.trackChildChange(nM(n,s,o))}else i.trackChildChange(UT(n,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?$n.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rM{constructor(t){this.indexedFilter_=new ZU(t.getIndex()),this.index_=t.getIndex(),this.startPost_=rM.getStartPost_(t),this.endPost_=rM.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,i=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&i}updateChild(t,e,i,n,s,o){return this.matches(new Sr(e,i))||(i=$n.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,n,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=$n.EMPTY_NODE);let n=e.withIndex(this.index_);n=n.updatePriority($n.EMPTY_NODE);const s=this;return e.forEachChild(vo,(o,a)=>{s.matches(new Sr(o,a))||(n=n.updateImmediateChild(o,$n.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class XSe{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=e=>{const i=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new rM(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,i,n,s,o){return this.rangedFilter_.matches(new Sr(e,i))||(i=$n.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,n,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let n;if(e.isLeafNode()||e.isEmpty())n=$n.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;n=$n.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;n=n.updateImmediateChild(a.name,a.node),o++}}}else{let s;n=e.withIndex(this.index_),n=n.updatePriority($n.EMPTY_NODE),s=this.reverse_?n.getReverseIterator(this.index_):n.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:n=n.updateImmediateChild(a.name,$n.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,n,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(m,y)=>p(y,m)}else o=this.index_.getCompare();const a=t;(0,ne.hu)(a.numChildren()===this.limit_,"");const l=new Sr(e,i),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(e)){const p=a.getImmediateChild(e);let m=n.getChildAfterChild(this.index_,h,this.reverse_);for(;null!=m&&(m.name===e||a.hasChild(m.name));)m=n.getChildAfterChild(this.index_,m,this.reverse_);const y=null==m?1:o(m,l);if(u&&!i.isEmpty()&&y>=0)return s?.trackChildChange(nM(e,i,p)),a.updateImmediateChild(e,i);{s?.trackChildChange(iM(e,p));const S=a.updateImmediateChild(e,$n.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(UT(m.name,m.node)),S.updateImmediateChild(m.name,m.node)):S}}return i.isEmpty()?t:u&&o(h,l)>=0?(null!=s&&(s.trackChildChange(iM(h.name,h.node)),s.trackChildChange(UT(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(h.name,$n.EMPTY_NODE)):t}}class OV{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vo}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:vb}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qm}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ne.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vo}copy(){const t=new OV;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function QU(r,t,e){const i=r.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function XU(r,t,e){const i=r.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function PV(r,t){const e=r.copy();return e.index_=t,e}function _te(r){const t={};if(r.isDefault())return t;let e;if(r.index_===vo?e="$priority":r.index_===YU?e="$value":r.index_===tg?e="$key":((0,ne.hu)(r.index_ instanceof $U,"Unrecognized index type!"),e=r.index_.toString()),t.orderBy=(0,ne.Wl)(e),r.startSet_){const i=r.startAfterSet_?"startAfter":"startAt";t[i]=(0,ne.Wl)(r.indexStartValue_),r.startNameSet_&&(t[i]+=","+(0,ne.Wl)(r.indexStartName_))}if(r.endSet_){const i=r.endBeforeSet_?"endBefore":"endAt";t[i]=(0,ne.Wl)(r.indexEndValue_),r.endNameSet_&&(t[i]+=","+(0,ne.Wl)(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function Mte(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_),t.sin=!r.startAfterSet_),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_),t.ein=!r.endBeforeSet_),r.limitSet_){t.l=r.limit_;let e=r.viewFrom_;""===e&&(e=r.isViewFromLeft()?"l":"r"),t.vf=e}return r.index_!==vo&&(t.i=r.index_.toString()),t}class LV extends mte{constructor(t,e,i,n){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=n,this.log_=$_("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,ne.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,n){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=LV.getListenId_(t,i),a={};this.listens_[o]=a;const l=_te(t._queryParams);this.restRequest_(s+".json",l,(h,u)=>{let p=u;if(404===h&&(p=null,h=null),null===h&&this.onDataUpdate_(s,p,!1,i),(0,ne.DV)(this.listens_,o)===a){let m;m=h?401===h?"permission_denied":"rest_error:"+h:"ok",n(m,null)}})}unlisten(t,e){const i=LV.getListenId_(t,e);delete this.listens_[i]}get(t){const e=_te(t._queryParams),i=t._path.toString(),n=new ne.BH;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),n.resolve(a)):n.reject(new Error(a))}),n.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,s])=>{n&&n.accessToken&&(e.auth=n.accessToken),s&&s.token&&(e.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,ne.xO)(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,ne.cI)(a.responseText)}catch{Eh("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Eh("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class rEe{constructor(){this.rootNode_=$n.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function FV(){return{value:null,children:new Map}}function WT(r,t,e){if(vr(t))r.value=e,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(t,e);else{const i=mr(t);r.children.has(i)||r.children.set(i,FV()),WT(r.children.get(i),t=to(t),e)}}function JU(r,t){if(vr(t))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const e=r.value;return r.value=null,e.forEachChild(vo,(i,n)=>{WT(r,new Ss(i),n)}),JU(r,t)}}if(r.children.size>0){const e=mr(t);return t=to(t),r.children.has(e)&&JU(r.children.get(e),t)&&r.children.delete(e),0===r.children.size}return!0}function eW(r,t,e){null!==r.value?e(t,r.value):function sEe(r,t){r.children.forEach((e,i)=>{t(i,e)})}(r,(i,n)=>{eW(n,new Ss(t.toString()+"/"+i),e)})}class oEe{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Bl(this.last_,(i,n)=>{e[i]=e[i]-n}),this.last_=t,e}}class hEe{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new oEe(t);const i=1e4+2e4*Math.random();Z_(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Bl(t,(n,s)=>{s>0&&(0,ne.r3)(this.statsToReport_,n)&&(e[n]=s,i=!0)}),i&&this.server_.reportStats(e),Z_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Nd=(()=>(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Nd||(Nd={})),Nd))();function nW(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class NV{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=Nd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(vr(this.path)){if(null!=this.affectedTree.value)return(0,ne.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ss(t));return new NV(rs(),e,this.revert)}}return(0,ne.hu)(mr(this.path)===t,"operationForChild called for unrelated child."),new NV(to(this.path),this.affectedTree,this.revert)}}class sM{constructor(t,e){this.source=t,this.path=e,this.type=Nd.LISTEN_COMPLETE}operationForChild(t){return vr(this.path)?new sM(this.source,rs()):new sM(this.source,to(this.path))}}class Nw{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=Nd.OVERWRITE}operationForChild(t){return vr(this.path)?new Nw(this.source,rs(),this.snap.getImmediateChild(t)):new Nw(this.source,to(this.path),this.snap)}}class GT{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=Nd.MERGE}operationForChild(t){if(vr(this.path)){const e=this.children.subtree(new Ss(t));return e.isEmpty()?null:e.value?new Nw(this.source,rs(),e.value):new GT(this.source,rs(),e)}return(0,ne.hu)(mr(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new GT(this.source,to(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Cb{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(vr(t))return this.isFullyInitialized()&&!this.filtered_;const e=mr(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class uEe{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function oM(r,t,e,i,n,s){const o=i.filter(a=>a.type===e);o.sort((a,l)=>function pEe(r,t,e){if(null==t.childName||null==e.childName)throw(0,ne.g5)("Should only compare child_ events.");const i=new Sr(t.childName,t.snapshotNode),n=new Sr(e.childName,e.snapshotNode);return r.index_.compare(i,n)}(r,a,l)),o.forEach(a=>{const l=function dEe(r,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}(r,a,s);n.forEach(h=>{h.respondsTo(a.type)&&t.push(h.createEvent(l,r.query_))})})}function BV(r,t){return{eventCache:r,serverCache:t}}function aM(r,t,e,i){return BV(new Cb(t,e,i),r.serverCache)}function Pte(r,t,e,i){return BV(r.eventCache,new Cb(t,e,i))}function VV(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function Bw(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let rW;class yo{constructor(t,e=(()=>(rW||(rW=new Wu(Qwe)),rW))()){this.value=t,this.children=e}static fromObject(t){let e=new yo(null);return Bl(t,(i,n)=>{e=e.set(new Ss(i),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:rs(),value:this.value};if(vr(t))return null;{const i=mr(t),n=this.children.get(i);if(null!==n){const s=n.findRootMostMatchingPathAndValue(to(t),e);return null!=s?{path:jo(new Ss(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(vr(t))return this;{const e=mr(t),i=this.children.get(e);return null!==i?i.subtree(to(t)):new yo(null)}}set(t,e){if(vr(t))return new yo(e,this.children);{const i=mr(t),s=(this.children.get(i)||new yo(null)).set(to(t),e),o=this.children.insert(i,s);return new yo(this.value,o)}}remove(t){if(vr(t))return this.children.isEmpty()?new yo(null):new yo(null,this.children);{const e=mr(t),i=this.children.get(e);if(i){const n=i.remove(to(t));let s;return s=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&s.isEmpty()?new yo(null):new yo(this.value,s)}return this}}get(t){if(vr(t))return this.value;{const e=mr(t),i=this.children.get(e);return i?i.get(to(t)):null}}setTree(t,e){if(vr(t))return e;{const i=mr(t),s=(this.children.get(i)||new yo(null)).setTree(to(t),e);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new yo(this.value,o)}}fold(t){return this.fold_(rs(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((n,s)=>{i[n]=s.fold_(jo(t,n),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,rs(),e)}findOnPath_(t,e,i){const n=!!this.value&&i(e,this.value);if(n)return n;if(vr(t))return null;{const s=mr(t),o=this.children.get(s);return o?o.findOnPath_(to(t),jo(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,rs(),e)}foreachOnPath_(t,e,i){if(vr(t))return this;{this.value&&i(e,this.value);const n=mr(t),s=this.children.get(n);return s?s.foreachOnPath_(to(t),jo(e,n),i):new yo(null)}}foreach(t){this.foreach_(rs(),t)}foreach_(t,e){this.children.inorderTraversal((i,n)=>{n.foreach_(jo(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Kp{constructor(t){this.writeTree_=t}static empty(){return new Kp(new yo(null))}}function lM(r,t,e){if(vr(t))return new Kp(new yo(e));{const i=r.writeTree_.findRootMostValueAndPath(t);if(null!=i){const n=i.path;let s=i.value;const o=nu(n,t);return s=s.updateChild(o,e),new Kp(r.writeTree_.set(n,s))}{const n=new yo(e),s=r.writeTree_.setTree(t,n);return new Kp(s)}}}function sW(r,t,e){let i=r;return Bl(e,(n,s)=>{i=lM(i,jo(t,n),s)}),i}function Lte(r,t){if(vr(t))return Kp.empty();{const e=r.writeTree_.setTree(t,new yo(null));return new Kp(e)}}function oW(r,t){return null!=Vw(r,t)}function Vw(r,t){const e=r.writeTree_.findRootMostValueAndPath(t);return null!=e?r.writeTree_.get(e.path).getChild(nu(e.path,t)):null}function Fte(r){const t=[],e=r.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(vo,(i,n)=>{t.push(new Sr(i,n))}):r.writeTree_.children.inorderTraversal((i,n)=>{null!=n.value&&t.push(new Sr(i,n.value))}),t}function wb(r,t){if(vr(t))return r;{const e=Vw(r,t);return new Kp(null!=e?new yo(e):r.writeTree_.subtree(t))}}function aW(r){return r.writeTree_.isEmpty()}function KT(r,t){return Nte(rs(),r.writeTree_,t)}function Nte(r,t,e){if(null!=t.value)return e.updateChild(r,t.value);{let i=null;return t.children.inorderTraversal((n,s)=>{".priority"===n?((0,ne.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=Nte(jo(r,n),s,e)}),!e.getChild(r).isEmpty()&&null!==i&&(e=e.updateChild(jo(r,".priority"),i)),e}}function HV(r,t){return jte(t,r)}function bEe(r,t){if(r.snap)return Fd(r.path,t);for(const e in r.children)if(r.children.hasOwnProperty(e)&&Fd(jo(r.path,e),t))return!0;return!1}function wEe(r){return r.visible}function Bte(r,t,e){let i=Kp.empty();for(let n=0;n<r.length;++n){const s=r[n];if(t(s)){const o=s.path;let a;if(s.snap)Fd(e,o)?(a=nu(e,o),i=lM(i,a,s.snap)):Fd(o,e)&&(a=nu(o,e),i=lM(i,rs(),s.snap.getChild(a)));else{if(!s.children)throw(0,ne.g5)("WriteRecord should have .snap or .children");if(Fd(e,o))a=nu(e,o),i=sW(i,a,s.children);else if(Fd(o,e))if(a=nu(o,e),vr(a))i=sW(i,rs(),s.children);else{const l=(0,ne.DV)(s.children,mr(a));if(l){const h=l.getChild(to(a));i=lM(i,rs(),h)}}}}}return i}function Vte(r,t,e,i,n){if(i||n){const s=wb(r.visibleWrites,t);return!n&&aW(s)?e:n||null!=e||oW(s,rs())?KT(Bte(r.allWrites,function(h){return(h.visible||n)&&(!i||!~i.indexOf(h.writeId))&&(Fd(h.path,t)||Fd(t,h.path))},t),e||$n.EMPTY_NODE):null}{const s=Vw(r.visibleWrites,t);if(null!=s)return s;{const o=wb(r.visibleWrites,t);return aW(o)?e:null!=e||oW(o,rs())?KT(o,e||$n.EMPTY_NODE):null}}}function zV(r,t,e,i){return Vte(r.writeTree,r.treePath,t,e,i)}function lW(r,t){return function SEe(r,t,e){let i=$n.EMPTY_NODE;const n=Vw(r.visibleWrites,t);if(n)return n.isLeafNode()||n.forEachChild(vo,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){const s=wb(r.visibleWrites,t);return e.forEachChild(vo,(o,a)=>{const l=KT(wb(s,new Ss(o)),a);i=i.updateImmediateChild(o,l)}),Fte(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return Fte(wb(r.visibleWrites,t)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(r.writeTree,r.treePath,t)}function Hte(r,t,e,i){return function EEe(r,t,e,i,n){(0,ne.hu)(i||n,"Either existingEventSnap or existingServerSnap must exist");const s=jo(t,e);if(oW(r.visibleWrites,s))return null;{const o=wb(r.visibleWrites,s);return aW(o)?n.getChild(e):KT(o,n.getChild(e))}}(r.writeTree,r.treePath,t,e,i)}function jV(r,t){return function TEe(r,t){return Vw(r.visibleWrites,t)}(r.writeTree,jo(r.treePath,t))}function hW(r,t,e){return function xEe(r,t,e,i){const n=jo(t,e),s=Vw(r.visibleWrites,n);return null!=s?s:i.isCompleteForChild(e)?KT(wb(r.visibleWrites,n),i.getNode().getImmediateChild(e)):null}(r.writeTree,r.treePath,t,e)}function zte(r,t){return jte(jo(r.treePath,t),r.writeTree)}function jte(r,t){return{treePath:r,writeTree:t}}class kEe{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,ne.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,ne.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(i);if(n){const s=n.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,nM(i,t.snapshotNode,n.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,iM(i,n.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,UT(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,ne.g5)("Illegal combination of changes: "+t+" occurred after "+n);this.changeMap.set(i,nM(i,t.snapshotNode,n.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const qte=new class REe{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class uW{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new Cb(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hW(this.writes_,t,i)}}getChildAfterChild(t,e,i){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Bw(this.viewCache_),s=function AEe(r,t,e,i,n,s){return function DEe(r,t,e,i,n,s,o){let a;const l=wb(r.visibleWrites,t),h=Vw(l,rs());if(null!=h)a=h;else{if(null==e)return[];a=KT(l,e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let y=m.getNext();for(;y&&u.length<n;)0!==p(y,i)&&u.push(y),y=m.getNext();return u}}(r.writeTree,r.treePath,t,e,i,n,s)}(this.writes_,n,e,1,i,t);return 0===s.length?null:s[0]}}function Ute(r,t,e,i,n,s){const o=t.eventCache;if(null!=jV(i,e))return t;{let a,l;if(vr(e))if((0,ne.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const h=Bw(t),p=lW(i,h instanceof $n?h:$n.EMPTY_NODE);a=r.filter.updateFullNode(t.eventCache.getNode(),p,s)}else{const h=zV(i,Bw(t));a=r.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{const h=mr(e);if(".priority"===h){(0,ne.hu)(1===bb(e),"Can't have a priority with additional path components");const u=o.getNode();l=t.serverCache.getNode();const p=Hte(i,e,u,l);a=null!=p?r.filter.updatePriority(u,p):o.getNode()}else{const u=to(e);let p;if(o.isCompleteForChild(h)){l=t.serverCache.getNode();const m=Hte(i,e,o.getNode(),l);p=null!=m?o.getNode().getImmediateChild(h).updateChild(u,m):o.getNode().getImmediateChild(h)}else p=hW(i,h,t.serverCache);a=null!=p?r.filter.updateChild(o.getNode(),h,p,u,n,s):o.getNode()}}return aM(t,a,o.isFullyInitialized()||vr(e),r.filter.filtersNodes())}}function qV(r,t,e,i,n,s,o,a){const l=t.serverCache;let h;const u=o?r.filter:r.filter.getIndexedFilter();if(vr(e))h=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const y=l.getNode().updateChild(e,i);h=u.updateFullNode(l.getNode(),y,null)}else{const y=mr(e);if(!l.isCompleteForPath(e)&&bb(e)>1)return t;const C=to(e),T=l.getNode().getImmediateChild(y).updateChild(C,i);h=".priority"===y?u.updatePriority(l.getNode(),T):u.updateChild(l.getNode(),y,T,C,qte,null)}const p=Pte(t,h,l.isFullyInitialized()||vr(e),u.filtersNodes());return Ute(r,p,e,n,new uW(n,p,s),a)}function cW(r,t,e,i,n,s,o){const a=t.eventCache;let l,h;const u=new uW(n,t,s);if(vr(e))h=r.filter.updateFullNode(t.eventCache.getNode(),i,o),l=aM(t,h,!0,r.filter.filtersNodes());else{const p=mr(e);if(".priority"===p)h=r.filter.updatePriority(t.eventCache.getNode(),i),l=aM(t,h,a.isFullyInitialized(),a.isFiltered());else{const m=to(e),y=a.getNode().getImmediateChild(p);let C;if(vr(m))C=i;else{const S=u.getCompleteChild(p);C=null!=S?".priority"===jU(m)&&S.getChild(Cte(m)).isEmpty()?S:S.updateChild(m,i):$n.EMPTY_NODE}l=y.equals(C)?t:aM(t,r.filter.updateChild(a.getNode(),p,C,m,u,o),a.isFullyInitialized(),r.filter.filtersNodes())}}return l}function Wte(r,t){return r.eventCache.isCompleteForChild(t)}function Gte(r,t,e){return e.foreach((i,n)=>{t=t.updateChild(i,n)}),t}function dW(r,t,e,i,n,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let h,l=t;h=vr(e)?i:new yo(null).setTree(e,i);const u=t.serverCache.getNode();return h.children.inorderTraversal((p,m)=>{if(u.hasChild(p)){const C=Gte(0,t.serverCache.getNode().getImmediateChild(p),m);l=qV(r,l,new Ss(p),C,n,s,o,a)}}),h.children.inorderTraversal((p,m)=>{const y=!t.serverCache.isCompleteForChild(p)&&null===m.value;if(!u.hasChild(p)&&!y){const S=Gte(0,t.serverCache.getNode().getImmediateChild(p),m);l=qV(r,l,new Ss(p),S,n,s,o,a)}}),l}class VEe{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,n=new ZU(i.getIndex()),s=function JSe(r){return r.loadsAllData()?new ZU(r.getIndex()):r.hasLimit()?new XSe(r):new rM(r)}(i);this.processor_=function _Ee(r){return{filter:r}}(s);const o=e.serverCache,a=e.eventCache,l=n.updateFullNode($n.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode($n.EMPTY_NODE,a.getNode(),null),u=new Cb(l,o.isFullyInitialized(),n.filtersNodes()),p=new Cb(h,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=BV(p,u),this.eventGenerator_=new uEe(this.query_)}get query(){return this.query_}}function jEe(r,t){const e=Bw(r.viewCache_);return e&&(r.query._queryParams.loadsAllData()||!vr(t)&&!e.getImmediateChild(mr(t)).isEmpty())?e.getChild(t):null}function Kte(r){return 0===r.eventRegistrations_.length}function $te(r,t,e){const i=[];if(e){(0,ne.hu)(null==t,"A cancel should cancel all event registrations.");const n=r.query._path;r.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(e,n);o&&i.push(o)})}if(t){let n=[];for(let s=0;s<r.eventRegistrations_.length;++s){const o=r.eventRegistrations_[s];if(o.matches(t)){if(t.hasAnyCallback()){n=n.concat(r.eventRegistrations_.slice(s+1));break}}else n.push(o)}r.eventRegistrations_=n}else r.eventRegistrations_=[];return i}function Yte(r,t,e,i){t.type===Nd.MERGE&&null!==t.source.queryId&&((0,ne.hu)(Bw(r.viewCache_),"We should always have a full cache before handling merges"),(0,ne.hu)(VV(r.viewCache_),"Missing event cache, even though we have a server cache"));const n=r.viewCache_,s=function OEe(r,t,e,i,n){const s=new kEe;let o,a;if(e.type===Nd.OVERWRITE){const h=e;h.source.fromUser?o=cW(r,t,h.path,h.snap,i,n,s):((0,ne.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered()&&!vr(h.path),o=qV(r,t,h.path,h.snap,i,n,a,s))}else if(e.type===Nd.MERGE){const h=e;h.source.fromUser?o=function LEe(r,t,e,i,n,s,o){let a=t;return i.foreach((l,h)=>{const u=jo(e,l);Wte(t,mr(u))&&(a=cW(r,a,u,h,n,s,o))}),i.foreach((l,h)=>{const u=jo(e,l);Wte(t,mr(u))||(a=cW(r,a,u,h,n,s,o))}),a}(r,t,h.path,h.children,i,n,s):((0,ne.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered(),o=dW(r,t,h.path,h.children,i,n,a,s))}else if(e.type===Nd.ACK_USER_WRITE){const h=e;o=h.revert?function BEe(r,t,e,i,n,s){let o;if(null!=jV(i,e))return t;{const a=new uW(i,t,n),l=t.eventCache.getNode();let h;if(vr(e)||".priority"===mr(e)){let u;if(t.serverCache.isFullyInitialized())u=zV(i,Bw(t));else{const p=t.serverCache.getNode();(0,ne.hu)(p instanceof $n,"serverChildren would be complete if leaf node"),u=lW(i,p)}h=r.filter.updateFullNode(l,u,s)}else{const u=mr(e);let p=hW(i,u,t.serverCache);null==p&&t.serverCache.isCompleteForChild(u)&&(p=l.getImmediateChild(u)),h=null!=p?r.filter.updateChild(l,u,p,to(e),a,s):t.eventCache.getNode().hasChild(u)?r.filter.updateChild(l,u,$n.EMPTY_NODE,to(e),a,s):l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=zV(i,Bw(t)),o.isLeafNode()&&(h=r.filter.updateFullNode(h,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=jV(i,rs()),aM(t,h,o,r.filter.filtersNodes())}}(r,t,h.path,i,n,s):function FEe(r,t,e,i,n,s,o){if(null!=jV(n,e))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(vr(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return qV(r,t,e,l.getNode().getChild(e),n,s,a,o);if(vr(e)){let h=new yo(null);return l.getNode().forEachChild(tg,(u,p)=>{h=h.set(new Ss(u),p)}),dW(r,t,e,h,n,s,a,o)}return t}{let h=new yo(null);return i.foreach((u,p)=>{const m=jo(e,u);l.isCompleteForPath(m)&&(h=h.set(u,l.getNode().getChild(m)))}),dW(r,t,e,h,n,s,a,o)}}(r,t,h.path,h.affectedTree,i,n,s)}else{if(e.type!==Nd.LISTEN_COMPLETE)throw(0,ne.g5)("Unknown operation type: "+e.type);o=function NEe(r,t,e,i,n){const s=t.serverCache;return Ute(r,Pte(t,s.getNode(),s.isFullyInitialized()||vr(e),s.isFiltered()),e,i,qte,n)}(r,t,e.path,i,s)}const l=s.getChanges();return function PEe(r,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const n=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=VV(r);(e.length>0||!r.eventCache.isFullyInitialized()||n&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(Rte(VV(t)))}}(t,o,l),{viewCache:o,changes:l}}(r.processor_,n,t,e,i);return function MEe(r,t){(0,ne.hu)(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,ne.hu)(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,s.viewCache),(0,ne.hu)(s.viewCache.serverCache.isFullyInitialized()||!n.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=s.viewCache,Zte(r,s.changes,s.viewCache.eventCache.getNode(),null)}function Zte(r,t,e,i){return function cEe(r,t,e,i){const n=[],s=[];return t.forEach(o=>{"child_changed"===o.type&&r.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function QSe(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}(o.childName,o.snapshotNode))}),oM(r,n,"child_removed",t,i,e),oM(r,n,"child_added",t,i,e),oM(r,n,"child_moved",s,i,e),oM(r,n,"child_changed",t,i,e),oM(r,n,"value",t,i,e),n}(r.eventGenerator_,t,e,i?[i]:r.eventRegistrations_)}let UV,GV;class Qte{constructor(){this.views=new Map}}function pW(r,t,e,i){const n=t.source.queryId;if(null!==n){const s=r.views.get(n);return(0,ne.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Yte(s,t,e,i)}{let s=[];for(const o of r.views.values())s=s.concat(Yte(o,t,e,i));return s}}function Xte(r,t,e,i,n){const o=r.views.get(t._queryIdentifier);if(!o){let a=zV(e,n?i:null),l=!1;a?l=!0:i instanceof $n?(a=lW(e,i),l=!1):(a=$n.EMPTY_NODE,l=!1);const h=BV(new Cb(a,l,!1),new Cb(i,n,!1));return new VEe(t,h)}return o}function Jte(r){const t=[];for(const e of r.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Sb(r,t){let e=null;for(const i of r.views.values())e=e||jEe(i,t);return e}function eie(r,t){return t._queryParams.loadsAllData()?WV(r):r.views.get(t._queryIdentifier)}function tie(r,t){return null!=eie(r,t)}function Eb(r){return null!=WV(r)}function WV(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let XEe=1;class iie{constructor(t){this.listenProvider_=t,this.syncPointTree_=new yo(null),this.pendingWriteTree_=function IEe(){return{visibleWrites:Kp.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fW(r,t,e,i,n){return function gEe(r,t,e,i,n){(0,ne.hu)(i>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),r.allWrites.push({path:t,snap:e,writeId:i,visible:n}),n&&(r.visibleWrites=lM(r.visibleWrites,t,e)),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i,n),n?$T(r,new Nw({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function xb(r,t,e=!1){const i=function vEe(r,t){for(let e=0;e<r.allWrites.length;e++){const i=r.allWrites[e];if(i.writeId===t)return i}return null}(r.pendingWriteTree_,t);if(function yEe(r,t){const e=r.allWrites.findIndex(a=>a.writeId===t);(0,ne.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[e];r.allWrites.splice(e,1);let n=i.visible,s=!1,o=r.allWrites.length-1;for(;n&&o>=0;){const a=r.allWrites[o];a.visible&&(o>=e&&bEe(a,i.path)?n=!1:Fd(i.path,a.path)&&(s=!0)),o--}return!!n&&(s?(function CEe(r){r.visibleWrites=Bte(r.allWrites,wEe,rs()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(i.snap?r.visibleWrites=Lte(r.visibleWrites,i.path):Bl(i.children,l=>{r.visibleWrites=Lte(r.visibleWrites,jo(i.path,l))}),!0))}(r.pendingWriteTree_,t)){let s=new yo(null);return null!=i.snap?s=s.set(rs(),!0):Bl(i.children,o=>{s=s.set(new Ss(o),!0)}),$T(r,new NV(i.path,s,e))}return[]}function hM(r,t,e){return $T(r,new Nw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function KV(r,t,e,i,n=!1){const s=t._path,o=r.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||tie(o,t))){const l=function YEe(r,t,e,i){const n=t._queryIdentifier,s=[];let o=[];const a=Eb(r);if("default"===n)for(const[l,h]of r.views.entries())o=o.concat($te(h,e,i)),Kte(h)&&(r.views.delete(l),h.query._queryParams.loadsAllData()||s.push(h.query));else{const l=r.views.get(n);l&&(o=o.concat($te(l,e,i)),Kte(l)&&(r.views.delete(n),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Eb(r)&&s.push(new(function GEe(){return(0,ne.hu)(UV,"Reference.ts has not been loaded"),UV}())(t._repo,t._path)),{removed:s,events:o}}(o,t,e,i);(function KEe(r){return 0===r.views.size})(o)&&(r.syncPointTree_=r.syncPointTree_.remove(s));const h=l.removed;if(a=l.events,!n){const u=-1!==h.findIndex(m=>m._queryParams.loadsAllData()),p=r.syncPointTree_.findOnPath(s,(m,y)=>Eb(y));if(u&&!p){const m=r.syncPointTree_.subtree(s);if(!m.isEmpty()){const y=function sxe(r){return r.fold((t,e,i)=>{if(e&&Eb(e))return[WV(e)];{let n=[];return e&&(n=Jte(e)),Bl(i,(s,o)=>{n=n.concat(o)}),n}})}(m);for(let C=0;C<y.length;++C){const S=y[C],T=S.query,R=oie(r,S);r.listenProvider_.startListening(cM(T),uM(r,T),R.hashFn,R.onComplete)}}}!p&&h.length>0&&!i&&(u?r.listenProvider_.stopListening(cM(t),null):h.forEach(m=>{const y=r.queryToTagMap.get(YV(m));r.listenProvider_.stopListening(cM(m),y)}))}!function oxe(r,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const n=YV(i),s=r.queryToTagMap.get(n);r.queryToTagMap.delete(n),r.tagToQueryMap.delete(s)}}}(r,h)}return a}function nie(r,t,e,i){const n=mW(r,i);if(null!=n){const s=vW(n),o=s.path,a=s.queryId,l=nu(o,t);return yW(r,o,new Nw(nW(a),l,e))}return[]}function gW(r,t,e,i=!1){const n=t._path;let s=null,o=!1;r.syncPointTree_.foreachOnPath(n,(m,y)=>{const C=nu(m,n);s=s||Sb(y,C),o=o||Eb(y)});let l,a=r.syncPointTree_.get(n);a?(o=o||Eb(a),s=s||Sb(a,rs())):(a=new Qte,r.syncPointTree_=r.syncPointTree_.set(n,a)),null!=s?l=!0:(l=!1,s=$n.EMPTY_NODE,r.syncPointTree_.subtree(n).foreachChild((y,C)=>{const S=Sb(C,rs());S&&(s=s.updateImmediateChild(y,S))}));const h=tie(a,t);if(!h&&!t._queryParams.loadsAllData()){const m=YV(t);(0,ne.hu)(!r.queryToTagMap.has(m),"View does not exist, but we have a tag");const y=function axe(){return XEe++}();r.queryToTagMap.set(m,y),r.tagToQueryMap.set(y,m)}let p=function $Ee(r,t,e,i,n,s){const o=Xte(r,t,i,n,s);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,o),function qEe(r,t){r.eventRegistrations_.push(t)}(o,e),function UEe(r,t){const e=r.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(vo,(s,o)=>{i.push(UT(s,o))}),e.isFullyInitialized()&&i.push(Rte(e.getNode())),Zte(r,i,e.getNode(),t)}(o,e)}(a,t,e,HV(r.pendingWriteTree_,n),s,l);if(!h&&!o&&!i){const m=eie(a,t);p=p.concat(function lxe(r,t,e){const i=t._path,n=uM(r,t),s=oie(r,e),o=r.listenProvider_.startListening(cM(t),n,s.hashFn,s.onComplete),a=r.syncPointTree_.subtree(i);if(n)(0,ne.hu)(!Eb(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((h,u,p)=>{if(!vr(h)&&u&&Eb(u))return[WV(u).query];{let m=[];return u&&(m=m.concat(Jte(u).map(y=>y.query))),Bl(p,(y,C)=>{m=m.concat(C)}),m}});for(let h=0;h<l.length;++h){const u=l[h];r.listenProvider_.stopListening(cM(u),uM(r,u))}}return o}(r,t,m))}return p}function $V(r,t,e){const n=r.pendingWriteTree_,s=r.syncPointTree_.findOnPath(t,(o,a)=>{const h=Sb(a,nu(o,t));if(h)return h});return Vte(n,t,s,e,!0)}function $T(r,t){return rie(t,r.syncPointTree_,null,HV(r.pendingWriteTree_,rs()))}function rie(r,t,e,i){if(vr(r.path))return sie(r,t,e,i);{const n=t.get(rs());null==e&&null!=n&&(e=Sb(n,rs()));let s=[];const o=mr(r.path),a=r.operationForChild(o),l=t.children.get(o);if(l&&a){const h=e?e.getImmediateChild(o):null,u=zte(i,o);s=s.concat(rie(a,l,h,u))}return n&&(s=s.concat(pW(n,r,i,e))),s}}function sie(r,t,e,i){const n=t.get(rs());null==e&&null!=n&&(e=Sb(n,rs()));let s=[];return t.children.inorderTraversal((o,a)=>{const l=e?e.getImmediateChild(o):null,h=zte(i,o),u=r.operationForChild(o);u&&(s=s.concat(sie(u,a,l,h)))}),n&&(s=s.concat(pW(n,r,i,e))),s}function oie(r,t){const e=t.query,i=uM(r,e);return{hashFn:()=>(function HEe(r){return r.viewCache_.serverCache.getNode()}(t)||$n.EMPTY_NODE).hash(),onComplete:n=>{if("ok"===n)return i?function ixe(r,t,e){const i=mW(r,e);if(i){const n=vW(i),s=n.path,o=n.queryId,a=nu(s,t);return yW(r,s,new sM(nW(o),a))}return[]}(r,e._path,i):function txe(r,t){return $T(r,new sM({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(r,e._path);{const s=function eSe(r,t){let e="Unknown Error";"too_big"===r?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?e="Client doesn't have permission to access the desired data.":"unavailable"===r&&(e="The service is unavailable");const i=new Error(r+" at "+t._path.toString()+": "+e);return i.code=r.toUpperCase(),i}(n,e);return KV(r,e,null,s)}}}}function uM(r,t){const e=YV(t);return r.queryToTagMap.get(e)}function YV(r){return r._path.toString()+"$"+r._queryIdentifier}function mW(r,t){return r.tagToQueryMap.get(t)}function vW(r){const t=r.indexOf("$");return(0,ne.hu)(-1!==t&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new Ss(r.substr(0,t))}}function yW(r,t,e){const i=r.syncPointTree_.get(t);return(0,ne.hu)(i,"Missing sync point for query tag that we're tracking"),pW(i,e,HV(r.pendingWriteTree_,t),null)}function cM(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function QEe(){return(0,ne.hu)(GV,"Reference.ts has not been loaded"),GV}())(r._repo,r._path):r}class bW{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new bW(e)}node(){return this.node_}}class CW{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=jo(this.path_,t);return new CW(this.syncTree_,e)}node(){return $V(this.syncTree_,this.path_)}}const aie=function(r,t,e){return r&&"object"==typeof r?((0,ne.hu)(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?uxe(r[".sv"],t,e):"object"==typeof r[".sv"]?cxe(r[".sv"],t):void(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},uxe=function(r,t,e){if("timestamp"===r)return e.timestamp;(0,ne.hu)(!1,"Unexpected server value: "+r)},cxe=function(r,t,e){r.hasOwnProperty("increment")||(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;"number"!=typeof i&&(0,ne.hu)(!1,"Unexpected increment value: "+i);const n=t.node();if((0,ne.hu)(null!==n&&typeof n<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!n.isLeafNode())return i;const o=n.getValue();return"number"!=typeof o?i:o+i},lie=function(r,t,e,i){return SW(t,new CW(e,r),i)},wW=function(r,t,e){return SW(r,new bW(t),e)};function SW(r,t,e){const i=r.getPriority().val(),n=aie(i,t.getImmediateChild(".priority"),e);let s;if(r.isLeafNode()){const o=r,a=aie(o.getValue(),t,e);return a!==o.getValue()||n!==o.getPriority().val()?new jT(a,ha(n)):r}{const o=r;return s=o,n!==o.getPriority().val()&&(s=s.updatePriority(new jT(n))),o.forEachChild(vo,(a,l)=>{const h=SW(l,t.getImmediateChild(a),e);h!==l&&(s=s.updateImmediateChild(a,h))}),s}}class EW{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function ZV(r,t){let e=t instanceof Ss?t:new Ss(t),i=r,n=mr(e);for(;null!==n;){const s=(0,ne.DV)(i.node.children,n)||{children:{},childCount:0};i=new EW(n,i,s),e=to(e),n=mr(e)}return i}function Hw(r){return r.node.value}function xW(r,t){r.node.value=t,TW(r)}function hie(r){return r.node.childCount>0}function QV(r,t){Bl(r.node.children,(e,i)=>{t(new EW(e,r,i))})}function uie(r,t,e,i){e&&!i&&t(r),QV(r,n=>{uie(n,t,!0,i)}),e&&i&&t(r)}function dM(r){return new Ss(null===r.parent?r.name:dM(r.parent)+"/"+r.name)}function TW(r){null!==r.parent&&function fxe(r,t,e){const i=function dxe(r){return void 0===Hw(r)&&!hie(r)}(e),n=(0,ne.r3)(r.node.children,t);i&&n?(delete r.node.children[t],r.node.childCount--,TW(r)):!i&&!n&&(r.node.children[t]=e.node,r.node.childCount++,TW(r))}(r.parent,r.name,r)}const gxe=/[\[\].#$\/\u0000-\u001F\u007F]/,mxe=/[\[\].#$\u0000-\u001F\u007F]/,DW=10485760,XV=function(r){return"string"==typeof r&&0!==r.length&&!gxe.test(r)},cie=function(r){return"string"==typeof r&&0!==r.length&&!mxe.test(r)},pM=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!TV(r)||r&&"object"==typeof r&&(0,ne.r3)(r,".sv")},ig=function(r,t,e,i){i&&void 0===t||fM((0,ne.gK)(r,"value"),t,e)},fM=function(r,t,e){const i=e instanceof Ss?new OSe(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+Lw(i));if("function"==typeof t)throw new Error(r+"contains a function "+Lw(i)+" with contents = "+t.toString());if(TV(t))throw new Error(r+"contains "+t.toString()+" "+Lw(i));if("string"==typeof t&&t.length>DW/3&&(0,ne.ug)(t)>DW)throw new Error(r+"contains a string greater than "+DW+" utf8 bytes "+Lw(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,s=!1;if(Bl(t,(o,a)=>{if(".value"===o)n=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!XV(o)))throw new Error(r+" contains an invalid key ("+o+") "+Lw(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function PSe(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,ne.ug)(t),wte(r)})(i,o),fM(r,a,i),function LSe(r){const t=r.parts_.pop();r.byteLength_-=(0,ne.ug)(t),r.parts_.length>0&&(r.byteLength_-=1)}(i)}),n&&s)throw new Error(r+' contains ".value" child '+Lw(i)+" in addition to actual children.")}},die=function(r,t,e,i){if(i&&void 0===t)return;const n=(0,ne.gK)(r,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(n+" must be an object containing the children to replace.");const s=[];Bl(t,(o,a)=>{const l=new Ss(o);if(fM(n,a,jo(e,l)),".priority"===jU(l)&&!pM(a))throw new Error(n+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(r,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=X_(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!XV(s[o]))throw new Error(r+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(MSe);let n=null;for(e=0;e<t.length;e++){if(i=t[e],null!==n&&Fd(n,i))throw new Error(r+"contains a path "+n.toString()+" that is ancestor of another path "+i.toString());n=i}}(n,s)},IW=function(r,t,e){if(!e||void 0!==t){if(TV(t))throw new Error((0,ne.gK)(r,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!pM(t))throw new Error((0,ne.gK)(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gM=function(r,t,e,i){if(!(i&&void 0===e||XV(e)))throw new Error((0,ne.gK)(r,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mM=function(r,t,e,i){if(!(i&&void 0===e||cie(e)))throw new Error((0,ne.gK)(r,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Bd=function(r,t){if(".info"===mr(t))throw new Error(r+" failed = Can't modify data under /.info/")},pie=function(r,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!XV(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),cie(r)}(e))throw new Error((0,ne.gK)(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Cxe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function JV(r,t){let e=null;for(let i=0;i<t.length;i++){const n=t[i],s=n.getPath();null!==e&&!qU(s,e.path)&&(r.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(n)}e&&r.eventLists_.push(e)}function fie(r,t,e){JV(r,e),gie(r,i=>qU(i,t))}function Lc(r,t,e){JV(r,e),gie(r,i=>Fd(i,t)||Fd(t,i))}function gie(r,t){r.recursionDepth_++;let e=!0;for(let i=0;i<r.eventLists_.length;i++){const n=r.eventLists_[i];n&&(t(n.path)?(wxe(r.eventLists_[i]),r.eventLists_[i]=null):e=!1)}e&&(r.eventLists_=[]),r.recursionDepth_--}function wxe(r){for(let t=0;t<r.events.length;t++){const e=r.events[t];if(null!==e){r.events[t]=null;const i=e.getEventRunner();Ow&&Nl("event: "+e.toString()),HT(i)}}}const mie="repo_interrupt";class Exe{constructor(t,e,i,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cxe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=FV(),this.transactionQueueTree_=new EW,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function vie(r){const e=r.infoData_.getNode(new Ss(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function vM(r){return function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r}({timestamp:vie(r)})}function yie(r,t,e,i,n){r.dataUpdateCount++;const s=new Ss(t);e=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,e):e;let o=[];if(n)if(i){const l=(0,ne.UI)(e,h=>ha(h));o=function nxe(r,t,e,i){const n=mW(r,i);if(n){const s=vW(n),o=s.path,a=s.queryId,l=nu(o,t),h=yo.fromObject(e);return yW(r,o,new GT(nW(a),l,h))}return[]}(r.serverSyncTree_,s,l,n)}else{const l=ha(e);o=nie(r.serverSyncTree_,s,l,n)}else if(i){const l=(0,ne.UI)(e,h=>ha(h));o=function exe(r,t,e){const i=yo.fromObject(e);return $T(r,new GT({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(r.serverSyncTree_,s,l)}else{const l=ha(e);o=hM(r.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=ZT(r,s)),Lc(r.eventQueue_,a,o)}function bie(r,t){AW(r,"connected",t),!1===t&&function Axe(r){YT(r,"onDisconnectEvents");const t=vM(r),e=FV();eW(r.onDisconnect_,rs(),(n,s)=>{const o=lie(n,s,r.serverSyncTree_,t);WT(e,n,o)});let i=[];eW(e,rs(),(n,s)=>{i=i.concat(hM(r.serverSyncTree_,n,s));const o=MW(r,n);ZT(r,o)}),r.onDisconnect_=FV(),Lc(r.eventQueue_,rs(),i)}(r)}function AW(r,t,e){const i=new Ss("/.info/"+t),n=ha(e);r.infoData_.updateSnapshot(i,n);const s=hM(r.infoSyncTree_,i,n);Lc(r.eventQueue_,i,s)}function e2(r){return r.nextWriteId_++}function kW(r,t,e,i,n){YT(r,"set",{path:t.toString(),value:e,priority:i});const s=vM(r),o=ha(e,i),a=$V(r.serverSyncTree_,t),l=wW(o,a,s),h=e2(r),u=fW(r.serverSyncTree_,t,l,h,!0);JV(r.eventQueue_,u),r.server_.put(t.toString(),o.val(!0),(m,y)=>{const C="ok"===m;C||Eh("set at "+t+" failed: "+m);const S=xb(r.serverSyncTree_,h,!C);Lc(r.eventQueue_,t,S),Tb(0,n,m,y)});const p=MW(r,t);ZT(r,p),Lc(r.eventQueue_,p,[])}function kxe(r,t,e){r.server_.onDisconnectCancel(t.toString(),(i,n)=>{"ok"===i&&JU(r.onDisconnect_,t),Tb(0,e,i,n)})}function Cie(r,t,e,i){const n=ha(e);r.server_.onDisconnectPut(t.toString(),n.val(!0),(s,o)=>{"ok"===s&&WT(r.onDisconnect_,t,n),Tb(0,i,s,o)})}function RW(r,t,e){let i;i=".info"===mr(t._path)?KV(r.infoSyncTree_,t,e):KV(r.serverSyncTree_,t,e),fie(r.eventQueue_,t._path,i)}function wie(r){r.persistentConnection_&&r.persistentConnection_.interrupt(mie)}function YT(r,...t){let e="";r.persistentConnection_&&(e=r.persistentConnection_.id+":"),Nl(e,...t)}function Tb(r,t,e,i){t&&HT(()=>{if("ok"===e)t(null);else{const n=(e||"error").toUpperCase();let s=n;i&&(s+=": "+i);const o=new Error(s);o.code=n,t(o)}})}function _W(r,t,e){return $V(r.serverSyncTree_,t,e)||$n.EMPTY_NODE}function t2(r,t=r.transactionQueueTree_){if(t||i2(r,t),Hw(t)){const e=Eie(r,t);(0,ne.hu)(e.length>0,"Sending zero length transaction queue"),e.every(n=>0===n.status)&&function Lxe(r,t,e){const i=e.map(h=>h.currentWriteId),n=_W(r,t,i);let s=n;const o=n.hash();for(let h=0;h<e.length;h++){const u=e[h];(0,ne.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const p=nu(t,u.path);s=s.updateChild(p,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;r.server_.put(l.toString(),a,h=>{YT(r,"transaction put response",{path:l.toString(),status:h});let u=[];if("ok"===h){const p=[];for(let m=0;m<e.length;m++)e[m].status=2,u=u.concat(xb(r.serverSyncTree_,e[m].currentWriteId)),e[m].onComplete&&p.push(()=>e[m].onComplete(null,!0,e[m].currentOutputSnapshotResolved)),e[m].unwatcher();i2(r,ZV(r.transactionQueueTree_,t)),t2(r,r.transactionQueueTree_),Lc(r.eventQueue_,t,u);for(let m=0;m<p.length;m++)HT(p[m])}else{if("datastale"===h)for(let p=0;p<e.length;p++)e[p].status=3===e[p].status?4:0;else{Eh("transaction at "+l.toString()+" failed: "+h);for(let p=0;p<e.length;p++)e[p].status=4,e[p].abortReason=h}ZT(r,t)}},o)}(r,dM(t),e)}else hie(t)&&QV(t,e=>{t2(r,e)})}function ZT(r,t){const e=Sie(r,t),i=dM(e);return function Fxe(r,t,e){if(0===t.length)return;const i=[];let n=[];const o=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],h=nu(e,l.path);let p,u=!1;if((0,ne.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,p=l.abortReason,n=n.concat(xb(r.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,p="maxretry",n=n.concat(xb(r.serverSyncTree_,l.currentWriteId,!0));else{const m=_W(r,l.path,o);l.currentInputSnapshot=m;const y=t[a].update(m.val());if(void 0!==y){fM("transaction failed: Data returned ",y,l.path);let C=ha(y);"object"==typeof y&&null!=y&&(0,ne.r3)(y,".priority")||(C=C.updatePriority(m.getPriority()));const T=l.currentWriteId,R=vM(r),P=wW(C,m,R);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=P,l.currentWriteId=e2(r),o.splice(o.indexOf(T),1),n=n.concat(fW(r.serverSyncTree_,l.path,P,l.currentWriteId,l.applyLocally)),n=n.concat(xb(r.serverSyncTree_,T,!0))}else u=!0,p="nodata",n=n.concat(xb(r.serverSyncTree_,l.currentWriteId,!0))}Lc(r.eventQueue_,e,n),n=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===p?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(p),!1,null)))}i2(r,r.transactionQueueTree_);for(let a=0;a<i.length;a++)HT(i[a]);t2(r,r.transactionQueueTree_)}(r,Eie(r,e),i),i}function Sie(r,t){let e,i=r.transactionQueueTree_;for(e=mr(t);null!==e&&void 0===Hw(i);)i=ZV(i,e),e=mr(t=to(t));return i}function Eie(r,t){const e=[];return xie(r,t,e),e.sort((i,n)=>i.order-n.order),e}function xie(r,t,e){const i=Hw(t);if(i)for(let n=0;n<i.length;n++)e.push(i[n]);QV(t,n=>{xie(r,n,e)})}function i2(r,t){const e=Hw(t);if(e){let i=0;for(let n=0;n<e.length;n++)2!==e[n].status&&(e[i]=e[n],i++);e.length=i,xW(t,e.length>0?e:void 0)}QV(t,i=>{i2(r,i)})}function MW(r,t){const e=dM(Sie(r,t)),i=ZV(r.transactionQueueTree_,t);return function pxe(r,t,e){let i=e?r:r.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,n=>{OW(r,n)}),OW(r,i),uie(i,n=>{OW(r,n)}),e}function OW(r,t){const e=Hw(t);if(e){const i=[];let n=[],s=-1;for(let o=0;o<e.length;o++)3===e[o].status||(1===e[o].status?((0,ne.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):((0,ne.hu)(0===e[o].status,"Unexpected transaction status in abort"),e[o].unwatcher(),n=n.concat(xb(r.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?xW(t,void 0):e.length=s+1,Lc(r.eventQueue_,dM(t),n);for(let o=0;o<i.length;o++)HT(i[o])}}const PW=function(r,t){const e=Vxe(r),i=e.namespace;return"firebase.com"===e.domain&&eg(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&eg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Eh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new FU(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Ss(e.pathString)}},Vxe=function(r){let t="",e="",i="",n="",s="",o=!0,a="https",l=443;if("string"==typeof r){let h=r.indexOf("//");h>=0&&(a=r.substring(0,h-1),r=r.substring(h+2));let u=r.indexOf("/");-1===u&&(u=r.length);let p=r.indexOf("?");-1===p&&(p=r.length),t=r.substring(0,Math.min(u,p)),u<p&&(n=function Nxe(r){let t="";const e=r.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let n=e[i];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch{}t+="/"+n}return t}(r.substring(u,p)));const m=function Bxe(r){const t={};"?"===r.charAt(0)&&(r=r.substring(1));for(const e of r.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Eh(`Invalid query segment '${e}' in query '${r}'`)}return t}(r.substring(Math.min(r.length,p)));h=t.indexOf(":"),h>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(h+1),10)):h=t.length;const y=t.slice(0,h);if("localhost"===y.toLowerCase())e="localhost";else if(y.split(".").length<=2)e=y;else{const C=t.indexOf(".");i=t.substring(0,C).toLowerCase(),e=t.substring(C+1),s=i}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:e,subdomain:i,secure:o,scheme:a,pathString:n,namespace:s}},Tie="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Hxe=function(){let r=0;const t=[];return function(e){const i=e===r;let n;r=e;const s=new Array(8);for(n=7;n>=0;n--)s[n]=Tie.charAt(e%64),e=Math.floor(e/64);(0,ne.hu)(0===e,"Cannot push at time == 0");let o=s.join("");if(i){for(n=11;n>=0&&63===t[n];n--)t[n]=0;t[n]++}else for(n=0;n<12;n++)t[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)o+=Tie.charAt(t[n]);return(0,ne.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class Die{constructor(t,e,i,n){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=n}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ne.Wl)(this.snapshot.exportVal())}}class Iie{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class LW{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,ne.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Aie{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new ne.BH;return kxe(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Bd("OnDisconnect.remove",this._path);const t=new ne.BH;return Cie(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Bd("OnDisconnect.set",this._path),ig("OnDisconnect.set",t,this._path,!1);const e=new ne.BH;return Cie(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Bd("OnDisconnect.setWithPriority",this._path),ig("OnDisconnect.setWithPriority",t,this._path,!1),IW("OnDisconnect.setWithPriority",e,!1);const i=new ne.BH;return function Rxe(r,t,e,i,n){const s=ha(e,i);r.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{"ok"===o&&WT(r.onDisconnect_,t,s),Tb(0,n,o,a)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){Bd("OnDisconnect.update",this._path),die("OnDisconnect.update",t,this._path,!1);const e=new ne.BH;return function _xe(r,t,e,i){if((0,ne.xb)(e))return Nl("onDisconnect().update() called with empty data.  Don't do anything."),void Tb(0,i,"ok",void 0);r.server_.onDisconnectMerge(t.toString(),e,(n,s)=>{"ok"===n&&Bl(e,(o,a)=>{const l=ha(a);WT(r.onDisconnect_,jo(t,o),l)}),Tb(0,i,n,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class Gu{constructor(t,e,i,n){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=n}get key(){return vr(this._path)?null:jU(this._path)}get ref(){return new Vd(this._repo,this._path)}get _queryIdentifier(){const t=Mte(this._queryParams),e=PU(t);return"{}"===e?"default":e}get _queryObject(){return Mte(this._queryParams)}isEqual(t){if(!((t=(0,ne.m9)(t))instanceof Gu))return!1;const e=this._repo===t._repo,i=qU(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _Se(r){let t="";for(let e=r.pieceNum_;e<r.pieces_.length;e++)""!==r.pieces_[e]&&(t+="/"+encodeURIComponent(String(r.pieces_[e])));return t||"/"}(this._path)}}function n2(r,t){if(!0===r._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Db(r){let t=null,e=null;if(r.hasStart()&&(t=r.getIndexStartValue()),r.hasEnd()&&(e=r.getIndexEndValue()),r.getIndex()===tg){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",n="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==vb)throw new Error(i);if("string"!=typeof t)throw new Error(n)}if(r.hasEnd()){if(r.getIndexEndName()!==Qm)throw new Error(i);if("string"!=typeof e)throw new Error(n)}}else if(r.getIndex()===vo){if(null!=t&&!pM(t)||null!=e&&!pM(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ne.hu)(r.getIndex()instanceof $U||r.getIndex()===YU,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function r2(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Vd extends Gu{constructor(t,e){super(t,e,new OV,!1)}get parent(){const t=Cte(this._path);return null===t?null:new Vd(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class zw{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ss(t),i=ng(this.ref,t);return new zw(this._node.getChild(e),i,vo)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,n)=>t(new zw(n,ng(this.ref,i),vo)))}hasChild(t){const e=new Ss(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yM(r,t){return(r=(0,ne.m9)(r))._checkNotDeleted("ref"),void 0!==t?ng(r._root,t):r._root}function kie(r,t){(r=(0,ne.m9)(r))._checkNotDeleted("refFromURL");const e=PW(t,r._repo.repoInfo_.nodeAdmin);pie("refFromURL",e);const i=e.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&i.host!==r._repo.repoInfo_.host&&eg("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+r._repo.repoInfo_.host+")"),yM(r,e.path.toString())}function ng(r,t){return null===mr((r=(0,ne.m9)(r))._path)?function(r,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mM("child","path",e,!1)}(0,0,t):mM("child","path",t,!1),new Vd(r._repo,jo(r._path,t))}function FW(r,t){r=(0,ne.m9)(r),Bd("set",r._path),ig("set",t,r._path,!1);const e=new ne.BH;return kW(r._repo,r._path,t,null,e.wrapCallback(()=>{})),e.promise}function Wxe(r,t){die("update",t,r._path,!1);const e=new ne.BH;return function Ixe(r,t,e,i){YT(r,"update",{path:t.toString(),value:e});let n=!0;const s=vM(r),o={};if(Bl(e,(a,l)=>{n=!1,o[a]=lie(jo(t,a),ha(l),r.serverSyncTree_,s)}),n)Nl("update() called with empty data.  Don't do anything."),Tb(0,i,"ok",void 0);else{const a=e2(r),l=function JEe(r,t,e,i){!function mEe(r,t,e,i){(0,ne.hu)(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:e,writeId:i,visible:!0}),r.visibleWrites=sW(r.visibleWrites,t,e),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i);const n=yo.fromObject(e);return $T(r,new GT({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n))}(r.serverSyncTree_,t,o,a);JV(r.eventQueue_,l),r.server_.merge(t.toString(),e,(h,u)=>{const p="ok"===h;p||Eh("update at "+t+" failed: "+h);const m=xb(r.serverSyncTree_,a,!p),y=m.length>0?ZT(r,t):t;Lc(r.eventQueue_,y,m),Tb(0,i,h,u)}),Bl(e,h=>{const u=MW(r,jo(t,h));ZT(r,u)}),Lc(r.eventQueue_,t,[])}}(r._repo,r._path,t,e.wrapCallback(()=>{})),e.promise}function s2(r){r=(0,ne.m9)(r);const t=new LW(()=>{}),e=new bM(t);return function Dxe(r,t,e){const i=function rxe(r,t){const e=t._path;let i=null;r.syncPointTree_.foreachOnPath(e,(h,u)=>{const p=nu(h,e);i=i||Sb(u,p)});let n=r.syncPointTree_.get(e);n?i=i||Sb(n,rs()):(n=new Qte,r.syncPointTree_=r.syncPointTree_.set(e,n));const s=null!=i,o=s?new Cb(i,!0,!1):null;return function zEe(r){return VV(r.viewCache_)}(Xte(n,t,HV(r.pendingWriteTree_,t._path),s?o.getNode():$n.EMPTY_NODE,s))}(r.serverSyncTree_,t);return null!=i?Promise.resolve(i):r.server_.get(t).then(n=>{const s=ha(n).withIndex(t._queryParams.getIndex());let o;if(gW(r.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())o=hM(r.serverSyncTree_,t._path,s);else{const a=uM(r.serverSyncTree_,t);o=nie(r.serverSyncTree_,t._path,s,a)}return Lc(r.eventQueue_,t._path,o),KV(r.serverSyncTree_,t,e,null,!0),s},n=>(YT(r,"get for query "+(0,ne.Wl)(t)+" failed: "+n),Promise.reject(new Error(n))))}(r._repo,r,e).then(i=>new zw(i,new Vd(r._repo,r._path),r._queryParams.getIndex()))}class bM{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Die("value",this,new zw(t.snapshotNode,new Vd(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Iie(this,t,e):null}matches(t){return t instanceof bM&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class o2{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Iie(this,t,e):null}createEvent(t,e){(0,ne.hu)(null!=t.childName,"Child events should have a childName.");const i=ng(new Vd(e._repo,e._path),t.childName),n=e._queryParams.getIndex();return new Die(t.type,this,new zw(t.snapshotNode,i,n),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof o2&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function CM(r,t,e,i,n){let s;if("object"==typeof i&&(s=void 0,n=i),"function"==typeof i&&(s=i),n&&n.onlyOnce){const l=e,h=(u,p)=>{RW(r._repo,r,a),l(u,p)};h.userCallback=e.userCallback,h.context=e.context,e=h}const o=new LW(e,s||void 0),a="value"===t?new bM(o):new o2(t,o);return function Mxe(r,t,e){let i;i=".info"===mr(t._path)?gW(r.infoSyncTree_,t,e):gW(r.serverSyncTree_,t,e),fie(r.eventQueue_,t._path,i)}(r._repo,r,a),()=>RW(r._repo,r,a)}function NW(r,t,e,i){return CM(r,"value",t,e,i)}function Rie(r,t,e,i){return CM(r,"child_added",t,e,i)}function _ie(r,t,e,i){return CM(r,"child_changed",t,e,i)}function Mie(r,t,e,i){return CM(r,"child_moved",t,e,i)}function Oie(r,t,e,i){return CM(r,"child_removed",t,e,i)}function Pie(r,t,e){let i=null;const n=e?new LW(e):null;"value"===t?i=new bM(n):t&&(i=new o2(t,n)),RW(r._repo,r,i)}class $p{}class Lie extends $p{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ig("endAt",this._value,t._path,!0);const e=XU(t._queryParams,this._value,this._key);if(r2(e),Db(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gu(t._repo,t._path,e,t._orderByCalled)}}class Kxe extends $p{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ig("endBefore",this._value,t._path,!1);const e=function nEe(r,t,e){let i;return i=XU(r,t,r.index_===tg||e?e:vb),i.endBeforeSet_=!0,i}(t._queryParams,this._value,this._key);if(r2(e),Db(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Gu(t._repo,t._path,e,t._orderByCalled)}}class Fie extends $p{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ig("startAt",this._value,t._path,!0);const e=QU(t._queryParams,this._value,this._key);if(r2(e),Db(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Gu(t._repo,t._path,e,t._orderByCalled)}}class Zxe extends $p{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){ig("startAfter",this._value,t._path,!1);const e=function iEe(r,t,e){let i;return i=QU(r,t,r.index_===tg||e?e:Qm),i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(r2(e),Db(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Gu(t._repo,t._path,e,t._orderByCalled)}}class Xxe extends $p{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gu(t._repo,t._path,function eEe(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class eTe extends $p{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Gu(t._repo,t._path,function tEe(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class iTe extends $p{constructor(t){super(),this._path=t}_apply(t){n2(t,"orderByChild");const e=new Ss(this._path);if(vr(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new $U(e),n=PV(t._queryParams,i);return Db(n),new Gu(t._repo,t._path,n,!0)}}class rTe extends $p{_apply(t){n2(t,"orderByKey");const e=PV(t._queryParams,tg);return Db(e),new Gu(t._repo,t._path,e,!0)}}class oTe extends $p{_apply(t){n2(t,"orderByPriority");const e=PV(t._queryParams,vo);return Db(e),new Gu(t._repo,t._path,e,!0)}}class lTe extends $p{_apply(t){n2(t,"orderByValue");const e=PV(t._queryParams,YU);return Db(e),new Gu(t._repo,t._path,e,!0)}}class uTe extends $p{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(ig("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Lie(this._value,this._key)._apply(new Fie(this._value,this._key)._apply(t))}}function Yp(r,...t){let e=(0,ne.m9)(r);for(const i of t)e=i._apply(e);return e}(function WEe(r){(0,ne.hu)(!UV,"__referenceConstructor has already been defined"),UV=r})(Vd),function ZEe(r){(0,ne.hu)(!GV,"__referenceConstructor has already been defined"),GV=r}(Vd);const BW={};function Bie(r,t,e,i,n){let s=i||r.options.databaseURL;void 0===s&&(r.options.projectId||eg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Nl("Using default host for project ",r.options.projectId),s=`${r.options.projectId}-default-rtdb.firebaseio.com`);let l,h,o=PW(s,n),a=o.repoInfo;typeof process<"u"&&process.env&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(l=!0,s=`http://${h}?ns=${a.namespace}`,o=PW(s,n),a=o.repoInfo):l=!o.repoInfo.secure;const u=n&&l?new Q_(Q_.OWNER):new oSe(r.name,r.options,t);pie("Invalid Firebase Database URL",o),vr(o.path)||eg("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function gTe(r,t,e,i){let n=BW[t.name];n||(n={},BW[t.name]=n);let s=n[r.toURLString()];return s&&eg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Exe(r,false,e,i),n[r.toURLString()]=s,s}(a,r,u,new sSe(r.name,e));return new vTe(p,r)}class vTe{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function xxe(r,t,e){if(r.stats_=VU(r.repoInfo_),r.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)r.server_=new LV(r.repoInfo_,(i,n,s,o)=>{yie(r,i,n,s,o)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>bie(r,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ne.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new Fw(r.repoInfo_,t,(i,n,s,o)=>{yie(r,i,n,s,o)},i=>{bie(r,i)},i=>{!function Txe(r,t){Bl(t,(e,i)=>{AW(r,e,i)})}(r,i)},r.authTokenProvider_,r.appCheckProvider_,e),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=function hSe(r,t){const e=r.toString();return BU[e]||(BU[e]=t()),BU[e]}(r.repoInfo_,()=>new hEe(r.stats_,r.server_)),r.infoData_=new rEe,r.infoSyncTree_=new iie({startListening:(i,n,s,o)=>{let a=[];const l=r.infoData_.getNode(i._path);return l.isEmpty()||(a=hM(r.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),AW(r,"connected",!1),r.serverSyncTree_=new iie({startListening:(i,n,s,o)=>(r.server_.listen(i,s,n,(a,l)=>{const h=o(a,l);Lc(r.eventQueue_,i._path,h)}),[]),stopListening:(i,n)=>{r.server_.unlisten(i,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vd(this._repo,rs())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function fTe(r,t){const e=BW[t];(!e||e[r.key]!==r)&&eg(`Database ${t}(${r.repoInfo_}) has already been deleted.`),wie(r),delete e[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&eg("Cannot call "+t+" on a deleted database.")}}function Vie(){lte.IS_TRANSPORT_INITIALIZED&&Eh("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yTe(){Vie(),yb.forceDisallow()}function bTe(){Vie(),zT.forceDisallow(),yb.forceAllow()}function VW(r=(0,$a.getApp)(),t){const e=(0,$a._getProvider)(r,"database").getImmediate({identifier:t}),i=(0,ne.P0)("database");return i&&Hie(e,...i),e}function Hie(r,t,e,i={}){(r=(0,ne.m9)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&eg("Cannot call useEmulator() after instance has already been initialized.");const n=r._repoInternal;let s;if(n.repoInfo_.nodeAdmin)i.mockUserToken&&eg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Q_(Q_.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,ne.Sg)(i.mockUserToken,r.app.options.projectId);s=new Q_(o)}!function pTe(r,t,e,i){r.repoInfo_=new FU(`${t}:${e}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams),i&&(r.authTokenProvider_=i)}(n,t,e,s)}function STe(r,t){jee(r,t)}const xTe={".sv":"timestamp"};class ITe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Fw.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)},Fw.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)},function ETe(r){Nee($a.SDK_VERSION),(0,$a._registerComponent)(new Du.wA("database",(t,{instanceIdentifier:e})=>Bie(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,$a.registerVersion)(Lee,"0.14.0",r),(0,$a.registerVersion)(Lee,"0.14.0","esm2017")}();var HW=te(4986),zW=te(6451),zie=te(3099);function jie(r,t=hc.y){return r=r??kTe,(0,Pa.e)((e,i)=>{let n,s=!0;e.subscribe((0,so.x)(i,o=>{const a=t(o);(s||!r(n,a))&&(s=!1,n=a,i.next(o))}))})}function kTe(r,t){return r===t}var RTe=te(5032),ss=te(462),Cl=te(2011),jW=(te(9568),te(3942));const LTe=new Hh.Yd("@firebase/database-compat"),qie=function(r){LTe.warn("FIREBASE WARNING: "+r)};class BTe{constructor(t){this._delegate=t}cancel(t){(0,ne.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ne.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,ne.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ne.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,ne.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ne.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,ne.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ne.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const n=this._delegate.setWithPriority(t,e);return i&&n.then(()=>i(null),s=>i(s)),n}update(t,e){if((0,ne.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,qie("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ne.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),n=>e(n)),i}}class VTe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,ne.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ib{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,ne.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ne.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ne.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ne.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,ne.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),mM("DataSnapshot.child","path",t,!1),new Ib(this._database,this._delegate.child(t))}hasChild(t){return(0,ne.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mM("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,ne.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,ne.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ne.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new Ib(this._database,e)))}hasChildren(){return(0,ne.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ne.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ne.Dv)("DataSnapshot.ref",0,0,arguments.length),new Fc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class th{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,n){var s;(0,ne.Dv)("Query.on",2,4,arguments.length),(0,ne.Wj)("Query.on","callback",e,!1);const o=th.getCancelAndContextArgs_("Query.on",i,n),a=(h,u)=>{e.call(o.context,new Ib(this.database,h),u)};a.userCallback=e,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(t){case"value":return NW(this._delegate,a,l),e;case"child_added":return Rie(this._delegate,a,l),e;case"child_removed":return Oie(this._delegate,a,l),e;case"child_changed":return _ie(this._delegate,a,l),e;case"child_moved":return Mie(this._delegate,a,l),e;default:throw new Error((0,ne.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,ne.Dv)("Query.off",0,3,arguments.length),function(r,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ne.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,ne.Wj)("Query.off","callback",e,!0),(0,ne.lb)("Query.off","context",i,!0),e){const n=()=>{};n.userCallback=e,n.context=i,Pie(this._delegate,t,n)}else Pie(this._delegate,t)}get(){return s2(this._delegate).then(t=>new Ib(this.database,t))}once(t,e,i,n){(0,ne.Dv)("Query.once",1,4,arguments.length),(0,ne.Wj)("Query.once","callback",e,!0);const s=th.getCancelAndContextArgs_("Query.once",i,n),o=new ne.BH,a=(h,u)=>{const p=new Ib(this.database,h);e&&e.call(s.context,p,u),o.resolve(p)};a.userCallback=e,a.context=s.context;const l=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(t){case"value":NW(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":Rie(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Oie(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":_ie(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Mie(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,ne.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return(0,ne.Dv)("Query.limitToFirst",1,1,arguments.length),new th(this.database,Yp(this._delegate,function Jxe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Xxe(r)}(t)))}limitToLast(t){return(0,ne.Dv)("Query.limitToLast",1,1,arguments.length),new th(this.database,Yp(this._delegate,function tTe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new eTe(r)}(t)))}orderByChild(t){return(0,ne.Dv)("Query.orderByChild",1,1,arguments.length),new th(this.database,Yp(this._delegate,function nTe(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mM("orderByChild","path",r,!1),new iTe(r)}(t)))}orderByKey(){return(0,ne.Dv)("Query.orderByKey",0,0,arguments.length),new th(this.database,Yp(this._delegate,function sTe(){return new rTe}()))}orderByPriority(){return(0,ne.Dv)("Query.orderByPriority",0,0,arguments.length),new th(this.database,Yp(this._delegate,function aTe(){return new oTe}()))}orderByValue(){return(0,ne.Dv)("Query.orderByValue",0,0,arguments.length),new th(this.database,Yp(this._delegate,function hTe(){return new lTe}()))}startAt(t=null,e){return(0,ne.Dv)("Query.startAt",0,2,arguments.length),new th(this.database,Yp(this._delegate,function Yxe(r=null,t){return gM("startAt","key",t,!0),new Fie(r,t)}(t,e)))}startAfter(t=null,e){return(0,ne.Dv)("Query.startAfter",0,2,arguments.length),new th(this.database,Yp(this._delegate,function Qxe(r,t){return gM("startAfter","key",t,!0),new Zxe(r,t)}(t,e)))}endAt(t=null,e){return(0,ne.Dv)("Query.endAt",0,2,arguments.length),new th(this.database,Yp(this._delegate,function Gxe(r,t){return gM("endAt","key",t,!0),new Lie(r,t)}(t,e)))}endBefore(t=null,e){return(0,ne.Dv)("Query.endBefore",0,2,arguments.length),new th(this.database,Yp(this._delegate,function $xe(r,t){return gM("endBefore","key",t,!0),new Kxe(r,t)}(t,e)))}equalTo(t,e){return(0,ne.Dv)("Query.equalTo",1,2,arguments.length),new th(this.database,Yp(this._delegate,function cTe(r,t){return gM("equalTo","key",t,!0),new uTe(r,t)}(t,e)))}toString(){return(0,ne.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ne.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,ne.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof th))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const n={cancel:void 0,context:void 0};if(e&&i)n.cancel=e,(0,ne.Wj)(t,"cancel",n.cancel,!0),n.context=i,(0,ne.lb)(t,"context",n.context,!0);else if(e)if("object"==typeof e&&null!==e)n.context=e;else{if("function"!=typeof e)throw new Error((0,ne.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");n.cancel=e}return n}get ref(){return new Fc(this.database,new Vd(this._delegate._repo,this._delegate._path))}}class Fc extends th{constructor(t,e){super(t,new Gu(e._repo,e._path,new OV,!1)),this.database=t,this._delegate=e}getKey(){return(0,ne.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,ne.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Fc(this.database,ng(this._delegate,t))}getParent(){(0,ne.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Fc(this.database,t):null}getRoot(){return(0,ne.Dv)("Reference.root",0,0,arguments.length),new Fc(this.database,this._delegate.root)}set(t,e){(0,ne.Dv)("Reference.set",1,2,arguments.length),(0,ne.Wj)("Reference.set","onComplete",e,!0);const i=FW(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}update(t,e){if((0,ne.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,qie("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Bd("Reference.update",this._delegate._path),(0,ne.Wj)("Reference.update","onComplete",e,!0);const i=Wxe(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,ne.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ne.Wj)("Reference.setWithPriority","onComplete",i,!0);const n=function Uxe(r,t,e){if(Bd("setWithPriority",r._path),ig("setWithPriority",t,r._path,!1),IW("setWithPriority",e,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const i=new ne.BH;return kW(r._repo,r._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&n.then(()=>i(null),s=>i(s)),n}remove(t){(0,ne.Dv)("Reference.remove",0,1,arguments.length),(0,ne.Wj)("Reference.remove","onComplete",t,!0);const e=function jxe(r){return Bd("remove",r._path),FW(r,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,ne.Dv)("Reference.transaction",1,3,arguments.length),(0,ne.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,ne.Wj)("Reference.transaction","onComplete",e,!0),function(r,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,ne.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const n=function ATe(r,t,e){var i;if(r=(0,ne.m9)(r),Bd("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const n=null===(i=e?.applyLocally)||void 0===i||i,s=new ne.BH,a=NW(r,()=>{});return function Pxe(r,t,e,i,n,s){YT(r,"transaction on "+t);const o={path:t,update:e,onComplete:i,status:null,order:Vee(),applyLocally:s,retryCount:0,unwatcher:n,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=_W(r,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{fM("transaction failed: Data returned ",l,o.path),o.status=0;const h=ZV(r.transactionQueueTree_,t),u=Hw(h)||[];let p;u.push(o),xW(h,u),"object"==typeof l&&null!==l&&(0,ne.r3)(l,".priority")?(p=(0,ne.DV)(l,".priority"),(0,ne.hu)(pM(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=($V(r.serverSyncTree_,t)||$n.EMPTY_NODE).getPriority().val();const m=vM(r),y=ha(l,p),C=wW(y,a,m);o.currentOutputSnapshotRaw=y,o.currentOutputSnapshotResolved=C,o.currentWriteId=e2(r);const S=fW(r.serverSyncTree_,t,C,o.currentWriteId,o.applyLocally);Lc(r.eventQueue_,t,S),t2(r,r.transactionQueueTree_)}}(r._repo,r._path,t,(l,h,u)=>{let p=null;l?s.reject(l):(p=new zw(u,new Vd(r._repo,r._path),vo),s.resolve(new ITe(h,p)))},a,n),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new VTe(s.committed,new Ib(this.database,s.snapshot)));return e&&n.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),n}setPriority(t,e){(0,ne.Dv)("Reference.setPriority",1,2,arguments.length),(0,ne.Wj)("Reference.setPriority","onComplete",e,!0);const i=function qxe(r,t){r=(0,ne.m9)(r),Bd("setPriority",r._path),IW("setPriority",t,!1);const e=new ne.BH;return kW(r._repo,jo(r._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}push(t,e){(0,ne.Dv)("Reference.push",0,2,arguments.length),(0,ne.Wj)("Reference.push","onComplete",e,!0);const i=function zxe(r,t){r=(0,ne.m9)(r),Bd("push",r._path),ig("push",t,r._path,!0);const e=vie(r._repo),i=Hxe(e),n=ng(r,i),s=ng(r,i);let o;return o=null!=t?FW(s,t).then(()=>s):Promise.resolve(s),n.then=o.then.bind(o),n.catch=o.then.bind(o,void 0),n}(this._delegate,t),n=i.then(o=>new Fc(this.database,o));e&&n.then(()=>e(null),o=>e(o));const s=new Fc(this.database,i);return s.then=n.then.bind(n),s.catch=n.catch.bind(n,void 0),s}onDisconnect(){return Bd("Reference.onDisconnect",this._delegate._path),new BTe(new Aie(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class wM{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yTe,forceLongPolling:bTe}}useEmulator(t,e,i={}){Hie(this._delegate,t,e,i)}ref(t){if((0,ne.Dv)("database.ref",0,1,arguments.length),t instanceof Fc){const e=kie(this._delegate,t.toString());return new Fc(this,e)}{const e=yM(this._delegate,t);return new Fc(this,e)}}refFromURL(t){(0,ne.Dv)("database.refFromURL",1,1,arguments.length);const i=kie(this._delegate,t);return new Fc(this,i)}goOffline(){return(0,ne.Dv)("database.goOffline",0,0,arguments.length),function CTe(r){(r=(0,ne.m9)(r))._checkNotDeleted("goOffline"),wie(r._repo)}(this._delegate)}goOnline(){return(0,ne.Dv)("database.goOnline",0,0,arguments.length),function wTe(r){(r=(0,ne.m9)(r))._checkNotDeleted("goOnline"),function Oxe(r){r.persistentConnection_&&r.persistentConnection_.resume(mie)}(r._repo)}(this._delegate)}}wM.ServerValue={TIMESTAMP:function TTe(){return xTe}(),increment:r=>function DTe(r){return{".sv":{increment:r}}}(r)};var zTe=Object.freeze({__proto__:null,initStandalone:function HTe({app:r,url:t,version:e,customAuthImpl:i,namespace:n,nodeAdmin:s=!1}){Nee(e);const o=new Du.zt("auth-internal",new Du.H0("database-standalone"));return o.setComponent(new Du.wA("auth-internal",()=>i,"PRIVATE")),{instance:new wM(Bie(r,o,void 0,t,s),r),namespace:n}}});const jTe=wM.ServerValue;!function qTe(r){r.INTERNAL.registerComponent(new Du.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),n=t.getProvider("database").getImmediate({identifier:e});return new wM(n,i)},"PUBLIC").setServiceProps({Reference:Fc,Query:th,Database:wM,DataSnapshot:Ib,enableLogging:STe,INTERNAL:zTe,ServerValue:jTe}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","0.3.0")}(jW.Z);var a2=te(5363),UTe=te(6063);class WTe extends xu.x{constructor(t=1/0,e=1/0,i=UTe.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:n,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!n&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:n}=this,s=n.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:n}=this,s=(n?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!n){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function Uie(r,t,e){let i,n=!1;return r&&"object"==typeof r?({bufferSize:i=1/0,windowTime:t=1/0,refCount:n=!1,scheduler:e}=r):i=r??1/0,(0,zie.B)({connector:()=>new WTe(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function Wie(r,t){return(0,ac.m)(t)?Zs(()=>r,t):Zs(()=>r)}var qW=te(9468),UW=te(259);const GW=new Map,Gie={activated:!1,tokenObservers:[]},ZTe={initialized:!1,enabled:!1};function ih(r){return GW.get(r)||Object.assign({},Gie)}function h2(){return ZTe}class iDe{constructor(t,e,i,n,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=n,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=n,n>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,wt.Z)(function*(){e.stop();try{e.pending=new ne.BH,yield function nDe(r){return new Promise(t=>{setTimeout(t,r)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new ne.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const ru=new ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function $ie(r){if(!ih(r).activated)throw ru.create("use-before-activation",{appName:r.name})}function YW(r,t){return ZW.apply(this,arguments)}function ZW(){return ZW=(0,wt.Z)(function*({url:r,body:t},e){const i={"Content-Type":"application/json"},n=e.getImmediate({optional:!0});if(n){const p=yield n.getHeartbeatsHeader();p&&(i["X-Firebase-Client"]=p)}const s={method:"POST",body:JSON.stringify(t),headers:i};let o,a;try{o=yield fetch(r,s)}catch(p){throw ru.create("fetch-network-error",{originalErrorMessage:p?.message})}if(200!==o.status)throw ru.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(p){throw ru.create("fetch-parse-error",{originalErrorMessage:p?.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw ru.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const h=1e3*Number(l[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+h,issuedAtTimeMillis:u}}),ZW.apply(this,arguments)}function aDe(r,t){const{projectId:e,appId:i,apiKey:n}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${n}`,body:{debug_token:t}}}const SM="firebase-app-check-store";let d2=null;function Zie(){return d2||(d2=new Promise((r,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{r(i.target.result)},e.onerror=i=>{var n;t(ru.create("storage-open",{originalErrorMessage:null===(n=i.target.error)||void 0===n?void 0:n.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(SM,{keyPath:"compositeKey"})}}catch(e){t(ru.create("storage-open",{originalErrorMessage:e?.message}))}}),d2)}function QW(){return QW=(0,wt.Z)(function*(r,t){const i=(yield Zie()).transaction(SM,"readwrite"),s=i.objectStore(SM).put({compositeKey:r,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var h;a(ru.create("storage-set",{originalErrorMessage:null===(h=l.target.error)||void 0===h?void 0:h.message}))}})}),QW.apply(this,arguments)}const EM=new Hh.Yd("@firebase/app-check");function e4(r,t){return(0,ne.hl)()?function cDe(r,t){return function Qie(r,t){return QW.apply(this,arguments)}(function Jie(r){return`${r.options.appId}-${r.name}`}(r),t)}(r,t).catch(e=>{EM.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function ene(){return h2().enabled}function tne(){return i4.apply(this,arguments)}function i4(){return i4=(0,wt.Z)(function*(){const r=h2();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),i4.apply(this,arguments)}const vDe={error:"UNKNOWN_ERROR"};function yDe(r){return ne.US.encodeString(JSON.stringify(r),!1)}function p2(r){return n4.apply(this,arguments)}function n4(){return n4=(0,wt.Z)(function*(r,t=!1){const e=r.app;$ie(e);const i=ih(e);let s,n=i.token;if(n&&!QT(n)&&(i.token=void 0,n=void 0),!n){const l=yield i.cachedTokenPromise;l&&(QT(l)?n=l:yield e4(e,void 0))}if(!t&&n&&QT(n))return{token:n.token};let a,o=!1;if(ene()){i.exchangeTokenPromise||(i.exchangeTokenPromise=YW(aDe(e,yield tne()),r.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const l=yield i.exchangeTokenPromise;return yield e4(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),n=yield ih(e).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?EM.warn(l.message):EM.error(l),s=l}return n?s?a=QT(n)?{token:n.token,internalError:s}:rne(s):(a={token:n.token},i.token=n,yield e4(e,n)):a=rne(s),o&&nne(e,a),a}),n4.apply(this,arguments)}function s4(r,t){const e=ih(r),i=e.tokenObservers.filter(n=>n.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function ine(r){const{app:t}=r,e=ih(t);let i=e.tokenRefresher;i||(i=function bDe(r){const{app:t}=r;return new iDe((0,wt.Z)(function*(){let i;if(i=ih(t).token?yield p2(r,!0):yield p2(r),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=ih(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(r),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function nne(r,t){const e=ih(r).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function QT(r){return r.expireTimeMillis-Date.now()>0}function rne(r){return{token:yDe(vDe),error:r}}class CDe{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ih(this.app);for(const e of t)s4(this.app,e.next);return Promise.resolve()}}const dne="app-check-internal";!function PDe(){(0,$a._registerComponent)(new Du.wA("app-check",r=>function wDe(r,t){return new CDe(r,t)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,t,e)=>{r.getProvider(dne).initialize()})),(0,$a._registerComponent)(new Du.wA(dne,r=>function SDe(r){return{getToken:t=>p2(r,t),addTokenListener:t=>function r4(r,t,e,i){const{app:n}=r,s=ih(n);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&QT(s.token)){const a=s.token;Promise.resolve().then(()=>{e({token:a.token}),ine(r)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ine(r))}(r,"INTERNAL",t),removeTokenListener:t=>s4(r.app,t)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$a.registerVersion)("@firebase/app-check","0.6.0")}();class xM{constructor(){return(0,ss.vb)("app-check")}}typeof window<"u"&&window;var g2=te(9260);const u4=new v.OlP("angularfire2.auth.use-emulator"),c4=new v.OlP("angularfire2.auth.settings"),d4=new v.OlP("angularfire2.auth.tenant-id"),p4=new v.OlP("angularfire2.auth.langugage-code"),f4=new v.OlP("angularfire2.auth.use-device-language"),g4=new v.OlP("angularfire.auth.persistence"),m4=(r,t,e,i,n,s,o,a)=>(0,Cl.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const l=t.runOutsideAngular(()=>r.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=n,s&&l.useDeviceLanguage(),o)for(const[h,u]of Object.entries(o))l.settings[h]=u;return a&&l.setPersistence(a),l},[e,i,n,s,o,a]);let m2=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,p,m,y){const C=new xu.x,S=Gi(void 0).pipe((0,a2.Q)(o.outsideAngular),Zs(()=>s.runOutsideAngular(()=>Promise.resolve().then(te.bind(te,9568)))),(0,$i.U)(()=>(0,Cl.on)(e,s,i)),(0,$i.U)(T=>m4(T,s,a,h,u,p,l,m)),Uie({bufferSize:1,refCount:!1}));if(lf(n))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Gi(null);else{S.pipe(lp()).subscribe();const R=S.pipe(Zs(N=>N.getRedirectResult().then(z=>z,()=>null)),ss.iC,Uie({bufferSize:1,refCount:!1})),P=S.pipe(Zs(N=>new Wa.y(z=>({unsubscribe:s.runOutsideAngular(()=>N.onAuthStateChanged(U=>z.next(U),U=>z.error(U),()=>z.complete()))})))),O=S.pipe(Zs(N=>new Wa.y(z=>({unsubscribe:s.runOutsideAngular(()=>N.onIdTokenChanged(U=>z.next(U),U=>z.error(U),()=>z.complete()))}))));this.authState=R.pipe(Wie(P),(0,qW.R)(o.outsideAngular),(0,a2.Q)(o.insideAngular)),this.user=R.pipe(Wie(O),(0,qW.R)(o.outsideAngular),(0,a2.Q)(o.insideAngular)),this.idToken=this.user.pipe(Zs(N=>N?(0,Tr.D)(N.getIdToken()):Gi(null))),this.idTokenResult=this.user.pipe(Zs(N=>N?(0,Tr.D)(N.getIdTokenResult()):Gi(null))),this.credential=(0,zW.T)(R,C,this.authState.pipe(Nh(N=>!N))).pipe((0,$i.U)(N=>N?.user?N:null),(0,qW.R)(o.outsideAngular),(0,a2.Q)(o.insideAngular))}return(0,Cl.pX)(this,S,s,{spy:{apply:(T,R,P)=>{(T.startsWith("signIn")||T.startsWith("createUser"))&&P.then(O=>C.next(O))}}})}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Cl.Dh),v.LFG(Cl.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ss.HU),v.LFG(u4,8),v.LFG(c4,8),v.LFG(d4,8),v.LFG(p4,8),v.LFG(f4,8),v.LFG(g4,8),v.LFG(xM,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),HDe=(()=>{class r{constructor(){g2.Z.registerVersion("angularfire",ss.q4.full,"auth-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[m2]}),r})();function fne(r){return null==r}function gne(r){return"function"==typeof r.set}function mne(r,t){return gne(t)?t:r.ref(t)}function vne(r,t){if(function zDe(r){return"string"==typeof r}(r))return t.stringCase();if(gne(r))return t.firebaseCase();if(function jDe(r){return"function"==typeof r.exportVal}(r))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof r)}function TM(r,t,e="on",i=HW.z){return new Wa.y(n=>{let s=null;return s=r[e](t,(o,a)=>{i.schedule(()=>{n.next({snapshot:o,prevKey:a})}),"once"===e&&i.schedule(()=>n.complete())},o=>{i.schedule(()=>n.error(o))}),"on"===e?{unsubscribe(){null!=s&&r.off(t,s)}}:{unsubscribe(){}}}).pipe((0,$i.U)(n=>{const{snapshot:s,prevKey:o}=n;let a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),(0,zie.B)())}function yne(r,t){const e=r.length;for(let i=0;i<e;i++)if(r[i].payload.key===t)return i;return-1}function WDe(r,t){const{payload:e,prevKey:i,key:n}=t,s=yne(r,n),o=function UDe(r,t){if(fne(t))return 0;{const e=yne(r,t);return-1===e?r.length:e+1}}(r,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let a=null;t.payload.forEach(l=>{const h={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,r=[...r,h],!1})}return r;case"child_added":if(s>-1){const a=r[s-1];(a&&a.key||null)!==i&&(r=r.filter(l=>l.payload.key!==e.key)).splice(o,0,t)}else{if(null==i)return[t,...r];(r=r.slice()).splice(o,0,t)}return r;case"child_removed":return r.filter(a=>a.payload.key!==e.key);case"child_changed":return r.map(a=>a.payload.key===n?t:a);case"child_moved":if(s>-1){const a=r.splice(s,1)[0];return(r=r.slice()).splice(o,0,a),r}return r;default:return r}}function bne(r){return(fne(r)||0===r.length)&&(r=["child_added","child_removed","child_changed","child_moved"]),r}function Cne(r,t,e){return function qDe(r,t,e){return TM(r,"value","once",e).pipe(Zs(i=>{const n=[Gi(i)];return t.forEach(s=>n.push(TM(r,s,"on",e))),(0,zW.T)(...n).pipe(up(WDe,[]))}),jie())}(r,t=bne(t),e)}function wne(r,t,e){const i=(t=bne(t)).map(n=>TM(r,n,"on",e));return(0,zW.T)(...i)}function Sne(r,t){return function(i,n){return vne(i,{stringCase:()=>r.child(i)[t](n),firebaseCase:()=>i[t](n),snapshotCase:()=>i.ref[t](n)})}}function YDe(r){return function(e){return e?vne(e,{stringCase:()=>r.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):r.remove()}}function Ene(r,t){return function(){return TM(r,"value","on",t)}}const XDe=new v.OlP("angularfire2.realtimeDatabaseURL"),JDe=new v.OlP("angularfire2.database.use-emulator");let XT=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,p,m,y,C,S,T){this.schedulers=a;const R=l,P=(0,Cl.on)(e,o,i);h&&m4(P,o,u,m,y,C,p,S),this.database=(0,Cl.cc)(`${P.name}.database.${n}`,"AngularFireDatabase",P.name,()=>{const O=o.runOutsideAngular(()=>P.database(n||void 0));return R&&O.useEmulator(...R),O},[R])}list(e,i){const n=this.schedulers.ngZone.runOutsideAngular(()=>mne(this.database,e));let s=n;return i&&(s=i(n)),function ZDe(r,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>r.ref);return{query:r,update:Sne(i,"update"),set:Sne(i,"set"),push:n=>i.push(n),remove:YDe(i),snapshotChanges:n=>Cne(r,n,e).pipe(ss.iC),stateChanges:n=>wne(r,n,e).pipe(ss.iC),auditTrail:n=>function GDe(r,t,e){return function $De(r,t,e){return function KDe(r,t){return TM(r,"value","on",t).pipe((0,$i.U)(e=>{let i;return e.payload.forEach(n=>(i=n.key,!1)),{data:e,lastKeyToLoad:i}}))}(r,e).pipe(function _Te(...r){const t=(0,ed.jO)(r);return(0,Pa.e)((e,i)=>{const n=r.length,s=new Array(n);let o=r.map(()=>!1),a=!1;for(let l=0;l<n;l++)(0,Ph.Xf)(r[l]).subscribe((0,so.x)(i,h=>{s[l]=h,!a&&!o[l]&&(o[l]=!0,(a=o.every(hc.y))&&(o=null))},RTe.Z));e.subscribe((0,so.x)(i,l=>{if(a){const h=[l,...s];i.next(t?t(...h):h)}}))})}(t),(0,$i.U)(([n,s])=>{const o=n.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function MTe(r){return(0,Pa.e)((t,e)=>{let i=!1,n=0;t.subscribe((0,so.x)(e,s=>(i||(i=!r(s,n++)))&&e.next(s)))})}(n=>-1===n.loadedKeys.indexOf(n.lastKeyToLoad)),(0,$i.U)(n=>n.actions))}(r,wne(r,t).pipe(up((n,s)=>[...n,s],[])),e)}(r,n,e).pipe(ss.iC),valueChanges:(n,s)=>Cne(r,n,e).pipe((0,$i.U)(a=>a.map(l=>s&&s.idField?Object.assign(Object.assign({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),ss.iC)}}(s,this)}object(e){return function QDe(r,t){return{query:r,snapshotChanges:()=>Ene(r,t.schedulers.outsideAngular)().pipe(ss.iC),update:e=>r.ref.update(e),set:e=>r.ref.set(e),remove:()=>r.ref.remove(),valueChanges:()=>Ene(r,t.schedulers.outsideAngular)().pipe(ss.iC,(0,$i.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>mne(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Cl.Dh),v.LFG(Cl.xv,8),v.LFG(XDe,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ss.HU),v.LFG(JDe,8),v.LFG(m2,8),v.LFG(u4,8),v.LFG(c4,8),v.LFG(d4,8),v.LFG(p4,8),v.LFG(f4,8),v.LFG(g4,8),v.LFG(xM,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),eIe=(()=>{class r{constructor(){g2.Z.registerVersion("angularfire",ss.q4.full,"rtdb-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[XT]}),r})();class DM{}let v2=(()=>{class r extends xu.x{constructor(e,i){super(),this._db=e,this.objectType=i,this.listSource=i.listSource,this.dataRef=e.list(this.listSource)}execute(e){this.getData(e).subscribe(i=>super.next(i))}getData(e){return this._db.list(this.listSource).snapshotChanges().pipe((0,$i.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}returnList(e){var i=[];return s2(ng(yM(VW(this._db.database.app)),e)).then(o=>{o.forEach(a=>{let l={value:a.val().key,text:a.val().name};i.push(l)})}),i}addData(e){return this.dataRef.push(e)}updateData(e,i){return this.dataRef.update(e,i)}deleteData(e){if(""!=e)return this.dataRef.remove(e)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(XT),v.LFG(DM))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class tIe extends DM{constructor(){super(...arguments),this.listSource="recipes"}}let iIe=(()=>{class r extends v2{constructor(e){super(e,new tIe),this.recipeKey="",this.db=e}setRecipeKey(e){this.recipeKey=e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(XT))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class nIe extends DM{constructor(){super(...arguments),this.listSource="recipeIngredients"}}let xne=(()=>{class r extends v2{constructor(e){super(e,new nIe),this.recipeKey="",this.calories=0,this.db=e}executeRecipe(e){this.getRecipeData(e).subscribe(i=>super.next(i))}setRecipeKey(e){this.recipeKey=e}getRecipeKey(){return this.recipeKey}getCalories(){return this.calories}getRecipeData(e){return this.db.list(this.listSource,i=>i.orderByChild("recipe").equalTo(this.recipeKey)).snapshotChanges().pipe((0,$i.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}calcCalories(){var e=0,i=this.getRecipeIngredients(),n=this.getIngredients();for(let s=0;s<i.length;s++)for(let o=0;o<n.length;o++)i[s].recipe==this.recipeKey&&i[s].ingredient==n[o].key&&(e+=i[s].amount*n[o].calories);this.calories=e}getIngredients(){var e=[];return s2(ng(yM(VW(this.db.database.app)),"ingredients")).then(s=>{s.forEach(o=>{let a={key:o.val().key,calories:o.val().calories,fat:0,carbs:0,protein:0,listSource:""};e.push(a)})}),e}getRecipeIngredients(){var e=[];return s2(ng(yM(VW(this.db.database.app)),"recipeIngredients")).then(s=>{s.forEach(o=>{let a={key:o.val().key,amount:o.val().amount,ingredient:o.val().ingredient,recipe:"",listSource:""};e.push(a)})}),e}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(XT))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const rIe=["grid"];let Tne=(()=>{class r{constructor(e){this.recipeIngredientService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.recipeIngredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10},this.groupOptions={showGroupedColumn:!1}}ngOnInit(){this.ingredientData=this.recipeIngredientService.returnList("ingredients"),this.recipeIngredientService.executeRecipe(this.state)}dataStateChange(e){console.log(this.recipeKey),this.recipeIngredientService.executeRecipe(e)}dataSourceChanged(e){"add"===e.action?(e.data.recipe=this.recipeIngredientService.getRecipeKey(),this.recipeIngredientService.addData(e.data).subscribe(()=>{e.endEdit?.()})):"edit"===e.action?(e.data.recipe=this.recipeIngredientService.getRecipeKey(),this.recipeIngredientService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()})):"delete"===e.requestType&&this.recipeIngredientService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()}),this.recipeIngredientService.calcCalories()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(xne))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-recipe-ingredient"]],viewQuery:function(e,i){if(1&e&&v.Gf(rIe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},inputs:{recipeKey:"recipeKey"},features:[v._Bn([EV,xV,Wwe])],decls:6,vars:6,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","ingredient","foreignKeyValue","text","foreignKeyField","value","headerText","Ingredient",3,"dataSource"],["field","amount","headerText","Amount"]],template:function(e,i){1&e&&(v.TgZ(0,"ejs-grid",0,1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3),v.qZA()()),2&e&&(v.Q6J("dataSource",v.lcZ(2,4,i.recipeIngredients))("editSettings",i.editSettings)("toolbar",i.toolbar),v.xp6(4),v.Q6J("dataSource",i.ingredientData))},dependencies:[SV,q_,U_,W_,G_,nf]}),r})();const sIe=["grid"],Dne=function(r){return{"e-error":r}};function oIe(r,t){if(1&r&&(v.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"div",13),v._UZ(5,"input",14)(6,"span",15),v.TgZ(7,"label",16),v._uU(8,"Name"),v.qZA()()(),v.TgZ(9,"div",12)(10,"div",13),v._UZ(11,"input",17)(12,"span",15),v.TgZ(13,"label",18),v._uU(14,"Description"),v.qZA()()()(),v.TgZ(15,"div",11)(16,"div",12)(17,"div",19),v._UZ(18,"input",20)(19,"span",15),v.TgZ(20,"label",21),v._uU(21," Ethnicity"),v.qZA()()(),v.TgZ(22,"div",12)(23,"div",19),v._UZ(24,"input",22)(25,"span",15),v.TgZ(26,"label",23),v._uU(27,"Ingredients"),v.qZA()()()(),v.TgZ(28,"div",11)(29,"div",12),v._UZ(30,"app-recipe-ingredient"),v.qZA()()()()),2&r){const e=t.$implicit,i=v.oxw();v.Q6J("formGroup",i.orderForm),v.xp6(4),v.Q6J("ngClass",v.VKq(3,Dne,e.invalid&&(e.dirty||e.touched))),v.xp6(6),v.Q6J("ngClass",v.VKq(5,Dne,e.invalid&&(e.dirty||e.touched)))}}let aIe=(()=>{class r{constructor(e,i){this.recipeService=e,this.recipeIngredientService=i,this.submitClicked=!1,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.recipes=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10},this.groupOptions={showGroupedColumn:!1}}ngOnInit(){this.recipeService.execute(this.state)}createFormGroup(e,i){return new sp({name:new oc(e.name,Ov.required),description:new oc(e.description,Ov.required),ethnicity:new oc(e.ethnicity),ingredients:new oc(e.ingredients),instructions:new oc(e.instructions),meal_time:new oc(e.meal_time)})}actionBegin(e){("beginEdit"===e.requestType||"add"===e.requestType)&&(this.submitClicked=!1,this.recipeIngredientService.setRecipeKey(e.rowData.key),this.orderForm=this.createFormGroup(e.rowData)),"save"===e.requestType?"new"===e.action?(this.submitClicked=!0,this.orderForm.valid?(this.recipeService.addData(e.data),this.recipeService.execute(this.state)):e.cancel=!0):"edit"===e.action&&(this.submitClicked=!0,this.orderForm.valid?(this.recipeService.updateData(e.data.key,e.data),this.recipeService.execute(this.state)):e.cancel=!0):"delete"===e.requestType&&(this.recipeService.deleteData(e.data[0].key),this.recipeService.execute(this.state))}actionComplete(e){("beginEdit"===e.requestType||"add"===e.requestType)&&e.dialog.dataBind()}get name(){return this.orderForm.get("name")}get description(){return this.orderForm.get("description")}get ingredients(){return this.orderForm.get("ingredients")}get ethnicity(){return this.orderForm.get("ethnicity")}get instructions(){return this.orderForm.get("instructions")}get meal_time(){return this.orderForm.get("meal_time")}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(iIe),v.Y36(xne))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-recipe"]],viewQuery:function(e,i){if(1&e&&v.Gf(sIe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([EV,xV])],decls:12,vars:8,consts:[[1,"control-section"],["allowPaging","true",3,"dataSource","pageSettings","allowGrouping","groupSettings","editSettings","toolbar","actionBegin","actionComplete"],["field","name","headerText","name","width","120"],["field","description","headerText","Description","width","120"],["field","ethnicity","headerText","Ethnicity","width","120"],["field","ingredients","headerText","Ingredients","width","120"],["field","instructions","headerText","instructions","width","120"],["field","meal_time","headerText","Meal time","width","120"],["editSettingsTemplate",""],[3,"formGroup"],[1,"justify-content-center"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"e-float-input","e-control-wrapper",3,"ngClass"],["formControlName","name","data-msg-containerid","nameError","id","name","name","name","type","text"],[1,"e-float-line"],["for","name",1,"e-float-text","e-label-top"],["formControlName","description","data-msg-containerid","descriptionError","id","description","name","description","type","text"],["for","description",1,"e-float-text","e-label-top"],[1,"e-float-input","e-control-wrapper"],["formControlName","ethnicity","data-msg-containerid","ethnicityError","id","ethnicity","name","ethnicity","type","text"],["for","ethnicity",1,"e-float-text","e-label-top"],["formControlName","ingredients","data-msg-containerid","ingredientsError","id","ingredients","name","ingredients","type","text"],["for","ingredients",1,"e-float-text","e-label-top"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"ejs-grid",1),v.NdJ("actionBegin",function(s){return i.actionBegin(s)})("actionComplete",function(s){return i.actionComplete(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7),v.qZA(),v.YNc(10,oIe,31,7,"ng-template",null,8,v.W1O),v.qZA()()),2&e&&(v.xp6(1),v.Q6J("dataSource",v.lcZ(2,6,i.recipes))("pageSettings",i.pageSettings)("allowGrouping",!0)("groupSettings",i.groupOptions)("editSettings",i.editSettings)("toolbar",i.toolbar))},dependencies:[xr,SV,q_,U_,W_,G_,mf,WS,wf,JS,Yv,Tne,nf],styles:["img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover}"]}),r})();class lIe extends DM{constructor(){super(...arguments),this.listSource="ingredients"}}let hIe=(()=>{class r extends v2{constructor(e){super(e,new lIe)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(XT))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const uIe=["grid"];let cIe=(()=>{class r{constructor(e){this.ingredientsService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.ingredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.ingredientsService.execute(this.state)}dataStateChange(e){this.ingredientsService.execute(e)}dataSourceChanged(e){"add"===e.action?this.ingredientsService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.ingredientsService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.ingredientsService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(hIe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-ingredients"]],viewQuery:function(e,i){if(1&e&&v.Gf(uIe,5),2&e){let n;v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([EV,xV])],decls:9,vars:5,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","name"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"]],template:function(e,i){1&e&&(v.TgZ(0,"ejs-grid",0,1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6),v.qZA()()),2&e&&v.Q6J("dataSource",v.lcZ(2,3,i.ingredients))("editSettings",i.editSettings)("toolbar",i.toolbar)},dependencies:[SV,q_,U_,W_,G_,nf]}),r})(),dIe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-contact"]],decls:25,vars:0,consts:[[1,"main"],[1,"container"],["action","https://nutrition-genius-default-rtdb.firebaseio.com/"],["for","fname"],["type","text","id","fname","name","firstname","placeholder","Your name.."],["for","lname"],["type","text","id","lname","name","lastname","placeholder","Your last name.."],["for","country"],["id","country","name","country"],["value","australia"],["value","canada"],["value","usa"],["for","subject"],["id","subject","name","subject","placeholder","Write something..",2,"height","200px"],["type","submit","value","Submit"]],template:function(e,i){1&e&&(v.TgZ(0,"html")(1,"div",0)(2,"p"),v._uU(3," Contact Us "),v.qZA()(),v.TgZ(4,"div",1)(5,"form",2)(6,"label",3),v._uU(7,"First Name"),v.qZA(),v._UZ(8,"input",4),v.TgZ(9,"label",5),v._uU(10,"Last Name"),v.qZA(),v._UZ(11,"input",6),v.TgZ(12,"label",7),v._uU(13,"Country"),v.qZA(),v.TgZ(14,"select",8)(15,"option",9),v._uU(16,"Australia"),v.qZA(),v.TgZ(17,"option",10),v._uU(18,"Canada"),v.qZA(),v.TgZ(19,"option",11),v._uU(20,"USA"),v.qZA()(),v.TgZ(21,"label",12),v._uU(22,"Subject"),v.qZA(),v._UZ(23,"textarea",13)(24,"input",14),v.qZA()()())},styles:["html[_ngcontent-%COMP%]{background-color:#fff}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid rgb(255,255,255);border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#303030;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:aciablue}.container[_ngcontent-%COMP%]{border-radius:40px;background-color:#556b2fb1;padding:40px}p[_ngcontent-%COMP%]{font-weight:600;font-size:100px;align-items:center;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}"]}),r})(),pIe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-main-profile"]],decls:253,vars:0,consts:[[1,"MuiGrid-root","MuiGrid-container","css-1d3bbye"],[1,"MuiGrid-root","MuiGrid-item","css-1wxaqej"],["type","button",1,"btn","me-3"],["routerLink","../Goals","href","/account/my-goals",1,"MuiTypography-root","MuiTypography-inherit","text-black"],["href","/en/measurements/check_in",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["href","/account/settings",1,"MuiTypography-root","MuiTypography-inherit","MuiLink-root","text-black"],["id","container"],["id","header"],["href","/download/template/36","target","_blank"],["id","wrapper"],["id","content"],[1,"main-section"],[1,"card"],["href","//netdna.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css","rel","stylesheet","id","bootstrap-css"],[1,"container"],[1,"row"],[1,"carousel-reviews","broun-block"],["id","carousel-reviews","data-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"item","active"],[1,"col-md-4","col-sm-6"],[1,"block-text","rel","zmin"],["title","","href","#"],[1,"mark"],[1,"rating-input"],["data-value","0",1,"glyphicon","glyphicon-star"],["data-value","1",1,"glyphicon","glyphicon-star"],["data-value","2",1,"glyphicon","glyphicon-star"],["data-value","3",1,"glyphicon","glyphicon-star"],["data-value","4",1,"glyphicon","glyphicon-star-empty"],["data-value","5",1,"glyphicon","glyphicon-star-empty"],[1,"ab","zmin","sprite","sprite-i-triangle","block"],[1,"person-text","rel"],["src",""],[1,"col-md-4","col-sm-6","hidden-xs"],["data-value","2",1,"glyphicon","glyphicon-star-empty"],["data-value","3",1,"glyphicon","glyphicon-star-empty"],[1,"col-md-4","col-sm-6","hidden-sm","hidden-xs"],["data-value","4",1,"glyphicon","glyphicon-star"],["data-value","5",1,"glyphicon","glyphicon-star"],[1,"item"],["alt","","src","http://myinstantcms.ru/images/img13.png"],["alt","","src","http://myinstantcms.ru/images/img14.png"],["alt","","src","http://myinstantcms.ru/images/img15.png"],["href","#carousel-reviews","role","button","data-slide","prev",1,"left","carousel-control"],[1,"glyphicon","glyphicon-chevron-left"],["href","#carousel-reviews","role","button","data-slide","next",1,"right","carousel-control"],[1,"glyphicon","glyphicon-chevron-right"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"button",2)(3,"a",3),v._uU(4,"Goals"),v.qZA()()(),v.TgZ(5,"div",1)(6,"button",2)(7,"a",4),v._uU(8,"Check-In"),v.qZA()()(),v.TgZ(9,"div",1)(10,"button",2)(11,"a",5),v._uU(12,"Settings"),v.qZA()()()(),v.TgZ(13,"div",6)(14,"div",7)(15,"h1"),v._uU(16,"Welcome,"),v.qZA(),v._UZ(17,"a",8),v.qZA(),v.TgZ(18,"div",9)(19,"div",10)(20,"p")(21,"strong"),v._uU(22,"Weekly Newsletter"),v.qZA()(),v.TgZ(23,"h3"),v._uU(24,"The Ultimate Guide to Mindful Eating"),v.qZA(),v.TgZ(25,"p"),v._uU(26," Health Line has alot of helpful guides on learning more mindful eatings habits. Mindful eating habits a re essential for many benefits that could alter the way you think about food Today\u2019s fast-paced society tempts people with an abundance of food choices. On top of that, distractions have shifted attention away from the actual act of eating toward televisions, computers, and smartphones. Eating has become a mindless act, often done quickly. This can be problematic, since it takes your brain up to 20 minutes to realize you\u2019re full. If you eat too fast, the fullness signal may not arrive until you have already eaten too much. This is very common in binge eating. By eating mindfully, you restore your attention and slow down, making eating an intentional act instead of an automatic one. What\u2019s more, by increasing your recognition of physical hunger and fullness cues, you are able to distinguish between emotional and true, physical hunger (10Trusted Source). You also increase your awareness of triggers that make you want to eat, even though you\u2019re not necessarily hungry. By knowing your triggers, you can create a space between them and your response, giving you the time and freedom to choose how to react. "),v.qZA(),v.TgZ(27,"p"),v._uU(28," https://www.healthline.com/nutrition/mindful-eating-guide "),v.qZA(),v._UZ(29,"h4"),v.TgZ(30,"section",11),v._UZ(31,"div",12)(32,"div",12)(33,"div",12)(34,"div",12)(35,"div",12)(36,"div",12)(37,"div",12),v.qZA()()()(),v._UZ(38,"link",13),v.TgZ(39,"div",14)(40,"div",15)(41,"h2"),v._uU(42,"Meal Reviews"),v.qZA()()(),v.TgZ(43,"div",16)(44,"div",14)(45,"div",15)(46,"div",17)(47,"div",18)(48,"div",19)(49,"div",20)(50,"div",21)(51,"a",22),v._uU(52,"Avocado Lime Salad Wrap"),v.qZA(),v.TgZ(53,"div",23),v._uU(54," My rating: "),v.TgZ(55,"span",24),v._UZ(56,"span",25)(57,"span",26)(58,"span",27)(59,"span",28)(60,"span",29)(61,"span",30),v.qZA()(),v.TgZ(62,"p"),v._uU(63," This was probably the best meal ever in my opinion. I've been trying to slowly revert to an akaline vegan and this meal made me realize that there are alot of recipes you can make on a BUDGET and that taste good while still being healthy. "),v.qZA(),v._UZ(64,"ins",31),v.qZA(),v.TgZ(65,"div",32),v._UZ(66,"img",33),v.TgZ(67,"a",22),v._uU(68,"Makayla"),v.qZA(),v.TgZ(69,"i"),v._uU(70,"from Glasgow, Scotland"),v.qZA()()(),v.TgZ(71,"div",34)(72,"div",21)(73,"a",22),v._uU(74,"Texa-Mex Fajita Bowl"),v.qZA(),v.TgZ(75,"div",23),v._uU(76," My rating: "),v.TgZ(77,"span",24),v._UZ(78,"span",25)(79,"span",26)(80,"span",35)(81,"span",36)(82,"span",29)(83,"span",30),v.qZA()(),v.TgZ(84,"p"),v._uU(85," This was not the best thing from the website. I feel like there could of been a little bit more flavor and authencity. Would not recommend nor try again. Still love Nutrition Genius. "),v.qZA(),v._UZ(86,"ins",31),v.qZA(),v.TgZ(87,"div",32),v._UZ(88,"img",33),v.TgZ(89,"a",22),v._uU(90,"Steve"),v.qZA(),v.TgZ(91,"i"),v._uU(92,"United States"),v.qZA()()(),v.TgZ(93,"div",37)(94,"div",21)(95,"a",22),v._uU(96,"Vegan Taquitos"),v.qZA(),v.TgZ(97,"div",23),v._uU(98," My rating: "),v.TgZ(99,"span",24),v._UZ(100,"span",25)(101,"span",26)(102,"span",27)(103,"span",28)(104,"span",38)(105,"span",39),v.qZA()(),v.TgZ(106,"p"),v._uU(107," Nutrition Genius will always have a good place in my heart. They always know how to deliever the right recipes with all the nutritional values. I did not know what to expect, this is the fourth meal I have used for my household on here. It was a little complicated at first but it started to become easier as we were getting closer to the end of the meal. "),v.qZA(),v._UZ(108,"ins",31),v.qZA(),v.TgZ(109,"div",32),v._UZ(110,"img",33),v.TgZ(111,"a",22),v._uU(112,"Jacob"),v.qZA(),v.TgZ(113,"i"),v._uU(114,"Indonesia"),v.qZA()()()(),v.TgZ(115,"div",40)(116,"div",20)(117,"div",21)(118,"a",22),v._uU(119,"Hercules"),v.qZA(),v.TgZ(120,"div",23),v._uU(121," My rating: "),v.TgZ(122,"span",24),v._UZ(123,"span",25)(124,"span",26)(125,"span",27)(126,"span",28)(127,"span",29)(128,"span",30),v.qZA()(),v.TgZ(129,"p"),v._uU(130," Never before has there been a good film portrayal of ancient Greece's favourite myth. So why would Hollywood start now? This latest attempt at bringing the son of Zeus to the big screen is brought to us by X-Men: The last Stand director Brett Ratner. If the name of the director wasn't enough to dissuade ... "),v.qZA(),v._UZ(131,"ins",31),v.qZA(),v.TgZ(132,"div",32),v._UZ(133,"img",41),v.TgZ(134,"a",22),v._uU(135,"Anna"),v.qZA(),v.TgZ(136,"i"),v._uU(137,"from Glasgow, Scotland"),v.qZA()()(),v.TgZ(138,"div",34)(139,"div",21)(140,"a",22),v._uU(141,"The Purge: Anarchy"),v.qZA(),v.TgZ(142,"div",23),v._uU(143," My rating: "),v.TgZ(144,"span",24),v._UZ(145,"span",25)(146,"span",26)(147,"span",35)(148,"span",36)(149,"span",29)(150,"span",30),v.qZA()(),v.TgZ(151,"p"),v._uU(152,' The 2013 movie "The Purge" left a bad taste in all of our mouths as nothing more than a pseudo-slasher with a hamfisted plot, poor pacing, and a desperate attempt at "horror." Upon seeing the first trailer for "The Purge: Anarchy," my first and most immediate thought was "we really don\'t need another one of these." '),v.qZA(),v._UZ(153,"ins",31),v.qZA(),v.TgZ(154,"div",32),v._UZ(155,"img",42),v.TgZ(156,"a",22),v._uU(157,"Ella Mentree"),v.qZA(),v.TgZ(158,"i"),v._uU(159,"United States"),v.qZA()()(),v.TgZ(160,"div",37)(161,"div",21)(162,"a",22),v._uU(163,"Planes: Fire & Rescue"),v.qZA(),v.TgZ(164,"div",23),v._uU(165," My rating: "),v.TgZ(166,"span",24),v._UZ(167,"span",25)(168,"span",26)(169,"span",27)(170,"span",28)(171,"span",38)(172,"span",39),v.qZA()(),v.TgZ(173,"p"),v._uU(174," What a funny and entertaining film! I did not know what to expect, this is the fourth film in this vehicle's universe with the two Cars movies and then the first Planes movie. I was wondering if maybe Disney pushed it a little bit. However, Planes: Fire and Rescue is an entertaining film that is a fantastic sequel in this magical franchise. "),v.qZA(),v._UZ(175,"ins",31),v.qZA(),v.TgZ(176,"div",32),v._UZ(177,"img",43),v.TgZ(178,"a",22),v._uU(179,"Rannynm"),v.qZA(),v.TgZ(180,"i"),v._uU(181,"Indonesia"),v.qZA()()()(),v.TgZ(182,"div",40)(183,"div",20)(184,"div",21)(185,"a",22),v._uU(186,"Hercules"),v.qZA(),v.TgZ(187,"div",23),v._uU(188," My rating: "),v.TgZ(189,"span",24),v._UZ(190,"span",25)(191,"span",26)(192,"span",27)(193,"span",28)(194,"span",29)(195,"span",30),v.qZA()(),v.TgZ(196,"p"),v._uU(197," Never before has there been a good film portrayal of ancient Greece's favourite myth. So why would Hollywood start now? This latest attempt at bringing the son of Zeus to the big screen is brought to us by X-Men: The last Stand director Brett Ratner. If the name of the director wasn't enough to dissuade ... "),v.qZA(),v._UZ(198,"ins",31),v.qZA(),v.TgZ(199,"div",32),v._UZ(200,"img",41),v.TgZ(201,"a",22),v._uU(202,"Anna"),v.qZA(),v.TgZ(203,"i"),v._uU(204,"from Glasgow, Scotland"),v.qZA()()(),v.TgZ(205,"div",34)(206,"div",21)(207,"a",22),v._uU(208,"The Purge: Anarchy"),v.qZA(),v.TgZ(209,"div",23),v._uU(210," My rating: "),v.TgZ(211,"span",24),v._UZ(212,"span",25)(213,"span",26)(214,"span",35)(215,"span",36)(216,"span",29)(217,"span",30),v.qZA()(),v.TgZ(218,"p"),v._uU(219,' The 2013 movie "The Purge" left a bad taste in all of our mouths as nothing more than a pseudo-slasher with a hamfisted plot, poor pacing, and a desperate attempt at "horror." Upon seeing the first trailer for "The Purge: Anarchy," my first and most immediate thought was "we really don\'t need another one of these." '),v.qZA(),v._UZ(220,"ins",31),v.qZA(),v.TgZ(221,"div",32),v._UZ(222,"img",42),v.TgZ(223,"a",22),v._uU(224,"Ella Mentree"),v.qZA(),v.TgZ(225,"i"),v._uU(226,"United States"),v.qZA()()(),v.TgZ(227,"div",37)(228,"div",21)(229,"a",22),v._uU(230,"Planes: Fire & Rescue"),v.qZA(),v.TgZ(231,"div",23),v._uU(232," My rating: "),v.TgZ(233,"span",24),v._UZ(234,"span",25)(235,"span",26)(236,"span",27)(237,"span",28)(238,"span",38)(239,"span",39),v.qZA()(),v.TgZ(240,"p"),v._uU(241," What a funny and entertaining film! I did not know what to expect, this is the fourth film in this vehicle's universe with the two Cars movies and then the first Planes movie. I was wondering if maybe Disney pushed it a little bit. However, Planes: Fire and Rescue is an entertaining film that is a fantastic sequel in this magical franchise. "),v.qZA(),v._UZ(242,"ins",31),v.qZA(),v.TgZ(243,"div",32),v._UZ(244,"img",43),v.TgZ(245,"a",22),v._uU(246,"Rannynm"),v.qZA(),v.TgZ(247,"i"),v._uU(248,"Indonesia"),v.qZA()()()()(),v.TgZ(249,"a",44),v._UZ(250,"span",45),v.qZA(),v.TgZ(251,"a",46),v._UZ(252,"span",47),v.qZA()()()()())},dependencies:[Vh],styles:["p[_ngcontent-%COMP%]{font-size:15px}body[_ngcontent-%COMP%]{margin:40px;font:80% Arial,Helvetica,sans-serif}.wrapper[_ngcontent-%COMP%]{display:grid;background:no-repeat url(https://s3-us-west-2.amazonaws.com/s.cdpn.io/12005/grid.png);grid-gap:10px;grid-template-columns:repeat(6,150px);grid-template-rows:repeat(4,150px);background-color:#fff;color:#444}.box[_ngcontent-%COMP%]{border:1px solid #444;padding:20px;font-size:150%}.a[_ngcontent-%COMP%]{grid-column:1 / 3;grid-row:1 / 3;align-self:stretch}.b[_ngcontent-%COMP%]{grid-column:3 / 5;grid-row:1 / 3;align-self:end}.c[_ngcontent-%COMP%]{grid-column:1 / 3;grid-row:3 / 6;align-self:start}.d[_ngcontent-%COMP%]{grid-column:3 / 5;grid-row:3 / 6;align-self:center}.e[_ngcontent-%COMP%]{grid-column:5 / 7;grid-row:1 / 6;align-self:stretch}body[_ngcontent-%COMP%]{background-color:#1e0f21;margin:0;padding:0}#client-testimonial-carousel[_ngcontent-%COMP%]{min-height:200px}.MuiGrid-root[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;word-break:break-all;color:#fff;text-align:left;position:relative;width:940px;margin:0 auto;padding-left:35px}.btn[_ngcontent-%COMP%]{background-color:#fcfcfba4;width:100px;height:50px}.carousel-control.left[_ngcontent-%COMP%], .carousel-control.right[_ngcontent-%COMP%]{background:none;width:25px}.carousel-control.left[_ngcontent-%COMP%]{left:-25px}.carousel-control.right[_ngcontent-%COMP%]{right:-25px}.broun-block[_ngcontent-%COMP%]{background:url(http://myinstantcms.ru/images/bg-broun1.jpg) repeat scroll center top rgba(0,0,0,0);padding-bottom:0}.block-text[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;box-shadow:0 3px #2c2222;color:#626262;font-size:14px;margin-top:27px;padding:15px 18px}.block-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#7d4702;font-size:25px;font-weight:700;line-height:21px;text-decoration:none;text-shadow:0 1px 2px rgba(0,0,0,.3)}.mark[_ngcontent-%COMP%]{padding:12px 0;background:none}.block-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#585858;font-family:Georgia;font-style:italic;line-height:20px}.sprite-i-triangle[_ngcontent-%COMP%]{background-position:0 -1298px;height:44px;width:50px}.block-text[_ngcontent-%COMP%]   ins[_ngcontent-%COMP%]{bottom:-44px;left:50%;margin-left:-60px}.block[_ngcontent-%COMP%]{display:block}.zmin[_ngcontent-%COMP%]{z-index:1}.ab[_ngcontent-%COMP%]{position:absolute}.person-text[_ngcontent-%COMP%]{padding:10px 0 0;text-align:center;z-index:2}.person-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fc0;display:block;font-size:14px;margin-top:3px;text-decoration:underline}.person-text[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff;font-family:Georgia;font-size:13px}.rel[_ngcontent-%COMP%]{position:relative}h1[_ngcontent-%COMP%]{font-size:40px;font-weight:500}"]}),r})();class fIe extends DM{constructor(){super(...arguments),this.listSource="meals"}}let gIe=(()=>{class r extends v2{constructor(e){super(e,new fIe)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(XT))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const mIe=["alertDialog"],vIe=["grid"],yIe=[{path:"",component:Rj},{path:"Profile",component:_P},{path:"About",component:MP},{path:"Recipes",component:aIe},{path:"Ingredients",component:cIe},{path:"SignUpPage",component:(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authService.signup(e.value.email,e.value.password),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(PA))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-sign-up-page"]],decls:32,vars:1,consts:[[1,"container"],[1,"card","text-center",2,"width","50rem"],[1,"card-title"],[1,"card-text1"],[1,"card-text2"],[1,"row"],[1,"col-12"],[3,"ngSubmit"],["authForm","ngForm"],[1,"col","mb-3"],[1,"input-group-text"],["type","text","placeholder","First name",1,"form-control"],[1,"col"],["type","text","placeholder","Last name","aria-label","Last name",1,"form-control"],[1,"input-group","mb-3"],["type","text","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["id","basic-addon1",1,"input-group-text"],["type","password","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],[1,"d-grid","gap-2","col-2","mx-auto"],["routerLink","Main","type","submit",1,"btn","btn-dark",3,"disabled","click"]],template:function(e,i){if(1&e){const n=v.EpF();v.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),v._uU(3,"Welcome To Nutrition Genius"),v.qZA(),v.TgZ(4,"p",3),v._uU(5,"We are so excited for you to start your journey."),v.qZA(),v.TgZ(6,"p",4),v._uU(7,"Enter the following information to get started today!"),v.qZA(),v.TgZ(8,"div",5)(9,"div",6)(10,"form",7,8),v.NdJ("ngSubmit",function(){v.CHM(n);const o=v.MAs(11);return v.KtG(i.onSubmit(o))}),v.TgZ(12,"div",5)(13,"div",9)(14,"span",10),v._uU(15,"First Name:"),v.qZA(),v._UZ(16,"input",11),v.qZA(),v.TgZ(17,"div",12)(18,"span",10),v._uU(19,"Last Name:"),v.qZA(),v._UZ(20,"input",13),v.qZA()(),v.TgZ(21,"div",14)(22,"span",10),v._uU(23,"Email:"),v.qZA(),v._UZ(24,"input",15),v.qZA(),v.TgZ(25,"div",14)(26,"span",16),v._uU(27,"Password:"),v.qZA(),v._UZ(28,"input",17),v.qZA(),v.TgZ(29,"div",18)(30,"button",19),v.NdJ("click",function(){return i.buttonClicked="SignUp"}),v._uU(31," Get Started "),v.qZA()()()()()()()}if(2&e){const n=v.MAs(11);v.xp6(30),v.Q6J("disabled",!n.valid)}},dependencies:[gp,TC,wf,ap],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:row;margin:50px}"]}),r})()},{path:"Contact",component:dIe},{path:"Main",component:pIe},{path:"Meals",component:(()=>{class r{constructor(e){this.mealService=e,this.alertDlgBtnClick=()=>{this.alertDialog.hide()},this.alertDlgButtons=[{click:this.alertDlgBtnClick.bind(this),buttonModel:{content:"OK",isPrimary:!0}}],this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.meal=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.mealService.execute(this.state)}dataStateChange(e){this.mealService.execute(e)}dataSourceChanged(e){"add"===e.action?this.mealService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.mealService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.mealService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}dataBound(){this.refresh&&(this.grid.groupColumn("Country"),this.refresh=!1)}load(){this.refresh=this.grid.refreshing}created(){this.grid.on("columnDragStart",this.columnDragStart,this)}columnDragStart(e){"Mainfieldsofinvention"===e.column.field&&this.alertDialog.show()}}return r.\u0275fac=function(e){return new(e||r)(v.Y36(gIe))},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-meals"]],viewQuery:function(e,i){if(1&e&&(v.Gf(mIe,5),v.Gf(vIe,5)),2&e){let n;v.iGM(n=v.CRH())&&(i.alertDialog=n.first),v.iGM(n=v.CRH())&&(i.grid=n.first)}},features:[v._Bn([EV,xV])],decls:11,vars:8,consts:[[1,"control-section"],["id","dropdown","enabled","{meals.column.allowFiltering}","allowPaging","true","allowSorting","true","height","320",3,"dataSource","allowFiltering","allowGrouping","pageSettings","editSettings","toolbar","dataSourceChanged","dataStateChange","dataBound","created","load"],["field","recipe"],["field","meal_time"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"],["field","dietary notes"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"ejs-grid",1),v.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)})("dataBound",function(){return i.dataBound()})("created",function(){return i.created()})("load",function(){return i.load()}),v.ALo(2,"async"),v.TgZ(3,"e-columns"),v._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7)(10,"e-column",8),v.qZA()()()),2&e&&(v.xp6(1),v.Q6J("dataSource",v.lcZ(2,6,i.meal))("allowFiltering",!0)("allowGrouping",!0)("pageSettings",i.pageSettings)("editSettings",i.editSettings)("toolbar",i.toolbar))},dependencies:[SV,q_,U_,W_,G_,nf]}),r})()},{path:"RecipeIngredient",component:Tne},{path:"Check",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-check-in"]],decls:66,vars:0,consts:[["id","main",1,"check-in-table"],[1,"main-title"],["id","checkIn","action","/measurements/save","accept-charset","UTF-8","method","post",1,"form"],["name","utf8","type","hidden","value","\u2713"],["type","hidden","name","authenticity_token","value","tA5EHip6ODGBjP7VerNF9hcK84trR8j4scDobGDKTcvOTXJA79hASEkcIzDIFdHDB0JvjdEC3kWYYxeEJna2Rw=="],[1,"cont-2"],[1,"unit-form-field","standard"],[1,""],["type","text","name","weight[display_value]","id","weight_display_value","data-unit-system","lbs",1,"text","short"],["for","weight_display_value",1,"weight_label","unit_label"],["summary","check-in",1,"table0",2,"display","table"],[1,"col-1"],[1,"col-2"],[1,"col-3","col-num"],[1,"col-num"],["colspan","3",1,"first"],["href","/measurements/change",1,"link"],["href","/measurements/edit",1,"link"],[1,"first"],["type","hidden","name","measurement_type[0]","id","measurement_type[0]","value","117890068"],["type","text","name","measurement_value[0]","id","measurement_value[0]","value","","autocomplete","off",1,"text","short"],["type","hidden","name","measurement_type[1]","id","measurement_type[1]","value","117890069"],["type","text","name","measurement_value[1]","id","measurement_value[1]","value","","autocomplete","off",1,"text","short"],["type","hidden","name","measurement_type[2]","id","measurement_type[2]","value","117890070"],["type","text","name","measurement_value[2]","id","measurement_value[2]","value","","autocomplete","off",1,"text","short"],[1,"cont-1"],["type","submit","value","Save Changes",1,"button"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"h1",1),v._uU(2,"Check-In"),v.qZA(),v.TgZ(3,"form",2),v._UZ(4,"input",3)(5,"input",4),v.TgZ(6,"p",5)(7,"label"),v._uU(8,"Enter today's weight:"),v.qZA(),v.TgZ(9,"span",6)(10,"span",7),v._UZ(11,"input",8),v.qZA(),v.TgZ(12,"label",9),v._uU(13,"lbs"),v.qZA()(),v._UZ(14,"br"),v.TgZ(15,"span"),v._uU(16," Last recorded weight: 156 lbs on 6/02/2021 "),v.qZA()(),v.TgZ(17,"table",10)(18,"colgroup"),v._UZ(19,"col",11)(20,"col",12)(21,"col",13),v.qZA(),v.TgZ(22,"thead")(23,"tr")(24,"td"),v._uU(25,"Other Measurements"),v.qZA(),v.TgZ(26,"td",14),v._uU(27,"Last Entry"),v.qZA(),v.TgZ(28,"td",14),v._uU(29,"Today's Entry"),v.qZA()()(),v.TgZ(30,"tfoot")(31,"tr")(32,"td",15)(33,"a",16),v._uU(34,"Track Additional Measurements"),v.qZA(),v.TgZ(35,"span"),v._uU(36,"|"),v.qZA(),v.TgZ(37,"a",17),v._uU(38,"Edit Previous Entries"),v.qZA()()()(),v.TgZ(39,"tbody")(40,"tr")(41,"td",18),v._uU(42,"Neck"),v.qZA(),v.TgZ(43,"td",14),v._uU(44," None "),v.qZA(),v.TgZ(45,"td"),v._UZ(46,"input",19)(47,"input",20),v.qZA()(),v.TgZ(48,"tr")(49,"td",18),v._uU(50,"Waist"),v.qZA(),v.TgZ(51,"td",14),v._uU(52," None "),v.qZA(),v.TgZ(53,"td"),v._UZ(54,"input",21)(55,"input",22),v.qZA()(),v.TgZ(56,"tr")(57,"td",18),v._uU(58,"Hips"),v.qZA(),v.TgZ(59,"td",14),v._uU(60," None "),v.qZA(),v.TgZ(61,"td"),v._UZ(62,"input",23)(63,"input",24),v.qZA()()()(),v.TgZ(64,"p",25),v._UZ(65,"input",26),v.qZA()()())},dependencies:[TC,wf,ap]}),r})()},{path:"Goals",component:(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-goals"]],decls:82,vars:0,consts:[[1,"MuiContainer-root","MuiContainer-maxWidthMd","css-1bjb2xy"],[1,"MuiBox-root","css-quz528"],[1,"MuiBox-root","css-1eawnaf"],[1,"MuiBox-root","css-16c5cub"],[1,"MuiTypography-root","MuiTypography-inherit","css-180eao6"],[1,"MuiBox-root","css-5fjj1s"],[1,"MuiTypography-root","MuiTypography-body1","css-195sgc8"],["min","0",1,"MuiFormControl-root","MuiTextField-root","css-16u95ua"],[1,"MuiInputBase-root","MuiOutlinedInput-root","MuiInputBase-colorPrimary","MuiInputBase-formControl","MuiInputBase-sizeSmall","css-joe2cc"],["aria-invalid","false","type","number","value","1380","id","mui-3",1,"MuiInputBase-input","MuiOutlinedInput-input","MuiInputBase-inputSizeSmall","css-1o6z5ng"],["aria-hidden","true",1,"MuiOutlinedInput-notchedOutline","css-igs3ac"],[1,"css-ihdtdm"],[1,"notranslate"],[1,"MuiBox-root","css-1ymn2kw"],[1,"MuiBox-root","css-k008qs"],[1,"MuiTypography-root","MuiTypography-body1","css-159i7f8"],[1,"MuiFormControl-root","css-xsf4qb"],[1,"MuiInputBase-root","MuiOutlinedInput-root","MuiInputBase-colorPrimary","MuiInputBase-formControl","css-1fo2ctb"],["tabindex","0","role","button","aria-expanded","false","aria-haspopup","listbox",1,"MuiSelect-select","MuiSelect-outlined","MuiInputBase-input","MuiOutlinedInput-input","css-qiwgdb"],["aria-hidden","true","tabindex","-1","value","50",1,"MuiSelect-nativeInput","css-1k3x8v3"],["focusable","false","aria-hidden","true","viewBox","0 0 24 24","data-testid","ArrowDropDownIcon",1,"MuiSvgIcon-root","MuiSvgIcon-fontSizeMedium","MuiSelect-icon","MuiSelect-iconOutlined","css-1636szt"],["d","M7 10l5 5 5-5z"],["aria-hidden","true","tabindex","-1","value","30",1,"MuiSelect-nativeInput","css-1k3x8v3"],["aria-hidden","true","tabindex","-1","value","20",1,"MuiSelect-nativeInput","css-1k3x8v3"],[1,"MuiBox-root","css-0"],[1,"MuiTypography-root","MuiTypography-body1","css-19u9c5d"],[1,"MuiTypography-root","MuiTypography-body1","css-pors75"],[1,"MuiTypography-root","MuiTypography-body1","css-1jxk4hs"],[1,"MuiBox-root","css-hndopl"],["routerLink","../Main","tabindex","0","href","/account/my-goals",1,"MuiButtonBase-root","MuiButton-root","MuiButton-contained","MuiButton-containedPrimary","MuiButton-sizeMedium","MuiButton-containedSizeMedium","MuiButton-root","MuiButton-contained","MuiButton-containedPrimary","MuiButton-sizeMedium","MuiButton-containedSizeMedium","css-wzravi"],[1,"MuiTypography-root","MuiTypography-caption","css-ccfki1"],["tabindex","-1","type","button","disabled","",1,"MuiButtonBase-root","MuiButton-root","MuiButton-contained","MuiButton-containedPrimary","MuiButton-sizeMedium","MuiButton-containedSizeMedium","Mui-disabled","MuiButton-root","MuiButton-contained","MuiButton-containedPrimary","MuiButton-sizeMedium","MuiButton-containedSizeMedium","css-1pro5sc"]],template:function(e,i){1&e&&(v.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),v._uU(5," Daily Nutrition Goals "),v.qZA(),v.TgZ(6,"div",5)(7,"p",6),v._uU(8," Calories "),v.qZA(),v.TgZ(9,"div",7)(10,"div",8),v._UZ(11,"input",9),v.TgZ(12,"fieldset",10)(13,"legend",11)(14,"span",12),v._uU(15,"\u200b"),v.qZA()()()()()(),v.TgZ(16,"div",13)(17,"div",14)(18,"p",15),v._uU(19," Carbohydrates "),v.qZA(),v.TgZ(20,"p",6),v._uU(21," 172 g "),v.qZA()(),v.TgZ(22,"div",16)(23,"div",17)(24,"div",18),v._uU(25," 50% "),v.qZA(),v._UZ(26,"input",19),v.O4$(),v.TgZ(27,"svg",20),v._UZ(28,"path",21),v.qZA(),v.kcU(),v.TgZ(29,"fieldset",10)(30,"legend",11)(31,"span",12),v._uU(32,"\u200b"),v.qZA()()()()()(),v.TgZ(33,"div",13)(34,"div",14)(35,"p",15),v._uU(36,"Fat"),v.qZA(),v.TgZ(37,"p",6),v._uU(38,"46 g"),v.qZA()(),v.TgZ(39,"div",16)(40,"div",17)(41,"div",18),v._uU(42," 30% "),v.qZA(),v._UZ(43,"input",22),v.O4$(),v.TgZ(44,"svg",20),v._UZ(45,"path",21),v.qZA(),v.kcU(),v.TgZ(46,"fieldset",10)(47,"legend",11)(48,"span",12),v._uU(49,"\u200b"),v.qZA()()()()()(),v.TgZ(50,"div",13)(51,"div",14)(52,"p",15),v._uU(53," Protein "),v.qZA(),v.TgZ(54,"p",6),v._uU(55,"69 g"),v.qZA()(),v.TgZ(56,"div",16)(57,"div",17)(58,"div",18),v._uU(59," 20% "),v.qZA(),v._UZ(60,"input",23),v.O4$(),v.TgZ(61,"svg",20),v._UZ(62,"path",21),v.qZA(),v.kcU(),v.TgZ(63,"fieldset",10)(64,"legend",11)(65,"span",12),v._uU(66,"\u200b"),v.qZA()()()()()(),v.TgZ(67,"div",5)(68,"div",24)(69,"p",25),v._uU(70," % Total "),v.qZA(),v.TgZ(71,"p",26),v._uU(72," Macronutrients must equal 100% "),v.qZA()(),v.TgZ(73,"p",27),v._uU(74,"100 %"),v.qZA()()(),v.TgZ(75,"div",28)(76,"a",29)(77,"span",30),v._uU(78,"Back to Profile"),v.qZA()(),v.TgZ(79,"button",31)(80,"span",30),v._uU(81,"Save Changes"),v.qZA()()()()()())},dependencies:[Vh],styles:["div[_ngcontent-%COMP%]{display:block}body[_ngcontent-%COMP%]{margin:0;color:#000000de;font-size:1rem;font-weight:400;line-height:1.5;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;background-color:#fff}html[_ngcontent-%COMP%]{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%}.css-16c5cub[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:100%;max-width:430px}.css-5fjj1s[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f6f6f6;border:1px solid rgb(230,230,230);max-width:430px;width:100%;height:50px;padding-left:12px;padding-right:12px}@media (min-width: 0px){.css-1bjb2xy[_ngcontent-%COMP%]{margin:40px auto}}@media (min-width: 576px){.css-1bjb2xy[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}}@media (min-width: 576px){.css-1bjb2xy[_ngcontent-%COMP%]{padding-left:12px;padding-right:12px}}.css-1bjb2xy[_ngcontent-%COMP%]{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;display:block;padding-left:16px;padding-right:16px}.css-qiwgdb.css-qiwgdb.css-qiwgdb[_ngcontent-%COMP%]{padding-right:32px}.css-qiwgdb.MuiSelect-select[_ngcontent-%COMP%]{height:auto;min-height:1.4375em;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.css-qiwgdb[_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;-webkit-user-select:none;user-select:none;border-radius:4px;cursor:pointer;font:inherit;letter-spacing:inherit;color:currentcolor;border:0px;box-sizing:content-box;background:none;height:1.4375em;margin:0;-webkit-tap-highlight-color:transparent;display:block;min-width:0px;width:100%;animation-name:mui-auto-fill-cancel;animation-duration:10ms;padding:16.5px 14px}.css-k008qs[_ngcontent-%COMP%]{display:flex}.css-1ymn2kw[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f6f6f6;border:1px px solid rgb(230,230,230);width:100%;max-width:430px;height:50px;padding-left:12px;padding-right:12px}.css-159i7f8[_ngcontent-%COMP%]{margin:0;font-weight:400;line-height:1.5;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;font-size:13px;padding-right:4px}.css-195sgc8[_ngcontent-%COMP%]{margin:0;font-weight:400;line-height:1.5;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;font-size:13px}.css-1o6z5ng[_ngcontent-%COMP%]{font:inherit;letter-spacing:inherit;color:currentcolor;border:0px;box-sizing:content-box;background:none;height:1.4375em;margin:0;-webkit-tap-highlight-color:transparent;display:block;min-width:0px;width:100%;animation-name:mui-auto-fill-cancel;animation-duration:10ms;padding:8.5px 14px}.css-16u95ua[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff;padding-top:8px;padding-bottom:8px;color:#000000de;font-size:13px;height:40px}fieldset[_ngcontent-%COMP%]{display:block;margin-inline-start:2px;margin-inline-end:2px;padding-block-start:.35em;padding-inline-start:.75em;padding-inline-end:.75em;padding-block-end:.625em;min-inline-size:min-content;border-width:2px;border-style:groove;border-color:silver;border-image:initial}.css-igs3ac[_ngcontent-%COMP%]{text-align:left;position:absolute;inset:-5px 0 0;margin:0;padding:0 8px;pointer-events:none;border-radius:inherit;border-style:solid;border-width:1px;overflow:hidden;min-width:0%;border-color:#0000003b}element.style[_ngcontent-%COMP%]{opacity:1;transform:none;min-width:80px;transition:opacity 405ms cubic-bezier(.4,0,.2,1) 0ms,transform .27s cubic-bezier(.4,0,.2,1) 0ms;top:16px;left:434px;transform-origin:40px 434.922px}.css-dab7h5[_ngcontent-%COMP%]{background-color:#fff;color:#000000de;transition:box-shadow .3s cubic-bezier(.4,0,.2,1) 0ms;border-radius:4px;box-shadow:#0003 0 5px 5px -3px,#00000024 0 8px 10px 1px,#0000001f 0 3px 14px 2px;position:absolute;overflow:hidden auto;min-width:16px;min-height:16px;max-width:calc(100% - 32px);max-height:calc(100% - 32px);outline:0px}.css-19u9c5d[_ngcontent-%COMP%]{margin:0;line-height:1.5;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;font-size:13px;font-weight:700}.css-1636szt[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;fill:currentcolor;flex-shrink:0;transition:fill .2s cubic-bezier(.4,0,.2,1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - .5em);pointer-events:none;color:#0000008a}*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:inherit}user[_ngcontent-%COMP%]   agent[_ngcontent-%COMP%]   stylesheet[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:not(:root){overflow-clip-margin:content-box;overflow:hidden}.css-xsf4qb[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff;color:#000000de;font-size:13px;height:40px;padding-top:8px;padding-bottom:8px}.css-1fo2ctb[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;line-height:1.4375em;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;color:#000000de;box-sizing:border-box;cursor:text;display:inline-flex;align-items:center;position:relative;border-radius:4px}.css-13uae0u[_ngcontent-%COMP%]{margin:0;line-height:1.5;font-family:Inter,Helvetica,Arial,-apple-system,sans-serif;color:red;font-size:18px;font-weight:700}.css-1k3x8v3[_ngcontent-%COMP%]{bottom:0;left:0;position:absolute;opacity:0;pointer-events:none;width:100%;box-sizing:border-box}element.style[_ngcontent-%COMP%]{padding-right:0;width:calc(100% + 0px)}.css-r8u8y9[_ngcontent-%COMP%]{list-style:none;margin:0;padding:8px 0;position:relative;outline:0px}"]}),r})()}];let bIe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[_A.forRoot(yIe),_A]}),r})(),CIe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-nav-bar"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","aliceblue"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","\\assets\\images\\NutritionGeniusLogo.png","width","100","height","100","alt","Nutrition Genius"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","","href","#",1,"nav-item","nav-link","active"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],["routerLink","Recipes","href","#",1,"nav-item","nav-link","active"],["routerLink","Ingredients","href","#",1,"nav-item","nav-link","active"],["routerLink","Meals","href","#",1,"nav-item","nav-link","active"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","active"],[1,"dropdown-menu"],["routerLink","About","href","#",1,"dropdown-item"],["routerLink","Contact","href","#",1,"dropdown-item"],[1,"navbar-nav","ms-auto"],["type","button",1,"btn","me-3"],["routerLink","SignUpPage","href","#",1,"nav-item","nav-link","active"]],template:function(e,i){1&e&&(v.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),v._UZ(3,"img",3),v.qZA(),v.TgZ(4,"button",4),v._UZ(5,"span",5),v.qZA(),v.TgZ(6,"div",6)(7,"div",7)(8,"a",8),v._uU(9,"Home"),v.qZA(),v.TgZ(10,"a",9),v._uU(11,"Profile"),v.qZA(),v.TgZ(12,"a",10),v._uU(13,"Recipes"),v.qZA(),v.TgZ(14,"a",11),v._uU(15,"Ingredients"),v.qZA(),v.TgZ(16,"a",12),v._uU(17,"Meals"),v.qZA(),v.TgZ(18,"div",13)(19,"a",14),v._uU(20,"About"),v.qZA(),v.TgZ(21,"div",15)(22,"a",16),v._uU(23,"About Us"),v.qZA(),v.TgZ(24,"a",17),v._uU(25,"Contact"),v.qZA()()()(),v.TgZ(26,"div",18)(27,"button",19)(28,"a",9),v._uU(29,"Login"),v.qZA()(),v.TgZ(30,"button",19)(31,"a",20),v._uU(32,"Sign up"),v.qZA()()()()()())},dependencies:[Vh],styles:[".btn[_ngcontent-%COMP%]{background-color:#556b2fa4;width:100px;height:50px}img[_ngcontent-%COMP%]{border-radius:50%}"]}),r})(),wIe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-footer"]],decls:7,vars:0,consts:[[1,""],[1,"text-center","text-black",2,"background-color","aliceblue"],[1,"container","p-4","pb-0"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"],["href","https://mdbootstrap.com/",1,"text-white"]],template:function(e,i){1&e&&(v.TgZ(0,"section",0)(1,"footer",1),v._UZ(2,"div",2),v.TgZ(3,"div",3),v._uU(4," \xa9 2022 Copyright: "),v.TgZ(5,"a",4),v._uU(6,"Nutritiongenius.com"),v.qZA()()()())},styles:["footer[_ngcontent-%COMP%]{position:relative}"]}),r})(),SIe=(()=>{class r{constructor(){this.title="nutrition-genius"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v.Xpm({type:r,selectors:[["app-root"]],decls:5,vars:0,template:function(e,i){1&e&&(v.TgZ(0,"app-nav-bar"),v._uU(1,"Loading..."),v.qZA(),v._UZ(2,"router-outlet"),v.TgZ(3,"app-footer"),v._uU(4,"Loading..."),v.qZA())},dependencies:[TE,CIe,wIe]}),r})();const Ine="firebasestorage.googleapis.com",Ane="storageBucket";class ua extends ne.ZR{constructor(t,e,i=0){super(v4(t),`Firebase Storage: ${e} (${v4(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ua.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return v4(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function v4(r){return"storage/"+r}function y4(){return new ua("unknown","An unknown error occurred, please check the error payload for server response.")}function kne(){return new ua("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Rne(){return new ua("canceled","User canceled the upload/download.")}function _ne(){return new ua("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function JT(r){return new ua("invalid-argument",r)}function Mne(){return new ua("app-deleted","The Firebase app was deleted.")}function One(r){return new ua("invalid-root-operation","The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function IM(r,t){return new ua("invalid-format","String does not match format '"+r+"': "+t)}function AM(r){throw new ua("internal-error","Internal error: "+r)}class xh{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=xh.makeFromUrl(t,e)}catch{return new xh(t,"")}if(""===i.path)return i;throw function OIe(r){return new ua("invalid-default-bucket","Invalid default bucket '"+r+"'.")}(t)}static makeFromUrl(t,e){let i=null;const n="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+n+"(/(.*))?$","i");function h(N){N.path_=decodeURIComponent(N.path)}const p=e.replace(/[.]/g,"\\."),O=[{regex:a,indices:{bucket:1,path:3},postModify:function s(N){"/"===N.path.charAt(N.path.length-1)&&(N.path_=N.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${p}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${e===Ine?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let N=0;N<O.length;N++){const z=O[N],U=z.regex.exec(t);if(U){let me=U[z.indices.path];me||(me=""),i=new xh(U[z.indices.bucket],me),z.postModify(i);break}}if(null==i)throw function MIe(r){return new ua("invalid-url","Invalid URL '"+r+"'.")}(t);return i}}class BIe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function y2(r){return"string"==typeof r||r instanceof String}function Pne(r){return b4()&&r instanceof Blob}function b4(){return typeof Blob<"u"&&!(0,ne.UG)()}function C4(r,t,e,i){if(i<t)throw JT(`Invalid value for '${r}'. Expected ${t} or greater.`);if(i>e)throw JT(`Invalid value for '${r}'. Expected ${e} or less.`)}function Jm(r,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${r}`}function Lne(r){const t=encodeURIComponent;let e="?";for(const i in r)r.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(r[i])+"&");return e=e.slice(0,-1),e}var Ab=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(Ab||(Ab={})),Ab))();function Fne(r,t){const e=r>=500&&r<600,n=-1!==[408,429].indexOf(r),s=-1!==t.indexOf(r);return e||n||s}class UIe{constructor(t,e,i,n,s,o,a,l,h,u,p,m=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,C)=>{this.resolve_=y,this.reject_=C,this.start_()})}start_(){const e=(i,n)=>{const s=this.resolve_,o=this.reject_,a=n.connection;if(n.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function zIe(r){return void 0!==r}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=y4();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(n.canceled?this.appDelete_?Mne():Rne():kne())};this.canceled_?e(0,new b2(!1,null,!0)):this.backoffId_=function VIe(r,t,e){let i=1,n=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function u(...T){h||(h=!0,t.apply(null,T))}function p(T){n=setTimeout(()=>{n=null,r(y,l())},T)}function m(){s&&clearTimeout(s)}function y(T,...R){if(h)return void m();if(T)return m(),void u.call(null,T,...R);if(l()||o)return m(),void u.call(null,T,...R);let O;i<64&&(i*=2),1===a?(a=2,O=0):O=1e3*(i+Math.random()),p(O)}let C=!1;function S(T){C||(C=!0,m(),!h&&(null!==n?(T||(a=2),clearTimeout(n),p(0)):T||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,S(!0)},e),S}((i,n)=>{if(n)return void i(!1,new b2(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ab.NO_ERROR,l=s.getStatus();if((!a||Fne(l,this.additionalRetryCodes_))&&this.retry){const u=s.getErrorCode()===Ab.ABORT;return void i(!1,new b2(!1,null,u))}const h=-1!==this.successCodes_.indexOf(l);i(!0,new b2(h,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function HIe(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class b2{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function QIe(...r){const t=function ZIe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<r.length;i++)e.append(r[i]);return e.getBlob()}if(b4())return new Blob(r);throw new ua("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Nc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w4{constructor(t,e){this.data=t,this.contentType=e||null}}function S4(r,t){switch(r){case Nc.RAW:return new w4(Nne(t));case Nc.BASE64:case Nc.BASE64URL:return new w4(Bne(r,t));case Nc.DATA_URL:return new w4(function tAe(r){const t=new Vne(r);return t.base64?Bne(Nc.BASE64,t.rest):function eAe(r){let t;try{t=decodeURIComponent(r)}catch{throw IM(Nc.DATA_URL,"Malformed data URL.")}return Nne(t)}(t.rest)}(t),function iAe(r){return new Vne(r).contentType}(t))}throw y4()}function Nne(r){const t=[];for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<r.length-1&&56320==(64512&r.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&r.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Bne(r,t){switch(r){case Nc.BASE64:{const n=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(n||s)throw IM(r,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case Nc.BASE64URL:{const n=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(n||s)throw IM(r,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function JIe(r){if(typeof atob>"u")throw function NIe(r){return new ua("unsupported-environment",`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(t)}catch(n){throw n.message.includes("polyfill")?n:IM(r,"Invalid character found")}const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}class Vne{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw IM(Nc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function nAe(r,t){return r.length>=t.length&&r.substring(r.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class rg{constructor(t,e){let i=0,n="";Pne(t)?(this.data_=t,i=t.size,n=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,e){if(Pne(this.data_)){const n=function XIe(r,t,e){return r.webkitSlice?r.webkitSlice(t,e):r.mozSlice?r.mozSlice(t,e):r.slice?r.slice(t,e):null}(this.data_,t,e);return null===n?null:new rg(n)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new rg(i,!0)}}static getBlob(...t){if(b4()){const e=t.map(i=>i instanceof rg?i.data_:i);return new rg(QIe.apply(null,e))}{const e=t.map(o=>y2(o)?S4(Nc.RAW,o).data:o.data_);let i=0;e.forEach(o=>{i+=o.byteLength});const n=new Uint8Array(i);let s=0;return e.forEach(o=>{for(let a=0;a<o.length;a++)n[s++]=o[a]}),new rg(n,!0)}}uploadData(){return this.data_}}function E4(r){let t;try{t=JSON.parse(r)}catch{return null}return function qIe(r){return"object"==typeof r&&!Array.isArray(r)}(t)?t:null}function Hne(r){const t=r.lastIndexOf("/",r.length-2);return-1===t?r:r.slice(t+1)}function oAe(r,t){return t}class su{constructor(t,e,i,n){this.server=t,this.local=e||t,this.writable=!!i,this.xform=n||oAe}}let C2=null;function kM(){if(C2)return C2;const r=[];r.push(new su("bucket")),r.push(new su("generation")),r.push(new su("metageneration")),r.push(new su("name","fullPath",!0));const e=new su("name");e.xform=function t(s,o){return function aAe(r){return!y2(r)||r.length<2?r:Hne(r)}(o)},r.push(e);const n=new su("size");return n.xform=function i(s,o){return void 0!==o?Number(o):o},r.push(n),r.push(new su("timeCreated")),r.push(new su("updated")),r.push(new su("md5Hash",null,!0)),r.push(new su("cacheControl",null,!0)),r.push(new su("contentDisposition",null,!0)),r.push(new su("contentEncoding",null,!0)),r.push(new su("contentLanguage",null,!0)),r.push(new su("contentType",null,!0)),r.push(new su("metadata","customMetadata",!0)),C2=r,C2}function zne(r,t,e){const i=E4(t);return null===i?null:function hAe(r,t,e){const i={type:"file"},n=e.length;for(let s=0;s<n;s++){const o=e[s];i[o.local]=o.xform(i,t[o.server])}return function lAe(r,t){Object.defineProperty(r,"ref",{get:function e(){const s=new xh(r.bucket,r.fullPath);return t._makeStorageReference(s)}})}(i,r),i}(r,i,e)}function x4(r,t){const e={},i=t.length;for(let n=0;n<i;n++){const s=t[n];s.writable&&(e[s.server]=r[s.local])}return JSON.stringify(e)}class sg{constructor(t,e,i,n){this.url=t,this.method=e,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function og(r){if(!r)throw y4()}function w2(r,t){return function e(i,n){const s=zne(r,n,t);return og(null!==s),s}}function eD(r){return function t(e,i){let n;return n=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function RIe(){return new ua("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function kIe(){return new ua("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function AIe(r){return new ua("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===e.getStatus()?function _Ie(r){return new ua("unauthorized","User does not have permission to access '"+r+"'.")}(r.path):i,n.status=e.getStatus(),n.serverResponse=i.serverResponse,n}}function RM(r){const t=eD(r);return function e(i,n){let s=t(i,n);return 404===i.getStatus()&&(s=function IIe(r){return new ua("object-not-found","Object '"+r+"' does not exist.")}(r.path)),s.serverResponse=n.serverResponse,s}}function Une(r,t,e){const n=Jm(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new sg(n,"GET",w2(r,e),o);return a.errorHandler=RM(t),a}function gAe(r,t,e,i,n){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),n&&(s.maxResults=n);const a=Jm(t.bucketOnlyServerUrl(),r.host,r._protocol),h=r.maxOperationRetryTime,u=new sg(a,"GET",function pAe(r,t){return function e(i,n){const s=function dAe(r,t,e){const i=E4(e);return null===i?null:function cAe(r,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e.prefixes)for(const n of e.prefixes){const s=n.replace(/\/$/,""),o=r._makeStorageReference(new xh(t,s));i.prefixes.push(o)}if(e.items)for(const n of e.items){const s=r._makeStorageReference(new xh(t,n.name));i.items.push(s)}return i}(r,t,i)}(r,t,n);return og(null!==s),s}}(r,t.bucket),h);return u.urlParams=s,u.errorHandler=eD(t),u}function Gne(r,t,e){const i=Object.assign({},e);return i.fullPath=r.path,i.size=t.size(),i.contentType||(i.contentType=function bAe(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class S2{constructor(t,e,i,n){this.current=t,this.total=e,this.finalized=!!i,this.metadata=n||null}}function T4(r,t){let e=null;try{e=r.getResponseHeader("X-Goog-Upload-Status")}catch{og(!1)}return og(!!e&&-1!==(t||["active"]).indexOf(e)),e}const EAe={STATE_CHANGED:"state_changed"},ou={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D4(r){switch(r){case"running":case"pausing":case"canceling":return ou.RUNNING;case"paused":return ou.PAUSED;case"success":return ou.SUCCESS;case"canceled":return ou.CANCELED;default:return ou.ERROR}}class xAe{constructor(t,e,i){if(function jIe(r){return"function"==typeof r}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function tD(r){return(...t)=>{Promise.resolve().then(()=>r(...t))}}class DAe extends class TAe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ab.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ab.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ab.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,n){if(this.sent_)throw AM("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==n)for(const s in n)n.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,n[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw AM("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw AM("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw AM("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw AM("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Zp(){return new DAe}class Zne{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=kM(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Fne(n.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();n=kne()}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals("canceled")?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,s)=>{this._resolve=n,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function CAe(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o=Gne(t,i,n),a={name:o.fullPath},l=Jm(s,r.host,r._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=x4(o,e),C=new sg(l,"POST",function y(S){let T;T4(S);try{T=S.getResponseHeader("X-Goog-Upload-URL")}catch{og(!1)}return og(y2(T)),T},r.maxUploadRetryTime);return C.urlParams=a,C.headers=u,C.body=p,C.errorHandler=eD(t),C}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,Zp,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const n=function wAe(r,t,e,i){const l=new sg(e,"POST",function s(h){const u=T4(h,["active","final"]);let p=null;try{p=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{og(!1)}p||og(!1);const m=Number(p);return og(!isNaN(m)),new S2(m,i.size(),"final"===u)},r.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=eD(t),l}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(n,Zp,e,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new S2(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((n,s)=>{let o;try{o=function SAe(r,t,e,i,n,s,o,a){const l=new S2(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function LIe(){return new ua("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const h=l.total-l.current;let u=h;n>0&&(u=Math.min(u,n));const p=l.current;let y="";y=0===u?"finalize":h===u?"upload, finalize":"upload";const C={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(p,p+u);if(null===S)throw _ne();const O=new sg(e,"POST",function T(N,z){const U=T4(N,["active","final"]),ae=l.current+u,me=i.size();let Te;return Te="final"===U?w2(t,s)(N,z):null,new S2(ae,me,"final"===U,Te)},t.maxUploadRetryTime);return O.headers=C,O.body=S.uploadData(),O.progressCallback=a||null,O.errorHandler=eD(r),O}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Zp,n,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=Une(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(i,Zp,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function Kne(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let O="";for(let N=0;N<2;N++)O+=Math.random().toString().slice(2);return O}();o["Content-Type"]="multipart/related; boundary="+l;const h=Gne(t,i,n),u=x4(h,e),y=rg.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===y)throw _ne();const C={name:h.fullPath},S=Jm(s,r.host,r._protocol),R=r.maxUploadRetryTime,P=new sg(S,"POST",w2(r,e),R);return P.urlParams=C,P.headers=o,P.body=y.uploadData(),P.errorHandler=eD(t),P}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,Zp,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Rne(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=D4(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,n){const s=new xAe(e||void 0,i||void 0,n||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(D4(this._state)){case ou.SUCCESS:tD(this._resolve.bind(null,this.snapshot))();break;case ou.CANCELED:case ou.ERROR:tD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(D4(this._state)){case ou.RUNNING:case ou.PAUSED:t.next&&tD(t.next.bind(t,this.snapshot))();break;case ou.SUCCESS:t.complete&&tD(t.complete.bind(t))();break;default:t.error&&tD(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class jw{constructor(t,e){this._service=t,this._location=e instanceof xh?e:xh.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new jw(t,e)}get root(){const t=new xh(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Hne(this._location.path)}get storage(){return this._service}get parent(){const t=function rAe(r){if(0===r.length)return null;const t=r.lastIndexOf("/");return-1===t?"":r.slice(0,t)}(this._location.path);if(null===t)return null;const e=new xh(this._location.bucket,t);return new jw(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw One(t)}}function Xne(r,t,e){return I4.apply(this,arguments)}function I4(){return I4=(0,wt.Z)(function*(r,t,e){const n=yield Jne(r,{pageToken:e});t.prefixes.push(...n.prefixes),t.items.push(...n.items),null!=n.nextPageToken&&(yield Xne(r,t,n.nextPageToken))}),I4.apply(this,arguments)}function Jne(r,t){null!=t&&"number"==typeof t.maxResults&&C4("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=gAe(r.storage,r._location,"/",e.pageToken,e.maxResults);return r.storage.makeRequestWithTokens(i,Zp)}function BAe(r){r._throwIfRoot("getDownloadURL");const t=function mAe(r,t,e){const n=Jm(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new sg(n,"GET",function fAe(r,t){return function e(i,n){const s=zne(r,n,t);return og(null!==s),function uAe(r,t,e,i){const n=E4(t);if(null===n||!y2(n.downloadTokens))return null;const s=n.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const p=r.fullPath;return Jm("/b/"+o(r.bucket)+"/o/"+o(p),e,i)+Lne({alt:"media",token:h})})[0]}(s,n,r.host,r._protocol)}}(r,e),o);return a.errorHandler=RM(t),a}(r.storage,r._location,kM());return r.storage.makeRequestWithTokens(t,Zp).then(e=>{if(null===e)throw function FIe(){return new ua("no-download-url","The given file does not have any download URLs.")}();return e})}function ere(r,t){const e=function sAe(r,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===r.length?e:r+"/"+e}(r._location.path,t),i=new xh(r._location.bucket,e);return new jw(r.storage,i)}function tre(r,t){if(r instanceof A4){const e=r;if(null==e._bucket)throw function PIe(){return new ua("no-default-bucket","No default bucket found. Did you set the '"+Ane+"' property when initializing the app?")}();const i=new jw(e,e._bucket);return null!=t?tre(i,t):i}return void 0!==t?ere(r,t):r}function jAe(r,t){if(t&&function HAe(r){return/^[A-Za-z]+:\/\//.test(r)}(t)){if(r instanceof A4)return function zAe(r,t){return new jw(r,t)}(r,t);throw JT("To use ref(service, url), the first argument must be a Storage instance.")}return tre(r,t)}function ire(r,t){const e=t?.[Ane];return null==e?null:xh.makeFromBucketSpec(e,r)}class A4{constructor(t,e,i,n,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=n,this._firebaseVersion=s,this._bucket=null,this._host=Ine,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?xh.makeFromBucketSpec(n,this._host):ire(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?xh.makeFromBucketSpec(this._url,t):ire(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){C4("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){C4("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,wt.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,wt.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new jw(this,t)}_makeRequest(t,e,i,n,s=!0){if(this._deleted)return new BIe(Mne());{const o=function YIe(r,t,e,i,n,s,o=!0){const a=Lne(r.urlParams),l=r.url+a,h=Object.assign({},r.headers);return function KIe(r,t){t&&(r["X-Firebase-GMPID"]=t)}(h,t),function WIe(r,t){null!==t&&t.length>0&&(r.Authorization="Firebase "+t)}(h,e),function GIe(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(h,s),function $Ie(r,t){null!==t&&(r["X-Firebase-AppCheck"]=t)}(h,i),new UIe(l,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,n,o)}(t,this._appId,i,n,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var i=this;return(0,wt.Z)(function*(){const[n,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,n,s).getPromise()})()}}const nre="@firebase/storage";function ore(r,t){return jAe(r=(0,ne.m9)(r),t)}function XAe(r,{instanceIdentifier:t}){const e=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),n=r.getProvider("app-check-internal");return new A4(e,i,n,t,$a.SDK_VERSION)}!function JAe(){(0,$a._registerComponent)(new Du.wA("storage",XAe,"PUBLIC").setMultipleInstances(!0)),(0,$a.registerVersion)(nre,"0.10.0",""),(0,$a.registerVersion)(nre,"0.10.0","esm2017")}();class E2{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class lre{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new E2(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new E2(i,this,this._ref))},e)}on(t,e,i,n){let s;return e&&(s="function"==typeof e?o=>e(new E2(o,this,this._ref)):{next:e.next?o=>e.next(new E2(o,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,n||void 0)}}class hre{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new ev(t,this._service))}get items(){return this._delegate.items.map(t=>new ev(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ev{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function QAe(r,t){return ere(r,t)}(this._delegate,t);return new ev(e,this.storage)}get root(){return new ev(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new ev(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new lre(function UAe(r,t,e){return function OAe(r,t,e){return r._throwIfRoot("uploadBytesResumable"),new Zne(r,new rg(t),e)}(r=(0,ne.m9)(r),t,e)}(this._delegate,t,e),this)}putString(t,e=Nc.RAW,i){this._throwIfRoot("putString");const n=S4(e,t),s=Object.assign({},i);return null==s.contentType&&null!=n.contentType&&(s.contentType=n.contentType),new lre(new Zne(this._delegate,new rg(n.data,!0),s),this)}listAll(){return function $Ae(r){return function LAe(r){const t={prefixes:[],items:[]};return Xne(r,t).then(()=>t)}(r=(0,ne.m9)(r))}(this._delegate).then(t=>new hre(t,this.storage))}list(t){return function KAe(r,t){return Jne(r=(0,ne.m9)(r),t)}(this._delegate,t||void 0).then(e=>new hre(e,this.storage))}getMetadata(){return function WAe(r){return function FAe(r){r._throwIfRoot("getMetadata");const t=Une(r.storage,r._location,kM());return r.storage.makeRequestWithTokens(t,Zp)}(r=(0,ne.m9)(r))}(this._delegate)}updateMetadata(t){return function GAe(r,t){return function NAe(r,t){r._throwIfRoot("updateMetadata");const e=function vAe(r,t,e,i){const s=Jm(t.fullServerUrl(),r.host,r._protocol),a=x4(e,i),h=r.maxOperationRetryTime,u=new sg(s,"PATCH",w2(r,i),h);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=RM(t),u}(r.storage,r._location,t,kM());return r.storage.makeRequestWithTokens(e,Zp)}(r=(0,ne.m9)(r),t)}(this._delegate,t)}getDownloadURL(){return function YAe(r){return BAe(r=(0,ne.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function ZAe(r){return function VAe(r){r._throwIfRoot("deleteObject");const t=function yAe(r,t){const i=Jm(t.fullServerUrl(),r.host,r._protocol),a=new sg(i,"DELETE",function o(l,h){},r.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=RM(t),a}(r.storage,r._location);return r.storage.makeRequestWithTokens(t,Zp)}(r=(0,ne.m9)(r))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw One(t)}}class ure{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(cre(t))throw JT("ref() expected a child path but got a URL, use refFromURL instead.");return new ev(ore(this._delegate,t),this)}refFromURL(t){if(!cre(t))throw JT("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xh.makeFromUrl(t,this._delegate.host)}catch{throw JT("refFromUrl() expected a valid full URL but got an invalid one.")}return new ev(ore(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function are(r,t,e,i={}){!function qAe(r,t,e,i={}){r.host=`${t}:${e}`,r._protocol="http";const{mockUserToken:n}=i;n&&(r._overrideAuthToken="string"==typeof n?n:(0,ne.Sg)(n,r.app.options.projectId))}(r,t,e,i)}(this._delegate,t,e,i)}}function cre(r){return/^[A-Za-z]+:\/\//.test(r)}function nke(r,{instanceIdentifier:t}){const e=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:t});return new ure(e,i)}function dre(r){const t=function ske(r){return new Wa.y(t=>{const e=o=>t.next(o);e(r.snapshot);const s=r.on("state_changed",e);return r.then(o=>{e(o),t.complete()},o=>{e(r.snapshot),(o=>{t.error(o)})(o)}),function(){s()}}).pipe(function EIe(r,t=HW.z){return(0,Pa.e)((e,i)=>{let n=null,s=null,o=null;const a=()=>{if(n){n.unsubscribe(),n=null;const h=s;s=null,i.next(h)}};function l(){const h=o+r,u=t.now();if(u<h)return n=this.schedule(void 0,h-u),void i.add(n);a()}e.subscribe((0,so.x)(i,h=>{s=h,o=t.now(),n||(n=t.schedule(l,r),i.add(n))},()=>{a(),i.complete()},void 0,()=>{s=n=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,$i.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function x2(r){return{getDownloadURL:()=>Gi(void 0).pipe(ss.fc,Zs(()=>r.getDownloadURL()),ss.iC),getMetadata:()=>Gi(void 0).pipe(ss.fc,Zs(()=>r.getMetadata()),ss.iC),delete:()=>(0,Tr.D)(r.delete()),child:t=>x2(r.child(t)),updateMetadata:t=>(0,Tr.D)(r.updateMetadata(t)),put:(t,e)=>dre(r.put(t,e)),putString:(t,e,i)=>dre(r.putString(t,e,i)),list:t=>(0,Tr.D)(r.list(t)),listAll:()=>(0,Tr.D)(r.listAll())}}!function rke(r){const t={TaskState:ou,TaskEvent:EAe,StringFormat:Nc,Storage:ure,Reference:ev};r.INTERNAL.registerComponent(new Du.wA("storage-compat",nke,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.2.0")}(jW.Z);const oke=new v.OlP("angularfire2.storageBucket"),ake=new v.OlP("angularfire2.storage.maxUploadRetryTime"),lke=new v.OlP("angularfire2.storage.maxOperationRetryTime"),hke=new v.OlP("angularfire2.storage.use-emulator");let uke=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,p){const m=(0,Cl.on)(e,o,i);this.storage=(0,Cl.cc)(`${m.name}.storage.${n}`,"AngularFireStorage",m.name,()=>{const y=o.runOutsideAngular(()=>m.storage(n||void 0)),C=u;return C&&y.useEmulator(...C),l&&y.setMaxUploadRetryTime(l),h&&y.setMaxOperationRetryTime(h),y},[l,h])}ref(e){return x2(this.storage.ref(e))}refFromURL(e){return x2(this.storage.refFromURL(e))}upload(e,i,n){return x2(this.storage.ref(e)).put(i,n)}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Cl.Dh),v.LFG(Cl.xv,8),v.LFG(oke,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ss.HU),v.LFG(ake,8),v.LFG(lke,8),v.LFG(hke,8),v.LFG(xM,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),cke=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({}),r})(),dke=(()=>{class r{constructor(){g2.Z.registerVersion("angularfire",ss.q4.full,"gcs-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[uke],imports:[cke]}),r})();function k4(){return(0,Pa.e)((r,t)=>{let e,i=!1;r.subscribe((0,so.x)(t,n=>{const s=e;e=n,i&&t.next([s,n]),i=!0}))})}var on,pke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tv={},R4=R4||{},Nn=pke||self;function T2(){}function D2(r){var t=typeof r;return"array"==(t="object"!=t?t:r?Array.isArray(r)?"array":t:"null")||"object"==t&&"number"==typeof r.length}function _M(r){var t=typeof r;return"object"==t&&null!=r||"function"==t}var _4="closure_uid_"+(1e9*Math.random()>>>0),gke=0;function mke(r,t,e){return r.call.apply(r.bind,arguments)}function vke(r,t,e){if(!r)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),r.apply(t,n)}}return function(){return r.apply(t,arguments)}}function Th(r,t,e){return(Th=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mke:vke).apply(null,arguments)}function I2(r,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),r.apply(this,i)}}function nh(r,t){function e(){}e.prototype=t.prototype,r.X=t.prototype,r.prototype=new e,r.prototype.constructor=r,r.Wb=function(i,n,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[n].apply(i,o)}}function kb(){this.s=this.s,this.o=this.o}kb.prototype.s=!1,kb.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fke(r){Object.prototype.hasOwnProperty.call(r,_4)&&r[_4]||(r[_4]=++gke)}(this)},kb.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const pre=Array.prototype.indexOf?function(r,t){return Array.prototype.indexOf.call(r,t,void 0)}:function(r,t){if("string"==typeof r)return"string"!=typeof t||1!=t.length?-1:r.indexOf(t,0);for(let e=0;e<r.length;e++)if(e in r&&r[e]===t)return e;return-1};function M4(r){const t=r.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=r[i];return e}return[]}function fre(r,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(D2(i)){const n=r.length||0,s=i.length||0;r.length=n+s;for(let o=0;o<s;o++)r[n+o]=i[o]}else r.push(i)}}function Dh(r,t){this.type=r,this.g=this.target=t,this.defaultPrevented=!1}Dh.prototype.h=function(){this.defaultPrevented=!0};var bke=function(){if(!Nn.addEventListener||!Object.defineProperty)return!1;var r=!1,t=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Nn.addEventListener("test",T2,t),Nn.removeEventListener("test",T2,t)}catch{}return r}();function A2(r){return/^[\s\xa0]*$/.test(r)}var gre=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function O4(r,t){return r<t?-1:r>t?1:0}function k2(){var r=Nn.navigator;return r&&(r=r.userAgent)?r:""}function ag(r){return-1!=k2().indexOf(r)}function P4(r){return P4[" "](r),r}P4[" "]=T2;var R2,wke=ag("Opera"),iD=ag("Trident")||ag("MSIE"),mre=ag("Edge"),L4=mre||iD,vre=ag("Gecko")&&!(-1!=k2().toLowerCase().indexOf("webkit")&&!ag("Edge"))&&!(ag("Trident")||ag("MSIE"))&&!ag("Edge"),Ske=-1!=k2().toLowerCase().indexOf("webkit")&&!ag("Edge");function yre(){var r=Nn.document;return r?r.documentMode:void 0}e:{var F4="",N4=function(){var r=k2();return vre?/rv:([^\);]+)(\)|;)/.exec(r):mre?/Edge\/([\d\.]+)/.exec(r):iD?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):Ske?/WebKit\/(\S+)/.exec(r):wke?/(?:Version)[ \/]?(\S+)/.exec(r):void 0}();if(N4&&(F4=N4?N4[1]:""),iD){var B4=yre();if(null!=B4&&B4>parseFloat(F4)){R2=String(B4);break e}}R2=F4}var Eke={};var Tke=Nn.document&&iD&&(yre()||parseInt(R2,10))||void 0;function MM(r,t){if(Dh.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var e=this.type=r.type,i=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=t,t=r.relatedTarget){if(vre){e:{try{P4(t.nodeName);var n=!0;break e}catch{}n=!1}n||(t=null)}}else"mouseover"==e?t=r.fromElement:"mouseout"==e&&(t=r.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:Dke[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&MM.X.h.call(this)}}nh(MM,Dh);var Dke={2:"touch",3:"pen",4:"mouse"};MM.prototype.h=function(){MM.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var OM="closure_listenable_"+(1e6*Math.random()|0),Ike=0;function Ake(r,t,e,i,n){this.listener=r,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=n,this.key=++Ike,this.ba=this.ea=!1}function _2(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function H4(r,t,e){for(const i in r)t.call(e,r[i],i,r)}function Cre(r){const t={};for(const e in r)t[e]=r[e];return t}const wre="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sre(r,t){let e,i;for(let n=1;n<arguments.length;n++){for(e in i=arguments[n],i)r[e]=i[e];for(let s=0;s<wre.length;s++)e=wre[s],Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}}function M2(r){this.src=r,this.g={},this.h=0}function z4(r,t){var e=t.type;if(e in r.g){var s,i=r.g[e],n=pre(i,t);(s=0<=n)&&Array.prototype.splice.call(i,n,1),s&&(_2(t),0==r.g[e].length&&(delete r.g[e],r.h--))}}function j4(r,t,e,i){for(var n=0;n<r.length;++n){var s=r[n];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return n}return-1}M2.prototype.add=function(r,t,e,i,n){var s=r.toString();(r=this.g[s])||(r=this.g[s]=[],this.h++);var o=j4(r,t,i,n);return-1<o?(t=r[o],e||(t.ea=!1)):((t=new Ake(t,this.src,s,!!i,n)).ea=e,r.push(t)),t};var q4="closure_lm_"+(1e6*Math.random()|0),U4={};function Ere(r,t,e,i,n){if(i&&i.once)return Tre(r,t,e,i,n);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Ere(r,t[s],e,i,n);return null}return e=$4(e),r&&r[OM]?r.N(t,e,_M(i)?!!i.capture:!!i,n):xre(r,t,e,!1,i,n)}function xre(r,t,e,i,n,s){if(!t)throw Error("Invalid event type");var o=_M(n)?!!n.capture:!!n,a=G4(r);if(a||(r[q4]=a=new M2(r)),(e=a.add(t,e,i,o,s)).proxy)return e;if(i=function kke(){const t=Rke;return function r(e){return t.call(r.src,r.listener,e)}}(),e.proxy=i,i.src=r,i.listener=e,r.addEventListener)bke||(n=o),void 0===n&&(n=!1),r.addEventListener(t.toString(),i,n);else if(r.attachEvent)r.attachEvent(Ire(t.toString()),i);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(i)}return e}function Tre(r,t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Tre(r,t[s],e,i,n);return null}return e=$4(e),r&&r[OM]?r.O(t,e,_M(i)?!!i.capture:!!i,n):xre(r,t,e,!0,i,n)}function Dre(r,t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)Dre(r,t[s],e,i,n);else i=_M(i)?!!i.capture:!!i,e=$4(e),r&&r[OM]?(r=r.i,(t=String(t).toString())in r.g&&-1<(e=j4(s=r.g[t],e,i,n))&&(_2(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete r.g[t],r.h--))):r&&(r=G4(r))&&(t=r.g[t.toString()],r=-1,t&&(r=j4(t,e,i,n)),(e=-1<r?t[r]:null)&&W4(e))}function W4(r){if("number"!=typeof r&&r&&!r.ba){var t=r.src;if(t&&t[OM])z4(t.i,r);else{var e=r.type,i=r.proxy;t.removeEventListener?t.removeEventListener(e,i,r.capture):t.detachEvent?t.detachEvent(Ire(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=G4(t))?(z4(e,r),0==e.h&&(e.src=null,t[q4]=null)):_2(r)}}}function Ire(r){return r in U4?U4[r]:U4[r]="on"+r}function Rke(r,t){if(r.ba)r=!0;else{t=new MM(t,this);var e=r.listener,i=r.ha||r.src;r.ea&&W4(r),r=e.call(i,t)}return r}function G4(r){return(r=r[q4])instanceof M2?r:null}var K4="__closure_events_fn_"+(1e9*Math.random()>>>0);function $4(r){return"function"==typeof r?r:(r[K4]||(r[K4]=function(t){return r.handleEvent(t)}),r[K4])}function Vl(){kb.call(this),this.i=new M2(this),this.P=this,this.I=null}function rh(r,t){var e,i=r.I;if(i)for(e=[];i;i=i.I)e.push(i);if(r=r.P,i=t.type||t,"string"==typeof t)t=new Dh(t,r);else if(t instanceof Dh)t.target=t.target||r;else{var n=t;Sre(t=new Dh(i,r),n)}if(n=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.g=e[s];n=O2(o,i,!0,t)&&n}if(n=O2(o=t.g=r,i,!0,t)&&n,n=O2(o,i,!1,t)&&n,e)for(s=0;s<e.length;s++)n=O2(o=t.g=e[s],i,!1,t)&&n}function O2(r,t,e,i){if(!(t=r.i.g[String(t)]))return!0;t=t.concat();for(var n=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==e){var a=o.listener,l=o.ha||o.src;o.ea&&z4(r.i,o),n=!1!==a.call(l,i)&&n}}return n&&!i.defaultPrevented}nh(Vl,kb),Vl.prototype[OM]=!0,Vl.prototype.removeEventListener=function(r,t,e,i){Dre(this,r,t,e,i)},Vl.prototype.M=function(){if(Vl.X.M.call(this),this.i){var t,r=this.i;for(t in r.g){for(var e=r.g[t],i=0;i<e.length;i++)_2(e[i]);delete r.g[t],r.h--}}this.I=null},Vl.prototype.N=function(r,t,e,i){return this.i.add(String(r),t,!1,e,i)},Vl.prototype.O=function(r,t,e,i){return this.i.add(String(r),t,!0,e,i)};var Y4=Nn.JSON.stringify;function _ke(){var r=Rre;let t=null;return r.g&&(t=r.g,r.g=r.g.next,r.g||(r.h=null),t.next=null),t}var Z4,Are=new class{constructor(r,t){this.i=r,this.j=t,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new Oke,r=>r.reset());class Oke{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Pke(r){Nn.setTimeout(()=>{throw r},0)}function kre(r,t){Z4||function Lke(){var r=Nn.Promise.resolve(void 0);Z4=function(){r.then(Fke)}}(),Q4||(Z4(),Q4=!0),Rre.add(r,t)}var Q4=!1,Rre=new class Mke{constructor(){this.h=this.g=null}add(t,e){const i=Are.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Fke(){for(var r;r=_ke();){try{r.h.call(r.g)}catch(e){Pke(e)}var t=Are;t.j(r),100>t.h&&(t.h++,r.next=t.g,t.g=r)}Q4=!1}function P2(r,t){Vl.call(this),this.h=r||1,this.g=t||Nn,this.j=Th(this.lb,this),this.l=Date.now()}function X4(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function J4(r,t,e){if("function"==typeof r)e&&(r=Th(r,e));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Th(r.handleEvent,r)}return 2147483647<Number(t)?-1:Nn.setTimeout(r,t||0)}function _re(r){r.g=J4(()=>{r.g=null,r.i&&(r.i=!1,_re(r))},r.j);const t=r.h;r.h=null,r.m.apply(null,t)}nh(P2,Vl),(on=P2.prototype).ca=!1,on.R=null,on.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),rh(this,"tick"),this.ca&&(X4(this),this.start()))}},on.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},on.M=function(){P2.X.M.call(this),X4(this),delete this.g};class Nke extends kb{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:_re(this)}M(){super.M(),this.g&&(Nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function PM(r){kb.call(this),this.h=r,this.g={}}nh(PM,kb);var Mre=[];function Ore(r,t,e,i){Array.isArray(e)||(e&&(Mre[0]=e.toString()),e=Mre);for(var n=0;n<e.length;n++){var s=Ere(t,e[n],i||r.handleEvent,!1,r.h||r);if(!s)break;r.g[s.key]=s}}function Pre(r){H4(r.g,function(t,e){this.g.hasOwnProperty(e)&&W4(t)},r),r.g={}}function L2(){this.g=!0}function nD(r,t,e,i){r.info(function(){return"XMLHTTP TEXT ("+t+"): "+function zke(r,t){if(!r.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(r=0;r<e.length;r++)if(Array.isArray(e[r])){var i=e[r];if(!(2>i.length)){var n=i[1];if(Array.isArray(n)&&!(1>n.length)){var s=n[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<n.length;o++)n[o]=""}}}return Y4(e)}catch{return t}}(r,e)+(i?" "+i:"")})}PM.prototype.M=function(){PM.X.M.call(this),Pre(this)},PM.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},L2.prototype.Aa=function(){this.g=!1},L2.prototype.info=function(){};var qw={},Lre=null;function F2(){return Lre=Lre||new Vl}function Fre(r){Dh.call(this,qw.Pa,r)}function LM(r){const t=F2();rh(t,new Fre(t))}function Nre(r,t){Dh.call(this,qw.STAT_EVENT,r),this.stat=t}function au(r){const t=F2();rh(t,new Nre(t,r))}function Bre(r,t){Dh.call(this,qw.Qa,r),this.size=t}function FM(r,t){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Nn.setTimeout(function(){r()},t)}qw.Pa="serverreachability",nh(Fre,Dh),qw.STAT_EVENT="statevent",nh(Nre,Dh),qw.Qa="timingevent",nh(Bre,Dh);var N2={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Vre={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function e8(){}function zre(){}e8.prototype.h=null;var n8,NM={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function t8(){Dh.call(this,"d")}function i8(){Dh.call(this,"c")}function B2(){}function BM(r,t,e,i){this.l=r,this.j=t,this.m=e,this.U=i||1,this.S=new PM(this),this.O=jke,this.T=new P2(r=L4?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new jre}function jre(){this.i=null,this.g="",this.h=!1}nh(t8,Dh),nh(i8,Dh),nh(B2,e8),B2.prototype.g=function(){return new XMLHttpRequest},B2.prototype.i=function(){return{}},n8=new B2;var jke=45e3,r8={},V2={};function s8(r,t,e){r.K=1,r.v=q2(iv(t)),r.s=e,r.P=!0,qre(r,null)}function qre(r,t){r.F=Date.now(),VM(r),r.A=iv(r.v);var e=r.A,i=r.U;Array.isArray(i)||(i=[String(i)]),Jre(e.i,"t",i),r.C=0,e=r.l.H,r.h=new jre,r.g=Ese(r.l,e?t:null,!r.s),0<r.N&&(r.L=new Nke(Th(r.La,r,r.g),r.N)),Ore(r.S,r.g,"readystatechange",r.ib),t=r.H?Cre(r.H):{},r.s?(r.u||(r.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,t)):(r.u="GET",r.g.da(r.A,r.u,null,t)),LM(),function Bke(r,t,e,i,n,s){r.info(function(){if(r.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var p=u.split("_");o=2<=p.length&&"type"==p[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+n+"]: "+t+"\n"+e+"\n"+o})}(r.j,r.u,r.A,r.m,r.U,r.s)}function Ure(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function Wre(r,t,e){let n,i=!0;for(;!r.I&&r.C<e.length;){if(n=qke(r,e),n==V2){4==t&&(r.o=4,au(14),i=!1),nD(r.j,r.m,null,"[Incomplete Response]");break}if(n==r8){r.o=4,au(15),nD(r.j,r.m,e,"[Invalid Chunk]"),i=!1;break}nD(r.j,r.m,n,null),o8(r,n)}Ure(r)&&n!=V2&&n!=r8&&(r.h.g="",r.C=0),4!=t||0!=e.length||r.h.h||(r.o=1,au(16),i=!1),r.i=r.i&&i,i?0<e.length&&!r.$&&(r.$=!0,(t=r.l).g==r&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),f8(t),t.K=!0,au(11))):(nD(r.j,r.m,e,"[Invalid Chunked Response]"),Uw(r),HM(r))}function qke(r,t){var e=r.C,i=t.indexOf("\n",e);return-1==i?V2:(e=Number(t.substring(e,i)),isNaN(e)?r8:(i+=1)+e>t.length?V2:(t=t.substr(i,e),r.C=i+e,t))}function VM(r){r.V=Date.now()+r.O,Gre(r,r.O)}function Gre(r,t){if(null!=r.B)throw Error("WatchDog timer not null");r.B=FM(Th(r.gb,r),t)}function H2(r){r.B&&(Nn.clearTimeout(r.B),r.B=null)}function HM(r){0==r.l.G||r.I||bse(r.l,r)}function Uw(r){H2(r);var t=r.L;t&&"function"==typeof t.na&&t.na(),r.L=null,X4(r.T),Pre(r.S),r.g&&(t=r.g,r.g=null,t.abort(),t.na())}function o8(r,t){try{var e=r.l;if(0!=e.G&&(e.g==r||a8(e.h,r)))if(!r.J&&a8(e.h,r)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var n=i;if(0==n[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<r.F))break e;Y2(e),K2(e)}p8(e),au(18)}}else e.Ba=n[1],0<e.Ba-e.T&&37500>n[2]&&e.L&&0==e.A&&!e.v&&(e.v=FM(Th(e.cb,e),6e3));if(1>=ise(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else Gw(e,11)}else if((r.J||e.g==r)&&Y2(e),!A2(t))for(n=e.Fa.g.parse(t),t=0;t<n.length;t++){let h=n[t];if(e.T=h[0],h=h[1],2==e.G)if("c"==h[0]){e.I=h[1],e.ka=h[2];const u=h[3];null!=u&&(e.ma=u,e.j.info("VER="+e.ma));const p=h[4];null!=p&&(e.Ca=p,e.j.info("SVER="+e.Ca));const m=h[5];null!=m&&"number"==typeof m&&0<m&&(e.J=i=1.5*m,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const y=r.g;if(y){const C=y.g?y.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=i.h;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(l8(s,s.h),s.h=null))}if(i.D){const S=y.g?y.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(i.za=S,qo(i.F,i.D,S))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-r.F,e.j.info("Handshake RTT: "+e.P+"ms"));var o=r;if((i=e).sa=Sse(i,i.H?i.ka:null,i.V),o.J){nse(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(H2(a),VM(a)),i.g=o}else vse(i);0<e.i.length&&$2(e)}else"stop"!=h[0]&&"close"!=h[0]||Gw(e,7);else 3==e.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?Gw(e,7):d8(e):"noop"!=h[0]&&e.l&&e.l.wa(h),e.A=0)}LM()}catch{}}function Kre(r,t){if(r.forEach&&"function"==typeof r.forEach)r.forEach(t,void 0);else if(D2(r)||"string"==typeof r)Array.prototype.forEach.call(r,t,void 0);else for(var e=function Wke(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(D2(r)||"string"==typeof r){var t=[];r=r.length;for(var e=0;e<r;e++)t.push(e);return t}t=[],e=0;for(const i in r)t[e++]=i;return t}}}(r),i=function Uke(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(D2(r)){for(var t=[],e=r.length,i=0;i<e;i++)t.push(r[i]);return t}for(i in t=[],e=0,r)t[e++]=r[i];return t}(r),n=i.length,s=0;s<n;s++)t.call(void 0,i[s],e&&e[s],r)}(on=BM.prototype).setTimeout=function(r){this.O=r},on.ib=function(r){r=r.target;const t=this.L;t&&3==nv(r)?t.l():this.La(r)},on.La=function(r){try{if(r==this.g)e:{const u=nv(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>u)&&(3!=u||L4||this.g&&(this.h.h||this.g.fa()||cse(this.g)))){this.I||4!=u||7==t||LM(),H2(this);var e=this.g.aa();this.Y=e;t:if(Ure(this)){var i=cse(this.g);r="";var n=i.length,s=4==nv(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Uw(this),HM(this);var o="";break t}this.h.i=new Nn.TextDecoder}for(t=0;t<n;t++)this.h.h=!0,r+=this.h.i.decode(i[t],{stream:s&&t==n-1});i.splice(0,n),this.h.g+=r,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==e,function Vke(r,t,e,i,n,s,o){r.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+n+"]: "+t+"\n"+e+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A2(a)){var h=a;break t}}h=null}if(!(e=h)){this.i=!1,this.o=3,au(12),Uw(this),HM(this);break e}nD(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,o8(this,e)}this.P?(Wre(this,u,o),L4&&this.i&&3==u&&(Ore(this.S,this.T,"tick",this.hb),this.T.start())):(nD(this.j,this.m,o,null),o8(this,o)),4==u&&Uw(this),this.i&&!this.I&&(4==u?bse(this.l,this):(this.i=!1,VM(this)))}else 400==e&&0<o.indexOf("Unknown SID")?(this.o=3,au(12)):(this.o=0,au(13)),Uw(this),HM(this)}}}catch{}},on.hb=function(){if(this.g){var r=nv(this.g),t=this.g.fa();this.C<t.length&&(H2(this),Wre(this,r,t),this.i&&4!=r&&VM(this))}},on.cancel=function(){this.I=!0,Uw(this)},on.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function Hke(r,t){r.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(LM(),au(17)),Uw(this),this.o=2,HM(this)):Gre(this,this.V-r)};var $re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ww(r,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ww){this.h=void 0!==t?t:r.h,z2(this,r.j),this.s=r.s,this.g=r.g,j2(this,r.m),this.l=r.l,t=r.i;var e=new qM;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),Yre(this,e),this.o=r.o}else r&&(e=String(r).match($re))?(this.h=!!t,z2(this,e[1]||"",!0),this.s=zM(e[2]||""),this.g=zM(e[3]||"",!0),j2(this,e[4]),this.l=zM(e[5]||"",!0),Yre(this,e[6]||"",!0),this.o=zM(e[7]||"")):(this.h=!!t,this.i=new qM(null,this.h))}function iv(r){return new Ww(r)}function z2(r,t,e){r.j=e?zM(t,!0):t,r.j&&(r.j=r.j.replace(/:$/,""))}function j2(r,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);r.m=t}else r.m=null}function Yre(r,t,e){t instanceof qM?(r.i=t,function Xke(r,t){t&&!r.j&&(Rb(r),r.i=null,r.g.forEach(function(e,i){var n=i.toLowerCase();i!=n&&(Qre(this,i),Jre(this,n,e))},r)),r.j=t}(r.i,r.h)):(e||(t=jM(t,Zke)),r.i=new qM(t,r.h))}function qo(r,t,e){r.i.set(t,e)}function q2(r){return qo(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function zM(r,t){return r?t?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function jM(r,t,e){return"string"==typeof r?(r=encodeURI(r).replace(t,Kke),e&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Kke(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ww.prototype.toString=function(){var r=[],t=this.j;t&&r.push(jM(t,Zre,!0),":");var e=this.g;return(e||"file"==t)&&(r.push("//"),(t=this.s)&&r.push(jM(t,Zre,!0),"@"),r.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&r.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&r.push("/"),r.push(jM(e,"/"==e.charAt(0)?Yke:$ke,!0))),(e=this.i.toString())&&r.push("?",e),(e=this.o)&&r.push("#",jM(e,Qke)),r.join("")};var Zre=/[#\/\?@]/g,$ke=/[#\?:]/g,Yke=/[#\?]/g,Zke=/[#\?@]/g,Qke=/#/g;function qM(r,t){this.h=this.g=null,this.i=r||null,this.j=!!t}function Rb(r){r.g||(r.g=new Map,r.h=0,r.i&&function Gke(r,t){if(r){r=r.split("&");for(var e=0;e<r.length;e++){var i=r[e].indexOf("="),n=null;if(0<=i){var s=r[e].substring(0,i);n=r[e].substring(i+1)}else s=r[e];t(s,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(r.i,function(t,e){r.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Qre(r,t){Rb(r),t=rD(r,t),r.g.has(t)&&(r.i=null,r.h-=r.g.get(t).length,r.g.delete(t))}function Xre(r,t){return Rb(r),t=rD(r,t),r.g.has(t)}function Jre(r,t,e){Qre(r,t),0<e.length&&(r.i=null,r.g.set(rD(r,t),M4(e)),r.h+=e.length)}function rD(r,t){return t=String(t),r.j&&(t=t.toLowerCase()),t}function ese(r){this.l=r||eRe,r=Nn.PerformanceNavigationTiming?0<(r=Nn.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Nn.g&&Nn.g.Ga&&Nn.g.Ga()&&Nn.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(on=qM.prototype).add=function(r,t){Rb(this),this.i=null,r=rD(this,r);var e=this.g.get(r);return e||this.g.set(r,e=[]),e.push(t),this.h+=1,this},on.forEach=function(r,t){Rb(this),this.g.forEach(function(e,i){e.forEach(function(n){r.call(t,n,i,this)},this)},this)},on.oa=function(){Rb(this);const r=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const n=r[i];for(let s=0;s<n.length;s++)e.push(t[i])}return e},on.W=function(r){Rb(this);let t=[];if("string"==typeof r)Xre(this,r)&&(t=t.concat(this.g.get(rD(this,r))));else{r=Array.from(this.g.values());for(let e=0;e<r.length;e++)t=t.concat(r[e])}return t},on.set=function(r,t){return Rb(this),this.i=null,Xre(this,r=rD(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[t]),this.h+=1,this},on.get=function(r,t){return r&&0<(r=this.W(r)).length?String(r[0]):t},on.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var n=s;""!==o[i]&&(n+="="+encodeURIComponent(String(o[i]))),r.push(n)}}return this.i=r.join("&")};var eRe=10;function tse(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ise(r){return r.h?1:r.g?r.g.size:0}function a8(r,t){return r.h?r.h==t:!!r.g&&r.g.has(t)}function l8(r,t){r.g?r.g.add(t):r.h=t}function nse(r,t){r.h&&r.h==t?r.h=null:r.g&&r.g.has(t)&&r.g.delete(t)}function rse(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let t=r.i;for(const e of r.g.values())t=t.concat(e.D);return t}return M4(r.i)}function h8(){}function tRe(){this.g=new h8}function iRe(r,t,e){const i=e||"";try{Kre(r,function(n,s){let o=n;_M(n)&&(o=Y4(n)),t.push(i+s+"="+encodeURIComponent(o))})}catch(n){throw t.push(i+"type="+encodeURIComponent("_badmap")),n}}function U2(r,t,e,i,n){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,n(i)}catch{}}function UM(r){this.l=r.ac||null,this.j=r.jb||!1}function W2(r,t){Vl.call(this),this.D=r,this.u=t,this.m=void 0,this.readyState=u8,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ese.prototype.cancel=function(){if(this.i=rse(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},h8.prototype.stringify=function(r){return Nn.JSON.stringify(r,void 0)},h8.prototype.parse=function(r){return Nn.JSON.parse(r,void 0)},nh(UM,e8),UM.prototype.g=function(){return new W2(this.l,this.j)},UM.prototype.i=function(r){return function(){return r}}({}),nh(W2,Vl);var u8=0;function sse(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function WM(r){r.readyState=4,r.l=null,r.j=null,r.A=null,GM(r)}function GM(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(on=W2.prototype).open=function(r,t){if(this.readyState!=u8)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=t,this.readyState=1,GM(this)},on.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(t.body=r),(this.D||Nn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},on.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,WM(this)),this.readyState=u8},on.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,GM(this)),this.g&&(this.readyState=3,GM(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Nn.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;sse(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},on.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var t=r.value?r.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!r.done}))&&(this.response=this.responseText+=t)}r.done?WM(this):GM(this),3==this.readyState&&sse(this)}},on.Va=function(r){this.g&&(this.response=this.responseText=r,WM(this))},on.Ua=function(r){this.g&&(this.response=r,WM(this))},on.ga=function(){this.g&&WM(this)},on.setRequestHeader=function(r,t){this.v.append(r,t)},on.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},on.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],t=this.h.entries();for(var e=t.next();!e.done;)r.push((e=e.value)[0]+": "+e[1]),e=t.next();return r.join("\r\n")},Object.defineProperty(W2.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var rRe=Nn.JSON.parse;function xa(r){Vl.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ose,this.K=this.L=!1}nh(xa,Vl);var ose="",sRe=/^https?$/i,oRe=["POST","PUT"];function ase(r,t){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=t,r.m=5,lse(r),G2(r)}function lse(r){r.D||(r.D=!0,rh(r,"complete"),rh(r,"error"))}function hse(r){if(r.h&&typeof R4<"u"&&(!r.C[1]||4!=nv(r)||2!=r.aa()))if(r.v&&4==nv(r))J4(r.Ha,0,r);else if(rh(r,"readystatechange"),4==nv(r)){r.h=!1;try{const a=r.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===a){var n=String(r.H).match($re)[1]||null;if(!n&&Nn.self&&Nn.self.location){var s=Nn.self.location.protocol;n=s.substr(0,s.length-1)}i=!sRe.test(n?n.toLowerCase():"")}e=i}if(e)rh(r,"complete"),rh(r,"success");else{r.m=6;try{var o=2<nv(r)?r.g.statusText:""}catch{o=""}r.j=o+" ["+r.aa()+"]",lse(r)}}finally{G2(r)}}}function G2(r,t){if(r.g){use(r);const e=r.g,i=r.C[0]?T2:null;r.g=null,r.C=null,t||rh(r,"ready");try{e.onreadystatechange=i}catch{}}}function use(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(Nn.clearTimeout(r.A),r.A=null)}function nv(r){return r.g?r.g.readyState:0}function cse(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case ose:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function dse(r){let t="";return H4(r,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function c8(r,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=dse(e),"string"==typeof r?null!=e&&encodeURIComponent(String(e)):qo(r,t,e))}function KM(r,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[r]||t}function pse(r){this.Ca=0,this.i=[],this.j=new L2,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=KM("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=KM("baseRetryDelayMs",5e3,r),this.bb=KM("retryDelaySeedMs",1e4,r),this.$a=KM("forwardChannelMaxRetries",2,r),this.ta=KM("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new ese(r&&r.concurrentRequestLimit),this.Fa=new tRe,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function d8(r){if(fse(r),3==r.G){var t=r.U++,e=iv(r.F);qo(e,"SID",r.I),qo(e,"RID",t),qo(e,"TYPE","terminate"),$M(r,e),(t=new BM(r,r.j,t,void 0)).K=2,t.v=q2(iv(e)),e=!1,Nn.navigator&&Nn.navigator.sendBeacon&&(e=Nn.navigator.sendBeacon(t.v.toString(),"")),!e&&Nn.Image&&((new Image).src=t.v,e=!0),e||(t.g=Ese(t.l,null),t.g.da(t.v)),t.F=Date.now(),VM(t)}wse(r)}function K2(r){r.g&&(f8(r),r.g.cancel(),r.g=null)}function fse(r){K2(r),r.u&&(Nn.clearTimeout(r.u),r.u=null),Y2(r),r.h.cancel(),r.m&&("number"==typeof r.m&&Nn.clearTimeout(r.m),r.m=null)}function $2(r){tse(r.h)||r.m||(r.m=!0,kre(r.Ja,r),r.C=0)}function gse(r,t){var e;e=t?t.m:r.U++;const i=iv(r.F);qo(i,"SID",r.I),qo(i,"RID",e),qo(i,"AID",r.T),$M(r,i),r.o&&r.s&&c8(i,r.o,r.s),e=new BM(r,r.j,e,r.C+1),null===r.o&&(e.H=r.s),t&&(r.i=t.D.concat(r.i)),t=mse(r,e,1e3),e.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),l8(r.h,e),s8(e,i,t)}function $M(r,t){r.ia&&H4(r.ia,function(e,i){qo(t,i,e)}),r.l&&Kre({},function(e,i){qo(t,i,e)})}function mse(r,t,e){e=Math.min(r.i.length,e);var i=r.l?Th(r.l.Ra,r.l,r):null;e:{var n=r.i;let s=-1;for(;;){const o=["count="+e];-1==s?0<e?(s=n[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<e;l++){let h=n[l].h;const u=n[l].g;if(h-=s,0>h)s=Math.max(0,n[l].h-100),a=!1;else try{iRe(u,o,"req"+h+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return r=r.i.splice(0,e),t.D=r,i}function vse(r){r.g||r.u||(r.Z=1,kre(r.Ia,r),r.A=0)}function p8(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=FM(Th(r.Ia,r),Cse(r,r.A)),r.A++,0))}function f8(r){null!=r.B&&(Nn.clearTimeout(r.B),r.B=null)}function yse(r){r.g=new BM(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var t=iv(r.sa);qo(t,"RID","rpc"),qo(t,"SID",r.I),qo(t,"CI",r.L?"0":"1"),qo(t,"AID",r.T),qo(t,"TYPE","xmlhttp"),$M(r,t),r.o&&r.s&&c8(t,r.o,r.s),r.J&&r.g.setTimeout(r.J);var e=r.g;r=r.ka,e.K=1,e.v=q2(iv(t)),e.s=null,e.P=!0,qre(e,r)}function Y2(r){null!=r.v&&(Nn.clearTimeout(r.v),r.v=null)}function bse(r,t){var e=null;if(r.g==t){Y2(r),f8(r),r.g=null;var i=2}else{if(!a8(r.h,t))return;e=t.D,nse(r.h,t),i=1}if(0!=r.G)if(r.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var n=r.C;rh(i=F2(),new Bre(i,e)),$2(r)}else vse(r);else if(3==(n=t.o)||0==n&&0<r.pa||!(1==i&&function lRe(r,t){return!(ise(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=t.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=FM(Th(r.Ja,r,t),Cse(r,r.C)),r.C++,0)))}(r,t)||2==i&&p8(r)))switch(e&&0<e.length&&(t=r.h,t.i=t.i.concat(e)),n){case 1:Gw(r,5);break;case 4:Gw(r,10);break;case 3:Gw(r,6);break;default:Gw(r,2)}}function Cse(r,t){let e=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(e*=2),e*t}function Gw(r,t){if(r.j.info("Error code "+t),2==t){var e=null;r.l&&(e=null);var i=Th(r.kb,r);e||(e=new Ww("//www.google.com/images/cleardot.gif"),Nn.location&&"http"==Nn.location.protocol||z2(e,"https"),q2(e)),function nRe(r,t){const e=new L2;if(Nn.Image){const i=new Image;i.onload=I2(U2,e,i,"TestLoadImage: loaded",!0,t),i.onerror=I2(U2,e,i,"TestLoadImage: error",!1,t),i.onabort=I2(U2,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=I2(U2,e,i,"TestLoadImage: timeout",!1,t),Nn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=r}else t(!1)}(e.toString(),i)}else au(2);r.G=0,r.l&&r.l.va(t),wse(r),fse(r)}function wse(r){if(r.G=0,r.la=[],r.l){const t=rse(r.h);(0!=t.length||0!=r.i.length)&&(fre(r.la,t),fre(r.la,r.i),r.h.i.length=0,M4(r.i),r.i.length=0),r.l.ua()}}function Sse(r,t,e){var i=e instanceof Ww?iv(e):new Ww(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),j2(i,i.m);else{var n=Nn.location;i=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;var s=new Ww(null,void 0);i&&z2(s,i),t&&(s.g=t),n&&j2(s,n),e&&(s.l=e),i=s}return t=r.za,(e=r.D)&&t&&qo(i,e,t),qo(i,"VER",r.ma),$M(r,i),i}function Ese(r,t,e){if(t&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new xa(e&&r.Da&&!r.ra?new UM({jb:!0}):r.ra)).Ka(r.H),t}function xse(){}function Z2(){if(iD&&!(10<=Number(Tke)))throw Error("Environmental error: no available transport.")}function Bc(r,t){Vl.call(this),this.g=new pse(t),this.l=r,this.h=t&&t.messageUrlParams||null,r=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(r?r["X-WebChannel-Content-Type"]=t.messageContentType:r={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(r?r["X-WebChannel-Client-Profile"]=t.ya:r={"X-WebChannel-Client-Profile":t.ya}),this.g.S=r,(r=t&&t.Yb)&&!A2(r)&&(this.g.o=r),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A2(t)&&(this.g.D=t,null!==(r=this.h)&&t in r&&t in(r=this.h)&&delete r[t]),this.j=new sD(this)}function Tse(r){t8.call(this);var t=r.__sm__;if(t){e:{for(const e in t){r=e;break e}r=void 0}(this.i=r)&&(r=this.i,t=null!==t&&r in t?t[r]:void 0),this.data=t}else this.data=r}function Dse(){i8.call(this),this.status=1}function sD(r){this.g=r}(on=xa.prototype).Ka=function(r){this.L=r},on.da=function(r,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);t=t?t.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():n8.g(),this.C=function Hre(r){return r.h||(r.h=r.i())}(this.u?this.u:n8),this.g.onreadystatechange=Th(this.Ha,this);try{this.F=!0,this.g.open(t,String(r),!0),this.F=!1}catch(s){return void ase(this,s)}if(r=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var n in i)e.set(n,i[n]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),n=Nn.FormData&&r instanceof Nn.FormData,!(0<=pre(oRe,t))||i||n||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of e)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{use(this),0<this.B&&((this.K=function aRe(r){return iD&&function xke(){return function Cke(r){var t=Eke;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=r(9)}(function(){let r=0;const t=gre(String(R2)).split("."),e=gre("9").split("."),i=Math.max(t.length,e.length);for(let o=0;0==r&&o<i;o++){var n=t[o]||"",s=e[o]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==n[0].length&&0==s[0].length)break;r=O4(0==n[1].length?0:parseInt(n[1],10),0==s[1].length?0:parseInt(s[1],10))||O4(0==n[2].length,0==s[2].length)||O4(n[2],s[2]),n=n[3],s=s[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Th(this.qa,this)):this.A=J4(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(s){ase(this,s)}},on.qa=function(){typeof R4<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,rh(this,"timeout"),this.abort(8))},on.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,rh(this,"complete"),rh(this,"abort"),G2(this))},on.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),G2(this,!0)),xa.X.M.call(this)},on.Ha=function(){this.s||(this.F||this.v||this.l?hse(this):this.fb())},on.fb=function(){hse(this)},on.aa=function(){try{return 2<nv(this)?this.g.status:-1}catch{return-1}},on.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},on.Sa=function(r){if(this.g){var t=this.g.responseText;return r&&0==t.indexOf(r)&&(t=t.substring(r.length)),rRe(t)}},on.Ea=function(){return this.m},on.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(on=pse.prototype).ma=8,on.G=1,on.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const n=new BM(this,this.j,r,void 0);let s=this.s;if(this.S&&(s?(s=Cre(s),Sre(s,this.S)):s=this.S),null!==this.o||this.N||(n.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=mse(this,n,t),qo(e=iv(this.F),"RID",r),qo(e,"CVER",22),this.D&&qo(e,"X-HTTP-Session-Id",this.D),$M(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(dse(s)))+"&"+t:this.o&&c8(e,this.o,s)),l8(this.h,n),this.Ya&&qo(e,"TYPE","init"),this.O?(qo(e,"$req",t),qo(e,"SID","null"),n.Z=!0,s8(n,e,null)):s8(n,e,t),this.G=2}}else 3==this.G&&(r?gse(this,r):0==this.i.length||tse(this.h)||gse(this))},on.Ia=function(){if(this.u=null,yse(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=FM(Th(this.eb,this),r)}},on.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,au(10),K2(this),yse(this))},on.cb=function(){null!=this.v&&(this.v=null,K2(this),p8(this),au(19))},on.kb=function(r){r?(this.j.info("Successfully pinged google.com"),au(2)):(this.j.info("Failed to ping google.com"),au(1))},(on=xse.prototype).xa=function(){},on.wa=function(){},on.va=function(){},on.ua=function(){},on.Ra=function(){},Z2.prototype.g=function(r,t){return new Bc(r,t)},nh(Bc,Vl),Bc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,t=this.l,e=this.h||void 0;au(0),r.V=t,r.ia=e||{},r.L=r.Y,r.F=Sse(r,null,r.V),$2(r)},Bc.prototype.close=function(){d8(this.g)},Bc.prototype.u=function(r){var t=this.g;if("string"==typeof r){var e={};e.__data__=r,r=e}else this.v&&((e={}).__data__=Y4(r),r=e);t.i.push(new class{constructor(r,t){this.h=r,this.g=t}}(t.ab++,r)),3==t.G&&$2(t)},Bc.prototype.M=function(){this.g.l=null,delete this.j,d8(this.g),delete this.g,Bc.X.M.call(this)},nh(Tse,t8),nh(Dse,i8),nh(sD,xse),sD.prototype.xa=function(){rh(this.g,"a")},sD.prototype.wa=function(r){rh(this.g,new Tse(r))},sD.prototype.va=function(r){rh(this.g,new Dse)},sD.prototype.ua=function(){rh(this.g,"b")},Z2.prototype.createWebChannel=Z2.prototype.g,Bc.prototype.send=Bc.prototype.u,Bc.prototype.open=Bc.prototype.m,Bc.prototype.close=Bc.prototype.close,N2.NO_ERROR=0,N2.TIMEOUT=8,N2.HTTP_ERROR=6,Vre.COMPLETE="complete",zre.EventType=NM,NM.OPEN="a",NM.CLOSE="b",NM.ERROR="c",NM.MESSAGE="d",Vl.prototype.listen=Vl.prototype.N,xa.prototype.listenOnce=xa.prototype.O,xa.prototype.getLastError=xa.prototype.Oa,xa.prototype.getLastErrorCode=xa.prototype.Ea,xa.prototype.getStatus=xa.prototype.aa,xa.prototype.getResponseJson=xa.prototype.Sa,xa.prototype.getResponseText=xa.prototype.fa,xa.prototype.send=xa.prototype.da,xa.prototype.setWithCredentials=xa.prototype.Ka;var hRe=tv.createWebChannelTransport=function(){return new Z2},uRe=tv.getStatEventTarget=function(){return F2()},g8=tv.ErrorCode=N2,cRe=tv.EventType=Vre,dRe=tv.Event=qw,Ise=tv.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},pRe=tv.FetchXmlHttpFactory=UM,Q2=tv.WebChannel=zre,fRe=tv.XhrIo=xa;const Ase="@firebase/firestore";class Hl{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Hl.UNAUTHENTICATED=new Hl(null),Hl.GOOGLE_CREDENTIALS=new Hl("google-credentials-uid"),Hl.FIRST_PARTY=new Hl("first-party-uid"),Hl.MOCK_USER=new Hl("mock-user");let oD="9.15.0";const _b=new Hh.Yd("@firebase/firestore");function m8(){return _b.logLevel}function $t(r,...t){if(_b.logLevel<=Hh.in.DEBUG){const e=t.map(v8);_b.debug(`Firestore (${oD}): ${r}`,...e)}}function za(r,...t){if(_b.logLevel<=Hh.in.ERROR){const e=t.map(v8);_b.error(`Firestore (${oD}): ${r}`,...e)}}function Kw(r,...t){if(_b.logLevel<=Hh.in.WARN){const e=t.map(v8);_b.warn(`Firestore (${oD}): ${r}`,...e)}}function v8(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Li(r="Unexpected state"){const t=`FIRESTORE (${oD}) INTERNAL ASSERTION FAILED: `+r;throw za(t),new Error(t)}function tn(r,t){r||Li()}function wi(r,t){return r}const dt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zt extends ne.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wl{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class kse{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vRe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Hl.UNAUTHENTICATED))}shutdown(){}}class yRe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class bRe{constructor(t){this.t=t,this.currentUser=Hl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let n=this.i;const s=h=>this.i!==n?(n=this.i,e(h)):Promise.resolve();let o=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wl,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=o;t.enqueueRetryable((0,wt.Z)(function*(){yield h.promise,yield s(i.currentUser)}))},l=h=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wl)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tn("string"==typeof i.accessToken),new kse(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return tn(null===t||"string"==typeof t),new Hl(t)}}class CRe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n,this.type="FirstParty",this.user=Hl.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(tn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class wRe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n}getToken(){return Promise.resolve(new CRe(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(Hl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Rse{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SRe{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const n=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?n(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(tn("string"==typeof e.token),this.A=e.token,new Rse(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ERe(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}class _se{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const n=ERe(40);for(let s=0;s<n.length;++s)i.length<20&&n[s]<e&&(i+=t.charAt(n[s]%t.length))}return i}}function Bn(r,t){return r<t?-1:r>t?1:0}function aD(r,t,e){return r.length===t.length&&r.every((i,n)=>e(i,t[n]))}function Mse(r){return r+"\0"}class Uo{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new zt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new zt(dt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new zt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new zt(dt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Uo.fromMillis(Date.now())}static fromDate(t){return Uo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Uo(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Bn(this.nanoseconds,t.nanoseconds):Bn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class gn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new gn(t)}static min(){return new gn(new Uo(0,0))}static max(){return new gn(new Uo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class YM{constructor(t,e,i){void 0===e?e=0:e>t.length&&Li(),void 0===i?i=t.length-e:i>t.length-e&&Li(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===YM.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof YM?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let n=0;n<i;n++){const s=t.get(n),o=e.get(n);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ur extends YM{construct(t,e,i){return new Ur(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new zt(dt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(n=>n.length>0))}return new Ur(e)}static emptyPath(){return new Ur([])}}const xRe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ta extends YM{construct(t,e,i){return new Ta(t,e,i)}static isValidIdentifier(t){return xRe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ta.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ta(["__name__"])}static fromServerFormat(t){const e=[];let i="",n=0;const s=()=>{if(0===i.length)throw new zt(dt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;n<t.length;){const a=t[n];if("\\"===a){if(n+1===t.length)throw new zt(dt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[n+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new zt(dt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,n+=2}else"`"===a?(o=!o,n++):"."!==a||o?(i+=a,n++):(s(),n++)}if(s(),o)throw new zt(dt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ta(e)}static emptyPath(){return new Ta([])}}class vi{constructor(t){this.path=t}static fromPath(t){return new vi(Ur.fromString(t))}static fromName(t){return new vi(Ur.fromString(t).popFirst(5))}static empty(){return new vi(Ur.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ur.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ur.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new vi(new Ur(t.slice()))}}class X2{constructor(t,e,i,n){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=n}}function y8(r){return r.fields.find(t=>2===t.kind)}function $w(r){return r.fields.filter(t=>2!==t.kind)}X2.UNKNOWN_ID=-1;class J2{constructor(t,e){this.fieldPath=t,this.kind=e}}class ZM{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new ZM(0,Vc.min())}}function Ose(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,n=gn.fromTimestamp(1e9===i?new Uo(e+1,0):new Uo(e,i));return new Vc(n,vi.empty(),t)}function Pse(r){return new Vc(r.readTime,r.key,-1)}class Vc{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Vc(gn.min(),vi.empty(),-1)}static max(){return new Vc(gn.max(),vi.empty(),-1)}}function b8(r,t){let e=r.readTime.compareTo(t.readTime);return 0!==e?e:(e=vi.comparator(r.documentKey,t.documentKey),0!==e?e:Bn(r.largestBatchId,t.largestBatchId))}const Lse="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fse{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function Mb(r){return C8.apply(this,arguments)}function C8(){return C8=(0,wt.Z)(function*(r){if(r.code!==dt.FAILED_PRECONDITION||r.message!==Lse)throw r;$t("LocalStore","Unexpectedly lost primary lease")}),C8.apply(this,arguments)}class st{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Li(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new st((i,n)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,n)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,n)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof st?e:st.resolve(e)}catch(e){return st.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):st.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):st.reject(e)}static resolve(t){return new st((e,i)=>{e(t)})}static reject(t){return new st((e,i)=>{i(t)})}static waitFor(t){return new st((e,i)=>{let n=0,s=0,o=!1;t.forEach(a=>{++n,a.next(()=>{++s,o&&s===n&&e()},l=>i(l))}),o=!0,s===n&&e()})}static or(t){let e=st.resolve(!1);for(const i of t)e=e.next(n=>n?st.resolve(n):i());return e}static forEach(t,e){const i=[];return t.forEach((n,s)=>{i.push(e.call(this,n,s))}),this.waitFor(i)}static mapArray(t,e){return new st((i,n)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(u=>{o[h]=u,++a,a===s&&i(o)},u=>n(u))}})}static doWhile(t,e){return new st((i,n)=>{const s=()=>{!0===t()?e().next(()=>{s()},n):i()};s()})}}class eH{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new wl,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new QM(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const n=w8(i.target.error);this.P.reject(new QM(t,n))}}static open(t,e,i,n){try{return new eH(e,t.transaction(n,i))}catch(s){throw new QM(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($t("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new ARe(e)}}class Qp{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===Qp.D((0,ne.z$)())&&za("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $t("SimpleDb","Removing database:",t),Yw(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,ne.hl)())return!1;if(Qp.N())return!0;const t=(0,ne.z$)(),e=Qp.D(t),i=0<e&&e<10,n=Qp.k(t),s=0<n&&n<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,wt.Z)(function*(){return e.db||($t("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,n)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{n(new QM(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;n("VersionError"===a.name?new zt(dt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new zt(dt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new QM(t,a))},s.onupgradeneeded=o=>{$t("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.S.$(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{$t("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,n){var s=this;return(0,wt.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.F(t);const l=eH.open(s.db,t,o?"readonly":"readwrite",i),h=n(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),st.reject(u))).toPromise();return h.catch(()=>{}),yield l.v,h}catch(l){const h=l,u="FirebaseError"!==h.name&&a<3;if($t("SimpleDb","Transaction failed with error:",h.message,"Retrying:",u),s.close(),!u)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class IRe{constructor(t){this.q=t,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(t){this.q=t}done(){this.U=!0}j(t){this.K=t}delete(){return Yw(this.q.delete())}}class QM extends zt{constructor(t,e){super(dt.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Ob(r){return"IndexedDbTransactionError"===r.name}class ARe{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($t("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($t("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),Yw(i)}add(t){return $t("SimpleDb","ADD",this.store.name,t,t),Yw(this.store.add(t))}get(t){return Yw(this.store.get(t)).next(e=>(void 0===e&&(e=null),$t("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $t("SimpleDb","DELETE",this.store.name,t),Yw(this.store.delete(t))}count(){return $t("SimpleDb","COUNT",this.store.name),Yw(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const n=this.cursor(i),s=[];return this.H(n,(o,a)=>{s.push(a)}).next(()=>s)}{const n=this.store.getAll(i.range);return new st((s,o)=>{n.onerror=a=>{o(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new st((n,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{n(o.target.result)}})}Y(t,e){$t("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const n=this.cursor(i);return this.H(n,(s,o,a)=>a.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const n=this.cursor(i);return this.H(n,e)}tt(t){const e=this.cursor({});return new st((i,n)=>{e.onerror=s=>{const o=w8(s.target.error);n(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}H(t,e){const i=[];return new st((n,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void n();const l=new IRe(a),h=e(a.primaryKey,a.value,l);if(h instanceof st){const u=h.catch(p=>(l.done(),st.reject(p)));i.push(u)}l.isDone?n():null===l.G?a.continue():a.continue(l.G)}}).next(()=>st.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Yw(r){return new st((t,e)=>{r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{const n=w8(i.target.error);e(n)}})}let Nse=!1;function w8(r){const t=Qp.D((0,ne.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new zt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Nse||(Nse=!0,setTimeout(()=>{throw i},0)),i}}return r}class kRe{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$t("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,wt.Z)(function*(){e.task=null;try{$t("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){Ob(i)?$t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Mb(i)}yield e.nt(6e4)}))}}class RRe{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,wt.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let n=e,s=!0;return st.doWhile(()=>!0===s&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return $t("IndexBackiller",`Processing collection: ${o}`),this.rt(t,o,n).next(a=>{n-=a,i.add(o)});s=!1})).next(()=>e-n)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(n=>this.localStore.localDocuments.getNextDocuments(t,e,n,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.ot(n,s)).next(a=>($t("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}ot(t,e){let i=t;return e.changes.forEach((n,s)=>{const o=Pse(s);b8(o,i)>0&&(i=o)}),new Vc(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}let Hc=(()=>{class r{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=n=>this.ut(n),this.ct=n=>i.writeSequenceNumber(n))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}return r.at=-1,r})();class _Re{constructor(t,e,i,n,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=n,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Pb{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Pb("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof Pb&&t.projectId===this.projectId&&t.database===this.database}}function Bse(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function Zw(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function Vse(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function XM(r){return null==r}function JM(r){return 0===r&&1/r==-1/0}function Hse(r){return"number"==typeof r&&Number.isInteger(r)&&!JM(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}class Sl{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Sl(e)}static fromUint8Array(t){const e=function(i){let n="";for(let s=0;s<i.length;++s)n+=String.fromCharCode(i[s]);return n}(t);return new Sl(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Bn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sl.EMPTY_BYTE_STRING=new Sl("");const ORe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lb(r){if(tn(!!r),"string"==typeof r){let t=0;const e=ORe.exec(r);if(tn(!!e),e[1]){let n=e[1];n=(n+"000000000").substr(0,9),t=Number(n)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Da(r.seconds),nanos:Da(r.nanos)}}function Da(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function Qw(r){return"string"==typeof r?Sl.fromBase64String(r):Sl.fromUint8Array(r)}function S8(r){var t,e;return"server_timestamp"===(null===(e=((null===(t=r?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function zse(r){const t=r.mapValue.fields.__previous_value__;return S8(t)?zse(t):t}function e1(r){const t=Lb(r.mapValue.fields.__local_write_time__.timestampValue);return new Uo(t.seconds,t.nanos)}const Fb={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tH={nullValue:"NULL_VALUE"};function Xw(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?S8(r)?4:Wse(r)?9007199254740991:10:Li()}function lg(r,t){if(r===t)return!0;const e=Xw(r);if(e!==Xw(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return e1(r).isEqual(e1(t));case 3:return function(i,n){if("string"==typeof i.timestampValue&&"string"==typeof n.timestampValue&&i.timestampValue.length===n.timestampValue.length)return i.timestampValue===n.timestampValue;const s=Lb(i.timestampValue),o=Lb(n.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return n=t,Qw(r.bytesValue).isEqual(Qw(n.bytesValue));case 7:return r.referenceValue===t.referenceValue;case 8:return function(i,n){return Da(i.geoPointValue.latitude)===Da(n.geoPointValue.latitude)&&Da(i.geoPointValue.longitude)===Da(n.geoPointValue.longitude)}(r,t);case 2:return function(i,n){if("integerValue"in i&&"integerValue"in n)return Da(i.integerValue)===Da(n.integerValue);if("doubleValue"in i&&"doubleValue"in n){const s=Da(i.doubleValue),o=Da(n.doubleValue);return s===o?JM(s)===JM(o):isNaN(s)&&isNaN(o)}return!1}(r,t);case 9:return aD(r.arrayValue.values||[],t.arrayValue.values||[],lg);case 10:return function(i,n){const s=i.mapValue.fields||{},o=n.mapValue.fields||{};if(Bse(s)!==Bse(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!lg(s[a],o[a])))return!1;return!0}(r,t);default:return Li()}var n}function t1(r,t){return void 0!==(r.values||[]).find(e=>lg(e,t))}function Nb(r,t){if(r===t)return 0;const e=Xw(r),i=Xw(t);if(e!==i)return Bn(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Bn(r.booleanValue,t.booleanValue);case 2:return function(n,s){const o=Da(n.integerValue||n.doubleValue),a=Da(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(r,t);case 3:return jse(r.timestampValue,t.timestampValue);case 4:return jse(e1(r),e1(t));case 5:return Bn(r.stringValue,t.stringValue);case 6:return function(n,s){const o=Qw(n),a=Qw(s);return o.compareTo(a)}(r.bytesValue,t.bytesValue);case 7:return function(n,s){const o=n.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const h=Bn(o[l],a[l]);if(0!==h)return h}return Bn(o.length,a.length)}(r.referenceValue,t.referenceValue);case 8:return function(n,s){const o=Bn(Da(n.latitude),Da(s.latitude));return 0!==o?o:Bn(Da(n.longitude),Da(s.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return function(n,s){const o=n.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const h=Nb(o[l],a[l]);if(h)return h}return Bn(o.length,a.length)}(r.arrayValue,t.arrayValue);case 10:return function(n,s){if(n===Fb.mapValue&&s===Fb.mapValue)return 0;if(n===Fb.mapValue)return 1;if(s===Fb.mapValue)return-1;const o=n.fields||{},a=Object.keys(o),l=s.fields||{},h=Object.keys(l);a.sort(),h.sort();for(let u=0;u<a.length&&u<h.length;++u){const p=Bn(a[u],h[u]);if(0!==p)return p;const m=Nb(o[a[u]],l[h[u]]);if(0!==m)return m}return Bn(a.length,h.length)}(r.mapValue,t.mapValue);default:throw Li()}}function jse(r,t){if("string"==typeof r&&"string"==typeof t&&r.length===t.length)return Bn(r,t);const e=Lb(r),i=Lb(t),n=Bn(e.seconds,i.seconds);return 0!==n?n:Bn(e.nanos,i.nanos)}function lD(r){return E8(r)}function E8(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const n=Lb(i);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?Qw(r.bytesValue).toBase64():"referenceValue"in r?vi.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(t=r.geoPointValue).latitude},${t.longitude})`:"arrayValue"in r?function(i){let n="[",s=!0;for(const o of i.values||[])s?s=!1:n+=",",n+=E8(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(i){const n=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of n)o?o=!1:s+=",",s+=`${a}:${E8(i.fields[a])}`;return s+"}"}(r.mapValue):Li();var t}function Jw(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function x8(r){return!!r&&"integerValue"in r}function i1(r){return!!r&&"arrayValue"in r}function qse(r){return!!r&&"nullValue"in r}function Use(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function iH(r){return!!r&&"mapValue"in r}function n1(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return Zw(r.mapValue.fields,(e,i)=>t.mapValue.fields[e]=n1(i)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=n1(r.arrayValue.values[e]);return t}return Object.assign({},r)}function Wse(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function PRe(r){return"nullValue"in r?tH:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?Jw(Pb.empty(),vi.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Li()}function LRe(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?Jw(Pb.empty(),vi.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Fb:Li()}function Gse(r,t){const e=Nb(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function Kse(r,t){const e=Nb(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}class Bb{constructor(t,e){this.position=t,this.inclusive=e}}function $se(r,t,e){let i=0;for(let n=0;n<r.position.length;n++){const s=t[n],o=r.position[n];if(i=s.field.isKeyField()?vi.comparator(vi.fromName(o.referenceValue),e.key):Nb(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Yse(r,t){if(null===r)return null===t;if(null===t||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!lg(r.position[e],t.position[e]))return!1;return!0}class Zse{}class Mr extends Zse{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,i):new FRe(t,e,i):"array-contains"===e?new VRe(t,i):"in"===e?new roe(t,i):"not-in"===e?new HRe(t,i):"array-contains-any"===e?new zRe(t,i):new Mr(t,e,i)}static createKeyFieldInFilter(t,e,i){return"in"===e?new NRe(t,i):new BRe(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(Nb(e,this.value)):null!==e&&Xw(this.value)===Xw(e)&&this.matchesComparison(Nb(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Li()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Fs extends Zse{constructor(t,e){super(),this.filters=t,this.op=e,this.ht=null}static create(t,e){return new Fs(t,e)}matches(t){return hD(this)?void 0===this.filters.find(e=>!e.matches(t)):void 0!==this.filters.find(e=>e.matches(t))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const t=this.lt(e=>e.isInequality());return null!==t?t.field:null}lt(t){for(const e of this.getFlattenedFilters())if(t(e))return e;return null}}function hD(r){return"and"===r.op}function T8(r){return"or"===r.op}function Qse(r){return Xse(r)&&hD(r)}function Xse(r){for(const t of r.filters)if(t instanceof Fs)return!1;return!0}function Jse(r){if(r instanceof Mr)return r.field.canonicalString()+r.op.toString()+lD(r.value);{const t=r.filters.map(e=>Jse(e)).join(",");return`${r.op}(${t})`}}function eoe(r,t){return r instanceof Mr?(e=r,(i=t)instanceof Mr&&e.op===i.op&&e.field.isEqual(i.field)&&lg(e.value,i.value)):r instanceof Fs?function(e,i){return i instanceof Fs&&e.op===i.op&&e.filters.length===i.filters.length&&e.filters.reduce((n,s,o)=>n&&eoe(s,i.filters[o]),!0)}(r,t):void Li();var e,i}function toe(r,t){const e=r.filters.concat(t);return Fs.create(e,r.op)}function ioe(r){return r instanceof Mr?function(t){return`${t.field.canonicalString()} ${t.op} ${lD(t.value)}`}(r):r instanceof Fs?function(t){return t.op.toString()+" {"+t.getFilters().map(ioe).join(" ,")+"}"}(r):"Filter"}class FRe extends Mr{constructor(t,e,i){super(t,e,i),this.key=vi.fromName(i.referenceValue)}matches(t){const e=vi.comparator(t.key,this.key);return this.matchesComparison(e)}}class NRe extends Mr{constructor(t,e){super(t,"in",e),this.keys=noe(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class BRe extends Mr{constructor(t,e){super(t,"not-in",e),this.keys=noe(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function noe(r,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>vi.fromName(i.referenceValue))}class VRe extends Mr{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return i1(e)&&t1(e.arrayValue,this.value)}}class roe extends Mr{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&t1(this.value.arrayValue,e)}}class HRe extends Mr{constructor(t,e){super(t,"not-in",e)}matches(t){if(t1(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!t1(this.value.arrayValue,e)}}class zRe extends Mr{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!i1(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>t1(this.value.arrayValue,i))}}class uD{constructor(t,e="asc"){this.field=t,this.dir=e}}function jRe(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}class Ia{constructor(t,e){this.comparator=t,this.root=e||sh.EMPTY}insert(t,e){return new Ia(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,sh.BLACK,null,null))}remove(t){return new Ia(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sh.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new nH(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new nH(this.root,t,this.comparator,!1)}getReverseIterator(){return new nH(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new nH(this.root,t,this.comparator,!0)}}class nH{constructor(t,e,i,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class sh{constructor(t,e,i,n,s){this.key=t,this.value=e,this.color=i??sh.RED,this.left=n??sh.EMPTY,this.right=s??sh.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,n,s){return new sh(t??this.key,e??this.value,i??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let n=this;const s=i(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,e,i),null):0===s?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,i)),n.fixUp()}removeMin(){if(this.left.isEmpty())return sh.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,n=this;if(e(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===e(t,n.key)){if(n.right.isEmpty())return sh.EMPTY;i=n.right.min(),n=n.copy(i.key,i.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sh.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Li();const t=this.left.check();if(t!==this.right.check())throw Li();return t+(this.isRed()?0:1)}}sh.EMPTY=null,sh.RED=!0,sh.BLACK=!1,sh.EMPTY=new class{constructor(){this.size=0}get key(){throw Li()}get value(){throw Li()}get color(){throw Li()}get left(){throw Li()}get right(){throw Li()}copy(r,t,e,i,n){return this}insert(r,t,e){return new sh(r,t)}remove(r,t){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ws{constructor(t){this.comparator=t,this.data=new Ia(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const n=i.getNext();if(this.comparator(n.key,t[1])>=0)return;e(n.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new soe(this.data.getIterator())}getIteratorFrom(t){return new soe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ws)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(n,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ws(this.comparator);return e.data=t,e}}class soe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cD(r){return r.hasNext()?r.getNext():void 0}class zc{constructor(t){this.fields=t,t.sort(Ta.comparator)}static empty(){return new zc([])}unionWith(t){let e=new Ws(Ta.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new zc(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return aD(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class oh{constructor(t){this.value=t}static empty(){return new oh({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!iH(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=n1(e)}setAll(t){let e=Ta.emptyPath(),i={},n=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,n),i={},n=[],e=a.popLast()}o?i[a.lastSegment()]=n1(o):n.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,n)}delete(t){const e=this.field(t.popLast());iH(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return lg(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let n=e.mapValue.fields[t.get(i)];iH(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=n),e=n}return e.mapValue.fields}applyChanges(t,e,i){Zw(e,(n,s)=>t[n]=s);for(const n of i)delete t[n]}clone(){return new oh(n1(this.value))}}function ooe(r){const t=[];return Zw(r.fields,(e,i)=>{const n=new Ta([e]);if(iH(i)){const s=ooe(i.mapValue).fields;if(0===s.length)t.push(n);else for(const o of s)t.push(n.child(o))}else t.push(n)}),new zc(t)}class xo{constructor(t,e,i,n,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=n,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new xo(t,0,gn.min(),gn.min(),gn.min(),oh.empty(),0)}static newFoundDocument(t,e,i,n){return new xo(t,1,e,gn.min(),i,n,0)}static newNoDocument(t,e){return new xo(t,2,e,gn.min(),gn.min(),oh.empty(),0)}static newUnknownDocument(t,e){return new xo(t,3,e,gn.min(),gn.min(),oh.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(gn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=oh.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=oh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=gn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof xo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new xo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qRe{constructor(t,e=null,i=[],n=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=n,this.limit=s,this.startAt=o,this.endAt=a,this.ft=null}}function D8(r,t=null,e=[],i=[],n=null,s=null,o=null){return new qRe(r,t,e,i,n,s,o)}function eS(r){const t=wi(r);if(null===t.ft){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Jse(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(n=i).field.canonicalString()+n.dir;var n}).join(","),XM(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>lD(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>lD(i)).join(",")),t.ft=e}return t.ft}function r1(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<r.orderBy.length;e++)if(!jRe(r.orderBy[e],t.orderBy[e]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let e=0;e<r.filters.length;e++)if(!eoe(r.filters[e],t.filters[e]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Yse(r.startAt,t.startAt)&&Yse(r.endAt,t.endAt)}function rH(r){return vi.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function sH(r,t){return r.filters.filter(e=>e instanceof Mr&&e.field.isEqual(t))}function aoe(r,t,e){let i=tH,n=!0;for(const s of sH(r,t)){let o=tH,a=!0;switch(s.op){case"<":case"<=":o=PRe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=tH}Gse({value:i,inclusive:n},{value:o,inclusive:a})<0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];Gse({value:i,inclusive:n},{value:o,inclusive:e.inclusive})<0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}function loe(r,t,e){let i=Fb,n=!0;for(const s of sH(r,t)){let o=Fb,a=!0;switch(s.op){case">=":case">":o=LRe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Fb}Kse({value:i,inclusive:n},{value:o,inclusive:a})>0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];Kse({value:i,inclusive:n},{value:o,inclusive:e.inclusive})>0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}class rv{constructor(t,e=null,i=[],n=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=n,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null}}function hoe(r,t,e,i,n,s,o,a){return new rv(r,t,e,i,n,s,o,a)}function dD(r){return new rv(r)}function uoe(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function I8(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function oH(r){for(const t of r.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function A8(r){return null!==r.collectionGroup}function tS(r){const t=wi(r);if(null===t.dt){t.dt=[];const e=oH(t),i=I8(t);if(null!==e&&null===i)e.isKeyField()||t.dt.push(new uD(e)),t.dt.push(new uD(Ta.keyField(),"asc"));else{let n=!1;for(const s of t.explicitOrderBy)t.dt.push(s),s.field.isKeyField()&&(n=!0);if(!n){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new uD(Ta.keyField(),s))}}}return t.dt}function lu(r){const t=wi(r);if(!t._t)if("F"===t.limitType)t._t=D8(t.path,t.collectionGroup,tS(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of tS(t))e.push(new uD(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new Bb(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Bb(t.startAt.position,t.startAt.inclusive):null;t._t=D8(t.path,t.collectionGroup,e,t.filters,t.limit,i,n)}return t._t}function k8(r,t){t.getFirstInequalityField(),oH(r);const e=r.filters.concat([t]);return new rv(r.path,r.collectionGroup,r.explicitOrderBy.slice(),e,r.limit,r.limitType,r.startAt,r.endAt)}function aH(r,t,e){return new rv(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function s1(r,t){return r1(lu(r),lu(t))&&r.limitType===t.limitType}function coe(r){return`${eS(lu(r))}|lt:${r.limitType}`}function R8(r){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map(i=>ioe(i)).join(", ")}]`),XM(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map(i=>{return`${(n=i).field.canonicalString()} (${n.dir})`;var n}).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>lD(i)).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>lD(i)).join(",")),`Target(${e})`}(lu(r))}; limitType=${r.limitType})`}function _8(r,t){return t.isFoundDocument()&&function(e,i){const n=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(r,t)&&function(e,i){for(const n of tS(e))if(!n.field.isKeyField()&&null===i.data.field(n.field))return!1;return!0}(r,t)&&function(e,i){for(const n of e.filters)if(!n.matches(i))return!1;return!0}(r,t)&&(i=t,!((e=r).startAt&&!function(n,s,o){const a=$se(n,s,o);return n.inclusive?a<=0:a<0}(e.startAt,tS(e),i)||e.endAt&&!function(n,s,o){const a=$se(n,s,o);return n.inclusive?a>=0:a>0}(e.endAt,tS(e),i)));var e,i}function doe(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function poe(r){return(t,e)=>{let i=!1;for(const n of tS(r)){const s=URe(n,t,e);if(0!==s)return s;i=i||n.field.isKeyField()}return 0}}function URe(r,t,e){const i=r.field.isKeyField()?vi.comparator(t.key,e.key):function(n,s,o){const a=s.data.field(n),l=o.data.field(n);return null!==a&&null!==l?Nb(a,l):Li()}(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Li()}}function foe(r,t){if(r.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:JM(t)?"-0":t}}function goe(r){return{integerValue:""+r}}function moe(r,t){return Hse(t)?goe(t):foe(r,t)}class lH{constructor(){this._=void 0}}function WRe(r,t,e){return r instanceof pD?function(i,n){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return n&&(s.fields.__previous_value__=n),{mapValue:s}}(e,t):r instanceof iS?yoe(r,t):r instanceof nS?boe(r,t):function(i,n){const s=voe(i,n),o=Coe(s)+Coe(i.gt);return x8(s)&&x8(i.gt)?goe(o):foe(i.yt,o)}(r,t)}function GRe(r,t,e){return r instanceof iS?yoe(r,t):r instanceof nS?boe(r,t):e}function voe(r,t){return r instanceof fD?x8(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class pD extends lH{}class iS extends lH{constructor(t){super(),this.elements=t}}function yoe(r,t){const e=woe(t);for(const i of r.elements)e.some(n=>lg(n,i))||e.push(i);return{arrayValue:{values:e}}}class nS extends lH{constructor(t){super(),this.elements=t}}function boe(r,t){let e=woe(t);for(const i of r.elements)e=e.filter(n=>!lg(n,i));return{arrayValue:{values:e}}}class fD extends lH{constructor(t,e){super(),this.yt=t,this.gt=e}}function Coe(r){return Da(r.integerValue||r.doubleValue)}function woe(r){return i1(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class o1{constructor(t,e){this.field=t,this.transform=e}}class $Re{constructor(t,e){this.version=t,this.transformResults=e}}class Wo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Wo}static exists(t){return new Wo(void 0,t)}static updateTime(t){return new Wo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function hH(r,t){return void 0!==r.updateTime?t.isFoundDocument()&&t.version.isEqual(r.updateTime):void 0===r.exists||r.exists===t.isFoundDocument()}class uH{}function Soe(r,t){if(!r.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return r.isNoDocument()?new mD(r.key,Wo.none()):new gD(r.key,r.data,Wo.none());{const e=r.data,i=oh.empty();let n=new Ws(Ta.comparator);for(let s of t.fields)if(!n.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),n=n.add(s)}return new sv(r.key,i,new zc(n.toArray()),Wo.none())}}function YRe(r,t,e){r instanceof gD?function(i,n,s){const o=i.value.clone(),a=Toe(i.fieldTransforms,n,s.transformResults);o.setAll(a),n.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(r,t,e):r instanceof sv?function(i,n,s){if(!hH(i.precondition,n))return void n.convertToUnknownDocument(s.version);const o=Toe(i.fieldTransforms,n,s.transformResults),a=n.data;a.setAll(xoe(i)),a.setAll(o),n.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(r,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function a1(r,t,e,i){return r instanceof gD?function(n,s,o,a){if(!hH(n.precondition,s))return o;const l=n.value.clone(),h=Doe(n.fieldTransforms,a,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(r,t,e,i):r instanceof sv?function(n,s,o,a){if(!hH(n.precondition,s))return o;const l=Doe(n.fieldTransforms,a,s),h=s.data;return h.setAll(xoe(n)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===o?null:o.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(u=>u.field))}(r,t,e,i):(o=e,hH(r.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function ZRe(r,t){let e=null;for(const i of r.fieldTransforms){const n=t.data.field(i.field),s=voe(i.transform,n||null);null!=s&&(null===e&&(e=oh.empty()),e.set(i.field,s))}return e||null}function Eoe(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=r.fieldTransforms)&&void 0===i||e&&i&&aD(e,i,(n,s)=>function KRe(r,t){return r.field.isEqual(t.field)&&(i=t.transform,(e=r.transform)instanceof iS&&i instanceof iS||e instanceof nS&&i instanceof nS?aD(e.elements,i.elements,lg):e instanceof fD&&i instanceof fD?lg(e.gt,i.gt):e instanceof pD&&i instanceof pD);var e,i}(n,s))))&&(0===r.type?r.value.isEqual(t.value):1!==r.type||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask));var e,i}class gD extends uH{constructor(t,e,i,n=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class sv extends uH{constructor(t,e,i,n,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xoe(r){const t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}}),t}function Toe(r,t,e){const i=new Map;tn(r.length===e.length);for(let n=0;n<e.length;n++){const s=r[n],o=s.transform,a=t.data.field(s.field);i.set(s.field,GRe(o,a,e[n]))}return i}function Doe(r,t,e){const i=new Map;for(const n of r){const s=n.transform,o=e.data.field(n.field);i.set(n.field,WRe(s,o,t))}return i}class mD extends uH{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M8 extends uH{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class QRe{constructor(t){this.count=t}}var rl,Wr;function Ioe(r){switch(r){default:return Li();case dt.CANCELLED:case dt.UNKNOWN:case dt.DEADLINE_EXCEEDED:case dt.RESOURCE_EXHAUSTED:case dt.INTERNAL:case dt.UNAVAILABLE:case dt.UNAUTHENTICATED:return!1;case dt.INVALID_ARGUMENT:case dt.NOT_FOUND:case dt.ALREADY_EXISTS:case dt.PERMISSION_DENIED:case dt.FAILED_PRECONDITION:case dt.ABORTED:case dt.OUT_OF_RANGE:case dt.UNIMPLEMENTED:case dt.DATA_LOSS:return!0}}function Aoe(r){if(void 0===r)return za("GRPC error has no .code"),dt.UNKNOWN;switch(r){case rl.OK:return dt.OK;case rl.CANCELLED:return dt.CANCELLED;case rl.UNKNOWN:return dt.UNKNOWN;case rl.DEADLINE_EXCEEDED:return dt.DEADLINE_EXCEEDED;case rl.RESOURCE_EXHAUSTED:return dt.RESOURCE_EXHAUSTED;case rl.INTERNAL:return dt.INTERNAL;case rl.UNAVAILABLE:return dt.UNAVAILABLE;case rl.UNAUTHENTICATED:return dt.UNAUTHENTICATED;case rl.INVALID_ARGUMENT:return dt.INVALID_ARGUMENT;case rl.NOT_FOUND:return dt.NOT_FOUND;case rl.ALREADY_EXISTS:return dt.ALREADY_EXISTS;case rl.PERMISSION_DENIED:return dt.PERMISSION_DENIED;case rl.FAILED_PRECONDITION:return dt.FAILED_PRECONDITION;case rl.ABORTED:return dt.ABORTED;case rl.OUT_OF_RANGE:return dt.OUT_OF_RANGE;case rl.UNIMPLEMENTED:return dt.UNIMPLEMENTED;case rl.DATA_LOSS:return dt.DATA_LOSS;default:return Li()}}(Wr=rl||(rl={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";class Vb{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[n,s]of i)if(this.equalsFn(n,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),n=this.inner[i];if(void 0===n)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return void(n[s]=[t,e]);n.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return 1===i.length?delete this.inner[e]:i.splice(n,1),this.innerSize--,!0;return!1}forEach(t){Zw(this.inner,(e,i)=>{for(const[n,s]of i)t(n,s)})}isEmpty(){return Vse(this.inner)}size(){return this.innerSize}}const XRe=new Ia(vi.comparator);function Ku(){return XRe}const koe=new Ia(vi.comparator);function l1(...r){let t=koe;for(const e of r)t=t.insert(e.key,e);return t}function Roe(r){let t=koe;return r.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function hg(){return h1()}function _oe(){return h1()}function h1(){return new Vb(r=>r.toString(),(r,t)=>r.isEqual(t))}const JRe=new Ia(vi.comparator),e_e=new Ws(vi.comparator);function ir(...r){let t=e_e;for(const e of r)t=t.add(e);return t}const t_e=new Ws(Bn);function cH(){return t_e}class u1{constructor(t,e,i,n,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const n=new Map;return n.set(t,c1.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new u1(gn.min(),n,cH(),Ku(),ir())}}class c1{constructor(t,e,i,n,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new c1(i,e,ir(),ir(),ir())}}class dH{constructor(t,e,i,n){this.It=t,this.removedTargetIds=e,this.key=i,this.Tt=n}}class Moe{constructor(t,e){this.targetId=t,this.Et=e}}class Ooe{constructor(t,e,i=Sl.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=n}}class Poe{constructor(){this.At=0,this.Rt=Foe(),this.bt=Sl.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(t){t.approximateByteSize()>0&&(this.vt=!0,this.bt=t)}Ct(){let t=ir(),e=ir(),i=ir();return this.Rt.forEach((n,s)=>{switch(s){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:i=i.add(n);break;default:Li()}}),new c1(this.bt,this.Pt,t,e,i)}xt(){this.vt=!1,this.Rt=Foe()}Nt(t,e){this.vt=!0,this.Rt=this.Rt.insert(t,e)}kt(t){this.vt=!0,this.Rt=this.Rt.remove(t)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class i_e{constructor(t){this.$t=t,this.Bt=new Map,this.Lt=Ku(),this.qt=Loe(),this.Ut=new Ws(Bn)}Kt(t){for(const e of t.It)t.Tt&&t.Tt.isFoundDocument()?this.Gt(e,t.Tt):this.Qt(e,t.key,t.Tt);for(const e of t.removedTargetIds)this.Qt(e,t.key,t.Tt)}jt(t){this.forEachTarget(t,e=>{const i=this.Wt(e);switch(t.state){case 0:this.zt(e)&&i.Dt(t.resumeToken);break;case 1:i.Mt(),i.Vt||i.xt(),i.Dt(t.resumeToken);break;case 2:i.Mt(),i.Vt||this.removeTarget(e);break;case 3:this.zt(e)&&(i.Ft(),i.Dt(t.resumeToken));break;case 4:this.zt(e)&&(this.Ht(e),i.Dt(t.resumeToken));break;default:Li()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Bt.forEach((i,n)=>{this.zt(n)&&e(n)})}Jt(t){const e=t.targetId,i=t.Et.count,n=this.Yt(e);if(n){const s=n.target;if(rH(s))if(0===i){const o=new vi(s.path);this.Qt(e,o,xo.newNoDocument(o,gn.min()))}else tn(1===i);else this.Xt(e)!==i&&(this.Ht(e),this.Ut=this.Ut.add(e))}}Zt(t){const e=new Map;this.Bt.forEach((s,o)=>{const a=this.Yt(o);if(a){if(s.current&&rH(a.target)){const l=new vi(a.target.path);null!==this.Lt.get(l)||this.te(o,l)||this.Qt(o,l,xo.newNoDocument(l,t))}s.St&&(e.set(o,s.Ct()),s.xt())}});let i=ir();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Yt(l);return!h||2===h.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.Lt.forEach((s,o)=>o.setReadTime(t));const n=new u1(t,e,this.Ut,this.Lt,i);return this.Lt=Ku(),this.qt=Loe(),this.Ut=new Ws(Bn),n}Gt(t,e){if(!this.zt(t))return;const i=this.te(t,e.key)?2:0;this.Wt(t).Nt(e.key,i),this.Lt=this.Lt.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ee(e.key).add(t))}Qt(t,e,i){if(!this.zt(t))return;const n=this.Wt(t);this.te(t,e)?n.Nt(e,1):n.kt(e),this.qt=this.qt.insert(e,this.ee(e).delete(t)),i&&(this.Lt=this.Lt.insert(e,i))}removeTarget(t){this.Bt.delete(t)}Xt(t){const e=this.Wt(t).Ct();return this.$t.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Ot(t){this.Wt(t).Ot()}Wt(t){let e=this.Bt.get(t);return e||(e=new Poe,this.Bt.set(t,e)),e}ee(t){let e=this.qt.get(t);return e||(e=new Ws(Bn),this.qt=this.qt.insert(t,e)),e}zt(t){const e=null!==this.Yt(t);return e||$t("WatchChangeAggregator","Detected inactive target",t),e}Yt(t){const e=this.Bt.get(t);return e&&e.Vt?null:this.$t.ne(t)}Ht(t){this.Bt.set(t,new Poe),this.$t.getRemoteKeysForTarget(t).forEach(e=>{this.Qt(t,e,null)})}te(t,e){return this.$t.getRemoteKeysForTarget(t).has(e)}}function Loe(){return new Ia(vi.comparator)}function Foe(){return new Ia(vi.comparator)}const n_e={asc:"ASCENDING",desc:"DESCENDING"},r_e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s_e={and:"AND",or:"OR"};class o_e{constructor(t,e){this.databaseId=t,this.wt=e}}function vD(r,t){return r.wt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Noe(r,t){return r.wt?t.toBase64():t.toUint8Array()}function a_e(r,t){return vD(r,t.toTimestamp())}function ja(r){return tn(!!r),gn.fromTimestamp(function(t){const e=Lb(t);return new Uo(e.seconds,e.nanos)}(r))}function O8(r,t){return(e=r,new Ur(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Boe(r){const t=Ur.fromString(r);return tn(Koe(t)),t}function d1(r,t){return O8(r.databaseId,t.path)}function ug(r,t){const e=Boe(t);if(e.get(1)!==r.databaseId.projectId)throw new zt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new zt(dt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new vi(Hoe(e))}function P8(r,t){return O8(r.databaseId,t)}function Voe(r){const t=Boe(r);return 4===t.length?Ur.emptyPath():Hoe(t)}function p1(r){return new Ur(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Hoe(r){return tn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function zoe(r,t,e){return{name:d1(r,t),fields:e.value.mapValue.fields}}function joe(r,t,e){const i=ug(r,t.name),n=ja(t.updateTime),s=t.createTime?ja(t.createTime):gn.min(),o=new oh({mapValue:{fields:t.fields}}),a=xo.newFoundDocument(i,n,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function f1(r,t){let e;if(t instanceof gD)e={update:zoe(r,t.key,t.value)};else if(t instanceof mD)e={delete:d1(r,t.key)};else if(t instanceof sv)e={update:zoe(r,t.key,t.data),updateMask:g_e(t.fieldMask)};else{if(!(t instanceof M8))return Li();e={verify:d1(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(n,s){const o=s.transform;if(o instanceof pD)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof iS)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof nS)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof fD)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw Li()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(n=t.precondition).updateTime?{updateTime:a_e(r,n.updateTime)}:void 0!==n.exists?{exists:n.exists}:Li()),e;var n}function L8(r,t){const e=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?Wo.updateTime(ja(n.updateTime)):void 0!==n.exists?Wo.exists(n.exists):Wo.none():Wo.none(),i=t.updateTransforms?t.updateTransforms.map(n=>function(s,o){let a=null;"setToServerValue"in o?(tn("REQUEST_TIME"===o.setToServerValue),a=new pD):"appendMissingElements"in o?a=new iS(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new nS(o.removeAllFromArray.values||[]):"increment"in o?a=new fD(s,o.increment):Li();const l=Ta.fromServerFormat(o.fieldPath);return new o1(l,a)}(r,n)):[];var n;if(t.update){const n=ug(r,t.update.name),s=new oh({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new zc((t.updateMask.fieldPaths||[]).map(h=>Ta.fromServerFormat(h)));return new sv(n,s,o,e,i)}return new gD(n,s,e,i)}if(t.delete){const n=ug(r,t.delete);return new mD(n,e)}if(t.verify){const n=ug(r,t.verify);return new M8(n,e)}return Li()}function qoe(r,t){return{documents:[P8(r,t.path)]}}function F8(r,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=P8(r,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=P8(r,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const n=function(l){if(0!==l.length)return Goe(Fs.create(l,"and"))}(t.filters);n&&(e.structuredQuery.where=n);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:yD((u=h).field),direction:d_e(u.dir)};var u})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const o=(h=t.limit,r.wt||XM(h)?h:{value:h});var h,a,l;return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(e.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),e}function Uoe(r){let t=Voe(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let n=null;if(i>0){tn(1===i);const u=e.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=function(u){const p=Woe(u);return p instanceof Fs&&Qse(p)?p.getFilters():[p]}(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(u=>{return new uD(bD((p=u).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction));var p}));let a=null;e.limit&&(a=function(u){let p;return p="object"==typeof u?u.value:u,XM(p)?null:p}(e.limit));let l=null;var u;e.startAt&&(l=new Bb((u=e.startAt).values||[],!!u.before));let h=null;return e.endAt&&(h=function(u){return new Bb(u.values||[],!u.before)}(e.endAt)),hoe(t,n,o,s,a,"F",l,h)}function Woe(r){return void 0!==r.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=bD(t.unaryFilter.field);return Mr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const i=bD(t.unaryFilter.field);return Mr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const n=bD(t.unaryFilter.field);return Mr.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bD(t.unaryFilter.field);return Mr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Li()}}(r):void 0!==r.fieldFilter?function(t){return Mr.create(bD(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Li()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):void 0!==r.compositeFilter?function(t){return Fs.create(t.compositeFilter.filters.map(e=>Woe(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Li()}}(t.compositeFilter.op))}(r):Li()}function d_e(r){return n_e[r]}function p_e(r){return r_e[r]}function f_e(r){return s_e[r]}function yD(r){return{fieldPath:r.canonicalString()}}function bD(r){return Ta.fromServerFormat(r.fieldPath)}function Goe(r){return r instanceof Mr?function(t){if("=="===t.op){if(Use(t.value))return{unaryFilter:{field:yD(t.field),op:"IS_NAN"}};if(qse(t.value))return{unaryFilter:{field:yD(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Use(t.value))return{unaryFilter:{field:yD(t.field),op:"IS_NOT_NAN"}};if(qse(t.value))return{unaryFilter:{field:yD(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yD(t.field),op:p_e(t.op),value:t.value}}}(r):r instanceof Fs?function(t){const e=t.getFilters().map(i=>Goe(i));return 1===e.length?e[0]:{compositeFilter:{op:f_e(t.op),filters:e}}}(r):Li()}function g_e(r){const t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Koe(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function hu(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=$oe(t)),t=m_e(r.get(e),t);return $oe(t)}function m_e(r,t){let e=t;const i=r.length;for(let n=0;n<i;n++){const s=r.charAt(n);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function $oe(r){return r+"\x01\x01"}function cg(r){const t=r.length;if(tn(t>=2),2===t)return tn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Ur.emptyPath();const e=t-2,i=[];let n="";for(let s=0;s<t;){const o=r.indexOf("\x01",s);switch((o<0||o>e)&&Li(),r.charAt(o+1)){case"\x01":const a=r.substring(s,o);let l;0===n.length?l=a:(n+=a,l=n,n=""),i.push(l);break;case"\x10":n+=r.substring(s,o),n+="\0";break;case"\x11":n+=r.substring(s,o+1);break;default:Li()}s=o+2}return new Ur(i)}const Yoe=["userId","batchId"];function pH(r,t){return[r,hu(t)]}function Zoe(r,t,e){return[r,hu(t),e]}const v_e={},y_e=["prefixPath","collectionGroup","readTime","documentId"],b_e=["prefixPath","collectionGroup","documentId"],C_e=["collectionGroup","readTime","prefixPath","documentId"],w_e=["canonicalId","targetId"],S_e=["targetId","path"],E_e=["path","targetId"],x_e=["collectionId","parent"],T_e=["indexId","uid"],D_e=["uid","sequenceNumber"],I_e=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],A_e=["indexId","uid","orderedDocumentKey"],k_e=["userId","collectionPath","documentId"],R_e=["userId","collectionPath","largestBatchId"],__e=["userId","collectionGroup","largestBatchId"],Qoe=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],M_e=[...Qoe,"documentOverlays"],Xoe=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Joe=Xoe,O_e=[...Joe,"indexConfiguration","indexState","indexEntries"];class N8 extends Fse{constructor(t,e){super(),this.se=t,this.currentSequenceNumber=e}}function zl(r,t){const e=wi(r);return Qp.M(e.se,t)}class B8{constructor(t,e,i,n){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=n}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(t.key)&&YRe(s,t,i[n])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=a1(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=a1(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=_oe();return this.mutations.forEach(n=>{const s=t.get(n.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(n.key)?null:a;const l=Soe(o,a);null!==l&&i.set(n.key,l),o.isValidDocument()||o.convertToNoDocument(gn.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ir())}isEqual(t){return this.batchId===t.batchId&&aD(this.mutations,t.mutations,(e,i)=>Eoe(e,i))&&aD(this.baseMutations,t.baseMutations,(e,i)=>Eoe(e,i))}}class V8{constructor(t,e,i,n){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=n}static from(t,e,i){tn(t.mutations.length===i.length);let n=JRe;const s=t.mutations;for(let o=0;o<s.length;o++)n=n.insert(s[o].key,i[o].version);return new V8(t,e,i,n)}}class H8{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hb{constructor(t,e,i,n,s=gn.min(),o=gn.min(),a=Sl.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new Hb(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new Hb(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new Hb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class eae{constructor(t){this.ie=t}}function tae(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:fH(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:d1(n=r.ie,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:vD(n,s.version.toTimestamp()),createTime:vD(n,s.createTime.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:rS(t.version)};else{if(!t.isUnknownDocument())return Li();i.unknownDocument={path:e.path.toArray(),version:rS(t.version)}}var n,s;return i}function fH(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function rS(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function sS(r){const t=new Uo(r.seconds,r.nanoseconds);return gn.fromTimestamp(t)}function oS(r,t){const e=(t.baseMutations||[]).map(s=>L8(r.ie,s));for(let s=0;s<t.mutations.length-1;++s){const o=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(o.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>L8(r.ie,s)),n=Uo.fromMillis(t.localWriteTimeMs);return new B8(t.batchId,n,e,i)}function g1(r){const t=sS(r.readTime),e=void 0!==r.lastLimboFreeSnapshotVersion?sS(r.lastLimboFreeSnapshotVersion):gn.min();let i;var n;return void 0!==r.query.documents?(tn(1===(n=r.query).documents.length),i=lu(dD(Voe(n.documents[0])))):i=lu(Uoe(r.query)),new Hb(i,r.targetId,0,r.lastListenSequenceNumber,t,e,Sl.fromBase64String(r.resumeToken))}function iae(r,t){const e=rS(t.snapshotVersion),i=rS(t.lastLimboFreeSnapshotVersion);let n;n=rH(t.target)?qoe(r.ie,t.target):F8(r.ie,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:eS(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function z8(r){const t=Uoe({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?aH(t,t.limit,"L"):t}function j8(r,t){return new H8(t.largestBatchId,L8(r.ie,t.overlayMutation))}function nae(r,t){const e=t.path.lastSegment();return[r,hu(t.path.popLast()),e]}function rae(r,t,e,i){return{indexId:r,uid:t.uid||"",sequenceNumber:e,readTime:rS(i.readTime),documentKey:hu(i.documentKey.path),largestBatchId:i.largestBatchId}}class L_e{getBundleMetadata(t,e){return sae(t).get(e).next(i=>{if(i)return{id:(n=i).bundleId,createTime:sS(n.createTime),version:n.version};var n})}saveBundleMetadata(t,e){return sae(t).put({bundleId:(i=e).id,createTime:rS(ja(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return oae(t).get(e).next(i=>{if(i)return{name:(n=i).name,query:z8(n.bundledQuery),readTime:sS(n.readTime)};var n})}saveNamedQuery(t,e){return oae(t).put({name:(i=e).name,readTime:rS(ja(i.readTime)),bundledQuery:i.bundledQuery});var i}}function sae(r){return zl(r,"bundles")}function oae(r){return zl(r,"namedQueries")}class gH{constructor(t,e){this.yt=t,this.userId=e}static re(t,e){return new gH(t,e.uid||"")}getOverlay(t,e){return m1(t).get(nae(this.userId,e)).next(i=>i?j8(this.yt,i):null)}getOverlays(t,e){const i=hg();return st.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){const n=[];return i.forEach((s,o)=>{const a=new H8(e,o);n.push(this.oe(t,a))}),st.waitFor(n)}removeOverlaysForBatchId(t,e,i){const n=new Set;e.forEach(o=>n.add(hu(o.getCollectionPath())));const s=[];return n.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(m1(t).Y("collectionPathOverlayIndex",a))}),st.waitFor(s)}getOverlaysForCollection(t,e,i){const n=hg(),s=hu(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return m1(t).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const h=j8(this.yt,l);n.set(h.getKey(),h)}return n})}getOverlaysForCollectionGroup(t,e,i,n){const s=hg();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return m1(t).Z({index:"collectionGroupOverlayIndex",range:a},(l,h,u)=>{const p=j8(this.yt,h);s.size()<n||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):u.done()}).next(()=>s)}oe(t,e){return m1(t).put(function(i,n,s){const[o,a,l]=nae(n,s.mutation.key);return{userId:n,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:f1(i.ie,s.mutation)}}(this.yt,this.userId,e))}}function m1(r){return zl(r,"documentOverlays")}class aS{constructor(){}ue(t,e){this.ce(t,e),e.ae()}ce(t,e){if("nullValue"in t)this.he(e,5);else if("booleanValue"in t)this.he(e,10),e.le(t.booleanValue?1:0);else if("integerValue"in t)this.he(e,15),e.le(Da(t.integerValue));else if("doubleValue"in t){const i=Da(t.doubleValue);isNaN(i)?this.he(e,13):(this.he(e,15),JM(i)?e.le(0):e.le(i))}else if("timestampValue"in t){const i=t.timestampValue;this.he(e,20),"string"==typeof i?e.fe(i):(e.fe(`${i.seconds||""}`),e.le(i.nanos||0))}else if("stringValue"in t)this.de(t.stringValue,e),this._e(e);else if("bytesValue"in t)this.he(e,30),e.we(Qw(t.bytesValue)),this._e(e);else if("referenceValue"in t)this.me(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.he(e,45),e.le(i.latitude||0),e.le(i.longitude||0)}else"mapValue"in t?Wse(t)?this.he(e,Number.MAX_SAFE_INTEGER):(this.ge(t.mapValue,e),this._e(e)):"arrayValue"in t?(this.ye(t.arrayValue,e),this._e(e)):Li()}de(t,e){this.he(e,25),this.pe(t,e)}pe(t,e){e.fe(t)}ge(t,e){const i=t.fields||{};this.he(e,55);for(const n of Object.keys(i))this.de(n,e),this.ce(i[n],e)}ye(t,e){const i=t.values||[];this.he(e,50);for(const n of i)this.ce(n,e)}me(t,e){this.he(e,37),vi.fromName(t).path.forEach(i=>{this.he(e,60),this.pe(i,e)})}he(t,e){t.le(e)}_e(t){t.le(2)}}function F_e(r){if(0===r)return 8;let t=0;return r>>4==0&&(t+=4,r<<=4),r>>6==0&&(t+=2,r<<=2),r>>7==0&&(t+=1),t}function aae(r){const t=64-function(e){let i=0;for(let n=0;n<8;++n){const s=F_e(255&e[n]);if(i+=s,8!==s)break}return i}(r);return Math.ceil(t/8)}aS.Ie=new aS;class N_e{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ee(i.value),i=e.next();this.Ae()}Re(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.be(i.value),i=e.next();this.Pe()}ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{const n=e.codePointAt(0);this.Ee(240|n>>>18),this.Ee(128|63&n>>>12),this.Ee(128|63&n>>>6),this.Ee(128|63&n)}}this.Ae()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{const n=e.codePointAt(0);this.be(240|n>>>18),this.be(128|63&n>>>12),this.be(128|63&n>>>6),this.be(128|63&n)}}this.Pe()}Se(t){const e=this.De(t),i=aae(e);this.Ce(1+i),this.buffer[this.position++]=255&i;for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=255&e[n]}xe(t){const e=this.De(t),i=aae(e);this.Ce(1+i),this.buffer[this.position++]=~(255&i);for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=~(255&e[n])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(t){this.Ce(t.length),this.buffer.set(t,this.position),this.position+=t.length}Fe(){return this.buffer.slice(0,this.position)}De(t){const e=function(n){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,n,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let n=1;n<e.length;++n)e[n]^=i?255:0;return e}Ee(t){const e=255&t;0===e?(this.ke(0),this.ke(255)):255===e?(this.ke(255),this.ke(0)):this.ke(e)}be(t){const e=255&t;0===e?(this.Me(0),this.Me(255)):255===e?(this.Me(255),this.Me(0)):this.Me(t)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(t){this.Ce(1),this.buffer[this.position++]=t}Me(t){this.Ce(1),this.buffer[this.position++]=~t}Ce(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const n=new Uint8Array(i);n.set(this.buffer),this.buffer=n}}class B_e{constructor(t){this.$e=t}we(t){this.$e.Te(t)}fe(t){this.$e.ve(t)}le(t){this.$e.Se(t)}ae(){this.$e.Ne()}}class V_e{constructor(t){this.$e=t}we(t){this.$e.Re(t)}fe(t){this.$e.Ve(t)}le(t){this.$e.xe(t)}ae(){this.$e.Oe()}}class v1{constructor(){this.$e=new N_e,this.Be=new B_e(this.$e),this.Le=new V_e(this.$e)}seed(t){this.$e.seed(t)}qe(t){return 0===t?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class lS{constructor(t,e,i,n){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=n}Ue(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new lS(this.indexId,this.documentKey,this.arrayValue,i)}}function zb(r,t){let e=r.indexId-t.indexId;return 0!==e?e:(e=lae(r.arrayValue,t.arrayValue),0!==e?e:(e=lae(r.directionalValue,t.directionalValue),0!==e?e:vi.comparator(r.documentKey,t.documentKey)))}function lae(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(0!==i)return i}return r.length-t.length}class H_e{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];for(const e of t.filters){const i=e;i.isInequality()?this.Qe=i:this.Ge.push(i)}}je(t){tn(t.collectionGroup===this.collectionId);const e=y8(t);if(void 0!==e&&!this.We(e))return!1;const i=$w(t);let n=0,s=0;for(;n<i.length&&this.We(i[n]);++n);if(n===i.length)return!0;if(void 0!==this.Qe){const o=i[n];if(!this.ze(this.Qe,o)||!this.He(this.Ke[s++],o))return!1;++n}for(;n<i.length;++n){const o=i[n];if(s>=this.Ke.length||!this.He(this.Ke[s++],o))return!1}return!0}We(t){for(const e of this.Ge)if(this.ze(e,t))return!0;return!1}ze(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}He(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}function hae(r){var t,e;if(tn(r instanceof Mr||r instanceof Fs),r instanceof Mr){if(r instanceof roe){const n=(null===(e=null===(t=r.value.arrayValue)||void 0===t?void 0:t.values)||void 0===e?void 0:e.map(s=>Mr.create(r.field,"==",s)))||[];return Fs.create(n,"or")}return r}const i=r.filters.map(n=>hae(n));return Fs.create(i,r.op)}function z_e(r){if(0===r.getFilters().length)return[];const t=W8(hae(r));return tn(uae(t)),q8(t)||U8(t)?[t]:t.getFilters()}function q8(r){return r instanceof Mr}function U8(r){return r instanceof Fs&&Qse(r)}function uae(r){return q8(r)||U8(r)||function(t){if(t instanceof Fs&&T8(t)){for(const e of t.getFilters())if(!q8(e)&&!U8(e))return!1;return!0}return!1}(r)}function W8(r){if(tn(r instanceof Mr||r instanceof Fs),r instanceof Mr)return r;if(1===r.filters.length)return W8(r.filters[0]);const t=r.filters.map(i=>W8(i));let e=Fs.create(t,r.op);return e=mH(e),uae(e)?e:(tn(e instanceof Fs),tn(hD(e)),tn(e.filters.length>1),e.filters.reduce((i,n)=>G8(i,n)))}function G8(r,t){let e;return tn(r instanceof Mr||r instanceof Fs),tn(t instanceof Mr||t instanceof Fs),e=r instanceof Mr?t instanceof Mr?Fs.create([r,t],"and"):cae(r,t):t instanceof Mr?cae(t,r):function(i,n){if(tn(i.filters.length>0&&n.filters.length>0),hD(i)&&hD(n))return toe(i,n.getFilters());const s=T8(i)?i:n,o=T8(i)?n:i,a=s.filters.map(l=>G8(l,o));return Fs.create(a,"or")}(r,t),mH(e)}function cae(r,t){if(hD(t))return toe(t,r.getFilters());{const e=t.filters.map(i=>G8(r,i));return Fs.create(e,"or")}}function mH(r){if(tn(r instanceof Mr||r instanceof Fs),r instanceof Mr)return r;const t=r.getFilters();if(1===t.length)return mH(t[0]);if(Xse(r))return r;const e=t.map(n=>mH(n)),i=[];return e.forEach(n=>{n instanceof Mr?i.push(n):n instanceof Fs&&(n.op===r.op?i.push(...n.filters):i.push(n))}),1===i.length?i[0]:Fs.create(i,r.op)}class j_e{constructor(){this.Je=new K8}addToCollectionParentIndex(t,e){return this.Je.add(e),st.resolve()}getCollectionParents(t,e){return st.resolve(this.Je.getEntries(e))}addFieldIndex(t,e){return st.resolve()}deleteFieldIndex(t,e){return st.resolve()}getDocumentsMatchingTarget(t,e){return st.resolve(null)}getIndexType(t,e){return st.resolve(0)}getFieldIndexes(t,e){return st.resolve([])}getNextCollectionGroupToUpdate(t){return st.resolve(null)}getMinOffset(t,e){return st.resolve(Vc.min())}getMinOffsetFromCollectionGroup(t,e){return st.resolve(Vc.min())}updateCollectionGroup(t,e,i){return st.resolve()}updateIndexEntries(t,e){return st.resolve()}}class K8{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e]||new Ws(Ur.comparator),s=!n.has(i);return this.index[e]=n.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e];return n&&n.has(i)}getEntries(t){return(this.index[t]||new Ws(Ur.comparator)).toArray()}}const vH=new Uint8Array(0);class q_e{constructor(t,e){this.user=t,this.databaseId=e,this.Ye=new K8,this.Xe=new Vb(i=>eS(i),(i,n)=>r1(i,n)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ye.has(e)){const i=e.lastSegment(),n=e.popLast();t.addOnCommittedListener(()=>{this.Ye.add(e)});const s={collectionId:i,parent:hu(n)};return dae(t).put(s)}return st.resolve()}getCollectionParents(t,e){const i=[],n=IDBKeyRange.bound([e,""],[Mse(e),""],!1,!0);return dae(t).W(n).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(cg(o.parent))}return i})}addFieldIndex(t,e){const i=yH(t),n={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete n.indexId;const s=i.add(n);if(e.indexState){const o=b1(t);return s.next(a=>{o.put(rae(a,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=yH(t),n=b1(t),s=y1(t);return i.delete(e.indexId).next(()=>n.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=y1(t);let n=!0;const s=new Map;return st.forEach(this.Ze(e),o=>this.tn(t,o).next(a=>{n&&(n=!!a),s.set(o,a)})).next(()=>{if(n){let o=ir();const a=[];return st.forEach(s,(l,h)=>{var u;$t("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(O=>`${O.fieldPath}:${O.kind}`).join(",")}`} to execute ${eS(e)}`);const p=function(O,N){const z=y8(N);if(void 0===z)return null;for(const U of sH(O,z.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null}(h,l),m=function(O,N){const z=new Map;for(const U of $w(N))for(const ae of sH(O,U.fieldPath))switch(ae.op){case"==":case"in":z.set(U.fieldPath.canonicalString(),ae.value);break;case"not-in":case"!=":return z.set(U.fieldPath.canonicalString(),ae.value),Array.from(z.values())}return null}(h,l),y=function(O,N){const z=[];let U=!0;for(const ae of $w(N)){const me=0===ae.kind?aoe(O,ae.fieldPath,O.startAt):loe(O,ae.fieldPath,O.startAt);z.push(me.value),U&&(U=me.inclusive)}return new Bb(z,U)}(h,l),C=function(O,N){const z=[];let U=!0;for(const ae of $w(N)){const me=0===ae.kind?loe(O,ae.fieldPath,O.endAt):aoe(O,ae.fieldPath,O.endAt);z.push(me.value),U&&(U=me.inclusive)}return new Bb(z,U)}(h,l),S=this.en(l,h,y),T=this.en(l,h,C),R=this.nn(l,h,m),P=this.sn(l.indexId,p,S,y.inclusive,T,C.inclusive,R);return st.forEach(P,O=>i.J(O,e.limit).next(N=>{N.forEach(z=>{const U=vi.fromSegments(z.documentKey);o.has(U)||(o=o.add(U),a.push(U))})}))}).next(()=>a)}return st.resolve(null)})}Ze(t){let e=this.Xe.get(t);return e||(e=0===t.filters.length?[t]:z_e(Fs.create(t.filters,"and")).map(i=>D8(t.path,t.collectionGroup,t.orderBy,i.getFilters(),t.limit,t.startAt,t.endAt)),this.Xe.set(t,e),e)}sn(t,e,i,n,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),h=l/(null!=e?e.length:1),u=[];for(let p=0;p<l;++p){const m=e?this.rn(e[p/h]):vH,y=this.on(t,m,i[p%h],n),C=this.un(t,m,s[p%h],o),S=a.map(T=>this.on(t,m,T,!0));u.push(...this.createRange(y,C,S))}return u}on(t,e,i,n){const s=new lS(t,vi.empty(),e,i);return n?s:s.Ue()}un(t,e,i,n){const s=new lS(t,vi.empty(),e,i);return n?s.Ue():s}tn(t,e){const i=new H_e(e),n=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,n).next(s=>{let o=null;for(const a of s)i.je(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;const n=this.Ze(e);return st.forEach(n,s=>this.tn(t,s).next(o=>{o?0!==i&&o.fields.length<function(a){let l=new Ws(Ta.comparator),h=!1;for(const u of a.filters)for(const p of u.getFlattenedFilters())p.field.isKeyField()||("array-contains"===p.op||"array-contains-any"===p.op?h=!0:l=l.add(p.field));for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(h?1:0)}(s)&&(i=1):i=0})).next(()=>null!==e.limit&&n.length>1&&2===i?1:i)}cn(t,e){const i=new v1;for(const n of $w(t)){const s=e.data.field(n.fieldPath);if(null==s)return null;const o=i.qe(n.kind);aS.Ie.ue(s,o)}return i.Fe()}rn(t){const e=new v1;return aS.Ie.ue(t,e.qe(0)),e.Fe()}an(t,e){const i=new v1;return aS.Ie.ue(Jw(this.databaseId,e),i.qe(function(n){const s=$w(n);return 0===s.length?0:s[s.length-1].kind}(t))),i.Fe()}nn(t,e,i){if(null===i)return[];let n=[];n.push(new v1);let s=0;for(const o of $w(t)){const a=i[s++];for(const l of n)if(this.hn(e,o.fieldPath)&&i1(a))n=this.ln(n,o,a);else{const h=l.qe(o.kind);aS.Ie.ue(a,h)}}return this.fn(n)}en(t,e,i){return this.nn(t,e,i.position)}fn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Fe();return e}ln(t,e,i){const n=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of n){const l=new v1;l.seed(a.Fe()),aS.Ie.ue(o,l.qe(e.kind)),s.push(l)}return s}hn(t,e){return!!t.filters.find(i=>i instanceof Mr&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=yH(t),n=b1(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const o=[];return st.forEach(s,a=>n.get([a.indexId,this.uid]).next(l=>{o.push(function(h,u){const p=u?new ZM(u.sequenceNumber,new Vc(sS(u.readTime),new vi(cg(u.documentKey)),u.largestBatchId)):ZM.empty(),m=h.fields.map(([y,C])=>new J2(Ta.fromServerFormat(y),C));return new X2(h.indexId,h.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,n)=>{const s=i.indexState.sequenceNumber-n.indexState.sequenceNumber;return 0!==s?s:Bn(i.collectionGroup,n.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const n=yH(t),s=b1(t);return this.dn(t).next(o=>n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>st.forEach(a,l=>s.put(rae(l.indexId,this.user,o,i)))))}updateIndexEntries(t,e){const i=new Map;return st.forEach(e,(n,s)=>{const o=i.get(n.collectionGroup);return(o?st.resolve(o):this.getFieldIndexes(t,n.collectionGroup)).next(a=>(i.set(n.collectionGroup,a),st.forEach(a,l=>this._n(t,n,l).next(h=>{const u=this.wn(s,l);return h.isEqual(u)?st.resolve():this.mn(t,s,l,h,u)}))))})}gn(t,e,i,n){return y1(t).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.an(i,e.key),documentKey:e.key.path.toArray()})}yn(t,e,i,n){return y1(t).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.an(i,e.key),e.key.path.toArray()])}_n(t,e,i){const n=y1(t);let s=new Ws(zb);return n.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.an(i,e)])},(o,a)=>{s=s.add(new lS(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}wn(t,e){let i=new Ws(zb);const n=this.cn(e,t);if(null==n)return i;const s=y8(e);if(null!=s){const o=t.data.field(s.fieldPath);if(i1(o))for(const a of o.arrayValue.values||[])i=i.add(new lS(e.indexId,t.key,this.rn(a),n))}else i=i.add(new lS(e.indexId,t.key,vH,n));return i}mn(t,e,i,n,s){$t("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(a,l,h,u,p){const m=a.getIterator(),y=l.getIterator();let C=cD(m),S=cD(y);for(;C||S;){let T=!1,R=!1;if(C&&S){const P=h(C,S);P<0?R=!0:P>0&&(T=!0)}else null!=C?R=!0:T=!0;T?(u(S),S=cD(y)):R?(p(C),C=cD(m)):(C=cD(m),S=cD(y))}}(n,s,zb,a=>{o.push(this.gn(t,e,i,a))},a=>{o.push(this.yn(t,e,i,a))}),st.waitFor(o)}dn(t){let e=1;return b1(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,n,s)=>{s.done(),e=n.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>zb(o,a)).filter((o,a,l)=>!a||0!==zb(o,l[a-1]));const n=[];n.push(t);for(const o of i){const a=zb(o,t),l=zb(o,e);if(0===a)n[0]=t.Ue();else if(a>0&&l<0)n.push(o),n.push(o.Ue());else if(l>0)break}n.push(e);const s=[];for(let o=0;o<n.length;o+=2){if(this.pn(n[o],n[o+1]))return[];s.push(IDBKeyRange.bound([n[o].indexId,this.uid,n[o].arrayValue,n[o].directionalValue,vH,[]],[n[o+1].indexId,this.uid,n[o+1].arrayValue,n[o+1].directionalValue,vH,[]]))}return s}pn(t,e){return zb(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(pae)}getMinOffset(t,e){return st.mapArray(this.Ze(e),i=>this.tn(t,i).next(n=>n||Li())).next(pae)}}function dae(r){return zl(r,"collectionParents")}function y1(r){return zl(r,"indexEntries")}function yH(r){return zl(r,"indexConfiguration")}function b1(r){return zl(r,"indexState")}function pae(r){tn(0!==r.length);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const n=r[i].indexState.offset;b8(n,t)<0&&(t=n),e<n.largestBatchId&&(e=n.largestBatchId)}return new Vc(t.readTime,t.documentKey,e)}const fae={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $u{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new $u(t,$u.DEFAULT_COLLECTION_PERCENTILE,$u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function gae(r,t,e){const i=r.store("mutations"),n=r.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.Z({range:o},(u,p,m)=>(a++,m.delete()));s.push(l.next(()=>{tn(1===a)}));const h=[];for(const u of e.mutations){const p=Zoe(t,u.key.path,e.batchId);s.push(n.delete(p)),h.push(u.key)}return st.waitFor(s).next(()=>h)}function bH(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw Li();t=r.noDocument}return JSON.stringify(t).length}$u.DEFAULT_COLLECTION_PERCENTILE=10,$u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$u.DEFAULT=new $u(41943040,$u.DEFAULT_COLLECTION_PERCENTILE,$u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$u.DISABLED=new $u(-1,0,0);class CH{constructor(t,e,i,n){this.userId=t,this.yt=e,this.indexManager=i,this.referenceDelegate=n,this.In={}}static re(t,e,i,n){tn(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new CH(s,e,i,n)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jb(t).Z({index:"userMutationsIndex",range:i},(n,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,n){const s=CD(t),o=jb(t);return o.add({}).next(a=>{tn("number"==typeof a);const l=new B8(a,e,i,n),h=function(m,y,C){const S=C.baseMutations.map(R=>f1(m.ie,R)),T=C.mutations.map(R=>f1(m.ie,R));return{userId:y,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:T}}(this.yt,this.userId,l),u=[];let p=new Ws((m,y)=>Bn(m.canonicalString(),y.canonicalString()));for(const m of n){const y=Zoe(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),u.push(o.put(h)),u.push(s.put(y,v_e))}return p.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.In[a]=l.keys()}),st.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return jb(t).get(e).next(i=>i?(tn(i.userId===this.userId),oS(this.yt,i)):null)}Tn(t,e){return this.In[e]?st.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const n=i.keys();return this.In[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return jb(t).Z({index:"userMutationsIndex",range:n},(o,a,l)=>{a.userId===this.userId&&(tn(a.batchId>=i),s=oS(this.yt,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return jb(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(n,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jb(t).W("userMutationsIndex",e).next(i=>i.map(n=>oS(this.yt,n)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=pH(this.userId,e.path),n=IDBKeyRange.lowerBound(i),s=[];return CD(t).Z({range:n},(o,a,l)=>{const[h,u,p]=o,m=cg(u);if(h===this.userId&&e.path.isEqual(m))return jb(t).get(p).next(y=>{if(!y)throw Li();tn(y.userId===this.userId),s.push(oS(this.yt,y))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ws(Bn);const n=[];return e.forEach(s=>{const o=pH(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=CD(t).Z({range:a},(h,u,p)=>{const[m,y,C]=h,S=cg(y);m===this.userId&&s.path.isEqual(S)?i=i.add(C):p.done()});n.push(l)}),st.waitFor(n).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1,s=pH(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Ws(Bn);return CD(t).Z({range:o},(l,h,u)=>{const[p,m,y]=l,C=cg(m);p===this.userId&&i.isPrefixOf(C)?C.length===n&&(a=a.add(y)):u.done()}).next(()=>this.En(t,a))}En(t,e){const i=[],n=[];return e.forEach(s=>{n.push(jb(t).get(s).next(o=>{if(null===o)throw Li();tn(o.userId===this.userId),i.push(oS(this.yt,o))}))}),st.waitFor(n).next(()=>i)}removeMutationBatch(t,e){return gae(t.se,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),st.forEach(i,n=>this.referenceDelegate.markPotentiallyOrphaned(t,n))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return st.resolve();const i=IDBKeyRange.lowerBound([this.userId]),n=[];return CD(t).Z({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=cg(s[1]);n.push(l)}else a.done()}).next(()=>{tn(0===n.length)})})}containsKey(t,e){return mae(t,this.userId,e)}Rn(t){return vae(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function mae(r,t,e){const i=pH(t,e.path),n=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return CD(r).Z({range:s,X:!0},(a,l,h)=>{const[u,p,m]=a;u===t&&p===n&&(o=!0),h.done()}).next(()=>o)}function jb(r){return zl(r,"mutations")}function CD(r){return zl(r,"documentMutations")}function vae(r){return zl(r,"mutationQueues")}class hS{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new hS(0)}static vn(){return new hS(-1)}}class U_e{constructor(t,e){this.referenceDelegate=t,this.yt=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new hS(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>gn.fromTimestamp(new Uo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(n=>(n.highestListenSequenceNumber=e,i&&(n.lastRemoteSnapshotVersion=i.toTimestamp()),e>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e),this.Sn(t,n)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>wD(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(tn(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let n=0;const s=[];return wD(t).Z((o,a)=>{const l=g1(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(n++,s.push(this.removeTargetData(t,l)))}).next(()=>st.waitFor(s)).next(()=>n)}forEachTarget(t,e){return wD(t).Z((i,n)=>{const s=g1(n);e(s)})}Vn(t){return yae(t).get("targetGlobalKey").next(e=>(tn(null!==e),e))}Sn(t,e){return yae(t).put("targetGlobalKey",e)}Dn(t,e){return wD(t).put(iae(this.yt,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=eS(e),n=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return wD(t).Z({range:n,index:"queryTargetsIndex"},(o,a,l)=>{const h=g1(a);r1(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const n=[],s=qb(t);return e.forEach(o=>{const a=hu(o.path);n.push(s.put({targetId:i,path:a})),n.push(this.referenceDelegate.addReference(t,i,o))}),st.waitFor(n)}removeMatchingKeys(t,e,i){const n=qb(t);return st.forEach(e,s=>{const o=hu(s.path);return st.waitFor([n.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=qb(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(n)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),n=qb(t);let s=ir();return n.Z({range:i,X:!0},(o,a,l)=>{const h=cg(o[1]),u=new vi(h);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=hu(e.path),n=IDBKeyRange.bound([i],[Mse(i)],!1,!0);let s=0;return qb(t).Z({index:"documentTargetsIndex",X:!0,range:n},([o,a],l,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}ne(t,e){return wD(t).get(e).next(i=>i?g1(i):null)}}function wD(r){return zl(r,"targets")}function yae(r){return zl(r,"targetGlobal")}function qb(r){return zl(r,"targetDocuments")}function bae([r,t],[e,i]){const n=Bn(r,e);return 0===n?Bn(t,i):n}class W_e{constructor(t){this.xn=t,this.buffer=new Ws(bae),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();bae(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class G_e{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;$t("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,wt.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){Ob(i)?$t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Mb(i)}yield e.Fn(3e5)}))}}class K_e{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return st.resolve(Hc.at);const i=new W_e(e);return this.$n.forEachTarget(t,n=>i.On(n.sequenceNumber)).next(()=>this.$n.Ln(t,n=>i.On(n))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector","Garbage collection skipped; disabled"),st.resolve(fae)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fae):this.qn(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}qn(t,e){let i,n,s,o,a,l,h;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),n=this.params.maximumSequenceNumbersToCollect):n=p,o=Date.now(),this.nthSequenceNumber(t,n))).next(p=>(i=p,a=Date.now(),this.removeTargets(t,i,e))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(p=>(h=Date.now(),m8()<=Hh.in.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${n} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(h-l)+`ms\nTotal Duration: ${h-u}ms`),st.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:p})))}}class $_e{constructor(t,e){this.db=t,this.garbageCollector=new K_e(this,e)}Bn(t){const e=this.Un(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(n=>i+n))}Un(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,n)=>e(n))}addReference(t,e,i){return wH(t,i)}removeReference(t,e,i){return wH(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return wH(t,e)}Gn(t,e){return function(i,n){let s=!1;return vae(i).tt(o=>mae(i,o,n).next(a=>(a&&(s=!0),st.resolve(!a)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let s=0;return this.Kn(t,(o,a)=>{if(a<=e){const l=this.Gn(t,o).next(h=>{if(!h)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,gn.min()),qb(t).delete([0,hu(o.path)])))});n.push(l)}}).next(()=>st.waitFor(n)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return wH(t,e)}Kn(t,e){const i=qb(t);let n,s=Hc.at;return i.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:h})=>{0===o?(s!==Hc.at&&e(new vi(cg(n)),s),s=h,n=l):s=Hc.at}).next(()=>{s!==Hc.at&&e(new vi(cg(n)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function wH(r,t){return qb(r).put((i=r.currentSequenceNumber,{targetId:0,path:hu(t.path),sequenceNumber:i}));var i}class Cae{constructor(){this.changes=new Vb(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,xo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?st.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class Y_e{constructor(t){this.yt=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return uS(t).put(i)}removeEntry(t,e,i){return uS(t).delete(function(n,s){const o=n.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],fH(s),o[o.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=xo.newInvalidDocument(e);return uS(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(C1(e))},(n,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:xo.newInvalidDocument(e)};return uS(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(C1(e))},(n,s)=>{i={document:this.jn(e,s),size:bH(s)}}).next(()=>i)}getEntries(t,e){let i=Ku();return this.zn(t,e,(n,s)=>{const o=this.jn(n,s);i=i.insert(n,o)}).next(()=>i)}Hn(t,e){let i=Ku(),n=new Ia(vi.comparator);return this.zn(t,e,(s,o)=>{const a=this.jn(s,o);i=i.insert(s,a),n=n.insert(s,bH(o))}).next(()=>({documents:i,Jn:n}))}zn(t,e,i){if(e.isEmpty())return st.resolve();let n=new Ws(xae);e.forEach(l=>n=n.add(l));const s=IDBKeyRange.bound(C1(n.first()),C1(n.last())),o=n.getIterator();let a=o.getNext();return uS(t).Z({index:"documentKeyIndex",range:s},(l,h,u)=>{const p=vi.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&xae(a,p)<0;)i(a,null),a=o.getNext();a&&a.isEqual(p)&&(i(a,h),a=o.hasNext()?o.getNext():null),a?u.j(C1(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(t,e,i){const n=[e.popLast().toArray(),e.lastSegment(),fH(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uS(t).W(IDBKeyRange.bound(n,s,!0)).next(o=>{let a=Ku();for(const l of o){const h=this.jn(vi.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(h.key,h)}return a})}getAllFromCollectionGroup(t,e,i,n){let s=Ku();const o=Eae(e,i),a=Eae(e,Vc.max());return uS(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,h,u)=>{const p=this.jn(vi.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(p.key,p),s.size===n&&u.done()}).next(()=>s)}newChangeBuffer(t){return new Z_e(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return Sae(t).get("remoteDocumentGlobalKey").next(e=>(tn(!!e),e))}Qn(t,e){return Sae(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function P_e(r,t){let e;if(t.document)e=joe(r.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=vi.fromSegments(t.noDocument.path),n=sS(t.noDocument.readTime);e=xo.newNoDocument(i,n),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Li();{const i=vi.fromSegments(t.unknownDocument.path),n=sS(t.unknownDocument.version);e=xo.newUnknownDocument(i,n)}}return t.readTime&&e.setReadTime(function(i){const n=new Uo(i[0],i[1]);return gn.fromTimestamp(n)}(t.readTime)),e}(this.yt,e);if(!i.isNoDocument()||!i.version.isEqual(gn.min()))return i}return xo.newInvalidDocument(t)}}function wae(r){return new Y_e(r)}class Z_e extends Cae{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new Vb(i=>i.toString(),(i,n)=>i.isEqual(n))}applyChanges(t){const e=[];let i=0,n=new Ws((s,o)=>Bn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=tae(this.Yn.yt,o);n=n.add(s.path.popLast()),i+=bH(l)-a.size,e.push(this.Yn.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=tae(this.Yn.yt,o.convertToNoDocument(gn.min()));e.push(this.Yn.addEntry(t,s,l))}}),n.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),st.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:n})=>(n.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function Sae(r){return zl(r,"remoteDocumentGlobal")}function uS(r){return zl(r,"remoteDocumentsV14")}function C1(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Eae(r,t){const e=t.documentKey.path.toArray();return[r,fH(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function xae(r,t){const e=r.path.toArray(),i=t.path.toArray();let n=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(n=Bn(e[s],i[s]),n)return n;return n=Bn(e.length,i.length),n||(n=Bn(e[e.length-2],i[i.length-2]),n||Bn(e[e.length-1],i[i.length-1]))}class Q_e{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class Tae{constructor(t,e,i,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=n}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(n=>(i=n,this.remoteDocumentCache.getEntry(t,e))).next(n=>(null!==i&&a1(i.mutation,n,zc.empty(),Uo.now()),n))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,ir()).next(()=>i))}getLocalViewOfDocuments(t,e,i=ir()){const n=hg();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,i).next(s=>{let o=l1();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=hg();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,ir()))}populateOverlays(t,e,i){const n=[];return i.forEach(s=>{e.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(t,n).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,n){let s=Ku();const o=h1(),a=h1();return e.forEach((l,h)=>{const u=i.get(h.key);n.has(h.key)&&(void 0===u||u.mutation instanceof sv)?s=s.insert(h.key,h):void 0!==u&&(o.set(h.key,u.mutation.getFieldMask()),a1(u.mutation,h,u.mutation.getFieldMask(),Uo.now()))}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,u)=>o.set(h,u)),e.forEach((h,u)=>{var p;return a.set(h,new Q_e(u,null!==(p=o.get(h))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(t,e){const i=h1();let n=new Ia((o,a)=>o-a),s=ir();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=e.get(l);if(null===h)return;let u=i.get(l)||zc.empty();u=a.applyToLocalView(h,u),i.set(l,u);const p=(n.get(a.batchId)||ir()).add(l);n=n.insert(a.batchId,p)})}).next(()=>{const o=[],a=n.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,u=l.value,p=_oe();u.forEach(m=>{if(!s.has(m)){const y=Soe(e.get(m),i.get(m));null!==y&&p.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,p))}return st.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return vi.isDocumentKey((n=e).path)&&null===n.collectionGroup&&0===n.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):A8(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var n}getNextDocuments(t,e,i,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,n).next(s=>{const o=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,n-s.size):st.resolve(hg());let a=-1,l=s;return o.next(h=>st.forEach(h,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(u)?st.resolve():this.remoteDocumentCache.getEntry(t,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,ir())).next(u=>({batchId:a,changes:Roe(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new vi(e)).next(i=>{let n=l1();return i.isFoundDocument()&&(n=n.insert(i.key,i)),n})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const n=e.collectionGroup;let s=l1();return this.indexManager.getCollectionParents(t,n).next(o=>st.forEach(o,a=>{const l=(h=e,u=a.child(n),new rv(u,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,u;return this.getDocumentsMatchingCollectionQuery(t,l,i).next(h=>{h.forEach((u,p)=>{s=s.insert(u,p)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let n;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(n=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((a,l)=>{const h=l.getKey();null===n.get(h)&&(n=n.insert(h,xo.newInvalidDocument(h)))});let o=l1();return n.forEach((a,l)=>{const h=s.get(a);void 0!==h&&a1(h.mutation,l,zc.empty(),Uo.now()),_8(e,l)&&(o=o.insert(a,l))}),o})}}class X_e{constructor(t){this.yt=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return st.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:ja(i.createTime)}),st.resolve()}getNamedQuery(t,e){return st.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:z8(i.bundledQuery),readTime:ja(i.readTime)}),st.resolve();var i}}class J_e{constructor(){this.overlays=new Ia(vi.comparator),this.es=new Map}getOverlay(t,e){return st.resolve(this.overlays.get(e))}getOverlays(t,e){const i=hg();return st.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((n,s)=>{this.oe(t,e,s)}),st.resolve()}removeOverlaysForBatchId(t,e,i){const n=this.es.get(i);return void 0!==n&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),st.resolve()}getOverlaysForCollection(t,e,i){const n=hg(),s=e.length+1,o=new vi(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&n.set(l.getKey(),l)}return st.resolve(n)}getOverlaysForCollectionGroup(t,e,i,n){let s=new Ia((h,u)=>h-u);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>i){let u=s.get(h.largestBatchId);null===u&&(u=hg(),s=s.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const a=hg(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>a.set(h,u)),!(a.size()>=n)););return st.resolve(a)}oe(t,e,i){const n=this.overlays.get(i.key);if(null!==n){const o=this.es.get(n.largestBatchId).delete(i.key);this.es.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new H8(e,i));let s=this.es.get(e);void 0===s&&(s=ir(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class $8{constructor(){this.ns=new Ws(jl.ss),this.rs=new Ws(jl.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new jl(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new jl(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new vi(new Ur([])),i=new jl(e,t),n=new jl(e,t+1),s=[];return this.rs.forEachInRange([i,n],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new vi(new Ur([])),i=new jl(e,t),n=new jl(e,t+1);let s=ir();return this.rs.forEachInRange([i,n],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new jl(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class jl{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return vi.comparator(t.key,e.key)||Bn(t._s,e._s)}static os(t,e){return Bn(t._s,e._s)||vi.comparator(t.key,e.key)}}class eMe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Ws(jl.ss)}checkEmpty(t){return st.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,n){const s=this.ws;this.ws++;const o=new B8(s,e,i,n);this.mutationQueue.push(o);for(const a of n)this.gs=this.gs.add(new jl(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return st.resolve(o)}lookupMutationBatch(t,e){return st.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.ps(e+1),s=n<0?0:n;return st.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return st.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return st.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new jl(e,0),n=new jl(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,n],o=>{const a=this.ys(o._s);s.push(a)}),st.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ws(Bn);return e.forEach(n=>{const s=new jl(n,0),o=new jl(n,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{i=i.add(a._s)})}),st.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1;let s=i;vi.isDocumentKey(s)||(s=s.child(""));const o=new jl(new vi(s),0);let a=new Ws(Bn);return this.gs.forEachWhile(l=>{const h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===n&&(a=a.add(l._s)),!0)},o),st.resolve(this.Is(a))}Is(t){const e=[];return t.forEach(i=>{const n=this.ys(i);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){tn(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return st.forEach(e.mutations,n=>{const s=new jl(n.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new jl(e,0),n=this.gs.firstAfterOrEqual(i);return st.resolve(e.isEqual(n&&n.key))}performConsistencyCheck(t){return st.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class tMe{constructor(t){this.Es=t,this.docs=new Ia(vi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,n=this.docs.get(i),s=n?n.size:0,o=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return st.resolve(i?i.document.mutableCopy():xo.newInvalidDocument(e))}getEntries(t,e){let i=Ku();return e.forEach(n=>{const s=this.docs.get(n);i=i.insert(n,s?s.document.mutableCopy():xo.newInvalidDocument(n))}),st.resolve(i)}getAllFromCollection(t,e,i){let n=Ku();const s=new vi(e.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!e.isPrefixOf(a.path))break;a.path.length>e.length+1||b8(Pse(l),i)<=0||(n=n.insert(l.key,l.mutableCopy()))}return st.resolve(n)}getAllFromCollectionGroup(t,e,i,n){Li()}As(t,e){return st.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new iMe(this)}getSize(t){return st.resolve(this.size)}}class iMe extends Cae{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,n)=>{n.isValidDocument()?e.push(this.Yn.addEntry(t,n)):this.Yn.removeEntry(i)}),st.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class nMe{constructor(t){this.persistence=t,this.Rs=new Vb(e=>eS(e),r1),this.lastRemoteSnapshotVersion=gn.min(),this.highestTargetId=0,this.bs=0,this.Ps=new $8,this.targetCount=0,this.vs=hS.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,n)=>e(n)),st.resolve()}getLastRemoteSnapshotVersion(t){return st.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return st.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),st.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),st.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new hS(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,st.resolve()}updateTargetData(t,e){return this.Dn(e),st.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,st.resolve()}removeTargets(t,e,i){let n=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),n++)}),st.waitFor(s).next(()=>n)}getTargetCount(t){return st.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return st.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),st.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const n=this.persistence.referenceDelegate,s=[];return n&&e.forEach(o=>{s.push(n.markPotentiallyOrphaned(t,o))}),st.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),st.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return st.resolve(i)}containsKey(t,e){return st.resolve(this.Ps.containsKey(e))}}class Dae{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new Hc(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new nMe(this),this.indexManager=new j_e,this.remoteDocumentCache=new tMe(i=>this.referenceDelegate.xs(i)),this.yt=new eae(e),this.Ns=new X_e(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new J_e,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new eMe(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$t("MemoryPersistence","Starting transaction:",t);const n=new rMe(this.Ss.next());return this.referenceDelegate.ks(),i(n).next(s=>this.referenceDelegate.Os(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}Ms(t,e){return st.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class rMe extends Fse{constructor(t){super(),this.currentSequenceNumber=t}}class SH{constructor(t){this.persistence=t,this.Fs=new $8,this.$s=null}static Bs(t){return new SH(t)}get Ls(){if(this.$s)return this.$s;throw Li()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),st.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),st.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),st.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(n=>this.Ls.add(n.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(n=>{n.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return st.forEach(this.Ls,i=>{const n=vi.fromPath(i);return this.qs(t,n).next(s=>{s||e.removeEntry(n,gn.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.qs(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}qs(t,e){return st.or([()=>st.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class sMe{constructor(t){this.yt=t}$(t,e,i,n){const s=new eH("createOrUpgrade",e);var a;i<1&&n>=1&&(t.createObjectStore("owner"),(a=t).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yoe,{unique:!0}),a.createObjectStore("documentMutations"),Iae(t),function(a){a.createObjectStore("remoteDocuments")}(t));let o=st.resolve();return i<3&&n>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(t),Iae(t)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:gn.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),i<4&&n>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(h=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yoe,{unique:!0});const u=l.store("mutations"),p=h.map(m=>u.put(m));return st.waitFor(p)})}(t,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&n>=5&&(o=o.next(()=>this.Us(s))),i<6&&n>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&n>=7&&(o=o.next(()=>this.Gs(s))),i<8&&n>=8&&(o=o.next(()=>this.Qs(t,s))),i<9&&n>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&n>=10&&(o=o.next(()=>this.js(s))),i<11&&n>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&n>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:k_e});l.createIndex("collectionPathOverlayIndex",R_e,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",__e,{unique:!1})}(t)})),i<13&&n>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:y_e});l.createIndex("documentKeyIndex",b_e),l.createIndex("collectionGroupIndex",C_e)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&n>=14&&(o=o.next(()=>this.zs(t,s))),i<15&&n>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:T_e}).createIndex("sequenceNumberIndex",D_e,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:I_e}).createIndex("documentKeyIndex",A_e,{unique:!1})}(t))),o}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,n)=>{e+=bH(n)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Us(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(n=>st.forEach(n,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>st.forEach(a,l=>{tn(l.userId===s.userId);const h=oS(this.yt,l);return gae(t,s.userId,h).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(n=>{const s=[];return i.Z((o,a)=>{const l=new Ur(o),h=[0,hu(l)];s.push(e.get(h).next(u=>u?st.resolve():e.put({targetId:0,path:hu(l),sequenceNumber:n.highestListenSequenceNumber})))}).next(()=>st.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:x_e});const i=e.store("collectionParents"),n=new K8,s=o=>{if(n.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:hu(l)})}};return e.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Ur(o);return s(l.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([o,a,l],h)=>{const u=cg(a);return s(u.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,n)=>{const s=g1(n),o=iae(this.yt,s);return e.put(o)})}Ws(t,e){const i=e.store("remoteDocuments"),n=[];return i.Z((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(h=o,h.document?new vi(Ur.fromString(h.document.name).popFirst(5)):h.noDocument?vi.fromSegments(h.noDocument.path):h.unknownDocument?vi.fromSegments(h.unknownDocument.path):Li()).path.toArray();var h;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};n.push(a.put(u))}).next(()=>st.waitFor(n))}zs(t,e){const i=e.store("mutations"),n=wae(this.yt),s=new Dae(SH.Bs,this.yt.ie);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var h;let u=null!==(h=a.get(l.userId))&&void 0!==h?h:ir();oS(this.yt,l).keys().forEach(p=>u=u.add(p)),a.set(l.userId,u)}),st.forEach(a,(l,h)=>{const u=new Hl(h),p=gH.re(this.yt,u),m=s.getIndexManager(u),y=CH.re(u,this.yt,m,s.referenceDelegate);return new Tae(n,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new N8(e,Hc.at),l).next()})})}}function Iae(r){r.createObjectStore("targetDocuments",{keyPath:S_e}).createIndex("documentTargetsIndex",E_e,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",w_e,{unique:!0}),r.createObjectStore("targetGlobal")}const Y8="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Z8{constructor(t,e,i,n,s,o,a,l,h,u,p=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=o,this.document=a,this.Js=h,this.Ys=u,this.Xs=p,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=m=>Promise.resolve(),!Z8.C())throw new zt(dt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new $_e(this,n),this.ii=e+"main",this.yt=new eae(l),this.ri=new Qp(this.ii,this.Xs,new sMe(this.yt)),this.Cs=new U_e(this.referenceDelegate,this.yt),this.remoteDocumentCache=wae(this.yt),this.Ns=new L_e,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&za("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new zt(dt.FAILED_PRECONDITION,Y8);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new Hc(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,wt.Z)(function*(n){if(e.started)return t(n)});return function(n){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,wt.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,wt.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>EH(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(Ob(t))return $t("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return w1(t).get("owner").next(e=>st.resolve(this.mi(e)))}gi(t){return EH(t).delete(this.clientId)}yi(){var t=this;return(0,wt.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const n=zl(i,"clientMetadata");return n.W().next(s=>{const o=t.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return st.forEach(a,l=>n.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?st.resolve(!0):w1(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new zt(dt.FAILED_PRECONDITION,Y8);return!1}}return!(!this.networkEnabled||!this.inForeground)||EH(t).W().next(i=>void 0===this.Ii(i,5e3).find(n=>{if(this.clientId!==n.clientId){const o=!this.inForeground&&n.inForeground,a=this.networkEnabled===n.networkEnabled;if(!this.networkEnabled&&n.networkEnabled||o&&a)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$t("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,wt.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new N8(e,Hc.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>EH(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return CH.re(t,this.yt,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new q_e(t,this.yt.ie.databaseId)}getDocumentOverlayCache(t){return gH.re(this.yt,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$t("IndexedDbPersistence","Starting transaction:",t);const n="readonly"===e?"readonly":"readwrite",s=15===(o=this.Xs)?O_e:14===o?Joe:13===o?Xoe:12===o?M_e:11===o?Qoe:void Li();var o;let a;return this.ri.runTransaction(t,n,s,l=>(a=new N8(l,this.Ss?this.Ss.next():Hc.at),"readwrite-primary"===e?this.fi(a).next(h=>!!h||this.di(a)).next(h=>{if(!h)throw za(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new zt(dt.FAILED_PRECONDITION,Lse);return i(a)}).next(h=>this.wi(a).next(()=>h)):this.Vi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(t){return w1(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new zt(dt.FAILED_PRECONDITION,Y8)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return w1(t).put("owner",e)}static C(){return Qp.C()}_i(t){const e=w1(t);return e.get("owner").next(i=>this.mi(i)?($t("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):st.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(za(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,ne.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $t("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return za("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){za("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function w1(r){return zl(r,"owner")}function EH(r){return zl(r,"clientMetadata")}function Q8(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}class X8{constructor(t,e,i,n){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=n}static Ci(t,e){let i=ir(),n=ir();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new X8(t,e.fromCache,i,n)}}class Aae{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,n){return this.ki(t,e).next(s=>s||this.Oi(t,e,n,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(uoe(e))return st.resolve(null);let i=lu(e);return this.indexManager.getIndexType(t,i).next(n=>0===n?null:(null!==e.limit&&1===n&&(e=aH(e,null,"F"),i=lu(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=ir(...s);return this.Ni.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const h=this.Fi(e,a);return this.$i(e,h,o,l.readTime)?this.ki(t,aH(e,null,"F")):this.Bi(t,h,e,l)}))})))}Oi(t,e,i,n){return uoe(e)||n.isEqual(gn.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const o=this.Fi(e,s);return this.$i(e,o,i,n)?this.Mi(t,e):(m8()<=Hh.in.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),R8(e)),this.Bi(t,o,e,Ose(n,-1)))})}Fi(t,e){let i=new Ws(poe(t));return e.forEach((n,s)=>{_8(t,s)&&(i=i.add(s))}),i}$i(t,e,i,n){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}Mi(t,e){return m8()<=Hh.in.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",R8(e)),this.Ni.getDocumentsMatchingQuery(t,e,Vc.min())}Bi(t,e,i,n){return this.Ni.getDocumentsMatchingQuery(t,i,n).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class oMe{constructor(t,e,i,n){this.persistence=t,this.Li=e,this.yt=n,this.qi=new Ia(Bn),this.Ui=new Vb(s=>eS(s),r1),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Tae(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.qi))}}function kae(r,t,e,i){return new oMe(r,t,e,i)}function Rae(r,t){return J8.apply(this,arguments)}function J8(){return J8=(0,wt.Z)(function*(r,t){const e=wi(r);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let n;return e.mutationQueue.getAllMutationBatches(i).next(s=>(n=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ir();for(const h of n){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of s){a.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(h=>({ji:h,removedBatchIds:o,addedBatchIds:a}))})})}),J8.apply(this,arguments)}function aMe(r,t){const e=wi(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const n=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,h){const u=l.batch,p=u.keys();let m=st.resolve();return p.forEach(y=>{m=m.next(()=>h.getEntry(a,y)).next(C=>{const S=l.docVersions.get(y);tn(null!==S),C.version.compareTo(S)<0&&(u.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),h.addEntry(C)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,n,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=ir();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(t))).next(()=>e.localDocuments.getDocuments(i,n))})}function _ae(r){const t=wi(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function lMe(r,t){const e=wi(r),i=t.snapshotVersion;let n=e.qi;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.Gi.newChangeBuffer({trackRemovals:!0});n=e.qi;const a=[];t.targetChanges.forEach((u,p)=>{const m=n.get(p);if(!m)return;a.push(e.Cs.removeMatchingKeys(s,u.removedDocuments,p).next(()=>e.Cs.addMatchingKeys(s,u.addedDocuments,p)));let y=m.withSequenceNumber(s.currentSequenceNumber);var C,S,T;t.targetMismatches.has(p)?y=y.withResumeToken(Sl.EMPTY_BYTE_STRING,gn.min()).withLastLimboFreeSnapshotVersion(gn.min()):u.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(u.resumeToken,i)),n=n.insert(p,y),S=y,T=u,(0===(C=m).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0)&&a.push(e.Cs.updateTargetData(s,y))});let l=Ku(),h=ir();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Mae(s,o,t.documentUpdates).next(u=>{l=u.Wi,h=u.zi})),!i.isEqual(gn.min())){const u=e.Cs.getLastRemoteSnapshotVersion(s).next(p=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return st.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.qi=n,s))}function Mae(r,t,e){let i=ir(),n=ir();return e.forEach(s=>i=i.add(s)),t.getEntries(r,i).next(s=>{let o=Ku();return e.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(n=n.add(a)),l.isNoDocument()&&l.version.isEqual(gn.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||0===l.version.compareTo(h.version)&&h.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):$t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Wi:o,zi:n}})}function hMe(r,t){const e=wi(r);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function SD(r,t){const e=wi(r);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let n;return e.Cs.getTargetData(i,t).next(s=>s?(n=s,st.resolve(n)):e.Cs.allocateTargetId(i).next(o=>(n=new Hb(t,o,0,i.currentSequenceNumber),e.Cs.addTargetData(i,n).next(()=>n))))}).then(i=>{const n=e.qi.get(i.targetId);return(null===n||i.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.qi=e.qi.insert(i.targetId,i),e.Ui.set(t,i.targetId)),i})}function ED(r,t,e){return eG.apply(this,arguments)}function eG(){return eG=(0,wt.Z)(function*(r,t,e){const i=wi(r),n=i.qi.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,n)))}catch(o){if(!Ob(o))throw o;$t("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.qi=i.qi.remove(t),i.Ui.delete(n.target)}),eG.apply(this,arguments)}function xH(r,t,e){const i=wi(r);let n=gn.min(),s=ir();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,h){const u=wi(a),p=u.Ui.get(h);return void 0!==p?st.resolve(u.qi.get(p)):u.Cs.getTargetData(l,h)}(i,o,lu(t)).next(a=>{if(a)return n=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,t,e?n:gn.min(),e?s:ir())).next(a=>(Lae(i,doe(t),a),{documents:a,Hi:s})))}function Oae(r,t){const e=wi(r),i=wi(e.Cs),n=e.qi.get(t);return n?Promise.resolve(n.target):e.persistence.runTransaction("Get target data","readonly",s=>i.ne(s,t).next(o=>o?o.target:null))}function Pae(r,t){const e=wi(r),i=e.Ki.get(t)||gn.min();return e.persistence.runTransaction("Get new document changes","readonly",n=>e.Gi.getAllFromCollectionGroup(n,t,Ose(i,-1),Number.MAX_SAFE_INTEGER)).then(n=>(Lae(e,t,n),n))}function Lae(r,t,e){let i=r.Ki.get(t)||gn.min();e.forEach((n,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),r.Ki.set(t,i)}function tG(){return tG=(0,wt.Z)(function*(r,t,e,i){const n=wi(r);let s=ir(),o=Ku();for(const h of e){const u=t.Ji(h.metadata.name);h.document&&(s=s.add(u));const p=t.Yi(h);p.setReadTime(t.Xi(h.metadata.readTime)),o=o.insert(u,p)}const a=n.Gi.newChangeBuffer({trackRemovals:!0}),l=yield SD(n,(h=i,lu(dD(Ur.fromString(`__bundle__/docs/${h}`)))));var h;return n.persistence.runTransaction("Apply bundle documents","readwrite",h=>Mae(h,a,o).next(u=>(a.apply(h),u)).next(u=>n.Cs.removeMatchingKeysForTargetId(h,l.targetId).next(()=>n.Cs.addMatchingKeys(h,s,l.targetId)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,u.Wi,u.zi)).next(()=>u.Wi)))}),tG.apply(this,arguments)}function cMe(r,t){return iG.apply(this,arguments)}function iG(){return iG=(0,wt.Z)(function*(r,t,e=ir()){const i=yield SD(r,lu(z8(t.bundledQuery))),n=wi(r);return n.persistence.runTransaction("Save named query","readwrite",s=>{const o=ja(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return n.Ns.saveNamedQuery(s,t);const a=i.withResumeToken(Sl.EMPTY_BYTE_STRING,o);return n.qi=n.qi.insert(a.targetId,a),n.Cs.updateTargetData(s,a).next(()=>n.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>n.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>n.Ns.saveNamedQuery(s,t))})}),iG.apply(this,arguments)}function Fae(r,t){return`firestore_clients_${r}_${t}`}function Nae(r,t,e){let i=`firestore_mutations_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function nG(r,t){return`firestore_targets_${r}_${t}`}class TH{constructor(t,e,i,n){this.user=t,this.batchId=e,this.state=i,this.error=n}static Zi(t,e,i){const n=JSON.parse(i);let s,o="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return o&&n.error&&(o="string"==typeof n.error.message&&"string"==typeof n.error.code,o&&(s=new zt(n.error.code,n.error.message))),o?new TH(t,e,n.state,s):(za("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class S1{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let n,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(n=new zt(i.error.code,i.error.message))),s?new S1(t,i.state,n):(za("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class DH{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let n="object"==typeof i&&i.activeTargetIds instanceof Array,s=cH();for(let o=0;n&&o<i.activeTargetIds.length;++o)n=Hse(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return n?new DH(t,s):(za("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class rG{constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new rG(e.clientId,e.onlineState):(za("SharedClientState",`Failed to parse online state: ${t}`),null)}}class sG{constructor(){this.activeTargetIds=cH()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oG{constructor(t,e,i,n,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Ia(Bn),this.started=!1,this.cr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=Fae(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new sG),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,wt.Z)(function*(){const e=yield t.syncEngine.vi();for(const n of e){if(n===t.sr)continue;const s=t.getItem(Fae(t.persistenceKey,n));if(s){const o=DH.Zi(n,s);o&&(t.ur=t.ur.insert(o.clientId,o))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const n=t.yr(i);n&&t.pr(n)}for(const n of t.cr)t.rr(n);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,n)=>{n.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(nG(this.persistenceKey,t));if(i){const n=S1.Zi(t,i);n&&(e=n.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(nG(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(n=>{this.Er(n)}),this.currentUser=t,i.forEach(n=>{this.addPendingMutation(n)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $t("SharedClientState","READ",t,e),e}setItem(t,e){$t("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$t("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($t("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void za("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,wt.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const n=e.vr(i.key);return e.Vr(n,null)}{const n=e.Sr(i.key,i.newValue);if(n)return e.Vr(n.clientId,n)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const n=e.Dr(i.key,i.newValue);if(n)return e.Cr(n)}}else if(e._r.test(i.key)){if(null!==i.newValue){const n=e.Nr(i.key,i.newValue);if(n)return e.kr(n)}}else if(i.key===e.wr){if(null!==i.newValue){const n=e.yr(i.newValue);if(n)return e.pr(n)}}else if(i.key===e.hr){const n=function(s){let o=Hc.at;if(null!=s)try{const a=JSON.parse(s);tn("number"==typeof a),o=a}catch(a){za("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);n!==Hc.at&&e.sequenceNumberHandler(n)}else if(i.key===e.mr){const n=e.Or(i.newValue);yield Promise.all(n.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const n=new TH(this.currentUser,t,e,i),s=Nae(this.persistenceKey,this.currentUser,t);this.setItem(s,n.tr())}Er(t){const e=Nae(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const n=nG(this.persistenceKey,t),s=new S1(t,e,i);this.setItem(n,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return DH.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),n=Number(i[1]);return TH.Zi(new Hl(void 0!==i[2]?i[2]:null),n,e)}Nr(t,e){const i=this._r.exec(t),n=Number(i[1]);return S1.Zi(n,e)}yr(t){return rG.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,wt.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$t("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),n=this.Ir(this.ur),s=this.Ir(i),o=[],a=[];return s.forEach(l=>{n.has(l)||o.push(l)}),n.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=cH();return t.forEach((i,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class Bae{constructor(){this.Lr=new sG,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new sG,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class dMe{Ur(t){}shutdown(){}}class Vae{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pMe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class fMe{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class gMe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,n,s){const o=this.ho(t,e);$t("RestConnection","Sending: ",o,i);const a={};return this.lo(a,n,s),this.fo(t,o,a,i).then(l=>($t("RestConnection","Received: ",l),l),l=>{throw Kw("RestConnection",`${t} failed with error: `,l,"url: ",o,"request:",i),l})}_o(t,e,i,n,s,o){return this.ao(t,e,i,n,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+oD,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((n,s)=>t[s]=n),i&&i.headers.forEach((n,s)=>t[s]=n)}ho(t,e){return`${this.oo}/v1/${e}:${pMe[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,n){return new Promise((s,o)=>{const a=new fRe;a.setWithCredentials(!0),a.listenOnce(cRe.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case g8.NO_ERROR:const h=a.getResponseJson();$t("Connection","XHR received:",JSON.stringify(h)),s(h);break;case g8.TIMEOUT:$t("Connection",'RPC "'+t+'" timed out'),o(new zt(dt.DEADLINE_EXCEEDED,"Request time out"));break;case g8.HTTP_ERROR:const u=a.getStatus();if($t("Connection",'RPC "'+t+'" failed with status:',u,"response text:",a.getResponseText()),u>0){let p=a.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p?.error;if(m&&m.status&&m.message){const y=function(C){const S=C.toLowerCase().replace(/_/g,"-");return Object.values(dt).indexOf(S)>=0?S:dt.UNKNOWN}(m.status);o(new zt(y,m.message))}else o(new zt(dt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new zt(dt.UNAVAILABLE,"Connection failed."));break;default:Li()}}finally{$t("Connection",'RPC "'+t+'" completed.')}});const l=JSON.stringify(n);a.send(e,"POST",l,i,15)})}wo(t,e,i){const n=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=hRe(),o=uRe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new pRe({})),this.lo(a.initMessageHeaders,e,i),a.encodeInitMessageHeaders=!0;const l=n.join("");$t("Connection","Creating WebChannel: "+l,a);const h=s.createWebChannel(l,a);let u=!1,p=!1;const m=new fMe({Hr:C=>{p?$t("Connection","Not sending because WebChannel is closed:",C):(u||($t("Connection","Opening WebChannel transport."),h.open(),u=!0),$t("Connection","WebChannel sending:",C),h.send(C))},Jr:()=>h.close()}),y=(C,S,T)=>{C.listen(S,R=>{try{T(R)}catch(P){setTimeout(()=>{throw P},0)}})};return y(h,Q2.EventType.OPEN,()=>{p||$t("Connection","WebChannel transport opened.")}),y(h,Q2.EventType.CLOSE,()=>{p||(p=!0,$t("Connection","WebChannel transport closed"),m.io())}),y(h,Q2.EventType.ERROR,C=>{p||(p=!0,Kw("Connection","WebChannel transport errored:",C),m.io(new zt(dt.UNAVAILABLE,"The operation could not be completed")))}),y(h,Q2.EventType.MESSAGE,C=>{var S;if(!p){const T=C.data[0];tn(!!T);const R=T,P=R.error||(null===(S=R[0])||void 0===S?void 0:S.error);if(P){$t("Connection","WebChannel received error:",P);const O=P.status;let N=function(U){const ae=rl[U];if(void 0!==ae)return Aoe(ae)}(O),z=P.message;void 0===N&&(N=dt.INTERNAL,z="Unknown error status: "+O+" with message "+P.message),p=!0,m.io(new zt(N,z)),h.close()}else $t("Connection","WebChannel received:",T),m.ro(T)}}),y(o,dRe.STAT_EVENT,C=>{C.stat===Ise.PROXY?$t("Connection","Detected buffering proxy"):C.stat===Ise.NOPROXY&&$t("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.so()},0),m}}function Hae(){return typeof window<"u"?window:null}function IH(){return typeof document<"u"?document:null}function E1(r){return new o_e(r,!0)}class aG{constructor(t,e,i=1e3,n=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=n,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),n=Math.max(0,e-i);n>0&&$t("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,n,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class zae{constructor(t,e,i,n,s,o,a,l){this.Hs=t,this.vo=i,this.Vo=n,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new aG(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,wt.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,wt.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,wt.Z)(function*(){i.Lo(),i.qo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===dt.RESOURCE_EXHAUSTED?(za(e.toString()),za("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===dt.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Uo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}Uo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,n])=>{this.So===e&&this.Go(i,n)},i=>{t(()=>{const n=new zt(dt.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(n)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(n=>{i(()=>this.Qo(n))}),this.stream.onMessage(n=>{i(()=>this.onMessage(n))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,wt.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mMe extends zae{constructor(t,e,i,n,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,n,o),this.yt=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function h_e(r,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(l=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Li(),n=t.targetChange.targetIds||[],s=function(l,h){return l.wt?(tn(void 0===h||"string"==typeof h),Sl.fromBase64String(h||"")):(tn(void 0===h||h instanceof Uint8Array),Sl.fromUint8Array(h||new Uint8Array))}(r,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const h=void 0===l.code?dt.UNKNOWN:Aoe(l.code);return new zt(h,l.message||"")}(o);e=new Ooe(i,n,s,a||null)}else if("documentChange"in t){const i=t.documentChange,n=ug(r,i.document.name),s=ja(i.document.updateTime),o=i.document.createTime?ja(i.document.createTime):gn.min(),a=new oh({mapValue:{fields:i.document.fields}}),l=xo.newFoundDocument(n,s,o,a);e=new dH(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){const i=t.documentDelete,n=ug(r,i.document),s=i.readTime?ja(i.readTime):gn.min(),o=xo.newNoDocument(n,s);e=new dH([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,n=ug(r,i.document);e=new dH([],i.removedTargetIds||[],n,null)}else{if(!("filter"in t))return Li();{const i=t.filter,s=new QRe(i.count||0);e=new Moe(i.targetId,s)}}var l;return e}(this.yt,t),i=function(n){if(!("targetChange"in n))return gn.min();const s=n.targetChange;return s.targetIds&&s.targetIds.length?gn.min():s.readTime?ja(s.readTime):gn.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=p1(this.yt),e.addTarget=function(n,s){let o;const a=s.target;return o=rH(a)?{documents:qoe(n,a)}:{query:F8(n,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Noe(n,s.resumeToken):s.snapshotVersion.compareTo(gn.min())>0&&(o.readTime=vD(n,s.snapshotVersion.toTimestamp())),o}(this.yt,t);const i=function c_e(r,t){const e=function(i,n){switch(n){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Li()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=p1(this.yt),e.removeTarget=t,this.Bo(e)}}class vMe extends zae{constructor(t,e,i,n,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,n,o),this.yt=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(tn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function u_e(r,t){return r&&r.length>0?(tn(void 0!==t),r.map(e=>function(i,n){let s=ja(i.updateTime?i.updateTime:n);return s.isEqual(gn.min())&&(s=ja(n)),new $Re(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=ja(t.commitTime);return this.listener.Zo(i,e)}return tn(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=p1(this.yt),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>f1(this.yt,i))};this.Bo(e)}}class yMe extends class{}{constructor(t,e,i,n){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.yt=n,this.nu=!1}su(){if(this.nu)throw new zt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.ao(t,e,i,n,s)).catch(n=>{throw"FirebaseError"===n.name?(n.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new zt(dt.UNKNOWN,n.toString())})}_o(t,e,i,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(t,e,i,s,o,n)).catch(s=>{throw"FirebaseError"===s.name?(s.code===dt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new zt(dt.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class CMe{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(za(e),this.ou=!1):$t("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class wMe{constructor(t,e,i,n,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.Ur(a=>{i.enqueueAndForget((0,wt.Z)(function*(){var l;ov(o)&&($t("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,wt.Z)(function*(h){const u=wi(h);u._u.add(4),yield xD(u),u.gu.set("Unknown"),u._u.delete(4),yield x1(u)}),function(h){return l.apply(this,arguments)})(o))}))}),this.gu=new CMe(i,n)}}function x1(r){return hG.apply(this,arguments)}function hG(){return hG=(0,wt.Z)(function*(r){if(ov(r))for(const t of r.wu)yield t(!0)}),hG.apply(this,arguments)}function xD(r){return uG.apply(this,arguments)}function uG(){return uG=(0,wt.Z)(function*(r){for(const t of r.wu)yield t(!1)}),uG.apply(this,arguments)}function AH(r,t){const e=wi(r);e.du.has(t.targetId)||(e.du.set(t.targetId,t),pG(e)?dG(e):DD(e).ko()&&cG(e,t))}function T1(r,t){const e=wi(r),i=DD(e);e.du.delete(t),i.ko()&&jae(e,t),0===e.du.size&&(i.ko()?i.Fo():ov(e)&&e.gu.set("Unknown"))}function cG(r,t){r.yu.Ot(t.targetId),DD(r).zo(t)}function jae(r,t){r.yu.Ot(t),DD(r).Ho(t)}function dG(r){r.yu=new i_e({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),ne:t=>r.du.get(t)||null}),DD(r).start(),r.gu.uu()}function pG(r){return ov(r)&&!DD(r).No()&&r.du.size>0}function ov(r){return 0===wi(r)._u.size}function qae(r){r.yu=void 0}function SMe(r){return fG.apply(this,arguments)}function fG(){return fG=(0,wt.Z)(function*(r){r.du.forEach((t,e)=>{cG(r,t)})}),fG.apply(this,arguments)}function EMe(r,t){return gG.apply(this,arguments)}function gG(){return gG=(0,wt.Z)(function*(r,t){qae(r),pG(r)?(r.gu.hu(t),dG(r)):r.gu.set("Unknown")}),gG.apply(this,arguments)}function xMe(r,t,e){return mG.apply(this,arguments)}function mG(){return mG=(0,wt.Z)(function*(r,t,e){if(r.gu.set("Online"),t instanceof Ooe&&2===t.state&&t.cause)try{yield(i=(0,wt.Z)(function*(n,s){const o=s.cause;for(const a of s.targetIds)n.du.has(a)&&(yield n.remoteSyncer.rejectListen(a,o),n.du.delete(a),n.yu.removeTarget(a))}),function(n,s){return i.apply(this,arguments)})(r,t)}catch(i){$t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield kH(r,i)}else if(t instanceof dH?r.yu.Kt(t):t instanceof Moe?r.yu.Jt(t):r.yu.jt(t),!e.isEqual(gn.min()))try{const i=yield _ae(r.localStore);e.compareTo(i)>=0&&(yield function(n,s){const o=n.yu.Zt(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const h=n.du.get(l);h&&n.du.set(l,h.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=n.du.get(a);if(!l)return;n.du.set(a,l.withResumeToken(Sl.EMPTY_BYTE_STRING,l.snapshotVersion)),jae(n,a);const h=new Hb(l.target,a,1,l.sequenceNumber);cG(n,h)}),n.remoteSyncer.applyRemoteEvent(o)}(r,e))}catch(i){$t("RemoteStore","Failed to raise snapshot:",i),yield kH(r,i)}var i}),mG.apply(this,arguments)}function kH(r,t,e){return vG.apply(this,arguments)}function vG(){return vG=(0,wt.Z)(function*(r,t,e){if(!Ob(t))throw t;r._u.add(1),yield xD(r),r.gu.set("Offline"),e||(e=()=>_ae(r.localStore)),r.asyncQueue.enqueueRetryable((0,wt.Z)(function*(){$t("RemoteStore","Retrying IndexedDB access"),yield e(),r._u.delete(1),yield x1(r)}))}),vG.apply(this,arguments)}function Uae(r,t){return t().catch(e=>kH(r,e,t))}function TD(r){return yG.apply(this,arguments)}function yG(){return yG=(0,wt.Z)(function*(r){const t=wi(r),e=Ub(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;TMe(t);)try{const n=yield hMe(t.localStore,i);if(null===n){0===t.fu.length&&e.Fo();break}i=n.batchId,DMe(t,n)}catch(n){yield kH(t,n)}Wae(t)&&Gae(t)}),yG.apply(this,arguments)}function TMe(r){return ov(r)&&r.fu.length<10}function DMe(r,t){r.fu.push(t);const e=Ub(r);e.ko()&&e.Yo&&e.Xo(t.mutations)}function Wae(r){return ov(r)&&!Ub(r).No()&&r.fu.length>0}function Gae(r){Ub(r).start()}function IMe(r){return bG.apply(this,arguments)}function bG(){return bG=(0,wt.Z)(function*(r){Ub(r).eu()}),bG.apply(this,arguments)}function AMe(r){return CG.apply(this,arguments)}function CG(){return CG=(0,wt.Z)(function*(r){const t=Ub(r);for(const e of r.fu)t.Xo(e.mutations)}),CG.apply(this,arguments)}function kMe(r,t,e){return wG.apply(this,arguments)}function wG(){return wG=(0,wt.Z)(function*(r,t,e){const i=r.fu.shift(),n=V8.from(i,t,e);yield Uae(r,()=>r.remoteSyncer.applySuccessfulWrite(n)),yield TD(r)}),wG.apply(this,arguments)}function RMe(r,t){return SG.apply(this,arguments)}function SG(){return SG=(0,wt.Z)(function*(r,t){var e;t&&Ub(r).Yo&&(yield(e=(0,wt.Z)(function*(i,n){if(Ioe(s=n.code)&&s!==dt.ABORTED){const o=i.fu.shift();Ub(i).Mo(),yield Uae(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,n)),yield TD(i)}var s}),function(i,n){return e.apply(this,arguments)})(r,t)),Wae(r)&&Gae(r)}),SG.apply(this,arguments)}function Kae(r,t){return EG.apply(this,arguments)}function EG(){return EG=(0,wt.Z)(function*(r,t){const e=wi(r);e.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const i=ov(e);e._u.add(3),yield xD(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield x1(e)}),EG.apply(this,arguments)}function xG(r,t){return TG.apply(this,arguments)}function TG(){return TG=(0,wt.Z)(function*(r,t){const e=wi(r);t?(e._u.delete(2),yield x1(e)):t||(e._u.add(2),yield xD(e),e.gu.set("Unknown"))}),TG.apply(this,arguments)}function DD(r){return r.pu||(r.pu=function(t,e,i){const n=wi(t);return n.su(),new mMe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.yt,i)}(r.datastore,r.asyncQueue,{Yr:SMe.bind(null,r),Zr:EMe.bind(null,r),Wo:xMe.bind(null,r)}),r.wu.push(function(){var t=(0,wt.Z)(function*(e){e?(r.pu.Mo(),pG(r)?dG(r):r.gu.set("Unknown")):(yield r.pu.stop(),qae(r))});return function(e){return t.apply(this,arguments)}}())),r.pu}function Ub(r){return r.Iu||(r.Iu=function(t,e,i){const n=wi(t);return n.su(),new vMe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.yt,i)}(r.datastore,r.asyncQueue,{Yr:IMe.bind(null,r),Zr:RMe.bind(null,r),tu:AMe.bind(null,r),Zo:kMe.bind(null,r)}),r.wu.push(function(){var t=(0,wt.Z)(function*(e){e?(r.Iu.Mo(),yield TD(r)):(yield r.Iu.stop(),r.fu.length>0&&($t("RemoteStore",`Stopping write stream with ${r.fu.length} pending writes`),r.fu=[]))});return function(e){return t.apply(this,arguments)}}())),r.Iu}class DG{constructor(t,e,i,n,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=n,this.removalCallback=s,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,e,i,n,s){const o=Date.now()+i,a=new DG(t,e,o,n,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new zt(dt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ID(r,t){if(za("AsyncQueue",`${t}: ${r}`),Ob(r))return new zt(dt.UNAVAILABLE,`${t}: ${r}`);throw r}class AD{constructor(t){this.comparator=t?(e,i)=>t(e,i)||vi.comparator(e.key,i.key):(e,i)=>vi.comparator(e.key,i.key),this.keyedMap=l1(),this.sortedSet=new Ia(this.comparator)}static emptySet(t){return new AD(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof AD)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new AD;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class $ae{constructor(){this.Tu=new Ia(vi.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):Li():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class kD{constructor(t,e,i,n,s,o,a,l,h){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=n,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,i,n,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new kD(t,e,AD.emptySet(e),o,i,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&s1(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let n=0;n<e.length;n++)if(e[n].type!==i[n].type||!e[n].doc.isEqual(i[n].doc))return!1;return!0}}class _Me{constructor(){this.Au=void 0,this.listeners=[]}}class MMe{constructor(){this.queries=new Vb(t=>coe(t),s1),this.onlineState="Unknown",this.Ru=new Set}}function IG(r,t){return AG.apply(this,arguments)}function AG(){return AG=(0,wt.Z)(function*(r,t){const e=wi(r),i=t.query;let n=!1,s=e.queries.get(i);if(s||(n=!0,s=new _Me),n)try{s.Au=yield e.onListen(i)}catch(o){const a=ID(o,`Initialization of query '${R8(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&_G(e)}),AG.apply(this,arguments)}function kG(r,t){return RG.apply(this,arguments)}function RG(){return RG=(0,wt.Z)(function*(r,t){const e=wi(r),i=t.query;let n=!1;const s=e.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),n=0===s.listeners.length)}if(n)return e.queries.delete(i),e.onUnlisten(i)}),RG.apply(this,arguments)}function OMe(r,t){const e=wi(r);let i=!1;for(const n of t){const o=e.queries.get(n.query);if(o){for(const a of o.listeners)a.Pu(n)&&(i=!0);o.Au=n}}i&&_G(e)}function PMe(r,t,e){const i=wi(r),n=i.queries.get(t);if(n)for(const s of n.listeners)s.onError(e);i.queries.delete(t)}function _G(r){r.Ru.forEach(t=>{t.next()})}class MG{constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const n of t.docChanges)3!==n.type&&i.push(n);t=new kD(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=kD.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class LMe{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class Yae{constructor(t){this.yt=t}Ji(t){return ug(this.yt,t)}Yi(t){return t.metadata.exists?joe(this.yt,t.document,!1):xo.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return ja(t)}}class FMe{constructor(t,e,i){this.Mu=t,this.localStore=e,this.yt=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Zae(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=Ur.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new Yae(this.yt);for(const n of t)if(n.metadata.queries){const s=i.Ji(n.metadata.name);for(const o of n.metadata.queries){const a=(e.get(o)||ir()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,wt.Z)(function*(){const e=yield function uMe(r,t,e,i){return tG.apply(this,arguments)}(t.localStore,new Yae(t.yt),t.documents,t.Mu.id),i=t.$u(t.documents);for(const n of t.queries)yield cMe(t.localStore,n,i.get(n.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function Zae(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Qae{constructor(t){this.key=t}}class Xae{constructor(t){this.key=t}}class Jae{constructor(t,e){this.query=t,this.qu=e,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ir(),this.mutatedKeys=ir(),this.Gu=poe(t),this.Qu=new AD(this.Gu)}get ju(){return this.qu}Wu(t,e){const i=e?e.zu:new $ae,n=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,o=n,a=!1;const l="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,h="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,p)=>{const m=n.get(u),y=_8(this.query,p)?p:null,C=!!m&&this.mutatedKeys.has(m.key),S=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?C!==S&&(i.track({type:3,doc:y}),T=!0):this.Hu(m,y)||(i.track({type:2,doc:y}),T=!0,(l&&this.Gu(y,l)>0||h&&this.Gu(y,h)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),T=!0):m&&!y&&(i.track({type:1,doc:m}),T=!0,(l||h)&&(a=!0)),T&&(y?(o=o.add(y),s=S?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:a,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const n=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((h,u)=>function(p,m){const y=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Li()}};return y(p)-y(m)}(h.type,u.type)||this.Gu(h.doc,u.doc)),this.Ju(i);const o=e?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,0!==s.length||l?{snapshot:new kD(this.query,t.Qu,n,s,t.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new $ae,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.qu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.qu=this.qu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.qu=this.qu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=ir(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new Xae(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new Qae(i))}),e}tc(t){this.qu=t.Hi,this.Ku=ir();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return kD.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class NMe{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class BMe{constructor(t){this.key=t,this.nc=!1}}class VMe{constructor(t,e,i,n,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Vb(a=>coe(a),s1),this.rc=new Map,this.oc=new Set,this.uc=new Ia(vi.comparator),this.cc=new Map,this.ac=new $8,this.hc={},this.lc=new Map,this.fc=hS.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function HMe(r,t){return OG.apply(this,arguments)}function OG(){return OG=(0,wt.Z)(function*(r,t){const e=i7(r);let i,n;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),n=s.view.ec();else{const o=yield SD(e.localStore,lu(t));e.isPrimaryClient&&AH(e.remoteStore,o);const a=e.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,n=yield PG(e,t,i,"current"===a,o.resumeToken)}return n}),OG.apply(this,arguments)}function PG(r,t,e,i,n){return LG.apply(this,arguments)}function LG(){return LG=(0,wt.Z)(function*(r,t,e,i,n){r._c=(p,m,y)=>{return(C=(0,wt.Z)(function*(S,T,R,P){let O=T.view.Wu(R);O.$i&&(O=yield xH(S.localStore,T.query,!1).then(({documents:U})=>T.view.Wu(U,O)));const N=P&&P.targetChanges.get(T.targetId),z=T.view.applyChanges(O,S.isPrimaryClient,N);return WG(S,T.targetId,z.Xu),z.snapshot}),function(S,T,R,P){return C.apply(this,arguments)})(r,p,m,y);var C};const s=yield xH(r.localStore,t,!0),o=new Jae(t,s.Hi),a=o.Wu(s.documents),l=c1.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==r.onlineState,n),h=o.applyChanges(a,r.isPrimaryClient,l);WG(r,e,h.Xu);const u=new NMe(t,e,o);return r.ic.set(t,u),r.rc.has(e)?r.rc.get(e).push(t):r.rc.set(e,[t]),h.snapshot}),LG.apply(this,arguments)}function zMe(r,t){return FG.apply(this,arguments)}function FG(){return FG=(0,wt.Z)(function*(r,t){const e=wi(r),i=e.ic.get(t),n=e.rc.get(i.targetId);if(n.length>1)return e.rc.set(i.targetId,n.filter(s=>!s1(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ED(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),T1(e.remoteStore,i.targetId),RD(e,i.targetId)}).catch(Mb))):(RD(e,i.targetId),yield ED(e.localStore,i.targetId,!0))}),FG.apply(this,arguments)}function NG(){return NG=(0,wt.Z)(function*(r,t,e){const i=n7(r);try{const n=yield function(s,o){const a=wi(s),l=Uo.now(),h=o.reduce((m,y)=>m.add(y.key),ir());let u,p;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Ku(),C=ir();return a.Gi.getEntries(m,h).next(S=>{y=S,y.forEach((T,R)=>{R.isValidDocument()||(C=C.add(T))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,y)).next(S=>{u=S;const T=[];for(const R of o){const P=ZRe(R,u.get(R.key).overlayedDocument);null!=P&&T.push(new sv(R.key,P,ooe(P.value.mapValue),Wo.exists(!0)))}return a.mutationQueue.addMutationBatch(m,l,T,o)}).next(S=>{p=S;const T=S.applyToLocalDocumentSet(u,C);return a.documentOverlayCache.saveOverlays(m,S.batchId,T)})}).then(()=>({batchId:p.batchId,changes:Roe(u)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(n.batchId),function(s,o,a){let l=s.hc[s.currentUser.toKey()];l||(l=new Ia(Bn)),l=l.insert(o,a),s.hc[s.currentUser.toKey()]=l}(i,n.batchId,e),yield av(i,n.changes),yield TD(i.remoteStore)}catch(n){const s=ID(n,"Failed to persist write");e.reject(s)}}),NG.apply(this,arguments)}function ele(r,t){return BG.apply(this,arguments)}function BG(){return BG=(0,wt.Z)(function*(r,t){const e=wi(r);try{const i=yield lMe(e.localStore,t);t.targetChanges.forEach((n,s)=>{const o=e.cc.get(s);o&&(tn(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?o.nc=!0:n.modifiedDocuments.size>0?tn(o.nc):n.removedDocuments.size>0&&(tn(o.nc),o.nc=!1))}),yield av(e,i,t)}catch(i){yield Mb(i)}}),BG.apply(this,arguments)}function tle(r,t,e){const i=wi(r);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const n=[];i.ic.forEach((s,o)=>{const a=o.view.bu(t);a.snapshot&&n.push(a.snapshot)}),function(s,o){const a=wi(s);a.onlineState=o;let l=!1;a.queries.forEach((h,u)=>{for(const p of u.listeners)p.bu(o)&&(l=!0)}),l&&_G(a)}(i.eventManager,t),n.length&&i.sc.Wo(n),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function qMe(r,t,e){return VG.apply(this,arguments)}function VG(){return VG=(0,wt.Z)(function*(r,t,e){const i=wi(r);i.sharedClientState.updateQueryState(t,"rejected",e);const n=i.cc.get(t),s=n&&n.key;if(s){let o=new Ia(vi.comparator);o=o.insert(s,xo.newNoDocument(s,gn.min()));const a=ir().add(s),l=new u1(gn.min(),new Map,new Ws(Bn),o,a);yield ele(i,l),i.uc=i.uc.remove(s),i.cc.delete(t),GG(i)}else yield ED(i.localStore,t,!1).then(()=>RD(i,t,e)).catch(Mb)}),VG.apply(this,arguments)}function UMe(r,t){return HG.apply(this,arguments)}function HG(){return HG=(0,wt.Z)(function*(r,t){const e=wi(r),i=t.batch.batchId;try{const n=yield aMe(e.localStore,t);UG(e,i,null),qG(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield av(e,n)}catch(n){yield Mb(n)}}),HG.apply(this,arguments)}function WMe(r,t,e){return zG.apply(this,arguments)}function zG(){return zG=(0,wt.Z)(function*(r,t,e){const i=wi(r);try{const n=yield function(s,o){const a=wi(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(tn(null!==u),h=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,h,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>a.localDocuments.getDocuments(l,h))})}(i.localStore,t);UG(i,t,e),qG(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield av(i,n)}catch(n){yield Mb(n)}}),zG.apply(this,arguments)}function jG(){return jG=(0,wt.Z)(function*(r,t){const e=wi(r);ov(e.remoteStore)||$t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=wi(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(e.localStore);if(-1===i)return void t.resolve();const n=e.lc.get(i)||[];n.push(t),e.lc.set(i,n)}catch(i){const n=ID(i,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}),jG.apply(this,arguments)}function qG(r,t){(r.lc.get(t)||[]).forEach(e=>{e.resolve()}),r.lc.delete(t)}function UG(r,t,e){const i=wi(r);let n=i.hc[i.currentUser.toKey()];if(n){const s=n.get(t);s&&(e?s.reject(e):s.resolve(),n=n.remove(t)),i.hc[i.currentUser.toKey()]=n}}function RD(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.rc.get(t))r.ic.delete(i),e&&r.sc.wc(i,e);r.rc.delete(t),r.isPrimaryClient&&r.ac.ls(t).forEach(i=>{r.ac.containsKey(i)||ile(r,i)})}function ile(r,t){r.oc.delete(t.path.canonicalString());const e=r.uc.get(t);null!==e&&(T1(r.remoteStore,e),r.uc=r.uc.remove(t),r.cc.delete(e),GG(r))}function WG(r,t,e){for(const i of e)i instanceof Qae?(r.ac.addReference(i.key,t),KMe(r,i)):i instanceof Xae?($t("SyncEngine","Document no longer in limbo: "+i.key),r.ac.removeReference(i.key,t),r.ac.containsKey(i.key)||ile(r,i.key)):Li()}function KMe(r,t){const e=t.key,i=e.path.canonicalString();r.uc.get(e)||r.oc.has(i)||($t("SyncEngine","New document in limbo: "+e),r.oc.add(i),GG(r))}function GG(r){for(;r.oc.size>0&&r.uc.size<r.maxConcurrentLimboResolutions;){const t=r.oc.values().next().value;r.oc.delete(t);const e=new vi(Ur.fromString(t)),i=r.fc.next();r.cc.set(i,new BMe(e)),r.uc=r.uc.insert(e,i),AH(r.remoteStore,new Hb(lu(dD(e.path)),i,2,Hc.at))}}function av(r,t,e){return KG.apply(this,arguments)}function KG(){return KG=(0,wt.Z)(function*(r,t,e){const i=wi(r),n=[],s=[],o=[];var a;i.ic.isEmpty()||(i.ic.forEach((a,l)=>{o.push(i._c(l,t,e).then(h=>{if((h||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,h?.fromCache?"not-current":"current"),h){n.push(h);const u=X8.Ci(l.targetId,h);s.push(u)}}))}),yield Promise.all(o),i.sc.Wo(n),yield(a=(0,wt.Z)(function*(l,h){const u=wi(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>st.forEach(h,m=>st.forEach(m.Si,y=>u.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>st.forEach(m.Di,y=>u.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ob(p))throw p;$t("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const m=p.targetId;if(!p.fromCache){const y=u.qi.get(m),S=y.withLastLimboFreeSnapshotVersion(y.snapshotVersion);u.qi=u.qi.insert(m,S)}}}),function(l,h){return a.apply(this,arguments)})(i.localStore,s))}),KG.apply(this,arguments)}function $Me(r,t){return $G.apply(this,arguments)}function $G(){return $G=(0,wt.Z)(function*(r,t){const e=wi(r);if(!e.currentUser.isEqual(t)){$t("SyncEngine","User change. New user:",t.toKey());const i=yield Rae(e.localStore,t);e.currentUser=t,(n=e).lc.forEach(o=>{o.forEach(a=>{a.reject(new zt(dt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),n.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield av(e,i.ji)}var n}),$G.apply(this,arguments)}function YMe(r,t){const e=wi(r),i=e.cc.get(t);if(i&&i.nc)return ir().add(i.key);{let n=ir();const s=e.rc.get(t);if(!s)return n;for(const o of s){const a=e.ic.get(o);n=n.unionWith(a.view.ju)}return n}}function ZMe(r,t){return YG.apply(this,arguments)}function YG(){return YG=(0,wt.Z)(function*(r,t){const e=wi(r),i=yield xH(e.localStore,t.query,!0),n=t.view.tc(i);return e.isPrimaryClient&&WG(e,t.targetId,n.Xu),n}),YG.apply(this,arguments)}function QMe(r,t){return ZG.apply(this,arguments)}function ZG(){return ZG=(0,wt.Z)(function*(r,t){const e=wi(r);return Pae(e.localStore,t).then(i=>av(e,i))}),ZG.apply(this,arguments)}function XMe(r,t,e,i){return QG.apply(this,arguments)}function QG(){return QG=(0,wt.Z)(function*(r,t,e,i){const n=wi(r),s=yield function(o,a){const l=wi(o),h=wi(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>h.Tn(u,a).next(p=>p?l.localDocuments.getDocuments(u,p):st.resolve(null)))}(n.localStore,t);var a;null!==s?("pending"===e?yield TD(n.remoteStore):"acknowledged"===e||"rejected"===e?(UG(n,t,i||null),qG(n,t),a=t,wi(wi(n.localStore).mutationQueue).An(a)):Li(),yield av(n,s)):$t("SyncEngine","Cannot apply mutation batch with id: "+t)}),QG.apply(this,arguments)}function XG(){return XG=(0,wt.Z)(function*(r,t){const e=wi(r);if(i7(e),n7(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),n=yield nle(e,i.toArray());e.dc=!0,yield xG(e.remoteStore,!0);for(const s of n)AH(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let n=Promise.resolve();e.rc.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):n=n.then(()=>(RD(e,o),ED(e.localStore,o,!0))),T1(e.remoteStore,o)}),yield n,yield nle(e,i),function(s){const o=wi(s);o.cc.forEach((a,l)=>{T1(o.remoteStore,l)}),o.ac.fs(),o.cc=new Map,o.uc=new Ia(vi.comparator)}(e),e.dc=!1,yield xG(e.remoteStore,!1)}}),XG.apply(this,arguments)}function nle(r,t,e){return JG.apply(this,arguments)}function JG(){return JG=(0,wt.Z)(function*(r,t,e){const i=wi(r),n=[],s=[];for(const o of t){let a;const l=i.rc.get(o);if(l&&0!==l.length){a=yield SD(i.localStore,lu(l[0]));for(const h of l){const u=i.ic.get(h),p=yield ZMe(i,u);p.snapshot&&s.push(p.snapshot)}}else{const h=yield Oae(i.localStore,o);a=yield SD(i.localStore,h),yield PG(i,rle(h),o,!1,a.resumeToken)}n.push(a)}return i.sc.Wo(s),n}),JG.apply(this,arguments)}function rle(r){return hoe(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function e1e(r){const t=wi(r);return wi(wi(t.localStore).persistence).vi()}function t1e(r,t,e,i){return e7.apply(this,arguments)}function e7(){return e7=(0,wt.Z)(function*(r,t,e,i){const n=wi(r);if(n.dc)return void $t("SyncEngine","Ignoring unexpected query state notification.");const s=n.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield Pae(n.localStore,doe(s[0])),a=u1.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Sl.EMPTY_BYTE_STRING);yield av(n,o,a);break}case"rejected":yield ED(n.localStore,t,!0),RD(n,t,i);break;default:Li()}}),e7.apply(this,arguments)}function i1e(r,t,e){return t7.apply(this,arguments)}function t7(){return t7=(0,wt.Z)(function*(r,t,e){const i=i7(r);if(i.dc){for(const n of t){if(i.rc.has(n)){$t("SyncEngine","Adding an already active target "+n);continue}const s=yield Oae(i.localStore,n),o=yield SD(i.localStore,s);yield PG(i,rle(s),o.targetId,!1,o.resumeToken),AH(i.remoteStore,o)}for(const n of e)i.rc.has(n)&&(yield ED(i.localStore,n,!1).then(()=>{T1(i.remoteStore,n),RD(i,n)}).catch(Mb))}}),t7.apply(this,arguments)}function i7(r){const t=wi(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=ele.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YMe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=qMe.bind(null,t),t.sc.Wo=OMe.bind(null,t.eventManager),t.sc.wc=PMe.bind(null,t.eventManager),t}function n7(r){const t=wi(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UMe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WMe.bind(null,t),t}class sle{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,wt.Z)(function*(){e.yt=E1(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return kae(this.persistence,new Aae,t.initialUser,this.yt)}yc(t){return new Dae(SH.Bs,this.yt)}gc(t){return new Bae}terminate(){var t=this;return(0,wt.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class ole extends sle{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,wt.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield n7(i.Ac.syncEngine),yield TD(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return kae(this.persistence,new Aae,t.initialUser,this.yt)}Tc(t,e){return new G_e(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new RRe(e,this.persistence);return new kRe(t.asyncQueue,i)}yc(t){const e=Q8(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?$u.withCacheSize(this.cacheSizeBytes):$u.DEFAULT;return new Z8(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Hae(),IH(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(t){return new Bae}}class r1e extends ole{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,wt.Z)(function*(){yield e().call(i,t);const n=i.Ac.syncEngine;i.sharedClientState instanceof oG&&(i.sharedClientState.syncEngine={Fr:XMe.bind(null,n),$r:t1e.bind(null,n),Br:i1e.bind(null,n),vi:e1e.bind(null,n),Mr:QMe.bind(null,n)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,wt.Z)(function*(o){yield function JMe(r,t){return XG.apply(this,arguments)}(i.Ac.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(t){const e=Hae();if(!oG.C(e))throw new zt(dt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Q8(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new oG(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class r7{initialize(t,e){var i=this;return(0,wt.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=n=>tle(i.syncEngine,n,1),i.remoteStore.remoteSyncer.handleCredentialChange=$Me.bind(null,i.syncEngine),yield xG(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new MMe}createDatastore(t){const e=E1(t.databaseInfo.databaseId),i=new gMe(t.databaseInfo);return new yMe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,n=t.asyncQueue,s=a=>tle(this.syncEngine,a,0),o=Vae.C()?new Vae:new dMe,new wMe(e,i,n,s,o);var e,i,n,s,o}createSyncEngine(t,e){return function(i,n,s,o,a,l,h){const u=new VMe(i,n,s,o,a,l);return h&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return function(){var t=(0,wt.Z)(function*(e){const i=wi(e);$t("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield xD(i),i.mu.shutdown(),i.gu.set("Unknown")});return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}function s7(r,t,e){if(!e)throw new zt(dt.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function ale(r,t,e,i){if(!0===t&&!0===i)throw new zt(dt.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function lle(r){if(!vi.isDocumentKey(r))throw new zt(dt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function hle(r){if(vi.isDocumentKey(r))throw new zt(dt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function RH(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const t=(e=r).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof r?"a function":Li()}function Or(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new zt(dt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=RH(r);throw new zt(dt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function ule(r,t){if(t<=0)throw new zt(dt.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}const cle=new Map;class dle{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new zt(dt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new zt(dt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ale("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class D1{constructor(t,e,i,n){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dle({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new zt(dt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new zt(dt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dle(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new vRe;switch(e.type){case"gapi":return new wRe(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new zt(dt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=cle.get(t);e&&($t("ComponentProvider","Removing Datastore"),cle.delete(t),e.terminate())}(this),Promise.resolve()}}class To{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dg(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new To(this.firestore,t,this._key)}}class ah{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new ah(this.firestore,t,this._query)}}class dg extends ah{constructor(t,e,i){super(t,e,dD(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new To(this.firestore,null,new vi(t))}withConverter(t){return new dg(this.firestore,t,this._path)}}function fle(r,t,...e){if(r=(0,ne.m9)(r),s7("collection","path",t),r instanceof D1){const i=Ur.fromString(t,...e);return hle(i),new dg(r,null,i)}{if(!(r instanceof To||r instanceof dg))throw new zt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ur.fromString(t,...e));return hle(i),new dg(r.firestore,null,i)}}function _H(r,t,...e){if(r=(0,ne.m9)(r),1===arguments.length&&(t=_se.R()),s7("doc","path",t),r instanceof D1){const i=Ur.fromString(t,...e);return lle(i),new To(r,null,new vi(i))}{if(!(r instanceof To||r instanceof dg))throw new zt(dt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ur.fromString(t,...e));return lle(i),new To(r.firestore,r instanceof dg?r.converter:null,new vi(i))}}function gle(r,t){return r=(0,ne.m9)(r),t=(0,ne.m9)(t),(r instanceof To||r instanceof dg)&&(t instanceof To||t instanceof dg)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function o7(r,t){return r=(0,ne.m9)(r),t=(0,ne.m9)(t),r instanceof ah&&t instanceof ah&&r.firestore===t.firestore&&s1(r._query,t._query)&&r.converter===t.converter}function mle(r,t=10240){let e=0;return{read:()=>(0,wt.Z)(function*(){if(e<r.byteLength){const i={value:r.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,wt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class MH{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):za("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class o1e{constructor(t,e){this.Pc=t,this.yt=e,this.metadata=new wl,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,wt.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,wt.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,wt.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),n=Number(i);isNaN(n)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(n);return new LMe(JSON.parse(s),e.length+n)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,wt.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,wt.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,wt.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class h1e{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,wt.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new zt(dt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(n=(0,wt.Z)(function*(s,o){const a=wi(s),l=p1(a.yt)+"/documents",h={documents:o.map(y=>d1(a.yt,y))},u=yield a._o("BatchGetDocuments",l,h,o.length),p=new Map;u.forEach(y=>{const C=function l_e(r,t){return"found"in t?function(e,i){tn(!!i.found);const n=ug(e,i.found.name),s=ja(i.found.updateTime),o=i.found.createTime?ja(i.found.createTime):gn.min(),a=new oh({mapValue:{fields:i.found.fields}});return xo.newFoundDocument(n,s,o,a)}(r,t):"missing"in t?function(e,i){tn(!!i.missing),tn(!!i.readTime);const n=ug(e,i.missing),s=ja(i.readTime);return xo.newNoDocument(n,s)}(r,t):Li()}(a.yt,y);p.set(C.key.toString(),C)});const m=[];return o.forEach(y=>{const C=p.get(y.toString());tn(!!C),m.push(C)}),m}),function(s,o){return n.apply(this,arguments)})(e.datastore,t);var n;return i.forEach(n=>e.recordVersion(n)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new mD(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,wt.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,n)=>{const s=vi.fromPath(n);t.mutations.push(new M8(s,t.precondition(s)))}),yield(i=(0,wt.Z)(function*(n,s){const o=wi(n),a=p1(o.yt)+"/documents",l={writes:s.map(h=>f1(o.yt,h))};yield o.ao("Commit",a,l)}),function(n,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Li();e=gn.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new zt(dt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(gn.min())?Wo.exists(!1):Wo.updateTime(e):Wo.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(gn.min()))throw new zt(dt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wo.updateTime(e)}return Wo.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class u1e{constructor(t,e,i,n,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=n,this.deferred=s,this.kc=i.maxAttempts,this.xo=new aG(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,wt.Z)(function*(){const e=new h1e(t.datastore),i=t.Mc(e);i&&i.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(s=>{t.Fc(s)}))}).catch(n=>{t.Fc(n)})}))}Mc(t){try{const e=this.updateFunction(t);return!XM(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Ioe(e)}return!1}}class c1e{constructor(t,e,i,n){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=n,this.user=Hl.UNAUTHENTICATED,this.clientId=_se.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,wt.Z)(function*(a){$t("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>($t("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var t=this;return(0,wt.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new zt(dt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,wt.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=ID(i,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}function vle(r,t){return a7.apply(this,arguments)}function a7(){return a7=(0,wt.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const e=yield r.getConfiguration();yield t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener(function(){var n=(0,wt.Z)(function*(s){i.isEqual(s)||(yield Rae(t.localStore,s),i=s)});return function(s){return n.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=t}),a7.apply(this,arguments)}function yle(r,t){return l7.apply(this,arguments)}function l7(){return l7=(0,wt.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress();const e=yield h7(r);$t("FirestoreClient","Initializing OnlineComponentProvider");const i=yield r.getConfiguration();yield t.initialize(e,i),r.setCredentialChangeListener(n=>Kae(t.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>Kae(t.remoteStore,s)),r.onlineComponents=t}),l7.apply(this,arguments)}function h7(r){return u7.apply(this,arguments)}function u7(){return u7=(0,wt.Z)(function*(r){return r.offlineComponents||($t("FirestoreClient","Using default OfflineComponentProvider"),yield vle(r,new sle)),r.offlineComponents}),u7.apply(this,arguments)}function OH(r){return c7.apply(this,arguments)}function c7(){return c7=(0,wt.Z)(function*(r){return r.onlineComponents||($t("FirestoreClient","Using default OnlineComponentProvider"),yield yle(r,new r7)),r.onlineComponents}),c7.apply(this,arguments)}function ble(r){return h7(r).then(t=>t.persistence)}function PH(r){return h7(r).then(t=>t.localStore)}function d7(r){return OH(r).then(t=>t.remoteStore)}function p7(r){return OH(r).then(t=>t.syncEngine)}function _D(r){return f7.apply(this,arguments)}function f7(){return f7=(0,wt.Z)(function*(r){const t=yield OH(r),e=t.eventManager;return e.onListen=HMe.bind(null,t.syncEngine),e.onUnlisten=zMe.bind(null,t.syncEngine),e}),f7.apply(this,arguments)}function wle(r,t,e={}){const i=new wl;return r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return function(n,s,o,a,l){const h=new MH({next:p=>{s.enqueueAndForget(()=>kG(n,u));const m=p.docs.has(o);!m&&p.fromCache?l.reject(new zt(dt.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&a&&"server"===a.source?l.reject(new zt(dt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),u=new MG(dD(o.path),h,{includeMetadataChanges:!0,Nu:!0});return IG(n,u)}(yield _D(r),r.asyncQueue,t,e,i)})),i.promise}function Sle(r,t,e={}){const i=new wl;return r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return function(n,s,o,a,l){const h=new MH({next:p=>{s.enqueueAndForget(()=>kG(n,u)),p.fromCache&&"server"===a.source?l.reject(new zt(dt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),u=new MG(o,h,{includeMetadataChanges:!0,Nu:!0});return IG(n,u)}(yield _D(r),r.asyncQueue,t,e,i)})),i.promise}class b1e{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new aG(this,"async_queue_retry"),this.Wc=()=>{const e=IH();e&&$t("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=IH();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.qc){this.qc=!0,this.Qc=t||!1;const e=IH();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.qc)return new Promise(()=>{});const e=new wl;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,wt.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!Ob(e))throw e;$t("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,za("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const n=DG.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.Uc.push(n),n}zc(){this.Kc&&Li()}verifyOperationInProgress(){}Xc(){var t=this;return(0,wt.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.Uc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.Uc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.Uc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.Uc.indexOf(t);this.Uc.splice(e,1)}}function g7(r){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const n of["next","error","complete"])if(n in i&&"function"==typeof i[n])return!0;return!1}(r)}class C1e{constructor(){this._progressObserver={},this._taskCompletionResolver=new wl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Do extends D1{constructor(t,e,i,n){super(t,e,i,n),this.type="firestore",this._queue=new b1e,this._persistenceKey=n?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ele(this),this._firestoreClient.terminate()}}function qa(r){return r._firestoreClient||Ele(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function Ele(r){var t;const e=r._freezeSettings(),i=(s=(null===(t=r._app)||void 0===t?void 0:t.options.appId)||"",new _Re(r._databaseId,s,r._persistenceKey,(a=e).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;r._firestoreClient=new c1e(r._authCredentials,r._appCheckCredentials,r._queue,i)}function xle(r,t,e){const i=new wl;return r.asyncQueue.enqueue((0,wt.Z)(function*(){try{yield vle(r,e),yield yle(r,t),i.resolve()}catch(n){const s=n;if(!("FirebaseError"===(o=s).name?o.code===dt.FAILED_PRECONDITION||o.code===dt.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;Kw("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var o})).then(()=>i.promise)}function Tle(r){if(r._initialized||r._terminated)throw new zt(dt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class pg{constructor(t){this._byteString=t}static fromBase64String(t){try{return new pg(Sl.fromBase64String(t))}catch(e){throw new zt(dt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new pg(Sl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class lv{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new zt(dt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ta(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class cS{constructor(t){this._methodName=t}}class LH{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new zt(dt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new zt(dt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Bn(this._lat,t._lat)||Bn(this._long,t._long)}}const R1e=/^__.*__$/;class _1e{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new sv(t,this.data,this.fieldMask,e,this.fieldTransforms):new gD(t,this.data,e,this.fieldTransforms)}}class Dle{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new sv(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ile(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Li()}}class FH{constructor(t,e,i,n,s,o){this.settings=t,this.databaseId=e,this.yt=i,this.ignoreUndefinedProperties=n,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new FH(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.ua(t),n}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.na(),n}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return VH(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(Ile(this.sa)&&R1e.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class M1e{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.yt=i||E1(t)}da(t,e,i,n=!1){return new FH({sa:t,methodName:e,fa:i,path:Ta.emptyPath(),oa:!1,la:n},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function dS(r){const t=r._freezeSettings(),e=E1(r._databaseId);return new M1e(r._databaseId,!!t.ignoreUndefinedProperties,e)}function NH(r,t,e,i,n,s={}){const o=r.da(s.merge||s.mergeFields?2:0,t,e,n);b7("Data must be an object, but it was:",o,i);const a=Rle(i,o);let l,h;if(s.merge)l=new zc(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const p of s.mergeFields){const m=C7(t,p,e);if(!o.contains(m))throw new zt(dt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Mle(u,m)||u.push(m)}l=new zc(u),h=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,h=o.fieldTransforms;return new _1e(new oh(a),l,h)}class I1 extends cS{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof I1}}function Ale(r,t,e){return new FH({sa:3,fa:t.settings.fa,methodName:r._methodName,oa:e},t.databaseId,t.yt,t.ignoreUndefinedProperties)}class m7 extends cS{_toFieldTransform(t){return new o1(t.path,new pD)}isEqual(t){return t instanceof m7}}class O1e extends cS{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=Ale(this,t,!0),i=this._a.map(s=>pS(s,e)),n=new iS(i);return new o1(t.path,n)}isEqual(t){return this===t}}class P1e extends cS{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=Ale(this,t,!0),i=this._a.map(s=>pS(s,e)),n=new nS(i);return new o1(t.path,n)}isEqual(t){return this===t}}class L1e extends cS{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new fD(t.yt,moe(t.yt,this.wa));return new o1(t.path,e)}isEqual(t){return this===t}}function v7(r,t,e,i){const n=r.da(1,t,e);b7("Data must be an object, but it was:",n,i);const s=[],o=oh.empty();Zw(i,(l,h)=>{const u=BH(t,l,e);h=(0,ne.m9)(h);const p=n.ca(u);if(h instanceof I1)s.push(u);else{const m=pS(h,p);null!=m&&(s.push(u),o.set(u,m))}});const a=new zc(s);return new Dle(o,a,n.fieldTransforms)}function y7(r,t,e,i,n,s){const o=r.da(1,t,e),a=[C7(t,i,e)],l=[n];if(s.length%2!=0)throw new zt(dt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(C7(t,s[m])),l.push(s[m+1]);const h=[],u=oh.empty();for(let m=a.length-1;m>=0;--m)if(!Mle(h,a[m])){const y=a[m];let C=l[m];C=(0,ne.m9)(C);const S=o.ca(y);if(C instanceof I1)h.push(y);else{const T=pS(C,S);null!=T&&(h.push(y),u.set(y,T))}}const p=new zc(h);return new Dle(u,p,o.fieldTransforms)}function kle(r,t,e,i=!1){return pS(e,r.da(i?4:3,t))}function pS(r,t){if(_le(r=(0,ne.m9)(r)))return b7("Unsupported field value:",t,r),Rle(r,t);if(r instanceof cS)return function(e,i){if(!Ile(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(i);n&&i.fieldTransforms.push(n)}(r,t),null;if(void 0===r&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const n=[];let s=0;for(const o of e){let a=pS(o,i.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),s++}return{arrayValue:{values:n}}}(r,t)}return function(e,i){if(null===(e=(0,ne.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return moe(i.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Uo.fromDate(e);return{timestampValue:vD(i.yt,n)}}if(e instanceof Uo){const n=new Uo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vD(i.yt,n)}}if(e instanceof LH)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof pg)return{bytesValue:Noe(i.yt,e._byteString)};if(e instanceof To){const n=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:O8(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${RH(e)}`)}(r,t)}function Rle(r,t){const e={};return Vse(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Zw(r,(i,n)=>{const s=pS(n,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function _le(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Uo||r instanceof LH||r instanceof pg||r instanceof To||r instanceof cS)}function b7(r,t,e){if(!_le(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=RH(e);throw t.ha("an object"===i?r+" a custom object":r+" "+i)}var i}function C7(r,t,e){if((t=(0,ne.m9)(t))instanceof lv)return t._internalPath;if("string"==typeof t)return BH(r,t);throw VH("Field path arguments must be of type string or ",r,!1,void 0,e)}const F1e=new RegExp("[~\\*/\\[\\]]");function BH(r,t,e){if(t.search(F1e)>=0)throw VH(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new lv(...t.split("."))._internalPath}catch{throw VH(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function VH(r,t,e,i,n){const s=i&&!i.isEmpty(),o=void 0!==n;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${n}`),l+=")"),new zt(dt.INVALID_ARGUMENT,a+r+l)}function Mle(r,t){return r.some(e=>e.isEqual(t))}class A1{constructor(t,e,i,n,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new To(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new N1e(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(HH("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class N1e extends A1{data(){return super.data()}}function HH(r,t){return"string"==typeof t?BH(r,t):t instanceof lv?t._internalPath:t._delegate._internalPath}function Ole(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new zt(dt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class w7{}class k1 extends w7{}function Wb(r,t,...e){let i=[];t instanceof w7&&i.push(t),i=i.concat(e),function(n){const s=n.filter(a=>a instanceof MD).length,o=n.filter(a=>a instanceof R1).length;if(s>1||s>0&&o>0)throw new zt(dt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const n of i)r=n._apply(r);return r}class R1 extends k1{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new R1(t,e,i)}_apply(t){const e=this._parse(t);return Nle(t._query,e),new ah(t.firestore,t.converter,k8(t._query,e))}_parse(t){const e=dS(t.firestore);return function(n,s,o,a,l,h,u){let p;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new zt(dt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){Fle(u,h);const m=[];for(const y of u)m.push(Lle(a,n,y));p={arrayValue:{values:m}}}else p=Lle(a,n,u)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||Fle(u,h),p=kle(o,"where",u,"in"===h||"not-in"===h);return Mr.create(l,h,p)}(t._query,0,e,t.firestore._databaseId,this._field,this._op,this._value)}}class MD extends w7{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new MD(t,e)}_parse(t){const e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return 1===e.length?e[0]:Fs.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(i,n){let s=i;const o=n.getFlattenedFilters();for(const a of o)Nle(s,a),s=k8(s,a)}(t._query,e),new ah(t.firestore,t.converter,k8(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class S7 extends k1{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new S7(t,e)}_apply(t){const e=function(i,n,s){if(null!==i.startAt)throw new zt(dt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new zt(dt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new uD(n,s);return function(a,l){if(null===I8(a)){const h=oH(a);null!==h&&Ble(0,h,l.field)}}(i,o),o}(t._query,this._field,this._direction);return new ah(t.firestore,t.converter,function(i,n){const s=i.explicitOrderBy.concat([n]);return new rv(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class zH extends k1{constructor(t,e,i){super(),this.type=t,this._limit=e,this._limitType=i}static _create(t,e,i){return new zH(t,e,i)}_apply(t){return new ah(t.firestore,t.converter,aH(t._query,this._limit,this._limitType))}}class jH extends k1{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new jH(t,e,i)}_apply(t){const e=Ple(t,this.type,this._docOrFields,this._inclusive);return new ah(t.firestore,t.converter,(n=e,new rv((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,n,i.endAt)));var i,n}}class qH extends k1{constructor(t,e,i){super(),this.type=t,this._docOrFields=e,this._inclusive=i}static _create(t,e,i){return new qH(t,e,i)}_apply(t){const e=Ple(t,this.type,this._docOrFields,this._inclusive);return new ah(t.firestore,t.converter,(n=e,new rv((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,n)));var i,n}}function Ple(r,t,e,i){if(e[0]=(0,ne.m9)(e[0]),e[0]instanceof A1)return function(n,s,o,a,l){if(!a)throw new zt(dt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const u of tS(n))if(u.field.isKeyField())h.push(Jw(s,a.key));else{const p=a.data.field(u.field);if(S8(p))throw new zt(dt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===p){const m=u.field.canonicalString();throw new zt(dt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(p)}return new Bb(h,l)}(r._query,r.firestore._databaseId,t,e[0]._document,i);{const n=dS(r.firestore);return function(s,o,a,l,h,u){const p=s.explicitOrderBy;if(h.length>p.length)throw new zt(dt.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<h.length;y++){const C=h[y];if(p[y].field.isKeyField()){if("string"!=typeof C)throw new zt(dt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!A8(s)&&-1!==C.indexOf("/"))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(Ur.fromString(C));if(!vi.isDocumentKey(S))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const T=new vi(S);m.push(Jw(o,T))}else{const S=kle(a,l,C);m.push(S)}}return new Bb(m,u)}(r._query,r.firestore._databaseId,n,t,e,i)}}function Lle(r,t,e){if("string"==typeof(e=(0,ne.m9)(e))){if(""===e)throw new zt(dt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!A8(t)&&-1!==e.indexOf("/"))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Ur.fromString(e));if(!vi.isDocumentKey(i))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Jw(r,new vi(i))}if(e instanceof To)return Jw(r,e._key);throw new zt(dt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${RH(e)}.`)}function Fle(r,t){if(!Array.isArray(r)||0===r.length)throw new zt(dt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(r.length>10)throw new zt(dt.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Nle(r,t){if(t.isInequality()){const i=oH(r),n=t.field;if(null!==i&&!i.isEqual(n))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${i.toString()}' and '${n.toString()}'`);const s=I8(r);null!==s&&Ble(0,n,s)}const e=function(i,n){for(const s of i)for(const o of s.getFlattenedFilters())if(n.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==e)throw new zt(dt.INVALID_ARGUMENT,e===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function Ble(r,t,e){if(!e.isEqual(t))throw new zt(dt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class E7{convertValue(t,e="none"){switch(Xw(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Da(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Qw(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Li()}}convertObject(t,e){const i={};return Zw(t.fields,(n,s)=>{i[n]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new LH(Da(t.latitude),Da(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=zse(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(e1(t));default:return null}}convertTimestamp(t){const e=Lb(t);return new Uo(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Ur.fromString(t);tn(Koe(i));const n=new Pb(i.get(1),i.get(3)),s=new vi(i.popFirst(5));return n.isEqual(e)||za(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function UH(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class G1e extends E7{constructor(t){super(),this.firestore=t}convertBytes(t){return new pg(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new To(this.firestore,null,e)}}class fS{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class hv extends A1{constructor(t,e,i,n,s,o){super(t,e,i,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new _1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(HH("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class _1 extends hv{data(t={}){return super.data(t)}}class Gb{constructor(t,e,i,n){this._firestore=t,this._userDataWriter=e,this._snapshot=n,this.metadata=new fS(n.hasPendingWrites,n.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new _1(this._firestore,this._userDataWriter,i.key,i,new fS(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new zt(dt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,n){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new _1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fS(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>n||3!==o.type).map(o=>{const a=new _1(i._firestore,i._userDataWriter,o.doc.key,o.doc,new fS(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:K1e(o.type),doc:a,oldIndex:l,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function K1e(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Li()}}function Hle(r,t){return r instanceof hv&&t instanceof hv?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(null===r._document?null===t._document:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof Gb&&t instanceof Gb&&r._firestore===t._firestore&&o7(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}class Kb extends E7{constructor(t){super(),this.firestore=t}convertBytes(t){return new pg(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new To(this.firestore,null,e)}}function zle(r,t,e){r=Or(r,To);const i=Or(r.firestore,Do),n=UH(r.converter,t,e);return OD(i,[NH(dS(i),"setDoc",r._key,n,null!==r.converter,e).toMutation(r._key,Wo.none())])}function jle(r,t,e,...i){r=Or(r,To);const n=Or(r.firestore,Do),s=dS(n);let o;return o="string"==typeof(t=(0,ne.m9)(t))||t instanceof lv?y7(s,"updateDoc",r._key,t,e,i):v7(s,"updateDoc",r._key,t),OD(n,[o.toMutation(r._key,Wo.exists(!0))])}function qle(r,...t){var e,i,n;r=(0,ne.m9)(r);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||g7(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(g7(t[o])){const p=t[o];t[o]=null===(e=p.next)||void 0===e?void 0:e.bind(p),t[o+1]=null===(i=p.error)||void 0===i?void 0:i.bind(p),t[o+2]=null===(n=p.complete)||void 0===n?void 0:n.bind(p)}let l,h,u;if(r instanceof To)h=Or(r.firestore,Do),u=dD(r._key.path),l={next:p=>{t[o]&&t[o](x7(h,r,p))},error:t[o+1],complete:t[o+2]};else{const p=Or(r,ah);h=Or(p.firestore,Do),u=p._query;const m=new Kb(h);l={next:y=>{t[o]&&t[o](new Gb(h,m,p,y))},error:t[o+1],complete:t[o+2]},Ole(r._query)}return function(p,m,y,C){const S=new MH(C),T=new MG(m,S,y);return p.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return IG(yield _D(p),T)})),()=>{S.bc(),p.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return kG(yield _D(p),T)}))}}(qa(h),u,a,l)}function OD(r,t){return function(e,i){const n=new wl;return e.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return function jMe(r,t,e){return NG.apply(this,arguments)}(yield p7(e),i,n)})),n.promise}(qa(r),t)}function x7(r,t,e){const i=e.docs.get(t._key),n=new Kb(r);return new hv(r,n,t._key,i,new fS(e.hasPendingWrites,e.fromCache),t.converter)}const nOe={maxAttempts:5};class Ule{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=dS(t)}set(t,e,i){this._verifyNotCommitted();const n=$b(t,this._firestore),s=UH(n.converter,e,i),o=NH(this._dataReader,"WriteBatch.set",n._key,s,null!==n.converter,i);return this._mutations.push(o.toMutation(n._key,Wo.none())),this}update(t,e,i,...n){this._verifyNotCommitted();const s=$b(t,this._firestore);let o;return o="string"==typeof(e=(0,ne.m9)(e))||e instanceof lv?y7(this._dataReader,"WriteBatch.update",s._key,e,i,n):v7(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Wo.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=$b(t,this._firestore);return this._mutations=this._mutations.concat(new mD(e._key,Wo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new zt(dt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $b(r,t){if((r=(0,ne.m9)(r)).firestore!==t)throw new zt(dt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class rOe extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=dS(t)}get(t){const e=$b(t,this._firestore),i=new G1e(this._firestore);return this._transaction.lookup([e._key]).then(n=>{if(!n||1!==n.length)return Li();const s=n[0];if(s.isFoundDocument())return new A1(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new A1(this._firestore,i,e._key,null,e.converter);throw Li()})}set(t,e,i){const n=$b(t,this._firestore),s=UH(n.converter,e,i),o=NH(this._dataReader,"Transaction.set",n._key,s,null!==n.converter,i);return this._transaction.set(n._key,o),this}update(t,e,i,...n){const s=$b(t,this._firestore);let o;return o="string"==typeof(e=(0,ne.m9)(e))||e instanceof lv?y7(this._dataReader,"Transaction.update",s._key,e,i,n):v7(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this}delete(t){const e=$b(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=$b(t,this._firestore),i=new Kb(this._firestore);return super.get(t).then(n=>new hv(this._firestore,i,e._key,n._document,new fS(!1,!1),e.converter))}}function T7(r,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new zt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}function Gle(){if(typeof Uint8Array>"u")throw new zt("unimplemented","Uint8Arrays are not available in this environment.")}function Kle(){if(!function MRe(){return typeof atob<"u"}())throw new zt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,t=!0){oD=$a.SDK_VERSION,(0,$a._registerComponent)(new Du.wA("firestore",(e,{instanceIdentifier:i,options:n})=>{const s=e.getProvider("app").getImmediate(),o=new Do(new bRe(e.getProvider("auth-internal")),new SRe(e.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new zt(dt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pb(a.options.projectId,l)}(s,i),s);return n=Object.assign({useFetchStreams:t},n),o._setSettings(n),o},"PUBLIC").setMultipleInstances(!0)),(0,$a.registerVersion)(Ase,"3.8.0",r),(0,$a.registerVersion)(Ase,"3.8.0","esm2017")}();class M1{constructor(t){this._delegate=t}static fromBase64String(t){return Kle(),new M1(pg.fromBase64String(t))}static fromUint8Array(t){return Gle(),new M1(pg.fromUint8Array(t))}toBase64(){return Kle(),this._delegate.toBase64()}toUint8Array(){return Gle(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function D7(r){return function pOe(r,t){if("object"!=typeof r||null===r)return!1;const e=r;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(r,["next","error","complete"])}class fOe{enableIndexedDbPersistence(t,e){return function S1e(r,t){Tle(r=Or(r,Do));const e=qa(r),i=r._freezeSettings(),n=new r7;return xle(e,n,new ole(n,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function E1e(r){Tle(r=Or(r,Do));const t=qa(r),e=r._freezeSettings(),i=new r7;return xle(t,i,new r1e(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function x1e(r){if(r._initialized&&!r._terminated)throw new zt(dt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new wl;return r._queue.enqueueAndForgetEvenWhileRestricted((0,wt.Z)(function*(){try{yield(e=(0,wt.Z)(function*(i){if(!Qp.C())return Promise.resolve();const n=i+"main";yield Qp.delete(n)}),function(i){return e.apply(this,arguments)})(Q8(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class $le{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof Pb||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Kw("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function ple(r,t,e,i={}){var n;const s=(r=Or(r,D1))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Kw("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=Hl.MOCK_USER;else{o=(0,ne.Sg)(i.mockUserToken,null===(n=r._app)||void 0===n?void 0:n.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new zt(dt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Hl(l)}r._authCredentials=new yRe(new kse(o,a))}}(this._delegate,t,e,i)}enableNetwork(){return function D1e(r){return function d1e(r){return r.asyncQueue.enqueue((0,wt.Z)(function*(){const t=yield ble(r),e=yield d7(r);return t.setNetworkEnabled(!0),function(i){const n=wi(i);return n._u.delete(0),x1(n)}(e)}))}(qa(r=Or(r,Do)))}(this._delegate)}disableNetwork(){return function I1e(r){return function p1e(r){return r.asyncQueue.enqueue((0,wt.Z)(function*(){const t=yield ble(r),e=yield d7(r);return t.setNetworkEnabled(!1),(i=(0,wt.Z)(function*(n){const s=wi(n);s._u.add(0),yield xD(s),s.gu.set("Offline")}),function(n){return i.apply(this,arguments)})(e);var i}))}(qa(r=Or(r,Do)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,ale("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function T1e(r){return function(t){const e=new wl;return t.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return function GMe(r,t){return jG.apply(this,arguments)}(yield p7(t),e)})),e.promise}(qa(r=Or(r,Do)))}(this._delegate)}onSnapshotsInSync(t){return function iOe(r,t){return function m1e(r,t){const e=new MH(t);return r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return i=yield _D(r),n=e,wi(i).Ru.add(n),void n.next();var i,n})),()=>{e.bc(),r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return i=yield _D(r),n=e,void wi(i).Ru.delete(n);var i,n}))}}(qa(r=Or(r,Do)),g7(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new zt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new PD(this,fle(this._delegate,t))}catch(e){throw uu(e,"collection()","Firestore.collection()")}}doc(t){try{return new Hd(this,_H(this._delegate,t))}catch(e){throw uu(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new cu(this,function s1e(r,t){if(r=Or(r,D1),s7("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new zt(dt.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ah(r,null,(e=t,new rv(Ur.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw uu(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function sOe(r,t,e){r=Or(r,Do);const i=Object.assign(Object.assign({},nOe),e);return function(n){if(n.maxAttempts<1)throw new zt(dt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(n,s,o){const a=new wl;return n.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){const l=yield function Cle(r){return OH(r).then(t=>t.datastore)}(n);new u1e(n.asyncQueue,l,o,s,a).run()})),a.promise}(qa(r),n=>t(new rOe(r,n)),i)}(this._delegate,e=>t(new Yle(this,e)))}batch(){return qa(this._delegate),new Zle(new Ule(this._delegate,t=>OD(this._delegate,t)))}loadBundle(t){return function A1e(r,t){const e=qa(r=Or(r,Do)),i=new C1e;return function v1e(r,t,e,i){const n=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,h){if(l instanceof Uint8Array)return mle(l,h);if(l instanceof ArrayBuffer)return mle(new Uint8Array(l),h);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new o1e(l,o);var l}(e,E1(t));r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){!function n1e(r,t,e){const i=wi(r);var n;(n=(0,wt.Z)(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(m,y){const C=wi(m),S=ja(y.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",T=>C.Ns.getBundleMetadata(T,y.id)).then(T=>!!T&&T.createTime.compareTo(S)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(m=l).totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}),Promise.resolve(new Set);a._updateProgress(Zae(l));const h=new FMe(l,s.localStore,o.yt);let u=yield o.mc();for(;u;){const m=yield h.Fu(u);m&&a._updateProgress(m),u=yield o.mc()}const p=yield h.complete();return yield av(s,p.Lu,void 0),yield function(m,y){const C=wi(m);return C.persistence.runTransaction("Save bundle","readwrite",S=>C.Ns.saveBundleMetadata(S,y))}(s.localStore,l),a._completeWith(p.progress),Promise.resolve(p.Bu)}catch(l){return Kw("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var m}),function(s,o,a){return n.apply(this,arguments)})(i,t,e).then(n=>{i.sharedClientState.notifyBundleLoaded(n)})}(yield p7(r),n,i)}))}(e,r._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function k1e(r,t){return function y1e(r,t){return r.asyncQueue.enqueue((0,wt.Z)(function*(){return function(e,i){const n=wi(e);return n.persistence.runTransaction("Get named query","readonly",s=>n.Ns.getNamedQuery(s,i))}(yield PH(r),t)}))}(qa(r=Or(r,Do)),t).then(e=>e?new ah(r,null,e.query):null)}(this._delegate,t).then(e=>e?new cu(this,e):null)}}class WH extends E7{constructor(t){super(),this.firestore=t}convertBytes(t){return new M1(new pg(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return Hd.forKey(e,this.firestore,null)}}class Yle{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new WH(t)}get(t){const e=mS(t);return this._delegate.get(e).then(i=>new O1(this._firestore,new hv(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const n=mS(t);return i?(T7("Transaction.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=mS(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=mS(t);return this._delegate.delete(e),this}}class Zle{constructor(t){this._delegate=t}set(t,e,i){const n=mS(t);return i?(T7("WriteBatch.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=mS(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=mS(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class gS{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new _1(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new P1(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=gS.INSTANCES;let n=i.get(t);n||(n=new WeakMap,i.set(t,n));let s=n.get(e);return s||(s=new gS(t,new WH(t),e),n.set(e,s)),s}}gS.INSTANCES=new WeakMap;class Hd{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new WH(t)}static forPath(t,e,i){if(t.length%2!=0)throw new zt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new Hd(e,new To(e._delegate,i,new vi(t)))}static forKey(t,e,i){return new Hd(e,new To(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new PD(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new PD(this.firestore,fle(this._delegate,t))}catch(e){throw uu(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,ne.m9)(t))instanceof To&&gle(this._delegate,t)}set(t,e){e=T7("DocumentReference.set",e);try{return e?zle(this._delegate,t,e):zle(this._delegate,t)}catch(i){throw uu(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?jle(this._delegate,t):jle(this._delegate,t,e,...i)}catch(n){throw uu(n,"updateDoc()","DocumentReference.update()")}}delete(){return function eOe(r){return OD(Or(r.firestore,Do),[new mD(r._key,Wo.none())])}(this._delegate)}onSnapshot(...t){const e=Qle(t),i=Xle(t,n=>new O1(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)));return qle(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function Y1e(r){r=Or(r,To);const t=Or(r.firestore,Do),e=qa(t),i=new Kb(t);return function f1e(r,t){const e=new wl;return r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return(i=(0,wt.Z)(function*(n,s,o){try{const a=yield function(l,h){const u=wi(l);return u.persistence.runTransaction("read document","readonly",p=>u.localDocuments.getDocument(p,h))}(n,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new zt(dt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=ID(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield PH(r),t,e);var i})),e.promise}(e,r._key).then(n=>new hv(t,i,r._key,n,new fS(null!==n&&n.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===t?.source?function Z1e(r){r=Or(r,To);const t=Or(r.firestore,Do);return wle(qa(t),r._key,{source:"server"}).then(e=>x7(t,r,e))}(this._delegate):function $1e(r){r=Or(r,To);const t=Or(r.firestore,Do);return wle(qa(t),r._key).then(e=>x7(t,r,e))}(this._delegate),e.then(i=>new O1(this.firestore,new hv(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new Hd(this.firestore,this._delegate.withConverter(t?gS.getInstance(this.firestore,t):null))}}function uu(r,t,e){return r.message=r.message.replace(t,e),r}function Qle(r){for(const t of r)if("object"==typeof t&&!D7(t))return t;return{}}function Xle(r,t){var e,i;let n;return n=D7(r[0])?r[0]:D7(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:s=>{n.next&&n.next(t(s))},error:null===(e=n.error)||void 0===e?void 0:e.bind(n),complete:null===(i=n.complete)||void 0===i?void 0:i.bind(n)}}class O1{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Hd(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Hle(this._delegate,t._delegate)}}class P1 extends O1{data(t){const e=this._delegate.data(t);return function mRe(r,t){r||Li()}(void 0!==e),e}}class cu{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new WH(t)}where(t,e,i){try{return new cu(this.firestore,Wb(this._delegate,function B1e(r,t,e){const i=t,n=HH("where",r);return R1._create(n,i,e)}(t,e,i)))}catch(n){throw uu(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new cu(this.firestore,Wb(this._delegate,function V1e(r,t="asc"){const e=t,i=HH("orderBy",r);return S7._create(i,e)}(t,e)))}catch(i){throw uu(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new cu(this.firestore,Wb(this._delegate,function H1e(r){return ule("limit",r),zH._create("limit",r,"F")}(t)))}catch(e){throw uu(e,"limit()","Query.limit()")}}limitToLast(t){try{return new cu(this.firestore,Wb(this._delegate,function z1e(r){return ule("limitToLast",r),zH._create("limitToLast",r,"L")}(t)))}catch(e){throw uu(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new cu(this.firestore,Wb(this._delegate,function j1e(...r){return jH._create("startAt",r,!0)}(...t)))}catch(e){throw uu(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new cu(this.firestore,Wb(this._delegate,function q1e(...r){return jH._create("startAfter",r,!1)}(...t)))}catch(e){throw uu(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new cu(this.firestore,Wb(this._delegate,function U1e(...r){return qH._create("endBefore",r,!1)}(...t)))}catch(e){throw uu(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new cu(this.firestore,Wb(this._delegate,function W1e(...r){return qH._create("endAt",r,!0)}(...t)))}catch(e){throw uu(e,"endAt()","Query.endAt()")}}isEqual(t){return o7(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function X1e(r){r=Or(r,ah);const t=Or(r.firestore,Do),e=qa(t),i=new Kb(t);return function g1e(r,t){const e=new wl;return r.asyncQueue.enqueueAndForget((0,wt.Z)(function*(){return(i=(0,wt.Z)(function*(n,s,o){try{const a=yield xH(n,s,!0),l=new Jae(s,a.Hi),h=l.Wu(a.documents),u=l.applyChanges(h,!1);o.resolve(u.snapshot)}catch(a){const l=ID(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield PH(r),t,e);var i})),e.promise}(e,r._query).then(n=>new Gb(t,i,r,n))}(this._delegate):"server"===t?.source?function J1e(r){r=Or(r,ah);const t=Or(r.firestore,Do),e=qa(t),i=new Kb(t);return Sle(e,r._query,{source:"server"}).then(n=>new Gb(t,i,r,n))}(this._delegate):function Q1e(r){r=Or(r,ah);const t=Or(r.firestore,Do),e=qa(t),i=new Kb(t);return Ole(r._query),Sle(e,r._query).then(n=>new Gb(t,i,r,n))}(this._delegate),e.then(i=>new I7(this.firestore,new Gb(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=Qle(t),i=Xle(t,n=>new I7(this.firestore,new Gb(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)));return qle(this._delegate,e,i)}withConverter(t){return new cu(this.firestore,this._delegate.withConverter(t?gS.getInstance(this.firestore,t):null))}}class mOe{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new P1(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class I7{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new cu(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new P1(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new mOe(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new P1(this._firestore,i))})}isEqual(t){return Hle(this._delegate,t._delegate)}}class PD extends cu{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new Hd(this.firestore,t):null}doc(t){try{return new Hd(this.firestore,void 0===t?_H(this._delegate):_H(this._delegate,t))}catch(e){throw uu(e,"doc()","CollectionReference.doc()")}}add(t){return function tOe(r,t){const e=Or(r.firestore,Do),i=_H(r),n=UH(r.converter,t);return OD(e,[NH(dS(r.firestore),"addDoc",i._key,n,null!==r.converter,{}).toMutation(i._key,Wo.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new Hd(this.firestore,e))}isEqual(t){return gle(this._delegate,t._delegate)}withConverter(t){return new PD(this.firestore,this._delegate.withConverter(t?gS.getInstance(this.firestore,t):null))}}function mS(r){return Or(r,To)}class A7{constructor(...t){this._delegate=new lv(...t)}static documentId(){return new A7(Ta.keyField().canonicalString())}isEqual(t){return(t=(0,ne.m9)(t))instanceof lv&&this._delegate._internalPath.isEqual(t._internalPath)}}class vS{constructor(t){this._delegate=t}static serverTimestamp(){const t=function aOe(){return new m7("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new vS(t)}static delete(){const t=function oOe(){return new I1("deleteField")}();return t._methodName="FieldValue.delete",new vS(t)}static arrayUnion(...t){const e=function lOe(...r){return new O1e("arrayUnion",r)}(...t);return e._methodName="FieldValue.arrayUnion",new vS(e)}static arrayRemove(...t){const e=function hOe(...r){return new P1e("arrayRemove",r)}(...t);return e._methodName="FieldValue.arrayRemove",new vS(e)}static increment(t){const e=function uOe(r){return new L1e("increment",r)}(t);return e._methodName="FieldValue.increment",new vS(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const vOe={Firestore:$le,GeoPoint:LH,Timestamp:Uo,Blob:M1,Transaction:Yle,WriteBatch:Zle,DocumentReference:Hd,DocumentSnapshot:O1,Query:cu,QueryDocumentSnapshot:P1,QuerySnapshot:I7,CollectionReference:PD,FieldPath:A7,FieldValue:vS,setLogLevel:function gOe(r){!function gRe(r){_b.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};function Jle(r,t){return function COe(r,t=HW.z){return new Wa.y(e=>{let i;return null!=t?t.schedule(()=>{i=r.onSnapshot({includeMetadataChanges:!0},e)}):i=r.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(r,t)}function k7(r,t){return Jle(r,t).pipe((0,$i.U)(e=>({payload:e,type:"query"})))}function GH(r,t){return k7(r,t).pipe(zI(void 0),k4(),(0,$i.U)(([e,i])=>{const n=i.payload.docChanges(),s=n.map(o=>({type:o.type,payload:o}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,a)=>{const l=n.find(u=>u.doc.ref.isEqual(o.ref)),h=e?.payload.docs.find(u=>u.ref.isEqual(o.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(o.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:o}})}),s}))}function ehe(r,t,e){return GH(r,e).pipe(up((i,n)=>function SOe(r,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(r=function EOe(r,t){switch(t.type){case"added":if(!r[t.newIndex]||!r[t.newIndex].doc.ref.isEqual(t.doc.ref))return R7(r,t.newIndex,0,t);break;case"modified":if(null==r[t.oldIndex]||r[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=r.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return R7(r,t.newIndex,1,t)}break;case"removed":if(r[t.oldIndex]&&r[t.oldIndex].doc.ref.isEqual(t.doc.ref))return R7(r,t.oldIndex,1)}return r}(r,i))}),r}(i,n.map(s=>s.payload),t),[]),jie(),(0,$i.U)(i=>i.map(n=>({type:n.type,payload:n}))))}function R7(r,t,e,...i){const n=r.slice();return n.splice(t,e,...i),n}function the(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}!function bOe(r){(function yOe(r,t){r.INTERNAL.registerComponent(new Du.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return t(i,n)},"PUBLIC").setServiceProps(Object.assign({},vOe)))})(r,(t,e)=>new $le(t,e,new fOe)),r.registerVersion("@firebase/firestore-compat","0.3.0")}(jW.Z);class ihe{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=GH(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,$i.U)(i=>i.filter(n=>t.indexOf(n.type)>-1)))),e.pipe(zI(void 0),k4(),Nh(([i,n])=>n.length>0||!i),(0,$i.U)(([i,n])=>n),ss.iC)}auditTrail(t){return this.stateChanges(t).pipe(up((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=the(t);return ehe(this.query,e,this.afs.schedulers.outsideAngular).pipe(ss.iC)}valueChanges(t={}){return k7(this.query,this.afs.schedulers.outsideAngular).pipe((0,$i.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),ss.iC)}get(t){return(0,Tr.D)(this.query.get(t)).pipe(ss.iC)}add(t){return this.ref.add(t)}doc(t){return new nhe(this.ref.doc(t),this.afs)}}class nhe{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:n,query:s}=ohe(i,e);return new ihe(n,s,this.afs)}snapshotChanges(){return function wOe(r,t){return Jle(r,t).pipe(zI(void 0),k4(),(0,$i.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ss.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,$i.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Tr.D)(this.ref.get(t)).pipe(ss.iC)}}class xOe{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?GH(this.query,this.afs.schedulers.outsideAngular).pipe((0,$i.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Nh(e=>e.length>0),ss.iC):GH(this.query,this.afs.schedulers.outsideAngular).pipe(ss.iC)}auditTrail(t){return this.stateChanges(t).pipe(up((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=the(t);return ehe(this.query,e,this.afs.schedulers.outsideAngular).pipe(ss.iC)}valueChanges(t={}){return k7(this.query,this.afs.schedulers.outsideAngular).pipe((0,$i.U)(i=>i.payload.docs.map(n=>t.idField?Object.assign({[t.idField]:n.id},n.data()):n.data())),ss.iC)}get(t){return(0,Tr.D)(this.query.get(t)).pipe(ss.iC)}}const rhe=new v.OlP("angularfire2.enableFirestorePersistence"),she=new v.OlP("angularfire2.firestore.persistenceSettings"),TOe=new v.OlP("angularfire2.firestore.settings"),DOe=new v.OlP("angularfire2.firestore.use-emulator");function ohe(r,t=(e=>e)){return{query:t(r),ref:r}}let IOe=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,p,m,y,C,S,T,R,P){this.schedulers=l;const O=(0,Cl.on)(e,a,i),N=u;p&&m4(O,a,m,C,S,T,y,R),[this.firestore,this.persistenceEnabled$]=(0,Cl.cc)(`${O.name}.firestore`,"AngularFirestore",O.name,()=>{const z=a.runOutsideAngular(()=>O.firestore());if(s&&z.settings(s),N&&z.useEmulator(...N),n&&!lf(o)){const U=()=>{try{return(0,Tr.D)(z.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(ae){return typeof console<"u"&&console.warn(ae),Gi(!1)}};return[z,a.runOutsideAngular(U)]}return[z,Gi(!1)]},[s,N,n])}collection(e,i){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=ohe(n,i),a=this.schedulers.ngZone.run(()=>s);return new ihe(a,o,this)}collectionGroup(e,i){const n=i||(o=>o),s=this.firestore.collectionGroup(e);return new xOe(n(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>i);return new nhe(n,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(e){return new(e||r)(v.LFG(Cl.Dh),v.LFG(Cl.xv,8),v.LFG(rhe,8),v.LFG(TOe,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(ss.HU),v.LFG(she,8),v.LFG(DOe,8),v.LFG(m2,8),v.LFG(u4,8),v.LFG(c4,8),v.LFG(d4,8),v.LFG(p4,8),v.LFG(f4,8),v.LFG(g4,8),v.LFG(xM,8))},r.\u0275prov=v.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),AOe=(()=>{class r{constructor(){g2.Z.registerVersion("angularfire",ss.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:r,providers:[{provide:rhe,useValue:!0},{provide:she,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({providers:[IOe]}),r})();var kOe=te(3008);const _7_firebase={apiKey:"AIzaSyD-2f_Tk0S8vGm4xeZB3IQ5ptb740Tdfz4",authDomain:"nutrition-genius.firebaseapp.com",databaseURL:"https://nutrition-genius-default-rtdb.firebaseio.com",projectId:"nutrition-genius",storageBucket:"nutrition-genius.appspot.com",messagingSenderId:"635447365282",appId:"1:635447365282:web:479bc667528ebb7f3e51fb",measurementId:"G-76TG9DZ5FM"},ROe=(0,UW.ZF)(_7_firebase),L1=((0,kOe.IH)(ROe),["footerTemplate"]),F1=["headerTemplate"],ahe=["valueTemplate"],KH=["groupTemplate"],LD=["itemTemplate"],FD=["noRecordsTemplate"],N1=["actionFailureTemplate"];var M7;const _Oe=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","open","select","valueChange"],MOe=["value"];let jc=M7=class extends Ky{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(_Oe),this.addTwoWay.call(this,MOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};jc.\u0275fac=function(t){return new(t||jc)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},jc.\u0275cmp=v.Xpm({type:jc,selectors:[["ejs-dropdownlist"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,L1,5),v.Suo(i,F1,5),v.Suo(i,ahe,5),v.Suo(i,KH,5),v.Suo(i,LD,5),v.Suo(i,FD,5),v.Suo(i,N1,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.valueTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>M7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],jc.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],jc.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],jc.prototype,"valueTemplate",void 0),(0,Fi.gn)([pn()],jc.prototype,"groupTemplate",void 0),(0,Fi.gn)([pn()],jc.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn("No records found")],jc.prototype,"noRecordsTemplate",void 0),(0,Fi.gn)([pn("Request failed")],jc.prototype,"actionFailureTemplate",void 0),jc=M7=(0,Fi.gn)([fd([Xo,Fa])],jc);let lhe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();var O7;const OOe=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],POe=["value"];let zd=O7=class extends I6{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(OOe),this.addTwoWay.call(this,POe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var P7;zd.\u0275fac=function(t){return new(t||zd)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},zd.\u0275cmp=v.Xpm({type:zd,selectors:[["ejs-combobox"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,L1,5),v.Suo(i,F1,5),v.Suo(i,KH,5),v.Suo(i,LD,5),v.Suo(i,FD,5),v.Suo(i,N1,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",sortOrder:"sortOrder",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>O7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],zd.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],zd.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],zd.prototype,"groupTemplate",void 0),(0,Fi.gn)([pn()],zd.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn("No records found")],zd.prototype,"noRecordsTemplate",void 0),(0,Fi.gn)([pn("Request failed")],zd.prototype,"actionFailureTemplate",void 0),zd=O7=(0,Fi.gn)([fd([Xo,Fa])],zd);const LOe=["actionBegin","actionComplete","actionFailure","beforeOpen","blur","change","close","created","customValueSpecifier","dataBound","destroyed","filtering","focus","open","select","valueChange"],FOe=["value"];let jd=P7=class extends QN{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(LOe),this.addTwoWay.call(this,FOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var L7;jd.\u0275fac=function(t){return new(t||jd)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},jd.\u0275cmp=v.Xpm({type:jd,selectors:[["ejs-autocomplete"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,L1,5),v.Suo(i,F1,5),v.Suo(i,KH,5),v.Suo(i,LD,5),v.Suo(i,FD,5),v.Suo(i,N1,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowCustom:"allowCustom",allowFiltering:"allowFiltering",autofill:"autofill",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",highlight:"highlight",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",index:"index",itemTemplate:"itemTemplate",locale:"locale",minLength:"minLength",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",showClearButton:"showClearButton",showPopupButton:"showPopupButton",sortOrder:"sortOrder",suggestionCount:"suggestionCount",text:"text",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",customValueSpecifier:"customValueSpecifier",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>P7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],jd.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],jd.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],jd.prototype,"groupTemplate",void 0),(0,Fi.gn)([pn()],jd.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn("No records found")],jd.prototype,"noRecordsTemplate",void 0),(0,Fi.gn)([pn("Request failed")],jd.prototype,"actionFailureTemplate",void 0),jd=P7=(0,Fi.gn)([fd([Xo,Fa])],jd);const NOe=["actionBegin","actionComplete","actionFailure","beforeOpen","beforeSelectAll","blur","change","chipSelection","close","created","customValueSelection","dataBound","destroyed","filtering","focus","open","removed","removing","select","selectedAll","tagging","valueChange"],BOe=["value"];let qc=L7=class extends bZ{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let s=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(s)&&this.injectedModules.push(s)}catch{}this.registerEvents(NOe),this.addTwoWay.call(this,BOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};qc.\u0275fac=function(t){return new(t||qc)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},qc.\u0275cmp=v.Xpm({type:qc,selectors:[["ejs-multiselect"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,L1,5),v.Suo(i,F1,5),v.Suo(i,ahe,5),v.Suo(i,LD,5),v.Suo(i,KH,5),v.Suo(i,FD,5),v.Suo(i,N1,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.valueTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.groupTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",addTagOnBlur:"addTagOnBlur",allowCustomValue:"allowCustomValue",allowFiltering:"allowFiltering",changeOnBlur:"changeOnBlur",closePopupOnSelect:"closePopupOnSelect",cssClass:"cssClass",dataSource:"dataSource",delimiterChar:"delimiterChar",enableGroupCheckBox:"enableGroupCheckBox",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableSelectionOrder:"enableSelectionOrder",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",groupTemplate:"groupTemplate",headerTemplate:"headerTemplate",hideSelectedItem:"hideSelectedItem",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",mode:"mode",noRecordsTemplate:"noRecordsTemplate",openOnClick:"openOnClick",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",query:"query",readonly:"readonly",selectAllText:"selectAllText",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",unSelectAllText:"unSelectAllText",value:"value",valueTemplate:"valueTemplate",width:"width",zIndex:"zIndex"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeOpen:"beforeOpen",beforeSelectAll:"beforeSelectAll",blur:"blur",change:"change",chipSelection:"chipSelection",close:"close",created:"created",customValueSelection:"customValueSelection",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",open:"open",removed:"removed",removing:"removing",select:"select",selectedAll:"selectedAll",tagging:"tagging",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>L7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],qc.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],qc.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],qc.prototype,"valueTemplate",void 0),(0,Fi.gn)([pn()],qc.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn()],qc.prototype,"groupTemplate",void 0),(0,Fi.gn)([pn("No records found")],qc.prototype,"noRecordsTemplate",void 0),(0,Fi.gn)([pn("Request failed")],qc.prototype,"actionFailureTemplate",void 0),qc=L7=(0,Fi.gn)([fd([Xo,Fa])],qc);let VOe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();var F7;const HOe=["focus","blur","actionBegin","actionComplete","actionFailure","beforeDrop","beforeItemRender","change","created","dataBound","destroyed","drag","dragStart","drop","filtering","select","valueChange"],zOe=["value"];let Yb=F7=class extends tfe{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let s=this.injector.get("DropDownsCheckBoxSelection");-1===this.injectedModules.indexOf(s)&&this.injectedModules.push(s)}catch{}this.registerEvents(HOe),this.addTwoWay.call(this,zOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var N7;Yb.\u0275fac=function(t){return new(t||Yb)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},Yb.\u0275cmp=v.Xpm({type:Yb,selectors:[["ejs-listbox"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,LD,5),v.Suo(i,FD,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowDragAndDrop:"allowDragAndDrop",allowFiltering:"allowFiltering",cssClass:"cssClass",dataSource:"dataSource",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",groupTemplate:"groupTemplate",height:"height",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",maximumSelectionLength:"maximumSelectionLength",noRecordsTemplate:"noRecordsTemplate",query:"query",scope:"scope",selectionSettings:"selectionSettings",sortOrder:"sortOrder",toolbarSettings:"toolbarSettings",value:"value",zIndex:"zIndex"},outputs:{focus:"focus",blur:"blur",actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",beforeDrop:"beforeDrop",beforeItemRender:"beforeItemRender",change:"change",created:"created",dataBound:"dataBound",destroyed:"destroyed",drag:"drag",dragStart:"dragStart",drop:"drop",filtering:"filtering",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>F7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],Yb.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn("No records found")],Yb.prototype,"noRecordsTemplate",void 0),Yb=F7=(0,Fi.gn)([fd([Xo,Fa])],Yb);const jOe=["actionFailure","beforeOpen","blur","change","close","created","dataBound","destroyed","filtering","focus","keyPress","open","select","valueChange"],qOe=["value"];let Xp=N7=class extends bpe{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.skipFromEvent=!0,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(jOe),this.addTwoWay.call(this,qOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};Xp.\u0275fac=function(t){return new(t||Xp)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},Xp.\u0275cmp=v.Xpm({type:Xp,selectors:[["ejs-dropdowntree"]],contentQueries:function(t,e,i){if(1&t&&(v.Suo(i,L1,5),v.Suo(i,F1,5),v.Suo(i,LD,5),v.Suo(i,FD,5),v.Suo(i,N1,5)),2&t){let n;v.iGM(n=v.CRH())&&(e.footerTemplate=n.first),v.iGM(n=v.CRH())&&(e.headerTemplate=n.first),v.iGM(n=v.CRH())&&(e.itemTemplate=n.first),v.iGM(n=v.CRH())&&(e.noRecordsTemplate=n.first),v.iGM(n=v.CRH())&&(e.actionFailureTemplate=n.first)}},inputs:{actionFailureTemplate:"actionFailureTemplate",allowFiltering:"allowFiltering",allowMultiSelection:"allowMultiSelection",changeOnBlur:"changeOnBlur",cssClass:"cssClass",customTemplate:"customTemplate",delimiterChar:"delimiterChar",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enabled:"enabled",fields:"fields",filterBarPlaceholder:"filterBarPlaceholder",filterType:"filterType",floatLabelType:"floatLabelType",footerTemplate:"footerTemplate",headerTemplate:"headerTemplate",htmlAttributes:"htmlAttributes",ignoreAccent:"ignoreAccent",ignoreCase:"ignoreCase",itemTemplate:"itemTemplate",locale:"locale",mode:"mode",noRecordsTemplate:"noRecordsTemplate",placeholder:"placeholder",popupHeight:"popupHeight",popupWidth:"popupWidth",readonly:"readonly",selectAllText:"selectAllText",showCheckBox:"showCheckBox",showClearButton:"showClearButton",showDropDownIcon:"showDropDownIcon",showSelectAll:"showSelectAll",sortOrder:"sortOrder",text:"text",treeSettings:"treeSettings",unSelectAllText:"unSelectAllText",value:"value",width:"width",wrapText:"wrapText",zIndex:"zIndex"},outputs:{actionFailure:"actionFailure",beforeOpen:"beforeOpen",blur:"blur",change:"change",close:"close",created:"created",dataBound:"dataBound",destroyed:"destroyed",filtering:"filtering",focus:"focus",keyPress:"keyPress",open:"open",select:"select",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>N7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),(0,Fi.gn)([pn()],Xp.prototype,"footerTemplate",void 0),(0,Fi.gn)([pn()],Xp.prototype,"headerTemplate",void 0),(0,Fi.gn)([pn()],Xp.prototype,"itemTemplate",void 0),(0,Fi.gn)([pn("No records found")],Xp.prototype,"noRecordsTemplate",void 0),(0,Fi.gn)([pn("Request failed")],Xp.prototype,"actionFailureTemplate",void 0),Xp=N7=(0,Fi.gn)([fd([Xo,Fa])],Xp);let UOe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();var B7;const WOe=["focus","blur","change","created","checkedChange","indeterminateChange"],GOe=["checked","indeterminate"];let ND=B7=class extends fl{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(WOe),this.addTwoWay.call(this,GOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};ND.\u0275fac=function(t){return new(t||ND)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},ND.\u0275cmp=v.Xpm({type:ND,selectors:[["ejs-checkbox"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",indeterminate:"indeterminate",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange",indeterminateChange:"indeterminateChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>B7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),ND=B7=(0,Fi.gn)([fd([Xo,Fa])],ND);let KOe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r}),r.\u0275inj=v.cJS({imports:[[Rh]]}),r})();var V7;const $Oe=["focus","blur","change","created","valueChange"],YOe=["value"];let BD=V7=class extends vm{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents($Oe),this.addTwoWay.call(this,YOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};var H7;BD.\u0275fac=function(t){return new(t||BD)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},BD.\u0275cmp=v.Xpm({type:BD,selectors:[["ejs-radiobutton"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enableHtmlSanitizer:"enableHtmlSanitizer",enablePersistence:"enablePersistence",enableRtl:"enableRtl",htmlAttributes:"htmlAttributes",label:"label",labelPosition:"labelPosition",locale:"locale",name:"name",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",valueChange:"valueChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>V7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),BD=V7=(0,Fi.gn)([fd([Xo,Fa])],BD);const ZOe=["focus","blur","change","created","checkedChange"],QOe=["checked"];let VD=H7=class extends mk{constructor(t,e,i,n){super(),this.ngEle=t,this.srenderer=e,this.viewContainerRef=i,this.injector=n,this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[],this.registerEvents(ZOe),this.addTwoWay.call(this,QOe),Za("currentInstance",this,this.viewContainerRef),this.formContext=new Fa,this.formCompContext=new Xo}registerOnChange(t){}registerOnTouched(t){}writeValue(t){}setDisabledState(t){}ngOnInit(){this.formCompContext.ngOnInit(this)}ngAfterViewInit(){this.formContext.ngAfterViewInit(this)}ngOnDestroy(){this.formCompContext.ngOnDestroy(this)}ngAfterContentChecked(){this.formCompContext.ngAfterContentChecked(this)}};VD.\u0275fac=function(t){return new(t||VD)(v.Y36(v.SBq),v.Y36(v.Qsj),v.Y36(v.s_b),v.Y36(v.zs3))},VD.\u0275cmp=v.Xpm({type:VD,selectors:[["ejs-switch"]],inputs:{checked:"checked",cssClass:"cssClass",disabled:"disabled",enablePersistence:"enablePersistence",enableRtl:"enableRtl",locale:"locale",name:"name",offLabel:"offLabel",onLabel:"onLabel",value:"value"},outputs:{focus:"focus",blur:"blur",change:"change",created:"created",checkedChange:"checkedChange"},features:[v._Bn([{provide:Ro,useExisting:(0,v.Gpc)(()=>H7),multi:!0}]),v.qOj],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),VD=H7=(0,Fi.gn)([fd([Xo,Fa])],VD);let XOe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=v.oAB({type:r,bootstrap:[SIe]}),r.\u0275inj=v.cJS({providers:[Uwe],imports:[pf,bIe,qwe,Gwe,uE,Cl.hO.initializeApp(_7_firebase),HDe,AOe,dke,eIe,mz,Z7,lhe,UOe,VOe,lhe,KOe]}),r})();vL("ORg4AjUWIQA/Gnt2VVhjQlFac1lJXGFWfVJpTGpQdk5xdV9DaVZUTWY/P1ZhSXxRd0djWn9XcXJXRWVcUkU="),Tg().bootstrapModule(XOe).catch(r=>console.error(r))},9751:(Hi,_t,te)=>{te.d(_t,{y:()=>ot});var v=te(930),ue=te(727),ee=te(8822),Ue=te(9635),lt=te(2416),pt=te(576),tt=te(2806);let ot=(()=>{class Le{constructor(St){St&&(this._subscribe=St)}lift(St){const Ct=new Le;return Ct.source=this,Ct.operator=St,Ct}subscribe(St,Ct,li){const ft=function be(Le){return Le&&Le instanceof v.Lv||function Ce(Le){return Le&&(0,pt.m)(Le.next)&&(0,pt.m)(Le.error)&&(0,pt.m)(Le.complete)}(Le)&&(0,ue.Nn)(Le)}(St)?St:new v.Hp(St,Ct,li);return(0,tt.x)(()=>{const{operator:it,source:Si}=this;ft.add(it?it.call(ft,Si):Si?this._subscribe(ft):this._trySubscribe(ft))}),ft}_trySubscribe(St){try{return this._subscribe(St)}catch(Ct){St.error(Ct)}}forEach(St,Ct){return new(Ct=ct(Ct))((li,ft)=>{const it=new v.Hp({next:Si=>{try{St(Si)}catch(oi){ft(oi),it.unsubscribe()}},error:ft,complete:li});this.subscribe(it)})}_subscribe(St){var Ct;return null===(Ct=this.source)||void 0===Ct?void 0:Ct.subscribe(St)}[ee.L](){return this}pipe(...St){return(0,Ue.U)(St)(this)}toPromise(St){return new(St=ct(St))((Ct,li)=>{let ft;this.subscribe(it=>ft=it,it=>li(it),()=>Ct(ft))})}}return Le.create=Ot=>new Le(Ot),Le})();function ct(Le){var Ot;return null!==(Ot=Le??lt.v.Promise)&&void 0!==Ot?Ot:Promise}},7579:(Hi,_t,te)=>{te.d(_t,{x:()=>tt});var v=te(9751),ue=te(727);const Ue=(0,te(3888).d)(ct=>function(){ct(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var lt=te(8737),pt=te(2806);let tt=(()=>{class ct extends v.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(be){const Le=new ot(this,this);return Le.operator=be,Le}_throwIfClosed(){if(this.closed)throw new Ue}next(be){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Le of this.currentObservers)Le.next(be)}})}error(be){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=be;const{observers:Le}=this;for(;Le.length;)Le.shift().error(be)}})}complete(){(0,pt.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:be}=this;for(;be.length;)be.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var be;return(null===(be=this.observers)||void 0===be?void 0:be.length)>0}_trySubscribe(be){return this._throwIfClosed(),super._trySubscribe(be)}_subscribe(be){return this._throwIfClosed(),this._checkFinalizedStatuses(be),this._innerSubscribe(be)}_innerSubscribe(be){const{hasError:Le,isStopped:Ot,observers:St}=this;return Le||Ot?ue.Lc:(this.currentObservers=null,St.push(be),new ue.w0(()=>{this.currentObservers=null,(0,lt.P)(St,be)}))}_checkFinalizedStatuses(be){const{hasError:Le,thrownError:Ot,isStopped:St}=this;Le?be.error(Ot):St&&be.complete()}asObservable(){const be=new v.y;return be.source=this,be}}return ct.create=(Ce,be)=>new ot(Ce,be),ct})();class ot extends tt{constructor(Ce,be){super(),this.destination=Ce,this.source=be}next(Ce){var be,Le;null===(Le=null===(be=this.destination)||void 0===be?void 0:be.next)||void 0===Le||Le.call(be,Ce)}error(Ce){var be,Le;null===(Le=null===(be=this.destination)||void 0===be?void 0:be.error)||void 0===Le||Le.call(be,Ce)}complete(){var Ce,be;null===(be=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.complete)||void 0===be||be.call(Ce)}_subscribe(Ce){var be,Le;return null!==(Le=null===(be=this.source)||void 0===be?void 0:be.subscribe(Ce))&&void 0!==Le?Le:ue.Lc}}},930:(Hi,_t,te)=>{te.d(_t,{Hp:()=>li,Lv:()=>Le});var v=te(576),ue=te(727),ee=te(2416),Ue=te(7849),lt=te(5032);const pt=ct("C",void 0,void 0);function ct(Ft,Mt,yt){return{kind:Ft,value:Mt,error:yt}}var Ce=te(3410),be=te(2806);class Le extends ue.w0{constructor(Mt){super(),this.isStopped=!1,Mt?(this.destination=Mt,(0,ue.Nn)(Mt)&&Mt.add(this)):this.destination=oi}static create(Mt,yt,ti){return new li(Mt,yt,ti)}next(Mt){this.isStopped?Si(function ot(Ft){return ct("N",Ft,void 0)}(Mt),this):this._next(Mt)}error(Mt){this.isStopped?Si(function tt(Ft){return ct("E",void 0,Ft)}(Mt),this):(this.isStopped=!0,this._error(Mt))}complete(){this.isStopped?Si(pt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Mt){this.destination.next(Mt)}_error(Mt){try{this.destination.error(Mt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ot=Function.prototype.bind;function St(Ft,Mt){return Ot.call(Ft,Mt)}class Ct{constructor(Mt){this.partialObserver=Mt}next(Mt){const{partialObserver:yt}=this;if(yt.next)try{yt.next(Mt)}catch(ti){ft(ti)}}error(Mt){const{partialObserver:yt}=this;if(yt.error)try{yt.error(Mt)}catch(ti){ft(ti)}else ft(Mt)}complete(){const{partialObserver:Mt}=this;if(Mt.complete)try{Mt.complete()}catch(yt){ft(yt)}}}class li extends Le{constructor(Mt,yt,ti){let ze;if(super(),(0,v.m)(Mt)||!Mt)ze={next:Mt??void 0,error:yt??void 0,complete:ti??void 0};else{let Qe;this&&ee.v.useDeprecatedNextContext?(Qe=Object.create(Mt),Qe.unsubscribe=()=>this.unsubscribe(),ze={next:Mt.next&&St(Mt.next,Qe),error:Mt.error&&St(Mt.error,Qe),complete:Mt.complete&&St(Mt.complete,Qe)}):ze=Mt}this.destination=new Ct(ze)}}function ft(Ft){ee.v.useDeprecatedSynchronousErrorHandling?(0,be.O)(Ft):(0,Ue.h)(Ft)}function Si(Ft,Mt){const{onStoppedNotification:yt}=ee.v;yt&&Ce.z.setTimeout(()=>yt(Ft,Mt))}const oi={closed:!0,next:lt.Z,error:function it(Ft){throw Ft},complete:lt.Z}},727:(Hi,_t,te)=>{te.d(_t,{Lc:()=>pt,w0:()=>lt,Nn:()=>tt});var v=te(576);const ee=(0,te(3888).d)(ct=>function(be){ct(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((Le,Ot)=>`${Ot+1}) ${Le.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be});var Ue=te(8737);class lt{constructor(Ce){this.initialTeardown=Ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let Ce;if(!this.closed){this.closed=!0;const{_parentage:be}=this;if(be)if(this._parentage=null,Array.isArray(be))for(const St of be)St.remove(this);else be.remove(this);const{initialTeardown:Le}=this;if((0,v.m)(Le))try{Le()}catch(St){Ce=St instanceof ee?St.errors:[St]}const{_finalizers:Ot}=this;if(Ot){this._finalizers=null;for(const St of Ot)try{ot(St)}catch(Ct){Ce=Ce??[],Ct instanceof ee?Ce=[...Ce,...Ct.errors]:Ce.push(Ct)}}if(Ce)throw new ee(Ce)}}add(Ce){var be;if(Ce&&Ce!==this)if(this.closed)ot(Ce);else{if(Ce instanceof lt){if(Ce.closed||Ce._hasParent(this))return;Ce._addParent(this)}(this._finalizers=null!==(be=this._finalizers)&&void 0!==be?be:[]).push(Ce)}}_hasParent(Ce){const{_parentage:be}=this;return be===Ce||Array.isArray(be)&&be.includes(Ce)}_addParent(Ce){const{_parentage:be}=this;this._parentage=Array.isArray(be)?(be.push(Ce),be):be?[be,Ce]:Ce}_removeParent(Ce){const{_parentage:be}=this;be===Ce?this._parentage=null:Array.isArray(be)&&(0,Ue.P)(be,Ce)}remove(Ce){const{_finalizers:be}=this;be&&(0,Ue.P)(be,Ce),Ce instanceof lt&&Ce._removeParent(this)}}lt.EMPTY=(()=>{const ct=new lt;return ct.closed=!0,ct})();const pt=lt.EMPTY;function tt(ct){return ct instanceof lt||ct&&"closed"in ct&&(0,v.m)(ct.remove)&&(0,v.m)(ct.add)&&(0,v.m)(ct.unsubscribe)}function ot(ct){(0,v.m)(ct)?ct():ct.unsubscribe()}},2416:(Hi,_t,te)=>{te.d(_t,{v:()=>v});const v={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Hi,_t,te)=>{te.d(_t,{E:()=>ue});const ue=new(te(9751).y)(lt=>lt.complete())},8996:(Hi,_t,te)=>{te.d(_t,{D:()=>Mt});var v=te(8421),ue=te(5363),ee=te(9468),pt=te(9751),ot=te(2202),ct=te(576),Ce=te(9672);function Le(yt,ti){if(!yt)throw new Error("Iterable cannot be null");return new pt.y(ze=>{(0,Ce.f)(ze,ti,()=>{const Qe=yt[Symbol.asyncIterator]();(0,Ce.f)(ze,ti,()=>{Qe.next().then(gt=>{gt.done?ze.complete():ze.next(gt.value)})},0,!0)})})}var Ot=te(3670),St=te(8239),Ct=te(1144),li=te(6495),ft=te(2206),it=te(4532),Si=te(3260);function Mt(yt,ti){return ti?function Ft(yt,ti){if(null!=yt){if((0,Ot.c)(yt))return function Ue(yt,ti){return(0,v.Xf)(yt).pipe((0,ee.R)(ti),(0,ue.Q)(ti))}(yt,ti);if((0,Ct.z)(yt))return function tt(yt,ti){return new pt.y(ze=>{let Qe=0;return ti.schedule(function(){Qe===yt.length?ze.complete():(ze.next(yt[Qe++]),ze.closed||this.schedule())})})}(yt,ti);if((0,St.t)(yt))return function lt(yt,ti){return(0,v.Xf)(yt).pipe((0,ee.R)(ti),(0,ue.Q)(ti))}(yt,ti);if((0,ft.D)(yt))return Le(yt,ti);if((0,li.T)(yt))return function be(yt,ti){return new pt.y(ze=>{let Qe;return(0,Ce.f)(ze,ti,()=>{Qe=yt[ot.h](),(0,Ce.f)(ze,ti,()=>{let gt,Fe;try{({value:gt,done:Fe}=Qe.next())}catch(Be){return void ze.error(Be)}Fe?ze.complete():ze.next(gt)},0,!0)}),()=>(0,ct.m)(Qe?.return)&&Qe.return()})}(yt,ti);if((0,Si.L)(yt))return function oi(yt,ti){return Le((0,Si.Q)(yt),ti)}(yt,ti)}throw(0,it.z)(yt)}(yt,ti):(0,v.Xf)(yt)}},8421:(Hi,_t,te)=>{te.d(_t,{Xf:()=>Ot});var v=te(655),ue=te(1144),ee=te(8239),Ue=te(9751),lt=te(3670),pt=te(2206),tt=te(4532),ot=te(6495),ct=te(3260),Ce=te(576),be=te(7849),Le=te(8822);function Ot(Ft){if(Ft instanceof Ue.y)return Ft;if(null!=Ft){if((0,lt.c)(Ft))return function St(Ft){return new Ue.y(Mt=>{const yt=Ft[Le.L]();if((0,Ce.m)(yt.subscribe))return yt.subscribe(Mt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ft);if((0,ue.z)(Ft))return function Ct(Ft){return new Ue.y(Mt=>{for(let yt=0;yt<Ft.length&&!Mt.closed;yt++)Mt.next(Ft[yt]);Mt.complete()})}(Ft);if((0,ee.t)(Ft))return function li(Ft){return new Ue.y(Mt=>{Ft.then(yt=>{Mt.closed||(Mt.next(yt),Mt.complete())},yt=>Mt.error(yt)).then(null,be.h)})}(Ft);if((0,pt.D)(Ft))return it(Ft);if((0,ot.T)(Ft))return function ft(Ft){return new Ue.y(Mt=>{for(const yt of Ft)if(Mt.next(yt),Mt.closed)return;Mt.complete()})}(Ft);if((0,ct.L)(Ft))return function Si(Ft){return it((0,ct.Q)(Ft))}(Ft)}throw(0,tt.z)(Ft)}function it(Ft){return new Ue.y(Mt=>{(function oi(Ft,Mt){var yt,ti,ze,Qe;return(0,v.mG)(this,void 0,void 0,function*(){try{for(yt=(0,v.KL)(Ft);!(ti=yield yt.next()).done;)if(Mt.next(ti.value),Mt.closed)return}catch(gt){ze={error:gt}}finally{try{ti&&!ti.done&&(Qe=yt.return)&&(yield Qe.call(yt))}finally{if(ze)throw ze.error}}Mt.complete()})})(Ft,Mt).catch(yt=>Mt.error(yt))})}},6451:(Hi,_t,te)=>{te.d(_t,{T:()=>pt});var v=te(8189),ue=te(8421),ee=te(515),Ue=te(7669),lt=te(8996);function pt(...tt){const ot=(0,Ue.yG)(tt),ct=(0,Ue._6)(tt,1/0),Ce=tt;return Ce.length?1===Ce.length?(0,ue.Xf)(Ce[0]):(0,v.J)(ct)((0,lt.D)(Ce,ot)):ee.E}},5403:(Hi,_t,te)=>{te.d(_t,{x:()=>ue});var v=te(930);function ue(Ue,lt,pt,tt,ot){return new ee(Ue,lt,pt,tt,ot)}class ee extends v.Lv{constructor(lt,pt,tt,ot,ct,Ce){super(lt),this.onFinalize=ct,this.shouldUnsubscribe=Ce,this._next=pt?function(be){try{pt(be)}catch(Le){lt.error(Le)}}:super._next,this._error=ot?function(be){try{ot(be)}catch(Le){lt.error(Le)}finally{this.unsubscribe()}}:super._error,this._complete=tt?function(){try{tt()}catch(be){lt.error(be)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var lt;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pt}=this;super.unsubscribe(),!pt&&(null===(lt=this.onFinalize)||void 0===lt||lt.call(this))}}}},4004:(Hi,_t,te)=>{te.d(_t,{U:()=>ee});var v=te(4482),ue=te(5403);function ee(Ue,lt){return(0,v.e)((pt,tt)=>{let ot=0;pt.subscribe((0,ue.x)(tt,ct=>{tt.next(Ue.call(lt,ct,ot++))}))})}},8189:(Hi,_t,te)=>{te.d(_t,{J:()=>ee});var v=te(5577),ue=te(4671);function ee(Ue=1/0){return(0,v.z)(ue.y,Ue)}},5577:(Hi,_t,te)=>{te.d(_t,{z:()=>ot});var v=te(4004),ue=te(8421),ee=te(4482),Ue=te(9672),lt=te(5403),tt=te(576);function ot(ct,Ce,be=1/0){return(0,tt.m)(Ce)?ot((Le,Ot)=>(0,v.U)((St,Ct)=>Ce(Le,St,Ot,Ct))((0,ue.Xf)(ct(Le,Ot))),be):("number"==typeof Ce&&(be=Ce),(0,ee.e)((Le,Ot)=>function pt(ct,Ce,be,Le,Ot,St,Ct,li){const ft=[];let it=0,Si=0,oi=!1;const Ft=()=>{oi&&!ft.length&&!it&&Ce.complete()},Mt=ti=>it<Le?yt(ti):ft.push(ti),yt=ti=>{St&&Ce.next(ti),it++;let ze=!1;(0,ue.Xf)(be(ti,Si++)).subscribe((0,lt.x)(Ce,Qe=>{Ot?.(Qe),St?Mt(Qe):Ce.next(Qe)},()=>{ze=!0},void 0,()=>{if(ze)try{for(it--;ft.length&&it<Le;){const Qe=ft.shift();Ct?(0,Ue.f)(Ce,Ct,()=>yt(Qe)):yt(Qe)}Ft()}catch(Qe){Ce.error(Qe)}}))};return ct.subscribe((0,lt.x)(Ce,Mt,()=>{oi=!0,Ft()})),()=>{li?.()}}(Le,Ot,ct,be)))}},5363:(Hi,_t,te)=>{te.d(_t,{Q:()=>Ue});var v=te(9672),ue=te(4482),ee=te(5403);function Ue(lt,pt=0){return(0,ue.e)((tt,ot)=>{tt.subscribe((0,ee.x)(ot,ct=>(0,v.f)(ot,lt,()=>ot.next(ct),pt),()=>(0,v.f)(ot,lt,()=>ot.complete(),pt),ct=>(0,v.f)(ot,lt,()=>ot.error(ct),pt)))})}},3099:(Hi,_t,te)=>{te.d(_t,{B:()=>lt});var v=te(8421),ue=te(7579),ee=te(930),Ue=te(4482);function lt(tt={}){const{connector:ot=(()=>new ue.x),resetOnError:ct=!0,resetOnComplete:Ce=!0,resetOnRefCountZero:be=!0}=tt;return Le=>{let Ot,St,Ct,li=0,ft=!1,it=!1;const Si=()=>{St?.unsubscribe(),St=void 0},oi=()=>{Si(),Ot=Ct=void 0,ft=it=!1},Ft=()=>{const Mt=Ot;oi(),Mt?.unsubscribe()};return(0,Ue.e)((Mt,yt)=>{li++,!it&&!ft&&Si();const ti=Ct=Ct??ot();yt.add(()=>{li--,0===li&&!it&&!ft&&(St=pt(Ft,be))}),ti.subscribe(yt),!Ot&&li>0&&(Ot=new ee.Hp({next:ze=>ti.next(ze),error:ze=>{it=!0,Si(),St=pt(oi,ct,ze),ti.error(ze)},complete:()=>{ft=!0,Si(),St=pt(oi,Ce),ti.complete()}}),(0,v.Xf)(Mt).subscribe(Ot))})(Le)}}function pt(tt,ot,...ct){if(!0===ot)return void tt();if(!1===ot)return;const Ce=new ee.Hp({next:()=>{Ce.unsubscribe(),tt()}});return ot(...ct).subscribe(Ce)}},9468:(Hi,_t,te)=>{te.d(_t,{R:()=>ue});var v=te(4482);function ue(ee,Ue=0){return(0,v.e)((lt,pt)=>{pt.add(ee.schedule(()=>lt.subscribe(pt),Ue))})}},8505:(Hi,_t,te)=>{te.d(_t,{b:()=>lt});var v=te(576),ue=te(4482),ee=te(5403),Ue=te(4671);function lt(pt,tt,ot){const ct=(0,v.m)(pt)||tt||ot?{next:pt,error:tt,complete:ot}:pt;return ct?(0,ue.e)((Ce,be)=>{var Le;null===(Le=ct.subscribe)||void 0===Le||Le.call(ct);let Ot=!0;Ce.subscribe((0,ee.x)(be,St=>{var Ct;null===(Ct=ct.next)||void 0===Ct||Ct.call(ct,St),be.next(St)},()=>{var St;Ot=!1,null===(St=ct.complete)||void 0===St||St.call(ct),be.complete()},St=>{var Ct;Ot=!1,null===(Ct=ct.error)||void 0===Ct||Ct.call(ct,St),be.error(St)},()=>{var St,Ct;Ot&&(null===(St=ct.unsubscribe)||void 0===St||St.call(ct)),null===(Ct=ct.finalize)||void 0===Ct||Ct.call(ct)}))}):Ue.y}},4408:(Hi,_t,te)=>{te.d(_t,{o:()=>lt});var v=te(727);class ue extends v.w0{constructor(tt,ot){super()}schedule(tt,ot=0){return this}}const ee={setInterval(pt,tt,...ot){const{delegate:ct}=ee;return ct?.setInterval?ct.setInterval(pt,tt,...ot):setInterval(pt,tt,...ot)},clearInterval(pt){const{delegate:tt}=ee;return(tt?.clearInterval||clearInterval)(pt)},delegate:void 0};var Ue=te(8737);class lt extends ue{constructor(tt,ot){super(tt,ot),this.scheduler=tt,this.work=ot,this.pending=!1}schedule(tt,ot=0){var ct;if(this.closed)return this;this.state=tt;const Ce=this.id,be=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(be,Ce,ot)),this.pending=!0,this.delay=ot,this.id=null!==(ct=this.id)&&void 0!==ct?ct:this.requestAsyncId(be,this.id,ot),this}requestAsyncId(tt,ot,ct=0){return ee.setInterval(tt.flush.bind(tt,this),ct)}recycleAsyncId(tt,ot,ct=0){if(null!=ct&&this.delay===ct&&!1===this.pending)return ot;null!=ot&&ee.clearInterval(ot)}execute(tt,ot){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ct=this._execute(tt,ot);if(ct)return ct;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(tt,ot){let Ce,ct=!1;try{this.work(tt)}catch(be){ct=!0,Ce=be||new Error("Scheduled action threw falsy error")}if(ct)return this.unsubscribe(),Ce}unsubscribe(){if(!this.closed){const{id:tt,scheduler:ot}=this,{actions:ct}=ot;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ue.P)(ct,this),null!=tt&&(this.id=this.recycleAsyncId(ot,tt,null)),this.delay=null,super.unsubscribe()}}}},7565:(Hi,_t,te)=>{te.d(_t,{v:()=>ee});var v=te(6063);class ue{constructor(lt,pt=ue.now){this.schedulerActionCtor=lt,this.now=pt}schedule(lt,pt=0,tt){return new this.schedulerActionCtor(this,lt).schedule(tt,pt)}}ue.now=v.l.now;class ee extends ue{constructor(lt,pt=ue.now){super(lt,pt),this.actions=[],this._active=!1}flush(lt){const{actions:pt}=this;if(this._active)return void pt.push(lt);let tt;this._active=!0;do{if(tt=lt.execute(lt.state,lt.delay))break}while(lt=pt.shift());if(this._active=!1,tt){for(;lt=pt.shift();)lt.unsubscribe();throw tt}}}},4986:(Hi,_t,te)=>{te.d(_t,{z:()=>ee});var v=te(4408);const ee=new(te(7565).v)(v.o)},6063:(Hi,_t,te)=>{te.d(_t,{l:()=>v});const v={now:()=>(v.delegate||Date).now(),delegate:void 0}},3410:(Hi,_t,te)=>{te.d(_t,{z:()=>v});const v={setTimeout(ue,ee,...Ue){const{delegate:lt}=v;return lt?.setTimeout?lt.setTimeout(ue,ee,...Ue):setTimeout(ue,ee,...Ue)},clearTimeout(ue){const{delegate:ee}=v;return(ee?.clearTimeout||clearTimeout)(ue)},delegate:void 0}},2202:(Hi,_t,te)=>{te.d(_t,{h:()=>ue});const ue=function v(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Hi,_t,te)=>{te.d(_t,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Hi,_t,te)=>{te.d(_t,{_6:()=>pt,jO:()=>Ue,yG:()=>lt});var v=te(576);function ee(tt){return tt[tt.length-1]}function Ue(tt){return(0,v.m)(ee(tt))?tt.pop():void 0}function lt(tt){return function ue(tt){return tt&&(0,v.m)(tt.schedule)}(ee(tt))?tt.pop():void 0}function pt(tt,ot){return"number"==typeof ee(tt)?tt.pop():ot}},8737:(Hi,_t,te)=>{function v(ue,ee){if(ue){const Ue=ue.indexOf(ee);0<=Ue&&ue.splice(Ue,1)}}te.d(_t,{P:()=>v})},3888:(Hi,_t,te)=>{function v(ue){const Ue=ue(lt=>{Error.call(lt),lt.stack=(new Error).stack});return Ue.prototype=Object.create(Error.prototype),Ue.prototype.constructor=Ue,Ue}te.d(_t,{d:()=>v})},2806:(Hi,_t,te)=>{te.d(_t,{O:()=>Ue,x:()=>ee});var v=te(2416);let ue=null;function ee(lt){if(v.v.useDeprecatedSynchronousErrorHandling){const pt=!ue;if(pt&&(ue={errorThrown:!1,error:null}),lt(),pt){const{errorThrown:tt,error:ot}=ue;if(ue=null,tt)throw ot}}else lt()}function Ue(lt){v.v.useDeprecatedSynchronousErrorHandling&&ue&&(ue.errorThrown=!0,ue.error=lt)}},9672:(Hi,_t,te)=>{function v(ue,ee,Ue,lt=0,pt=!1){const tt=ee.schedule(function(){Ue(),pt?ue.add(this.schedule(null,lt)):this.unsubscribe()},lt);if(ue.add(tt),!pt)return tt}te.d(_t,{f:()=>v})},4671:(Hi,_t,te)=>{function v(ue){return ue}te.d(_t,{y:()=>v})},1144:(Hi,_t,te)=>{te.d(_t,{z:()=>v});const v=ue=>ue&&"number"==typeof ue.length&&"function"!=typeof ue},2206:(Hi,_t,te)=>{te.d(_t,{D:()=>ue});var v=te(576);function ue(ee){return Symbol.asyncIterator&&(0,v.m)(ee?.[Symbol.asyncIterator])}},576:(Hi,_t,te)=>{function v(ue){return"function"==typeof ue}te.d(_t,{m:()=>v})},3670:(Hi,_t,te)=>{te.d(_t,{c:()=>ee});var v=te(8822),ue=te(576);function ee(Ue){return(0,ue.m)(Ue[v.L])}},6495:(Hi,_t,te)=>{te.d(_t,{T:()=>ee});var v=te(2202),ue=te(576);function ee(Ue){return(0,ue.m)(Ue?.[v.h])}},8239:(Hi,_t,te)=>{te.d(_t,{t:()=>ue});var v=te(576);function ue(ee){return(0,v.m)(ee?.then)}},3260:(Hi,_t,te)=>{te.d(_t,{L:()=>Ue,Q:()=>ee});var v=te(655),ue=te(576);function ee(lt){return(0,v.FC)(this,arguments,function*(){const tt=lt.getReader();try{for(;;){const{value:ot,done:ct}=yield(0,v.qq)(tt.read());if(ct)return yield(0,v.qq)(void 0);yield yield(0,v.qq)(ot)}}finally{tt.releaseLock()}})}function Ue(lt){return(0,ue.m)(lt?.getReader)}},4482:(Hi,_t,te)=>{te.d(_t,{A:()=>ue,e:()=>ee});var v=te(576);function ue(Ue){return(0,v.m)(Ue?.lift)}function ee(Ue){return lt=>{if(ue(lt))return lt.lift(function(pt){try{return Ue(pt,this)}catch(tt){this.error(tt)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Hi,_t,te)=>{function v(){}te.d(_t,{Z:()=>v})},9635:(Hi,_t,te)=>{te.d(_t,{U:()=>ee,z:()=>ue});var v=te(4671);function ue(...Ue){return ee(Ue)}function ee(Ue){return 0===Ue.length?v.y:1===Ue.length?Ue[0]:function(pt){return Ue.reduce((tt,ot)=>ot(tt),pt)}}},7849:(Hi,_t,te)=>{te.d(_t,{h:()=>ee});var v=te(2416),ue=te(3410);function ee(Ue){ue.z.setTimeout(()=>{const{onUnhandledError:lt}=v.v;if(!lt)throw Ue;lt(Ue)})}},4532:(Hi,_t,te)=>{function v(ue){return new TypeError(`You provided ${null!==ue&&"object"==typeof ue?"an invalid object":`'${ue}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}te.d(_t,{z:()=>v})},655:(Hi,_t,te)=>{function Ue(Fe,Be){var nt={};for(var Ke in Fe)Object.prototype.hasOwnProperty.call(Fe,Ke)&&Be.indexOf(Ke)<0&&(nt[Ke]=Fe[Ke]);if(null!=Fe&&"function"==typeof Object.getOwnPropertySymbols){var qt=0;for(Ke=Object.getOwnPropertySymbols(Fe);qt<Ke.length;qt++)Be.indexOf(Ke[qt])<0&&Object.prototype.propertyIsEnumerable.call(Fe,Ke[qt])&&(nt[Ke[qt]]=Fe[Ke[qt]])}return nt}function lt(Fe,Be,nt,Ke){var ki,qt=arguments.length,jt=qt<3?Be:null===Ke?Ke=Object.getOwnPropertyDescriptor(Be,nt):Ke;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)jt=Reflect.decorate(Fe,Be,nt,Ke);else for(var Un=Fe.length-1;Un>=0;Un--)(ki=Fe[Un])&&(jt=(qt<3?ki(jt):qt>3?ki(Be,nt,jt):ki(Be,nt))||jt);return qt>3&&jt&&Object.defineProperty(Be,nt,jt),jt}function ot(Fe,Be,nt,Ke){return new(nt||(nt=Promise))(function(jt,ki){function Un(pr){try{Xt(Ke.next(pr))}catch(gs){ki(gs)}}function vn(pr){try{Xt(Ke.throw(pr))}catch(gs){ki(gs)}}function Xt(pr){pr.done?jt(pr.value):function qt(jt){return jt instanceof nt?jt:new nt(function(ki){ki(jt)})}(pr.value).then(Un,vn)}Xt((Ke=Ke.apply(Fe,Be||[])).next())})}function ft(Fe){return this instanceof ft?(this.v=Fe,this):new ft(Fe)}function it(Fe,Be,nt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var qt,Ke=nt.apply(Fe,Be||[]),jt=[];return qt={},ki("next"),ki("throw"),ki("return"),qt[Symbol.asyncIterator]=function(){return this},qt;function ki(ar){Ke[ar]&&(qt[ar]=function(Wn){return new Promise(function(En,Yi){jt.push([ar,Wn,En,Yi])>1||Un(ar,Wn)})})}function Un(ar,Wn){try{!function vn(ar){ar.value instanceof ft?Promise.resolve(ar.value.v).then(Xt,pr):gs(jt[0][2],ar)}(Ke[ar](Wn))}catch(En){gs(jt[0][3],En)}}function Xt(ar){Un("next",ar)}function pr(ar){Un("throw",ar)}function gs(ar,Wn){ar(Wn),jt.shift(),jt.length&&Un(jt[0][0],jt[0][1])}}function oi(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var nt,Be=Fe[Symbol.asyncIterator];return Be?Be.call(Fe):(Fe=function Le(Fe){var Be="function"==typeof Symbol&&Symbol.iterator,nt=Be&&Fe[Be],Ke=0;if(nt)return nt.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&Ke>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[Ke++],done:!Fe}}};throw new TypeError(Be?"Object is not iterable.":"Symbol.iterator is not defined.")}(Fe),nt={},Ke("next"),Ke("throw"),Ke("return"),nt[Symbol.asyncIterator]=function(){return this},nt);function Ke(jt){nt[jt]=Fe[jt]&&function(ki){return new Promise(function(Un,vn){!function qt(jt,ki,Un,vn){Promise.resolve(vn).then(function(Xt){jt({value:Xt,done:Un})},ki)}(Un,vn,(ki=Fe[jt](ki)).done,ki.value)})}}}te.d(_t,{FC:()=>it,KL:()=>oi,_T:()=>Ue,gn:()=>lt,mG:()=>ot,qq:()=>ft})},4650:(Hi,_t,te)=>{te.d(_t,{$8M:()=>_v,$Z:()=>ld,AFp:()=>wk,ALo:()=>Fa,AaK:()=>ot,CHM:()=>Gn,CRH:()=>ix,CZH:()=>_0,CqO:()=>IP,D6c:()=>zk,EJc:()=>xk,EpF:()=>DP,F4k:()=>_A,FYo:()=>NC,FiY:()=>nd,G48:()=>bF,Gf:()=>Ay,GfV:()=>cl,Gpc:()=>be,JOm:()=>ch,KtG:()=>hh,LFG:()=>Co,LSH:()=>MC,Lbi:()=>Ek,Lck:()=>ik,MAs:()=>DA,MMx:()=>rk,NdJ:()=>MA,O4$:()=>TS,OlP:()=>vs,PXZ:()=>Ak,Q6J:()=>r0,QGY:()=>RA,QP$:()=>Je,Qsj:()=>SO,R0b:()=>Mu,RDi:()=>fz,Rgc:()=>pl,SBq:()=>Zs,Sil:()=>T3,Suo:()=>tx,TTD:()=>Zu,TgZ:()=>zE,VKq:()=>XE,W1O:()=>zL,X6Q:()=>yF,XFs:()=>fi,Xpm:()=>Et,Xts:()=>mO,Y36:()=>im,YKP:()=>TL,YNc:()=>Dj,Yjl:()=>Y,Yz7:()=>Wn,Z0I:()=>Aa,ZZ4:()=>Ox,_Bn:()=>xL,_UZ:()=>AA,_Vd:()=>Xv,_c5:()=>Vk,_uU:()=>WP,aQg:()=>V0,c2e:()=>lF,cJS:()=>Yi,cg1:()=>B,dDg:()=>k3,dqk:()=>Mi,eFA:()=>wx,ekj:()=>PP,eoX:()=>Dk,f3M:()=>Ng,g9A:()=>Sk,h0i:()=>fm,hGG:()=>Hk,iGM:()=>ck,ifc:()=>Ri,ip1:()=>Ck,jDz:()=>IL,kL8:()=>jA,kcU:()=>DS,lG2:()=>J,lcZ:()=>pn,lqb:()=>Qv,lri:()=>vd,n5z:()=>Jc,oAB:()=>Rn,oxw:()=>kj,q4F:()=>hp,qLn:()=>BC,qOj:()=>vA,qZA:()=>s0,rWj:()=>yd,sBO:()=>Al,sIi:()=>JC,s_b:()=>JE,soG:()=>My,tb:()=>mx,tp0:()=>rd,uIk:()=>wA,vHH:()=>Ct,vpe:()=>gd,wAp:()=>xt,xp6:()=>_O,z2F:()=>Ly,zSh:()=>NI,zs3:()=>ad});var v=te(7579),ue=te(727),ee=te(9751),Ue=te(6451),lt=te(3099);function pt(c){for(let d in c)if(c[d]===pt)return d;throw Error("Could not find renamed property on target object.")}function tt(c,d){for(const g in d)d.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=d[g])}function ot(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(ot).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const d=c.toString();if(null==d)return""+d;const g=d.indexOf("\n");return-1===g?d:d.substring(0,g)}function ct(c,d){return null==c||""===c?null===d?"":d:null==d||""===d?c:c+" "+d}const Ce=pt({__forward_ref__:pt});function be(c){return c.__forward_ref__=be,c.toString=function(){return ot(this())},c}function Le(c){return Ot(c)?c():c}function Ot(c){return"function"==typeof c&&c.hasOwnProperty(Ce)&&c.__forward_ref__===be}class Ct extends Error{constructor(d,g){super(function li(c,d){return`NG0${Math.abs(c)}${d?": "+d.trim():""}`}(d,g)),this.code=d}}function ft(c){return"string"==typeof c?c:null==c?"":String(c)}function Mt(c,d){throw new Ct(-201,!1)}function vn(c,d){null==c&&function Xt(c,d,g,b){throw new Error(`ASSERTION ERROR: ${c}`+(null==b?"":` [Expected=> ${g} ${b} ${d} <=Actual]`))}(d,c,null,"!=")}function Wn(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function Yi(c){return{providers:c.providers||[],imports:c.imports||[]}}function Vr(c){return Ua(c,Ns)||Ua(c,Ao)}function Aa(c){return null!==Vr(c)}function Ua(c,d){return c.hasOwnProperty(d)?c[d]:null}function da(c){return c&&(c.hasOwnProperty(Es)||c.hasOwnProperty(ka))?c[Es]:null}const Ns=pt({\u0275prov:pt}),Es=pt({\u0275inj:pt}),Ao=pt({ngInjectableDef:pt}),ka=pt({ngInjectorDef:pt});var fi=(()=>((fi=fi||{})[fi.Default=0]="Default",fi[fi.Host=1]="Host",fi[fi.Self=2]="Self",fi[fi.SkipSelf=4]="SkipSelf",fi[fi.Optional=8]="Optional",fi))();let Er;function br(c){const d=Er;return Er=c,d}function io(c,d,g){const b=Vr(c);return b&&"root"==b.providedIn?void 0===b.value?b.value=b.factory():b.value:g&fi.Optional?null:void 0!==d?d:void Mt(ot(c))}function kr(c){return{toString:c}.toString()}var Hr=(()=>((Hr=Hr||{})[Hr.OnPush=0]="OnPush",Hr[Hr.Default=1]="Default",Hr))(),Ri=(()=>{return(c=Ri||(Ri={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",Ri;var c})();const Mi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),no={},nn=[],ro=pt({\u0275cmp:pt}),mn=pt({\u0275dir:pt}),bo=pt({\u0275pipe:pt}),Dn=pt({\u0275mod:pt}),$s=pt({\u0275fac:pt}),ts=pt({__NG_ELEMENT_ID__:pt});let hi=0;function Et(c){return kr(()=>{const g=!0===c.standalone,b={},w={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:b,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Hr.OnPush,directiveDefs:null,pipeDefs:null,standalone:g,dependencies:g&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||nn,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||Ri.Emulated,id:"c"+hi++,styles:c.styles||nn,_:null,setInput:null,schemas:c.schemas||null,tView:null},E=c.dependencies,k=c.features;return w.inputs=pe(c.inputs,b),w.outputs=pe(c.outputs),k&&k.forEach(M=>M(w)),w.directiveDefs=E?()=>("function"==typeof E?E():E).map(Zi).filter(cn):null,w.pipeDefs=E?()=>("function"==typeof E?E():E).map(ve).filter(cn):null,w})}function Zi(c){return q(c)||Z(c)}function cn(c){return null!==c}function Rn(c){return kr(()=>({type:c.type,bootstrap:c.bootstrap||nn,declarations:c.declarations||nn,imports:c.imports||nn,exports:c.exports||nn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function pe(c,d){if(null==c)return no;const g={};for(const b in c)if(c.hasOwnProperty(b)){let w=c[b],E=w;Array.isArray(w)&&(E=w[1],w=w[0]),g[w]=b,d&&(d[w]=E)}return g}const J=Et;function Y(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function q(c){return c[ro]||null}function Z(c){return c[mn]||null}function ve(c){return c[bo]||null}function Je(c){const d=q(c)||Z(c)||ve(c);return null!==d&&d.standalone}function Pt(c,d){const g=c[Dn]||null;if(!g&&!0===d)throw new Error(`Type ${ot(c)} does not have '\u0275mod' property.`);return g}function Ko(c){return Array.isArray(c)&&"object"==typeof c[1]}function _a(c){return Array.isArray(c)&&!0===c[1]}function gu(c){return 0!=(8&c.flags)}function Uc(c){return 2==(2&c.flags)}function Wc(c){return 1==(1&c.flags)}function El(c){return null!==c.template}function ef(c){return 0!=(256&c[2])}function fa(c,d){return c.hasOwnProperty($s)?c[$s]:null}class Kd{constructor(d,g,b){this.previousValue=d,this.currentValue=g,this.firstChange=b}isFirstChange(){return this.firstChange}}function Zu(){return pv}function pv(c){return c.type.prototype.ngOnChanges&&(c.setInput=vg),af}function af(){const c=vu(this),d=c?.current;if(d){const g=c.previous;if(g===no)c.previous=d;else for(let b in d)g[b]=d[b];c.current=null,this.ngOnChanges(d)}}function vg(c,d,g,b){const w=vu(c)||function Rh(c,d){return c[fv]=d}(c,{previous:no,current:null}),E=w.current||(w.current={}),k=w.previous,M=this.declaredInputs[g],F=k[M];E[M]=new Kd(F&&F.currentValue,d,k===no),c[b]=d}Zu.ngInherit=!0;const fv="__ngSimpleChanges__";function vu(c){return c[fv]||null}function Bs(c){for(;Array.isArray(c);)c=c[0];return c}function Oa(c,d){return Bs(d[c.index])}function Tl(c,d){return c.data[d]}function yu(c,d){return c[d]}function Qn(c,d){const g=d[c];return Ko(g)?g:g[0]}function Xu(c){return 64==(64&c[2])}function lh(c,d){return null==d?null:c[d]}function $d(c){c[18]=0}function hf(c,d){c[5]+=d;let g=c,b=c[3];for(;null!==b&&(1===d&&1===g[5]||-1===d&&0===g[5]);)b[5]+=d,g=b,b=b[3]}const Q={lFrame:oC(null),bindingsEnabled:!0};function en(){return Q.bindingsEnabled}function vt(){return Q.lFrame.lView}function ji(){return Q.lFrame.tView}function Gn(c){return Q.lFrame.contextLView=c,c[8]}function hh(c){return Q.lFrame.contextLView=null,c}function ls(){let c=Ju();for(;null!==c&&64===c.type;)c=c.parent;return c}function Ju(){return Q.lFrame.currentTNode}function ga(c,d){const g=Q.lFrame;g.currentTNode=c,g.isParent=d}function al(){return Q.lFrame.isParent}function $o(){const c=Q.lFrame;let d=c.bindingRootIndex;return-1===d&&(d=c.bindingRootIndex=c.tView.bindingStartIndex),d}function Cg(){return Q.lFrame.bindingIndex++}function ES(c,d){const g=Q.lFrame;g.bindingIndex=g.bindingRootIndex=c,bv(d)}function bv(c){Q.lFrame.currentDirectiveIndex=c}function nC(){return Q.lFrame.currentQueryIndex}function rC(c){Q.lFrame.currentQueryIndex=c}function sC(c){const d=c[1];return 2===d.type?d.declTNode:1===d.type?c[6]:null}function UD(c,d,g){if(g&fi.SkipSelf){let w=d,E=c;for(;!(w=w.parent,null!==w||g&fi.Host||(w=sC(E),null===w||(E=E[15],10&w.type))););if(null===w)return!1;d=w,c=E}const b=Q.lFrame=WD();return b.currentTNode=d,b.lView=c,!0}function Cv(c){const d=WD(),g=c[1];Q.lFrame=d,d.currentTNode=g.firstChild,d.lView=c,d.tView=g,d.contextLView=c,d.bindingIndex=g.bindingStartIndex,d.inI18n=!1}function WD(){const c=Q.lFrame,d=null===c?null:c.child;return null===d?oC(c):d}function oC(c){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=d),d}function GD(){const c=Q.lFrame;return Q.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const xS=GD;function cf(){const c=GD();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function Ys(){return Q.lFrame.selectedIndex}function ec(c){Q.lFrame.selectedIndex=c}function Vs(){const c=Q.lFrame;return Tl(c.tView,c.selectedIndex)}function TS(){Q.lFrame.currentNamespace="svg"}function DS(){!function YD(){Q.lFrame.currentNamespace=null}()}function wg(c,d){for(let g=d.directiveStart,b=d.directiveEnd;g<b;g++){const E=c.data[g].type.prototype,{ngAfterContentInit:k,ngAfterContentChecked:M,ngAfterViewInit:F,ngAfterViewChecked:H,ngOnDestroy:$}=E;k&&(c.contentHooks||(c.contentHooks=[])).push(-g,k),M&&((c.contentHooks||(c.contentHooks=[])).push(g,M),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(g,M)),F&&(c.viewHooks||(c.viewHooks=[])).push(-g,F),H&&((c.viewHooks||(c.viewHooks=[])).push(g,H),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(g,H)),null!=$&&(c.destroyHooks||(c.destroyHooks=[])).push(g,$)}}function Sg(c,d,g){hC(c,d,3,g)}function Zd(c,d,g,b){(3&c[2])===g&&hC(c,d,g,b)}function lC(c,d){let g=c[2];(3&g)===d&&(g&=2047,g+=1,c[2]=g)}function hC(c,d,g,b){const E=b??-1,k=d.length-1;let M=0;for(let F=void 0!==b?65535&c[18]:0;F<k;F++)if("number"==typeof d[F+1]){if(M=d[F],null!=b&&M>=b)break}else d[F]<0&&(c[18]+=65536),(M<E||-1==E)&&(IS(c,g,d,F),c[18]=(4294901760&c[18])+F+2),F++}function IS(c,d,g,b){const w=g[b]<0,E=g[b+1],M=c[w?-g[b]:g[b]];if(w){if(c[2]>>11<c[18]>>16&&(3&c[2])===d){c[2]+=2048;try{E.call(M)}finally{}}}else try{E.call(M)}finally{}}class uh{constructor(d,g,b){this.factory=d,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=b}}function tc(c,d,g){let b=0;for(;b<g.length;){const w=g[b];if("number"==typeof w){if(0!==w)break;b++;const E=g[b++],k=g[b++],M=g[b++];c.setAttribute(d,k,M,E)}else{const E=w,k=g[++b];pC(E)?c.setProperty(d,E,k):c.setAttribute(d,E,k),b++}}return b}function dC(c){return 3===c||4===c||6===c}function pC(c){return 64===c.charCodeAt(0)}function xg(c,d){if(null!==d&&0!==d.length)if(null===c||0===c.length)c=d.slice();else{let g=-1;for(let b=0;b<d.length;b++){const w=d[b];"number"==typeof w?g=w:0===g||kS(c,g,w,null,-1===g||2===g?d[++b]:null)}}return c}function kS(c,d,g,b,w){let E=0,k=c.length;if(-1===d)k=-1;else for(;E<c.length;){const M=c[E++];if("number"==typeof M){if(M===d){k=-1;break}if(M>d){k=E-1;break}}}for(;E<c.length;){const M=c[E];if("number"==typeof M)break;if(M===g){if(null===b)return void(null!==w&&(c[E+1]=w));if(b===c[E+1])return void(c[E+2]=w)}E++,null!==b&&E++,null!==w&&E++}-1!==k&&(c.splice(k,0,d),E=k+1),c.splice(E++,0,g),null!==b&&c.splice(E++,0,b),null!==w&&c.splice(E++,0,w)}function XD(c){return-1!==c}function Qd(c){return 32767&c}function Qc(c,d){let g=function JD(c){return c>>16}(c),b=d;for(;g>0;)b=b[15],g--;return b}let fC=!0;function xv(c){const d=fC;return fC=c,d}let RS=0;const Oh={};function Xd(c,d){const g=Tv(c,d);if(-1!==g)return g;const b=d[1];b.firstCreatePass&&(c.injectorIndex=d.length,gC(b.data,c),gC(d,null),gC(b.blueprint,null));const w=Tg(c,d),E=c.injectorIndex;if(XD(w)){const k=Qd(w),M=Qc(w,d),F=M[1].data;for(let H=0;H<8;H++)d[E+H]=M[k+H]|F[k+H]}return d[E+8]=w,E}function gC(c,d){c.push(0,0,0,0,0,0,0,0,d)}function Tv(c,d){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===d[c.injectorIndex+8]?-1:c.injectorIndex}function Tg(c,d){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let g=0,b=null,w=d;for(;null!==w;){if(b=Rv(w),null===b)return-1;if(g++,w=w[15],-1!==b.injectorIndex)return b.injectorIndex|g<<16}return-1}function Dg(c,d,g){!function tI(c,d,g){let b;"string"==typeof g?b=g.charCodeAt(0)||0:g.hasOwnProperty(ts)&&(b=g[ts]),null==b&&(b=g[ts]=RS++);const w=255&b;d.data[c+(w>>5)]|=1<<w}(c,d,g)}function Dv(c,d,g){if(g&fi.Optional||void 0!==c)return c;Mt()}function pf(c,d,g,b){if(g&fi.Optional&&void 0===b&&(b=null),0==(g&(fi.Self|fi.Host))){const w=c[9],E=br(void 0);try{return w?w.get(d,b,g&fi.Optional):io(d,b,g&fi.Optional)}finally{br(E)}}return Dv(b,0,g)}function Iv(c,d,g,b=fi.Default,w){if(null!==c){if(1024&d[2]){const k=function nI(c,d,g,b,w){let E=c,k=d;for(;null!==E&&null!==k&&1024&k[2]&&!(256&k[2]);){const M=_S(E,k,g,b|fi.Self,Oh);if(M!==Oh)return M;let F=E.parent;if(!F){const H=k[21];if(H){const $=H.get(g,Oh,b);if($!==Oh)return $}F=Rv(k),k=k[15]}E=F}return w}(c,d,g,b,Oh);if(k!==Oh)return k}const E=_S(c,d,g,b,Oh);if(E!==Oh)return E}return pf(d,g,b,w)}function _S(c,d,g,b,w){const E=function iI(c){if("string"==typeof c)return c.charCodeAt(0)||0;const d=c.hasOwnProperty(ts)?c[ts]:void 0;return"number"==typeof d?d>=0?255&d:PS:d}(g);if("function"==typeof E){if(!UD(d,c,b))return b&fi.Host?Dv(w,0,b):pf(d,g,b,w);try{const k=E(b);if(null!=k||b&fi.Optional)return k;Mt()}finally{xS()}}else if("number"==typeof E){let k=null,M=Tv(c,d),F=-1,H=b&fi.Host?d[16][6]:null;for((-1===M||b&fi.SkipSelf)&&(F=-1===M?Tg(c,d):d[M+8],-1!==F&&OS(b,!1)?(k=d[1],M=Qd(F),d=Qc(F,d)):M=-1);-1!==M;){const $=d[1];if(Av(E,M,$.data)){const le=MS(M,d,g,k,b,H);if(le!==Oh)return le}F=d[M+8],-1!==F&&OS(b,d[1].data[M+8]===H)&&Av(E,M,d)?(k=$,M=Qd(F),d=Qc(F,d)):M=-1}}return w}function MS(c,d,g,b,w,E){const k=d[1],M=k.data[c+8],$=Ag(M,k,g,null==b?Uc(M)&&fC:b!=k&&0!=(3&M.type),w&fi.Host&&E===M);return null!==$?Xc(d,k,$,M):Oh}function Ag(c,d,g,b,w){const E=c.providerIndexes,k=d.data,M=1048575&E,F=c.directiveStart,$=E>>20,Ee=w?M+$:c.directiveEnd;for(let Ge=b?M:M+$;Ge<Ee;Ge++){const It=k[Ge];if(Ge<F&&g===It||Ge>=F&&It.type===g)return Ge}if(w){const Ge=k[F];if(Ge&&El(Ge)&&Ge.type===g)return F}return null}function Xc(c,d,g,b){let w=c[g];const E=d.data;if(function uC(c){return c instanceof uh}(w)){const k=w;k.resolving&&function Si(c,d){const g=d?`. Dependency path: ${d.join(" > ")} > ${c}`:"";throw new Ct(-200,`Circular dependency in DI detected for ${c}${g}`)}(function it(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():ft(c)}(E[g]));const M=xv(k.canSeeViewProviders);k.resolving=!0;const F=k.injectImpl?br(k.injectImpl):null;UD(c,b,fi.Default);try{w=c[g]=k.factory(void 0,E,c,b),d.firstCreatePass&&g>=b.directiveStart&&function wv(c,d,g){const{ngOnChanges:b,ngOnInit:w,ngDoCheck:E}=d.type.prototype;if(b){const k=pv(d);(g.preOrderHooks||(g.preOrderHooks=[])).push(c,k),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,k)}w&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-c,w),E&&((g.preOrderHooks||(g.preOrderHooks=[])).push(c,E),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,E))}(g,E[g],d)}finally{null!==F&&br(F),xv(M),k.resolving=!1,xS()}}return w}function Av(c,d,g){return!!(g[d+(c>>5)]&1<<c)}function OS(c,d){return!(c&fi.Self||c&fi.Host&&d)}class kg{constructor(d,g){this._tNode=d,this._lView=g}get(d,g,b){return Iv(this._tNode,this._lView,d,b,g)}}function PS(){return new kg(ls(),vt())}function Jc(c){return kr(()=>{const d=c.prototype.constructor,g=d[$s]||kv(d),b=Object.prototype;let w=Object.getPrototypeOf(c.prototype).constructor;for(;w&&w!==b;){const E=w[$s]||kv(w);if(E&&E!==g)return E;w=Object.getPrototypeOf(w)}return E=>new E})}function kv(c){return Ot(c)?()=>{const d=kv(Le(c));return d&&d()}:fa(c)}function Rv(c){const d=c[1],g=d.type;return 2===g?d.declTNode:1===g?c[6]:null}function _v(c){return function Ig(c,d){if("class"===d)return c.classes;if("style"===d)return c.styles;const g=c.attrs;if(g){const b=g.length;let w=0;for(;w<b;){const E=g[w];if(dC(E))break;if(0===E)w+=2;else if("number"==typeof E)for(w++;w<b&&"string"==typeof g[w];)w++;else{if(E===d)return g[w+1];w+=2}}}return null}(ls(),c)}const Rg="__parameters__";function _g(c,d,g){return kr(()=>{const b=function LS(c){return function(...g){if(c){const b=c(...g);for(const w in b)this[w]=b[w]}}}(d);function w(...E){if(this instanceof w)return b.apply(this,E),this;const k=new w(...E);return M.annotation=k,M;function M(F,H,$){const le=F.hasOwnProperty(Rg)?F[Rg]:Object.defineProperty(F,Rg,{value:[]})[Rg];for(;le.length<=$;)le.push(null);return(le[$]=le[$]||[]).push(k),F}}return g&&(w.prototype=Object.create(g.prototype)),w.prototype.ngMetadataName=c,w.annotationCls=w,w})}class vs{constructor(d,g){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=Wn({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ll(c,d){void 0===d&&(d=c);for(let g=0;g<c.length;g++){let b=c[g];Array.isArray(b)?(d===c&&(d=c.slice(0,g)),ll(b,d)):d!==c&&d.push(b)}return d}function ic(c,d){c.forEach(g=>Array.isArray(g)?ic(g,d):d(g))}function Og(c,d,g){d>=c.length?c.push(g):c.splice(d,0,g)}function ep(c,d){return d>=c.length-1?c.pop():c.splice(d,1)[0]}function Dl(c,d,g){let b=nc(c,d);return b>=0?c[1|b]=g:(b=~b,function $i(c,d,g,b){let w=c.length;if(w==d)c.push(g,b);else if(1===w)c.push(b,c[0]),c[0]=g;else{for(w--,c.push(c[w-1],c[w]);w>d;)c[w]=c[w-2],w--;c[d]=g,c[d+1]=b}}(c,b,d,g)),b}function yC(c,d){const g=nc(c,d);if(g>=0)return c[1|g]}function nc(c,d){return function Ro(c,d,g){let b=0,w=c.length>>g;for(;w!==b;){const E=b+(w-b>>1),k=c[E<<g];if(d===k)return E<<g;k>d?w=E:b=E+1}return~(w<<g)}(c,d,1)}const _o={},Cu="__NG_DI_FLAG__",vf="ngTempTokenPath",Pv=/\n/gm,Lv="__source";let ip;function td(c){const d=ip;return ip=c,d}function HS(c,d=fi.Default){if(void 0===ip)throw new Ct(-203,!1);return null===ip?io(c,void 0,d):ip.get(c,d&fi.Optional?null:void 0,d)}function Co(c,d=fi.Default){return(function ms(){return Er}()||HS)(Le(c),d)}function Ng(c,d=fi.Default){return"number"!=typeof d&&(d=0|(d.optional&&8)|(d.host&&1)|(d.self&&2)|(d.skipSelf&&4)),Co(c,d)}function Fv(c){const d=[];for(let g=0;g<c.length;g++){const b=Le(c[g]);if(Array.isArray(b)){if(0===b.length)throw new Ct(900,!1);let w,E=fi.Default;for(let k=0;k<b.length;k++){const M=b[k],F=zS(M);"number"==typeof F?-1===F?w=M.token:E|=F:w=M}d.push(Co(w,E))}else d.push(Co(b))}return d}function id(c,d){return c[Cu]=d,c.prototype[Cu]=d,c}function zS(c){return c[Cu]}const nd=id(_g("Optional"),8),rd=id(_g("SkipSelf"),4);var ch=(()=>((ch=ch||{})[ch.Important=1]="Important",ch[ch.DashCase=2]="DashCase",ch))();const sp=new Map;let $1=0;const x="__ngContext__";function I(c,d){Ko(d)?(c[x]=d[20],function cI(c){sp.set(c[20],c)}(d)):c[x]=d}function jg(c,d){return undefined(c,d)}function op(c){const d=c[3];return _a(d)?d[3]:d}function Df(c){return oc(c[13])}function Ug(c){return oc(c[4])}function oc(c){for(;null!==c&&!_a(c);)c=c[4];return c}function If(c,d,g,b,w){if(null!=b){let E,k=!1;_a(b)?E=b:Ko(b)&&(k=!0,b=b[0]);const M=Bs(b);0===c&&null!==g?null==w?bI(d,g,M):Wg(d,g,M,w||null,!0):1===c&&null!==g?Wg(d,g,M,w||null,!0):2===c?function wI(c,d,g){const b=XS(c,d);b&&function hz(c,d,g,b){c.removeChild(d,g,b)}(c,b,d,g)}(d,M,k):3===c&&d.destroyNode(M),null!=E&&function dz(c,d,g,b,w){const E=g[7];E!==Bs(g)&&If(d,c,b,E,w);for(let M=10;M<g.length;M++){const F=g[M];AC(F[1],F,c,d,b,E)}}(d,c,E,g,w)}}function Z1(c,d,g){return c.createElement(d,g)}function TC(c,d){const g=c[9],b=g.indexOf(d),w=d[3];512&d[2]&&(d[2]&=-513,hf(w,-1)),g.splice(b,1)}function gI(c,d){if(c.length<=10)return;const g=10+d,b=c[g];if(b){const w=b[17];null!==w&&w!==c&&TC(w,b),d>0&&(c[g-1][4]=b[4]);const E=ep(c,10+d);!function U7(c,d){AC(c,d,d[11],2,null,null),d[0]=null,d[6]=null}(b[1],b);const k=E[19];null!==k&&k.detachView(E[1]),b[3]=null,b[4]=null,b[2]&=-65}return b}function mI(c,d){if(!(128&d[2])){const g=d[11];g.destroyNode&&AC(c,d,g,3,null,null),function lz(c){let d=c[13];if(!d)return vI(c[1],c);for(;d;){let g=null;if(Ko(d))g=d[13];else{const b=d[10];b&&(g=b)}if(!g){for(;d&&!d[4]&&d!==c;)Ko(d)&&vI(d[1],d),d=d[3];null===d&&(d=c),Ko(d)&&vI(d[1],d),g=d&&d[4]}d=g}}(d)}}function vI(c,d){if(!(128&d[2])){d[2]&=-65,d[2]|=128,function eO(c,d){let g;if(null!=c&&null!=(g=c.destroyHooks))for(let b=0;b<g.length;b+=2){const w=d[g[b]];if(!(w instanceof uh)){const E=g[b+1];if(Array.isArray(E))for(let k=0;k<E.length;k+=2){const M=w[E[k]],F=E[k+1];try{F.call(M)}finally{}}else try{E.call(w)}finally{}}}}(c,d),function W7(c,d){const g=c.cleanup,b=d[7];let w=-1;if(null!==g)for(let E=0;E<g.length-1;E+=2)if("string"==typeof g[E]){const k=g[E+1],M="function"==typeof k?k(d):Bs(d[k]),F=b[w=g[E+2]],H=g[E+3];"boolean"==typeof H?M.removeEventListener(g[E],F,H):H>=0?b[w=H]():b[w=-H].unsubscribe(),E+=2}else{const k=b[w=g[E+1]];g[E].call(k)}if(null!==b){for(let E=w+1;E<b.length;E++)(0,b[E])();d[7]=null}}(c,d),1===d[1].type&&d[11].destroy();const g=d[17];if(null!==g&&_a(d[3])){g!==d[3]&&TC(g,d);const b=d[19];null!==b&&b.detachView(c)}!function $v(c){sp.delete(c[20])}(d)}}function tO(c,d,g){return function yI(c,d,g){let b=d;for(;null!==b&&40&b.type;)b=(d=b).parent;if(null===b)return g[0];if(2&b.flags){const w=c.data[b.directiveStart].encapsulation;if(w===Ri.None||w===Ri.Emulated)return null}return Oa(b,g)}(c,d.parent,g)}function Wg(c,d,g,b,w){c.insertBefore(d,g,b,w)}function bI(c,d,g){c.appendChild(d,g)}function QS(c,d,g,b,w){null!==b?Wg(c,d,g,b,w):bI(c,d,g)}function XS(c,d){return c.parentNode(d)}let xI,nO=function eE(c,d,g){return 40&c.type?Oa(c,g):null};function tE(c,d,g,b){const w=tO(c,b,d),E=d[11],M=function iO(c,d,g){return nO(c,d,g)}(b.parent||d[6],b,d);if(null!=w)if(Array.isArray(g))for(let F=0;F<g.length;F++)QS(E,w,g[F],M,!1);else QS(E,w,g,M,!1)}function Yv(c,d){if(null!==d){const g=d.type;if(3&g)return Oa(d,c);if(4&g)return iE(-1,c[d.index]);if(8&g){const b=d.child;if(null!==b)return Yv(c,b);{const w=c[d.index];return _a(w)?iE(-1,w):Bs(w)}}if(32&g)return jg(d,c)()||Bs(c[d.index]);{const b=rO(c,d);return null!==b?Array.isArray(b)?b[0]:Yv(op(c[16]),b):Yv(c,d.next)}}return null}function rO(c,d){return null!==d?c[16][6].projection[d.projection]:null}function iE(c,d){const g=10+c+1;if(g<d.length){const b=d[g],w=b[1].firstChild;if(null!==w)return Yv(b,w)}return d[7]}function IC(c,d,g,b,w,E,k){for(;null!=g;){const M=b[g.index],F=g.type;if(k&&0===d&&(M&&I(Bs(M),b),g.flags|=4),64!=(64&g.flags))if(8&F)IC(c,d,g.child,b,w,E,!1),If(d,c,w,M,E);else if(32&F){const H=jg(g,b);let $;for(;$=H();)If(d,c,w,$,E);If(d,c,w,M,E)}else 16&F?SI(c,d,b,g,w,E):If(d,c,w,M,E);g=k?g.projectionNext:g.next}}function AC(c,d,g,b,w,E){IC(g,b,c.firstChild,d,w,E,!1)}function SI(c,d,g,b,w,E){const k=g[16],F=k[6].projection[b.projection];if(Array.isArray(F))for(let H=0;H<F.length;H++)If(d,c,w,F[H],E);else IC(c,d,F,k[3],w,E,!0)}function nE(c,d,g){c.setAttribute(d,"style",g)}function EI(c,d,g){""===g?c.removeAttribute(d,"class"):c.setAttribute(d,"class",g)}function fz(c){xI=c}class lO{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Gg(c){return c instanceof lO?c.changingThisBreaksApplicationSecurity:c}const Gi=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var oo=(()=>((oo=oo||{})[oo.NONE=0]="NONE",oo[oo.HTML=1]="HTML",oo[oo.STYLE=2]="STYLE",oo[oo.SCRIPT=3]="SCRIPT",oo[oo.URL=4]="URL",oo[oo.RESOURCE_URL=5]="RESOURCE_URL",oo))();function MC(c){const d=function lE(){const c=vt();return c&&c[12]}();return d?d.sanitize(oo.URL,c)||"":function Zv(c,d){const g=function mz(c){return c instanceof lO&&c.getTypeName()||null}(c);if(null!=g&&g!==d){if("ResourceURL"===g&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===d}(c,"URL")?Gg(c):function ul(c){return(c=String(c)).match(Gi)?c:"unsafe:"+c}(ft(c))}const mO=new vs("ENVIRONMENT_INITIALIZER"),Sz=new vs("INJECTOR",-1),Ez=new vs("INJECTOR_DEF_TYPES");class xz{get(d,g=_o){if(g===_o){const b=new Error(`NullInjectorError: No provider for ${ot(d)}!`);throw b.name="NullInjectorError",b}return g}}function s9(...c){return{\u0275providers:Tz(0,c)}}function Tz(c,...d){const g=[],b=new Set;let w;return ic(d,E=>{const k=E;PI(k,g,[],b)&&(w||(w=[]),w.push(k))}),void 0!==w&&Dz(w,g),g}function Dz(c,d){for(let g=0;g<c.length;g++){const{providers:w}=c[g];ic(w,E=>{d.push(E)})}}function PI(c,d,g,b){if(!(c=Le(c)))return!1;let w=null,E=da(c);const k=!E&&q(c);if(E||k){if(k&&!k.standalone)return!1;w=c}else{const F=c.ngModule;if(E=da(F),!E)return!1;w=F}const M=b.has(w);if(k){if(M)return!1;if(b.add(w),k.dependencies){const F="function"==typeof k.dependencies?k.dependencies():k.dependencies;for(const H of F)PI(H,d,g,b)}}else{if(!E)return!1;{if(null!=E.imports&&!M){let H;b.add(w);try{ic(E.imports,$=>{PI($,d,g,b)&&(H||(H=[]),H.push($))})}finally{}void 0!==H&&Dz(H,d)}if(!M){const H=fa(w)||(()=>new w);d.push({provide:w,useFactory:H,deps:nn},{provide:Ez,useValue:w,multi:!0},{provide:mO,useValue:()=>Co(w),multi:!0})}const F=E.providers;null==F||M||ic(F,$=>{d.push($)})}}return w!==c&&void 0!==c.providers}const vO=pt({provide:String,useValue:pt});function PC(c){return null!==c&&"object"==typeof c&&vO in c}function Kg(c){return"function"==typeof c}const NI=new vs("Set Injector scope."),BI={},a9={};let VI;function uE(){return void 0===VI&&(VI=new xz),VI}class Qv{}class Iz extends Qv{constructor(d,g,b,w){super(),this.parent=g,this.source=b,this.scopes=w,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$g(d,k=>this.processProvider(k)),this.records.set(Sz,hc(void 0,this)),w.has("environment")&&this.records.set(Qv,hc(void 0,this));const E=this.records.get(NI);null!=E&&"string"==typeof E.value&&this.scopes.add(E.value),this.injectorDefTypes=new Set(this.get(Ez.multi,nn,fi.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();for(const d of this._onDestroyHooks)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(d){this._onDestroyHooks.push(d)}runInContext(d){this.assertNotDestroyed();const g=td(this),b=br(void 0);try{return d()}finally{td(g),br(b)}}get(d,g=_o,b=fi.Default){this.assertNotDestroyed();const w=td(this),E=br(void 0);try{if(!(b&fi.SkipSelf)){let M=this.records.get(d);if(void 0===M){const F=function Rz(c){return"function"==typeof c||"object"==typeof c&&c instanceof vs}(d)&&Vr(d);M=F&&this.injectableDefInScope(F)?hc(xu(d),BI):null,this.records.set(d,M)}if(null!=M)return this.hydrate(d,M)}return(b&fi.Self?uE():this.parent).get(d,g=b&fi.Optional&&g===_o?null:g)}catch(k){if("NullInjectorError"===k.name){if((k[vf]=k[vf]||[]).unshift(ot(d)),w)throw k;return function jS(c,d,g,b){const w=c[vf];throw d[Lv]&&w.unshift(d[Lv]),c.message=function CC(c,d,g,b=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let w=ot(d);if(Array.isArray(d))w=d.map(ot).join(" -> ");else if("object"==typeof d){let E=[];for(let k in d)if(d.hasOwnProperty(k)){let M=d[k];E.push(k+":"+("string"==typeof M?JSON.stringify(M):ot(M)))}w=`{${E.join(", ")}}`}return`${g}${b?"("+b+")":""}[${w}]: ${c.replace(Pv,"\n  ")}`}("\n"+c.message,w,g,b),c.ngTokenPath=w,c[vf]=null,c}(k,d,"R3InjectorError",this.source)}throw k}finally{br(E),td(w)}}resolveInjectorInitializers(){const d=td(this),g=br(void 0);try{const b=this.get(mO.multi,nn,fi.Self);for(const w of b)w()}finally{td(d),br(g)}}toString(){const d=[],g=this.records;for(const b of g.keys())d.push(ot(b));return`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ct(205,!1)}processProvider(d){let g=Kg(d=Le(d))?d:Le(d&&d.provide);const b=function Az(c){return PC(c)?hc(void 0,c.useValue):hc(LC(c),BI)}(d);if(Kg(d)||!0!==d.multi)this.records.get(g);else{let w=this.records.get(g);w||(w=hc(void 0,BI,!0),w.factory=()=>Fv(w.multi),this.records.set(g,w)),g=d,w.multi.push(d)}this.records.set(g,b)}hydrate(d,g){return g.value===BI&&(g.value=a9,g.value=g.factory()),"object"==typeof g.value&&g.value&&function yO(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(g.value)&&this._ngOnDestroyHooks.add(g.value),g.value}injectableDefInScope(d){if(!d.providedIn)return!1;const g=Le(d.providedIn);return"string"==typeof g?"any"===g||this.scopes.has(g):this.injectorDefTypes.has(g)}}function xu(c){const d=Vr(c),g=null!==d?d.factory:fa(c);if(null!==g)return g;if(c instanceof vs)throw new Ct(204,!1);if(c instanceof Function)return function lc(c){const d=c.length;if(d>0)throw function Ph(c,d){const g=[];for(let b=0;b<c;b++)g.push(d);return g}(d,"?"),new Ct(204,!1);const g=function os(c){const d=c&&(c[Ns]||c[Ao]);if(d){const g=function Gs(c){if(c.hasOwnProperty("name"))return c.name;const d=(""+c).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),d}return null}(c);return null!==g?()=>g.factory(c):()=>new c}(c);throw new Ct(204,!1)}function LC(c,d,g){let b;if(Kg(c)){const w=Le(c);return fa(w)||xu(w)}if(PC(c))b=()=>Le(c.useValue);else if(function LI(c){return!(!c||!c.useFactory)}(c))b=()=>c.useFactory(...Fv(c.deps||[]));else if(function hE(c){return!(!c||!c.useExisting)}(c))b=()=>Co(Le(c.useExisting));else{const w=Le(c&&(c.useClass||c.provide));if(!function kz(c){return!!c.deps}(c))return fa(w)||xu(w);b=()=>new w(...Fv(c.deps))}return b}function hc(c,d,g=!1){return{factory:c,value:d,multi:g?[]:void 0}}function bO(c){return!!c.\u0275providers}function $g(c,d){for(const g of c)Array.isArray(g)?$g(g,d):bO(g)?$g(g.\u0275providers,d):d(g)}class cE{}class Yg{resolveComponentFactory(d){throw function CO(c){const d=Error(`No component factory found for ${ot(c)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=c,d}(d)}}let Xv=(()=>{class c{}return c.NULL=new Yg,c})();function HI(){return Zg(ls(),vt())}function Zg(c,d){return new Zs(Oa(c,d))}let Zs=(()=>{class c{constructor(g){this.nativeElement=g}}return c.__NG_ELEMENT_ID__=HI,c})();function FC(c){return c instanceof Zs?c.nativeElement:c}class NC{}let SO=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function Mz(){const c=vt(),g=Qn(ls().index,c);return(Ko(g)?g:c)[11]}(),c})(),lp=(()=>{class c{}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:()=>null}),c})();class cl{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const hp=new cl("14.2.12"),jI={};function pE(c){return c.ngOriginalError}class BC{constructor(){this._console=console}handleError(d){const g=this._findOriginalError(d);this._console.error("ERROR",d),g&&this._console.error("ORIGINAL ERROR",g)}_findOriginalError(d){let g=d&&pE(d);for(;g&&pE(g);)g=pE(g);return g||null}}function Ga(c){return c instanceof Function?c():c}function fE(c,d,g){let b=c.length;for(;;){const w=c.indexOf(d,g);if(-1===w)return w;if(0===w||c.charCodeAt(w-1)<=32){const E=d.length;if(w+E===b||c.charCodeAt(w+E)<=32)return w}g=w+1}}const TO="ng-template";function DO(c,d,g){let b=0;for(;b<c.length;){let w=c[b++];if(g&&"class"===w){if(w=c[b],-1!==fE(w.toLowerCase(),d,0))return!0}else if(1===w){for(;b<c.length&&"string"==typeof(w=c[b++]);)if(w.toLowerCase()===d)return!0;return!1}}return!1}function WI(c){return 4===c.type&&c.value!==TO}function Nz(c,d,g){return d===(4!==c.type||g?c.value:TO)}function IO(c,d,g){let b=4;const w=c.attrs||[],E=function Xg(c){for(let d=0;d<c.length;d++)if(dC(c[d]))return d;return c.length}(w);let k=!1;for(let M=0;M<d.length;M++){const F=d[M];if("number"!=typeof F){if(!k)if(4&b){if(b=2|1&b,""!==F&&!Nz(c,F,g)||""===F&&1===d.length){if(uc(b))return!1;k=!0}}else{const H=8&b?F:d[++M];if(8&b&&null!==c.attrs){if(!DO(c.attrs,H,g)){if(uc(b))return!1;k=!0}continue}const le=AO(8&b?"class":F,w,WI(c),g);if(-1===le){if(uc(b))return!1;k=!0;continue}if(""!==H){let Ee;Ee=le>E?"":w[le+1].toLowerCase();const Ge=8&b?Ee:null;if(Ge&&-1!==fE(Ge,H,0)||2&b&&H!==Ee){if(uc(b))return!1;k=!0}}}}else{if(!k&&!uc(b)&&!uc(F))return!1;if(k&&uc(F))continue;k=!1,b=F|1&b}}return uc(b)||k}function uc(c){return 0==(1&c)}function AO(c,d,g,b){if(null===d)return-1;let w=0;if(b||!g){let E=!1;for(;w<d.length;){const k=d[w];if(k===c)return w;if(3===k||6===k)E=!0;else{if(1===k||2===k){let M=d[++w];for(;"string"==typeof M;)M=d[++w];continue}if(4===k)break;if(0===k){w+=4;continue}}w+=E?1:2}return-1}return function hr(c,d){let g=c.indexOf(4);if(g>-1)for(g++;g<c.length;){const b=c[g];if("number"==typeof b)return-1;if(b===d)return g;g++}return-1}(d,c)}function GI(c,d,g=!1){for(let b=0;b<d.length;b++)if(IO(c,d[b],g))return!0;return!1}function kO(c,d){return c?":not("+d.trim()+")":d}function Jg(c){let d=c[0],g=1,b=2,w="",E=!1;for(;g<c.length;){let k=c[g];if("string"==typeof k)if(2&b){const M=c[++g];w+="["+k+(M.length>0?'="'+M+'"':"")+"]"}else 8&b?w+="."+k:4&b&&(w+=" "+k);else""!==w&&!uc(k)&&(d+=kO(E,w),w=""),b=k,E=E||!uc(b);g++}return""!==w&&(d+=kO(E,w)),d}const In={};function _O(c){zC(ji(),vt(),Ys()+c,!1)}function zC(c,d,g,b){if(!b)if(3==(3&d[2])){const E=c.preOrderCheckHooks;null!==E&&Sg(d,E,g)}else{const E=c.preOrderHooks;null!==E&&Zd(d,E,0,g)}ec(g)}function FO(c,d=null,g=null,b){const w=NO(c,d,g,b);return w.resolveInjectorInitializers(),w}function NO(c,d=null,g=null,b,w=new Set){const E=[g||nn,s9(c)];return b=b||("object"==typeof c?void 0:ot(c)),new Iz(E,d||uE(),b||null,w)}let ad=(()=>{class c{static create(g,b){if(Array.isArray(g))return FO({name:""},b,g,"");{const w=g.name??"";return FO({name:w},g.parent,g.providers,w)}}}return c.THROW_IF_NOT_FOUND=_o,c.NULL=new xz,c.\u0275prov=Wn({token:c,providedIn:"any",factory:()=>Co(Sz)}),c.__NG_ELEMENT_ID__=-1,c})();function im(c,d=fi.Default){const g=vt();return null===g?Co(c,d):Iv(ls(),g,Le(c),d)}function ld(){throw new Error("invalid")}function hd(c,d){return c<<17|d<<2}function dh(c){return c>>17&32767}function XI(c){return 2|c}function cp(c){return(131068&c)>>2}function JI(c,d){return-131069&c|d<<2}function eA(c){return 1|c}function Jz(c,d){const g=c.contentQueries;if(null!==g)for(let b=0;b<g.length;b+=2){const w=g[b],E=g[b+1];if(-1!==E){const k=c.data[E];rC(w),k.contentQueries(2,d[E],E)}}}function DE(c,d,g,b,w,E,k,M,F,H,$){const le=d.blueprint.slice();return le[0]=w,le[2]=76|b,(null!==$||c&&1024&c[2])&&(le[2]|=1024),$d(le),le[3]=le[15]=c,le[8]=g,le[10]=k||c&&c[10],le[11]=M||c&&c[11],le[12]=F||c&&c[12]||null,le[9]=H||c&&c[9]||null,le[6]=E,le[20]=function Y1(){return $1++}(),le[21]=$,le[16]=2==d.type?c[16]:le,le}function ay(c,d,g,b,w){let E=c.data[d];if(null===E)E=function aA(c,d,g,b,w){const E=Ju(),k=al(),F=c.data[d]=function tj(c,d,g,b,w,E){return{type:g,index:b,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:w,attrs:E,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,k?E:E&&E.parent,g,d,b,w);return null===c.firstChild&&(c.firstChild=F),null!==E&&(k?null==E.child&&null!==F.parent&&(E.child=F):null===E.next&&(E.next=F)),F}(c,d,g,b,w),function SS(){return Q.lFrame.inI18n}()&&(E.flags|=64);else if(64&E.type){E.type=g,E.value=b,E.attrs=w;const k=function Yc(){const c=Q.lFrame,d=c.currentTNode;return c.isParent?d:d.parent}();E.injectorIndex=null===k?-1:k.injectorIndex}return ga(E,!0),E}function Mf(c,d,g,b){if(0===g)return-1;const w=d.length;for(let E=0;E<g;E++)d.push(b),c.blueprint.push(b),c.data.push(null);return w}function ph(c,d,g){Cv(d);try{const b=c.viewQuery;null!==b&&PE(1,b,g);const w=c.template;null!==w&&ly(c,d,w,1,g),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&Jz(c,d),c.staticViewQueries&&PE(2,c.viewQuery,g);const E=c.components;null!==E&&function oA(c,d){for(let g=0;g<d.length;g++)pj(c,d[g])}(d,E)}catch(b){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),b}finally{d[2]&=-5,cf()}}function KC(c,d,g,b){const w=d[2];if(128!=(128&w)){Cv(d);try{$d(d),function bg(c){return Q.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==g&&ly(c,d,g,2,b);const k=3==(3&w);if(k){const H=c.preOrderCheckHooks;null!==H&&Sg(d,H,null)}else{const H=c.preOrderHooks;null!==H&&Zd(d,H,0,null),lC(d,0)}if(function cj(c){for(let d=Df(c);null!==d;d=Ug(d)){if(!d[2])continue;const g=d[9];for(let b=0;b<g.length;b++){const w=g[b],E=w[3];0==(512&w[2])&&hf(E,1),w[2]|=512}}}(d),function _E(c){for(let d=Df(c);null!==d;d=Ug(d))for(let g=10;g<d.length;g++){const b=d[g],w=b[1];Xu(b)&&KC(w,b,w.template,b[8])}}(d),null!==c.contentQueries&&Jz(c,d),k){const H=c.contentCheckHooks;null!==H&&Sg(d,H)}else{const H=c.contentHooks;null!==H&&Zd(d,H,1),lC(d,1)}!function C9(c,d){const g=c.hostBindingOpCodes;if(null!==g)try{for(let b=0;b<g.length;b++){const w=g[b];if(w<0)ec(~w);else{const E=w,k=g[++b],M=g[++b];ES(k,E),M(2,d[E])}}}finally{ec(-1)}}(c,d);const M=c.components;null!==M&&function w9(c,d){for(let g=0;g<d.length;g++)dj(c,d[g])}(d,M);const F=c.viewQuery;if(null!==F&&PE(2,F,b),k){const H=c.viewCheckHooks;null!==H&&Sg(d,H)}else{const H=c.viewHooks;null!==H&&Zd(d,H,2),lC(d,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),d[2]&=-41,512&d[2]&&(d[2]&=-513,hf(d[3],-1))}finally{cf()}}}function ly(c,d,g,b,w){const E=Ys(),k=2&b;try{ec(-1),k&&d.length>22&&zC(c,d,22,!1),g(b,w)}finally{ec(E)}}function lA(c,d,g){!en()||(function AE(c,d,g,b){const w=g.directiveStart,E=g.directiveEnd;c.firstCreatePass||Xd(g,d),I(b,d);const k=g.initialInputs;for(let M=w;M<E;M++){const F=c.data[M],H=El(F);H&&lj(d,g,F);const $=Xc(d,c,M,g);I($,d),null!==k&&hj(0,M-w,$,F,0,k),H&&(Qn(g.index,d)[8]=$)}}(c,d,g,Oa(g,d)),128==(128&g.flags)&&function cy(c,d,g){const b=g.directiveStart,w=g.directiveEnd,E=g.index,k=function V1(){return Q.lFrame.currentDirectiveIndex}();try{ec(E);for(let M=b;M<w;M++){const F=c.data[M],H=d[M];bv(M),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&aP(F,H)}}finally{ec(-1),bv(k)}}(c,d,g))}function IE(c,d,g=Oa){const b=d.localNames;if(null!==b){let w=d.index+1;for(let E=0;E<b.length;E+=2){const k=b[E+1],M=-1===k?g(d,c):c[k];c[w++]=M}}}function $C(c){const d=c.tView;return null===d||d.incompleteFirstPass?c.tView=hA(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):d}function hA(c,d,g,b,w,E,k,M,F,H){const $=22+b,le=$+w,Ee=function ej(c,d){const g=[];for(let b=0;b<d;b++)g.push(b<c?null:In);return g}($,le),Ge="function"==typeof H?H():H;return Ee[1]={type:c,blueprint:Ee,template:g,queries:null,viewQuery:M,declTNode:d,data:Ee.slice().fill(null,$),bindingStartIndex:$,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof E?E():E,pipeRegistry:"function"==typeof k?k():k,firstChild:null,schemas:F,consts:Ge,incompleteFirstPass:!1}}function nP(c,d,g,b){const w=fA(d);null===g?w.push(b):(w.push(g),c.firstCreatePass&&cP(c).push(b,w.length-1))}function hy(c,d,g){for(let b in c)if(c.hasOwnProperty(b)){const w=c[b];(g=null===g?{}:g).hasOwnProperty(b)?g[b].push(d,w):g[b]=[d,w]}return g}function uy(c,d){const b=d.directiveEnd,w=c.data,E=d.attrs,k=[];let M=null,F=null;for(let H=d.directiveStart;H<b;H++){const $=w[H],le=$.inputs,Ee=null===E||WI(d)?null:cA(le,E);k.push(Ee),M=hy(le,H,M),F=hy($.outputs,H,F)}null!==M&&(M.hasOwnProperty("class")&&(d.flags|=16),M.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=k,d.inputs=M,d.outputs=F}function rP(c,d){const g=Qn(d,c);16&g[2]||(g[2]|=32)}function sP(c,d,g,b){let w=!1;if(en()){const E=function sj(c,d,g){const b=c.directiveRegistry;let w=null;if(b)for(let E=0;E<b.length;E++){const k=b[E];GI(g,k.selectors,!1)&&(w||(w=[]),Dg(Xd(g,d),c,k.type),El(k)?(lP(c,g),w.unshift(k)):w.push(k))}return w}(c,d,g),k=null===b?null:{"":-1};if(null!==E){w=!0,hP(g,c.data.length,E.length);for(let $=0;$<E.length;$++){const le=E[$];le.providersResolver&&le.providersResolver(le)}let M=!1,F=!1,H=Mf(c,d,E.length,null);for(let $=0;$<E.length;$++){const le=E[$];g.mergedAttrs=xg(g.mergedAttrs,le.hostAttrs),uP(c,g,d,H,le),aj(H,le,k),null!==le.contentQueries&&(g.flags|=8),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(g.flags|=128);const Ee=le.type.prototype;!M&&(Ee.ngOnChanges||Ee.ngOnInit||Ee.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(g.index),M=!0),!F&&(Ee.ngOnChanges||Ee.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(g.index),F=!0),H++}uy(c,g)}k&&function oj(c,d,g){if(d){const b=c.localNames=[];for(let w=0;w<d.length;w+=2){const E=g[d[w+1]];if(null==E)throw new Ct(-301,!1);b.push(d[w],E)}}}(g,b,k)}return g.mergedAttrs=xg(g.mergedAttrs,g.attrs),w}function oP(c,d,g,b,w,E){const k=E.hostBindings;if(k){let M=c.hostBindingOpCodes;null===M&&(M=c.hostBindingOpCodes=[]);const F=~d.index;(function uA(c){let d=c.length;for(;d>0;){const g=c[--d];if("number"==typeof g&&g<0)return g}return 0})(M)!=F&&M.push(F),M.push(b,w,k)}}function aP(c,d){null!==c.hostBindings&&c.hostBindings(1,d)}function lP(c,d){d.flags|=2,(c.components||(c.components=[])).push(d.index)}function aj(c,d,g){if(g){if(d.exportAs)for(let b=0;b<d.exportAs.length;b++)g[d.exportAs[b]]=c;El(d)&&(g[""]=c)}}function hP(c,d,g){c.flags|=1,c.directiveStart=d,c.directiveEnd=d+g,c.providerIndexes=d}function uP(c,d,g,b,w){c.data[b]=w;const E=w.factory||(w.factory=fa(w.type)),k=new uh(E,El(w),im);c.blueprint[b]=k,g[b]=k,oP(c,d,0,b,Mf(c,g,w.hostVars,In),w)}function lj(c,d,g){const b=Oa(d,c),w=$C(g),E=c[10],k=QC(c,DE(c,w,null,g.onPush?32:16,b,d,E,E.createRenderer(b,g),null,null,null));c[d.index]=k}function cd(c,d,g,b,w,E){const k=Oa(c,d);!function kE(c,d,g,b,w,E,k){if(null==E)c.removeAttribute(d,w,g);else{const M=null==k?ft(E):k(E,b||"",w);c.setAttribute(d,w,M,g)}}(d[11],k,E,c.value,g,b,w)}function hj(c,d,g,b,w,E){const k=E[d];if(null!==k){const M=b.setInput;for(let F=0;F<k.length;){const H=k[F++],$=k[F++],le=k[F++];null!==M?b.setInput(g,le,H,$):g[$]=le}}}function cA(c,d){let g=null,b=0;for(;b<d.length;){const w=d[b];if(0!==w)if(5!==w){if("number"==typeof w)break;c.hasOwnProperty(w)&&(null===g&&(g=[]),g.push(w,c[w],d[b+1])),b+=2}else b+=2;else b+=4}return g}function RE(c,d,g,b){return new Array(c,!0,!1,d,null,0,b,g,null,null)}function dj(c,d){const g=Qn(d,c);if(Xu(g)){const b=g[1];48&g[2]?KC(b,g,b.template,g[8]):g[5]>0&&dA(g)}}function dA(c){for(let b=Df(c);null!==b;b=Ug(b))for(let w=10;w<b.length;w++){const E=b[w];if(Xu(E))if(512&E[2]){const k=E[1];KC(k,E,k.template,E[8])}else E[5]>0&&dA(E)}const g=c[1].components;if(null!==g)for(let b=0;b<g.length;b++){const w=Qn(g[b],c);Xu(w)&&w[5]>0&&dA(w)}}function pj(c,d){const g=Qn(d,c),b=g[1];(function ME(c,d){for(let g=d.length;g<c.blueprint.length;g++)d.push(c.blueprint[g])})(b,g),ph(b,g,g[8])}function QC(c,d){return c[13]?c[14][4]=d:c[13]=d,c[14]=d,d}function OE(c){for(;c;){c[2]|=32;const d=op(c);if(ef(c)&&!d)return c;c=d}return null}function rm(c,d,g,b=!0){const w=d[10];w.begin&&w.begin();try{KC(c,d,c.template,g)}catch(k){throw b&&pP(d,k),k}finally{w.end&&w.end()}}function PE(c,d,g){rC(0),d(c,g)}function fA(c){return c[7]||(c[7]=[])}function cP(c){return c.cleanup||(c.cleanup=[])}function pP(c,d){const g=c[9],b=g?g.get(BC,null):null;b&&b.handleError(d)}function gA(c,d,g,b,w){for(let E=0;E<g.length;){const k=g[E++],M=g[E++],F=d[k],H=c.data[k];null!==H.setInput?H.setInput(F,w,b,M):F[M]=w}}function sm(c,d,g){let b=g?c.styles:null,w=g?c.classes:null,E=0;if(null!==d)for(let k=0;k<d.length;k++){const M=d[k];"number"==typeof M?E=M:1==E?w=ct(w,M):2==E&&(b=ct(b,M+": "+d[++k]+";"))}g?c.styles=b:c.stylesWithoutHost=b,g?c.classes=w:c.classesWithoutHost=w}function FE(c,d,g,b,w=!1){for(;null!==g;){const E=d[g.index];if(null!==E&&b.push(Bs(E)),_a(E))for(let M=10;M<E.length;M++){const F=E[M],H=F[1].firstChild;null!==H&&FE(F[1],F,H,b)}const k=g.type;if(8&k)FE(c,d,g.child,b);else if(32&k){const M=jg(g,d);let F;for(;F=M();)b.push(F)}else if(16&k){const M=rO(d,g);if(Array.isArray(M))b.push(...M);else{const F=op(d[16]);FE(F[1],F,M,b,!0)}}g=w?g.projectionNext:g.next}return b}class XC{constructor(d,g){this._lView=d,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,g=d[1];return FE(g,d,g.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(_a(d)){const g=d[8],b=g?g.indexOf(this):-1;b>-1&&(gI(d,b),ep(g,b))}this._attachedToViewContainer=!1}mI(this._lView[1],this._lView)}onDestroy(d){nP(this._lView[1],this._lView,null,d)}markForCheck(){OE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){rm(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Q1(c,d){AC(c,d,d[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(d){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=d}}class fj extends XC{constructor(d){super(d),this._view=d}detectChanges(){const d=this._view;rm(d[1],d,d[8],!1)}checkNoChanges(){}get context(){return null}}class mA extends Xv{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const g=q(d);return new dy(g,this.ngModule)}}function fP(c){const d=[];for(let g in c)c.hasOwnProperty(g)&&d.push({propName:c[g],templateName:g});return d}class mj{constructor(d,g){this.injector=d,this.parentInjector=g}get(d,g,b){const w=this.injector.get(d,jI,b);return w!==jI||g===jI?w:this.parentInjector.get(d,g,b)}}class dy extends cE{constructor(d,g){super(),this.componentDef=d,this.ngModule=g,this.componentType=d.type,this.selector=function Bz(c){return c.map(Jg).join(",")}(d.selectors),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return fP(this.componentDef.inputs)}get outputs(){return fP(this.componentDef.outputs)}create(d,g,b,w){let E=(w=w||this.ngModule)instanceof Qv?w:w?.injector;E&&null!==this.componentDef.getStandaloneInjector&&(E=this.componentDef.getStandaloneInjector(E)||E);const k=E?new mj(d,E):d,M=k.get(NC,null);if(null===M)throw new Ct(407,!1);const F=k.get(lp,null),H=M.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",le=b?function ZC(c,d,g){return c.selectRootElement(d,g===Ri.ShadowDom)}(H,b,this.componentDef.encapsulation):Z1(H,$,function gj(c){const d=c.toLowerCase();return"svg"===d?"svg":"math"===d?"math":null}($)),Ee=this.componentDef.onPush?288:272,Ge=hA(0,null,null,1,0,null,null,null,null,null),It=DE(null,Ge,null,Ee,null,null,M,H,F,k,null);let Zt,di;Cv(It);try{const Ni=function mP(c,d,g,b,w,E){const k=g[1];g[22]=c;const F=ay(k,22,2,"#host",null),H=F.mergedAttrs=d.hostAttrs;null!==H&&(sm(F,H,!0),null!==c&&(tc(w,c,H),null!==F.classes&&EI(w,c,F.classes),null!==F.styles&&nE(w,c,F.styles)));const $=b.createRenderer(c,d),le=DE(g,$C(d),null,d.onPush?32:16,g[22],F,b,$,E||null,null,null);return k.firstCreatePass&&(Dg(Xd(F,g),k,d.type),lP(k,F),hP(F,g.length,1)),QC(g,le),g[22]=le}(le,this.componentDef,It,M,H);if(le)if(b)tc(H,le,["ng-version",hp.full]);else{const{attrs:fn,classes:Nt}=function RO(c){const d=[],g=[];let b=1,w=2;for(;b<c.length;){let E=c[b];if("string"==typeof E)2===w?""!==E&&d.push(E,c[++b]):8===w&&g.push(E);else{if(!uc(w))break;w=E}b++}return{attrs:d,classes:g}}(this.componentDef.selectors[0]);fn&&tc(H,le,fn),Nt&&Nt.length>0&&EI(H,le,Nt.join(" "))}if(di=Tl(Ge,22),void 0!==g){const fn=di.projection=[];for(let Nt=0;Nt<this.ngContentSelectors.length;Nt++){const wn=g[Nt];fn.push(null!=wn?Array.from(wn):null)}}Zt=function vP(c,d,g,b){const w=g[1],E=function rj(c,d,g){const b=ls();c.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),uP(c,b,d,Mf(c,d,1,null),g),uy(c,b));const w=Xc(d,c,b.directiveStart,b);I(w,d);const E=Oa(b,d);return E&&I(E,d),w}(w,g,d);if(c[8]=g[8]=E,null!==b)for(const M of b)M(E,d);if(d.contentQueries){const M=ls();d.contentQueries(1,E,M.directiveStart)}const k=ls();return!w.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(ec(k.index),oP(g[1],k,0,k.directiveStart,k.directiveEnd,d),aP(d,E)),E}(Ni,this.componentDef,It,[Cj]),ph(Ge,It,null)}finally{cf()}return new gP(this.componentType,Zt,Zg(di,It),It,di)}}class gP extends class _z{}{constructor(d,g,b,w,E){super(),this.location=b,this._rootLView=w,this._tNode=E,this.instance=g,this.hostView=this.changeDetectorRef=new fj(w),this.componentType=d}setInput(d,g){const b=this._tNode.inputs;let w;if(null!==b&&(w=b[d])){const E=this._rootLView;gA(E[1],E,w,d,g),rP(E,this._tNode.index)}}get injector(){return new kg(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}function Cj(){const c=ls();wg(vt()[1],c)}function vA(c){let d=function yP(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),g=!0;const b=[c];for(;d;){let w;if(El(c))w=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new Ct(903,!1);w=d.\u0275dir}if(w){if(g){b.push(w);const k=c;k.inputs=yA(c.inputs),k.declaredInputs=yA(c.declaredInputs),k.outputs=yA(c.outputs);const M=w.hostBindings;M&&bA(c,M);const F=w.viewQuery,H=w.contentQueries;if(F&&Sj(c,F),H&&bP(c,H),tt(c.inputs,w.inputs),tt(c.declaredInputs,w.declaredInputs),tt(c.outputs,w.outputs),El(w)&&w.data.animation){const $=c.data;$.animation=($.animation||[]).concat(w.data.animation)}}const E=w.features;if(E)for(let k=0;k<E.length;k++){const M=E[k];M&&M.ngInherit&&M(c),M===vA&&(g=!1)}}d=Object.getPrototypeOf(d)}!function wj(c){let d=0,g=null;for(let b=c.length-1;b>=0;b--){const w=c[b];w.hostVars=d+=w.hostVars,w.hostAttrs=xg(w.hostAttrs,g=xg(g,w.hostAttrs))}}(b)}function yA(c){return c===no?{}:c===nn?[]:c}function Sj(c,d){const g=c.viewQuery;c.viewQuery=g?(b,w)=>{d(b,w),g(b,w)}:d}function bP(c,d){const g=c.contentQueries;c.contentQueries=g?(b,w,E)=>{d(b,w,E),g(b,w,E)}:d}function bA(c,d){const g=c.hostBindings;c.hostBindings=g?(b,w)=>{d(b,w),g(b,w)}:d}let NE=null;function om(){if(!NE){const c=Mi.Symbol;if(c&&c.iterator)NE=c.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<d.length;++g){const b=d[g];"entries"!==b&&"size"!==b&&Map.prototype[b]===Map.prototype.entries&&(NE=b)}}}return NE}function JC(c){return!!e0(c)&&(Array.isArray(c)||!(c instanceof Map)&&om()in c)}function e0(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function La(c,d,g){return!Object.is(c[d],g)&&(c[d]=g,!0)}function wA(c,d,g,b){const w=vt();return La(w,Cg(),d)&&(ji(),cd(Vs(),w,c,d,g,b)),wA}function Dj(c,d,g,b,w,E,k,M){const F=vt(),H=ji(),$=c+22,le=H.firstCreatePass?function TA(c,d,g,b,w,E,k,M,F){const H=d.consts,$=ay(d,c,4,k||null,lh(H,M));sP(d,g,$,lh(H,F)),wg(d,$);const le=$.tViews=hA(2,$,b,w,E,d.directiveRegistry,d.pipeRegistry,null,d.schemas,H);return null!==d.queries&&(d.queries.template(d,$),le.queries=d.queries.embeddedTView($)),$}($,H,F,d,g,b,w,E,k):H.data[$];ga(le,!1);const Ee=F[11].createComment("");tE(H,F,Ee,le),I(Ee,F),QC(F,F[$]=RE(Ee,F,Ee,le)),Wc(le)&&lA(H,F,le),null!=k&&IE(F,le,M)}function DA(c){return yu(function tC(){return Q.lFrame.contextLView}(),22+c)}function r0(c,d,g){const b=vt();return La(b,Cg(),d)&&function Bh(c,d,g,b,w,E,k,M){const F=Oa(d,g);let $,H=d.inputs;!M&&null!=H&&($=H[b])?(gA(c,g,$,b,w),Uc(d)&&rP(g,d.index)):3&d.type&&(b=function ij(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(b),w=null!=k?k(w,d.value||"",b):w,E.setProperty(F,b,w))}(ji(),Vs(),b,c,d,b[11],g,!1),r0}function IA(c,d,g,b,w){const k=w?"class":"style";gA(c,g,d.inputs[k],k,b)}function zE(c,d,g,b){const w=vt(),E=ji(),k=22+c,M=w[11],F=w[k]=Z1(M,d,function aC(){return Q.lFrame.currentNamespace}()),H=E.firstCreatePass?function Ij(c,d,g,b,w,E,k){const M=d.consts,H=ay(d,c,2,w,lh(M,E));return sP(d,g,H,lh(M,k)),null!==H.attrs&&sm(H,H.attrs,!1),null!==H.mergedAttrs&&sm(H,H.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,H),H}(k,E,w,0,d,g,b):E.data[k];ga(H,!0);const $=H.mergedAttrs;null!==$&&tc(M,F,$);const le=H.classes;null!==le&&EI(M,F,le);const Ee=H.styles;return null!==Ee&&nE(M,F,Ee),64!=(64&H.flags)&&tE(E,w,F,H),0===function ht(){return Q.lFrame.elementDepthCount}()&&I(F,w),function Gt(){Q.lFrame.elementDepthCount++}(),Wc(H)&&(lA(E,w,H),function iP(c,d,g){if(gu(d)){const w=d.directiveEnd;for(let E=d.directiveStart;E<w;E++){const k=c.data[E];k.contentQueries&&k.contentQueries(1,g[E],E)}}}(E,H,w)),null!==b&&IE(w,H),zE}function s0(){let c=ls();al()?function ql(){Q.lFrame.isParent=!1}():(c=c.parent,ga(c,!1));const d=c;!function ii(){Q.lFrame.elementDepthCount--}();const g=ji();return g.firstCreatePass&&(wg(g,c),gu(c)&&g.queries.elementEnd(c)),null!=d.classesWithoutHost&&function Sv(c){return 0!=(16&c.flags)}(d)&&IA(g,d,vt(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function Ev(c){return 0!=(32&c.flags)}(d)&&IA(g,d,vt(),d.stylesWithoutHost,!1),s0}function AA(c,d,g,b){return zE(c,d,g,b),s0(),AA}function DP(){return vt()}function RA(c){return!!c&&"function"==typeof c.then}function _A(c){return!!c&&"function"==typeof c.subscribe}const IP=_A;function MA(c,d,g,b){const w=vt(),E=ji(),k=ls();return function kP(c,d,g,b,w,E,k,M){const F=Wc(b),$=c.firstCreatePass&&cP(c),le=d[8],Ee=fA(d);let Ge=!0;if(3&b.type||M){const di=Oa(b,d),Ni=M?M(di):di,fn=Ee.length,Nt=M?_r=>M(Bs(_r[b.index])):b.index;let wn=null;if(!M&&F&&(wn=function Aj(c,d,g,b){const w=c.cleanup;if(null!=w)for(let E=0;E<w.length-1;E+=2){const k=w[E];if(k===g&&w[E+1]===b){const M=d[7],F=w[E+2];return M.length>F?M[F]:null}"string"==typeof k&&(E+=2)}return null}(c,d,w,b.index)),null!==wn)(wn.__ngLastListenerFn__||wn).__ngNextListenerFn__=E,wn.__ngLastListenerFn__=E,Ge=!1;else{E=RP(b,d,le,E,!1);const _r=g.listen(Ni,w,E);Ee.push(E,_r),$&&$.push(w,Nt,fn,fn+1)}}else E=RP(b,d,le,E,!1);const It=b.outputs;let Zt;if(Ge&&null!==It&&(Zt=It[w])){const di=Zt.length;if(di)for(let Ni=0;Ni<di;Ni+=2){const Js=d[Zt[Ni]][Zt[Ni+1]].subscribe(E),Em=Ee.length;Ee.push(E,Js),$&&$.push(w,b.index,Em,-(Em+1))}}}(E,w,w[11],k,c,d,0,b),MA}function OA(c,d,g,b){try{return!1!==g(b)}catch(w){return pP(c,w),!1}}function RP(c,d,g,b,w){return function E(k){if(k===Function)return b;OE(2&c.flags?Qn(c.index,d):d);let F=OA(d,0,b,k),H=E.__ngNextListenerFn__;for(;H;)F=OA(d,0,H,k)&&F,H=H.__ngNextListenerFn__;return w&&!1===F&&(k.preventDefault(),k.returnValue=!1),F}}function kj(c=1){return function Yd(c){return(Q.lFrame.contextLView=function KD(c,d){for(;c>0;)d=d[15],c--;return d}(c,Q.lFrame.contextLView))[8]}(c)}function re(c,d,g,b,w){const E=c[g+1],k=null===d;let M=b?dh(E):cp(E),F=!1;for(;0!==M&&(!1===F||k);){const $=c[M+1];ui(c[M],d)&&(F=!0,c[M+1]=b?eA($):XI($)),M=b?dh($):cp($)}F&&(c[g+1]=b?XI(E):eA(E))}function ui(c,d){return null===c||null==d||(Array.isArray(c)?c[1]:c)===d||!(!Array.isArray(c)||"string"!=typeof d)&&nc(c,d)>=0}function PP(c,d){return function cc(c,d,g,b){const w=vt(),E=ji(),k=function Zc(c){const d=Q.lFrame,g=d.bindingIndex;return d.bindingIndex=d.bindingIndex+c,g}(2);E.firstUpdatePass&&function LA(c,d,g,b){const w=c.data;if(null===w[g+1]){const E=w[Ys()],k=function FP(c,d){return d>=c.expandoStartIndex}(c,g);(function UP(c,d){return 0!=(c.flags&(d?16:32))})(E,b)&&null===d&&!k&&(d=!1),d=function NP(c,d,g,b){const w=function iC(c){const d=Q.lFrame.currentDirectiveIndex;return-1===d?null:c[d]}(c);let E=b?d.residualClasses:d.residualStyles;if(null===w)0===(b?d.classBindings:d.styleBindings)&&(g=a0(g=zh(null,c,d,g,b),d.attrs,b),E=null);else{const k=d.directiveStylingLast;if(-1===k||c[k]!==w)if(g=zh(w,c,d,g,b),null===E){let F=function Xs(c,d,g){const b=g?d.classBindings:d.styleBindings;if(0!==cp(b))return c[dh(b)]}(c,d,b);void 0!==F&&Array.isArray(F)&&(F=zh(null,c,d,F[1],b),F=a0(F,d.attrs,b),function Oj(c,d,g,b){c[dh(g?d.classBindings:d.styleBindings)]=b}(c,d,b,F))}else E=function Pj(c,d,g){let b;const w=d.directiveEnd;for(let E=1+d.directiveStylingLast;E<w;E++)b=a0(b,c[E].hostAttrs,g);return a0(b,d.attrs,g)}(c,d,b)}return void 0!==E&&(b?d.residualClasses=E:d.residualStyles=E),g}(w,E,d,b),function qE(c,d,g,b,w,E){let k=E?d.classBindings:d.styleBindings,M=dh(k),F=cp(k);c[b]=g;let $,H=!1;if(Array.isArray(g)){const le=g;$=le[1],(null===$||nc(le,$)>0)&&(H=!0)}else $=g;if(w)if(0!==F){const Ee=dh(c[M+1]);c[b+1]=hd(Ee,M),0!==Ee&&(c[Ee+1]=JI(c[Ee+1],b)),c[M+1]=function Gz(c,d){return 131071&c|d<<17}(c[M+1],b)}else c[b+1]=hd(M,0),0!==M&&(c[M+1]=JI(c[M+1],b)),M=b;else c[b+1]=hd(F,0),0===M?M=b:c[F+1]=JI(c[F+1],b),F=b;H&&(c[b+1]=XI(c[b+1])),re(c,$,b,!0),re(c,$,b,!1),function _j(c,d,g,b,w){const E=w?c.residualClasses:c.residualStyles;null!=E&&"string"==typeof d&&nc(E,d)>=0&&(g[b+1]=eA(g[b+1]))}(d,$,c,b,E),k=hd(M,F),E?d.classBindings=k:d.styleBindings=k}(w,E,d,g,k,b)}}(E,c,k,b),d!==In&&La(w,k,d)&&function zP(c,d,g,b,w,E,k,M){if(!(3&d.type))return;const F=c.data,H=F[M+1];l0(function KO(c){return 1==(1&c)}(H)?jP(F,d,g,w,cp(H),k):void 0)||(l0(E)||function QI(c){return 2==(2&c)}(H)&&(E=jP(F,null,g,w,M,k)),function G7(c,d,g,b,w){if(d)w?c.addClass(g,b):c.removeClass(g,b);else{let E=-1===b.indexOf("-")?void 0:ch.DashCase;null==w?c.removeStyle(g,b,E):("string"==typeof w&&w.endsWith("!important")&&(w=w.slice(0,-10),E|=ch.Important),c.setStyle(g,b,w,E))}}(b,k,function $c(c,d){return Bs(d[c])}(Ys(),g),w,E))}(E,E.data[Ys()],w,w[11],c,w[k+1]=function qP(c,d){return null==c||("string"==typeof d?c+=d:"object"==typeof c&&(c=ot(Gg(c)))),c}(d,g),b,k)}(c,d,null,!0),PP}function zh(c,d,g,b,w){let E=null;const k=g.directiveEnd;let M=g.directiveStylingLast;for(-1===M?M=g.directiveStart:M++;M<k&&(E=d[M],b=a0(b,E.hostAttrs,w),E!==c);)M++;return null!==c&&(g.directiveStylingLast=M),b}function a0(c,d,g){const b=g?1:2;let w=-1;if(null!==d)for(let E=0;E<d.length;E++){const k=d[E];"number"==typeof k?w=k:w===b&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Dl(c,k,!!g||d[++E]))}return void 0===c?null:c}function jP(c,d,g,b,w,E){const k=null===d;let M;for(;w>0;){const F=c[w],H=Array.isArray(F),$=H?F[1]:F,le=null===$;let Ee=g[w+1];Ee===In&&(Ee=le?nn:void 0);let Ge=le?yC(Ee,b):$===b?Ee:void 0;if(H&&!l0(Ge)&&(Ge=yC(F,b)),l0(Ge)&&(M=Ge,k))return M;const It=c[w+1];w=k?dh(It):cp(It)}if(null!==d){let F=E?d.residualClasses:d.residualStyles;null!=F&&(M=yC(F,b))}return M}function l0(c){return void 0!==c}function WP(c,d=""){const g=vt(),b=ji(),w=c+22,E=b.firstCreatePass?ay(b,w,1,d,null):b.data[w],k=g[w]=function ZS(c,d){return c.createText(d)}(g[11],d);tE(b,g,k,E),ga(E,!1)}const Of=void 0;var A=["en",[["a","p"],["AM","PM"],Of],[["AM","PM"],Of,Of],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Of,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Of,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Of,"{1} 'at' {0}",Of],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function X(c){const g=Math.floor(Math.abs(c)),b=c.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===b?1:5}];let wy={};function B(c){const d=function aL(c){return c.toLowerCase().replace(/_/g,"-")}(c);let g=Ts(d);if(g)return g;const b=d.split("-")[0];if(g=Ts(b),g)return g;if("en"===b)return A;throw new Ct(701,!1)}function jA(c){return B(c)[xt.PluralCase]}function Ts(c){return c in wy||(wy[c]=Mi.ng&&Mi.ng.common&&Mi.ng.common.locales&&Mi.ng.common.locales[c]),wy[c]}var xt=(()=>((xt=xt||{})[xt.LocaleId=0]="LocaleId",xt[xt.DayPeriodsFormat=1]="DayPeriodsFormat",xt[xt.DayPeriodsStandalone=2]="DayPeriodsStandalone",xt[xt.DaysFormat=3]="DaysFormat",xt[xt.DaysStandalone=4]="DaysStandalone",xt[xt.MonthsFormat=5]="MonthsFormat",xt[xt.MonthsStandalone=6]="MonthsStandalone",xt[xt.Eras=7]="Eras",xt[xt.FirstDayOfWeek=8]="FirstDayOfWeek",xt[xt.WeekendRange=9]="WeekendRange",xt[xt.DateFormat=10]="DateFormat",xt[xt.TimeFormat=11]="TimeFormat",xt[xt.DateTimeFormat=12]="DateTimeFormat",xt[xt.NumberSymbols=13]="NumberSymbols",xt[xt.NumberFormats=14]="NumberFormats",xt[xt.CurrencyCode=15]="CurrencyCode",xt[xt.CurrencySymbol=16]="CurrencySymbol",xt[xt.CurrencyName=17]="CurrencyName",xt[xt.Currencies=18]="Currencies",xt[xt.Directionality=19]="Directionality",xt[xt.PluralCase=20]="PluralCase",xt[xt.ExtraData=21]="ExtraData",xt))();const qe="en-US";let Nj=qe;function XA(c,d,g,b,w){if(c=Le(c),Array.isArray(c))for(let E=0;E<c.length;E++)XA(c[E],d,g,b,w);else{const E=ji(),k=vt();let M=Kg(c)?c:Le(c.provide),F=LC(c);const H=ls(),$=1048575&H.providerIndexes,le=H.directiveStart,Ee=H.providerIndexes>>20;if(Kg(c)||!c.multi){const Ge=new uh(F,w,im),It=ek(M,d,w?$:$+Ee,le);-1===It?(Dg(Xd(H,k),E,M),JA(E,c,d.length),d.push(M),H.directiveStart++,H.directiveEnd++,w&&(H.providerIndexes+=1048576),g.push(Ge),k.push(Ge)):(g[It]=Ge,k[It]=Ge)}else{const Ge=ek(M,d,$+Ee,le),It=ek(M,d,$,$+Ee),Zt=Ge>=0&&g[Ge],di=It>=0&&g[It];if(w&&!di||!w&&!Zt){Dg(Xd(H,k),E,M);const Ni=function EL(c,d,g,b,w){const E=new uh(c,g,im);return E.multi=[],E.index=d,E.componentProviders=0,dl(E,w,b&&!g),E}(w?e3:Jj,g.length,w,b,F);!w&&di&&(g[It].providerFactory=Ni),JA(E,c,d.length,0),d.push(M),H.directiveStart++,H.directiveEnd++,w&&(H.providerIndexes+=1048576),g.push(Ni),k.push(Ni)}else JA(E,c,Ge>-1?Ge:It,dl(g[w?It:Ge],F,!w&&b));!w&&b&&di&&g[It].componentProviders++}}}function JA(c,d,g,b){const w=Kg(d),E=function FI(c){return!!c.useClass}(d);if(w||E){const F=(E?Le(d.useClass):d).prototype.ngOnDestroy;if(F){const H=c.destroyHooks||(c.destroyHooks=[]);if(!w&&d.multi){const $=H.indexOf(g);-1===$?H.push(g,[b,F]):H[$+1].push(b,F)}else H.push(g,F)}}}function dl(c,d,g){return g&&c.componentProviders++,c.multi.push(d)-1}function ek(c,d,g,b){for(let w=g;w<b;w++)if(d[w]===c)return w;return-1}function Jj(c,d,g,b){return tk(this.multi,[])}function e3(c,d,g,b){const w=this.multi;let E;if(this.providerFactory){const k=this.providerFactory.componentProviders,M=Xc(g,g[1],this.providerFactory.index,b);E=M.slice(0,k),tk(w,E);for(let F=k;F<M.length;F++)E.push(M[F])}else E=[],tk(w,E);return E}function tk(c,d){for(let g=0;g<c.length;g++)d.push((0,c[g])());return d}function xL(c,d=[]){return g=>{g.providersResolver=(b,w)=>function Sp(c,d,g){const b=ji();if(b.firstCreatePass){const w=El(c);XA(g,b.data,b.blueprint,w,!0),XA(d,b.data,b.blueprint,w,!1)}}(b,w?w(c):c,d)}}class fm{}class TL{}function ik(c,d){return new DL(c,d??null)}class DL extends fm{constructor(d,g){super(),this._parent=g,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new mA(this);const b=Pt(d);this._bootstrapComponents=Ga(b.bootstrap),this._r3Injector=NO(d,g,[{provide:fm,useValue:this},{provide:Xv,useValue:this.componentFactoryResolver}],ot(d),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(d)}get injector(){return this._r3Injector}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class nk extends TL{constructor(d){super(),this.moduleType=d}create(d){return new DL(this.moduleType,d)}}class t3 extends fm{constructor(d,g,b){super(),this.componentFactoryResolver=new mA(this),this.instance=null;const w=new Iz([...d,{provide:fm,useValue:this},{provide:Xv,useValue:this.componentFactoryResolver}],g||uE(),b,new Set(["environment"]));this.injector=w,w.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(d){this.injector.onDestroy(d)}}function rk(c,d,g=null){return new t3(c,d,g).injector}let sk=(()=>{class c{constructor(g){this._injector=g,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(g){if(!g.standalone)return null;if(!this.cachedInjectors.has(g.id)){const b=Tz(0,g.type),w=b.length>0?rk([b],this._injector,`Standalone[${g.type.name}]`):null;this.cachedInjectors.set(g.id,w)}return this.cachedInjectors.get(g.id)}ngOnDestroy(){try{for(const g of this.cachedInjectors.values())null!==g&&g.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=Wn({token:c,providedIn:"environment",factory:()=>new c(Co(Qv))}),c})();function IL(c){c.getStandaloneInjector=d=>d.get(sk).getOrCreateStandaloneInjector(c)}function XE(c,d,g,b){return BL(vt(),$o(),c,d,g,b)}function BL(c,d,g,b,w,E){const k=d+g;return La(c,k,w)?function dd(c,d,g){return c[d]=g}(c,k+1,E?b.call(E,w):b(w)):function Za(c,d){const g=c[d];return g===In?void 0:g}(c,k+1)}function Fa(c,d){const g=ji();let b;const w=c+22;g.firstCreatePass?(b=function u3(c,d){if(d)for(let g=d.length-1;g>=0;g--){const b=d[g];if(c===b.name)return b}}(d,g.pipeRegistry),g.data[w]=b,b.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(w,b.onDestroy)):b=g.data[w];const E=b.factory||(b.factory=fa(b.type)),k=br(im);try{const M=xv(!1),F=E();return xv(M),function xP(c,d,g,b){g>=c.data.length&&(c.data[g]=null,c.blueprint[g]=null),d[g]=b}(g,vt(),w,F),F}finally{br(k)}}function pn(c,d,g){const b=c+22,w=vt(),E=yu(w,b);return function Dy(c,d){return c[1].data[d].pure}(w,b)?BL(w,$o(),d,E.transform,g,E):E.transform(g)}function Au(c){return d=>{setTimeout(c,void 0,d)}}const gd=class Ye extends v.x{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,g,b){let w=d,E=g||(()=>null),k=b;if(d&&"object"==typeof d){const F=d;w=F.next?.bind(F),E=F.error?.bind(F),k=F.complete?.bind(F)}this.__isAsync&&(E=Au(E),w&&(w=Au(w)),k&&(k=Au(k)));const M=super.subscribe({next:w,error:E,complete:k});return d instanceof ue.w0&&d.add(M),M}};function VL(){return this._results[om()]()}class x0{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=om(),b=x0.prototype;b[g]||(b[g]=VL)}get changes(){return this._changes||(this._changes=new gd)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,g){return this._results.reduce(d,g)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,g){const b=this;b.dirty=!1;const w=ll(d);(this._changesDetected=!function sI(c,d,g){if(c.length!==d.length)return!1;for(let b=0;b<c.length;b++){let w=c[b],E=d[b];if(g&&(w=g(w),E=g(E)),E!==w)return!1}return!0}(b._results,w,g))&&(b._results=w,b.length=w.length,b.last=w[this.length-1],b.first=w[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pl=(()=>{class c{}return c.__NG_ELEMENT_ID__=z9,c})();const Iy=pl,H9=class extends Iy{constructor(d,g,b){super(),this._declarationLView=d,this._declarationTContainer=g,this.elementRef=b}createEmbeddedView(d,g){const b=this._declarationTContainer.tViews,w=DE(this._declarationLView,b,d,16,null,b.declTNode,null,null,null,null,g||null);w[17]=this._declarationLView[this._declarationTContainer.index];const k=this._declarationLView[19];return null!==k&&(w[19]=k.createEmbeddedView(b)),ph(b,w,d),new XC(w)}};function z9(){return lk(ls(),vt())}function lk(c,d){return 4&c.type?new H9(d,c,Zg(c,d)):null}let JE=(()=>{class c{}return c.__NG_ELEMENT_ID__=p3,c})();function p3(){return ex(ls(),vt())}const j9=JE,HL=class extends j9{constructor(d,g,b){super(),this._lContainer=d,this._hostTNode=g,this._hostLView=b}get element(){return Zg(this._hostTNode,this._hostLView)}get injector(){return new kg(this._hostTNode,this._hostLView)}get parentInjector(){const d=Tg(this._hostTNode,this._hostLView);if(XD(d)){const g=Qc(d,this._hostLView),b=Qd(d);return new kg(g[1].data[b+8],g)}return new kg(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const g=Xe(this._lContainer);return null!==g&&g[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,g,b){let w,E;"number"==typeof b?w=b:null!=b&&(w=b.index,E=b.injector);const k=d.createEmbeddedView(g||{},E);return this.insert(k,w),k}createComponent(d,g,b,w,E){const k=d&&!function Wa(c){return"function"==typeof c}(d);let M;if(k)M=g;else{const le=g||{};M=le.index,b=le.injector,w=le.projectableNodes,E=le.environmentInjector||le.ngModuleRef}const F=k?d:new dy(q(d)),H=b||this.parentInjector;if(!E&&null==F.ngModule){const Ee=(k?H:this.parentInjector).get(Qv,null);Ee&&(E=Ee)}const $=F.create(H,w,void 0,E);return this.insert($.hostView,M),$}insert(d,g){const b=d._lView,w=b[1];if(function vv(c){return _a(c[3])}(b)){const $=this.indexOf(d);if(-1!==$)this.detach($);else{const le=b[3],Ee=new HL(le,le[6],le[3]);Ee.detach(Ee.indexOf(d))}}const E=this._adjustIndex(g),k=this._lContainer;!function X1(c,d,g,b){const w=10+b,E=g.length;b>0&&(g[w-1][4]=d),b<E-10?(d[4]=g[w],Og(g,10+b,d)):(g.push(d),d[4]=null),d[3]=g;const k=d[17];null!==k&&g!==k&&function J1(c,d){const g=c[9];d[16]!==d[3][3][16]&&(c[2]=!0),null===g?c[9]=[d]:g.push(d)}(k,d);const M=d[19];null!==M&&M.insertView(c),d[2]|=64}(w,b,k,E);const M=iE(E,k),F=b[11],H=XS(F,k[7]);return null!==H&&function az(c,d,g,b,w,E){b[0]=w,b[6]=d,AC(c,b,g,1,w,E)}(w,k[6],F,b,H,M),d.attachToViewContainerRef(),Og(Qa(k),E,d),d}move(d,g){return this.insert(d,g)}indexOf(d){const g=Xe(this._lContainer);return null!==g?g.indexOf(d):-1}remove(d){const g=this._adjustIndex(d,-1),b=gI(this._lContainer,g);b&&(ep(Qa(this._lContainer),g),mI(b[1],b))}detach(d){const g=this._adjustIndex(d,-1),b=gI(this._lContainer,g);return b&&null!=ep(Qa(this._lContainer),g)?new XC(b):null}_adjustIndex(d,g=0){return d??this.length+g}};function Xe(c){return c[8]}function Qa(c){return c[8]||(c[8]=[])}function ex(c,d){let g;const b=d[c.index];if(_a(b))g=b;else{let w;if(8&c.type)w=Bs(b);else{const E=d[11];w=E.createComment("");const k=Oa(c,d);Wg(E,XS(E,k),w,function JS(c,d){return c.nextSibling(d)}(E,k),!1)}d[c.index]=g=RE(b,d,w,c),QC(d,g)}return new HL(g,c,d)}class fh{constructor(d){this.queryList=d,this.matches=null}clone(){return new fh(this.queryList)}setDirty(){this.queryList.setDirty()}}class mm{constructor(d=[]){this.queries=d}createEmbeddedView(d){const g=d.queries;if(null!==g){const b=null!==d.contentQueries?d.contentQueries[0]:g.length,w=[];for(let E=0;E<b;E++){const k=g.getByIndex(E);w.push(this.queries[k.indexInDeclarationView].clone())}return new mm(w)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let g=0;g<this.queries.length;g++)null!==ox(d,g).matches&&this.queries[g].setDirty()}}class hk{constructor(d,g,b=null){this.predicate=d,this.flags=g,this.read=b}}class uk{constructor(d=[]){this.queries=d}elementStart(d,g){for(let b=0;b<this.queries.length;b++)this.queries[b].elementStart(d,g)}elementEnd(d){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(d)}embeddedTView(d){let g=null;for(let b=0;b<this.length;b++){const w=null!==g?g.length:0,E=this.getByIndex(b).embeddedTView(d,w);E&&(E.indexInDeclarationView=b,null!==g?g.push(E):g=[E])}return null!==g?new uk(g):null}template(d,g){for(let b=0;b<this.queries.length;b++)this.queries[b].template(d,g)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class jh{constructor(d,g=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(d,g){this.isApplyingToNode(g)&&this.matchTNode(d,g)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,g){this.elementStart(d,g)}embeddedTView(d,g){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,g),new jh(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let b=d.parent;for(;null!==b&&8&b.type&&b.index!==g;)b=b.parent;return g===(null!==b?b.index:-1)}return this._appliesToNextNode}matchTNode(d,g){const b=this.metadata.predicate;if(Array.isArray(b))for(let w=0;w<b.length;w++){const E=b[w];this.matchTNodeWithReadOption(d,g,U9(g,E)),this.matchTNodeWithReadOption(d,g,Ag(g,d,E,!1,!1))}else b===pl?4&g.type&&this.matchTNodeWithReadOption(d,g,-1):this.matchTNodeWithReadOption(d,g,Ag(g,d,b,!1,!1))}matchTNodeWithReadOption(d,g,b){if(null!==b){const w=this.metadata.read;if(null!==w)if(w===Zs||w===JE||w===pl&&4&g.type)this.addMatch(g.index,-2);else{const E=Ag(g,d,w,!1,!1);null!==E&&this.addMatch(g.index,E)}else this.addMatch(g.index,b)}}addMatch(d,g){null===this.matches?this.matches=[d,g]:this.matches.push(d,g)}}function U9(c,d){const g=c.localNames;if(null!==g)for(let b=0;b<g.length;b+=2)if(g[b]===d)return g[b+1];return null}function Is(c,d,g,b){return-1===g?function ku(c,d){return 11&c.type?Zg(c,d):4&c.type?lk(c,d):null}(d,c):-2===g?function m3(c,d,g){return g===Zs?Zg(d,c):g===pl?lk(d,c):g===JE?ex(d,c):void 0}(c,d,b):Xc(c,c[1],g,d)}function gh(c,d,g,b){const w=d[19].queries[b];if(null===w.matches){const E=c.data,k=g.matches,M=[];for(let F=0;F<k.length;F+=2){const H=k[F];M.push(H<0?null:Is(d,E[H],k[F+1],g.metadata.read))}w.matches=M}return w.matches}function T0(c,d,g,b){const w=c.queries.getByIndex(g),E=w.matches;if(null!==E){const k=gh(c,d,w,g);for(let M=0;M<E.length;M+=2){const F=E[M];if(F>0)b.push(k[M/2]);else{const H=E[M+1],$=d[-F];for(let le=10;le<$.length;le++){const Ee=$[le];Ee[17]===Ee[3]&&T0(Ee[1],Ee,H,b)}if(null!==$[9]){const le=$[9];for(let Ee=0;Ee<le.length;Ee++){const Ge=le[Ee];T0(Ge[1],Ge,H,b)}}}}}return b}function ck(c){const d=vt(),g=ji(),b=nC();rC(b+1);const w=ox(g,b);if(c.dirty&&function eC(c){return 4==(4&c[2])}(d)===(2==(2&w.metadata.flags))){if(null===w.matches)c.reset([]);else{const E=w.crossesNgTemplate?T0(g,d,b,[]):gh(g,d,w,b);c.reset(E,FC),c.notifyOnChanges()}return!0}return!1}function Ay(c,d,g){const b=ji();b.firstCreatePass&&(sx(b,new hk(c,d,g),-1),2==(2&d)&&(b.staticViewQueries=!0)),rx(b,vt(),d)}function tx(c,d,g,b){const w=ji();if(w.firstCreatePass){const E=ls();sx(w,new hk(d,g,b),E.index),function dk(c,d){const g=c.contentQueries||(c.contentQueries=[]);d!==(g.length?g[g.length-1]:-1)&&g.push(c.queries.length-1,d)}(w,c),2==(2&g)&&(w.staticContentQueries=!0)}rx(w,vt(),g)}function ix(){return function nx(c,d){return c[19].queries[d].queryList}(vt(),nC())}function rx(c,d,g){const b=new x0(4==(4&g));nP(c,d,b,b.destroy),null===d[19]&&(d[19]=new mm),d[19].queries.push(new fh(b))}function sx(c,d,g){null===c.queries&&(c.queries=new uk),c.queries.track(new jh(d,g))}function ox(c,d){return c.queries.getByIndex(d)}function zL(c,d){return lk(c,d)}function Pf(...c){}const Ck=new vs("Application Initializer");let _0=(()=>{class c{constructor(g){this.appInits=g,this.resolve=Pf,this.reject=Pf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((b,w)=>{this.resolve=b,this.reject=w})}runInitializers(){if(this.initialized)return;const g=[],b=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let w=0;w<this.appInits.length;w++){const E=this.appInits[w]();if(RA(E))g.push(E);else if(IP(E)){const k=new Promise((M,F)=>{E.subscribe({complete:M,error:F})});g.push(k)}}Promise.all(g).then(()=>{b()}).catch(w=>{this.reject(w)}),0===g.length&&b(),this.initialized=!0}}return c.\u0275fac=function(g){return new(g||c)(Co(Ck,8))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const wk=new vs("AppId",{providedIn:"root",factory:function fx(){return`${gx()}${gx()}${gx()}`}});function gx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sk=new vs("Platform Initializer"),Ek=new vs("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),mx=new vs("appBootstrapListener");let lF=(()=>{class c{log(g){console.log(g)}warn(g){console.warn(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const My=new vs("LocaleId",{providedIn:"root",factory:()=>Ng(My,fi.Optional|fi.SkipSelf)||function hF(){return typeof $localize<"u"&&$localize.locale||qe}()}),xk=new vs("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vx{constructor(d,g){this.ngModuleFactory=d,this.componentFactories=g}}let T3=(()=>{class c{compileModuleSync(g){return new nk(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const b=this.compileModuleSync(g),E=Ga(Pt(g).declarations).reduce((k,M)=>{const F=q(M);return F&&k.push(new dy(F)),k},[]);return new vx(b,E)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const $9=(()=>Promise.resolve(0))();function Tk(c){typeof Zone>"u"?$9.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class Mu{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:b=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gd(!1),this.onMicrotaskEmpty=new gd(!1),this.onStable=new gd(!1),this.onError=new gd(!1),typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();const w=this;if(w._nesting=0,w._outer=w._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const E=Zone.AsyncStackTaggingZoneSpec;w._inner=w._inner.fork(new E("Angular"))}Zone.TaskTrackingZoneSpec&&(w._inner=w._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(w._inner=w._inner.fork(Zone.longStackTraceZoneSpec)),w.shouldCoalesceEventChangeDetection=!b&&g,w.shouldCoalesceRunChangeDetection=b,w.lastRequestAnimationFrameId=-1,w.nativeRequestAnimationFrame=function A3(){let c=Mi.requestAnimationFrame,d=Mi.cancelAnimationFrame;if(typeof Zone<"u"&&c&&d){const g=c[Zone.__symbol__("OriginalDelegate")];g&&(c=g);const b=d[Zone.__symbol__("OriginalDelegate")];b&&(d=b)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function bx(c){const d=()=>{!function bm(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(Mi,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,Cm(c),c.isCheckStableRunning=!0,Ou(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),Cm(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,b,w,E,k,M)=>{try{return Cx(c),g.invokeTask(w,E,k,M)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===E.type||c.shouldCoalesceRunChangeDetection)&&d(),M0(c)}},onInvoke:(g,b,w,E,k,M,F)=>{try{return Cx(c),g.invoke(w,E,k,M,F)}finally{c.shouldCoalesceRunChangeDetection&&d(),M0(c)}},onHasTask:(g,b,w,E)=>{g.hasTask(w,E),b===w&&("microTask"==E.change?(c._hasPendingMicrotasks=E.microTask,Cm(c),Ou(c)):"macroTask"==E.change&&(c.hasPendingMacrotasks=E.macroTask))},onHandleError:(g,b,w,E)=>(g.handleError(w,E),c.runOutsideAngular(()=>c.onError.emit(E)),!1)})}(w)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mu.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(Mu.isInAngularZone())throw new Ct(909,!1)}run(d,g,b){return this._inner.run(d,g,b)}runTask(d,g,b,w){const E=this._inner,k=E.scheduleEventTask("NgZoneEvent: "+w,d,Y9,Pf,Pf);try{return E.runTask(k,g,b)}finally{E.cancelTask(k)}}runGuarded(d,g,b){return this._inner.runGuarded(d,g,b)}runOutsideAngular(d){return this._outer.run(d)}}const Y9={};function Ou(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function Cm(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function Cx(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function M0(c){c._nesting--,Ou(c)}class Lo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gd,this.onMicrotaskEmpty=new gd,this.onStable=new gd,this.onError=new gd}run(d,g,b){return d.apply(g,b)}runGuarded(d,g,b){return d.apply(g,b)}runOutsideAngular(d){return d()}runTask(d,g,b,w){return d.apply(g,b)}}const vd=new vs(""),yd=new vs("");let O0,k3=(()=>{class c{constructor(g,b,w){this._ngZone=g,this.registry=b,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,O0||(function gF(c){O0=c}(w),w.addToWindow(b)),this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mu.assertNotInAngularZone(),Tk(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tk(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(b=>!b.updateCb||!b.updateCb(g)||(clearTimeout(b.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,b,w){let E=-1;b&&b>0&&(E=setTimeout(()=>{this._callbacks=this._callbacks.filter(k=>k.timeoutId!==E),g(this._didWork,this.getPendingTasks())},b)),this._callbacks.push({doneCb:g,timeoutId:E,updateCb:w})}whenStable(g,b,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,b,w),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(g){this.registry.registerApplication(g,this)}unregisterApplication(g){this.registry.unregisterApplication(g)}findProviders(g,b,w){return[]}}return c.\u0275fac=function(g){return new(g||c)(Co(Mu),Co(Dk),Co(yd))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac}),c})(),Dk=(()=>{class c{constructor(){this._applications=new Map}registerApplication(g,b){this._applications.set(g,b)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,b=!0){return O0?.findTestabilityInTree(this,g,b)??null}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),bd=null;const P0=new vs("AllowMultipleToken"),Oy=new vs("PlatformDestroyListeners");class Ak{constructor(d,g){this.name=d,this.token=g}}function wx(c,d,g=[]){const b=`Platform: ${d}`,w=new vs(b);return(E=[])=>{let k=Sx();if(!k||k.injector.get(P0,!1)){const M=[...g,...E,{provide:w,useValue:!0}];c?c(M):function Ep(c){if(bd&&!bd.get(P0,!1))throw new Ct(400,!1);bd=c;const d=c.get(Rk);(function mF(c){const d=c.get(Sk,null);d&&d.forEach(g=>g())})(c)}(function kk(c=[],d){return ad.create({name:d,providers:[{provide:NI,useValue:"platform"},{provide:Oy,useValue:new Set([()=>bd=null])},...c]})}(M,b))}return function vF(c){const d=Sx();if(!d)throw new Ct(401,!1);return d}()}}function Sx(){return bd?.get(Rk)??null}let Rk=(()=>{class c{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,b){const w=function Mk(c,d){let g;return g="noop"===c?new Lo:("zone.js"===c?void 0:c)||new Mu(d),g}(b?.ngZone,function _k(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(b)),E=[{provide:Mu,useValue:w}];return w.run(()=>{const k=ad.create({providers:E,parent:this.injector,name:g.moduleType.name}),M=g.create(k),F=M.injector.get(BC,null);if(!F)throw new Ct(402,!1);return w.runOutsideAngular(()=>{const H=w.onError.subscribe({next:$=>{F.handleError($)}});M.onDestroy(()=>{Fy(this._modules,M),H.unsubscribe()})}),function Ok(c,d,g){try{const b=g();return RA(b)?b.catch(w=>{throw d.runOutsideAngular(()=>c.handleError(w)),w}):b}catch(b){throw d.runOutsideAngular(()=>c.handleError(b)),b}}(F,w,()=>{const H=M.injector.get(_0);return H.runInitializers(),H.donePromise.then(()=>(function Ht(c){vn(c,"Expected localeId to be defined"),"string"==typeof c&&(Nj=c.toLowerCase().replace(/_/g,"-"))}(M.injector.get(My,qe)||qe),this._moduleDoBootstrap(M),M))})})}bootstrapModule(g,b=[]){const w=Ex({},b);return function Ik(c,d,g){const b=new nk(g);return Promise.resolve(b)}(0,0,g).then(E=>this.bootstrapModuleFactory(E,w))}_moduleDoBootstrap(g){const b=g.injector.get(Ly);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(w=>b.bootstrap(w));else{if(!g.instance.ngDoBootstrap)throw new Ct(403,!1);g.instance.ngDoBootstrap(b)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ct(404,!1);this._modules.slice().forEach(b=>b.destroy()),this._destroyListeners.forEach(b=>b());const g=this._injector.get(Oy,null);g&&(g.forEach(b=>b()),g.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(g){return new(g||c)(Co(ad))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function Ex(c,d){return Array.isArray(d)?d.reduce(Ex,c):{...c,...d}}let Ly=(()=>{class c{constructor(g,b,w){this._zone=g,this._injector=b,this._exceptionHandler=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new ee.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),k=new ee.y(M=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{Mu.assertNotInAngularZone(),Tk(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const H=this._zone.onUnstable.subscribe(()=>{Mu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{F.unsubscribe(),H.unsubscribe()}});this.isStable=(0,Ue.T)(E,k.pipe((0,lt.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(g,b){const w=g instanceof cE;if(!this._injector.get(_0).done)throw!w&&Je(g),new Ct(405,false);let k;k=w?g:this._injector.get(Xv).resolveComponentFactory(g),this.componentTypes.push(k.componentType);const M=function Uh(c){return c.isBoundToModule}(k)?void 0:this._injector.get(fm),H=k.create(ad.NULL,[],b||k.selector,M),$=H.location.nativeElement,le=H.injector.get(vd,null);return le?.registerApplication($),H.onDestroy(()=>{this.detachView(H.hostView),Fy(this.components,H),le?.unregisterApplication($)}),this._loadComponent(H),H}tick(){if(this._runningTick)throw new Ct(101,!1);try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const b=g;this._views.push(b),b.attachToAppRef(this)}detachView(g){const b=g;Fy(this._views,b),b.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(mx,[]).concat(this._bootstrapListeners).forEach(w=>w(g))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(g=>g()),this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(g){return this._destroyListeners.push(g),()=>Fy(this._destroyListeners,g)}destroy(){if(this._destroyed)throw new Ct(406,!1);const g=this._injector;g.destroy&&!g.destroyed&&g.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(g){return new(g||c)(Co(Mu),Co(Qv),Co(BC))},c.\u0275prov=Wn({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Fy(c,d){const g=c.indexOf(d);g>-1&&c.splice(g,1)}let L0=!0,Pk=!1;function yF(){return Pk=!0,L0}function bF(){if(Pk)throw new Error("Cannot enable prod mode after platform setup.");L0=!1}let Al=(()=>{class c{}return c.__NG_ELEMENT_ID__=Lk,c})();function Lk(c){return function Lf(c,d,g){if(Uc(c)&&!g){const b=Qn(c.index,d);return new XC(b,b)}return 47&c.type?new XC(d[16],d):null}(ls(),vt(),16==(16&c))}class Rx{constructor(){}supports(d){return JC(d)}create(d){return new Bf(d)}}const Nk=(c,d)=>d;class Bf{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||Nk}forEachItem(d){let g;for(g=this._itHead;null!==g;g=g._next)d(g)}forEachOperation(d){let g=this._itHead,b=this._removalsHead,w=0,E=null;for(;g||b;){const k=!b||g&&g.currentIndex<Tp(b,w,E)?g:b,M=Tp(k,w,E),F=k.currentIndex;if(k===b)w--,b=b._nextRemoved;else if(g=g._next,null==k.previousIndex)w++;else{E||(E=[]);const H=M-w,$=F-w;if(H!=$){for(let Ee=0;Ee<H;Ee++){const Ge=Ee<E.length?E[Ee]:E[Ee]=0,It=Ge+Ee;$<=It&&It<H&&(E[Ee]=Ge+1)}E[k.previousIndex]=$-H}}M!==F&&d(k,M,F)}}forEachPreviousItem(d){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)d(g)}forEachAddedItem(d){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)d(g)}forEachMovedItem(d){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)d(g)}forEachRemovedItem(d){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)d(g)}forEachIdentityChange(d){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)d(g)}diff(d){if(null==d&&(d=[]),!JC(d))throw new Ct(900,!1);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let w,E,k,g=this._itHead,b=!1;if(Array.isArray(d)){this.length=d.length;for(let M=0;M<this.length;M++)E=d[M],k=this._trackByFn(M,E),null!==g&&Object.is(g.trackById,k)?(b&&(g=this._verifyReinsertion(g,E,k,M)),Object.is(g.item,E)||this._addIdentityChange(g,E)):(g=this._mismatch(g,E,k,M),b=!0),g=g._next}else w=0,function SP(c,d){if(Array.isArray(c))for(let g=0;g<c.length;g++)d(c[g]);else{const g=c[om()]();let b;for(;!(b=g.next()).done;)d(b.value)}}(d,M=>{k=this._trackByFn(w,M),null!==g&&Object.is(g.trackById,k)?(b&&(g=this._verifyReinsertion(g,M,k,w)),Object.is(g.item,M)||this._addIdentityChange(g,M)):(g=this._mismatch(g,M,k,w),b=!0),g=g._next,w++}),this.length=w;return this._truncate(g),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,g,b,w){let E;return null===d?E=this._itTail:(E=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null))?(Object.is(d.item,g)||this._addIdentityChange(d,g),this._reinsertAfter(d,E,w)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(b,w))?(Object.is(d.item,g)||this._addIdentityChange(d,g),this._moveAfter(d,E,w)):d=this._addAfter(new _x(g,b),E,w),d}_verifyReinsertion(d,g,b,w){let E=null===this._unlinkedRecords?null:this._unlinkedRecords.get(b,null);return null!==E?d=this._reinsertAfter(E,d._prev,w):d.currentIndex!=w&&(d.currentIndex=w,this._addToMoves(d,w)),d}_truncate(d){for(;null!==d;){const g=d._next;this._addToRemovals(this._unlink(d)),d=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,g,b){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const w=d._prevRemoved,E=d._nextRemoved;return null===w?this._removalsHead=E:w._nextRemoved=E,null===E?this._removalsTail=w:E._prevRemoved=w,this._insertAfter(d,g,b),this._addToMoves(d,b),d}_moveAfter(d,g,b){return this._unlink(d),this._insertAfter(d,g,b),this._addToMoves(d,b),d}_addAfter(d,g,b){return this._insertAfter(d,g,b),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,g,b){const w=null===g?this._itHead:g._next;return d._next=w,d._prev=g,null===w?this._itTail=d:w._prev=d,null===g?this._itHead=d:g._next=d,null===this._linkedRecords&&(this._linkedRecords=new Mx),this._linkedRecords.put(d),d.currentIndex=b,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const g=d._prev,b=d._next;return null===g?this._itHead=b:g._next=b,null===b?this._itTail=g:b._prev=g,d}_addToMoves(d,g){return d.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Mx),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,g){return d.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class _x{constructor(d,g){this.item=d,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class EF{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,g){let b;for(b=this._head;null!==b;b=b._nextDup)if((null===g||g<=b.currentIndex)&&Object.is(b.trackById,d))return b;return null}remove(d){const g=d._prevDup,b=d._nextDup;return null===g?this._head=b:g._nextDup=b,null===b?this._tail=g:b._prevDup=g,null===this._head}}class Mx{constructor(){this.map=new Map}put(d){const g=d.trackById;let b=this.map.get(g);b||(b=new EF,this.map.set(g,b)),b.add(d)}get(d,g){const w=this.map.get(d);return w?w.get(d,g):null}remove(d){const g=d.trackById;return this.map.get(g).remove(d)&&this.map.delete(g),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Tp(c,d,g){const b=c.previousIndex;if(null===b)return b;let w=0;return g&&b<g.length&&(w=g[b]),b+d+w}class xF{constructor(){}supports(d){return d instanceof Map||e0(d)}create(){return new P3}}class P3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let g;for(g=this._mapHead;null!==g;g=g._next)d(g)}forEachPreviousItem(d){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)d(g)}forEachChangedItem(d){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)d(g)}forEachAddedItem(d){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)d(g)}forEachRemovedItem(d){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)d(g)}diff(d){if(d){if(!(d instanceof Map||e0(d)))throw new Ct(900,!1)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(d,(b,w)=>{if(g&&g.key===w)this._maybeAddToChanges(g,b),this._appendAfter=g,g=g._next;else{const E=this._getOrCreateRecordForKey(w,b);g=this._insertBeforeOrAppend(g,E)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let b=g;null!==b;b=b._nextRemoved)b===this._mapHead&&(this._mapHead=null),this._records.delete(b.key),b._nextRemoved=b._next,b.previousValue=b.currentValue,b.currentValue=null,b._prev=null,b._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,g){if(d){const b=d._prev;return g._next=d,g._prev=b,d._prev=g,b&&(b._next=g),d===this._mapHead&&(this._mapHead=g),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(d,g){if(this._records.has(d)){const w=this._records.get(d);this._maybeAddToChanges(w,g);const E=w._prev,k=w._next;return E&&(E._next=k),k&&(k._prev=E),w._next=null,w._prev=null,w}const b=new TF(d);return this._records.set(d,b),b.currentValue=g,this._addToAdditions(b),b}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,g){Object.is(g,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=g,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,g){d instanceof Map?d.forEach(g):Object.keys(d).forEach(b=>g(d[b],b))}}class TF{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bk(){return new Ox([new Rx])}let Ox=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(null!=b){const w=b.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||Bk()),deps:[[c,new rd,new nd]]}}find(g){const b=this.factories.find(w=>w.supports(g));if(null!=b)return b;throw new Ct(901,!1)}}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:Bk}),c})();function B0(){return new V0([new xF])}let V0=(()=>{class c{constructor(g){this.factories=g}static create(g,b){if(b){const w=b.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:b=>c.create(g,b||B0()),deps:[[c,new rd,new nd]]}}find(g){const b=this.factories.find(w=>w.supports(g));if(b)return b;throw new Ct(901,!1)}}return c.\u0275prov=Wn({token:c,providedIn:"root",factory:B0}),c})();const Vk=wx(null,"core",[]);let Hk=(()=>{class c{constructor(g){}}return c.\u0275fac=function(g){return new(g||c)(Co(Ly))},c.\u0275mod=Rn({type:c}),c.\u0275inj=Yi({}),c})();function zk(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}},3942:(Hi,_t,te)=>{te.d(_t,{Z:()=>Ct});var v=te(2090),ue=te(4859),ee=te(9681),Ue=te(1877);class lt{constructor(ft,it){this._delegate=ft,this.firebase=it,(0,ee._addComponent)(ft,new ue.wA("app-compat",()=>this,"PUBLIC")),this.container=ft.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ft){this._delegate.automaticDataCollectionEnabled=ft}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ft=>{this._delegate.checkDestroyed(),ft()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ee.deleteApp)(this._delegate)))}_getService(ft,it=ee._DEFAULT_ENTRY_NAME){var Si;this._delegate.checkDestroyed();const oi=this._delegate.container.getProvider(ft);return!oi.isInitialized()&&"EXPLICIT"===(null===(Si=oi.getComponent())||void 0===Si?void 0:Si.instantiationMode)&&oi.initialize(),oi.getImmediate({identifier:it})}_removeServiceInstance(ft,it=ee._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ft).clearInstance(it)}_addComponent(ft){(0,ee._addComponent)(this._delegate,ft)}_addOrOverwriteComponent(ft){(0,ee._addOrOverwriteComponent)(this._delegate,ft)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const tt=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Ce=function ct(){const li=function ot(li){const ft={},it={__esModule:!0,initializeApp:function Ft(ze,Qe={}){const gt=ee.initializeApp(ze,Qe);if((0,v.r3)(ft,gt.name))return ft[gt.name];const Fe=new li(gt,it);return ft[gt.name]=Fe,Fe},app:oi,registerVersion:ee.registerVersion,setLogLevel:ee.setLogLevel,onLog:ee.onLog,apps:null,SDK_VERSION:ee.SDK_VERSION,INTERNAL:{registerComponent:function yt(ze){const Qe=ze.name,gt=Qe.replace("-compat","");if(ee._registerComponent(ze)&&"PUBLIC"===ze.type){const Fe=(Be=oi())=>{if("function"!=typeof Be[gt])throw tt.create("invalid-app-argument",{appName:Qe});return Be[gt]()};void 0!==ze.serviceProps&&(0,v.ZB)(Fe,ze.serviceProps),it[gt]=Fe,li.prototype[gt]=function(...Be){return this._getService.bind(this,Qe).apply(this,ze.multipleInstances?Be:[])}}return"PUBLIC"===ze.type?it[gt]:null},removeApp:function Si(ze){delete ft[ze]},useAsService:function ti(ze,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:ee}};function oi(ze){if(!(0,v.r3)(ft,ze=ze||ee._DEFAULT_ENTRY_NAME))throw tt.create("no-app",{appName:ze});return ft[ze]}return it.default=it,Object.defineProperty(it,"apps",{get:function Mt(){return Object.keys(ft).map(ze=>ft[ze])}}),oi.App=li,it}(lt);return li.INTERNAL=Object.assign(Object.assign({},li.INTERNAL),{createFirebaseNamespace:ct,extendNamespace:function ft(it){(0,v.ZB)(li,it)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),li}(),be=new Ue.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){be.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const li=self.firebase.SDK_VERSION;li&&li.indexOf("LITE")>=0&&be.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ct=Ce;!function St(li){(0,ee.registerVersion)("@firebase/app-compat","0.2.0",li)}()},9681:(Hi,_t,te)=>{te.r(_t),te.d(_t,{FirebaseError:()=>Ue.ZR,SDK_VERSION:()=>da,_DEFAULT_ENTRY_NAME:()=>vn,_addComponent:()=>ar,_addOrOverwriteComponent:()=>Wn,_apps:()=>pr,_clearComponents:()=>Aa,_components:()=>gs,_getProvider:()=>Yi,_registerComponent:()=>En,_removeServiceInstance:()=>Vr,deleteApp:()=>ka,getApp:()=>Es,getApps:()=>Ao,initializeApp:()=>Ns,onLog:()=>ms,registerVersion:()=>Er,setLogLevel:()=>br});var v=te(5861),ue=te(4859),ee=te(1877),Ue=te(2090),lt=te(8766);class pt{constructor(Et){this.container=Et}getPlatformInfoString(){return this.container.getProviders().map(mi=>{if(function tt(hi){return"VERSION"===hi.getComponent()?.type}(mi)){const Zi=mi.getImmediate();return`${Zi.library}/${Zi.version}`}return null}).filter(mi=>mi).join(" ")}}const ot="@firebase/app",Ce=new ee.Yd("@firebase/app"),vn="[DEFAULT]",Xt={[ot]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pr=new Map,gs=new Map;function ar(hi,Et){try{hi.container.addComponent(Et)}catch(mi){Ce.debug(`Component ${Et.name} failed to register with FirebaseApp ${hi.name}`,mi)}}function Wn(hi,Et){hi.container.addOrOverwriteComponent(Et)}function En(hi){const Et=hi.name;if(gs.has(Et))return Ce.debug(`There were multiple attempts to register component ${Et}.`),!1;gs.set(Et,hi);for(const mi of pr.values())ar(mi,hi);return!0}function Yi(hi,Et){const mi=hi.container.getProvider("heartbeat").getImmediate({optional:!0});return mi&&mi.triggerHeartbeat(),hi.container.getProvider(Et)}function Vr(hi,Et,mi=vn){Yi(hi,Et).clearInstance(mi)}function Aa(){gs.clear()}const os=new Ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gs{constructor(Et,mi,Zi){this._isDeleted=!1,this._options=Object.assign({},Et),this._config=Object.assign({},mi),this._name=mi.name,this._automaticDataCollectionEnabled=mi.automaticDataCollectionEnabled,this._container=Zi,this.container.addComponent(new ue.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Et){this.checkDestroyed(),this._automaticDataCollectionEnabled=Et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Et){this._isDeleted=Et}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}const da="9.15.0";function Ns(hi,Et={}){let mi=hi;"object"!=typeof Et&&(Et={name:Et});const Zi=Object.assign({name:vn,automaticDataCollectionEnabled:!1},Et),cn=Zi.name;if("string"!=typeof cn||!cn)throw os.create("bad-app-name",{appName:String(cn)});if(mi||(mi=(0,Ue.aH)()),!mi)throw os.create("no-options");const Rn=pr.get(cn);if(Rn){if((0,Ue.vZ)(mi,Rn.options)&&(0,Ue.vZ)(Zi,Rn.config))return Rn;throw os.create("duplicate-app",{appName:cn})}const ye=new ue.H0(cn);for(const J of gs.values())ye.addComponent(J);const pe=new Gs(mi,Zi,ye);return pr.set(cn,pe),pe}function Es(hi=vn){const Et=pr.get(hi);if(!Et&&hi===vn)return Ns();if(!Et)throw os.create("no-app",{appName:hi});return Et}function Ao(){return Array.from(pr.values())}function ka(hi){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(hi){const Et=hi.name;pr.has(Et)&&(pr.delete(Et),yield Promise.all(hi.container.getProviders().map(mi=>mi.delete())),hi.isDeleted=!0)})).apply(this,arguments)}function Er(hi,Et,mi){var Zi;let cn=null!==(Zi=Xt[hi])&&void 0!==Zi?Zi:hi;mi&&(cn+=`-${mi}`);const Rn=cn.match(/\s|\//),ye=Et.match(/\s|\//);if(Rn||ye){const pe=[`Unable to register library "${cn}" with version "${Et}":`];return Rn&&pe.push(`library name "${cn}" contains illegal characters (whitespace or "/")`),Rn&&ye&&pe.push("and"),ye&&pe.push(`version name "${Et}" contains illegal characters (whitespace or "/")`),void Ce.warn(pe.join(" "))}En(new ue.wA(`${cn}-version`,()=>({library:cn,version:Et}),"VERSION"))}function ms(hi,Et){if(null!==hi&&"function"!=typeof hi)throw os.create("invalid-log-argument");(0,ee.Am)(hi,Et)}function br(hi){(0,ee.Ub)(hi)}const kr="firebase-heartbeat-store";let Hr=null;function Zn(){return Hr||(Hr=(0,lt.X3)("firebase-heartbeat-database",1,{upgrade:(hi,Et)=>{0===Et&&hi.createObjectStore(kr)}}).catch(hi=>{throw os.create("idb-open",{originalErrorMessage:hi.message})})),Hr}function Ri(){return(Ri=(0,v.Z)(function*(hi){try{return(yield Zn()).transaction(kr).objectStore(kr).get(Ks(hi))}catch(Et){if(Et instanceof Ue.ZR)Ce.warn(Et.message);else{const mi=os.create("idb-get",{originalErrorMessage:Et?.message});Ce.warn(mi.message)}}})).apply(this,arguments)}function Mi(hi,Et){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,v.Z)(function*(hi,Et){try{const Zi=(yield Zn()).transaction(kr,"readwrite");return yield Zi.objectStore(kr).put(Et,Ks(hi)),Zi.done}catch(mi){if(mi instanceof Ue.ZR)Ce.warn(mi.message);else{const Zi=os.create("idb-set",{originalErrorMessage:mi?.message});Ce.warn(Zi.message)}}})).apply(this,arguments)}function Ks(hi){return`${hi.name}!${hi.options.appId}`}class ro{constructor(Et){this.container=Et,this._heartbeatsCache=null;const mi=this.container.getProvider("app").getImmediate();this._storage=new Dn(mi),this._heartbeatsCachePromise=this._storage.read().then(Zi=>(this._heartbeatsCache=Zi,Zi))}triggerHeartbeat(){var Et=this;return(0,v.Z)(function*(){const Zi=Et.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),cn=mn();if(null===Et._heartbeatsCache&&(Et._heartbeatsCache=yield Et._heartbeatsCachePromise),Et._heartbeatsCache.lastSentHeartbeatDate!==cn&&!Et._heartbeatsCache.heartbeats.some(Rn=>Rn.date===cn))return Et._heartbeatsCache.heartbeats.push({date:cn,agent:Zi}),Et._heartbeatsCache.heartbeats=Et._heartbeatsCache.heartbeats.filter(Rn=>{const ye=new Date(Rn.date).valueOf();return Date.now()-ye<=2592e6}),Et._storage.overwrite(Et._heartbeatsCache)})()}getHeartbeatsHeader(){var Et=this;return(0,v.Z)(function*(){if(null===Et._heartbeatsCache&&(yield Et._heartbeatsCachePromise),null===Et._heartbeatsCache||0===Et._heartbeatsCache.heartbeats.length)return"";const mi=mn(),{heartbeatsToSend:Zi,unsentEntries:cn}=function bo(hi,Et=1024){const mi=[];let Zi=hi.slice();for(const cn of hi){const Rn=mi.find(ye=>ye.agent===cn.agent);if(Rn){if(Rn.dates.push(cn.date),$s(mi)>Et){Rn.dates.pop();break}}else if(mi.push({agent:cn.agent,dates:[cn.date]}),$s(mi)>Et){mi.pop();break}Zi=Zi.slice(1)}return{heartbeatsToSend:mi,unsentEntries:Zi}}(Et._heartbeatsCache.heartbeats),Rn=(0,Ue.L)(JSON.stringify({version:2,heartbeats:Zi}));return Et._heartbeatsCache.lastSentHeartbeatDate=mi,cn.length>0?(Et._heartbeatsCache.heartbeats=cn,yield Et._storage.overwrite(Et._heartbeatsCache)):(Et._heartbeatsCache.heartbeats=[],Et._storage.overwrite(Et._heartbeatsCache)),Rn})()}}function mn(){return(new Date).toISOString().substring(0,10)}class Dn{constructor(Et){this.app=Et,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,v.Z)(function*(){return!!(0,Ue.hl)()&&(0,Ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Et=this;return(0,v.Z)(function*(){return(yield Et._canUseIndexedDBPromise)&&(yield function _i(hi){return Ri.apply(this,arguments)}(Et.app))||{heartbeats:[]}})()}overwrite(Et){var mi=this;return(0,v.Z)(function*(){var Zi;if(yield mi._canUseIndexedDBPromise){const Rn=yield mi.read();return Mi(mi.app,{lastSentHeartbeatDate:null!==(Zi=Et.lastSentHeartbeatDate)&&void 0!==Zi?Zi:Rn.lastSentHeartbeatDate,heartbeats:Et.heartbeats})}})()}add(Et){var mi=this;return(0,v.Z)(function*(){var Zi;if(yield mi._canUseIndexedDBPromise){const Rn=yield mi.read();return Mi(mi.app,{lastSentHeartbeatDate:null!==(Zi=Et.lastSentHeartbeatDate)&&void 0!==Zi?Zi:Rn.lastSentHeartbeatDate,heartbeats:[...Rn.heartbeats,...Et.heartbeats]})}})()}}function $s(hi){return(0,Ue.L)(JSON.stringify({version:2,heartbeats:hi})).length}!function ts(hi){En(new ue.wA("platform-logger",Et=>new pt(Et),"PRIVATE")),En(new ue.wA("heartbeat",Et=>new ro(Et),"PRIVATE")),Er(ot,"0.9.0",hi),Er(ot,"0.9.0","esm2017"),Er("fire-js","")}("")},4859:(Hi,_t,te)=>{te.d(_t,{H0:()=>ot,wA:()=>ee,zt:()=>lt});var v=te(5861),ue=te(2090);class ee{constructor(Ce,be,Le){this.name=Ce,this.instanceFactory=be,this.type=Le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Ce){return this.instantiationMode=Ce,this}setMultipleInstances(Ce){return this.multipleInstances=Ce,this}setServiceProps(Ce){return this.serviceProps=Ce,this}setInstanceCreatedCallback(Ce){return this.onInstanceCreated=Ce,this}}const Ue="[DEFAULT]";class lt{constructor(Ce,be){this.name=Ce,this.container=be,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Ce){const be=this.normalizeInstanceIdentifier(Ce);if(!this.instancesDeferred.has(be)){const Le=new ue.BH;if(this.instancesDeferred.set(be,Le),this.isInitialized(be)||this.shouldAutoInitialize())try{const Ot=this.getOrInitializeService({instanceIdentifier:be});Ot&&Le.resolve(Ot)}catch{}}return this.instancesDeferred.get(be).promise}getImmediate(Ce){var be;const Le=this.normalizeInstanceIdentifier(Ce?.identifier),Ot=null!==(be=Ce?.optional)&&void 0!==be&&be;if(!this.isInitialized(Le)&&!this.shouldAutoInitialize()){if(Ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Le})}catch(St){if(Ot)return null;throw St}}getComponent(){return this.component}setComponent(Ce){if(Ce.name!==this.name)throw Error(`Mismatching Component ${Ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Ce,this.shouldAutoInitialize()){if(function tt(ct){return"EAGER"===ct.instantiationMode}(Ce))try{this.getOrInitializeService({instanceIdentifier:Ue})}catch{}for(const[be,Le]of this.instancesDeferred.entries()){const Ot=this.normalizeInstanceIdentifier(be);try{const St=this.getOrInitializeService({instanceIdentifier:Ot});Le.resolve(St)}catch{}}}}clearInstance(Ce=Ue){this.instancesDeferred.delete(Ce),this.instancesOptions.delete(Ce),this.instances.delete(Ce)}delete(){var Ce=this;return(0,v.Z)(function*(){const be=Array.from(Ce.instances.values());yield Promise.all([...be.filter(Le=>"INTERNAL"in Le).map(Le=>Le.INTERNAL.delete()),...be.filter(Le=>"_delete"in Le).map(Le=>Le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Ce=Ue){return this.instances.has(Ce)}getOptions(Ce=Ue){return this.instancesOptions.get(Ce)||{}}initialize(Ce={}){const{options:be={}}=Ce,Le=this.normalizeInstanceIdentifier(Ce.instanceIdentifier);if(this.isInitialized(Le))throw Error(`${this.name}(${Le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ot=this.getOrInitializeService({instanceIdentifier:Le,options:be});for(const[St,Ct]of this.instancesDeferred.entries())Le===this.normalizeInstanceIdentifier(St)&&Ct.resolve(Ot);return Ot}onInit(Ce,be){var Le;const Ot=this.normalizeInstanceIdentifier(be),St=null!==(Le=this.onInitCallbacks.get(Ot))&&void 0!==Le?Le:new Set;St.add(Ce),this.onInitCallbacks.set(Ot,St);const Ct=this.instances.get(Ot);return Ct&&Ce(Ct,Ot),()=>{St.delete(Ce)}}invokeOnInitCallbacks(Ce,be){const Le=this.onInitCallbacks.get(be);if(Le)for(const Ot of Le)try{Ot(Ce,be)}catch{}}getOrInitializeService({instanceIdentifier:Ce,options:be={}}){let Le=this.instances.get(Ce);if(!Le&&this.component&&(Le=this.component.instanceFactory(this.container,{instanceIdentifier:(ct=Ce,ct===Ue?void 0:ct),options:be}),this.instances.set(Ce,Le),this.instancesOptions.set(Ce,be),this.invokeOnInitCallbacks(Le,Ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Ce,Le)}catch{}var ct;return Le||null}normalizeInstanceIdentifier(Ce=Ue){return this.component?this.component.multipleInstances?Ce:Ue:Ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ot{constructor(Ce){this.name=Ce,this.providers=new Map}addComponent(Ce){const be=this.getProvider(Ce.name);if(be.isComponentSet())throw new Error(`Component ${Ce.name} has already been registered with ${this.name}`);be.setComponent(Ce)}addOrOverwriteComponent(Ce){this.getProvider(Ce.name).isComponentSet()&&this.providers.delete(Ce.name),this.addComponent(Ce)}getProvider(Ce){if(this.providers.has(Ce))return this.providers.get(Ce);const be=new lt(Ce,this);return this.providers.set(Ce,be),be}getProviders(){return Array.from(this.providers.values())}}},2833:(Hi,_t,te)=>{var v=te(5861),ue=te(9681),ee=te(4859),Ue=te(2090),lt=te(8766);const pt="@firebase/installations",ct="w:0.6.0",Ce="FIS_v2",li=new Ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ft(He){return He instanceof Ue.ZR&&He.code.includes("request-failed")}function it({projectId:He}){return`https://firebaseinstallations.googleapis.com/v1/projects/${He}/installations`}function Si(He){return{token:He.token,requestStatus:2,expiresIn:Qe(He.expiresIn),creationTime:Date.now()}}function oi(He,mt){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,v.Z)(function*(He,mt){const Oi=(yield mt.json()).error;return li.create("request-failed",{requestName:He,serverCode:Oi.code,serverMessage:Oi.message,serverStatus:Oi.status})})).apply(this,arguments)}function Mt({apiKey:He}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":He})}function yt(He,{refreshToken:mt}){const Ut=Mt(He);return Ut.append("Authorization",function gt(He){return`${Ce} ${He}`}(mt)),Ut}function ti(He){return ze.apply(this,arguments)}function ze(){return(ze=(0,v.Z)(function*(He){const mt=yield He();return mt.status>=500&&mt.status<600?He():mt})).apply(this,arguments)}function Qe(He){return Number(He.replace("s","000"))}function Fe(He,mt){return Be.apply(this,arguments)}function Be(){return(Be=(0,v.Z)(function*({appConfig:He,heartbeatServiceProvider:mt},{fid:Ut}){const Oi=it(He),kn=Mt(He),lr=mt.getImmediate({optional:!0});if(lr){const pa=yield lr.getHeartbeatsHeader();pa&&kn.append("x-firebase-client",pa)}const Kr={method:"POST",headers:kn,body:JSON.stringify({fid:Ut,authVersion:Ce,appId:He.appId,sdkVersion:ct})},Ra=yield ti(()=>fetch(Oi,Kr));if(Ra.ok){const pa=yield Ra.json();return{fid:pa.fid||Ut,registrationStatus:2,refreshToken:pa.refreshToken,authToken:Si(pa.authToken)}}throw yield oi("Create Installation",Ra)})).apply(this,arguments)}function nt(He){return new Promise(mt=>{setTimeout(mt,He)})}const qt=/^[cdef][\w-]{21}$/;function ki(){try{const He=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(He),He[0]=112+He[0]%16;const Ut=function Un(He){return function Ke(He){return btoa(String.fromCharCode(...He)).replace(/\+/g,"-").replace(/\//g,"_")}(He).substr(0,22)}(He);return qt.test(Ut)?Ut:""}catch{return""}}function vn(He){return`${He.appName}!${He.appId}`}const Xt=new Map;function pr(He,mt){const Ut=vn(He);Wn(Ut,mt),function En(He,mt){const Ut=function Vr(){return!Yi&&"BroadcastChannel"in self&&(Yi=new BroadcastChannel("[Firebase] FID Change"),Yi.onmessage=He=>{Wn(He.data.key,He.data.fid)}),Yi}();Ut&&Ut.postMessage({key:He,fid:mt}),function Aa(){0===Xt.size&&Yi&&(Yi.close(),Yi=null)}()}(Ut,mt)}function Wn(He,mt){const Ut=Xt.get(He);if(Ut)for(const Oi of Ut)Oi(mt)}let Yi=null;const Gs="firebase-installations-store";let da=null;function Ns(){return da||(da=(0,lt.X3)("firebase-installations-database",1,{upgrade:(He,mt)=>{0===mt&&He.createObjectStore(Gs)}})),da}function Es(He,mt){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,v.Z)(function*(He,mt){const Ut=vn(He),kn=(yield Ns()).transaction(Gs,"readwrite"),lr=kn.objectStore(Gs),is=yield lr.get(Ut);return yield lr.put(mt,Ut),yield kn.done,(!is||is.fid!==mt.fid)&&pr(He,mt.fid),mt})).apply(this,arguments)}function ka(He){return fi.apply(this,arguments)}function fi(){return(fi=(0,v.Z)(function*(He){const mt=vn(He),Oi=(yield Ns()).transaction(Gs,"readwrite");yield Oi.objectStore(Gs).delete(mt),yield Oi.done})).apply(this,arguments)}function Er(He,mt){return ms.apply(this,arguments)}function ms(){return(ms=(0,v.Z)(function*(He,mt){const Ut=vn(He),kn=(yield Ns()).transaction(Gs,"readwrite"),lr=kn.objectStore(Gs),is=yield lr.get(Ut),Kr=mt(is);return void 0===Kr?yield lr.delete(Ut):yield lr.put(Kr,Ut),yield kn.done,Kr&&(!is||is.fid!==Kr.fid)&&pr(He,Kr.fid),Kr})).apply(this,arguments)}function br(He){return io.apply(this,arguments)}function io(){return(io=(0,v.Z)(function*(He){let mt;const Ut=yield Er(He.appConfig,Oi=>{const kn=Go(Oi),lr=kr(He,kn);return mt=lr.registrationPromise,lr.installationEntry});return""===Ut.fid?{installationEntry:yield mt}:{installationEntry:Ut,registrationPromise:mt}})).apply(this,arguments)}function Go(He){return Pr(He||{fid:ki(),registrationStatus:0})}function kr(He,mt){if(0===mt.registrationStatus){if(!navigator.onLine)return{installationEntry:mt,registrationPromise:Promise.reject(li.create("app-offline"))};const Ut={fid:mt.fid,registrationStatus:1,registrationTime:Date.now()},Oi=function Hr(He,mt){return Zn.apply(this,arguments)}(He,Ut);return{installationEntry:Ut,registrationPromise:Oi}}return 1===mt.registrationStatus?{installationEntry:mt,registrationPromise:_i(He)}:{installationEntry:mt}}function Zn(){return(Zn=(0,v.Z)(function*(He,mt){try{const Ut=yield Fe(He,mt);return Es(He.appConfig,Ut)}catch(Ut){throw ft(Ut)&&409===Ut.customData.serverCode?yield ka(He.appConfig):yield Es(He.appConfig,{fid:mt.fid,registrationStatus:0}),Ut}})).apply(this,arguments)}function _i(He){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,v.Z)(function*(He){let mt=yield Mi(He.appConfig);for(;1===mt.registrationStatus;)yield nt(100),mt=yield Mi(He.appConfig);if(0===mt.registrationStatus){const{installationEntry:Ut,registrationPromise:Oi}=yield br(He);return Oi||Ut}return mt})).apply(this,arguments)}function Mi(He){return Er(He,mt=>{if(!mt)throw li.create("installation-not-found");return Pr(mt)})}function Pr(He){return function Ks(He){return 1===He.registrationStatus&&He.registrationTime+1e4<Date.now()}(He)?{fid:He.fid,registrationStatus:0}:He}function no(He,mt){return nn.apply(this,arguments)}function nn(){return(nn=(0,v.Z)(function*({appConfig:He,heartbeatServiceProvider:mt},Ut){const Oi=ro(He,Ut),kn=yt(He,Ut),lr=mt.getImmediate({optional:!0});if(lr){const pa=yield lr.getHeartbeatsHeader();pa&&kn.append("x-firebase-client",pa)}const Kr={method:"POST",headers:kn,body:JSON.stringify({installation:{sdkVersion:ct,appId:He.appId}})},Ra=yield ti(()=>fetch(Oi,Kr));if(Ra.ok)return Si(yield Ra.json());throw yield oi("Generate Auth Token",Ra)})).apply(this,arguments)}function ro(He,{fid:mt}){return`${it(He)}/${mt}/authTokens:generate`}function mn(He){return bo.apply(this,arguments)}function bo(){return(bo=(0,v.Z)(function*(He,mt=!1){let Ut;const Oi=yield Er(He.appConfig,lr=>{if(!mi(lr))throw li.create("not-registered");const is=lr.authToken;if(!mt&&Zi(is))return lr;if(1===is.requestStatus)return Ut=Dn(He,mt),lr;{if(!navigator.onLine)throw li.create("app-offline");const Kr=Rn(lr);return Ut=hi(He,Kr),Kr}});return Ut?yield Ut:Oi.authToken})).apply(this,arguments)}function Dn(He,mt){return $s.apply(this,arguments)}function $s(){return($s=(0,v.Z)(function*(He,mt){let Ut=yield ts(He.appConfig);for(;1===Ut.authToken.requestStatus;)yield nt(100),Ut=yield ts(He.appConfig);const Oi=Ut.authToken;return 0===Oi.requestStatus?mn(He,mt):Oi})).apply(this,arguments)}function ts(He){return Er(He,mt=>{if(!mi(mt))throw li.create("not-registered");return function ye(He){return 1===He.requestStatus&&He.requestTime+1e4<Date.now()}(mt.authToken)?Object.assign(Object.assign({},mt),{authToken:{requestStatus:0}}):mt})}function hi(He,mt){return Et.apply(this,arguments)}function Et(){return(Et=(0,v.Z)(function*(He,mt){try{const Ut=yield no(He,mt),Oi=Object.assign(Object.assign({},mt),{authToken:Ut});return yield Es(He.appConfig,Oi),Ut}catch(Ut){if(!ft(Ut)||401!==Ut.customData.serverCode&&404!==Ut.customData.serverCode){const Oi=Object.assign(Object.assign({},mt),{authToken:{requestStatus:0}});yield Es(He.appConfig,Oi)}else yield ka(He.appConfig);throw Ut}})).apply(this,arguments)}function mi(He){return void 0!==He&&2===He.registrationStatus}function Zi(He){return 2===He.requestStatus&&!function cn(He){const mt=Date.now();return mt<He.creationTime||He.creationTime+He.expiresIn<mt+36e5}(He)}function Rn(He){const mt={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},He),{authToken:mt})}function J(){return(J=(0,v.Z)(function*(He){const mt=He,{installationEntry:Ut,registrationPromise:Oi}=yield br(mt);return Oi?Oi.catch(console.error):mn(mt).catch(console.error),Ut.fid})).apply(this,arguments)}function q(){return(q=(0,v.Z)(function*(He,mt=!1){const Ut=He;return yield Z(Ut),(yield mn(Ut,mt)).token})).apply(this,arguments)}function Z(He){return ve.apply(this,arguments)}function ve(){return(ve=(0,v.Z)(function*(He){const{registrationPromise:mt}=yield br(He);mt&&(yield mt)})).apply(this,arguments)}function xn(He){return li.create("missing-app-config-values",{valueName:He})}const sl="installations",Ih=He=>{const mt=He.getProvider("app").getImmediate(),Ut=function dn(He){if(!He||!He.options)throw xn("App Configuration");if(!He.name)throw xn("App Name");const mt=["projectId","apiKey","appId"];for(const Ut of mt)if(!He.options[Ut])throw xn(Ut);return{appName:He.name,projectId:He.options.projectId,apiKey:He.options.apiKey,appId:He.options.appId}}(mt);return{app:mt,appConfig:Ut,heartbeatServiceProvider:(0,ue._getProvider)(mt,"heartbeat"),_delete:()=>Promise.resolve()}},du=He=>{const mt=He.getProvider("app").getImmediate(),Ut=(0,ue._getProvider)(mt,sl).getImmediate();return{getId:()=>function pe(He){return J.apply(this,arguments)}(Ut),getToken:kn=>function Y(He){return q.apply(this,arguments)}(Ut,kn)}};(function zi(){(0,ue._registerComponent)(new ee.wA(sl,Ih,"PUBLIC")),(0,ue._registerComponent)(new ee.wA("installations-internal",du,"PRIVATE"))})(),(0,ue.registerVersion)(pt,"0.6.0"),(0,ue.registerVersion)(pt,"0.6.0","esm2017")},1877:(Hi,_t,te)=>{te.d(_t,{Am:()=>ct,Ub:()=>ot,Yd:()=>tt,in:()=>ue});const v=[];var ue=(()=>{return(Ce=ue||(ue={}))[Ce.DEBUG=0]="DEBUG",Ce[Ce.VERBOSE=1]="VERBOSE",Ce[Ce.INFO=2]="INFO",Ce[Ce.WARN=3]="WARN",Ce[Ce.ERROR=4]="ERROR",Ce[Ce.SILENT=5]="SILENT",ue;var Ce})();const ee={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Ue=ue.INFO,lt={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},pt=(Ce,be,...Le)=>{if(be<Ce.logLevel)return;const Ot=(new Date).toISOString(),St=lt[be];if(!St)throw new Error(`Attempted to log a message with an invalid logType (value: ${be})`);console[St](`[${Ot}]  ${Ce.name}:`,...Le)};class tt{constructor(be){this.name=be,this._logLevel=Ue,this._logHandler=pt,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(be){if(!(be in ue))throw new TypeError(`Invalid value "${be}" assigned to \`logLevel\``);this._logLevel=be}setLogLevel(be){this._logLevel="string"==typeof be?ee[be]:be}get logHandler(){return this._logHandler}set logHandler(be){if("function"!=typeof be)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=be}get userLogHandler(){return this._userLogHandler}set userLogHandler(be){this._userLogHandler=be}debug(...be){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...be),this._logHandler(this,ue.DEBUG,...be)}log(...be){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...be),this._logHandler(this,ue.VERBOSE,...be)}info(...be){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...be),this._logHandler(this,ue.INFO,...be)}warn(...be){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...be),this._logHandler(this,ue.WARN,...be)}error(...be){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...be),this._logHandler(this,ue.ERROR,...be)}}function ot(Ce){v.forEach(be=>{be.setLogLevel(Ce)})}function ct(Ce,be){for(const Le of v){let Ot=null;be&&be.level&&(Ot=ee[be.level]),Le.userLogHandler=null===Ce?null:(St,Ct,...li)=>{const ft=li.map(it=>{if(null==it)return null;if("string"==typeof it)return it;if("number"==typeof it||"boolean"==typeof it)return it.toString();if(it instanceof Error)return it.message;try{return JSON.stringify(it)}catch{return null}}).filter(it=>it).join(" ");Ct>=(Ot??St.logLevel)&&Ce({level:ue[Ct].toLowerCase(),message:ft,args:li,type:St.name})}}}},3008:(Hi,_t,te)=>{te.d(_t,{IH:()=>ro,Gb:()=>bo});var v=te(5861),ue=te(9681),ee=te(1877),Ue=te(2090),lt=te(4859);te(2833);const tt="analytics",ot="firebase_id",be="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Le="https://www.googletagmanager.com/gtag/js",Ot=new ee.Yd("@firebase/analytics");function St(J){return Promise.all(J.map(Y=>Y.catch(q=>q)))}function Ct(J,Y){const q=document.createElement("script");q.src=`${Le}?l=${J}&id=${Y}`,q.async=!0,document.head.appendChild(q)}function ft(J,Y,q,Z,ve,Je){return it.apply(this,arguments)}function it(){return(it=(0,v.Z)(function*(J,Y,q,Z,ve,Je){const Pt=Z[ve];try{if(Pt)yield Y[Pt];else{const at=(yield St(q)).find(At=>At.measurementId===ve);at&&(yield Y[at.appId])}}catch(Yt){Ot.error(Yt)}J("config",ve,Je)})).apply(this,arguments)}function Si(J,Y,q,Z,ve){return oi.apply(this,arguments)}function oi(){return(oi=(0,v.Z)(function*(J,Y,q,Z,ve){try{let Je=[];if(ve&&ve.send_to){let Pt=ve.send_to;Array.isArray(Pt)||(Pt=[Pt]);const Yt=yield St(q);for(const at of Pt){const At=Yt.find(_n=>_n.measurementId===at),Ui=At&&Y[At.appId];if(!Ui){Je=[];break}Je.push(Ui)}}0===Je.length&&(Je=Object.values(Y)),yield Promise.all(Je),J("event",Z,ve||{})}catch(Je){Ot.error(Je)}})).apply(this,arguments)}function yt(J){const Y=window.document.getElementsByTagName("script");for(const q of Object.values(Y))if(q.src&&q.src.includes(Le)&&q.src.includes(J))return q;return null}const ze=new Ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Be=new class Fe{constructor(Y={},q=1e3){this.throttleMetadata=Y,this.intervalMillis=q}getThrottleMetadata(Y){return this.throttleMetadata[Y]}setThrottleMetadata(Y,q){this.throttleMetadata[Y]=q}deleteThrottleMetadata(Y){delete this.throttleMetadata[Y]}};function nt(J){return new Headers({Accept:"application/json","x-goog-api-key":J})}function Ke(J){return qt.apply(this,arguments)}function qt(){return(qt=(0,v.Z)(function*(J){var Y;const{appId:q,apiKey:Z}=J,ve={method:"GET",headers:nt(Z)},Je=be.replace("{app-id}",q),Pt=yield fetch(Je,ve);if(200!==Pt.status&&304!==Pt.status){let Yt="";try{const at=yield Pt.json();null!==(Y=at.error)&&void 0!==Y&&Y.message&&(Yt=at.error.message)}catch{}throw ze.create("config-fetch-failed",{httpStatus:Pt.status,responseMessage:Yt})}return Pt.json()})).apply(this,arguments)}function jt(J){return ki.apply(this,arguments)}function ki(){return(ki=(0,v.Z)(function*(J,Y=Be,q){const{appId:Z,apiKey:ve,measurementId:Je}=J.options;if(!Z)throw ze.create("no-app-id");if(!ve){if(Je)return{measurementId:Je,appId:Z};throw ze.create("no-api-key")}const Pt=Y.getThrottleMetadata(Z)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Yt=new gs;return setTimeout((0,v.Z)(function*(){Yt.abort()}),void 0!==q?q:6e4),Un({appId:Z,apiKey:ve,measurementId:Je},Pt,Yt,Y)})).apply(this,arguments)}function Un(J,Y,q){return vn.apply(this,arguments)}function vn(){return(vn=(0,v.Z)(function*(J,{throttleEndTimeMillis:Y,backoffCount:q},Z,ve=Be){var Je;const{appId:Pt,measurementId:Yt}=J;try{yield Xt(Z,Y)}catch(at){if(Yt)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:Pt,measurementId:Yt};throw at}try{const at=yield Ke(J);return ve.deleteThrottleMetadata(Pt),at}catch(at){const At=at;if(!pr(At)){if(ve.deleteThrottleMetadata(Pt),Yt)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${At?.message}]`),{appId:Pt,measurementId:Yt};throw at}const Ui=503===Number(null===(Je=At?.customData)||void 0===Je?void 0:Je.httpStatus)?(0,Ue.$s)(q,ve.intervalMillis,30):(0,Ue.$s)(q,ve.intervalMillis),_n={throttleEndTimeMillis:Date.now()+Ui,backoffCount:q+1};return ve.setThrottleMetadata(Pt,_n),Ot.debug(`Calling attemptFetch again in ${Ui} millis`),Un(J,_n,Z,ve)}})).apply(this,arguments)}function Xt(J,Y){return new Promise((q,Z)=>{const ve=Math.max(Y-Date.now(),0),Je=setTimeout(q,ve);J.addEventListener(()=>{clearTimeout(Je),Z(ze.create("fetch-throttle",{throttleEndTimeMillis:Y}))})})}function pr(J){if(!(J instanceof Ue.ZR&&J.customData))return!1;const Y=Number(J.customData.httpStatus);return 429===Y||500===Y||503===Y||504===Y}class gs{constructor(){this.listeners=[]}addEventListener(Y){this.listeners.push(Y)}abort(){this.listeners.forEach(Y=>Y())}}let ar,Es;function En(){return(En=(0,v.Z)(function*(J,Y,q,Z,ve){if(ve&&ve.global)J("event",q,Z);else{const Je=yield Y;J("event",q,Object.assign(Object.assign({},Z),{send_to:Je}))}})).apply(this,arguments)}function Ao(J){Es=J}function ka(J){ar=J}function fi(){return Er.apply(this,arguments)}function Er(){return(Er=(0,v.Z)(function*(){if(!(0,Ue.hl)())return Ot.warn(ze.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ue.eu)()}catch(J){return Ot.warn(ze.create("indexeddb-unavailable",{errorInfo:J?.toString()}).message),!1}return!0})).apply(this,arguments)}function br(){return(br=(0,v.Z)(function*(J,Y,q,Z,ve,Je,Pt){var Yt;const at=jt(J);at.then(xn=>{q[xn.measurementId]=xn.appId,J.options.measurementId&&xn.measurementId!==J.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${J.options.measurementId}) does not match the measurement ID fetched from the server (${xn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(xn=>Ot.error(xn)),Y.push(at);const At=fi().then(xn=>{if(xn)return Z.getId()}),[Ui,_n]=yield Promise.all([at,At]);yt(Je)||Ct(Je,Ui.measurementId),Es&&(ve("consent","default",Es),Ao(void 0)),ve("js",new Date);const dn=null!==(Yt=Pt?.config)&&void 0!==Yt?Yt:{};return dn.origin="firebase",dn.update=!0,null!=_n&&(dn[ot]=_n),ve("config",Ui.measurementId,dn),ar&&(ve("set",ar),ka(void 0)),Ui.measurementId})).apply(this,arguments)}class io{constructor(Y){this.app=Y}_delete(){return delete Go[this.app.options.appId],Promise.resolve()}}let Go={},kr=[];const Hr={};let Ri,Mi,Zn="dataLayer",Pr=!1;function nn(J,Y,q){!function no(){const J=[];if((0,Ue.ru)()&&J.push("This is a browser extension environment."),(0,Ue.zI)()||J.push("Cookies are not available."),J.length>0){const Y=J.map((Z,ve)=>`(${ve+1}) ${Z}`).join(" "),q=ze.create("invalid-analytics-context",{errorInfo:Y});Ot.warn(q.message)}}();const Z=J.options.appId;if(!Z)throw ze.create("no-app-id");if(!J.options.apiKey){if(!J.options.measurementId)throw ze.create("no-api-key");Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${J.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Go[Z])throw ze.create("already-exists",{id:Z});if(!Pr){!function li(J){let Y=[];Array.isArray(window[J])?Y=window[J]:window[J]=Y}(Zn);const{wrappedGtag:Je,gtagCore:Pt}=function Mt(J,Y,q,Z,ve){let Je=function(...Pt){window[Z].push(arguments)};return window[ve]&&"function"==typeof window[ve]&&(Je=window[ve]),window[ve]=function Ft(J,Y,q,Z){function Je(){return(Je=(0,v.Z)(function*(Pt,Yt,at){try{"event"===Pt?yield Si(J,Y,q,Yt,at):"config"===Pt?yield ft(J,Y,q,Z,Yt,at):"consent"===Pt?J("consent","update",at):J("set",Yt)}catch(At){Ot.error(At)}})).apply(this,arguments)}return function ve(Pt,Yt,at){return Je.apply(this,arguments)}}(Je,J,Y,q),{gtagCore:Je,wrappedGtag:window[ve]}}(Go,kr,Hr,Zn,"gtag");Mi=Je,Ri=Pt,Pr=!0}return Go[Z]=function ms(J,Y,q,Z,ve,Je,Pt){return br.apply(this,arguments)}(J,kr,Hr,Y,Ri,Zn,q),new io(J)}function ro(J=(0,ue.getApp)()){J=(0,Ue.m9)(J);const Y=(0,ue._getProvider)(J,tt);return Y.isInitialized()?Y.getImmediate():function mn(J,Y={}){const q=(0,ue._getProvider)(J,tt);if(q.isInitialized()){const ve=q.getImmediate();if((0,Ue.vZ)(Y,q.getOptions()))return ve;throw ze.create("already-initialized")}return q.initialize({options:Y})}(J)}function bo(){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,v.Z)(function*(){if((0,Ue.ru)()||!(0,Ue.zI)()||!(0,Ue.hl)())return!1;try{return yield(0,Ue.eu)()}catch{return!1}})).apply(this,arguments)}const Rn="@firebase/analytics";!function pe(){(0,ue._registerComponent)(new lt.wA(tt,(Y,{options:q})=>nn(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),q),"PUBLIC")),(0,ue._registerComponent)(new lt.wA("analytics-internal",function J(Y){try{const q=Y.getProvider(tt).getImmediate();return{logEvent:(Z,ve,Je)=>function Zi(J,Y,q,Z){J=(0,Ue.m9)(J),function Wn(J,Y,q,Z,ve){return En.apply(this,arguments)}(Mi,Go[J.app.options.appId],Y,q,Z).catch(ve=>Ot.error(ve))}(q,Z,ve,Je)}}catch(q){throw ze.create("interop-component-reg-failed",{reason:q})}},"PRIVATE")),(0,ue.registerVersion)(Rn,"0.9.0"),(0,ue.registerVersion)(Rn,"0.9.0","esm2017")}()},259:(Hi,_t,te)=>{te.d(_t,{C6:()=>v.getApps,Mq:()=>v.getApp,ZF:()=>v.initializeApp});var v=te(9681);(0,v.registerVersion)("firebase","9.15.0","app")},9260:(Hi,_t,te)=>{te.d(_t,{Z:()=>v.Z});var v=te(3942);v.Z.registerVersion("firebase","9.15.0","app-compat")},9568:(Hi,_t,te)=>{te.r(_t);var v=te(5861),ue=te(3942),ee=te(552),Ue=te(2090),tt=(te(9681),te(1877),te(4859));function ot(){return window}function be(){return(be=(0,v.Z)(function*(Y,q,Z){var ve;const{BuildInfo:Je}=ot();(0,ee.ap)(q.sessionId,"AuthEvent did not contain a session ID");const Pt=yield it(q.sessionId),Yt={};return(0,ee.aq)()?Yt.ibi=Je.packageName:(0,ee.ar)()?Yt.apn=Je.packageName:(0,ee.as)(Y,"operation-not-supported-in-this-environment"),Je.displayName&&(Yt.appDisplayName=Je.displayName),Yt.sessionId=Pt,(0,ee.at)(Y,Z,q.type,void 0,null!==(ve=q.eventId)&&void 0!==ve?ve:void 0,Yt)})).apply(this,arguments)}function Ot(){return(Ot=(0,v.Z)(function*(Y){const{BuildInfo:q}=ot(),Z={};(0,ee.aq)()?Z.iosBundleId=q.packageName:(0,ee.ar)()?Z.androidPackageName=q.packageName:(0,ee.as)(Y,"operation-not-supported-in-this-environment"),yield(0,ee.au)(Y,Z)})).apply(this,arguments)}function li(){return(li=(0,v.Z)(function*(Y,q,Z){const{cordova:ve}=ot();let Je=()=>{};try{yield new Promise((Pt,Yt)=>{let at=null;function At(){var dn;Pt();const xn=null===(dn=ve.plugins.browsertab)||void 0===dn?void 0:dn.close;"function"==typeof xn&&xn(),"function"==typeof Z?.close&&Z.close()}function Ui(){at||(at=window.setTimeout(()=>{Yt((0,ee.aw)(Y,"redirect-cancelled-by-user"))},2e3))}function _n(){"visible"===document?.visibilityState&&Ui()}q.addPassiveListener(At),document.addEventListener("resume",Ui,!1),(0,ee.ar)()&&document.addEventListener("visibilitychange",_n,!1),Je=()=>{q.removePassiveListener(At),document.removeEventListener("resume",Ui,!1),document.removeEventListener("visibilitychange",_n,!1),at&&window.clearTimeout(at)}})}finally{Je()}})).apply(this,arguments)}function it(Y){return Si.apply(this,arguments)}function Si(){return(Si=(0,v.Z)(function*(Y){const q=oi(Y),Z=yield crypto.subtle.digest("SHA-256",q);return Array.from(new Uint8Array(Z)).map(Je=>Je.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function oi(Y){if((0,ee.ap)(/[0-9a-zA-Z]+/.test(Y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(Y);const q=new ArrayBuffer(Y.length),Z=new Uint8Array(q);for(let ve=0;ve<Y.length;ve++)Z[ve]=Y.charCodeAt(ve);return Z}class Mt extends ee.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(q=>{this.resolveInialized=q})}addPassiveListener(q){this.passiveListeners.add(q)}removePassiveListener(q){this.passiveListeners.delete(q)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(q){return this.resolveInialized(),this.passiveListeners.forEach(Z=>Z(q)),super.onEvent(q)}initialized(){var q=this;return(0,v.Z)(function*(){yield q.initPromise})()}}function ze(Y){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,v.Z)(function*(Y){const q=yield Be()._get(nt(Y));return q&&(yield Be()._remove(nt(Y))),q})).apply(this,arguments)}function Fe(){const Y=[],q="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Z=0;Z<20;Z++){const ve=Math.floor(Math.random()*q.length);Y.push(q.charAt(ve))}return Y.join("")}function Be(){return(0,ee.az)(ee.b)}function nt(Y){return(0,ee.aA)("authEvent",Y.config.apiKey,Y.name)}function jt(Y){if(!Y?.includes("?"))return{};const[q,...Z]=Y.split("?");return(0,Ue.zd)(Z.join("?"))}function Xt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,ee.aw)("no-auth-event")}}function En(){var Y;return(null===(Y=self?.location)||void 0===Y?void 0:Y.protocol)||null}function Vr(Y=(0,Ue.z$)()){return!("file:"!==En()&&"ionic:"!==En()&&"capacitor:"!==En()||!Y.toLowerCase().match(/iphone|ipad|ipod|android/))}function da(){try{const Y=self.localStorage,q=ee.aI();if(Y)return Y.setItem(q,"1"),Y.removeItem(q),!function Gs(Y=(0,Ue.z$)()){return function Ua(){return(0,Ue.w1)()&&11===document?.documentMode}()||function os(Y=(0,Ue.z$)()){return/Edge\/\d+/.test(Y)}(Y)}()||(0,Ue.hl)()}catch{return Ns()&&(0,Ue.hl)()}return!1}function Ns(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Es(){return(function Yi(){return"http:"===En()||"https:"===En()}()||(0,Ue.ru)()||Vr())&&!function Aa(){return(0,Ue.b$)()||(0,Ue.UG)()}()&&da()&&!Ns()}function Ao(){return Vr()&&typeof document<"u"}function fi(){return(fi=(0,v.Z)(function*(){return!!Ao()&&new Promise(Y=>{const q=setTimeout(()=>{Y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(q),Y(!0)})})})).apply(this,arguments)}const ms={LOCAL:"local",NONE:"none",SESSION:"session"},br=ee.ax,io="persistence";function kr(Y){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,v.Z)(function*(Y){yield Y._initializationPromise;const q=_i(),Z=ee.aA(io,Y.config.apiKey,Y.name);q&&q.setItem(Z,Y._getPersistence())})).apply(this,arguments)}function _i(){var Y;try{return(null===(Y=function Er(){return typeof window<"u"?window:null}())||void 0===Y?void 0:Y.sessionStorage)||null}catch{return null}}const Ri=ee.ax;class Mi{constructor(){this.browserResolver=ee.az(ee.k),this.cordovaResolver=ee.az(class Un{constructor(){this._redirectPersistence=ee.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(q){var Z=this;return(0,v.Z)(function*(){const ve=q._key();let Je=Z.eventManagers.get(ve);return Je||(Je=new Mt(q),Z.eventManagers.set(ve,Je),Z.attachCallbackListeners(q,Je)),Je})()}_openPopup(q){(0,ee.as)(q,"operation-not-supported-in-this-environment")}_openRedirect(q,Z,ve,Je){var Pt=this;return(0,v.Z)(function*(){!function ft(Y){var q,Z,ve,Je,Pt,Yt,at,At,Ui,_n;const dn=ot();(0,ee.ax)("function"==typeof(null===(q=dn?.universalLinks)||void 0===q?void 0:q.subscribe),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,ee.ax)(typeof(null===(Z=dn?.BuildInfo)||void 0===Z?void 0:Z.packageName)<"u",Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,ee.ax)("function"==typeof(null===(Pt=null===(Je=null===(ve=dn?.cordova)||void 0===ve?void 0:ve.plugins)||void 0===Je?void 0:Je.browsertab)||void 0===Pt?void 0:Pt.openUrl),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(At=null===(at=null===(Yt=dn?.cordova)||void 0===Yt?void 0:Yt.plugins)||void 0===at?void 0:at.browsertab)||void 0===At?void 0:At.isAvailable),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,ee.ax)("function"==typeof(null===(_n=null===(Ui=dn?.cordova)||void 0===Ui?void 0:Ui.InAppBrowser)||void 0===_n?void 0:_n.open),Y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(q);const Yt=yield Pt._initialize(q);yield Yt.initialized(),Yt.resetRedirect(),(0,ee.aD)(),yield Pt._originValidation(q);const at=function yt(Y,q,Z=null){return{type:q,eventId:Z,urlResponse:null,sessionId:Fe(),postBody:null,tenantId:Y.tenantId,error:(0,ee.aw)(Y,"no-auth-event")}}(q,ve,Je);yield function ti(Y,q){return Be()._set(nt(Y),q)}(q,at);const At=yield function Ce(Y,q,Z){return be.apply(this,arguments)}(q,at,Z),Ui=yield function St(Y){const{cordova:q}=ot();return new Promise(Z=>{q.plugins.browsertab.isAvailable(ve=>{let Je=null;ve?q.plugins.browsertab.openUrl(Y):Je=q.InAppBrowser.open(Y,(0,ee.av)()?"_blank":"_system","location=yes"),Z(Je)})})}(At);return function Ct(Y,q,Z){return li.apply(this,arguments)}(q,Yt,Ui)})()}_isIframeWebStorageSupported(q,Z){throw new Error("Method not implemented.")}_originValidation(q){const Z=q._key();return this.originValidationPromises[Z]||(this.originValidationPromises[Z]=function Le(Y){return Ot.apply(this,arguments)}(q)),this.originValidationPromises[Z]}attachCallbackListeners(q,Z){const{universalLinks:ve,handleOpenURL:Je,BuildInfo:Pt}=ot(),Yt=setTimeout((0,v.Z)(function*(){yield ze(q),Z.onEvent(Xt())}),500),at=function(){var _n=(0,v.Z)(function*(dn){clearTimeout(Yt);const xn=yield ze(q);let sl=null;xn&&dn?.url&&(sl=function gt(Y,q){var Z,ve;const Je=function qt(Y){const q=jt(Y),Z=q.link?decodeURIComponent(q.link):void 0,ve=jt(Z).link,Je=q.deep_link_id?decodeURIComponent(q.deep_link_id):void 0;return jt(Je).link||Je||ve||Z||Y}(q);if(Je.includes("/__/auth/callback")){const Pt=jt(Je),Yt=Pt.firebaseError?function Ke(Y){try{return JSON.parse(Y)}catch{return null}}(decodeURIComponent(Pt.firebaseError)):null,at=null===(ve=null===(Z=Yt?.code)||void 0===Z?void 0:Z.split("auth/"))||void 0===ve?void 0:ve[1],At=at?(0,ee.aw)(at):null;return At?{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,error:At,urlResponse:null,sessionId:null,postBody:null}:{type:Y.type,eventId:Y.eventId,tenantId:Y.tenantId,sessionId:Y.sessionId,urlResponse:Je,postBody:null}}return null}(xn,dn.url)),Z.onEvent(sl||Xt())});return function(xn){return _n.apply(this,arguments)}}();typeof ve<"u"&&"function"==typeof ve.subscribe&&ve.subscribe(null,at);const At=Je,Ui=`${Pt.packageName.toLowerCase()}://`;ot().handleOpenURL=function(){var _n=(0,v.Z)(function*(dn){if(dn.toLowerCase().startsWith(Ui)&&at({url:dn}),"function"==typeof At)try{At(dn)}catch(xn){console.error(xn)}});return function(dn){return _n.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ee.a,this._completeRedirectFn=ee.aB,this._overrideRedirectResult=ee.aC}_initialize(q){var Z=this;return(0,v.Z)(function*(){return yield Z.selectUnderlyingResolver(),Z.assertedUnderlyingResolver._initialize(q)})()}_openPopup(q,Z,ve,Je){var Pt=this;return(0,v.Z)(function*(){return yield Pt.selectUnderlyingResolver(),Pt.assertedUnderlyingResolver._openPopup(q,Z,ve,Je)})()}_openRedirect(q,Z,ve,Je){var Pt=this;return(0,v.Z)(function*(){return yield Pt.selectUnderlyingResolver(),Pt.assertedUnderlyingResolver._openRedirect(q,Z,ve,Je)})()}_isIframeWebStorageSupported(q,Z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(q,Z)}_originValidation(q){return this.assertedUnderlyingResolver._originValidation(q)}get _shouldInitProactively(){return Ao()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ri(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var q=this;return(0,v.Z)(function*(){if(q.underlyingResolver)return;const Z=yield function ka(){return fi.apply(this,arguments)}();q.underlyingResolver=Z?q.cordovaResolver:q.browserResolver})()}}function Pr(Y){return Y.unwrap()}function no(Y){return ro(Y)}function ro(Y){const{_tokenResponse:q}=Y instanceof Ue.ZR?Y.customData:Y;if(!q)return null;if(!(Y instanceof Ue.ZR)&&"temporaryProof"in q&&"phoneNumber"in q)return ee.P.credentialFromResult(Y);const Z=q.providerId;if(!Z||Z===ee.o.PASSWORD)return null;let ve;switch(Z){case ee.o.GOOGLE:ve=ee.Q;break;case ee.o.FACEBOOK:ve=ee.N;break;case ee.o.GITHUB:ve=ee.T;break;case ee.o.TWITTER:ve=ee.W;break;default:const{oauthIdToken:Je,oauthAccessToken:Pt,oauthTokenSecret:Yt,pendingToken:at,nonce:At}=q;return Pt||Yt||Je||at?at?Z.startsWith("saml.")?ee.aL._create(Z,at):ee.J._fromParams({providerId:Z,signInMethod:Z,pendingToken:at,idToken:Je,accessToken:Pt}):new ee.U(Z).credential({idToken:Je,accessToken:Pt,rawNonce:At}):null}return Y instanceof Ue.ZR?ve.credentialFromError(Y):ve.credentialFromResult(Y)}function mn(Y,q){return q.catch(Z=>{throw Z instanceof Ue.ZR&&function nn(Y,q){var Z;const ve=null===(Z=q.customData)||void 0===Z?void 0:Z._tokenResponse;if("auth/multi-factor-auth-required"===q?.code)q.resolver=new $s(Y,ee.an(Y,q));else if(ve){const Je=ro(q),Pt=q;Je&&(Pt.credential=Je,Pt.tenantId=ve.tenantId||void 0,Pt.email=ve.email||void 0,Pt.phoneNumber=ve.phoneNumber||void 0)}}(Y,Z),Z}).then(Z=>{const Je=Z.user;return{operationType:Z.operationType,credential:no(Z),additionalUserInfo:ee.al(Z),user:ts.getOrCreate(Je)}})}function bo(Y,q){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,v.Z)(function*(Y,q){const Z=yield q;return{verificationId:Z.verificationId,confirm:ve=>mn(Y,Z.confirm(ve))}})).apply(this,arguments)}class $s{constructor(q,Z){this.resolver=Z,this.auth=function Ks(Y){return Y.wrapped()}(q)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(q){return mn(Pr(this.auth),this.resolver.resolveSignIn(q))}}class ts{constructor(q){this._delegate=q,this.multiFactor=ee.ao(q)}static getOrCreate(q){return ts.USER_MAP.has(q)||ts.USER_MAP.set(q,new ts(q)),ts.USER_MAP.get(q)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(q){return this._delegate.getIdTokenResult(q)}getIdToken(q){return this._delegate.getIdToken(q)}linkAndRetrieveDataWithCredential(q){return this.linkWithCredential(q)}linkWithCredential(q){var Z=this;return(0,v.Z)(function*(){return mn(Z.auth,ee.Z(Z._delegate,q))})()}linkWithPhoneNumber(q,Z){var ve=this;return(0,v.Z)(function*(){return bo(ve.auth,ee.l(ve._delegate,q,Z))})()}linkWithPopup(q){var Z=this;return(0,v.Z)(function*(){return mn(Z.auth,ee.d(Z._delegate,q,Mi))})()}linkWithRedirect(q){var Z=this;return(0,v.Z)(function*(){return yield kr(ee.aE(Z.auth)),ee.g(Z._delegate,q,Mi)})()}reauthenticateAndRetrieveDataWithCredential(q){return this.reauthenticateWithCredential(q)}reauthenticateWithCredential(q){var Z=this;return(0,v.Z)(function*(){return mn(Z.auth,ee._(Z._delegate,q))})()}reauthenticateWithPhoneNumber(q,Z){return bo(this.auth,ee.r(this._delegate,q,Z))}reauthenticateWithPopup(q){return mn(this.auth,ee.e(this._delegate,q,Mi))}reauthenticateWithRedirect(q){var Z=this;return(0,v.Z)(function*(){return yield kr(ee.aE(Z.auth)),ee.h(Z._delegate,q,Mi)})()}sendEmailVerification(q){return ee.ab(this._delegate,q)}unlink(q){var Z=this;return(0,v.Z)(function*(){return yield ee.ak(Z._delegate,q),Z})()}updateEmail(q){return ee.ag(this._delegate,q)}updatePassword(q){return ee.ah(this._delegate,q)}updatePhoneNumber(q){return ee.u(this._delegate,q)}updateProfile(q){return ee.af(this._delegate,q)}verifyBeforeUpdateEmail(q,Z){return ee.ac(this._delegate,q,Z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ts.USER_MAP=new WeakMap;const hi=ee.ax;let Et=(()=>{class Y{constructor(Z,ve){if(this.app=Z,ve.isInitialized())return this._delegate=ve.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Je}=Z.options;hi(Je,"invalid-api-key",{appName:Z.name}),hi(Je,"invalid-api-key",{appName:Z.name});const Pt=typeof window<"u"?Mi:void 0;this._delegate=ve.initialize({options:{persistence:Zi(Je,Z.name),popupRedirectResolver:Pt}}),this._delegate._updateErrorMap(ee.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ts.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Z){this._delegate.languageCode=Z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Z){this._delegate.tenantId=Z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Z,ve){ee.G(this._delegate,Z,ve)}applyActionCode(Z){return ee.a2(this._delegate,Z)}checkActionCode(Z){return ee.a3(this._delegate,Z)}confirmPasswordReset(Z,ve){return ee.a1(this._delegate,Z,ve)}createUserWithEmailAndPassword(Z,ve){var Je=this;return(0,v.Z)(function*(){return mn(Je._delegate,ee.a5(Je._delegate,Z,ve))})()}fetchProvidersForEmail(Z){return this.fetchSignInMethodsForEmail(Z)}fetchSignInMethodsForEmail(Z){return ee.aa(this._delegate,Z)}isSignInWithEmailLink(Z){return ee.a8(this._delegate,Z)}getRedirectResult(){var Z=this;return(0,v.Z)(function*(){hi(Es(),Z._delegate,"operation-not-supported-in-this-environment");const ve=yield ee.j(Z._delegate,Mi);return ve?mn(Z._delegate,Promise.resolve(ve)):{credential:null,user:null}})()}addFrameworkForLogging(Z){!function pr(Y,q){(0,ee.aE)(Y)._logFramework(q)}(this._delegate,Z)}onAuthStateChanged(Z,ve,Je){const{next:Pt,error:Yt,complete:at}=mi(Z,ve,Je);return this._delegate.onAuthStateChanged(Pt,Yt,at)}onIdTokenChanged(Z,ve,Je){const{next:Pt,error:Yt,complete:at}=mi(Z,ve,Je);return this._delegate.onIdTokenChanged(Pt,Yt,at)}sendSignInLinkToEmail(Z,ve){return ee.a7(this._delegate,Z,ve)}sendPasswordResetEmail(Z,ve){return ee.a0(this._delegate,Z,ve||void 0)}setPersistence(Z){var ve=this;return(0,v.Z)(function*(){let Je;switch(function Go(Y,q){br(Object.values(ms).includes(q),Y,"invalid-persistence-type"),(0,Ue.b$)()?br(q!==ms.SESSION,Y,"unsupported-persistence-type"):(0,Ue.UG)()?br(q===ms.NONE,Y,"unsupported-persistence-type"):Ns()?br(q===ms.NONE||q===ms.LOCAL&&(0,Ue.hl)(),Y,"unsupported-persistence-type"):br(q===ms.NONE||da(),Y,"unsupported-persistence-type")}(ve._delegate,Z),Z){case ms.SESSION:Je=ee.a;break;case ms.LOCAL:Je=(yield ee.az(ee.i)._isAvailable())?ee.i:ee.b;break;case ms.NONE:Je=ee.L;break;default:return ee.as("argument-error",{appName:ve._delegate.name})}return ve._delegate.setPersistence(Je)})()}signInAndRetrieveDataWithCredential(Z){return this.signInWithCredential(Z)}signInAnonymously(){return mn(this._delegate,ee.X(this._delegate))}signInWithCredential(Z){return mn(this._delegate,ee.Y(this._delegate,Z))}signInWithCustomToken(Z){return mn(this._delegate,ee.$(this._delegate,Z))}signInWithEmailAndPassword(Z,ve){return mn(this._delegate,ee.a6(this._delegate,Z,ve))}signInWithEmailLink(Z,ve){return mn(this._delegate,ee.a9(this._delegate,Z,ve))}signInWithPhoneNumber(Z,ve){return bo(this._delegate,ee.s(this._delegate,Z,ve))}signInWithPopup(Z){var ve=this;return(0,v.Z)(function*(){return hi(Es(),ve._delegate,"operation-not-supported-in-this-environment"),mn(ve._delegate,ee.c(ve._delegate,Z,Mi))})()}signInWithRedirect(Z){var ve=this;return(0,v.Z)(function*(){return hi(Es(),ve._delegate,"operation-not-supported-in-this-environment"),yield kr(ve._delegate),ee.f(ve._delegate,Z,Mi)})()}updateCurrentUser(Z){return this._delegate.updateCurrentUser(Z)}verifyPasswordResetCode(Z){return ee.a4(this._delegate,Z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Y.Persistence=ms,Y})();function mi(Y,q,Z){let ve=Y;"function"!=typeof Y&&({next:ve,error:q,complete:Z}=Y);const Je=ve;return{next:Yt=>Je(Yt&&ts.getOrCreate(Yt)),error:q,complete:Z}}function Zi(Y,q){const Z=function Zn(Y,q){const Z=_i();if(!Z)return[];const ve=ee.aA(io,Y,q);switch(Z.getItem(ve)){case ms.NONE:return[ee.L];case ms.LOCAL:return[ee.i,ee.a];case ms.SESSION:return[ee.a];default:return[]}}(Y,q);if(typeof self<"u"&&!Z.includes(ee.i)&&Z.push(ee.i),typeof window<"u")for(const ve of[ee.b,ee.a])Z.includes(ve)||Z.push(ve);return Z.includes(ee.L)||Z.push(ee.L),Z}class cn{constructor(){this.providerId="phone",this._delegate=new ee.P(Pr(ue.Z.auth()))}static credential(q,Z){return ee.P.credential(q,Z)}verifyPhoneNumber(q,Z){return this._delegate.verifyPhoneNumber(q,Z)}unwrap(){return this._delegate}}cn.PHONE_SIGN_IN_METHOD=ee.P.PHONE_SIGN_IN_METHOD,cn.PROVIDER_ID=ee.P.PROVIDER_ID;const Rn=ee.ax;class ye{constructor(q,Z,ve=ue.Z.app()){var Je;Rn(null===(Je=ve.options)||void 0===Je?void 0:Je.apiKey,"invalid-api-key",{appName:ve.name}),this._delegate=new ee.R(q,Z,ve.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function J(Y){Y.INTERNAL.registerComponent(new tt.wA("auth-compat",q=>{const Z=q.getProvider("app-compat").getImmediate(),ve=q.getProvider("auth");return new Et(Z,ve)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ee.A.EMAIL_SIGNIN,PASSWORD_RESET:ee.A.PASSWORD_RESET,RECOVER_EMAIL:ee.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ee.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ee.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ee.A.VERIFY_EMAIL}},EmailAuthProvider:ee.M,FacebookAuthProvider:ee.N,GithubAuthProvider:ee.T,GoogleAuthProvider:ee.Q,OAuthProvider:ee.U,SAMLAuthProvider:ee.V,PhoneAuthProvider:cn,PhoneMultiFactorGenerator:ee.m,RecaptchaVerifier:ye,TwitterAuthProvider:ee.W,Auth:Et,AuthCredential:ee.H,Error:Ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Y.registerVersion("@firebase/auth-compat","0.3.0")}(ue.Z)},8766:(Hi,_t,te)=>{te.d(_t,{Lj:()=>Ft,X3:()=>oi});var v=te(5861);let ee,Ue;const tt=new WeakMap,ot=new WeakMap,ct=new WeakMap,Ce=new WeakMap,be=new WeakMap;let St={get(Qe,gt,Fe){if(Qe instanceof IDBTransaction){if("done"===gt)return ot.get(Qe);if("objectStoreNames"===gt)return Qe.objectStoreNames||ct.get(Qe);if("store"===gt)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return it(Qe[gt])},set:(Qe,gt,Fe)=>(Qe[gt]=Fe,!0),has:(Qe,gt)=>Qe instanceof IDBTransaction&&("done"===gt||"store"===gt)||gt in Qe};function ft(Qe){return"function"==typeof Qe?function li(Qe){return Qe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pt(){return Ue||(Ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Qe)?function(...gt){return Qe.apply(Si(this),gt),it(tt.get(this))}:function(...gt){return it(Qe.apply(Si(this),gt))}:function(gt,...Fe){const Be=Qe.call(Si(this),gt,...Fe);return ct.set(Be,gt.sort?gt.sort():[gt]),it(Be)}}(Qe):(Qe instanceof IDBTransaction&&function Ot(Qe){if(ot.has(Qe))return;const gt=new Promise((Fe,Be)=>{const nt=()=>{Qe.removeEventListener("complete",Ke),Qe.removeEventListener("error",qt),Qe.removeEventListener("abort",qt)},Ke=()=>{Fe(),nt()},qt=()=>{Be(Qe.error||new DOMException("AbortError","AbortError")),nt()};Qe.addEventListener("complete",Ke),Qe.addEventListener("error",qt),Qe.addEventListener("abort",qt)});ot.set(Qe,gt)}(Qe),((Qe,gt)=>gt.some(Fe=>Qe instanceof Fe))(Qe,function lt(){return ee||(ee=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Qe,St):Qe)}function it(Qe){if(Qe instanceof IDBRequest)return function Le(Qe){const gt=new Promise((Fe,Be)=>{const nt=()=>{Qe.removeEventListener("success",Ke),Qe.removeEventListener("error",qt)},Ke=()=>{Fe(it(Qe.result)),nt()},qt=()=>{Be(Qe.error),nt()};Qe.addEventListener("success",Ke),Qe.addEventListener("error",qt)});return gt.then(Fe=>{Fe instanceof IDBCursor&&tt.set(Fe,Qe)}).catch(()=>{}),be.set(gt,Qe),gt}(Qe);if(Ce.has(Qe))return Ce.get(Qe);const gt=ft(Qe);return gt!==Qe&&(Ce.set(Qe,gt),be.set(gt,Qe)),gt}const Si=Qe=>be.get(Qe);function oi(Qe,gt,{blocked:Fe,upgrade:Be,blocking:nt,terminated:Ke}={}){const qt=indexedDB.open(Qe,gt),jt=it(qt);return Be&&qt.addEventListener("upgradeneeded",ki=>{Be(it(qt.result),ki.oldVersion,ki.newVersion,it(qt.transaction))}),Fe&&qt.addEventListener("blocked",()=>Fe()),jt.then(ki=>{Ke&&ki.addEventListener("close",()=>Ke()),nt&&ki.addEventListener("versionchange",()=>nt())}).catch(()=>{}),jt}function Ft(Qe,{blocked:gt}={}){const Fe=indexedDB.deleteDatabase(Qe);return gt&&Fe.addEventListener("blocked",()=>gt()),it(Fe).then(()=>{})}const Mt=["get","getKey","getAll","getAllKeys","count"],yt=["put","add","delete","clear"],ti=new Map;function ze(Qe,gt){if(!(Qe instanceof IDBDatabase)||gt in Qe||"string"!=typeof gt)return;if(ti.get(gt))return ti.get(gt);const Fe=gt.replace(/FromIndex$/,""),Be=gt!==Fe,nt=yt.includes(Fe);if(!(Fe in(Be?IDBIndex:IDBObjectStore).prototype)||!nt&&!Mt.includes(Fe))return;const Ke=function(){var qt=(0,v.Z)(function*(jt,...ki){const Un=this.transaction(jt,nt?"readwrite":"readonly");let vn=Un.store;return Be&&(vn=vn.index(ki.shift())),(yield Promise.all([vn[Fe](...ki),nt&&Un.done]))[0]});return function(ki){return qt.apply(this,arguments)}}();return ti.set(gt,Ke),Ke}!function Ct(Qe){St=Qe(St)}(Qe=>({...Qe,get:(gt,Fe,Be)=>ze(gt,Fe)||Qe.get(gt,Fe,Be),has:(gt,Fe)=>!!ze(gt,Fe)||Qe.has(gt,Fe)}))},5861:(Hi,_t,te)=>{function v(ee,Ue,lt,pt,tt,ot,ct){try{var Ce=ee[ot](ct),be=Ce.value}catch(Le){return void lt(Le)}Ce.done?Ue(be):Promise.resolve(be).then(pt,tt)}function ue(ee){return function(){var Ue=this,lt=arguments;return new Promise(function(pt,tt){var ot=ee.apply(Ue,lt);function ct(be){v(ot,pt,tt,ct,Ce,"next",be)}function Ce(be){v(ot,pt,tt,ct,Ce,"throw",be)}ct(void 0)})}}te.d(_t,{Z:()=>ue})}},Hi=>{Hi(Hi.s=6329)}]);