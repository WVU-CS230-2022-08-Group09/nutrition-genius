"use strict";(self.webpackChunknutrition_genius=self.webpackChunknutrition_genius||[]).push([[179],{2011:(Wi,kt,te)=>{te.d(kt,{Dh:()=>ct,GT:()=>ht,cc:()=>bt,hO:()=>_t,on:()=>ve,pX:()=>ot,xv:()=>at});var b=te(4650),Ve=te(127),oe=te(880);Wi=te.hmd(Wi);const $e=["ngOnDestroy"],ot=(st,Mi,Ei,Rt={})=>new Proxy(st,{get:(gt,Et)=>Ei.runOutsideAngular(()=>{var Jt;if(st[Et])return!(null===(Jt=Rt?.spy)||void 0===Jt)&&Jt.get&&Rt.spy.get(Et,st[Et]),st[Et];if($e.indexOf(Et)>-1)return()=>{};const Vt=Mi.toPromise().then(ge=>{const ft=ge&&ge[Et];return"function"==typeof ft?ft.bind(ge):ft&&ft.then?ft.then(Oe=>Ei.run(()=>Oe)):Ei.run(()=>ft)});return new Proxy(()=>{},{get:(ge,ft)=>Vt[ft],apply:(ge,ft,Oe)=>Vt.then(Ue=>{var Xe;const Ge=Ue&&Ue(...Oe);return!(null===(Xe=Rt?.spy)||void 0===Xe)&&Xe.apply&&Rt.spy.apply(Et,Oe,Ge),Ge})})})}),ht=(st,Mi)=>{Mi.forEach(Ei=>{Object.getOwnPropertyNames(Ei.prototype||Ei).forEach(Rt=>{Object.defineProperty(st.prototype,Rt,Object.getOwnPropertyDescriptor(Ei.prototype||Ei,Rt))})})};class et{constructor(Mi){return Mi}}const ct=new b.OlP("angularfire2.app.options"),at=new b.OlP("angularfire2.app.name");function ve(st,Mi,Ei){const gt="object"==typeof Ei&&Ei||{};gt.name=gt.name||"string"==typeof Ei&&Ei||"[DEFAULT]";const Jt=Ve.Z.apps.filter(Vt=>Vt&&Vt.name===gt.name)[0]||Mi.runOutsideAngular(()=>Ve.Z.initializeApp(st,gt));try{JSON.stringify(st)!==JSON.stringify(Jt.options)&&Ce("error",`${Jt.name} Firebase App already initialized with different options${Wi.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new et(Jt)}const Ce=(st,...Mi)=>{(0,b.X6Q)()&&typeof console<"u"&&console[st](...Mi)},Fe={provide:et,useFactory:ve,deps:[ct,b.R0b,[new b.FiY,at]]};let _t=(()=>{class st{constructor(Ei){Ve.Z.registerVersion("angularfire",oe.q4.full,"core"),Ve.Z.registerVersion("angularfire",oe.q4.full,"app-compat"),Ve.Z.registerVersion("angular",b.q4F.full,Ei.toString())}static initializeApp(Ei,Rt){return{ngModule:st,providers:[{provide:ct,useValue:Ei},{provide:at,useValue:Rt}]}}}return st.\u0275fac=function(Ei){return new(Ei||st)(b.LFG(b.Lbi))},st.\u0275mod=b.oAB({type:st}),st.\u0275inj=b.cJS({providers:[Fe]}),st})();function bt(st,Mi,Ei,Rt,gt){const[,Et,Jt]=globalThis.\u0275AngularfireInstanceCache.find(Vt=>Vt[0]===st)||[];if(Et)return function Ct(st,Mi){try{return st.toString()===Mi.toString()}catch{return st===Mi}}(gt,Jt)||(dt("error",`${Mi} was already initialized on the ${Ei} Firebase App with different settings.${di?" You may need to reload as Firebase is not HMR aware.":""}`),dt("warn",{is:gt,was:Jt})),Et;{const Vt=Rt();return globalThis.\u0275AngularfireInstanceCache.push([st,Vt,gt]),Vt}}const di=!!Wi.hot,dt=(st,...Mi)=>{(0,b.X6Q)()&&typeof console<"u"&&console[st](...Mi)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(Wi,kt,te)=>{te.d(kt,{q4:()=>cm,iC:()=>pm,fc:()=>vy,HU:()=>my,vb:()=>qf,JM:()=>$s});var b=te(4650),Ve=te(5867),oe=te(5861),$e=te(9681),ot=te(2090),ht=te(4859),et=te(1877);te(2833);const at="@firebase/remote-config",bt=new ot.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ji{constructor(ee,xe,tt,Mt){this.client=ee,this.storage=xe,this.storageCache=tt,this.logger=Mt}isCachedDataFresh(ee,xe){if(!xe)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const tt=Date.now()-xe,Mt=tt<=ee;return this.logger.debug(`Config fetch cache check. Cache age millis: ${tt}. Cache max age millis (minimumFetchIntervalMillis setting): ${ee}. Is cache hit: ${Mt}.`),Mt}fetch(ee){var xe=this;return(0,oe.Z)(function*(){const[tt,Mt]=yield Promise.all([xe.storage.getLastSuccessfulFetchTimestampMillis(),xe.storage.getLastSuccessfulFetchResponse()]);if(Mt&&xe.isCachedDataFresh(ee.cacheMaxAgeMillis,tt))return Mt;ee.eTag=Mt&&Mt.eTag;const ai=yield xe.client.fetch(ee),Fi=[xe.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ai.status&&Fi.push(xe.storage.setLastSuccessfulFetchResponse(ai)),yield Promise.all(Fi),ai})()}}function Jn(Y=navigator){return Y.languages&&Y.languages[0]||Y.language}class Sn{constructor(ee,xe,tt,Mt,ai,Fi){this.firebaseInstallations=ee,this.sdkVersion=xe,this.namespace=tt,this.projectId=Mt,this.apiKey=ai,this.appId=Fi}fetch(ee){var xe=this;return(0,oe.Z)(function*(){var tt,Mt,ai;const[Fi,tr]=yield Promise.all([xe.firebaseInstallations.getId(),xe.firebaseInstallations.getToken()]),xt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${xe.projectId}/namespaces/${xe.namespace}:fetch?key=${xe.apiKey}`,Xi={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":ee.eTag||"*"},Dn={sdk_version:xe.sdkVersion,app_instance_id:Fi,app_instance_id_token:tr,app_id:xe.appId,language_code:Jn()},qh={method:"POST",headers:Xi,body:JSON.stringify(Dn)},Ts=fetch(xt,qh),up=new Promise((gc,mc)=>{ee.signal.addEventListener(()=>{const dp=new Error("The operation was aborted.");dp.name="AbortError",mc(dp)})});let Dh;try{yield Promise.race([Ts,up]),Dh=yield Ts}catch(gc){let mc="fetch-client-network";throw"AbortError"===(null===(tt=gc)||void 0===tt?void 0:tt.name)&&(mc="fetch-timeout"),bt.create(mc,{originalErrorMessage:null===(Mt=gc)||void 0===Mt?void 0:Mt.message})}let La=Dh.status;const Kf=Dh.headers.get("ETag")||void 0;let cp,fc;if(200===Dh.status){let gc;try{gc=yield Dh.json()}catch(mc){throw bt.create("fetch-client-parse",{originalErrorMessage:null===(ai=mc)||void 0===ai?void 0:ai.message})}cp=gc.entries,fc=gc.state}if("INSTANCE_STATE_UNSPECIFIED"===fc?La=500:"NO_CHANGE"===fc?La=304:("NO_TEMPLATE"===fc||"EMPTY_CONFIG"===fc)&&(cp={}),304!==La&&200!==La)throw bt.create("fetch-status",{httpStatus:La});return{status:La,eTag:Kf,config:cp}})()}}class Es{constructor(ee,xe){this.client=ee,this.storage=xe}fetch(ee){var xe=this;return(0,oe.Z)(function*(){const tt=(yield xe.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return xe.attemptFetch(ee,tt)})()}attemptFetch(ee,{throttleEndTimeMillis:xe,backoffCount:tt}){var Mt=this;return(0,oe.Z)(function*(){yield function oi(Y,ee){return new Promise((xe,tt)=>{const Mt=Math.max(ee-Date.now(),0),ai=setTimeout(xe,Mt);Y.addEventListener(()=>{clearTimeout(ai),tt(bt.create("fetch-throttle",{throttleEndTimeMillis:ee}))})})}(ee.signal,xe);try{const ai=yield Mt.client.fetch(ee);return yield Mt.storage.deleteThrottleMetadata(),ai}catch(ai){if(!function yr(Y){if(!(Y instanceof ot.ZR&&Y.customData))return!1;const ee=Number(Y.customData.httpStatus);return 429===ee||500===ee||503===ee||504===ee}(ai))throw ai;const Fi={throttleEndTimeMillis:Date.now()+(0,ot.$s)(tt),backoffCount:tt+1};return yield Mt.storage.setThrottleMetadata(Fi),Mt.attemptFetch(ee,Fi)}})()}}class Js{constructor(ee,xe,tt,Mt,ai){this.app=ee,this._client=xe,this._storageCache=tt,this._storage=Mt,this._logger=ai,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function nn(Y,ee){var xe;const tt=Y.target.error||void 0;return bt.create(ee,{originalErrorMessage:tt&&(null===(xe=tt)||void 0===xe?void 0:xe.message)})}const Mn="app_namespace_store";class us{constructor(ee,xe,tt,Mt=function Go(){return new Promise((Y,ee)=>{var xe;try{const tt=indexedDB.open("firebase_remote_config",1);tt.onerror=Mt=>{ee(nn(Mt,"storage-open"))},tt.onsuccess=Mt=>{Y(Mt.target.result)},tt.onupgradeneeded=Mt=>{0===Mt.oldVersion&&Mt.target.result.createObjectStore(Mn,{keyPath:"compositeKey"})}}catch(tt){ee(bt.create("storage-open",{originalErrorMessage:null===(xe=tt)||void 0===xe?void 0:xe.message}))}})}()){this.appId=ee,this.appName=xe,this.namespace=tt,this.openDbPromise=Mt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(ee){return this.set("last_fetch_status",ee)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(ee){return this.set("last_successful_fetch_timestamp_millis",ee)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(ee){return this.set("last_successful_fetch_response",ee)}getActiveConfig(){return this.get("active_config")}setActiveConfig(ee){return this.set("active_config",ee)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(ee){return this.set("active_config_etag",ee)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(ee){return this.set("throttle_metadata",ee)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(ee){var xe=this;return(0,oe.Z)(function*(){const tt=yield xe.openDbPromise;return new Promise((Mt,ai)=>{var Fi;const to=tt.transaction([Mn],"readonly").objectStore(Mn),xt=xe.createCompositeKey(ee);try{const Xi=to.get(xt);Xi.onerror=Dn=>{ai(nn(Dn,"storage-get"))},Xi.onsuccess=Dn=>{const qh=Dn.target.result;Mt(qh?qh.value:void 0)}}catch(Xi){ai(bt.create("storage-get",{originalErrorMessage:null===(Fi=Xi)||void 0===Fi?void 0:Fi.message}))}})})()}set(ee,xe){var tt=this;return(0,oe.Z)(function*(){const Mt=yield tt.openDbPromise;return new Promise((ai,Fi)=>{var tr;const xt=Mt.transaction([Mn],"readwrite").objectStore(Mn),Xi=tt.createCompositeKey(ee);try{const Dn=xt.put({compositeKey:Xi,value:xe});Dn.onerror=qh=>{Fi(nn(qh,"storage-set"))},Dn.onsuccess=()=>{ai()}}catch(Dn){Fi(bt.create("storage-set",{originalErrorMessage:null===(tr=Dn)||void 0===tr?void 0:tr.message}))}})})()}delete(ee){var xe=this;return(0,oe.Z)(function*(){const tt=yield xe.openDbPromise;return new Promise((Mt,ai)=>{var Fi;const to=tt.transaction([Mn],"readwrite").objectStore(Mn),xt=xe.createCompositeKey(ee);try{const Xi=to.delete(xt);Xi.onerror=Dn=>{ai(nn(Dn,"storage-delete"))},Xi.onsuccess=()=>{Mt()}}catch(Xi){ai(bt.create("storage-delete",{originalErrorMessage:null===(Fi=Xi)||void 0===Fi?void 0:Fi.message}))}})})()}createCompositeKey(ee){return[this.appId,this.appName,this.namespace,ee].join()}}class Wa{constructor(ee){this.storage=ee}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var ee=this;return(0,oe.Z)(function*(){const xe=ee.storage.getLastFetchStatus(),tt=ee.storage.getLastSuccessfulFetchTimestampMillis(),Mt=ee.storage.getActiveConfig(),ai=yield xe;ai&&(ee.lastFetchStatus=ai);const Fi=yield tt;Fi&&(ee.lastSuccessfulFetchTimestampMillis=Fi);const tr=yield Mt;tr&&(ee.activeConfig=tr)})()}setLastFetchStatus(ee){return this.lastFetchStatus=ee,this.storage.setLastFetchStatus(ee)}setLastSuccessfulFetchTimestampMillis(ee){return this.lastSuccessfulFetchTimestampMillis=ee,this.storage.setLastSuccessfulFetchTimestampMillis(ee)}setActiveConfig(ee){return this.activeConfig=ee,this.storage.setActiveConfig(ee)}}function Kl(){return pi.apply(this,arguments)}function pi(){return(pi=(0,oe.Z)(function*(){if(!(0,ot.hl)())return!1;try{return yield(0,ot.eu)()}catch{return!1}})).apply(this,arguments)}!function go(){(0,$e._registerComponent)(new ht.wA("remote-config",function Y(ee,{instanceIdentifier:xe}){const tt=ee.getProvider("app").getImmediate(),Mt=ee.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw bt.create("registration-window");if(!(0,ot.hl)())throw bt.create("indexed-db-unavailable");const{projectId:ai,apiKey:Fi,appId:tr}=tt.options;if(!ai)throw bt.create("registration-project-id");if(!Fi)throw bt.create("registration-api-key");if(!tr)throw bt.create("registration-app-id");const to=new us(tr,tt.name,xe=xe||"firebase"),xt=new Wa(to),Xi=new et.Yd(at);Xi.logLevel=et.in.ERROR;const Dn=new Sn(Mt,$e.SDK_VERSION,xe,ai,Fi,tr),qh=new Es(Dn,to),Ts=new ji(qh,to,xt,Xi),up=new Js(tt,Ts,xt,to,Xi);return function Jt(Y){const ee=(0,ot.m9)(Y);ee._initializePromise||(ee._initializePromise=ee._storageCache.loadFromStorage().then(()=>{ee._isInitializationComplete=!0}))}(up),up},"PUBLIC").setMultipleInstances(!0)),(0,$e.registerVersion)(at,"0.3.15"),(0,$e.registerVersion)(at,"0.3.15","esm2017")}();var Jr=te(8766);const El="/firebase-messaging-sw.js",ys="/firebase-cloud-messaging-push-scope",ka="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",cs="google.c.a.c_id",Fs="google.c.a.c_l",pr="google.c.a.ts",Ki="google.c.a.e";var xn=(()=>{return(Y=xn||(xn={})).PUSH_RECEIVED="push-received",Y.NOTIFICATION_CLICKED="notification-clicked",xn;var Y})();function Dr(Y){const ee=new Uint8Array(Y);return btoa(String.fromCharCode(...ee)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function qs(Y){const xe=(Y+"=".repeat((4-Y.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),tt=atob(xe),Mt=new Uint8Array(tt.length);for(let ai=0;ai<tt.length;++ai)Mt[ai]=tt.charCodeAt(ai);return Mt}const ko="fcm_token_details_db",qa="fcm_token_object_Store";function Kn(Y){return Ko.apply(this,arguments)}function Ko(){return Ko=(0,oe.Z)(function*(Y){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ai=>ai.name).includes(ko))return null;let ee=null;return(yield(0,Jr.X3)(ko,5,{upgrade:(tt=(0,oe.Z)(function*(Mt,ai,Fi,tr){var to;if(ai<2||!Mt.objectStoreNames.contains(qa))return;const xt=tr.objectStore(qa),Xi=yield xt.index("fcmSenderId").get(Y);if(yield xt.clear(),Xi)if(2===ai){const Dn=Xi;if(!Dn.auth||!Dn.p256dh||!Dn.endpoint)return;ee={token:Dn.fcmToken,createTime:null!==(to=Dn.createTime)&&void 0!==to?to:Date.now(),subscriptionOptions:{auth:Dn.auth,p256dh:Dn.p256dh,endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:"string"==typeof Dn.vapidKey?Dn.vapidKey:Dr(Dn.vapidKey)}}}else if(3===ai){const Dn=Xi;ee={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:Dr(Dn.auth),p256dh:Dr(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:Dr(Dn.vapidKey)}}}else if(4===ai){const Dn=Xi;ee={token:Dn.fcmToken,createTime:Dn.createTime,subscriptionOptions:{auth:Dr(Dn.auth),p256dh:Dr(Dn.p256dh),endpoint:Dn.endpoint,swScope:Dn.swScope,vapidKey:Dr(Dn.vapidKey)}}}}),function(ai,Fi,tr,to){return tt.apply(this,arguments)})})).close(),yield(0,Jr.Lj)(ko),yield(0,Jr.Lj)("fcm_vapid_details_db"),yield(0,Jr.Lj)("undefined"),er(ee)?ee:null;var tt}),Ko.apply(this,arguments)}function er(Y){if(!Y||!Y.subscriptionOptions)return!1;const{subscriptionOptions:ee}=Y;return"number"==typeof Y.createTime&&Y.createTime>0&&"string"==typeof Y.token&&Y.token.length>0&&"string"==typeof ee.auth&&ee.auth.length>0&&"string"==typeof ee.p256dh&&ee.p256dh.length>0&&"string"==typeof ee.endpoint&&ee.endpoint.length>0&&"string"==typeof ee.swScope&&ee.swScope.length>0&&"string"==typeof ee.vapidKey&&ee.vapidKey.length>0}const fi="firebase-messaging-store";let It=null;function wi(){return It||(It=(0,Jr.X3)("firebase-messaging-database",1,{upgrade:(Y,ee)=>{0===ee&&Y.createObjectStore(fi)}})),It}function an(Y){return ln.apply(this,arguments)}function ln(){return(ln=(0,oe.Z)(function*(Y){const ee=ye(Y),tt=yield(yield wi()).transaction(fi).objectStore(fi).get(ee);if(tt)return tt;{const Mt=yield Kn(Y.appConfig.senderId);if(Mt)return yield Tn(Y,Mt),Mt}})).apply(this,arguments)}function Tn(Y,ee){return me.apply(this,arguments)}function me(){return(me=(0,oe.Z)(function*(Y,ee){const xe=ye(Y),Mt=(yield wi()).transaction(fi,"readwrite");return yield Mt.objectStore(fi).put(ee,xe),yield Mt.done,ee})).apply(this,arguments)}function de(Y){return X.apply(this,arguments)}function X(){return(X=(0,oe.Z)(function*(Y){const ee=ye(Y),tt=(yield wi()).transaction(fi,"readwrite");yield tt.objectStore(fi).delete(ee),yield tt.done})).apply(this,arguments)}function ye({appConfig:Y}){return Y.appId}const Ye=new ot.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function yt(Y,ee){return li.apply(this,arguments)}function li(){return(li=(0,oe.Z)(function*(Y,ee){var xe;const tt=yield jr(Y),Mt=Cr(ee),ai={method:"POST",headers:tt,body:JSON.stringify(Mt)};let Fi;try{Fi=yield(yield fetch(Zi(Y.appConfig),ai)).json()}catch(tr){throw Ye.create("token-subscribe-failed",{errorInfo:null===(xe=tr)||void 0===xe?void 0:xe.toString()})}if(Fi.error)throw Ye.create("token-subscribe-failed",{errorInfo:Fi.error.message});if(!Fi.token)throw Ye.create("token-subscribe-no-token");return Fi.token})).apply(this,arguments)}function Ri(Y,ee){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,oe.Z)(function*(Y,ee){var xe;const tt=yield jr(Y),Mt=Cr(ee.subscriptionOptions),ai={method:"PATCH",headers:tt,body:JSON.stringify(Mt)};let Fi;try{Fi=yield(yield fetch(`${Zi(Y.appConfig)}/${ee.token}`,ai)).json()}catch(tr){throw Ye.create("token-update-failed",{errorInfo:null===(xe=tr)||void 0===xe?void 0:xe.toString()})}if(Fi.error)throw Ye.create("token-update-failed",{errorInfo:Fi.error.message});if(!Fi.token)throw Ye.create("token-update-no-token");return Fi.token})).apply(this,arguments)}function At(Y,ee){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,oe.Z)(function*(Y,ee){var xe;const Mt={method:"DELETE",headers:yield jr(Y)};try{const Fi=yield(yield fetch(`${Zi(Y.appConfig)}/${ee}`,Mt)).json();if(Fi.error)throw Ye.create("token-unsubscribe-failed",{errorInfo:Fi.error.message})}catch(ai){throw Ye.create("token-unsubscribe-failed",{errorInfo:null===(xe=ai)||void 0===xe?void 0:xe.toString()})}})).apply(this,arguments)}function Zi({projectId:Y}){return`https://fcmregistrations.googleapis.com/v1/projects/${Y}/registrations`}function jr(Y){return xs.apply(this,arguments)}function xs(){return(xs=(0,oe.Z)(function*({appConfig:Y,installations:ee}){const xe=yield ee.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":Y.apiKey,"x-goog-firebase-installations-auth":`FIS ${xe}`})})).apply(this,arguments)}function Cr({p256dh:Y,auth:ee,endpoint:xe,vapidKey:tt}){const Mt={web:{endpoint:xe,auth:ee,p256dh:Y}};return tt!==ka&&(Mt.web.applicationPubKey=tt),Mt}const $l=6048e5;function os(Y){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,oe.Z)(function*(Y){const ee=yield Fn(Y.swRegistration,Y.vapidKey),xe={vapidKey:Y.vapidKey,swScope:Y.swRegistration.scope,endpoint:ee.endpoint,auth:Dr(ee.getKey("auth")),p256dh:Dr(ee.getKey("p256dh"))},tt=yield an(Y.firebaseDependencies);if(tt){if(Ks(tt.subscriptionOptions,xe))return Date.now()>=tt.createTime+$l?_e(Y,{token:tt.token,createTime:Date.now(),subscriptionOptions:xe}):tt.token;try{yield At(Y.firebaseDependencies,tt.token)}catch(Mt){console.warn(Mt)}return jt(Y.firebaseDependencies,xe)}return jt(Y.firebaseDependencies,xe)})).apply(this,arguments)}function Eu(Y){return An.apply(this,arguments)}function An(){return(An=(0,oe.Z)(function*(Y){const ee=yield an(Y.firebaseDependencies);ee&&(yield At(Y.firebaseDependencies,ee.token),yield de(Y.firebaseDependencies));const xe=yield Y.swRegistration.pushManager.getSubscription();return!xe||xe.unsubscribe()})).apply(this,arguments)}function _e(Y,ee){return pt.apply(this,arguments)}function pt(){return(pt=(0,oe.Z)(function*(Y,ee){try{const xe=yield Ri(Y.firebaseDependencies,ee),tt=Object.assign(Object.assign({},ee),{token:xe,createTime:Date.now()});return yield Tn(Y.firebaseDependencies,tt),xe}catch(xe){throw yield Eu(Y),xe}})).apply(this,arguments)}function jt(Y,ee){return Li.apply(this,arguments)}function Li(){return(Li=(0,oe.Z)(function*(Y,ee){const tt={token:yield yt(Y,ee),createTime:Date.now(),subscriptionOptions:ee};return yield Tn(Y,tt),tt.token})).apply(this,arguments)}function Fn(Y,ee){return hr.apply(this,arguments)}function hr(){return(hr=(0,oe.Z)(function*(Y,ee){return(yield Y.pushManager.getSubscription())||Y.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:qs(ee)})})).apply(this,arguments)}function Ks(Y,ee){return ee.vapidKey===Y.vapidKey&&ee.endpoint===Y.endpoint&&ee.auth===Y.auth&&ee.p256dh===Y.p256dh}function Pr(Y){const ee={from:Y.from,collapseKey:Y.collapse_key,messageId:Y.fcmMessageId};return function Ga(Y,ee){if(!ee.notification)return;Y.notification={};const xe=ee.notification.title;xe&&(Y.notification.title=xe);const tt=ee.notification.body;tt&&(Y.notification.body=tt);const Mt=ee.notification.image;Mt&&(Y.notification.image=Mt);const ai=ee.notification.icon;ai&&(Y.notification.icon=ai)}(ee,Y),function $o(Y,ee){!ee.data||(Y.data=ee.data)}(ee,Y),function Br(Y,ee){var xe,tt,Mt,ai,Fi;if(!(ee.fcmOptions||null!==(xe=ee.notification)&&void 0!==xe&&xe.click_action))return;Y.fcmOptions={};const tr=null!==(Mt=null===(tt=ee.fcmOptions)||void 0===tt?void 0:tt.link)&&void 0!==Mt?Mt:null===(ai=ee.notification)||void 0===ai?void 0:ai.click_action;tr&&(Y.fcmOptions.link=tr);const to=null===(Fi=ee.fcmOptions)||void 0===Fi?void 0:Fi.analytics_label;to&&(Y.fcmOptions.analyticsLabel=to)}(ee,Y),ee}function am(Y){return"object"==typeof Y&&!!Y&&cs in Y}function lm(Y,ee){const xe=[];for(let tt=0;tt<Y.length;tt++)xe.push(Y.charAt(tt)),tt<ee.length&&xe.push(ee.charAt(tt));return xe.join("")}function op(Y){return Ye.create("missing-app-config-values",{valueName:Y})}lm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),lm("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class uc{constructor(ee,xe,tt){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Mt=function hc(Y){if(!Y||!Y.options)throw op("App Configuration Object");if(!Y.name)throw op("App Name");const ee=["projectId","apiKey","appId","messagingSenderId"],{options:xe}=Y;for(const tt of ee)if(!xe[tt])throw op(tt);return{appName:Y.name,projectId:xe.projectId,apiKey:xe.apiKey,appId:xe.appId,senderId:xe.messagingSenderId}}(ee);this.firebaseDependencies={app:ee,appConfig:Mt,installations:xe,analyticsProvider:tt}}_delete(){return Promise.resolve()}}function Uh(Y){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,oe.Z)(function*(Y){var ee;try{Y.swRegistration=yield navigator.serviceWorker.register(El,{scope:ys}),Y.swRegistration.update().catch(()=>{})}catch(xe){throw Ye.create("failed-service-worker-registration",{browserErrorMessage:null===(ee=xe)||void 0===ee?void 0:ee.message})}})).apply(this,arguments)}function ma(Y,ee){return ap.apply(this,arguments)}function ap(){return(ap=(0,oe.Z)(function*(Y,ee){if(!ee&&!Y.swRegistration&&(yield Uh(Y)),ee||!Y.swRegistration){if(!(ee instanceof ServiceWorkerRegistration))throw Ye.create("invalid-sw-registration");Y.swRegistration=ee}})).apply(this,arguments)}function Ra(Y,ee){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,oe.Z)(function*(Y,ee){ee?Y.vapidKey=ee:Y.vapidKey||(Y.vapidKey=ka)})).apply(this,arguments)}function xu(){return(xu=(0,oe.Z)(function*(Y,ee){if(!navigator)throw Ye.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ye.create("permission-blocked");return yield Ra(Y,ee?.vapidKey),yield ma(Y,ee?.serviceWorkerRegistration),os(Y)})).apply(this,arguments)}function Hf(Y,ee,xe){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,oe.Z)(function*(Y,ee,xe){const tt=hy(ee);(yield Y.firebaseDependencies.analyticsProvider.get()).logEvent(tt,{message_id:xe[cs],message_name:xe[Fs],message_time:xe[pr],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function hy(Y){switch(Y){case xn.NOTIFICATION_CLICKED:return"notification_open";case xn.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function hm(){return(hm=(0,oe.Z)(function*(Y,ee){const xe=ee.data;if(!xe.isFirebaseMessaging)return;Y.onMessageHandler&&xe.messageType===xn.PUSH_RECEIVED&&("function"==typeof Y.onMessageHandler?Y.onMessageHandler(Pr(xe)):Y.onMessageHandler.next(Pr(xe)));const tt=xe.data;am(tt)&&"1"===tt[Ki]&&(yield Hf(Y,xe.messageType,tt))})).apply(this,arguments)}const Vf="@firebase/messaging",Ro=Y=>{const ee=new uc(Y.getProvider("app").getImmediate(),Y.getProvider("installations-internal").getImmediate(),Y.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",xe=>function uy(Y,ee){return hm.apply(this,arguments)}(ee,xe)),ee},cy=Y=>{const ee=Y.getProvider("messaging").getImmediate();return{getToken:tt=>function td(Y,ee){return xu.apply(this,arguments)}(ee,tt)}};function Eh(){return dy.apply(this,arguments)}function dy(){return(dy=(0,oe.Z)(function*(){try{yield(0,ot.eu)()}catch{return!1}return typeof window<"u"&&(0,ot.hl)()&&(0,ot.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function PE(){(0,$e._registerComponent)(new ht.wA("messaging",Ro,"PUBLIC")),(0,$e._registerComponent)(new ht.wA("messaging-internal",cy,"PRIVATE")),(0,$e.registerVersion)(Vf,"0.11.0"),(0,$e.registerVersion)(Vf,"0.11.0","esm2017")}();var Tu=te(6148),um=te(4408),jf=te(7565);const xh=new class BI extends jf.v{}(class ME extends um.o{constructor(ee,xe){super(ee,xe),this.scheduler=ee,this.work=xe}schedule(ee,xe=0){return xe>0?super.schedule(ee,xe):(this.delay=xe,this.state=ee,this.scheduler.flush(this),this)}execute(ee,xe){return xe>0||this.closed?super.execute(ee,xe):this._execute(ee,xe)}requestAsyncId(ee,xe,tt=0){return null!=tt&&tt>0||null==tt&&this.delay>0?super.requestAsyncId(ee,xe,tt):ee.flush(this)}});var Iu=te(4986),cc=te(8505),lp=te(5363),Uf=te(9468);const cm=new b.GfV("7.5.0"),dm="__angularfire_symbol__analyticsIsSupportedValue",Th="__angularfire_symbol__analyticsIsSupported",nd="__angularfire_symbol__remoteConfigIsSupportedValue",rd="__angularfire_symbol__remoteConfigIsSupported",_a="__angularfire_symbol__messagingIsSupportedValue",sd="__angularfire_symbol__messagingIsSupported";function $s(Y,ee,xe){if(ee){if(1===ee.length)return ee[0];const ai=ee.filter(Fi=>Fi.app===xe);if(1===ai.length)return ai[0]}return xe.container.getProvider(Y).getImmediate({optional:!0})}globalThis[Th]||(globalThis[Th]=(0,Tu.Gb)().then(Y=>globalThis[dm]=Y).catch(()=>globalThis[dm]=!1)),globalThis[sd]||(globalThis[sd]=Eh().then(Y=>globalThis[_a]=Y).catch(()=>globalThis[_a]=!1)),globalThis[rd]||(globalThis[rd]=Kl().then(Y=>globalThis[nd]=Y).catch(()=>globalThis[nd]=!1));const qf=(Y,ee)=>{const xe=ee?[ee]:(0,Ve.C6)(),tt=[];return xe.forEach(Mt=>{Mt.container.getProvider(Y).instances.forEach(Fi=>{tt.includes(Fi)||tt.push(Fi)})}),tt};function od(){}class dc{constructor(ee,xe=xh){this.zone=ee,this.delegate=xe}now(){return this.delegate.now()}schedule(ee,xe,tt){const Mt=this.zone;return this.delegate.schedule(function(Fi){Mt.runGuarded(()=>{ee.apply(this,[Fi])})},xe,tt)}}class xl{constructor(ee){this.zone=ee,this.task=null}call(ee,xe){const tt=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",od,{},od,od)),xe.pipe((0,cc.b)({next:tt,complete:tt,error:tt})).subscribe(ee).add(tt)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let my=(()=>{class Y{constructor(xe){this.ngZone=xe,this.outsideAngular=xe.runOutsideAngular(()=>new dc(Zone.current)),this.insideAngular=xe.run(()=>new dc(Zone.current,Iu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return Y.\u0275fac=function(xe){return new(xe||Y)(b.LFG(b.R0b))},Y.\u0275prov=b.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})();function Tl(){const Y=globalThis.\u0275AngularFireScheduler;if(!Y)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return Y}function vy(Y){return Y.pipe((0,lp.Q)(Tl().outsideAngular))}function pm(Y){return Tl(),function Wh(Y){return function(xe){return(xe=xe.lift(new xl(Y.ngZone))).pipe((0,Uf.R)(Y.outsideAngular),(0,lp.Q)(Y.insideAngular))}}(Tl())(Y)}},2090:(Wi,kt,te)=>{te.d(kt,{$s:()=>wi,BH:()=>Sn,DV:()=>Aa,Dv:()=>Dr,G6:()=>Et,GJ:()=>Wa,L:()=>ct,LL:()=>br,Pz:()=>Jn,Sg:()=>oi,UG:()=>Ct,UI:()=>Kl,US:()=>ht,Wj:()=>pn,Wl:()=>Mn,Yr:()=>gt,ZB:()=>Ce,ZR:()=>Es,aH:()=>ji,b$:()=>st,cI:()=>nn,dS:()=>Kn,eu:()=>Vt,g5:()=>oe,gK:()=>qs,gQ:()=>cs,h$:()=>et,hl:()=>Jt,hu:()=>Ve,jU:()=>di,lb:()=>qa,m9:()=>Tn,ne:()=>Fs,p$:()=>ve,pd:()=>eo,r3:()=>go,ru:()=>dt,tV:()=>at,uI:()=>bt,ug:()=>Ko,vZ:()=>pi,w1:()=>Ei,w9:()=>us,xO:()=>ys,xb:()=>mo,z$:()=>_t,zI:()=>ge,zd:()=>ka});const Ve=function(me,de){if(!me)throw oe(de)},oe=function(me){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+me)},$e=function(me){const de=[];let X=0;for(let ye=0;ye<me.length;ye++){let ae=me.charCodeAt(ye);ae<128?de[X++]=ae:ae<2048?(de[X++]=ae>>6|192,de[X++]=63&ae|128):55296==(64512&ae)&&ye+1<me.length&&56320==(64512&me.charCodeAt(ye+1))?(ae=65536+((1023&ae)<<10)+(1023&me.charCodeAt(++ye)),de[X++]=ae>>18|240,de[X++]=ae>>12&63|128,de[X++]=ae>>6&63|128,de[X++]=63&ae|128):(de[X++]=ae>>12|224,de[X++]=ae>>6&63|128,de[X++]=63&ae|128)}return de},ht={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(me,de){if(!Array.isArray(me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=de?this.byteToCharMapWebSafe_:this.byteToCharMap_,ye=[];for(let ae=0;ae<me.length;ae+=3){const Ye=me[ae],yt=ae+1<me.length,li=yt?me[ae+1]:0,Ri=ae+2<me.length,Hi=Ri?me[ae+2]:0;let Zi=(15&li)<<2|Hi>>6,jr=63&Hi;Ri||(jr=64,yt||(Zi=64)),ye.push(X[Ye>>2],X[(3&Ye)<<4|li>>4],X[Zi],X[jr])}return ye.join("")},encodeString(me,de){return this.HAS_NATIVE_SUPPORT&&!de?btoa(me):this.encodeByteArray($e(me),de)},decodeString(me,de){return this.HAS_NATIVE_SUPPORT&&!de?atob(me):function(me){const de=[];let X=0,ye=0;for(;X<me.length;){const ae=me[X++];if(ae<128)de[ye++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const Ye=me[X++];de[ye++]=String.fromCharCode((31&ae)<<6|63&Ye)}else if(ae>239&&ae<365){const Ri=((7&ae)<<18|(63&me[X++])<<12|(63&me[X++])<<6|63&me[X++])-65536;de[ye++]=String.fromCharCode(55296+(Ri>>10)),de[ye++]=String.fromCharCode(56320+(1023&Ri))}else{const Ye=me[X++],yt=me[X++];de[ye++]=String.fromCharCode((15&ae)<<12|(63&Ye)<<6|63&yt)}}return de.join("")}(this.decodeStringToByteArray(me,de))},decodeStringToByteArray(me,de){this.init_();const X=de?this.charToByteMapWebSafe_:this.charToByteMap_,ye=[];for(let ae=0;ae<me.length;){const Ye=X[me.charAt(ae++)],li=ae<me.length?X[me.charAt(ae)]:0;++ae;const Hi=ae<me.length?X[me.charAt(ae)]:64;++ae;const Ht=ae<me.length?X[me.charAt(ae)]:64;if(++ae,null==Ye||null==li||null==Hi||null==Ht)throw Error();ye.push(Ye<<2|li>>4),64!==Hi&&(ye.push(li<<4&240|Hi>>2),64!==Ht&&ye.push(Hi<<6&192|Ht))}return ye},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let me=0;me<this.ENCODED_VALS.length;me++)this.byteToCharMap_[me]=this.ENCODED_VALS.charAt(me),this.charToByteMap_[this.byteToCharMap_[me]]=me,this.byteToCharMapWebSafe_[me]=this.ENCODED_VALS_WEBSAFE.charAt(me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[me]]=me,me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(me)]=me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(me)]=me)}}},et=function(me){const de=$e(me);return ht.encodeByteArray(de,!0)},ct=function(me){return et(me).replace(/\./g,"")},at=function(me){try{return ht.decodeString(me,!0)}catch(de){console.error("base64Decode failed: ",de)}return null};function ve(me){return Ce(void 0,me)}function Ce(me,de){if(!(de instanceof Object))return de;switch(de.constructor){case Date:return new Date(de.getTime());case Object:void 0===me&&(me={});break;case Array:me=[];break;default:return de}for(const X in de)!de.hasOwnProperty(X)||!Fe(X)||(me[X]=Ce(me[X],de[X]));return me}function Fe(me){return"__proto__"!==me}function _t(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function Ct(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function di(){return"object"==typeof self&&self.self===self}function dt(){const me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof me&&void 0!==me.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ei(){const me=_t();return me.indexOf("MSIE ")>=0||me.indexOf("Trident/")>=0}function gt(){return!1}function Et(){return!Ct()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jt(){return"object"==typeof indexedDB}function Vt(){return new Promise((me,de)=>{try{let X=!0;const ye="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(ye);ae.onsuccess=()=>{ae.result.close(),X||self.indexedDB.deleteDatabase(ye),me(!0)},ae.onupgradeneeded=()=>{X=!1},ae.onerror=()=>{var Ye;de((null===(Ye=ae.error)||void 0===Ye?void 0:Ye.message)||"")}}catch(X){de(X)}})}function ge(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const Ge=()=>{try{return function ft(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const me=process.env.__FIREBASE_DEFAULTS__;return me?JSON.parse(me):void 0})()||(()=>{if(typeof document>"u")return;let me;try{me=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const de=me&&at(me[1]);return de&&JSON.parse(de)})()}catch(me){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${me}`)}},ji=()=>{var me;return null===(me=Ge())||void 0===me?void 0:me.config},Jn=me=>{var de;return null===(de=Ge())||void 0===de?void 0:de[`_${me}`]};class Sn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((de,X)=>{this.resolve=de,this.reject=X})}wrapCallback(de){return(X,ye)=>{X?this.reject(X):this.resolve(ye),"function"==typeof de&&(this.promise.catch(()=>{}),1===de.length?de(X):de(X,ye))}}}function oi(me,de){if(me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ye=de||"demo-project",ae=me.iat||0,Ye=me.sub||me.user_id;if(!Ye)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const yt=Object.assign({iss:`https://securetoken.google.com/${ye}`,aud:ye,iat:ae,exp:ae+3600,auth_time:ae,sub:Ye,user_id:Ye,firebase:{sign_in_provider:"custom",identities:{}}},me);return[ct(JSON.stringify({alg:"none",type:"JWT"})),ct(JSON.stringify(yt)),""].join(".")}class Es extends Error{constructor(de,X,ye){super(X),this.code=de,this.customData=ye,this.name="FirebaseError",Object.setPrototypeOf(this,Es.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,br.prototype.create)}}class br{constructor(de,X,ye){this.service=de,this.serviceName=X,this.errors=ye}create(de,...X){const ye=X[0]||{},ae=`${this.service}/${de}`,Ye=this.errors[de],yt=Ye?function lr(me,de){return me.replace(Js,(X,ye)=>{const ae=de[ye];return null!=ae?String(ae):`<${ye}?>`})}(Ye,ye):"Error";return new Es(ae,`${this.serviceName}: ${yt} (${ae}).`,ye)}}const Js=/\{\$([^}]+)}/g;function nn(me){return JSON.parse(me)}function Mn(me){return JSON.stringify(me)}const Ua=function(me){let de={},X={},ye={},ae="";try{const Ye=me.split(".");de=nn(at(Ye[0])||""),X=nn(at(Ye[1])||""),ae=Ye[2],ye=X.d||{},delete X.d}catch{}return{header:de,claims:X,data:ye,signature:ae}},us=function(me){const X=Ua(me).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},Wa=function(me){const de=Ua(me).claims;return"object"==typeof de&&!0===de.admin};function go(me,de){return Object.prototype.hasOwnProperty.call(me,de)}function Aa(me,de){if(Object.prototype.hasOwnProperty.call(me,de))return me[de]}function mo(me){for(const de in me)if(Object.prototype.hasOwnProperty.call(me,de))return!1;return!0}function Kl(me,de,X){const ye={};for(const ae in me)Object.prototype.hasOwnProperty.call(me,ae)&&(ye[ae]=de.call(X,me[ae],ae,me));return ye}function pi(me,de){if(me===de)return!0;const X=Object.keys(me),ye=Object.keys(de);for(const ae of X){if(!ye.includes(ae))return!1;const Ye=me[ae],yt=de[ae];if(Jr(Ye)&&Jr(yt)){if(!pi(Ye,yt))return!1}else if(Ye!==yt)return!1}for(const ae of ye)if(!X.includes(ae))return!1;return!0}function Jr(me){return null!==me&&"object"==typeof me}function ys(me){const de=[];for(const[X,ye]of Object.entries(me))Array.isArray(ye)?ye.forEach(ae=>{de.push(encodeURIComponent(X)+"="+encodeURIComponent(ae))}):de.push(encodeURIComponent(X)+"="+encodeURIComponent(ye));return de.length?"&"+de.join("&"):""}function ka(me){const de={};return me.replace(/^\?/,"").split("&").forEach(ye=>{if(ye){const[ae,Ye]=ye.split("=");de[decodeURIComponent(ae)]=decodeURIComponent(Ye)}}),de}function eo(me){const de=me.indexOf("?");if(!de)return"";const X=me.indexOf("#",de);return me.substring(de,X>0?X:void 0)}class cs{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let de=1;de<this.blockSize;++de)this.pad_[de]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(de,X){X||(X=0);const ye=this.W_;if("string"==typeof de)for(let Ht=0;Ht<16;Ht++)ye[Ht]=de.charCodeAt(X)<<24|de.charCodeAt(X+1)<<16|de.charCodeAt(X+2)<<8|de.charCodeAt(X+3),X+=4;else for(let Ht=0;Ht<16;Ht++)ye[Ht]=de[X]<<24|de[X+1]<<16|de[X+2]<<8|de[X+3],X+=4;for(let Ht=16;Ht<80;Ht++){const Zi=ye[Ht-3]^ye[Ht-8]^ye[Ht-14]^ye[Ht-16];ye[Ht]=4294967295&(Zi<<1|Zi>>>31)}let Hi,At,ae=this.chain_[0],Ye=this.chain_[1],yt=this.chain_[2],li=this.chain_[3],Ri=this.chain_[4];for(let Ht=0;Ht<80;Ht++){Ht<40?Ht<20?(Hi=li^Ye&(yt^li),At=1518500249):(Hi=Ye^yt^li,At=1859775393):Ht<60?(Hi=Ye&yt|li&(Ye|yt),At=2400959708):(Hi=Ye^yt^li,At=3395469782);const Zi=(ae<<5|ae>>>27)+Hi+Ri+At+ye[Ht]&4294967295;Ri=li,li=yt,yt=4294967295&(Ye<<30|Ye>>>2),Ye=ae,ae=Zi}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+Ye&4294967295,this.chain_[2]=this.chain_[2]+yt&4294967295,this.chain_[3]=this.chain_[3]+li&4294967295,this.chain_[4]=this.chain_[4]+Ri&4294967295}update(de,X){if(null==de)return;void 0===X&&(X=de.length);const ye=X-this.blockSize;let ae=0;const Ye=this.buf_;let yt=this.inbuf_;for(;ae<X;){if(0===yt)for(;ae<=ye;)this.compress_(de,ae),ae+=this.blockSize;if("string"==typeof de){for(;ae<X;)if(Ye[yt]=de.charCodeAt(ae),++yt,++ae,yt===this.blockSize){this.compress_(Ye),yt=0;break}}else for(;ae<X;)if(Ye[yt]=de[ae],++yt,++ae,yt===this.blockSize){this.compress_(Ye),yt=0;break}}this.inbuf_=yt,this.total_+=X}digest(){const de=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&X,X/=256;this.compress_(this.buf_);let ye=0;for(let ae=0;ae<5;ae++)for(let Ye=24;Ye>=0;Ye-=8)de[ye]=this.chain_[ae]>>Ye&255,++ye;return de}}function Fs(me,de){const X=new pr(me,de);return X.subscribe.bind(X)}class pr{constructor(de,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{de(this)}).catch(ye=>{this.error(ye)})}next(de){this.forEachObserver(X=>{X.next(de)})}error(de){this.forEachObserver(X=>{X.error(de)}),this.close(de)}complete(){this.forEachObserver(de=>{de.complete()}),this.close()}subscribe(de,X,ye){let ae;if(void 0===de&&void 0===X&&void 0===ye)throw new Error("Missing Observer.");ae=function _i(me,de){if("object"!=typeof me||null===me)return!1;for(const X of de)if(X in me&&"function"==typeof me[X])return!0;return!1}(de,["next","error","complete"])?de:{next:de,error:X,complete:ye},void 0===ae.next&&(ae.next=xn),void 0===ae.error&&(ae.error=xn),void 0===ae.complete&&(ae.complete=xn);const Ye=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch{}}),this.observers.push(ae),Ye}unsubscribeOne(de){void 0===this.observers||void 0===this.observers[de]||(delete this.observers[de],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(de){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,de)}sendOne(de,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[de])try{X(this.observers[de])}catch(ye){typeof console<"u"&&console.error&&console.error(ye)}})}close(de){this.finalized||(this.finalized=!0,void 0!==de&&(this.finalError=de),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xn(){}const Dr=function(me,de,X,ye){let ae;if(ye<de?ae="at least "+de:ye>X&&(ae=0===X?"none":"no more than "+X),ae)throw new Error(me+" failed: Was called with "+ye+(1===ye?" argument.":" arguments.")+" Expects "+ae+".")};function qs(me,de){return`${me} failed: ${de} argument `}function pn(me,de,X,ye){if((!ye||X)&&"function"!=typeof X)throw new Error(qs(me,de)+"must be a valid function.")}function qa(me,de,X,ye){if((!ye||X)&&("object"!=typeof X||null===X))throw new Error(qs(me,de)+"must be a valid context object.")}const Kn=function(me){const de=[];let X=0;for(let ye=0;ye<me.length;ye++){let ae=me.charCodeAt(ye);if(ae>=55296&&ae<=56319){const Ye=ae-55296;ye++,Ve(ye<me.length,"Surrogate pair missing trail surrogate."),ae=65536+(Ye<<10)+(me.charCodeAt(ye)-56320)}ae<128?de[X++]=ae:ae<2048?(de[X++]=ae>>6|192,de[X++]=63&ae|128):ae<65536?(de[X++]=ae>>12|224,de[X++]=ae>>6&63|128,de[X++]=63&ae|128):(de[X++]=ae>>18|240,de[X++]=ae>>12&63|128,de[X++]=ae>>6&63|128,de[X++]=63&ae|128)}return de},Ko=function(me){let de=0;for(let X=0;X<me.length;X++){const ye=me.charCodeAt(X);ye<128?de++:ye<2048?de+=2:ye>=55296&&ye<=56319?(de+=4,X++):de+=3}return de};function wi(me,de=1e3,X=2){const ye=de*Math.pow(X,me),ae=Math.round(.5*ye*(Math.random()-.5)*2);return Math.min(144e5,ye+ae)}function Tn(me){return me&&me._delegate?me._delegate:me}},1880:(Wi,kt,te)=>{var b=te(4650);let Ve=null;function oe(){return Ve}const et=new b.OlP("DocumentToken");let ct=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:function(){return function at(){return(0,b.LFG)(Ce)}()},providedIn:"platform"}),r})();const ve=new b.OlP("Location Initialized");let Ce=(()=>{class r extends ct{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oe().getBaseHref(this._doc)}onPopState(e){const i=oe().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=oe().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,n){Fe()?this._history.pushState(e,i,n):this.location.hash=n}replaceState(e,i,n){Fe()?this._history.replaceState(e,i,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et))},r.\u0275prov=b.Yz7({token:r,factory:function(){return function _t(){return new Ce((0,b.LFG)(et))}()},providedIn:"platform"}),r})();function Fe(){return!!window.history.pushState}function bt(r,t){if(0==r.length)return t;if(0==t.length)return r;let e=0;return r.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?r+t.substring(1):1==e?r+t:r+"/"+t}function Ct(r){const t=r.match(/#|\?|$/),e=t&&t.index||r.length;return r.slice(0,e-("/"===r[e-1]?1:0))+r.slice(e)}function di(r){return r&&"?"!==r[0]?"?"+r:r}let dt=(()=>{class r{historyGo(e){throw new Error("Not implemented")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:function(){return(0,b.f3M)(Mi)},providedIn:"root"}),r})();const st=new b.OlP("appBaseHref");let Mi=(()=>{class r extends dt{constructor(e,i){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??(0,b.f3M)(et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return bt(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+di(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${i}${n}`:i}pushState(e,i,n,s){const o=this.prepareExternalUrl(n+di(s));this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){const o=this.prepareExternalUrl(n+di(s));this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(ct),b.LFG(st,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),Ei=(()=>{class r extends dt{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=bt(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,n,s){let o=this.prepareExternalUrl(n+di(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,i,o)}replaceState(e,i,n,s){let o=this.prepareExternalUrl(n+di(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(ct),b.LFG(st,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})(),Rt=(()=>{class r{constructor(e){this._subject=new b.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const i=this._locationStrategy.getBaseHref();this._baseHref=Ct(Jt(i)),this._locationStrategy.onPopState(n=>{this._subject.emit({url:this.path(!0),pop:!0,state:n.state,type:n.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+di(i))}normalize(e){return r.stripTrailingSlash(function Et(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,Jt(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,i="",n=null){this._locationStrategy.pushState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+di(i)),n)}replaceState(e,i="",n=null){this._locationStrategy.replaceState(n,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+di(i)),n)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(n=>n(e,i))}subscribe(e,i,n){return this._subject.subscribe({next:e,error:i,complete:n})}}return r.normalizeQueryParams=di,r.joinWithSlash=bt,r.stripTrailingSlash=Ct,r.\u0275fac=function(e){return new(e||r)(b.LFG(dt))},r.\u0275prov=b.Yz7({token:r,factory:function(){return function gt(){return new Rt((0,b.LFG)(dt))}()},providedIn:"root"}),r})();function Jt(r){return r.replace(/\/index.html$/,"")}function $o(r,t){t=encodeURIComponent(t);for(const e of r.split(";")){const i=e.indexOf("="),[n,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(n.trim()===t)return decodeURIComponent(s)}return null}let Br=(()=>{class r{constructor(e,i,n,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=n,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,b.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,b.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(n=>{i?this._renderer.addClass(this._ngEl.nativeElement,n):this._renderer.removeClass(this._ngEl.nativeElement,n)})}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.ZZ4),b.Y36(b.aQg),b.Y36(b.SBq),b.Y36(b.Qsj))},r.\u0275dir=b.lG2({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),r})();class cy{createSubscription(t,e){return t.subscribe({next:e,error:i=>{throw i}})}dispose(t){t.unsubscribe()}}class PE{createSubscription(t,e){return t.then(e,i=>{throw i})}dispose(t){}}const Eh=new PE,dy=new cy;let id=(()=>{class r{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,i=>this._updateLatestValue(e,i))}_selectStrategy(e){if((0,b.QGY)(e))return Eh;if((0,b.F4k)(e))return dy;throw function Ro(r,t){return new b.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,i){e===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.sBO,16))},r.\u0275pipe=b.Yjl({name:"async",type:r,pure:!1,standalone:!0}),r})(),Th=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({}),r})();function $a(r){return"server"===r}let qf=(()=>{class r{}return r.\u0275prov=(0,b.Yz7)({token:r,providedIn:"root",factory:()=>new od((0,b.LFG)(et),window)}),r})();class od{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function xl(r,t){const e=r.getElementById(t)||r.getElementsByName(t)[0];if(e)return e;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const i=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let n=i.currentNode;for(;n;){const s=n.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}n=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,n=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],n-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=dc(this.window.history)||dc(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function dc(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class Tl{}class mm extends class VE extends class ht{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ot(r){Ve||(Ve=r)}(new mm)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function c0(){return $f=$f||document.querySelector("base"),$f?$f.getAttribute("href"):null}();return null==e?null:function Zl(r){va=va||document.createElement("a"),va.setAttribute("href",r);const t=va.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){$f=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return $o(document.cookie,t)}}let va,$f=null;const Ns=new b.OlP("TRANSITION_ID"),UI=[{provide:b.ip1,useFactory:function jI(r,t,e){return()=>{e.get(b.CZH).donePromise.then(()=>{const i=oe(),n=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<n.length;s++)i.remove(n[s])})}},deps:[Ns,et,b.zs3],multi:!0}];let qI=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();const yy=new b.OlP("EventManagerPlugins");let d0=(()=>{class r{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(n=>n.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,n){return this._findPluginFor(i).addEventListener(e,i,n)}addGlobalEventListener(e,i,n){return this._findPluginFor(i).addGlobalEventListener(e,i,n)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const n=this._plugins;for(let s=0;s<n.length;s++){const o=n[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(yy),b.LFG(b.R0b))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();class vm{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const n=oe().getGlobalEventTarget(this._doc,t);if(!n)throw new Error(`Unsupported event target ${n} for event ${e}`);return this.addEventListener(n,e,i)}}let ym=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(n=>{this._stylesSet.has(n)||(this._stylesSet.add(n),i.add(n))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})(),fp=(()=>{class r extends ym{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,n){e.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,n.push(i.appendChild(o))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(p0),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,n)=>{this._addStylesToHost(e,n,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(p0))}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();function p0(r){oe().remove(r)}const f0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zE=/%COMP%/g;function by(r,t,e){for(let i=0;i<t.length;i++){let n=t[i];Array.isArray(n)?by(r,n,e):(n=n.replace(zE,r),e.push(n))}return e}function jE(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cy=(()=>{class r{constructor(e,i,n){this.eventManager=e,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Yf(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case b.ifc.Emulated:{let n=this.rendererByCompId.get(i.id);return n||(n=new UE(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,n)),n.applyToHost(e),n}case 1:case b.ifc.ShadowDom:return new WE(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const n=by(i.id,i.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(d0),b.LFG(fp),b.LFG(b.AFp))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();class Yf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(f0[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(wm(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(wm(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,n){if(n){e=n+":"+e;const s=f0[n];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const n=f0[i];n?t.removeAttributeNS(n,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,n){n&(b.JOm.DashCase|b.JOm.Important)?t.style.setProperty(e,i,n&b.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&b.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,jE(i)):this.eventManager.addEventListener(t,e,jE(i))}}function wm(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class UE extends Yf{constructor(t,e,i,n){super(t),this.component=i;const s=by(n+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function bm(r){return"_ngcontent-%COMP%".replace(zE,r)}(n+"-"+i.id),this.hostAttr=function m0(r){return"_nghost-%COMP%".replace(zE,r)}(n+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class WE extends Yf{constructor(t,e,i,n){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=by(n.id,n.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Sm=(()=>{class r extends vm{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,n){return e.addEventListener(i,n,!1),()=>this.removeEventListener(e,i,n)}removeEventListener(e,i,n){return e.removeEventListener(i,n)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();const Em=["alt","control","meta","shift"],xm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ku={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let Sy=(()=>{class r extends vm{constructor(e){super(e)}supports(e){return null!=r.parseEventName(e)}addEventListener(e,i,n){const s=r.parseEventName(i),o=r.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oe().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const i=e.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const s=r._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Em.forEach(h=>{const u=i.indexOf(h);u>-1&&(i.splice(u,1),o+=h+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=n,l.fullKey=o,l}static matchEventFullKeyCode(e,i){let n=xm[e.key]||e.key,s="";return i.indexOf("code.")>-1&&(n=e.code,s="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Em.forEach(o=>{o!==n&&(0,ku[o])(e)&&(s+=o+".")}),s+=n,s===i)}static eventCallback(e,i,n){return s=>{r.matchEventFullKeyCode(s,e)&&n.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();const xy=(0,b.eFA)(b._c5,"browser",[{provide:b.Lbi,useValue:"browser"},{provide:b.g9A,useValue:function v0(){mm.makeCurrent()},multi:!0},{provide:et,useFactory:function Im(){return(0,b.RDi)(document),document},deps:[]}]),Zf=new b.OlP(""),GE=[{provide:b.rWj,useClass:class WI{addToWindow(t){b.dqk.getAngularTestability=(i,n=!0)=>{const s=t.findTestabilityInTree(i,n);if(null==s)throw new Error("Could not find testability for element.");return s},b.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),b.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),b.dqk.frameworkStabilizers||(b.dqk.frameworkStabilizers=[]),b.dqk.frameworkStabilizers.push(i=>{const n=b.dqk.getAllAngularTestabilities();let s=n.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};n.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,i){return null==e?null:t.getTestability(e)??(i?oe().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:b.lri,useClass:b.dDg,deps:[b.R0b,b.eoX,b.rWj]},{provide:b.dDg,useClass:b.dDg,deps:[b.R0b,b.eoX,b.rWj]}],Xf=[{provide:b.zSh,useValue:"root"},{provide:b.qLn,useFactory:function Dm(){return new b.qLn},deps:[]},{provide:yy,useClass:Sm,multi:!0,deps:[et,b.R0b,b.Lbi]},{provide:yy,useClass:Sy,multi:!0,deps:[et]},{provide:Cy,useClass:Cy,deps:[d0,fp,b.AFp]},{provide:b.FYo,useExisting:Cy},{provide:ym,useExisting:fp},{provide:fp,useClass:fp,deps:[et]},{provide:d0,useClass:d0,deps:[yy,b.R0b]},{provide:Tl,useClass:qI,deps:[]},[]];let y0=(()=>{class r{constructor(e){}static withServerTransition(e){return{ngModule:r,providers:[{provide:b.AFp,useValue:e.appId},{provide:Ns,useExisting:b.AFp},UI]}}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Zf,12))},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[...Xf,...GE],imports:[Th,b.hGG]}),r})(),mp=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et))},r.\u0275prov=b.Yz7({token:r,factory:function(e){let i=null;return i=e?new e:function Qf(){return new mp((0,b.LFG)(et))}(),i},providedIn:"root"}),r})();typeof window<"u"&&window;var Ur=te(8996),ba=te(9751);const{isArray:DM}=Array,{getPrototypeOf:x0,prototype:Xl,keys:Gh}=Object;function T0(r){if(1===r.length){const t=r[0];if(DM(t))return{args:t,keys:null};if(function tg(r){return r&&"object"==typeof r&&x0(r)===Xl}(t)){const e=Gh(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:r,keys:null}}var Ih=te(8421),Ru=te(7669),Lo=te(5403),qi=te(4004);const{isArray:Ay}=Array;function Om(r){return(0,qi.U)(t=>function ig(r,t){return Ay(t)?r(...t):r(t)}(r,t))}function Dl(r,t){return r.reduce((e,i,n)=>(e[i]=t[n],e),{})}let yp=(()=>{class r{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.Qsj),b.Y36(b.SBq))},r.\u0275dir=b.lG2({type:r}),r})(),cd=(()=>{class r extends yp{}return r.\u0275fac=function(){let t;return function(i){return(t||(t=b.n5z(r)))(i||r)}}(),r.\u0275dir=b.lG2({type:r,features:[b.qOj]}),r})();const Ah=new b.OlP("NgValueAccessor"),I0={provide:Ah,useExisting:(0,b.Gpc)(()=>ky),multi:!0},A0=new b.OlP("CompositionEventMode");let ky=(()=>{class r extends yp{constructor(e,i,n){super(e,i),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ZI(){const r=oe()?oe().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.Qsj),b.Y36(b.SBq),b.Y36(A0,8))},r.\u0275dir=b.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&b.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[b._Bn([I0]),b.qOj]}),r})();function Ql(r){return null==r||("string"==typeof r||Array.isArray(r))&&0===r.length}function XI(r){return null!=r&&"number"==typeof r.length}const Bs=new b.OlP("NgValidators"),_u=new b.OlP("NgAsyncValidators"),Ry=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class _y{static min(t){return function Ly(r){return t=>{if(Ql(t.value)||Ql(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}(t)}static max(t){return function Oy(r){return t=>{if(Ql(t.value)||Ql(r))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}(t)}static required(t){return function k0(r){return Ql(r.value)?{required:!0}:null}(t)}static requiredTrue(t){return function dd(r){return!0===r.value?null:{required:!0}}(t)}static email(t){return function pd(r){return Ql(r.value)||Ry.test(r.value)?null:{email:!0}}(t)}static minLength(t){return function R0(r){return t=>Ql(t.value)||!XI(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function yo(r){return t=>XI(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}(t)}static pattern(t){return function _0(r){if(!r)return bp;let t,e;return"string"==typeof r?(e="","^"!==r.charAt(0)&&(e+="^"),e+=r,"$"!==r.charAt(r.length-1)&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),i=>{if(Ql(i.value))return null;const n=i.value;return t.test(n)?null:{pattern:{requiredPattern:e,actualValue:n}}}}(t)}static nullValidator(t){return null}static compose(t){return sg(t)}static composeAsync(t){return bc(t)}}function bp(r){return null}function Py(r){return null!=r}function ng(r){return(0,b.QGY)(r)?(0,Ur.D)(r):r}function My(r){let t={};return r.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function XE(r,t){return t.map(e=>e(r))}function rg(r){return r.map(t=>function QI(r){return!r.validate}(t)?t:e=>t.validate(e))}function sg(r){if(!r)return null;const t=r.filter(Py);return 0==t.length?null:function(e){return My(XE(e,t))}}function og(r){return null!=r?sg(rg(r)):null}function bc(r){if(!r)return null;const t=r.filter(Py);return 0==t.length?null:function(e){return function D0(...r){const t=(0,Ru.jO)(r),{args:e,keys:i}=T0(r),n=new ba.y(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,h=o;for(let u=0;u<o;u++){let d=!1;(0,Ih.Xf)(e[u]).subscribe((0,Lo.x)(s,m=>{d||(d=!0,h--),a[u]=m},()=>l--,void 0,()=>{(!l||!d)&&(h||s.next(i?Dl(i,a):a),s.complete())}))}});return t?n.pipe(Om(t)):n}(XE(e,t).map(ng)).pipe((0,qi.U)(My))}}function Mm(r){return null!=r?bc(rg(r)):null}function Fy(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function fd(r){return r._rawValidators}function Fm(r){return r._rawAsyncValidators}function Nm(r){return r?Array.isArray(r)?r:[r]:[]}function Bm(r,t){return Array.isArray(r)?r.includes(t):r===t}function L0(r,t){const e=Nm(t);return Nm(r).forEach(n=>{Bm(e,n)||e.push(n)}),e}function Cp(r,t){return Nm(t).filter(e=>!Bm(r,e))}class wp{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=og(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Mm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Oa extends wp{get formDirective(){return null}get path(){return null}}class Sp extends wp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class O0{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let QE=(()=>{class r extends O0{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Sp,2))},r.\u0275dir=b.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&b.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[b.qOj]}),r})(),Ny=(()=>{class r extends O0{constructor(e){super(e)}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Oa,10))},r.\u0275dir=b.lG2({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&b.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[b.qOj]}),r})();const Dp="VALID",zm="INVALID",Ip="PENDING",ag="DISABLED";function lg(r){return(Um(r)?r.validators:r)||null}function tx(r){return Array.isArray(r)?og(r):r||null}function jm(r,t){return(Um(t)?t.asyncValidators:r)||null}function ix(r){return Array.isArray(r)?Mm(r):r||null}function Um(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class hg{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=tx(this._rawValidators),this._composedAsyncValidatorFn=ix(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Dp}get invalid(){return this.status===zm}get pending(){return this.status==Ip}get disabled(){return this.status===ag}get enabled(){return this.status!==ag}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=tx(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ix(t)}addValidators(t){this.setValidators(L0(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(L0(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Cp(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Cp(t,this._rawAsyncValidators))}hasValidator(t){return Bm(this._rawValidators,t)}hasAsyncValidator(t){return Bm(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ip,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ag,this.errors=null,this._forEachChild(i=>{i.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Dp,this._forEachChild(i=>{i.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dp||this.status===Ip)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ag:Dp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ip,this._hasOwnPendingAsyncValidator=!0;const e=ng(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((i,n)=>i&&i._find(n),this)}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new b.vpe,this.statusChanges=new b.vpe}_calculateStatus(){return this._allControlsDisabled()?ag:this.errors?zm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ip)?Ip:this._anyControlsHaveStatus(zm)?zm:Dp}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Um(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}}class Wm extends hg{constructor(t,e,i){super(lg(e),jm(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){(function Kh(r,t,e){r._forEachChild((i,n)=>{if(void 0===e[n])throw new b.vHH(1002,"")})})(this,0,t),Object.keys(t).forEach(i=>{(function nx(r,t,e){const i=r.controls;if(!(t?Object.keys(i):i).length)throw new b.vHH(1e3,"");if(!i[e])throw new b.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{const n=this.controls[i];n&&n.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,n)=>{i.reset(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,i,n)=>((i.enabled||this.disabled)&&(e[n]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((n,s)=>{i=e(i,n,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}function ug(r,t){Cc(r,t),t.valueAccessor.writeValue(r.value),r.disabled&&t.valueAccessor.setDisabledState?.(!0),function wc(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&N0(r,t)})}(r,t),function Vy(r,t){const e=(i,n)=>{t.valueAccessor.writeValue(i),n&&t.viewToModelUpdate(i)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}(r,t),function Ap(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&N0(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function LM(r,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}(r,t)}function qm(r,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),cg(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function Hy(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Cc(r,t){const e=fd(r);null!==t.validator?r.setValidators(Fy(e,t.validator)):"function"==typeof e&&r.setValidators([e]);const i=Fm(r);null!==t.asyncValidator?r.setAsyncValidators(Fy(i,t.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const n=()=>r.updateValueAndValidity();Hy(t._rawValidators,n),Hy(t._rawAsyncValidators,n)}function cg(r,t){let e=!1;if(null!==r){if(null!==t.validator){const n=fd(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.validator);s.length!==n.length&&(e=!0,r.setValidators(s))}}if(null!==t.asyncValidator){const n=Fm(r);if(Array.isArray(n)&&n.length>0){const s=n.filter(o=>o!==t.asyncValidator);s.length!==n.length&&(e=!0,r.setAsyncValidators(s))}}}const i=()=>{};return Hy(t._rawValidators,i),Hy(t._rawAsyncValidators,i),e}function N0(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function B0(r,t){Cc(r,t)}function H0(r,t){r._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}const z0={provide:Oa,useExisting:(0,b.Gpc)(()=>gd)},dg=(()=>Promise.resolve())();let gd=(()=>{class r extends Oa{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new b.vpe,this.form=new Wm({},og(e),Mm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){dg.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),ug(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){dg.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){dg.then(()=>{const i=this._findContainer(e.path),n=new Wm({});B0(n,e),i.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){dg.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){dg.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,H0(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Bs,10),b.Y36(_u,10))},r.\u0275dir=b.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&b.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([z0]),b.qOj]}),r})();function Uy(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}function pg(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const kp=class extends hg{constructor(t=null,e,i){super(lg(e),jm(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Um(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=pg(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Uy(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Uy(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){pg(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};let md=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=b.lG2({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),r})(),W0=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({}),r})();const $m=new b.OlP("NgModelWithFormControlWarning"),fg={provide:Oa,useExisting:(0,b.Gpc)(()=>$h)};let $h=(()=>{class r extends Oa{constructor(e,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new b.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(cg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return ug(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){qm(e.control||null,e,!1),function sA(r,t){const e=r.indexOf(t);e>-1&&r.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,H0(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,n=this.form.get(e.path);i!==n&&(qm(i||null,e),(r=>r instanceof kp)(n)&&(ug(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);B0(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function OM(r,t){return cg(r,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cc(this.form,this),this._oldForm&&cg(this._oldForm,this)}_checkFormPresent(){}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Bs,10),b.Y36(_u,10))},r.\u0275dir=b.lG2({type:r,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&b.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[b._Bn([fg]),b.qOj,b.TTD]}),r})();const Ky={provide:Sp,useExisting:(0,b.Gpc)(()=>Ya)};let Ya=(()=>{class r extends Sp{constructor(e,i,n,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new b.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=function V0(r,t){if(!t)return null;let e,i,n;return Array.isArray(t),t.forEach(s=>{s.constructor===ky?e=s:function MM(r){return Object.getPrototypeOf(r.constructor)===cd}(s)?i=s:n=s}),n||i||e||null}(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function rx(r,t){if(!r.hasOwnProperty("model"))return!1;const e=r.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function F0(r,t){return[...t.path,r]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return r._ngModelWarningSentOnce=!1,r.\u0275fac=function(e){return new(e||r)(b.Y36(Oa,13),b.Y36(Bs,10),b.Y36(_u,10),b.Y36(Ah,10),b.Y36($m,8))},r.\u0275dir=b.lG2({type:r,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[b._Bn([Ky]),b.qOj,b.TTD]}),r})(),Qy=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[W0]}),r})(),bA=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[Qy]}),r})(),Zm=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:$m,useValue:e.warnOnNgModelWithFormControl}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[Qy]}),r})();function Oi(...r){const t=(0,Ru.yG)(r);return(0,Ur.D)(r,t)}var Za=te(5577),dx=te(576);function vd(r,t){return(0,dx.m)(t)?(0,Za.z)(r,t,1):(0,Za.z)(r,1)}var Xa=te(4482);function Rh(r,t){return(0,Xa.e)((e,i)=>{let n=0;e.subscribe((0,Lo.x)(i,s=>r.call(t,s,n++)&&i.next(s)))})}class Jy{}class zM{}class Op{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const n=e.slice(0,i),s=n.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(n,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const n=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(n,i),this.maybeSetNormalizedName(e,n))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Op?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Op;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Op?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const n=("a"===t.op?this.headers.get(e):void 0)||[];n.push(...i),this.headers.set(e,n);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class jM{encodeKey(t){return UM(t)}encodeValue(t){return UM(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const t5=/%(\d[a-f0-9])/gi,i5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function UM(r){return encodeURIComponent(r).replace(t5,(t,e)=>i5[e]??t)}function eb(r){return`${r}`}class vg{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new jM,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function e5(r,t){const e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(n=>{const s=n.indexOf("="),[o,a]=-1==s?[t.decodeKey(n),""]:[t.decodeKey(n.slice(0,s)),t.decodeValue(n.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e],n=Array.isArray(i)?i.map(eb):[eb(i)];this.map.set(e,n)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const n=t[i];Array.isArray(n)?n.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:n,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new vg({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(eb(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const n=i.indexOf(eb(t.value));-1!==n&&i.splice(n,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class n5{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function qM(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function GM(r){return typeof Blob<"u"&&r instanceof Blob}function Il(r){return typeof FormData<"u"&&r instanceof FormData}class tb{constructor(t,e,i,n){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function WM(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||n?(this.body=void 0!==i?i:null,s=n):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Op),this.context||(this.context=new n5),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new vg,this.urlWithParams=e}serializeBody(){return null===this.body?null:qM(this.body)||GM(this.body)||Il(this.body)||function SA(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof vg?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Il(this.body)?null:GM(this.body)?this.body.type||null:qM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof vg?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,i=t.url||this.url,n=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,h=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((d,m)=>d.set(m,t.setHeaders[m]),l)),t.setParams&&(h=Object.keys(t.setParams).reduce((d,m)=>d.set(m,t.setParams[m]),h)),new tb(e,i,s,{params:h,headers:l,context:u,reportProgress:a,responseType:n,withCredentials:o})}}var Oo=(()=>((Oo=Oo||{})[Oo.Sent=0]="Sent",Oo[Oo.UploadProgress=1]="UploadProgress",Oo[Oo.ResponseHeader=2]="ResponseHeader",Oo[Oo.DownloadProgress=3]="DownloadProgress",Oo[Oo.Response=4]="Response",Oo[Oo.User=5]="User",Oo))();class Qa{constructor(t,e=200,i="OK"){this.headers=t.headers||new Op,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Xm extends Qa{constructor(t={}){super(t),this.type=Oo.ResponseHeader}clone(t={}){return new Xm({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Q0 extends Qa{constructor(t={}){super(t),this.type=Oo.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Q0({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class KM extends Qa{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function EA(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let xA=(()=>{class r{constructor(e){this.handler=e}request(e,i,n={}){let s;if(e instanceof tb)s=e;else{let l,h;l=n.headers instanceof Op?n.headers:new Op(n.headers),n.params&&(h=n.params instanceof vg?n.params:new vg({fromObject:n.params})),s=new tb(e,i,void 0!==n.body?n.body:null,{headers:l,context:n.context,params:h,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const o=Oi(s).pipe(vd(l=>this.handler.handle(l)));if(e instanceof tb||"events"===n.observe)return o;const a=o.pipe(Rh(l=>l instanceof Q0));switch(n.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe((0,qi.U)(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe((0,qi.U)(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe((0,qi.U)(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe((0,qi.U)(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new vg).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,n={}){return this.request("PATCH",e,EA(n,i))}post(e,i,n={}){return this.request("POST",e,EA(n,i))}put(e,i,n={}){return this.request("PUT",e,EA(n,i))}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Jy))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();class $M{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const TA=new b.OlP("HTTP_INTERCEPTORS");let r5=(()=>{class r{intercept(e,i){return i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();const o5=/^\)\]\}',?\n/;let a5=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ba.y(i=>{const n=this.xhrFactory.build();if(n.open(e.method,e.urlWithParams),e.withCredentials&&(n.withCredentials=!0),e.headers.forEach((v,C)=>n.setRequestHeader(v,C.join(","))),e.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const v=e.detectContentTypeHeader();null!==v&&n.setRequestHeader("Content-Type",v)}if(e.responseType){const v=e.responseType.toLowerCase();n.responseType="json"!==v?v:"text"}const s=e.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const v=n.statusText||"OK",C=new Op(n.getAllResponseHeaders()),S=function ZY(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(n)||e.url;return o=new Xm({headers:C,status:n.status,statusText:v,url:S}),o},l=()=>{let{headers:v,status:C,statusText:S,url:A}=a(),_=null;204!==C&&(_=typeof n.response>"u"?n.responseText:n.response),0===C&&(C=_?200:0);let M=C>=200&&C<300;if("json"===e.responseType&&"string"==typeof _){const P=_;_=_.replace(o5,"");try{_=""!==_?JSON.parse(_):null}catch(B){_=P,M&&(M=!1,_={error:B,text:_})}}M?(i.next(new Q0({body:_,headers:v,status:C,statusText:S,url:A||void 0})),i.complete()):i.error(new KM({error:_,headers:v,status:C,statusText:S,url:A||void 0}))},h=v=>{const{url:C}=a(),S=new KM({error:v,status:n.status||0,statusText:n.statusText||"Unknown Error",url:C||void 0});i.error(S)};let u=!1;const d=v=>{u||(i.next(a()),u=!0);let C={type:Oo.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(C.total=v.total),"text"===e.responseType&&!!n.responseText&&(C.partialText=n.responseText),i.next(C)},m=v=>{let C={type:Oo.UploadProgress,loaded:v.loaded};v.lengthComputable&&(C.total=v.total),i.next(C)};return n.addEventListener("load",l),n.addEventListener("error",h),n.addEventListener("timeout",h),n.addEventListener("abort",h),e.reportProgress&&(n.addEventListener("progress",d),null!==s&&n.upload&&n.upload.addEventListener("progress",m)),n.send(s),i.next({type:Oo.Sent}),()=>{n.removeEventListener("error",h),n.removeEventListener("abort",h),n.removeEventListener("load",l),n.removeEventListener("timeout",h),e.reportProgress&&(n.removeEventListener("progress",d),null!==s&&n.upload&&n.upload.removeEventListener("progress",m)),n.readyState!==n.DONE&&n.abort()}})}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Tl))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();const px=new b.OlP("XSRF_COOKIE_NAME"),YM=new b.OlP("XSRF_HEADER_NAME");class Sc{}let DA=(()=>{class r{constructor(e,i,n){this.doc=e,this.platform=i,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=$o(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(et),b.LFG(b.Lbi),b.LFG(px))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})(),ew=(()=>{class r{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Sc),b.LFG(YM))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})(),l5=(()=>{class r{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(TA,[]);this.chain=i.reduceRight((n,s)=>new $M(n,s),this.backend)}return this.chain.handle(e)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(zM),b.LFG(b.zs3))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})(),tw=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:ew,useClass:r5}]}}static withOptions(e={}){return{ngModule:r,providers:[e.cookieName?{provide:px,useValue:e.cookieName}:[],e.headerName?{provide:YM,useValue:e.headerName}:[]]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[ew,{provide:TA,useExisting:ew,multi:!0},{provide:Sc,useClass:DA},{provide:px,useValue:"XSRF-TOKEN"},{provide:YM,useValue:"X-XSRF-TOKEN"}]}),r})(),u5=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[xA,{provide:Jy,useClass:l5},a5,{provide:zM,useExisting:a5}],imports:[tw.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),r})();var Lu=te(7579);class Ou extends Lu.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}const Pp=(0,te(3888).d)(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});var bg=te(4671),XM=te(9672);function QM(...r){const t=(0,Ru.yG)(r),e=(0,Ru.jO)(r),{args:i,keys:n}=T0(r);if(0===i.length)return(0,Ur.D)([],t);const s=new ba.y(function IA(r,t,e=bg.y){return i=>{JM(t,()=>{const{length:n}=r,s=new Array(n);let o=n,a=n;for(let l=0;l<n;l++)JM(t,()=>{const h=(0,Ur.D)(r[l],t);let u=!1;h.subscribe((0,Lo.x)(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(e(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,t,n?o=>Dl(n,o):bg.y));return e?s.pipe(Om(e)):s}function JM(r,t,e){r?(0,XM.f)(e,r,t):t()}var iw=te(8189);function AA(...r){return function c5(){return(0,iw.J)(1)}()((0,Ur.D)(r,(0,Ru.yG)(r)))}function e1(r){return new ba.y(t=>{(0,Ih.Xf)(r()).subscribe(t)})}var d5=te(9635);function ib(r,t){const e=(0,dx.m)(r)?r:()=>r,i=n=>n.error(e());return new ba.y(t?n=>t.schedule(i,0,n):i)}var Mp=te(515),kA=te(727);function nw(){return(0,Xa.e)((r,t)=>{let e=null;r._refCount++;const i=(0,Lo.x)(t,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount)return void(e=null);const n=r._connection,s=e;e=null,n&&(!s||n===s)&&n.unsubscribe(),t.unsubscribe()});r.subscribe(i),i.closed||(e=r.connect())})}class t1 extends ba.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,Xa.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new kA.w0;const e=this.getSubject();t.add(this.source.subscribe((0,Lo.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=kA.w0.EMPTY)}return t}refCount(){return nw()(this)}}function Qo(r,t){return(0,Xa.e)((e,i)=>{let n=null,s=0,o=!1;const a=()=>o&&!n&&i.complete();e.subscribe((0,Lo.x)(i,l=>{n?.unsubscribe();let h=0;const u=s++;(0,Ih.Xf)(r(l,u)).subscribe(n=(0,Lo.x)(i,d=>i.next(t?t(l,d,u,h++):d),()=>{n=null,a()}))},()=>{o=!0,a()}))})}function nb(r){return r<=0?()=>Mp.E:(0,Xa.e)((t,e)=>{let i=0;t.subscribe((0,Lo.x)(e,n=>{++i<=r&&(e.next(n),r<=i&&e.complete())}))})}function rw(...r){const t=(0,Ru.yG)(r);return(0,Xa.e)((e,i)=>{(t?AA(r,e,t):AA(r,e)).subscribe(i)})}function yd(r){return(0,Xa.e)((t,e)=>{let i=!1;t.subscribe((0,Lo.x)(e,n=>{i=!0,e.next(n)},()=>{i||e.next(r),e.complete()}))})}function RA(r=i1){return(0,Xa.e)((t,e)=>{let i=!1;t.subscribe((0,Lo.x)(e,n=>{i=!0,e.next(n)},()=>i?e.complete():e.error(r())))})}function i1(){return new Pp}function Fp(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Rh((n,s)=>r(n,s,i)):bg.y,nb(1),e?yd(t):RA(()=>new Pp))}var Jl=te(8505);function Ec(r){return(0,Xa.e)((t,e)=>{let s,i=null,n=!1;i=t.subscribe((0,Lo.x)(e,void 0,void 0,o=>{s=(0,Ih.Xf)(r(o,Ec(r)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):n=!0})),n&&(i.unsubscribe(),i=null,s.subscribe(e))})}function p5(r,t,e,i,n){return(s,o)=>{let a=e,l=t,h=0;s.subscribe((0,Lo.x)(o,u=>{const d=h++;l=a?r(l,u,d):(a=!0,u),i&&o.next(l)},n&&(()=>{a&&o.next(l),o.complete()})))}}function Cg(r,t){return(0,Xa.e)(p5(r,t,arguments.length>=2,!0))}function fx(r){return r<=0?()=>Mp.E:(0,Xa.e)((t,e)=>{let i=[];t.subscribe((0,Lo.x)(e,n=>{i.push(n),r<i.length&&i.shift()},()=>{for(const n of i)e.next(n);e.complete()},void 0,()=>{i=null}))})}function _A(r,t){const e=arguments.length>=2;return i=>i.pipe(r?Rh((n,s)=>r(n,s,i)):bg.y,fx(1),e?yd(t):RA(()=>new Pp))}function rb(r){return(0,Xa.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(r)}})}const Wn="primary",sb=Symbol("RouteTitle");class OA{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Qm(r){return new OA(r)}function PA(r,t,e){const i=e.path.split("/");if(i.length>r.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<r.length))return null;const n={};for(let s=0;s<i.length;s++){const o=i[s],a=r[s];if(o.startsWith(":"))n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function bd(r,t){const e=r?Object.keys(r):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let n;for(let s=0;s<e.length;s++)if(n=e[s],!MA(r[n],t[n]))return!1;return!0}function MA(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const e=[...r].sort(),i=[...t].sort();return e.every((n,s)=>i[s]===n)}return r===t}function r1(r){return Array.prototype.concat.apply([],r)}function s1(r){return r.length>0?r[r.length-1]:null}function Pa(r,t){for(const e in r)r.hasOwnProperty(e)&&t(r[e],e)}function Np(r){return(0,b.CqO)(r)?r:(0,b.QGY)(r)?(0,Ur.D)(Promise.resolve(r)):Oi(r)}const g5={exact:function Pu(r,t,e){if(!ev(r.segments,t.segments)||!gx(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!r.children[i]||!Pu(r.children[i],t.children[i],e))return!1;return!0},subset:NA},FA={exact:function m5(r,t){return bd(r,t)},subset:function v5(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>MA(r[e],t[e]))},ignored:()=>!0};function l1(r,t,e){return g5[e.paths](r.root,t.root,e.matrixParams)&&FA[e.queryParams](r.queryParams,t.queryParams)&&!("exact"===e.fragment&&r.fragment!==t.fragment)}function NA(r,t,e){return h1(r,t,t.segments,e)}function h1(r,t,e,i){if(r.segments.length>e.length){const n=r.segments.slice(0,e.length);return!(!ev(n,e)||t.hasChildren()||!gx(n,e,i))}if(r.segments.length===e.length){if(!ev(r.segments,e)||!gx(r.segments,e,i))return!1;for(const n in t.children)if(!r.children[n]||!NA(r.children[n],t.children[n],i))return!1;return!0}{const n=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!!(ev(r.segments,n)&&gx(r.segments,n,i)&&r.children[Wn])&&h1(r.children[Wn],t,s,i)}}function gx(r,t,e){return t.every((i,n)=>FA[e](r[n].parameters,i.parameters))}class Jm{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qm(this.queryParams)),this._queryParamMap}toString(){return u1.serialize(this)}}class fr{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Pa(e,(i,n)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ow(this)}}class ob{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Qm(this.parameters)),this._parameterMap}toString(){return w5(this)}}function ev(r,t){return r.length===t.length&&r.every((e,i)=>e.path===t[i].path)}let Pn=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:function(){return new mx},providedIn:"root"}),r})();class mx{parse(t){const e=new tZ(t);return new Jm(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${aw(t.root,!0)}`,i=function f1(r){const t=Object.keys(r).map(e=>{const i=r[e];return Array.isArray(i)?i.map(n=>`${lw(e)}=${lw(n)}`).join("&"):`${lw(e)}=${lw(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function C5(r){return encodeURI(r)}(t.fragment)}`:""}`}}const u1=new mx;function ow(r){return r.segments.map(t=>w5(t)).join("/")}function aw(r,t){if(!r.hasChildren())return ow(r);if(t){const e=r.children[Wn]?aw(r.children[Wn],!1):"",i=[];return Pa(r.children,(n,s)=>{s!==Wn&&i.push(`${s}:${aw(n,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function b5(r,t){let e=[];return Pa(r.children,(i,n)=>{n===Wn&&(e=e.concat(t(i,n)))}),Pa(r.children,(i,n)=>{n!==Wn&&(e=e.concat(t(i,n)))}),e}(r,(i,n)=>n===Wn?[aw(r.children[Wn],!1)]:[`${n}:${aw(i,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[Wn]?`${ow(r)}/${e[0]}`:`${ow(r)}/(${e.join("//")})`}}function c1(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lw(r){return c1(r).replace(/%3B/gi,";")}function vx(r){return c1(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yx(r){return decodeURIComponent(r)}function d1(r){return yx(r.replace(/\+/g,"%20"))}function w5(r){return`${vx(r.path)}${function p1(r){return Object.keys(r).map(t=>`;${vx(t)}=${vx(r[t])}`).join("")}(r.parameters)}`}const tv=/^[^\/()?;=#]+/;function bx(r){const t=r.match(tv);return t?t[0]:""}const BA=/^[^=?&#]+/,S5=/^[^&#]+/;class tZ{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fr([],{}):new fr([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[Wn]=new fr(t,e)),i}parseSegment(){const t=bx(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new b.vHH(4009,!1);return this.capture(t),new ob(yx(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=bx(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const n=bx(this.remaining);n&&(i=n,this.capture(i))}t[yx(e)]=yx(i)}parseQueryParam(t){const e=function HA(r){const t=r.match(BA);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const o=function eZ(r){const t=r.match(S5);return t?t[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const n=d1(e),s=d1(i);if(t.hasOwnProperty(n)){let o=t[n];Array.isArray(o)||(o=[o],t[n]=o),o.push(s)}else t[n]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=bx(this.remaining),n=this.remaining[i.length];if("/"!==n&&")"!==n&&";"!==n)throw new b.vHH(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Wn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[Wn]:new fr([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new b.vHH(4011,!1)}}function g1(r){return r.segments.length>0?new fr([],{[Wn]:r}):r}function Cx(r){const t={};for(const i of Object.keys(r.children)){const s=Cx(r.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function m1(r){if(1===r.numberOfChildren&&r.children[Wn]){const t=r.children[Wn];return new fr(r.segments.concat(t.segments),t.children)}return r}(new fr(r.segments,t))}function ab(r){return r instanceof Jm}function wx(r,t,e,i,n){if(0===e.length)return hb(t.root,t.root,t.root,i,n);const s=function C1(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new b1(!0,0,r);let t=0,e=!1;const i=r.reduce((n,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Pa(s.outlets,(l,h)=>{a[h]="string"==typeof l?l.split("/"):l}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return"string"!=typeof s?[...n,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&n.push(a))}),n):[...n,s]},[]);return new b1(e,t,i)}(e);return s.toRoot()?hb(t.root,t.root,new fr([],{}),i,n):function o(l){const h=function x5(r,t,e,i){if(r.isAbsolute)return new ub(t.root,!0,0);if(-1===i)return new ub(e,e===t.root,0);return function zA(r,t,e){let i=r,n=t,s=e;for(;s>n;){if(s-=n,i=i.parent,!i)throw new b.vHH(4005,!1);n=i.segments.length}return new ub(i,!1,n-s)}(e,i+(uw(r.commands[0])?0:1),r.numberOfDoubleDots)}(s,t,r.snapshot?._urlSegment,l),u=h.processChildren?Sx(h.segmentGroup,h.index,s.commands):cw(h.segmentGroup,h.index,s.commands);return hb(t.root,h.segmentGroup,u,i,n)}(r.snapshot?._lastPathIndex)}function uw(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function lb(r){return"object"==typeof r&&null!=r&&r.outlets}function hb(r,t,e,i,n){let o,s={};i&&Pa(i,(l,h)=>{s[h]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=r===t?e:y1(r,t,e);const a=g1(Cx(o));return new Jm(a,s,n)}function y1(r,t,e){const i={};return Pa(r.children,(n,s)=>{i[s]=n===t?e:y1(n,t,e)}),new fr(r.segments,i)}class b1{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&uw(i[0]))throw new b.vHH(4003,!1);const n=i.find(lb);if(n&&n!==s1(i))throw new b.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ub{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function cw(r,t,e){if(r||(r=new fr([],{})),0===r.segments.length&&r.hasChildren())return Sx(r,t,e);const i=function jA(r,t,e){let i=0,n=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=e.length)return s;const o=r.segments[n],a=e[i];if(lb(a))break;const l=`${a}`,h=i<e.length-1?e[i+1]:null;if(n>0&&void 0===l)break;if(l&&h&&"object"==typeof h&&void 0===h.outlets){if(!WA(l,h,o))return s;i+=2}else{if(!WA(l,{},o))return s;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}(r,t,e),n=e.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){const s=new fr(r.segments.slice(0,i.pathIndex),{});return s.children[Wn]=new fr(r.segments.slice(i.pathIndex),r.children),Sx(s,0,n)}return i.match&&0===n.length?new fr(r.segments,{}):i.match&&!r.hasChildren()?UA(r,t,e):i.match?Sx(r,0,n):UA(r,t,e)}function Sx(r,t,e){if(0===e.length)return new fr(r.segments,{});{const i=function S1(r){return lb(r[0])?r[0].outlets:{[Wn]:r}}(e),n={};return Pa(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(n[o]=cw(r.children[o],t,s))}),Pa(r.children,(s,o)=>{void 0===i[o]&&(n[o]=s)}),new fr(r.segments,n)}}function UA(r,t,e){const i=r.segments.slice(0,t);let n=0;for(;n<e.length;){const s=e[n];if(lb(s)){const l=iZ(s.outlets);return new fr(i,l)}if(0===n&&uw(e[0])){i.push(new ob(r.segments[t].path,iv(e[0]))),n++;continue}const o=lb(s)?s.outlets[Wn]:`${s}`,a=n<e.length-1?e[n+1]:null;o&&a&&uw(a)?(i.push(new ob(o,iv(a))),n+=2):(i.push(new ob(o,{})),n++)}return new fr(i,{})}function iZ(r){const t={};return Pa(r,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=UA(new fr([],{}),0,e))}),t}function iv(r){const t={};return Pa(r,(e,i)=>t[i]=`${e}`),t}function WA(r,t,e){return r==e.path&&bd(t,e.parameters)}class Cd{constructor(t,e){this.id=t,this.url=e}}class cb extends Cd{constructor(t,e,i="imperative",n=null){super(t,e),this.type=0,this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ll extends Cd{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dw extends Cd{constructor(t,e,i,n){super(t,e),this.reason=i,this.code=n,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class E1 extends Cd{constructor(t,e,i,n){super(t,e),this.error=i,this.target=n,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qA extends Cd{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bp extends Cd{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class GA extends Cd{constructor(t,e,i,n,s){super(t,e),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x1 extends Cd{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class KA extends Cd{constructor(t,e,i,n){super(t,e),this.urlAfterRedirects=i,this.state=n,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nZ{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class T1{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class rZ{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ex{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xx{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $A{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tx{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class T5{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ZA(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=ZA(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=XA(t,this._root);return e.length<2?[]:e[e.length-2].children.map(n=>n.value).filter(n=>n!==t)}pathFromRoot(t){return XA(t,this._root).map(e=>e.value)}}function ZA(r,t){if(r===t.value)return t;for(const e of t.children){const i=ZA(r,e);if(i)return i}return null}function XA(r,t){if(r===t.value)return[t];for(const e of t.children){const i=XA(r,e);if(i.length)return i.unshift(t),i}return[]}class Hp{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function db(r){const t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}class QA extends T5{constructor(t,e){super(t),this.snapshot=e,I1(this,t)}toString(){return this.snapshot.toString()}}function D5(r,t){const e=function I5(r,t){const o=new Dx([],{},{},"",{},Wn,t,null,r.root,-1,{});return new Ix("",new Hp(o,[]))}(r,t),i=new Ou([new ob("",{})]),n=new Ou({}),s=new Ou({}),o=new Ou({}),a=new Ou(""),l=new pb(i,n,o,a,s,Wn,t,e.root);return l.snapshot=e.root,new QA(new Hp(l,[]),e)}class pb{constructor(t,e,i,n,s,o,a,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe((0,qi.U)(h=>h[sb]))??Oi(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,qi.U)(t=>Qm(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,qi.U)(t=>Qm(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function JA(r,t="emptyOnly"){const e=r.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const n=e[i],s=e[i-1];if(n.routeConfig&&""===n.routeConfig.path)i--;else{if(s.component)break;i--}}return function D1(r){return r.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(i))}class Dx{constructor(t,e,i,n,s,o,a,l,h,u,d,m){this.url=t,this.params=e,this.queryParams=i,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.[sb],this.routeConfig=l,this._urlSegment=h,this._lastPathIndex=u,this._correctedLastPathIndex=m??u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Qm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Qm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ix extends T5{constructor(t,e){super(e),this.url=t,I1(this,e)}toString(){return A5(this._root)}}function I1(r,t){t.value._routerState=r,t.children.forEach(e=>I1(r,e))}function A5(r){const t=r.children.length>0?` { ${r.children.map(A5).join(", ")} } `:"";return`${r.value}${t}`}function A1(r){if(r.snapshot){const t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,bd(t.queryParams,e.queryParams)||r.queryParams.next(e.queryParams),t.fragment!==e.fragment&&r.fragment.next(e.fragment),bd(t.params,e.params)||r.params.next(e.params),function sw(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!bd(r[e],t[e]))return!1;return!0}(t.url,e.url)||r.url.next(e.url),bd(t.data,e.data)||r.data.next(e.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function k1(r,t){const e=bd(r.params,t.params)&&function y5(r,t){return ev(r,t)&&r.every((e,i)=>bd(e.parameters,t[i].parameters))}(r.url,t.url);return e&&!(!r.parent!=!t.parent)&&(!r.parent||k1(r.parent,t.parent))}function Ax(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const n=function oZ(r,t,e){return t.children.map(i=>{for(const n of e.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return Ax(r,i,n);return Ax(r,i)})}(r,t,e);return new Hp(i,n)}{if(r.shouldAttach(t.value)){const s=r.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Ax(r,a)),o}}const i=function aZ(r){return new pb(new Ou(r.url),new Ou(r.params),new Ou(r.queryParams),new Ou(r.fragment),new Ou(r.data),r.outlet,r.component,r)}(t.value),n=t.children.map(s=>Ax(r,s));return new Hp(i,n)}}const R1="ngNavigationCancelingError";function k5(r,t){const{redirectTo:e,navigationBehaviorOptions:i}=ab(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,n=Vp(!1,0,t);return n.url=e,n.navigationBehaviorOptions=i,n}function Vp(r,t,e){const i=new Error("NavigationCancelingError: "+(r||""));return i[R1]=!0,i.cancellationCode=t,e&&(i.url=e),i}function kx(r){return _1(r)&&ab(r.url)}function _1(r){return r&&r[R1]}class L1{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new nv,this.attachRef=null}}let nv=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,i){const n=this.getOrCreateContext(e);n.outlet=i,this.contexts.set(e,n)}onChildOutletDestroyed(e){const i=this.getContext(e);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let i=this.getContext(e);return i||(i=new L1,this.contexts.set(e,i)),i}getContext(e){return this.contexts.get(e)||null}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const pw=!1;let fw=(()=>{class r{constructor(e,i,n,s,o){this.parentContexts=e,this.location=i,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new b.vpe,this.deactivateEvents=new b.vpe,this.attachEvents=new b.vpe,this.detachEvents=new b.vpe,this.name=n||Wn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b.vHH(4012,pw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b.vHH(4012,pw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b.vHH(4012,pw);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new b.vHH(4013,pw);this._activatedRoute=e;const n=this.location,o=e._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new R5(e,a,n.injector);if(i&&function wg(r){return!!r.resolveComponentFactory}(i)){const h=i.resolveComponentFactory(o);this.activated=n.createComponent(h,n.length,l)}else this.activated=n.createComponent(o,{index:n.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(nv),b.Y36(b.s_b),b.$8M("name"),b.Y36(b.sBO),b.Y36(b.lqb))},r.\u0275dir=b.lG2({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),r})();class R5{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===pb?this.route:t===nv?this.childContexts:this.parent.get(t,e)}}let Rx=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["ng-component"]],standalone:!0,features:[b.jDz],decls:1,vars:0,template:function(e,i){1&e&&b._UZ(0,"router-outlet")},dependencies:[fw],encapsulation:2}),r})();function O1(r,t){return r.providers&&!r._injector&&(r._injector=(0,b.MMx)(r.providers,t,`Route: ${r.path}`)),r._injector??t}function gw(r){const t=r.children&&r.children.map(gw),e=t?{...r,children:t}:{...r};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Wn&&(e.component=Rx),e}function eh(r){return r.outlet||Wn}function tk(r,t){const e=r.filter(i=>eh(i)===t);return e.push(...r.filter(i=>eh(i)!==t)),e}function vb(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class nk{constructor(t,e,i,n){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=n}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),A1(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const n=db(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,n[o],i),delete n[o]}),Pa(n,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(n===s)if(n.component){const o=i.getContext(n.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=db(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),n=i&&t.value.component?i.children:e,s=db(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],n);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const n=db(e);t.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],i),this.forwardEvent(new $A(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Ex(t.value.snapshot))}activateRoutes(t,e,i){const n=t.value,s=e?e.value:null;if(A1(n),n===s)if(n.component){const o=i.getOrCreateContext(n.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(n.component){const o=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){const a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),A1(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=vb(n.snapshot),l=a?.get(b._Vd)??null;o.attachRef=null,o.route=n,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}}class rk{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class yb{constructor(t,e){this.component=t,this.route=e}}function L5(r,t,e){const i=r._root;return Cb(i,t?t._root:null,e,[i.value])}function bb(r,t){const e=Symbol(),i=t.get(r,e);return i===e?"function"!=typeof r||(0,b.Z0I)(r)?t.get(r):r:i}function Cb(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=db(t);return r.children.forEach(o=>{(function O5(r,t,e,i,n={canDeactivateChecks:[],canActivateChecks:[]}){const s=r.value,o=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function P1(r,t,e){if("function"==typeof e)return e(r,t);switch(e){case"pathParamsChange":return!ev(r.url,t.url);case"pathParamsOrQueryParamsChange":return!ev(r.url,t.url)||!bd(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!k1(r,t)||!bd(r.queryParams,t.queryParams);default:return!k1(r,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new rk(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Cb(r,t,s.component?a?a.children:null:e,i,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new yb(a.outlet.component,o))}else o&&wb(t,a,n),n.canActivateChecks.push(new rk(i)),Cb(r,null,s.component?a?a.children:null:e,i,n)})(o,s[o.value.outlet],e,i.concat([o.value]),n),delete s[o.value.outlet]}),Pa(s,(o,a)=>wb(o,e.getContext(a),n)),n}function wb(r,t,e){const i=db(r),n=r.value;Pa(i,(s,o)=>{wb(s,n.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new yb(n.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,n))}function mw(r){return"function"==typeof r}function ok(r){return r instanceof Pp||"EmptyError"===r?.name}const _x=Symbol("INITIAL_VALUE");function rv(){return Qo(r=>QM(r.map(t=>t.pipe(nb(1),rw(_x)))).pipe((0,qi.U)(t=>{for(const e of t)if(!0!==e){if(e===_x)return _x;if(!1===e||e instanceof Jm)return e}return!0}),Rh(t=>t!==_x),nb(1)))}function H1(r){return(0,d5.z)((0,Jl.b)(t=>{if(ab(t))throw k5(0,t)}),(0,qi.U)(t=>!0===t))}const V1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lk(r,t,e,i,n){const s=hk(r,t,e);return s.matched?function j5(r,t,e,i){const n=t.canMatch;return n&&0!==n.length?Oi(n.map(o=>{const a=bb(o,r);return Np(function sk(r){return r&&mw(r.canMatch)}(a)?a.canMatch(t,e):r.runInContext(()=>a(t,e)))})).pipe(rv(),H1()):Oi(!0)}(i=O1(t,i),t,e).pipe((0,qi.U)(o=>!0===o?s:{...V1})):Oi(s)}function hk(r,t,e){if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||e.length>0)?{...V1}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const n=(t.matcher||PA)(e,r,t);if(!n)return{...V1};const s={};Pa(n.posParams,(a,l)=>{s[l]=a.path});const o=n.consumed.length>0?{...s,...n.consumed[n.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:e.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function Lx(r,t,e,i,n="corrected"){if(e.length>0&&function W5(r,t,e){return e.some(i=>sv(r,t,i)&&eh(i)!==Wn)}(r,e,i)){const o=new fr(t,function uk(r,t,e,i){const n={};n[Wn]=i,i._sourceSegment=r,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&eh(s)!==Wn){const o=new fr([],{});o._sourceSegment=r,o._segmentIndexShift=t.length,n[eh(s)]=o}return n}(r,t,i,new fr(e,r.children)));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===e.length&&function q5(r,t,e){return e.some(i=>sv(r,t,i))}(r,e,i)){const o=new fr(r.segments,function U5(r,t,e,i,n,s){const o={};for(const a of i)if(sv(r,e,a)&&!n[eh(a)]){const l=new fr([],{});l._sourceSegment=r,l._segmentIndexShift="legacy"===s?r.segments.length:t.length,o[eh(a)]=l}return{...n,...o}}(r,t,e,i,r.children,n));return o._sourceSegment=r,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:e}}const s=new fr(r.segments,r.children);return s._sourceSegment=r,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function sv(r,t,e){return(!(r.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function Ox(r,t,e,i){return!!(eh(r)===i||i!==Wn&&sv(t,e,r))&&("**"===r.path||hk(t,r,e).matched)}function vw(r,t,e){return 0===t.length&&!r.children[e]}const ck=!1;class Sb{constructor(t){this.segmentGroup=t||null}}class G5{constructor(t){this.urlTree=t}}function Eb(r){return ib(new Sb(r))}function dk(r){return ib(new G5(r))}class zp{constructor(t,e,i,n,s){this.injector=t,this.configLoader=e,this.urlSerializer=i,this.urlTree=n,this.config=s,this.allowRedirects=!0}apply(){const t=Lx(this.urlTree.root,[],[],this.config).segmentGroup,e=new fr(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,Wn).pipe((0,qi.U)(s=>this.createUrlTree(Cx(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ec(s=>{if(s instanceof G5)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Sb?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Wn).pipe((0,qi.U)(n=>this.createUrlTree(Cx(n),t.queryParams,t.fragment))).pipe(Ec(n=>{throw n instanceof Sb?this.noMatchError(n):n}))}noMatchError(t){return new b.vHH(4002,ck)}createUrlTree(t,e,i){const n=g1(t);return new Jm(n,e,i)}expandSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,qi.U)(s=>new fr([],s))):this.expandSegment(t,i,e,i.segments,n,!0)}expandChildren(t,e,i){const n=[];for(const s of Object.keys(i.children))"primary"===s?n.unshift(s):n.push(s);return(0,Ur.D)(n).pipe(vd(s=>{const o=i.children[s],a=tk(e,s);return this.expandSegmentGroup(t,a,o,s).pipe((0,qi.U)(l=>({segment:l,outlet:s})))}),Cg((s,o)=>(s[o.outlet]=o.segment,s),{}),_A())}expandSegment(t,e,i,n,s,o){return(0,Ur.D)(i).pipe(vd(a=>this.expandSegmentAgainstRoute(t,e,i,a,n,s,o).pipe(Ec(h=>{if(h instanceof Sb)return Oi(null);throw h}))),Fp(a=>!!a),Ec((a,l)=>{if(ok(a))return vw(e,n,s)?Oi(new fr([],{})):Eb(e);throw a}))}expandSegmentAgainstRoute(t,e,i,n,s,o,a){return Ox(n,e,s,o)?void 0===n.redirectTo?this.matchSegmentAgainstRoute(t,e,n,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o):Eb(e):Eb(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){return"**"===n.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,n,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,n){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?dk(s):this.lineralizeSegments(i,s).pipe((0,Za.z)(o=>{const a=new fr(o,{});return this.expandSegment(t,a,e,o,n,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,n,s,o){const{matched:a,consumedSegments:l,remainingSegments:h,positionalParamSegments:u}=hk(e,n,s);if(!a)return Eb(e);const d=this.applyRedirectCommands(l,n.redirectTo,u);return n.redirectTo.startsWith("/")?dk(d):this.lineralizeSegments(n,d).pipe((0,Za.z)(m=>this.expandSegment(t,e,i,m.concat(h),o,!1)))}matchSegmentAgainstRoute(t,e,i,n,s){return"**"===i.path?(t=O1(i,t),i.loadChildren?(i._loadedRoutes?Oi({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(t,i)).pipe((0,qi.U)(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new fr(n,{})))):Oi(new fr(n,{}))):lk(e,i,n,t).pipe(Qo(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=i._injector??t,i,n).pipe((0,Za.z)(u=>{const d=u.injector??t,m=u.routes,{segmentGroup:v,slicedSegments:C}=Lx(e,a,l,m),S=new fr(v.segments,v.children);if(0===C.length&&S.hasChildren())return this.expandChildren(d,m,S).pipe((0,qi.U)(P=>new fr(a,P)));if(0===m.length&&0===C.length)return Oi(new fr(a,{}));const A=eh(i)===s;return this.expandSegment(d,S,m,C,A?Wn:s,!0).pipe((0,qi.U)(M=>new fr(a.concat(M.segments),M.children)))})):Eb(e)))}getChildConfig(t,e,i){return e.children?Oi({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?Oi({routes:e._loadedRoutes,injector:e._loadedInjector}):function ak(r,t,e,i){const n=t.canLoad;return void 0===n||0===n.length?Oi(!0):Oi(n.map(o=>{const a=bb(o,r);return Np(function M1(r){return r&&mw(r.canLoad)}(a)?a.canLoad(t,e):r.runInContext(()=>a(t,e)))})).pipe(rv(),H1())}(t,e,i).pipe((0,Za.z)(n=>n?this.configLoader.loadChildren(t,e).pipe((0,Jl.b)(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function j1(r){return ib(Vp(ck,3))}())):Oi({routes:[],injector:t})}lineralizeSegments(t,e){let i=[],n=e.root;for(;;){if(i=i.concat(n.segments),0===n.numberOfChildren)return Oi(i);if(n.numberOfChildren>1||!n.children[Wn])return ib(new b.vHH(4e3,ck));n=n.children[Wn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreateUrlTree(t,e,i,n){const s=this.createSegmentGroup(t,e.root,i,n);return new Jm(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return Pa(t,(n,s)=>{if("string"==typeof n&&n.startsWith(":")){const a=n.substring(1);i[s]=e[a]}else i[s]=n}),i}createSegmentGroup(t,e,i,n){const s=this.createSegments(t,e.segments,i,n);let o={};return Pa(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,i,n)}),new fr(s,o)}createSegments(t,e,i,n){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,n):this.findOrReturn(s,i))}findPosParam(t,e,i){const n=i[e.path.substring(1)];if(!n)throw new b.vHH(4001,ck);return n}findOrReturn(t,e){let i=0;for(const n of e){if(n.path===t.path)return e.splice(i),n;i++}return t}}class yw{}class U1{constructor(t,e,i,n,s,o,a,l){this.injector=t,this.rootComponentType=e,this.config=i,this.urlTree=n,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const t=Lx(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Wn).pipe((0,qi.U)(e=>{if(null===e)return null;const i=new Dx([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Wn,this.rootComponentType,null,this.urlTree.root,-1,{}),n=new Hp(i,e),s=new Ix(this.url,n);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,i=JA(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(n=>this.inheritParamsAndData(n))}processSegmentGroup(t,e,i,n){return 0===i.segments.length&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,n)}processChildren(t,e,i){return(0,Ur.D)(Object.keys(i.children)).pipe(vd(n=>{const s=i.children[n],o=tk(e,n);return this.processSegmentGroup(t,o,s,n)}),Cg((n,s)=>n&&s?(n.push(...s),n):null),function LA(r,t=!1){return(0,Xa.e)((e,i)=>{let n=0;e.subscribe((0,Lo.x)(i,s=>{const o=r(s,n++);(o||t)&&i.next(s),!o&&i.complete()}))})}(n=>null!==n),yd(null),_A(),(0,qi.U)(n=>{if(null===n)return null;const s=W1(n);return function $5(r){r.sort((t,e)=>t.value.outlet===Wn?-1:e.value.outlet===Wn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,i,n,s){return(0,Ur.D)(e).pipe(vd(o=>this.processSegmentAgainstRoute(o._injector??t,o,i,n,s)),Fp(o=>!!o),Ec(o=>{if(ok(o))return vw(i,n,s)?Oi([]):Oi(null);throw o}))}processSegmentAgainstRoute(t,e,i,n,s){if(e.redirectTo||!Ox(e,i,n,s))return Oi(null);let o;if("**"===e.path){const a=n.length>0?s1(n).parameters:{},l=Z5(i)+n.length;o=Oi({snapshot:new Dx(n,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,K1(e),eh(e),e.component??e._loadedComponent??null,e,q1(i),l,$1(e),l),consumedSegments:[],remainingSegments:[]})}else o=lk(i,e,n,t).pipe((0,qi.U)(({matched:a,consumedSegments:l,remainingSegments:h,parameters:u})=>{if(!a)return null;const d=Z5(i)+l.length;return{snapshot:new Dx(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,K1(e),eh(e),e.component??e._loadedComponent??null,e,q1(i),d,$1(e),d),consumedSegments:l,remainingSegments:h}}));return o.pipe(Qo(a=>{if(null===a)return Oi(null);const{snapshot:l,consumedSegments:h,remainingSegments:u}=a;t=e._injector??t;const d=e._loadedInjector??t,m=function Y5(r){return r.children?r.children:r.loadChildren?r._loadedRoutes:[]}(e),{segmentGroup:v,slicedSegments:C}=Lx(i,h,u,m.filter(A=>void 0===A.redirectTo),this.relativeLinkResolution);if(0===C.length&&v.hasChildren())return this.processChildren(d,m,v).pipe((0,qi.U)(A=>null===A?null:[new Hp(l,A)]));if(0===m.length&&0===C.length)return Oi([new Hp(l,[])]);const S=eh(e)===s;return this.processSegment(d,m,v,C,S?Wn:s).pipe((0,qi.U)(A=>null===A?null:[new Hp(l,A)]))}))}}function bw(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function W1(r){const t=[],e=new Set;for(const i of r){if(!bw(i)){t.push(i);continue}const n=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==n?(n.children.push(...i.children),e.add(n)):t.push(i)}for(const i of e){const n=W1(i.children);t.push(new Hp(i.value,n))}return t.filter(i=>!e.has(i))}function q1(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Z5(r){let t=r,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function K1(r){return r.data||{}}function $1(r){return r.resolve||{}}function Z1(r){return"string"==typeof r.title||null===r.title}function vk(r){return Qo(t=>{const e=r(t);return e?(0,Ur.D)(e).pipe((0,qi.U)(()=>t)):Oi(t)})}let X1=(()=>{class r{buildTitle(e){let i,n=e.root;for(;void 0!==n;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(s=>s.outlet===Wn);return i}getResolvedTitleForRoute(e){return e.data[sb]}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275prov=b.Yz7({token:r,factory:function(){return(0,b.f3M)(Q1)},providedIn:"root"}),r})(),Q1=(()=>{class r extends X1{constructor(e){super(),this.title=e}updateTitle(e){const i=this.buildTitle(e);void 0!==i&&this.title.setTitle(i)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(mp))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class av{}class Cw extends class fZ{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Mx=new b.OlP("",{providedIn:"root",factory:()=>({})}),bk=new b.OlP("ROUTES");let Mu=(()=>{class r{constructor(e,i){this.injector=e,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return Oi(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const i=Np(e.loadComponent()).pipe((0,Jl.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),rb(()=>{this.componentLoaders.delete(e)})),n=new t1(i,()=>new Lu.x).pipe(nw());return this.componentLoaders.set(e,n),n}loadChildren(e,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Oi({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe((0,qi.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,h,u=!1;Array.isArray(a)?h=a:(l=a.create(e).injector,h=r1(l.get(bk,[],b.XFs.Self|b.XFs.Optional)));return{routes:h.map(gw),injector:l}}),rb(()=>{this.childrenLoaders.delete(i)})),o=new t1(s,()=>new Lu.x).pipe(nw());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(e){return Np(e()).pipe((0,Za.z)(i=>i instanceof b.YKP||Array.isArray(i)?Oi(i):(0,Ur.D)(this.compiler.compileModuleAsync(i))))}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(b.zs3),b.LFG(b.Sil))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class ww{}class Al{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Nx(r){throw r}function Fu(r,t,e){return t.parse("/")}const Ck={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xb={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function lv(){const r=(0,b.f3M)(Pn),t=(0,b.f3M)(nv),e=(0,b.f3M)(Rt),i=(0,b.f3M)(b.zs3),n=(0,b.f3M)(b.Sil),s=(0,b.f3M)(bk,{optional:!0})??[],o=(0,b.f3M)(Mx,{optional:!0})??{},a=(0,b.f3M)(Q1),l=(0,b.f3M)(X1,{optional:!0}),h=(0,b.f3M)(ww,{optional:!0}),u=(0,b.f3M)(av,{optional:!0}),d=new Po(null,r,t,e,i,n,r1(s));return h&&(d.urlHandlingStrategy=h),u&&(d.routeReuseStrategy=u),d.titleStrategy=l??a,function Tb(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy),r.canceledNavigationResolution&&(t.canceledNavigationResolution=r.canceledNavigationResolution)}(o,d),d}let Po=(()=>{class r{constructor(e,i,n,s,o,a,l){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=n,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Lu.x,this.errorHandler=Nx,this.malformedUriErrorHandler=Fu,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Oi(void 0),this.urlHandlingStrategy=new Al,this.routeReuseStrategy=new Cw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(Mu),this.configLoader.onLoadEndListener=m=>this.triggerEvent(new T1(m)),this.configLoader.onLoadStartListener=m=>this.triggerEvent(new nZ(m)),this.ngModule=o.get(b.h0i),this.console=o.get(b.c2e);const d=o.get(b.R0b);this.isNgZoneEnabled=d instanceof b.R0b&&b.R0b.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function a1(){return new Jm(new fr([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=D5(this.currentUrlTree,this.rootComponentType),this.transitions=new Ou({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(Rh(n=>0!==n.id),(0,qi.U)(n=>({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl)})),Qo(n=>{let s=!1,o=!1;return Oi(n).pipe((0,Jl.b)(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Qo(a=>{const l=this.browserUrlTree.toString(),h=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||h)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return hv(a.source)&&(this.browserUrlTree=a.extractedUrl),Oi(a).pipe(Qo(d=>{const m=this.transitions.getValue();return i.next(new cb(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),m!==this.transitions.getValue()?Mp.E:Promise.resolve(d)}),function Px(r,t,e,i){return Qo(n=>function pk(r,t,e,i,n){return new zp(r,t,e,i,n).apply()}(r,t,e,n.extractedUrl,i).pipe((0,qi.U)(s=>({...n,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jl.b)(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},n.urlAfterRedirects=d.urlAfterRedirects}),function Y1(r,t,e,i,n,s){return(0,Za.z)(o=>function fk(r,t,e,i,n,s,o="emptyOnly",a="legacy"){return new U1(r,t,e,i,n,o,a,s).recognize().pipe(Qo(l=>null===l?function K5(r){return new ba.y(t=>t.error(r))}(new yw):Oi(l)))}(r,t,e,o.urlAfterRedirects,i.serialize(o.urlAfterRedirects),i,n,s).pipe((0,qi.U)(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jl.b)(d=>{if(n.targetSnapshot=d.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const v=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(v,d)}this.browserUrlTree=d.urlAfterRedirects}const m=new qA(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);i.next(m)}));if(h&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:m,extractedUrl:v,source:C,restoredState:S,extras:A}=a,_=new cb(m,this.serializeUrl(v),C,S);i.next(_);const M=D5(v,this.rootComponentType).snapshot;return Oi(n={...a,targetSnapshot:M,urlAfterRedirects:v,extras:{...A,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Mp.E}),(0,Jl.b)(a=>{const l=new Bp(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),(0,qi.U)(a=>n={...a,guards:L5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function B5(r,t){return(0,Za.z)(e=>{const{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?Oi({...e,guardsResult:!0}):function F1(r,t,e,i){return(0,Ur.D)(r).pipe((0,Za.z)(n=>function wd(r,t,e,i,n){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?Oi(s.map(a=>{const l=vb(t)??n,h=bb(a,l);return Np(function M5(r){return r&&mw(r.canDeactivate)}(h)?h.canDeactivate(r,t,e,i):l.runInContext(()=>h(r,t,e,i))).pipe(Fp())})).pipe(rv()):Oi(!0)}(n.component,n.route,e,t,i)),Fp(n=>!0!==n,!0))}(o,i,n,r).pipe((0,Za.z)(a=>a&&function Zh(r){return"boolean"==typeof r}(a)?function H5(r,t,e,i){return(0,Ur.D)(t).pipe(vd(n=>AA(function N1(r,t){return null!==r&&t&&t(new rZ(r)),Oi(!0)}(n.route.parent,i),function V5(r,t){return null!==r&&t&&t(new xx(r)),Oi(!0)}(n.route,i),function z5(r,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function cZ(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(o)).filter(o=>null!==o).map(o=>e1(()=>Oi(o.guards.map(l=>{const h=vb(o.node)??e,u=bb(l,h);return Np(function dZ(r){return r&&mw(r.canActivateChild)}(u)?u.canActivateChild(i,r):h.runInContext(()=>u(i,r))).pipe(Fp())})).pipe(rv())));return Oi(s).pipe(rv())}(r,n.path,e),function B1(r,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return Oi(!0);const n=i.map(s=>e1(()=>{const o=vb(t)??e,a=bb(s,o);return Np(function P5(r){return r&&mw(r.canActivate)}(a)?a.canActivate(t,r):o.runInContext(()=>a(t,r))).pipe(Fp())}));return Oi(n).pipe(rv())}(r,n.route,e))),Fp(n=>!0!==n,!0))}(i,s,r,t):Oi(a)),(0,qi.U)(a=>({...e,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),(0,Jl.b)(a=>{if(n.guardsResult=a.guardsResult,ab(a.guardsResult))throw k5(0,a.guardsResult);const l=new GA(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Rh(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),vk(a=>{if(a.guards.canActivateChecks.length)return Oi(a).pipe((0,Jl.b)(l=>{const h=new x1(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}),Qo(l=>{let h=!1;return Oi(l).pipe(function gk(r,t){return(0,Za.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:n}}=e;if(!n.length)return Oi(e);let s=0;return(0,Ur.D)(n).pipe(vd(o=>function X5(r,t,e,i){const n=r.routeConfig,s=r._resolve;return void 0!==n?.title&&!Z1(n)&&(s[sb]=n.title),function mk(r,t,e,i){const n=function Q5(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}(r);if(0===n.length)return Oi({});const s={};return(0,Ur.D)(n).pipe((0,Za.z)(o=>function J5(r,t,e,i){const n=vb(t)??i,s=bb(r,n);return Np(s.resolve?s.resolve(t,e):n.runInContext(()=>s(t,e)))}(r[o],t,e,i).pipe(Fp(),(0,Jl.b)(a=>{s[o]=a}))),fx(1),function n1(r){return(0,qi.U)(()=>r)}(s),Ec(o=>ok(o)?Mp.E:ib(o)))}(s,r,t,i).pipe((0,qi.U)(o=>(r._resolvedData=o,r.data=JA(r,e).resolve,n&&Z1(n)&&(r.data[sb]=n.title),null)))}(o.route,i,r,t)),(0,Jl.b)(()=>s++),fx(1),(0,Za.z)(o=>s===n.length?Oi(e):Mp.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jl.b)({next:()=>h=!0,complete:()=>{h||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),(0,Jl.b)(l=>{const h=new KA(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(h)}))}),vk(a=>{const l=h=>{const u=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(h.routeConfig).pipe((0,Jl.b)(d=>{h.component=d}),(0,qi.U)(()=>{})));for(const d of h.children)u.push(...l(d));return u};return QM(l(a.targetSnapshot.root)).pipe(yd(),nb(1))}),vk(()=>this.afterPreactivation()),(0,qi.U)(a=>{const l=function sZ(r,t,e){const i=Ax(r,t._root,e?e._root:void 0);return new QA(i,t)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return n={...a,targetRouterState:l}}),(0,Jl.b)(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((r,t,e)=>(0,qi.U)(i=>(new nk(t,i.targetRouterState,i.currentRouterState,e).activate(r),i)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),(0,Jl.b)({next(){s=!0},complete(){s=!0}}),rb(()=>{s||o||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Ec(a=>{if(o=!0,_1(a)){kx(a)||(this.navigated=!0,this.restoreHistory(n,!0));const l=new dw(n.id,this.serializeUrl(n.extractedUrl),a.message,a.cancellationCode);if(i.next(l),kx(a)){const h=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),u={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hv(n.source)};this.scheduleNavigation(h,"imperative",null,u,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{this.restoreHistory(n,!0);const l=new E1(n.id,this.serializeUrl(n.extractedUrl),a,n.targetSnapshot??void 0);i.next(l);try{n.resolve(this.errorHandler(a))}catch(h){n.reject(h)}}return Mp.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next({...this.transitions.value,...e})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const n={replaceUrl:!0},s=e.state?.navigationId?e.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(n.state=a)}const o=this.parseUrl(e.url);this.scheduleNavigation(o,i,s,n)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){this.config=e.map(gw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:n,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,h=n||this.routerState.root,u=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),wx(h,this.currentUrlTree,e,d,u??null)}navigateByUrl(e,i={skipLocationChange:!1}){const n=ab(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function Db(r){for(let t=0;t<r.length;t++){if(null==r[t])throw new b.vHH(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(n){i=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return i}isActive(e,i){let n;if(n=!0===i?{...Ck}:!1===i?{...xb}:i,ab(e))return l1(this.currentUrlTree,e,n);const s=this.parseUrl(e);return l1(this.currentUrlTree,s,n)}removeEmptyProps(e){return Object.keys(e).reduce((i,n)=>{const s=e[n];return null!=s&&(i[n]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ll(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,n,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,h;o?(a=o.resolve,l=o.reject,h=o.promise):h=new Promise((m,v)=>{a=m,l=v});const u=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:u,targetPageId:d,source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}setBrowserUrl(e,i){const n=this.urlSerializer.serialize(e),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(n)||i.extras.replaceUrl?this.location.replaceState(n,"",s):this.location.go(n,"",s)}restoreHistory(e,i=!1){if("computed"===this.canceledNavigationResolution){const n=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===n?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===n&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(n)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i,n){const s=new dw(e.id,this.serializeUrl(e.extractedUrl),i,n);this.triggerEvent(s),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return r.\u0275fac=function(e){b.$Z()},r.\u0275prov=b.Yz7({token:r,factory:function(){return lv()},providedIn:"root"}),r})();function hv(r){return"imperative"!==r}let xc=(()=>{class r{constructor(e,i,n){this.router=e,this.route=i,this.locationStrategy=n,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Lu.x,this.subscription=e.events.subscribe(s=>{s instanceof ll&&this.updateTargetUrlAndHref()})}set preserveFragment(e){this._preserveFragment=(0,b.D6c)(e)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(e){this._skipLocationChange=(0,b.D6c)(e)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(e){this._replaceUrl=(0,b.D6c)(e)}get replaceUrl(){return this._replaceUrl}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:null}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,i,n,s,o){return!!(0!==e||i||n||s||o||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Po),b.Y36(pb),b.Y36(dt))},r.\u0275dir=b.lG2({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,i){1&e&&b.NdJ("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&e&&b.uIk("target",i.target)("href",i.href,b.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[b.TTD]}),r})();class wk{}let eF=(()=>{class r{constructor(e,i,n,s,o){this.router=e,this.injector=n,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Rh(e=>e instanceof ll),vd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const n=[];for(const s of i){s.providers&&!s._injector&&(s._injector=(0,b.MMx)(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?n.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&n.push(this.processRoutes(a,s.children??s._loadedRoutes))}return(0,Ur.D)(n).pipe((0,iw.J)())}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>{let n;n=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(e,i):Oi(null);const s=n.pipe((0,Za.z)(o=>null===o?Oi(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(i.loadComponent&&!i._loadedComponent){const o=this.loader.loadComponent(i);return(0,Ur.D)([s,o]).pipe((0,iw.J)())}return s})}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Po),b.LFG(b.Sil),b.LFG(b.lqb),b.LFG(wk),b.LFG(Mu))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const Bx=new b.OlP("");let Sk=(()=>{class r{constructor(e,i,n={}){this.router=e,this.viewportScroller=i,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof cb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ll&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Tx&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Tx(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(e){b.$Z()},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac}),r})();function Ab(r,t){return{\u0275kind:r,\u0275providers:t}}function Hx(r){return[{provide:bk,multi:!0,useValue:r}]}function Ek(){const r=(0,b.f3M)(b.zs3);return t=>{const e=r.get(b.z2F);if(t!==e.components[0])return;const i=r.get(Po),n=r.get(Vx);1===r.get(Ew)&&i.initialNavigation(),r.get(Ux,null,b.XFs.Optional)?.setUpPreloading(),r.get(Bx,null,b.XFs.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),n.next(),n.complete()}}const Vx=new b.OlP("",{factory:()=>new Lu.x}),Ew=new b.OlP("",{providedIn:"root",factory:()=>1});const Ux=new b.OlP("");function s3(r){return Ab(0,[{provide:Ux,useExisting:eF},{provide:wk,useExisting:r}])}const xk=new b.OlP("ROUTER_FORROOT_GUARD"),Tk=[Rt,{provide:Pn,useClass:mx},{provide:Po,useFactory:lv},nv,{provide:pb,useFactory:function tF(r){return r.routerState.root},deps:[Po]},Mu];function nF(){return new b.PXZ("Router",Po)}let Dk=(()=>{class r{constructor(e){}static forRoot(e,i){return{ngModule:r,providers:[Tk,[],Hx(e),{provide:xk,useFactory:sF,deps:[[Po,new b.FiY,new b.tp0]]},{provide:Mx,useValue:i||{}},i?.useHash?{provide:dt,useClass:Ei}:{provide:dt,useClass:Mi},{provide:Bx,useFactory:()=>{const r=(0,b.f3M)(Po),t=(0,b.f3M)(qf),e=(0,b.f3M)(Mx);return e.scrollOffset&&t.setOffset(e.scrollOffset),new Sk(r,t,e)}},i?.preloadingStrategy?s3(i.preloadingStrategy).\u0275providers:[],{provide:b.PXZ,multi:!0,useFactory:nF},i?.initialNavigation?oF(i):[],[{provide:Ak,useFactory:Ek},{provide:b.tb,multi:!0,useExisting:Ak}]]}}static forChild(e){return{ngModule:r,providers:[Hx(e)]}}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(xk,8))},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[Rx]}),r})();function sF(r){return"guarded"}function oF(r){return["disabled"===r.initialNavigation?Ab(3,[{provide:b.ip1,multi:!0,useFactory:()=>{const t=(0,b.f3M)(Po);return()=>{t.setUpLocationChangeListener()}}},{provide:Ew,useValue:2}]).\u0275providers:[],"enabledBlocking"===r.initialNavigation?Ab(2,[{provide:Ew,useValue:0},{provide:b.ip1,multi:!0,deps:[b.zs3],useFactory:t=>{const e=t.get(ve,Promise.resolve());let i=!1;return()=>e.then(()=>new Promise(s=>{const o=t.get(Po),a=t.get(Vx);(function n(s){t.get(Po).events.pipe(Rh(a=>a instanceof ll||a instanceof dw||a instanceof E1),(0,qi.U)(a=>a instanceof ll||a instanceof dw&&(0===a.code||1===a.code)&&null),Rh(a=>null!==a),nb(1)).subscribe(()=>{s()})})(()=>{s(!0),i=!0}),o.afterPreactivation=()=>(s(!0),i||a.closed?Oi(void 0):a),o.initialNavigation()}))}}]).\u0275providers:[]]}const Ak=new b.OlP("");let l3=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-home-page"]],decls:82,vars:0,consts:[[1,"d-flex","justify-content-center","container-fluid"],[1,"card","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-success"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],[1,"container"],[1,"main-body"],[1,"features"],[1,"card-deck"],[1,"card"],["src","https://i.pinimg.com/474x/f0/db/e6/f0dbe691e4eaeb926b622a7cd9abfda2.jpg","alt","...","height","65.3%",1,"card-img-top"],[1,"text-muted"],["src","https://i.pinimg.com/474x/b2/02/a5/b202a5b11b6672344ba225a8c5889dc7.jpg","alt","...","height","65.3%",1,"card-img-top"],["src","https://assets-global.website-files.com/625d2a5ca1316da92392fd13/627085282b05ab11b9cfcdd2_Marco%20Lavalle.jpeg","loading","lazy","id","circle"],["src","https://i.pinimg.com/474x/fa/b1/74/fab174dc39b51001b31600ab52555c78.jpg","alt","... ","height","65.3%",1,"card-img-top"],[1,"container-b"],[1,"row"],[1,"card","card-circle"],[1,"card-icon"],[1,"fas","fa-apple-alt"],[1,"card-b"],["routerLink","Ingredients","href","#",1,"btn","btn-primary"],[1,"fas","fa-cookie"],["routerLink","Recipes","href","#",1,"btn","btn-primary"],[1,"fas","fa-carrot"],["href","#",1,"btn","btn-primary"]],template:function(e,i){1&e&&(b.TgZ(0,"div",0)(1,"h1"),b._uU(2,"Welcome to Nutrition Genius"),b.qZA()(),b.TgZ(3,"div",1)(4,"div",2),b._uU(5," New to Nutrition Genius? Find Out What's New! "),b.qZA(),b.TgZ(6,"div",3)(7,"h5",4),b._uU(8,"Recipes Made Uniquely For You"),b.qZA(),b.TgZ(9,"p",5),b._uU(10,"Nutrition Genius formulates new recipes based on ingredients found in your home. Click Login / Sign up to get started on your nutrition journey! "),b.qZA(),b.TgZ(11,"button",6)(12,"a",7),b._uU(13,"Login"),b.qZA()()()(),b.TgZ(14,"div",8)(15,"div",9)(16,"h2",10),b._uU(17,"This Weeks Features:"),b.qZA(),b.TgZ(18,"div",11)(19,"div",12),b._UZ(20,"img",13),b.TgZ(21,"div",3)(22,"h5",4),b._uU(23,"Card title"),b.qZA(),b.TgZ(24,"p",5),b._uU(25,"This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."),b.qZA(),b.TgZ(26,"p",5)(27,"small",14),b._uU(28,"Last updated 3 mins ago"),b.qZA()()()(),b.TgZ(29,"div",12),b._UZ(30,"img",15),b.TgZ(31,"div",3)(32,"h5",4),b._uU(33,"Card title"),b.qZA(),b.TgZ(34,"p",5),b._UZ(35,"img",16),b._uU(36," This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."),b.qZA(),b.TgZ(37,"p",5)(38,"small",14),b._uU(39,"Last updated 3 mins ago"),b.qZA()()()(),b.TgZ(40,"div",12),b._UZ(41,"img",17),b.TgZ(42,"div",3)(43,"h5",4),b._uU(44,"Card title"),b.qZA(),b.TgZ(45,"p",5),b._uU(46,"This is a longer card with supporting text below as a natural lead-in to additional content. This content is a little bit longer."),b.qZA(),b.TgZ(47,"p",5)(48,"small",14),b._uU(49,"Last updated 3 mins ago"),b.qZA()()()()(),b.TgZ(50,"div",18)(51,"div",19)(52,"div",20)(53,"div",21),b._UZ(54,"i",22),b.qZA(),b.TgZ(55,"div",23)(56,"h5",4),b._uU(57,"Ingredients"),b.qZA(),b.TgZ(58,"p",5),b._uU(59,"Add any inhgredients to generate what meals are available"),b.qZA(),b.TgZ(60,"a",24),b._uU(61,"Add me"),b.qZA()()(),b.TgZ(62,"div",20)(63,"div",21),b._UZ(64,"em",25),b.qZA(),b.TgZ(65,"div",23)(66,"h5",4),b._uU(67,"Recipes"),b.qZA(),b.TgZ(68,"p",5),b._uU(69,"Check out some quick and easy recipes to make for the week"),b.qZA(),b.TgZ(70,"a",26),b._uU(71,"Eat me"),b.qZA()()(),b.TgZ(72,"div",20)(73,"div",21),b._UZ(74,"i",27),b.qZA(),b.TgZ(75,"div",23)(76,"h5",4),b._uU(77,"Meals"),b.qZA(),b.TgZ(78,"p",5),b._uU(79,"Look at feautured meals for the week"),b.qZA(),b.TgZ(80,"a",28),b._uU(81,"See me"),b.qZA()()()()()()())},dependencies:[xc],styles:["HEAD[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{background-color:#556b2fa0}.heading[_ngcontent-%COMP%], .slogan[_ngcontent-%COMP%]{text-align:center}.features[_ngcontent-%COMP%]{text-align:center;font-weight:lighter;margin:20px}.card-deck[_ngcontent-%COMP%]{display:flex;height:50%}#circle[_ngcontent-%COMP%]{float:left;width:80px;height:80px;margin:20px;shape-outside:circle();clip-path:circle();background:transparent;align-items:left}.card-header[_ngcontent-%COMP%]{background-color:#556b2fb1}.card-body[_ngcontent-%COMP%]{background-color:#f0f8ff}.card-b[_ngcontent-%COMP%]{background-color:transparent}.card-circle[_ngcontent-%COMP%]{text-align:center;margin-top:50px;background:rgba(85,107,47,.626);border:10px solid transparent;color:#000;Font-family:Montserrat;padding:70px;border-radius:50%}.card-circle[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-weight:600;font-size:26px}.card-circle[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-weight:400}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:60px;display:block}.card-circle[_ngcontent-%COMP%]:nth-child(2){background:rgba(40,51,22,.626)}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{Font-family:Montserrat;background:transparent;border:1px solid #fff;text-transform:uppercase;padding:5px 30px;border-radius:0;Font-weight:600}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .card-circle[_ngcontent-%COMP%]{transition:all ease-in-out .2s}.card-circle[_ngcontent-%COMP%]:hover   .btn[_ngcontent-%COMP%]{background:#ebf2f3;color:#000;border:1px solid transparent}.card-circle[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.card-circle[_ngcontent-%COMP%]:hover{border:10px solid #bff2ff}.card-circle[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{text-shadow:0px -1px 10px #00A8CC;transform:scale(1.2)rotate(20deg)}@media only screen and (min-width: 1200px){.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-40px;z-index:0}.card-circle[_ngcontent-%COMP%]{width:410px;height:410px}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;box-shadow:1px 2px 20px 8px #f1ebeb1f;transform:scale(1.2);z-index:1}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:20px}}@media only screen and (min-width: 991px) and (max-width: 1200px){.card-circle[_ngcontent-%COMP%]{width:340px;height:340px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:50px}.card-circle[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-top:-25px}.card-circle[_ngcontent-%COMP%]:nth-child(3){margin-left:-50px;z-index:0}.card-circle[_ngcontent-%COMP%]:nth-child(2){margin-left:-20px;z-index:1}}.container-b[_ngcontent-%COMP%]{padding:70px;position:relative}"]}),r})();var kk=te(5867),lF=te(6148);const uv_firebase={apiKey:"AIzaSyD-2f_Tk0S8vGm4xeZB3IQ5ptb740Tdfz4",authDomain:"nutrition-genius.firebaseapp.com",databaseURL:"https://nutrition-genius-default-rtdb.firebaseio.com",projectId:"nutrition-genius",storageBucket:"nutrition-genius.appspot.com",messagingSenderId:"635447365282",appId:"1:635447365282:web:479bc667528ebb7f3e51fb",measurementId:"G-76TG9DZ5FM"},hF=(0,kk.ZF)(uv_firebase);(0,lF.IH)(hF);let Rk=(()=>{class r{constructor(e){this.http=e,this.baseUrl="https://identitytoolkit.googleapis.com/v1/accounts",this.signUp="signInWithCustomToken",this.signIn="signInWithPassword"}signup(e,i,n){return this.http.post(this.baseUrl+":"+this.signUp+"?key="+uv_firebase.apiKey,{name:e,email:i,password:n,returnSecureToken:!0})}signin(e,i){return this.http.post(this.baseUrl+":"+this.signIn+"?key="+uv_firebase.apiKey,{email:e,password:i,returnSecureToken:!0})}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(xA))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),uF=(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authObservable=this.authService.signin(e.value.email,e.value.password),this.authObservable.subscribe(i=>{console.log(i)},i=>{console.log(i)}),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Rk))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-profile-page"]],decls:39,vars:1,consts:[[1,"card",2,"max-width","900px"],[1,"row","g-0"],[1,"col-md-4"],["src","\\assets\\images\\NutritionLogInBackground.jpg","alt","...",1,"img-fluid","rounded-start"],[3,"ngSubmit"],["authForm","ngForm"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"mb-3","row"],["for","inputEmail",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","email","id","inputEmail","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["for","inputPassword",1,"col-sm-2","col-form-label"],["type","password","id","inputPassword","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],["type","submit",1,"btn","btn-outline-success",3,"disabled","click"],["routerLink","../HomePage","href","#",1,"nav-item","nav-link","active"],[1,"forgot-password"],[1,"card-text",2,"transform","rotate(0)"],["href","#",1,"text-success","stretched-link"],[1,"create-account"],["routerLink","../SignUpPage","href","#",1,"text-success","stretched-link"]],template:function(e,i){if(1&e){const n=b.EpF();b.TgZ(0,"div",0)(1,"div",1)(2,"div",2),b._UZ(3,"img",3),b.qZA(),b.TgZ(4,"form",4,5),b.NdJ("ngSubmit",function(){b.CHM(n);const o=b.MAs(5);return b.KtG(i.onSubmit(o))}),b.TgZ(6,"div",6)(7,"div",7)(8,"h5",8),b._uU(9,"Welcome Back, Please Login To Get Started"),b.qZA(),b.TgZ(10,"div",9)(11,"label",10),b._uU(12,"Email"),b.qZA(),b.TgZ(13,"div",11),b._UZ(14,"input",12),b.qZA()(),b.TgZ(15,"div",9)(16,"label",13),b._uU(17,"Password"),b.qZA(),b.TgZ(18,"div",11),b._UZ(19,"input",14),b.qZA()(),b.TgZ(20,"button",15),b.NdJ("click",function(){return i.buttonClicked="SignUp"}),b.TgZ(21,"a",16),b._uU(22,"Login"),b.qZA()(),b.TgZ(23,"div",17)(24,"p",18),b._uU(25," Forgot your Username / Password? "),b.TgZ(26,"a",19),b._uU(27,"Click Here"),b.qZA(),b._uU(28," to Get Back In"),b._UZ(29,"code"),b._uU(30,". "),b.qZA()(),b.TgZ(31,"div",20)(32,"p",18),b._uU(33," Don't Have an Account? "),b.TgZ(34,"a",21),b._uU(35,"Click Here"),b.qZA(),b._uU(36," to Get Started"),b._UZ(37,"code"),b._uU(38,". "),b.qZA()()()()()()()}if(2&e){const n=b.MAs(5);b.xp6(20),b.Q6J("disabled",!n.valid)}},dependencies:[xc,md,Ny,gd],styles:[".card[_ngcontent-%COMP%]{margin:50px auto;float:none}.inputEmail[_ngcontent-%COMP%]{margin:200px}.card-body[_ngcontent-%COMP%]{margin-top:100px;text-align:center}.create-account[_ngcontent-%COMP%]{margin:10px auto}"]}),r})(),cF=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-about-us"]],decls:16,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-6"],[1,"title"],[1,"card","text-white"],["src","https://i.pinimg.com/originals/de/ce/46/dece46917eb2d9ed453a9d3265837665.jpg",1,"card-img"],[1,"card-img-overlay"],[1,"card-title"],[1,"card-text"]],template:function(e,i){1&e&&(b.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b._uU(4,"About Us"),b.qZA(),b.TgZ(5,"p"),b._uU(6," Nutrition genius serves as a database where we help our users achieve their nutrition goals. We were founded in 2022 in a small town named Morgantown. Our team consists of 6 individual who all play a big role on helping this site run. "),b.qZA(),b.TgZ(7,"p"),b._uU(8," Eating habits are defined as \u201cconscious, collective, and repetitive behaviors, which lead people to select, consume, and use certain foods or diets, in response to social and cultural influences\u201d "),b.qZA()(),b.TgZ(9,"div",2)(10,"div",4),b._UZ(11,"img",5),b.TgZ(12,"div",6),b._UZ(13,"h5",7)(14,"p",8)(15,"p",8),b.qZA()()()()())},styles:[".title[_ngcontent-%COMP%]{font-size:120px;font-weight:700;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}p[_ngcontent-%COMP%]{align-items:right}"]}),r})();var bo=te(655),dF=0;function Wx(r,t){var e=t;return e.unshift(void 0),new(Function.prototype.bind.apply(r,e))}function Q(r,t){for(var e=t,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=0;n<i.length&&!qt(e);n++)e=e[i[n]];return e}function Nt(r,t,e){var o,l,i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=n,a=i.length;for(o=0;o<a;o++)l=i[o],o+1===a?s[l]=void 0===t?{}:t:f(s[l])&&(s[l]={}),s=s[l];return n}function Xh(r,t){delete r[t]}var qx=typeof window<"u"?window:{};function Nu(r){return!f(r)&&r.constructor==={}.constructor}function hl(r,t){return r[t]}function io(r,t){if(!f(t))for(var e=r,i=t,s="deepMerge",o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];f(e[s])||-1===e[s].indexOf(l)||!Nu(i[l])&&!Array.isArray(i[l])?e[l]=i[l]:he(e[l],e[l],i[l],!0)}}function he(r,t,e,i){var n=r&&"object"==typeof r?r:{},s=arguments.length;i&&(s-=1);for(var o=function(h){if(!a[h])return"continue";var u=a[h];Object.keys(u).forEach(function(d){var C,m=n[d],v=u[d],S=Array.isArray(v)&&Array.isArray(m)&&v.length!==m.length,A=!ei()||!(m instanceof Event||S);i&&A&&(Nu(v)||Array.isArray(v))?Nu(v)?(C=m||{},Array.isArray(C)&&C.hasOwnProperty("isComplexArray")?he(C,{},v,i):n[d]=he(C,{},v,i)):(C=ei()?m&&Object.keys(v).length:m||[],n[d]=he([],C,v,C&&C.length||v&&v.length)):n[d]=v})},a=arguments,l=1;l<s;l++)o(l);return n}function f(r){return null==r}function qt(r){return typeof r>"u"}function Ui(r){return r+"_"+dF++}function Gx(r,t){var e;return function(){var i=this,n=arguments,s=function(){return e=null,r.apply(i,n)};clearTimeout(e),e=setTimeout(s,t)}}function xw(r,t){return r===t||!(r===document||!r)&&xw(r.parentNode,t)}function Tw(r){try{throw new Error(r)}catch(t){throw t.message+"\n"+t.stack}}function it(r){var t=r+"";return t.match(/auto|cm|mm|in|px|pt|pc|%|em|ex|ch|rem|vw|vh|vmin|vmax/)?t:t+"px"}function ei(){return false}var th,r,t,yF={latn:{_digits:"0123456789",_type:"numeric"}},bF={decimal:".",group:",",percentSign:"%",plusSign:"+",minusSign:"-",infinity:"\u221e",nan:"NaN",exponential:"E"},CF=[0,1,2,3,4,5,6,7,8,9],Ys=function(){function r(){}return r.getMainObject=function(t,e){return Q("main."+e,t)},r.getNumberingSystem=function(t){return Q("supplemental.numberingSystems",t)||this.numberingSystems},r.reverseObject=function(t,e){for(var n={},s=0,o=e||Object.keys(t);s<o.length;s++){var a=o[s];n.hasOwnProperty(t[a])||(n[t[a]]=a)}return n},r.getSymbolRegex=function(t){var e=t.map(function(i){return i.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join("|");return new RegExp(e,"g")},r.getSymbolMatch=function(t){for(var i={},n=0,s=Object.keys(bF);n<s.length;n++){var o=s[n];i[t[o]]=bF[o]}return i},r.constructRegex=function(t){for(var e=t.length,i="",n=0;n<e;n++)i+=n!==e-1?t[n]+"|":t[n];return i},r.convertValueParts=function(t,e,i){return t.replace(e,function(n){return i[n]})},r.getDefaultNumberingSystem=function(t){var e={};return e.obj=Q("numbers",t),e.nSystem=Q("defaultNumberingSystem",e.obj),e},r.getCurrentNumericOptions=function(t,e,i,n){var s={},o=this.getDefaultNumberingSystem(t);if(!qt(o.nSystem)||n){var a=n?Q("obj.mapperDigits",o):Q(o.nSystem+"._digits",e);qt(a)||(s.numericPair=this.reverseObject(a,CF),s.numberParseRegex=new RegExp(this.constructRegex(a),"g"),s.numericRegex="["+a[0]+"-"+a[9]+"]",i&&(s.numericRegex=a[0]+"-"+a[9],s.symbolNumberSystem=Q(n?"numberSymbols":"symbols-numberSystem-"+o.nSystem,o.obj),s.symbolMatch=this.getSymbolMatch(s.symbolNumberSystem),s.numberSystem=o.nSystem))}return s},r.getNumberMapper=function(t,e,i){var n={mapper:{}},s=this.getDefaultNumberingSystem(t);if(!qt(s.nSystem)){n.numberSystem=s.nSystem,n.numberSymbols=Q("symbols-numberSystem-"+s.nSystem,s.obj),n.timeSeparator=Q("timeSeparator",n.numberSymbols);var o=Q(s.nSystem+"._digits",e);if(!qt(o))for(var a=0,l=CF;a<l.length;a++){var h=l[a];n.mapper[h]=o[h]}}return n},r.nPair="numericPair",r.nRegex="numericRegex",r.numberingSystems=yF,r}(),c3={DJF:"Fdj",ERN:"Nfk",ETB:"Br",NAD:"$",ZAR:"R",XAF:"FCFA",GHS:"GH\u20b5",XDR:"XDR",AED:"\u062f.\u0625.\u200f",BHD:"\u062f.\u0628.\u200f",DZD:"\u062f.\u062c.\u200f",EGP:"\u062c.\u0645.\u200f",ILS:"\u20aa",IQD:"\u062f.\u0639.\u200f",JOD:"\u062f.\u0627.\u200f",KMF:"CF",KWD:"\u062f.\u0643.\u200f",LBP:"\u0644.\u0644.\u200f",LYD:"\u062f.\u0644.\u200f",MAD:"\u062f.\u0645.\u200f",MRU:"\u0623.\u0645.",OMR:"\u0631.\u0639.\u200f",QAR:"\u0631.\u0642.\u200f",SAR:"\u0631.\u0633.\u200f",SDG:"\u062c.\u0633.",SOS:"S",SSP:"\xa3",SYP:"\u0644.\u0633.\u200f",TND:"\u062f.\u062a.\u200f",YER:"\u0631.\u064a.\u200f",CLP:"$",INR:"\u20b9",TZS:"TSh",EUR:"\u20ac",AZN:"\u20bc",RUB:"\u20bd",BYN:"Br",ZMW:"K",BGN:"\u043b\u0432.",NGN:"\u20a6",XOF:"CFA",BDT:"\u09f3",CNY:"\xa5",BAM:"\u041a\u041c",UGX:"USh",USD:"$",CZK:"K\u010d",GBP:"\xa3",DKK:"kr.",KES:"Ksh",CHF:"CHF",MVR:"\u0783.",BTN:"Nu.",XCD:"EC$",AUD:"$",BBD:"$",BIF:"FBu",BMD:"$",BSD:"$",BWP:"P",BZD:"$",CAD:"$",NZD:"$",FJD:"$",FKP:"\xa3",GIP:"\xa3",GMD:"D",GYD:"$",HKD:"$",IDR:"Rp",JMD:"$",KYD:"$",LRD:"$",MGA:"Ar",MOP:"MOP$",MUR:"Rs",MWK:"MK",MYR:"RM",PGK:"K",PHP:"\u20b1",PKR:"Rs",RWF:"RF",SBD:"$",SCR:"SR",SEK:"kr",SGD:"$",SHP:"\xa3",SLL:"Le",ANG:"NAf.",SZL:"E",TOP:"T$",TTD:"$",VUV:"VT",WST:"WS$",ARS:"$",BOB:"Bs",BRL:"R$",COP:"$",CRC:"\u20a1",CUP:"$",DOP:"$",GTQ:"Q",HNL:"L",MXN:"$",NIO:"C$",PAB:"B/.",PEN:"S/",PYG:"\u20b2",UYU:"$",VES:"Bs.S",IRR:"\u0631\u064a\u0627\u0644",GNF:"FG",CDF:"FC",HTG:"G",XPF:"FCFP",HRK:"kn",HUF:"Ft",AMD:"\u058f",ISK:"kr",JPY:"\xa5",GEL:"\u20be",CVE:"\u200b",KZT:"\u20b8",KHR:"\u17db",KPW:"\u20a9",KRW:"\u20a9",KGS:"\u0441\u043e\u043c",AOA:"Kz",LAK:"\u20ad",MZN:"MTn",MKD:"\u0434\u0435\u043d",MNT:"\u20ae",BND:"$",MMK:"K",NOK:"kr",NPR:"\u0930\u0941",AWG:"Afl.",SRD:"$",PLN:"z\u0142",AFN:"\u060b",STN:"Db",MDL:"L",RON:"lei",UAH:"\u20b4",LKR:"\u0dbb\u0dd4.",ALL:"Lek\xeb",RSD:"\u0434\u0438\u043d.",TJS:"\u0441\u043c\u043d",THB:"\u0e3f",TMT:"m.",TRY:"\u20ba",UZS:"\u0441\u045e\u043c",VND:"\u20ab",TWD:"NT$"};r=th||(th={}),t=[28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990],r.getHijriDate=function e(n){var s=n.getDate(),o=n.getMonth(),a=n.getFullYear(),l=o+1,h=a;l<3&&(h-=1,l+=12);var u=Math.floor(h/100),d=u-Math.floor(u/4)-2,m=Math.floor(365.25*(h+4716))+Math.floor(30.6001*(l+1))+s-d-1524,v=m+(d=(u=Math.floor((m-1867216.25)/36524.25))-Math.floor(u/4)+1)+1524,C=Math.floor((v-122.1)/365.25),S=Math.floor(365.25*C),A=Math.floor((v-S)/30.6001);s=v-S-Math.floor(30.6001*A),(o=Math.floor((v-S)/20.6001))>13&&(C+=1,o-=12),o-=1,a=C-4716;var _=m-24e5,M=10631/30,P=m-1948084,B=Math.floor(P/10631);P-=10631*B;var j=Math.floor((P-.1335)/M),G=30*B+j;P-=Math.floor(j*M+.1335);var ne=Math.floor((P+28.5001)/29.5);13===ne&&(ne=12);for(var fe=P-Math.floor(29.5001*ne-29),Ee=0;Ee<t.length&&!(t[Ee]>_);Ee++);var Pe=Ee+16260,ie=Math.floor((Pe-1)/12),Ie=ie+1,Te=Pe-12*ie,ce=_-t[Ee-1]+1;return(ce+"").length>2&&(ce=fe,Te=ne,Ie=G),{year:Ie,month:Te,date:ce}},r.toGregorian=function i(n,s,o){var S=Math.floor(o+t[12*(n-1)+1+(s-1)-16260-1]-1+24e5+.5),A=Math.floor((S-1867216.25)/36524.25),_=1524+(A=S+1+A-Math.floor(A/4)),M=Math.floor((_-122.1)/365.25),P=Math.floor(365.25*M),B=Math.floor((_-P)/30.6001),j=_-P-Math.floor(30.6001*B),G=B-(B>13.5?13:1),ne=M-(G>2.5?4716:4715);return ne<=0&&G--,new Date(ne+"/"+G+"/"+j)};var d3=/\/MMMMM|MMMM|MMM|a|LLLL|LLL|EEEEE|EEEE|E|K|cccc|ccc|WW|W|G+|z+/gi,Lk="stand-alone",p3=["sun","mon","tue","wed","thu","fri","sat"],Ok={m:"getMinutes",h:"getHours",H:"getHours",s:"getSeconds",d:"getDate",f:"getMilliseconds"},wF={M:"month",d:"day",E:"weekday",c:"weekday",y:"year",m:"minute",h:"hour",H:"hour",s:"second",L:"month",a:"designator",z:"timeZone",Z:"timeZone",G:"era",f:"milliseconds"},SF=function(){function r(){}return r.dateFormat=function(t,e,i){var n=this,s=Qi.getDependables(i,t,e.calendar),a=(Q("parserObject.numbers",s),s.dateObject),l={isIslamic:Qi.islamicRegex.test(e.calendar)},h=e.format||Qi.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,"");if(l.dateSeperator=Qi.getDateSeparator(s.dateObject),qt(h))Tw("Format options or type given must be invalid");else{h=Qi.ConvertDateToWeekFormat(h),l.pattern=h,l.numMapper=Ys.getNumberMapper(s.parserObject,Ys.getNumberingSystem(i));for(var d=0,m=h.match(d3)||[];d<m.length;d++){var v=m[d],C=v.length,S=v[0];switch("K"===S&&(S="h"),S){case"E":case"c":l.weekday=s.dateObject[Qi.days][Lk][Qi.monthIndex[C]];break;case"M":case"L":l.month=s.dateObject[Qi.month][Lk][Qi.monthIndex[C]];break;case"a":l.designator=Q("dayPeriods.format.wide",a);break;case"G":l.era=Q("eras."+(C<=3?"eraAbbr":4===C?"eraNames":"eraNarrow"),s.dateObject);break;case"z":l.timeZone=Q("dates.timeZoneNames",s.parserObject)}}}return function(_){return isNaN(_.getDate())?null:n.intDateFormatter(_,l)}},r.intDateFormatter=function(t,e){for(var n="",s=e.pattern.match(Qi.dateParseRegex),o=this.getCurrentDateValue(t,e.isIslamic),a=0,l=s;a<l.length;a++){var h=l[a],u=h.length,d=h[0];"K"===d&&(d="h");var m=void 0,v="",C=void 0,S=void 0,A="";switch(d){case"M":case"L":m=o.month,u>2?n+=e.month[m]:C=!0;break;case"E":case"c":n+=e.weekday[p3[t.getDay()]];break;case"H":case"h":case"m":case"s":case"d":case"f":if(C=!0,"d"===d)m=o.date;else if("f"===d){C=!1,S=!0;var _=(v=(v=t[Ok[d]]().toString()).substring(0,u)).length;if(u!==_){if(u>3)continue;for(var M=0;M<u-_;M++)v="0"+v.toString()}A+=v}else m=t[Ok[d]]();"h"===d&&(m=m%12||12);break;case"y":S=!0,A+=o.year,2===u&&(A=A.substr(A.length-2));break;case"a":var P=t.getHours()<12?"am":"pm";n+=e.designator[P];break;case"G":var B=t.getFullYear()<0?0:1,j=e.era[B];f(j)&&(j=e.era[B?0:1]),n+=j||"";break;case"'":n+="''"===h?"'":h.replace(/'/g,"");break;case"z":var G=t.getTimezoneOffset(),ne=u<4?"+H;-H":e.timeZone.hourFormat;ne=ne.replace(/:/g,e.numMapper.timeSeparator),0===G?n+=e.timeZone.gmtZeroFormat:(S=!0,A=this.getTimeZoneValue(G,ne)),A=e.timeZone.gmtFormat.replace(/\{0\}/,A);break;case":":n+=e.numMapper.numberSymbols.timeSeparator;break;case"/":n+=e.dateSeperator;break;case"W":C=!0,m=Qi.getWeekOfYear(t);break;default:n+=h}C&&(S=!0,A=this.checkTwodigitNumber(m,u)),S&&(n+=Ys.convertValueParts(A,Qi.latnParseRegex,e.numMapper.mapper))}return n},r.getCurrentDateValue=function(t,e){return e?th.getHijriDate(t):{year:t.getFullYear(),month:t.getMonth()+1,date:t.getDate()}},r.checkTwodigitNumber=function(t,e){var i=t+"";return 2===e&&2!==i.length?"0"+i:i},r.getTimeZoneValue=function(t,e){var i=this,s=e.split(";")[t>0?1:0],o=Math.abs(t);return s.replace(/HH?|mm/g,function(a){var l=a.length,h=-1!==a.indexOf("H");return i.checkTwodigitNumber(Math.floor(h?o/60:o%60),l)})},r}(),Pk={ms:"minimumSignificantDigits",ls:"maximumSignificantDigits",mf:"minimumFractionDigits",lf:"maximumFractionDigits"},Eg=["infinity","nan","group","decimal","exponential"],Mk=function(){function r(){}return r.numberFormatter=function(t,e,i){var l,n=this,s=he({},e),o={},a={},h=Qi.getDependables(i,t,"",!0);a.numberMapper=Ys.getNumberMapper(h.parserObject,Ys.getNumberingSystem(i),!0),a.currencySymbol=Qi.getCurrencySymbol(h.numericObject,s.currency||Iw,e.altSymbol),a.percentSymbol=a.numberMapper.numberSymbols.percentSign,a.minusSymbol=a.numberMapper.numberSymbols.minusSign;var d=a.numberMapper.numberSymbols;if(e.format&&!Qi.formatRegex.test(e.format))o=Qi.customFormat(e.format,a,h.numericObject);else{he(s,Qi.getProperNumericSkeleton(e.format||"N")),s.isCurrency="currency"===s.type,s.isPercent="percent"===s.type,l=Qi.getSymbolPattern(s.type,a.numberMapper.numberSystem,h.numericObject,s.isAccount),s.groupOne=this.checkValueRange(s.maximumSignificantDigits,s.minimumSignificantDigits,!0),this.checkValueRange(s.maximumFractionDigits,s.minimumFractionDigits,!1,!0),qt(s.fractionDigits)||(s.minimumFractionDigits=s.maximumFractionDigits=s.fractionDigits),qt(s.useGrouping)&&(s.useGrouping=!0),s.isCurrency&&(l=l.replace(/\u00A4/g,Qi.defaultCurrency));var m=l.split(";");if(o.nData=Qi.getFormatData(m[1]||"-"+m[0],!0,a.currencySymbol),o.pData=Qi.getFormatData(m[0],!1,a.currencySymbol),s.useGrouping&&(s.groupSeparator=d[Eg[2]],s.groupData=this.getGroupingDetails(m[0])),qt(s.minimumFractionDigits)&&(s.minimumFractionDigits=o.nData.minimumFraction),qt(s.maximumFractionDigits)){var C=o.nData.maximumFraction;s.maximumFractionDigits=qt(C)&&s.isPercent?0:C}var S=s.minimumFractionDigits,A=s.maximumFractionDigits;!qt(S)&&!qt(A)&&S>A&&(s.maximumFractionDigits=S)}return he(o.nData,s),he(o.pData,s),function(_){return isNaN(_)?d[Eg[1]]:isFinite(_)?n.intNumberFormatter(_,o,a):d[Eg[0]]}},r.getGroupingDetails=function(t){var e={},i=t.match(Qi.negativeDataRegex);if(i&&i[4]){var n=i[4],s=n.lastIndexOf(",");if(-1!==s){var o=n.split(".")[0];e.primary=o.length-s-1;var a=n.lastIndexOf(",",s-1);-1!==a&&(e.secondary=s-1-a)}}return e},r.checkValueRange=function(t,e,i,n){var s=n?"f":"s",o=0,a=Pk["l"+s],l=Pk["m"+s];if(qt(t)||(this.checkRange(t,a,n),o++),qt(e)||(this.checkRange(e,l,n),o++),2===o){if(!(t<e))return!0;Tw(l+"specified must be less than the"+a)}else i&&1===o&&Tw("Both"+l+"and"+l+"must be present");return!1},r.checkRange=function(t,e,i){var n=i?[0,20]:[1,21];(t<n[0]||t>n[1])&&Tw(e+"value must be within the range"+n[0]+"to"+n[1])},r.intNumberFormatter=function(t,e,i){var n;if(!qt(e.nData.type)){t<0?(t*=-1,n=e.nData):n=0===t&&e.zeroData||e.pData;var s="";return n.isPercent&&(t*=100),n.groupOne?s=this.processSignificantDigits(t,n.minimumSignificantDigits,n.maximumSignificantDigits):(s=this.processFraction(t,n.minimumFractionDigits,n.maximumFractionDigits),n.minimumIntegerDigits&&(s=this.processMinimumIntegers(s,n.minimumIntegerDigits))),"scientific"===n.type&&(s=(s=t.toExponential(n.maximumFractionDigits)).replace("e",i.numberMapper.numberSymbols[Eg[4]])),s=s.replace(".",i.numberMapper.numberSymbols[Eg[3]]),n.useGrouping&&(s=this.groupNumbers(s,n.groupData.primary,n.groupSeparator||",",i.numberMapper.numberSymbols[Eg[3]]||".",n.groupData.secondary)),s=Ys.convertValueParts(s,Qi.latnParseRegex,i.numberMapper.mapper),"N/A"===n.nlead?n.nlead:n.nlead+s+n.nend}},r.processSignificantDigits=function(t,e,i){var n=t+"";return n.length<e?t.toPrecision(e):+(n=t.toPrecision(i))+""},r.groupNumbers=function(t,e,i,n,s){for(var o=!f(s)&&0!==s,a=t.split(n),l=a[0],h=l.length,u="";h>e;)u=l.slice(h-e,h)+(u.length?i+u:""),h-=e,o&&(e=s,o=!1);return a[0]=l.slice(0,h)+(u.length?i:"")+u,a.join(n)},r.processFraction=function(t,e,i){var n=(t+"").split(".")[1],s=n?n.length:0;if(e&&s<e){var o="";if(0!==s){o+=t;for(var a=0;a<e-s;a++)o+="0";return o}return o=t.toFixed(e),t.toFixed(e)}return!f(i)&&(s>i||0===i)?t.toFixed(i):t+""},r.processMinimumIntegers=function(t,e){var i=t.split("."),n=i[0],s=n.length;if(s<e){for(var o=0;o<e-s;o++)n="0"+n;i[0]=n}return i.join(".")},r}(),Fk="stand-alone",TF=/^[0-9]*$/,Nk={minute:"setMinutes",hour:"setHours",second:"setSeconds",day:"setDate",month:"setMonth",milliseconds:"setMilliseconds"},IF=function(){function r(){}return r.dateParser=function(t,e,i){var u,n=this,s=Qi.getDependables(i,t,e.calendar),o=Ys.getCurrentNumericOptions(s.parserObject,Ys.getNumberingSystem(i),!1,!1),a={},l=e.format||Qi.getResultantPattern(e.skeleton,s.dateObject,e.type,!1,""),h="";if(qt(l))Tw("Format options or type given must be invalid");else{l=Qi.ConvertDateToWeekFormat(l),a={isIslamic:Qi.islamicRegex.test(e.calendar),pattern:l,evalposition:{},culture:t};for(var d=l.match(Qi.dateParseRegex)||[],m=d.length,v=0,C=0,S=!1,A=o.numericRegex,_=Ys.getNumberMapper(s.parserObject,Ys.getNumberingSystem(i)),M=0;M<m;M++){var P=d[M],B=P.length,j="K"===P[0]?"h":P[0],G=void 0,ne=void 0,fe=wF[j],Ee=2===B?"":"?";switch(S&&(v=C,S=!1),j){case"E":case"c":var ie=Ys.reverseObject(s.dateObject[Qi.days][Fk][Qi.monthIndex[B]]);h+="("+Object.keys(ie).join("|")+")";break;case"M":case"L":case"d":case"m":case"s":case"h":case"H":case"f":if(ne=!0,("M"===j||"L"===j)&&B>2){a[fe]=Ys.reverseObject(s.dateObject.months[Fk][Qi.monthIndex[B]]),h+="("+Object.keys(a[fe]).join("|")+")"}else if("f"===j){if(B>3)continue;G=!0,h+="("+A+A+"?"+A+"?)"}else G=!0,h+="("+A+A+Ee+")";"h"===j&&(a.hour12=!0);break;case"W":h+="("+A+(1===B?"?":"")+A+")";break;case"y":ne=G=!0,h+=2===B?"("+A+A+")":"("+A+"{"+B+",})";break;case"a":ne=!0;var ce=Q("dayPeriods.format.wide",s.dateObject);a[fe]=Ys.reverseObject(ce),h+="("+Object.keys(a[fe]).join("|")+")";break;case"G":ne=!0,a[fe]=Ys.reverseObject(Q("eras."+(B<=3?"eraAbbr":4===B?"eraNames":"eraNarrow"),s.dateObject)),h+="("+Object.keys(a[fe]).join("|")+"?)";break;case"z":ne=0!==(new Date).getTimezoneOffset(),a[fe]=Q("dates.timeZoneNames",s.parserObject);var be=a[fe],Me=(u=B<4)?"+H;-H":be.hourFormat;Me=Me.replace(/:/g,_.timeSeparator),h+="("+this.parseTimeZoneRegx(Me,be,A)+")?",S=!0,C=u?6:12;break;case"'":h+="("+P.replace(/'/g,"")+")?";break;default:h+="([\\D])"}ne&&(a.evalposition[fe]={isNumber:G,pos:M+1+v,hourOnly:u}),M===m-1&&!f(h)&&(a.parserRegex=new RegExp("^"+h+"$","i"))}}return function(Ut){var Gt=n.internalDateParse(Ut,a,o);if(f(Gt)||!Object.keys(Gt).length)return null;if(a.isIslamic){var Qt={},vi=Gt.year,ki=Gt.day,Yi=Gt.month,ni=vi?vi+"":"",Qn=2===ni.length;(!vi||!Yi||!ki||Qn)&&(Qt=th.getHijriDate(new Date)),Qn&&(vi=parseInt((Qt.year+"").slice(0,2)+ni,10));var ss=th.toGregorian(vi||Qt.year,Yi||Qt.month,ki||Qt.date);Gt.year=ss.getFullYear(),Gt.month=ss.getMonth()+1,Gt.day=ss.getDate()}return n.getDateObject(Gt)}},r.getDateObject=function(t,e){var i=e||new Date;i.setMilliseconds(0);var s=t.year,o=t.designator,a=t.timeZone;qt(s)||((s+"").length<=2&&(s+=100*Math.floor(i.getFullYear()/100)),i.setFullYear(s));for(var u=0,d=["hour","minute","second","milliseconds","month","day"];u<d.length;u++){var m=d[u],v=t[m];if(qt(v)&&"day"===m&&i.setDate(1),!qt(v))if("month"===m){if((v-=1)<0||v>11)return new Date("invalid");var C=i.getDate();i.setDate(1),i[Nk[m]](v);var S=new Date(i.getFullYear(),v+1,0).getDate();i.setDate(C<S?C:S)}else{if("day"===m){var A=new Date(i.getFullYear(),i.getMonth()+1,0).getDate();if(v<1||v>A)return null}i[Nk[m]](v)}}if(!qt(o)){var _=i.getHours();"pm"===o?i.setHours(_+(12===_?0:12)):12===_&&i.setHours(0)}if(!qt(a)){var M=a-i.getTimezoneOffset();0!==M&&i.setMinutes(i.getMinutes()+M)}return i},r.internalDateParse=function(t,e,i){var n=t.match(e.parserRegex),s={hour:0,minute:0,second:0};if(f(n))return null;for(var a=0,l=Object.keys(e.evalposition);a<l.length;a++){var h=l[a],u=e.evalposition[h],d=n[u.pos];if(u.isNumber)s[h]=this.internalNumberParser(d,i);else if("timeZone"!==h||qt(d))d="month"!==h||e.isIslamic||"en"!==e.culture&&"en-GB"!==e.culture&&"en-US"!==e.culture?d:d[0].toUpperCase()+d.substring(1).toLowerCase(),s[h]=e[h][d];else{var m=u.pos,v=void 0,C=n[m+1],S=!qt(C);u.hourOnly?v=60*this.getZoneValue(S,C,n[m+4],i):(v=60*this.getZoneValue(S,C,n[m+7],i),v+=this.getZoneValue(S,n[m+4],n[m+10],i)),f(v)||(s[h]=v)}}return e.hour12&&(s.hour12=!0),s},r.internalNumberParser=function(t,e){return t=Ys.convertValueParts(t,e.numberParseRegex,e.numericPair),TF.test(t)?+t:null},r.parseTimeZoneRegx=function(t,e,i){var s,n=e.gmtFormat,o="("+i+")("+i+")";return s=t.replace("+","\\+"),(s=-1!==t.indexOf("HH")?s.replace(/HH|mm/g,"("+o+")"):s.replace(/H|m/g,"("+o+"?)")).split(";").map(function(l){return n.replace("{0}",l)}).join("|")+"|"+e.gmtZeroFormat},r.getZoneValue=function(t,e,i,n){var s=t?e:i;if(!s)return 0;var o=this.internalNumberParser(s,n);return t?-o:o},r}(),AF=/^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/,kF=/,/g,f3=["minusSign","infinity"],g3=function(){function r(){}return r.numberParser=function(t,e,i){var a,n=this,s=Qi.getDependables(i,t,"",!0),o={custom:!0};Qi.formatRegex.test(e.format)||!e.format?(he(o,Qi.getProperNumericSkeleton(e.format||"N")),o.custom=!1,o.fractionDigits||e.maximumFractionDigits&&(o.maximumFractionDigits=e.maximumFractionDigits)):he(o,Qi.customFormat(e.format,null,null));var h;Q("numbers",s.parserObject);if(a=Ys.getCurrentNumericOptions(s.parserObject,Ys.getNumberingSystem(i),!0,!1),o.symbolRegex=Ys.getSymbolRegex(Object.keys(a.symbolMatch)),o.infinity=a.symbolNumberSystem[f3[1]],h=Qi.getSymbolPattern(o.type,a.numberSystem,s.numericObject,o.isAccount)){var u=(h=h.replace(/\u00A4/g,Qi.defaultCurrency)).split(";");o.nData=Qi.getFormatData(u[1]||"-"+u[0],!0,""),o.pData=Qi.getFormatData(u[0],!0,"")}return function(d){return n.getParsedNumber(d,o,a)}},r.getParsedNumber=function(t,e,i){var n,s,o,a,l,h;if(-1!==t.indexOf(e.infinity))return 1/0;t=Ys.convertValueParts(t,e.symbolRegex,i.symbolMatch),0===(t=-1!==(t=Ys.convertValueParts(t,i.numberParseRegex,i.numericPair)).indexOf("-")?t.replace("-.","-0."):t).indexOf(".")&&(t="0"+t);var u=t.match(AF);if(f(u))return NaN;a=u[1],o=u[2];var d=u[5];return l=u[6],s=(n=e.custom?a===e.nData.nlead&&l===e.nData.nend:-1!==a.indexOf(e.nData.nlead)&&-1!==l.indexOf(e.nData.nend))?e.nData.isPercent:e.pData.isPercent,o=o.replace(kF,""),d&&(o+=d),h=+o,("percent"===e.type||s)&&(h/=100),(e.custom||e.fractionDigits)&&(h=parseFloat(h.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.fractionDigits))),e.maximumFractionDigits&&(h=this.convertMaxFracDigits(o,e,h,n)),n&&(h*=-1),h},r.convertMaxFracDigits=function(t,e,i,n){var s=t.split(".");return s[1]&&s[1].length>e.maximumFractionDigits&&(i=+i.toFixed(e.custom?n?e.nData.maximumFractionDigits:e.pData.maximumFractionDigits:e.maximumFractionDigits)),i},r}(),Up=function(){function r(t){this.ranArray=[],this.boundedEvents={},!f(t)&&(this.context=t)}return r.prototype.on=function(t,e,i,n){if(!f(e)){var s=i||this.context;if(this.notExist(t))return void(this.boundedEvents[t]=[{handler:e,context:s}]);f(n)?this.isHandlerPresent(this.boundedEvents[t],e)||this.boundedEvents[t].push({handler:e,context:s}):-1===this.ranArray.indexOf(n)&&(this.ranArray.push(n),this.boundedEvents[t].push({handler:e,context:s,id:n}))}},r.prototype.off=function(t,e,i){if(!this.notExist(t)){var n=Q(t,this.boundedEvents);if(e){for(var s=0;s<n.length;s++)if(i){if(n[s].id===i){n.splice(s,1);var o=this.ranArray.indexOf(i);-1!==o&&this.ranArray.splice(o,1);break}}else if(e===n[s].handler){n.splice(s,1);break}}else delete this.boundedEvents[t]}},r.prototype.notify=function(t,e,i,n){if(this.notExist(t))i&&i.call(this,e);else{e&&(e.name=t);var o=Q(t,this.boundedEvents).slice(0);if(window.Blazor)return this.blazorCallback(o,e,i,n,0);for(var a=0,l=o;a<l.length;a++){var h=l[a];h.handler.call(h.context,e)}i&&i.call(this,e)}},r.prototype.blazorCallback=function(t,e,i,n,s){var o=this,a=s===t.length-1;if(s<t.length){var l=t[s],h=l.handler.call(l.context,e);if(h&&"function"==typeof h.then){if(!i)return h;h.then(function(u){if(u="string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u,he(e,e,u,!0),!i||!a)return o.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}).catch(function(u){n&&n.call(l.context,"string"==typeof u&&o.isJson(u)?JSON.parse(u,o.dateReviver):u)})}else{if(!i||!a)return this.blazorCallback(t,e,i,n,s+1);i.call(l.context,e)}}},r.prototype.dateReviver=function(t,e){return ei&&"string"==typeof e&&null!==e.match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)?new Date(e):e},r.prototype.isJson=function(t){try{JSON.parse(t)}catch{return!1}return!0},r.prototype.destroy=function(){this.boundedEvents=this.context=void 0},r.prototype.notExist=function(t){return!1===this.boundedEvents.hasOwnProperty(t)||this.boundedEvents[t].length<=0},r.prototype.isHandlerPresent=function(t,e){for(var i=0,n=t;i<n.length;i++)if(n[i].handler===e)return!0;return!1},r}(),cv=new Up,Jo={},Dw="en-US",Iw="USD",Hk=["numericObject","dateObject"],Vr=function(){function r(t){t&&(this.culture=t)}return r.prototype.getDateFormat=function(t){return SF.dateFormat(this.getCulture(),t||{type:"date",skeleton:"short"},Jo)},r.prototype.getNumberFormat=function(t){return t&&!t.currency&&(t.currency=Iw),Mk.numberFormatter(this.getCulture(),t||{},Jo)},r.prototype.getDateParser=function(t){return IF.dateParser(this.getCulture(),t||{skeleton:"short",type:"date"},Jo)},r.prototype.getNumberParser=function(t){return g3.numberParser(this.getCulture(),t||{format:"N"},Jo)},r.prototype.formatNumber=function(t,e){return this.getNumberFormat(e)(t)},r.prototype.formatDate=function(t,e){return this.getDateFormat(e)(t)},r.prototype.parseDate=function(t,e){return this.getDateParser(e)(t)},r.prototype.parseNumber=function(t,e){return this.getNumberParser(e)(t)},r.prototype.getDatePattern=function(t,e){return Qi.getActualDateTimeFormat(this.getCulture(),t,Jo,e)},r.prototype.getNumberPattern=function(t,e){return Qi.getActualNumberFormat(this.getCulture(),t,Jo,e)},r.prototype.getFirstDayOfWeek=function(){return Qi.getWeekData(this.getCulture(),Jo)},r.prototype.getCulture=function(){return this.culture||Dw},r}();function Aw(r,t){var e=Qi.getDependables(Jo,r,"",!0)[Hk[0]],i=Qi.getDependables(Jo,r,"")[Hk[1]],n=Q("defaultNumberingSystem",e),s=Q("symbols-numberSystem-"+n,e),o=Qi.getSymbolPattern(t||"decimal",n,e,!1);return he(s,Qi.getFormatData(o,!0,"",!0),{dateSeparator:Qi.getDateSeparator(i)})}function Wp(r){return Qi.getDependables(Jo,"",r,!1)[Hk[1]]}var Qi,RF={"en-US":{d:"M/d/y",D:"EEEE, MMMM d, y",f:"EEEE, MMMM d, y h:mm a",F:"EEEE, MMMM d, y h:mm:s a",g:"M/d/y h:mm a",G:"M/d/yyyy h:mm:ss tt",m:"MMMM d",M:"MMMM d",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:m:s tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",U:"dddd, MMMM d, yyyy h:mm:ss tt",y:"MMMM yyyy",Y:"MMMM yyyy"}};!function(r){r.negativeDataRegex=/^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.customRegex=/^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*[0#\ ]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/,r.latnParseRegex=/0|1|2|3|4|5|6|7|8|9/g;var t=/[0-9]/g;r.defaultCurrency="$";var e=["infinity","nan","group","decimal"],i=/G|M|L|H|c|'| a|yy|y|EEEE|E/g,n={G:"",M:"m",L:"m",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r.dateConverterMapper=/dddd|ddd/gi,r.islamicRegex=/^islamic/;var o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6};r.formatRegex=/(^[ncpae]{1})([0-1]?[0-9]|20)?$/i,r.currencyFormatRegex=/(^[ca]{1})([0-1]?[0-9]|20)?$/i,r.curWithoutNumberRegex=/(c|a)$/gi;var a={$:"isCurrency","%":"isPercent","-":"isNegative",0:"nlead",1:"nend"};function l(ce,Re,je,be,Me){var He,Ut=je||"date";if(Me)He=m({skeleton:ce},Me).format||m({skeleton:"d"},"en-US").format;else{if(-1!==r.basicPatterns.indexOf(ce)){if(He=Q(Ut+"Formats."+ce,Re),"dateTime"===Ut){var Gt=Q("dateFormats."+ce,Re),Qt=Q("timeFormats."+ce,Re);He=He.replace("{1}",Gt).replace("{0}",Qt)}}else He=Q("dateTimeFormats.availableFormats."+ce,Re);qt(He)&&"yMd"===ce&&(He="M/d/y")}return He}function h(ce,Re,je,be){var Me={},He=je||"gregorian";(Me.parserObject=Ys.getMainObject(ce,Re)||r.defaultObject,be)?Me.numericObject=Q("numbers",Me.parserObject):Me.dateObject=Q("dates.calendars."+He,Me.parserObject);return Me}function u(ce,Re,je,be){return Q(ce+"Formats-numberSystem-"+Re+(be?".accounting":".standard"),je)||(be?Q(ce+"Formats-numberSystem-"+Re+".standard",je):"")}function d(ce){ce.match(r.dateConverterMapper);return ce}function m(ce,Re){var je=ce.format||ce.skeleton,be=Q((Re||"en-US")+"."+je,RF);return be||(be=Q("en-US."+je,RF)),be&&(be=d(be),ce.format=be.replace(/tt/,"a")),ce}function v(ce){var Re=ce.match(r.formatRegex),je={},be=Re[1].toUpperCase();return je.isAccount="A"===be,je.type=r.patternMatcher[be],ce.length>1&&(je.fractionDigits=parseInt(Re[2],10)),je}function C(ce,Re,je,be){var Me=be?{}:{nlead:"",nend:""},He=ce.match(r.customRegex);if(He){be||(Me.nlead=S(He[1],je),Me.nend=S(He[10],je),Me.groupPattern=He[4]);var Ut=He[7];if(Ut&&Re){var Gt=Ut.match(t);Me.minimumFraction=f(Gt)?0:Gt.length,Me.maximumFraction=Ut.length-1}}return Me}function S(ce,Re){return ce?ce.replace(r.defaultCurrency,Re):""}function A(ce,Re,je){return Q("currencies."+Re+(je?"."+je:".symbol"),ce)||Q("currencies."+Re+".symbol-alt-narrow",ce)||"$"}function M(ce,Re,je){var be={type:"decimal",minimumFractionDigits:0,maximumFractionDigits:0},Me=ce.match(r.customRegex);if(f(Me)||""===Me[5]&&"N/A"!==ce)return be.type=void 0,be;be.nlead=Me[1],be.nend=Me[10];var He=Me[6],Ut=!!He.match(/\ $/g),Gt=-1!==He.replace(/\ $/g,"").indexOf(" ");be.useGrouping=-1!==He.indexOf(",")||Gt,He=He.replace(/,/g,"");var Qt=Me[7];if(-1!==He.indexOf("0")&&(be.minimumIntegerDigits=He.length-He.indexOf("0")),f(Qt)||(be.minimumFractionDigits=Qt.lastIndexOf("0"),be.maximumFractionDigits=Qt.lastIndexOf("#"),-1===be.minimumFractionDigits&&(be.minimumFractionDigits=0),(-1===be.maximumFractionDigits||be.maximumFractionDigits<be.minimumFractionDigits)&&(be.maximumFractionDigits=be.minimumFractionDigits)),f(Re)?he(be,P([be.nlead,be.nend],"%","%")):(he(be,P([be.nlead,be.nend],"$",Re.currencySymbol)),be.isCurrency||he(be,P([be.nlead,be.nend],"%",Re.percentSymbol))),!f(je)){var vi=u(be.type,Re.numberMapper.numberSystem,je,!1);be.useGrouping&&(be.groupSeparator=Gt?" ":Re.numberMapper.numberSymbols[e[2]],be.groupData=Mk.getGroupingDetails(vi.split(";")[0])),be.nlead=be.nlead.replace(/'/g,""),be.nend=Ut?" "+be.nend.replace(/'/g,""):be.nend.replace(/'/g,"")}return be}function P(ce,Re,je){for(var be={nlead:ce[0],nend:ce[1]},Me=0;Me<2;Me++){var He=ce[Me],Ut=He.indexOf(Re);if(-1!==Ut&&(Ut<He.indexOf("'")||Ut>He.lastIndexOf("'"))){be[a[Me]]=He.substr(0,Ut)+je+He.substr(Ut+1),be[a[Re]]=!0,be.type=be.isCurrency?"currency":"percent";break}}return be}function fe(ce,Re,je){ce+=".";for(var be=0;be<Re;be++)ce+="0";if(Re<je)for(var Me=je-Re,He=0;He<Me;He++)ce+="#";return ce}function Ee(ce,Re){for(var je=ce.split("."),be="",Me=0;Me<Re;Me++)be+="0";return je[1]?be+"."+je[1]:be}function Pe(ce){var Re=ce.split("."),je=Re[0],be=3-je.length%3;ce="";for(var He=(je=(be&&1===be?"#":2===be?"##":"")+je).length-1;He>0;He-=3)ce=","+je[He-2]+je[He-1]+je[He]+ce;return ce=ce.slice(1),Re[1]?ce+"."+Re[1]:ce}r.dateParseRegex=/([a-z])\1*|'([^']|'')+'|''|./gi,r.basicPatterns=["short","medium","long","full"],r.defaultObject={dates:{calendars:{gregorian:{months:{"stand-alone":{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},narrow:{1:"J",2:"F",3:"M",4:"A",5:"M",6:"J",7:"J",8:"A",9:"S",10:"O",11:"N",12:"D"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"Before Christ","0-alt-variant":"Before Common Era",1:"Anno Domini","1-alt-variant":"Common Era"},eraAbbr:{0:"BC","0-alt-variant":"BCE",1:"AD","1-alt-variant":"CE"},eraNarrow:{0:"B","0-alt-variant":"BCE",1:"A","1-alt-variant":"CE"}},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y"}}},islamic:{months:{"stand-alone":{abbreviated:{1:"Muh.",2:"Saf.",3:"Rab. I",4:"Rab. II",5:"Jum. I",6:"Jum. II",7:"Raj.",8:"Sha.",9:"Ram.",10:"Shaw.",11:"Dhu\u02bbl-Q.",12:"Dhu\u02bbl-H."},narrow:{1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",10:"10",11:"11",12:"12"},wide:{1:"Muharram",2:"Safar",3:"Rabi\u02bb I",4:"Rabi\u02bb II",5:"Jumada I",6:"Jumada II",7:"Rajab",8:"Sha\u02bbban",9:"Ramadan",10:"Shawwal",11:"Dhu\u02bbl-Qi\u02bbdah",12:"Dhu\u02bbl-Hijjah"}}},days:{"stand-alone":{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},narrow:{sun:"S",mon:"M",tue:"T",wed:"W",thu:"T",fri:"F",sat:"S"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}}},dayPeriods:{format:{wide:{am:"AM",pm:"PM"}}},eras:{eraNames:{0:"AH"},eraAbbr:{0:"AH"},eraNarrow:{0:"AH"}},dateFormats:{full:"EEEE, MMMM d, y G",long:"MMMM d, y G",medium:"MMM d, y G",short:"M/d/y GGGGG"},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{d:"d",E:"ccc",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d",ms:"mm:ss",y:"y G",yyyy:"y G",yyyyM:"M/y GGGGG",yyyyMd:"M/d/y GGGGG",yyyyMEd:"E, M/d/y GGGGG",yyyyMMM:"MMM y G",yyyyMMMd:"MMM d, y G",yyyyMMMEd:"E, MMM d, y G",yyyyMMMM:"MMMM y G",yyyyQQQ:"QQQ y G",yyyyQQQQ:"QQQQ y G"}}}},timeZoneNames:{hourFormat:"+HH:mm;-HH:mm",gmtFormat:"GMT{0}",gmtZeroFormat:"GMT"}},numbers:{currencies:{USD:{displayName:"US Dollar",symbol:"$","symbol-alt-narrow":"$"},EUR:{displayName:"Euro",symbol:"\u20ac","symbol-alt-narrow":"\u20ac"},GBP:{displayName:"British Pound","symbol-alt-narrow":"\xa3"}},defaultNumberingSystem:"latn",minimumGroupingDigits:"1","symbols-numberSystem-latn":{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"\xd7",perMille:"\u2030",infinity:"\u221e",nan:"NaN",timeSeparator:":"},"decimalFormats-numberSystem-latn":{standard:"#,##0.###"},"percentFormats-numberSystem-latn":{standard:"#,##0%"},"currencyFormats-numberSystem-latn":{standard:"\xa4#,##0.00",accounting:"\xa4#,##0.00;(\xa4#,##0.00)"},"scientificFormats-numberSystem-latn":{standard:"#E0"}}},r.blazorDefaultObject={numbers:{mapper:{0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9"},mapperDigits:"0123456789",numberSymbols:{decimal:".",group:",",plusSign:"+",minusSign:"-",percentSign:"%",nan:"NaN",timeSeparator:":",infinity:"\u221e"},timeSeparator:":",currencySymbol:"$",currencypData:{nlead:"$",nend:"",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentpData:{nlead:"",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},percentnData:{nlead:"-",nend:"%",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},currencynData:{nlead:"($",nend:")",groupSeparator:",",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalnData:{nlead:"-",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2},decimalpData:{nlead:"",nend:"",groupData:{primary:3},maximumFraction:2,minimumFraction:2}},dates:{dayPeriods:{am:"AM",pm:"PM"},dateSeperator:"/",days:{abbreviated:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},short:{sun:"Su",mon:"Mo",tue:"Tu",wed:"We",thu:"Th",fri:"Fr",sat:"Sa"},wide:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"}},months:{abbreviated:{1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec"},wide:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"}},eras:{1:"AD"}}},r.monthIndex={3:"abbreviated",4:"wide",5:"narrow",1:"abbreviated"},r.month="months",r.days="days",r.patternMatcher={C:"currency",P:"percent",N:"decimal",A:"currency",E:"scientific"},r.getResultantPattern=l,r.getDependables=h,r.getSymbolPattern=u,r.ConvertDateToWeekFormat=d,r.compareBlazorDateFormats=m,r.getProperNumericSkeleton=v,r.getFormatData=C,r.changeCurrencySymbol=S,r.getCurrencySymbol=A,r.customFormat=function _(ce,Re,je){for(var be={},Me=ce.split(";"),He=["pData","nData","zeroData"],Ut=0;Ut<Me.length;Ut++)be[He[Ut]]=M(Me[Ut],Re,je);return f(be.nData)&&(be.nData=he({},be.pData),be.nData.nlead=f(Re)?"-"+be.nData.nlead:Re.minusSymbol+be.nData.nlead),be},r.customNumberFormat=M,r.isCurrencyPercent=P,r.getDateSeparator=function B(ce){var Re=(Q("dateFormats.short",ce)||"").match(/[d\u200fM\u200f]([^d\u200fM])[d\u200fM\u200f]/i);return Re?Re[1]:"/"},r.getActualDateTimeFormat=function j(ce,Re,je,be){var Me=h(je,ce,Re.calendar),He=Re.format||l(Re.skeleton,Me.dateObject,Re.type);if(be){if(-1!==(He=He.replace(i,function(ni){return n[ni]})).indexOf("z")){var Ut=He.match(/z/g).length,Gt=void 0,Qt={timeZone:{}};Qt.numMapper=Ys.getNumberMapper(Me.parserObject,Ys.getNumberingSystem(je)),Qt.timeZone=Q("dates.timeZoneNames",Me.parserObject);var ki=(new Date).getTimezoneOffset(),Yi=Ut<4?"+H;-H":Qt.timeZone.hourFormat;Yi=Yi.replace(/:/g,Qt.numMapper.timeSeparator),0===ki?Gt=Qt.timeZone.gmtZeroFormat:(Gt=SF.getTimeZoneValue(ki,Yi),Gt=Qt.timeZone.gmtFormat.replace(/\{0\}/,Gt)),He=He.replace(/[z]+/,'"'+Gt+'"')}He=He.replace(/ $/,"")}return He},r.getActualNumberFormat=function ne(ce,Re,je,be){var Gt,ue,Me=h(je,ce,"",!0),He={custom:!0},Qt={},vi=(Re.format||"").match(r.currencyFormatRegex),Yi=(r.formatRegex.test(Re.format)&&v(Re.format||"N"),{});if(vi){Yi.numberMapper=Ys.getNumberMapper(Me.parserObject,Ys.getNumberingSystem(je),!0);var ni=A(Me.numericObject,Re.currency||Iw,Re.altSymbol),Qn=u("currency",Yi.numberMapper.numberSystem,Me.numericObject,/a/i.test(Re.format)),ss=(Qn=Qn.replace(/\u00A4/g,ni)).split(";");Qt.hasNegativePattern=ss.length>1,Qt.nData=C(ss[1]||"-"+ss[0],!0,ni),Qt.pData=C(ss[0],!1,ni),!vi[2]&&!Re.minimumFractionDigits&&!Re.maximumFractionDigits&&(Gt=C(Qn.split(";")[0],!0,"",!0).minimumFraction)}if(r.formatRegex.test(Re.format)||!Re.format){if(he(He,v(Re.format||"N")),He.custom=!1,ue="###0",(He.fractionDigits||Re.minimumFractionDigits||Re.maximumFractionDigits||Gt)&&(He.fractionDigits&&(Re.minimumFractionDigits=Re.maximumFractionDigits=He.fractionDigits),ue=fe(ue,Gt||He.fractionDigits||Re.minimumFractionDigits||0,Re.maximumFractionDigits||0)),Re.minimumIntegerDigits&&(ue=Ee(ue,Re.minimumIntegerDigits)),Re.useGrouping&&(ue=Pe(ue)),"currency"===He.type){var St=ue;ue=Qt.pData.nlead+St+Qt.pData.nend,Qt.hasNegativePattern&&(ue+=";"+Qt.nData.nlead+St+Qt.nData.nend)}"percent"===He.type&&(ue+=" %")}else ue=Re.format.replace(/'/g,'"');return Object.keys(Yi).length>0&&(ue=be?ue:function G(ce,Re){if(-1!==ce.indexOf(",")){var je=ce.split(",");ce=je[0]+Q("numberMapper.numberSymbols.group",Re)+je[1].replace(".",Q("numberMapper.numberSymbols.decimal",Re))}else ce=ce.replace(".",Q("numberMapper.numberSymbols.decimal",Re));return ce}(ue,Yi)),ue},r.fractionDigitsPattern=fe,r.minimumIntegerPattern=Ee,r.groupingPattern=Pe,r.getWeekData=function ie(ce,Re){var je="sun",be=Q("supplemental.weekData.firstDay",Re),Me=ce;return/en-/.test(Me)&&(Me=Me.slice(3)),Me=Me.slice(0,2).toUpperCase()+Me.substr(2),be&&(je=be[Me]||be[Me.slice(0,2)]||"sun"),o[je]},r.replaceBlazorCurrency=function Ie(ce,Re,je){var be=function _k(r){return Q(r||"",c3)}(je);if(Re!==be)for(var Me=0,He=ce;Me<He.length;Me++){var Ut=He[Me];Ut.nend=Ut.nend.replace(Re,be),Ut.nlead=Ut.nlead.replace(Re,be)}},r.getWeekOfYear=function Te(ce){var be,Re=new Date(ce.getFullYear(),0,1),je=Re.getDay();je=je>=0?je:je+7;var Me=Math.floor((ce.getTime()-Re.getTime()-6e4*(ce.getTimezoneOffset()-Re.getTimezoneOffset()))/864e5)+1;if(je<4){if((be=Math.floor((Me+je-1)/7)+1)>52){var Ut=new Date(ce.getFullYear()+1,0,1).getDay();be=(Ut=Ut>=0?Ut:Ut+7)<4?1:53}}else be=Math.floor((Me+je-1)/7);return be}}(Qi||(Qi={}));var Vk=/^(.*?):[ \t]*([^\r\n]*)$/gm,qp=function(){function r(t,e,i,n){this.mode=!0,this.emitError=!0,this.options={},"string"==typeof t?(this.url=t,this.type=e?e.toUpperCase():"GET",this.mode=!!f(i)||i):"object"==typeof t&&(this.options=t,io(this,this.options)),this.type=this.type?this.type.toUpperCase():"GET",this.contentType=void 0!==this.contentType?this.contentType:n}return r.prototype.send=function(t){var e=this;this.data=f(t)?this.data:t;var i={cancel:!1,httpRequest:null};return new Promise(function(s,o){e.httpRequest=new XMLHttpRequest,e.httpRequest.onreadystatechange=function(){e.stateChange(s,o)},f(e.onLoad)||(e.httpRequest.onload=e.onLoad),f(e.onProgress)||(e.httpRequest.onprogress=e.onProgress),f(e.onAbort)||(e.httpRequest.onabort=e.onAbort),f(e.onError)||(e.httpRequest.onerror=e.onError),f(e.onUploadProgress)||(e.httpRequest.upload.onprogress=e.onUploadProgress),e.httpRequest.open(e.type,e.url,e.mode),!f(e.data)&&null!==e.contentType&&e.httpRequest.setRequestHeader("Content-Type",e.contentType||"application/json; charset=utf-8"),e.beforeSend&&(i.httpRequest=e.httpRequest,e.beforeSend(i)),i.cancel||e.httpRequest.send(f(e.data)?null:e.data)})},r.prototype.successHandler=function(t){return this.onSuccess&&this.onSuccess(t,this),t},r.prototype.failureHandler=function(t){return this.onFailure&&this.onFailure(this.httpRequest),t},r.prototype.stateChange=function(t,e){var i=this.httpRequest.responseText;if(this.dataType&&"json"===this.dataType.toLowerCase())if(""===i)i=void 0;else try{i=JSON.parse(i)}catch{}4===this.httpRequest.readyState&&(this.httpRequest.status>=200&&this.httpRequest.status<=299||304===this.httpRequest.status?t(this.successHandler(i)):this.emitError?e(new Error(this.failureHandler(this.httpRequest.statusText))):t())},r.prototype.getResponseHeader=function(t){var e,i;e={};for(var n=Vk.exec(this.httpRequest.getAllResponseHeaders());n;)e[n[1].toLowerCase()]=n[2],n=Vk.exec(this.httpRequest.getAllResponseHeaders());return f(i=e[t.toLowerCase()])?null:i},r}(),_F=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i,LF=/msie|trident/i,OF=/Trident\/7\./,PF=/(ipad|iphone|ipod touch)/i,MF=/(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i,FF=/android/i,NF=/trident|windows phone|edge/i,dv=/(version)[ /]([\w.]+)/i,BF={OPERA:/(opera|opr)(?:.*version|)[ /]([\w.]+)/i,EDGE:/(edge)(?:.*version|)[ /]([\w.]+)/i,CHROME:/(chrome|crios)[ /]([\w.]+)/i,PANTHOMEJS:/(phantomjs)[ /]([\w.]+)/i,SAFARI:/(safari)[ /]([\w.]+)/i,WEBKIT:/(webkit)[ /]([\w.]+)/i,MSIE:/(msie|trident) ([\w.]+)/i,MOZILLA:/(mozilla)(?:.*? rv:([\w.]+)|)/i};typeof window<"u"&&(window.browserDetails=window.browserDetails||{});var Z=function(){function r(){}return r.extractBrowserDetail=function(){for(var t={culture:{}},i=[],n=0,s=Object.keys(BF);n<s.length;n++)if(i=r.userAgent.match(BF[s[n]])){if(t.name="opr"===i[1].toLowerCase()?"opera":i[1].toLowerCase(),t.name="crios"===i[1].toLowerCase()?"chrome":t.name,t.version=i[2],t.culture.name=t.culture.language=navigator.language,r.userAgent.match(OF)){t.name="msie";break}var a=r.userAgent.match(dv);"safari"===t.name&&a&&(t.version=a[2]);break}return t},r.getEvent=function(t){var e={start:{isPointer:"pointerdown",isTouch:"touchstart",isDevice:"mousedown"},move:{isPointer:"pointermove",isTouch:"touchmove",isDevice:"mousemove"},end:{isPointer:"pointerup",isTouch:"touchend",isDevice:"mouseup"},cancel:{isPointer:"pointercancel",isTouch:"touchcancel",isDevice:"mouseleave"}};return r.isPointer?e[t].isPointer:r.isTouch?e[t].isTouch+(r.isDevice?"":" "+e[t].isDevice):e[t].isDevice},r.getTouchStartEvent=function(){return r.getEvent("start")},r.getTouchEndEvent=function(){return r.getEvent("end")},r.getTouchMoveEvent=function(){return r.getEvent("move")},r.getTouchCancelEvent=function(){return r.getEvent("cancel")},r.getValue=function(t,e){var i=window.browserDetails;return"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1&&!0===r.isTouch&&(i.isIos=!0,i.isDevice=!0,i.isTouch=!0,i.isPointer=!0),typeof i[t]>"u"?i[t]=e.test(r.userAgent):i[t]},Object.defineProperty(r,"userAgent",{get:function(){return r.uA},set:function(t){r.uA=t,window.browserDetails={}},enumerable:!0,configurable:!0}),Object.defineProperty(r,"info",{get:function(){return qt(window.browserDetails.info)?window.browserDetails.info=r.extractBrowserDetail():window.browserDetails.info},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIE",{get:function(){return r.getValue("isIE",LF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isTouch",{get:function(){return qt(window.browserDetails.isTouch)?window.browserDetails.isTouch="ontouchstart"in window.navigator||window&&window.navigator&&window.navigator.maxTouchPoints>0||"ontouchstart"in window:window.browserDetails.isTouch},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isPointer",{get:function(){return qt(window.browserDetails.isPointer)?window.browserDetails.isPointer="pointerEnabled"in window.navigator:window.browserDetails.isPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isMSPointer",{get:function(){return qt(window.browserDetails.isMSPointer)?window.browserDetails.isMSPointer="msPointerEnabled"in window.navigator:window.browserDetails.isMSPointer},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isDevice",{get:function(){return r.getValue("isDevice",_F)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos",{get:function(){return r.getValue("isIos",PF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isIos7",{get:function(){return r.getValue("isIos7",MF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isAndroid",{get:function(){return r.getValue("isAndroid",FF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWebView",{get:function(){return qt(window.browserDetails.isWebView)&&(window.browserDetails.isWebView=!(qt(window.cordova)&&qt(window.PhoneGap)&&qt(window.phonegap)&&"object"!==window.forge)),window.browserDetails.isWebView},enumerable:!0,configurable:!0}),Object.defineProperty(r,"isWindows",{get:function(){return r.getValue("isWindows",NF)},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchStartEvent",{get:function(){return qt(window.browserDetails.touchStartEvent)?window.browserDetails.touchStartEvent=r.getTouchStartEvent():window.browserDetails.touchStartEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchMoveEvent",{get:function(){return qt(window.browserDetails.touchMoveEvent)?window.browserDetails.touchMoveEvent=r.getTouchMoveEvent():window.browserDetails.touchMoveEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchEndEvent",{get:function(){return qt(window.browserDetails.touchEndEvent)?window.browserDetails.touchEndEvent=r.getTouchEndEvent():window.browserDetails.touchEndEvent},enumerable:!0,configurable:!0}),Object.defineProperty(r,"touchCancelEvent",{get:function(){return qt(window.browserDetails.touchCancelEvent)?window.browserDetails.touchCancelEvent=r.getTouchCancelEvent():window.browserDetails.touchCancelEvent},enumerable:!0,configurable:!0}),r.uA=typeof navigator<"u"?navigator.userAgent:"",r}(),T=function(){function r(){}return r.addOrGetEventData=function(t){return"__eventList"in t?t.__eventList.events:(t.__eventList={},t.__eventList.events=[])},r.add=function(t,e,i,n,s){var a,o=r.addOrGetEventData(t);a=s?Gx(i,s):i,n&&(a=a.bind(n));for(var l=e.split(" "),h=0;h<l.length;h++)o.push({name:l[h],listener:i,debounce:a}),Z.isIE?t.addEventListener(l[h],a):t.addEventListener(l[h],a,{passive:!1});return a},r.remove=function(t,e,i){for(var n=r.addOrGetEventData(t),s=e.split(" "),o=function(l){var u,h=-1;n&&0!==n.length&&n.some(function(d,m){return d.name===s[l]&&d.listener===i&&(h=m,u=d.debounce,!0)}),-1!==h&&n.splice(h,1),u&&t.removeEventListener(s[l],u)},a=0;a<s.length;a++)o(a)},r.clearEvents=function(t){var e,i;i=he([],i,e=r.addOrGetEventData(t));for(var n=0;n<i.length;n++)t.removeEventListener(i[n].name,i[n].debounce),e.shift()},r.trigger=function(t,e,i){for(var s=0,o=r.addOrGetEventData(t);s<o.length;s++){var a=o[s];a.name===e&&a.debounce.call(this,i)}},r}(),EZ=/^svg|^path|^g/;function ti(r,t){var e=EZ.test(r)?document.createElementNS("http://www.w3.org/2000/svg",r):document.createElement(r);return typeof t>"u"||(e.innerHTML=t.innerHTML?t.innerHTML:"",void 0!==t.className&&(e.className=t.className),void 0!==t.id&&(e.id=t.id),void 0!==t.styles&&e.setAttribute("style",t.styles),void 0!==t.attrs&&ze(e,t.attrs)),e}function N(r,t){for(var e=jk(t),i=0,n=r;i<n.length;i++)for(var s=n[i],o=0,a=e;o<a.length;o++){var l=a[o];if(Nu(s)){var h=Q("attributes.className",s);f(h)?Nt("attributes.className",l,s):new RegExp("\\b"+l+"\\b","i").test(h)||Nt("attributes.className",h+" "+l,s)}else s.classList.contains(l)||s.classList.add(l)}return r}function z(r,t){for(var e=jk(t),i=0,n=r;i<n.length;i++){var s=n[i],o=Nu(s);if(o?Q("attributes.className",s):""!==s.className)for(var l=0,h=e;l<h.length;l++){var u=h[l];if(o){var m=Q("attributes.className",s).split(" "),v=m.indexOf(u);-1!==v&&m.splice(v,1),Nt("attributes.className",m.join(" "),s)}else s.classList.remove(u)}}return r}function jk(r){var t=[];return"string"==typeof r?t.push(r):t=r,t}function Zs(r){return""===r.style.visibility&&r.offsetWidth>0}function mi(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.insertBefore(i,t.firstElementChild),e&&HF(t),r}function Kt(r,t,e){for(var i=document.createDocumentFragment(),n=0,s=r;n<s.length;n++)i.appendChild(s[n]);return t.appendChild(i),e&&HF(t),r}function HF(r){r.querySelectorAll("script").forEach(function(e){var i=document.createElement("script");i.text=e.innerHTML,document.head.appendChild(i),le(i)})}function le(r){var t=r.parentNode;if(t)return t.removeChild(r)}function Be(r){var t=r.parentNode;T.clearEvents(r),t.removeChild(r)}function ze(r,t){for(var i=r,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(Nu(i)){var a=o;"tabindex"===o&&(a="tabIndex"),i.attributes[a]=t[o]}else i.setAttribute(o,t[o])}return i}function re(r,t,e){return void 0===t&&(t=document),r=Co(r),t.querySelector(r)}function Ke(r,t,e){return void 0===t&&(t=document),r=Co(r),t.querySelectorAll(r)}function Co(r){var t=/(!|"|\$|%|&|'|\(|\)|\*|\/|:|;|<|=|\?|@|\]|\^|`|{|}|\||\+|~)/g;if(r.match(/#[0-9]/g)||r.match(t)){for(var e=r.split(","),i=0;i<e.length;i++){for(var n=e[i].split(" "),s=0;s<n.length;s++)if(n[s].indexOf("#")>-1&&!n[s].match(/\[.*\]/)){var o=n[s].split("#");if(o[1].match(/^\d/)||o[1].match(t)){var a=n[s].split(".");a[0]=a[0].replace(/#/,"[id='")+"']",n[s]=a.join(".")}}e[i]=n.join(" ")}return e.join(",")}return r}function U(r,t){var e=r;if("function"==typeof e.closest)return e.closest(t);for(;e&&1===e.nodeType;){if(pv(e,t))return e;e=e.parentNode}return null}function Ft(r,t){void 0!==t&&Object.keys(t).forEach(function(e){r.style[e]=t[e]})}function ri(r,t,e){N([r],t),z([r],e)}function pv(r,t){var e=r.matches||r.msMatchesSelector||r.webkitMatchesSelector;return e?e.call(r,t):-1!==[].indexOf.call(document.querySelectorAll(t),r)}var w3=new RegExp("]"),Gp=function(){function r(t,e){this.isRendered=!1,this.isComplexArraySetter=!1,this.isServerRendered=!1,this.allowServerDataBinding=!0,this.isProtectedOnChange=!0,this.properties={},this.changedProperties={},this.oldProperties={},this.bulkChanges={},this.refreshing=!1,this.ignoreCollectionWatch=!1,this.finalUpdate=function(){},this.childChangedProperties={},this.modelObserver=new Up(this),qt(e)||(this.element="string"==typeof e?document.querySelector(e):e,f(this.element)||(this.isProtectedOnChange=!1,this.addInstance())),qt(t)||this.setProperties(t,!0),this.isDestroyed=!1}return r.prototype.setProperties=function(t,e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!!e,io(this,t),!0!==e&&(io(this.changedProperties,t),this.dataBind()),this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.isProtectedOnChange=i},r.callChildDataBind=function(t,e){for(var n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];if(e[o]instanceof Array)for(var a=0,l=e[o];a<l.length;a++){var h=l[a];void 0!==h.dataBind&&h.dataBind()}else e[o].dataBind()}},r.prototype.clearChanges=function(){this.finalUpdate(),this.changedProperties={},this.oldProperties={},this.childChangedProperties={}},r.prototype.dataBind=function(){if(r.callChildDataBind(this.childChangedProperties,this),Object.getOwnPropertyNames(this.changedProperties).length){var t=this.isProtectedOnChange,e=this.changedProperties,i=this.oldProperties;this.clearChanges(),this.isProtectedOnChange=!0,this.onPropertyChanged(e,i),this.isProtectedOnChange=t}},r.prototype.serverDataBind=function(t){},r.prototype.saveChanges=function(t,e,i){this.isProtectedOnChange||(this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate(),this.finalUpdate=function fF(r){var t,e=new Uint16Array(5);(window.msCrypto||window.crypto).getRandomValues(e);var n="ej2"+function vF(r){for(var t="",e=0;e<5;e++)t+=(e?",":"")+r[e];return t}(e),s=function(o){o.source===window&&"string"==typeof o.data&&o.data.length<=32&&o.data===n&&(r(),t())};return window.addEventListener("message",s,!1),window.postMessage(n,"*"),t=function(){window.removeEventListener("message",s),r=s=n=void 0}}(this.dataBind.bind(this)))},r.prototype.addEventListener=function(t,e){this.modelObserver.on(t,e)},r.prototype.removeEventListener=function(t,e){this.modelObserver.off(t,e)},r.prototype.trigger=function(t,e,i,n){var s=this;if(!0!==this.isDestroyed){var o=this.isProtectedOnChange;this.isProtectedOnChange=!1;var a=this.modelObserver.notify(t,e,i,n);if(w3.test(t)){var l=Q(t,this);if(l)if(window.Blazor){var u=l.call(this,e);u&&"function"==typeof u.then?i?u.then(function(d){i&&(d="string"==typeof d&&s.modelObserver.isJson(d)?JSON.parse(d):d,i.call(s,d))}).catch(function(d){n&&(d="string"==typeof d&&s.modelObserver.isJson(d)?JSON.parse(d):d,n.call(s,d))}):a=u:i&&i.call(this,e)}else l.call(this,e),i&&i.call(this,e);else i&&i.call(this,e)}return this.isProtectedOnChange=o,a}},r.prototype.addInstance=function(){var t="e-"+this.getModuleName().toLowerCase();N([this.element],["e-lib",t]),f(this.element.ej2_instances)?Nt("ej2_instances",[this],this.element):this.element.ej2_instances.push(this)},r.prototype.destroy=function(){var t=this;this.element.ej2_instances=this.element.ej2_instances.filter(function(e){return e!==t}),z([this.element],["e-"+this.getModuleName()]),0===this.element.ej2_instances.length&&z([this.element],["e-lib"]),this.clearChanges(),this.modelObserver.destroy(),this.isDestroyed=!0},r}();function $x(r,t,e,i){return(!r.properties.hasOwnProperty(t)||!(r.properties[t]instanceof i))&&(r.properties[t]=Wx(i,[r,t,e])),r.properties[t]}function kw(r,t,e,i,n,s){for(var o=[],a=e?e.length:0,l=0;l<a;l++){var h=i;if(s&&(h=i(e[l],r)),n){var u=Wx(h,[r,t,{},!0]);u.setProperties(e[l],!0),o.push(u)}else o.push(Wx(h,[r,t,e[l],!1]))}return o}function Rw(r,t){return function(){return this.properties.hasOwnProperty(t)||(this.properties[t]=r),this.properties[t]}}function VF(r,t){return function(e){if(this.properties[t]!==e){var i=this.properties.hasOwnProperty(t)?this.properties[t]:r;this.saveChanges(t,e,i),this.properties[t]=e}}}function zF(r,t,e){return function(){return $x(this,t,r,e)}}function jF(r,t,e){return function(i){$x(this,t,r,e).setProperties(i)}}function Lw(r,t,e){return function(){var i=this;if(!this.properties.hasOwnProperty(t)){var n=kw(this,t,r,e,!1);this.properties[t]=n}var s=void 0!==this.controlParent&&this.controlParent.ignoreCollectionWatch||this.ignoreCollectionWatch;return!this.properties[t].hasOwnProperty("push")&&!s&&["push","pop"].forEach(function(o){var a={value:UF(o,t,0,i.properties[t]).bind(i),configurable:!0};Object.defineProperty(i.properties[t],o,a)}),this.properties[t].hasOwnProperty("isComplexArray")||Object.defineProperty(this.properties[t],"isComplexArray",{value:!0}),this.properties[t]}}function E3(r,t,e){return function(i){this.isComplexArraySetter=!0;var n=kw(this,t,r,e,!1),s=kw(this,t,i,e,!0);this.isComplexArraySetter=!1,this.saveChanges(t,s,n),this.properties[t]=s}}function UF(r,t,e,i){return function(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];var o=this.propName?this.getParentKey()+"."+t+"-":t+"-";switch(r){case"push":for(var a=0;a<n.length;a++){Array.prototype[r].apply(i,[n[a]]);var l=Uk(o+(i.length-1),n[a],!this.controlParent,r);this.serverDataBind(l,n[a],!1,r)}break;case"pop":Array.prototype[r].apply(i);var h=Uk(o+i.length,null,!this.controlParent,r);this.serverDataBind(h,{ejsAction:"pop"},!1,r)}return i}}function Uk(r,t,e,i){var n=r;return e&&((n={})[r]=t,t&&"object"==typeof t)&&(n[r].ejsAction=i),n}function E(r){return function(t,e){var i={set:VF(r,e),get:Rw(r,e),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i),Ow(t,e,"prop",r)}}function rn(r,t){return function(e,i){var n={set:jF(r,i,t),get:zF(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Ow(e,i,"complexProp",r,t)}}function wo(r,t){return function(e,i){var n={set:E3(r,i,t),get:Lw(r,i,t),enumerable:!0,configurable:!0};Object.defineProperty(e,i,n),Ow(e,i,"colProp",r,t)}}function q(){return function(r,t){var e={set:function(i){var n=this.properties[t];if(n!==i){var s=Pw(this,t);!1===qt(n)&&s.context.removeEventListener(s.prefix,n),s.context.addEventListener(s.prefix,i),this.properties[t]=i}},get:Rw(void 0,t),enumerable:!0,configurable:!0};Object.defineProperty(r,t,e),Ow(r,t,"event")}}function si(r){}function Ow(r,t,e,i,n){qt(r.propList)&&(r.propList={props:[],complexProps:[],colProps:[],events:[],propNames:[],complexPropNames:[],colPropNames:[],eventNames:[]}),r.propList[e+"s"].push({propertyName:t,defaultValue:i,type:n}),r.propList[e+"Names"].push(t)}function Pw(r,t){if(!1===r.hasOwnProperty("parentObj"))return{context:r,prefix:t};var e=Q("propName",r);return e&&(t=e+"-"+t),Pw(Q("parentObj",r),t)}var k3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kp=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},gr=function(r){function t(i){var n=r.call(this,i,void 0)||this;return n.easing={ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)",elasticInOut:"cubic-bezier(0.5,-0.58,0.38,1.81)",elasticIn:"cubic-bezier(0.17,0.67,0.59,1.81)",elasticOut:"cubic-bezier(0.7,-0.75,0.99,1.01)"},n}var e;return k3(t,r),e=t,t.prototype.animate=function(i,n){var s=this.getModel(n=n||{});if("string"==typeof i)for(var a=0,l=Array.prototype.slice.call(Ke(i,document));a<l.length;a++)s.element=l[a],e.delayAnimation(s);else s.element=i,e.delayAnimation(s)},t.stop=function(i,n){i.style.animation="",i.removeAttribute("e-animate");var s=i.getAttribute("e-animation-id");if(s){var o=parseInt(s,10);cancelAnimationFrame(o),i.removeAttribute("e-animation-id")}n&&n.end&&n.end.call(this,n)},t.delayAnimation=function(i){"Disable"===KF?(i.begin&&i.begin.call(this,i),i.end&&i.end.call(this,i)):i.delay?setTimeout(function(){e.applyAnimation(i)},i.delay):e.applyAnimation(i)},t.applyAnimation=function(i){var n=this;i.timeStamp=0;var s=0,o=0,a=0,l=i.duration;i.element.setAttribute("e-animate","true");var h=function(u){try{u?(i.timeStamp=u+i.timeStamp-(a=0===a?u:a),a=u,!s&&i.begin&&i.begin.call(n,i),s+=1,i.timeStamp<l&&i.timeStamp+i.timeStamp/s<l&&i.element.getAttribute("e-animate")?(i.element.style.animation=i.name+" "+i.duration+"ms "+i.timingFunction,i.progress&&i.progress.call(n,i),requestAnimationFrame(h)):(cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.element.removeAttribute("e-animate"),i.element.style.animation="",i.end&&i.end.call(n,i))):(o=requestAnimationFrame(h),i.element.setAttribute("e-animation-id",o.toString()))}catch(m){cancelAnimationFrame(o),i.element.removeAttribute("e-animation-id"),i.fail&&i.fail.call(n,m)}};h()},t.prototype.getModel=function(i){return{name:i.name||this.name,delay:i.delay||this.delay,duration:void 0!==i.duration?i.duration:this.duration,begin:i.begin||this.begin,end:i.end||this.end,fail:i.fail||this.fail,progress:i.progress||this.progress,timingFunction:this.easing[i.timingFunction]?this.easing[i.timingFunction]:i.timingFunction||this.easing[this.timingFunction]}},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"animation"},t.prototype.destroy=function(){},Kp([E("FadeIn")],t.prototype,"name",void 0),Kp([E(400)],t.prototype,"duration",void 0),Kp([E("ease")],t.prototype,"timingFunction",void 0),Kp([E(0)],t.prototype,"delay",void 0),Kp([q()],t.prototype,"progress",void 0),Kp([q()],t.prototype,"begin",void 0),Kp([q()],t.prototype,"end",void 0),Kp([q()],t.prototype,"fail",void 0),e=Kp([si],t)}(Gp);function $i(r,t,e){var i=function R3(r){return{selector:r&&r.selector?r.selector:null,ignore:r&&r.ignore?r.ignore:null,rippleFlag:r&&r.rippleFlag,isCenterRipple:r&&r.isCenterRipple,duration:r&&r.duration?r.duration:350}}(t);return!1===i.rippleFlag||void 0===i.rippleFlag&&!ir?function(){}:(r.setAttribute("data-ripple","true"),T.add(r,"mousedown",WF,{parent:r,rippleOptions:i}),T.add(r,"mouseup",qF,{parent:r,rippleOptions:i,done:e}),T.add(r,"mouseleave",_b,{parent:r,rippleOptions:i}),Z.isPointer&&T.add(r,"transitionend",_b,{parent:r,rippleOptions:i}),function(){r.removeAttribute("data-ripple"),T.remove(r,"mousedown",WF),T.remove(r,"mouseup",qF),T.remove(r,"mouseleave",_b),T.remove(r,"transitionend",_b)})}function WF(r){var t=r.target,e=this.rippleOptions.selector,i=e?U(t,e):t;if(!(!i||this.rippleOptions&&U(t,this.rippleOptions.ignore))){var n=i.getBoundingClientRect(),s=r.pageX-document.body.scrollLeft,o=r.pageY-(!document.body.scrollTop&&document.documentElement?document.documentElement.scrollTop:document.body.scrollTop),a=Math.max(Math.abs(s-n.left),Math.abs(s-n.right)),l=Math.max(Math.abs(o-n.top),Math.abs(o-n.bottom)),h=Math.sqrt(a*a+l*l),u=2*h+"px",d=s-n.left-h,m=o-n.top-h;this.rippleOptions&&this.rippleOptions.isCenterRipple&&(d=0,m=0,u="100%"),i.classList.add("e-ripple");var S=ti("div",{className:"e-ripple-element",styles:"width: "+u+";height: "+u+";left: "+d+"px;top: "+m+"px;transition-duration: "+this.rippleOptions.duration.toString()+"ms;"});i.appendChild(S),window.getComputedStyle(S).getPropertyValue("opacity"),S.style.transform="scale(1)",i!==this.parent&&T.add(i,"mouseleave",_b,{parent:this.parent,rippleOptions:this.rippleOptions})}}function qF(r){GF(r,this)}function _b(r){GF(r,this)}function GF(r,t){var e=t.rippleOptions.duration,i=r.target,n=t.rippleOptions.selector,s=n?U(i,n):i;if(s&&(!s||-1!==s.className.indexOf("e-ripple"))){var o=Ke(".e-ripple-element",s),a=o[o.length-1];a&&(a.style.opacity="0.5"),t.parent!==s&&T.remove(s,"mouseleave",_b),setTimeout(function(){a&&a.parentNode&&a.parentNode.removeChild(a),s.getElementsByClassName("e-ripple-element").length||s.classList.remove("e-ripple"),t.done&&t.done(r)},e)}}var ir=!1,KF="",$F=function(){function r(t){this.loadedModules=[],this.parent=t}return r.prototype.inject=function(t,e){var i=t.length;if(0!==i){this.loadedModules.length&&this.clearUnusedModule(t);for(var n=0;n<i;n++)for(var s=t[n],o=0,a=e;o<a.length;o++){var l=a[o],h=s.member;if(l.prototype.getModuleName()===s.member&&!this.isModuleLoaded(h)){var u=Wx(l,s.args),d=this.getMemberName(h);Nt(d,s.isProperty?l:u,this.parent);var m=s;m.member=d,this.loadedModules.push(m)}}}else this.clean()},r.prototype.clean=function(){for(var t=0,e=this.loadedModules;t<e.length;t++){var i=e[t];i.isProperty||Q(i.member,this.parent).destroy()}this.loadedModules=[]},r.prototype.clearUnusedModule=function(t){for(var e=this,i=t.map(function(l){return e.getMemberName(l.member)}),s=0,o=this.loadedModules.filter(function(l){return-1===i.indexOf(l.member)});s<o.length;s++){var a=o[s];a.isProperty||Q(a.member,this.parent).destroy(),this.loadedModules.splice(this.loadedModules.indexOf(a),1),Xh(this.parent,a.member)}},r.prototype.getMemberName=function(t){return t[0].toLowerCase()+t.substring(1)+"Module"},r.prototype.isModuleLoaded=function(t){for(var e=0,i=this.loadedModules;e<i.length;e++)if(i[e].member===this.getMemberName(t))return!0;return!1},r}(),Si=function(){function r(t,e,i,n){this.isComplexArraySetter=!1,this.properties={},this.changedProperties={},this.childChangedProperties={},this.oldProperties={},this.finalUpdate=function(){},this.callChildDataBind=Q("callChildDataBind",Gp),this.parentObj=t,this.controlParent=this.parentObj.controlParent||this.parentObj,this.propName=e,this.isParentArray=n,this.setProperties(i,!0)}return r.prototype.updateChange=function(t,e){!0===t?this.parentObj.childChangedProperties[e]=t:delete this.parentObj.childChangedProperties[e],this.parentObj.updateChange&&this.parentObj.updateChange(t,this.parentObj.propName)},r.prototype.updateTimeOut=function(){if(this.parentObj.updateTimeOut)this.parentObj.finalUpdate(),this.parentObj.updateTimeOut();else{var t=setTimeout(this.parentObj.dataBind.bind(this.parentObj));this.finalUpdate=function(){clearTimeout(t)}}},r.prototype.clearChanges=function(){this.finalUpdate(),this.updateChange(!1,this.propName),this.oldProperties={},this.changedProperties={}},r.prototype.setProperties=function(t,e){!0===e?(io(this,t),this.updateChange(!1,this.propName),this.clearChanges()):io(this,t)},r.prototype.dataBind=function(){if(this.callChildDataBind(this.childChangedProperties,this),this.isParentArray){var t=this.parentObj[this.propName].indexOf(this);Object.keys(this.changedProperties).length&&(Nt(this.propName+"."+t,this.changedProperties,this.parentObj.changedProperties),Nt(this.propName+"."+t,this.oldProperties,this.parentObj.oldProperties))}else this.parentObj.changedProperties[this.propName]=this.changedProperties,this.parentObj.oldProperties[this.propName]=this.oldProperties;this.clearChanges()},r.prototype.saveChanges=function(t,e,i,n){this.controlParent.isProtectedOnChange||(n||this.serverDataBind(t,e,!0),this.oldProperties[t]=i,this.changedProperties[t]=e,this.updateChange(!0,this.propName),this.finalUpdate(),this.updateTimeOut())},r.prototype.serverDataBind=function(t,e,i,n){},r.prototype.getParentKey=function(t){var e="",i=this.propName;if(this.isParentArray){e=this.parentObj[this.propName].indexOf(this);var n=this.parentObj[this.propName].length;n=t?n:n>0?n-1:0,i+=e=-1!==e?"-"+e:"-"+n}return this.controlParent!==this.parentObj&&(i=this.parentObj.getParentKey()+"."+this.propName+e),i},r}(),Wk=[115,121,110,99,102,117,115,105,111,110,46,105,115,76,105,99,86,97,108,105,100,97,116,101,100],YF=function(){function r(t){var e;this.isValidated=!1,this.version="20.3",this.platform=/JavaScript|ASPNET|ASPNETCORE|ASPNETMVC|FileFormats/i,this.errors={noLicense:'This application was built using a trial version of Syncfusion Essential Studio. Please include a valid license to permanently remove this license validation message. You can also obtain a free 30 day evaluation license to temporarily remove this message during the evaluation period. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing">help topic</a> for more information.',trailExpired:'Your Syncfusion trial license has expired. Please refer to this <a class="e-license"href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#trial-expired">help topic</a> for more information.',versionMismatched:'The included Syncfusion license (v##LicenseVersion) is invalid for version ##Requireversion. Please refer to this <a class="e-license" href="https://help.syncfusion.com/es/licensing/version-mismatch/">help topic</a> for more information.',platformMismatched:'The included Syncfusion license is invalid (Platform mismatch). Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#platform-mismatch">help topic</a> for more information.',invalidKey:'The included Syncfusion license is invalid. Please refer to this <a class="e-license" href="https://help.syncfusion.com/common/essential-studio/licensing/licensing-errors#invalid-key">help topic</a> for more information.'},this.manager=(e=null,{setKey:function i(s){e=s},getKey:function n(){return e}}),this.npxManager={getKey:function i(){return"npxKeyReplace"}},this.manager.setKey(t)}return r.prototype.validate=function(){if(!this.isValidated&&qx&&!Q(ZF(Wk),qx)&&!Q("Blazor",qx)){var t=void 0;if(this.manager&&this.manager.getKey()||this.npxManager&&"npxKeyReplace"!==this.npxManager.getKey()){var e=this.getInfoFromKey();if(e&&e.length)for(var i=0,n=e;i<n.length;i++){var s=n[i];if(!this.platform.test(s.platform)||s.invalidPlatform)t=this.errors.platformMismatched;else if(-1===s.version.indexOf(this.version))t=(t=(t=this.errors.versionMismatched).replace("##LicenseVersion",s.version)).replace("##Requireversion",this.version+".x");else if(s.expiryDate){var o=new Date(s.expiryDate),a=new Date;if(!(o!==a&&o<a))break;t=this.errors.trailExpired}}else t=this.errors.invalidKey}else t=this.errors.noLicense;if(t&&typeof document<"u"&&!f(document)){var l=ti("div",{innerHTML:t+'<span id="license-banner-event" class="e-license-banner" ><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><line x1="5" y1="5" x2="15" y2="15" stroke="yellow" stroke-width="2.5" stroke-miterlimit="10" stroke-linecap="round"></line><line x1="15" y1="5" x2="5" y2="15" stroke="yellow" stroke-width="2.5" stroke-linecap="round" stroke-miterlimit="10"></line></svg></span>',styles:'position:fixed;top:0;left:0;right:0;font-family:"Segoe UI";font-size:16px;background:repeating-linear-gradient(45deg,#d70f0f,#d70f0f 10px,#e12121 10px,#e12121 17px);color:#ffffff;z-index:999999999;text-align:center;padding:10px 50px 10px 25px;'});l.setAttribute("id","js-licensing"),document.body.appendChild(l),document.getElementById("license-banner-event").addEventListener("click",function(){document.getElementById("js-licensing").remove()})}this.isValidated=!0,Nt(ZF(Wk),this.isValidated,qx)}},r.prototype.getDecryptedData=function(t){try{return atob(t)}catch{return""}},r.prototype.getInfoFromKey=function(){try{var t="",e=[5439488,7929856,5111808,6488064,4587520,7667712,5439488,6881280,5177344,7208960,4194304,4456448,6619136,7733248,5242880,7077888,6356992,7602176,4587520,7274496,7471104,7143424],i=[],n=[],s=!1,o=!1;this.manager.getKey()?t=this.manager.getKey():(o=!0,t=this.npxManager.getKey().split("npxKeyReplace")[1]);for(var a=t.split(";"),l=0,h=a;l<h.length;l++){var d=this.getDecryptedData(h[l]);if(d){var m=0,v="";if(o){for(var A=d[d.length-1],_=[],C=0;C<d.length;C++)_[C]=d[C].charCodeAt(0)-A.charCodeAt(0);for(C=0;C<_.length;C++)v+=String.fromCharCode(_[C])}else for(C=0;C<d.length;C++,m++){m===e.length&&(m=0);var S=d.charCodeAt(C);v+=String.fromCharCode(S^e[m]>>16)}this.platform.test(v)?(i=v.split(";"),s=!1,i.length>3&&n.push({platform:i[0],version:i[1],expiryDate:i[2]})):v&&v.split(";").length>3&&(s=!0)}}return s&&!n.length?[{invalidPlatform:s}]:n.length?n:null}catch{return null}},r}(),Zx=new YF;function ZF(r){for(var t="",e=0,i=r;e<i.length;e++)t+=String.fromCharCode(i[e]);return t}function Xx(r){Zx=new YF(r)}var Gk,XF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Qx=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},qk=0,Jx=0,Ji=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.randomId=function Tc(){if(!(typeof window>"u")){var r=new Uint16Array(5);return(window.msCrypto||window.crypto).getRandomValues(r)}}(),n.isStringTemplate=!1,n.needsID=!1,n.isReactHybrid=!1,f(n.enableRtl)&&n.setProperties({enableRtl:false},!0),f(n.locale)&&n.setProperties({locale:Dw},!0),n.moduleLoader=new $F(n),n.localObserver=new Up(n),cv.on("notifyExternalChange",n.detectFunction,n,n.randomId),Zx.validate(),qt(i)||n.appendTo(),n}return XF(t,r),t.prototype.requiredModules=function(){return[]},t.prototype.destroy=function(){this.isDestroyed||(this.enablePersistence&&this.setPersistData(),this.localObserver.destroy(),!this.refreshing&&(z([this.element],["e-control"]),this.trigger("destroyed",{cancel:!1}),r.prototype.destroy.call(this),this.moduleLoader.clean(),cv.off("notifyExternalChange",this.detectFunction,this.randomId)))},t.prototype.refresh=function(){this.refreshing=!0,this.moduleLoader.clean(),this.destroy(),this.clearChanges(),this.localObserver=new Up(this),this.preRender(),this.injectModules(),this.render(),this.refreshing=!1},t.prototype.accessMount=function(){this.mount&&!this.isReactHybrid&&this.mount()},t.prototype.getRootElement=function(){return this.isReactHybrid?this.actualElement:this.element},t.prototype.getLocalData=function(){var e=this.getModuleName()+this.element.id;return window.localStorage.getItem(e)},t.prototype.appendTo=function(e){if(f(e)||"string"!=typeof e?f(e)||(this.element=e):this.element=re(e,document),!f(this.element)){var i="e-"+this.getModuleName().toLowerCase();N([this.element],["e-control",i]),this.isProtectedOnChange=!1,this.needsID&&!this.element.id&&(this.element.id=this.getUniqueID(this.getModuleName())),this.enablePersistence&&(this.mergePersistData(),window.addEventListener("unload",this.setPersistData.bind(this)));var n=Q("ej2_instances",this.element);(!n||-1===n.indexOf(this))&&r.prototype.addInstance.call(this),this.preRender(),this.injectModules(),this.render(),this.mount?this.accessMount():this.trigger("created")}},t.prototype.renderComplete=function(e){this.isRendered=!0},t.prototype.dataBind=function(){this.injectModules(),r.prototype.dataBind.call(this)},t.prototype.on=function(e,i,n){if("string"==typeof e)this.localObserver.on(e,i,n);else for(var s=0,o=e;s<o.length;s++){var a=o[s];this.localObserver.on(a.event,a.handler,a.context)}},t.prototype.off=function(e,i){if("string"==typeof e)this.localObserver.off(e,i);else for(var n=0,s=e;n<s.length;n++){var o=s[n];this.localObserver.off(o.event,o.handler)}},t.prototype.notify=function(e,i){!0!==this.isDestroyed&&this.localObserver.notify(e,i)},t.prototype.getInjectedModules=function(){return this.injectedModules},t.Inject=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.prototype.injectedModules||(this.prototype.injectedModules=[]);for(var n=0;n<e.length;n++)-1===this.prototype.injectedModules.indexOf(e[n])&&this.prototype.injectedModules.push(e[n])},t.prototype.createElement=function(e,i,n){return ti(e,i)},t.prototype.triggerStateChange=function(e,i){this.isReactHybrid&&(this.setState(),this.currentContext={calls:e,args:i})},t.prototype.injectModules=function(){this.injectedModules&&this.injectedModules.length&&this.moduleLoader.inject(this.requiredModules(),this.injectedModules)},t.prototype.detectFunction=function(e){var i=Object.keys(e);i.length&&(this[i[0]]=e[i[0]])},t.prototype.mergePersistData=function(){var e;f(e=window.localStorage.getItem(this.getModuleName()+this.element.id))||""===e||this.setProperties(JSON.parse(e),!0)},t.prototype.setPersistData=function(){this.isDestroyed||window.localStorage.setItem(this.getModuleName()+this.element.id,this.getPersistData())},t.prototype.renderReactTemplates=function(e){f(e)||e()},t.prototype.clearTemplate=function(e,i){},t.prototype.getUniqueID=function(e){return this.isHistoryChanged()&&(qk=0),Gk=this.pageID(location.href),Jx=history.length,e+"_"+Gk+"_"+qk++},t.prototype.pageID=function(e){var i=0;if(0===e.length)return i;for(var n=0;n<e.length;n++)i=(i<<5)-i+e.charCodeAt(n),i&=i;return Math.abs(i)},t.prototype.isHistoryChanged=function(){return Gk!==this.pageID(location.href)||Jx!==history.length},t.prototype.addOnPersist=function(e){for(var i=this,n={},s=0,o=e;s<o.length;s++){var l,a=o[s];qt(l=Q(a,this))||Nt(a,this.getActualProperties(l),n)}return JSON.stringify(n,function(h,u){return i.getActualProperties(u)})},t.prototype.getActualProperties=function(e){return e instanceof Si?Q("properties",e):e},t.prototype.ignoreOnPersist=function(e){return JSON.stringify(this.iterateJsonProperties(this.properties,e))},t.prototype.iterateJsonProperties=function(e,i){for(var n={},s=function(u){if(-1===i.indexOf(u)){var d=e[u];if("object"!=typeof d||d instanceof Array)n[u]=d;else{var m=i.filter(function(v){return new RegExp(u+".").test(v)}).map(function(v){return v.replace(u+".","")});n[u]=o.iterateJsonProperties(o.getActualProperties(d),m)}}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a]);return n},Qx([E(!1)],t.prototype,"enablePersistence",void 0),Qx([E()],t.prototype,"enableRtl",void 0),Qx([E()],t.prototype,"locale",void 0),Qx([si],t)}(Gp);typeof window<"u"&&window.addEventListener("popstate",function(){qk=0});var QF=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ds=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},M3={left:0,top:0,bottom:0,right:0},Kk={isDragged:!1},F3=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return QF(t,r),Ds([E(0)],t.prototype,"left",void 0),Ds([E(0)],t.prototype,"top",void 0),t}(Si),$p=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.dragLimit=e.getDefaultPosition(),s.borderWidth=e.getDefaultPosition(),s.padding=e.getDefaultPosition(),s.diffX=0,s.prevLeft=0,s.prevTop=0,s.dragProcessStarted=!1,s.eleTop=0,s.tapHoldTimer=0,s.externalInitialize=!1,s.diffY=0,s.parentScrollX=0,s.parentScrollY=0,s.droppables={},s.bind(),s}var e;return QF(t,r),e=t,t.prototype.bind=function(){this.toggleEvents(),Z.isIE&&N([this.element],"e-block-touch"),this.droppables[this.scope]={}},t.getDefaultPosition=function(){return he({},M3)},t.prototype.toggleEvents=function(i){var n;qt(this.handle)||(n=re(this.handle,this.element));var s=this.enableTapHold&&Z.isDevice&&Z.isTouch?this.mobileInitialize:this.initialize;i?T.remove(n||this.element,Z.touchStartEvent,s):T.add(n||this.element,Z.touchStartEvent,s,this)},t.prototype.mobileInitialize=function(i){var n=this,s=i.currentTarget;this.tapHoldTimer=setTimeout(function(){n.externalInitialize=!0,n.removeTapholdTimer(),n.initialize(i,s)},this.tapHoldThreshold),T.add(document,Z.touchMoveEvent,this.removeTapholdTimer,this),T.add(document,Z.touchEndEvent,this.removeTapholdTimer,this)},t.prototype.removeTapholdTimer=function(){clearTimeout(this.tapHoldTimer),T.remove(document,Z.touchMoveEvent,this.removeTapholdTimer),T.remove(document,Z.touchEndEvent,this.removeTapholdTimer)},t.prototype.getScrollableParent=function(i,n){return f(i)?null:i[{vertical:"scrollHeight",horizontal:"scrollWidth"}[n]]>i[{vertical:"clientHeight",horizontal:"clientWidth"}[n]]&&("vertical"===n?i.scrollTop>0:i.scrollLeft>0)?("vertical"===n?(this.parentScrollY=this.parentScrollY+(0===this.parentScrollY?i.scrollTop:i.scrollTop-this.parentScrollY),this.tempScrollHeight=i.scrollHeight):(this.parentScrollX=this.parentScrollX+(0===this.parentScrollX?i.scrollLeft:i.scrollLeft-this.parentScrollX),this.tempScrollWidth=i.scrollWidth),f(i)?i:this.getScrollableParent(i.parentNode,n)):this.getScrollableParent(i.parentNode,n)},t.prototype.getScrollableValues=function(){this.parentScrollX=0,this.parentScrollY=0,this.element.classList.contains("e-dialog")&&this.element.classList.contains("e-dlg-modal"),this.getScrollableParent(this.element.parentNode,"vertical"),this.getScrollableParent(this.element.parentNode,"horizontal")},t.prototype.initialize=function(i,n){if(this.currentStateTarget=i.target,!this.isDragStarted()){if(this.isDragStarted(!0),this.externalInitialize=!1,this.target=i.currentTarget||n,this.dragProcessStarted=!1,this.abort){var s=this.abort;"string"==typeof s&&(s=[s]);for(var o=0;o<s.length;o++)if(!f(U(i.target,s[o])))return void(this.isDragStarted()&&this.isDragStarted(!0))}this.preventDefault&&!qt(i.changedTouches)&&"touchstart"!==i.type&&i.preventDefault(),this.element.setAttribute("aria-grabbed","true");var a=this.getCoordinates(i);if(this.initialPosition={x:a.pageX,y:a.pageY},!this.clone){var l=this.element.getBoundingClientRect();this.getScrollableValues(),i.clientX===i.pageX&&(this.parentScrollX=0),i.clientY===i.pageY&&(this.parentScrollY=0),this.relativeXPosition=a.pageX-(l.left+this.parentScrollX),this.relativeYPosition=a.pageY-(l.top+this.parentScrollY)}this.externalInitialize?this.intDragStart(i):(T.add(document,Z.touchMoveEvent,this.intDragStart,this),T.add(document,Z.touchEndEvent,this.intDestroy,this)),this.toggleEvents(!0),"touchstart"!==i.type&&this.isPreventSelect&&document.body.classList.add("e-prevent-select"),this.externalInitialize=!1,T.trigger(document.documentElement,Z.touchStartEvent,i)}},t.prototype.intDragStart=function(i){this.removeTapholdTimer();var n=!qt(i.changedTouches);if(!n||1===i.changedTouches.length){var o,s=this.getCoordinates(i),a=getComputedStyle(this.element);this.margin={left:parseInt(a.marginLeft,10),top:parseInt(a.marginTop,10),right:parseInt(a.marginRight,10),bottom:parseInt(a.marginBottom,10)};var l=this.element;if(this.clone&&this.dragTarget){var h=U(i.target,this.dragTarget);f(h)||(l=h)}this.isReplaceDragEle&&(l=this.currentStateCheck(i.target,l)),this.offset=this.calculateParentPosition(l),this.position=this.getMousePosition(i,this.isDragScroll);var u=this.initialPosition.x-s.pageX,d=this.initialPosition.y-s.pageY;if(Math.sqrt(u*u+d*d)>=this.distance||this.externalInitialize){var v=this.getHelperElement(i);if(!v||f(v))return;n&&i.preventDefault();var C=this.helperElement=v;if(this.parentClientRect=this.calculateParentPosition(C.offsetParent),this.dragStart){var A={event:i,element:l,target:this.getProperTargetElement(i),bindEvents:null,dragElement:C};this.trigger("dragStart",A)}this.dragArea?this.setDragArea():(this.dragLimit={left:0,right:0,bottom:0,top:0},this.borderWidth={top:0,left:0}),o={left:this.position.left-this.parentClientRect.left,top:this.position.top-this.parentClientRect.top},this.clone&&!this.enableTailMode&&(this.diffX=this.position.left-this.offset.left,this.diffY=this.position.top-this.offset.top),this.getScrollableValues();var _=getComputedStyle(l),M=parseFloat(_.marginTop);this.clone&&0!==M&&(o.top+=M),this.eleTop=isNaN(parseFloat(_.top))?0:parseFloat(_.top)-this.offset.top,this.enableScrollHandler&&!this.clone&&(o.top-=this.parentScrollY,o.left-=this.parentScrollX);var P=this.getProcessedPositionValue({top:o.top-this.diffY+"px",left:o.left-this.diffX+"px"});this.dragElePosition={top:o.top,left:o.left},Ft(C,this.getDragPosition({position:"absolute",left:P.left,top:P.top})),T.remove(document,Z.touchMoveEvent,this.intDragStart),T.remove(document,Z.touchEndEvent,this.intDestroy),this.bindDragEvents(C)}}},t.prototype.bindDragEvents=function(i){Zs(i)?(T.add(document,Z.touchMoveEvent,this.intDrag,this),T.add(document,Z.touchEndEvent,this.intDragStop,this),this.setGlobalDroppables(!1,this.element,i)):(this.toggleEvents(),document.body.classList.remove("e-prevent-select"))},t.prototype.elementInViewport=function(i){for(this.top=i.offsetTop,this.left=i.offsetLeft,this.width=i.offsetWidth,this.height=i.offsetHeight;i.offsetParent;)this.top+=(i=i.offsetParent).offsetTop,this.left+=i.offsetLeft;return this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&this.top+this.height<=window.pageYOffset+window.innerHeight&&this.left+this.width<=window.pageXOffset+window.innerWidth},t.prototype.getProcessedPositionValue=function(i){return this.queryPositionInfo?this.queryPositionInfo(i):i},t.prototype.calculateParentPosition=function(i){if(f(i))return{left:0,top:0};var n=i.getBoundingClientRect(),s=getComputedStyle(i);return{left:n.left+window.pageXOffset-parseInt(s.marginLeft,10),top:n.top+window.pageYOffset-parseInt(s.marginTop,10)}},t.prototype.intDrag=function(i){if(qt(i.changedTouches)||1===i.changedTouches.length){var n,s;this.clone&&i.changedTouches&&Z.isDevice&&Z.isTouch&&i.preventDefault(),this.position=this.getMousePosition(i,this.isDragScroll);var o=this.getDocumentWidthHeight("Height");o<this.position.top&&(this.position.top=o);var a=this.getDocumentWidthHeight("Width");if(a<this.position.left&&(this.position.left=a),this.drag){var l=this.getProperTargetElement(i);this.trigger("drag",{event:i,element:this.element,target:l})}var h=this.checkTargetElement(i);if(h.target&&h.instance){var u=!0;this.hoverObject&&(this.hoverObject.instance!==h.instance?this.triggerOutFunction(i,h):u=!1),u&&(h.instance.dragData[this.scope]=this.droppables[this.scope],h.instance.intOver(i,h.target),this.hoverObject=h)}else this.hoverObject&&this.triggerOutFunction(i,h);var d=this.droppables[this.scope].helper;this.parentClientRect=this.calculateParentPosition(this.helperElement.offsetParent);var m=this.parentClientRect.left,v=this.parentClientRect.top,C=this.getCoordinates(i),S=C.pageX,A=C.pageY,_=this.position.left-this.diffX,M=this.position.top-this.diffY,P=getComputedStyle(d);if(this.dragArea){if(this.pageX!==S||this.skipDistanceCheck){var B=d.offsetWidth+(parseFloat(P.marginLeft)+parseFloat(P.marginRight));n=this.dragLimit.left>_&&_>0?this.dragLimit.left:this.dragLimit.right+window.pageXOffset<_+B&&_>0?_-(_-this.dragLimit.right)+window.pageXOffset-B:_<0?this.dragLimit.left:_}if(this.pageY!==A||this.skipDistanceCheck){var j=d.offsetHeight+(parseFloat(P.marginTop)+parseFloat(P.marginBottom));s=this.dragLimit.top>M&&M>0?this.dragLimit.top:this.dragLimit.bottom+window.pageYOffset<M+j&&M>0?M-(M-this.dragLimit.bottom)+window.pageYOffset-j:M<0?this.dragLimit.top:M}}else n=_,s=M;var fe,Ee,G=v+this.borderWidth.top,ne=m+this.borderWidth.left;this.dragProcessStarted&&(f(s)&&(s=this.prevTop),f(n)&&(n=this.prevLeft)),this.helperElement.classList.contains("e-treeview")?this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,fe=s-G<0?this.dragLimit.top:s-this.borderWidth.top,Ee=n-ne<0?this.dragLimit.left:n-this.borderWidth.left):(fe=s-this.borderWidth.top,Ee=n-this.borderWidth.left):this.dragArea?(this.dragLimit.top=this.clone?this.dragLimit.top:0,fe=s-G<0?this.dragLimit.top:s-G,Ee=n-ne<0?this.dragElePosition.left:n-ne):(fe=s-G,Ee=n-ne);var Pe=parseFloat(getComputedStyle(this.element).marginTop);if(Pe>0&&(this.clone&&(fe+=Pe,M<0&&(Pe+M>=0?fe=Pe+M:fe-=Pe),fe=this.dragLimit.bottom<fe?this.dragLimit.bottom:fe),s-G<0))if(M+Pe+(d.offsetHeight-G)>=0){var ie=this.dragLimit.top+M-G;ie+Pe+G<0?fe-=Pe+G:fe=ie}else fe-=Pe+G;this.dragArea&&this.helperElement.classList.contains("e-treeview")&&(fe=fe+(j=d.offsetHeight+(parseFloat(P.marginTop)+parseFloat(P.marginBottom)))>this.dragLimit.bottom?this.dragLimit.bottom-j:fe),this.enableScrollHandler&&!this.clone&&(fe-=this.parentScrollY,Ee-=this.parentScrollX);var Ie=this.getProcessedPositionValue({top:fe+"px",left:Ee+"px"});Ft(d,this.getDragPosition(Ie)),!this.elementInViewport(d)&&this.enableAutoScroll&&!this.helperElement.classList.contains("e-treeview")&&this.helperElement.scrollIntoView();var Te=document.querySelectorAll(":hover");if(this.enableAutoScroll&&this.helperElement.classList.contains("e-treeview")){0===Te.length&&(Te=this.getPathElements(i));var ce=this.getScrollParent(Te,!1);this.elementInViewport(this.helperElement)?this.getScrollPosition(ce,fe):this.elementInViewport(this.helperElement)||(0===(Te=[].slice.call(document.querySelectorAll(":hover"))).length&&(Te=this.getPathElements(i)),ce=this.getScrollParent(Te,!0),this.getScrollPosition(ce,fe))}this.dragProcessStarted=!0,this.prevLeft=n,this.prevTop=s,this.position.left=n,this.position.top=s,this.pageX=S,this.pageY=A}},t.prototype.getScrollParent=function(i,n){for(var o,s=n?i.reverse():i,a=s.length-1;a>=0;a--)if(("auto"===(o=window.getComputedStyle(s[a])["overflow-y"])||"scroll"===o)&&s[a].scrollHeight>s[a].clientHeight)return s[a];if("visible"===(o=window.getComputedStyle(document.scrollingElement)["overflow-y"]))return document.scrollingElement.style.overflow="auto",document.scrollingElement},t.prototype.getScrollPosition=function(i,n){i&&i===document.scrollingElement?i.clientHeight+document.scrollingElement.scrollTop-this.helperElement.clientHeight<n&&i.getBoundingClientRect().height+this.parentClientRect.top>n?i.scrollTop+=this.helperElement.clientHeight:i.scrollTop>n-this.helperElement.clientHeight&&(i.scrollTop-=this.helperElement.clientHeight):i&&i!==document.scrollingElement&&(i.clientHeight+i.getBoundingClientRect().top-this.helperElement.clientHeight+document.scrollingElement.scrollTop<n?i.scrollTop+=this.helperElement.clientHeight:i.getBoundingClientRect().top>n-this.helperElement.clientHeight-document.scrollingElement.scrollTop&&(i.scrollTop-=this.helperElement.clientHeight))},t.prototype.getPathElements=function(i){return document.elementsFromPoint(i.clientX>0?i.clientX:0,i.clientY>0?i.clientY:0)},t.prototype.triggerOutFunction=function(i,n){this.hoverObject.instance.intOut(i,n.target),this.hoverObject.instance.dragData[this.scope]=null,this.hoverObject=null},t.prototype.getDragPosition=function(i){var n=he({},i);return this.axis&&("x"===this.axis?delete n.top:"y"===this.axis&&delete n.left),n},t.prototype.getDocumentWidthHeight=function(i){var n=document.body,s=document.documentElement;return Math.max(n["scroll"+i],s["scroll"+i],n["offset"+i],s["offset"+i],s["client"+i])},t.prototype.intDragStop=function(i){if(this.dragProcessStarted=!1,qt(i.changedTouches)||1===i.changedTouches.length){if(-1!==["touchend","pointerup","mouseup"].indexOf(i.type)){if(this.dragStop){var s=this.getProperTargetElement(i);this.trigger("dragStop",{event:i,element:this.element,target:s,helper:this.helperElement})}this.intDestroy(i)}else this.element.setAttribute("aria-grabbed","false");var o=this.checkTargetElement(i);o.target&&o.instance&&(o.instance.dragStopCalled=!0,o.instance.dragData[this.scope]=this.droppables[this.scope],o.instance.intDrop(i,o.target)),this.setGlobalDroppables(!0),document.body.classList.remove("e-prevent-select")}},t.prototype.intDestroy=function(i){this.dragProcessStarted=!1,this.toggleEvents(),document.body.classList.remove("e-prevent-select"),this.element.setAttribute("aria-grabbed","false"),T.remove(document,Z.touchMoveEvent,this.intDragStart),T.remove(document,Z.touchEndEvent,this.intDragStop),T.remove(document,Z.touchEndEvent,this.intDestroy),T.remove(document,Z.touchMoveEvent,this.intDrag),this.isDragStarted()&&this.isDragStarted(!0)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.getModuleName=function(){return"draggable"},t.prototype.isDragStarted=function(i){return i&&(Kk.isDragged=!Kk.isDragged),Kk.isDragged},t.prototype.setDragArea=function(){var i,n,a,s=0,o=0;if(a="string"==typeof this.dragArea?re(this.dragArea):this.dragArea){var h=a.getBoundingClientRect();i=a.scrollWidth?a.scrollWidth:h.right-h.left,n=a.scrollHeight?this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?a.clientHeight:a.scrollHeight:h.bottom-h.top;for(var u=["Top","Left","Bottom","Right"],d=getComputedStyle(a),m=0;m<u.length;m++){var v=u[m],C=d["border"+v+"Width"],S=d["padding"+v],A=v.toLowerCase();this.borderWidth[A]=isNaN(parseFloat(C))?0:parseFloat(C),this.padding[A]=isNaN(parseFloat(S))?0:parseFloat(S)}s=this.dragArea&&!f(this.helperElement)&&this.helperElement.classList.contains("e-treeview")?h.top+document.scrollingElement.scrollTop:h.top,this.dragLimit.left=(o=h.left)+this.borderWidth.left+this.padding.left,this.dragLimit.top=a.offsetTop+this.borderWidth.top+this.padding.top,this.dragLimit.right=o+i-(this.borderWidth.right+this.padding.right),this.dragLimit.bottom=s+n-(this.borderWidth.bottom+this.padding.bottom)}},t.prototype.getProperTargetElement=function(i){var s,n=this.getCoordinates(i),o=this.helperElement.style.pointerEvents||"";return xw(i.target,this.helperElement)||-1!==i.type.indexOf("touch")?(this.helperElement.style.pointerEvents="none",s=document.elementFromPoint(n.clientX,n.clientY),this.helperElement.style.pointerEvents=o):s=i.target,s},t.prototype.currentStateCheck=function(i,n){return f(this.currentStateTarget)||this.currentStateTarget===i?f(n)?i:n:this.currentStateTarget},t.prototype.getMousePosition=function(i,n){var a,l,s=void 0!==i.srcElement?i.srcElement:i.target,o=this.getCoordinates(i),h=f(s.offsetParent);return n?(a=this.clone?o.pageX:o.pageX+(h?0:s.offsetParent.scrollLeft)-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+(h?0:s.offsetParent.scrollTop)-this.relativeYPosition):(a=this.clone?o.pageX:o.pageX+window.pageXOffset-this.relativeXPosition,l=this.clone?o.pageY:o.pageY+window.pageYOffset-this.relativeYPosition),{left:a-(this.margin.left+this.cursorAt.left),top:l-(this.margin.top+this.cursorAt.top)}},t.prototype.getCoordinates=function(i){return i.type.indexOf("touch")>-1?i.changedTouches[0]:i},t.prototype.getHelperElement=function(i){var n;return this.clone?this.helper?n=this.helper({sender:i,element:this.target}):(n=ti("div",{className:"e-drag-helper e-block-touch",innerHTML:"Draggable"}),document.body.appendChild(n)):n=this.element,n},t.prototype.setGlobalDroppables=function(i,n,s){this.droppables[this.scope]=i?null:{draggable:n,helper:s,draggedElement:this.element}},t.prototype.checkTargetElement=function(i){var n=this.getProperTargetElement(i),s=this.getDropInstance(n);if(!s&&n&&!f(n.parentNode)){var o=U(n.parentNode,".e-droppable")||n.parentElement;o&&(s=this.getDropInstance(o))}return{target:n,instance:s}},t.prototype.getDropInstance=function(i){var s,o=i&&i.ej2_instances;if(o)for(var a=0,l=o;a<l.length;a++){var h=l[a];if("droppable"===h.getModuleName()){s=h;break}}return s},t.prototype.destroy=function(){this.toggleEvents(!0),r.prototype.destroy.call(this)},Ds([rn({},F3)],t.prototype,"cursorAt",void 0),Ds([E(!0)],t.prototype,"clone",void 0),Ds([E()],t.prototype,"dragArea",void 0),Ds([E()],t.prototype,"isDragScroll",void 0),Ds([E()],t.prototype,"isReplaceDragEle",void 0),Ds([E(!0)],t.prototype,"isPreventSelect",void 0),Ds([q()],t.prototype,"drag",void 0),Ds([q()],t.prototype,"dragStart",void 0),Ds([q()],t.prototype,"dragStop",void 0),Ds([E(1)],t.prototype,"distance",void 0),Ds([E()],t.prototype,"handle",void 0),Ds([E()],t.prototype,"abort",void 0),Ds([E()],t.prototype,"helper",void 0),Ds([E("default")],t.prototype,"scope",void 0),Ds([E("")],t.prototype,"dragTarget",void 0),Ds([E()],t.prototype,"axis",void 0),Ds([E()],t.prototype,"queryPositionInfo",void 0),Ds([E(!1)],t.prototype,"enableTailMode",void 0),Ds([E(!1)],t.prototype,"skipDistanceCheck",void 0),Ds([E(!0)],t.prototype,"preventDefault",void 0),Ds([E(!1)],t.prototype,"enableAutoScroll",void 0),Ds([E(!1)],t.prototype,"enableTapHold",void 0),Ds([E(750)],t.prototype,"tapHoldThreshold",void 0),Ds([E(!1)],t.prototype,"enableScrollHandler",void 0),e=Ds([si],t)}(Gp),N3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),fv=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Mw=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.mouseOver=!1,n.dragData={},n.dragStopCalled=!1,n.bind(),n}return N3(t,r),t.prototype.bind=function(){this.wireEvents()},t.prototype.wireEvents=function(){T.add(this.element,Z.touchEndEvent,this.intDrop,this)},t.prototype.onPropertyChanged=function(e,i){},t.prototype.getModuleName=function(){return"droppable"},t.prototype.intOver=function(e,i){this.mouseOver||(this.trigger("over",{event:e,target:i,dragData:this.dragData[this.scope]}),this.mouseOver=!0)},t.prototype.intOut=function(e,i){this.mouseOver&&(this.trigger("out",{evt:e,target:i}),this.mouseOver=!1)},t.prototype.intDrop=function(e,i){if(this.dragStopCalled){this.dragStopCalled=!1;var a,n=!0,s=this.dragData[this.scope],o=!!s&&s.helper&&Zs(s.helper);o&&(a=this.isDropArea(e,s.helper,i),this.accept&&(n=pv(s.helper,this.accept))),o&&this.drop&&a.canDrop&&n&&this.trigger("drop",{event:e,target:a.target,droppedElement:s.helper,dragData:s}),this.mouseOver=!1}},t.prototype.isDropArea=function(e,i,n){var s={canDrop:!0,target:n||e.target},o="touchend"===e.type;if(o||s.target===i){i.style.display="none";var a=o?e.changedTouches[0]:e,l=document.elementFromPoint(a.clientX,a.clientY);s.canDrop=!1,s.canDrop=xw(l,this.element),s.canDrop&&(s.target=l),i.style.display=""}return s},t.prototype.destroy=function(){T.remove(this.element,Z.touchEndEvent,this.intDrop),r.prototype.destroy.call(this)},fv([E()],t.prototype,"accept",void 0),fv([E("default")],t.prototype,"scope",void 0),fv([q()],t.prototype,"drop",void 0),fv([q()],t.prototype,"over",void 0),fv([q()],t.prototype,"out",void 0),fv([si],t)}(Gp),B3=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),tT=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},JF={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,space:32,escape:27,pageup:33,pagedown:34,end:35,home:36,leftarrow:37,uparrow:38,rightarrow:39,downarrow:40,insert:45,delete:46,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,plus:187,comma:188,minus:189,dot:190,forwardslash:191,graveaccent:192,openbracket:219,backslash:220,closebracket:221,singlequote:222},In=function(r){function t(i,n){var s=r.call(this,n,i)||this;return s.keyPressHandler=function(o){for(var a=o.altKey,l=o.ctrlKey,h=o.shiftKey,u=o.which,m=0,v=Object.keys(s.keyConfigs);m<v.length;m++)for(var C=v[m],A=0,_=s.keyConfigs[C].split(",");A<_.length;A++){var P=e.getKeyConfigData(_[A].trim());a===P.altKey&&l===P.ctrlKey&&h===P.shiftKey&&u===P.keyCode&&(o.action=C,s.keyAction&&s.keyAction(o))}},s.bind(),s}var e;return B3(t,r),e=t,t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.onPropertyChanged=function(i,n){},t.prototype.bind=function(){this.wireEvents()},t.prototype.getModuleName=function(){return"keyboard"},t.prototype.wireEvents=function(){this.element.addEventListener(this.eventName,this.keyPressHandler)},t.prototype.unwireEvents=function(){this.element.removeEventListener(this.eventName,this.keyPressHandler)},t.getKeyConfigData=function(i){if(i in this.configCache)return this.configCache[i];var n=i.toLowerCase().split("+"),s={altKey:-1!==n.indexOf("alt"),ctrlKey:-1!==n.indexOf("ctrl"),shiftKey:-1!==n.indexOf("shift"),keyCode:null};return s.keyCode=n[n.length-1].length>1&&Number(n[n.length-1])?Number(n[n.length-1]):e.getKeyCode(n[n.length-1]),e.configCache[i]=s,s},t.getKeyCode=function(i){return JF[i]||i.toUpperCase().charCodeAt(0)},t.configCache={},tT([E({})],t.prototype,"keyConfigs",void 0),tT([E("keyup")],t.prototype,"eventName",void 0),tT([q()],t.prototype,"keyAction",void 0),e=tT([si],t)}(Gp),es=function(){function r(t,e,i){this.controlName=t,this.localeStrings=e,this.setLocale(i||Dw)}return r.prototype.setLocale=function(t){var e=this.intGetControlConstant(r.locale,t);this.currentLocale=e||this.localeStrings},r.load=function(t){this.locale=he(this.locale,t,{},!0)},r.prototype.getConstant=function(t){return f(this.currentLocale[t])?this.localeStrings[t]||"":this.currentLocale[t]},r.prototype.intGetControlConstant=function(t,e){return t[e]?t[e][this.controlName]:null},r.locale={},r}(),eN=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Dc=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},$k=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return eN(t,r),Dc([E(50)],t.prototype,"swipeThresholdDistance",void 0),t}(Si),tN=/(Up|Down)/,Ja=function(r){function t(e,i){var n=r.call(this,i,e)||this;return n.touchAction=!0,n.tapCount=0,n.startEvent=function(s){if(!0===n.touchAction){var o=n.updateChangeTouches(s);void 0!==s.changedTouches&&(n.touchAction=!1),n.isTouchMoved=!1,n.movedDirection="",n.startPoint=n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY},n.startEventData=o,n.hScrollLocked=n.vScrollLocked=!1,n.tStampStart=Date.now(),n.timeOutTapHold=setTimeout(function(){n.tapHoldEvent(s)},n.tapHoldThreshold),T.add(n.element,Z.touchMoveEvent,n.moveEvent,n),T.add(n.element,Z.touchEndEvent,n.endEvent,n),T.add(n.element,Z.touchCancelEvent,n.cancelEvent,n)}},n.moveEvent=function(s){var o=n.updateChangeTouches(s);n.movedPoint=o,n.isTouchMoved=!(o.clientX===n.startPoint.clientX&&o.clientY===n.startPoint.clientY);var a={};n.isTouchMoved&&(clearTimeout(n.timeOutTapHold),n.calcScrollPoints(s),a=he(a,{},{startEvents:n.startEventData,originalEvent:s,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,scrollDirection:n.scrollDirection,velocity:n.getVelocity(o)}),n.trigger("scroll",a),n.lastMovedPoint={clientX:o.clientX,clientY:o.clientY})},n.cancelEvent=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap),n.tapCount=0,n.swipeFn(s),T.remove(n.element,Z.touchCancelEvent,n.cancelEvent)},n.endEvent=function(s){n.swipeFn(s),n.isTouchMoved||"function"==typeof n.tap&&(n.trigger("tap",{originalEvent:s,tapCount:++n.tapCount}),n.timeOutTap=setTimeout(function(){n.tapCount=0},n.tapThreshold)),n.modeclear()},n.swipeFn=function(s){clearTimeout(n.timeOutTapHold),clearTimeout(n.timeOutTap);var o=n.updateChangeTouches(s),a=o.clientX-n.startPoint.clientX,l=o.clientY-n.startPoint.clientY;a=Math.floor(a<0?-1*a:a),l=Math.floor(l<0?-1*l:a),n.isTouchMoved=a>1||l>1,/Firefox/.test(Z.userAgent)&&0===o.clientX&&0===o.clientY&&"mouseup"===s.type&&(n.isTouchMoved=!1),n.endPoint=o,n.calcPoints(s);var u={originalEvent:s,startEvents:n.startEventData,startX:n.startPoint.clientX,startY:n.startPoint.clientY,distanceX:n.distanceX,distanceY:n.distanceY,swipeDirection:n.movedDirection,velocity:n.getVelocity(o)};if(n.isTouchMoved){var d=void 0,m=n.swipeSettings.swipeThresholdDistance;d=he(d,n.defaultArgs,u);var v=!1,C=n.element,S=n.isScrollable(C),A=tN.test(n.movedDirection);(m<n.distanceX&&!A||m<n.distanceY&&A)&&(v=!S||n.checkSwipe(C,A)),v&&n.trigger("swipe",d)}n.modeclear()},n.modeclear=function(){n.modeClear=setTimeout(function(){n.touchAction=!0},"function"!=typeof n.tap?0:20),n.lastTapTime=(new Date).getTime(),T.remove(n.element,Z.touchMoveEvent,n.moveEvent),T.remove(n.element,Z.touchEndEvent,n.endEvent),T.remove(n.element,Z.touchCancelEvent,n.cancelEvent)},n.bind(),n}return eN(t,r),t.prototype.onPropertyChanged=function(e,i){},t.prototype.bind=function(){this.wireEvents(),Z.isIE&&this.element.classList.add("e-block-touch")},t.prototype.destroy=function(){this.unwireEvents(),r.prototype.destroy.call(this)},t.prototype.wireEvents=function(){T.add(this.element,Z.touchStartEvent,this.startEvent,this)},t.prototype.unwireEvents=function(){T.remove(this.element,Z.touchStartEvent,this.startEvent)},t.prototype.getModuleName=function(){return"touch"},t.prototype.isScrollable=function(e){var i=getComputedStyle(e);return!!/(auto|scroll)/.test(i.overflow+i.overflowX+i.overflowY)},t.prototype.tapHoldEvent=function(e){this.tapCount=0,this.touchAction=!0,T.remove(this.element,Z.touchMoveEvent,this.moveEvent),T.remove(this.element,Z.touchEndEvent,this.endEvent),this.trigger("tapHold",{originalEvent:e}),T.remove(this.element,Z.touchCancelEvent,this.cancelEvent)},t.prototype.calcPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.startPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.startPoint.clientY)),this.movedDirection=this.distanceX>this.distanceY?i.clientX>this.startPoint.clientX?"Right":"Left":i.clientY<this.startPoint.clientY?"Up":"Down"},t.prototype.calcScrollPoints=function(e){var i=this.updateChangeTouches(e);this.defaultArgs={originalEvent:e},this.distanceX=Math.abs(Math.abs(i.clientX)-Math.abs(this.lastMovedPoint.clientX)),this.distanceY=Math.abs(Math.abs(i.clientY)-Math.abs(this.lastMovedPoint.clientY)),(this.distanceX>this.distanceY||!0===this.hScrollLocked)&&!1===this.vScrollLocked?(this.scrollDirection=i.clientX>this.lastMovedPoint.clientX?"Right":"Left",this.hScrollLocked=!0):(this.scrollDirection=i.clientY<this.lastMovedPoint.clientY?"Up":"Down",this.vScrollLocked=!0)},t.prototype.getVelocity=function(e){var i=e.clientX,n=e.clientY,s=Date.now(),o=i-this.startPoint.clientX,a=n-this.startPoint.clientX,l=s-this.tStampStart;return Math.sqrt(o*o+a*a)/l},t.prototype.checkSwipe=function(e,i){var n=["scroll","offset"],s=i?["Height","Top"]:["Width","Left"];return e[n[0]+s[0]]<=e[n[1]+s[0]]||0===e[n[0]+s[1]]||e[n[1]+s[0]]+e[n[0]+s[1]]>=e[n[0]+s[0]]},t.prototype.updateChangeTouches=function(e){return e.changedTouches&&0!==e.changedTouches.length?e.changedTouches[0]:e},Dc([q()],t.prototype,"tap",void 0),Dc([q()],t.prototype,"tapHold",void 0),Dc([q()],t.prototype,"swipe",void 0),Dc([q()],t.prototype,"scroll",void 0),Dc([E(350)],t.prototype,"tapThreshold",void 0),Dc([E(750)],t.prototype,"tapHoldThreshold",void 0),Dc([rn({},$k)],t.prototype,"swipeSettings",void 0),Dc([si],t)}(Gp),H3=new RegExp("\\n|\\r|\\s\\s+","g"),V3=new RegExp(/'|"/g),Yk=new RegExp("if ?\\("),z3=new RegExp("else if ?\\("),Zk=new RegExp("else"),Lb=new RegExp("for ?\\("),Xk=new RegExp("(/if|/for)"),j3=new RegExp("\\((.*)\\)",""),iN=new RegExp("^[0-9]+$","g"),nN=new RegExp("[\\w\"'.\\s+]+","g"),Qk=new RegExp('"(.*?)"',"g"),U3=new RegExp("[\\w\"'@#$.\\s-+]+","g"),Jk=new RegExp("\\${([^}]*)}","g"),W3=/^\..*/gm,iT=/\\/gi,eR=/\\\\/gi,rN=new RegExp("[\\w\"'@#$.\\s+]+","g"),sN=/\window\./gm;function Ob(r,t,e,i,n){return!t||iN.test(r)||-1!==i.indexOf(r.split(".")[0])||n?r:e+"."+r}function tR(r,t,e,i){return t&&!iN.test(r)&&-1===i.indexOf(r.split(".")[0])?e+'["'+r:r}function lN(r){return r.match(eR)||(r=r.replace(iT,"\\\\")),r}function iR(r,t,e,i){if(r=r.trim(),/\window\./gm.test(r))return r;var s=/'|"/gm;return/@|\$|#/gm.test(r)&&(r=tR(r,-1===e.indexOf(r),t,e)+'"]'),W3.test(r)?function q3(r,t,e,i){return!t||iN.test(r)||-1!==i.indexOf(r.split(".")[0])||/^\..*/gm.test(r)?r:e+"."+r}(r,!s.test(r)&&-1===e.indexOf(r),t,e):Ob(r,!s.test(r)&&-1===e.indexOf(r),t,e,i)}var AZ=/^[\n\r.]+<tr|^<tr/,hN=/^[\n\r.]+<svg|^<path|^<g/,xd={};function Pi(r,t,e){var i=nR.compile(r,t,e);return function(n,s,o,a,l,h,u,d){var m=i(n,s,o,u,d);return"string"==typeof m?hN.test(m)?ti("svg",{innerHTML:m}).childNodes:ti(AZ.test(m)?"table":"div",{innerHTML:m}).childNodes:m}}function Pb(r,t,e,i,n){0}function Ic(r,t,e){var i=document.getElementById(r);if(i)for(var n=i.getElementsByClassName("blazor-inner-template"),s=0;s<n.length;s++){var o;o=f(e)?n[s].getAttribute("data-templateId"):n[e].getAttribute("data-templateId");var a=document.getElementById(o);if(a)for(var l=a.childNodes.length,h=0;h<l;h++)f(e)?n[s].appendChild(a.childNodes[0]):(n[e].appendChild(a.childNodes[0]),s=n.length)}}var cN=function(){function r(){}return r.prototype.compile=function(t,e,i){return void 0===e&&(e={}),function oN(r,t,e){var i="data",n=function aN(r,t,e,i){var n=0,s=[],o=r.match(/class="([^"]+|)\s{2}/g),a="";return o&&o.forEach(function(l){a=l.replace(/\s\s+/g," "),r=r.replace(l,a)}),r.replace(H3,"").replace(Qk,"'$1'").replace(Jk,function(l,h,u,d){var v=h.match(j3);if(v){var C=v[1];if(z3.test(h))h='";} '+h.replace(v[1],C.replace(nN,function(G){return Ob(G=G.trim(),!V3.test(G)&&-1===s.indexOf(G),t,s,i)}))+'{ \n str = str + "';else if(Yk.test(h))h='"; '+h.replace(v[1],C.replace(U3,function(G){return iR(G,t,s,i)}))+'{ \n str = str + "';else if(Lb.test(h)){var S=v[1].split(" of ");h='"; '+h.replace(v[1],function(G){return s.push(S[0]),s.push(S[0]+"Index"),"var i"+(n+=1)+"=0; i"+n+" < "+Ob(S[1],!0,t,s,i)+".length; i"+n+"++"})+"{ \n "+S[0]+"= "+Ob(S[1],!0,t,s,i)+"[i"+n+"]; \n var "+S[0]+"Index=i"+n+'; \n str = str + "'}else{var A=h.split("("),_=e&&e.hasOwnProperty(A[0])?"this.":"global";_=/\./.test(A[0])?"":_;var M=v[1].split(",");0!==v[1].length&&!/data/.test(M[0])&&!/window./.test(M[0])&&(v[1]="global"===_?t+"."+v[1]:v[1]),sN.test(h)&&/\]\./gm.test(h)||/@|\$|#/gm.test(h)?/@|\$|#|\]\./gm.test(h)&&(h='"+ '+("global"===_?"":_)+h.replace(v[1],C.replace(rN,function(G){return iR(G,t,s,i)}))+'+ "'):h='" + '+("global"===_?"":_)+h.replace(C,Ob(v[1].replace(/,( |)data.|,/gi,","+t+".").replace(/,( |)data.window/gi,",window"),"global"!==_,t,s,i))+'+"'}}else Zk.test(h)?h='"; '+h.replace(Zk,'} else { \n str = str + "'):h.match(Xk)?h=h.replace(Xk,'"; \n } \n str = str + "'):/@|#|\$/gm.test(h)?(h.match(iT)&&(h=lN(h)),h='"+'+tR(h,-1===s.indexOf(h),t,s)+'"]+"'):h=h.match(iT)?'"+'+tR(h=lN(h),-1===s.indexOf(h),t,s)+'"]+"':'"+'+Ob(h.replace(/,/gi,"+"+t+"."),-1===s.indexOf(h),t,s,i)+'+"';return h})}(r,i,t,e);return new Function(i,'var str="'+n+"\";var valueRegEx = (/value=\\'([A-Za-z0-9 _]*)((.)([\\w)(!-;?-\u25a0\\s]+)['])/g);\n    var hrefRegex = (/(?:href)([\\s='\"./]+)([\\w-./?=&\\\\#\"]+)((.)([\\w)(!-;/?-\u25a0\\s]+)['])/g);\n    if(str.match(valueRegEx)){\n        var check = str.match(valueRegEx);\n        var str1 = str;\n        for (var i=0; i < check.length; i++) {\n            var check1 = str.match(valueRegEx)[i].split('value=')[1];\n            var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n            change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n            str1 = str1.replace(check1, change);\n        }\n        str = str.replace(str, str1);\n    }\n    else if (str.match(/(?:href='')/) === null) {\n        if(str.match(hrefRegex)) {\n            var check = str.match(hrefRegex);\n            var str1 = str;\n            for (var i=0; i < check.length; i++) {\n                var check1 = str.match(hrefRegex)[i].split('href=')[1];\n                if (check1) {\n                    var change = check1.match(/^'/) !== null ? check1.replace(/^'/, '\"') : check1;\n                    change =change.match(/.$/)[0] === '\\'' ? change.replace(/.$/,'\"') : change;\n                    str1 = str1.replace(check1, change);\n                }\n            }\n            str = str.replace(str, str1);\n        }\n    }\n     return str;").bind(t)}(t,e)},r}(),nR={compile:(new cN).compile},$3=["script","style","iframe[src]",'link[href*="javascript:"]','object[type="text/x-scriptlet"]','object[data^="data:text/html;base64"]','img[src^="data:text/html;base64"]','[src^="javascript:"]','[dynsrc^="javascript:"]','[lowsrc^="javascript:"]','[type^="application/x-shockwave-flash"]'],Y3=[{attribute:"href",selector:'[href*="javascript:"]'},{attribute:"background",selector:'[background^="javascript:"]'},{attribute:"style",selector:'[style*="javascript:"]'},{attribute:"style",selector:'[style*="expression("]'},{attribute:"href",selector:'a[href^="data:text/html;base64"]'}],dN=["onchange","onclick","onmouseover","onmouseout","onkeydown","onload","onerror","onblur","onfocus","onbeforeload","onbeforeunload","onkeyup","onsubmit","onafterprint","onbeforeonload","onbeforeprint","onblur","oncanplay","oncanplaythrough","onchange","onclick","oncontextmenu","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onerror","onfocus","onformchange","onforminput","onhaschange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onoffline","onoine","ononline","onpagehide","onpageshow","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreadystatechange","onredo","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","onundo","onunload","onvolumechange","onwaiting","onmouseenter","onmouseleave","onmousewheel","onstart","onpropertychange"],Nn=function(){function r(){}return r.beforeSanitize=function(){return{selectors:{tags:$3,attributes:Y3}}},r.sanitize=function(t){var e=this.beforeSanitize();return this.serializeValue(e,t)},r.serializeValue=function(t,e){this.removeAttrs=t.selectors.attributes,this.removeTags=t.selectors.tags,this.wrapElement=document.createElement("div"),this.wrapElement.innerHTML=e,this.removeXssTags(),this.removeJsEvents(),this.removeXssAttrs();var i=this.wrapElement.innerHTML;return this.removeElement(),i.replace("&amp;","&")},r.removeElement=function(){for(var t=this.wrapElement.children,e=0;e<t.length;e++)for(var i=t[e].attributes,n=0;n<i.length;n++)this.wrapElement.children[e].removeAttribute(i[n].localName)},r.removeXssTags=function(){var t=this.wrapElement.querySelectorAll(this.removeTags.join(","));t.length>0&&t.forEach(function(e){le(e)})},r.removeJsEvents=function(){var t=this.wrapElement.querySelectorAll("["+dN.join("],[")+"]");t.length>0&&t.forEach(function(e){dN.forEach(function(i){e.hasAttribute(i)&&e.removeAttribute(i)})})},r.removeXssAttrs=function(){var t=this;this.removeAttrs.forEach(function(e,i){var n=t.wrapElement.querySelectorAll(e.selector);n.length>0&&n.forEach(function(s){s.removeAttribute(e.attribute)})})},r}();function X3(r){return function(t){!function Z3(r,t){t.forEach(function(e){Object.getOwnPropertyNames(e.prototype).forEach(function(i){(!r.prototype.hasOwnProperty(i)||e.isFormBase)&&(r.prototype[i]=e.prototype[i])})})}(t,r)}}function pN(r,t,e){var i={};if(r&&r.length){for(var n=0,s=r;n<s.length;n++){var o=s[n];!0===e?(t.propCollection[o]=new b.vpe(!1),t[o]=t.propCollection[o]):i[o]=new b.vpe(!1)}!0!==e&&t.setProperties(i,!0)}}function Mb(r,t,e){var i=Object.keys(r.registeredTemplate);if(i.length)for(var n=t&&t.filter(function(P){return!/\./g.test(P)}),s=0,o=n&&n||i;s<o.length;s++){var a=o[s];if(e&&e.length)for(var l=0;l<e.length;l++)for(var h=0;h<r.registeredTemplate.template.length;h++)r.registeredTemplate.template[h].rootNodes[0]===e[l]&&(d=r.registeredTemplate[a])[h].destroy();else if(r.registeredTemplate[a])for(var m=0,v=r.registeredTemplate[a];m<v.length;m++){var d;if(!(d=v[m]).destroyed){if(d._view){var C=d._view.renderer.parentNode(d.rootNodes[0]);if(!f(C))for(h=0;h<d.rootNodes.length;h++)C.appendChild(d.rootNodes[h])}d.destroy()}}delete r.registeredTemplate[a]}for(var S=function(P){P.instance&&P.instance.clearTemplate(t&&t.filter(function(B){return!!new RegExp(P.name).test(B)}))},A=0,_=r.tagObjects;A<_.length;A++)S(_[A])}function Fb(r,t,e){for(var i=r.replace(/\[/g,".").replace(/\]/g,"").split("."),n=e||{},s=0;s<i.length;s++){var o=i[s];s+1===i.length?n[o]=void 0===t?{}:t:void 0===n[o]&&(n[o]={}),n=n[o]}return n}var fN=/Ref$/,Fw=function(){function r(){this.hasChanges=!1,this.propCollection={},this.dataSource={},this.tags=[],this.tagObjects=[]}return r.prototype.ngOnInit=function(){this.registeredTemplate={};for(var t=0,e=this.tags;t<e.length;t++){var i=e[t],n=Q("child"+i.substring(0,1).toUpperCase()+i.substring(1),this);n&&this.tagObjects.push({instance:n,name:i})}for(var s=Object.keys(this),o=0;o<s.length;o++){var a=Q(s[o],this);"object"==typeof a&&a&&a.elementRef&&(Q(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",this)||Nt(-1!==s[o].indexOf("Ref")?s[o]:s[o]+"Ref",a,this),Q("viewContainerRef",this)&&!Q("_viewContainerRef",a.elementRef.nativeElement)&&!Q("propName",a.elementRef.nativeElement)&&(Nt("_viewContainerRef",Q("viewContainerRef",this),a.elementRef.nativeElement),Nt("propName",s[o].replace("Ref",""),a.elementRef.nativeElement)))}for(var l=0,h=s=(s=Object.keys(this)).filter(function(S){return/Ref$/i.test(S)});l<h.length;l++){var d=h[l].replace("Ref","");Nt(d.replace("_","."),Q(d,this),this.propCollection)}var m=Object.keys(this);if(this.directivePropList){for(var v=0;v<this.directivePropList.length;v++){var C=this.directivePropList[v];-1!==m.indexOf(C)&&(!1===Q(C,this)||Q(C,this))&&Nt(C,Q(C,this),this.propCollection)}this.hasChanges=!0}this.isInitChanges=!0},r.prototype.registerEvents=function(t){pN(t,this,!0)},r.prototype.ngOnChanges=function(t){for(var e=0,i=Object.keys(t);e<i.length;e++){var n=i[e];this.propCollection[n]=t[n].currentValue}this.isUpdated=!1,this.hasChanges=!0},r.prototype.clearTemplate=function(t){Mb(this,t)},r.prototype.getProperties=function(){for(var t=0,e=this.tagObjects;t<e.length;t++){var i=e[t];this.propCollection[i.name]=i.instance.getProperties()}return this.propCollection},r.prototype.isChanged=function(){var t=this.hasChanges;if(!f(this.propCollection[this.property]))for(var i=Object.keys(this.propCollection[this.property][0]),n=0;n<i.length;n++)if(!f(this.propCollection[i[n]])){var s=Q(i[n],this),o=this.propCollection[this.property][0][i[n]];!f(s)&&this.propCollection[i[n]]!==s&&o!==s&&(Nt(i[n],s,this.propCollection[this.property][0]),Nt(i[n],s,this.propCollection),this.hasChanges=!0,this.isUpdated=!1)}for(var a=0,l=this.tagObjects;a<l.length;a++)t=t||l[a].instance.hasChanges;return t||this.hasChanges},r.prototype.ngAfterContentChecked=function(){if(this.hasChanges=this.isChanged(),this.isInitChanges||this.hasChanges)for(var t=Object.keys(this),e=0,i=t=t.filter(function(o){return fN.test(o)});e<i.length;e++){var s=i[e].replace("Ref","");Nt(s.replace("_","."),Q(s,this),this.propCollection)}},r.prototype.ngAfterViewChecked=function(){this.isUpdated&&(this.hasChanges=!1)},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.directivePropList=[]},r}(),Nw=function(){function r(t){this.list=[],this.hasChanges=!1,this.propertyName=t}return r.prototype.ngOnInit=function(){this.isInitChanges=!0},r.prototype.ngAfterContentInit=function(){var t=this,e=0;this.list=this.children.map(function(i){return i.dirIndex=e++,i.property=t.propertyName,i}),this.hasChanges=!0},r.prototype.getProperties=function(){for(var t=[],e=0,i=this.list;e<i.length;e++)t.push(i[e].getProperties());return t},r.prototype.isChanged=function(){var t=this,e=!1,i=0,n=!1,s=this.children.map(function(u){return u});if(this.list.length===this.children.length)for(var o=0;o<this.list.length;o++)this.list[o].propCollection.dataSource&&(this.list[o].dataSource&&this.list[o].propCollection.dataSource!==this.list[o].dataSource&&(this.list[o].propCollection.dataSource=this.list[o].dataSource,this.list[o].hasChanges=!0),n=JSON.stringify(this.list[o].propCollection.dataSource)!==JSON.stringify(s[o].propCollection.dataSource)),n=this.list[o].hasChanges!==s[o].hasChanges;this.hasNewChildren=!(this.list.length===this.children.length&&!n)||null,this.hasNewChildren&&(this.list=this.children.map(function(u){return u.dirIndex=i++,u.property=t.propertyName,u}));for(var a=0,l=this.list;a<l.length;a++)e=e||l[a].hasChanges;return!!this.list.length&&e},r.prototype.clearTemplate=function(t){for(var e=this,i=0,n=this.list;i<n.length;i++)n[i].clearTemplate(t&&t.map(function(o){return new RegExp(e.propertyName).test(o)?o.replace(e.propertyName+".",""):o}))},r.prototype.ngAfterContentChecked=function(){this.hasChanges=this.isChanged();for(var t=0;t<this.list.length;t++)Q("childColumns",this.list[t])&&"columns"===Q("property",this.list[t])&&Nt("columns",Q("childColumns",this.list[t]).getProperties(),this.list[t].propCollection),this.list[t].isUpdated=!0},r.prototype.ngAfterViewInit=function(){this.isInitChanges=!1},r.prototype.ngOnDestroy=function(){this.list=[]},r}(),rR=function(){function r(){this.isProtectedOnChange=!0,this.isFormInit=!0}return r.prototype.saveChanges=function(t,e,i){if(!this.isProtectedOnChange){this.oldProperties[t]=i,this.changedProperties[t]=e,this.finalUpdate();var n=setTimeout(this.dataBind.bind(this));this.finalUpdate=function(){clearTimeout(n)}}},r.prototype.ngOnInit=function(t){var e=t||this;e.registeredTemplate={},e.ngBoundedEvents={},e.isAngular=!0,e.isFormInit=!0,t&&(this.tags=t.tags),e.tags=this.tags||[],e.complexTemplate=this.complexTemplate||[],e.tagObjects=[],e.ngAttr=this.getAngularAttr(e.element),e.createElement=function(S,A){var _=e.srenderer?e.srenderer.createElement(S):ti(S);return typeof A>"u"||(_.innerHTML=A.innerHTML?A.innerHTML:"",void 0!==A.className&&(_.className=A.className),void 0!==A.id&&(_.id=A.id),void 0!==A.styles&&_.setAttribute("style",A.styles),void 0!==e.ngAttr&&_.setAttribute(e.ngAttr,""),void 0!==A.attrs&&ze(_,A.attrs)),_};for(var i=0,n=e.tags;i<n.length;i++){var s=n[i],o={instance:Q("child"+s.substring(0,1).toUpperCase()+s.substring(1),e),name:s};e.tagObjects.push(o)}for(var a=Object.keys(e),l=0;l<a.length;l++){var h=Q(a[l],e);"object"==typeof h&&h&&h.elementRef&&("object"==typeof h&&h&&h.elementRef&&-1!==a[l].indexOf("_")&&-1===a[l].indexOf("Ref")&&Nt(a[l]+"Ref",h,e),e.viewContainerRef&&!Q("_viewContainerRef",h.elementRef.nativeElement)&&!Q("propName",h.elementRef.nativeElement)&&(Nt("_viewContainerRef",e.viewContainerRef,h.elementRef.nativeElement),Nt("propName",a[l].replace("Ref",""),h.elementRef.nativeElement)))}for(var u=0,d=a=(a=Object.keys(e)).filter(function(S){return/Ref$/i.test(S)&&/\_/i.test(S)});u<d.length;u++){var v=d[u].replace("Ref",""),C={};Nt(v.replace("_","."),Q(v,e),C),e.setProperties(C,!0)}},r.prototype.getAngularAttr=function(t){for(var n,e=t.attributes,i=e.length,s=0;s<i;s++)/_ngcontent/g.test(e[s].name)&&(n=e[s].name);return n},r.prototype.ngAfterViewInit=function(t){var e=t||this;/ejs-tab|ejs-accordion/g.test(e.ngEle.nativeElement.outerHTML)&&(e.ngEle.nativeElement.style.visibility="hidden");for(var n=Object.keys(e),s=0,o=n=n.filter(function(h){return/Ref$/i.test(h)});s<o.length;s++){var l=o[s].replace("Ref","");Nt(l.replace("_","."),Q(l+"Ref",e),e)}setTimeout(function(){(typeof window<"u"&&e.element||e.getModuleName().includes("btn"))&&(e.appendTo(e.element),e.ngEle.nativeElement.style.visibility="")})},r.prototype.ngOnDestroy=function(t){var e=t||this;setTimeout(function(){typeof window<"u"&&e.element.classList.contains("e-control")&&(e.destroy(),e.clearTemplate(null),e.ngBoundedEvents={},e.tagObjects={},e.ngEle=null)})},r.prototype.clearTemplate=function(t,e){Mb(this,t,e)},r.prototype.ngAfterContentChecked=function(t){for(var e=t||this,i=0,n=e.tagObjects;i<n.length;i++){var s=n[i];if(!qt(s.instance)&&(s.instance.isInitChanges||s.instance.hasChanges||s.instance.hasNewChildren))if(s.instance.isInitChanges){var o={},a=void 0;(l=Q("instance.list",s))&&l.length&&(a=l[0].directivePropList);var h=!0;if(e.getModuleName&&"gantt"===e.getModuleName()&&(h=!1),a&&h&&-1===a.indexOf(s.instance.propertyName))for(var u=Object.keys(s.instance.list[0].propCollection),d=0;d<s.instance.list.length;d++){s.instance.list[d].propCollection[s.instance.propertyName]=[];for(var m={},v=0;v<u.length;v++)m[C=u[v]]=s.instance.list[d].propCollection[C];for(var S=0;S<s.instance.list[d].tags.length;S++){var A=s.instance.list[d].tags[S],_=Q("child"+A.substring(0,1).toUpperCase()+A.substring(1),s.instance.list[d]);if(_){var M=s.instance.list[d]["child"+A.substring(0,1).toUpperCase()+A.substring(1)];if(M)for(var P=0;P<M.list.length;P++){var B=M.list[0].tags[0];if(B){var j=Q("child"+B.substring(0,1).toUpperCase()+B.substring(1),M.list[P]);j&&M.list[P].tagObjects.push({instance:j,name:B})}}s.instance.list[d].tagObjects.push({instance:_,name:A})}}s.instance.list[d].propCollection[s.instance.propertyName].push(m)}o[s.name]=s.instance.getProperties(),e.setProperties(o,s.instance.isInitChanges)}else{(e[s.name].length!==s.instance.list.length||/diagram|tab|DashboardLayout/.test(e.getModuleName()))&&(e[s.name]=s.instance.list);for(var G=0,ne=s.instance.list;G<ne.length;G++){var l,fe=s.instance.list.indexOf(l=ne[G]),Ee=Q(s.name,e)[fe],Pe=Object.keys(Ee);if(Pe=Pe.filter(function(ce){return/Ref$/i.test(ce)}),Ee.properties&&0!==Object.keys(Ee.properties).length)for(var ie=0,Ie=Pe;ie<Ie.length;ie++){var C;C=(C=Ie[ie]).replace(/Ref/,""),Ee.properties[C]=Ee.properties[C]?Ee.properties[C]:Ee.propCollection[C]}!qt(Ee)&&!qt(Ee.setProperties)&&(/diagram|DashboardLayout/.test(e.getModuleName())?Ee.setProperties(l.getProperties(),!0):Ee.setProperties(l.getProperties())),l.isUpdated=!0}}}},r.prototype.registerEvents=function(t){pN(t,this)},r.prototype.twoWaySetter=function(t,e){var i=Q(e,this.properties);i!==t&&(this.saveChanges(e,t,i),Nt(e,f(t)?null:t,this.properties),Q(e+"Change",this).emit(t))},r.prototype.addTwoWay=function(t){for(var e=this,i=function(l){Q(l,n),Object.defineProperty(n,l,{get:function(){return Q(l,e.properties)},set:function(h){return e.twoWaySetter(h,l)}}),Nt(l+"Change",new b.vpe,n)},n=this,s=0,o=t;s<o.length;s++)i(o[s])},r.prototype.addEventListener=function(t,e){var i=Q(t,this);qt(i)||(this.ngBoundedEvents[t]||(this.ngBoundedEvents[t]=new Map),this.ngBoundedEvents[t].set(e,i.subscribe(e)))},r.prototype.removeEventListener=function(t,e){qt(Q(t,this))||this.ngBoundedEvents[t].get(e).unsubscribe()},r.prototype.trigger=function(t,e,i){var n=Q(t,this),s=this.isProtectedOnChange;this.isProtectedOnChange=!1,e&&(e.name=t),qt(n)||n.next(e);var o=Q("local"+t.charAt(0).toUpperCase()+t.slice(1),this);qt(o)||o.call(this,e),this.isProtectedOnChange=s,i&&(this.preventChange=this.isPreventChange,i.call(this,e)),this.isPreventChange=!1},r}(),RZ=(function(){function r(){}r.prototype.propagateChange=function(t){},r.prototype.propagateTouch=function(){},r.prototype.localChange=function(t){var e=void 0===t.checked?t.value:t.checked;this.objCheck=Nu(e),!0===this.isUpdated&&(this.angularValue=this.oldValue),!0===this.objCheck?(this.duplicateValue=JSON.stringify(e),this.duplicateAngularValue=JSON.stringify(this.angularValue),this.duplicateValue!==this.duplicateAngularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)):e!==this.angularValue&&void 0!==this.propagateChange&&void 0!==e&&(this.propagateChange(e),this.angularValue=e)},r.prototype.registerOnChange=function(t){this.propagateChange=t},r.prototype.registerOnTouched=function(t){this.propagateTouch=t},r.prototype.twoWaySetter=function(t,e){var i=this.oldValue||Q(e,this.properties),n=this.inputElement||this.element;n&&i===t&&this.value===t&&(void 0===n.value||""===n.value)||(this.saveChanges(e,t,i),Nt(e,f(t)?null:t,this.properties),Q(e+"Change",this).emit(t))},r.prototype.ngAfterViewInit=function(t){var e=this,i=t||this;setTimeout(function(){if(typeof window<"u"){i.appendTo(i.element);var n=i.inputElement||i.element;n.addEventListener("focus",i.ngOnFocus.bind(i)),n.addEventListener("blur",i.ngOnBlur.bind(i))}e.isFormInit=!1})},r.prototype.setDisabledState=function(t){this.enabled=!t,this.disabled=t},r.prototype.writeValue=function(t){void 0===this.checked?this.value=t:this.ngEle&&(this.checked="boolean"==typeof t?/ejs-radiobutton/g.test(this.ngEle.nativeElement.outerHTML)?t===this.value:t:t===this.value),this.angularValue=t,this.isUpdated=!0,this.preventChange=!this.isFormInit},r.prototype.ngOnFocus=function(t){!0!==this.skipFromEvent&&this.focus.emit(t)},r.prototype.ngOnBlur=function(t){this.propagateTouch(),!0!==this.skipFromEvent&&this.blur.emit(t)},r.isFormBase=!0}(),function K3(){return nR.compile}());function ea(r){return function(t,e){var i={set:J3(e),get:e6(e,r),enumerable:!0,configurable:!0};Object.defineProperty(t,e,i)}}function J3(r){return function(t){void 0!==t&&(Nt(r+"Ref",t,this),"string"!=typeof t?(t.elementRef.nativeElement._viewContainerRef=this.viewContainerRef,t.elementRef.nativeElement.propName=r):this.saveChanges&&(this.saveChanges(r,t,void 0),this.dataBind()))}}function e6(r,t){return function(){return Q(r+"Ref",this)||t}}!function G3(r){nR.compile=r.compile}({compile:function gN(r,t){if("string"==typeof r)return RZ(r,t);var e=r.elementRef.nativeElement._viewContainerRef,i=r.elementRef.nativeElement.propName;return function(n,s,o){var l=e||s.viewContainerRef,h=l.createEmbeddedView(r,{$implicit:n});h.detectChanges();var u=s&&s.registeredTemplate?s.registeredTemplate:Q("currentInstance.registeredTemplate",l);return typeof u[o=o&&s.registeredTemplate?o:i]>"u"&&(u[o]=[]),u[o].push(h),h.rootNodes}}});var ii=function(){function r(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="","string"==typeof t?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return r.prototype.setKey=function(t){return this.key=t,this},r.prototype.using=function(t){return this.dataManager=t,this},r.prototype.execute=function(t,e,i,n){return(t=t||this.dataManager)?t.executeQuery(this,e,i,n):qe.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.executeLocal=function(t){return(t=t||this.dataManager)?t.executeLocal(this):qe.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},r.prototype.clone=function(){var t=new r;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},r.prototype.from=function(t){return this.fromTable=t,this},r.prototype.addParams=function(t,e){return this.params.push("function"==typeof e?{key:t,fn:e}:{key:t,value:e}),this},r.prototype.distinct=function(t){return this.distincts="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.expand=function(t){return this.expands="string"==typeof t?[].slice.call([t],0):t.slice(0),this},r.prototype.where=function(t,e,i,n,s,o){e=e?e.toLowerCase():null;var a=null;return"string"==typeof t?a=new kn(t,e,i,n,s,o):t instanceof kn&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},r.prototype.search=function(t,e,i,n,s){return"string"==typeof e&&(e=[e]),(!i||"none"===i)&&(i="contains"),this.queries.push({fn:"onSearch",e:{fieldNames:e,operator:i,searchKey:t,ignoreCase:n,ignoreAccent:s,comparer:qe.fnOperators[i]}}),this},r.prototype.sortBy=function(t,e,i){return this.sortByForeignKey(t,e,i)},r.prototype.sortByForeignKey=function(t,e,i,n){var o,a,s=f(n)?"ascending":n;if("string"==typeof t&&qe.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),e="descending"),(!e||"string"==typeof e)&&(s=e?e.toLowerCase():"ascending",e=qe.fnSort(e)),i){o=r.filterQueries(this.queries,"onSortBy");for(var l=0;l<o.length;l++)if("string"==typeof(a=o[l].e.fieldName)){if(a===t)return this}else if(a instanceof Array)for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:e,direction:s}}),this},r.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},r.prototype.group=function(t,e,i){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:e||null,format:i||null}}),this},r.prototype.page=function(t,e){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:e}}),this},r.prototype.range=function(t,e){return this.queries.push({fn:"onRange",e:{start:t,end:e}}),this},r.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},r.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},r.prototype.select=function(t){return"string"==typeof t&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},r.prototype.hierarchy=function(t,e){return this.subQuerySelector=e,this.subQuery=t,this},r.prototype.foreignKey=function(t){return this.fKey=t,this},r.prototype.requiresCount=function(){return this.isCountRequired=!0,this},r.prototype.aggregate=function(t,e){return this.queries.push({fn:"onAggregates",e:{field:e,type:t}}),this},r.filterQueries=function(t,e){return t.filter(function(i){return i.fn===e})},r.filterQueryLists=function(t,e){for(var i=t.filter(function(o){return-1!==e.indexOf(o.fn)}),n={},s=0;s<i.length;s++)n[i[s].fn]||(n[i[s].fn]=i[s].e);return n},r}(),kn=function(){function r(t,e,i,n,s,o){return void 0===n&&(n=!1),this.ignoreAccent=!1,this.isComplex=!1,"string"==typeof t?(this.field=t,this.operator=e.toLowerCase(),this.value=i,this.matchCase=o,this.ignoreCase=n,this.ignoreAccent=s,this.isComplex=!1,this.comparer=qe.fnOperators.processOperator(this.operator)):(t instanceof r&&i instanceof r||i instanceof Array)&&(this.isComplex=!0,this.condition=e.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,i instanceof Array?[].push.apply(this.predicates,i):this.predicates.push(i)),this}return r.and=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"and")},r.prototype.and=function(t,e,i,n,s){return r.combine(this,t,e,i,"and",n,s)},r.or=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.combinePredicates([].slice.call(t,0),"or")},r.prototype.or=function(t,e,i,n,s){return r.combine(this,t,e,i,"or",n,s)},r.fromJson=function(t){if(t instanceof Array){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this.fromJSONData(t[i]));return e}return this.fromJSONData(t)},r.prototype.validate=function(t){var i,n,e=this.predicates?this.predicates:[];if(!this.isComplex&&this.comparer)return this.comparer.call(this,qe.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);i="and"===this.condition;for(var s=0;s<e.length;s++)if(n=e[s].validate(t),i){if(!n)return!1}else if(n)return!0;return i},r.prototype.toJson=function(){var t,e;if(this.isComplex){t=[],e=this.predicates;for(var i=0;i<e.length;i++)t.push(e[i].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},r.combinePredicates=function(t,e){if(1===t.length){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new r(t[0],e,t.slice(1))},r.combine=function(t,e,i,n,s,o,a){return e instanceof r?r[s](t,e):"string"==typeof e?r[s](t,new r(e,i,n,o,a)):qe.throwError("Predicate - "+s+" : invalid arguments")},r.fromJSONData=function(t){for(var e=t.predicates||[],i=e.length,n=[],o=0;o<i;o++)n.push(this.fromJSONData(e[o]));return t.isComplex?new r(n[0],t.condition,n.slice(1)):new r(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent)},r}(),mN={GroupGuid:"{271bbba0-1ee7}"},qe=function(){function r(){}return r.getValue=function(t,e){return"function"==typeof t?t.call(e||{}):t},r.endsWith=function(t,e){return t.slice&&t.slice(-e.length)===e},r.startsWith=function(t,e){return t.slice(0,e.length)===e},r.fnSort=function(t){return"ascending"===(t=t?r.toLowerCase(t):"ascending")?this.fnAscending:this.fnDescending},r.fnAscending=function(t,e){return f(t)&&f(e)||null==e?-1:"string"==typeof t?t.localeCompare(e):null==t?1:t-e},r.fnDescending=function(t,e){return f(t)&&f(e)?-1:null==e?1:"string"==typeof t?-1*t.localeCompare(e):null==t?-1:e-t},r.extractFields=function(t,e){for(var i={},n=0;n<e.length;n++)i=this.setValue(e[n],this.getObject(e[n],t),i);return i},r.select=function(t,e){for(var i=[],n=0;n<t.length;n++)i.push(this.extractFields(t[n],e));return i},r.group=function(t,e,i,n,s,o,a){n=n||1;var l=t,h="GroupGuid";if(l.GroupGuid===mN[h]){for(var u=function(P){if(f(s))l[P].items=d.group(l[P].items,e,i,l.level+1,null,o,a),l[P].count=l[P].items.length;else{var B,j=s.filter(function(G){return G.key===l[P].key});B=s.indexOf(j[0]),l[P].items=d.group(l[P].items,e,i,l.level+1,s[B].items,o,a),l[P].count=s[B].count}},d=this,m=0;m<l.length;m++)u(m);return l.childLevels+=1,l}var v={},C=[];C.GroupGuid=mN[h],C.level=n,C.childLevels=0,C.records=l;for(var S=function(P){var B=A.getVal(l,P,e);if(f(o)||(B=o(B,e)),!v[B]&&(v[B]={key:B,count:0,items:[],aggregates:{},field:e},C.push(v[B]),!f(s))){var j=s.filter(function(G){return G.key===v[B].key});v[B].count=j[0].count}v[B].count=f(s)?v[B].count+=1:v[B].count,(!a||a&&i.length)&&v[B].items.push(l[P])},A=this,_=0;_<l.length;_++)S(_);if(i&&i.length){var M=function(P){for(var B={},j=void 0,G=i,ne=0;ne<i.length;ne++)if(j=r.aggregates[i[ne].type],f(s))j&&(B[G[ne].field+" - "+G[ne].type]=j(C[P].items,G[ne].field));else{var fe=s.filter(function(Ee){return Ee.key===C[P].key});j&&(B[G[ne].field+" - "+G[ne].type]=j(fe[0].items,G[ne].field))}C[P].aggregates=B};for(_=0;_<C.length;_++)M(_)}if(a&&C.length&&i.length)for(_=0;_<C.length;_++)C[_].items=[];return l.length&&C||l},r.buildHierarchy=function(t,e,i,n,s){var o,a={};for(n.result&&(n=n.result),n.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),o=0;o<n.length;o++)(a[h=this.getObject(t,n[o])]||(a[h]=[])).push(n[o]);for(o=0;o<i.length;o++){var h=this.getObject(s||t,i[o]);i[o][e]=a[h]}},r.getFieldList=function(t,e,i){if(void 0===i&&(i=""),null==e)return this.getFieldList(t,[],i);for(var n=t,o=0,a=Object.keys(t);o<a.length;o++){var l=a[o];"object"!=typeof n[l]||n[l]instanceof Array?e.push(i+l):this.getFieldList(n[l],e,i+l+".")}return e},r.getObject=function(t,e){if(!t)return e;if(e){if(-1===t.indexOf("."))return e[t];for(var i=e,n=t.split("."),s=0;s<n.length&&null!=i;s++)i=i[n[s]];return i}},r.setValue=function(t,e,i){var a,h,n=t.toString().split("."),s=i||{},o=s,l=n.length;for(a=0;a<l;a++)h=n[a],a+1===l?o[h]=void 0===e?void 0:e:f(o[h])&&(o[h]={}),o=o[h];return s},r.sort=function(t,e,i){if(t.length<=1)return t;var n=parseInt((t.length/2).toString(),10),s=t.slice(0,n),o=t.slice(n);return s=this.sort(s,e,i),o=this.sort(o,e,i),this.merge(s,o,e,i)},r.ignoreDiacritics=function(t){return"string"!=typeof t?t:t.split("").map(function(n){return n in r.diacritics?r.diacritics[n]:n}).join("")},r.merge=function(t,e,i,n){for(var o,s=[];t.length>0||e.length>0;)o=t.length>0&&e.length>0?n?n(this.getVal(t,0,i),this.getVal(e,0,i),t[0],e[0])<=0?t:e:t[0][i]<t[0][i]?t:e:t.length>0?t:e,s.push(o.shift());return s},r.getVal=function(t,e,i){return i?this.getObject(i,t[e]):t[e]},r.toLowerCase=function(t){return t?"string"==typeof t?t.toLowerCase():t.toString():0===t||!1===t?t.toString():""},r.callAdaptorFunction=function(t,e,i,n){if(e in t){var s=t[e](i,n);f(s)||(i=s)}return i},r.getAddParams=function(t,e,i){var n={};return r.callAdaptorFunction(t,"addParams",{dm:e,query:i,params:i.params,reqParams:n}),n},r.isPlainObject=function(t){return!!t&&t.constructor===Object},r.isCors=function(){var t=null;try{t=new window.XMLHttpRequest}catch{}return!!t&&"withCredentials"in t},r.getGuid=function(t){var i;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,s){if("crypto"in window&&"getRandomValues"in crypto){var o=new Uint8Array(1);window.crypto.getRandomValues(o),i=o[0]%16|0}else i=16*Math.random()|0;return"0123456789abcdef"[19===s?3&i|8:i]})},r.isNull=function(t){return null==t},r.getItemFromComparer=function(t,e,i){var n,s,o,a=0,l="string"==typeof r.getVal(t,0,e);if(t.length)for(;f(n)&&a<t.length;)n=r.getVal(t,a,e),o=t[a++];for(;a<t.length;a++)!f(s=r.getVal(t,a,e))&&(l&&(n=+n,s=+s),i(n,s)>0&&(n=s,o=t[a]));return o},r.distinct=function(t,e,i){i=!f(i)&&i;var s,n=[],o={};return t.forEach(function(a,l){(s="object"==typeof t[l]?r.getVal(t,l,e):t[l])in o||(n.push(i?t[l]:s),o[s]=1)}),n},r.processData=function(t,e){var i=this.prepareQuery(t),n=new Qe(e);t.requiresCounts&&i.requiresCount();var s=n.executeLocal(i),o={result:t.requiresCounts?s.result:s,count:s.count,aggregates:JSON.stringify(s.aggregates)};return t.requiresCounts?o:s},r.prepareQuery=function(t){var e=this,i=new ii;return t.select&&i.select(t.select),t.where&&r.parse.parseJson(t.where).filter(function(o){if(f(o.condition))i.where(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent);else{var a=[];o.field?a.push(new kn(o.field,o.operator,o.value,o.ignoreCase,o.ignoreAccent)):a=a.concat(e.getPredicate(o.predicates)),"or"==o.condition?i.where(kn.or(a)):"and"==o.condition&&i.where(kn.and(a))}}),t.search&&r.parse.parseJson(t.search).filter(function(o){return i.search(o.key,o.fields,o.operator,o.ignoreCase,o.ignoreAccent)}),t.aggregates&&t.aggregates.filter(function(o){return i.aggregate(o.type,o.field)}),t.sorted&&t.sorted.filter(function(o){return i.sortBy(o.name,o.direction)}),t.skip&&i.skip(t.skip),t.take&&i.take(t.take),t.group&&t.group.filter(function(o){return i.group(o)}),i},r.getPredicate=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];if(n.field)e.push(new kn(n.field,n.operator,n.value,n.ignoreCase,n.ignoreAccent));else{for(var s=[],o=this.getPredicate(n.predicates),a=0,l=Object.keys(o);a<l.length;a++)s.push(o[l[a]]);e.push("or"==n.condition?kn.or(s):kn.and(s))}}return e},r.serverTimezoneOffset=null,r.timeZoneHandling=!0,r.throwError=function(t){try{throw new Error(t)}catch(e){throw e.message+"\n"+e.stack}},r.aggregates={sum:function(t,e){for(var n,i=0,s="number"!=typeof r.getVal(t,0,e),o=0;o<t.length;o++)n=r.getVal(t,o,e),!isNaN(n)&&null!==n&&(s&&(n=+n),i+=n);return i},average:function(t,e){return r.aggregates.sum(t,e)/t.length},min:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnAscending))},max:function(t,e){var i;return"function"==typeof e&&(i=e,e=null),r.getObject(e,r.getItemFromComparer(t,e,i||r.fnDescending))},truecount:function(t,e){return new Qe(t).executeLocal((new ii).where(e,"equal",!0,!0)).length},falsecount:function(t,e){return new Qe(t).executeLocal((new ii).where(e,"equal",!1,!0)).length},count:function(t,e){return t.length}},r.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},r.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},r.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},r.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains"},r.diacritics={"\u24b6":"A",\uff21:"A",\u00c0:"A",\u00c1:"A",\u00c2:"A",\u1ea6:"A",\u1ea4:"A",\u1eaa:"A",\u1ea8:"A",\u00c3:"A",\u0100:"A",\u0102:"A",\u1eb0:"A",\u1eae:"A",\u1eb4:"A",\u1eb2:"A",\u0226:"A",\u01e0:"A",\u00c4:"A",\u01de:"A",\u1ea2:"A",\u00c5:"A",\u01fa:"A",\u01cd:"A",\u0200:"A",\u0202:"A",\u1ea0:"A",\u1eac:"A",\u1eb6:"A",\u1e00:"A",\u0104:"A",\u023a:"A",\u2c6f:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY","\u24b7":"B",\uff22:"B",\u1e02:"B",\u1e04:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0181:"B","\u24b8":"C",\uff23:"C",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0187:"C",\u023b:"C",\ua73e:"C","\u24b9":"D",\uff24:"D",\u1e0a:"D",\u010e:"D",\u1e0c:"D",\u1e10:"D",\u1e12:"D",\u1e0e:"D",\u0110:"D",\u018b:"D",\u018a:"D",\u0189:"D",\ua779:"D",\u01f1:"DZ",\u01c4:"DZ",\u01f2:"Dz",\u01c5:"Dz","\u24ba":"E",\uff25:"E",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u1ec0:"E",\u1ebe:"E",\u1ec4:"E",\u1ec2:"E",\u1ebc:"E",\u0112:"E",\u1e14:"E",\u1e16:"E",\u0114:"E",\u0116:"E",\u00cb:"E",\u1eba:"E",\u011a:"E",\u0204:"E",\u0206:"E",\u1eb8:"E",\u1ec6:"E",\u0228:"E",\u1e1c:"E",\u0118:"E",\u1e18:"E",\u1e1a:"E",\u0190:"E",\u018e:"E","\u24bb":"F",\uff26:"F",\u1e1e:"F",\u0191:"F",\ua77b:"F","\u24bc":"G",\uff27:"G",\u01f4:"G",\u011c:"G",\u1e20:"G",\u011e:"G",\u0120:"G",\u01e6:"G",\u0122:"G",\u01e4:"G",\u0193:"G",\ua7a0:"G",\ua77d:"G",\ua77e:"G","\u24bd":"H",\uff28:"H",\u0124:"H",\u1e22:"H",\u1e26:"H",\u021e:"H",\u1e24:"H",\u1e28:"H",\u1e2a:"H",\u0126:"H",\u2c67:"H",\u2c75:"H",\ua78d:"H","\u24be":"I",\uff29:"I",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u0128:"I",\u012a:"I",\u012c:"I",\u0130:"I",\u00cf:"I",\u1e2e:"I",\u1ec8:"I",\u01cf:"I",\u0208:"I",\u020a:"I",\u1eca:"I",\u012e:"I",\u1e2c:"I",\u0197:"I","\u24bf":"J",\uff2a:"J",\u0134:"J",\u0248:"J","\u24c0":"K",\uff2b:"K",\u1e30:"K",\u01e8:"K",\u1e32:"K",\u0136:"K",\u1e34:"K",\u0198:"K",\u2c69:"K",\ua740:"K",\ua742:"K",\ua744:"K",\ua7a2:"K","\u24c1":"L",\uff2c:"L",\u013f:"L",\u0139:"L",\u013d:"L",\u1e36:"L",\u1e38:"L",\u013b:"L",\u1e3c:"L",\u1e3a:"L",\u0141:"L",\u023d:"L",\u2c62:"L",\u2c60:"L",\ua748:"L",\ua746:"L",\ua780:"L",\u01c7:"LJ",\u01c8:"Lj","\u24c2":"M",\uff2d:"M",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u019c:"M","\u24c3":"N",\uff2e:"N",\u01f8:"N",\u0143:"N",\u00d1:"N",\u1e44:"N",\u0147:"N",\u1e46:"N",\u0145:"N",\u1e4a:"N",\u1e48:"N",\u0220:"N",\u019d:"N",\ua790:"N",\ua7a4:"N",\u01ca:"NJ",\u01cb:"Nj","\u24c4":"O",\uff2f:"O",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u1ed2:"O",\u1ed0:"O",\u1ed6:"O",\u1ed4:"O",\u00d5:"O",\u1e4c:"O",\u022c:"O",\u1e4e:"O",\u014c:"O",\u1e50:"O",\u1e52:"O",\u014e:"O",\u022e:"O",\u0230:"O",\u00d6:"O",\u022a:"O",\u1ece:"O",\u0150:"O",\u01d1:"O",\u020c:"O",\u020e:"O",\u01a0:"O",\u1edc:"O",\u1eda:"O",\u1ee0:"O",\u1ede:"O",\u1ee2:"O",\u1ecc:"O",\u1ed8:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u0186:"O",\u019f:"O",\ua74a:"O",\ua74c:"O",\u01a2:"OI",\ua74e:"OO",\u0222:"OU","\u24c5":"P",\uff30:"P",\u1e54:"P",\u1e56:"P",\u01a4:"P",\u2c63:"P",\ua750:"P",\ua752:"P",\ua754:"P","\u24c6":"Q",\uff31:"Q",\ua756:"Q",\ua758:"Q",\u024a:"Q","\u24c7":"R",\uff32:"R",\u0154:"R",\u1e58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1e5a:"R",\u1e5c:"R",\u0156:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua75a:"R",\ua7a6:"R",\ua782:"R","\u24c8":"S",\uff33:"S",\u1e9e:"S",\u015a:"S",\u1e64:"S",\u015c:"S",\u1e60:"S",\u0160:"S",\u1e66:"S",\u1e62:"S",\u1e68:"S",\u0218:"S",\u015e:"S",\u2c7e:"S",\ua7a8:"S",\ua784:"S","\u24c9":"T",\uff34:"T",\u1e6a:"T",\u0164:"T",\u1e6c:"T",\u021a:"T",\u0162:"T",\u1e70:"T",\u1e6e:"T",\u0166:"T",\u01ac:"T",\u01ae:"T",\u023e:"T",\ua786:"T",\ua728:"TZ","\u24ca":"U",\uff35:"U",\u00d9:"U",\u00da:"U",\u00db:"U",\u0168:"U",\u1e78:"U",\u016a:"U",\u1e7a:"U",\u016c:"U",\u00dc:"U",\u01db:"U",\u01d7:"U",\u01d5:"U",\u01d9:"U",\u1ee6:"U",\u016e:"U",\u0170:"U",\u01d3:"U",\u0214:"U",\u0216:"U",\u01af:"U",\u1eea:"U",\u1ee8:"U",\u1eee:"U",\u1eec:"U",\u1ef0:"U",\u1ee4:"U",\u1e72:"U",\u0172:"U",\u1e76:"U",\u1e74:"U",\u0244:"U","\u24cb":"V",\uff36:"V",\u1e7c:"V",\u1e7e:"V",\u01b2:"V",\ua75e:"V",\u0245:"V",\ua760:"VY","\u24cc":"W",\uff37:"W",\u1e80:"W",\u1e82:"W",\u0174:"W",\u1e86:"W",\u1e84:"W",\u1e88:"W",\u2c72:"W","\u24cd":"X",\uff38:"X",\u1e8a:"X",\u1e8c:"X","\u24ce":"Y",\uff39:"Y",\u1ef2:"Y",\u00dd:"Y",\u0176:"Y",\u1ef8:"Y",\u0232:"Y",\u1e8e:"Y",\u0178:"Y",\u1ef6:"Y",\u1ef4:"Y",\u01b3:"Y",\u024e:"Y",\u1efe:"Y","\u24cf":"Z",\uff3a:"Z",\u0179:"Z",\u1e90:"Z",\u017b:"Z",\u017d:"Z",\u1e92:"Z",\u1e94:"Z",\u01b5:"Z",\u0224:"Z",\u2c7f:"Z",\u2c6b:"Z",\ua762:"Z","\u24d0":"a",\uff41:"a",\u1e9a:"a",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u1ea7:"a",\u1ea5:"a",\u1eab:"a",\u1ea9:"a",\u00e3:"a",\u0101:"a",\u0103:"a",\u1eb1:"a",\u1eaf:"a",\u1eb5:"a",\u1eb3:"a",\u0227:"a",\u01e1:"a",\u00e4:"a",\u01df:"a",\u1ea3:"a",\u00e5:"a",\u01fb:"a",\u01ce:"a",\u0201:"a",\u0203:"a",\u1ea1:"a",\u1ead:"a",\u1eb7:"a",\u1e01:"a",\u0105:"a",\u2c65:"a",\u0250:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay","\u24d1":"b",\uff42:"b",\u1e03:"b",\u1e05:"b",\u1e07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24d2":"c",\uff43:"c",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0188:"c",\u023c:"c",\ua73f:"c",\u2184:"c","\u24d3":"d",\uff44:"d",\u1e0b:"d",\u010f:"d",\u1e0d:"d",\u1e11:"d",\u1e13:"d",\u1e0f:"d",\u0111:"d",\u018c:"d",\u0256:"d",\u0257:"d",\ua77a:"d",\u01f3:"dz",\u01c6:"dz","\u24d4":"e",\uff45:"e",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u1ec1:"e",\u1ebf:"e",\u1ec5:"e",\u1ec3:"e",\u1ebd:"e",\u0113:"e",\u1e15:"e",\u1e17:"e",\u0115:"e",\u0117:"e",\u00eb:"e",\u1ebb:"e",\u011b:"e",\u0205:"e",\u0207:"e",\u1eb9:"e",\u1ec7:"e",\u0229:"e",\u1e1d:"e",\u0119:"e",\u1e19:"e",\u1e1b:"e",\u0247:"e",\u025b:"e",\u01dd:"e","\u24d5":"f",\uff46:"f",\u1e1f:"f",\u0192:"f",\ua77c:"f","\u24d6":"g",\uff47:"g",\u01f5:"g",\u011d:"g",\u1e21:"g",\u011f:"g",\u0121:"g",\u01e7:"g",\u0123:"g",\u01e5:"g",\u0260:"g",\ua7a1:"g",\u1d79:"g",\ua77f:"g","\u24d7":"h",\uff48:"h",\u0125:"h",\u1e23:"h",\u1e27:"h",\u021f:"h",\u1e25:"h",\u1e29:"h",\u1e2b:"h",\u1e96:"h",\u0127:"h",\u2c68:"h",\u2c76:"h",\u0265:"h",\u0195:"hv","\u24d8":"i",\uff49:"i",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u0129:"i",\u012b:"i",\u012d:"i",\u00ef:"i",\u1e2f:"i",\u1ec9:"i",\u01d0:"i",\u0209:"i",\u020b:"i",\u1ecb:"i",\u012f:"i",\u1e2d:"i",\u0268:"i",\u0131:"i","\u24d9":"j",\uff4a:"j",\u0135:"j",\u01f0:"j",\u0249:"j","\u24da":"k",\uff4b:"k",\u1e31:"k",\u01e9:"k",\u1e33:"k",\u0137:"k",\u1e35:"k",\u0199:"k",\u2c6a:"k",\ua741:"k",\ua743:"k",\ua745:"k",\ua7a3:"k","\u24db":"l",\uff4c:"l",\u0140:"l",\u013a:"l",\u013e:"l",\u1e37:"l",\u1e39:"l",\u013c:"l",\u1e3d:"l",\u1e3b:"l",\u017f:"l",\u0142:"l",\u019a:"l",\u026b:"l",\u2c61:"l",\ua749:"l",\ua781:"l",\ua747:"l",\u01c9:"lj","\u24dc":"m",\uff4d:"m",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u026f:"m","\u24dd":"n",\uff4e:"n",\u01f9:"n",\u0144:"n",\u00f1:"n",\u1e45:"n",\u0148:"n",\u1e47:"n",\u0146:"n",\u1e4b:"n",\u1e49:"n",\u019e:"n",\u0272:"n",\u0149:"n",\ua791:"n",\ua7a5:"n",\u01cc:"nj","\u24de":"o",\uff4f:"o",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u1ed3:"o",\u1ed1:"o",\u1ed7:"o",\u1ed5:"o",\u00f5:"o",\u1e4d:"o",\u022d:"o",\u1e4f:"o",\u014d:"o",\u1e51:"o",\u1e53:"o",\u014f:"o",\u022f:"o",\u0231:"o",\u00f6:"o",\u022b:"o",\u1ecf:"o",\u0151:"o",\u01d2:"o",\u020d:"o",\u020f:"o",\u01a1:"o",\u1edd:"o",\u1edb:"o",\u1ee1:"o",\u1edf:"o",\u1ee3:"o",\u1ecd:"o",\u1ed9:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u0254:"o",\ua74b:"o",\ua74d:"o",\u0275:"o",\u01a3:"oi",\u0223:"ou",\ua74f:"oo","\u24df":"p",\uff50:"p",\u1e55:"p",\u1e57:"p",\u01a5:"p",\u1d7d:"p",\ua751:"p",\ua753:"p",\ua755:"p","\u24e0":"q",\uff51:"q",\u024b:"q",\ua757:"q",\ua759:"q","\u24e1":"r",\uff52:"r",\u0155:"r",\u1e59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1e5b:"r",\u1e5d:"r",\u0157:"r",\u1e5f:"r",\u024d:"r",\u027d:"r",\ua75b:"r",\ua7a7:"r",\ua783:"r","\u24e2":"s",\uff53:"s",\u00df:"s",\u015b:"s",\u1e65:"s",\u015d:"s",\u1e61:"s",\u0161:"s",\u1e67:"s",\u1e63:"s",\u1e69:"s",\u0219:"s",\u015f:"s",\u023f:"s",\ua7a9:"s",\ua785:"s",\u1e9b:"s","\u24e3":"t",\uff54:"t",\u1e6b:"t",\u1e97:"t",\u0165:"t",\u1e6d:"t",\u021b:"t",\u0163:"t",\u1e71:"t",\u1e6f:"t",\u0167:"t",\u01ad:"t",\u0288:"t",\u2c66:"t",\ua787:"t",\ua729:"tz","\u24e4":"u",\uff55:"u",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u0169:"u",\u1e79:"u",\u016b:"u",\u1e7b:"u",\u016d:"u",\u00fc:"u",\u01dc:"u",\u01d8:"u",\u01d6:"u",\u01da:"u",\u1ee7:"u",\u016f:"u",\u0171:"u",\u01d4:"u",\u0215:"u",\u0217:"u",\u01b0:"u",\u1eeb:"u",\u1ee9:"u",\u1eef:"u",\u1eed:"u",\u1ef1:"u",\u1ee5:"u",\u1e73:"u",\u0173:"u",\u1e77:"u",\u1e75:"u",\u0289:"u","\u24e5":"v",\uff56:"v",\u1e7d:"v",\u1e7f:"v",\u028b:"v",\ua75f:"v",\u028c:"v",\ua761:"vy","\u24e6":"w",\uff57:"w",\u1e81:"w",\u1e83:"w",\u0175:"w",\u1e87:"w",\u1e85:"w",\u1e98:"w",\u1e89:"w",\u2c73:"w","\u24e7":"x",\uff58:"x",\u1e8b:"x",\u1e8d:"x","\u24e8":"y",\uff59:"y",\u1ef3:"y",\u00fd:"y",\u0177:"y",\u1ef9:"y",\u0233:"y",\u1e8f:"y",\u00ff:"y",\u1ef7:"y",\u1e99:"y",\u1ef5:"y",\u01b4:"y",\u024f:"y",\u1eff:"y","\u24e9":"z",\uff5a:"z",\u017a:"z",\u1e91:"z",\u017c:"z",\u017e:"z",\u1e93:"z",\u1e95:"z",\u01b6:"z",\u0225:"z",\u0240:"z",\u2c6c:"z",\ua763:"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038a:"\u0399",\u03aa:"\u0399",\u038c:"\u039f",\u038e:"\u03a5",\u03ab:"\u03a5",\u038f:"\u03a9",\u03ac:"\u03b1",\u03ad:"\u03b5",\u03ae:"\u03b7",\u03af:"\u03b9",\u03ca:"\u03b9",\u0390:"\u03b9",\u03cc:"\u03bf",\u03cd:"\u03c5",\u03cb:"\u03c5",\u03b0:"\u03c5",\u03c9:"\u03c9",\u03c2:"\u03c3"},r.fnOperators={equal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?r.toLowerCase(t)===r.toLowerCase(e):t===e},notequal:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),!r.fnOperators.equal(t,e,i)},lessthan:function(t,e,i){return i?r.toLowerCase(t)<r.toLowerCase(e):(f(t)&&(t=void 0),t<e)},greaterthan:function(t,e,i){return i?r.toLowerCase(t)>r.toLowerCase(e):t>e},lessthanorequal:function(t,e,i){return i?r.toLowerCase(t)<=r.toLowerCase(e):(f(t)&&(t=void 0),t<=e)},greaterthanorequal:function(t,e,i){return i?r.toLowerCase(t)>=r.toLowerCase(e):t>=e},contains:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?!f(t)&&!f(e)&&-1!==r.toLowerCase(t).indexOf(r.toLowerCase(e)):!f(t)&&!f(e)&&-1!==t.toString().indexOf(e)},notnull:function(t){return null!==t},isnull:function(t){return null===t},startswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.startsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.startsWith(t,e)},endswith:function(t,e,i,n){return n&&(t=r.ignoreDiacritics(t),e=r.ignoreDiacritics(e)),i?t&&e&&r.endsWith(r.toLowerCase(t),r.toLowerCase(e)):t&&e&&r.endsWith(t,e)},processSymbols:function(t){var e=r.operatorSymbols[t];return e?r.fnOperators[e]:r.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){return r.fnOperators[t]||r.fnOperators.processSymbols(t)}},r.parse={parseJson:function(t){return"string"==typeof t?t=JSON.parse(t,r.parse.jsonReviver):t instanceof Array?r.parse.iterateAndReviveArray(t):"object"==typeof t&&null!==t&&r.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var e=0;e<t.length;e++)"object"==typeof t[e]&&null!==t[e]?r.parse.iterateAndReviveJson(t[e]):t[e]="string"!=typeof t[e]||/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[e])?r.parse.parseJson(t[e]):r.parse.jsonReviver("",t[e])},iterateAndReviveJson:function(t){for(var e,n=0,s=Object.keys(t);n<s.length;n++){var o=s[n];r.startsWith(o,"__")||("object"==typeof(e=t[o])?e instanceof Array?r.parse.iterateAndReviveArray(e):e&&r.parse.iterateAndReviveJson(e):t[o]=r.parse.jsonReviver(t[o],e))}},jsonReviver:function(t,e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e),n=r.timeZoneHandling?r.serverTimezoneOffset:null;if(i)return r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),n,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var s=e.indexOf("Z")>-1||e.indexOf("z")>-1,o=e.split(/[^0-9.]/);if(s)e=r.dateParse.toTimeZone(new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),r.serverTimezoneOffset,!1);else{var a=new Date(parseInt(o[0],10),parseInt(o[1],10)-1,parseInt(o[2],10),parseInt(o[3],10),parseInt(o[4],10),parseInt(o[5],10)),l=parseInt(o[6],10),h=parseInt(o[7],10);if(isNaN(l)&&isNaN(h))return a;e.indexOf("+")>-1?a.setHours(a.getHours()-l,a.getMinutes()-h):a.setHours(a.getHours()+l,a.getMinutes()+h),e=r.dateParse.toTimeZone(a,r.serverTimezoneOffset,!1)}null==r.serverTimezoneOffset&&(e=r.dateParse.addSelfOffset(e))}}return e},isJson:function(t){return"string"==typeof t[0]?t:r.parse.parseJson(t)},isGuid:function(t){return null!=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(t)},replacer:function(t,e){return r.isPlainObject(t)?r.parse.jsonReplacer(t,e):t instanceof Array?r.parse.arrayReplacer(t):t instanceof Date?r.parse.jsonReplacer({val:t},e).val:t},jsonReplacer:function(t,e){for(var i,s=0,o=Object.keys(t);s<o.length;s++){var a=o[s];if((i=t[a])instanceof Date){var l=i;null==r.serverTimezoneOffset?t[a]=r.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+36e5*r.serverTimezoneOffset),t[a]=r.dateParse.toTimeZone(r.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var e=0;e<t.length;e++)r.isPlainObject(t[e])?t[e]=r.parse.jsonReplacer(t[e]):t[e]instanceof Date&&(t[e]=r.parse.jsonReplacer({date:t[e]}).date);return t},jsonDateReplacer:function(t,e){if("value"===t&&e){if("string"==typeof e){var i=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(e);if(i)e=r.dateParse.toTimeZone(new Date(parseInt(i[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(e)){var n=e.split(/[^0-9]/);e=r.dateParse.toTimeZone(new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10),parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10)),null,!0)}}if(e instanceof Date)return e=r.dateParse.addSelfOffset(e),null===r.serverTimezoneOffset?r.dateParse.toTimeZone(r.dateParse.addSelfOffset(e),null).toJSON():(e=r.dateParse.toTimeZone(e,e.getTimezoneOffset()/60*2-r.serverTimezoneOffset,!1)).toJSON()}return e}},r.dateParse={addSelfOffset:function(t){return new Date(+t-6e4*t.getTimezoneOffset())},toUTC:function(t){return new Date(+t+6e4*t.getTimezoneOffset())},toTimeZone:function(t,e,i){if(null===e)return t;var n=i?r.dateParse.toUTC(t):t;return new Date(+n-36e5*e)},toLocalTime:function(t){var e=t,i=-e.getTimezoneOffset(),n=i>=0?"+":"-",s=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l};return e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+n+s(i/60)+":"+s(i%60)}},r}(),Ma=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),t6={GroupGuid:"{271bbba0-1ee7}"},nT=function(){function r(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=r,this.dataSource=t,this.pvt={}}return r.prototype.processResponse=function(t,e,i,n){return t},r}(),gv=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ma(t,r),t.prototype.processQuery=function(e,i){for(var a,l,m,n=e.dataSource.json.slice(0),s=n.length,o=!0,h={},u=0,d=[],v=0;v<i.lazyLoad.length;v++)u++,h[i.lazyLoad[v].key]=i.lazyLoad[v].value;var C={};for(v=0;v<i.queries.length;v++)"onPage"!==(l=i.queries[v]).fn&&"onGroup"!==l.fn||!i.lazyLoad.length?(a=this[l.fn].call(this,n,l.e,i),"onAggregates"===l.fn?C[l.e.field+" - "+l.e.type]=a:n=void 0!==a?a:n,("onPage"===l.fn||"onSkip"===l.fn||"onTake"===l.fn||"onRange"===l.fn)&&(o=!1),o&&(s=n.length)):("onGroup"===l.fn&&d.push(l.e),"onPage"===l.fn&&(m=l.e));if(u){var A=this.lazyLoadGroup({query:i,lazyLoad:h,result:n,group:d,page:m});n=A.result,s=A.count}return i.isCountRequired&&(n={result:n,count:s,aggregates:C}),n},t.prototype.lazyLoadGroup=function(e){var i=0,n=this.getAggregate(e.query),s=e.result;if(f(e.lazyLoad.onDemandGroupInfo)){i=(s=qe.group(s,e.group[0].fieldName,n,null,null,e.group[0].comparer,!0)).length;var h=s;e.page&&(s=this.onPage(s,e.page,e.query)),this.formGroupResult(s,h)}else{for(var o=e.lazyLoad.onDemandGroupInfo,a=o.where.length-1;a>=0;a--)s=this.onWhere(s,o.where[a]);e.group.length!==o.level&&(s=qe.group(s,e.group[o.level].fieldName,n,null,null,e.group[0].comparer,!0)),i=s.length,h=s,s=(s=s.slice(o.skip)).slice(0,o.take),e.group.length!==o.level&&this.formGroupResult(s,h)}return{result:s,count:i}},t.prototype.formGroupResult=function(e,i){if(e.length&&i.length){var n="GroupGuid",s="childLevels",o="level",a="records";e[n]=i[n],e[s]=i[s],e[o]=i[o],e[a]=i[a]}return e},t.prototype.getAggregate=function(e){var i=ii.filterQueries(e.queries,"onAggregates"),n=[];if(i.length)for(var s=void 0,o=0;o<i.length;o++)n.push({type:(s=i[o].e).type,field:qe.getValue(s.field,e)});return n},t.prototype.batchRequest=function(e,i,n){var s,o=i.deletedRecords.length;for(s=0;s<i.addedRecords.length;s++)this.insert(e,i.addedRecords[s]);for(s=0;s<i.changedRecords.length;s++)this.update(e,n.key,i.changedRecords[s]);for(s=0;s<o;s++)this.remove(e,n.key,i.deletedRecords[s]);return i},t.prototype.onWhere=function(e,i){return e&&e.length?e.filter(function(n){if(i)return i.validate(n)}):e},t.prototype.onAggregates=function(e,i){var n=qe.aggregates[i.type];return e&&n&&0!==e.length?n(e,i.field):null},t.prototype.onSearch=function(e,i){return e&&e.length?(0===i.fieldNames.length&&qe.getFieldList(e[0],i.fieldNames),e.filter(function(n){for(var s=0;s<i.fieldNames.length;s++)if(i.comparer.call(n,qe.getObject(i.fieldNames[s],n),i.searchKey,i.ignoreCase,i.ignoreAccent))return!0;return!1})):e},t.prototype.onSortBy=function(e,i,n){if(!e||!e.length)return e;var s,o=qe.getValue(i.fieldName,n);if(!o)return e.sort(i.comparer);if(o instanceof Array){for(var a=(o=o.slice(0)).length-1;a>=0;a--)!o[a]||(s=i.comparer,qe.endsWith(o[a]," desc")&&(s=qe.fnSort("descending"),o[a]=o[a].replace(" desc","")),e=qe.sort(e,o[a],s));return e}return qe.sort(e,o,i.comparer)},t.prototype.onGroup=function(e,i,n){if(!e||!e.length)return e;var s=this.getAggregate(n);return qe.group(e,qe.getValue(i.fieldName,n),s,null,null,i.comparer)},t.prototype.onPage=function(e,i,n){var s=qe.getValue(i.pageSize,n),o=(qe.getValue(i.pageIndex,n)-1)*s;return e&&e.length?e.slice(o,o+s):e},t.prototype.onRange=function(e,i){return e&&e.length?e.slice(qe.getValue(i.start),qe.getValue(i.end)):e},t.prototype.onTake=function(e,i){return e&&e.length?e.slice(0,qe.getValue(i.nos)):e},t.prototype.onSkip=function(e,i){return e&&e.length?e.slice(qe.getValue(i.nos)):e},t.prototype.onSelect=function(e,i){return e&&e.length?qe.select(e,qe.getValue(i.fieldNames)):e},t.prototype.insert=function(e,i,n,s,o){return f(o)?e.dataSource.json.push(i):e.dataSource.json.splice(o,0,i)},t.prototype.remove=function(e,i,n,s){var a,o=e.dataSource.json;for("object"==typeof n&&!(n instanceof Date)&&(n=qe.getObject(i,n)),a=0;a<o.length&&qe.getObject(i,o[a])!==n;a++);return a!==o.length?o.splice(a,1):null},t.prototype.update=function(e,i,n,s){var a,l,o=e.dataSource.json;for(f(i)||(l=Q(i,n)),a=0;a<o.length&&(f(i)||Q(i,o[a])!==l);a++);return a<o.length?io(o[a],n):null},t}(nT),Qh=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Ma(t,r),t.prototype.processQuery=function(e,i,n){var h,u,s=this.getQueryRequest(i),o=ii.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=i.params,l=e.dataSource.url,d=null,m=this.options,v={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in o?u=((u=qe.getValue((h=o.onPage).pageIndex,i))-1)*(d=qe.getValue(h.pageSize,i)):"onRange"in o&&(u=(h=o.onRange).start,d=h.end-h.start);for(var C=0;C<s.sorts.length;C++)h=qe.getValue(s.sorts[C].e.fieldName,i),v.sorts.push(qe.callAdaptorFunction(this,"onEachSort",{name:h,direction:s.sorts[C].e.direction},i));for(n&&(h=this.getFiltersFrom(n,i))&&v.filters.push(qe.callAdaptorFunction(this,"onEachWhere",h.toJson(),i)),C=0;C<s.filters.length;C++){var S=qe.callAdaptorFunction(this,"onEachWhere",s.filters[C].e.toJson(),i);this.getModuleName&&"ODataV4Adaptor"===this.getModuleName()&&!f(s.filters[C].e.key)&&s.filters.length>1&&(S="("+S+")"),v.filters.push(S);for(var _=0,M="object"==typeof v.filters[C]?Object.keys(v.filters[C]):[];_<M.length;_++)qe.isNull(v[P=M[_]])&&delete v[P]}for(C=0;C<s.searches.length;C++)v.searches.push(qe.callAdaptorFunction(this,"onEachSearch",{fields:(h=s.searches[C].e).fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},i));for(C=0;C<s.groups.length;C++)v.groups.push(qe.getValue(s.groups[C].e.fieldName,i));for(C=0;C<s.aggregates.length;C++)v.aggregates.push({type:(h=s.aggregates[C].e).type,field:qe.getValue(h.field,i)});var B={};if(this.getRequestQuery(m,i,o,v,B),qe.callAdaptorFunction(this,"addParams",{dm:e,query:i,params:a,reqParams:B}),i.lazyLoad.length)for(C=0;C<i.lazyLoad.length;C++)B[i.lazyLoad[C].key]=i.lazyLoad[C].value;for(var G=0,ne=Object.keys(B);G<ne.length;G++){var P;(qe.isNull(B[P=ne[G]])||""===B[P]||0===B[P].length)&&delete B[P]}(!(m.skip in B)||!(m.take in B))&&null!==d&&(B[m.skip]=qe.callAdaptorFunction(this,"onSkip",u,i),B[m.take]=qe.callAdaptorFunction(this,"onTake",d,i));var fe=this.pvt;return this.pvt={},"json"===this.options.requestType?{data:JSON.stringify(B,qe.parse.jsonDateReplacer),url:l,pvtData:fe,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(B,i,e),{type:"GET",url:(h=(-1!==e.dataSource.url.indexOf("?")?"&":"/")+h).length?l.replace(/\/*$/,h):l,pvtData:fe})},t.prototype.getRequestQuery=function(e,i,n,s,o){var l=o;l[e.from]=i.fromTable,e.apply&&i.distincts.length&&(l[e.apply]="onDistinct"in this?qe.callAdaptorFunction(this,"onDistinct",i.distincts):""),!i.distincts.length&&e.expand&&(l[e.expand]="onExpand"in this&&"onSelect"in n?qe.callAdaptorFunction(this,"onExpand",{selects:qe.getValue(n.onSelect.fieldNames,i),expands:i.expands},i):i.expands),l[e.select]="onSelect"in n&&!i.distincts.length?qe.callAdaptorFunction(this,"onSelect",qe.getValue(n.onSelect.fieldNames,i),i):"",l[e.count]=i.isCountRequired?qe.callAdaptorFunction(this,"onCount",i.isCountRequired,i):"",l[e.search]=s.searches.length?qe.callAdaptorFunction(this,"onSearch",s.searches,i):"",l[e.skip]="onSkip"in n?qe.callAdaptorFunction(this,"onSkip",qe.getValue(n.onSkip.nos,i),i):"",l[e.take]="onTake"in n?qe.callAdaptorFunction(this,"onTake",qe.getValue(n.onTake.nos,i),i):"",l[e.where]=s.filters.length||s.searches.length?qe.callAdaptorFunction(this,"onWhere",s.filters,i):"",l[e.sortBy]=s.sorts.length?qe.callAdaptorFunction(this,"onSortBy",s.sorts,i):"",l[e.group]=s.groups.length?qe.callAdaptorFunction(this,"onGroup",s.groups,i):"",l[e.aggregates]=s.aggregates.length?qe.callAdaptorFunction(this,"onAggregates",s.aggregates,i):"",l.param=[]},t.prototype.convertToQueryString=function(e,i,n){return""},t.prototype.processResponse=function(e,i,n,s,o,a){if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("application/json")){var l=qe.timeZoneHandling;i&&!i.timeZoneHandling&&(qe.timeZoneHandling=!1),e=qe.parse.parseJson(e),qe.timeZoneHandling=l}var h=o,u=h.pvtData||{},d=e?e.groupDs:[];if(s&&s.getResponseHeader("Content-Type")&&-1!==s.getResponseHeader("Content-Type").indexOf("xml"))return n.isCountRequired?{result:[],count:0}:[];var m=JSON.parse(h.data);if(m&&"batch"===m.action&&e&&e.addedRecords)return a.addedRecords=e.addedRecords,a;e&&e.d&&(e=e.d);var v={};e&&"count"in e&&(v.count=e.count),v.result=e&&e.result?e.result:e;var C=!1;if(Array.isArray(e.result)&&e.result.length&&(f(e.result[0].key)||(v.result=this.formRemoteGroupedData(v.result,1,u.groups.length-1)),n&&n.lazyLoad.length&&u.groups.length))for(var M=0;M<n.lazyLoad.length;M++)"onDemandGroupInfo"===n.lazyLoad[M].key&&u.groups.length===n.lazyLoad[M].value.level&&(C=!0);return C||this.getAggregateResult(u,e,v,d,n),qe.isNull(v.count)?v.result:{result:v.result,count:v.count,aggregates:v.aggregates}},t.prototype.formRemoteGroupedData=function(e,i,n){for(var s=0;s<e.length;s++)e[s].items.length&&Object.keys(e[s].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(e[s].items,i+1,n-1);var o="GroupGuid",h="records";return e[o]=t6[o],e.level=i,e.childLevels=n,e[h]=e[0].items.length?this.getGroupedRecords(e,!f(e[0].items[h])):[],e},t.prototype.getGroupedRecords=function(e,i){for(var n=[],o=0;o<e.length;o++)if(i)n=n.concat(e[o].items.records);else for(var a=0;a<e[o].items.length;a++)n.push(e[o].items[a]);return n},t.prototype.onGroup=function(e){return this.pvt.groups=e,e},t.prototype.onAggregates=function(e){this.pvt.aggregates=e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.removeUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(he({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n[void 0],key:n[void 0]},qe.getAddParams(this,e,s)))}},t.prototype.beforeSend=function(e,i){},t.prototype.insert=function(e,i,n,s){return{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{value:i,table:n,action:"insert"},qe.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{key:n,keyColumn:i,table:s,action:"remove"},qe.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{value:n,action:"update",keyColumn:i,key:qe.getObject(i,n),table:s},qe.getAddParams(this,e,o)))}},t.prototype.getFiltersFrom=function(e,i){var s,n=i.fKey,o=n,a=i.key,l=[];"object"!=typeof e[0]&&(o=null);for(var h=0;h<e.length;h++)s="object"==typeof e[0]?qe.getObject(a||o,e[h]):e[h],l.push(new kn(n,"equal",s));return kn.or(l)},t.prototype.getAggregateResult=function(e,i,n,s,o){var a=i;if(i&&i.result&&(a=i.result),e&&e.aggregates&&e.aggregates.length){var l=e.aggregates,h=void 0,u=a,d={};i.aggregate&&(u=i.aggregate);for(var m=0;m<l.length;m++)(h=qe.aggregates[l[m].type])&&(d[l[m].field+" - "+l[m].type]=h(u,l[m].field));n.aggregates=d}var C=Array.isArray(i.result)&&i.result.length&&!f(i.result[0].key);if(e&&e.groups&&e.groups.length&&!C){var S=e.groups;for(m=0;m<S.length;m++){f(s)||(s=qe.group(s,S[m]));var _=ii.filterQueries(o.queries,"onGroup")[m].e;a=qe.group(a,S[m],e.aggregates,null,s,_.comparer)}n.result=a}return n},t.prototype.getQueryRequest=function(e){var i={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return i.sorts=ii.filterQueries(e.queries,"onSortBy"),i.groups=ii.filterQueries(e.queries,"onGroup"),i.filters=ii.filterQueries(e.queries,"onWhere"),i.searches=ii.filterQueries(e.queries,"onSearch"),i.aggregates=ii.filterQueries(e.queries,"onAggregates"),i},t.prototype.addParams=function(e){var i=e.reqParams;e.params.length&&(i.params={});for(var n=0,s=e.params;n<s.length;n++){var o=s[n];if(i[o.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");i[o.key]=o.value,o.fn&&(i[o.key]=o.fn.call(e.query,o.key,e.query,e.dm)),i.params[o.key]=i[o.key]}},t}(nT),Nb=function(r){function t(e){var i=r.call(this)||this;return i.options=he({},i.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),he(i.options,e||{}),i}return Ma(t,r),t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(e,i,n){var o,a,s="",l=e.value,h=typeof l,u=e.field?t.getField(e.field):null;if(l instanceof Date&&(l="datetime'"+qe.parse.replacer(l)+"'"),"string"===h&&(l=l.replace(/'/g,"''"),e.ignoreCase&&(l=l.toLowerCase()),l=encodeURIComponent(l),n&&(u="cast("+u+", 'Edm.String')"),qe.parse.isGuid(l="'"+l+"'")&&(a="guid"),e.ignoreCase&&(a||(u="tolower("+u+")"),l=l.toLowerCase())),o=qe.odBiOperator[e.operator])return s+=u,s+=o,a&&(s+=a),s+l;if("substringof"===(o=f(this.getModuleName)||"ODataV4Adaptor"!==this.getModuleName()?qe.odUniOperator[e.operator]:qe.odv4UniOperator[e.operator])){var d=l;l=u,u=d}return s+=o+"(",s+=u+",",a&&(s+=a),s+(l+")")},t.prototype.addParams=function(e){r.prototype.addParams.call(this,e),delete e.reqParams.params},t.prototype.onComplexPredicate=function(e,i,n){for(var s=[],o=0;o<e.predicates.length;o++)s.push("("+this.onEachWhere(e.predicates[o],i,n)+")");return s.join(" "+e.condition+" ")},t.prototype.onEachWhere=function(e,i,n){return e.isComplex?this.onComplexPredicate(e,i,n):this.onPredicate(e,i,n)},t.prototype.onWhere=function(e){return this.pvt.search&&e.push(this.onEachWhere(this.pvt.search,null,!0)),e.join(" and ")},t.prototype.onEachSearch=function(e){e.fields&&0===e.fields.length&&qe.throwError("Query() - Search : oData search requires list of field names to search");for(var i=this.pvt.search||[],n=0;n<e.fields.length;n++)i.push(new kn(e.fields[n],e.operator,e.key,e.ignoreCase));this.pvt.search=i},t.prototype.onSearch=function(e){return this.pvt.search=kn.or(this.pvt.search),""},t.prototype.onEachSort=function(e){var i=[];if(e.name instanceof Array)for(var n=0;n<e.name.length;n++)i.push(t.getField(e.name[n])+("descending"===e.direction?" desc":""));else i.push(t.getField(e.name)+("descending"===e.direction?" desc":""));return i.join(",")},t.prototype.onSortBy=function(e){return e.reverse().join(",")},t.prototype.onGroup=function(e){return this.pvt.groups=e,[]},t.prototype.onSelect=function(e){for(var i=0;i<e.length;i++)e[i]=t.getField(e[i]);return e.join(",")},t.prototype.onAggregates=function(e){return this.pvt.aggregates=e,""},t.prototype.onCount=function(e){return!0===e?"allpages":""},t.prototype.beforeSend=function(e,i,n){qe.endsWith(n.url,this.options.batch)&&"post"===n.type.toLowerCase()?(i.setRequestHeader("Accept",this.options.multipartAccept),i.setRequestHeader("DataServiceVersion","2.0"),i.overrideMimeType("text/plain; charset=x-user-defined")):i.setRequestHeader("Accept",this.options.accept),i.setRequestHeader("DataServiceVersion","2.0"),i.setRequestHeader("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(e,i,n,s,o,a){var l="odata.metadata";if(o&&"GET"===o.type&&!this.rootUrl&&e[l]){var h=e[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}if(!f(e.d)){var d=n&&n.isCountRequired?e.d.results:e.d,m="__metadata";if(!f(d))for(var v=0;v<d.length;v++)f(d[v][m])||delete d[v][m]}var C=o&&o.pvtData,S=this.processBatchResponse(e,n,s,o,a);if(S)return S;var A=s&&o.getResponseHeader("DataServiceVersion"),_=null,M=A&&parseInt(A,10)||2;if(n&&n.isCountRequired){var P="__count";(e[P]||e["odata.count"])&&(_=e[P]||e["odata.count"]),e.d&&(e=e.d),(e[P]||e["odata.count"])&&(_=e[P]||e["odata.count"])}3===M&&e.value&&(e=e.value),e.d&&(e=e.d),M<3&&e.results&&(e=e.results);var B={};return B.count=_,B.result=e,this.getAggregateResult(C,e,B,null,n),qe.isNull(_)?B.result:{result:B.result,count:B.count,aggregates:B.aggregates}},t.prototype.convertToQueryString=function(e,i,n){var s=[],o="table",a=e[o]||"";delete e[o],n.dataSource.requiresFormat&&(e.$format="json");for(var u=0,d=Object.keys(e);u<d.length;u++){var m=d[u];s.push(m+"="+e[m])}return s=s.join("&"),n.dataSource.url&&-1!==n.dataSource.url.indexOf("?")&&!a?s:s.length?a+"?"+s:a||""},t.prototype.localTimeReplacer=function(e,i){for(var n=0,s=f(i)?[]:Object.keys(i);n<s.length;n++){var o=s[n];i[o]instanceof Date&&(i[o]=qe.dateParse.toLocalTime(i[o]))}return i},t.prototype.insert=function(e,i,n){return{url:(e.dataSource.insertUrl||e.dataSource.url).replace(/\/*$/,n?"/"+n:""),data:JSON.stringify(i,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(e,i,n,s){var o;return o="string"!=typeof n||qe.parse.isGuid(n)?"("+n+")":"('"+n+"')",{type:"DELETE",url:(e.dataSource.removeUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+o}},t.prototype.update=function(e,i,n,s,o,a){var l;return"PATCH"===this.options.updateType&&!f(a)&&(n=this.compareAndRemove(n,a,i)),l="string"!=typeof n[i]||qe.parse.isGuid(n[i])?"("+n[i]+")":"('"+n[i]+"')",{type:this.options.updateType,url:(e.dataSource.updateUrl||e.dataSource.url).replace(/\/*$/,s?"/"+s:"")+l,data:JSON.stringify(n,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(e,i,n,s,o){var a=n.guid=qe.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:e.dataSource.url.replace(/\/*$/,"/"+this.options.batch);n.url=this.resourceTableName?this.resourceTableName:n.url;var h={url:n.url,key:n.key,cid:1,cSet:qe.getGuid(this.options.changeSet)},u="--"+a+"\n";return u+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+"\n",this.pvt.changeSet=0,u+=this.generateInsertRequest(i.addedRecords,h,e),u+=this.generateUpdateRequest(i.changedRecords,h,e,o?o.changedRecords:[]),u+=this.generateDeleteRequest(i.deletedRecords,h,e),u+=h.cSet+"--\n",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:u+="--"+a+"--"}},t.prototype.generateDeleteRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"DELETE ",url:function(a,l,h){var u=qe.getObject(h,a[l]);return"number"==typeof u||qe.parse.isGuid(u)?"("+u+")":u instanceof Date?"("+a[l][h].toJSON()+")":"('"+u+"')"},data:function(a,l){return""}},n)+"\n":""},t.prototype.generateInsertRequest=function(e,i,n){return e?this.generateBodyContent(e,i,{method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+"\n\n"}},n):""},t.prototype.generateUpdateRequest=function(e,i,n,s){var o=this;return e?(e.forEach(function(h){return h=o.compareAndRemove(h,s.filter(function(u){return qe.getObject(i.key,u)===qe.getObject(i.key,h)})[0],i.key)}),this.generateBodyContent(e,i,{method:this.options.updateType+" ",url:function(h,u,d){return"number"==typeof h[u][d]||qe.parse.isGuid(h[u][d])?"("+h[u][d]+")":h[u][d]instanceof Date?"("+h[u][d].toJSON()+")":"('"+h[u][d]+"')"},data:function(h,u){return JSON.stringify(h[u])+"\n\n"}},n)):""},t.getField=function(e){return e.replace(/\./g,"/")},t.prototype.generateBodyContent=function(e,i,n,s){for(var o="",a=0;a<e.length;a++)o+="\n"+i.cSet+"\n",o+=this.options.changeSetContent+"\n\n",o+=n.method,"POST "===n.method?o+=(s.dataSource.insertUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"PUT "===n.method||"PATCH "===n.method?o+=(s.dataSource.updateUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n":"DELETE "===n.method&&(o+=(s.dataSource.removeUrl||s.dataSource.crudUrl||i.url)+n.url(e,a,i.key)+" HTTP/1.1\n"),o+="Accept: "+this.options.accept+"\n",o+="Content-Id: "+this.pvt.changeSet+++"\n",o+=this.options.batchChangeSetContentType+"\n",f(e[a]["@odata.etag"])?o+="\n":(o+="If-Match: "+e[a]["@odata.etag"]+"\n\n",delete e[a]["@odata.etag"]),o+=n.data(e,a);return o},t.prototype.processBatchResponse=function(e,i,n,s,o){if(n&&n.getResponseHeader("Content-Type")&&-1!==n.getResponseHeader("Content-Type").indexOf("xml"))return i.isCountRequired?{result:[],count:0}:[];if(s&&this.options.batch&&qe.endsWith(s.url,this.options.batch)&&"post"===s.type.toLowerCase()){var a=n.getResponseHeader("Content-Type"),l=void 0,h=void 0,u=e+"";if(a=a.substring(a.indexOf("=batchresponse")+1),(u=u.split(a)).length<2)return{};var d=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(u=u[1]);d&&u.replace(d[0],"");for(var v=(u=u.split(d?d[1]:"")).length;v>-1;v--)!/\bContent-ID:/i.test(u[v])||!/\bHTTP.+201/.test(u[v])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(u[v])[1],10),o.addedRecords[l]&&(h=qe.parse.parseJson(/^\{.+\}/m.exec(u[v])[0]),he({},o.addedRecords[l],this.processResponse(h))));return o}return null},t.prototype.compareAndRemove=function(e,i,n){var s=this;return f(i)||Object.keys(e).forEach(function(o){o!==n&&"@odata.etag"!==o&&(qe.isPlainObject(e[o])?(s.compareAndRemove(e[o],i[o]),0===Object.keys(e[o]).filter(function(l){return"@odata.etag"!==l}).length&&delete e[o]):(e[o]===i[o]||e[o]&&i[o]&&e[o].valueOf()===i[o].valueOf())&&delete e[o])}),e},t}(Qh),i6=function(r){function t(){var e=r.call(this)||this;return Nt("beforeSend",Qh.prototype.beforeSend,e),e}return Ma(t,r),t.prototype.insert=function(e,i,n,s,o){return this.pvt.position=o,this.updateType="add",{url:e.dataSource.insertUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{value:i,table:n,action:"insert"},qe.getAddParams(this,e,s)))}},t.prototype.remove=function(e,i,n,s,o){return r.prototype.remove.call(this,e,i,n),{type:"POST",url:e.dataSource.removeUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{key:n,keyColumn:i,table:s,action:"remove"},qe.getAddParams(this,e,o)))}},t.prototype.update=function(e,i,n,s,o){return this.updateType="update",this.updateKey=i,{type:"POST",url:e.dataSource.updateUrl||e.dataSource.crudUrl||e.dataSource.url,data:JSON.stringify(he({},{value:n,action:"update",keyColumn:i,key:n[i],table:s},qe.getAddParams(this,e,o)))}},t.prototype.processResponse=function(e,i,n,s,o,a,l){var h;if(e="batch"===(o?JSON.parse(o.data):e).action?qe.parse.parseJson(e):e,"add"===this.updateType&&r.prototype.insert.call(this,i,e,null,null,this.pvt.position),"update"===this.updateType&&r.prototype.update.call(this,i,this.updateKey,e),this.updateType=void 0,e.added)for(h=0;h<e.added.length;h++)r.prototype.insert.call(this,i,e.added[h]);if(e.changed)for(h=0;h<e.changed.length;h++)r.prototype.update.call(this,i,l.key,e.changed[h]);if(e.deleted)for(h=0;h<e.deleted.length;h++)r.prototype.remove.call(this,i,l.key,e.deleted[h]);return e},t.prototype.batchRequest=function(e,i,n,s,o){return{type:"POST",url:e.dataSource.batchUrl||e.dataSource.crudUrl||e.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(he({},{changed:i.changedRecords,added:i.addedRecords,deleted:i.deletedRecords,action:"batch",table:n.url,key:n.key},qe.getAddParams(this,e,s)))}},t.prototype.addParams=function(e){(new Qh).addParams(e)},t}(gv),n6=function(r){function t(e){var i=r.call(this)||this;return i.options=he({},i.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),he(i.options,e||{}),i}return Ma(t,r),t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Qh),vN=function(r){function t(e,i,n){var s=r.call(this)||this;s.isCrudAction=!1,s.isInsertAction=!1,f(e)||(s.cacheAdaptor=e),s.pageSize=n,s.guidId=qe.getGuid("cacheAdaptor"),window.localStorage.setItem(s.guidId,JSON.stringify({keys:[],results:[]}));var a=s.guidId;return f(i)||setInterval(function(){var l;l=qe.parse.parseJson(window.localStorage.getItem(a));for(var h=[],u=0;u<l.results.length;u++){var d=+new Date,m=+new Date(l.results[u].timeStamp);l.results[u].timeStamp=d-m,d-m>i&&h.push(u)}for(u=0;u<h.length;u++)l.results.splice(h[u],1),l.keys.splice(h[u],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},i),s}return Ma(t,r),t.prototype.generateKey=function(e,i){var n=this.getQueryRequest(i),s=ii.filterQueryLists(i.queries,["onSelect","onPage","onSkip","onTake","onRange"]),o=e,a="onPage";a in s&&(o+=s[a].pageIndex),n.sorts.forEach(function(m){o+=m.e.direction+m.e.fieldName}),n.groups.forEach(function(m){o+=m.e.fieldName}),n.searches.forEach(function(m){o+=m.e.searchKey});for(var l=0;l<n.filters.length;l++){var h=n.filters[l];if(h.e.isComplex){var u=i.clone();u.queries=[];for(var d=0;d<h.e.predicates.length;d++)u.queries.push({fn:"onWhere",e:h.e.predicates[d],filter:i.queries.filter});o+=h.e.condition+this.generateKey(e,u)}else o+=h.e.field+h.e.operator+h.e.value}return o},t.prototype.processQuery=function(e,i,n){var o,s=this.generateKey(e.dataSource.url,i),a=(o=qe.parse.parseJson(window.localStorage.getItem(this.guidId)))?o.results[o.keys.indexOf(s)]:null;return null==a||this.isCrudAction||this.isInsertAction?(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0))):a},t.prototype.processResponse=function(e,i,n,s,o,a){if(this.isInsertAction||o&&this.cacheAdaptor.options.batch&&qe.endsWith(o.url,this.cacheAdaptor.options.batch)&&"post"===o.type.toLowerCase())return this.cacheAdaptor.processResponse(e,i,n,s,o,a);e=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=n?this.generateKey(i.dataSource.url,n):i.dataSource.url,h={},u=(h=qe.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(l);for(-1!==u&&(h.results.splice(u,1),h.keys.splice(u,1)),h.results[h.keys.push(l)-1]={keys:l,result:e.result,timeStamp:new Date,count:e.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),e},t.prototype.beforeSend=function(e,i,n){!f(this.cacheAdaptor.options.batch)&&qe.endsWith(n.url,this.cacheAdaptor.options.batch)&&"post"===n.type.toLowerCase()&&i.setRequestHeader("Accept",this.cacheAdaptor.options.multipartAccept),e.dataSource.crossDomain||i.setRequestHeader("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.update(e,i,n,s)},t.prototype.insert=function(e,i,n){return this.isInsertAction=!0,this.cacheAdaptor.insert(e,i,n)},t.prototype.remove=function(e,i,n,s){return this.isCrudAction=!0,this.cacheAdaptor.remove(e,i,n,s)},t.prototype.batchRequest=function(e,i,n){return this.cacheAdaptor.batchRequest(e,i,n)},t}(Qh),Qe=function(){function r(t,e,i){var s,n=this;return this.dateParse=!0,this.timeZoneHandling=!0,this.requests=[],!t&&!this.dataSource&&(t=[]),i=i||t.adaptor,t&&!1===t.timeZoneHandling&&(this.timeZoneHandling=t.timeZoneHandling),t instanceof Array?s={json:t,offline:!0}:"object"==typeof t?(t.json||(t.json=[]),s={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:void 0!==t.offline?t.offline:!(t.adaptor instanceof i6||t.adaptor instanceof n6||t.url),requiresFormat:t.requiresFormat}):qe.throwError("DataManager: Invalid arguments"),void 0===s.requiresFormat&&!qe.isCors()&&(s.requiresFormat=!!f(s.crossDomain)||s.crossDomain),void 0===s.dataType&&(s.dataType="json"),this.dataSource=s,this.defaultQuery=e,s.url&&s.offline&&!s.json.length?(this.isDataAvailable=!1,this.adaptor=i||new Nb,this.dataSource.offline=!1,this.ready=this.executeQuery(e||new ii),this.ready.then(function(o){n.dataSource.offline=!0,n.isDataAvailable=!0,s.json=o.result,n.adaptor=new gv})):this.adaptor=s.offline?new gv:new Nb,!s.jsonp&&this.adaptor instanceof Nb&&(s.jsonp="callback"),this.adaptor=i||this.adaptor,s.enableCaching&&(this.adaptor=new vN(this.adaptor,s.timeTillExpiration,s.cachingPageSize)),this}return r.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},r.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof ii)&&qe.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||qe.throwError("DataManager - executeLocal() : Json data is required to execute");var e=this.adaptor.processQuery(this,t=t||this.defaultQuery);if(t.subQuery){var i=t.subQuery.fromTable,n=t.subQuery.lookups,s=t.isCountRequired?e.result:e;n&&n instanceof Array&&qe.buildHierarchy(t.subQuery.fKey,i,s,n,t.subQuery.key);for(var o=0;o<s.length;o++)s[o][i]instanceof Array&&(s[o]=he({},{},s[o]),s[o][i]=this.adaptor.processResponse(t.subQuery.using(new r(s[o][i].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(e,this,t)},r.prototype.executeQuery=function(t,e,i,n){var s=this,o="makeRequest";"function"==typeof t&&(n=i,i=e,e=t,t=null),t||(t=this.defaultQuery),t instanceof ii||qe.throwError("DataManager - executeQuery() : A query is required to execute");var a=new ul,l={query:t};if(!this.dataSource.offline&&void 0!==this.dataSource.url&&""!==this.dataSource.url||!f(this.adaptor[o])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,t);f(this.adaptor[o])?!f(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=r.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[o](h,a,l,t)}else r.nextTick(function(){var u=s.executeLocal(t);l=r.getDeferedArgs(t,u,l),a.resolve(l)});return(e||i)&&a.promise.then(e,i),n&&a.promise.then(n,n),a.promise},r.getDeferedArgs=function(t,e,i){return t.isCountRequired?(i.result=e.result,i.count=e.count,i.aggregates=e.aggregates):i.result=e,i},r.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},r.prototype.extendRequest=function(t,e,i){return he({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:e,onFailure:i},t)},r.prototype.makeRequest=function(t,e,i,n){var s=this,o=!!n.subQuerySelector,a=function(A){i.error=A,e.reject(i)},l=function(A,_,M,P,B,j,G){i.xhr=M,i.count=_?parseInt(_.toString(),10):0,i.result=A,i.request=P,i.aggregates=j,i.actual=B,i.virtualSelectRecords=G,e.resolve(i)},h=function(A,_){var M=new ul,P={parent:i};n.subQuery.isChild=!0;var B=s.adaptor.processQuery(s,n.subQuery,A?s.adaptor.processResponse(A):_),j=s.makeRequest(B,M,P,n.subQuery);return o||M.then(function(G){A&&(qe.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,A,G,n.subQuery.key),l(A,G.count,G.xhr))},a),j},d=this.extendRequest(t,function(A,_){if(s.isGraphQLAdaptor(s.adaptor)&&!f(A.errors))return a(A.errors);s.isCustomDataAdaptor(s.adaptor)&&(_=he({},s.ajaxReqOption,_)),-1===_.httpRequest.getResponseHeader("Content-Type").indexOf("xml")&&s.dateParse&&(A=qe.parse.parseJson(A));var M=s.adaptor.processResponse(A,s,n,_.httpRequest,_),P=0,B=null,G=A.virtualSelectRecords;n.isCountRequired&&(P=M.count,B=M.aggregates,M=M.result),n.subQuery?o||h(M,_):l(M,P,_.httpRequest,_.type,A,B,G)},a);if(this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=d,this.adaptor.options.getData({data:d.data,onSuccess:d.onSuccess,onFailure:d.onFailure});else{var m=new qp(d);m.beforeSend=function(){s.beforeSend(m.httpRequest,m)},(d=m.send()).catch(function(A){return!0}),this.requests.push(m)}if(o){var S=n.subQuerySelector.call(this,{query:n.subQuery,parent:n});S&&S.length?Promise.all([d,h(null,S)]).then(function(){for(var A=[],_=0;_<arguments.length;_++)A[_]=arguments[_];var M=A[0],P=s.adaptor.processResponse(M[0],s,n,s.requests[0].httpRequest,s.requests[0]),B=0;n.isCountRequired&&(B=P.count,P=P.result);var j=s.adaptor.processResponse(M[1],s,n.subQuery,s.requests[1].httpRequest,s.requests[1]);B=0,n.subQuery.isCountRequired&&(B=j.count,j=j.result),qe.buildHierarchy(n.subQuery.fKey,n.subQuery.fromTable,P,j,n.subQuery.key),o=!1,l(P,B,s.requests[0].httpRequest)}):o=!1}return d},r.prototype.beforeSend=function(t,e){this.adaptor.beforeSend(this,t,e);for(var n,i=this.dataSource.headers,s=0;i&&s<i.length;s++){n=[];for(var a=0,l=Object.keys(i[s]);a<l.length;a++){var h=l[a];n.push(h),t.setRequestHeader(h,i[s][h])}}},r.prototype.saveChanges=function(t,e,i,n,s){var o=this;i instanceof ii&&(n=i,i=null);var a={url:i,key:e||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,n||new ii,s),h="doAjaxRequest";if(this.dataSource.offline)return l;if(f(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.doAjaxRequest(l,this.adaptor.options.batchUpdate);var u=new ul,d=new qp(l);return d.beforeSend=function(){o.beforeSend(d.httpRequest,d)},d.onSuccess=function(m,v){o.isGraphQLAdaptor(o.adaptor)&&(f(m.errors)||d.onFailure(JSON.stringify(m.errors))),u.resolve(o.adaptor.processResponse(m,o,null,v.httpRequest,v,t,a))},d.onFailure=function(m){u.reject([{error:m}])},d.send().catch(function(m){return!0}),u.promise}return this.adaptor[h](l)},r.prototype.insert=function(t,e,i,n){e instanceof ii&&(i=e,e=null);var s=this.adaptor.insert(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.addRecord):this.adaptor[o](s)},r.prototype.remove=function(t,e,i,n){"object"==typeof e&&(e=qe.getObject(t,e)),i instanceof ii&&(n=i,i=null);var s=this.adaptor.remove(this,t,e,i,n),o="doAjaxRequest";return this.dataSource.offline?s:f(this.adaptor[o])?this.doAjaxRequest(s,this.adaptor.options.deleteRecord):this.adaptor[o](s)},r.prototype.update=function(t,e,i,n,s){i instanceof ii&&(n=i,i=null);var o=this.adaptor.update(this,t,e,i,n,s),a="doAjaxRequest";return this.dataSource.offline?o:f(this.adaptor[a])?this.doAjaxRequest(o,this.adaptor.options.updateRecord):this.adaptor[a](o)},r.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&"CustomDataAdaptor"===this.adaptor.getModuleName()},r.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&"GraphQLAdaptor"===this.adaptor.getModuleName()},r.prototype.successFunc=function(t,e){if(this.isGraphQLAdaptor(this.adaptor)){var i=JSON.parse(t);f(i.errors)||this.failureFunc(JSON.stringify(i.errors))}this.isCustomDataAdaptor(this.adaptor)&&(e=he({},this.ajaxReqOption,e));try{qe.parse.parseJson(t)}catch{t=[]}t=this.adaptor.processResponse(qe.parse.parseJson(t),this,null,e.httpRequest,e),this.ajaxDeffered.resolve(t)},r.prototype.failureFunc=function(t){this.ajaxDeffered.reject([{error:t}])},r.prototype.doAjaxRequest=function(t,e){var i=this;if(t=he({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.ajaxDeffered=new ul,this.isCustomDataAdaptor(this.adaptor))this.ajaxReqOption=t,e.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var n=new qp(t);n.beforeSend=function(){i.beforeSend(n.httpRequest,n)},n.onSuccess=this.successFunc.bind(this),n.onFailure=this.failureFunc.bind(this),n.send().catch(function(s){return!0})}return this.ajaxDeffered.promise},r}(),ul=function(){return function r(){var t=this;this.promise=new Promise(function(e,i){t.resolve=e,t.reject=i}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}();function s6(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}var Ad,mv,Vb,zb,vv,eu,hR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Ac=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Bu_RTL=(new Up,"e-rtl"),uR=function(r){function t(e,i){return r.call(this,e,i)||this}return hR(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=$i(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?Nn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Bu_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Bu_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&le(i),this.unWireEvents(),ir&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):le(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&le(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Bu_RTL):this.element.classList.remove(Bu_RTL);break;case"content":s6(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=Nn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Ac([E("Left")],t.prototype,"iconPosition",void 0),Ac([E("")],t.prototype,"iconCss",void 0),Ac([E(!1)],t.prototype,"disabled",void 0),Ac([E(!1)],t.prototype,"isPrimary",void 0),Ac([E("")],t.prototype,"cssClass",void 0),Ac([E("")],t.prototype,"content",void 0),Ac([E(!1)],t.prototype,"isToggle",void 0),Ac([E()],t.prototype,"locale",void 0),Ac([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ac([q()],t.prototype,"created",void 0),Ac([si],t)}(Ji),xT=!1;function TT(r,t){var e=!1,i={left:0,top:0},n=r;if(!r||!t)return i;for(f(t.offsetParent)&&"fixed"===t.style.position&&(e=!0);(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left+=r.offsetLeft,i.top+=r.offsetTop,r=r.offsetParent;for(r=n;(t.offsetParent||e)&&r&&t.offsetParent!==r;)i.left-=r.scrollLeft,i.top-=r.scrollTop,r=r.parentElement;return i}function So(r,t,e,i,n){return mv=void 0,mv=n,xT=!!i,r?(t||(t="left"),e||(e="top"),zb=r.ownerDocument,Vb=r,function WN(r,t,e){switch(Ad=Vb.getBoundingClientRect(),t+r){case"topcenter":kd(GN(),e),Yp(jb(),e);break;case"topright":kd(RR(),e),Yp(jb(),e);break;case"centercenter":kd(GN(),e),Yp(IT(),e);break;case"centerright":kd(RR(),e),Yp(IT(),e);break;case"centerleft":kd(ju(),e),Yp(IT(),e);break;case"bottomcenter":kd(GN(),e),Yp(Rd(),e);break;case"bottomright":kd(RR(),e),Yp(Rd(),e);break;case"bottomleft":kd(ju(),e),Yp(Rd(),e);break;default:kd(ju(),e),Yp(jb(),e)}return e}(t.toLowerCase(),e.toLowerCase(),{left:0,top:0})):{left:0,top:0}}function kd(r,t){t.left=r}function Yp(r,t){t.top=r}function qN(){return zb.documentElement.scrollTop||zb.body.scrollTop}function DT(){return zb.documentElement.scrollLeft||zb.body.scrollLeft}function Rd(){return xT?Ad.bottom:Ad.bottom+qN()}function IT(){return jb()+Ad.height/2}function jb(){return xT?Ad.top:Ad.top+qN()}function ju(){return Ad.left+DT()}function RR(){var r=Vb&&Vb.classList.contains("e-date-range-wrapper")?mv?mv.width:0:mv&&Ad.width>=mv.width?mv.width:0;return Ad.right+DT()-r}function GN(){return ju()+Ad.width/2}function _R(r,t,e,i){if(void 0===t&&(t=null),void 0===e&&(e={X:!1,Y:!1}),!e.Y&&!e.X)return{left:0,top:0};var n=r.getBoundingClientRect();if(eu=t,vv=r.ownerDocument,i||(i=So(r,"left","top")),e.X){var s=eu?MR():ZN(),o=Wb(),a=kT(),l=o-i.left,h=i.left+n.width-a;n.width>s?i.left=l>0&&h<=0?a-n.width:h>0&&l<=0?o:l>h?a-n.width:o:l>0?i.left+=l:h>0&&(i.left-=h)}if(e.Y){var u=eu?FR():YN(),d=Ub(),m=HR(),v=d-i.top,C=i.top+n.height-m;n.height>u?i.top=v>0&&C<=0?m-n.height:C>0&&v<=0?d:v>C?m-n.height:d:v>0?i.top+=v:C>0&&(i.top-=C)}return i}function Zp(r,t,e,i){void 0===t&&(t=null);var n=So(r,"left","top");e&&(n.left=e),i&&(n.top=i);var s=[];eu=t,vv=r.ownerDocument;var o=r.getBoundingClientRect(),l=n.left,h=n.left+o.width,d=PR(n.top,n.top+o.height),m=OR(l,h);return d.topSide&&s.push("top"),m.rightSide&&s.push("right"),m.leftSide&&s.push("left"),d.bottomSide&&s.push("bottom"),s}function KN(r,t,e,i,n,s,o,a,l){if(void 0===o&&(o=null),void 0===a&&(a={X:!0,Y:!0}),t&&r&&n&&s&&(a.X||a.Y)){var d,h={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null};if("none"===window.getComputedStyle(r).display){var m=r.style.visibility;r.style.visibility="hidden",r.style.display="block",d=r.getBoundingClientRect(),r.style.removeProperty("display"),r.style.visibility=m}else d=r.getBoundingClientRect();var v={posX:n,posY:s,offsetX:e,offsetY:i,position:{left:0,top:0}};eu=o,vv=t.ownerDocument,function $N(r,t,e,i,n){e.position=So(r,e.posX,e.posY,i,n),t.TL=So(r,"left","top",i,n),t.TR=So(r,"right","top",i,n),t.BR=So(r,"left","bottom",i,n),t.BL=So(r,"right","bottom",i,n)}(t,h,v,l,d),LR(u,v,d),a.X&&y6(t,u,h,v,d,!0),a.Y&&h.TL.top>-1&&AT(t,u,h,v,d,!0),function VZ(r,t,e){var i=0,n=0;if(null!=r.offsetParent&&("absolute"===getComputedStyle(r.offsetParent).position||"relative"===getComputedStyle(r.offsetParent).position)){var s=So(r.offsetParent,"left","top",!1,e);i=s.left,n=s.top}r.style.top=t.position.top+t.offsetY-n+"px",r.style.left=t.position.left+t.offsetX-i+"px"}(r,v,d)}}function LR(r,t,e){r.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},r.TR={top:r.TL.top,left:r.TL.left+e.width},r.BL={top:r.TL.top+e.height,left:r.TL.left},r.BR={top:r.TL.top+e.height,left:r.TL.left+e.width}}function OR(r,t){var e=!1,i=!1;return r-Xw()<Wb()&&(e=!0),t>kT()&&(i=!0),{leftSide:e,rightSide:i}}function y6(r,t,e,i,n,s){var o=OR(t.TL.left,t.TR.left);e.TL.left-Xw()<=Wb()&&(o.leftSide=!1),e.TR.left>kT()&&(o.rightSide=!1),(o.leftSide&&!o.rightSide||!o.leftSide&&o.rightSide)&&(i.posX="right"===i.posX?"left":"right",i.offsetX=i.offsetX+n.width,i.offsetX=-1*i.offsetX,i.position=So(r,i.posX,i.posY,!1),LR(t,i,n),s&&y6(r,t,e,i,n,!1))}function AT(r,t,e,i,n,s){var o=PR(t.TL.top,t.BL.top);e.TL.top-Zw()<=Ub()&&(o.topSide=!1),e.BL.top>=HR()&&r.getBoundingClientRect().bottom<window.innerHeight&&(o.bottomSide=!1),(o.topSide&&!o.bottomSide||!o.topSide&&o.bottomSide)&&(i.posY="top"===i.posY?"bottom":"top",i.offsetY=i.offsetY+n.height,i.offsetY=-1*i.offsetY,i.position=So(r,i.posX,i.posY,!1,n),LR(t,i,n),s&&AT(r,t,e,i,n,!1))}function PR(r,t){var e=!1,i=!1;return r-Zw()<Ub()&&(e=!0),t>HR()&&(i=!0),{topSide:e,bottomSide:i}}function MR(){return eu.getBoundingClientRect().width}function FR(){return eu.getBoundingClientRect().height}function NR(){return eu.getBoundingClientRect().left}function BR(){return eu.getBoundingClientRect().top}function Ub(){return eu?BR():0}function Wb(){return eu?NR():0}function kT(){return eu?Xw()+NR()+MR():Xw()+ZN()}function HR(){return eu?Zw()+BR()+FR():Zw()+YN()}function Zw(){return vv.documentElement.scrollTop||vv.body.scrollTop}function Xw(){return vv.documentElement.scrollLeft||vv.body.scrollLeft}function YN(){return window.innerHeight}function ZN(){var r=window.innerWidth,t=document.documentElement.getBoundingClientRect();return r-(r-(f(document.documentElement)?0:t.width))}var b6=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),wa=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},VR=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return b6(t,r),wa([E("left")],t.prototype,"X",void 0),wa([E("top")],t.prototype,"Y",void 0),t}(Si),Fa_OPEN="e-popup-open",Fa_CLOSE="e-popup-close",kl=function(r){function t(e,i){return r.call(this,i,e)||this}return b6(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"width":Ft(this.element,{width:it(e.width)});break;case"height":Ft(this.element,{height:it(e.height)});break;case"zIndex":Ft(this.element,{zIndex:e.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=e.offsetX-i.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=e.offsetY-i.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":"none"!==e.actionOnScroll?this.wireScrollEvents():this.unwireScrollEvents()}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove("e-popup","e-rtl",Fa_OPEN,Fa_CLOSE),r.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add("e-popup");var e={};1e3!==this.zIndex&&(e.zIndex=this.zIndex),"auto"!==this.width&&(e.width=it(this.width)),"auto"!==this.height&&(e.height=it(this.height)),Ft(this.element,e),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){Z.isDevice&&T.add(window,"orientationchange",this.orientationOnChange,this),"none"!==this.actionOnScroll&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)T.add(i[e],"scroll",this.scrollRefresh,this)},t.prototype.unwireEvents=function(){Z.isDevice&&T.remove(window,"orientationchange",this.orientationOnChange),"none"!==this.actionOnScroll&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var e=0,i=this.getScrollableParent(this.getRelateToElement());e<i.length;e++)T.remove(i[e],"scroll",this.scrollRefresh)},t.prototype.getRelateToElement=function(){var e=""===this.relateTo||f(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:e},!0),"string"==typeof this.relateTo?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(e){if("reposition"===this.actionOnScroll?!f(this.element)&&!(this.element.offsetParent===e.target||this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&null==e.target.parentElement)&&this.refreshPosition():"hide"===this.actionOnScroll&&this.hide(),"none"!==this.actionOnScroll&&this.getRelateToElement()){var i=this.isElementOnViewport(this.getRelateToElement(),e.target);i||this.targetInvisibleStatus?i&&(this.targetInvisibleStatus=!1):(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0)}},t.prototype.isElementOnViewport=function(e,i){for(var n=this.getScrollableParent(e),s=0;s<n.length;s++)if(!this.isElementVisible(e,n[s]))return!1;return!0},t.prototype.isElementVisible=function(e,i){var n=this.checkGetBoundingClientRect(e);if(!n.height||!n.width)return!1;if(f(this.checkGetBoundingClientRect(i))){var o=window,a={top:o.scrollY,left:o.scrollX,right:o.scrollX+o.outerWidth,bottom:o.scrollY+o.outerHeight},l=So(e),h={top:l.top,left:l.left,right:l.left+n.width,bottom:l.top+n.height},u={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return u.top>0&&u.left>0&&u.right>0&&u.bottom>0}var s=i.getBoundingClientRect();return!(n.bottom<s.top||n.bottom>s.bottom||n.right>s.right||n.left<s.left)},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.setContent=function(){if(!f(this.content))if(this.element.innerHTML="","string"==typeof this.content)this.element.textContent=this.content;else{var e=this.getRelateToElement(),i=this.content.props;(!e.classList.contains("e-dropdown-btn")||f(i))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var e=this;setTimeout(function(){e.refreshPosition()},200)},t.prototype.refreshPosition=function(e,i){f(e)||this.checkFixedParent(e),this.reposition(),i||this.checkCollision()},t.prototype.reposition=function(){var e,i,n=this.getRelateToElement();if("number"==typeof this.position.X&&"number"==typeof this.position.Y)e={left:this.position.X,top:this.position.Y};else if("string"==typeof this.position.X&&"number"==typeof this.position.Y||"number"==typeof this.position.X&&"string"==typeof this.position.Y){var s=void 0,o=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(s=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),i=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),e="string"==typeof this.position.X?{left:i.left,top:this.position.Y}:{left:this.position.X,top:i.top},this.element.style.display=o,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=s)}else n?(o=this.element.style.display,this.element.style.display="block",e=this.getAnchorPosition(n,this.element,this.position,this.offsetX,this.offsetY),this.element.style.display=o):e={left:0,top:0};f(e)||(this.element.style.left=e.left+"px",this.element.style.top=e.top+"px")},t.prototype.checkGetBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch{return null}},t.prototype.getAnchorPosition=function(e,i,n,s,o){var a=this.checkGetBoundingClientRect(i),l=this.checkGetBoundingClientRect(e);if(f(a)||f(l))return null;var h=e,u={left:0,top:0};switch(i.offsetParent&&"BODY"===i.offsetParent.tagName&&"BODY"===e.tagName?u=So(e):(i.classList.contains("e-dlg-modal")&&"BODY"!==h.tagName&&(i=i.parentElement),u=TT(h,i)),n.X){default:case"left":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth/2-a.width/2:u.left+="container"===this.targetType?l.width/2-a.width/2:l.width/2;break;case"right":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.left+=window.innerWidth-a.width:u.left+="container"===this.targetType?l.width-a.width:l.width}switch(n.Y){default:case"top":break;case"center":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight/2-a.height/2:u.top+="container"===this.targetType?l.height/2-a.height/2:l.height/2;break;case"bottom":i.classList.contains("e-dlg-modal")&&"BODY"===h.tagName&&"container"===this.targetType?u.top+=window.innerHeight-a.height:u.top+="container"===this.targetType?l.height-a.height:l.height}return u.left+=s,u.top+=o,u},t.prototype.callFlip=function(e){var i=this.getRelateToElement();KN(this.element,i,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,e,this.fixedParent)},t.prototype.callFit=function(e){if(0!==Zp(this.element,this.viewPortElement).length)if(f(this.viewPortElement)){var i=_R(this.element,this.viewPortElement,e);e.X&&(this.element.style.left=i.left+"px"),e.Y&&(this.element.style.top=i.top+"px")}else{var n=this.checkGetBoundingClientRect(this.element),s=this.checkGetBoundingClientRect(this.viewPortElement);if(f(n)||f(s))return null;e&&!0===e.Y&&(s.top>n.top?this.element.style.top="0px":s.bottom<n.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(n.bottom-s.bottom)+"px")),e&&!0===e.X&&(s.right<n.right?this.element.style.left=parseInt(this.element.style.left,10)-(n.right-s.right)+"px":s.left>n.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(s.left-n.left)+"px"))}},t.prototype.checkCollision=function(){var e=this.collision.X,i=this.collision.Y;"none"===e&&"none"===i||("flip"===e&&"flip"===i?this.callFlip({X:!0,Y:!0}):"fit"===e&&"fit"===i?this.callFit({X:!0,Y:!0}):("flip"===e?this.callFlip({X:!0,Y:!1}):"flip"===i&&this.callFlip({Y:!0,X:!1}),"fit"===e?this.callFit({X:!0,Y:!1}):"fit"===i&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(e,i){var n=this;if(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0],this.wireEvents(),this.fmDialogContainer&&Z.isIos&&(this.fmDialogContainer.style.display="block"),1e3===this.zIndex||!f(i)){var s=f(i)?this.element:i;this.zIndex=yv(s),Ft(this.element,{zIndex:this.zIndex})}e=f(e)||"object"!=typeof e?this.showAnimation:e,("none"!==this.collision.X||"none"!==this.collision.Y)&&(z([this.element],Fa_CLOSE),N([this.element],Fa_OPEN),this.checkCollision(),z([this.element],Fa_OPEN),N([this.element],Fa_CLOSE)),f(e)?(z([this.element],Fa_CLOSE),N([this.element],Fa_OPEN),this.trigger("open")):(e.begin=function(){n.isDestroyed||(z([n.element],Fa_CLOSE),N([n.element],Fa_OPEN))},e.end=function(){n.isDestroyed||n.trigger("open")},new gr(e).animate(this.element))},t.prototype.hide=function(e){var i=this;e=f(e)||"object"!=typeof e?this.hideAnimation:e,f(e)?(z([this.element],Fa_OPEN),N([this.element],Fa_CLOSE),this.trigger("close")):(e.end=function(){i.isDestroyed||(z([i.element],Fa_OPEN),N([i.element],Fa_CLOSE),i.trigger("close"))},new gr(e).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(e){return this.checkFixedParent(e),function zR(r,t){for(var e=getComputedStyle(r),i=[],n=/(auto|scroll)/,s=r.parentElement;s&&"HTML"!==s.tagName;){var o=getComputedStyle(s);!("absolute"===e.position&&"static"===o.position)&&n.test(o.overflow+o.overflowY+o.overflowX)&&i.push(s),s=s.parentElement}return t||i.push(document),i}(e,this.fixedParent)},t.prototype.checkFixedParent=function(e){for(var i=e.parentElement;i&&"HTML"!==i.tagName;){var n=getComputedStyle(i);"fixed"===n.position&&!f(this.element)&&this.element.offsetParent&&"BODY"===this.element.offsetParent.tagName&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top)?it(window.scrollY-parseInt(this.element.style.top)):it(parseInt(this.element.style.top)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),i=i.parentElement,!f(this.element)&&f(this.element.offsetParent)&&"fixed"===n.position&&"fixed"===this.element.style.position&&(this.fixedParent=!0)}},wa([E("auto")],t.prototype,"height",void 0),wa([E("auto")],t.prototype,"width",void 0),wa([E(null)],t.prototype,"content",void 0),wa([E("container")],t.prototype,"targetType",void 0),wa([E(null)],t.prototype,"viewPortElement",void 0),wa([E({X:"none",Y:"none"})],t.prototype,"collision",void 0),wa([E("")],t.prototype,"relateTo",void 0),wa([rn({},VR)],t.prototype,"position",void 0),wa([E(0)],t.prototype,"offsetX",void 0),wa([E(0)],t.prototype,"offsetY",void 0),wa([E(1e3)],t.prototype,"zIndex",void 0),wa([E(!1)],t.prototype,"enableRtl",void 0),wa([E("reposition")],t.prototype,"actionOnScroll",void 0),wa([E(null)],t.prototype,"showAnimation",void 0),wa([E(null)],t.prototype,"hideAnimation",void 0),wa([q()],t.prototype,"open",void 0),wa([q()],t.prototype,"close",void 0),wa([q()],t.prototype,"targetExitViewport",void 0),wa([si],t)}(Ji);function yv(r){for(var t=r.parentElement,e=[];t&&"BODY"!==t.tagName;){var i=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");"auto"!==i&&"static"!==n&&e.push(i),t=t.parentElement}for(var s=[],o=0;o<document.body.children.length;o++)r.isEqualNode(document.body.children[o])||(i=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(document.body.children[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&s.push(i));s.push("999");var a=[];if(!f(r.parentElement)&&"BODY"!==r.parentElement.tagName){var l=[].slice.call(r.parentElement.children);for(o=0;o<l.length;o++)r.isEqualNode(l[o])||(i=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("z-index"),n=document.defaultView.getComputedStyle(l[o],null).getPropertyValue("position"),"auto"!==i&&"static"!==n&&a.push(i))}var h=e.concat(s,a),u=Math.max.apply(Math,h)+1;return u>2147483647?2147483647:u}var Kr,Rl,Xp,wv,eB,xg,wr,Tg,XN=["north-west","north","north-east","west","east","south-west","south","south-east"],jR="e-resize-handle",qb="e-focused-handle",Qw=["e-restrict-left"],QN="e-resize-viewport",w6=["north","west","east","south"],RT=0,Jw=0,_T=0,JN=0,bv=0,Cv=0,Gb=null,UR=null,WR=null,LT=!0,qR=0,OT=!0;function E6(r){$R();var t=ti("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+r),"south"===r&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),"north"===r&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),"east"===r&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),"west"===r&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Kr.appendChild(t)}function GR(r){var t;return f(r)||(t="string"==typeof r?document.querySelector(r):r),t}function PT(r){f(r)&&(r=this);for(var t=Kr.querySelectorAll("."+jR),e=0;e<t.length;e++)T.add(Rl=t[e],"mousedown",KR,r),T.add(Rl,"msie"===Z.info.name?"pointerdown":"touchstart",tB,r);var n=Kr.querySelectorAll(".e-dialog-border-resize");if(!f(n))for(e=0;e<n.length;e++)T.add(Rl=n[e],"mousedown",KR,r),T.add(Rl,"msie"===Z.info.name?"pointerdown":"touchstart",tB,r)}function x6(r){return r.indexOf("mouse")>-1?"mouse":"touch"}function KR(r){if(r.preventDefault(),Kr=r.target.parentElement,$R(),bv=r.pageX,Cv=r.pageY,r.target.classList.add(qb),f(Gb)||!0!==Gb(r,this)){this.targetEle&&Kr&&Kr.querySelector(".e-dlg-resizable")&&(wr=null,xg=this.targetEle.clientWidth,wv=this.targetEle.clientHeight);var t=f(wr)?document:wr;T.add(t,"mousemove",MT,this),T.add(document,"mouseup",Kb,this);for(var e=0;e<Qw.length;e++)LT=!Kr.classList.contains(Qw[e])}}function Kb(r){var t="msie"===Z.info.name?"pointermove":"touchmove",e="msie"===Z.info.name?"pointerup":"touchend",i=f(wr)?document:wr,n="msie"===Z.info.name?"pointerdown":"touchstart";T.remove(i,"mousemove",MT),T.remove(i,t,MT),T.remove(i,n,MT),f(document.body.querySelector("."+qb))||document.body.querySelector("."+qb).classList.remove(qb),f(WR)||WR(r,this),T.remove(document,"mouseup",Kb),T.remove(document,e,Kb)}function $R(){RT=parseFloat(getComputedStyle(Kr,null).getPropertyValue("width").replace("px","")),Jw=parseFloat(getComputedStyle(Kr,null).getPropertyValue("height").replace("px","")),_T=Kr.getBoundingClientRect().left,JN=Kr.getBoundingClientRect().top}function tB(r){Kr=r.target.parentElement,$R();var t=r.touches?r.changedTouches[0]:r;if(bv=t.pageX,Cv=t.pageY,f(Gb)||!0!==Gb(r,this)){var e="msie"===Z.info.name?"pointermove":"touchmove",i="msie"===Z.info.name?"pointerup":"touchend",n=f(wr)?document:wr;T.add(n,e,MT,this),T.add(document,i,Kb)}}function MT(r){if(r.target.classList.contains(jR)&&r.target.classList.contains(qb)?Rl=r.target:f(document.body.querySelector("."+qb))||(Rl=document.body.querySelector("."+qb)),!f(Rl)){for(var t="",e=0;e<XN.length;e++)Rl.classList.contains("e-"+XN[e])&&(t=XN[e]);switch(f(UR)||UR(r,this),t){case"south":YR(r);break;case"north":ZR(r);break;case"west":XR(r);break;case"east":iB(r);break;case"south-east":YR(r),iB(r);break;case"south-west":YR(r),XR(r);break;case"north-east":ZR(r),iB(r);break;case"north-west":ZR(r),XR(r)}}}function Sv(r){return r.getBoundingClientRect()}function YR(r){var o,t=document.documentElement.clientHeight,e=!1,n=(r.touches?r.changedTouches[0]:r).pageY,s=Sv(Kr);f(wr)||(o=Sv(wr)),f(wr)?f(wr)&&(t-n>=0||s.top<0)&&(e=!0):e=!0;var a=Jw+(n-Cv);a=a>Xp?a:Xp;var l=0;f(wr)||(l=o.top);var h=f(wr)?0:wr.offsetHeight-wr.clientHeight,u=s.top-l-h/2;if(u=u<0?0:u,s.top>0&&u+a>wv){if(e=!1,Kr.classList.contains(QN))return;Kr.style.height=wv-parseInt(u.toString(),10)+"px"}else{var d=0;if(e){s.top<0&&t+(s.height+s.top)>0&&a+(d=s.top)<=30&&(a=s.height-(s.height+s.top)+30),a+s.top>=wv&&(Kr.style.height=s.height+(t-(s.height+s.top))+"px");var m=f(wr)?d:u;a>=Xp&&a+m<=wv&&(Kr.style.height=a+"px")}}}function ZR(r){var e,t=!1,i="mouse"===x6(r.type)?r.pageY:r.touches[0].pageY,n=Sv(Kr);f(wr)||(e=Sv(wr)),(!f(wr)&&n.top-e.top>0||f(wr)&&i>0)&&(t=!0);var s=Jw-(i-Cv);if(t&&s>=Xp&&s<=wv){var o=0;f(wr)||(o=e.top);var a=JN-o+(i-Cv);a=a>0?a:1,Kr.style.height=s+"px",Kr.style.top=a+"px"}}function XR(r){var i,t=document.documentElement.clientWidth,e=!1;f(wr)||(i=Sv(wr));var n="mouse"===x6(r.type)?r.pageX:r.touches[0].pageX,s=Sv(Kr),o=f(wr)?0:wr.offsetWidth-wr.clientWidth,a=f(wr)?0:i.left,l=f(wr)?0:i.width;f(Tg)&&(f(wr)?Tg=t:(Tg=s.left-a-o/2+s.width,Tg+=l-o-Tg)),(!f(wr)&&Math.floor(s.left-i.left+s.width+(i.right-s.right))-o<=xg||f(wr)&&n>=0)&&(e=!0);var h=RT-(n-bv);if(LT&&(h=h>Tg?Tg:h),e&&h>=eB&&h<=xg){var u=0;f(wr)||(u=i.left);var d=_T-u+(n-bv);d=d>0?d:1,h!==qR&&OT&&(Kr.style.width=h+"px"),LT&&(Kr.style.left=d+"px",OT=1!==d)}qR=h}function iB(r){var i,t=document.documentElement.clientWidth,e=!1;f(wr)||(i=Sv(wr));var s=(r.touches?r.changedTouches[0]:r).pageX,o=Sv(Kr);(!f(wr)&&(o.left-i.left+o.width<=xg||o.right-i.left>=o.width)||f(wr)&&t-s>0)&&(e=!0);var a=RT+(s-bv),l=0;if(f(wr)||(l=i.left),o.left-l+a>xg){if(e=!1,Kr.classList.contains(QN))return;Kr.style.width=xg-(o.left-l)+"px"}e&&a>=eB&&a<=xg&&(Kr.style.width=a+"px")}function T6(){for(var r=Kr.querySelectorAll("."+jR),t=0;t<r.length;t++)le(r[t]);var e=Kr.querySelectorAll(".e-dialog-border-resize");if(!f(e))for(t=0;t<e.length;t++)le(e[t])}var FT,QR=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Yn=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},WZ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return QR(t,r),Yn([E(!0)],t.prototype,"isFlat",void 0),Yn([E()],t.prototype,"buttonModel",void 0),Yn([E("Button")],t.prototype,"type",void 0),Yn([q()],t.prototype,"click",void 0),t}(Si),qZ=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return QR(t,r),Yn([E("Fade")],t.prototype,"effect",void 0),Yn([E(400)],t.prototype,"duration",void 0),Yn([E(0)],t.prototype,"delay",void 0),t}(Si),JR="e-dialog",nB="e-rtl",rB="e-dlg-header-content",c="e-dlg-header",p="e-footer-content",g="e-dlg-modal",w="e-icon-dlg-close",R="e-dlg-target",F="e-scroll-disabled",Se="e-device",We="e-dlg-fullscreen",wt="e-dlg-closeicon-btn",ui="e-popup-open",Ni="Information",fn="e-scroll-disabled",Lt="e-alert-dialog",En="e-confirm-dialog",Wr="e-dlg-resizable",Is="e-restrict-left",Dg="e-resize-viewport",eS="user action",_d=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.needsID=!0,n}return QR(t,r),t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),"100%"===this.width&&(this.element.style.width=""),""!==this.minHeight&&(this.element.style.minHeight=it(this.minHeight)),this.enableResize&&(this.setResize(),"None"===this.animationSettings.effect&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=eS},t.prototype.preRender=function(){var e=this;if(this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(s){e.dlgClosedBy="close icon",e.hide(s)},this.dlgOverlayClickEventHandler=function(s){e.dlgClosedBy="overlayClick",s.preventFocus=!1,e.trigger("overlayClick",s,function(o){o.preventFocus||e.focusContent(),e.dlgClosedBy=eS})},this.l10n=new es("dialog",{close:"Close"},this.locale),this.checkPositionData(),f(this.target)){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=n}},t.prototype.isNumberValue=function(e){return/^[-+]?\d*\.?\d+$/.test(e)},t.prototype.checkPositionData=function(){if(!f(this.position)){if(!f(this.position.X)&&"number"!=typeof this.position.X&&this.isNumberValue(this.position.X)){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=i}f(this.position.Y)||"number"==typeof this.position.Y||this.isNumberValue(this.position.Y)&&(i=this.isProtectedOnChange,this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=i)}},t.prototype.getEle=function(e,i){for(var n=void 0,s=0;s<e.length;s++)if(e[s].classList.contains(i)){n=e[s];break}return n},t.prototype.getMinHeight=function(){var e="0px",i="0px";f(this.element.querySelector("."+rB))||(e=getComputedStyle(this.headerContent).height);var n=this.getEle(this.element.children,p);f(n)||(i=getComputedStyle(n).height);var s=parseInt(e.slice(0,e.indexOf("p")),10),o=parseInt(i.slice(0,i.indexOf("p")),10);return function zZ(r){Xp=r}(s+30+(isNaN(o)?0:o)),s+30+o},t.prototype.onResizeStart=function(e,i){return i.trigger("resizeStart",e),e.cancel},t.prototype.onResizing=function(e,i){i.trigger("resizing",e)},t.prototype.onResizeComplete=function(e,i){i.trigger("resizeStop",e)},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!f(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Wr);for(var e=getComputedStyle(this.element).minHeight,i=getComputedStyle(this.element).minWidth,n="",s=0;s<this.resizeHandles.length;s++){if("All"===this.resizeHandles[s]){n="south north east west north-east north-west south-east south-west";break}var o="";switch(this.resizeHandles[s].toString()){case"SouthEast":o="south-east";break;case"SouthWest":o="south-west";break;case"NorthEast":o="north-east";break;case"NorthWest":o="north-west";break;default:o=this.resizeHandles[s].toString()}n+=o.toLocaleLowerCase()+" "}this.enableRtl&&"south-east"===n.trim()?n="south-west":this.enableRtl&&"south-west"===n.trim()&&(n="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(Is):this.isModal&&this.target===document.body&&this.element.classList.add(Dg),function S6(r){Gb=r.resizeBegin,UR=r.resizing,WR=r.resizeComplete,Kr=GR(r.element),wr=GR(r.boundary);for(var t=r.direction.split(" "),e=0;e<t.length;e++)if(w6.indexOf(t[e])>=0&&t[e])E6(t[e]);else if(""!==t[e].trim()){var i=ti("div",{className:"e-icons "+jR+" e-"+t[e]});Kr.appendChild(i)}Xp=r.minHeight,eB=r.minWidth,xg=r.maxWidth,wv=r.maxHeight,r.proxy&&r.proxy.element&&r.proxy.element.classList.contains("e-dialog")?PT(r.proxy):PT()}({element:this.element,direction:n,minHeight:parseInt(e.slice(0,i.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(i.slice(0,i.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else T6(),this.unWireWindowResizeEvent(),this.element.classList.remove(this.isModal?Is:Dg),this.element.classList.remove(Wr)},t.prototype.getFocusElement=function(e){var n=e.querySelectorAll('input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]');return{element:n[n.length-1]}},t.prototype.keyDown=function(e){var i=this;if(9===e.keyCode&&this.isModal){var n=void 0;f(this.btnObj)||(n=this.btnObj[this.btnObj.length-1]),f(this.btnObj)&&!f(this.ftrTemplateContent)&&(n=this.getFocusElement(this.ftrTemplateContent)),f(this.btnObj)&&f(this.ftrTemplateContent)&&!f(this.contentEle)&&(n=this.getFocusElement(this.contentEle)),!f(n)&&document.activeElement===n.element&&!e.shiftKey&&(e.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&e.shiftKey&&(e.preventDefault(),f(n)||n.element.focus())}var l,s=document.activeElement,o=["input","textarea"].indexOf(s.tagName.toLowerCase())>-1,a=!1;o||(a=s.hasAttribute("contenteditable")&&"true"===s.getAttribute("contenteditable")),27===e.keyCode&&this.closeOnEscape&&(this.dlgClosedBy="escape",document.querySelector(".e-popup-open:not(.e-dialog)")||this.hide(e)),(13===e.keyCode&&!e.ctrlKey&&"textarea"!==s.tagName.toLowerCase()&&o&&!f(this.primaryButtonEle)||13===e.keyCode&&e.ctrlKey&&("textarea"===s.tagName.toLowerCase()||a)&&!f(this.primaryButtonEle))&&this.buttons.some(function(u,d){l=d;var m=u.buttonModel;return!f(m)&&!0===m.isPrimary})&&"function"==typeof this.buttons[l].click&&setTimeout(function(){i.buttons[l].click.call(i,e)})},t.prototype.initialize=function(){f(this.target)||(this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target),this.isBlazorServerRender()||N([this.element],JR),Z.isDevice&&N([this.element],Se),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var e=this;if(this.initialRender=!0,this.isBlazorServerRender()||ze(this.element,{role:"dialog"}),1e3===this.zIndex?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&f(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&f(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),""!==this.header&&!f(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),""===this.footerTemplate||f(this.footerTemplate)?f(this.buttons[0].buttonModel)||this.setButton():this.setFooterTemplate()),this.isBlazorServerRender()&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate&&this.setButton(),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(ze(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&f(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var i=0,n=this.dlgContainer.children;i<n.length;i++)n[i].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=n[i])}if(!0!==this.element.classList.contains(Lt)&&!0!==this.element.classList.contains(En)&&!f(this.element.parentElement)){var s=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:"e-dlg-ref-element"}),s.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}f(this.targetEle)||this.targetEle.appendChild(this.isModal?this.dlgContainer:this.element),this.popupObj=new kl(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(o){var a={container:e.isModal?e.dlgContainer:e.element,element:e.element,target:e.target,preventFocus:!1};e.enableResize&&e.resetResizeIcon(),e.trigger("open",a,function(l){l.preventFocus||e.focusContent()})},close:function(o){e.isModal&&N([e.dlgOverlay],"e-fade"),e.unBindEvent(e.element),e.isModal&&(e.dlgContainer.style.display="none"),e.trigger("close",e.closeArgs);var a=document.activeElement;!f(a)&&!f(a.blur)&&a.blur(),!f(e.storeActiveElement)&&!f(e.storeActiveElement.focus)&&e.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(N([this.element],"e-popup-close"),this.isModal&&this.setOverlayZindex()),this.visible?this.show():this.isModal&&(this.dlgOverlay.style.display="none"),this.initialRender=!1},t.prototype.resetResizeIcon=function(){var e=this.getMinHeight();if(this.targetEle.offsetHeight<e){var n=this.element.querySelector("."+(this.enableRtl?"e-south-west":"e-south-east"));f(n)||(n.style.bottom="-"+e.toString()+"px")}},t.prototype.setOverlayZindex=function(e){var i;i=f(e)?parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e,this.dlgOverlay.style.zIndex=(i-1).toString(),this.dlgContainer.style.zIndex=i.toString()},t.prototype.positionChange=function(){this.isModal&&(isNaN(parseFloat(this.position.X))||isNaN(parseFloat(this.position.Y)))?!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var e=this;this.element.classList.contains("e-draggable")||(this.dragObj=new $p(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:".e-dlg-header-content",dragStart:function(n){e.trigger("dragStart",n,function(s){})},dragStop:function(n){e.isModal&&(f(e.position)||e.dlgContainer.classList.remove("e-dlg-"+e.position.X+"-"+e.position.Y),e.element.style.position="relative"),e.trigger("dragStop",n),e.element.classList.remove(Is)},drag:function(n){e.trigger("drag",n)}}),f(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var e=0;e<this.buttons.length;e++){var i=f(this.buttons[e].type)?"button":this.buttons[e].type.toLowerCase(),n=this.createElement("button",{className:this.cssClass,attrs:{type:i}});this.buttonContent.push(n.outerHTML)}this.setFooterTemplate()}e=0;for(var s,o=this.element.children;e<o.length;e++)o[e].classList.contains(p)&&(s=o[e].querySelectorAll("button"));for(e=0;e<this.buttons.length;e++)this.isBlazorServerRender()||(this.btnObj[e]=new uR(this.buttons[e].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+p)),!f(this.ftrTemplateContent)&&s.length>0&&("function"==typeof this.buttons[e].click&&T.add(s[e],"click",this.buttons[e].click,this),"object"==typeof this.buttons[e].click&&T.add(s[e],"click",this.buttonClickHandler.bind(this,e),this)),!this.isBlazorServerRender()&&!f(this.ftrTemplateContent)&&(this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]),this.buttons[e].isFlat&&this.btnObj[e].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(e){this.trigger("buttons["+e+"].click",{})},t.prototype.setContent=function(){ze(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.contentEle=this.createElement("div",{className:"e-dlg-content",id:this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!f(this.content)&&""!==this.content||!this.initialRender)&&("string"!=typeof this.content&&this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),f(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),"auto"===this.height&&(!this.isBlazorServerRender()&&Z.isIE&&""===this.element.style.width&&!f(this.width)&&(this.element.style.width=it(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(e,i,n){var s,o;o=i.classList.contains(c)?this.element.id+"header":i.classList.contains(p)?this.element.id+"footerTemplate":this.element.id+"content",f(e.outerHTML)?("string"==typeof e||"string"!=typeof e)&&("string"==typeof e&&(e=this.sanitizeHelper(e)),this.isVue||"string"!=typeof e?s=Pi(e):i.innerHTML=e):i.appendChild(e);var l=[];if(!f(s)){for(var u=0,d=s({},this,n,o,!0);u<d.length;u++)l.push(d[u]);Kt([].slice.call(l),i)}},t.prototype.sanitizeHelper=function(e){if(this.enableHtmlSanitizer){var i=Nn.beforeSanitize();he(i,i,{cancel:!1,helper:null}),this.trigger("beforeSanitizeHtml",i),i.cancel&&!f(i.helper)?e=i.helper(e):i.cancel||(e=Nn.serializeValue(i,e))}return e},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!f(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=e,Z.isIE&&"auto"===this.height&&!f(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?N([this.element],nB):z([this.element],nB)),f(this.element.querySelector(".e-resize-handle"))||(T6(),this.setResize())},t.prototype.setTargetContent=function(){var e=this;if(f(this.content)||""===this.content){var i=""!==this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"");(this.element.children.length>0||i)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(n){8!==n.nodeType&&e.innerContentElement.appendChild(n)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:c}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),ze(this.element,{"aria-labelledby":this.element.id}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:p}),""===this.footerTemplate||f(this.footerTemplate)?this.ftrTemplateContent.innerHTML=this.buttonContent.join(""):this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){f(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:rB}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:wt,attrs:{type:"button"}}),this.closeIconBtnObj=new uR({cssClass:"e-flat",iconCss:w+" e-icons"}),this.closeIconTitle(),f(this.headerContent)?(this.createHeaderContent(),mi([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):mi([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var e=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",e),this.closeIcon.setAttribute("aria-label",e)},t.prototype.setCSSClass=function(e){e&&(z([this.element],e.split(" ")),this.isModal&&!f(this.dlgContainer)&&z([this.dlgContainer],e.split(" "))),this.cssClass&&(N([this.element],this.cssClass.split(" ")),this.isModal&&!f(this.dlgContainer)&&N([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:"e-dlg-container"}),this.setCSSClass(),this.element.classList.remove(ui),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),N([this.element],g),this.dlgOverlay=this.createElement("div",{className:"e-dlg-overlay"}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(e){for(var i,n=0;n<e.length;n++){if(((i=e[n]).clientHeight>0||"a"===i.tagName.toLowerCase()&&i.hasAttribute("href"))&&i.tabIndex>-1&&!i.disabled&&!this.disableElement(i,'[disabled],[aria-disabled="true"],[type="hidden"]'))return i;i=null}return i},t.prototype.focusableElements=function(e){if(!f(e)){var n=e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]');return this.getValidFocusNode(n)}return null},t.prototype.getAutoFocusNode=function(e){var i=e.querySelector("."+wt),s=e.querySelectorAll("[autofocus]"),o=this.getValidFocusNode(s);if(f(o)){if(!f(o=this.focusableElements(this.contentEle)))return o;if(!f(this.primaryButtonEle))return this.element.querySelector(".e-primary")}else i=o;return i},t.prototype.disableElement=function(e,i){var n=e?e.matches||e.webkitMatchesSelector||e.msGetRegionContent:null;if(n)for(;e;e=e.parentNode)if(e instanceof Element&&n.call(e,i))return e;return null},t.prototype.focusContent=function(){var e=this.getAutoFocusNode(this.element),i=f(e)?this.element:e,n=Z.userAgent;(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0)&&this.element.focus(),i.focus(),this.bindEvent(this.element)},t.prototype.bindEvent=function(e){T.add(e,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(e){T.remove(e,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return!1},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(e,i){if(this.element.classList.contains(JR))for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"content":f(this.content)||""===this.content?f(this.contentEle)||(le(this.contentEle),this.contentEle=null):(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),f(this.contentEle)||"dialog"===this.contentEle.getAttribute("role")?(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-content")))&&this.setContent():(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),"function"==typeof this.content?(this.clearTemplate(["content"]),le(this.contentEle),this.contentEle=null,this.setContent()):"string"==typeof this.content?this.isBlazorServerRender()&&""===this.contentEle.innerText?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()));break;case"header":""===this.header||f(this.header)?this.headerEle&&(le(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||f(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(""===this.footerTemplate||f(this.footerTemplate)){if(!this.ftrTemplateContent)return;le(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||f(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(w).length>0?this.showCloseIcon||""!==this.header&&!f(this.header)?this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():le(this.closeIcon):(le(this.headerContent),this.headerContent=null):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":Ft(this.element,{height:it(e.height)});break;case"width":Ft(this.element,{width:it(e.width)});break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(i.cssClass);break;case"buttons":var a=this.buttons.length;!f(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(le(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)f(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break;case"allowDragging":this.allowDragging&&!f(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(e.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=f(i.position.X)?this.position.X:i.position.X,u=f(i.position.Y)?this.position.Y:i.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+u)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+u)}this.positionChange();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":""!==this.minHeight&&(this.element.style.minHeight=it(this.minHeight))}},t.prototype.setTarget=function(e){this.popupObj.relateTo=e,this.target=e,this.targetEle="string"==typeof this.target?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)f(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",f(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(z([this.element],g),z([document.body],[R,F]),le(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&T.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(e,i){var n=this.isProtectedOnChange;this.isProtectedOnChange=!0;var s=yv(e);this.zIndex=s>this.zIndex?s:this.zIndex,this.isProtectedOnChange=n,i&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){(function jZ(r){xg=r})(this.targetEle.clientWidth),function UZ(r){wv=r}(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){if(!this.isDestroyed){var e=[nB,g,Wr,Is,We,Se],i=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(z([this.targetEle],[R,F]),!f(this.element)&&this.element.classList.contains(We)&&z([document.body],[R,F]),this.isModal&&z([f(this.targetEle)?document.body:this.targetEle],F),this.unWireEvents(),!f(this.btnObj))for(var n=0;n<this.btnObj.length;n++)this.btnObj[n].destroy();if(f(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),f(this.dragObj)||this.dragObj.destroy(),!f(this.popupObj.element)&&this.popupObj.element.classList.contains("e-popup")&&this.popupObj.destroy(),z([this.element],e),!f(this.cssClass)&&""!==this.cssClass&&z([this.element],this.cssClass.split(" ")),!f(this.refElement)&&!f(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),le(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(le(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),le(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!f(this.element.children))for(n=0;n<=this.element.children.length;n++)le(this.element.children[n-=n]);for(n=0;n<i.length;n++)this.element.removeAttribute(i[n]);this.isBlazorServerRender()?this.isDestroyed=!0:r.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){window.addEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.windowResizeHandler.bind(this))},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&T.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&T.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&T.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&T.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!f(this.buttons[0].buttonModel)&&""===this.footerTemplate)for(var e=0;e<this.buttons.length;e++)"function"==typeof this.buttons[e].click&&T.remove(this.ftrTemplateContent.children[e],"click",this.buttons[e].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition()},t.prototype.getDimension=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},t.prototype.show=function(e){var i=this;if(this.element.classList.contains(JR)){if(!this.element.classList.contains(ui)||!f(e)){f(e)||this.fullScreen(e);var n={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",n,function(s){if(!s.cancel){i.element.style.maxHeight!==n.maxHeight&&(i.allowMaxHeight=!1,i.element.style.maxHeight=n.maxHeight),i.storeActiveElement=document.activeElement,i.element.tabIndex=-1,i.isModal&&!f(i.dlgOverlay)&&(i.dlgOverlay.style.display="block",i.dlgContainer.style.display="flex",z([i.dlgOverlay],"e-fade"),f(i.targetEle)?N([document.body],[R,F]):(i.dlgContainer.style.position=i.targetEle===document.body?"fixed":"absolute",i.dlgOverlay.style.position="absolute",i.element.style.position="relative",N([i.targetEle],[R,F])));var o={name:i.animationSettings.effect+"In",duration:i.animationSettings.duration,delay:i.animationSettings.delay};i.calculatezIndex&&(i.setzIndex(i.isModal?i.element.parentElement:i.element,!0),Ft(i.element,{zIndex:i.zIndex}),i.isModal&&i.setOverlayZindex(i.zIndex)),"None"===i.animationSettings.effect?i.popupObj.show():i.popupObj.show(o),i.dialogOpen=!0;var l=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!0,i.preventVisibility=!0,i.isProtectedOnChange=l}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(e){var i=this;if(this.element.classList.contains(JR)&&this.preventVisibility){var n={cancel:!1,isInteracted:!!e,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:e,closedBy:this.dlgClosedBy};this.closeArgs=n,this.trigger("beforeClose",n,function(s){if(!s.cancel){i.isModal&&(f(i.targetEle)||z([i.targetEle],[R,F])),document.body.classList.contains(R)&&document.body.classList.contains(F)&&z([document.body],[R,F]);var o={name:i.animationSettings.effect+"Out",duration:i.animationSettings.duration,delay:i.animationSettings.delay};"None"===i.animationSettings.effect?i.popupObj.hide():i.popupObj.hide(o),i.dialogOpen=!1;var a=i.isProtectedOnChange;i.isProtectedOnChange=!0,i.visible=!1,i.preventVisibility=!1,i.isProtectedOnChange=a}i.dlgClosedBy=eS})}},t.prototype.fullScreen=function(e){if(e){this.element.style.top=document.scrollingElement.scrollTop+"px",N([this.element],We);var s=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=f(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=s,N([document.body],[R,F]),this.allowDragging&&!f(this.dragObj)&&this.dragObj.destroy()}else z([this.element],We),z([document.body],[R,F]),this.allowDragging&&!f(this.headerContent)&&this.setAllowDragging();return e},t.prototype.getButtons=function(e){return f(e)?this.btnObj:this.btnObj[e]},Yn([E("")],t.prototype,"content",void 0),Yn([E(!0)],t.prototype,"enableHtmlSanitizer",void 0),Yn([E(!1)],t.prototype,"showCloseIcon",void 0),Yn([E(!1)],t.prototype,"isModal",void 0),Yn([E("")],t.prototype,"header",void 0),Yn([E(!0)],t.prototype,"visible",void 0),Yn([E(!1)],t.prototype,"enableResize",void 0),Yn([E(["South-East"])],t.prototype,"resizeHandles",void 0),Yn([E("auto")],t.prototype,"height",void 0),Yn([E("")],t.prototype,"minHeight",void 0),Yn([E("100%")],t.prototype,"width",void 0),Yn([E("")],t.prototype,"cssClass",void 0),Yn([E(1e3)],t.prototype,"zIndex",void 0),Yn([E(null)],t.prototype,"target",void 0),Yn([E("")],t.prototype,"footerTemplate",void 0),Yn([E(!1)],t.prototype,"allowDragging",void 0),Yn([wo([{}],WZ)],t.prototype,"buttons",void 0),Yn([E(!0)],t.prototype,"closeOnEscape",void 0),Yn([rn({},qZ)],t.prototype,"animationSettings",void 0),Yn([rn({X:"center",Y:"center"},VR)],t.prototype,"position",void 0),Yn([q()],t.prototype,"created",void 0),Yn([q()],t.prototype,"open",void 0),Yn([q()],t.prototype,"beforeSanitizeHtml",void 0),Yn([q()],t.prototype,"beforeOpen",void 0),Yn([q()],t.prototype,"close",void 0),Yn([q()],t.prototype,"beforeClose",void 0),Yn([q()],t.prototype,"dragStart",void 0),Yn([q()],t.prototype,"dragStop",void 0),Yn([q()],t.prototype,"drag",void 0),Yn([q()],t.prototype,"overlayClick",void 0),Yn([q()],t.prototype,"resizeStart",void 0),Yn([q()],t.prototype,"resizing",void 0),Yn([q()],t.prototype,"resizeStop",void 0),Yn([q()],t.prototype,"destroyed",void 0),Yn([si],t)}(Ji);!function(r){function i(u,d){var m=new _d(u);return m.appendTo(d),m}function o(u,d){return u.header=f(d.title)?Ni:d.title,u.content=f(d.content)?"":d.content,u.isModal=!!f(d.isModal)||d.isModal,u.showCloseIcon=!f(d.showCloseIcon)&&d.showCloseIcon,u.allowDragging=!f(d.isDraggable)&&d.isDraggable,u.closeOnEscape=!f(d.closeOnEscape)&&d.closeOnEscape,u.position=f(d.position)?{X:"center",Y:"top"}:d.position,u.animationSettings=f(d.animationSettings)?{effect:"Fade",duration:400,delay:0}:d.animationSettings,u.cssClass=f(d.cssClass)?"":d.cssClass,u.zIndex=f(d.zIndex)?1e3:d.zIndex,u.open=f(d.open)?null:d.open,u.width=f(d.width)?"auto":d.width,u.height=f(d.height)?"auto":d.height,u}function h(u,d,m){var v=m;return f(d.text)||(v.buttonModel.content=d.text),f(d.icon)||(v.buttonModel.iconCss=d.icon),f(d.cssClass)||(v.buttonModel.cssClass=d.cssClass),f(d.click)||(v.click=d.click),v}r.alert=function t(u){var m,d=ti("div",{className:Lt});return document.body.appendChild(d),m=i("string"==typeof u?{content:u,position:{X:"center",Y:"top"},isModal:!0,header:Ni,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}]}:function n(u){var d={buttons:[]};return function a(u,d){var m=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return f(d.okButton)?u.buttons=m:u.buttons[0]=h(0,d.okButton,m[0]),u}(d=o(d,u),u)}(u),d),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(fn)):m.element.remove()},m},r.confirm=function e(u){var m,d=ti("div",{className:En});return document.body.appendChild(d),m=i("string"==typeof u?{position:{X:"center",Y:"top"},content:u,isModal:!0,header:Ni,buttons:[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}]}:function s(u){var d={buttons:[]};return function l(u,d){var m={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},v={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return u.buttons[0]=f(d.okButton)?m:h(0,d.okButton,m),u.buttons[1]=f(d.cancelButton)?v:h(0,d.cancelButton,v),u}(d=o(d,u),u)}(u),d),m.close=function(){u&&u.close&&u.close.apply(m),m.destroy(),m.element.classList.contains("e-dlg-modal")?(m.element.parentElement.remove(),m.target.classList.remove(fn)):m.element.remove()},m}}(FT||(FT={}));var NT=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ds=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},D6="e-tooltip",I6="e-tooltip-wrap",KZ="e-tip-content",s_="e-arrow-tip",$Z="e-arrow-tip-outer",sB="e-arrow-tip-inner",o_="e-tip-bottom",A6="e-tip-top",YZ="e-tip-left",k6="e-tip-right",R6="e-popup",oB="e-popup-open",_6="e-popup-close",aB="e-lib",ZZ="e-tooltip-popup-container",rge=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return NT(t,r),ds([E({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),ds([E({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(Si),lB=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.mouseMoveEvent=null,n.mouseMoveTarget=null,n.containerElement=null,n.isBodyContainer=!0,n}return NT(t,r),t.prototype.initialize=function(){this.formatPosition(),N([this.element],D6),this.element.setAttribute("tabindex","0")},t.prototype.formatPosition=function(){var e,i;0===this.position.indexOf("Top")||0===this.position.indexOf("Bottom")?(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=e[0],this.tooltipPositionX=e[1]):(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=i[0],this.tooltipPositionY=i[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var e=this.createElement("div",{className:s_+" "+this.tipClass});e.appendChild(this.createElement("div",{className:$Z+" "+this.tipClass})),e.appendChild(this.createElement("div",{className:sB+" "+this.tipClass})),this.tooltipEle.appendChild(e)},t.prototype.setTipClass=function(e){this.tipClass=0===e.indexOf("Right")?YZ:0===e.indexOf("Bottom")?A6:0===e.indexOf("Left")?k6:o_},t.prototype.renderPopup=function(e){var i=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(e);this.tooltipEle.classList.remove(aB),this.popupObj=new kl(this.tooltipEle,{height:this.height,width:this.width,position:{X:i.left,Y:i.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getTooltipPosition=function(e){this.tooltipEle.style.display="block";var i=So(e,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.calculateTooltipOffset(this.position),s=this.calculateElementPosition(i,n),l=this.collisionFlipFit(e,s[0],s[1]);return this.tooltipEle.style.display="",l},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(e){if(this.popupObj&&e){var i=this.getTooltipPosition(e);this.popupObj.position={X:i.left,Y:i.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs)},t.prototype.closePopupHandler=function(){this.isReact&&!("Click"===this.opensOn&&"function"==typeof this.content)&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs)},t.prototype.calculateTooltipOffset=function(e){var i={top:0,left:0},n=this.tooltipEle.offsetWidth,s=this.tooltipEle.offsetHeight,o=re("."+s_,this.tooltipEle),a=o?o.offsetWidth:0,l=o?o.offsetHeight:0,h=this.showTipPointer?0:8,u=l/2+2+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),d=a/2+2+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(h+=2),e){case"RightTop":i.left+=a+h,i.top-=s-u;break;case"RightCenter":i.left+=a+h,i.top-=s/2;break;case"RightBottom":i.left+=a+h,i.top-=u;break;case"BottomRight":i.top+=l+h,i.left-=d;break;case"BottomCenter":i.top+=l+h,i.left-=n/2;break;case"BottomLeft":i.top+=l+h,i.left-=n-d;break;case"LeftBottom":i.left-=a+n+h,i.top-=u;break;case"LeftCenter":i.left-=a+n+h,i.top-=s/2;break;case"LeftTop":i.left-=a+n+h,i.top-=s-u;break;case"TopLeft":i.top-=s+l+h,i.left-=n-d;break;case"TopRight":i.top-=s+l+h,i.left-=d;break;default:i.top-=s+l+h,i.left-=n/2}return i.left+=this.offsetX,i.top+=this.offsetY,i},t.prototype.updateTipPosition=function(e){var i=Ke("."+s_+",."+$Z+",."+sB,this.tooltipEle);z(i,[o_,A6,YZ,k6]),this.setTipClass(e),N(i,this.tipClass)},t.prototype.adjustArrow=function(e,i,n,s){if(!1!==this.showTipPointer){var o,a;this.updateTipPosition(i),this.tooltipEle.style.display="block";var C,l=this.tooltipEle.clientWidth,h=this.tooltipEle.clientHeight,u=re("."+s_,this.tooltipEle),d=re("."+sB,this.tooltipEle),m=u.offsetWidth,v=u.offsetHeight;this.tooltipEle.style.display="",this.tipClass===o_||this.tipClass===A6?(this.tipClass===o_?(a="99.9%",d.style.top="-"+(v-2)+"px"):(a=-(v-1)+"px",d.style.top="-"+(v-6)+"px"),e&&(o=(C="Center"!==n||l>e.offsetWidth||this.mouseTrail)&&"Left"===n||!C&&"End"===this.tipPointerPosition?l-m-2+"px":C&&"Right"===n||!C&&"Start"===this.tipPointerPosition?"2px":!C||"End"!==this.tipPointerPosition&&"Start"!==this.tipPointerPosition?l/2-m/2+"px":"End"===this.tipPointerPosition?e.offsetWidth+(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2-2+"px":(this.tooltipEle.offsetWidth-e.offsetWidth)/2-m/2+2+"px")):(this.tipClass===k6?(o="99.9%",d.style.left="-"+(m-2)+"px"):(o=-(m-1)+"px",d.style.left=m-2-m+"px"),a=(C="Center"!==s||h>e.offsetHeight||this.mouseTrail)&&"Top"===s||!C&&"End"===this.tipPointerPosition?h-v-2+"px":C&&"Bottom"===s||!C&&"Start"===this.tipPointerPosition?"2px":h/2-v/2+"px"),u.style.top=a,u.style.left=o}},t.prototype.renderContent=function(e){var i=re("."+KZ,this.tooltipEle);if(this.cssClass&&N([this.tooltipEle],this.cssClass.split(" ")),e&&!f(e.getAttribute("title"))&&(e.setAttribute("data-content",e.getAttribute("title")),e.removeAttribute("title")),f(this.content))e&&!f(e.getAttribute("data-content"))&&(i.innerHTML=e.getAttribute("data-content"));else if(i.innerHTML="",this.content instanceof HTMLElement)i.appendChild(this.content);else if("string"==typeof this.content){if(this.enableHtmlSanitizer&&this.setProperties({content:Nn.sanitize(this.content)},!0),s=Pi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))if(this.enableHtmlParse)for(var o=s.length,a=0;a<o;a++)i[(Kt(s,i),"innerHTML")]=this.content;else i.textContent=this.content}else{var s;(s=Pi(this.content)({},this,"content",this.element.id+"content",void 0,void 0,i))&&Kt(s,i),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(this.isSticky){var e=this.createElement("div",{className:"e-icons e-tooltip-close"});this.tooltipEle.appendChild(e),T.add(e,Z.touchStartEvent,this.onStickyClose,this)}},t.prototype.addDescribedBy=function(e,i){var n=(e.getAttribute("aria-describedby")||"").split(/\s+/);n.indexOf(i)<0&&n.push(i),ze(e,{"aria-describedby":n.join(" ").trim(),"data-tooltip-id":i})},t.prototype.removeDescribedBy=function(e){var i=e.getAttribute("data-tooltip-id"),n=(e.getAttribute("aria-describedby")||"").split(/\s+/),s=n.indexOf(i);-1!==s&&n.splice(s,1),e.removeAttribute("data-tooltip-id");var o=n.join(" ").trim();o?e.setAttribute("aria-describedby",o):e.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(e){clearTimeout(this.autoCloseTimer),this.targetHover(e.originalEvent)},t.prototype.touchEndHandler=function(e){var i=this;this.isSticky||(this.autoCloseTimer=setTimeout(function(){i.close()},1500))},t.prototype.targetClick=function(e){var i;!f(i=this.target?U(e.target,this.target):this.element)&&(null===i.getAttribute("data-tooltip-id")?this.targetHover(e):this.isSticky||this.hideTooltip(this.animation.close,e,i))},t.prototype.targetHover=function(e){var i;if(!(f(i=this.target?U(e.target,this.target):this.element)||null!==i.getAttribute("data-tooltip-id")&&0===this.closeDelay)){for(var s=0,o=[].slice.call(Ke('[data-tooltip-id= "'+this.ctrlId+'_content"]',document));s<o.length;s++)this.restoreElement(o[s]);this.showTooltip(i,this.animation.open,e)}},t.prototype.mouseMoveBeforeOpen=function(e){this.mouseMoveEvent=e},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&T.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(e,i,n){var s=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=e,T.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:n?n.type:null,cancel:!1,target:e,event:n||null,element:this.tooltipEle,isInteracted:!f(n)},this.trigger("beforeRender",this.tooltipEventArgs,function(a){s.beforeRenderCallback(a,e,n,i)}.bind(this))},t.prototype.beforeRenderCallback=function(e,i,n,s){e.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,f(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?Ui(this.element.getAttribute("id")):Ui("tooltip"),this.tooltipEle=this.createElement("div",{className:I6+" "+R6+" "+aB,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+it(this.width)+";height:"+it(this.height)+";position:absolute;"}),this.tooltipBeforeRender(i,this),this.tooltipAfterRender(i,n,s,this)):i&&(this.adjustArrow(i,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(i,this.ctrlId+"_content"),this.renderContent(i),gr.stop(this.tooltipEle),this.reposition(i),this.tooltipAfterRender(i,n,s,this)))},t.prototype.appendContainer=function(e){"string"==typeof this.container?"body"===this.container?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=re(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer="BODY"===this.containerElement.tagName),this.isBodyContainer||N([this.containerElement],ZZ),this.containerElement.appendChild(e.tooltipEle)},t.prototype.tooltipBeforeRender=function(e,i){e&&(Z.isDevice&&N([i.tooltipEle],"e-bigger"),"auto"!==i.width&&(i.tooltipEle.style.maxWidth=it(i.width)),i.tooltipEle.appendChild(i.createElement("div",{className:KZ})),this.appendContainer(i),z([i.tooltipEle],"e-hidden"),i.addDescribedBy(e,i.ctrlId+"_content"),i.renderContent(e),N([i.tooltipEle],oB),i.showTipPointer&&i.renderArrow(),i.renderCloseIcon(),i.renderPopup(e),i.adjustArrow(e,i.position,i.tooltipPositionX,i.tooltipPositionY),gr.stop(i.tooltipEle),i.reposition(e))},t.prototype.tooltipAfterRender=function(e,i,n,s){e&&(z([s.tooltipEle],oB),N([s.tooltipEle],_6),s.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:e,event:i||null,element:s.tooltipEle,isInteracted:!f(i)},s.needTemplateReposition()&&!s.mouseTrail&&(s.tooltipEle.style.display="none"),s.trigger("beforeOpen",s.tooltipEventArgs,function(a){s.beforeOpenCallback(a,e,n,i)}.bind(s)))},t.prototype.beforeOpenCallback=function(e,i,n,s){var o=this;if(e.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(i);else{var a={name:n.effect,duration:n.duration,delay:n.delay,timingFunction:"easeOut"};"None"===n.effect&&(a=void 0),this.openDelay>0?this.showTimer=setTimeout(function(){o.mouseTrail&&T.add(i,"mousemove touchstart mouseenter",o.onMouseMove,o),o.popupObj&&(o.popupObj.show(a,i),o.mouseMoveEvent&&o.mouseTrail&&o.onMouseMove(o.mouseMoveEvent))},this.openDelay):this.popupObj&&this.popupObj.show(a,i)}s&&this.wireMouseEvents(s,i)},t.prototype.needTemplateReposition=function(){return!f(this.viewContainerRef)&&"string"!=typeof this.viewContainerRef},t.prototype.checkCollision=function(e,i,n){var s={left:i,top:n,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},o=Zp(this.tooltipEle,this.checkCollideTarget(),i,n);return o.length>0&&(s.horizontal=o.indexOf("left")>=0?"Right":o.indexOf("right")>=0?"Left":this.tooltipPositionX,s.vertical=o.indexOf("top")>=0?"Bottom":o.indexOf("bottom")>=0?"Top":this.tooltipPositionY),s},t.prototype.calculateElementPosition=function(e,i){return[this.isBodyContainer?e.left+i.left:e.left-this.containerElement.offsetLeft+i.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?e.top+i.top:e.top-this.containerElement.offsetTop+i.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(e,i,n){var s=this.checkCollision(e,i,n),o=s.position;this.tooltipPositionY!==s.vertical&&(o=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?s.vertical+this.tooltipPositionX:this.tooltipPositionX+s.vertical),this.tooltipPositionX!==s.horizontal&&(0===o.indexOf("Left")&&(s.vertical="LeftTop"===o||"LeftCenter"===o?"Top":"Bottom",o=s.vertical+"Left"),0===o.indexOf("Right")&&(s.vertical="RightTop"===o||"RightCenter"===o?"Top":"Bottom",o=s.vertical+"Right"),s.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:e,event:null,element:this.tooltipEle,collidedPosition:o},this.trigger("beforeCollision",this.tooltipEventArgs);var a=s.vertical,l=s.horizontal;if(s.position!==o){var h=So(e,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(e,o,l,a);var u=this.calculateTooltipOffset(o);u.top-=this.getOffSetPosition("TopBottom",o,this.offsetY),u.left-=this.getOffSetPosition("RightLeft",o,this.offsetX),s.position=o;var d=this.calculateElementPosition(h,u);s.left=d[0],s.top=d[1]}else this.adjustArrow(e,o,l,a);var m={left:s.left,top:s.top},v=this.isBodyContainer?_R(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:!1},m).left:m.left;if(this.tooltipEle.style.display="block",this.showTipPointer&&(0===o.indexOf("Bottom")||0===o.indexOf("Top"))){var C=re("."+s_,this.tooltipEle),S=parseInt(C.style.left,10)-(v-s.left);S<0?S=0:S+C.offsetWidth>this.tooltipEle.clientWidth&&(S=this.tooltipEle.clientWidth-C.offsetWidth),C.style.left=S.toString()+"px"}return this.tooltipEle.style.display="",m.left=v,m},t.prototype.getOffSetPosition=function(e,i,n){return-1!==e.indexOf(this.position.split(/(?=[A-Z])/)[0])&&-1!==e.indexOf(i.split(/(?=[A-Z])/)[0])?2*n:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(e,i,n){var s=this;this.closeDelay>0?(clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout(function(){s.closeDelay&&s.tooltipEle&&s.isTooltipOpen||s.tooltipHide(e,i,n)},this.closeDelay)):this.tooltipHide(e,i,n)},t.prototype.tooltipHide=function(e,i,n){var o,s=this;o=i?this.target?n||i.target:this.element:re('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:i?i.type:null,cancel:!1,target:o,event:i||null,element:this.tooltipEle,isInteracted:!f(i)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?s.isHidden=!1:(s.mouseMoveBeforeRemove(),s.popupHide(e,o))})},t.prototype.popupHide=function(e,i){i&&this.restoreElement(i),this.isHidden=!0;var n={name:e.effect,duration:e.duration,delay:e.delay,timingFunction:"easeIn"};"None"===e.effect&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(e){this.unwireMouseEvents(e),f(e.getAttribute("data-content"))||(e.setAttribute("title",e.getAttribute("data-content")),e.removeAttribute("data-content")),this.removeDescribedBy(e)},t.prototype.clear=function(){this.tooltipEle&&(z([this.tooltipEle],_6),N([this.tooltipEle],oB)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Be(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(e){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(e){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,e,this.findTarget())},t.prototype.onMouseOut=function(e){var i=e.relatedTarget;if(i&&!this.mouseTrail){var n=U(i,"."+I6+"."+aB+"."+R6);n?T.add(n,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,e,this.findTarget()),0===this.closeDelay&&this.clear())}else this.hideTooltip(this.animation.close,e,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(e){this.hideTooltip(this.animation.close,e,this.findTarget()),T.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(e){this.close()},t.prototype.onMouseMove=function(e){var i=0,n=0;e.type.indexOf("touch")>-1?(e.preventDefault(),i=e.touches[0].pageX,n=e.touches[0].pageY):(i=e.pageX,n=e.pageY),gr.stop(this.tooltipEle),z([this.tooltipEle],_6),N([this.tooltipEle],oB),this.adjustArrow(e.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var s=this.calculateTooltipOffset(this.position),l=this.checkCollision(e.target,i+s.left+this.offsetX,n+s.top+this.offsetY);if(this.tooltipPositionX!==l.horizontal||this.tooltipPositionY!==l.vertical){var h=0===this.position.indexOf("Bottom")||0===this.position.indexOf("Top")?l.vertical+l.horizontal:l.horizontal+l.vertical;l.position=h,this.adjustArrow(e.target,l.position,l.horizontal,l.vertical);var u=this.calculateTooltipOffset(l.position);l.left=i+u.left-this.offsetX,l.top=n+u.top-this.offsetY}this.tooltipEle.style.left=l.left+"px",this.tooltipEle.style.top=l.top+"px"},t.prototype.keyDown=function(e){this.tooltipEle&&27===e.keyCode&&this.close()},t.prototype.touchEnd=function(e){this.tooltipEle&&null===U(e.target,"."+D6)&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(e){this.tooltipEle&&(U(e.target,"."+I6+"."+aB+"."+R6)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=o_,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.wireFocusEvents(),T.add(this.element,"DOMNodeInserted",this.updateTarget,this)),"Click"===o&&T.add(this.element,Z.touchStartEvent,this.targetClick,this),"Hover"===o&&(Z.isDevice?(this.touchModule=new Ja(this.element,{tapHoldThreshold:500,tapHold:this.tapHoldHandler.bind(this)}),T.add(this.element,Z.touchEndEvent,this.touchEndHandler,this)):T.add(this.element,"mouseover",this.targetHover,this))}T.add(document,"touchend",this.touchEnd,this),T.add(document,"scroll wheel",this.scrollHandler,this),T.add(window,"resize",this.windowResize,this),T.add(document,"keydown",this.keyDown,this)},t.prototype.updateTarget=function(e){f(this.targetsList)||f(this.target)||[].slice.call(Ke(this.target,this.element)).length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))},t.prototype.getTriggerList=function(e){return"Auto"===e&&(e=Z.isDevice?"Hover":"Hover Focus"),e.split(" ")},t.prototype.wireFocusEvents=function(){if(f(this.target))T.add(this.element,"focus",this.targetHover,this);else{var e=[].slice.call(Ke(this.target,this.element));this.targetsList=e;for(var i=0,n=e;i<n.length;i++){var s=n[i];s.setAttribute("tabindex","0"),T.add(s,"focus",this.targetHover,this)}}},t.prototype.wireMouseEvents=function(e,i){this.tooltipEle&&(this.isSticky||("focus"===e.type&&T.add(i,"blur",this.onMouseOut,this),"mouseover"===e.type&&T.add(i,"mouseleave",this.onMouseOut,this),this.closeDelay&&(T.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),T.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&0===this.openDelay&&T.add(i,"mousemove touchstart mouseenter",this.onMouseMove,this),i.setAttribute("tabindex","0"))},t.prototype.unwireEvents=function(e){for(var n=0,s=this.getTriggerList(e);n<s.length;n++){var o=s[n];if("Custom"===o)return;"Focus"===o&&(this.unwireFocusEvents(),T.remove(this.element,"DOMNodeInserted",this.updateTarget)),"Click"===o&&T.remove(this.element,Z.touchStartEvent,this.targetClick),"Hover"===o&&(Z.isDevice?(this.touchModule&&this.touchModule.destroy(),T.remove(this.element,Z.touchEndEvent,this.touchEndHandler)):T.remove(this.element,"mouseover",this.targetHover))}T.remove(document,"touchend",this.touchEnd),T.remove(document,"scroll wheel",this.scrollHandler),T.remove(window,"resize",this.windowResize),T.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(f(this.target))T.remove(this.element,"focus",this.targetHover);else for(var i=0,n=[].slice.call(Ke(this.target,this.element));i<n.length;i++){var s=n[i];s.removeAttribute("tabindex"),T.remove(s,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(e){if(!this.isSticky){for(var n=0,s=this.getTriggerList(this.opensOn);n<s.length;n++){var o=s[n];"Focus"===o&&T.remove(e,"blur",this.onMouseOut),"Hover"===o&&!Z.isDevice&&T.remove(e,"mouseleave",this.onMouseOut)}this.closeDelay&&(T.remove(e,"mouseenter",this.tooltipHover),T.remove(e,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&T.remove(e,"mousemove touchstart mouseenter",this.onMouseMove),e.removeAttribute("tabindex")},t.prototype.findTarget=function(){return re('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(e,i){for(var n=this.findTarget(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"width":this.tooltipEle&&n&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=it(e.width),this.reposition(n));break;case"height":this.tooltipEle&&n&&(this.tooltipEle.style.height=it(e.height),this.reposition(n));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(i.opensOn),this.wireEvents(e.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&n){var l=re("."+sB,this.tooltipEle);l.style.top=l.style.left=null,this.reposition(n)}break;case"tipPointerPosition":this.tooltipEle&&n&&this.reposition(n);break;case"offsetX":if(this.tooltipEle){var h=e.offsetX-i.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var u=e.offsetY-i.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+u).toString()+"px"}break;case"cssClass":this.tooltipEle&&(i.cssClass&&z([this.tooltipEle],i.cssClass.split(" ")),e.cssClass&&N([this.tooltipEle],e.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?N([this.tooltipEle],"e-rtl"):z([this.tooltipEle],"e-rtl"));break;case"container":f(this.containerElement)||z([this.containerElement],ZZ),this.container=e.container,this.tooltipEle&&n&&(this.appendContainer(this),this.reposition(n))}},t.prototype.open=function(e,i){f(i)&&(i=this.animation.open),f(e)&&(e=this.element),"none"!==e.style.display&&this.showTooltip(e,i)},t.prototype.close=function(e){e||(e=this.animation.close),this.hideTooltip(e)},t.prototype.refresh=function(e){this.tooltipEle&&this.renderContent(e),this.popupObj&&e&&this.reposition(e)},t.prototype.destroy=function(){r.prototype.destroy.call(this),this.tooltipEle&&Be(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),z([this.element],D6),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null},ds([E("auto")],t.prototype,"width",void 0),ds([E("auto")],t.prototype,"height",void 0),ds([E()],t.prototype,"content",void 0),ds([E("body")],t.prototype,"container",void 0),ds([E()],t.prototype,"target",void 0),ds([E("TopCenter")],t.prototype,"position",void 0),ds([E(0)],t.prototype,"offsetX",void 0),ds([E(0)],t.prototype,"offsetY",void 0),ds([E(!0)],t.prototype,"showTipPointer",void 0),ds([E(!0)],t.prototype,"enableHtmlParse",void 0),ds([E(!1)],t.prototype,"windowCollision",void 0),ds([E("Auto")],t.prototype,"tipPointerPosition",void 0),ds([E("Auto")],t.prototype,"opensOn",void 0),ds([E(!1)],t.prototype,"mouseTrail",void 0),ds([E(!1)],t.prototype,"isSticky",void 0),ds([rn({},rge)],t.prototype,"animation",void 0),ds([E(0)],t.prototype,"openDelay",void 0),ds([E(0)],t.prototype,"closeDelay",void 0),ds([E()],t.prototype,"cssClass",void 0),ds([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),ds([q()],t.prototype,"beforeRender",void 0),ds([q()],t.prototype,"beforeOpen",void 0),ds([q()],t.prototype,"afterOpen",void 0),ds([q()],t.prototype,"beforeClose",void 0),ds([q()],t.prototype,"afterClose",void 0),ds([q()],t.prototype,"beforeCollision",void 0),ds([q()],t.prototype,"created",void 0),ds([q()],t.prototype,"destroyed",void 0),ds([si],t)}(Ji),_l={},a_="e-spin-show",l_="e-spin-hide",QZ="e-spin-material",JZ="e-spin-fabric",eX="e-spin-fluent",tX="e-spin-tailwind",uge="e-spin-bootstrap",iX="e-spin-bootstrap4",nX="e-spin-bootstrap5",rX="e-spin-high-contrast",hB="e-spinner-pane",L6="e-spinner-inner",uB="e-path-circle",cB="e-spin-template";function kc(r,t){if(r.target){var e,i=f(t)?ti:t,n=function _ge(r,t){var e=t("div",{}),i=t("div",{});return e.classList.add(hB),i.classList.add(L6),r.appendChild(e),e.appendChild(i),{wrap:e,inner_wrap:i}}(r.target,i);if(f(r.cssClass)||n.wrap.classList.add(r.cssClass),f(r.template)&&f(null)){var o=f(r.type)?function Sge(r){return window.getComputedStyle(r,":after").getPropertyValue("content").replace(/['"]+/g,"")}(n.wrap):r.type;e=function kge(r,t){var e;switch(t){case"Material":case"Fabric":case"Tailwind":case"Tailwind-dark":case"Fluent":default:e=30;break;case"Bootstrap4":case"Bootstrap5":e=36}return r=r?parseFloat(r+""):e,"Bootstrap"===t?r:r/2}(f(r.width)?void 0:r.width,o),function sX(r,t,e,i){var n=t.querySelector("."+L6),s=n.querySelector("svg");switch(f(s)||n.removeChild(s),r){case"Material":!function fge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Material",radius:t},P6(r,i,0,QZ),M6(t,r,"Material",QZ)}(n,e);break;case"Fabric":!function yge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Fabric",radius:t},pB(r,i,JZ),fB(t,r,JZ)}(n,e);break;case"Fluent":!function bge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Fluent",radius:t},pB(r,i,eX),fB(t,r,eX)}(n,e);break;case"Bootstrap":!function Ege(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Bootstrap",radius:t},function xge(r,t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=64,s=32,o=2;i.setAttribute("id",t),i.setAttribute("class",uge),i.setAttribute("viewBox","0 0 "+n+" "+n),r.insertBefore(i,r.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",uB+"_"+a),l.setAttribute("r",o+""),l.setAttribute("transform","translate("+s+","+s+")"),i.appendChild(l)}}(r,i),function Tge(r,t){var e=r.querySelector("svg.e-spin-bootstrap"),i=0,n=0,s=24;e.style.width=e.style.height=t+"px";for(var o=90,a=0;a<=7;a++){var l=F6(i,n,s,o),h=e.querySelector("."+uB+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),o=o>=360?0:o,o+=45}}(r,t)}(n,e);break;case"HighContrast":!function wge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"HighContrast",radius:t},pB(r,i,rX),fB(t,r,rX)}(n,e);break;case"Bootstrap4":!function gge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Bootstrap4",radius:t},P6(r,i,0,iX),M6(t,r,"Bootstrap4",iX)}(n,e);break;case"Bootstrap5":!function mge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Bootstrap5",radius:t},P6(r,i,0,nX),M6(t,r,"Bootstrap5",nX)}(n,e);break;case"Tailwind":case"Tailwind-dark":!function Cge(r,t,e){var i=Yb();_l[i]={timeOut:0,type:"Tailwind",radius:t},pB(r,i,tX),fB(t,r,tX)}(n,e)}}(o,n.wrap,e),f(r.label)||function pge(r,t,e){var i=e("div",{});i.classList.add("e-spin-label"),i.innerHTML=t,r.appendChild(i)}(n.inner_wrap,r.label,i)}else{var s=f(r.template)?null:r.template;n.wrap.classList.add(cB),function Age(r,t,e){f(e)||r.classList.add(e),r.querySelector(".e-spinner-inner").innerHTML=t}(n.wrap,s,null)}n.wrap.classList.add(l_),n=null}}function Dge(r,t){var e=[],i=r,n=t,s=!1,o=1;return function a(l){e.push(l),(l!==n||1===o)&&(l<=i&&l>1&&!s?l=parseFloat((l-.2).toFixed(2)):1===l?(l=7,l=parseFloat((l+.2).toFixed(2)),s=!0):l<8&&s?8===(l=parseFloat((l+.2).toFixed(2)))&&(s=!1):l<=8&&!s&&(l=parseFloat((l-.2).toFixed(2))),++o,a(l))}(i),e}function Yb(){for(var r="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)r+=t.charAt(Math.floor(Math.random()*t.length));return r}function pB(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("id",t),n.setAttribute("class",e);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",uB);var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("class","e-path-arc"),r.insertBefore(n,r.firstChild),n.appendChild(s),n.appendChild(o)}function P6(r,t,e,i){var n=document.createElementNS("http://www.w3.org/2000/svg","svg"),s=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",i),n.setAttribute("id",t),s.setAttribute("class",uB),r.insertBefore(n,r.firstChild),n.appendChild(s)}function oX(r){(function Lge(r,t,e,i,n,s,o){var a=++o.globalInfo[o.uniqueID].previousId,l=(new Date).getTime(),h=t-r,u=function Oge(r){return parseFloat(r)}(2*o.globalInfo[o.uniqueID].radius+""),d=aX(u),m=-90*(o.globalInfo[o.uniqueID].count||0);!function v(S){var A=Math.max(0,Math.min((new Date).getTime()-l,i));(function C(S,A){if(!f(A.querySelector("svg.e-spin-material"))&&!f(A.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))){var M=A.querySelector("svg.e-spin-material").querySelector("path.e-path-circle");M.setAttribute("stroke-dashoffset",lX(u,d,S,s)+""),M.setAttribute("transform","rotate("+m+" "+u/2+" "+u/2+")")}})(e(A,r,h,i),S.container),a===S.globalInfo[S.uniqueID].previousId&&A<i?_l[S.uniqueID].timeOut=setTimeout(v.bind(null,S),1):oX(S)}(o)})(1,149,Mge,1333,0,75,r),r.globalInfo[r.uniqueID].count=++r.globalInfo[r.uniqueID].count%4}function M6(r,t,e,i){var n=2*r,s=t.querySelector("svg."+i),o=s.querySelector("path.e-path-circle"),a=aX(n),l=n/2+"px";s.setAttribute("viewBox","0 0 "+n+" "+n),s.style.width=s.style.height=n+"px",s.style.transformOrigin=l+" "+l+" "+l,o.setAttribute("d",function Pge(r,t){var e=r/2,i=t/2;return"M"+e+","+i+"A"+(e-i)+","+(e-i)+" 0 1 1 "+i+","+e}(n,a)),"Material"===e&&(o.setAttribute("stroke-width",a+""),o.setAttribute("stroke-dasharray",(n-a)*Math.PI*.75+""),o.setAttribute("stroke-dashoffset",lX(n,a,1,75)+""))}function aX(r){return.1*r}function lX(r,t,e,i){return(r-t)*Math.PI*(3*i/100-e/100)}function Mge(r,t,e,i){var n=(r/=i)*r,s=n*r;return t+e*(6*s*n+-15*n*n+10*s)}function fB(r,t,e){var i=r,n=r,s=2*r,l=t.querySelector("."+e),h=l.querySelector(".e-path-circle"),u=l.querySelector(".e-path-arc"),d=s/2+"px";h.setAttribute("d",function Nge(r,t,e){return["M",r,t,"m",-e,0,"a",e,e,0,1,0,2*e,0,"a",e,e,0,1,0,2*-e,0].join(" ")}(i,n,r)),u.setAttribute("d",function Fge(r,t,e,i,n){var s=F6(r,t,e,n),o=F6(r,t,e,i);return["M",s.x,s.y,"A",e,e,0,0,0,o.x,o.y].join(" ")}(i,n,r,315,45)),l.setAttribute("viewBox","0 0 "+s+" "+s),l.style.transformOrigin=d+" "+d+" "+d,l.style.width=l.style.height=s+"px"}function F6(r,t,e,i){var n=(i-90)*Math.PI/180;return{x:r+e*Math.cos(n),y:t+e*Math.sin(n)}}function rh(r){hX(r,!1),r=null}function hX(r,t){var e;if(r&&(e=r.classList.contains(hB)?r:r.querySelector("."+hB)),r&&e){var i=e.querySelector("."+L6);if(t?!e.classList.contains(cB)&&!e.classList.contains(l_):!e.classList.contains(cB)&&!e.classList.contains(a_)){var s=e.querySelector("svg");if(f(s))return;var o=s.getAttribute("id");switch(_l[o].isAnimate=!t,_l[o].type){case"Material":t?clearTimeout(_l[o].timeOut):function vge(r,t,e){var i={};_l[t].timeOut=0,i[t]=function Rge(r,t,e,i){return{radius:t,count:e,previousId:i}}(0,e,0,0),oX({uniqueID:t,container:r,globalInfo:i,timeOutVar:0})}(i,o,_l[o].radius);break;case"Bootstrap":t?clearTimeout(_l[o].timeOut):function Ige(r){for(var e=r.querySelector("svg.e-spin-bootstrap").getAttribute("id"),i=1;i<=8;i++)s(r.getElementsByClassName("e-path-circle_"+(8===i?0:i))[0],i,0,Dge(i,i),e);function s(o,a,l,h,u){var d=0;!function m(v){_l[u].isAnimate&&(++d,o.setAttribute("r",v+""),d>=h.length&&(d=0),_l[u].timeOut=setTimeout(m.bind(null,h[d]),18))}(a)}}(i)}}t?ri(e,[l_],[a_]):ri(e,[a_],[l_]),r=null}}function Ll(r){hX(r,!0),r=null}function zge(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}function Zb(r,t,e){void 0===t&&(t=!1),void 0===e&&(e={});var i=r("div",{className:"e-checkbox-wrapper e-css"});if(e.cssClass&&N([i],e.cssClass.split(" ")),e.enableRtl&&i.classList.add("e-rtl"),t){var n=r("span",{className:"e-ripple-container"});$i(n,{isCenterRipple:!0,duration:400}),i.appendChild(n)}var s=r("span",{className:"e-frame e-icons"});if(e.checked&&s.classList.add("e-check"),i.appendChild(s),e.label){var o=r("span",{className:"e-label"});e.disableHtmlEncode?o.textContent=e.label:o.innerHTML=e.label,i.appendChild(o)}return i}function gB(r,t){if(t){var e=document.createEvent("MouseEvents");e.initEvent(r.type,!1,!0),t.dispatchEvent(e)}}var Wge=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Jp=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ld_RTL=(new Up,"e-rtl"),tS=function(r){function t(e,i){return r.call(this,e,i)||this}return Wge(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=$i(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?Nn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Ld_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Ld_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&le(i),this.unWireEvents(),ir&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):le(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&le(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Ld_RTL):this.element.classList.remove(Ld_RTL);break;case"content":zge(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=Nn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Jp([E("Left")],t.prototype,"iconPosition",void 0),Jp([E("")],t.prototype,"iconCss",void 0),Jp([E(!1)],t.prototype,"disabled",void 0),Jp([E(!1)],t.prototype,"isPrimary",void 0),Jp([E("")],t.prototype,"cssClass",void 0),Jp([E("")],t.prototype,"content",void 0),Jp([E(!1)],t.prototype,"isToggle",void 0),Jp([E()],t.prototype,"locale",void 0),Jp([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Jp([q()],t.prototype,"created",void 0),Jp([si],t)}(Ji),qge=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Rc=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},B6="e-check",cX="e-checkbox-disabled",h_="e-frame",H6="e-stop",V6="e-label",mB="e-ripple-container",z6="e-ripple-check",j6="e-ripple-stop",U6="e-rtl",W6="e-checkbox-wrapper",Gge=["title","class","style","disabled","readonly","name","value"],dX=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isFocused=!1,n.isMouseClick=!1,n.clickTriggered=!1,n.validCheck=!0,n}return qge(t,r),t.prototype.changeState=function(e){var i,n=this.getWrapper().getElementsByClassName(h_)[0];ir&&(i=this.getWrapper().getElementsByClassName(mB)[0]),"check"===e?(n.classList.remove(H6),n.classList.add(B6),i&&(i.classList.remove(j6),i.classList.add(z6)),this.element.checked=!0,this.element.required&&this.validCheck?(this.element.checked=!1,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):"uncheck"===e?(z([n],[B6,H6]),i&&z([i],[z6,j6]),this.element.checked=!1,this.element.required&&this.validCheck?(this.element.checked=!0,this.validCheck=!1):this.element.required&&(this.validCheck=!0)):(n.classList.remove(B6),n.classList.add(H6),i&&(i.classList.remove(z6),i.classList.add(j6)),this.element.indeterminate=!0)},t.prototype.clickHandler=function(e){if("INPUT"===e.target.tagName&&this.clickTriggered)return this.isVue&&this.changeState(this.checked?"check":"uncheck"),void(this.clickTriggered=!1);("SPAN"===e.target.tagName||"LABEL"===e.target.tagName)&&(this.clickTriggered=!0),this.isMouseClick&&(this.focusOutHandler(),this.isMouseClick=!1),this.indeterminate?(this.changeState(this.checked?"check":"uncheck"),this.indeterminate=!1,this.element.indeterminate=!1):this.checked?(this.changeState("uncheck"),this.checked=!1):(this.changeState("check"),this.checked=!0);var i={checked:this.updateVueArrayModel(!1),event:e};this.trigger("change",i),e.stopPropagation()},t.prototype.destroy=function(){var e=this,i=this.getWrapper();r.prototype.destroy.call(this),this.wrapper&&(i=this.wrapper,this.disabled||this.unWireEvents(),"INPUT"===this.tagName?(this.getWrapper()&&i.parentNode&&i.parentNode.insertBefore(this.element,i),le(i),this.element.checked=!1,this.indeterminate&&(this.element.indeterminate=!1),["name","value","disabled"].forEach(function(n){e.element.removeAttribute(n)})):(["class"].forEach(function(n){i.removeAttribute(n)}),i.innerHTML=""))},t.prototype.focusHandler=function(){this.isFocused=!0},t.prototype.focusOutHandler=function(){var e=this.getWrapper();e&&e.classList.remove("e-focus"),this.isFocused=!1},t.prototype.getModuleName=function(){return"checkbox"},t.prototype.getPersistData=function(){return this.addOnPersist(["checked","indeterminate"])},t.prototype.getWrapper=function(){return this.element&&this.element.parentElement?this.element.parentElement.parentElement:null},t.prototype.initialize=function(){f(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.name&&this.element.setAttribute("name",this.name),this.value&&(this.element.setAttribute("value",this.value),this.isVue&&"boolean"==typeof this.value&&!0===this.value&&this.setProperties({checked:!0},!0)),this.checked&&this.changeState("check"),this.indeterminate&&this.changeState(),this.disabled&&this.setDisabled()},t.prototype.initWrapper=function(){var e=this.element.parentElement;e.classList.contains(W6)||(e=this.createElement("div",{className:W6}),this.element.parentNode.insertBefore(e,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}}),n=this.createElement("span",{className:"e-icons "+h_});if(e.classList.add("e-wrapper"),this.enableRtl&&e.classList.add(U6),this.cssClass&&N([e],this.cssClass.split(" ")),e.appendChild(i),i.appendChild(this.element),function uX(r,t){r.element.getAttribute("ejs-for")&&t.appendChild(r.createElement("input",{attrs:{name:r.name||r.element.name,value:"false",type:"hidden"}}))}(this,i),i.appendChild(n),ir){var s=this.createElement("span",{className:mB});"Before"===this.labelPosition?i.appendChild(s):i.insertBefore(s,n),$i(s,{duration:400,isCenterRipple:!0})}this.label&&this.setText(this.label)},t.prototype.keyUpHandler=function(){this.isFocused&&this.getWrapper().classList.add("e-focus")},t.prototype.labelMouseDownHandler=function(e){this.isMouseClick=!0,gB(e,this.getWrapper().getElementsByClassName(mB)[0])},t.prototype.labelMouseUpHandler=function(e){this.isMouseClick=!0;var i=this.getWrapper().getElementsByClassName(mB)[0];if(i){for(var n=i.querySelectorAll(".e-ripple-element"),s=0;s<n.length-1;s++)i.removeChild(i.childNodes[s]);gB(e,i)}},t.prototype.onPropertyChanged=function(e,i){for(var n=this.getWrapper(),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"checked":this.indeterminate=!1,this.element.indeterminate=!1,this.changeState(e.checked?"check":"uncheck");break;case"indeterminate":e.indeterminate?this.changeState():(this.element.indeterminate=!1,this.changeState(this.checked?"check":"uncheck"));break;case"disabled":e.disabled?(this.setDisabled(),this.wrapper=this.getWrapper(),this.unWireEvents()):(this.element.disabled=!1,n.classList.remove(cX),n.setAttribute("aria-disabled","false"),this.wireEvents());break;case"cssClass":i.cssClass&&z([n],i.cssClass.split(" ")),e.cssClass&&N([n],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?n.classList.add(U6):n.classList.remove(U6);break;case"label":this.setText(e.label);break;case"labelPosition":var l=n.getElementsByClassName(V6)[0],h=n.getElementsByTagName("label")[0];le(l),"After"===e.labelPosition?h.appendChild(l):h.insertBefore(l,n.getElementsByClassName(h_)[0]);break;case"name":this.element.setAttribute("name",e.name);break;case"value":if(this.isVue&&"object"==typeof e.value)break;this.element.setAttribute("value",e.value);break;case"htmlAttributes":this.updateHtmlAttributeToWrapper()}},t.prototype.preRender=function(){var e=this.element;this.tagName=this.element.tagName,e=function N6(r,t,e,i,n,s){var o=i;if(i.tagName===t){var a=Q("ej2_instances",i);o=r("input",{attrs:{type:e}});for(var l=["change","cssClass","label","labelPosition","id"],h=0,u=i.attributes.length;h<u;h++)-1===l.indexOf(i.attributes[h].nodeName)&&o.setAttribute(i.attributes[h].nodeName,i.attributes[h].nodeValue);ze(i,{class:n}),i.appendChild(o),Nt("ej2_instances",a,o),Xh(i,"ej2_instances")}return o}(this.createElement,"EJS-CHECKBOX","checkbox",e,W6),this.element=e,"checkbox"!==this.element.getAttribute("type")&&this.element.setAttribute("type","checkbox"),this.element.id||(this.element.id=Ui("e-"+this.getModuleName()))},t.prototype.render=function(){this.initWrapper(),this.initialize(),this.disabled||this.wireEvents(),this.updateHtmlAttributeToWrapper(),this.updateVueArrayModel(!0),this.renderComplete(),this.wrapper=this.getWrapper()},t.prototype.setDisabled=function(){var e=this.getWrapper();this.element.disabled=!0,e.classList.add(cX),e.setAttribute("aria-disabled","true")},t.prototype.setText=function(e){var i=this.getWrapper();if(i){var n=i.getElementsByClassName(V6)[0];if(n)n.textContent=e;else{e=this.enableHtmlSanitizer?Nn.sanitize(e):e,n=this.createElement("span",{className:V6,innerHTML:e});var s=i.getElementsByTagName("label")[0];"Before"===this.labelPosition?s.insertBefore(n,i.getElementsByClassName(h_)[0]):s.appendChild(n)}}},t.prototype.changeHandler=function(e){e.stopPropagation()},t.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.element.checked=this.initialCheckedValue},t.prototype.unWireEvents=function(){var e=this.wrapper;T.remove(e,"click",this.clickHandler),T.remove(this.element,"keyup",this.keyUpHandler),T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"focusout",this.focusOutHandler);var i=e.getElementsByTagName("label")[0];T.remove(i,"mousedown",this.labelMouseDownHandler),T.remove(i,"mouseup",this.labelMouseUpHandler);var n=U(this.element,"form");n&&T.remove(n,"reset",this.formResetHandler),"EJS-CHECKBOX"===this.tagName&&T.remove(this.element,"change",this.changeHandler)},t.prototype.wireEvents=function(){var e=this.getWrapper();T.add(e,"click",this.clickHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this);var i=e.getElementsByTagName("label")[0];T.add(i,"mousedown",this.labelMouseDownHandler,this),T.add(i,"mouseup",this.labelMouseUpHandler,this);var n=U(this.element,"form");n&&T.add(n,"reset",this.formResetHandler,this),"EJS-CHECKBOX"===this.tagName&&T.add(this.element,"change",this.changeHandler,this)},t.prototype.updateVueArrayModel=function(e){if(this.isVue&&"object"==typeof this.value){var i=this.element.value;if(i&&this.value){if(!e){var s=this.value.indexOf(i);return this.checked?s<0&&this.value.push(i):s>-1&&this.value.splice(s,1),this.value}for(var n=0;n<this.value.length;n++)i===this.value[n]&&(this.changeState("check"),this.setProperties({checked:!0},!0))}}return this.validCheck?this.element.checked:!this.element.checked},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(Gge.indexOf(n)>-1){var s=this.getWrapper();"class"===n?N([s],this.htmlAttributes[n].split(" ")):"title"===n?s.setAttribute(n,this.htmlAttributes[n]):"style"===n?this.getWrapper().getElementsByClassName(h_)[0].setAttribute(n,this.htmlAttributes[n]):this.element.setAttribute(n,this.htmlAttributes[n])}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Rc([q()],t.prototype,"change",void 0),Rc([q()],t.prototype,"created",void 0),Rc([E(!1)],t.prototype,"checked",void 0),Rc([E("")],t.prototype,"cssClass",void 0),Rc([E(!1)],t.prototype,"disabled",void 0),Rc([E(!1)],t.prototype,"indeterminate",void 0),Rc([E("")],t.prototype,"label",void 0),Rc([E("After")],t.prototype,"labelPosition",void 0),Rc([E("")],t.prototype,"name",void 0),Rc([E("")],t.prototype,"value",void 0),Rc([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),Rc([E({})],t.prototype,"htmlAttributes",void 0),Rc([si],t)}(Ji);new Up;var ke;!function(r){var t,e=!0;function n(ue){s(ue.floatLabelType,ue.element),ue.element.addEventListener("focus",function(){var Ae=S(this);(Ae.classList.contains("e-input-group")||Ae.classList.contains("e-outline")||Ae.classList.contains("e-filled"))&&Ae.classList.add("e-input-focus"),setTimeout(function(){r.calculateWidth(ue.element,Ae)},80)}),ue.element.addEventListener("blur",function(){var Ae=S(this);(Ae.classList.contains("e-input-group")||Ae.classList.contains("e-outline")||Ae.classList.contains("e-filled"))&&Ae.classList.remove("e-input-focus"),setTimeout(function(){r.calculateWidth(ue.element,Ae)},80)}),ue.element.addEventListener("input",function(){s(t,ue.element)})}function s(ue,Ae){var St=Ae.value;""!==St&&!f(St)&&Ae.parentElement?Ae.parentElement.classList.add("e-valid-input"):"Always"!==ue&&Ae.parentElement&&Ae.parentElement.classList.remove("e-valid-input")}function o(){var ue=S(this).getElementsByClassName("e-float-text")[0];f(ue)||(N([ue],"e-label-top"),ue.classList.contains("e-label-bottom")&&z([ue],"e-label-bottom"))}function a(){var ue=S(this);if(ue.getElementsByTagName("textarea")[0]?""===ue.getElementsByTagName("textarea")[0].value:""===ue.getElementsByTagName("input")[0].value){var Ae=ue.getElementsByClassName("e-float-text")[0];f(Ae)||(Ae.classList.contains("e-label-top")&&z([Ae],"e-label-top"),N([Ae],"e-label-bottom"))}}function l(ue){ue.addEventListener("focus",o),ue.addEventListener("blur",a)}function u(ue,Ae,St){var yi=f(St)?ti:St;"Auto"===ue.floatLabelType&&l(ue.element),f(Ae.container)?(Ae.container=P(ue,"e-float-input","e-float-custom-tag","div",yi),ue.element.parentNode&&ue.element.parentNode.insertBefore(Ae.container,ue.element)):(f(ue.customTag)||Ae.container.classList.add("e-float-custom-tag"),Ae.container.classList.add("e-float-input"));var bi=yi("span",{className:"e-float-line"}),hi=yi("label",{className:"e-float-text"});if(!f(ue.element.id)&&""!==ue.element.id&&(hi.id="label_"+ue.element.id.replace(/ /g,"_"),ze(ue.element,{"aria-labelledby":hi.id})),!f(ue.element.placeholder)&&""!==ue.element.placeholder&&(hi.innerText=B(ue.element.placeholder),ue.element.removeAttribute("placeholder")),!f(ue.properties)&&!f(ue.properties.placeholder)&&""!==ue.properties.placeholder&&(hi.innerText=B(ue.properties.placeholder)),hi.innerText||Ae.container.classList.add("e-no-float-label"),Ae.container.classList.contains("e-float-icon-left")){var Tr=Ae.container.querySelector(".e-input-in-wrap");Tr.appendChild(ue.element),Tr.appendChild(bi),Tr.appendChild(hi)}else Ae.container.appendChild(ue.element),Ae.container.appendChild(bi),Ae.container.appendChild(hi);C(ue.element.value,hi),"Always"===ue.floatLabelType&&(hi.classList.contains("e-label-bottom")&&z([hi],"e-label-bottom"),N([hi],"e-label-top")),"Auto"===ue.floatLabelType&&(ue.element.addEventListener("input",function(fa){C(ue.element.value,hi,ue.element)}),ue.element.addEventListener("blur",function(fa){C(ue.element.value,hi)})),f(ue.element.getAttribute("id"))||hi.setAttribute("for",ue.element.getAttribute("id"))}function d(ue,Ae){"Always"===ue&&Ae.classList.contains("e-outline")&&Ae.classList.add("e-valid-input")}function v(ue,Ae,St){ue&&!St?z([Ae],"e-clear-icon-hide"):N([Ae],"e-clear-icon-hide")}function C(ue,Ae,St){void 0===St&&(St=null),ue?(N([Ae],"e-label-top"),Ae.classList.contains("e-label-bottom")&&z([Ae],"e-label-bottom")):(null==St||St!==document.activeElement)&&(Ae.classList.contains("e-label-top")&&z([Ae],"e-label-top"),N([Ae],"e-label-bottom"))}function S(ue){var Ae=f(ue.parentNode)?ue:ue.parentNode;return Ae&&Ae.classList.contains("e-input-in-wrap")&&(Ae=Ae.parentNode),Ae}function _(ue,Ae,St){(null==e||e)&&Ae.addEventListener("click",function(yi){ue.classList.contains("e-disabled")||ue.readOnly||(yi.preventDefault(),ue!==document.activeElement&&ue.focus(),ue.value="",N([Ae],"e-clear-icon-hide"))}),ue.addEventListener("input",function(yi){v(ue.value,Ae)}),ue.addEventListener("focus",function(yi){v(ue.value,Ae,ue.readOnly)}),ue.addEventListener("blur",function(yi){setTimeout(function(){N([Ae],"e-clear-icon-hide")},200)})}function M(ue,Ae){if(S(ue).classList.contains("e-float-input")&&"Auto"===Ae){var yi=S(ue).getElementsByClassName("e-float-text")[0];C(ue.value,yi,ue)}}function P(ue,Ae,St,yi,bi){var Tr,hi=f(bi)?ti:bi;return f(ue.customTag)?Tr=hi(yi,{className:Ae}):(Tr=hi(ue.customTag,{className:Ae})).classList.add(St),Tr.classList.add("e-control-wrapper"),Tr}function B(ue){var Ae="";if(!f(ue)&&""!==ue){var St=document.createElement("span");St.innerHTML='<input  placeholder="'+ue+'"/>',Ae=St.children[0].placeholder}return Ae}function G(ue,Ae,St){!f(St)&&""!==St&&z(Ae,St.split(" ")),!f(ue)&&""!==ue&&N(Ae,ue.split(" "))}function ne(ue,Ae){var St=ue.clientWidth-parseInt(getComputedStyle(ue,null).getPropertyValue("padding-left"));f(Ae.getElementsByClassName("e-float-text-content")[0])||(Ae.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&Ae.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(St<Ae.getElementsByClassName("e-float-text-content")[0].clientWidth||St===Ae.getElementsByClassName("e-float-text-content")[0].clientWidth)&&Ae.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}function Ee(ue,Ae){ue=B(ue);var St=S(Ae);St.classList.contains("e-float-input")?f(ue)||""===ue?(St.classList.add("e-no-float-label"),St.getElementsByClassName("e-float-text-content")[0]?St.getElementsByClassName("e-float-text")[0].children[0].textContent="":St.getElementsByClassName("e-float-text")[0].textContent=""):(St.getElementsByClassName("e-float-text-content")[0]?St.getElementsByClassName("e-float-text")[0].children[0].textContent=ue:St.getElementsByClassName("e-float-text")[0].textContent=ue,St.classList.remove("e-no-float-label"),Ae.removeAttribute("placeholder")):f(ue)||""===ue?Ae.removeAttribute("placeholder"):ze(Ae,{placeholder:ue})}function Pe(ue,Ae,St){ue?ze(Ae,{readonly:""}):Ae.removeAttribute("readonly"),f(St)||M(Ae,St)}function ie(ue,Ae){ue?N(Ae,"e-rtl"):z(Ae,"e-rtl")}function Ie(ue,Ae,St,yi){var bi={disabled:"disabled","aria-disabled":"true"},hi=!f(yi);ue?(Ae.classList.remove("e-disabled"),ce(bi,Ae),hi&&z([yi],"e-disabled")):(Ae.classList.add("e-disabled"),Re(bi,Ae),hi&&N([yi],"e-disabled")),f(St)||M(Ae,St)}function Te(ue,Ae,St,yi,bi){var hi=f(bi)?ti:bi;ue?St.clearButton=function A(ue,Ae,St,yi){var hi=(f(yi)?ti:yi)("span",{className:"e-clear-icon"}),Tr=Ae.container;return f(St)?(Ae.container.classList.contains("e-float-input")?Ae.container.querySelector(".e-float-text"):ue).insertAdjacentElement("afterend",hi):Tr.appendChild(hi),!f(Tr)&&Tr.classList.contains("e-float-input")&&N([Tr],"e-input-group"),N([hi],"e-clear-icon-hide"),_(ue,hi),hi.setAttribute("aria-label","close"),hi}(Ae,St,yi,hi):(Be(St.clearButton),St.clearButton=null)}function ce(ue,Ae){for(var St=0,yi=Object.keys(ue);St<yi.length;St++){var bi=yi[St],hi=S(Ae);"disabled"===bi&&Ae.classList.remove("e-disabled"),"disabled"===bi&&hi.classList.contains("e-input-group")&&hi.classList.remove("e-disabled"),"placeholder"===bi&&hi.classList.contains("e-float-input")?hi.getElementsByClassName("e-float-text")[0].textContent="":Ae.removeAttribute(bi)}}function Re(ue,Ae){for(var St=0,yi=Object.keys(ue);St<yi.length;St++){var bi=yi[St],hi=S(Ae);"disabled"===bi&&Ae.classList.add("e-disabled"),"disabled"===bi&&hi.classList.contains("e-input-group")&&hi.classList.add("e-disabled"),"placeholder"===bi&&hi.classList.contains("e-float-input")?hi.getElementsByClassName("e-float-text")[0].textContent=ue[bi]:Ae.setAttribute(bi,ue[bi])}}function Me(ue,Ae){if(ue.classList.contains("e-outline")&&ue.getElementsByClassName("e-float-text")[0]){var St=Ae("span",{className:"e-float-text-content"});St.innerHTML=ue.getElementsByClassName("e-float-text")[0].innerHTML,ue.getElementsByClassName("e-float-text")[0].innerHTML="",ue.getElementsByClassName("e-float-text")[0].appendChild(St)}}function Ut(ue,Ae,St){var yi=[];yi.push(St);var bi=f(St)?Ae.querySelectorAll(".e-input-group-icon"):yi;if(ue&&bi.length>0)for(var hi=0;hi<bi.length;hi++)bi[hi].addEventListener("mousedown",Qt,!1),bi[hi].addEventListener("mouseup",vi,!1);else if(bi.length>0)for(hi=0;hi<bi.length;hi++)bi[hi].removeEventListener("mousedown",Qt,this),bi[hi].removeEventListener("mouseup",vi,this)}function Qt(){for(var Ae=this.parentElement;!Ae.classList.contains("e-input-group");)Ae=Ae.parentElement;!function Gt(ue,Ae){!ue.classList.contains("e-disabled")&&!ue.querySelector("input").readOnly&&Ae.classList.add("e-input-btn-ripple")}(Ae,this)}function vi(){var ue=this;setTimeout(function(){ue.classList.remove("e-input-btn-ripple")},500)}function ki(ue,Ae){var St=Ae("span",{className:ue});return St.classList.add("e-input-group-icon"),St}function ni(ue,Ae,St,yi){var bi=f(yi)?ti:yi,hi=ki(ue,bi);Ae.classList.add("e-float-icon-left");var Tr=Ae.querySelector(".e-input-in-wrap");if(f(Tr)){Tr=bi("span",{className:"e-input-in-wrap"}),St.parentNode.insertBefore(Tr,St);var fa=Ae.querySelectorAll(St.tagName+" ~ *");Tr.appendChild(St);for(var Ao=0;Ao<fa.length;Ao++)Tr.appendChild(fa[Ao])}return Tr.parentNode.insertBefore(hi,Tr),Ae.classList.contains("e-input-group")||Ae.classList.add("e-input-group"),Ut(!0,Ae,hi),hi}function Qn(ue,Ae,St){var bi=ki(ue,f(St)?ti:St);return Ae.classList.contains("e-input-group")||Ae.classList.add("e-input-group"),(Ae.classList.contains("e-float-icon-left")?Ae.querySelector(".e-input-in-wrap"):Ae).appendChild(bi),Ut(!0,Ae,bi),bi}function ss(ue,Ae){"hidden"===Ae.type?ue.classList.add("e-hidden"):ue.classList.contains("e-hidden")&&ue.classList.remove("e-hidden")}r.createInput=function i(ue,Ae){var St=f(Ae)?ti:Ae,yi={container:null,buttons:[],clearButton:null};if(t=ue.floatLabelType,e=ue.bindClearAction,f(ue.floatLabelType)||"Never"===ue.floatLabelType?(yi.container=P(ue,"e-input-group","e-input-custom-tag","span",St),ue.element.parentNode.insertBefore(yi.container,ue.element),N([ue.element],"e-input"),yi.container.appendChild(ue.element)):u(ue,yi,St),n(ue),!f(ue.properties)&&!f(ue.properties.showClearButton)&&ue.properties.showClearButton&&"TEXTAREA"!==ue.element.tagName&&(Te(ue.properties.showClearButton,ue.element,yi,!0,St),yi.clearButton.setAttribute("role","button"),yi.container.classList.contains("e-float-input")&&N([yi.container],"e-input-group")),!f(ue.buttons)&&"TEXTAREA"!==ue.element.tagName)for(var bi=0;bi<ue.buttons.length;bi++)yi.buttons.push(Qn(ue.buttons[bi],yi.container,St));return!f(ue.element)&&"TEXTAREA"===ue.element.tagName&&N([yi.container],"e-multi-line-input"),ss(yi.container,ue.element),yi=function m(ue,Ae){if(!f(ue.properties))for(var St=0,yi=Object.keys(ue.properties);St<yi.length;St++)switch(yi[St]){case"cssClass":G(ue.properties.cssClass,[Ae.container]),d(ue.floatLabelType,Ae.container);break;case"enabled":Ie(ue.properties.enabled,ue.element,ue.floatLabelType,Ae.container);break;case"enableRtl":ie(ue.properties.enableRtl,[Ae.container]);break;case"placeholder":Ee(ue.properties.placeholder,ue.element);break;case"readonly":Pe(ue.properties.readonly,ue.element)}return Ae}(ue,yi),Me(yi.container,St),yi},r.bindInitialEvent=n,r.wireFloatingEvents=l,r.wireClearBtnEvents=_,r.setValue=function j(ue,Ae,St,yi){if(Ae.value=ue,ne(Ae,Ae.parentElement),!f(St)&&"Auto"===St&&M(Ae,St),!f(yi)&&yi){var bi=S(Ae);if(!f(bi)){var hi=bi.getElementsByClassName("e-clear-icon")[0];f(hi)||(Ae.value&&bi.classList.contains("e-input-focus")?z([hi],"e-clear-icon-hide"):N([hi],"e-clear-icon-hide"))}}s(St,Ae)},r.setCssClass=G,r.calculateWidth=ne,r.setWidth=function fe(ue,Ae){"number"==typeof ue?Ae.style.width=it(ue):"string"==typeof ue&&(Ae.style.width=ue.match(/px|%|em/)?ue:it(ue)),ne(Ae.firstChild,Ae)},r.setPlaceholder=Ee,r.setReadonly=Pe,r.setEnableRtl=ie,r.setEnabled=Ie,r.setClearButton=Te,r.removeAttributes=ce,r.addAttributes=Re,r.removeFloating=function je(ue){var Ae=ue.container;if(!f(Ae)&&Ae.classList.contains("e-float-input")){var St=Ae.querySelector("textarea")?Ae.querySelector("textarea"):Ae.querySelector("input"),yi=Ae.querySelector(".e-float-text").textContent,bi=null!==Ae.querySelector(".e-clear-icon");le(Ae.querySelector(".e-float-line")),le(Ae.querySelector(".e-float-text")),ri(Ae,["e-input-group"],["e-float-input"]),function h(ue){ue.removeEventListener("focus",o),ue.removeEventListener("blur",a)}(St),ze(St,{placeholder:yi}),St.classList.add("e-input"),!bi&&"INPUT"===St.tagName&&St.removeAttribute("required")}},r.addFloating=function be(ue,Ae,St,yi){var bi=f(yi)?ti:yi,hi=U(ue,".e-input-group");if(t=Ae,"Never"!==Ae){var Tr=hi.tagName,fa={element:ue,floatLabelType:Ae,customTag:Tr="DIV"!==Tr&&"SPAN"!==Tr?Tr:null,properties:{placeholder:St}},Ao=hi.querySelector(".e-clear-icon"),om={container:hi};ue.classList.remove("e-input"),u(fa,om,bi),Me(om.container,bi),ne(fa.element,om.container);var Bf=hi.classList.contains("e-float-icon-left");if(f(Ao)&&(Ao=Bf?hi.querySelector(".e-input-in-wrap").querySelector(".e-input-group-icon"):hi.querySelector(".e-input-group-icon")),f(Ao))Bf&&(Ao=hi.querySelector(".e-input-group-icon")),f(Ao)&&hi.classList.remove("e-input-group");else{var VY=hi.querySelector(".e-float-line"),zY=hi.querySelector(".e-float-text"),Uj=Bf?hi.querySelector(".e-input-in-wrap"):hi;Uj.insertBefore(ue,Ao),Uj.insertBefore(VY,Ao),Uj.insertBefore(zY,Ao)}}d(Ae,ue.parentElement)},r.createSpanElement=Me,r.setRipple=function He(ue,Ae){for(var St=0;St<Ae.length;St++)Ut(ue,Ae[St].container)},r.addIcon=function Yi(ue,Ae,St,yi,bi){var hi="string"==typeof Ae?Ae.split(","):Ae;if("append"===ue.toLowerCase())for(var Tr=0,fa=hi;Tr<fa.length;Tr++)Qn(fa[Tr],St,bi);else for(var om=0,Bf=hi;om<Bf.length;om++)ni(Bf[om],St,yi,bi);St.getElementsByClassName("e-input-group-icon")[0]&&St.getElementsByClassName("e-float-text-overflow")[0]&&St.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")},r.prependSpan=ni,r.appendSpan=Qn,r.validateInputType=ss}(ke||(ke={}));var cn,Bme=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),no=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},iW="e-input-group-icon",nW="e-spin-up",rW="e-error",HT="increment",x_="decrement",zme=new RegExp("^(-)?(\\d*)$"),vQ="e-input-focus",yQ=["title","style","class"],VT=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isVue=!1,n.preventChange=!1,n.isAngular=!1,n.isDynamicChange=!1,n.numericOptions=e,n}return Bme(t,r),t.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=Q("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),z([this.cloneElement],["e-control","e-numerictextbox","e-lib"]),this.angularTagName=null,this.formEle=U(this.element,"form"),"EJS-NUMERICTEXTBOX"===this.element.tagName){this.angularTagName=this.element.tagName;for(var i=this.createElement("input"),n=0;n<this.element.attributes.length;n++){var s=this.element.attributes[n].nodeName;"id"!==s&&"class"!==s?(i.setAttribute(this.element.attributes[n].nodeName,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(a){return 0!==a.indexOf("ng-")}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(i),this.element=i,Nt("ej2_instances",e,this.element)}ze(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off","aria-live":"assertive"}),this.l10n=new es("numerictextbox",{incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Ui("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),null===this.placeholder&&this.updatePlaceholder()},t.prototype.render=function(){"input"===this.element.tagName.toLowerCase()&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(null===this.value||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),null!==this.value&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.numericOptions)||void 0===this.numericOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.numericOptions)||void 0===this.numericOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.numericOptions)||void 0===this.numericOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(f(this.numericOptions)||void 0===this.numericOptions.value||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));this.setProperties(Nt(o,h,{}),!e)}break;case"min":if(f(this.numericOptions)||void 0===this.numericOptions.min||e){var u=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==u&&!isNaN(u)&&this.setProperties(Nt(o,u,{}),!e)}break;case"max":if(f(this.numericOptions)||void 0===this.numericOptions.max||e){var d=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==d&&!isNaN(d)&&this.setProperties(Nt(o,d,{}),!e)}break;case"step":if(f(this.numericOptions)||void 0===this.numericOptions.step||e){var m=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));null!==m&&!isNaN(m)&&this.setProperties(Nt(o,m,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(o);break;case"name":this.inputName=this.element.getAttribute(o);break;default:var v=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(o));(null!==v&&!isNaN(v)||"value"===o)&&this.setProperties(Nt(o,v,{}),!0)}}},t.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},t.prototype.initCultureFunc=function(){this.instance=new Vr(this.locale)},t.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,null!==Q("currency",this)&&(Nt("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},t.prototype.createWrapper=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getNumericValidClassList(this.cssClass));var i=ke.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=i,this.container=i.container,this.container.setAttribute("class","e-control-wrapper e-numeric "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&ze(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true",class:"e-numeric-hidden"}}),this.inputName=null!==this.inputName?this.inputName:this.element.id,this.element.removeAttribute("name"),ze(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),null!==this.inputStyle&&ze(this.container,{style:this.inputStyle})},t.prototype.updateDataAttribute=function(e){var i={};if(e)i=this.htmlAttributes;else for(var n=0;n<this.element.attributes.length;n++)i[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name);for(var s=0,o=Object.keys(i);s<o.length;s++){var a=o[s];0===a.indexOf("data")&&this.hiddenInput.setAttribute(a,i[a])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];yQ.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(i))},t.prototype.getNumericValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(yQ.indexOf(n)>-1)if("class"===n){var s=this.getNumericValidClassList(this.htmlAttributes[n]);""!==s&&N([this.container],s.split(" "))}else if("style"===n){var o=this.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.container.setAttribute(n,o)}else this.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.setElementWidth=function(e){f(e)||("number"==typeof e?this.container.style.width=it(e):"string"==typeof e&&(this.container.style.width=e.match(/px|%|em/)?e:it(e)))},t.prototype.spinBtnCreation=function(){this.spinDown=ke.appendSpan(iW+" e-spin-down",this.container,this.createElement),ze(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=ke.appendSpan(iW+" "+nW,this.container,this.createElement),ze(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},t.prototype.validateMinMax=function(){"number"==typeof this.min&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),"number"==typeof this.max&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),null!==this.decimals&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&ze(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&ze(this.element,{"aria-valuemax":this.max.toString()})},t.prototype.formattedValue=function(e,i){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(i)},t.prototype.validateStep=function(){null!==this.decimals&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},t.prototype.action=function(e,i){this.isInteract=!0;var n=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(n,this.step,e)),this.raiseChangeEvent(i)},t.prototype.checkErrorClass=function(){this.isValidState?z([this.container],rW):N([this.container],rW),ze(this.element,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.bindClearEvent=function(){this.showClearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="",U(this.element,"form")){var n=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.resetFormHandler=function(){this.updateValue("EJS-NUMERICTEXTBOX"===this.element.tagName?null:this.inputEleValue)},t.prototype.setSpinButton=function(){f(this.spinDown)||ze(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),f(this.spinUp)||ze(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},t.prototype.wireEvents=function(){T.add(this.element,"focus",this.focusHandler,this),T.add(this.element,"blur",this.focusOutHandler,this),T.add(this.element,"keydown",this.keyDownHandler,this),T.add(this.element,"keyup",this.keyUpHandler,this),T.add(this.element,"input",this.inputHandler,this),T.add(this.element,"keypress",this.keyPressHandler,this),T.add(this.element,"change",this.changeHandler,this),T.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&T.add(this.formEle,"reset",this.resetFormHandler,this))},t.prototype.wireSpinBtnEvents=function(){T.add(this.spinUp,Z.touchStartEvent,this.mouseDownOnSpinner,this),T.add(this.spinDown,Z.touchStartEvent,this.mouseDownOnSpinner,this),T.add(this.spinUp,Z.touchEndEvent,this.mouseUpOnSpinner,this),T.add(this.spinDown,Z.touchEndEvent,this.mouseUpOnSpinner,this),T.add(this.spinUp,Z.touchMoveEvent,this.touchMoveOnSpinner,this),T.add(this.spinDown,Z.touchMoveEvent,this.touchMoveOnSpinner,this)},t.prototype.unwireEvents=function(){T.remove(this.element,"focus",this.focusHandler),T.remove(this.element,"blur",this.focusOutHandler),T.remove(this.element,"keyup",this.keyUpHandler),T.remove(this.element,"input",this.inputHandler),T.remove(this.element,"keydown",this.keyDownHandler),T.remove(this.element,"keypress",this.keyPressHandler),T.remove(this.element,"change",this.changeHandler),T.remove(this.element,"paste",this.pasteHandler),this.formEle&&T.remove(this.formEle,"reset",this.resetFormHandler)},t.prototype.unwireSpinBtnEvents=function(){T.remove(this.spinUp,Z.touchStartEvent,this.mouseDownOnSpinner),T.remove(this.spinDown,Z.touchStartEvent,this.mouseDownOnSpinner),T.remove(this.spinUp,Z.touchEndEvent,this.mouseUpOnSpinner),T.remove(this.spinDown,Z.touchEndEvent,this.mouseUpOnSpinner),T.remove(this.spinUp,Z.touchMoveEvent,this.touchMoveOnSpinner),T.remove(this.spinDown,Z.touchMoveEvent,this.touchMoveOnSpinner)},t.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var i=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(i,e)},t.prototype.raiseChangeEvent=function(e){if(this.prevValue!==this.value){var i={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),void 0===this.changeEventArgs.event&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),io(i,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",i)}},t.prototype.pasteHandler=function(){var e=this;if(this.enabled&&!this.readonly){var i=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(i)})}},t.prototype.preventHandler=function(){var e=this,i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var n=e.element.selectionStart,s=e.element.selectionStart-1,a=e.element.value.split(""),h=Q("decimal",Aw(e.locale)),u=h.charCodeAt(0);" "===e.element.value[s]&&e.element.selectionStart>0&&!i?(f(e.prevVal)?e.element.value=e.element.value.trim():0!==s?e.element.value=e.prevVal:0===s&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&45!==e.element.value[e.element.selectionStart-1].charCodeAt(0)?(a.indexOf(e.element.value[e.element.selectionStart-1])!==a.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===u||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==u)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&45!==e.element.value[e.element.selectionStart-2].charCodeAt(0)&&(a.indexOf(e.element.value[e.element.selectionStart-2])!==a.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===u||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==u)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),!0===e.cursorPosChanged&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),""===e.element.value.trim()&&e.element.setSelectionRange(0,0),e.element.selectionStart>0&&(45===e.element.value[e.element.selectionStart-1].charCodeAt(0)&&e.element.selectionStart>1&&(e.element.value=f(e.prevVal)?e.element.value:e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&0===e.decimals&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(n,e.element.value.length))),e.prevVal=e.element.value}})},t.prototype.keyUpHandler=function(){if(this.enabled&&!this.readonly){(!navigator.platform||!/iPad|iPhone|iPod/.test(navigator.platform))&&Z.isDevice&&this.preventHandler();var i=this.instance.getNumberParser({format:"n"})(this.element.value);if(i=null===i||isNaN(i)?null:i,this.hiddenInput.value=i||0===i?i.toString():null,U(this.element,"form")){var s=this.element.nextElementSibling,o=document.createEvent("KeyboardEvent");o.initEvent("keyup",!1,!0),s.dispatchEvent(o)}}},t.prototype.inputHandler=function(e){if(this.enabled&&!this.readonly){var n=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);if((navigator.userAgent.toLowerCase().indexOf("firefox")>-1||n)&&Z.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==Q("decimal",Aw(this.locale))&&this.element.value!==Q("minusSign",Aw(this.locale))){var o=this.instance.getNumberParser({format:"n"})(this.element.value);o=isNaN(o)?null:o,this.localChange({value:o}),this.preventChange=!0}if(this.isVue){var a=this.instance.getNumberParser({format:"n"})(this.element.value),l=this.instance.getNumberParser({format:"n"})(this.elementPrevValue);(new RegExp("[^0-9]+$").test(this.element.value)||(-1!==this.elementPrevValue.indexOf(".")||-1!==this.elementPrevValue.indexOf("-"))&&"0"===this.element.value[this.element.value.length-1])&&(a=this.value);var u={event:e,value:null===a||isNaN(a)?null:a,previousValue:null===l||isNaN(l)?null:l};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",u)}}},t.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(HT,e);break;case 40:e.preventDefault(),this.action(x_,e)}},t.prototype.performAction=function(e,i,n){(null===e||isNaN(e))&&(e=0);var s=n===HT?e+i:e-i;return s=this.correctRounding(e,i,s),this.strictMode?this.trimValue(s):s},t.prototype.correctRounding=function(e,i,n){var s=new RegExp("[,.](.*)"),o=s.test(e.toString()),a=s.test(i.toString());if(o||a){var l=o?s.exec(e.toString())[0].length:0,h=a?s.exec(i.toString())[0].length:0,u=Math.max(l,h);return this.roundValue(n,u)}return n},t.prototype.roundValue=function(e,i){i=i||0;var n=Math.pow(10,i);return Math.round(e*=n)/n},t.prototype.updateValue=function(e,i){i&&(this.isInteract=!0),null!==e&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.changeValue(null===e||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(i)},t.prototype.updateCurrency=function(e,i){Nt(e,i,this.cultureInfo),this.updateValue(this.value)},t.prototype.changeValue=function(e){if(e||0===e){var i=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,i)},!0)}else this.setProperties({value:e=null},!0);this.modifyText(),this.strictMode||this.validateState()},t.prototype.modifyText=function(){if(this.value||0===this.value){var e=this.formatNumber(),i=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(i),ze(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),null!==this.value&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},t.prototype.setElementValue=function(e,i){ke.setValue(e,i||this.element,this.floatLabelType,this.showClearButton)},t.prototype.validateState=function(){this.isValidState=!0,(this.value||0===this.value)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},t.prototype.getNumberOfDecimals=function(e){var i,n=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(n.test(s)){var o=n.exec(s);f(o)||(s=e.toFixed(Math.min(parseInt(o[1],10),20)))}var a=s.split(".")[1];return i=a&&a.length?a.length:0,null!==this.decimals&&(i=i<this.decimals?i:this.decimals),i},t.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},t.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},t.prototype.roundNumber=function(e,i){var n=e,s=i||0,o=n.toString().split("e"),a=(n=Math.round(Number(o[0]+"e"+(o[1]?Number(o[1])+s:s)))).toString().split("e");return n=Number(a[0]+"e"+(a[1]?Number(a[1])-s:-s)),Number(n.toFixed(s))},t.prototype.cancelEvent=function(e){return e.preventDefault(),!1},t.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!Z.isDevice&&"11.0"===Z.info.version&&13===e.keyCode){var i=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(i,e),!0}if(0===e.which||e.metaKey||e.ctrlKey||8===e.keyCode||13===e.keyCode)return!0;var n=String.fromCharCode(e.which),s=Q("decimal",Aw(this.locale)),o="NumpadDecimal"===e.code&&n!==s;o&&(n=s);var a=this.element.value;if(a=a.substring(0,this.element.selectionStart)+n+a.substring(this.element.selectionEnd),this.numericRegex().test(a)){if(o){var l=this.element.selectionStart+1;this.element.value=a,this.element.setSelectionRange(l,l),e.preventDefault(),e.stopPropagation()}return!0}return e.preventDefault(),e.stopPropagation(),!1},t.prototype.numericRegex=function(){var i=Q("decimal",Aw(this.locale)),n="*";return"."===i&&(i="\\"+i),0===this.decimals&&this.validateDecimalOnType?zme:(this.decimals&&this.validateDecimalOnType&&(n="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+i+"\\d"+n+")?)|("+i+"\\d"+n+")))?$"))},t.prototype.mouseWheel=function(e){var i;e.preventDefault(),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i>0?this.action(HT,e):i<0&&this.action(x_,e),this.cancelEvent(e)},t.prototype.focusHandler=function(e){var i=this;if(this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),this.enabled&&!this.readonly){if(this.isFocused=!0,z([this.container],rW),this.prevValue=this.value,this.value||0===this.value){var n=this.formatNumber();this.setElementValue(n),this.isPrevFocused||(Z.isDevice||"11.0"!==Z.info.version?setTimeout(function(){i.element.setSelectionRange(0,n.length)},Z.isDevice&&Z.isIos?600:0):this.element.setSelectionRange(0,n.length))}Z.isDevice||T.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},t.prototype.focusOutHandler=function(e){var i=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),this.enabled&&!this.readonly){if(this.isPrevFocused){if(e.preventDefault(),Z.isDevice){var n=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){i.setElementValue(n,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var o=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(o),Z.isDevice||T.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}if(U(this.element,"form")){var l=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),l.dispatchEvent(h)}}},t.prototype.mouseDownOnSpinner=function(e){var i=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),this.getElementData(e)){this.getElementData(e);var s=e.currentTarget,o=s.classList.contains(nW)?HT:x_;T.add(s,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){i.isCalled=!0,i.action(o,e)},150),T.add(document,"mouseup",this.mouseUpClick,this)}},t.prototype.touchMoveOnSpinner=function(e){var i;if("touchmove"===e.type){var n=e.touches;i=n.length&&document.elementFromPoint(n[0].pageX,n[0].pageY)}else i=document.elementFromPoint(e.clientX,e.clientY);i.classList.contains(iW)||clearInterval(this.timeOut)},t.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),Z.isDevice||(this.isPrevFocused=!1)),Z.isDevice||e.preventDefault(),this.getElementData(e)){var i=e.currentTarget,n=i.classList.contains(nW)?HT:x_;if(T.remove(i,"mouseleave",this.mouseUpClick),this.isCalled||this.action(n,e),this.isCalled=!1,T.remove(document,"mouseup",this.mouseUpClick),U(this.element,"form")){var o=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),o.dispatchEvent(a)}}},t.prototype.getElementData=function(e){return!(e.which&&3===e.which||e.button&&2===e.button||!this.enabled||this.readonly||(clearInterval(this.timeOut),0))},t.prototype.floatLabelTypeUpdate=function(){ke.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),ke.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},t.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,T.remove(this.spinUp,"mouseleave",this.mouseUpClick),T.remove(this.spinDown,"mouseleave",this.mouseUpClick)},t.prototype.increment=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,HT)),this.raiseChangeEvent()},t.prototype.decrement=function(e){void 0===e&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,x_)),this.raiseChangeEvent()},t.prototype.destroy=function(){this.unwireEvents(),le(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),le(this.spinUp),le(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-live","aria-valuenow","aria-invalid"],i=0;i<e.length;i++)this.element.removeAttribute(e[i]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),le(this.container),r.prototype.destroy.call(this)},t.prototype.getText=function(){return this.element.value},t.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),N([this.container],[vQ]))},t.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),z([this.container],[vQ]))},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"width":this.setElementWidth(e.width),ke.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"enabled":ke.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":ke.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":ke.setReadonly(e.readonly,this.element),this.readonly?ze(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),ke.validateInputType(this.container,this.element);break;case"placeholder":ke.setPlaceholder(e.placeholder,this.element),ke.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":Nt(o,Q(o,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),ke.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":var a=Q(o,e);this.setProperties({currencyCode:a},!0),this.updateCurrency(o,a);break;case"currencyCode":var l=Q(o,e);this.setProperties({currency:l},!0),this.updateCurrency("currency",l);break;case"format":Nt(o,Q(o,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},t.prototype.updateClearButton=function(e){ke.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},t.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(le(this.spinUp),le(this.spinDown))},t.prototype.getModuleName=function(){return"numerictextbox"},no([E("")],t.prototype,"cssClass",void 0),no([E(null)],t.prototype,"value",void 0),no([E(-Number.MAX_VALUE)],t.prototype,"min",void 0),no([E(Number.MAX_VALUE)],t.prototype,"max",void 0),no([E(1)],t.prototype,"step",void 0),no([E(null)],t.prototype,"width",void 0),no([E(null)],t.prototype,"placeholder",void 0),no([E({})],t.prototype,"htmlAttributes",void 0),no([E(!0)],t.prototype,"showSpinButton",void 0),no([E(!1)],t.prototype,"readonly",void 0),no([E(!0)],t.prototype,"enabled",void 0),no([E(!1)],t.prototype,"showClearButton",void 0),no([E(!1)],t.prototype,"enablePersistence",void 0),no([E("n2")],t.prototype,"format",void 0),no([E(null)],t.prototype,"decimals",void 0),no([E(null)],t.prototype,"currency",void 0),no([E(null)],t.prototype,"currencyCode",void 0),no([E(!0)],t.prototype,"strictMode",void 0),no([E(!1)],t.prototype,"validateDecimalOnType",void 0),no([E("Never")],t.prototype,"floatLabelType",void 0),no([q()],t.prototype,"created",void 0),no([q()],t.prototype,"destroyed",void 0),no([q()],t.prototype,"change",void 0),no([q()],t.prototype,"focus",void 0),no([q()],t.prototype,"blur",void 0),no([si],t)}(Ji),gve=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),oh=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},zT={EMAIL:new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"),URL:/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m,DATE_ISO:new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"),DIGITS:new RegExp("^[0-9]*$"),PHONE:new RegExp("^[+]?[0-9]{9,13}$"),CREDITCARD:new RegExp("^\\d{13,16}$")},D_=(()=>(function(r){r[r.Message=0]="Message",r[r.Label=1]="Label"}(D_||(D_={})),D_))(),mve=function(r){function t(i,n){var s=r.call(this,n,i)||this;if(s.validated=[],s.errorRules=[],s.allowSubmit=!1,s.required="required",s.infoElement=null,s.inputElement=null,s.selectQuery="input:not([type=reset]):not([type=button]), select, textarea",s.localyMessage={},s.defaultMessages={required:"This field is required.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateIso:"Please enter a valid date ( ISO ).",creditcard:"Please enter valid card number",number:"Please enter a valid number.",digits:"Please enter only digits.",maxLength:"Please enter no more than {0} characters.",minLength:"Please enter at least {0} characters.",rangeLength:"Please enter a value between {0} and {1} characters long.",range:"Please enter a value between {0} and {1}.",max:"Please enter a value less than or equal to {0}.",min:"Please enter a value greater than or equal to {0}.",regex:"Please enter a correct value.",tel:"Please enter a valid phone number.",pattern:"Please enter a correct pattern value.",equalTo:"Please enter the valid match text"},typeof s.rules>"u"&&(s.rules={}),s.l10n=new es("formValidator",s.defaultMessages,s.locale),s.locale&&s.localeFunc(),cv.on("notifyExternalChange",s.afterLocalization,s),i="string"==typeof i?re(i,document):i,null!=s.element)return s.element.setAttribute("novalidate",""),s.inputElements=Ke(s.selectQuery,s.element),s.createHTML5Rules(),s.wireEvents(),s}var e;return gve(t,r),e=t,t.prototype.addRules=function(i,n){i&&(this.rules.hasOwnProperty(i)?he(this.rules[i],n,{}):this.rules[i]=n)},t.prototype.removeRules=function(i,n){if(i||n)if(this.rules[i]&&!n)delete this.rules[i];else{if(f(this.rules[i]&&n))return;for(var s=0;s<n.length;s++)delete this.rules[i][n[s]]}else this.rules={}},t.prototype.validate=function(i){var n=Object.keys(this.rules);if(i&&n.length)return this.validateRules(i),-1!==n.indexOf(i)&&0===this.errorRules.filter(function(l){return l.name===i}).length;this.errorRules=[];for(var s=0,o=n;s<o.length;s++)this.validateRules(o[s]);return 0===this.errorRules.length},t.prototype.reset=function(){this.element.reset(),this.clearForm()},t.prototype.getInputElement=function(i){return this.inputElement=re('[name="'+i+'"]',this.element),this.inputElement},t.prototype.destroy=function(){this.reset(),this.unwireEvents(),this.rules={};for(var n=0,s=Ke("."+this.errorClass+", ."+this.validClass,this.element);n<s.length;n++)le(s[n]);r.prototype.destroy.call(this),cv.off("notifyExternalChange",this.afterLocalization)},t.prototype.onPropertyChanged=function(i,n){for(var s=0,o=Object.keys(i);s<o.length;s++)"locale"===o[s]&&this.localeFunc()},t.prototype.localeFunc=function(){for(var i=0,n=Object.keys(this.defaultMessages);i<n.length;i++){var s=n[i];this.l10n.setLocale(this.locale);var o=this.l10n.getConstant(s);this.localyMessage[s]=o}},t.prototype.getModuleName=function(){return"formValidator"},t.prototype.afterLocalization=function(i){this.locale=i.locale,this.localeFunc()},t.prototype.refresh=function(){this.unwireEvents(),this.inputElements=Ke(this.selectQuery,this.element),this.wireEvents()},t.prototype.clearForm=function(){this.errorRules=[],this.validated=[];for(var n=0,s=Ke(this.selectQuery,this.element);n<s.length;n++){var a=s[n];a.removeAttribute("aria-invalid"),a.classList.remove(this.errorClass),a.name.length>0&&(this.getInputElement(a.name),this.getErrorElement(a.name),this.hideMessage(a.name)),a.classList.remove(this.validClass)}},t.prototype.createHTML5Rules=function(){for(var i=["required","validateHidden","regex","rangeLength","maxLength","minLength","dateIso","digits","pattern","data-val-required","type","data-validation","min","max","range","equalTo","data-val-minlength-min","data-val-equalto-other","data-val-maxlength-max","data-val-range-min","data-val-regex-pattern","data-val-length-max","data-val-creditcard","data-val-phone"],n=["hidden","email","url","date","number","tel"],s=0,o=this.inputElements;s<o.length;s++){for(var a=o[s],l={},h=0,u=i;h<u.length;h++){var d=u[h];if(null!==a.getAttribute(d))switch(d){case"required":this.defRule(a,l,d,a.required);break;case"data-validation":d=a.getAttribute(d),this.defRule(a,l,d,!0);break;case"type":-1!==n.indexOf(a.type)&&this.defRule(a,l,a.type,!0);break;case"rangeLength":case"range":this.defRule(a,l,d,JSON.parse(a.getAttribute(d)));break;case"equalTo":var m=a.getAttribute(d);this.defRule(a,l,d,m);break;default:"true"===a.getAttribute("data-val")?this.annotationRule(a,l,d,a.getAttribute(d)):this.defRule(a,l,d,a.getAttribute(d))}}0!==Object.keys(l).length&&this.addRules(a.name,l)}},t.prototype.annotationRule=function(i,n,s,o){var a=s.split("-"),l=["required","creditcard","phone","maxlength","minlength","range","regex","equalto"],h=a[a.length-1],u=a[a.length-2];if(-1!==l.indexOf(h))switch(h){case"required":this.defRule(i,n,"required",o);break;case"creditcard":this.defRule(i,n,"creditcard",o);break;case"phone":this.defRule(i,n,"tel",o)}else if(-1!==l.indexOf(u))switch(u){case"maxlength":this.defRule(i,n,"maxLength",o);break;case"minlength":this.defRule(i,n,"minLength",o);break;case"range":var d=i.getAttribute("data-val-range-min"),m=i.getAttribute("data-val-range-max");this.defRule(i,n,"range",[d,m]);break;case"equalto":var v=i.getAttribute(s).split(".");this.defRule(i,n,"equalTo",v[v.length-1]);break;case"regex":this.defRule(i,n,"regex",o)}},t.prototype.defRule=function(i,n,s,o){var h,a=i.getAttribute("data-"+s+"-message"),l=i.getAttribute("data-val-"+s);this.rules[i.name]&&"validateHidden"!==s&&"hidden"!==s&&(this.getInputElement(i.name),h=this.getErrorMessage(this.rules[i.name][s],s)),a?o=[o,a]:l?o=[o,l]:h&&(o=[o,h]),n[s]=o},t.prototype.wireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++){var s=n[i];e.isCheckable(s)?T.add(s,"click",this.clickHandler,this):"SELECT"===s.tagName?T.add(s,"change",this.changeHandler,this):(T.add(s,"focusout",this.focusOutHandler,this),T.add(s,"keyup",this.keyUpHandler,this))}T.add(this.element,"submit",this.submitHandler,this),T.add(this.element,"reset",this.resetHandler,this)},t.prototype.unwireEvents=function(){for(var i=0,n=this.inputElements;i<n.length;i++)T.clearEvents(n[i]);T.remove(this.element,"submit",this.submitHandler),T.remove(this.element,"reset",this.resetHandler)},t.prototype.focusOutHandler=function(i){this.trigger("focusout",i);var n=i.target;this.rules[n.name]&&(this.rules[n.name][this.required]||n.value.length>0?this.validate(n.name):-1===this.validated.indexOf(n.name)&&this.validated.push(n.name))},t.prototype.keyUpHandler=function(i){this.trigger("keyup",i);var n=i.target;9===i.which&&(!this.rules[n.name]||this.rules[n.name]&&!this.rules[n.name][this.required])||-1!==this.validated.indexOf(n.name)&&this.rules[n.name]&&-1===[16,17,18,20,35,36,37,38,39,40,45,144,225].indexOf(i.which)&&this.validate(n.name)},t.prototype.clickHandler=function(i){this.trigger("click",i);var n=i.target;"submit"!==n.type?this.validate(n.name):null!==n.getAttribute("formnovalidate")&&(this.allowSubmit=!0)},t.prototype.changeHandler=function(i){this.trigger("change",i),this.validate(i.target.name)},t.prototype.submitHandler=function(i){this.trigger("submit",i),this.allowSubmit||this.validate()?this.allowSubmit=!1:i.preventDefault()},t.prototype.resetHandler=function(){this.clearForm()},t.prototype.validateRules=function(i){if(this.rules[i]){var n=Object.keys(this.rules[i]),s=!1,o=!1,a=n.indexOf("validateHidden"),l=n.indexOf("hidden");if(this.getInputElement(i),-1!==l&&(s=!0),-1!==a&&(o=!0),!(!s||s&&o))return;-1!==a&&n.splice(a,1),-1!==l&&n.splice(l-1,1),this.getErrorElement(i);for(var h=0,u=n;h<u.length;h++){var d=u[h],m=this.getErrorMessage(this.rules[i][d],d),v={name:i,message:m},C={inputName:i,element:this.inputElement,message:m};if(!this.isValid(i,d)&&!this.inputElement.classList.contains(this.ignore)){this.removeErrorRules(i),this.errorRules.push(v),this.inputElement.setAttribute("aria-invalid","true"),this.inputElement.setAttribute("aria-describedby",this.inputElement.id+"-info"),this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.infoElement?this.showMessage(v):this.createErrorElement(i,v.message,this.inputElement),C.errorElement=this.infoElement,C.status="failure",this.inputElement.classList.add(this.errorClass),this.inputElement.classList.remove(this.validClass),this.optionalValidationStatus(i,C),this.trigger("validationComplete",C),"required"===d&&this.inputElement.setAttribute("aria-required","true");break}this.hideMessage(i),C.status="success",this.trigger("validationComplete",C)}}},t.prototype.optionalValidationStatus=function(i,n){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),n.status="",this.hideMessage(i))},t.prototype.isValid=function(i,n){var s=this.rules[i][n],a=this.rules[i][n],l={value:this.inputElement.value,param:s instanceof Array&&"string"==typeof s[1]?s[0]:s,element:this.inputElement,formElement:this.element};return this.trigger("validationBegin",l),!l.param&&"required"===n||(a&&"function"==typeof a[0]?a[0].call(this,{element:this.inputElement,value:this.inputElement.value}):e.isCheckable(this.inputElement)?"required"!==n||Ke('input[name="'+i+'"]:checked',this.element).length>0:e.checkValidator[n](l))},t.prototype.getErrorMessage=function(i,n){var s=this.inputElement.getAttribute("data-"+n+"-message")?this.inputElement.getAttribute("data-"+n+"-message"):i instanceof Array&&"string"==typeof i[1]?i[1]:0!==Object.keys(this.localyMessage).length?this.localyMessage[n]:this.defaultMessages[n],o=s.match(/{(\d)}/g);if(!f(o))for(var a=0;a<o.length;a++)s=s.replace(o[a],i instanceof Array?i[a]:i);return s},t.prototype.createErrorElement=function(i,n,s){var o=ti(this.errorElement,{className:this.errorClass,innerHTML:n,attrs:{for:i}});this.errorOption===D_.Message&&(o.classList.remove(this.errorClass),o.classList.add("e-message"),o=ti(this.errorContainer,{className:this.errorClass,innerHTML:o.outerHTML})),o.id=this.inputElement.name+"-info",this.element.querySelector('[data-valmsg-for="'+s.id+'"]')?this.element.querySelector('[data-valmsg-for="'+s.id+'"]').appendChild(o):!0===s.hasAttribute("data-msg-containerid")?re("#"+s.getAttribute("data-msg-containerid"),this.element).appendChild(o):null!=this.customPlacement?this.customPlacement.call(this,this.inputElement,o):this.inputElement.parentNode.insertBefore(o,this.inputElement.nextSibling),o.style.display="block",this.getErrorElement(i),this.validated.push(i),this.checkRequired(i)},t.prototype.getErrorElement=function(i){return this.infoElement=re(this.errorElement+"."+this.errorClass,this.inputElement.parentElement),this.infoElement||(this.infoElement=re(this.errorElement+"."+this.errorClass+'[for="'+i+'"]',this.element)),this.infoElement},t.prototype.removeErrorRules=function(i){for(var n=0;n<this.errorRules.length;n++)this.errorRules[n].name===i&&this.errorRules.splice(n,1)},t.prototype.showMessage=function(i){this.infoElement.style.display="block",this.infoElement.innerHTML=i.message,this.checkRequired(i.name)},t.prototype.hideMessage=function(i){this.infoElement&&(this.infoElement.style.display="none",this.removeErrorRules(i),this.inputElement.classList.add(this.validClass),this.inputElement.classList.remove(this.errorClass),this.inputElement.setAttribute("aria-invalid","false"))},t.prototype.checkRequired=function(i){!this.rules[i][this.required]&&!this.inputElement.value.length&&!f(this.infoElement)&&(this.infoElement.innerHTML=this.inputElement.value,this.infoElement.setAttribute("aria-invalid","false"),this.hideMessage(i))},t.isCheckable=function(i){var n=i.getAttribute("type");return n&&("checkbox"===n||"radio"===n||"submit"===n)},t.checkValidator={required:function(i){return isNaN(Date.parse(i.value))?i.value.toString().length>0:!isNaN(new Date(i.value).getTime())},email:function(i){return zT.EMAIL.test(i.value)},url:function(i){return zT.URL.test(i.value)},dateIso:function(i){return zT.DATE_ISO.test(i.value)},tel:function(i){return zT.PHONE.test(i.value)},creditcard:function(i){return zT.CREDITCARD.test(i.value)},number:function(i){return!isNaN(Number(i.value))&&-1===i.value.indexOf(" ")},digits:function(i){return zT.DIGITS.test(i.value)},maxLength:function(i){return i.value.length<=i.param},minLength:function(i){return i.value.length>=i.param},rangeLength:function(i){var n=i.param;return i.value.length>=n[0]&&i.value.length<=n[1]},range:function(i){var n=i.param;return!isNaN(Number(i.value))&&Number(i.value)>=n[0]&&Number(i.value)<=n[1]},date:function(i){return!isNaN(new Date(i.value).getTime())},max:function(i){return isNaN(Number(i.value))?new Date(i.value).getTime()<=new Date(JSON.parse(JSON.stringify(i.param))).getTime():+i.value<=i.param},min:function(i){if(isNaN(Number(i.value))){if(-1!==i.value.indexOf(",")){var n=i.value.replace(/,/g,"");return parseFloat(n)>=i.param}return new Date(i.value).getTime()>=new Date(JSON.parse(JSON.stringify(i.param))).getTime()}return+i.value>=i.param},regex:function(i){return new RegExp(i.param).test(i.value)},equalTo:function(i){var n=i.formElement.querySelector("#"+i.param);return i.param=n.value,i.param===i.value}},oh([E("")],t.prototype,"locale",void 0),oh([E("e-hidden")],t.prototype,"ignore",void 0),oh([E()],t.prototype,"rules",void 0),oh([E("e-error")],t.prototype,"errorClass",void 0),oh([E("e-valid")],t.prototype,"validClass",void 0),oh([E("label")],t.prototype,"errorElement",void 0),oh([E("div")],t.prototype,"errorContainer",void 0),oh([E(D_.Label)],t.prototype,"errorOption",void 0),oh([q()],t.prototype,"focusout",void 0),oh([q()],t.prototype,"keyup",void 0),oh([q()],t.prototype,"click",void 0),oh([q()],t.prototype,"change",void 0),oh([q()],t.prototype,"submit",void 0),oh([q()],t.prototype,"validationBegin",void 0),oh([q()],t.prototype,"validationComplete",void 0),oh([q()],t.prototype,"customPlacement",void 0),e=oh([si],t)}(Gp),Lve=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),el=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},hJ="e-input-focus",xW=["title","style","class"],uJ=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousValue=null,n.isAngular=!1,n.isHiddenInput=!1,n.isForm=!1,n.inputPreviousValue=null,n.isVue=!1,n.textboxOptions=e,n}return Lve(t,r),t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"floatLabelType":ke.removeFloating(this.textboxWrapper),ke.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ke.setWidth(e.width,this.textboxWrapper.container);break;case"value":var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&!0===this.preventChange?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(f(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&f(this.preventChange))&&this.raiseChangeEvent();break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),ke.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ke.setReadonly(this.readonly,this.respectiveElement);break;case"type":"TEXTAREA"!==this.respectiveElement.tagName&&(this.respectiveElement.setAttribute("type",this.type),ke.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":"TEXTAREA"!==this.respectiveElement.tagName&&(ke.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent());break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ke.setPlaceholder(this.placeholder,this.respectiveElement),ke.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"locale":this.globalize=new Vr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(e){return!e||/^\s*$/.test(e)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=U(this.element,"form"),f(this.formElement)||(this.isForm=!0),"EJS-TEXTBOX"===this.element.tagName){for(var e=Q("ej2_instances",this.element),i=this.createElement(this.multiline?"textarea":"input"),n=0;n<this.element.attributes.length;n++)"id"!==(s=this.element.attributes[n].nodeName)&&"class"!==s?(i.setAttribute(s,this.element.attributes[n].nodeValue),i.innerHTML=this.element.innerHTML,"name"===s&&this.element.removeAttribute("name")):"class"===s&&i.setAttribute(s,this.element.className.split(" ").filter(function(l){return 0!==l.indexOf("ng-")}).join(" "));this.element.appendChild(i),this.element=i,Nt("ej2_instances",e,this.element)}if(this.updateHTMLAttrToElement(),this.checkAttributes(!1),(f(this.textboxOptions)||void 0===this.textboxOptions.value)&&""!==this.element.value&&this.setProperties({value:this.element.value},!0),"TEXTAREA"!==this.element.tagName&&this.element.setAttribute("type",this.type),this.element.setAttribute("role","textbox"),this.globalize=new Vr(this.locale),this.l10n=new es("textbox",{placeholder:this.placeholder},this.locale),""!==this.l10n.getConstant("placeholder")&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",Ui("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),"INPUT"===this.element.tagName&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",Ui("textarea"));var a=["placeholder","disabled","value","readonly","type","autocomplete"];for(n=0;n<this.element.attributes.length;n++){var s;this.element.hasAttribute(s=this.element.attributes[n].nodeName)&&xW.indexOf(s)<0&&"id"!==s&&"type"!==s&&"e-mappinguid"!==s&&(this.textarea.setAttribute(s,this.element.attributes[n].nodeValue),a.indexOf(s)<0&&(this.element.removeAttribute(s),n--))}}},t.prototype.checkAttributes=function(e){for(var n=0,s=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"];n<s.length;n++){var o=s[n];if(!f(this.element.getAttribute(o)))switch(o){case"disabled":if(f(this.textboxOptions)||void 0===this.textboxOptions.enabled||e){var a=!("disabled"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o));this.setProperties({enabled:a},!e)}break;case"readonly":if(f(this.textboxOptions)||void 0===this.textboxOptions.readonly||e){var l="readonly"===this.element.getAttribute(o)||""===this.element.getAttribute(o)||"true"===this.element.getAttribute(o);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.textboxOptions)||void 0===this.textboxOptions.placeholder||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"autocomplete":(f(this.textboxOptions)||void 0===this.textboxOptions.autocomplete||e)&&this.setProperties({autocomplete:"off"===this.element.autocomplete?"off":"on"},!e);break;case"value":(f(this.textboxOptions)||void 0===this.textboxOptions.value||e)&&""!==this.element.value&&this.setProperties({value:this.element.value},!e);break;case"type":(f(this.textboxOptions)||void 0===this.textboxOptions.type||e)&&this.setProperties({type:this.element.type},!e)}}},t.prototype.render=function(){var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ke.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:e,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),f(this.value)||(ke.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),f(this.value)||(this.initialValue=this.value,this.setInitialValue()),"on"!==this.autocomplete&&""!==this.autocomplete?this.respectiveElement.autocomplete=this.autocomplete:!f(this.textboxOptions)&&void 0!==this.textboxOptions.autocomplete&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ke.setWidth(this.width,this.textboxWrapper.container),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(xW.indexOf(n)>-1)if("class"===n){var s=this.getInputValidClassList(this.htmlAttributes[n]);""!==s&&N([this.textboxWrapper.container],s.split(" "))}else if("style"===n){var o=this.textboxWrapper.container.getAttribute(n);o=f(o)?this.htmlAttributes[n]:o+this.htmlAttributes[n],this.textboxWrapper.container.setAttribute(n,o)}else this.textboxWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHTMLAttrToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];xW.indexOf(n)<0&&this.element.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){ke.setCssClass(this.getInputValidClassList(e),[this.textboxWrapper.container],this.getInputValidClassList(i))},t.prototype.getInputValidClassList=function(e){var i=e;return!f(e)&&""!==e&&(i=e.replace(/\s+/g," ").trim()),i},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){T.add(this.respectiveElement,"focus",this.focusHandler,this),T.add(this.respectiveElement,"blur",this.focusOutHandler,this),T.add(this.respectiveElement,"input",this.inputHandler,this),T.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&T.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&T.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var e=this.textboxWrapper.container.querySelector(".e-float-text");f(e)||(e.classList.add("e-label-top"),e.classList.contains("e-label-bottom")&&e.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(e){var i=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=e,this.isProtectedOnChange=i},t.prototype.resetForm=function(){if(this.resetValue(this.isAngular?"":this.initialValue),!f(this.textboxWrapper)){var e=this.textboxWrapper.container.querySelector(".e-float-text");!f(e)&&"Always"!==this.floatLabelType&&(f(this.initialValue)||""===this.initialValue?(e.classList.add("e-label-bottom"),e.classList.remove("e-label-top")):""!==this.initialValue&&(e.classList.add("e-label-top"),e.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(e){this.trigger("focus",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.focusOutHandler=function(e){(null!==this.previousValue||null!==this.value||""!==this.respectiveElement.value)&&this.previousValue!==this.value&&this.raiseChangeEvent(e,!0),this.trigger("blur",{container:this.textboxWrapper.container,event:e,value:this.value})},t.prototype.inputHandler=function(e){var n={event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(this.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",n),e.stopPropagation()},t.prototype.changeHandler=function(e){this.setProperties({value:this.respectiveElement.value},!0),this.raiseChangeEvent(e,!0),e.stopPropagation()},t.prototype.raiseChangeEvent=function(e,i){var n={event:e,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:i||!1,isInteracted:i||!1};this.preventChange=!1,this.trigger("change",n),this.previousValue=this.value,"INPUT"===this.element.tagName&&this.multiline&&"mozilla"===Z.info.name&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&"TEXTAREA"!==this.respectiveElement.tagName&&(this.enabled?T.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):T.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(e){if(e.preventDefault(),(!this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.textboxWrapper.container.classList.contains("e-static-clear"))&&(ke.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0),this.trigger("input",{event:e,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container}),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(e,!0),U(this.element,"form"))){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.unWireEvents=function(){T.remove(this.respectiveElement,"focus",this.focusHandler),T.remove(this.respectiveElement,"blur",this.focusOutHandler),T.remove(this.respectiveElement,"input",this.inputHandler),T.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&T.remove(this.formElement,"reset",this.resetForm),!f(this.textboxWrapper.container.querySelector(".e-float-text"))&&"Auto"===this.floatLabelType&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&T.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),"INPUT"===this.element.tagName&&this.multiline&&(le(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),f(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),le(this.textboxWrapper.container)),this.textboxWrapper=null,r.prototype.destroy.call(this)},t.prototype.addIcon=function(e,i){ke.addIcon(e,i,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.addAttributes=function(e){for(var i=0,n=Object.keys(e);i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!1},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!0},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"class"===s?this.respectiveElement.classList.add(e[s]):"placeholder"===s?(this.setProperties({placeholder:e[s]},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.setAttribute(s,e[s])}},t.prototype.removeAttributes=function(e){for(var i=0,n=e;i<n.length;i++){var s=n[i];"disabled"===s?(this.setProperties({enabled:!0},!0),ke.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):"readonly"===s?(this.setProperties({readonly:!1},!0),ke.setReadonly(this.readonly,this.respectiveElement)):"placeholder"===s?(this.setProperties({placeholder:null},!0),ke.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(s)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&N([this.textboxWrapper.container],[hJ]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&z([this.textboxWrapper.container],[hJ]))},el([E("text")],t.prototype,"type",void 0),el([E(!1)],t.prototype,"readonly",void 0),el([E(null)],t.prototype,"value",void 0),el([E("Never")],t.prototype,"floatLabelType",void 0),el([E("")],t.prototype,"cssClass",void 0),el([E(null)],t.prototype,"placeholder",void 0),el([E("on")],t.prototype,"autocomplete",void 0),el([E({})],t.prototype,"htmlAttributes",void 0),el([E(!1)],t.prototype,"multiline",void 0),el([E(!0)],t.prototype,"enabled",void 0),el([E(!1)],t.prototype,"showClearButton",void 0),el([E(!1)],t.prototype,"enablePersistence",void 0),el([E(null)],t.prototype,"width",void 0),el([q()],t.prototype,"created",void 0),el([q()],t.prototype,"destroyed",void 0),el([q()],t.prototype,"change",void 0),el([q()],t.prototype,"blur",void 0),el([q()],t.prototype,"focus",void 0),el([q()],t.prototype,"input",void 0),el([si],t)}(Ji),sn={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"};function Ml(r,t){var e={};if(f(r)||"string"==typeof r||"number"==typeof r||!f(r.isHeader))return r;for(var i=0,n=Object.keys(t);i<n.length;i++){var o=t[n[i]],a=f(o)||"string"!=typeof o?void 0:Q(o,r);f(a)||(e[o]=a)}return e}function UB(r){if(r)try{return document.querySelector(r)?Pi(document.querySelector(r).innerHTML.trim()):Pi(r)}catch{return Pi(r)}}function Wve(r){for(var t,e=r.childNodes,i=0;i<e.length;i++)if(3===(t=e[i]).nodeType)return t;return null}!function(r){r.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},e={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:r.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function n(ie,Ie,Te,ce,Re){return Ee(ie,s(ie,Ie,Te,ce,Re),null,ce)}function s(ie,Ie,Te,ce,Re){var je=[],be=he({},e,ce);sn=G(be.moduleName);for(var Me=P(),He=0;He<Ie.length;He++)if(!f(Ie[He])){var Ut;be.itemCreating&&"function"==typeof be.itemCreating&&be.itemCreating({dataSource:Ie,curData:Ie[He],text:Ie[He],options:be}),Ut=Te?j(ie,Ie[He],void 0,null,null,[],null,Me,He,ce):fe(ie,Ie[He],void 0,null,null,ce,Re),be.itemCreated&&"function"==typeof be.itemCreated&&be.itemCreated({dataSource:Ie,curData:Ie[He],text:Ie[He],item:Ut,options:be}),je.push(Ut)}return je}function o(ie,Ie,Te,ce,Re,je){var be=he({},e,Te);sn=G(be.moduleName);var Ut,Me=!je||"listview"!==je.getModuleName()&&"multiselect"!==je.getModuleName()?he({},r.defaultMappedFields,be.fields):be.fields,He=he({},t,be.ariaAttributes),Gt=[];ce&&(He.level=ce);var vi,ki,Qt=[];Ie&&Ie.length&&!f(C(Ie).item)&&!C(Ie).item.hasOwnProperty(Me.id)&&(Ut=P());for(var Yi=0;Yi<Ie.length;Yi++){var ni=Ml(Ie[Yi],Me);if(!f(Ie[Yi])){be.itemCreating&&"function"==typeof be.itemCreating&&be.itemCreating({dataSource:Ie,curData:Ie[Yi],text:ni[Me.text],options:be,fields:Me});var ss=Ie[Yi];be.itemCreating&&"function"==typeof be.itemCreating&&(ni=Ml(Ie[Yi],Me)),ni.hasOwnProperty(Me.id)&&!f(ni[Me.id])&&(Ut=ni[Me.id]);var ue=[];if(be.showCheckBox&&(be.itemNavigable&&(ni[Me.url]||ni[Me.urlAttributes])?Gt.push(ie("input",{className:sn.check,attrs:{type:"checkbox"}})):ue.push(ie("input",{className:sn.check,attrs:{type:"checkbox"}}))),!0===Re)be.showIcon&&ni.hasOwnProperty(Me.iconCss)&&!f(ni[Me.iconCss])&&ue.push(ie("span",{className:sn.icon+" "+ni[Me.iconCss]})),ki=(vi=j(ie,ss,ni,Me,be.itemClass,ue,!(!ss.hasOwnProperty("isHeader")||!ss.isHeader),Ut,Yi,Te)).querySelector("."+sn.anchorWrap),be.itemNavigable&&Gt.length&&mi(Gt,vi.firstElementChild);else{if((vi=fe(ie,ss,ni,Me,be.itemClass,Te,je)).classList.add(sn.level+"-"+He.level),vi.setAttribute("aria-level",He.level.toString()),ki=vi.querySelector("."+sn.anchorWrap),ni.hasOwnProperty(Me.tooltip)&&vi.setAttribute("title",ni[Me.tooltip]),ni.hasOwnProperty(Me.htmlAttributes)&&ni[Me.htmlAttributes]&&S(vi,ni[Me.htmlAttributes]),ni.hasOwnProperty(Me.enabled)&&!1===ni[Me.enabled]&&vi.classList.add(sn.disabled),ni.hasOwnProperty(Me.isVisible)&&!1===ni[Me.isVisible]&&(vi.style.display="none"),ni.hasOwnProperty(Me.imageUrl)&&!f(ni[Me.imageUrl])&&!be.template){var Ae={src:ni[Me.imageUrl]};io(Ae,ni[Me.imageAttributes]);var St=ie("img",{className:sn.image,attrs:Ae});ki?ki.insertAdjacentElement("afterbegin",St):mi([St],vi.firstElementChild)}if(be.showIcon&&ni.hasOwnProperty(Me.iconCss)&&!f(ni[Me.iconCss])&&!be.template){var yi=ie("div",{className:sn.icon+" "+ni[Me.iconCss]});ki?ki.insertAdjacentElement("afterbegin",yi):mi([yi],vi.firstElementChild)}ue.length&&mi(ue,vi.firstElementChild),be.itemNavigable&&Gt.length&&mi(Gt,vi.firstElementChild),B(ie,ni,Me,0,be,vi,He.level)}ki&&N([vi],[sn.navigable]),be.itemCreated&&"function"==typeof be.itemCreated&&be.itemCreated({dataSource:Ie,curData:Ie[Yi],text:ni[Me.text],item:vi,options:be,fields:Me}),Gt=[],Qt.push(vi)}}return Qt}function a(ie,Ie,Te,ce,Re,je){var be=he({},e,Te);return Ee(ie,o(ie,Ie,Te,ce,Re,je),be.listClass,Te)}function h(ie,Ie){if(Ie&&ie)return Array.prototype.slice.call(Ie).indexOf(ie)}function d(ie,Ie,Te){if(void 0===Te&&(Te=new ii),"Ascending"===ie)Te.sortBy(Ie,"ascending",!0);else if("Descending"===ie)Te.sortBy(Ie,"descending",!0);else for(var ce=0;ce<Te.queries.length;ce++)"onSortBy"===Te.queries[ce].fn&&Te.queries.splice(ce,1);return Te}function m(ie,Ie){return new Qe(ie).executeLocal(Ie)}function C(ie){for(var Te=0;Te<ie.length;Te++)if(!f(ie[Te]))return{typeof:typeof ie[Te],item:ie[Te]};return{typeof:null,item:null}}function S(ie,Ie){var Te={};io(Te,Ie),Te.class&&(N([ie],Te.class.split(" ")),delete Te.class),ze(ie,Te)}function A(ie){for(var Ie={},Te=ie.attributes,ce=0;ce<Te.length;ce++)Ie[Te[ce].nodeName]=Te[ce].nodeValue;return Ie}function P(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function B(ie,Ie,Te,ce,Re,je,be){var Me=Ie[Te.child]||[],He=Ie[Te.hasChildren];if(Me.length&&(He=!0,je.classList.add(sn.hasChild),Re.processSubChild)){var Ut=a(ie,Me,Re,++be);je.appendChild(Ut)}Re.expandCollapse&&He&&!Re.template&&(je.firstElementChild.classList.add(sn.iconWrapper),("Left"===Re.expandIconPosition?mi:Kt)([ie("div",{className:"e-icons "+Re.expandIconClass})],je.querySelector("."+sn.textContent)))}function j(ie,Ie,Te,ce,Re,je,be,Me,He,Ut){var Yi,ni,Gt=he({},e,Ut),Qt=he({},t,Gt.ariaAttributes),vi=Ie,ki=Ie;"string"!=typeof Ie&&"number"!=typeof Ie&&"boolean"!=typeof Ie&&(Yi=Ie,vi="boolean"==typeof Te[ce.text]||"number"==typeof Te[ce.text]?Te[ce.text]:Te[ce.text]||"",ki=Te[ce.value]),ni=f(Yi)||f(Te[ce.id])||""===Te[ce.id]?Me+"-"+He:Me;var Qn=ie("li",{className:(!0===be?sn.group:sn.li)+" "+(f(Re)?"":Re),id:ni,attrs:""!==Qt.groupItemRole&&""!==Qt.itemRole?{role:!0===be?Qt.groupItemRole:Qt.itemRole}:{}});return Yi&&Te.hasOwnProperty(ce.enabled)&&"false"===Te[ce.enabled].toString()&&Qn.classList.add(sn.disabled),be?Qn.innerText=vi:(Qn.setAttribute("data-value",f(ki)?"null":ki),Qn.setAttribute("role","option"),Yi&&Te.hasOwnProperty(ce.htmlAttributes)&&Te[ce.htmlAttributes]&&S(Qn,Te[ce.htmlAttributes]),je.length&&!Gt.itemNavigable&&Kt(je,Qn),Yi&&(Te[ce.url]||Te[ce.urlAttributes]&&Te[ce.urlAttributes].href)?Qn.appendChild(ne(ie,Yi,ce,vi,je,Gt.itemNavigable)):(je.length&&Gt.itemNavigable&&Kt(je,Qn),Qn.appendChild(document.createTextNode(vi)))),Qn}function G(ie){return{li:"e-"+ie+"-item",ul:"e-"+ie+"-parent e-ul",group:"e-"+ie+"-group-item",icon:"e-"+ie+"-icon",text:"e-"+ie+"-text",check:"e-"+ie+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+ie+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+ie+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function ne(ie,Ie,Te,ce,Re,je){var He,be=Ml(Ie,Te),Me={href:be[Te.url]};if(be.hasOwnProperty(Te.urlAttributes)&&be[Te.urlAttributes]&&(io(Me,be[Te.urlAttributes]),Me.href=be[Te.url]?be[Te.url]:be[Te.urlAttributes].href),je){He=ie("a",{className:sn.text+" "+sn.url});var Ut=ie("div",{className:sn.anchorWrap});Re&&Re.length&&Kt(Re,Ut),Ut.appendChild(document.createTextNode(ce)),Kt([Ut],He)}else He=ie("a",{className:sn.text+" "+sn.url,innerHTML:ce});return S(He,Me),He}function fe(ie,Ie,Te,ce,Re,je,be){var Gt,Qt,vi,Me=he({},e,je),He=he({},t,Me.ariaAttributes),Ut=Ie;"string"!=typeof Ie&&"number"!=typeof Ie&&(vi=Ie,Ut=Te[ce.text]||"",Gt=f(Te._id)?Te[ce.id]:Te._id,Qt=!(!Ie.hasOwnProperty("isHeader")||!Ie.isHeader));var ki=ie("li",{className:(!0===Qt?sn.group:sn.li)+" "+(f(Re)?"":Re),attrs:""!==He.groupItemRole&&""!==He.itemRole?{role:!0===Qt?He.groupItemRole:He.itemRole}:{}});if(f(Gt)?ki.setAttribute("data-uid",P()):ki.setAttribute("data-uid",Gt),Qt&&je&&je.groupTemplate){var Yi=UB(je.groupTemplate);be&&"listview"!==be.getModuleName()?(ni=Yi(Ie,be,"groupTemplate",Me.groupTemplateID,!!Me.isStringTemplate,null,ki))&&Kt(ni,ki):Kt(Yi(Ie,be,"groupTemplate",Me.groupTemplateID,!!Me.isStringTemplate),ki)}else if(!Qt&&je&&je.template){var ni;Yi=UB(je.template),be&&"listview"!==be.getModuleName()?(ni=Yi(Ie,be,"template",Me.templateID,!!Me.isStringTemplate,null,ki))&&Kt(ni,ki):Kt(Yi(Ie,be,"template",Me.templateID,!!Me.isStringTemplate),ki)}else{var Qn=ie("div",{className:sn.textContent,attrs:""!==He.wrapperRole?{role:He.wrapperRole}:{}});if(vi&&(Te[ce.url]||Te[ce.urlAttributes]&&Te[ce.urlAttributes].href))Qn.appendChild(ne(ie,vi,ce,Ut,null,Me.itemNavigable));else{var ss=ie("span",{className:sn.text,attrs:""!==He.itemText?{role:He.itemText}:{}});je&&je.enableHtmlSanitizer?ss.innerText=Ut:ss.innerHTML=Ut,Qn.appendChild(ss)}ki.appendChild(Qn)}return ki}function Ee(ie,Ie,Te,ce){var Re=he({},e,ce),je=he({},t,Re.ariaAttributes),be=ie("ul",{className:(sn=G(Re.moduleName)).ul+" "+(f(Te)?"":Te),attrs:""!==je.listRole?{role:je.listRole}:{}});return Kt(Ie,be),be}r.createList=function i(ie,Ie,Te,ce,Re){var je=he({},e,Te),be=he({},t,je.ariaAttributes),Me=C(Ie).typeof;return"string"===Me||"number"===Me?n(ie,Ie,ce,Te,Re):a(ie,Ie,Te,be.level,ce,Re)},r.createListFromArray=n,r.createListItemFromArray=s,r.createListItemFromJson=o,r.createListFromJson=a,r.getSiblingLI=function l(ie,Ie,Te){if(sn=G(e.moduleName),ie&&ie.length){var ce,Re,je=Array.prototype.slice.call(ie);for(ce=je[(Re=Ie?h(Ie,je):!0===Te?je.length:-1)+(!0===Te?-1:1)];ce&&(!Zs(ce)||ce.classList.contains(sn.disabled));)ce=je[Re+=!0===Te?-1:1];return ce}},r.indexOf=h,r.groupDataSource=function u(ie,Ie,Te){void 0===Te&&(Te="None");var ce=he({},r.defaultMappedFields,Ie),Re=(new ii).group(ce.groupBy),je=m(ie,Re=d(Te,"key",Re));ie=[];for(var be=0;be<je.length;be++){var Me=je[be].items,He={};He[ce.text]=je[be].key,He.isHeader=!0;var Gt=ce.text;"id"===Gt&&(He[Gt="text"]=je[be].key),He._id="group-list-item-"+(je[be].key?je[be].key.toString().trim():"undefined"),He.items=Me,ie.push(He);for(var Qt=0;Qt<Me.length;Qt++)ie.push(Me[Qt])}return ie},r.addSorting=d,r.getDataSource=m,r.createJsonFromElement=function v(ie,Ie){var Te=he({},e,Ie),ce=he({},r.defaultMappedFields,Te.fields),Re=ie.cloneNode(!0),je=[];Re.classList.add("json-parent");var be=Re.querySelectorAll(".json-parent>li");Re.classList.remove("json-parent");for(var Me=0;Me<be.length;Me++){for(var He=be[Me],Ut=He.querySelector("a"),Gt=He.querySelector("ul"),Qt={},vi=Ut?Ut.childNodes:He.childNodes,ki=Object.keys(vi),Yi=0;Yi<vi.length;Yi++)vi[Number(ki[Yi])].hasChildNodes()||(Qt[ce.text]=vi[Number(ki[Yi])].textContent);var ni=A(He);ni.id?(Qt[ce.id]=ni.id,delete ni.id):Qt[ce.id]=P(),Object.keys(ni).length&&(Qt[ce.htmlAttributes]=ni),Ut&&(ni=A(Ut),Object.keys(ni).length&&(Qt[ce.urlAttributes]=ni)),Gt&&(Qt[ce.child]=v(Gt,Ie)),je.push(Qt)}return je},r.renderContentTemplate=function _(ie,Ie,Te,ce,Re,je){for(var Qt,be=ie("ul",{className:(sn=G(e.moduleName)).ul,attrs:{role:"presentation"}}),Me=he({},e,Re),He=he({},r.defaultMappedFields,ce),Ut=UB(Ie),Gt=[],vi=P(),ki=0;ki<Te.length;ki++){var Yi=Ml(Te[ki],He),ni=Te[ki],Qn=ni.isHeader;Qt="string"==typeof Te[ki]||"number"==typeof Te[ki]?ni:Yi[He.value],Me.itemCreating&&"function"==typeof Me.itemCreating&&Me.itemCreating({dataSource:Te,curData:ni,text:Qt,options:Me,fields:He}),Me.itemCreating&&"function"==typeof Me.itemCreating&&(Yi=Ml(Te[ki],He),Qt="string"==typeof Te[ki]||"number"==typeof Te[ki]?ni:Yi[He.value]);var ue=ie("li",{id:vi+"-"+ki,className:Qn?sn.group:sn.li,attrs:{role:"presentation"}});if(Qn)ue.innerText="string"==typeof Te[ki]||"number"==typeof Te[ki]?ni:Yi[He.text];else{var Ae=Qn?Me.groupTemplateID:Me.templateID;if(Qn)je&&"listview"!=je.getModuleName()?(St=Ut(ni,je,"headerTemplate",Ae,!!Me.isStringTemplate,null,ue))&&Kt(St,ue):Kt(Ut(ni,je,"headerTemplate",Ae,!!Me.isStringTemplate),ue);else if(je&&"listview"!==je.getModuleName()){var St;(St=Ut(ni,je,"template",Ae,!!Me.isStringTemplate,null,ue))&&Kt(St,ue)}else Kt(Ut(ni,je,"template",Ae,!!Me.isStringTemplate),ue);ue.setAttribute("data-value",f(Qt)?"null":Qt),ue.setAttribute("role","option")}Me.itemCreated&&"function"==typeof Me.itemCreated&&Me.itemCreated({dataSource:Te,curData:ni,text:Qt,item:ue,options:Me,fields:He}),Gt.push(ue)}return Kt(Gt,be),be},r.renderGroupTemplate=function M(ie,Ie,Te,ce,Re,je){for(var be=UB(ie),Me=he({},r.defaultMappedFields,Te),He=he({},e,Re),Ut=Me.groupBy,Gt=0,Qt=ce;Gt<Qt.length;Gt++){var vi=Qt[Gt],ki={};if(ki[Ut]=vi.textContent,vi.innerHTML="",je&&"listview"!==je.getModuleName()){var Yi=be(ki,je,"groupTemplate",He.groupTemplateID,!!He.isStringTemplate,null,vi);Yi&&Kt(Yi,vi)}else Kt(be(ki,je,"groupTemplate",He.groupTemplateID,!!He.isStringTemplate),vi)}return ce},r.generateId=P,r.generateUL=Ee,r.generateIcon=function Pe(ie,Ie,Te,ce){var Re=he({},e,ce);return sn=G(Re.moduleName),("Left"===Re.expandIconPosition?mi:Kt)([ie("div",{className:"e-icons "+Re.expandIconClass+" "+(f(Te)?"":Te)})],Ie.querySelector("."+sn.textContent)),Ie}}(cn||(cn={}));var $ve=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),lf=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Hd_RTL=(new Up,"e-rtl"),hf=function(r){function t(e,i){return r.call(this,e,i)||this}return $ve(t,r),t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=$i(this.element,{selector:".e-btn"}),this.renderComplete()},t.prototype.initialize=function(){if(this.cssClass&&N([this.element],this.cssClass.split(" ")),this.isPrimary&&this.element.classList.add("e-primary"),this.content){var e=this.enableHtmlSanitizer?Nn.sanitize(this.content):this.content;this.element.innerHTML=e}this.setIconCss(),this.enableRtl&&this.element.classList.add(Hd_RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(e){this.element.disabled=e},t.prototype.setIconCss=function(){if(this.iconCss){var e=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(e.classList.add("e-icon-"+this.iconPosition.toLowerCase()),("Top"===this.iconPosition||"Bottom"===this.iconPosition)&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add("e-icon-btn");var i=this.element.childNodes[0];!i||"Left"!==this.iconPosition&&"Top"!==this.iconPosition?this.element.appendChild(e):this.element.insertBefore(e,i)}},t.prototype.wireEvents=function(){this.isToggle&&T.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&T.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var e=["e-primary",Hd_RTL,"e-icon-btn","e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(e=e.concat(this.cssClass.split(" "))),r.prototype.destroy.call(this),z([this.element],e),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var i=this.element.querySelector("span.e-btn-icon");i&&le(i),this.unWireEvents(),ir&&this.removeRippleEffect()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(e,i){for(var n=this.element.querySelector("span.e-btn-icon"),s=0,o=Object.keys(e);s<o.length;s++)switch(o[s]){case"isPrimary":e.isPrimary?this.element.classList.add("e-primary"):this.element.classList.remove("e-primary");break;case"disabled":this.controlStatus(e.disabled);break;case"iconCss":n?e.iconCss?(n.className="e-btn-icon "+e.iconCss,this.element.textContent.trim()&&n.classList.add("Left"===this.iconPosition?"e-icon-left":"e-icon-right")):le(n):this.setIconCss();break;case"iconPosition":z([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),(n=this.element.querySelector("span.e-btn-icon"))&&le(n),this.setIconCss();break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"enableRtl":e.enableRtl?this.element.classList.add(Hd_RTL):this.element.classList.remove(Hd_RTL);break;case"content":Wve(this.element)||this.element.classList.remove("e-icon-btn"),this.enableHtmlSanitizer&&(e.content=Nn.sanitize(e.content)),this.element.innerHTML=e.content,this.setIconCss();break;case"isToggle":e.isToggle?T.add(this.element,"click",this.btnClickHandler,this):(T.remove(this.element,"click",this.btnClickHandler),z([this.element],["e-active"]))}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},lf([E("Left")],t.prototype,"iconPosition",void 0),lf([E("")],t.prototype,"iconCss",void 0),lf([E(!1)],t.prototype,"disabled",void 0),lf([E(!1)],t.prototype,"isPrimary",void 0),lf([E("")],t.prototype,"cssClass",void 0),lf([E("")],t.prototype,"content",void 0),lf([E(!1)],t.prototype,"isToggle",void 0),lf([E()],t.prototype,"locale",void 0),lf([E(!1)],t.prototype,"enableHtmlSanitizer",void 0),lf([q()],t.prototype,"created",void 0),lf([si],t)}(Ji),dye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),WJ=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},oS="e-rtl",Jb="e-overlay",H_="e-nav-arrow",V_="e-nav-right-arrow",XB="e-nav-left-arrow",aS="e-scroll-nav",sq="e-scroll-right-nav",qJ="e-scroll-left-nav",GJ="e-scroll-device",QB="e-scroll-overlay",oq="e-scroll-right-overlay",aq="e-scroll-left-overlay",JB=function(r){function t(e,i){return r.call(this,e,i)||this}return dye(t,r),t.prototype.preRender=function(){this.browser=Z.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Z.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Ui("hscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(oS)},t.prototype.render=function(){this.touchModule=new Ja(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),T.add(this.scrollEle,"scroll",this.scrollHandler,this),this.isDevice?(this.element.classList.add(GJ),this.createOverlay(this.element)):this.createNavIcon(this.element),this.setScrollState()},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetWidth,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=this.createElement("div",{className:"e-hscroll-content"}),i=this.createElement("div",{className:"e-hscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflowX="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"hScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",e.classList.remove("e-hscroll"),e.classList.remove(GJ);var i=Ke(".e-"+e.id+"_nav."+aS,e),n=Ke("."+QB,e);[].slice.call(n).forEach(function(l){le(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),le(this.scrollEle),i.length>0&&(le(i[0]),f(i[1])||le(i[1])),T.remove(this.scrollEle,"scroll",this.scrollHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ke(".e-scroll-nav:not(."+Jb+")",this.element);e?this.element.classList.add(Jb):this.element.classList.remove(Jb),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlay=function(e){var i=e.id.concat("_nav"),n=this.createElement("div",{className:QB+" "+oq}),s="e-"+e.id.concat("_nav "+aS+" "+sq),o=this.createElement("div",{id:i.concat("_right"),className:s}),a=this.createElement("div",{className:V_+" "+H_+" e-icons"});o.appendChild(a);var l=this.createElement("div",{className:QB+" "+aq});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+aS+" "+sq),s={role:"button",id:i.concat("_right"),"aria-label":"Scroll right"},o=this.createElement("div",{className:n,attrs:s});o.setAttribute("aria-disabled","false");var a=this.createElement("div",{className:V_+" "+H_+" e-icons"}),l="e-"+e.id.concat("_nav "+aS+" "+qJ),h={role:"button",id:i.concat("_left"),"aria-label":"Scroll left"},u=this.createElement("div",{className:l+" "+Jb,attrs:h});u.setAttribute("aria-disabled","true");var d=this.createElement("div",{className:XB+" "+H_+" e-icons"});u.appendChild(d),o.appendChild(a),e.appendChild(o),e.insertBefore(u,e.firstChild),this.ieCheck&&(o.classList.add("e-ie-align"),u.classList.add("e-ie-align")),this.eventBinding([o,u])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Ja(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),T.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,aS)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=this.element,o=i.classList;o.contains(aS)&&(o=i.querySelector("."+H_).classList),this.contains(s,oS)&&this.browserCheck&&(e=-e),!this.contains(s,oS)||this.browserCheck||this.ieCheck?o.contains(V_)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n):o.contains(XB)?this.frameScrollRequest(e,"add",n):this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceX/(10*e.velocity):e.distanceX/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Left"===e.swipeDirection?i.scrollLeft+=n*a:"Right"===e.swipeDirection&&(i.scrollLeft-=n*a),s-=.5,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollLeft+=e:this.scrollEle.scrollLeft-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Ke("."+QB,this.element)).forEach(function(l){e-=l.offsetWidth});var a=function(){var l,h;s.contains(s.element,oS)&&s.browserCheck?(l=-e,h=-10):(l=e,h=10),l<10?window.cancelAnimationFrame(h):(s.scrollUpdating(h,i),e-=h,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceX;this.ieCheck&&this.contains(this.element,oS)&&(n=-n),"Left"===e.scrollDirection?i.scrollLeft=i.scrollLeft+n:"Right"===e.scrollDirection&&(i.scrollLeft=i.scrollLeft-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+H_);f(e)?ri(s,[V_],[XB]):ri(s,[XB],[V_])}else e&&i&&(e.classList.add(Jb),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(Jb),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0"));this.repeatScroll()},t.prototype.scrollHandler=function(e){var i=e.target,n=i.offsetWidth,o=this.element.querySelector("."+qJ),a=this.element.querySelector("."+sq),l=this.element.querySelector("."+aq),h=this.element.querySelector("."+oq),u=i.scrollLeft;if(u<=0&&(u=-u),this.isDevice&&(this.enableRtl&&!(this.browserCheck||this.ieCheck)&&(l=this.element.querySelector("."+oq),h=this.element.querySelector("."+aq)),l.style.width=u<40?u+"px":"40px",h.style.width=i.scrollWidth-Math.ceil(n+u)<40?i.scrollWidth-Math.ceil(n+u)+"px":"40px"),0===u)this.arrowDisabling(o,a);else if(Math.ceil(n+u+.1)>=i.scrollWidth)this.arrowDisabling(a,o);else{var d=this.element.querySelector("."+aS+"."+Jb);d&&(d.classList.remove(Jb),d.setAttribute("aria-disabled","false"),d.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(oS):this.element.classList.remove(oS)}},WJ([E(null)],t.prototype,"scrollStep",void 0),WJ([si],t)}(Ji),mye=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$J=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},lq="e-rtl",eC="e-overlay",z_="e-nav-arrow",eH="e-nav-up-arrow",j_="e-nav-down-arrow",lS="e-scroll-nav",YJ="e-scroll-up-nav",hq="e-scroll-down-nav",ZJ="e-scroll-device",tH="e-scroll-overlay",XJ="e-scroll-up-overlay",QJ="e-scroll-down-overlay",GT=function(r){function t(e,i){return r.call(this,e,i)||this}return mye(t,r),t.prototype.preRender=function(){this.browser=Z.info.name,this.browserCheck="mozilla"===this.browser,this.isDevice=Z.isDevice,this.customStep=!0;var e=this.element;this.ieCheck="edge"===this.browser||"msie"===this.browser,this.initialize(),""===e.id&&(e.id=Ui("vscroll"),this.uniqueId=!0),e.style.display="block",this.enableRtl&&e.classList.add(lq)},t.prototype.render=function(){this.touchModule=new Ja(this.element,{scroll:this.touchHandler.bind(this),swipe:this.swipeHandler.bind(this)}),T.add(this.scrollEle,"scroll",this.scrollEventHandler,this),this.isDevice?(this.element.classList.add(ZJ),this.createOverlayElement(this.element)):this.createNavIcon(this.element),this.setScrollState(),T.add(this.element,"wheel",this.wheelEventHandler,this)},t.prototype.setScrollState=function(){f(this.scrollStep)||this.scrollStep<0?(this.scrollStep=this.scrollEle.offsetHeight,this.customStep=!1):this.customStep=!0},t.prototype.initialize=function(){var e=ti("div",{className:"e-vscroll-content"}),i=ti("div",{className:"e-vscroll-bar"});i.setAttribute("tabindex","-1");for(var n=this.element,o=0,a=[].slice.call(n.children);o<a.length;o++)e.appendChild(a[o]);i.appendChild(e),n.appendChild(i),i.style.overflow="hidden",this.scrollEle=i,this.scrollItems=e},t.prototype.getPersistData=function(){return this.addOnPersist(["scrollStep"])},t.prototype.getModuleName=function(){return"vScroll"},t.prototype.destroy=function(){var e=this.element;e.style.display="",z([this.element],["e-vscroll",ZJ]);var i=Ke(".e-"+e.id+"_nav."+lS,e),n=Ke("."+tH,e);[].slice.call(n).forEach(function(l){le(l)});for(var s=0,o=[].slice.call(this.scrollItems.children);s<o.length;s++)e.appendChild(o[s]);this.uniqueId&&this.element.removeAttribute("id"),le(this.scrollEle),i.length>0&&(le(i[0]),f(i[1])||le(i[1])),T.remove(this.scrollEle,"scroll",this.scrollEventHandler),this.touchModule.destroy(),this.touchModule=null,r.prototype.destroy.call(this)},t.prototype.disable=function(e){var i=Ke(".e-scroll-nav:not(."+eC+")",this.element);e?this.element.classList.add(eC):this.element.classList.remove(eC),[].slice.call(i).forEach(function(n){n.setAttribute("tabindex",e?"-1":"0")})},t.prototype.createOverlayElement=function(e){var i=e.id.concat("_nav"),n=ti("div",{className:tH+" "+QJ}),s="e-"+e.id.concat("_nav "+lS+" "+hq),o=ti("div",{id:i.concat("down"),className:s}),a=ti("div",{className:j_+" "+z_+" e-icons"});o.appendChild(a);var l=ti("div",{className:tH+" "+XJ});this.ieCheck&&o.classList.add("e-ie-align"),e.appendChild(n),e.appendChild(o),e.insertBefore(l,e.firstChild),this.eventBinding([o])},t.prototype.createNavIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav "+lS+" "+hq),s=ti("div",{id:i.concat("_down"),className:n});s.setAttribute("aria-disabled","false");var o=ti("div",{className:j_+" "+z_+" e-icons"}),a="e-"+e.id.concat("_nav "+lS+" "+YJ),l=ti("div",{id:i.concat("_up"),className:a+" "+eC});l.setAttribute("aria-disabled","true");var h=ti("div",{className:eH+" "+z_+" e-icons"});l.appendChild(h),s.appendChild(o),s.setAttribute("tabindex","0"),e.appendChild(s),e.insertBefore(l,e.firstChild),this.ieCheck&&(s.classList.add("e-ie-align"),l.classList.add("e-ie-align")),this.eventBinding([s,l])},t.prototype.onKeyPress=function(e){var i=this;"Enter"===e.key&&(this.keyTimer=window.setTimeout(function(){i.keyTimeout=!0,i.eleScrolling(10,e.target,!0)},100))},t.prototype.onKeyUp=function(e){"Enter"===e.key&&(this.keyTimeout?this.keyTimeout=!1:e.target.click(),clearTimeout(this.keyTimer))},t.prototype.eventBinding=function(e){var i=this;[].slice.call(e).forEach(function(n){new Ja(n,{tapHold:i.tabHoldHandler.bind(i),tapHoldThreshold:500}),n.addEventListener("keydown",i.onKeyPress.bind(i)),n.addEventListener("keyup",i.onKeyUp.bind(i)),n.addEventListener("mouseup",i.repeatScroll.bind(i)),n.addEventListener("touchend",i.repeatScroll.bind(i)),n.addEventListener("contextmenu",function(s){s.preventDefault()}),T.add(n,"click",i.clickEventHandler,i)})},t.prototype.repeatScroll=function(){clearInterval(this.timeout)},t.prototype.tabHoldHandler=function(e){var i=this,n=e.originalEvent.target;n=this.contains(n,lS)?n.firstElementChild:n,this.timeout=window.setInterval(function(){i.eleScrolling(10,n,!0)},50)},t.prototype.contains=function(e,i){return e.classList.contains(i)},t.prototype.eleScrolling=function(e,i,n){var s=i.classList;s.contains(lS)&&(s=i.querySelector("."+z_).classList),s.contains(j_)?this.frameScrollRequest(e,"add",n):s.contains(eH)&&this.frameScrollRequest(e,"",n)},t.prototype.clickEventHandler=function(e){this.eleScrolling(this.scrollStep,e.target,!1)},t.prototype.wheelEventHandler=function(e){e.preventDefault(),this.frameScrollRequest(this.scrollStep,e.deltaY>0?"add":"",!1)},t.prototype.swipeHandler=function(e){var n,i=this.scrollEle;n=e.velocity<=1?e.distanceY/(10*e.velocity):e.distanceY/e.velocity;var s=.5,o=function(){var a=Math.sin(s);a<=0?window.cancelAnimationFrame(a):("Up"===e.swipeDirection?i.scrollTop+=n*a:"Down"===e.swipeDirection&&(i.scrollTop-=n*a),s-=.02,window.requestAnimationFrame(o))};o()},t.prototype.scrollUpdating=function(e,i){"add"===i?this.scrollEle.scrollTop+=e:this.scrollEle.scrollTop-=e},t.prototype.frameScrollRequest=function(e,i,n){var s=this;if(n)this.scrollUpdating(e,i);else{this.customStep||[].slice.call(Ke("."+tH,this.element)).forEach(function(l){e-=l.offsetHeight});var a=function(){e<10?window.cancelAnimationFrame(10):(s.scrollUpdating(10,i),e-=10,window.requestAnimationFrame(a))};a()}},t.prototype.touchHandler=function(e){var i=this.scrollEle,n=e.distanceY;"Up"===e.scrollDirection?i.scrollTop=i.scrollTop+n:"Down"===e.scrollDirection&&(i.scrollTop=i.scrollTop-n)},t.prototype.arrowDisabling=function(e,i){if(this.isDevice){var s=(f(e)?i:e).querySelector("."+z_);f(e)?ri(s,[j_],[eH]):ri(s,[eH],[j_])}else e.classList.add(eC),e.setAttribute("aria-disabled","true"),e.removeAttribute("tabindex"),i.classList.remove(eC),i.setAttribute("aria-disabled","false"),i.setAttribute("tabindex","0");this.repeatScroll()},t.prototype.scrollEventHandler=function(e){var i=e.target,n=i.offsetHeight,s=this.element.querySelector("."+YJ),o=this.element.querySelector("."+hq),a=this.element.querySelector("."+XJ),l=this.element.querySelector("."+QJ),h=i.scrollTop;if(h<=0&&(h=-h),this.isDevice&&(a.style.height=h<40?h+"px":"40px",l.style.height=i.scrollHeight-Math.ceil(n+h)<40?i.scrollHeight-Math.ceil(n+h)+"px":"40px"),0===h)this.arrowDisabling(s,o);else if(Math.ceil(n+h+.1)>=i.scrollHeight)this.arrowDisabling(o,s);else{var u=this.element.querySelector("."+lS+"."+eC);u&&(u.classList.remove(eC),u.setAttribute("aria-disabled","false"),u.setAttribute("tabindex","0"))}},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"scrollStep":this.setScrollState();break;case"enableRtl":e.enableRtl?this.element.classList.add(lq):this.element.classList.remove(lq)}},$J([E(null)],t.prototype,"scrollStep",void 0),$J([si],t)}(Ji),oee=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ps=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},pq="e-vertical",so="e-toolbar-items",Ea="e-toolbar-item",_g="e-rtl",sa="e-separator",lH="e-popup-up-icon",G_="e-popup-down-icon",aee="e-popup-open",lee="e-template",cf="e-overlay",hee="e-toolbar-text",fq="e-popup-text",df="e-overflow-show",hH="e-overflow-hide",tu="e-hor-nav",uee="e-scroll-nav",cee="e-toolbar-center",pf="e-tbar-pos",dee="e-hscroll-bar",K_="e-toolbar-pop",Iv="e-toolbar-popup",$_="e-nav-active",Y_="e-ignore",gq="e-popup-alone",Z_="e-hidden",pee="e-toolbar-multirow",fee="e-multirow-pos",mq="e-multirow-separator",vq="e-extended-separator",gee="e-extended-toolbar",uH="e-toolbar-extended",yq="e-tbar-extended",Rye=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return oee(t,r),ps([E("")],t.prototype,"id",void 0),ps([E("")],t.prototype,"text",void 0),ps([E("auto")],t.prototype,"width",void 0),ps([E("")],t.prototype,"cssClass",void 0),ps([E(!1)],t.prototype,"showAlwaysInPopup",void 0),ps([E(!1)],t.prototype,"disabled",void 0),ps([E("")],t.prototype,"prefixIcon",void 0),ps([E("")],t.prototype,"suffixIcon",void 0),ps([E(!0)],t.prototype,"visible",void 0),ps([E("None")],t.prototype,"overflow",void 0),ps([E("")],t.prototype,"template",void 0),ps([E("Button")],t.prototype,"type",void 0),ps([E("Both")],t.prototype,"showTextOn",void 0),ps([E(null)],t.prototype,"htmlAttributes",void 0),ps([E("")],t.prototype,"tooltipText",void 0),ps([E("Left")],t.prototype,"align",void 0),ps([q()],t.prototype,"click",void 0),t}(Si),mee=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.resizeContext=n.resize.bind(n),n.keyConfigs={moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",moveDown:"downarrow",popupOpen:"enter",popupClose:"escape",tab:"tab",home:"home",end:"end"},n}return oee(t,r),t.prototype.destroy=function(){var e=this;(this.isReact||this.isAngular)&&this.clearTemplate();var i=this.element.querySelectorAll(".e-control.e-btn");for([].slice.call(i).forEach(function(n){!f(n)&&!f(n.ej2_instances)&&!f(n.ej2_instances[0])&&!n.ej2_instances[0].isDestroyed&&n.ej2_instances[0].destroy()}),this.unwireEvents(),this.tempId.forEach(function(n){f(e.element.querySelector(n))||(document.body.appendChild(e.element.querySelector(n)).style.display="none")}),this.destroyItems();this.element.lastElementChild;)this.element.removeChild(this.element.lastElementChild);this.trgtEle&&(this.element.appendChild(this.ctrlTem),this.trgtEle=null,this.ctrlTem=null),this.popObj&&(this.popObj.destroy(),le(this.popObj.element)),this.activeEle&&(this.activeEle=null),this.popObj=null,this.tbarAlign=null,this.tbarItemsCol=[],this.remove(this.element,"e-toolpop"),this.cssClass&&z([this.element],this.cssClass.split(" ")),this.element.removeAttribute("style"),["aria-disabled","aria-orientation","aria-haspopup","role"].forEach(function(n){return e.element.removeAttribute(n)}),r.prototype.destroy.call(this)},t.prototype.preRender=function(){var e={enableCollision:this.enableCollision,scrollStep:this.scrollStep};this.trigger("beforeCreate",e),this.enableCollision=e.enableCollision,this.scrollStep=e.scrollStep,this.scrollModule=null,this.popObj=null,this.tempId=[],this.tbarItemsCol=this.items,this.isVertical=!!this.element.classList.contains(pq),this.isExtendedOpen=!1,this.popupPriCount=0,this.enableRtl&&this.add(this.element,_g)},t.prototype.wireEvents=function(){T.add(this.element,"click",this.clickHandler,this),window.addEventListener("resize",this.resizeContext),this.allowKeyboard&&this.wireKeyboardEvent()},t.prototype.wireKeyboardEvent=function(){this.keyModule=new In(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs}),T.add(this.element,"keydown",this.docKeyDown,this),this.element.setAttribute("tabIndex","0")},t.prototype.unwireKeyboardEvent=function(){this.keyModule&&(T.remove(this.element,"keydown",this.docKeyDown),this.keyModule.destroy(),this.keyModule=null)},t.prototype.docKeyDown=function(e){if("INPUT"!==e.target.tagName){var i=!f(this.popObj)&&Zs(this.popObj.element)&&"Extended"!==this.overflowMode;9===e.keyCode&&!0===e.target.classList.contains("e-hor-nav")&&i&&this.popObj.hide({name:"FadeOut",duration:100}),(40===e.keyCode||38===e.keyCode||35===e.keyCode||36===e.keyCode)&&e.preventDefault()}},t.prototype.unwireEvents=function(){T.remove(this.element,"click",this.clickHandler),this.destroyScroll(),this.unwireKeyboardEvent(),window.removeEventListener("resize",this.resizeContext),T.remove(document,"scroll",this.docEvent),T.remove(document,"click",this.docEvent)},t.prototype.clearProperty=function(){this.tbarEle=[],this.tbarAlgEle={lefts:[],centers:[],rights:[]}},t.prototype.docEvent=function(e){var i=U(e.target,".e-popup");this.popObj&&Zs(this.popObj.element)&&!i&&"Popup"===this.overflowMode&&this.popObj.hide({name:"FadeOut",duration:100})},t.prototype.destroyScroll=function(){this.scrollModule&&(this.tbarAlign&&this.add(this.scrollModule.element,pf),this.scrollModule.destroy(),this.scrollModule=null)},t.prototype.destroyItems=function(){if(this.element&&[].slice.call(this.element.querySelectorAll("."+Ea)).forEach(function(i){le(i)}),this.tbarAlign){var e=this.element.querySelector("."+so);[].slice.call(e.children).forEach(function(i){le(i)}),this.tbarAlign=!1,this.remove(e,pf)}this.clearProperty()},t.prototype.destroyMode=function(){this.scrollModule&&(this.remove(this.scrollModule.element,_g),this.destroyScroll()),this.remove(this.element,yq),this.remove(this.element,gee);var e=this.element.querySelector(".e-toolbar-multirow");e&&this.remove(e,pee),this.popObj&&this.popupRefresh(this.popObj.element,!0)},t.prototype.add=function(e,i){e.classList.add(i)},t.prototype.remove=function(e,i){e.classList.remove(i)},t.prototype.elementFocus=function(e){var i=e.firstElementChild;i?(i.focus(),this.activeEleSwitch(e)):e.focus()},t.prototype.clstElement=function(e,i){return e&&this.popObj&&Zs(this.popObj.element)?this.popObj.element.querySelector("."+Ea):this.element===i||e?this.element.querySelector("."+Ea+":not(."+cf+" ):not(."+sa+" ):not(."+Z_+" )"):U(i,"."+Ea)},t.prototype.keyHandling=function(e,i,n,s,o){var d,m,a=this.popObj,l=this.element,h={name:"FadeOut",duration:100},u="moveUp"===i.action?"previous":"next";switch(i.action){case"moveRight":if(this.isVertical)return;l===n?this.elementFocus(e):s||this.eleFocus(e,"next");break;case"moveLeft":if(this.isVertical)return;s||this.eleFocus(e,"previous");break;case"home":case"end":if(e){var v=U(e,".e-popup"),C=this.element.querySelector("."+uH);"Extended"===this.overflowMode&&C&&C.classList.contains("e-popup-open")&&(v="end"===i.action?C:null),v?Zs(this.popObj.element)&&(m=[].slice.call(v.children),d="home"===i.action?m[0]:m[m.length-1]):(m=this.element.querySelectorAll("."+so+" ."+Ea+":not(."+sa+")"),d="home"===i.action?m[0]:m[m.length-1]),d&&this.elementFocus(d)}break;case"moveUp":case"moveDown":if(this.isVertical)this.eleFocus(e,"moveUp"===i.action?"previous":"next");else if(a&&U(n,".e-popup")){var S=a.element;if("previous"===u&&S.firstElementChild===e||"next"===u&&S.lastElementChild===e)return;this.eleFocus(e,u)}else"moveDown"===i.action&&a&&Zs(a.element)&&this.elementFocus(e);break;case"tab":if(!o&&!s){var _=e.firstElementChild;l===n&&(this.activeEle?this.activeEle.focus():(this.activeEleRemove(_),_.focus()),this.element.removeAttribute("tabindex"))}break;case"popupClose":a&&"Extended"!==this.overflowMode&&a.hide(h);break;case"popupOpen":if(!s)return;a&&!Zs(a.element)?(a.element.style.top=l.offsetHeight+"px",a.show({name:"FadeIn",duration:100})):a.hide(h)}},t.prototype.keyActionHandler=function(e){var i=e.target;if("INPUT"!==i.tagName&&"TEXTAREA"!==i.tagName&&!this.element.classList.contains(cf)){e.preventDefault();var n=i.classList.contains(tu),s=i.classList.contains(uee),o=this.clstElement(n,i);(o||s)&&this.keyHandling(o,e,i,n,s)}},t.prototype.disable=function(e){var i=this.element;e?i.classList.add(cf):i.classList.remove(cf),i.setAttribute("tabindex",e?"-1":"0"),this.activeEle&&this.activeEle.setAttribute("tabindex",e?"-1":"0"),this.scrollModule&&this.scrollModule.disable(e),this.popObj&&(Zs(this.popObj.element)&&"Extended"!==this.overflowMode&&this.popObj.hide(),i.querySelector("#"+i.id+"_nav").setAttribute("tabindex",e?"-1":"0"))},t.prototype.eleContains=function(e){return e.classList.contains(sa)||e.classList.contains(cf)||e.getAttribute("disabled")||e.classList.contains(Z_)||!Zs(e)},t.prototype.eleFocus=function(e,i){var n=Object(e)[i+"ElementSibling"];if(n){if(this.eleContains(n))return void this.eleFocus(n,i);this.elementFocus(n)}else if(this.tbarAlign){var o=Object(e.parentElement)[i+"ElementSibling"];if(!f(o)&&0===o.children.length&&(o=Object(o)[i+"ElementSibling"]),!f(o)&&o.children.length>0)if("next"===i){var a=o.querySelector("."+Ea);this.eleContains(a)?this.eleFocus(a,i):(a.firstElementChild.focus(),this.activeEleSwitch(a))}else this.eleContains(a=o.lastElementChild)?this.eleFocus(a,i):this.elementFocus(a)}},t.prototype.clickHandler=function(e){var i=this,n=e.target,s=this.element,o=!f(U(n,"."+K_)),a=n.classList,l=U(n,"."+tu);l||(l=n),!s.children[0].classList.contains("e-hscroll")&&!s.children[0].classList.contains("e-vscroll")&&a.contains(tu)&&(a=n.querySelector(".e-icons").classList),(a.contains(lH)||a.contains(G_))&&this.popupClickHandler(s,l,_g);var h,u=U(e.target,"."+Ea);if(!f(u)&&!u.classList.contains(cf)||l.classList.contains(tu)){u&&(h=this.items[this.tbarEle.indexOf(u)]);var m={originalEvent:e,item:h};h&&!f(h.click)&&this.trigger("items["+this.tbarEle.indexOf(u)+"].click",m),m.cancel||this.trigger("clicked",m,function(v){!f(i.popObj)&&o&&!v.cancel&&"Popup"===i.overflowMode&&v.item&&"Input"!==v.item.type&&i.popObj.hide({name:"FadeOut",duration:100})})}},t.prototype.popupClickHandler=function(e,i,n){var s=this.popObj;Zs(s.element)?(i.classList.remove($_),s.hide({name:"FadeOut",duration:100})):(e.classList.contains(n)&&(s.enableRtl=!0,s.position={X:"left",Y:"top"}),0===s.offsetX&&!e.classList.contains(n)&&(s.enableRtl=!1,s.position={X:"right",Y:"top"}),s.dataBind(),s.refreshPosition(),s.element.style.top=this.getElementOffsetY()+"px","Extended"===this.overflowMode&&(s.element.style.minHeight="0px"),i.classList.add($_),s.show({name:"FadeIn",duration:100}))},t.prototype.render=function(){this.initialize(),this.renderControl(),this.wireEvents(),this.renderComplete()},t.prototype.initialize=function(){var e=it(this.width),i=it(this.height);("msie"!==Z.info.name||"auto"!==this.height||"MultiRow"===this.overflowMode)&&Ft(this.element,{height:i}),Ft(this.element,{width:e}),ze(this.element,{role:"toolbar","aria-disabled":"false","aria-haspopup":"false","aria-orientation":this.isVertical?"vertical":"horizontal"}),this.cssClass&&N([this.element],this.cssClass.split(" "))},t.prototype.renderControl=function(){var e=this.element;this.trgtEle=e.children.length>0?e.querySelector("div"):null,this.tbarAlgEle={lefts:[],centers:[],rights:[]},this.renderItems(),this.renderLayout()},t.prototype.renderLayout=function(){this.renderOverflowMode(),this.tbarAlign&&this.itemPositioning(),this.popObj&&this.popObj.element.childElementCount>1&&this.checkPopupRefresh(this.element,this.popObj.element)&&this.popupRefresh(this.popObj.element,!1),this.separator()},t.prototype.itemsAlign=function(e,i){var n,s;this.tbarEle||(this.tbarEle=[]);for(var o=0;o<e.length;o++)n=this.renderSubComponent(e[o],o),-1===this.tbarEle.indexOf(n)&&this.tbarEle.push(n),this.tbarAlign||this.tbarItemAlign(e[o],i,o),(s=i.querySelector(".e-toolbar-"+e[o].align.toLowerCase()))?(e[o].showAlwaysInPopup&&"Show"!==e[o].overflow||this.tbarAlgEle[(e[o].align+"s").toLowerCase()].push(n),s.appendChild(n)):i.appendChild(n);this.isReact&&(this.notify("render-react-toolbar-template",this.portals),this.renderReactTemplates())},t.prototype.changeOrientation=function(){var e=this.element;this.isVertical?(e.classList.remove(pq),this.isVertical=!1,("auto"===this.height||"100%"===this.height)&&(e.style.height=this.height),e.setAttribute("aria-orientation","horizontal")):(e.classList.add(pq),this.isVertical=!0,e.setAttribute("aria-orientation","vertical"),Ft(this.element,{height:it(this.height),width:it(this.width)})),this.destroyMode(),this.refreshOverflow()},t.prototype.initScroll=function(e,i){!this.scrollModule&&this.checkOverflow(e,i[0])&&(this.tbarAlign&&this.element.querySelector("."+so+" ."+cee).removeAttribute("style"),this.scrollModule=this.isVertical?new GT({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]):new JB({scrollStep:this.scrollStep,enableRtl:this.enableRtl},i[0]),this.cssClass&&N([i[0]],this.cssClass.split(" ")),this.remove(this.scrollModule.element,pf),Ft(this.element,{overflow:"hidden"}))},t.prototype.itemWidthCal=function(e){var s,i=this,n=0;return[].slice.call(Ke("."+Ea,e)).forEach(function(o){Zs(o)&&(s=window.getComputedStyle(o),n+=i.isVertical?o.offsetHeight:o.offsetWidth,n+=parseFloat(i.isVertical?s.marginTop:s.marginRight),n+=parseFloat(i.isVertical?s.marginBottom:s.marginLeft))}),n},t.prototype.getScrollCntEle=function(e){return e.querySelector(this.isVertical?".e-vscroll-content":".e-hscroll-content")},t.prototype.checkOverflow=function(e,i){if(f(e)||f(i)||!Zs(e))return!1;var n=this.isVertical?e.offsetHeight:e.offsetWidth,s=this.isVertical?i.offsetHeight:i.offsetWidth;(this.tbarAlign||this.scrollModule||n===s)&&(s=this.itemWidthCal(this.scrollModule?this.getScrollCntEle(i):i));var o=e.querySelector("."+tu),a=e.querySelector("."+uee),l=0;return o?l=this.isVertical?o.offsetHeight:o.offsetWidth:a&&(l=this.isVertical?2*a.offsetHeight:2*a.offsetWidth),s>n-l},t.prototype.refreshOverflow=function(){this.resize()},t.prototype.toolbarAlign=function(e){this.tbarAlign&&(this.add(e,pf),this.itemPositioning())},t.prototype.renderOverflowMode=function(){var e=this.element,i=e.querySelector("."+so),n=this.popupPriCount>0;if(e&&e.children.length>0)switch(this.offsetWid=e.offsetWidth,this.remove(this.element,"e-toolpop"),"msie"===Z.info.name&&"auto"===this.height&&(e.style.height=""),this.overflowMode){case"Scrollable":f(this.scrollModule)&&this.initScroll(e,[].slice.call(e.getElementsByClassName(so)));break;case"Popup":this.add(this.element,"e-toolpop"),this.tbarAlign&&this.removePositioning(),(this.checkOverflow(e,i)||n)&&this.setOverflowAttributes(e),this.toolbarAlign(i);break;case"MultiRow":this.add(i,pee),this.checkOverflow(e,i)&&this.tbarAlign&&(this.removePositioning(),this.add(i,fee)),"hidden"===e.style.overflow&&(e.style.overflow=""),("msie"===Z.info.name||"auto"!==e.style.height)&&(e.style.height="auto");break;case"Extended":this.add(this.element,gee),(this.checkOverflow(e,i)||n)&&(this.tbarAlign&&this.removePositioning(),this.setOverflowAttributes(e)),this.toolbarAlign(i)}},t.prototype.setOverflowAttributes=function(e){this.createPopupEle(e,[].slice.call(Ke("."+so+" ."+Ea,e))),this.element.querySelector("."+tu).setAttribute("tabIndex","0"),this.element.querySelector("."+tu).setAttribute("role","list")},t.prototype.separator=function(){var e=this.element,i=[].slice.call(e.querySelectorAll("."+sa)),n=e.querySelector("."+mq),s=e.querySelector("."+vq),o="MultiRow"===this.overflowMode?n:s;null!==o&&("MultiRow"===this.overflowMode?o.classList.remove(mq):"Extended"===this.overflowMode&&o.classList.remove(vq));for(var a=0;a<=i.length-1;a++)i[a].offsetLeft<30&&0!==i[a].offsetLeft&&("MultiRow"===this.overflowMode?i[a].classList.add(mq):"Extended"===this.overflowMode&&i[a].classList.add(vq))},t.prototype.createPopupEle=function(e,i){var n=e.querySelector("."+tu),s=this.isVertical;n||this.createPopupIcon(e),n=e.querySelector("."+tu);var a=(s?e.offsetHeight:e.offsetWidth)-(s?n.offsetHeight:n.offsetWidth);this.element.classList.remove("e-rtl"),Ft(this.element,{direction:"initial"}),this.checkPriority(e,i,a,!0),this.enableRtl&&this.element.classList.add("e-rtl"),this.element.style.removeProperty("direction"),this.createPopup()},t.prototype.pushingPoppedEle=function(e,i,n,s,o){var a=e.element,l=[].slice.call(Ke("."+Iv,a.querySelector("."+so))),h=Ke("."+df,n),u=0,d=0;l.forEach(function(S,A){h=Ke("."+df,n),S.classList.contains(df)&&h.length>0?e.tbResize&&h.length>A?(n.insertBefore(S,h[A]),++d):(n.insertBefore(S,n.children[h.length]),++d):S.classList.contains(df)||e.tbResize&&S.classList.contains(hH)&&n.children.length>0&&0===h.length?(n.insertBefore(S,n.firstChild),++d):S.classList.contains(hH)?i.push(S):e.tbResize?(n.insertBefore(S,n.childNodes[u+d]),++u):n.appendChild(S),S.classList.contains(sa)?Ft(S,{display:"",height:o+"px"}):Ft(S,{display:"",height:s+"px"})}),i.forEach(function(S){n.appendChild(S)});for(var m=Ke("."+Ea,a.querySelector("."+so)),v=m.length-1;v>=0;v--){var C=m[v];if(!C.classList.contains(sa)||"Extended"===this.overflowMode)break;Ft(C,{display:"none"})}},t.prototype.createPopup=function(){var i,n,e=this.element;"Extended"===this.overflowMode&&(n=e.querySelector("."+sa+":not(."+Iv+")"),i="auto"===e.style.height||""===e.style.height?null:n.offsetHeight);var a,s=e.querySelector("."+Ea+":not(."+sa+"):not(."+Iv+")"),o="auto"===e.style.height||""===e.style.height?null:s&&s.offsetHeight;if(re("#"+e.id+"_popup."+K_,e))a=re("#"+e.id+"_popup."+K_,e);else{var h=this.createElement("div",{id:e.id+"_popup",className:K_+" "+uH}),u=this.createElement("div",{id:e.id+"_popup",className:K_});a="Extended"===this.overflowMode?h:u}this.pushingPoppedEle(this,[],a,o,i),this.popupInit(e,a)},t.prototype.getElementOffsetY=function(){return"Extended"===this.overflowMode&&"border-box"===window.getComputedStyle(this.element).getPropertyValue("box-sizing")?this.element.clientHeight:this.element.offsetHeight},t.prototype.popupInit=function(e,i){if(this.popObj){var a=this.popObj.element;Ft(a,{maxHeight:"",display:"block"}),Ft(a,{maxHeight:a.offsetHeight+"px",display:""})}else{e.appendChild(i),this.cssClass&&N([i],this.cssClass.split(" ")),Ft(this.element,{overflow:""});var n=window.getComputedStyle(this.element),s=new kl(null,{relateTo:this.element,offsetY:this.isVertical?0:this.getElementOffsetY(),enableRtl:this.enableRtl,open:this.popupOpen.bind(this),close:this.popupClose.bind(this),collision:{Y:this.enableCollision?"flip":"none"},position:this.enableRtl?{X:"left",Y:"top"}:{X:"right",Y:"top"}});if(s.appendTo(i),"Extended"===this.overflowMode&&(s.width=parseFloat(n.width)+2*parseFloat(n.borderRightWidth),s.offsetX=0),T.add(document,"scroll",this.docEvent.bind(this)),T.add(document,"click ",this.docEvent.bind(this)),s.element.style.maxHeight=s.element.offsetHeight+"px",this.isVertical&&(s.element.style.visibility="hidden"),this.isExtendedOpen){var o=this.element.querySelector("."+tu);o.classList.add($_),ri(o.firstElementChild,[lH],[G_]),this.element.querySelector("."+uH).classList.add(aee)}else s.hide();this.popObj=s,this.element.setAttribute("aria-haspopup","true")}},t.prototype.tbarPopupHandler=function(e){"Extended"===this.overflowMode&&(e?this.add(this.element,yq):this.remove(this.element,yq))},t.prototype.popupOpen=function(e){var i=this.popObj;this.isVertical||(i.offsetY=this.getElementOffsetY(),i.dataBind());var n=this.popObj.element,s=this.popObj.element.parentElement,o=s.querySelector("."+tu);Ft(i.element,{height:"auto",maxHeight:""}),i.element.style.maxHeight=i.element.offsetHeight+"px","Extended"===this.overflowMode&&(i.element.style.minHeight="");var a=n.offsetTop+n.offsetHeight+So(s).top,l=o.firstElementChild;o.classList.add($_),ri(l,[lH],[G_]),this.tbarPopupHandler(!0);var h=f(window.scrollY)?0:window.scrollY;if(!this.isVertical&&window.innerHeight+h<a&&this.element.offsetTop<n.offsetHeight){var u=n.offsetHeight-(a-window.innerHeight-h+5);i.height=u+"px";for(var d=0;d<=n.childElementCount;d++){var m=n.children[d];if(m.offsetTop+m.offsetHeight>u){u=m.offsetTop;break}}Ft(i.element,{maxHeight:u+"px"})}else if(this.isVertical){var v=this.element.getBoundingClientRect();Ft(i.element,{maxHeight:v.top+this.element.offsetHeight+"px",bottom:0,visibility:""})}if(i){var C=n.getBoundingClientRect();C.right>document.documentElement.clientWidth&&C.width>s.getBoundingClientRect().width&&(i.collision={Y:"none"},i.dataBind()),i.refreshPosition()}},t.prototype.popupClose=function(e){var n=this.element.querySelector("."+tu),s=n.firstElementChild;n.classList.remove($_),ri(s,[G_],[lH]),this.tbarPopupHandler(!1)},t.prototype.checkPriority=function(e,i,n,s){for(var h,o=this.popupPriCount>0,l=n,d=0,m=0,v=0,C=function(G,ne){var fe=!1;return ne.forEach(function(Ee){G.classList.contains(Ee)&&(fe=!0)}),fe},S=i.length-1;S>=0;S--){var A=void 0,_=window.getComputedStyle(i[S]);this.isVertical?(A=parseFloat(_.marginTop),A+=parseFloat(_.marginBottom)):(A=parseFloat(_.marginRight),A+=parseFloat(_.marginLeft));var M=i[S]===this.tbarEle[0];M&&(this.tbarEleMrgn=A),h=this.isVertical?i[S].offsetHeight:i[S].offsetWidth;var P=M?h+A:h;if(C(i[S],[gq])&&o&&(i[S].classList.add(Iv),Ft(i[S],this.isVertical?{display:"none",minHeight:P+"px"}:{display:"none",minWidth:P+"px"}),v++),this.isVertical?i[S].offsetTop+i[S].offsetHeight+A>n:i[S].offsetLeft+i[S].offsetWidth+A>n){if(i[S].classList.contains(sa)){if("Extended"===this.overflowMode)m===v&&C(B=i[S],[sa,Y_])&&(i[S].classList.add(Iv),v++),m++;else if("Popup"===this.overflowMode){var B;d>0&&m===v&&C(B=i[S+m+(d-1)],[sa,Y_])&&Ft(B,{display:"none"}),d++,m=0,v=0}}else m++;i[S].classList.contains(df)&&s||C(i[S],[sa,Y_])?n-=(this.isVertical?i[S].offsetHeight:i[S].offsetWidth)+A:(i[S].classList.add(Iv),Ft(i[S],this.isVertical?{display:"none",minHeight:P+"px"}:{display:"none",minWidth:P+"px"}),v++)}}if(s){var j=Ke("."+Ea+":not(."+Iv+")",this.element);this.checkPriority(e,j,l,!1)}},t.prototype.createPopupIcon=function(e){var i=e.id.concat("_nav"),n="e-"+e.id.concat("_nav e-hor-nav"),s=this.createElement("div",{id:i,className:n="Extended"===this.overflowMode?n+" e-expended-nav":n});("msie"===Z.info.name||"edge"===Z.info.name)&&s.classList.add("e-ie-align");var o=this.createElement("div",{className:G_+" e-icons"});s.appendChild(o),s.setAttribute("tabindex","0"),s.setAttribute("role","list"),e.appendChild(s)},t.prototype.tbarPriRef=function(e,i,n,s,o,a,l,h){var u=h,v=Ke("."+Iv+":not(."+df+")",this.popObj.element).length,C=function(B,j){return B.classList.contains(j)};if(0===Ke(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)",e).length){var S=e.children[i-(i-n)-1],A=!f(S)&&C(S,Y_);if(!f(S)&&C(S,sa)&&!Zs(S)||A){S.style.display="inherit";var M=S.offsetWidth+2*parseFloat(window.getComputedStyle(S).marginRight),P=S.previousElementSibling;a+M<l||o?(e.insertBefore(s,e.children[i+u-(i-n)]),f(P)||(P.style.display="")):P.classList.contains(sa)&&(P.style.display="none"),S.style.display=""}else e.insertBefore(s,e.children[i+u-(i-n)])}else e.insertBefore(s,e.children[i+u-v])},t.prototype.popupRefresh=function(e,i){var n=this,s=this.element,o=this.isVertical,a=s.querySelector("."+so),l=s.querySelector("."+tu);if(!f(l)){var h;a.removeAttribute("style"),e.style.display="block",h=o?s.offsetHeight-(l.offsetHeight+a.offsetHeight):s.offsetWidth-(l.offsetWidth+a.offsetWidth);var u=0;[].slice.call(e.children).forEach(function(d){u+=n.popupEleWidth(d),Ft(d,{position:""})}),h+(o?l.offsetHeight:l.offsetWidth)>u&&0===this.popupPriCount&&(i=!0),this.popupEleRefresh(h,e,i),e.style.display="",0===e.children.length&&l&&this.popObj&&(le(l),l=null,this.popObj.destroy(),le(this.popObj.element),this.popObj=null,s.setAttribute("aria-haspopup","false"))}},t.prototype.ignoreEleFetch=function(e,i){var n=[].slice.call(i.querySelectorAll("."+Y_)),s=[],o=0;return n.length>0?(n.forEach(function(a){s.push([].slice.call(i.children).indexOf(a))}),s.forEach(function(a){a<=e&&o++}),o):0},t.prototype.checkPopupRefresh=function(e,i){i.style.display="block";var n=this.popupEleWidth(i.firstElementChild);i.firstElementChild.style.removeProperty("Position");var s=e.offsetWidth-e.querySelector("."+tu).offsetWidth,o=e.querySelector("."+so).offsetWidth;return i.style.removeProperty("display"),s>n+o},t.prototype.popupEleWidth=function(e){e.style.position="absolute";var i=this.isVertical?e.offsetHeight:e.offsetWidth,n=e.querySelector(".e-tbar-btn-text");if(e.classList.contains("e-tbtn-align")||e.classList.contains(fq)){var s=e.children[0];!f(n)&&e.classList.contains(fq)?n.style.display="none":!f(n)&&e.classList.contains(hee)&&(n.style.display="block"),s.style.minWidth="0%",i=parseFloat(this.isVertical?e.style.minHeight:e.style.minWidth),s.style.minWidth="",s.style.minHeight="",f(n)||(n.style.display="")}return i},t.prototype.popupEleRefresh=function(e,i,n){for(var a,l,s=this.popupPriCount>0,o=this.tbarEle,h=this.element.querySelector("."+so),u=0,d=function(M){if(M.classList.contains(gq)&&s&&!n)return"continue";var P=m.popupEleWidth(M);if(M===m.tbarEle[0]&&(P+=m.tbarEleMrgn),M.style.position="",!(P<e||n))return"break";if(Ft(M,{minWidth:"",height:"",minHeight:""}),M.classList.contains(hH)||M.classList.remove(Iv),l=m.tbarEle.indexOf(M),m.tbarAlign){var B=m.items[l].align;l=m.tbarAlgEle[(B+"s").toLowerCase()].indexOf(M),o=m.tbarAlgEle[(B+"s").toLowerCase()],h=m.element.querySelector("."+so+" .e-toolbar-"+B.toLowerCase())}var j=0;"Extended"!==m.overflowMode&&o.slice(0,l).forEach(function(G){(G.classList.contains(df)||G.classList.contains(sa))&&(G.classList.contains(sa)&&(G.style.display="",e-=G.offsetWidth),j++)}),u=m.ignoreEleFetch(l,h),M.classList.contains(df)?(m.tbarPriRef(h,l,j,M,n,P,e,u),e-=M.offsetWidth):0===l?(h.insertBefore(M,h.firstChild),e-=M.offsetWidth):(a=Ke("."+df,m.popObj.element).length,h.insertBefore(M,h.children[l+u-a]),e-=M.offsetWidth),M.style.height=""},m=this,v=0,C=[].slice.call(i.children);v<C.length&&"break"!==d(C[v]);v++);this.checkOverflow(this.element,this.element.getElementsByClassName(so)[0])&&!n&&this.renderOverflowMode()},t.prototype.removePositioning=function(){var e=this.element.querySelector("."+so);if(!f(e)&&e.classList.contains(pf)){this.remove(e,pf);var i=[].slice.call(e.childNodes);i[1].removeAttribute("style"),i[2].removeAttribute("style")}},t.prototype.refreshPositioning=function(){var e=this.element.querySelector("."+so);this.add(e,pf),this.itemPositioning()},t.prototype.itemPositioning=function(){var i,e=this.element.querySelector("."+so);if(!f(e)&&e.classList.contains(pf)){var s,n=this.element.querySelector("."+tu);s=[].slice.call(this.scrollModule?e.querySelector("."+(this.isVertical?"e-vscroll-content":"e-hscroll-content")).children:e.childNodes),i=this.isVertical?s[0].offsetHeight+s[2].offsetHeight:s[0].offsetWidth+s[2].offsetWidth;var a=this.isVertical?this.element.offsetHeight:this.element.offsetWidth;if(n){a-=this.isVertical?n.offsetHeight:n.offsetWidth;var l=(this.isVertical?n.offsetHeight:n.offsetWidth)+"px";s[2].removeAttribute("style"),this.isVertical?this.enableRtl?s[2].style.top=l:s[2].style.bottom=l:this.enableRtl?s[2].style.left=l:s[2].style.right=l}if(!(a<=i)){var h=(a-i-(this.isVertical?s[1].offsetHeight:s[1].offsetWidth))/2;s[1].removeAttribute("style");var u=(this.isVertical?s[0].offsetHeight:s[0].offsetWidth)+h+"px";this.isVertical?this.enableRtl?s[1].style.marginBottom=u:s[1].style.marginTop=u:this.enableRtl?s[1].style.marginRight=u:s[1].style.marginLeft=u}}},t.prototype.tbarItemAlign=function(e,i,n){var s=this;if(!e.showAlwaysInPopup||"Show"===e.overflow){var o=[];if(o.push(this.createElement("div",{className:"e-toolbar-left"})),o.push(this.createElement("div",{className:cee})),o.push(this.createElement("div",{className:"e-toolbar-right"})),0===n&&"Left"!==e.align)o.forEach(function(h){i.appendChild(h)}),this.tbarAlign=!0,this.add(i,pf);else if("Left"!==e.align){var l=o[0];[].slice.call(i.childNodes).forEach(function(h){s.tbarAlgEle.lefts.push(h),l.appendChild(h)}),i.appendChild(l),i.appendChild(o[1]),i.appendChild(o[2]),this.tbarAlign=!0,this.add(i,pf)}}},t.prototype.ctrlTemplate=function(){var e=this;this.ctrlTem=this.trgtEle.cloneNode(!0),this.add(this.trgtEle,so),this.tbarEle=[],[].slice.call(this.trgtEle.children).forEach(function(n){"DIV"===n.tagName&&(e.tbarEle.push(n),n.setAttribute("aria-disabled","false"),e.add(n,Ea))})},t.prototype.renderItems=function(){var e=this.element,i=this.items;if(null!=this.trgtEle)this.ctrlTemplate();else if(e&&i.length>0){var n=void 0;e&&e.children.length>0&&(n=e.querySelector("."+so)),n||(n=this.createElement("div",{className:so})),this.itemsAlign(i,n),e.appendChild(n)}},t.prototype.setAttr=function(e,i){for(var s,n=Object.keys(e),o=0;o<n.length;o++)"class"===(s=n[o])?this.add(i,e[s]):i.setAttribute(s,e[s])},t.prototype.enableItems=function(e,i){var o,n=e,s=n.length;f(i)&&(i=!0);var a=function(d,m){d?(m.classList.remove(cf),m.setAttribute("aria-disabled","false")):(m.classList.add(cf),m.setAttribute("aria-disabled","true"))};if(!f(s)&&s>=1){for(var l=0,h=[].slice.call(n);l<s;l++){var u=h[l];if("number"==typeof u){if(f(o=this.getElementByIndex(u)))return;n[l]=o}else o=u;a(i,o)}i?z(n,cf):N(n,cf)}else{if("number"==typeof n){if(f(o=this.getElementByIndex(n)))return}else o=e;a(i,o)}},t.prototype.getElementByIndex=function(e){return this.tbarEle[e]?this.tbarEle[e]:null},t.prototype.addItems=function(e,i){var n;this.extendedOpen();var s=this.element.querySelector("."+so);if(f(s))this.itemsRerender(e);else{var o,a="Left";f(i)&&(i=0),e.forEach(function(v){!f(v.align)&&"Left"!==v.align&&"Left"===a&&(a=v.align)});for(var l=0,h=e;l<h.length;l++){var u=h[l];if(f(u.type)&&(u.type="Button"),n=Ke("."+Ea,this.element),u.align=a,o=this.renderSubComponent(u,i),this.tbarEle.length>=i&&n.length>=0){f(this.scrollModule)&&this.destroyMode();var d="L"===u.align[0]?0:"C"===u.align[0]?1:2,m=void 0;this.tbarAlign||"Left"===a?this.tbarAlign?((m=U(n[0],"."+so).children[d]).insertBefore(o,m.children[i]),this.tbarAlgEle[(u.align+"s").toLowerCase()].splice(i,0,o),this.refreshPositioning()):0===n.length?(n=Ke("."+so,this.element))[0].appendChild(o):n[0].parentNode.insertBefore(o,n[i]):(this.tbarItemAlign(u,s,1),this.tbarAlign=!0,(m=U(n[0],"."+so).children[d]).appendChild(o),this.tbarAlgEle[(u.align+"s").toLowerCase()].push(o),this.refreshPositioning()),this.items.splice(i,0,u),u.template&&this.tbarEle.splice(this.tbarEle.length-1,1),this.tbarEle.splice(i,0,o),i++,this.offsetWid=s.offsetWidth}}s.style.width="",this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()}},t.prototype.removeItems=function(e){var n,i=e,s=[].slice.call(Ke("."+Ea,this.element));if("number"==typeof i)n=parseInt(e.toString(),10),this.removeItemByIndex(n,s);else if(i&&i.length>1)for(var o=0,a=[].slice.call(i);o<a.length;o++)n=this.tbarEle.indexOf(a[o]),this.removeItemByIndex(n,s),s=Ke("."+Ea,this.element);else n=s.indexOf(i&&i.length&&1===i.length?i[0]:e),this.removeItemByIndex(n,s);this.resize()},t.prototype.removeItemByIndex=function(e,i){if(this.tbarEle[e]&&i[e]){var n=this.tbarEle.indexOf(i[e]);if(this.tbarAlign){var s=this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].indexOf(this.tbarEle[n]);this.tbarAlgEle[(this.items[n].align+"s").toLowerCase()].splice(s,1)}this.isReact&&this.clearTemplate();var o=i[e].querySelector(".e-control.e-btn");!f(o)&&!f(o.ej2_instances[0])&&!o.ej2_instances[0].isDestroyed&&o.ej2_instances[0].destroy(),le(i[e]),this.items.splice(n,1),this.tbarEle.splice(n,1)}},t.prototype.templateRender=function(e,i,n,s){var l,a=e;if("object"==typeof e&&(l="function"==typeof a.appendTo),"string"!=typeof e&&l)"Input"===n.type&&((m=this.createElement("input")).id=n.id?n.id:Ui("tbr-ipt"),i.appendChild(m),a.appendTo(m));else{var u,h=void 0,d=new RegExp(/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i);u="string"==typeof e?e.trim():e;try{if("object"!=typeof e||f(e.tagName))if("string"==typeof e&&d.test(u))i.innerHTML=u;else if(document.querySelectorAll(u).length){var m,v=(m=document.querySelector(u)).outerHTML.trim();i.appendChild(m),m.style.display="",f(v)||this.tempId.push(u)}else h=Pi(u);else i.appendChild(e)}catch{h=Pi(u)}var C=void 0;f(h)||(C=h({},this,"template",this.element.id+s+"_template",this.isStringTemplate)),!f(C)&&C.length>0&&[].slice.call(C).forEach(function(A){f(A.tagName)||(A.style.display=""),i.appendChild(A)})}this.add(i,lee),this.tbarEle.push(i)},t.prototype.buttonRendering=function(e,i){var n=this.createElement("button",{className:"e-tbar-btn"});n.setAttribute("type","button");var o,a,s=e.text;n.id=e.id?e.id:Ui("e-tbr-btn");var l=this.createElement("span",{className:"e-tbar-btn-text"});s?(l.innerHTML=this.enableHtmlSanitizer?Nn.sanitize(s):s,n.appendChild(l),n.classList.add("e-tbtn-txt")):this.add(i,"e-tbtn-align"),(e.prefixIcon||e.suffixIcon)&&(e.prefixIcon&&e.suffixIcon||e.prefixIcon?(o=e.prefixIcon+" e-icons",a="Left"):(o=e.suffixIcon+" e-icons",a="Right"));var h=new hf({iconCss:o,iconPosition:a});return h.createElement=this.createElement,h.appendTo(n),e.width&&Ft(n,{width:it(e.width)}),n},t.prototype.renderSubComponent=function(e,i){var n,s=this.createElement("div",{className:Ea});s.setAttribute("aria-disabled","false");var o=this.createElement("div",{innerHTML:this.enableHtmlSanitizer?Nn.sanitize(e.tooltipText):e.tooltipText});if(this.tbarEle||(this.tbarEle=[]),e.htmlAttributes&&this.setAttr(e.htmlAttributes,s),e.tooltipText&&s.setAttribute("title",o.textContent),e.cssClass&&(s.className=s.className+" "+e.cssClass),e.template)this.templateRender(e.template,s,e,i);else switch(e.type){case"Button":(n=this.buttonRendering(e,s)).setAttribute("tabindex","-1"),n.setAttribute("aria-label",e.text||e.tooltipText),s.appendChild(n),s.addEventListener("click",this.itemClick.bind(this));break;case"Separator":this.add(s,sa)}if(e.showTextOn){var a=e.showTextOn;"Toolbar"===a?(this.add(s,hee),this.add(s,"e-tbtn-align")):"Overflow"===a&&this.add(s,fq)}if(e.overflow){var l=e.overflow;"Show"===l?this.add(s,df):"Hide"===l&&(s.classList.contains(sa)||this.add(s,hH))}return"Show"!==e.overflow&&e.showAlwaysInPopup&&!s.classList.contains(sa)&&(this.add(s,gq),this.popupPriCount++),e.disabled&&this.add(s,cf),!1===e.visible&&this.add(s,Z_),s},t.prototype.itemClick=function(e){this.activeEleSwitch(e.currentTarget)},t.prototype.activeEleSwitch=function(e){this.activeEleRemove(e.firstElementChild),this.activeEle.focus()},t.prototype.activeEleRemove=function(e){f(this.activeEle)||this.activeEle.setAttribute("tabindex","-1"),this.activeEle=e,f(this.trgtEle)&&!e.parentElement.classList.contains(lee)?e.removeAttribute("tabindex"):this.activeEle.setAttribute("tabindex","0")},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.getModuleName=function(){return"toolbar"},t.prototype.itemsRerender=function(e){this.items=this.tbarItemsCol,(this.isReact||this.isAngular)&&this.clearTemplate(),this.destroyMode(),this.destroyItems(),this.items=e,this.tbarItemsCol=this.items,this.renderItems(),this.renderOverflowMode(),this.isReact&&this.renderReactTemplates()},t.prototype.resize=function(){var e=this.element;this.tbResize=!0,this.tbarAlign&&this.itemPositioning(),this.popObj&&"Popup"===this.overflowMode&&this.popObj.hide();var i=this.checkOverflow(e,e.getElementsByClassName(so)[0]);if(!i){this.destroyScroll();var n=e.querySelector("."+so);f(n)||(this.remove(n,fee),this.tbarAlign&&this.add(n,pf))}if(!i||!this.scrollModule||this.offsetWid!==e.offsetWidth){if((this.offsetWid>e.offsetWidth||i)&&this.renderOverflowMode(),this.popObj){if("Extended"===this.overflowMode){var s=window.getComputedStyle(this.element);this.popObj.width=parseFloat(s.width)+2*parseFloat(s.borderRightWidth)}this.tbarAlign&&this.removePositioning(),this.popupRefresh(this.popObj.element,!1),this.tbarAlign&&this.refreshPositioning()}this.element.querySelector("."+dee)&&(this.scrollStep=this.element.querySelector("."+dee).offsetWidth),this.offsetWid=e.offsetWidth,this.tbResize=!1,this.separator()}},t.prototype.extendedOpen=function(){var e=this.element.querySelector("."+uH);"Extended"===this.overflowMode&&e&&(this.isExtendedOpen=e.classList.contains(aee))},t.prototype.onPropertyChanged=function(e,i){var n=this.element,s=n.offsetWidth;this.extendedOpen();for(var o=0,a=Object.keys(e);o<a.length;o++)switch(a[o]){case"items":if(e.items instanceof Array&&i.items instanceof Array)this.itemsRerender(e.items);else for(var h=Object.keys(e.items),u=0;u<h.length;u++){var d=parseInt(Object.keys(e.items)[u],10),m=Object.keys(e.items[d])[0],v=Object(e.items[d])[m];if("function"!=typeof v){if(this.tbarAlign||"align"===m){this.refresh(),this.trigger("created");break}("showAlwaysInPopup"===m&&!v||this.items[d].showAlwaysInPopup&&"overflow"===m&&0!==this.popupPriCount)&&--this.popupPriCount,f(this.scrollModule)&&this.destroyMode();var A=[].slice.call(Ke("."+so+" ."+Ea,n));this.isReact&&this.clearTemplate(),le(A[d]),this.tbarEle.splice(d,1),this.addItems([this.items[d]],d),this.items.splice(d,1),this.items[d].template&&this.tbarEle.splice(this.items.length,1)}}break;case"width":Ft(n,{width:it(e.width)}),this.renderOverflowMode(),this.popObj&&s<n.offsetWidth&&this.popupRefresh(this.popObj.element,!1);break;case"height":Ft(this.element,{height:it(e.height)});break;case"overflowMode":this.destroyMode(),this.renderOverflowMode(),this.enableRtl&&this.add(n,_g),this.refreshOverflow();break;case"enableRtl":e.enableRtl?this.add(n,_g):this.remove(n,_g),f(this.scrollModule)||(e.enableRtl?this.add(this.scrollModule.element,_g):this.remove(this.scrollModule.element,_g)),f(this.popObj)||(e.enableRtl?this.add(this.popObj.element,_g):this.remove(this.popObj.element,_g)),this.tbarAlign&&this.itemPositioning();break;case"scrollStep":this.scrollModule&&(this.scrollModule.scrollStep=this.scrollStep);break;case"enableCollision":this.popObj&&(this.popObj.collision={Y:this.enableCollision?"flip":"none"});break;case"cssClass":i.cssClass&&z([this.element],i.cssClass.split(" ")),e.cssClass&&N([this.element],e.cssClass.split(" "));break;case"allowKeyboard":this.unwireKeyboardEvent(),e.allowKeyboard&&this.wireKeyboardEvent()}},t.prototype.hideItem=function(e,i){var o,a,n="object"==typeof e,s=e,l=[].slice.call(Ke("."+Ea,this.element));if(n?a=e:this.tbarEle[s]&&(a=[].slice.call(Ke("."+Ea,this.element))[s]),a){if(i?a.classList.add(Z_):a.classList.remove(Z_),i&&f(this.element.getAttribute("tabindex"))&&!a.classList.contains(sa)){if(f(a.firstElementChild.getAttribute("tabindex"))){a.firstElementChild.setAttribute("tabindex","-1");var u=[].slice.call(Ke("."+Ea,this.element));n&&(s=u.indexOf(a));for(var d=u[++s];d;){if(!this.eleContains(d)){d.firstElementChild.removeAttribute("tabindex");break}d=u[++s]}}}else if(f(this.element.getAttribute("tabindex"))&&!a.classList.contains(sa))for(var v=!1,C=!1,S=l[o=0];S;)if(S.classList.contains(sa))S=l[++o];else if(f(S.firstElementChild.getAttribute("tabindex")))S.firstElementChild.setAttribute("tabindex","-1"),v=!0;else{if(v&&C)break;this.eleContains(S)||(S.firstElementChild.removeAttribute("tabindex"),C=!0),S=l[++o]}this.refreshOverflow()}},ps([wo([],Rye)],t.prototype,"items",void 0),ps([E("auto")],t.prototype,"width",void 0),ps([E("auto")],t.prototype,"height",void 0),ps([E("")],t.prototype,"cssClass",void 0),ps([E("Scrollable")],t.prototype,"overflowMode",void 0),ps([E()],t.prototype,"scrollStep",void 0),ps([E(!0)],t.prototype,"enableCollision",void 0),ps([E(!0)],t.prototype,"enableHtmlSanitizer",void 0),ps([E(!0)],t.prototype,"allowKeyboard",void 0),ps([q()],t.prototype,"clicked",void 0),ps([q()],t.prototype,"created",void 0),ps([q()],t.prototype,"destroyed",void 0),ps([q()],t.prototype,"beforeCreate",void 0),ps([si],t)}(Ji),Pg="",t4="",Pv=[],HH="",dte=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Vs=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},VH=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return dte(t,r),Vs([E()],t.prototype,"text",void 0),Vs([E()],t.prototype,"value",void 0),Vs([E()],t.prototype,"iconCss",void 0),Vs([E()],t.prototype,"groupBy",void 0),Vs([E()],t.prototype,"htmlAttributes",void 0),t}(Si),Je_root="e-dropdownbase",Je_li="e-list-item",Je_group="e-list-group-item",zH=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.preventChange=!1,n.isAngular=!1,n.isPreventChange=!1,n.isDynamicDataChange=!1,n.addedNewItem=!1,n}return dte(t,r),t.prototype.getPropObject=function(e,i,n){var s=new Object,o=new Object;s[e]=i[e],o[e]=n[e];var l=new Object;return l.newProperty=s,l.oldProperty=o,l},t.prototype.getValueByText=function(e,i,n){var s=null;return f(this.listData)||(s=this.checkValueCase(e,!!i,n)),s},t.prototype.checkValueCase=function(e,i,n,s){var o=this,a=null;s&&(a=e);var l=this.listData,h=this.fields,u=this.typeOfData(l).typeof;if("string"===u||"number"===u||"boolean"===u)for(var d=0,m=l;d<m.length;d++){var v=m[d];f(v)||(n?a=this.checkingAccent(String(v),e,i):i?this.checkIgnoreCase(String(v),e)&&(a=this.getItemValue(String(v),e,i)):this.checkNonIgnoreCase(String(v),e)&&(a=this.getItemValue(String(v),e,i,s)))}else if(i)l.filter(function(S){!f(Q(h.value,S))&&o.checkIgnoreCase(Q(h.text,S).toString(),e)&&(a=Q(h.value,S))});else if(s){var C=null;C=a,l.filter(function(S){var A=Q(h.value,S);!f(A)&&!f(a)&&A.toString()===C.toString()&&(a=Q(h.text,S))})}else l.filter(function(S){o.checkNonIgnoreCase(Q(h.text,S),e)&&(a=Q(h.value,S))});return a},t.prototype.checkingAccent=function(e,i,n){var s=qe.ignoreDiacritics(String(e)),o=qe.ignoreDiacritics(i.toString()),a=null;return n?this.checkIgnoreCase(s,o)&&(a=this.getItemValue(String(e),i,n)):this.checkNonIgnoreCase(String(e),i)&&(a=this.getItemValue(String(e),i,n)),a},t.prototype.checkIgnoreCase=function(e,i){return String(e).toLowerCase()===i.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(e,i){return String(e)===i.toString()},t.prototype.getItemValue=function(e,i,n,s){var l=this.typeOfData(this.listData).typeof;return s?e.toString():n?"string"===l?String(e):this.getFormattedValue(String(e)):"string"===l?i:this.getFormattedValue(i)},t.prototype.templateCompiler=function(e){var i=!1;if(e)try{i=!!Ke(e,document).length}catch{i=!1}return i},t.prototype.l10nUpdate=function(e){var i="listbox"===this.getModuleName()?this.ulElement:this.list;if("No records found"!==this.noRecordsTemplate||"Request failed"!==this.actionFailureTemplate){var n=e?this.actionFailureTemplate:this.noRecordsTemplate,o=e?this.actionFailureTemplateId:this.noRecordsTemplateId;i.innerHTML="";var h=Pi(this.templateCompiler(n)?re(n,document).innerHTML.trim():n)({},this,e?"actionFailureTemplate":"noRecordsTemplate",o,this.isStringTemplate,null,i);if(h&&h.length>0)for(var u=0;u<h.length;u++)i.appendChild(h[u]);this.renderReactTemplates()}else{var m=new es(this.getLocaleName(),{},this.locale);this.l10n=""!==m.getConstant("actionFailureTemplate")?m:new es("listbox"===this.getModuleName()?"listbox":"mention"===this.getModuleName()?"mention":"dropdowns",{noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},this.locale);var v=this.l10n.getConstant(e?"actionFailureTemplate":"noRecordsTemplate");if("listbox"===this.getModuleName()){var C=this.createElement("li");C.textContent=v,i.appendChild(C),C.classList.add("e-list-nrt"),C.setAttribute("role","option")}else i.innerHTML=v}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(e){return this.checkValueCase(e,!1,!1,!0)},t.prototype.getFormattedValue=function(e){if(this.listData&&this.listData.length){var i=this.typeOfData(this.listData);if("number"==typeof Q(this.fields.value?this.fields.value:"value",i.item)||"number"===i.typeof)return parseFloat(e);if("boolean"==typeof Q(this.fields.value?this.fields.value:"value",i.item)||"boolean"===i.typeof)return"true"===e||""+e=="true"}return e},t.prototype.setEnableRtl=function(){this.list&&this.enableRtlElements.push(this.list),this.enableRtl?N(this.enableRtlElements,"e-rtl"):z(this.enableRtlElements,"e-rtl")},t.prototype.initialize=function(e){if(this.bindEvent=!0,this.actionFailureTemplateId=this.element.id+"ActionFailureTemplate","UL"===this.element.tagName){var i=cn.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(i,this.fields)}else"SELECT"===this.element.tagName?(this.dataSource instanceof Array?this.dataSource.length>0:!f(this.dataSource))?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect():this.setListData(this.dataSource,this.fields,this.query,e)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.updateDataAttribute=function(e){for(var i=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],n={},s=0;s<this.element.attributes.length;s++)-1===i.indexOf(this.element.attributes[s].name)&&("dropdownlist"!==this.getModuleName()||"readonly"!==this.element.attributes[s].name)&&(n[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));he(n,e,n),this.setProperties({htmlAttributes:n},!0)},t.prototype.renderItemsBySelect=function(){var e=this.element,i={value:"value",text:"text"},n=[],s=e.querySelectorAll("select>optgroup"),o=e.querySelectorAll("select>option");if(this.getJSONfromOption(n,o,i),s.length){for(var a=0;a<s.length;a++){var l=s[a],h={};h[i.text]=l.label,h.isHeader=!0;var u=l.querySelectorAll("option");n.push(h),this.getJSONfromOption(n,u,i)}e.querySelectorAll("select>option")}this.updateFields(i.text,i.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(n,i)},t.prototype.updateFields=function(e,i,n,s,o){var a={fields:{text:e,value:i,groupBy:f(n)?this.fields&&this.fields.groupBy:n,htmlAttributes:f(s)?this.fields&&this.fields.htmlAttributes:s,iconCss:f(o)?this.fields&&this.fields.iconCss:o}};this.setProperties(a,!0)},t.prototype.getJSONfromOption=function(e,i,n){for(var s=0,o=i;s<o.length;s++){var a=o[s],l={};l[n.text]=a.innerText,l[n.value]=f(a.getAttribute(n.value))?a.innerText:a.getAttribute(n.value),e.push(l)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=this.element.id+"ItemTemplate",this.displayTemplateId=this.element.id+"DisplayTemplate",this.spinnerTemplateId=this.element.id+"SpinnerTemplate",this.valueTemplateId=this.element.id+"ValueTemplate",this.groupTemplateId=this.element.id+"GroupTemplate",this.headerTemplateId=this.element.id+"HeaderTemplate",this.footerTemplateId=this.element.id+"FooterTemplate",this.noRecordsTemplateId=this.element.id+"NoRecordsTemplate"},t.prototype.setListData=function(e,i,n,s){var a,o=this;i=i||this.fields,this.isActive=!0;var l={cancel:!1,data:e,query:n};this.isPreventChange=!(!this.isAngular||!this.preventChange)||this.isPreventChange,this.trigger("actionBegin",l,function(h){if(!h.cancel)if(o.showSpinner(),e instanceof Qe){if(o.isRequested=!0,o.isDataFetched)return void o.emptyDataRequest(i);h.data.executeQuery(o.getQuery(h.query)).then(function(v){o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",v,function(C){if(!C.cancel){var S=C.result;0===S.length&&(o.isDataFetched=!0),a=o.renderItems(S,i),o.groupTemplate&&o.renderGroupTemplate(a),o.onActionComplete(a,S,C),o.isRequested=!1,o.bindChildItems(S,a,i,C)}})}).catch(function(v){o.isRequested=!1,o.onActionFailure(v),o.hideSpinner()})}else{var u=new Qe(h.data),m={cancel:!1,result:o.getQuery(h.query).executeLocal(u)};o.isPreventChange=!(!o.isAngular||!o.preventChange)||o.isPreventChange,o.trigger("actionComplete",m,function(v){v.cancel||(a=o.renderItems(v.result,i),o.onActionComplete(a,v.result,s),o.groupTemplate&&o.renderGroupTemplate(a),o.bindChildItems(v.result,a,i),setTimeout(function(){"multiselect"===o.getModuleName()&&null!=o.itemTemplate&&a.childElementCount>0&&(a.children[0].childElementCount>0||o.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&o.updateDataList()}))})}})},t.prototype.bindChildItems=function(e,i,n,s){var o=this;e.length>=100&&"autocomplete"===this.getModuleName()?setTimeout(function(){Kt(o.remainingItems(o.sortedData,n),i),o.liCollections=o.list.querySelectorAll("."+Je_li),o.updateListValues(),o.raiseDataBound(e,s)},0):this.raiseDataBound(e,s)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(e,i,n,s){var o=null;if(e)for(var a=[].slice.call(e.querySelectorAll(i)),l=0;l<a.length;l++)if(a[l].getAttribute(n)===s+""){o=a[l];break}return o},t.prototype.raiseDataBound=function(e,i){this.hideSpinner(),this.trigger("dataBound",{items:e,e:i})},t.prototype.remainingItems=function(e,i){var n=new Qe(e).executeLocal((new ii).skip(100));if(this.itemTemplate){var s=this.templateListItem(n,i);return[].slice.call(s.childNodes)}var o=this.typeOfData(n).typeof;return"string"===o||"number"===o||"boolean"===o?cn.createListItemFromArray(this.createElement,n,!0,this.listOption(n,i),this):cn.createListItemFromJson(this.createElement,n,this.listOption(n,i),1,!0,this)},t.prototype.emptyDataRequest=function(e){var i=[];this.onActionComplete(this.renderItems(i,e),i),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(e){this.liCollections=[],this.trigger("actionFailure",e),this.l10nUpdate(!0),N([this.list],"e-nodata")},t.prototype.onActionComplete=function(e,i,n){if(this.listData=i,this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.fixedHeaderElement=f(this.fixedHeaderElement)?this.fixedHeaderElement:null,"multiselect"===this.getModuleName()&&this.properties.allowCustomValue&&this.fields.groupBy)for(var s=0;s<e.childElementCount;s++)e.children[s].classList.contains("e-list-group-item")&&(f(e.children[s].innerHTML)||""==e.children[s].innerHTML)&&N([e.children[s]],"e-hide-group-header");f(this.list)||(this.list.innerHTML="",this.list.appendChild(e),this.liCollections=this.list.querySelectorAll("."+Je_li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,i,this.bindEvent))},t.prototype.postRender=function(e,i,n){var s=e.querySelector("."+Je_li),o=e.querySelector(".e-active");s&&!o&&s.classList.add("e-item-focus"),i.length<=0?(this.l10nUpdate(),N([e],"e-nodata")):e.classList.remove("e-nodata")},t.prototype.getQuery=function(e){return e||(this.query?this.query:new ii)},t.prototype.renderGroupTemplate=function(e){if(null!==this.fields.groupBy&&this.dataSource||this.element.querySelector("."+Je_group)){var i=this.dataSource,n={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},s=e.querySelectorAll("."+Je_group);if(this.templateCompiler(this.groupTemplate)){var a=re(this.groupTemplate,document).innerHTML.trim(),l=cn.renderGroupTemplate(a,i,this.fields.properties,s,n,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else if(l=cn.renderGroupTemplate(this.groupTemplate,i,this.fields.properties,s,n,this),this.isGroupChecking)for(h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]});this.renderReactTemplates()}},t.prototype.createListItems=function(e,i){e&&i.groupBy||this.element.querySelector("optgroup")?(i.groupBy&&("None"!==this.sortOrder&&(e=this.getSortedDataSource(e)),e=cn.groupDataSource(e,i.properties,this.sortOrder)),N([this.list],"e-dd-group")):e=this.getSortedDataSource(e);var n=this.listOption(e,i),s=e.length>100?new Qe(e).executeLocal((new ii).take(100)):e;return this.sortedData=e,cn.createList(this.createElement,"autocomplete"===this.getModuleName()?s:e,n,!0,this)},t.prototype.listOption=function(e,i){var n=!f(i.iconCss),s=f(i.properties)?i:i.properties;return he({},null!==i.text||null!==i.value?{fields:s,showIcon:n,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},i,!0)},t.prototype.setFloatingHeader=function(e){!f(this.list)&&!this.list.classList.contains("e-nodata")&&(f(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:"e-fixed-head"}),this.list.querySelector("li").classList.contains(Je_group)||(this.fixedHeaderElement.style.display="none"),mi([this.fixedHeaderElement],this.list),this.setFixedHeader()),!f(this.fixedHeaderElement)&&"0"===this.fixedHeaderElement.style.zIndex&&this.setFixedHeader(),this.scrollStop(e))},t.prototype.scrollStop=function(e){for(var i=f(e)?this.list:e.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),s=Math.round(i.scrollTop/n),o=this.list.querySelectorAll("li:not(.e-hide-listitem)"),a=s;a>-1;a--){if(!f(o[a])&&o[a].classList.contains(Je_group)){this.fixedHeaderElement.innerHTML=o[a].innerHTML,this.fixedHeaderElement.style.top=i.scrollTop+"px",this.fixedHeaderElement.style.display="block";break}this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none"}},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(e,i){var n;if(this.itemTemplate&&e){var s=e;s&&i.groupBy?("None"!==this.sortOrder&&(s=this.getSortedDataSource(s)),s=cn.groupDataSource(s,i.properties,this.sortOrder)):s=this.getSortedDataSource(s),this.sortedData=s;var o=s.length>100?new Qe(s).executeLocal((new ii).take(100)):s;n=this.templateListItem("autocomplete"===this.getModuleName()?o:s,i)}else n=this.createListItems(e,i);return n},t.prototype.templateListItem=function(e,i){var n=this.listOption(e,i);if(n.templateID=this.itemTemplateId,n.isStringTemplate=this.isStringTemplate,this.templateCompiler(this.itemTemplate)){var o=re(this.itemTemplate,document).innerHTML.trim();return cn.renderContentTemplate(this.createElement,o,e,i.properties,n,this)}return cn.renderContentTemplate(this.createElement,this.itemTemplate,e,i.properties,n,this)},t.prototype.typeOfData=function(e){for(var n=0;!f(e)&&n<e.length;n++)if(!f(e[n])&&!f("string"==typeof e[n]||"number"==typeof e[n]||"boolean"==typeof e[n]?e[n]:Q(this.fields.value?this.fields.value:"value",e[n])))return{typeof:typeof e[n],item:e[n]};return{typeof:null,item:null}},t.prototype.setFixedHeader=function(){this.list.parentElement.style.display="block";var e=0;this.list&&this.list.parentElement&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(e))&&(e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10)+parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10));var a=this.getValidLi().offsetWidth-e;this.fixedHeaderElement.style.width=a.toString()+"px",Ft(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+Je_group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},t.prototype.getSortedDataSource=function(e){if(e&&"None"!==this.sortOrder){var i=this.fields.text?this.fields.text:"text";("string"===this.typeOfData(e).typeof||"number"===this.typeOfData(e).typeof||"boolean"===this.typeOfData(e).typeof)&&(i=""),e=cn.getDataSource(e,cn.addSorting(this.sortOrder,i))}return e},t.prototype.getIndexByValue=function(e){for(var i,n=this.getItems(),s=0;s<n.length;s++)if(!f(e)&&n[s].getAttribute("data-value")===e.toString()){i=s;break}return i},t.prototype.dispatchEvent=function(e,i){var n=document.createEvent("HTMLEvents");n.initEvent(i,!1,!0),e.dispatchEvent(n)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},t.prototype.resetList=function(e,i,n,s){this.list&&(("SELECT"===this.element.tagName&&this.element.options.length>0||"UL"===this.element.tagName&&this.element.childNodes.length>0)&&!(e instanceof Array?e.length>0:!f(e))&&this.selectData&&this.selectData.length>0&&(e=this.selectData),e="combobox"===this.getModuleName()&&this.selectData&&e instanceof Array&&e.length<this.selectData.length&&this.addedNewItem?this.selectData:e,this.addedNewItem=!1,this.setListData(e,i,n,s))},t.prototype.updateSelectElementData=function(e){e&&f(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(e){this.resetList(this.dataSource)},t.prototype.setUpdateInitial=function(e,i){this.isDataFetched=!1;for(var n={},s=0;e.length>s;s++)i[e[s]]&&"fields"===e[s]?(this.setFields(),n[e[s]]=i[e[s]]):i[e[s]]&&(n[e[s]]=i[e[s]]);Object.keys(n).length>0&&(-1===Object.keys(n).indexOf("dataSource")&&(n.dataSource=this.dataSource),this.updateDataSource(n))},t.prototype.onPropertyChanged=function(e,i){"dropdownbase"===this.getModuleName()&&this.setUpdateInitial(["fields","query","dataSource"],e),this.setUpdateInitial(["sortOrder","itemTemplate"],e);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"enabled":this.setEnabled();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+Je_group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!f(this.liCollections)&&0===this.liCollections.length&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0),this.setZIndex()}},t.prototype.render=function(e,i){this.list=this.createElement("div",{className:"e-content",attrs:{tabindex:"0"}}),this.list.classList.add(Je_root),this.setFields(),this.rippleFun=$i(this.list,{duration:300,selector:"."+Je_li});var s=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!f(s))&&!this.isGroupChecking&&T.add(this.list,"scroll",this.setFloatingHeader,this),"dropdownbase"===this.getModuleName()){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),z([this.element],Je_root),this.element.style.display="none";var o=this.createElement("div");this.element.parentElement.insertBefore(o,this.element),o.appendChild(this.element),o.appendChild(this.list)}this.setEnableRtl(),this.setEnabled(),i||this.initialize(e)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+Je_li)},t.prototype.addItem=function(e,i){if((!this.list||this.list.textContent===this.noRecordsTemplate&&"listbox"!==this.getModuleName())&&this.renderList(),"None"!==this.sortOrder&&f(i)){var n=[].slice.call(this.listData);n.push(e),n=this.getSortedDataSource(n),this.fields.groupBy&&(n=cn.groupDataSource(n,this.fields.properties,this.sortOrder)),i=n.indexOf(e)}var a,s=this.getItems().length,o=this.list.querySelector(".e-active");e=e instanceof Array?e:[e],a=f(i)||i<0||i>s-1?s:i;var l=this.fields;e&&l.groupBy&&(e=cn.groupDataSource(e,l.properties));for(var h=[],u=0;u<e.length;u++){var d=e[u],m=d.isHeader,v=this.createElement("li",{className:m?Je_group:Je_li,id:"option-add-"+u}),C=d instanceof Object?Q(l.text,d):d;if(m&&(v.innerText=C),this.itemTemplate&&!m){var _=Pi(this.templateCompiler(this.itemTemplate)?re(this.itemTemplate,document).innerHTML.trim():this.itemTemplate)(d,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,v);_&&Kt(_,v)}else m||v.appendChild(document.createTextNode(C));v.setAttribute("data-value",d instanceof Object?Q(l.value,d):d),v.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:v}),h.push(v),this.listData.push(d),"None"===this.sortOrder&&f(i)&&0===a&&(a=null),this.updateActionCompleteData(v,d,a),this.trigger("beforeItemRender",{element:v,item:d})}if(0===s&&f(this.list.querySelector("ul")))this.list.innerHTML="",this.list.classList.remove("e-nodata"),this.list.appendChild(this.ulElement),this.liCollections=h,Kt(h,this.ulElement),this.updateAddItemList(this.list,s);else{"listbox"===this.getModuleName()&&0===s&&(this.ulElement.innerHTML="");var M=[];for(u=0;u<e.length;u++){for(var P=this.ulElement.querySelectorAll(".e-list-group-item"),B=0;B<P.length;B++)M[B]=P[B].innerText;if(M.indexOf(h[u].innerText)>-1&&l.groupBy){for(B=0;B<P.length;B++)if(M[B]===h[u].innerText){this.ulElement.insertBefore(h[u+1],"None"===this.sortOrder?P[B+1]:this.ulElement.childNodes[i]),u+=1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(h[u],this.liCollections[a]):this.ulElement.appendChild(h[u]);var j=[].slice.call(this.liCollections);j.splice(a,0,h[u]),this.liCollections=j,a+=1,"multiselect"===this.getModuleName()&&this.updateDataList()}}(o||0===i)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(e.getAttribute(s[o])){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(e,i,n){},t.prototype.updateAddItemList=function(e,i){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(e){if(!f(this.listData)){var i=this.typeOfData(this.listData).typeof;if("string"===i||"number"===i||"boolean"===i){for(var n=0,s=this.listData;n<s.length;n++)if(!f(o=s[n])&&o===e)return o}else for(var a=0,l=this.listData;a<l.length;a++){var o;if(!f(o=l[a])&&Q(this.fields.value?this.fields.value:"value",o)===e)return o}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(T.remove(this.list,"scroll",this.setFloatingHeader),f(this.rippleFun)||this.rippleFun(),le(this.list)),r.prototype.destroy.call(this)},Vs([rn({text:null,value:null,iconCss:null,groupBy:null},VH)],t.prototype,"fields",void 0),Vs([E(!1)],t.prototype,"enablePersistence",void 0),Vs([E(null)],t.prototype,"itemTemplate",void 0),Vs([E(null)],t.prototype,"groupTemplate",void 0),Vs([E("No records found")],t.prototype,"noRecordsTemplate",void 0),Vs([E("Request failed")],t.prototype,"actionFailureTemplate",void 0),Vs([E("None")],t.prototype,"sortOrder",void 0),Vs([E(!0)],t.prototype,"enabled",void 0),Vs([E([])],t.prototype,"dataSource",void 0),Vs([E(null)],t.prototype,"query",void 0),Vs([E("StartsWith")],t.prototype,"filterType",void 0),Vs([E(!0)],t.prototype,"ignoreCase",void 0),Vs([E(1e3)],t.prototype,"zIndex",void 0),Vs([E(!1)],t.prototype,"ignoreAccent",void 0),Vs([E()],t.prototype,"locale",void 0),Vs([q()],t.prototype,"actionBegin",void 0),Vs([q()],t.prototype,"actionComplete",void 0),Vs([q()],t.prototype,"actionFailure",void 0),Vs([q()],t.prototype,"select",void 0),Vs([q()],t.prototype,"dataBound",void 0),Vs([q()],t.prototype,"created",void 0),Vs([q()],t.prototype,"destroyed",void 0),Vs([si],t)}(Ji),Hbe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),oo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Ii={root:"e-dropdownlist",hover:"e-hover",selected:"e-active",rtl:"e-rtl",li:Je_li,disable:"e-disabled",base:Je_root,focus:"e-item-focus",input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden"},Vbe={container:null,buttons:[]},gS=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.isListSearched=!1,n.preventChange=!1,n.isAngular=!1,n}return Hbe(t,r),t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),r.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.renderList=function(e,i){r.prototype.render.call(this,e,i),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if("dropdownlist"===this.getModuleName()&&"Auto"===this.floatLabelType){var e=this.inputWrapper.container.querySelector(".e-float-text");""!==this.inputElement.value||this.isInteracted?ri(e,["e-label-top"],["e-label-bottom"]):ri(e,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(e){e.preventDefault(),this.clearAll(e)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,"autocomplete"!==this.getModuleName()&&!f(this.ulElement)){var e=this.ulElement.querySelector("."+Ii.li);e&&e.classList.add(Ii.focus)}},t.prototype.clearAll=function(e,i){this.previousItemData=f(this.itemData)?null:this.itemData,(f(i)||!f(i)&&(f(i.dataSource)||!(i.dataSource instanceof Qe)&&0===i.dataSource.length))&&(this.isActive=!0,this.resetSelection(i));var n=this.getItemData();this.previousValue!==n.value&&this.onChangeEvent(e)},t.prototype.resetSelection=function(e){this.list&&(f(e)||!f(e.dataSource)&&(e.dataSource instanceof Qe||0!==e.dataSource.length)?(this.allowFiltering&&"autocomplete"!==this.getModuleName()&&!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement()):(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(e.dataSource))),this.hiddenElement.innerHTML="",this.inputElement.value="",this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(le(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&N([this.inputWrapper.container],s.split(" "))}else if("disabled"===n&&"disabled"===this.htmlAttributes[n])this.enabled=!1,this.setEnable();else if("readonly"!==n||f(this.htmlAttributes[n]))if("style"===n)this.inputWrapper.container.setAttribute("style",this.htmlAttributes[n]);else{var o=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"];("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&o.push("tabindex"),["name","required"].indexOf(n)>-1||0===n.indexOf("data")?this.hiddenElement.setAttribute(n,this.htmlAttributes[n]):o.indexOf(n)>-1?"placeholder"===n?ke.setPlaceholder(this.htmlAttributes[n],this.inputElement):this.inputElement.setAttribute(n,this.htmlAttributes[n]):this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}else this.readonly=!0,this.dataBind()}("autocomplete"===this.getModuleName()||"combobox"===this.getModuleName())&&this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){ke.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){ke.setEnabled(this.enabled,this.inputElement),this.enabled?(z([this.inputWrapper.container],Ii.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),N([this.inputWrapper.container],Ii.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(e){"dropdownlist"===this.getModuleName()&&(e.tabIndex=-1)},t.prototype.targetElement=function(){return this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(e){return this.getElementByValue(this.getValueByText(e))},t.prototype.getElementByValue=function(e){for(var i,s=0,o=this.getItems();s<o.length;s++){var a=o[s];if(this.getFormattedValue(a.getAttribute("data-value"))===e){i=a;break}}return i},t.prototype.initValue=function(){this.renderList(),this.dataSource instanceof Qe?this.initRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(f(this.value))if(this.text&&f(this.value)){var e=this.getElementByText(this.text);if(f(e))return void this.setProperties({text:null});this.setSelection(e,null)}else this.setSelection(this.liCollections[this.activeIndex],null);else this.setSelection(this.getElementByValue(this.value),null);this.setHiddenValue(),ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(e){if(this.enabled){var i=e.relatedTarget,n=e.target,s=this.isPreventBlur;if(this.isPreventBlur=!1,s&&!this.isDocumentClick&&this.isPopupOpen&&(!f(n)||!this.isFilterLayout()&&f(i)))return void("dropdownlist"===this.getModuleName()&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus());if(this.isDocumentClick||!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(Ii.mobileFilter))return void(this.beforePopupOpen||(this.isDocumentClick=!1));("dropdownlist"===this.getModuleName()&&!this.isFilterFocus&&i!==this.inputElement&&(document.activeElement!==i||document.activeElement===i&&n.classList.contains(Ii.inputFocus))||f(i)&&"dropdownlist"===this.getModuleName()&&this.allowFiltering&&n!==this.inputWrapper.container||"dropdownlist"!==this.getModuleName()&&!this.inputWrapper.container.contains(i)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(e),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},t.prototype.focusOutAction=function(e){this.isInteracted=!1,this.focusOut(e),this.onFocusOut()},t.prototype.onFocusOut=function(){!this.enabled||(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(null)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),"dropdownlist"===this.getModuleName()&&"INPUT"!==this.element.tagName&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&N([this.inputWrapper.clearButton],Ii.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(e){this.isInteracted||(this.isInteracted=!0,this.trigger("focus",{isInteracted:!!e,event:e})),this.updateIconState()},t.prototype.resetValueHandler=function(e){var i=U(this.inputElement,"form");if(i&&e.target===i){var n=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=n}},t.prototype.wireEvent=function(){T.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),T.add(this.inputWrapper.container,"focus",this.focusIn,this),T.add(this.inputWrapper.container,"keypress",this.onSearch,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){T.add(this.targetElement(),"blur",this.onBlurHandler,this);var e=U(this.inputElement,"form");e&&T.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new In(this.targetElement(),Z.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.bindClearEvent=function(){this.showClearButton&&T.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){this.targetElement()&&T.remove(this.targetElement(),"blur",this.onBlurHandler);var e=this.inputElement&&U(this.inputElement,"form");e&&T.remove(e,"reset",this.resetValueHandler),Z.isDevice||this.keyboardModule.destroy(),this.showClearButton&&T.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(""===this.inputElement.value||this.readonly?N([this.inputWrapper.clearButton],Ii.clearIconHide):z([this.inputWrapper.clearButton],Ii.clearIconHide))},t.prototype.wireListEvents=function(){T.add(this.list,"click",this.onMouseClick,this),T.add(this.list,"mouseover",this.onMouseOver,this),T.add(this.list,"mouseout",this.onMouseLeave,this)},t.prototype.onSearch=function(e){32!==e.charCode&&13!==e.charCode&&(void 0===this.list&&this.renderList(),this.searchKeyEvent=e,this.onServerIncrementalSearch(e))},t.prototype.onServerIncrementalSearch=function(e){!this.isRequested&&!f(this.list)&&!f(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(e)},t.prototype.onMouseClick=function(e){var n=U(e.target,"."+Je_li);this.isValidLI(n)&&(this.setSelection(n,e),Z.isDevice&&this.isFilterLayout()?history.back():this.closePopup(100,e))},t.prototype.onMouseOver=function(e){var i=U(e.target,"."+Je_li);this.setHover(i)},t.prototype.setHover=function(e){this.enabled&&this.isValidLI(e)&&!e.classList.contains("e-hover")&&(this.removeHover(),N([e],"e-hover"))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var e=this.list.querySelectorAll(".e-hover");e&&e.length&&z(e,"e-hover")}},t.prototype.isValidLI=function(e){return e&&e.hasAttribute("role")&&"option"===e.getAttribute("role")},t.prototype.incrementalSearch=function(e){if(this.liCollections.length>0){var i=function Dbe(r,t,e,i,n){var s;if(Pg+=String.fromCharCode(r),setTimeout(function(){Pg=""},1e3),Pg=i?Pg.toLowerCase():Pg,HH===n&&t4===Pg){for(var o=0;o<Pv.length;o++)if(Pv[o].classList.contains("e-active")){s=o;break}return Pv[s+=1]?Pv[s]:Pv[0]}var a=t,l=Pg.length,u=void 0;o=e=e?e+1:0,Pv=[];do{o===a.length&&(o=-1),u=a[s=-1===o?0:o],(i?u.innerText.toLowerCase():u.innerText).substr(0,l)===Pg&&Pv.push(a[s]),o++}while(o!==e);return t4=Pg,HH=n,Pv[0]}(e.charCode,this.liCollections,this.activeIndex,!0,this.element.id);f(i)||(this.setSelection(i,e),this.setScrollPosition())}},t.prototype.hideSpinner=function(){f(this.spinnerElement)||(Ll(this.spinnerElement),z([this.spinnerElement],Ii.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){f(this.spinnerElement)&&(this.spinnerElement=Z.isDevice&&!f(this.filterInputObj)&&this.filterInputObj.buttons[1]||!f(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],N([this.spinnerElement],Ii.disableIcon),kc({target:this.spinnerElement,width:Z.isDevice?"16px":"14px"},this.createElement),rh(this.spinnerElement))},t.prototype.keyActionHandler=function(e){if(this.enabled){var i="pageUp"===e.action||"pageDown"===e.action,n="dropdownlist"!==this.getModuleName()&&("home"===e.action||"end"===e.action);this.isEscapeKey="escape"===e.action,this.isTabKey=!this.isPopupOpen&&"tab"===e.action;var o="down"===e.action||"up"===e.action||"pageUp"===e.action||"pageDown"===e.action||"home"===e.action||"end"===e.action;if((!(this.isEditTextBox()||i||n)||this.isPopupOpen)&&!this.readonly){var a="tab"===e.action||"close"===e.action;if(void 0===this.list&&!this.isRequested&&!a&&"escape"!==e.action&&(this.searchKeyEvent=e,this.renderList(e)),f(this.list)||!f(this.liCollections)&&o&&0===this.liCollections.length||this.isRequested)return;switch((a&&"autocomplete"!==this.getModuleName()&&this.isPopupOpen||"escape"===e.action)&&e.preventDefault(),this.isSelected="escape"!==e.action&&this.isSelected,this.isTyped=!o&&"escape"!==e.action&&this.isTyped,e.action){case"down":case"up":this.updateUpDownAction(e);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),e),e.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),e),e.preventDefault();break;case"home":case"end":this.updateHomeEndAction(e);break;case"space":"dropdownlist"===this.getModuleName()&&(this.beforePopupOpen||this.showPopup());break;case"open":this.showPopup(e);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(e),this.focusDropDown(e);break;case"enter":this.selectCurrentItem(e);break;case"tab":this.selectCurrentValueOnTab(e);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))}}}},t.prototype.updateUpDownAction=function(e){var i=this.list.querySelector("."+Ii.focus);if(this.isSelectFocusItem(i))this.setSelection(i,e);else if(!f(this.liCollections)){var n="down"===e.action?this.activeIndex+1:this.activeIndex-1,s=0;"autocomplete"===this.getModuleName()&&(s="down"===e.action&&f(this.activeIndex)?0:this.liCollections.length-1,n=n<0?this.liCollections.length-1:n===this.liCollections.length?0:n);var o=f(this.activeIndex)?this.liCollections[s]:this.liCollections[n];f(o)||this.setSelection(o,e)}e.preventDefault()},t.prototype.updateHomeEndAction=function(e){if("dropdownlist"===this.getModuleName()){var i;if(i="home"===e.action?0:this.getItems().length-1,e.preventDefault(),this.activeIndex===i)return;this.setSelection(this.liCollections[i],e)}},t.prototype.selectCurrentValueOnTab=function(e){"autocomplete"===this.getModuleName()?this.selectCurrentItem(e):this.isPopupOpen&&(this.hidePopup(e),this.focusDropDown(e))},t.prototype.mobileKeyActionHandler=function(e){if(this.enabled&&(!this.isEditTextBox()||this.isPopupOpen)&&!this.readonly){if(void 0===this.list&&!this.isRequested&&(this.searchKeyEvent=e,this.renderList()),f(this.list)||!f(this.liCollections)&&0===this.liCollections.length||this.isRequested)return;"enter"===e.action&&this.selectCurrentItem(e)}},t.prototype.selectCurrentItem=function(e){if(this.isPopupOpen){var i=this.list.querySelector("."+Ii.focus);i&&(this.setSelection(i,e),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.hidePopup(e),this.focusDropDown(e)}else this.showPopup()},t.prototype.isSelectFocusItem=function(e){return!f(e)},t.prototype.getPageCount=function(){var e=this.list.classList.contains("e-nodata")?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height");return Math.round(this.list.getBoundingClientRect().height/parseInt(e,10))},t.prototype.pageUpSelection=function(e,i){this.setSelection(e>=0?this.liCollections[e+1]:this.liCollections[0],i)},t.prototype.pageDownSelection=function(e,i){var n=this.getItems();this.setSelection(e<=n.length?this.liCollections[e-1]:this.liCollections[n.length-1],i)},t.prototype.unWireEvent=function(){T.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),T.remove(this.inputWrapper.container,"keypress",this.onSearch),T.remove(this.inputWrapper.container,"focus",this.focusIn),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){T.remove(this.list,"click",this.onMouseClick),T.remove(this.list,"mouseover",this.onMouseOver),T.remove(this.list,"mouseout",this.onMouseLeave)},t.prototype.checkSelector=function(e){return'[id="'+e.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(e){var i=e.target;if(!f(this.popupObj)&&U(i,this.checkSelector(this.popupObj.element.id))||this.inputWrapper.container.contains(e.target))i!==this.inputElement&&(!this.allowFiltering||i!==this.filterInput)&&("combobox"!==this.getModuleName()||this.allowFiltering||!Z.isDevice||i!==this.inputWrapper.buttons[0])&&(this.isPreventBlur=(Z.isIE||"edge"===Z.info.name)&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),e.preventDefault());else if(this.inputWrapper.container.classList.contains(Ii.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var n=this.isRequested;this.isInteracted=!1,this.hidePopup(e),n||(this.onFocusOut(),this.inputWrapper.container.classList.remove(Ii.inputFocus))}},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(Ii.inputFocus))},t.prototype.focusDropDown=function(e){!this.initial&&this.isFilterLayout()&&this.focusIn(e)},t.prototype.dropDownClick=function(e){if(3!==e.which&&2!==e.button&&!this.targetElement().classList.contains(Ii.disable)&&this.inputWrapper.clearButton!==e.target){var i=e.target;if(i!==this.inputElement&&!(this.allowFiltering&&i===this.filterInput)&&"combobox"!==this.getModuleName()&&e.preventDefault(),this.readonly)this.focusIn(e);else{this.isPopupOpen?(this.hidePopup(e),this.isFilterLayout()&&this.focusDropDown(e)):(this.focusIn(e),this.floatLabelChange(),this.queryString=""===this.inputElement.value.trim()?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(e));var n=this,s=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){n.cloneElements(),n.isSecondClick=!0},s)}}},t.prototype.cloneElements=function(){if(this.list){var e=this.list.querySelector("ul");e&&(e=e.cloneNode?e.cloneNode(!0):e,this.actionCompleteData.ulElement=e)}},t.prototype.updateSelectedItem=function(e,i,n,s){var o=this;this.removeSelection(),e.classList.add("e-active"),this.removeHover();var a=this.getFormattedValue(e.getAttribute("data-value")),l=this.getDataByValue(a);if(this.initial||n||f(i))this.selectEventCallback(e,i,n,l,a),s&&this.setSelectOptions(e,i);else{var h=this.detachChanges(l);this.isSelected=!0,this.trigger("select",{e:i,item:e,itemData:h,isInteracted:!!i,cancel:!1},function(d){d.cancel?e.classList.remove("e-active"):(o.selectEventCallback(e,i,n,l,a),s&&o.setSelectOptions(e,i))})}},t.prototype.selectEventCallback=function(e,i,n,s,o){this.previousItemData=f(this.itemData)?null:this.itemData,this.item=e,this.itemData=s;var a=this.list.querySelector(".e-item-focus");a&&z([a],"e-item-focus"),e.setAttribute("aria-selected","true"),this.activeIndex=this.getIndexByValue(o)},t.prototype.activeItem=function(e){this.isValidLI(e)&&!e.classList.contains("e-active")&&(this.removeSelection(),e.classList.add("e-active"),this.removeHover(),e.setAttribute("aria-selected","true"))},t.prototype.setValue=function(e){var i=this.getItemData();ke.setValue(null===i.value?null:i.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&null!==this.itemData?this.setValueTemplate():!f(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(le(this.valueTempElement),this.inputElement.style.display="block");var n=Ii.clearIcon,o=this.isFiltering()&&this.filterInput&&"combobox"===this.getModuleName()&&this.filterInput.parentElement.querySelector("."+n);return this.isFiltering()&&o&&o.style.removeProperty("visibility"),this.previousValue===i.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,"dropdownlist"===this.getModuleName()&&this.updateIconState(),!1)},t.prototype.setSelection=function(e,i){this.isValidLI(e)&&(!e.classList.contains("e-active")||this.isPopupOpen&&this.isSelected&&e.classList.contains("e-active"))?this.updateSelectedItem(e,i,!1,!0):this.setSelectOptions(e,i)},t.prototype.setSelectOptions=function(e,i){this.list&&this.removeHover(),this.previousSelectedLI=f(this.selectedLI)?null:this.selectedLI,this.selectedLI=e,!this.setValue(i)&&((!this.isPopupOpen&&!f(e)||this.isPopupOpen&&!f(i)&&("keydown"!==i.type||"keydown"===i.type&&"enter"===i.action))&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.isPopupOpen&&!f(this.selectedLI)&&null!==this.itemData&&(!i||"click"!==i.type)&&this.setScrollPosition(i),"mozilla"!==Z.info.name&&(ze(this.targetElement(),{"aria-label":this.inputElement.value}),ze(this.targetElement(),{"aria-describedby":""!=this.inputElement.id?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),f(this.ulElement)||f(this.ulElement.getElementsByClassName("e-item-focus")[0])?!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-active")[0])&&ze(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}):ze(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}))},t.prototype.dropdownCompiler=function(e){var i=!1;if(e)try{i=!!document.querySelectorAll(e).length}catch{i=!1}return i},t.prototype.setValueTemplate=function(){this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(le(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:Ii.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var n=Pi(this.dropdownCompiler(this.valueTemplate)?document.querySelector(this.valueTemplate).innerHTML.trim():this.valueTemplate)(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);if(n&&n.length>0)for(var s=0;s<n.length;s++)this.valueTempElement.appendChild(n[s]);this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var e=this.list.querySelectorAll(".e-active");e.length&&(z(e,"e-active"),e[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var i,n,s,e=this.fields;return f(i=this.itemData)||(n=Q(e.value,i),s=Q(e.text,i)),{value:f(i)||qt(n)?i:n,text:f(i)||qt(n)?i:s}},t.prototype.onChangeEvent=function(e){var i=this.getItemData();this.setProperties({index:this.isSelectCustom?null:this.activeIndex,text:i.text,value:i.value},!0),this.detachChangeEvent(e)},t.prototype.detachChanges=function(e){return"string"==typeof e||"boolean"==typeof e||"number"==typeof e?Object.defineProperties({},{value:{value:e,enumerable:!0},text:{value:e,enumerable:!0}}):e},t.prototype.detachChangeEvent=function(e){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=f(this.text)?"":this.text,!this.initial){var n,i=this.detachChanges(this.itemData);n="string"==typeof this.previousItemData||"boolean"==typeof this.previousItemData||"number"==typeof this.previousItemData?Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):this.previousItemData,this.setHiddenValue();var s={e,item:this.item,itemData:i,previousItem:this.previousSelectedLI,previousItemData:n,isInteracted:!!e,value:this.value,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",s)}(f(this.value)||""===this.value)&&"Always"!==this.floatLabelType&&z([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(f(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option"))(e=this.hiddenElement.querySelector("option")).textContent=this.text,e.setAttribute("value",this.value.toString());else{var e;this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>",(e=this.hiddenElement.querySelector("option")).setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(e){if(e.ctrlKey&&86===e.keyCode||!this.isValidKey&&40!==e.keyCode&&38!==e.keyCode)this.isValidKey=!1;else switch(this.isValidKey=!1,e.keyCode){case 38:case 40:"autocomplete"!==this.getModuleName()||this.isPopupOpen||this.preventAltUp||this.isRequested?this.preventAutoFill=!1:(this.preventAutoFill=!0,this.searchLists(e)),this.preventAltUp=!1,"autocomplete"===this.getModuleName()&&!f(this.ulElement)&&!f(this.ulElement.getElementsByClassName("e-item-focus")[0])&&ze(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),e.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&""!==this.typedString||this.isPopupOpen&&this.queryString.length>0||""===this.typedString&&""===this.queryString&&"autocomplete"!==this.getModuleName()?(this.preventAutoFill=!0,this.searchLists(e)):""===this.typedString&&(this.list&&this.resetFocusElement(),this.activeIndex=null,"dropdownlist"!==this.getModuleName()&&(this.preventAutoFill=!0,this.searchLists(e),"autocomplete"===this.getModuleName()&&this.hidePopup())),e.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(e)}},t.prototype.onFilterDown=function(e){switch(e.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,e.preventDefault();break;case 9:this.isPopupOpen&&"autocomplete"!==this.getModuleName()&&e.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var e=this.getSelectionPoints();this.inputElement.setSelectionRange(e.end,e.end)}},t.prototype.getQuery=function(e){var i;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){i=e?e.clone():this.query?this.query.clone():new ii;var n=""===this.typedString?"contains":this.filterType,s=this.typeOfData(this.dataSource).typeof;i.where((this.dataSource instanceof Qe||"string"!==s)&&"number"!==s&&this.fields.text?this.fields.text:"",n,this.typedString,this.ignoreCase,this.ignoreAccent)}else i=e?e.clone():this.query?this.query.clone():new ii;return i},t.prototype.getSelectionPoints=function(){var e=this.inputElement;return{start:Math.abs(e.selectionStart),end:Math.abs(e.selectionEnd)}},t.prototype.searchLists=function(e){var i=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+Ii.clearIcon)&&(this.filterInput.parentElement.querySelector("."+Ii.clearIcon).style.visibility=""===this.filterInput.value?"hidden":"visible"),this.isDataFetched=!1,this.isFiltering()){var s={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(o,a,l){s.cancel||(i.isCustomFilter=!0,i.filteringAction(o,a,l))},baseEventArgs:e,cancel:!1};this.trigger("filtering",s,function(o){!o.cancel&&!i.isCustomFilter&&!o.preventDefaultAction&&i.filteringAction(i.dataSource,null,i.fields)})}},t.prototype.filter=function(e,i,n){this.isCustomFilter=!0,this.filteringAction(e,i,n)},t.prototype.filteringAction=function(e,i,n){f(this.filterInput)||(this.beforePopupOpen=!(!this.isPopupOpen&&"combobox"===this.getModuleName()&&""===this.filterInput.value),""!==this.filterInput.value.trim()||this.itemTemplate?(this.isNotSearchList=!1,i=""===this.filterInput.value.trim()?null:i,this.resetList(e,n,i)):(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!f(this.actionCompleteData.ulElement)&&!f(this.actionCompleteData.list)&&this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list),this.isTyped=!0,!f(this.itemData)&&"dropdownlist"===this.getModuleName()&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0),this.renderReactTemplates())},t.prototype.setSearchBox=function(e){if(this.isFiltering()){var i=e.querySelector("."+Ii.filterParent)?e.querySelector("."+Ii.filterParent):this.createElement("span",{className:Ii.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:Ii.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var n=!1;return Z.isDevice&&(n=!0),this.filterInputObj=ke.createInput({element:this.filterInput,buttons:n?[Ii.backIcon,Ii.filterBarClearIcon]:[Ii.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),f(this.cssClass)||(-1!==this.cssClass.split(" ").indexOf("e-outline")?N([this.filterInputObj.container],"e-outline"):-1!==this.cssClass.split(" ").indexOf("e-filled")&&N([this.filterInputObj.container],"e-filled")),Kt([this.filterInputObj.container],i),mi([i],e),ze(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Ii.clearIcon),!Z.isDevice&&this.clearIconElement&&(T.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),this.searchKeyModule=new In(this.filterInput,Z.isDevice?{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}:{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),T.add(this.filterInput,"input",this.onInput,this),T.add(this.filterInput,"keyup",this.onFilterUp,this),T.add(this.filterInput,"keydown",this.onFilterDown,this),T.add(this.filterInput,"blur",this.onBlurHandler,this),T.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}return Vbe},t.prototype.onInput=function(e){this.isValidKey=!0,Z.isDevice&&"mozilla"===Z.info.name&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(e))},t.prototype.pasteHandler=function(e){var i=this;setTimeout(function(){i.typedString=i.filterInput.value,i.searchLists(e)})},t.prototype.onActionFailure=function(e){r.prototype.onActionFailure.call(this,e),this.beforePopupOpen&&this.renderPopup()},t.prototype.onActionComplete=function(e,i,n,s){var o=this;if(this.isNotSearchList)this.isNotSearchList=!1;else if(this.isActive){var a=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(r.prototype.onActionComplete.call(this,e,i,n),this.updateSelectElementData(this.allowFiltering),this.isRequested&&!f(this.searchKeyEvent)&&"keydown"===this.searchKeyEvent.type&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!f(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.list.scrollTop=0,f(e)||ze(e,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false"}),this.initRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initRemoteRender=!1,this.value&&this.dataSource instanceof Qe){var l=f(this.fields.value)?this.fields.text:this.fields.value,h=this.fields.value.split(".");i.some(function(d){return f(d[l])&&h.length>1?o.checkFieldValue(d,h)===o.value:d[l]===o.value})?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new kn(l,"equal",this.value))).then(function(d){d.result.length>0&&o.addItem(d.result,i.length),o.updateValues()})}else this.updateValues();this.initial=!1}else"autocomplete"===this.getModuleName()&&this.value&&this.setInputValue();"autocomplete"!==this.getModuleName()&&this.isFiltering()&&!this.isTyped&&((!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||f(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof Qe||!f(this.dataSource)&&!f(this.dataSource.length)&&0!==this.dataSource.length))&&(this.itemTemplate&&("EJS-COMBOBOX"===this.element.tagName||"EJS-DROPDOWNLIST"===this.element.tagName)&&this.allowFiltering?setTimeout(function(){o.updateActionCompleteDataValues(e,i)},0):this.updateActionCompleteDataValues(e,i)),this.addNewItem(i,a),f(this.itemData)||this.focusIndexItem()),this.beforePopupOpen&&this.renderPopup(n)}},t.prototype.checkFieldValue=function(e,i){var n=e;return i.forEach(function(s){n=n[s]}),n},t.prototype.updateActionCompleteDataValues=function(e,i){this.actionCompleteData={ulElement:e.cloneNode(!0),list:i,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(e,i){var n=this;if(!f(this.itemData)&&!f(i)){var s=this.getItemData().value;e.some(function(a){return("string"==typeof a||"number"==typeof a)&&a===s||Q(n.fields.value,a)===s})||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(e,i,n){var s=this;"autocomplete"!==this.getModuleName()&&this.actionCompleteData.ulElement&&(this.itemTemplate&&"EJS-COMBOBOX"===this.element.tagName&&this.allowFiltering?setTimeout(function(){s.actionCompleteDataUpdate(e,i,n)},0):this.actionCompleteDataUpdate(e,i,n))},t.prototype.actionCompleteDataUpdate=function(e,i,n){null!=n?this.actionCompleteData.ulElement.insertBefore(e.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[n]):this.actionCompleteData.ulElement.appendChild(e.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(i)<0&&this.actionCompleteData.list.push(i)},t.prototype.focusIndexItem=function(){var e=this.getItemData().value;this.activeIndex=this.getIndexByValue(e);var i=this.findListElement(this.list,"li","data-value",e);this.selectedLI=i,this.activeItem(i),this.removeFocus()},t.prototype.updateSelection=function(){var e=this.list.querySelector(".e-active");e?(this.setProperties({index:this.getIndexByValue(e.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+Je_li).classList.add(Ii.focus))},t.prototype.removeFocus=function(){var e=this.list.querySelectorAll("."+Ii.focus);e&&e.length&&z(e,Ii.focus)},t.prototype.renderPopup=function(e){var i=this;this.popupObj&&document.body.contains(this.popupObj.element)?this.refreshPopup():this.trigger("beforeOpen",{cancel:!1},function(s){if(s.cancel)i.beforePopupOpen=!1;else{var o=i.createElement("div",{id:i.element.id+"_popup",className:"e-ddl e-popup "+(null!=i.cssClass?i.cssClass:"")}),a=i.setSearchBox(o);if(i.listHeight=it(i.popupHeight),i.headerTemplate&&i.setHeaderTemplate(o),Kt([i.list],o),i.footerTemplate&&i.setFooterTemplate(o),document.body.appendChild(o),o.style.visibility="hidden","auto"!==i.popupHeight){if(i.searchBoxHeight=0,f(a.container)||(i.searchBoxHeight=a.container.parentElement.getBoundingClientRect().height,i.listHeight=(parseInt(i.listHeight,10)-i.searchBoxHeight).toString()+"px"),i.headerTemplate){i.header=i.header?i.header:o.querySelector(".e-ddl-header");var l=Math.round(i.header.getBoundingClientRect().height);i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"}i.footerTemplate&&(i.footer=i.footer?i.footer:o.querySelector(".e-ddl-footer"),l=Math.round(i.footer.getBoundingClientRect().height),i.listHeight=(parseInt(i.listHeight,10)-(l+i.searchBoxHeight)).toString()+"px"),i.list.style.maxHeight=(parseInt(i.listHeight,10)-2).toString()+"px",o.style.maxHeight=it(i.popupHeight)}else o.style.height="auto";var h=0,u=void 0;if(!f(i.selectedLI)&&!f(i.activeIndex)&&i.activeIndex>=0?i.setScrollPosition():i.list.scrollTop=0,Z.isDevice&&!i.allowFiltering&&("dropdownlist"===i.getModuleName()||i.isDropDownClick&&"combobox"===i.getModuleName())){h=i.getOffsetValue(o);var d=i.isEmptyList()?i.list:i.liCollections[0];u=-(parseInt(getComputedStyle(d).textIndent,10)-parseInt(getComputedStyle(i.inputElement).paddingLeft,10)+parseInt(getComputedStyle(i.inputElement.parentElement).borderLeftWidth,10))}i.getFocusElement(),i.createPopup(o,h,u),i.checkCollision(o),Z.isDevice&&(i.popupObj.element.classList.add(Ii.device),("dropdownlist"===i.getModuleName()||"combobox"===i.getModuleName()&&!i.allowFiltering&&i.isDropDownClick)&&(i.popupObj.collision={X:"fit",Y:"fit"}),i.isFilterLayout()&&(i.popupObj.element.classList.add(Ii.mobileFilter),i.popupObj.position={X:0,Y:0},i.popupObj.dataBind(),ze(i.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),N([document.body,i.popupObj.element],Ii.popupFullScreen),i.setSearchBoxPosition(),i.backIconElement=a.container.querySelector(".e-back-icon"),i.clearIconElement=a.container.querySelector("."+Ii.clearIcon),T.add(i.backIconElement,"click",i.clickOnBackIcon,i),T.add(i.clearIconElement,"click",i.clearText,i))),o.style.visibility="visible",N([o],"e-popup-close");for(var v=0,C=i.popupObj.getScrollableParent(i.inputWrapper.container);v<C.length;v++)T.add(C[v],"scroll",i.scrollHandler,i);f(i.list)||(i.unWireListEvents(),i.wireListEvents()),i.selectedElementID=i.selectedLI?i.selectedLI.id:null,ze(i.targetElement(),{"aria-expanded":"true","aria-owns":i.inputElement.id+"_options"}),i.inputElement.setAttribute("aria-expanded","true"),N([i.isFiltering()?i.filterInput.parentElement:i.inputWrapper.container],[Ii.inputFocus]),i.beforePopupOpen=!0,i.trigger("open",{popup:i.popupObj,event:e,cancel:!1,animation:{name:"FadeIn",duration:100}},function(B){B.cancel?(i.beforePopupOpen=!1,i.destroyPopup()):(N([i.inputWrapper.container],[Ii.iconAnimation]),i.renderReactTemplates(),i.popupObj.show(new gr(B.animation),1e3===i.zIndex?i.element:null))})}})},t.prototype.checkCollision=function(e){(!Z.isDevice||Z.isDevice&&"dropdownlist"!==this.getModuleName()&&!this.isDropDownClick)&&(Zp(e).length>0&&(e.style.marginTop=-parseInt(getComputedStyle(e).marginTop,10)+"px"),this.popupObj.resolveCollision())},t.prototype.getOffsetValue=function(e){var i=getComputedStyle(e),n=parseInt(i.borderTopWidth,10),s=parseInt(i.borderBottomWidth,10);return this.setPopupPosition(n+s)},t.prototype.createPopup=function(e,i,n){var s=this;this.popupObj=new kl(e,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:{X:"flip",Y:"flip"},offsetY:i,enableRtl:this.enableRtl,offsetX:n,position:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){s.isDocumentClick||s.focusDropDown(),s.isReact&&s.clearTemplate(["headerTemplate","footerTemplate"]),s.getModuleName(),s.isNotSearchList=!1,s.isDocumentClick=!1,s.destroyPopup(),s.isFiltering()&&s.actionCompleteData.list&&s.actionCompleteData.list[0]&&(s.isActive=!0,s.onActionComplete(s.actionCompleteData.ulElement,s.actionCompleteData.list,null,!0))},open:function(){T.add(document,"mousedown",s.onDocumentClick,s),s.isPopupOpen=!0;var o=s.actionCompleteData&&s.actionCompleteData.ulElement&&s.actionCompleteData.ulElement.querySelector("li"),a=s.list.querySelector("ul li");f(s.ulElement)||f(s.ulElement.getElementsByClassName("e-item-focus")[0])?!f(s.ulElement)&&!f(s.ulElement.getElementsByClassName("e-active")[0])&&ze(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-active")[0].id}):ze(s.targetElement(),{"aria-activedescendant":s.ulElement.getElementsByClassName("e-item-focus")[0].id}),s.isFiltering()&&s.itemTemplate&&s.element.tagName===s.getNgDirective()&&o&&a&&o.textContent!==a.textContent&&"EJS-COMBOBOX"!==s.element.tagName&&s.cloneElements(),s.isFilterLayout()&&(z([s.inputWrapper.container],[Ii.inputFocus]),s.isFilterFocus=!0,s.filterInput.focus(),s.inputWrapper.clearButton&&N([s.inputWrapper.clearButton],Ii.clearIconHide)),s.activeStateChange()},targetExitViewport:function(){Z.isDevice||s.hidePopup()}})},t.prototype.isEmptyList=function(){return!f(this.liCollections)&&0===this.liCollections.length},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return"dropdownlist"===this.getModuleName()&&this.allowFiltering},t.prototype.scrollHandler=function(){Z.isDevice&&("dropdownlist"===this.getModuleName()&&!this.isFilterLayout()||"combobox"===this.getModuleName()&&!this.allowFiltering&&this.isDropDownClick)&&this.hidePopup()},t.prototype.setSearchBoxPosition=function(){var e=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-e+"px",this.list.style.height=window.innerHeight-e+"px";var i=this.filterInput.parentElement.querySelector("."+Ii.clearIcon);le(this.filterInput),i.parentElement.insertBefore(this.filterInput,i)},t.prototype.setPopupPosition=function(e){var i,n=e,s=this.list.querySelector("."+Ii.focus)||this.selectedLI,o=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=o.getBoundingClientRect().height,h=this.list.offsetHeight/2,u=f(s)?o.offsetTop:s.offsetTop;if(a.offsetTop-h<u&&!f(this.liCollections)&&this.liCollections.length>0&&!f(s)){var m=this.list.offsetHeight/l,v=parseInt(getComputedStyle(this.list).paddingBottom,10);i=(m-(this.liCollections.length-this.activeIndex))*l-n+v,this.list.scrollTop=s.offsetTop}else u>h?(i=h-l/2,this.list.scrollTop=u-h+l/2):i=u;return-(i=i+l+n-(l-this.inputWrapper.container.offsetHeight)/2)},t.prototype.setWidth=function(){var e=it(this.popupWidth);if(e.indexOf("%")>-1&&(e=(this.inputWrapper.container.offsetWidth*parseFloat(e)/100).toString()+"px"),Z.isDevice&&!this.allowFiltering&&("dropdownlist"===this.getModuleName()||this.isDropDownClick&&"combobox"===this.getModuleName())){var n=this.isEmptyList()?this.list:this.liCollections[0];e=parseInt(e,10)+2*(parseInt(getComputedStyle(n).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))+"px"}return e},t.prototype.scrollBottom=function(e){if(!f(this.selectedLI)){var i=this.list.offsetHeight,n=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.scrollTop+n-i;s=e?s+2*parseInt(getComputedStyle(this.list).paddingTop,10):s;var o=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;o=this.fields.groupBy&&!f(this.fixedHeaderElement)?o-this.fixedHeaderElement.offsetHeight:o,0===this.activeIndex?this.list.scrollTop=0:(n>i||!(o>0&&this.list.offsetHeight>o))&&(this.list.scrollTop=s)}},t.prototype.scrollTop=function(){if(!f(this.selectedLI)){var e=this.selectedLI.offsetTop-this.list.scrollTop;e=this.fields.groupBy&&!f(this.fixedHeaderElement)?e-this.fixedHeaderElement.offsetHeight:e;var i=this.selectedLI.offsetTop+this.selectedLI.offsetHeight-this.list.scrollTop;0===this.activeIndex?this.list.scrollTop=0:e<0?this.list.scrollTop=this.list.scrollTop+e:i>0&&this.list.offsetHeight>i||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!f(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(e){if(f(e))this.scrollBottom(!0);else switch(e.action){case"pageDown":case"down":case"end":this.scrollBottom();break;default:this.scrollTop()}},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null)},t.prototype.setEleWidth=function(e){f(e)||("number"==typeof e?this.inputWrapper.container.style.width=it(e):"string"==typeof e&&(this.inputWrapper.container.style.width=e.match(/px|%|em/)?e:it(e)))},t.prototype.closePopup=function(e,i){var n=this;if(this.isTyped=!1,this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen){T.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var o=0,a=this.popupObj.getScrollableParent(this.inputWrapper.container);o<a.length;o++)T.remove(a[o],"scroll",this.scrollHandler);Z.isDevice&&this.isFilterLayout()&&z([document.body,this.popupObj.element],Ii.popupFullScreen),this.isFilterLayout()&&(Z.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&T.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(T.remove(this.backIconElement,"click",this.clickOnBackIcon),T.remove(this.clearIconElement,"click",this.clearText)),T.remove(this.filterInput,"input",this.onInput),T.remove(this.filterInput,"keyup",this.onFilterUp),T.remove(this.filterInput,"keydown",this.onFilterDown),T.remove(this.filterInput,"blur",this.onBlurHandler),T.remove(this.filterInput,"paste",this.pasteHandler),this.filterInput=null),ze(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(Ii.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.beforePopupOpen=!1,this.trigger("close",{popup:this.popupObj,cancel:!1,animation:{name:"FadeOut",duration:100,delay:e||0},event:i||null},function(m){if(!f(n.popupObj)&&!f(n.popupObj.element.querySelector(".e-fixed-head"))){var v=n.popupObj.element.querySelector(".e-fixed-head");v.parentNode.removeChild(v),n.fixedHeaderElement=null}m.cancel||("autocomplete"===n.getModuleName()&&n.rippleFun(),n.isPopupOpen?n.popupObj.hide(new gr(m.animation)):n.destroyPopup())})}},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj.destroy(),le(this.popupObj.element)},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){"INPUT"===this.element.tagName?(this.inputElement=this.element,f(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),f(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var e=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(e=this.cssClass.replace(/\s+/g," ").trim()),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=ke.createInput({element:this.inputElement,buttons:this.isPopupButton()?[Ii.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:"dropdownlist"===this.getModuleName()||this.readonly,placeholder:this.placeholder,cssClass:e,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:Ii.hiddenElement}}),mi([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=it(this.width),this.inputWrapper.container.classList.add("e-ddl"),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var i=this.element.getAttribute("id")?this.element.getAttribute("id"):Ui("ej2_dropdownlist");if(this.element.id=i,this.hiddenElement.id=i+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),ze(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),null!==this.value||null!==this.activeIndex||null!==this.text)this.initValue();else if("SELECT"===this.element.tagName&&this.element.options[0]){var n=this.element;this.value=n.options[n.selectedIndex].value,this.text=f(this.value)?null:n.options[n.selectedIndex].textContent,this.initValue()}this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(o){o.stopImmediatePropagation()},this.inputElement.onchange=function(o){o.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),f(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var s=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!f(this.element.id)&&""!==this.element.id&&!f(s)&&(s.id="label_"+this.element.id.replace(/ /g,"_"),ze(this.inputElement,{"aria-labelledby":s.id})),this.renderComplete()},t.prototype.setFooterTemplate=function(e){this.footer?this.isReact?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),N([this.footer],Ii.footer));var s=Pi(this.dropdownCompiler(this.footerTemplate)?re(this.footerTemplate,document).innerHTML.trim():this.footerTemplate)({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);if(s&&s.length>0)for(var o=0;o<s.length;o++)this.footer.appendChild(s[o]);Kt([this.footer],e)},t.prototype.setHeaderTemplate=function(e){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),N([this.header],Ii.header));var s=Pi(this.dropdownCompiler(this.headerTemplate)?re(this.headerTemplate,document).innerHTML.trim():this.headerTemplate)({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);if(s&&s.length)for(var o=0;o<s.length;o++)this.header.appendChild(s[o]);var a=e.querySelector("div.e-content");e.insertBefore(this.header,a)},t.prototype.setOldText=function(e){this.text=e},t.prototype.setOldValue=function(e){this.value=e},t.prototype.refreshPopup=function(){!f(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&(!Z.isDevice||!this.isFilterLayout())||"autocomplete"===this.getModuleName())&&(z([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(e){e.dataSource&&!f(Object.keys(e.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&e.dataSource instanceof Qe)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var i=-1!==Object.keys(e).indexOf("value")&&f(e.value),n=-1!==Object.keys(e).indexOf("text")&&f(e.text);"autocomplete"!==this.getModuleName()&&this.allowFiltering&&(i||n)&&(this.itemData=null),this.allowFiltering&&e.dataSource&&!f(Object.keys(e.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&e.query&&!f(Object.keys(e.query))&&(this.actionCompleteData="combobox"===this.getModuleName()?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(e){(""!==this.inputElement.value||!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Qe)&&0===e.dataSource.length))&&this.clearAll(null,e),this.fields.groupBy&&e.fields&&!this.isGroupChecking&&this.list&&(T.remove(this.list,"scroll",this.setFloatingHeader),T.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!f(e)&&(f(e.dataSource)||!(e.dataSource instanceof Qe)&&0===e.dataSource.length))||e.dataSource!==[])&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var e=this.getItemData();this.setProperties({text:e.text,value:e.value})},t.prototype.updateInputFields=function(){"dropdownlist"===this.getModuleName()&&ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(e,i){var n=this;"dropdownlist"===this.getModuleName()&&(this.checkData(e),this.setUpdateInitial(["fields","query","dataSource"],e));for(var s=function(u){switch(u){case"query":case"dataSource":break;case"htmlAttributes":o.setHTMLAttributes();break;case"width":o.setEleWidth(e.width),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"placeholder":ke.setPlaceholder(e.placeholder,o.inputElement);break;case"filterBarPlaceholder":o.filterInput&&ke.setPlaceholder(e.filterBarPlaceholder,o.filterInput);break;case"readonly":"dropdownlist"!==o.getModuleName()&&ke.setReadonly(e.readonly,o.inputElement),o.setReadOnly();break;case"cssClass":o.setCssClass(e.cssClass,i.cssClass),ke.calculateWidth(o.inputElement,o.inputWrapper.container);break;case"enableRtl":o.setEnableRtl();break;case"enabled":o.setEnable();break;case"text":if(null===e.text){o.clearAll();break}if(o.list||(o.dataSource instanceof Qe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var d=o.getElementByText(e.text);if(!o.checkValidLi(d))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.text,i.text,"text");else if(e.text&&o.dataSource instanceof Qe){var m=o.getItems().length,v=f(o.fields.text)?o.fields.value:o.fields.text;o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new kn(v,"equal",e.text))).then(function(M){M.result.length>0?(n.addItem(M.result,m),n.updateValues()):n.setOldText(i.text)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldText(i.text);o.updateInputFields()}break;case"value":if(null===e.value){o.clearAll();break}if(o.notify("beforeValueChange",{newProp:e}),o.list||(o.dataSource instanceof Qe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender){var C=o.getElementByValue(e.value);if(!o.checkValidLi(C))if(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100)o.setSelectionData(e.value,i.value,"value");else if(e.value&&o.dataSource instanceof Qe){var S=o.getItems().length;v=f(o.fields.value)?o.fields.text:o.fields.value,o.typedString="",o.dataSource.executeQuery(o.getQuery(o.query).where(new kn(v,"equal",e.value))).then(function(P){P.result.length>0?(n.addItem(P.result,S),n.updateValues()):n.setOldValue(i.value)})}else"autocomplete"===o.getModuleName()?o.setInputValue(e,i):o.setOldValue(i.value);o.updateInputFields(),o.preventChange=o.isAngular&&o.preventChange?!o.preventChange:o.preventChange}break;case"index":if(null===e.index){o.clearAll();break}o.list||(o.dataSource instanceof Qe&&(o.initRemoteRender=!0),o.renderList()),!o.initRemoteRender&&o.liCollections&&(o.checkValidLi(o.liCollections[e.index])||(o.liCollections&&100===o.liCollections.length&&"autocomplete"===o.getModuleName()&&o.listData.length>100?o.setSelectionData(e.index,i.index,"index"):o.index=i.index),o.updateInputFields());break;case"footerTemplate":o.popupObj&&o.setFooterTemplate(o.popupObj.element);break;case"headerTemplate":o.popupObj&&o.setHeaderTemplate(o.popupObj.element);break;case"valueTemplate":!f(o.itemData)&&null!=o.valueTemplate&&o.setValueTemplate();break;case"allowFiltering":o.allowFiltering&&(o.actionCompleteData={ulElement:o.ulElement,list:o.listData,isUpdated:!0},o.actionData=o.actionCompleteData,o.updateSelectElementData(o.allowFiltering));break;case"floatLabelType":ke.removeFloating(o.inputWrapper),ke.addFloating(o.inputElement,e.floatLabelType,o.placeholder,o.createElement),!f(o.inputWrapper.buttons[0])&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&"Never"!==o.floatLabelType&&o.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":ke.setClearButton(e.showClearButton,o.inputElement,o.inputWrapper,null,o.createElement),o.bindClearEvent();break;default:var _=o.getPropObject(u,e,i);r.prototype.onPropertyChanged.call(o,_.newProperty,_.oldProperty)}},o=this,a=0,l=Object.keys(e);a<l.length;a++)s(l[a])},t.prototype.checkValidLi=function(e){return!!this.isValidLI(e)&&(this.setSelection(e,null),!0)},t.prototype.setSelectionData=function(e,i,n){var o,s=this;this.updateListValues=function(){"text"===n?(o=s.getElementByText(e),s.checkValidLi(o)||s.setOldText(i)):"value"===n?(o=s.getElementByValue(e),s.checkValidLi(o)||s.setOldValue(i)):"index"===n&&(s.checkValidLi(o=s.liCollections[e])||(s.index=i))}},t.prototype.setReadOnly=function(){this.readonly?N([this.inputWrapper.container],["e-readonly"]):z([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(e,i){},t.prototype.setCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupObj&&ke.setCssClass(e,[this.popupObj.element],i)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(e){if(this.enabled){if(this.isFiltering()&&this.dataSource instanceof Qe&&this.actionData.list!=this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen)return void this.refreshPopup();this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(f(this.list)||!qt(this.list)&&(this.list.classList.contains("e-nodata")||this.list.querySelectorAll("."+Je_li).length<=0))&&this.renderList(e),this.invokeRenderPopup(e)}},t.prototype.invokeRenderPopup=function(e){if(Z.isDevice&&this.isFilterLayout()){var i=this;window.onpopstate=function(){i.hidePopup()},history.pushState({},"")}(!f(this.list.children[0])||this.list.classList.contains("e-nodata"))&&this.renderPopup(e)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(e){if(this.isEscapeKey&&"dropdownlist"===this.getModuleName())if(ke.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,f(this.index))this.resetSelection();else{var i=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||i,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&null!==this.itemData&&this.setValueTemplate())}this.closePopup(0,e);var n=this.getItemData(),s=!f(this.selectedLI);this.inputElement&&""===this.inputElement.value.trim()&&!this.isInteracted&&(this.isSelectCustom||s&&this.inputElement.value!==n.text)&&(this.isSelectCustom=!1,this.clearAll(e))},t.prototype.focusIn=function(e){if(this.enabled&&!this.targetElement().classList.contains(Ii.disable)){var i=!1;this.preventFocus&&Z.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,i=!0),i||this.targetElement().focus(),N([this.inputWrapper.container],[Ii.inputFocus]),this.onFocus(e),ke.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(e){!this.enabled||(this.isTyped=!0,this.hidePopup(e),this.targetElement()&&this.targetElement().blur(),z([this.inputWrapper.container],[Ii.inputFocus]),ke.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){if(this.isActive=!1,function Abe(r){HH===r&&(HH="",t4="",Pg="",Pv=[])}(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.unWireEvent(),this.list&&this.unWireListEvents(),!this.element||this.element.classList.contains("e-"+this.getModuleName())){if(this.inputElement){for(var e=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],i=0;i<e.length;i++)this.inputElement.removeAttribute(e[i]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ke.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()||this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),le(this.inputWrapper.container),r.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof Qe&&(this.initRemoteRender=!0),this.renderList()),this.ulElement?r.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(e){return r.prototype.getDataByValue.call(this,e)},t.prototype.clear=function(){this.value=null},oo([E(null)],t.prototype,"cssClass",void 0),oo([E("100%")],t.prototype,"width",void 0),oo([E("300px")],t.prototype,"popupHeight",void 0),oo([E("100%")],t.prototype,"popupWidth",void 0),oo([E(null)],t.prototype,"placeholder",void 0),oo([E(null)],t.prototype,"filterBarPlaceholder",void 0),oo([E({})],t.prototype,"htmlAttributes",void 0),oo([E(null)],t.prototype,"query",void 0),oo([E(null)],t.prototype,"valueTemplate",void 0),oo([E(null)],t.prototype,"headerTemplate",void 0),oo([E(null)],t.prototype,"footerTemplate",void 0),oo([E(!1)],t.prototype,"allowFiltering",void 0),oo([E(!1)],t.prototype,"readonly",void 0),oo([E(null)],t.prototype,"text",void 0),oo([E(null)],t.prototype,"value",void 0),oo([E(null)],t.prototype,"index",void 0),oo([E("Never")],t.prototype,"floatLabelType",void 0),oo([E(!1)],t.prototype,"showClearButton",void 0),oo([q()],t.prototype,"filtering",void 0),oo([q()],t.prototype,"change",void 0),oo([q()],t.prototype,"beforeOpen",void 0),oo([q()],t.prototype,"open",void 0),oo([q()],t.prototype,"close",void 0),oo([q()],t.prototype,"blur",void 0),oo([q()],t.prototype,"focus",void 0),oo([si],t)}(zH);Ii.root="e-combobox",Ii.root="e-autocomplete",Ii.icon="e-input-group-icon e-ddl-icon e-search-icon",new Up;var c8,bie=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Eo=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},wf="e-other-month",Z4="e-other-year",SL="e-calendar",X4="e-year",Q4="e-month",aa="e-disabled",rC="e-overlay",J4="e-week-number",Nl="e-selected",uh="e-focused-date",nV="e-month-hide",rV="e-zoomin",Iie="e-calendar-day-header-lg",e8=864e5,Aie=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.effect="",n.isPopupClicked=!1,n.isDateSelected=!0,n.isTodayClicked=!1,n.preventChange=!1,n.isAngular=!1,n.previousDates=!1,n}return bie(t,r),t.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),"Islamic"===this.calendarMode&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new Vr(this.locale),(f(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date((new Date).setHours(0,0,0,0)),"calendar"===this.getModuleName()?(this.element.classList.add(SL),this.enableRtl&&this.element.classList.add("e-rtl"),Z.isDevice&&this.element.classList.add("e-device"),ze(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(SL),this.enableRtl&&this.calendarElement.classList.add("e-rtl"),Z.isDevice&&this.calendarElement.classList.add("e-device"),ze(this.calendarElement,{"data-role":"calendar"})),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},t.prototype.rangeValidation=function(e,i){f(e)&&this.setProperties({min:new Date(1900,0,1)},!0),f(i)&&this.setProperties({max:new Date(2099,11,31)},!0)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},t.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date((new Date).setHours(0,0,0,0)),!f(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},t.prototype.setOverlayIndex=function(e,i,n,s){if(s&&!f(i)&&!f(n)&&!f(e)){var o=parseInt(i.style.zIndex,10)?parseInt(i.style.zIndex,10):1e3;n.style.zIndex=(o-1).toString(),e.style.zIndex=o.toString()}},t.prototype.minMaxUpdate=function(e){+this.min<=+this.max?z([this.element],rC):(this.setProperties({min:this.min},!0),N([this.element],rC)),this.min=f(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=f(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},t.prototype.createHeader=function(){this.headerElement=this.createElement("div",{className:"e-header"});var s=this.createElement("div",{className:"e-icon-container"});this.previousIcon=this.createElement("button",{className:"e-prev",attrs:{type:"button"}}),$i(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),ze(this.previousIcon,{"aria-disabled":"false","aria-label":"previous month"}),this.nextIcon=this.createElement("button",{className:"e-next",attrs:{type:"button"}}),$i(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),"daterangepicker"===this.getModuleName()&&(ze(this.previousIcon,{tabIndex:"-1"}),ze(this.nextIcon,{tabIndex:"-1"})),ze(this.nextIcon,{"aria-disabled":"false","aria-label":"next month"}),this.headerTitleElement=this.createElement("div",{className:"e-day e-title"}),ze(this.headerTitleElement,{"aria-atomic":"true","aria-live":"assertive","aria-label":"title"}),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:"e-date-icon-prev e-icons"})),this.nextIcon.appendChild(this.createElement("span",{className:"e-date-icon-next  e-icons"})),s.appendChild(this.previousIcon),s.appendChild(this.nextIcon),this.headerElement.appendChild(s),"calendar"===this.getModuleName()?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},t.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:"e-content"}),this.table=this.createElement("table",{attrs:{tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),"calendar"===this.getModuleName()?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter()},t.prototype.getCultureValues=function(){var i,e=[],n="days.stand-alone."+this.dayHeaderFormat.toLowerCase();i="en"===this.locale||"en-US"===this.locale?Q(n,Wp()):this.getCultureObjects(Jo,""+this.locale);for(var s=0,o=Object.keys(i);s<o.length;s++)e.push(Q(o[s],i));return e},t.prototype.toCapitalize=function(e){return!f(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},t.prototype.createContentHeader=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content .e-week-header")[0])||le(this.element.querySelectorAll(".e-content .e-week-header")[0]):f(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||le(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var i="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:"e-week-header"}),this.weekNumber&&(i+='<th class="e-week-number"></th>',"calendar"===this.getModuleName()?N([this.element],""+J4):N([this.calendarElement],""+J4));for(var n=this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek),s=0;s<=6;s++)i+='<th  class="">'+this.toCapitalize(n[s])+"</th>";this.tableHeadElement.innerHTML=i="<tr>"+i+"</tr>",this.table.appendChild(this.tableHeadElement)},t.prototype.createContentBody=function(){switch("calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content tbody")[0])||le(this.element.querySelectorAll(".e-content tbody")[0]):f(this.calendarElement.querySelectorAll(".e-content tbody")[0])||le(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},t.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today"))},t.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),i=new Date(+this.max);this.globalize=new Vr(this.locale),this.l10=new es(this.getModuleName(),{today:"Today"},this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),$i(this.todayElement),this.updateFooter(),N([this.todayElement],["e-btn","e-today","e-flat","e-primary","e-css"]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(i.setHours(0,0,0,0)))||this.todayDisabled)&&N([this.todayElement],aa),this.footer=this.createElement("div",{className:"e-footer-container"}),this.footer.appendChild(this.todayElement),"calendar"===this.getModuleName()&&this.element.appendChild(this.footer),"datepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),"datetimepicker"===this.getModuleName()&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(aa)||T.add(this.todayElement,"click",this.todayButtonClick,this)}},t.prototype.wireEvents=function(e,i,n,s){T.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=he(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModule="calendar"===this.getModuleName()?new In(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):new In(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.dateWireEvents=function(e,i,n,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=he(this.defaultKeyConfigs,n),this.serverModuleName=s},t.prototype.todayButtonClick=function(e,i,n){this.showTodayButton&&(this.effect=this.currentView()===this.depth?"":"e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(i)),n):this.navigateTo("Month",new Date(this.checkValue(i)),n))},t.prototype.resetCalendar=function(){this.calendarElement&&le(this.calendarElement),this.tableBodyElement&&le(this.tableBodyElement),this.table&&le(this.table),this.tableHeadElement&&le(this.tableHeadElement),this.nextIcon&&le(this.nextIcon),this.previousIcon&&le(this.previousIcon),this.footer&&le(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},t.prototype.keyActionHandle=function(e,i,n){var o,s=this.tableBodyElement.querySelector("tr td.e-focused-date");o=n?f(s)||+i!==parseInt(s.getAttribute("id").split("_")[0],10)?this.tableBodyElement.querySelector("tr td.e-selected"):s:this.tableBodyElement.querySelector("tr td.e-selected");var a=this.getViewNumber(this.currentView()),l=this.getViewNumber(this.depth),h=a===l&&this.getViewNumber(this.start)>=l;switch(this.effect="",e.action){case"moveLeft":this.keyboardNavigate(-1,a,e,this.max,this.min),e.preventDefault();break;case"moveRight":this.keyboardNavigate(1,a,e,this.max,this.min),e.preventDefault();break;case"moveUp":this.keyboardNavigate(0===a?-7:-4,a,e,this.max,this.min),e.preventDefault();break;case"moveDown":this.keyboardNavigate(0===a?7:4,a,e,this.max,this.min),e.preventDefault();break;case"select":if(e.target===this.todayElement)this.todayButtonClick(e,i);else{var u=f(s)?o:s;if(!f(u)&&!u.classList.contains(aa))if(h){var d=new Date(parseInt(""+u.id,0));this.selectDate(e,d,u)}else this.contentClick(null,--a,u,i)}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!f(s)||!f(o)&&!h)&&this.contentClick(null,--a,s||o,i),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),le(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,a),le(this.tableBodyElement),0===a?this.renderMonths(e):1===a?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault()}"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.keyboardNavigate=function(e,i,n,s,o){var a=new Date(this.checkValue(this.currentDate));switch(i){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(le(this.tableBodyElement),this.renderDecades(n)):this.currentDate=a;break;case 1:this.addMonths(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(le(this.tableBodyElement),this.renderYears(n)):this.currentDate=a;break;case 0:this.addDay(this.currentDate,e,n,s,o),this.isMinMaxRange(this.currentDate)?(le(this.tableBodyElement),this.renderMonths(n)):this.currentDate=a}},t.prototype.preRender=function(e){var i=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(n){i.triggerNavigate(n)}},t.prototype.minMaxDate=function(e){var i=new Date(new Date(+e).setHours(0,0,0,0)),n=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+i==+n||+i==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},t.prototype.renderMonths=function(e,i,n){var o,s=this.weekNumber?8:7;o="Gregorian"===this.calendarMode?this.renderDays(this.currentDate,i,null,null,n,e):this.islamicModule.islamicRenderDays(this.currentDate,i),this.createContentHeader(),"Gregorian"===this.calendarMode?this.renderTemplate(o,s,Q4,e,i):this.islamicModule.islamicRenderTemplate(o,s,Q4,e,i)},t.prototype.renderDays=function(e,i,n,s,o,a){var m,l=[],u=o?new Date(+e):this.getDate(new Date,this.timezone),d=new Date(this.checkValue(e)),v=d.getMonth();this.titleUpdate(e,"days");var C=d;for(d=new Date(C.getFullYear(),C.getMonth(),0,C.getHours(),C.getMinutes(),C.getSeconds(),C.getMilliseconds());d.getDay()!==this.firstDayOfWeek;)this.setStartDate(d,-1*e8);for(var S=0;S<42;++S){var A=this.createElement("td",{className:"e-cell"}),_=this.createElement("span");if(S%7==0&&this.weekNumber){var M="FirstDay"===this.weekRule?6:"FirstFourDayWeek"===this.weekRule?3:0,P=new Date(d.getFullYear(),d.getMonth(),d.getDate()+M);_.textContent=""+this.getWeek(P),A.appendChild(_),N([A],""+J4),l.push(A)}m=new Date(+d),d=this.minMaxDate(d);var B={type:"dateTime",skeleton:"full"},j=this.globalize.parseDate(this.globalize.formatDate(d,B),B),G=this.dayCell(d),ne=this.globalize.formatDate(d,{type:"date",skeleton:"full"}),fe=this.createElement("span");fe.textContent=this.globalize.formatDate(d,{format:"d",type:"date",skeleton:"yMd"});var Ee=this.min>d||this.max<d;Ee?(N([G],aa),N([G],rC)):fe.setAttribute("title",""+ne),v!==d.getMonth()&&N([G],wf),(0===d.getDay()||6===d.getDay())&&N([G],"e-weekend"),G.appendChild(fe),this.renderDayCellArgs={date:d,isDisabled:!1,element:G,isOutOfRange:Ee};var Pe=this.renderDayCellArgs;if(this.renderDayCellEvent(Pe),Pe.isDisabled){var ie=new Date(this.checkValue(i)),Ie=new Date(this.checkValue(Pe.date));if(n){if(!f(s)&&s.length>0)for(var Te=0;Te<s.length;Te++)+new Date(this.globalize.formatDate(Pe.date,{type:"date",skeleton:"yMd"}))==+new Date(this.globalize.formatDate(s[Te],{type:"date",skeleton:"yMd"}))&&(s.splice(Te,1),Te=-1)}else ie&&+ie==+Ie&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!G.classList.contains(Nl)&&(N([G],aa),N([G],rC),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var je=G.classList.contains(wf),be=G.classList.contains(aa);be||T.add(G,"click",this.clickHandler,this);var Me=void 0;if(!f(a)&&"click"==a.type&&(Me=a.currentTarget),!n||f(s)||be)!be&&this.getDateVal(d,i)&&N([G],Nl);else{for(var He=0;He<s.length;He++){var Gt={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};if((this.globalize.formatDate(d,Gt)===this.globalize.formatDate(s[He],Gt)&&this.getDateVal(d,s[He])||this.getDateVal(d,i))&&N([G],Nl),!f(Me)&&Me.innerText===G.innerText&&this.previousDates&&G.classList.contains(Nl)&&Me.classList.contains(Nl)){z([G],Nl),this.previousDates=!1;for(var Qt=this.copyValues(s),vi=0;vi<Qt.length;vi++){var Yi={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(j,Yi)===this.globalize.formatDate(Qt[vi],Yi)&&(Te=Qt.indexOf(Qt[vi]),Qt.splice(Te,1),s.splice(Te,1))}this.setProperties({values:Qt},!0)}else this.updateFocus(je,be,d,G,e)}s.length<=0&&this.updateFocus(je,be,d,G,e)}this.updateFocus(je,be,d,G,e),j.getFullYear()===u.getFullYear()&&j.getMonth()===u.getMonth()&&j.getDate()===u.getDate()&&N([G],"e-today"),l.push(this.renderDayCellArgs.element),d=new Date(+m),this.addDay(d,1,null,this.max,this.min)}return l},t.prototype.updateFocus=function(e,i,n,s,o){o.getDate()!==n.getDate()||e||i?(o>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!i&&N([s],uh),o<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!i&&N([s],uh)):N([s],uh)},t.prototype.renderYears=function(e,i){this.removeTableHeadElement();var s=[],o=f(i),a=new Date(this.checkValue(this.currentDate)),l=a.getMonth(),h=a.getFullYear(),u=a,d=u.getFullYear(),m=new Date(this.checkValue(this.min)).getFullYear(),v=new Date(this.checkValue(this.min)).getMonth(),C=new Date(this.checkValue(this.max)).getFullYear(),S=new Date(this.checkValue(this.max)).getMonth();u.setMonth(0),this.titleUpdate(this.currentDate,"months"),u.setDate(1);for(var A=0;A<12;++A){var _=this.dayCell(u),M=this.createElement("span"),P=i&&i.getMonth()===u.getMonth(),B=i&&i.getFullYear()===h&&P;M.textContent=this.toCapitalize(this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(d<m||A<v&&d===m)||this.max&&(d>C||A>S&&d>=C)?N([_],aa):!o&&B?N([_],Nl):u.getMonth()===l&&this.currentDate.getMonth()===l&&N([_],uh),u.setDate(1),u.setMonth(u.getMonth()+1),_.classList.contains(aa)||T.add(_,"click",this.clickHandler,this),_.appendChild(M),s.push(_)}this.renderTemplate(s,4,X4,e,i)},t.prototype.renderDecades=function(e,i){this.removeTableHeadElement();var o=[],a=new Date(this.checkValue(this.currentDate));a.setMonth(0),a.setDate(1);var l=a.getFullYear(),h=new Date(a.setFullYear(l-l%10)),u=new Date(a.setFullYear(l-l%10+9)),d=h.getFullYear(),m=u.getFullYear(),v=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),C=this.globalize.formatDate(u,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=v+" - "+C;for(var A=new Date(l-l%10-1,0,1).getFullYear(),_=0;_<12;++_){var M=A+_;a.setFullYear(M);var P=this.dayCell(a),B=this.createElement("span");B.textContent=this.globalize.formatDate(a,{format:null,type:"dateTime",skeleton:"y"}),M<d||M>m?(N([P],Z4),!f(i)&&a.getFullYear()===i.getFullYear()&&N([P],Nl),(M<new Date(this.checkValue(this.min)).getFullYear()||M>new Date(this.checkValue(this.max)).getFullYear())&&N([P],aa)):M<new Date(this.checkValue(this.min)).getFullYear()||M>new Date(this.checkValue(this.max)).getFullYear()?N([P],aa):f(i)||a.getFullYear()!==i.getFullYear()?a.getFullYear()===this.currentDate.getFullYear()&&!P.classList.contains(aa)&&N([P],uh):N([P],Nl),P.classList.contains(aa)||T.add(P,"click",this.clickHandler,this),P.appendChild(B),o.push(P)}this.renderTemplate(o,4,"e-decade",e,i)},t.prototype.dayCell=function(e){var n={skeleton:"full",type:"dateTime",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a={className:"e-cell",attrs:{id:""+Ui(""+this.globalize.parseDate(this.globalize.formatDate(e,n),n).valueOf()),"aria-selected":"false"}};return this.createElement("td",a)},t.prototype.firstDay=function(e){var i="Decade"!==this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+wf):this.tableBodyElement.querySelectorAll("td:not(."+Z4);if(i.length)for(var n=0;n<i.length;n++)if(!i[n].classList.contains(aa)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.lastDay=function(e,i){var n=new Date(e.getFullYear(),e.getMonth()+1,0);if(2!==i){var s=Math.abs(n.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&n.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(n)}return this.findLastDay(this.firstDay(n))},t.prototype.checkDateValue=function(e){return!f(e)&&e instanceof Date&&!isNaN(+e)?e:null},t.prototype.findLastDay=function(e){var i="Decade"===this.currentView()?this.tableBodyElement.querySelectorAll("td:not(."+Z4):this.tableBodyElement.querySelectorAll("td:not(."+wf);if(i.length)for(var n=i.length-1;n>=0;n--)if(!i[n].classList.contains(aa)){e=new Date(parseInt(i[n].id,0));break}return e},t.prototype.removeTableHeadElement=function(){"calendar"===this.getModuleName()?f(this.element.querySelectorAll(".e-content table thead")[0])||le(this.tableHeadElement):f(this.calendarElement.querySelectorAll(".e-content table thead")[0])||le(this.tableHeadElement)},t.prototype.renderTemplate=function(e,i,n,s,o){var l,a=this.getViewNumber(this.currentView());this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),z([this.contentElement,this.headerElement],[Q4,"e-decade",X4]),N([this.contentElement,this.headerElement],[n]);for(var m=i,v=0,C=0;C<e.length/i;++C){for(l=this.createElement("tr"),v=0+v;v<m;v++)!e[v].classList.contains("e-week-number")&&!f(e[v].children[0])&&(N([e[v].children[0]],["e-day"]),$i(e[v].children[0],{duration:600,isCenterRipple:!0})),l.appendChild(e[v]),this.weekNumber&&7===v&&e[7].classList.contains(wf)&&N([l],nV),!this.weekNumber&&6===v&&e[6].classList.contains(wf)&&N([l],nV),this.weekNumber?41===v&&e[41].classList.contains(wf)&&N([l],nV):35===v&&e[35].classList.contains(wf)&&N([l],nV);m+=i,v+=0,this.tableBodyElement.appendChild(l)}this.table.querySelector("tbody").className=this.effect,"Gregorian"===this.calendarMode?this.iconHandler():this.islamicModule.islamicIconHandler(),(a!==this.getViewNumber(this.currentView())||0===a&&a!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},t.prototype.clickHandler=function(e,i){this.clickEventEmitter(e);var n=e.currentTarget,s=this.getViewNumber(this.currentView());n.classList.contains(wf)?this.contentClick(e,0,null,i):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)||2===s?this.contentClick(e,1,null,i):n.classList.contains(wf)||0!==s?this.contentClick(e,0,n,i):this.selectDate(e,this.getIdValue(e,null),null),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.clickEventEmitter=function(e){e.preventDefault()},t.prototype.contentClick=function(e,i,n,s){var o=this.getViewNumber(this.currentView()),a=this.getIdValue(e,n);switch(i){case 0:o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(le(this.tableBodyElement),this.currentDate=a,this.effect=rV,this.renderMonths(e)):("Gregorian"===this.calendarMode?(this.currentDate.setMonth(a.getMonth()),a.getMonth()>0&&this.currentDate.getMonth()!==a.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(a.getFullYear())):this.currentDate=a,this.effect=rV,le(this.tableBodyElement),this.renderMonths(e));break;case 1:if(o===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,a,null);else{if("Gregorian"===this.calendarMode)this.currentDate.setFullYear(a.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var l=this.islamicModule.getIslamicDate(a);this.currentDate=this.islamicModule.toGregorian(l.year,l.month,1)}this.effect=rV,le(this.tableBodyElement),this.renderYears(e)}}},t.prototype.switchView=function(e,i,n,s){switch(e){case 0:le(this.tableBodyElement),this.renderMonths(i,null,s),n&&!f(this.tableBodyElement.querySelectorAll("."+uh)[0])&&this.tableBodyElement.querySelectorAll("."+uh)[0].classList.remove(uh);break;case 1:le(this.tableBodyElement),this.renderYears(i);break;case 2:le(this.tableBodyElement),this.renderDecades(i)}},t.prototype.getModuleName=function(){return"calendar"},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),e},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.onPropertyChanged=function(e,i,n,s){this.effect="";for(var o=0,a=Object.keys(e);o<a.length;o++){var l=a[o];switch(l){case"enableRtl":e.enableRtl?"calendar"===this.getModuleName()?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):"calendar"===this.getModuleName()?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),this.setProperties("min"===l?{min:this.checkDateValue(new Date(this.checkValue(e.min)))}:{max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&le(this.tableBodyElement),this.minMaxUpdate(),n&&this.validateValues(n,s),("datepicker"!==this.getModuleName()||this.calendarElement)&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(le(this.todayElement),le(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(z([this.todayElement],aa),le(this.todayElement),le(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody());break;case"locale":this.globalize=new Vr(this.locale),("datepicker"!==this.getModuleName()||this.calendarElement)&&(this.createContentHeader(),this.createContentBody()),this.l10.setLocale(this.locale),this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!f(this.todayElement)&&!f(this.footer)&&(le(this.todayElement),le(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0)}}},t.prototype.validateValues=function(e,i){if(e&&!f(i)&&i.length>0){for(var n=this.copyValues(i),s=0;s<n.length;s++){var l,a="Gregorian"===this.calendarMode?"gregorian":"islamic";l=this.globalize.formatDate(n[s],"Gregorian"===this.calendarMode?{type:"date",skeleton:"yMd"}:{type:"dateTime",skeleton:"full",calendar:"islamic"});var d=this.globalize.formatDate(this.min,{type:"date",skeleton:"yMd",calendar:a}),C=this.globalize.formatDate(this.max,{type:"date",skeleton:"yMd",calendar:a});(+new Date(l)<+new Date(d)||+new Date(l)>+new Date(C))&&(n.splice(s,1),s=-1)}this.setProperties({values:n},!0)}},t.prototype.setValueUpdate=function(){f(this.tableBodyElement)||(le(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},t.prototype.copyValues=function(e){var i=[];if(!f(e)&&e.length>0)for(var n=0;n<e.length;n++)i.push(new Date(+e[n]));return i},t.prototype.titleUpdate=function(e,i){var s,o,n=new Vr(this.locale),a="Gregorian"===this.calendarMode?"gregorian":"islamic";switch("Gregorian"===this.calendarMode?(s=n.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:a}),o=n.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:a})):(s=n.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:a}),o=n.formatDate(e,{type:"dateTime",format:"y",calendar:a})),i){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=o}},t.prototype.setActiveDescendant=function(){var e,o,i=this.tableBodyElement.querySelector("tr td.e-focused-date"),n=this.tableBodyElement.querySelector("tr td.e-selected"),s="Gregorian"===this.calendarMode?"gregorian":"islamic",a=this.currentView();return o=this.globalize.formatDate(this.currentDate,"Month"===a?{type:"date",skeleton:"full",calendar:s}:"Year"===a?"islamic"!==s?{type:"date",skeleton:"yMMMM",calendar:s}:{type:"date",skeleton:"GyMMM",calendar:s}:{format:null,type:"date",skeleton:"y",calendar:s}),(n||i)&&(f(n)||n.setAttribute("aria-selected","true"),(i||n).setAttribute("aria-label",o),e=(i||n).getAttribute("id")),e},t.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},t.prototype.destroy=function(){("calendar"===this.getModuleName()&&this.element||this.calendarElement&&this.element)&&z([this.element],[SL]),"calendar"===this.getModuleName()&&this.element&&(T.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&T.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),f(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),r.prototype.destroy.call(this)},t.prototype.title=function(e){var i=this.getViewNumber(this.currentView());this.effect=rV,this.switchView(++i,e)},t.prototype.getViewNumber=function(e){return"Month"===e?0:"Year"===e?1:2},t.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e)}},t.prototype.navigatePrevious=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e)}},t.prototype.navigateNext=function(e){e.preventDefault(),"Gregorian"===this.calendarMode?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),"calendar"===this.getModuleName()&&this.table.focus()},t.prototype.navigateTo=function(e,i,n){+i>=+this.min&&+i<=+this.max&&(this.currentDate=i),+i<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+i>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,n)},t.prototype.currentView=function(){return this.contentElement.classList.contains(X4)?"Year":this.contentElement.classList.contains("e-decade")?"Decade":"Month"},t.prototype.getDateVal=function(e,i){return!f(i)&&e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear()},t.prototype.getCultureObjects=function(e,i){var n=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase();return Q("Gregorian"===this.calendarMode?"main."+this.locale+n:"main."+this.locale+s,e)},t.prototype.getWeek=function(e){var i=new Date(this.checkValue(e)).valueOf(),n=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((i-n+e8)/e8/7)},t.prototype.setStartDate=function(e,i){var n=e.getTimezoneOffset(),s=new Date(e.getTime()+i),o=s.getTimezoneOffset()-n;e.setTime(s.getTime()+6e4*o)},t.prototype.addMonths=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+i,1)}},t.prototype.addYears=function(e,i){if("Gregorian"===this.calendarMode){var n=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+i),e.setDate(Math.min(n,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+i,s.month,1)}},t.prototype.getIdValue=function(e,i){var o={type:"dateTime",skeleton:"full",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"},a=this.globalize.formatDate(new Date(parseInt(""+(e?e.currentTarget:i).getAttribute("id"),0)),o),l=this.globalize.parseDate(a,o),h=l.valueOf()-l.valueOf()%1e3;return new Date(h)},t.prototype.adjustLongHeaderSize=function(){z([this.element],Iie),"Wide"===this.dayHeaderFormat&&N(["calendar"===this.getModuleName()?this.element:this.calendarElement],Iie)},t.prototype.selectDate=function(e,i,n,s,o){var a=n||e.currentTarget;if(this.isDateSelected=!1,"Decade"===this.currentView())this.setDateDecade(this.currentDate,i.getFullYear());else if("Year"===this.currentView())this.setDateYear(this.currentDate,i);else{if(s&&!this.checkPresentDate(i,o)){var l=this.copyValues(o);!f(o)&&l.length>0?(l.push(new Date(this.checkValue(i))),this.setProperties({values:l},!0),this.setProperties({value:o[o.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(i))]},!0)}else this.setProperties({value:new Date(this.checkValue(i))},!0);this.currentDate=new Date(this.checkValue(i))}var h=U(a,"."+SL);if(f(h)&&(h=this.tableBodyElement),!s&&!f(h.querySelector("."+Nl))&&z([h.querySelector("."+Nl)],Nl),!s&&!f(h.querySelector("."+uh))&&z([h.querySelector("."+uh)],uh),s){l=this.copyValues(o);for(var u=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),d=0;d<u.length;d++){var m=h.querySelectorAll("td."+uh)[0],v=h.querySelectorAll("td."+Nl)[0];u[d]===m&&z([u[d]],uh),u[d]===v&&!this.checkPresentDate(new Date(parseInt(v.getAttribute("id").split("_")[0],10)),o)&&z([u[d]],Nl)}if(a.classList.contains(Nl)){z([a],Nl);for(var C=0;C<l.length;C++){var A={format:null,type:"date",skeleton:"short",calendar:"Gregorian"===this.calendarMode?"gregorian":"islamic"};this.globalize.formatDate(i,A)===this.globalize.formatDate(l[C],A)&&(d=l.indexOf(l[C]),l.splice(d,1),N([a],uh))}this.setProperties({values:l},!0)}else N([a],Nl)}else N([a],Nl);this.isDateSelected=!0},t.prototype.checkPresentDate=function(e,i){var n=!1;if(!f(i))for(var s=0;s<i.length;s++){var o="Gregorian"===this.calendarMode?"gregorian":"islamic";this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:o})===this.globalize.formatDate(i[s],{format:null,type:"date",skeleton:"short",calendar:o})&&(n=!0)}return n},t.prototype.setAriaActiveDescendant=function(){ze(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},t.prototype.previousIconHandler=function(e){e?(T.remove(this.previousIcon,"click",this.navigatePreviousHandler),N([this.previousIcon],""+aa),N([this.previousIcon],""+rC),this.previousIcon.setAttribute("aria-disabled","true")):(T.add(this.previousIcon,"click",this.navigatePreviousHandler),z([this.previousIcon],""+aa),z([this.previousIcon],""+rC),this.previousIcon.setAttribute("aria-disabled","false"))},t.prototype.renderDayCellEvent=function(e){he(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},t.prototype.navigatedEvent=function(e){he(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},t.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},t.prototype.nextIconHandler=function(e){e?(T.remove(this.nextIcon,"click",this.navigateNextHandler),N([this.nextIcon],aa),N([this.nextIcon],rC),this.nextIcon.setAttribute("aria-disabled","true")):(T.add(this.nextIcon,"click",this.navigateNextHandler),z([this.nextIcon],aa),z([this.nextIcon],rC),this.nextIcon.setAttribute("aria-disabled","false"))},t.prototype.compare=function(e,i,n){var o,a,s=i.getFullYear();return o=s,a=0,n&&(o=(s-=s%n)-s%n+n-1),e.getFullYear()>o?a=1:e.getFullYear()<s&&(a=-1),a},t.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},t.prototype.isMonthYearRange=function(e){if("Gregorian"===this.calendarMode)return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var i=this.islamicModule.getIslamicDate(e);return i.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&i.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&i.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&i.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},t.prototype.compareYear=function(e,i){return this.compare(e,i,0)},t.prototype.compareDecade=function(e,i){return this.compare(e,i,10)},t.prototype.shiftArray=function(e,i){return e.slice(i).concat(e.slice(0,i))},t.prototype.addDay=function(e,i,n,s,o){var a=i,l=new Date(+e);if(!f(this.tableBodyElement)&&!f(n)){for(;this.findNextTD(new Date(+e),a,s,o);)a+=i;var h=new Date(l.setDate(l.getDate()+a));a=+h>+s||+h<+o?a===i?i-i:i:a}e.setDate(e.getDate()+a)},t.prototype.findNextTD=function(e,i,n,s){var o=new Date(e.setDate(e.getDate()+i)),a=[],l=!1;if(a=(!f(o)&&o.getMonth())===(!f(this.currentDate)&&this.currentDate.getMonth())?("Gregorian"===this.calendarMode?this.renderDays(o):this.islamicModule.islamicRenderDays(this.currentDate,o)).filter(function(d){return d.classList.contains(aa)}):this.tableBodyElement.querySelectorAll("td."+aa),+o<=+n&&+o>=+s&&a.length)for(var u=0;u<a.length&&!(l=+o==+new Date(parseInt(a[u].id,0)));u++);return l},t.prototype.getMaxDays=function(e){var i,n=new Date(this.checkValue(e));i=28;for(var s=n.getMonth();n.getMonth()===s;)++i,n.setDate(i);return i-1},t.prototype.setDateDecade=function(e,i){e.setFullYear(i),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.setDateYear=function(e,i){e.setFullYear(i.getFullYear(),i.getMonth(),e.getDate()),i.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(i))),this.setProperties({value:new Date(this.checkValue(e))},!0)},t.prototype.compareMonth=function(e,i){return e.getFullYear()>i.getFullYear()?1:e.getFullYear()<i.getFullYear()?-1:e.getMonth()===i.getMonth()?0:e.getMonth()>i.getMonth()?1:-1},t.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},t.prototype.checkView=function(){"Decade"!==this.start&&"Year"!==this.start&&this.setProperties({start:"Month"},!0),"Decade"!==this.depth&&"Year"!==this.depth&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},t.prototype.getDate=function(e,i){return i&&(e=new Date(e.toLocaleString("en-US",{timeZone:i}))),e},Eo([E(new Date(1900,0,1))],t.prototype,"min",void 0),Eo([E(!0)],t.prototype,"enabled",void 0),Eo([E(null)],t.prototype,"cssClass",void 0),Eo([E(new Date(2099,11,31))],t.prototype,"max",void 0),Eo([E(null)],t.prototype,"firstDayOfWeek",void 0),Eo([E("Gregorian")],t.prototype,"calendarMode",void 0),Eo([E("Month")],t.prototype,"start",void 0),Eo([E("Month")],t.prototype,"depth",void 0),Eo([E(!1)],t.prototype,"weekNumber",void 0),Eo([E("FirstDay")],t.prototype,"weekRule",void 0),Eo([E(!0)],t.prototype,"showTodayButton",void 0),Eo([E("Short")],t.prototype,"dayHeaderFormat",void 0),Eo([E(!1)],t.prototype,"enablePersistence",void 0),Eo([E(null)],t.prototype,"keyConfigs",void 0),Eo([E(null)],t.prototype,"serverTimezoneOffset",void 0),Eo([q()],t.prototype,"created",void 0),Eo([q()],t.prototype,"destroyed",void 0),Eo([q()],t.prototype,"navigated",void 0),Eo([q()],t.prototype,"renderDayCell",void 0),Eo([si],t)}(Ji),E0e=function(r){function t(e,i){return r.call(this,e,i)||this}return bie(t,r),t.prototype.render=function(){if("Islamic"===this.calendarMode&&void 0===this.islamicModule&&Tw("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&"object"==typeof this.values&&!f(this.values)&&this.values.length>0){for(var e=[],i=[],n=0;n<this.values.length;n++)-1===e.indexOf(+this.values[n])&&(e.push(+this.values[n]),i.push(this.values[n]));this.setProperties({values:i},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if("string"==typeof this.values[s]&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var o=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,o)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),"calendar"===this.getModuleName()&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),r.prototype.render.call(this),"calendar"===this.getModuleName()){var a=U(this.element,"form");a&&T.add(a,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},t.prototype.setEnable=function(e){e?z([this.element],aa):N([this.element],aa)},t.prototype.setClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),!f(i)&&""!==i&&z([this.element],i.split(" ")),f(e)||N([this.element],e.split(" "))},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(i,e)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3)}},t.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},t.prototype.validateDate=function(){"string"==typeof this.value&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),r.prototype.validateDate.call(this,this.value),!f(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},t.prototype.minMaxUpdate=function(){"calendar"===this.getModuleName()&&(!f(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),"calendar"===this.getModuleName()||f(this.value)?r.prototype.minMaxUpdate.call(this,this.value):!f(this.value)&&this.value<this.min&&this.min<=this.max?r.prototype.minMaxUpdate.call(this,this.min):!f(this.value)&&this.value>this.max&&this.min<=this.max&&r.prototype.minMaxUpdate.call(this,this.max)},t.prototype.generateTodayVal=function(e){var i=new Date;return f(this.timezone)||(i=r.prototype.getDate.call(this,i,this.timezone)),e&&f(this.timezone)?(i.setHours(e.getHours()),i.setMinutes(e.getMinutes()),i.setSeconds(e.getSeconds()),i.setMilliseconds(e.getMilliseconds())):i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0),i},t.prototype.todayButtonClick=function(e){if(this.showTodayButton){var i=this.generateTodayVal(this.value);if(this.setProperties({value:i},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var n=this.copyValues(this.values);r.prototype.checkPresentDate.call(this,i,this.values)||(n.push(i),this.setProperties({values:n}))}r.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},t.prototype.keyActionHandle=function(e){r.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},t.prototype.preRender=function(){var e=this;this.changeHandler=function(i){e.triggerChange(i)},this.checkView(),r.prototype.preRender.call(this,this.value)},t.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,r.prototype.createContent.call(this)},t.prototype.minMaxDate=function(e){return r.prototype.minMaxDate.call(this,e)},t.prototype.renderMonths=function(e,i,n){r.prototype.renderMonths.call(this,e,this.value,n)},t.prototype.renderDays=function(e,i,n,s,o,a){var l=r.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,o,a);return this.isMultiSelection&&r.prototype.validateValues.call(this,this.isMultiSelection,this.values),l},t.prototype.renderYears=function(e){"Gregorian"===this.calendarMode?r.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},t.prototype.renderDecades=function(e){"Gregorian"===this.calendarMode?r.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},t.prototype.renderTemplate=function(e,i,n,s){"Gregorian"===this.calendarMode?r.prototype.renderTemplate.call(this,e,i,n,s,this.value):this.islamicModule.islamicRenderTemplate(e,i,n,s,this.value),this.changedArgs={value:this.value,values:this.values},this.changeHandler()},t.prototype.clickHandler=function(e){var i=e.currentTarget;if(this.isPopupClicked=!0,i.classList.contains(wf))if(this.isMultiSelection){var n=this.copyValues(this.values);-1===n.toString().indexOf(this.getIdValue(e,null).toString())?(n.push(this.getIdValue(e,null)),this.setProperties({values:n},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();r.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!f(this.tableBodyElement.querySelectorAll("."+uh)[0])&&"Year"===s&&this.tableBodyElement.querySelectorAll("."+uh)[0].classList.remove(uh)},t.prototype.switchView=function(e,i,n,s){r.prototype.switchView.call(this,e,i,this.isMultiSelection,s)},t.prototype.getModuleName=function(){return r.prototype.getModuleName.call(this),"calendar"},t.prototype.getPersistData=function(){return r.prototype.getPersistData.call(this),this.addOnPersist(["value","values"])},t.prototype.onPropertyChanged=function(e,i){this.effect="",this.rangeValidation(this.min,this.max);for(var n=0,s=Object.keys(e);n<s.length;n++)switch(s[n]){case"value":this.isDateSelected&&("string"==typeof e.value?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:i.value},!0),this.update());break;case"values":if(this.isDateSelected){if("string"==typeof e.values||"number"==typeof e.values)this.setProperties({values:null},!0);else{for(var a=this.copyValues(this.values),l=0;l<a.length;l++){var h=a[l];this.checkDateValue(h)&&!r.prototype.checkPresentDate.call(this,h,a)&&a.push(h)}this.setProperties({values:a},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":"calendar"===this.getModuleName()&&this.setClass(e.cssClass,i.cssClass);break;default:r.prototype.onPropertyChanged.call(this,e,i,this.isMultiSelection,this.values)}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},t.prototype.destroy=function(){if(r.prototype.destroy.call(this),"calendar"===this.getModuleName()){var e=U(this.element,"form");e&&T.remove(e,"reset",this.formResetHandler.bind(this))}},t.prototype.navigateTo=function(e,i,n){this.minMaxUpdate(),r.prototype.navigateTo.call(this,e,i,n)},t.prototype.currentView=function(){return r.prototype.currentView.call(this)},t.prototype.addDate=function(e){if("string"!=typeof e&&"number"!=typeof e){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)this.checkDateValue(n[s])&&!r.prototype.checkPresentDate.call(this,n[s],i)&&(!f(i)&&i.length>0?i.push(n[s]):i=[new Date(+n[s])]);else this.checkDateValue(e)&&!r.prototype.checkPresentDate.call(this,e,i)&&(!f(i)&&i.length>0?i.push(e):i=[new Date(+e)]);this.setProperties({values:i},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,i),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.removeDate=function(e){if("string"!=typeof e&&"number"!=typeof e&&!f(this.values)&&this.values.length>0){var i=this.copyValues(this.values);if("object"==typeof e&&e.length>0)for(var n=e,s=0;s<n.length;s++)for(var o=0;o<i.length;o++)+i[o]==+n[s]&&i.splice(o,1);else for(o=0;o<i.length;o++)+i[o]==+e&&i.splice(o,1);this.setProperties({values:i},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},t.prototype.setTodayDate=function(e){var i=new Date(+e);this.setProperties({value:i},!0),r.prototype.todayButtonClick.call(this,null,i,!0)},t.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),r.prototype.setValueUpdate.call(this)},t.prototype.selectDate=function(e,i,n){r.prototype.selectDate.call(this,e,i,n,this.isMultiSelection,this.values),this.isMultiSelection&&!f(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},t.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},t.prototype.triggerChange=function(e){!f(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!f(e),f(this.value)||this.setProperties({value:this.value},!0),this.isMultiSelection||+this.value===Number.NaN||(f(this.value)||f(this.previousDate)||+new Date(this.value.toDateString())==+new Date(this.previousDate.toDateString()))&&(null!=this.previousDate||isNaN(+this.value))?!f(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length):this.changeEvent(e)},Eo([E(null)],t.prototype,"value",void 0),Eo([E(null)],t.prototype,"values",void 0),Eo([E(!1)],t.prototype,"isMultiSelection",void 0),Eo([q()],t.prototype,"change",void 0),Eo([si],t)}(Aie),O0e=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),_s=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},oV="e-datepicker",Oie="e-popup-wrapper",t8="e-input-focus",aV="e-active",Mie="e-date-overflow",lV="e-selected",i8="e-non-edit",Fie=["title","class","style"],hV=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.previousElementValue="",n.isDateIconClicked=!1,n.isAltKeyPressed=!1,n.isInteracted=!0,n.invalidValueString=null,n.checkPreviousValue=null,n.maskedDateValue="",n.isAngular=!1,n.preventChange=!1,n.isIconClicked=!1,n.isDynamicValueChanged=!1,n.moduleName=n.getModuleName(),n.isFocused=!1,n.datepickerOptions=e,n}return O0e(t,r),t.prototype.render=function(){this.initialize(),this.bindEvents(),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},t.prototype.setTimeZone=function(e){if(!f(this.serverTimezoneOffset)&&this.value){var s=e+(new Date).getTimezoneOffset()/60;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+60*s*60*1e3),this.updateInput()}},t.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),i=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,i)},t.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):ze(this.inputElement,{readonly:""}),this.updateIconState()},t.prototype.updateIconState=function(){this.allowEdit||!this.inputWrapper||this.readonly?this.inputWrapper&&z([this.inputWrapper.container],[i8]):""===this.inputElement.value?z([this.inputWrapper.container],[i8]):N([this.inputWrapper.container],[i8])},t.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.updateInput(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&this.updateInputValue(this.maskedDateValue),this.previousElementValue=this.inputElement.value,this.previousDate=f(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},t.prototype.createInput=function(){if("datepicker"===this.getModuleName()){var i={placeholder:this.placeholder};this.globalize=new Vr(this.locale),this.l10n=new es("datepicker",i,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}var n=this.cssClass;!f(this.cssClass)&&""!==this.cssClass&&(n=this.cssClass.replace(/\s+/g," ").trim()),this.inputWrapper=ke.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:!this.enableMask,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:n,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:["e-input-group-icon e-date-icon e-icons"]},this.createElement),this.setWidth(this.width),this.inputElement.setAttribute("name",""!==this.inputElement.name?""+this.inputElement.getAttribute("name"):""+this.element.id),ze(this.inputElement,{"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false"}),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),ke.addAttributes({"aria-label":"select"},this.inputWrapper.buttons[0]),N([this.inputWrapper.container],"e-date-wrapper")},t.prototype.updateInput=function(e){if(void 0===e&&(e=!1),this.value&&!this.isCalendar()&&!e&&this.disabledDates(),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(r.prototype.validateDate.call(this),this.minMaxUpdates(),r.prototype.minMaxUpdate.call(this)),!f(this.value)){var n=this.value,s=void 0,o=f(this.formatString)?this.dateTimeFormat:this.formatString;s="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:o,type:"dateTime",skeleton:"yMd"}:{format:o,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),(+n<=+this.max&&+n>=+this.min||!this.strictMode&&(+n>=+this.max||!+this.value||!+this.value||+n<=+this.min))&&this.updateInputValue(s)}f(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&f(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},t.prototype.minMaxUpdates=function(){!f(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!f(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},t.prototype.checkStringValue=function(e){var i=null,n=null,s=null;if("datetimepicker"===this.getModuleName()){var o=new Vr(this.locale);"Gregorian"===this.calendarMode?(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(n={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:o.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else n="Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return f(i=this.checkDateValue(this.globalize.parseDate(e,n)))&&"datetimepicker"===this.getModuleName()&&(i=this.checkDateValue(this.globalize.parseDate(e,s))),i},t.prototype.checkInvalidValue=function(e){if(!(e instanceof Date||f(e))){var i=null,n=e;if("number"==typeof e&&(n=e.toString()),"datetimepicker"===this.getModuleName()){var a=new Vr(this.locale);a.getDatePattern({skeleton:"yMd"})}var l=!1;if("string"!=typeof n)n=null,l=!0;else if("string"==typeof n&&(n=n.trim()),!(i=this.checkStringValue(n))){var u=null;u=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(n)&&!u.test(n)||/^[a-zA-Z0-9- ]*$/.test(n)||isNaN(+new Date(this.checkValue(n)))?l=!0:i=new Date(n)}l?(this.strictMode||(this.invalidValueString=n),this.setProperties({value:null},!0)):this.setProperties({value:i},!0)}},t.prototype.bindInputEvent=function(){(!f(this.formatString)||this.enableMask)&&(this.enableMask||-1===this.formatString.indexOf("y")?T.add(this.inputElement,"input",this.inputHandler,this):T.remove(this.inputElement,"input",this.inputHandler))},t.prototype.bindEvents=function(){T.add(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler,this),T.add(this.inputElement,"mouseup",this.mouseUpHandler,this),T.add(this.inputElement,"focus",this.inputFocusHandler,this),T.add(this.inputElement,"blur",this.inputBlurHandler,this),this.enableMask&&T.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),T.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&T.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=he(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new In(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&("Delete"!==e.code&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}))}},t.prototype.unBindEvents=function(){T.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateIconHandler),T.remove(this.inputElement,"mouseup",this.mouseUpHandler),T.remove(this.inputElement,"focus",this.inputFocusHandler),T.remove(this.inputElement,"blur",this.inputBlurHandler),T.remove(this.inputElement,"change",this.inputChangeHandler),this.enableMask&&T.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&T.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&T.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},t.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=f(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},t.prototype.inputChangeHandler=function(e){!this.enabled||e.stopPropagation()},t.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&T.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},t.prototype.resetHandler=function(e){!this.enabled||(e.preventDefault(),this.clear(e))},t.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.clear=function(e){if(this.setProperties({value:null},!0),this.enableMask||this.updateInputValue(""),this.trigger("cleared",{event:e}),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),U(this.element,"form")){var n=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),n.dispatchEvent(s)}},t.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},t.prototype.updateInputValue=function(e){ke.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.dateIconHandler=function(e){!this.enabled||(this.isIconClicked=!0,Z.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus(),this.inputElement.focus(),N([this.inputWrapper.container],[t8]),N(this.inputWrapper.buttons,aV))),this.isIconClicked=!1)},t.prototype.updateHtmlAttributeToWrapper=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];if(!f(this.htmlAttributes[n])&&Fie.indexOf(n)>-1)if("class"===n){var s=this.htmlAttributes[n].replace(/\s+/g," ").trim();""!==s&&N([this.inputWrapper.container],s.split(" "))}else if("style"===n){var o=this.inputWrapper.container.getAttribute(n);f(o)?o=this.htmlAttributes[n]:";"===o.charAt(o.length-1)?o+=this.htmlAttributes[n]:o=o+";"+this.htmlAttributes[n],this.inputWrapper.container.setAttribute(n,o)}else this.inputWrapper.container.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateHtmlAttributeToElement=function(){if(!f(this.htmlAttributes))for(var e=0,i=Object.keys(this.htmlAttributes);e<i.length;e++){var n=i[e];Fie.indexOf(n)<0&&this.inputElement.setAttribute(n,this.htmlAttributes[n])}},t.prototype.updateCssClass=function(e,i){f(i)||(i=i.replace(/\s+/g," ").trim()),f(e)||(e=e.replace(/\s+/g," ").trim()),ke.setCssClass(e,[this.inputWrapper.container],i),this.popupWrapper&&ke.setCssClass(e,[this.popupWrapper],i)},t.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),"datetimepicker"===this.getModuleName()&&this.inputElement.focus();break;case"tab":this.hide(e)}},t.prototype.inputFocusHandler=function(){if(this.isFocused=!0,this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},t.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},t.prototype.inputBlurHandler=function(e){this.enabled&&(this.strictModeUpdate(),""===this.inputElement.value&&f(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&"Always"!==this.floatLabelType&&this.inputElement.value==this.maskedDateValue&&!this.value&&("Auto"==this.floatLabelType||"Never"==this.floatLabelType||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),"datepicker"===this.getModuleName()&&this.trigger("blur",{model:this}),this.isCalendar()&&(this.defaultKeyConfigs=he(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new In(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1)},t.prototype.documentHandler=function(e){!f(this.popupObj)&&(this.inputWrapper.container.contains(e.target)&&"mousedown"!==e.type||this.popupObj.element&&this.popupObj.element.contains(e.target))&&"touchstart"!==e.type&&e.preventDefault();var i=e.target;U(i,".e-datepicker.e-popup-wrapper")||U(i,".e-input-group")===this.inputWrapper.container||i.classList.contains("e-day")?U(i,".e-datepicker.e-popup-wrapper")&&(i.classList.contains("e-day")&&!f(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&U(i,".e-content")&&U(i,".e-content").classList.contains("e-"+this.depth.toLowerCase())||U(i,".e-footer-container")&&i.classList.contains("e-today")&&i.classList.contains("e-btn")&&+new Date(+this.value)==+r.prototype.generateTodayVal.call(this,this.value))&&this.hide(e):(this.hide(e),this.focusOut())},t.prototype.inputKeyActionHandle=function(e){var i=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),"datepicker"===this.getModuleName()&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":var n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var o=this.inputElement.value.length;(0==n&&s==o||s!==o&&"tab"==e.action||0!==n&&"shiftTab"==e.action)&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),n=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=n,this.inputElement.selectionEnd=s),this.hide(e);break;default:this.defaultAction(e),"select"===e.action&&i===this.depth&&this.hide(e)}},t.prototype.defaultAction=function(e){this.previousDate=!f(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(r.prototype.keyActionHandle.call(this,e),this.isCalendar()&&ze(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},t.prototype.popupUpdate=function(){if((f(this.value)&&!f(this.previousDate)||+this.value!=+this.previousDate)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+lV).length>0&&z(this.popupObj.element.querySelectorAll("."+lV),[lV]),!f(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));r.prototype.navigateTo.call(this,"Month",e)}},t.prototype.strictModeUpdate=function(){var e,s,o;e="datetimepicker"===this.getModuleName()?f(this.formatString)?this.dateTimeFormat:this.formatString:f(this.formatString)?this.formatString:this.formatString.replace("dd","d"),f(e)||e.split("M").length-1<3&&(e=e.replace("MM","M")),s="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:e,type:"dateTime",skeleton:"yMd"}:{format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},"string"==typeof this.inputElement.value&&(this.inputElement.value=this.inputElement.value.trim()),"datetimepicker"===this.getModuleName()?o=this.checkDateValue(this.globalize.parseDate(this.inputElement.value,s))?this.globalize.parseDate(this.inputElement.value.toLocaleUpperCase(),s):this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{type:"dateTime",skeleton:"yMd"}:{type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(o=!f(o=this.globalize.parseDate(this.inputElement.value,s))&&isNaN(+o)?null:o,!f(this.formatString)&&""!==this.inputElement.value&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&-1===this.formatString.indexOf("y")&&o.setFullYear(this.value.getFullYear())),"datepicker"===this.getModuleName()&&this.value&&!isNaN(+this.value)&&o&&o.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&o?(this.updateInputValue(this.globalize.formatDate(o,s)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:o},!0),this.strictMode&&!o&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),f(this.value)&&(this.currentDate=new Date((new Date).setHours(0,0,0,0)))},t.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:oV+" "+Oie}),f(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),Z.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=oV+" e-date-modal",document.body.className+=" "+Mie,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new kl(this.popupWrapper,{content:this.calendarElement,relateTo:Z.isDevice?document.body:this.inputWrapper.container,position:Z.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},offsetY:4,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:Z.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},open:function(){"datetimepicker"!==e.getModuleName()&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=he(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new In(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new In(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),le(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){Z.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},t.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},t.prototype.modelHeader=function(){var e,i=this.createElement("div",{className:"e-model-header"}),n=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),o=this.createElement("span",{className:"e-model-day"}),a=this.createElement("span",{className:"e-model-month"});e="Gregorian"===this.calendarMode?{format:"y",skeleton:"dateTime"}:{format:"y",skeleton:"dateTime",calendar:"islamic"},n.textContent=""+this.globalize.formatDate(this.value||new Date,e),e="Gregorian"===this.calendarMode?{format:"E",skeleton:"dateTime"}:{format:"E",skeleton:"dateTime",calendar:"islamic"},o.textContent=this.globalize.formatDate(this.value||new Date,e)+", ",e="Gregorian"===this.calendarMode?{format:"MMM d",skeleton:"dateTime"}:{format:"MMM d",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e),i.appendChild(n),s.appendChild(o),s.appendChild(a),i.appendChild(s),this.calendarElement.insertBefore(i,this.calendarElement.firstElementChild)},t.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!f(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0)},t.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},t.prototype.changeEvent=function(e){(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.selectCalendar(e),this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass())},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},t.prototype.selectCalendar=function(e){var i,n;n="datetimepicker"===this.getModuleName()&&f(this.formatString)?this.dateTimeFormat:this.formatString,this.value&&(i="datetimepicker"===this.getModuleName()?this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:n,type:"dateTime",skeleton:"yMd"}:{format:n,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(this.changedArgs.value,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),f(i)||(this.updateInputValue(i),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},t.prototype.isCalendar=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+Oie))},t.prototype.setWidth=function(e){this.inputWrapper.container.style.width="number"==typeof e?it(this.width):"string"==typeof e?e.match(/px|%|em/)?this.width:it(this.width):"100%"},t.prototype.show=function(e,i){var n=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,o=void 0;f(this.value)||+this.value>=+this.min&&+this.value<=+this.max?o=this.value||null:(o=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)),this.isCalendar()||(r.prototype.render.call(this),this.setProperties({value:o||null},!0),this.previousDate=o,this.createCalendar()),Z.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:i||null,cancel:!1,appendTo:Z.isDevice?this.mobilePopupWrapper:document.body},this.trigger("open",this.preventArgs,function(l){(n.preventArgs=l,s&&!n.preventArgs.cancel)?(N(n.inputWrapper.buttons,aV),n.preventArgs.appendTo.appendChild(n.popupWrapper),n.popupObj.refreshPosition(n.inputElement),n.popupObj.show(new gr({name:"FadeIn",duration:Z.isDevice?0:300}),1e3===n.zIndex?n.element:null),r.prototype.setOverlayIndex.call(n,n.mobilePopupWrapper,n.popupObj.element,n.modal,Z.isDevice),n.setAriaAttributes()):(n.popupObj.destroy(),n.popupWrapper=n.popupObj=null);!f(n.inputElement)&&""===n.inputElement.value&&!f(n.tableBodyElement)&&n.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(N([n.tableBodyElement.querySelector("td.e-selected")],"e-focused-date"),z(n.tableBodyElement.querySelectorAll("td.e-selected"),lV)),T.add(document,"mousedown touchstart",n.documentHandler,n)})}},t.prototype.hide=function(e){var i=this;if(f(this.popupWrapper))Z.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var n=!0;this.preventArgs={preventDefault:function(){n=!1},popup:this.popupObj,event:e||null,cancel:!1},z(this.inputWrapper.buttons,aV),z([document.body],Mie);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(o){i.closeEventCallback(n,o)}):this.closeEventCallback(n,s)}},t.prototype.closeEventCallback=function(e,i){this.preventArgs=i,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),z(this.inputWrapper.buttons,aV)),this.setAriaAttributes(),Z.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),Z.isDevice&&(f(this.mobilePopupWrapper)||(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null)),T.remove(document,"mousedown touchstart",this.documentHandler),Z.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),N([this.inputWrapper.container],[t8]))},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(z([this.inputWrapper.container],[t8]),this.inputElement.blur())},t.prototype.currentView=function(){var e;return this.calendarElement&&(e=r.prototype.currentView.call(this)),e},t.prototype.navigateTo=function(e,i){this.calendarElement&&r.prototype.navigateTo.call(this,e,i)},t.prototype.destroy=function(){this.unBindEvents(),r.prototype.destroy.call(this),this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains("e-popup")&&r.prototype.destroy.call(this),this.inputElement&&(ke.removeAttributes({"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},this.inputElement),f(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),T.remove(this.inputElement,"blur",this.inputBlurHandler),T.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&le(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),null===this.ngTag&&(this.inputElement&&(this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),z([this.inputElement],["e-input"])),z([this.element],[oV]),le(this.inputWrapper.container)),this.formElement&&T.remove(this.formElement,"reset",this.resetFormHandler)},t.prototype.ensureInputAttribute=function(){for(var e=[],i=0;i<this.inputElement.attributes.length;i++)e[i]=this.inputElement.attributes[i].name;for(i=0;i<e.length;i++)f(this.inputElementCopy.getAttribute(e[i]))?("value"===e[i].toLowerCase()&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[i])):("value"===e[i].toLowerCase()&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[i])),this.inputElement.setAttribute(e[i],this.inputElementCopy.getAttribute(e[i])))},t.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),z([this.inputElementCopy],[oV,"e-control","e-lib"]),this.inputElement=this.element,this.formElement=U(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,("EJS-DATEPICKER"===this.element.tagName||"EJS-DATETIMEPICKER"===this.element.tagName)&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?null!==this.ngTag&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):"datetimepicker"===this.getModuleName()?(this.element.id=Ui("ej2-datetimepicker"),null!==this.ngTag&&ze(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=Ui("ej2-datepicker"),null!==this.ngTag&&ze(this.inputElement,{id:this.element.id+"_input"})),null!==this.ngTag&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),r.prototype.preRender.call(this)},t.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},t.prototype.validationAttribute=function(e,i){var n=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");i.setAttribute("name",n),e.removeAttribute("name");for(var s=["required","aria-required","form"],o=0;o<s.length;o++)if(!f(e.getAttribute(s[o]))){var a=e.getAttribute(s[o]);i.setAttribute(s[o],a),e.removeAttribute(s[o])}},t.prototype.checkFormat=function(){var e=new Vr(this.locale);if(this.format)if("string"==typeof this.format)this.formatString=this.format;else if(""===this.format.skeleton||f(this.format.skeleton))this.formatString="datetimepicker"===this.getModuleName()?this.dateTimeFormat:null;else{var i=this.format.skeleton;this.formatString="datetimepicker"===this.getModuleName()?e.getDatePattern({skeleton:i,type:"dateTime"}):e.getDatePattern({skeleton:i,type:"date"})}else this.formatString=null},t.prototype.checkHtmlAttributes=function(e){this.globalize=new Vr(this.locale),this.checkFormat(),this.checkView();var n,i=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"];n="datetimepicker"===this.getModuleName()?"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,o=i;s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"disabled":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.enabled||e){var l=!("disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a));this.setProperties({enabled:l},!e)}break;case"readonly":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.readonly||e){var h="readonly"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:h},!e)}break;case"placeholder":(f(this.datepickerOptions)||void 0===this.datepickerOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(a));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(a));break;case"value":if(f(this.datepickerOptions)||void 0===this.datepickerOptions.value||e){var u=this.inputElement.getAttribute(a);this.setProperties(Nt(a,this.globalize.parseDate(u,n),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var d=this.inputElement.getAttribute(a);this.setProperties(Nt(a,this.globalize.parseDate(d),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var m=this.inputElement.getAttribute(a);this.setProperties(Nt(a,this.globalize.parseDate(m),{}),!e)}break;case"type":"text"!==this.inputElement.getAttribute(a)&&this.inputElement.setAttribute("type","text")}}},t.prototype.getModuleName=function(){return"datepicker"},t.prototype.disabledDates=function(){var n=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),s=this.previousDate;this.minMaxUpdates(),r.prototype.render.call(this),this.previousDate=s;var l,a='*[id^="/id"]'.replace("/id",""+(n&&+n));this.strictMode||("string"==typeof this.value||"object"==typeof this.value&&+this.value!=+n)&&this.setProperties({value:n},!0),f(this.calendarElement.querySelectorAll(a)[0])||this.calendarElement.querySelectorAll(a)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date((new Date).setHours(0,0,0,0)))),l="datetimepicker"===this.getModuleName()?this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):this.globalize.formatDate(n,"Gregorian"===this.calendarMode?{format:this.formatString,type:"dateTime",skeleton:"yMd"}:{format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),this.popupObj||(this.updateInputValue(l),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})))},t.prototype.setAriaAttributes=function(){this.isCalendar()?(ke.addAttributes({"aria-expanded":"true"},this.inputElement),ze(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),this.value&&ze(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(ke.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-activedescendant"))},t.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),i=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!f(this.value)&&!(+new Date(+this.value).setMilliseconds(0)>=+this.min&&+new Date(+this.value).setMilliseconds(0)<=+this.max)||!this.strictMode&&""!==this.inputElement.value&&this.inputElement.value!==this.maskedDateValue&&f(this.value)||i?(N([this.inputWrapper.container],"e-error"),ze(this.inputElement,{"aria-invalid":"true"})):(z([this.inputWrapper.container],"e-error"),ze(this.inputElement,{"aria-invalid":"false"}))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){switch(s[n]){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,f(this.value)&&(this.updateInputValue(""),this.currentDate=new Date((new Date).setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":ke.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new Vr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.placeholder,this.inputElement),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&r.prototype.onPropertyChanged.call(this,e,i);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,i.cssClass);break;case"showClearButton":ke.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},_s([E(null)],t.prototype,"width",void 0),_s([E(null)],t.prototype,"value",void 0),_s([E(null)],t.prototype,"cssClass",void 0),_s([E(!1)],t.prototype,"strictMode",void 0),_s([E(null)],t.prototype,"format",void 0),_s([E(!0)],t.prototype,"enabled",void 0),_s([E({})],t.prototype,"htmlAttributes",void 0),_s([E(null)],t.prototype,"values",void 0),_s([E(!1)],t.prototype,"isMultiSelection",void 0),_s([E(!0)],t.prototype,"showClearButton",void 0),_s([E(!0)],t.prototype,"allowEdit",void 0),_s([E(null)],t.prototype,"keyConfigs",void 0),_s([E(!1)],t.prototype,"enablePersistence",void 0),_s([E(1e3)],t.prototype,"zIndex",void 0),_s([E(!1)],t.prototype,"readonly",void 0),_s([E(null)],t.prototype,"placeholder",void 0),_s([E("Never")],t.prototype,"floatLabelType",void 0),_s([E(null)],t.prototype,"serverTimezoneOffset",void 0),_s([E(!1)],t.prototype,"openOnFocus",void 0),_s([E(!1)],t.prototype,"enableMask",void 0),_s([E({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),_s([q()],t.prototype,"open",void 0),_s([q()],t.prototype,"cleared",void 0),_s([q()],t.prototype,"close",void 0),_s([q()],t.prototype,"blur",void 0),_s([q()],t.prototype,"focus",void 0),_s([q()],t.prototype,"created",void 0),_s([q()],t.prototype,"destroyed",void 0),_s([si],t)}(E0e);(new Date).getDate(),(new Date).getMonth(),(new Date).getFullYear(),function(r){r.createListItems=function t(e,i,n,s,o,a){var l,h=6e4*a,u=[],d=[];l=+i.setMilliseconds(0);for(var m=+n.setMilliseconds(0);m>=l;)d.push(l),u.push(s.formatDate(new Date(l),{format:o,type:"time"})),l+=h;return{collection:d,list:cn.createList(e,u,null,!0)}}}(c8||(c8={}));var ML,Swe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Gr=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},Dwe=(new Date).getDate(),Iwe=(new Date).getMonth(),Awe=(new Date).getFullYear(),kwe=(new Date).getHours(),Rwe=(new Date).getMinutes(),_we=(new Date).getSeconds(),Lwe=(new Date).getMilliseconds(),AL="e-datetimepicker",rne="e-datetimepopup-wrapper",kL="e-input-focus",ane="e-icon-anim",d8="e-disabled",oC="e-active",p8="e-hover",aC="e-list-item",cne="e-time-overflow",f8=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.valueWithMinutes=null,n.scrollInvoked=!1,n.moduleName=n.getModuleName(),n.dateTimeOptions=e,n}return Swe(t,r),t.prototype.focusHandler=function(){!this.enabled||N([this.inputWrapper.container],kL)},t.prototype.focusIn=function(){r.prototype.focusIn.call(this)},t.prototype.focusOut=function(){document.activeElement===this.inputElement&&(this.inputElement.blur(),z([this.inputWrapper.container],[kL]))},t.prototype.blurHandler=function(e){if(this.enabled){if(this.isTimePopupOpen()&&this.isPreventBlur)return void this.inputElement.focus();z([this.inputWrapper.container],kL);var i={model:this};this.isTimePopupOpen()&&this.hide(e),this.trigger("blur",i)}},t.prototype.destroy=function(){this.popupObject&&this.popupObject.element.classList.contains("e-popup")&&(this.popupObject.destroy(),le(this.dateTimeWrapper),this.dateTimeWrapper=void 0,this.liCollections=this.timeCollections=[],f(this.rippleFn)||this.rippleFn()),this.inputElement&&ke.removeAttributes({"aria-live":"assertive","aria-atomic":"true","aria-invalid":"false",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-expanded":"false",role:"combobox",autocomplete:"off"},this.inputElement),this.isCalendar()&&(this.popupWrapper&&le(this.popupWrapper),this.popupObject=this.popupWrapper=null,this.keyboardHandler.destroy()),this.unBindInputEvents(),r.prototype.destroy.call(this)},t.prototype.render=function(){this.timekeyConfigure={enter:"enter",escape:"escape",end:"end",tab:"tab",home:"home",down:"downarrow",up:"uparrow",left:"leftarrow",right:"rightarrow",open:"alt+downarrow",close:"alt+uparrow"},this.valueWithMinutes=null,this.previousDateTime=null,this.isPreventBlur=!1,this.cloneElement=this.element.cloneNode(!0),this.dateTimeFormat=this.cldrDateTimeFormat(),this.initValue=this.value,!f(U(this.element,"fieldset"))&&U(this.element,"fieldset").disabled&&(this.enabled=!1),r.prototype.updateHtmlAttributeToElement.call(this),this.checkAttributes(!1),this.l10n=new es("datetimepicker",{placeholder:this.placeholder},this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),r.prototype.render.call(this),this.createInputElement(),r.prototype.updateHtmlAttributeToWrapper.call(this),this.bindInputEvents(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.setValue(),this.enableMask&&!this.value&&this.maskedDateValue&&("Always"==this.floatLabelType||!this.floatLabelType||!this.placeholder)&&ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(this.scrollTo)))},!0),this.previousDateTime=this.value&&new Date(+this.value),"EJS-DATETIMEPICKER"===this.element.tagName&&(this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),this.enabled||(this.inputElement.tabIndex=-1)),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon"),this.renderComplete()},t.prototype.setValue=function(){if(this.initValue=this.validateMinMaxRange(this.value),!this.strictMode&&this.isDateObject(this.initValue)){var e=this.validateMinMaxRange(this.initValue);ke.setValue(this.getFormattedValue(e),this.inputElement,this.floatLabelType,this.showClearButton),this.setProperties({value:e},!0)}else f(this.value)&&(this.initValue=null,this.setProperties({value:null},!0));this.valueWithMinutes=this.value,r.prototype.updateInput.call(this)},t.prototype.validateMinMaxRange=function(e){var i=e;return this.isDateObject(e)?i=this.validateValue(e):+this.min>+this.max&&this.disablePopupButton(!0),this.checkValidState(i),i},t.prototype.checkValidState=function(e){this.isValidState=!0,this.strictMode||(+e>+this.max||+e<+this.min)&&(this.isValidState=!1),this.checkErrorState()},t.prototype.checkErrorState=function(){this.isValidState?z([this.inputWrapper.container],"e-error"):N([this.inputWrapper.container],"e-error"),ze(this.inputElement,{"aria-invalid":this.isValidState?"false":"true"})},t.prototype.validateValue=function(e){var i=e;return this.strictMode?+this.min>+this.max?(this.disablePopupButton(!0),i=this.max):+e<+this.min?i=this.min:+e>+this.max&&(i=this.max):+this.min>+this.max&&(this.disablePopupButton(!0),i=e),i},t.prototype.disablePopupButton=function(e){e?(N([this.inputWrapper.buttons[0],this.timeIcon],d8),this.hide()):z([this.inputWrapper.buttons[0],this.timeIcon],d8)},t.prototype.getFormattedValue=function(e){var i;return f(e)?null:(i="Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd"}:{format:this.cldrDateTimeFormat(),type:"dateTime",skeleton:"yMd",calendar:"islamic"},this.globalize.formatDate(e,i))},t.prototype.isDateObject=function(e){return!f(e)&&!isNaN(+e)},t.prototype.createInputElement=function(){z([this.inputElement],"e-datepicker"),z([this.inputWrapper.container],"e-date-wrapper"),N([this.inputWrapper.container],"e-datetime-wrapper"),N([this.inputElement],AL),this.renderTimeIcon()},t.prototype.renderTimeIcon=function(){this.timeIcon=ke.appendSpan("e-input-group-icon e-time-icon e-icons",this.inputWrapper.container)},t.prototype.bindInputEvents=function(){T.add(this.timeIcon,"mousedown",this.timeHandler,this),T.add(this.inputWrapper.buttons[0],"mousedown",this.dateHandler,this),T.add(this.inputElement,"blur",this.blurHandler,this),T.add(this.inputElement,"focus",this.focusHandler,this),this.defaultKeyConfigs=he(this.defaultKeyConfigs,this.keyConfigs),this.keyboardHandler=new In(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyAction.bind(this),keyConfigs:this.defaultKeyConfigs})},t.prototype.unBindInputEvents=function(){T.remove(this.timeIcon,"mousedown touchstart",this.timeHandler),T.remove(this.inputWrapper.buttons[0],"mousedown touchstart",this.dateHandler),this.inputElement&&(T.remove(this.inputElement,"blur",this.blurHandler),T.remove(this.inputElement,"focus",this.focusHandler)),this.keyboardHandler&&this.keyboardHandler.destroy()},t.prototype.cldrTimeFormat=function(){return this.isNullOrEmpty(this.timeFormat)?"en"===this.locale||"en-US"===this.locale?Q("timeFormats.short",Wp()):this.getCultureTimeObject(Jo,""+this.locale):this.timeFormat},t.prototype.cldrDateTimeFormat=function(){var n=new Vr(this.locale).getDatePattern({skeleton:"yMd"});return this.isNullOrEmpty(this.formatString)?n+" "+this.getCldrFormat("time"):this.formatString},t.prototype.getCldrFormat=function(e){return"en"===this.locale||"en-US"===this.locale?Q("timeFormats.short",Wp()):this.getCultureTimeObject(Jo,""+this.locale)},t.prototype.isNullOrEmpty=function(e){return!!(f(e)||"string"==typeof e&&""===e.trim())},t.prototype.getCultureTimeObject=function(e,i){return Q("Gregorian"===this.calendarMode?"main."+this.locale+".dates.calendars.gregorian.timeFormats.short":"main."+this.locale+".dates.calendars.islamic.timeFormats.short",e)},t.prototype.timeHandler=function(e){!this.enabled||(this.isIconClicked=!0,Z.isDevice&&this.inputElement.setAttribute("readonly",""),e.currentTarget===this.timeIcon&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isDatePopupOpen()&&r.prototype.hide.call(this,e),this.isTimePopupOpen()?this.closePopup(e):(this.inputElement.focus(),this.popupCreation("time",e),N([this.inputWrapper.container],[kL]))),this.isIconClicked=!1)},t.prototype.dateHandler=function(e){!this.enabled||(e.currentTarget===this.inputWrapper.buttons[0]&&e.preventDefault(),this.enabled&&!this.readonly&&(this.isTimePopupOpen()&&this.closePopup(e),f(this.popupWrapper)||this.popupCreation("date",e)))},t.prototype.show=function(e,i){this.enabled&&this.readonly||!this.enabled||("time"!==e||this.dateTimeWrapper?this.popupObj||(this.isTimePopupOpen()&&this.hide(i),r.prototype.show.call(this),this.popupCreation("date",i)):(this.isDatePopupOpen()&&this.hide(i),this.popupCreation("time",i)))},t.prototype.toggle=function(e){this.isDatePopupOpen()?(r.prototype.hide.call(this,e),this.show("time",null)):this.isTimePopupOpen()?(this.hide(e),r.prototype.show.call(this,null,e),this.popupCreation("date",null)):this.show(null,e)},t.prototype.listCreation=function(){var e;e=this.globalize.parseDate(this.inputElement.value,"Gregorian"===this.calendarMode?{format:this.cldrDateTimeFormat(),type:"datetime"}:{format:this.cldrDateTimeFormat(),type:"datetime",calendar:"islamic"});var i=f(this.value)?""!==this.inputElement.value?e:new Date:this.value;this.valueWithMinutes=i,this.listWrapper=ti("div",{className:"e-content",attrs:{tabindex:"0"}});var n=this.startTime(i),s=this.endTime(i),o=c8.createListItems(this.createElement,n,s,this.globalize,this.cldrTimeFormat(),this.step);this.timeCollections=o.collection,this.listTag=o.list,ze(this.listTag,{role:"listbox","aria-hidden":"false",id:this.element.id+"_options"}),Kt([o.list],this.listWrapper),this.wireTimeListEvents(),this.rippleFn=$i(this.listWrapper,{duration:300,selector:"."+aC}),this.liCollections=this.listWrapper.querySelectorAll("."+aC)},t.prototype.popupCreation=function(e,i){Z.isDevice&&this.element.setAttribute("readonly","readonly"),"date"===e?!this.readonly&&this.popupWrapper&&(N([this.popupWrapper],rne),ze(this.popupWrapper,{id:this.element.id+"_datepopup"})):this.readonly||(this.dateTimeWrapper=ti("div",{className:AL+" e-popup",attrs:{id:this.element.id+"_timepopup",style:"visibility:hidden ; display:block"}}),f(this.cssClass)||(this.dateTimeWrapper.className+=" "+this.cssClass),!f(this.step)&&this.step>0&&(this.listCreation(),Kt([this.listWrapper],this.dateTimeWrapper)),document.body.appendChild(this.dateTimeWrapper),this.addTimeSelection(),this.renderPopup(),this.setTimeScrollPosition(),this.openPopup(i),this.popupObject.refreshPosition(this.inputElement))},t.prototype.openPopup=function(e){var i=this;this.preventArgs={cancel:!1,popup:this.popupObject,event:e||null},this.trigger("open",this.preventArgs,function(s){if(i.preventArgs=s,!i.preventArgs.cancel&&!i.readonly){i.popupObject.show(new gr({name:"FadeIn",duration:100}),1e3===i.zIndex?i.element:null),N([i.inputWrapper.container],[ane]),ze(i.inputElement,{"aria-expanded":"true"}),ze(i.inputElement,{"aria-owns":i.inputElement.id+"_options"}),T.add(document,"mousedown touchstart",i.documentClickHandler,i)}})},t.prototype.documentClickHandler=function(e){var i=e.target;!f(this.popupObject)&&(this.inputWrapper.container.contains(i)&&"mousedown"!==e.type||this.popupObject.element&&this.popupObject.element.contains(i))&&"touchstart"!==e.type&&e.preventDefault(),U(i,'[id="'+(this.popupObject&&this.popupObject.element.id+'"]'))||i===this.inputElement||i===this.timeIcon||i===this.inputWrapper.container?i!==this.inputElement&&(Z.isDevice||(this.isPreventBlur=document.activeElement===this.inputElement&&(Z.isIE||"edge"===Z.info.name)&&i===this.popupObject.element)):this.isTimePopupOpen()&&(this.hide(e),this.focusOut())},t.prototype.isTimePopupOpen=function(){return!(!this.dateTimeWrapper||!this.dateTimeWrapper.classList.contains(""+AL))},t.prototype.isDatePopupOpen=function(){return!(!this.popupWrapper||!this.popupWrapper.classList.contains(""+rne))},t.prototype.renderPopup=function(){var e=this;this.containerStyle=this.inputWrapper.container.getBoundingClientRect(),Z.isDevice&&(this.timeModal=ti("div"),this.timeModal.className=AL+" e-time-modal",document.body.className+=" "+cne,this.timeModal.style.display="block",document.body.appendChild(this.timeModal)),this.popupObject=new kl(this.dateTimeWrapper,{width:this.setPopupWidth(),zIndex:this.zIndex,targetType:"container",collision:Z.isDevice?{X:"fit",Y:"fit"}:{X:"flip",Y:"flip"},relateTo:Z.isDevice?document.body:this.inputWrapper.container,position:Z.isDevice?{X:"center",Y:"center"}:{X:"left",Y:"bottom"},enableRtl:this.enableRtl,offsetY:4,open:function(){e.dateTimeWrapper.style.visibility="visible",N([e.timeIcon],oC),Z.isDevice||(e.timekeyConfigure=he(e.timekeyConfigure,e.keyConfigs),e.inputEvent=new In(e.inputWrapper.container,{keyAction:e.timeKeyActionHandle.bind(e),keyConfigs:e.timekeyConfigure,eventName:"keydown"}))},close:function(){z([e.timeIcon],oC),e.unWireTimeListEvents(),e.inputElement.removeAttribute("aria-activedescendant"),Be(e.popupObject.element),e.popupObject.destroy(),e.dateTimeWrapper.innerHTML="",e.listWrapper=e.dateTimeWrapper=void 0,e.inputEvent&&e.inputEvent.destroy()},targetExitViewport:function(){Z.isDevice||e.hide()}}),this.popupObject.element.style.maxHeight="250px"},t.prototype.setDimension=function(e){return"number"==typeof e?e=it(e):"string"==typeof e||(e="100%"),e},t.prototype.setPopupWidth=function(){var e=this.setDimension(this.width);return e.indexOf("%")>-1&&(e=(this.containerStyle.width*parseFloat(e)/100).toString()+"px"),e},t.prototype.wireTimeListEvents=function(){T.add(this.listWrapper,"click",this.onMouseClick,this),Z.isDevice||(T.add(this.listWrapper,"mouseover",this.onMouseOver,this),T.add(this.listWrapper,"mouseout",this.onMouseLeave,this))},t.prototype.unWireTimeListEvents=function(){this.listWrapper&&(T.remove(this.listWrapper,"click",this.onMouseClick),T.remove(document,"mousedown touchstart",this.documentClickHandler),Z.isDevice||(T.add(this.listWrapper,"mouseover",this.onMouseOver,this),T.add(this.listWrapper,"mouseout",this.onMouseLeave,this)))},t.prototype.onMouseOver=function(e){var i=U(e.target,"."+aC);this.setTimeHover(i,p8)},t.prototype.onMouseLeave=function(){this.removeTimeHover(p8)},t.prototype.setTimeHover=function(e,i){this.enabled&&this.isValidLI(e)&&!e.classList.contains(i)&&(this.removeTimeHover(i),N([e],i))},t.prototype.getPopupHeight=function(){var e=parseInt("250px",10),i=this.dateTimeWrapper.getBoundingClientRect().height;return i>e?e:i},t.prototype.changeEvent=function(e){(this.value&&this.value.valueOf())!==(this.previousDateTime&&+this.previousDateTime.valueOf())&&(r.prototype.changeEvent.call(this,e),this.valueWithMinutes=this.value,this.setInputValue("date"),this.previousDateTime=this.value&&new Date(+this.value))},t.prototype.updateValue=function(e){this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs={value:this.value,event:e||null,isInteracted:!f(e),element:this.element},this.addTimeSelection(),this.trigger("change",this.changedArgs),this.previousDateTime=this.previousDate=this.value)},t.prototype.setTimeScrollPosition=function(){var e=this.selectedElement;f(e)?this.dateTimeWrapper&&this.checkDateValue(this.scrollTo)&&this.setScrollTo():this.findScrollTop(e)},t.prototype.findScrollTop=function(e){var i=this.getPopupHeight(),n=e.nextElementSibling,s=n?n.offsetTop:e.offsetTop,o=e.getBoundingClientRect().height;this.dateTimeWrapper.scrollTop=s+e.offsetTop>i?n?s-(i/2+o/2):s:0},t.prototype.setScrollTo=function(){var e,i=this.dateTimeWrapper.querySelectorAll("."+aC);if(i.length>=0){this.scrollInvoked=!0;var n=this.timeCollections[0],s=this.getDateObject(this.checkDateValue(this.scrollTo)).getTime();e=i[Math.round((s-n)/(6e4*this.step))]}else this.dateTimeWrapper.scrollTop=0;f(e)?this.dateTimeWrapper.scrollTop=0:this.findScrollTop(e)},t.prototype.setInputValue=function(e){if("date"===e)this.inputElement.value=this.previousElementValue=this.getFormattedValue(this.getFullDateTime()),this.setProperties({value:this.getFullDateTime()},!0);else{var i=this.getFormattedValue(new Date(this.timeCollections[this.activeIndex]));ke.setValue(i,this.inputElement,this.floatLabelType,this.showClearButton),this.previousElementValue=this.inputElement.value,this.setProperties({value:new Date(this.timeCollections[this.activeIndex])},!0),this.enableMask&&this.createMask()}this.updateIconState()},t.prototype.getFullDateTime=function(){var e;return e=this.isDateObject(this.valueWithMinutes)?this.combineDateTime(this.valueWithMinutes):this.previousDate,this.validateMinMaxRange(e)},t.prototype.createMask=function(){this.notify("createMask",{module:"MaskedDateTime"})},t.prototype.combineDateTime=function(e){if(this.isDateObject(e)){var i=this.previousDate.getDate(),n=this.previousDate.getMonth(),s=this.previousDate.getFullYear(),o=e.getHours(),a=e.getMinutes(),l=e.getSeconds();return new Date(s,n,i,o,a,l)}return this.previousDate},t.prototype.onMouseClick=function(e){var n=this.selectedElement=U(e.target,"."+aC);n&&n.classList.contains(aC)&&(this.timeValue=n.getAttribute("data-value"),this.hide(e)),this.setSelection(n,e)},t.prototype.setSelection=function(e,i){if(this.isValidLI(e)&&!e.classList.contains(oC)){this.selectedElement=e;var n=Array.prototype.slice.call(this.liCollections).indexOf(e);this.activeIndex=n,this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),N([this.selectedElement],oC),this.selectedElement.setAttribute("aria-selected","true"),this.updateValue(i)}},t.prototype.setTimeActiveClass=function(){var e=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;if(!f(e)){var i=e.querySelectorAll("."+aC);if(i.length)for(var n=0;n<i.length;n++)if(this.timeCollections[n]===+this.valueWithMinutes){i[n].setAttribute("aria-selected","true"),this.selectedElement=i[n],this.activeIndex=n,this.setTimeActiveDescendant();break}}},t.prototype.setTimeActiveDescendant=function(){!f(this.selectedElement)&&this.value?ze(this.inputElement,{"aria-activedescendant":this.selectedElement.getAttribute("id")}):this.inputElement.removeAttribute("aria-activedescendant")},t.prototype.addTimeSelection=function(){this.selectedElement=null,this.removeTimeSelection(),this.setTimeActiveClass(),f(this.selectedElement)||(N([this.selectedElement],oC),this.selectedElement.setAttribute("aria-selected","true"))},t.prototype.removeTimeSelection=function(){if(this.removeTimeHover(p8),!f(this.dateTimeWrapper)){var e=this.dateTimeWrapper.querySelectorAll("."+oC);e.length&&(z(e,oC),e[0].removeAttribute("aria-selected"))}},t.prototype.removeTimeHover=function(e){var i=this.getTimeHoverItem(e);i&&i.length&&z(i,e)},t.prototype.getTimeHoverItem=function(e){var n,i=f(this.dateTimeWrapper)?this.listWrapper:this.dateTimeWrapper;return f(i)||(n=i.querySelectorAll("."+e)),n},t.prototype.isValidLI=function(e){return e&&e.classList.contains(aC)&&!e.classList.contains(d8)},t.prototype.calculateStartEnd=function(e,i,n){var s=e.getDate(),o=e.getMonth(),a=e.getFullYear(),l=e.getHours(),h=e.getMinutes(),u=e.getSeconds(),d=e.getMilliseconds();return i?"starttime"===n?new Date(a,o,s,0,0,0):new Date(a,o,s,23,59,59):new Date(a,o,s,l,h,u,d)},t.prototype.startTime=function(e){var i,n,s=this.min,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getFullYear(),o.getMonth(),o.getDate())<=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.min):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o>=+this.max&&(n=!0,i=this.max),this.calculateStartEnd(i,n,"starttime")},t.prototype.endTime=function(e){var i,n,s=this.max,o=null===e?new Date:e;return+o.getDate()==+s.getDate()&&+o.getMonth()==+s.getMonth()&&+o.getFullYear()==+s.getFullYear()||+new Date(o.getUTCFullYear(),o.getMonth(),o.getDate())>=+new Date(s.getFullYear(),s.getMonth(),s.getDate())?(n=!1,i=this.max):+o<+this.max&&+o>+this.min?(n=!0,i=o):+o<=+this.min&&(n=!0,i=this.min),this.calculateStartEnd(i,n,"endtime")},t.prototype.hide=function(e){var i=this;if(this.popupObj||this.dateTimeWrapper){this.preventArgs={cancel:!1,popup:this.popupObj||this.popupObject,event:e||null};var n=this.preventArgs;f(this.popupObj)?this.trigger("close",n,function(s){i.dateTimeCloseEventCallback(e,s)}):this.dateTimeCloseEventCallback(e,n)}else Z.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.dateTimeCloseEventCallback=function(e,i){this.preventArgs=i,this.preventArgs.cancel||(this.isDatePopupOpen()?r.prototype.hide.call(this,e):this.isTimePopupOpen()&&(this.closePopup(e),z([document.body],cne),Z.isDevice&&this.timeModal&&(this.timeModal.style.display="none",this.timeModal.outerHTML="",this.timeModal=null),this.setTimeActiveDescendant())),Z.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},t.prototype.closePopup=function(e){this.isTimePopupOpen()&&this.popupObject&&(this.popupObject.hide(new gr({name:"FadeOut",duration:100,delay:0})),this.inputWrapper.container.classList.remove(ane),ze(this.inputElement,{"aria-expanded":"false"}),this.inputElement.removeAttribute("aria-owns"),T.remove(document,"mousedown touchstart",this.documentClickHandler))},t.prototype.preRender=function(){this.checkFormat(),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.preRender.call(this),z([this.inputElementCopy],[AL])},t.prototype.getProperty=function(e,i){this.setProperties("min"===i?{min:this.validateValue(e.min)}:{max:this.validateValue(e.max)},!0)},t.prototype.checkAttributes=function(e){for(var n,s=0,o=e?f(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["style","name","step","disabled","readonly","value","min","max","placeholder","type"];s<o.length;s++){var a=o[s];if(!f(this.inputElement.getAttribute(a)))switch(a){case"name":this.inputElement.setAttribute("name",this.inputElement.getAttribute(a));break;case"step":this.step=parseInt(this.inputElement.getAttribute(a),10);break;case"readonly":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.readonly||e){var l="disabled"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a);this.setProperties({readonly:l},!e)}break;case"placeholder":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.placeholder||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(a)},!e);break;case"min":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.min||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({min:n},!e));break;case"disabled":if(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.enabled||e){var h=!("disabled"===this.inputElement.getAttribute(a)||"true"===this.inputElement.getAttribute(a)||""===this.inputElement.getAttribute(a));this.setProperties({enabled:h},!e)}break;case"value":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.value||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({value:n},!e));break;case"max":(f(this.dateTimeOptions)||void 0===this.dateTimeOptions.max||e)&&(n=new Date(this.inputElement.getAttribute(a)),!this.isNullOrEmpty(n)&&!isNaN(+n)&&this.setProperties({max:n},!e))}}},t.prototype.requiredModules=function(){var e=[];return this&&e.push({args:[this],member:"islamic"}),this.enableMask&&e.push(this.maskedDateModule()),e},t.prototype.maskedDateModule=function(){return{args:[this],member:"MaskedDateTime"}},t.prototype.getTimeActiveElement=function(){return f(this.dateTimeWrapper)?null:this.dateTimeWrapper.querySelectorAll("."+oC)},t.prototype.createDateObj=function(e){return e instanceof Date?e:null},t.prototype.getDateObject=function(e){if(!this.isNullOrEmpty(e)){var i=this.createDateObj(e),n=this.valueWithMinutes,s=!f(n);if(this.checkDateValue(i)){var o=s?n.getDate():Dwe,a=s?n.getMonth():Iwe,l=s?n.getFullYear():Awe,h=s?n.getHours():kwe,u=s?n.getMinutes():Rwe,d=s?n.getSeconds():_we,m=s?n.getMilliseconds():Lwe;return this.scrollInvoked?(this.scrollInvoked=!1,new Date(l,a,o,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(l,a,o,h,u,d,m)}}return null},t.prototype.findNextTimeElement=function(e){var i=this.inputElement.value,n=f(this.valueWithMinutes)?this.createDateObj(i):this.getDateObject(this.valueWithMinutes),s=null,o=this.liCollections.length;if(!f(this.activeIndex)||!f(this.checkDateValue(n))){if("home"===e.action)s=+this.createDateObj(new Date(this.timeCollections[0])),this.activeIndex=0;else if("end"===e.action)s=+this.createDateObj(new Date(this.timeCollections[this.timeCollections.length-1])),this.activeIndex=this.timeCollections.length-1;else if("down"===e.action){for(var a=0;a<o;a++)if(+n<this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}}else for(a=o-1;a>=0;a--)if(+n>this.timeCollections[a]){s=+this.createDateObj(new Date(this.timeCollections[a])),this.activeIndex=a;break}this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(f(s)?null:new Date(s))}},t.prototype.setTimeValue=function(e,i){var n,s,o=this.validateMinMaxRange(i),a=this.createDateObj(o);return this.getFormattedValue(a)!==(f(this.value)?null:this.getFormattedValue(this.value))?(this.valueWithMinutes=f(a)?null:a,s=new Date(+this.valueWithMinutes)):(this.strictMode&&(e=a),this.valueWithMinutes=this.checkDateValue(e),s=new Date(+this.valueWithMinutes)),n=this.globalize.formatDate(s,"Gregorian"===this.calendarMode?{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd"}:{format:f(this.formatString)?this.cldrDateTimeFormat():this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),!this.strictMode&&f(s),ke.setValue(n,this.inputElement,this.floatLabelType,this.showClearButton),s},t.prototype.timeElementValue=function(e){if(!f(this.checkDateValue(e))&&!this.isNullOrEmpty(e)){var i=e instanceof Date?e:this.getDateObject(e);return this.setTimeValue(i,e)}return null},t.prototype.timeKeyHandler=function(e){if(!(f(this.step)||this.step<=0)){var i=this.timeCollections.length;if(f(this.getTimeActiveElement())||0===this.getTimeActiveElement().length)this.liCollections.length>0&&(f(this.value)&&f(this.activeIndex)?(this.activeIndex=0,this.selectedElement=this.liCollections[0],this.timeElementValue(new Date(this.timeCollections[0]))):this.findNextTimeElement(e));else{var n=void 0;if(e.keyCode>=37&&e.keyCode<=40){var s=40===e.keyCode||39===e.keyCode?++this.activeIndex:--this.activeIndex;this.activeIndex=this.activeIndex===i?0:this.activeIndex,this.activeIndex=s=this.activeIndex<0?i-1:this.activeIndex,n=f(this.timeCollections[s])?this.timeCollections[0]:this.timeCollections[s]}else"home"===e.action?(this.activeIndex=0,n=this.timeCollections[0]):"end"===e.action&&(this.activeIndex=i-1,n=this.timeCollections[i-1]);this.selectedElement=this.liCollections[this.activeIndex],this.timeElementValue(new Date(n))}this.isNavigate=!0,this.setTimeHover(this.selectedElement,"e-navigation"),this.setTimeActiveDescendant(),this.isTimePopupOpen()&&null!==this.selectedElement&&(!e||"click"!==e.type)&&this.setTimeScrollPosition()}},t.prototype.timeKeyActionHandle=function(e){if(this.enabled)switch("right"!==e.action&&"left"!==e.action&&"tab"!==e.action&&e.preventDefault(),e.action){case"up":case"down":case"home":case"end":this.timeKeyHandler(e);break;case"enter":this.isNavigate?(this.selectedElement=this.liCollections[this.activeIndex],this.valueWithMinutes=new Date(this.timeCollections[this.activeIndex]),this.setInputValue("time"),+this.previousDateTime!=+this.value&&(this.changedArgs.value=this.value,this.addTimeSelection(),this.previousDateTime=this.value)):this.updateValue(e),this.hide(e),N([this.inputWrapper.container],kL),this.isNavigate=!1,e.stopPropagation();break;case"escape":this.hide(e);break;default:this.isNavigate=!1}},t.prototype.inputKeyAction=function(e){"altDownArrow"===e.action&&(this.strictModeUpdate(),this.updateInput(),this.toggle(e))},t.prototype.onPropertyChanged=function(e,i){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];switch(o){case"value":this.isDynamicValueChanged=!0,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,e.value=this.validateValue(e.value),ke.setValue(this.getFormattedValue(e.value),this.inputElement,this.floatLabelType,this.showClearButton),this.valueWithMinutes=e.value,this.setProperties({value:e.value},!0),this.popupObj&&this.popupUpdate(),this.previousDateTime=new Date(this.inputElement.value),this.updateInput(),this.changeTrigger(null),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.value&&this.notify("createMask",{module:"MaskedDateTime"});break;case"min":case"max":this.getProperty(e,o),this.updateInput();break;case"enableRtl":ke.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"cssClass":f(i.cssClass)||(i.cssClass=i.cssClass.replace(/\s+/g," ").trim()),f(e.cssClass)||(e.cssClass=e.cssClass.replace(/\s+/g," ").trim()),ke.setCssClass(e.cssClass,[this.inputWrapper.container],i.cssClass),this.dateTimeWrapper&&ke.setCssClass(e.cssClass,[this.dateTimeWrapper],i.cssClass);break;case"locale":this.globalize=new Vr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ke.setPlaceholder(this.l10n.getConstant("placeholder"),this.inputElement),this.dateTimeFormat=this.cldrDateTimeFormat(),r.prototype.updateInput.call(this);break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkAttributes(!0);break;case"format":this.setProperties({format:e.format},!0),this.checkFormat(),this.dateTimeFormat=this.formatString,this.setValue(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;case"placeholder":ke.setPlaceholder(e.placeholder,this.inputElement);break;case"enabled":ke.setEnabled(this.enabled,this.inputElement),this.enabled||(this.inputElement.tabIndex=-1);break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),ke.calculateWidth(this.inputElement,this.inputWrapper.container),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"readonly":ke.setReadonly(this.readonly,this.inputElement);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,ke.removeFloating(this.inputWrapper),ke.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!f(this.inputWrapper.buttons[0])&&!f(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&"Never"!==this.floatLabelType&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-date-time-icon");break;case"scrollTo":this.checkDateValue(new Date(this.checkValue(e.scrollTo)))?(this.dateTimeWrapper&&this.setScrollTo(),this.setProperties({scrollTo:this.checkDateValue(new Date(this.checkValue(e.scrollTo)))},!0)):this.setProperties({scrollTo:null},!0);break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton)):this.inputElement.value===this.maskedDateValue&&(this.maskedDateValue="",ke.setValue(this.maskedDateValue,this.inputElement,this.floatLabelType,this.showClearButton));break;default:r.prototype.onPropertyChanged.call(this,e,i)}!this.isDynamicValueChanged&&!this.isIconClicked&&this.hide(null),this.isDynamicValueChanged=!1}},t.prototype.getModuleName=function(){return"datetimepicker"},t.prototype.restoreValue=function(){this.previousDateTime=this.previousDate,this.currentDate=this.value?this.value:new Date,this.valueWithMinutes=this.value,this.previousDate=this.value,this.previousElementValue=this.previousElementValue=f(this.inputValueCopy)?"":this.getFormattedValue(this.inputValueCopy)},Gr([E(null)],t.prototype,"timeFormat",void 0),Gr([E(30)],t.prototype,"step",void 0),Gr([E(null)],t.prototype,"scrollTo",void 0),Gr([E(1e3)],t.prototype,"zIndex",void 0),Gr([E(null)],t.prototype,"value",void 0),Gr([E(null)],t.prototype,"keyConfigs",void 0),Gr([E({})],t.prototype,"htmlAttributes",void 0),Gr([E(!1)],t.prototype,"enablePersistence",void 0),Gr([E(!0)],t.prototype,"allowEdit",void 0),Gr([E(!1)],t.prototype,"isMultiSelection",void 0),Gr([E(null)],t.prototype,"values",void 0),Gr([E(!0)],t.prototype,"showClearButton",void 0),Gr([E(null)],t.prototype,"placeholder",void 0),Gr([E(!1)],t.prototype,"strictMode",void 0),Gr([E(null)],t.prototype,"serverTimezoneOffset",void 0),Gr([E(new Date(1900,0,1))],t.prototype,"min",void 0),Gr([E(new Date(2099,11,31))],t.prototype,"max",void 0),Gr([E(null)],t.prototype,"firstDayOfWeek",void 0),Gr([E("Gregorian")],t.prototype,"calendarMode",void 0),Gr([E("Month")],t.prototype,"start",void 0),Gr([E("Month")],t.prototype,"depth",void 0),Gr([E(!1)],t.prototype,"weekNumber",void 0),Gr([E(!0)],t.prototype,"showTodayButton",void 0),Gr([E("Short")],t.prototype,"dayHeaderFormat",void 0),Gr([E(!1)],t.prototype,"openOnFocus",void 0),Gr([E(!1)],t.prototype,"enableMask",void 0),Gr([E({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],t.prototype,"maskPlaceholder",void 0),Gr([q()],t.prototype,"open",void 0),Gr([q()],t.prototype,"close",void 0),Gr([q()],t.prototype,"cleared",void 0),Gr([q()],t.prototype,"blur",void 0),Gr([q()],t.prototype,"focus",void 0),Gr([q()],t.prototype,"created",void 0),Gr([q()],t.prototype,"destroyed",void 0),Gr([si],t)}(hV);new Int16Array(286),new Uint8Array(286),new Int16Array(30),new Uint8Array(30),function(r){var i;(i=r.ForceEncoding||(r.ForceEncoding={}))[i.None=0]="None",i[i.Ascii=1]="Ascii",i[i.Unicode=2]="Unicode"}(ML||(ML={}));var _S=function(){function r(t){this.intl=new Vr,f(t)||(this.intl.culture=t)}return r.prototype.getFormatFunction=function(t){return t.type?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},r.prototype.getParserFunction=function(t){return t.type?this.intl.getDateParser(t):this.intl.getNumberParser(t)},r.prototype.fromView=function(t,e,i){return"date"!==i&&"datetime"!==i&&"number"!==i||f(e)?t:e(t)},r.prototype.toView=function(t,e){var i=t;return!f(e)&&!f(t)&&(i=e(t)),i},r.prototype.setCulture=function(t){f(t)||function m3(r){cv.notify("notifyExternalChange",{locale:Dw=r})}(t)},r}(),Mh=function(){function r(t,e){var i=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return i.editTemplateFn},this.getFilterTemplate=function(){return i.filterTemplateFn},io(this,t),this.parent=e,"none"===this.type?this.type=null:this.type&&(this.type="string"==typeof this.type?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),f(this.uid)&&(this.uid=Qd("grid-column"));var n=new _S;if(t.format&&(t.format.skeleton||t.format.format&&"string"==typeof t.format.format)&&(this.setFormatter(n.getFormatFunction(he({},t.format))),this.setParser(n.getParserFunction(t.format))),this.toJSON=function(){for(var o={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(i),h=0;h<l.length;h++)if("columns"===l[h]){o[l[h]]=[];for(var u=0;u<i[l[h]].length;u++)o[l[h]].push(i[l[h]][u].toJSON())}else a.indexOf(l[h])<0&&(o[l[h]]=i[l[h]]);return o},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(o){return o.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=bl(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=bl(this.headerTemplate)),!f(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=bl(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=bl(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=bl(this.filterTemplate)),this.isForeignColumn()&&(f(this.editType)||"dropdownedit"===this.editType||"defaultedit"===this.editType)&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=he({dataSource:this.dataSource,query:new ii,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var s=this.sortComparer;this.sortComparer=function(o,a,l,h){if("string"==typeof s&&(s=vs(s,window)),"Descending"===i.sortDirection){var u=o;o=a,a=u;var d=l;l=h,h=d}return s(o,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(o,a){return o=vs(i.foreignKeyValue,SC(i,{},o)[0]),a=vs(i.foreignKeyValue,SC(i,{},a)[0]),"Descending"===i.sortDirection?qe.fnDescending(o,a):qe.fnAscending(o,a)})}return r.prototype.getSortDirection=function(){return this.sortDirection},r.prototype.setSortDirection=function(t){this.sortDirection=t},r.prototype.getFreezeTableName=function(){return this.freezeTable},r.prototype.setProperties=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)this[e[i]]=t[e[i]],this.parent&&this.parent.isReact&&("template"===e[i]?this.parent.refreshReactColumnTemplateByUid(this.uid):"headerTemplate"===e[i]?(this.headerTemplateFn=bl(t[e[i]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)):"editTemplate"===e[i]&&(this.editTemplateFn=bl(t[e[i]])))},r.prototype.isForeignColumn=function(){return!(!this.dataSource||!this.foreignKeyValue)},r.prototype.getFormatter=function(){return this.formatFn},r.prototype.setFormatter=function(t){this.formatFn=t},r.prototype.getParser=function(){return this.parserFn},r.prototype.setParser=function(t){this.parserFn=t},r.prototype.getColumnTemplate=function(){return this.templateFn},r.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},r.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},r.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},r}(),gre="rowDataBound",k8="queryCellInfo",mre="headerCellInfo",dr="actionBegin",zi="actionComplete",xD="actionFailure",ph="dataBound",R8="rowSelecting",TD="rowSelected",vre="rowDeselecting",kV="rowDeselected",ZL="cellSelecting",RV="cellSelected",yre="cellDeselecting",bre="cellDeselected",_8="columnSelecting",L8="columnSelected",DD="columnDragStart",LS="columnDrag",ID="columnDrop",Cre="beforePrint",wre="printComplete",OS="batchAdd",jg="batchCancel",_V="batchDelete",LV="beforeDataBound",Sre="beforeOpenAdaptiveDialog",xre="filterchoicerequest",Df="initial-load",Ba="initial-end",jc="data-ready",Zr="content-ready",Nr="ui-update",Yd="on-empty",Ha="inbound-model-changed",zo="model-changed",OV="colgroup-refresh",xo="header-refreshed",P8="sorting-complete",kre="searching-complete",M8="grouping-complete",Lre="ungrouping-complete",mC="group-aggregates",Wv="refresh-footer-rendered",AD="beforecellfocused",PV="cellfocused",Cs="key-pressed",sl="click",dn="destroy",Uc="column-visible-changed",XL="column-width-changed",kD="column-position-changed",N8="rows-added",MV="rows-removed",RD="header-drop",QL="datasource-modified",JL="dblclick",qv="toolbar-refresh",PS="auto-col",MS="tooltip-destroy",eO="update-data",uu="prevent-batch",NV="dialog-destroy",Nre="crud-Action",Bre="add-delete-Action",V8="destroy-form",z8="double-tap",cu="freezerender",U8="initForeignKeyColumn",BV="getForeignKeyData",_D="generateQuery",zre="showEmptyGrid",jre="foreignKeyData",iO="dataStateChange",Ure="dataSourceChanged",Wre="beforeFragAppend",nO="frozenHeight",q8="textWrapRefresh",G8="recordAdded",HV="cancel-Begin",VV="editNextValCell",K8="hierarchyprint",rO="partial-refresh",Y8="columns-prepared",LD="cbox-filter-complete",sO="filter-Prevent",FS="restore-Focus",Yre="detail-indentcell-info",oO="virtual-scroll-edit-success",Gv="get-virtual-data",qV="infinite-scroll-handler",GV="infinite-edit-handler",oG="group-collapse",aO="refreshResizeHandlers",lG="before-refresh-on-data-change",KV="filter-dialog-close",cG="refresh-cutsom-filter-ok-button",lO="set-fullscreen-dialog",NS="refresh-Expand-and-Collapse",pG="row-mode-change",$V="enter-key-handler",hse="close-edit",ZV="create-virtual-validation-form",bG="refresh-infinite-persist-selection",Ot=(()=>(function(r){r[r.Data=0]="Data",r[r.Header=1]="Header",r[r.Summary=2]="Summary",r[r.GroupSummary=3]="GroupSummary",r[r.CaptionSummary=4]="CaptionSummary",r[r.Filter=5]="Filter",r[r.Indent=6]="Indent",r[r.GroupCaption=7]="GroupCaption",r[r.GroupCaptionEmpty=8]="GroupCaptionEmpty",r[r.Expand=9]="Expand",r[r.HeaderIndent=10]="HeaderIndent",r[r.StackedHeader=11]="StackedHeader",r[r.DetailHeader=12]="DetailHeader",r[r.DetailExpand=13]="DetailExpand",r[r.CommandColumn=14]="CommandColumn",r[r.DetailFooterIntent=15]="DetailFooterIntent",r[r.RowDragIcon=16]="RowDragIcon",r[r.RowDragHIcon=17]="RowDragHIcon"}(Ot||(Ot={})),Ot))(),zs=(()=>(function(r){r[r.Header=0]="Header",r[r.Content=1]="Content",r[r.Summary=2]="Summary"}(zs||(zs={})),zs))(),rr=(()=>(function(r){r[r.isEdit=0]="isEdit",r[r.isAdd=1]="isAdd",r[r.isSort=2]="isSort",r[r.isFilter=3]="isFilter"}(rr||(rr={})),rr))(),vC=(()=>(function(r){r[r.isInitial=0]="isInitial",r[r.isSearch=1]="isSearch"}(vC||(vC={})),vC))(),QV=function(){function r(t,e){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=t,this.serviceLocator=e,this.initDataManager(),!this.parent.isDestroyed&&"foreignKey"!==this.getModuleName()&&(this.parent.on(N8,this.addRows,this),this.parent.on("row-position-changed",this.reorderRows,this),this.parent.on(MV,this.removeRows,this),this.parent.on(QL,this.initDataManager,this),this.parent.on(dn,this.destroy,this),this.parent.on(eO,this.crudActions,this),this.parent.on(Bre,this.getData,this),this.parent.on(PS,this.refreshFilteredCols,this),this.parent.on(Y8,this.refreshFilteredCols,this))}return r.prototype.reorderRows=function(t){this.dataManager.dataSource.json.splice(t.toIndex,0,this.dataManager.dataSource.json.splice(t.fromIndex,1)[0])},r.prototype.getModuleName=function(){return"data"},r.prototype.initDataManager=function(){var t=this.parent;this.dataManager=t.dataSource instanceof Qe?t.dataSource:f(t.dataSource)?new Qe:new Qe(t.dataSource),!t.isAngular||t.query instanceof ii?(this.isQueryInvokedFromData=!0,t.query=t.query instanceof ii?t.query:new ii):t.setProperties({query:new ii},!0)},r.prototype.generateQuery=function(t){var i=this.parent.getQuery().clone();if("ExcludeHidden"===this.parent.columnQueryMode)i.select(this.parent.getColumns().filter(function(a){return!(!0!==a.isPrimaryKey&&!1===a.visible||void 0===a.field)}).map(function(a){return a.field}));else if("Schema"===this.parent.columnQueryMode){for(var n=[],s=this.parent.columns,o=0;o<s.length;o++)n.push(s[o].field);i.select(n)}return this.filterQuery(i),this.searchQuery(i),this.aggregateQuery(i),this.sortQuery(i),ws(this.parent)?this.virtualGroupPageQuery(i):this.pageQuery(i,t),this.groupQuery(i),i},r.prototype.aggregateQuery=function(t){for(var e=this.parent.aggregates,i=0;i<e.length;i++)for(var n=e[i],s=0;s<n.columns.length;s++)for(var o=n.columns[s],a=o.type instanceof Array?o.type:[o.type],l=0;l<a.length;l++)t.aggregate(a[l].toLowerCase(),o.field);return t},r.prototype.virtualGroupPageQuery=function(t){if(t.queries.length)for(var i=0;i<t.queries.length;i++)"onPage"===t.queries[i].fn&&t.queries.splice(i,1);return t},r.prototype.pageQuery=function(t,e){var i=this.parent,s={query:t,skipPage:!1};if(i.notify("set-virtual-page-query",s),s.skipPage)return t;if((i.allowPaging||i.enableVirtualization||i.enableInfiniteScrolling)&&!0!==e){if(i.pageSettings.currentPage=Math.max(1,i.pageSettings.currentPage),i.pageSettings.pageCount<=0&&(i.pageSettings.pageCount=8),i.pageSettings.pageSize<=0&&(i.pageSettings.pageSize=12),t.queries.length)for(var o=0;o<t.queries.length;o++)"onPage"===t.queries[o].fn&&t.queries.splice(o,1);!f(i.infiniteScrollModule)&&i.enableInfiniteScrolling?this.parent.notify("infinite-page-query",t):t.page(i.pageSettings.currentPage,i.allowPaging&&i.pagerModule&&i.pagerModule.pagerObj.isAllPage&&!this.dataManager.dataSource.offline?null:i.pageSettings.pageSize)}return t},r.prototype.groupQuery=function(t){var e=this.parent;if(e.allowGrouping&&e.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&t.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var i=e.groupSettings.columns,n=0,s=i.length;n<s;n++){var o=this.getColumnByField(i[n]);o||this.parent.log("initial_action",{moduleName:"group",columnName:i[n]});var l=o.format;o.enableGroupByFormat?t.group(i[n],this.formatGroupColumn.bind(this),l):t.group(i[n],null)}}return t},r.prototype.sortQuery=function(t){var e=this.parent;if((e.allowSorting||e.allowGrouping)&&e.sortSettings.columns.length){for(var i=e.sortSettings.columns,n=[],s=i.length-1;s>-1;s--){if(!(o=this.getColumnByField(i[s].field)))return this.parent.log("initial_action",{moduleName:"sort",columnName:i[s].field}),t;o.setSortDirection(i[s].direction);var a=i[s].direction;o.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?i[s].direction:o.sortComparer.bind(o)),-1===e.groupSettings.columns.indexOf(i[s].field)?o.isForeignColumn()||o.sortComparer?t.sortByForeignKey(o.field,a,void 0,i[s].direction.toLowerCase()):t.sortBy(o.field,a):n.push({direction:a,field:o.field})}s=0;for(var l=n.length;s<l;s++)if("string"==typeof n[s].direction)t.sortBy(n[s].field,n[s].direction);else{var o=this.getColumnByField(n[s].field);t.sortByForeignKey(n[s].field,n[s].direction,void 0,o.getSortDirection().toLowerCase())}}return t},r.prototype.searchQuery=function(t,e,i){var n=this.parent.searchSettings,s=n.fields.length?n.fields:this.getSearchColumnFieldNames(),o=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(m){return s.indexOf(m.field)>-1});var l=i?e.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&"ODataV4Adaptor"===l.getModuleName()){s=i?[e.foreignKeyValue]:s;for(var h=0;h<s.length;h++){var u=i?e:this.getColumnByField(s[h]);u.isForeignColumn()&&!i?o=this.fGeneratePredicate(u,o):o.push(new kn(s[h],n.operator,n.key,n.ignoreCase,n.ignoreAccent))}var d=kn.or(o);d.key=n.key,t.where(d)}else t.search(n.key,s,n.operator,n.ignoreCase,n.ignoreAccent)}return t},r.prototype.filterQuery=function(t,e,i){var l,n=this.parent,s=[],o=[],a=this.parent.getForeignKeyColumns();if(n.allowFiltering&&n.filterSettings.columns.length){for(var h=e||n.filterSettings.columns,u={},d=0,m=n.getColumns();d<m.length;d++)u[(v=m[d]).field]=v.filter.type?v.filter.type:n.filterSettings.type;for(var C=[],S=[],A=0,_=h;A<_.length;A++){var M=n.getColumnByField((v=_[A]).field);f(v.type)&&M&&("date"===M.type||"datetime"===M.type)&&(v.type=n.getColumnByField(v.field).type),v.isForeignKey?C.push(v):S.push(v)}if(S.length){for(var P=0,B=S.length;P<B;P++)S[P].uid=S[P].uid||this.parent.grabColumnByFieldFromAllCols(S[P].field).uid;for(var j=TC.getPredicate(S),G=0,ne=Object.keys(j);G<ne.length;G++)s.push(j[ne[G]])}if(C.length)for(var Ee=0,Pe=C;Ee<Pe.length;Ee++){var v;(v=Pe[Ee]).uid=v.uid||this.parent.grabColumnByFieldFromAllCols(v.field).uid;var ie=this.parent.grabColumnByUidFromAllCols(v.uid);if(ie||this.parent.log("initial_action",{moduleName:"filter",columnName:v.field}),ie.isForeignColumn()&&wO(v.field,a)&&!i)o.push(v),ie.columnData.length||(l=!0),s=this.fGeneratePredicate(ie,s);else{j=TC.getPredicate(h);for(var Ie=0,Te=Object.keys(j);Ie<Te.length;Ie++)s.push(j[Te[Ie]])}}s.length&&!l?t.where(kn.and(s)):this.parent.notify(zre,{})}return t},r.prototype.fGeneratePredicate=function(t,e){var i={};return t&&(this.parent.notify(_D,{predicate:i,column:t}),i.predicate.predicates.length&&e.push(i.predicate)),e},r.prototype.getData=function(t,e){var i=this;void 0===t&&(t={requestType:""});var n=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource)return this.eventPromise(t,e,n).promise;var o=void 0;switch(t.requestType){case"delete":if(e=e||this.generateQuery(),1===Object.keys(t.data).length)o=this.dataManager.remove(n,t.data[0],e.fromTable,e);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=t.data,o=this.dataManager.saveChanges(l,n,e.fromTable,e.requiresCount())}break;case"save":e=e||this.generateQuery(),t.index=f(t.index)?0:t.index,o=this.dataManager.insert(t.data,e.fromTable,e,t.index)}return t.promise=o,!o||Array.isArray(o)||o.hasOwnProperty("deletedRecords")?this.insert(e,t):o.then(function(){return i.insert(e,t)})},r.prototype.insert=function(t,e){return"save"===e.requestType&&this.parent.notify(G8,e),this.executeQuery(t)},r.prototype.executeQuery=function(t){var e=this;if(this.dataManager.ready){var i=new ul;return this.dataManager.ready.then(function(){e.dataManager.executeQuery(t).then(function(s){i.resolve(s)})}).catch(function(s){i.reject(s)}),i.promise}return this.dataManager.executeQuery(t)},r.prototype.formatGroupColumn=function(t,e){var i=this.serviceLocator,n=this.getColumnByField(e),s=t;return n.type||(n.type=s.getDay?s.getHours()>0||s.getMinutes()>0||s.getSeconds()>0||s.getMilliseconds()>0?"datetime":"date":typeof t),f(n.getFormatter())&&Pse(i,n),_S.prototype.toView(t,n.getFormatter())},r.prototype.crudActions=function(t){var e=this.generateQuery(),i=null,n="promise",s=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());"save"===(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(t,e,s),t.requestType)&&(i=this.dataManager.update(s,t.data,e.fromTable,e,t.previousData)),t[n]=i||t[n],this.parent.notify(Nre,t)},r.prototype.saveChanges=function(t,e,i,n){if(void 0===n&&(n=this.generateQuery()),n.requiresCount(),"result"in this.parent.dataSource){var s=new ul,o={requestType:"batchsave",changes:t,key:e,query:n,endEdit:s.resolve};return this.setState({isPending:!0,resolver:s.resolve}),this.parent.trigger(Ure,o),s.promise}return this.dataManager.saveChanges(t,e,n.fromTable,n,i)},r.prototype.getKey=function(t){if(t&&t.length)return t[0]},r.prototype.isRemote=function(){return!0!==this.dataManager.dataSource.offline&&void 0!==this.dataManager.dataSource.url&&""!==this.dataManager.dataSource.url},r.prototype.addRows=function(t){for(var e=t.records.length;e>0;e--)this.dataManager.dataSource.json.splice(t.toIndex,0,t.records[e-1])},r.prototype.removeRows=function(t){this.dataManager.dataSource.json=this.dataManager.dataSource.json.filter(function(i){return-1===t.records.indexOf(i)})},r.prototype.getColumnByField=function(t){var e;return this.parent.columnModel.some(function(i){return e=i,i.field===t})&&e},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(N8,this.addRows),this.parent.off(MV,this.removeRows),this.parent.off(QL,this.initDataManager),this.parent.off(dn,this.destroy),this.parent.off(eO,this.crudActions),this.parent.off(Bre,this.getData),this.parent.off(PS,this.refreshFilteredCols),this.parent.off(Y8,this.refreshFilteredCols))},r.prototype.getState=function(){return this.dataState},r.prototype.setState=function(t){return this.dataState=t},r.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},r.prototype.setForeignKeyDataState=function(t){this.foreignKeyDataState=t},r.prototype.getStateEventArgument=function(t){var e=new Qh,i=new Qe({url:"",adaptor:new Qh}),n=e.processQuery(i,t);return he(JSON.parse(n.data),n.pvtData)},r.prototype.eventPromise=function(t,e,i){var n=this,s=t,o=this.getStateEventArgument(e),a=new ul,l=new ul;if(void 0!==t.requestType&&!1!==this.dataState.isDataChanged)if(o.action=t,"save"===t.requestType||"delete"===t.requestType){var h=t;h.key=i,h.promise=l.promise,h.state=o,this.setState({isPending:!0,resolver:l.resolve}),s.endEdit=l.resolve,s.cancelEdit=l.reject,this.parent.trigger(Ure,h),l.promise.then(function(){n.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),"save"===h.requestType&&n.parent.notify(G8,h),n.parent.trigger(iO,o)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:o.group,aggregates:o.aggregates}),this.parent.trigger(iO,o);else this.setState({}),a.resolve(this.parent.dataSource);return a},r.prototype.getSearchColumnFieldNames=function(){for(var t=[],i=0,n=this.parent.getColumns();i<n.length;i++){var s=n[i];s.allowSearching&&!f(s.field)&&t.push(s.field)}return t},r.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&function $De(r,t){for(var e=0;e<t.length;e++)t[e].uid=t[e].isForeignKey?wO(t[e].field,r.getForeignKeyColumns()).uid:r.enableColumnVirtualization?Wse(r,t[e].field).uid:r.getColumnByField(t[e].field).uid}(this.parent,this.parent.filterSettings.columns)},r}(),If=function(){function r(t,e){io(this,t),this.parent=e}return r.prototype.clone=function(){var t=new r({});return io(t,this),t.cells=this.cells.map(function(e){return e.clone()}),t},r.prototype.setRowValue=function(t){if(this.parent){var e=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(e,t)}},r.prototype.setCellValue=function(t,e){if(this.parent){if(this.data[t].toString()===e.toString())return;var n=this.parent.getPrimaryKeyFieldNames()[0];this.parent.setCellValue(this.data[n],t,e),this.makechanges(n,this.data)}},r.prototype.makechanges=function(t,e){this.parent&&this.parent.getDataModule().dataManager.update(t,e)},r}(),ec=function(){function r(t){this.isSpanned=!1,this.isRowSpanned=!1,io(this,t)}return r.prototype.clone=function(){var t=new r({});return io(t,this),t},r}(),pse=function(){function r(t,e){this.serviceLocator=t,this.parent=e}return r.prototype.render=function(t,e,i,n){var u,o=this.serviceLocator.getService("cellRendererFactory").getCellRenderer(e.cells[i].cellType||Ot.Data),a=e.cells[i].cellSpan?e.cells[i].cellSpan:t.colSpan+i<=e.cells.length?t.colSpan:e.cells.length-i,l=t.rowSpan,h=0;if(e.index>0){var d=this.parent.groupSettings.columns.length>0&&!this.parent.getRowsObject()[e.index-1].isDataRow?this.parent.getRowsObject()[e.index].cells:this.parent.getRowsObject()[e.index-1].cells,m=e.cells[i];u=d.filter(function(A){return A.column.uid===m.column.uid})[0]}for(var C=u&&u.colSpanRange>1&&u.rowSpanRange>1?u.colSpanRange:a,S=i+1;S<i+C&&S<e.cells.length;S++)!1===e.cells[S].visible?h++:e.cells[S].isSpanned=!0;if(h>0){for(S=i+a;S<i+a+h&&S<e.cells.length;S++)e.cells[S].isSpanned=!0;i+a+h>=e.cells.length&&(a-=i+a+h-e.cells.length)}return e.cells[i].cellSpan&&(e.data[t.column.field]=e.cells[i].spanText,n=o.render(e.cells[i],e.data,{index:f(e.index)?"":e.index.toString()})),a>1&&ze(n,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(ze(n,{rowspan:l.toString(),"aria-rowspan":l.toString()}),e.cells[i].isRowSpanned=!0,e.cells[i].rowSpanRange=Number(l),a>1&&(e.cells[i].colSpanRange=Number(a))),e.index>0&&u.rowSpanRange>1&&(e.cells[i].isSpanned=!0,e.cells[i].rowSpanRange=Number(u.rowSpanRange-1),e.cells[i].colSpanRange=u.rowSpanRange>0?u.colSpanRange:1),this.parent.enableColumnVirtualization&&!e.cells[i].cellSpan&&!this.containsKey(t.column.field,t.data[t.column.field])&&this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),n},r.prototype.backupMergeCells=function(t,e,i){this.setMergeCells(this.generteKey(t,e),i)},r.prototype.generteKey=function(t,e){return t+"__"+e.toString()},r.prototype.splitKey=function(t){return t.split("__")},r.prototype.containsKey=function(t,e){return this.getMergeCells().hasOwnProperty(this.generteKey(t,e))},r.prototype.getMergeCells=function(){return this.parent.mergeCells},r.prototype.setMergeCells=function(t,e){this.parent.mergeCells[t]=e},r.prototype.updateVirtualCells=function(t){for(var e=this.getMergeCells(),i=0,n=Object.keys(e);i<n.length;i++){var s=n[i],o=e[s],a=this.splitKey(s),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),u=o-(h[0]-l);if(l<h[0]&&u>1)for(var d=0,m=t;d<m.length;d++){var v=m[d];if(v.data[a[0]].toString()===a[1].toString()){v.cells[0].cellSpan=u,v.cells[0].spanText=a[1];break}}}return t},r.prototype.getIndexFromAllColumns=function(t){return jS(this.parent.getVisibleColumns(),function(i,n){if(i.field===t)return n})[0]},r}(),tn="e-rowcell",js="e-gridheader",Ps="e-gridcontent",yC="e-gridfooter",Ms="e-headercontent",zn="e-movablecontent",Zn="e-movableheader",tc="e-frozencontent",Zd="e-frozenheader",as="e-content",sr="e-table",vn="e-row",BS="e-gridchkbox",Va="e-editedrow",Bl="e-addedrow",Af="addedRecords",bC="deletedRecords",Zt="Left-Right",or="frozen-right",rs="frozen-left",Us="data-colindex",fse="aria-colindex",Ai="data-rowindex",hO="aria-rowindex",rt="tbody",Ti="colgroup",JV="created",gse="beforeOpen",Fh=function(){function r(t,e,i){this.isSpan=!1,this.cellType=e,this.serviceLocator=t,this.parent=i,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return r.prototype.render=function(t,e,i,n,s){return this.refreshRow(t,e,i,n,s)},r.prototype.refresh=function(t,e,i,n,s){var o=this;i&&(t.data=d2({},t.changes),this.refreshMergeCells(t));var a=this.parent.element.querySelector("[data-uid="+t.uid+"]"),l=this.refreshRow(t,e,n,s,null,i),h=[].slice.call(l.cells),u=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&u.length)for(var d=function(P){if(P.template)return setTimeout(function(){o.parent.refreshReactColumnTemplateByUid(P.uid)},0),"break"},m=0,v=e;m<v.length&&"break"!==d(v[m]);m++);a.innerHTML="";for(var A=0,_=h;A<_.length;A++)a.appendChild(_[A])},r.prototype.refreshRow=function(t,e,i,n,s,o){var a=f(s)?this.element.cloneNode():s,l={data:t.data},h={data:t.data},u=this.parent.getColumns().filter(function(He){return"checkbox"===He.type&&He.field})[0],d=!1;u&&(d=vs(u.field,l.data));var m=this.parent.getSelectedRowIndexes();t.isDataRow&&(t.isSelected=m.indexOf(t.index)>-1||d),t.isDataRow&&this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0,-1===m.indexOf(t.index)&&m.push(t.index)),this.buildAttributeFromRow(a,t),ze(a,he({},i,{})),kf(a,t.attributes);for(var v=this.serviceLocator.getService("cellRendererFactory"),C=function(He,Ut){var Gt=t.cells[He];Gt.isSelected=t.isSelected,Gt.isColumnSelected=Gt.column.isSelected;var Qt=v.getCellRenderer(t.cells[He].cellType||Ot.Data),vi={index:f(t.index)?"":t.index.toString()};t.isExpand&&t.cells[He].cellType===Ot.DetailExpand&&(vi.class=S.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var ki=Qt.render(t.cells[He],t.data,vi,t.isExpand,o);if(t.cells[He].cellType!==Ot.Filter){if(t.cells[He].cellType===Ot.Data||t.cells[He].cellType===Ot.CommandColumn){S.parent.trigger(k8,he(h,{cell:ki,column:Gt.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[He].foreignKeyData,requestType:S.parent.requestTypeAction}));var Yi=!1;if(t.index>0&&S.isSpan){var ss=(S.parent.groupSettings.columns.length>0&&!S.parent.getRowsObject()[t.index-1].isDataRow?S.parent.getRowsObject()[t.index].cells:S.parent.getRowsObject()[t.index-1].cells).filter(function(Ae){return Ae.column.uid===t.cells[He].column.uid})[0];Yi=ss.isRowSpanned?ss.isRowSpanned:ss.rowSpanRange>1}(h.colSpan>1||t.cells[He].cellSpan>1||h.rowSpan>1||Yi)&&(S.isSpan=!0,ki=new pse(S.serviceLocator,S.parent).render(h,t,He,ki))}t.cells[He].isSpanned||a.appendChild(ki)}},S=this,A=0,_=t.cells.length;A<_;A++)C(A);var M={row:a,rowHeight:this.parent.rowHeight};if(t.isDataRow){var P=he(l,M);P.isSelectable=!0,this.parent.trigger(gre,P),t.isSelectable=P.isSelectable;var B=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var j=this.parent.getPrimaryKeyFieldNames()[0],G=t.data?t.data[j]:null,ne=P.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;ne.some(function(He){return He[j]===G})||ne.push(t.data)}if(!P.isSelectable){this.parent.selectionModule.isPartialSelection=!0,t.isSelected=!1;var fe=M.row.querySelectorAll(".e-rowcell.e-gridchkbox"),Ee=P.row.querySelector(".e-rowdragdrop"),Pe=this.parent.groupSettings.columns.length+(Ee||this.parent.isDetail()?1:0);for(A=0;A<fe.length;A++)fe[A].firstElementChild.classList.add("e-checkbox-disabled"),fe[A].querySelector(".e-frame").classList.remove("e-check");if(t.cells.length)for(A=Pe;A<t.cells.length;A++){var ie=P.row.querySelector('.e-rowcell[data-colindex="'+t.cells[A].index+'"]');ie&&z([ie],["e-selectionbackground","e-active"])}Ee&&z([Ee],["e-selectionbackground","e-active"])}if(this.parent.childGrid||B||this.parent.detailTemplate){var Ie=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];Ie&&Ie.classList.add("e-detailrowvisible")}}if(this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),t.cssClass&&a.classList.add(t.cssClass),t.lazyLoadCssClass&&a.classList.add(t.lazyLoadCssClass),(!this.parent.enableColumnVirtualization||0===this.parent.frozenColumns)&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(A=0;A<this.parent.aggregates.length;A++)if(this.parent.aggregates[A].properties.columns[0].footerTemplate){var je=[].slice.call(a.getElementsByClassName("e-summarycell"));je.length&&(N([je[je.length-1]],["e-lastsummarycell"]),N([je[0]],["e-firstsummarycell"]))}return a},r.prototype.refreshMergeCells=function(t){for(var e=0,i=t.cells;e<i.length;e++)i[e].isSpanned=!1;return t},r.prototype.buildAttributeFromRow=function(t,e){var i={},s=[];e.isDataRow&&s.push(vn),e.isAltRow&&s.push("e-altrow"),f(e.index)||(i[hO]=e.index+1,i["data-rowindex"]=e.index),e.rowSpan&&(i.rowSpan=e.rowSpan),e.uid&&(i["data-uid"]=e.uid),e.isSelected&&(i["aria-selected"]=!0),!1===e.visible&&s.push("e-hide"),i.class=s,kf(t,i)},r}(),Xd=function(){function r(t){this.parent=t}return r.prototype.generateRows=function(t,e){var i=[],n=this.parent.enableVirtualization&&e?e.startIndex:0;n=this.parent.enableInfiniteScrolling&&e?this.getInfiniteIndex(e):n;for(var s=0,o=Object.keys(t).length;s<o;s++,n++)i[s]=this.generateRow(t[s],n);return i},r.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var e={};this.parent.notify(Yre,e),t.push(this.generateCell(e,null,Ot.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,Ot.RowDragIcon)),t},r.prototype.generateRow=function(t,e,i,n,s,o,a){var l={foreignKeyData:{}};l.uid=Qd("grid-row"),l.data=t,l.index=e,l.indent=n,l.tIndex=o,l.isDataRow=!0,l.parentGid=s,l.parentUid=a,this.parent.isPrinting&&("All"===this.parent.hierarchyPrintMode?l.isExpand=!0:"Expanded"===this.parent.hierarchyPrintMode&&this.parent.expandedRows&&this.parent.expandedRows[e]&&(l.isExpand=this.parent.expandedRows[e].isExpand)),l.cssClass=i,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isAltRow=!!this.parent.enableAltRow&&e%2!=0,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(e)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),u=new If(l,this.parent);return u.cells="Right"===this.parent.getFrozenMode()?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),u},r.prototype.refreshForeignKeyRow=function(t){for(var e=this.parent.getForeignKeyColumns(),i=0;i<e.length;i++)Nt(e[i].field,SC(e[i],t.data),t.foreignKeyData)},r.prototype.generateCells=function(t){for(var e=this.parent.getColumns(),i=[],n=0;n<e.length;n++)i.push(this.generateCell(e[n],t.uid,f(e[n].commands)?void 0:Ot.CommandColumn,null,n,t.foreignKeyData));return i},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!f(t.field||t.template),isTemplate:!f(t.template),rowID:e,column:t,cellType:f(i)?Ot.Data:i,colSpan:n,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&Q(t.field,o)};return(a.isDataCell||"checkbox"===a.column.type||a.commands)&&(a.index=s),new ec(a)},r.prototype.refreshRows=function(t){for(var e=0;e<t.length;e++)this.refreshForeignKeyRow(t[e]),t[e].cells=this.generateCells(t[e]);return t},r.prototype.getInfiniteIndex=function(t){return"infiniteScroll"===t.requestType||"delete"===t.requestType||"add"===t.action?t.startIndex:0},r}(),mse=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),cO=function(){function r(t){this.parent=t}return r.prototype.getData=function(){for(var t=this,e=[],i=this.parent.aggregates.slice(),n=0;n<i.length;n++){var s=i[n].columns.filter(function(o){return!(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate)||t.columnSelector(o)});s.length&&e.push({columns:s})}return e},r.prototype.columnSelector=function(t){return void 0!==t.footerTemplate},r.prototype.getColumns=function(t,e){var i=[];if((this.parent.detailTemplate||!f(this.parent.childGrid))&&i.push(new Mh({})),this.parent.allowGrouping)for(var n=0;n<this.parent.groupSettings.columns.length;n++)i.push(new Mh({}));return this.parent.isRowDragable()&&!t&&i.push(new Mh({})),i.push.apply(i,this.parent.getColumns()),e=e&&!t?e+this.parent.getIndentCount():e,f(t)?i:i.slice(t,e)},r.prototype.generateRows=function(t,e,i,n,s){if(0===t.length&&(void 0===e||!e.count))return[];for(var o=this.buildSummaryData(t,e),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[h],o[h],e?e.level:void 0,i,n,e?e.parentUid:void 0,s));return a},r.prototype.getGeneratedRow=function(t,e,i,n,s,o,a){var l=[],h=this.getIndentByLevel(),u=!f(this.parent.childGrid),d=n?0:this.parent.getIndentCount();this.parent.isRowDragable()&&!n&&(h=["e-indentcelltop"]);for(var m=a||this.getColumns(n,s),v=0;v<m.length;v++)l.push(this.getGeneratedCell(m[v],t,v>=d?this.getCellType():0===v&&this.parent.childGrid?Ot.DetailFooterIntent:Ot.Indent,h[v],u));var C=new If({data:e,attributes:{class:"e-summaryrow"}});return C.cells=l,C.uid=Qd("grid-row"),C.parentUid=o,C.isAggregateRow=!0,C.visible=l.some(function(S){return S.isDataCell&&S.visible}),C},r.prototype.getGeneratedCell=function(t,e,i,n,s){var o=e.columns.filter(function(h){return h.columnName===t.field})[0],a={style:{textAlign:t.textAlign},"e-mappinguid":t.uid,index:t.index};n&&(a.class=n),f(n)&&s&&(a.class="e-detailindentcelltop");var l={visible:t.visible,isDataCell:!f(o),isTemplate:o&&!f(o.footerTemplate||o.groupFooterTemplate||o.groupCaptionTemplate),column:o||{},attributes:a,cellType:i};return l.column.headerText=t.headerText,new ec(l)},r.prototype.buildSummaryData=function(t,e){for(var i=[],n=this.getData(),s={},o=0;o<n.length;o++){s={};for(var a=n[o].columns,l=0;l<a.length;l++)s=this.setTemplate(a[l],e&&e.aggregates?e:t,s);i.push(s)}return i},r.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},r.prototype.setTemplate=function(t,e,i){var n=t.type,s={},o=t.getFormatter()||function(m){return m},a=e;n instanceof Array||(n=[t.type]);for(var l=0;l<n.length;l++){var h=t.field+" - "+n[l].toLowerCase(),u=t.columnName,d="Custom"!==n[l]&&a.aggregates&&h in a.aggregates?a.aggregates[h]:Ose(n[l],a.aggregates?a:e,t,this.parent);i[u]=i[u]||{},i[u][h]=d,i[u][n[l]]=f(d)?" ":o(d),a.field&&(i[u].field=a.field,i[u].key=a.key)}return s.format=t.getFormatter(),t.setTemplate(s),i},r.prototype.getCellType=function(){return Ot.Summary},r}(),FD=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return mse(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupFooterTemplate},t.prototype.getIndentByLevel=function(e){return void 0===e&&(e=this.parent.groupSettings.columns.length),this.parent.groupSettings.columns.map(function(i,n){return n<=e-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return Ot.GroupSummary},t}(cO),dO=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return mse(t,r),t.prototype.columnSelector=function(e){return void 0!==e.groupCaptionTemplate},t.prototype.getData=function(){return[r.prototype.getData.call(this).reduce(function(i,n){return i.columns=i.columns.concat(n.columns),i},{columns:[]})]},t.prototype.isEmpty=function(){return 0===(this.getData()[0].columns||[]).length},t.prototype.getCellType=function(){return Ot.CaptionSummary},t}(cO),zTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),t2=function(r){function t(e){var i=r.call(this,e)||this;return i.rows=[],i.index=0,i.infiniteChildCount=0,i.renderInfiniteAgg=!0,i.parent=e,i.summaryModelGen=new FD(e),i.captionModelGen=new dO(e),i}return zTe(t,r),t.prototype.generateRows=function(e,i){if(0===this.parent.groupSettings.columns.length)return r.prototype.generateRows.call(this,e,i);this.isInfiniteScroll="infiniteScroll"===i.requestType,this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?i.startIndex:0;for(var n=0,s=e.length;n<s;n++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,e[n],e.level,n,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},t.prototype.getGroupedRecords=function(e,i,n,s,o,a,l){var h,u=n;if(f(i.items))if(f(i.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(i,e,s,this.rows.length,l));else for(var d=0,m=i.length;d<m;d++)this.getGroupedRecords(e,i[d],i.level,s,e,this.rows.length,l);else{var v=void 0,C=this.generateCaptionRow(i,e,s,o,a,l);if(this.isInfiniteScroll&&(v=this.getPreCaption(e,C.data.key)),v?C.uid=v.uid:this.rows=this.rows.concat(C),i.items&&i.items.length&&this.getGroupedRecords(e+1,i.items,i.items.level,s,e+1,this.rows.length,C.uid),this.parent.aggregates.length&&this.isRenderAggregate(C)){var S=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(i,{level:u,parentUid:C.uid}));for(var A=S-1;A>=0;A--)if(this.rows[A].isCaptionRow)this.rows[A].aggregatesCount=this.rows.length-S;else if(!this.rows[A].isCaptionRow&&!this.rows[A].isDataRow)break}v&&this.setInfiniteRowVisibility(v)}},t.prototype.isRenderAggregate=function(e){return this.parent.enableInfiniteScrolling?!!this.renderInfiniteAgg&&(this.getPreCaption(e.indent,e.data.key),this.renderInfiniteAgg=e.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!this.parent.enableInfiniteScrolling},t.prototype.getPreCaption=function(e,i){var s,n=this.parent.getRowsObject().concat(this.rows);this.infiniteChildCount=0;for(var o=n.length;o--&&(n[o].isCaptionRow&&n[o].indent===e&&n[o].data.key===i&&(s=n[o]),!(n[o].indent===e||n[o].indent<e));)n[o].indent===e+1&&this.infiniteChildCount++;return s},t.prototype.getCaptionRowCells=function(e,i,n){var s=[],o=[],a=this.parent.getColumnByField(e),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(P){return P.field===e})[0]);var h=this.parent.groupSettings.columns.length,u=this.parent;if(!this.parent.enableColumnVirtualization||-1!==l.indexOf(i)){for(var d=0;d<i;d++)s.push(this.generateIndentCell());s.push(this.generateCell({},null,Ot.Expand))}if(i=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(u.detailTemplate||u.childGrid?1:0)-i+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var m=this.captionModelGen.generateRows(n)[0];he(n,m.data);var v=0;m.cells.some(function(P,B){return v=B,P.visible&&P.isDataCell}),o=m.cells.slice(v).filter(function(P){return P.visible}),m.visible&&o[0].column.field===this.parent.getVisibleColumns()[0].field&&(o=o.slice(1)),1===this.parent.getVisibleColumns().length&&(o=[]),i-=o.length}for(var C=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],S=!0,A=0;A<C.length;A++){var _=S&&-1!==l.indexOf(i);_&&(S=!1);var M=!this.parent.enableColumnVirtualization||_?Ot.GroupCaption:Ot.GroupCaptionEmpty;i=this.parent.enableColumnVirtualization&&M===Ot.GroupCaption?i+h:i,u.isRowDragable()&&i++,s.push(this.generateCell(a,null,M,i))}return s.push.apply(s,o),s},t.prototype.generateCaptionRow=function(e,i,n,s,o,a){var l={},h="records",u=this.parent.getColumnByField(e.field);l.data=he({},e),u&&(l.data.field=e.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=n,l.childGid=s,l.tIndex=o,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=f(e.items[h])?e.items.length:e.items[h].length,l.uid=Qd("grid-row");var d=new If(l);return d.indent=i,this.getForeignKeyData(d),d.cells=this.getCaptionRowCells(e.field,i,d.data),d},t.prototype.getForeignKeyData=function(e){var i=e.data,n=this.parent.getColumnByField(i.field);n&&n.isForeignColumn&&n.isForeignColumn()&&Nt("foreignKey",f(i.key)?"":n.valueAccessor(n.foreignKeyValue,SC(n,{},i.key)[0],n),e.data)},t.prototype.generateDataRows=function(e,i,n,s,o){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,u=e.length;h<u;h++,s++){a[h]=this.generateRow(e[h],this.index,h?void 0:"e-firstchildrow",i,n,s,o);for(var d=0;d<i;d++)this.parent.enableColumnVirtualization&&-1===l.indexOf(i)||a[h].cells.unshift(this.generateIndentCell());this.index++}return a},t.prototype.generateIndentCell=function(){return this.generateCell({},null,Ot.Indent)},t.prototype.refreshRows=function(e){for(var i=this.parent.getColumnIndexesInView(),n=0;n<e.length;n++)if(e[n].isDataRow){e[n].cells=this.generateCells(e[n]);for(var s=0;s<e[n].indent;s++)this.parent.enableColumnVirtualization&&-1===i.indexOf(e[n].indent)||e[n].cells.unshift(this.generateIndentCell())}else{var o=this.generateCaptionRow(e[n].data,e[n].indent);e[n].cells=o.cells}return e},t.prototype.setInfiniteRowVisibility=function(e){if(!e.isExpand||!1===e.visible)for(var i=0,n=this.rows;i<n.length;i++){var s=n[i];s.parentUid===e.uid&&(s.visible=!1,s.isCaptionRow&&this.setInfiniteRowVisibility(s))}},t.prototype.ensureRowVisibility=function(){for(var e=0;e<this.rows.length;e++){var i=this.rows[e];if(i.isCaptionRow)for(var n=e+1;n<this.rows.length;n++)i.uid===this.rows[n].parentUid&&(this.rows[n].visible=i.isExpand)}},t}(Xd),pO=function(){function r(t,e){var i=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.viewColIndexes=[],this.drop=function(n){i.parent.notify(ID,{target:n.target,droppedElement:n.droppedElement}),Be(n.droppedElement)},this.infiniteCache={},this.isRemove=!1,this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.rafCallback=function(n){var s=n;return function(){if(i.parent.isFrozenGrid()&&i.parent.enableVirtualization){var o=n.tableName;if(i.isLoaded=i.parent.getFrozenMode()===Zt?"frozen-right"===o:"movable"===o,i.parent.enableColumnVirtualization&&"virtualscroll"===n.requestType&&i.isLoaded){var a=[].slice.call(i.parent.getMovableVirtualHeader().getElementsByClassName(vn)),l=[].slice.call(i.parent.getFrozenVirtualHeader().getElementsByClassName(vn));i.isLoaded=a.length===l.length}}if(i.ariaService.setBusy(i.getPanel().querySelector("."+as),!1),!i.parent.isDestroyed){var h=i.rows.slice(0);if(i.parent.enableInfiniteScrolling){if(i.parent.groupSettings.enableLazyLoading)for(var u=0;u<i.visibleRows.length;u++)i.setRowsInLazyGroup(i.visibleRows[u],u);if(h=i.parent.getRowsObject(),i.parent.infiniteScrollSettings.enableCache&&s.prevPage){var m=i.parent.infiniteScrollSettings.maxBlocks;h=[];for(var v=parseInt(i.rowElements[0].getAttribute("data-rowindex"),10)+1,S=(u=0,Math.ceil(v/i.parent.pageSettings.pageSize));u<m;u++,S++)i.infiniteCache[S]&&(h=h.concat(i.infiniteCache[S]))}}if(i.parent.isFrozenGrid()&&(h=n.isFrozen?i.freezeRows:n.renderFrozenRightContent?i.parent.getFrozenRightRowsObject():i.movableRows),i.parent.notify(Zr,{rows:h,args:s}),i.parent.isInitialLoad||i.parent.focusModule.setFirstFocusableTabIndex(),i.isLoaded&&(i.parent.isManualRefresh=!1,i.parent.enableInfiniteScrolling&&i.parent.groupSettings.enableLazyLoading&&"sorting"===n.requestType&&(i.parent.infiniteScrollModule.groupCaptionAction=void 0),i.parent.trigger(ph,{},function(){i.parent.allowTextWrap&&i.parent.notify(cu,{case:"textwrap"})})),s){var A=(s.requestType||"").toLowerCase()+"-complete";i.parent.notify(A,s),"batchsave"===n.requestType&&(n.cancel=!1,i.parent.trigger(zi,n))}i.isLoaded&&i.parent.hideSpinner()}}},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(Uc,this.setVisible,this),this.parent.on(OV,this.colGroupRefresh,this),this.parent.on(Nr,this.enableAfterRender,this),this.parent.on("refresh-infinite-mode-blocks",this.refreshContentRows,this),this.parent.on(AD,this.beforeCellFocused,this),this.parent.on(dn,this.droppableDestroy,this))}return r.prototype.beforeCellFocused=function(t){this.pressedKey=!t.byKey||"upArrow"!==t.keyArgs.action&&"downArrow"!==t.keyArgs.action?void 0:t.keyArgs.action},r.prototype.renderPanel=function(){var t=this.parent,e=this.parent.element.querySelector("."+Ps);if(e)return this.ariaService.setOptions(this.parent.element.querySelector("."+as),{busy:!1}),void this.setPanel(e);e=this.parent.createElement("div",{className:Ps});var i=this.parent.createElement("div",{className:as});this.ariaService.setOptions(i,{busy:!1}),e.appendChild(i),this.setPanel(e),t.element.appendChild(e)},r.prototype.renderTable=function(){var t=this.getPanel(),e=t.querySelector(".e-virtualtable"),i=t.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!f(e)&&!f(i)&&(Be(e),Be(i)),t.appendChild(this.createContentTable("_content_table")),this.setTable(t.querySelector("."+sr)),this.ariaService.setOptions(this.getTable(),{multiselectable:"Multiple"===this.parent.selectionSettings.type}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdrcont")},r.prototype.createContentTable=function(t){var e=this.getPanel().firstElementChild;this.getTable()&&Be(this.getTable());var i=e.querySelector("."+sr)?e.querySelector("."+sr):this.parent.createElement("table",{className:sr,attrs:{cellspacing:"0.25px",role:"grid",id:this.parent.element.id+t}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Ti).cloneNode(!0)),i.appendChild(this.getColGroup()),i.appendChild(this.parent.createElement(rt,{attrs:{role:"rowgroup"}})),e.appendChild(i),e},r.prototype.refreshContentRows=function(t){var e=this;void 0===t&&(t={});var i=this.parent;if(0!==i.currentViewData.length){var n=this.currentMovableRows||i.currentViewData,s=this.parent.contentModule,o=i.isReact&&!f(i.rowTemplate),a=o?i.createElement(rt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=he([],n));var u,d,C,l=o?i.createElement(rt,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),h=i.getColumns(),m=i.getFrozenColumns(),v=this.parent.isFrozenGrid(),S=new Fh(this.serviceLocator,null,this.parent),A=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;i.notify("destroy-child-grid",{}),this.rowElements=[],this.rows=[];var B,j,G,_=this.getPanel().querySelector("."+tc),M=this.getPanel().querySelector("."+zn),P=this.getPanel().querySelector("."+as);ws(i)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(fa){return t.requestType===fa})&&this.emptyVcRows(),this.parent.enableVirtualization&&this.parent.isFrozenGrid()?(this.parent.enableColumnVirtualization&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis&&(G=this.parent.contentModule.generateRows(n,t),t.renderMovableContent=!0),G=this.parent.contentModule.generateRows(n,t)):(G=this.checkCache(G,t),!this.isAddRows&&!this.useGroupCache&&(G=this.generator.generateRows(n,t))),this.setGroupCache(G,t),this.parent.notify("set-infinite-cache",{isInfiniteScroll:A,modelData:G,args:t});var ne=G[0].cells[0].index;v&&(j=s.setTbody(G,t),B=s.getTbody(j));var fe=this.parent.getFrozenMode()===Zt&&j===or;if("infiniteScroll"!==t.requestType&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!t.isFrozen&&!fe){for(var Ee=[],Pe=0;Pe<this.parent.registeredTemplate.template.length;Pe++)for(var ie=0;ie<this.parent.registeredTemplate.template[Pe].rootNodes.length;ie++)f(this.parent.registeredTemplate.template[Pe].rootNodes[ie].parentNode)&&Ee.push(this.parent.registeredTemplate.template[Pe]);this.parent.destroyTemplate(["template"],Ee)}!this.parent.isReact&&!this.parent.isVue||"infiniteScroll"===t.requestType||t.isFrozen||TO(this.parent,[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"]),this.parent.enableColumnVirtualization&&new pse(this.serviceLocator,this.parent).updateVirtualCells(G),v||(this.tbody=this.getTable().querySelector(rt));var ce=0,Re=!0;if(ws(i)&&i.vcRows.length){var be=f(t.virtualInfo.offsets)?f(t.scrollTop)?0:t.scrollTop.top:t.virtualInfo.offsets.top;if(0!==be){for(var Me=i.vGroupOffsets,He=i.pageSettings.pageSize/2,Ut=Object.keys(Me).map(function(fa){return Me[fa]}),Gt=0;Gt<Ut.length;Gt++)if(be<Ut[Gt]){if(f(t.virtualInfo)||"up"!==t.virtualInfo.direction){ce=Gt*He,(this.parent.contentModule.isEndBlock(Gt)||this.parent.contentModule.isEndBlock(Gt+1))&&(t.virtualInfo.blockIndexes=[Gt,Gt+1]);break}ce=Gt>0?(Gt-1)*He:Gt*He;break}Math.round(be+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!t.rowObject&&(Re=!1)}}var Qt=i.frozenRows&&!i.isFrozenGrid()&&this.parent.enableVirtualization&&"reorder"===t.requestType;if(i.frozenRows&&"virtualscroll"===t.requestType&&"X"===t.virtualInfo.sentinelInfo.axis||Qt){var vi=t.virtualInfo.blockIndexes,ki=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],Qt&&(t.virtualInfo.page=1);var ni=this.vgenerator.generateRows(Qt?this.initialPageRecords:n,t);for(ni.splice(this.parent.frozenRows),Pe=0;Pe<this.parent.frozenRows;Pe++)ni[Pe].cells.splice(0,this.parent.getFrozenColumns()),u=S.render(ni[Pe],h),l.appendChild(u);t.virtualInfo.blockIndexes=vi,t.virtualInfo.page=ki,Qt&&1===t.virtualInfo.page&&G.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(l,G,S,t,n,h),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&"delete"===t.requestType&&(this.visibleRows=[]),Pe=ce;for(var Qn=G.length;Pe<Qn;Pe++)if(this.rows.push(G[Pe]),!this.parent.groupSettings.enableLazyLoading||this.useGroupCache||!this.parent.groupSettings.columns.length||(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage].push(G[Pe]),this.setRowsInLazyGroup(G[Pe],Pe),!f(G[Pe].indent))){if(this.setInfiniteVisibleRows(t,G[Pe],j),ws(i)&&t.virtualInfo&&t.virtualInfo.blockIndexes&&this.rowElements.length>=t.virtualInfo.blockIndexes.length*this.parent.contentModule.getBlockSize()&&Re){this.parent.currentViewData.records=this.rows.map(function(Ao){return Ao.data});break}if(i.rowTemplate){var ue=i.element.id+"rowTemplate",Ae=void 0;if(i.isReact){var St=i.frozenRows&&Pe<i.frozenRows,yi=he({index:Pe},n[Pe]);i.getRowTemplate()(yi,i,"rowTemplate",ue,null,null,St?l:a),i.renderTemplates()}else Ae=i.getRowTemplate()(he({index:Pe},n[Pe]),i,"rowTemplate",ue,void 0,void 0,void 0,this.parent.root);if(i.isReact||"TBODY"!==Ae[0].tagName)i.frozenRows&&Pe<i.frozenRows?u=i.isReact?l.lastElementChild:ca(l,Ae):(i.isReact||(u=ca(a,Ae)),C=i.isReact?a.lastElementChild:u.lastElementChild);else{for(ie=0;ie<Ae.length;ie++){var bi="tr"===Ae[ie].nodeName.toLowerCase();(bi||Ae[ie].querySelectorAll&&Ae[ie].querySelectorAll("tr").length)&&(u=bi?Ae[ie]:Ae[ie].querySelector("tr"))}i.frozenRows&&Pe<i.frozenRows?l.appendChild(u):a.appendChild(u)}this.parent.trigger(gre,{data:G[Pe].data,row:C||u})}else{u=S.render(G[Pe],h);var ss=this.ensureFrozenHeaderRender(t);i.frozenRows&&Pe<i.frozenRows&&!A&&"virtualscroll"!==t.requestType&&ss&&this.ensureVirtualFrozenHeaderRender(t)?l.appendChild(u):a.appendChild(u),G[Pe].isExpand&&i.notify("expandchildgrid",u.cells[i.groupSettings.columns.length])}G[Pe].isDataRow&&this.rowElements.push(u),this.ariaService.setOptions(this.getTable(),{colcount:i.getColumns().length.toString()})}if(this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(NS,{rows:this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]}),v&&s.splitRows(j),i.removeMaskRow(),i.frozenRows&&"virtualscroll"!==t.requestType&&!A&&this.ensureVirtualFrozenHeaderRender(t)||"virtualscroll"===t.requestType&&t.virtualInfo.sentinelInfo&&"X"===t.virtualInfo.sentinelInfo.axis)if(d=v?s.getFrozenHeader(j):i.getHeaderTable().querySelector(rt),o){var Tr=d.parentElement;Be(d),Tr.appendChild(l)}else d.innerHTML="",d.appendChild(l);!i.enableVirtualization&&i.frozenRows&&0===ne&&P.offsetHeight===Number(i.height)&&(P.style.height=P.offsetHeight-d.offsetHeight+"px"),t.rows=this.rows.slice(0),v&&s.setIsFrozen(t,j),this.index=ne,kse(function(){e.parent.notify(Wre,t);var fa=e.parent.enableVirtualization&&e.parent.isFrozenGrid();if(!e.parent.enableVirtualization&&!A&&(e.parent.isFrozenGrid()?(Be(s.getTbody(j)),B=e.parent.createElement(rt,{attrs:{role:"rowgroup"}})):(e.tbody.innerHTML="",f(e.tbody.parentElement)?Be(i.getContentTable().querySelector(rt)):Be(e.tbody),e.tbody=e.parent.createElement(rt,{attrs:{role:"rowgroup"}}))),!v||fa||e.parent.enableInfiniteScrolling)if(i.rowTemplate&&Pb(),fa){if(t.renderFrozenRightContent){var Ao=i.getContent().querySelector(".e-frozen-right-content").querySelector(rt);e.appendContent(Ao,a,t)}else t.renderMovableContent?(e.appendContent(M.querySelector(rt),a,t),t.renderMovableContent=!1):e.appendContent(_.querySelector(rt),a,t);e.parent.getFrozenColumns()||s.renderNextFrozentPart(t,j)}else!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling?(e.isAddRows=!1,e.parent.notify("remove-infinite-rows",{args:t}),e.parent.notify("append-infinite-content",{tbody:B||e.tbody,frag:a,args:t,rows:e.rows,rowElements:e.rowElements,visibleRows:e.visibleRows,tableName:j}),!m&&v&&(i.getFrozenMode()!==Zt&&(j===rs||j===or)||i.getFrozenMode()===Zt&&(j===rs||"movable"===j))&&e.refreshContentRows(he({},t))):(e.useGroupCache=!1,e.appendContent(e.tbody,a,t));else e.appendContent(B,a,t,j);m&&s.renderNextFrozentPart(t,j),a=null},this.rafCallback(he({},t)))}},r.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},r.prototype.appendContent=function(t,e,i,n){this.parent.isReact&&!f(this.parent.rowTemplate)?this.getTable().appendChild(e):(t.appendChild(e),this.getTable().appendChild(t))},r.prototype.setRowsInLazyGroup=function(t,e){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.contentModule.maintainRows(t,e)},r.prototype.setGroupCache=function(t,e){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify("group-cache",{args:e,data:t})},r.prototype.ensureFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&("reorder"===t.requestType||"refresh"===t.requestType)||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&"delete"===this.parent.infiniteScrollModule.requestType&&1!==this.parent.pageSettings.currentPage)},r.prototype.ensureVirtualFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&"delete"===t.requestType)},r.prototype.checkCache=function(t,e){if(this.parent.infiniteScrollSettings.enableCache&&"infiniteScroll"===e.requestType){var i=e.isFrozen?1:0,n=this.parent.isFrozenGrid();if(this.isAddRows=!f(this.infiniteCache[this.parent.pageSettings.currentPage]),n&&!f(this.infiniteCache[this.parent.pageSettings.currentPage])&&(this.isAddRows=0!==this.infiniteCache[this.parent.pageSettings.currentPage][i].length),this.isAddRows){var s=n?this.infiniteCache[this.parent.pageSettings.currentPage][i]:this.infiniteCache[this.parent.pageSettings.currentPage];t=1===this.parent.pageSettings.currentPage?s.slice(this.parent.frozenRows):s}return t}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&("paging"===e.requestType||"columnstate"===e.requestType||"reorder"===e.requestType)&&this.parent.contentModule.getGroupCache()[this.parent.pageSettings.currentPage]?(this.useGroupCache=!0,this.parent.contentModule.initialGroupRows("reorder"===e.requestType)):null},r.prototype.setInfiniteVisibleRows=function(t,e,i){var n=this.parent.isFrozenGrid();this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(n?i===rs||"Right"===this.parent.getFrozenMode()&&i===or?this.visibleFrozenRows.push(e):"movable"===i?this.visibleRows.push(e):this.rightFreezeRows.push(e):this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(e))},r.prototype.getCurrentBlockInfiniteRecords=function(t){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.isFrozenGrid(),n=this.parent.getRows(),s=parseInt(n[this.parent.frozenRows].getAttribute(Ai),10),o=Math.ceil((s+1)/this.parent.pageSettings.pageSize);s=parseInt(n[n.length-1].getAttribute(Ai),10);var a=Math.ceil(s/this.parent.pageSettings.pageSize);if(i){for(var l=t?0:1,h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h][l]):this.infiniteCache[h][l];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1][l].slice(0,this.parent.frozenRows).concat(e))}else{for(h=o;h<=a;h++)e=e.length?e.concat(this.infiniteCache[h]):this.infiniteCache[h];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}}return e},r.prototype.getReorderedVFRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.getReorderedRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},r.prototype.virtualFrozenHdrRefresh=function(t,e,i,n,s,o){if(this.parent.frozenRows&&this.parent.enableVirtualization&&("reorder"===n.requestType||"refresh"===n.requestType)){var a=void 0,l=[];this.parent.isFrozenGrid()?(this.currentMovableRows=s,l=this.getReorderedVFRows(n)):l=this.getReorderedRows(n);for(var h=0;h<l.length;h++)a=i.render(l[h],o),t.appendChild(a);1===n.virtualInfo.page&&e.splice(0,this.parent.frozenRows),n.renderMovableContent&&(this.parent.currentViewData=this.currentMovableRows,this.currentMovableRows=null)}},r.prototype.getInfiniteRows=function(){var t=[],e=this.parent.isFrozenGrid();if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),n=0;n<i.length;n++)t=t.concat(e?this.infiniteCache[i[n]][0]:this.infiniteCache[i[n]]);else t=e?this.visibleFrozenRows:this.visibleRows;return t},r.prototype.getInfiniteMovableRows=function(){var t=this.getCurrentBlockInfiniteRecords();return this.parent.enableInfiniteScrolling?t.length?t:this.visibleRows:[]},r.prototype.getPanel=function(){return this.contentPanel},r.prototype.setPanel=function(t){this.contentPanel=t},r.prototype.getTable=function(){return this.contentTable},r.prototype.setTable=function(t){this.contentTable=t},r.prototype.getRows=function(){var t=this.getInfiniteRows();return t.length?t:this.parent.getFrozenColumns()?this.freezeRows:this.rows},r.prototype.getMovableRows=function(){var t=this.getInfiniteMovableRows();return t.length?t:this.movableRows},r.prototype.getRowElements=function(){return this.parent.getFrozenColumns()?this.freezeRowElements:this.rowElements},r.prototype.getMovableRowElements=function(){return this.rowElements},r.prototype.setRowElements=function(t){this.rowElements=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return f(t)||(t.id="content-"+t.id),this.colgroup=t},r.prototype.setVisible=function(t){var A,e=this.parent,i=this.parent.isFrozenGrid(),n=e.getFrozenColumns(),s=[];if(i){var o=this.freezeRows,a=this.movableRows,l=o.length,h=void 0,u=[];e.getFrozenMode()===Zt&&(u=e.getFrozenRightRowsObject());for(var d=0,m=void 0;d<l;d++){h=a[d].cells.length;var v=u.length?u[d].cells.length:0;m=o[d].clone();for(var C=0;C<h;C++)m.cells.push(a[d].cells[C]);for(var S=0;S<v;S++)m.cells.push(u[d].cells[S]);s.push(m)}}else s=this.getRows();s.some(function(Me){return Me.isDataRow&&(A=Me),Me.isDataRow});var _=!0;!e.groupSettings.columns.length&&A&&(_=!1);for(var M=e.getDataRows(),j=this.infiniteRowVisibility()||this.rows.filter(function(Me){return!Me.isDetailRow}),G=0,ne=t.length;G<ne;G++){var fe=t[G],Ee=this.parent.getNormalizedColumnIndex(fe.uid),Pe=this.parent.getColumnIndexByUid(fe.uid),ie=!0===fe.visible?"":"none";if(-1!==Ee&&A&&Ee<A.cells.length)if(i)if("movable"!==fe.getFreezeTableName())fe.getFreezeTableName()===or?(Pe=Ee-=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount(),Ft(this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(Ti).childNodes[Ee],{display:ie}),j=e.getFrozenRightRowsObject(),M=e.getFrozenRightDataRows()):(Ft(this.getColGroup().childNodes[Ee],{display:ie}),j=this.infiniteRowVisibility(!0)||this.freezeRows,M=e.getDataRows());else{var je=e.getContent().querySelector("."+zn).querySelector(Ti);Pe=Ee=Ee-n-this.parent.getFrozenLeftColumnsCount(),Ft(je.childNodes[Ee],{display:ie}),M=e.getMovableDataRows(),j=this.infiniteRowVisibility()||this.movableRows}else Ft(this.getColGroup().childNodes[Ee],{display:ie});_||(this.setDisplayNone(M,Pe,ie,j),i&&this.parent.notify(cu,{case:"refreshHeight",isModeChg:!0})),!this.parent.invokedFromMedia&&fe.hideAtMedia&&this.parent.updateMediaColumns(fe),this.parent.invokedFromMedia=!1}_?this.refreshContentRows({requestType:"refresh"}):this.parent.getFrozenColumns()?(this.parent.notify(rO,{rows:this.freezeRows,args:{isFrozen:!0,rows:this.freezeRows}}),this.parent.notify(rO,{rows:this.movableRows,args:{isFrozen:!1,rows:this.movableRows}})):this.parent.notify(rO,{rows:j,args:{}})},r.prototype.setDisplayNone=function(t,e,i,n){(function Use(r,t,e,i,n,s){for(var o=Object.keys(r),a=0;a<o.length;a++){var l=r[o[a]].querySelectorAll("td.e-rowcell")[t];if(r[o[a]].querySelectorAll("td.e-rowcell").length&&l)if(Ft(r[o[a]].querySelectorAll("td.e-rowcell")[t],{display:e}),r[o[a]].querySelectorAll("td.e-rowcell")[t].classList.contains("e-hide")&&z([r[o[a]].querySelectorAll("td.e-rowcell")[t]],["e-hide"]),s&&n.isRowDragable()){var h=n.getFrozenColumns()?t:t+1;i[o[a]].cells[h].visible=""===e}else i[o[a]].cells[t].visible=""===e}})(t,e,i,n,this.parent,this.parent.isRowDragable()),this.parent.notify("infinite-show-hide",{visible:i,index:e,isFreeze:this.isInfiniteFreeze})},r.prototype.infiniteRowVisibility=function(t){var e;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=t,e=this.parent.infiniteScrollSettings.enableCache?t?this.getCurrentBlockInfiniteRecords(!0):this.getCurrentBlockInfiniteRecords():t?this.visibleFrozenRows:this.visibleRows),e},r.prototype.colGroupRefresh=function(){if(this.getColGroup()){var t;t=this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()?this.parent.getMovableVirtualHeader().querySelector(Ti+":not(.e-masked-colgroup)").cloneNode(!0):this.getHeaderColGroup(),this.getTable().replaceChild(t,this.getColGroup()),this.setColGroup(t)}},r.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+js).querySelector(Ti+":not(.e-masked-colgroup)").cloneNode(!0)},r.prototype.initializeContentDrop=function(){this.droppable=new Mw(this.parent.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},r.prototype.canSkip=function(t,e,i){return f(e)||f(t.visible)||e.cells[i].visible===t.visible},r.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new t2(this.parent):new Xd(this.parent)},r.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(rt).innerHTML="")},r.prototype.setSelection=function(t,e,i){this.parent.notify("set-freeze-selection",{uid:t,set:e,clearAll:i});var n=this.parent.isFrozenGrid();if(!n||!this.parent.enableVirtualization){if(n)for(var s=this.getMovableRows().filter(function(d){return i||t===d.uid}),o=0;o<s.length;o++)s[o].isSelected=e;for(var a=this.getRows().filter(function(d){return i||t===d.uid}),l=0;l<a.length;l++){a[l].isSelected=e;for(var h=a[l].cells,u=0;u<h.length;u++)h[u].isSelected=e}}},r.prototype.getRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getDataRows()[t]},r.prototype.getInfiniteRowIndex=function(t){if(this.parent.infiniteScrollSettings.enableCache){var e=this.parent.frozenRows,i=e>t?0:e,n=parseInt(this.parent.getRows()[i].getAttribute(Ai),10);t=e>t?t:t-n+e}return t},r.prototype.getVirtualRowIndex=function(t){return t},r.prototype.getMovableRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),this.parent.getMovableDataRows()[t]},r.prototype.enableAfterRender=function(t){"group"===t.module&&t.enable&&(this.generator=this.getModelGenerator())},r.prototype.setRowObjects=function(t){this.rows=t},r.prototype.immutableModeRendering=function(t){var e=this;void 0===t&&(t={});var i=this.parent;i.hideSpinner();var n=i.getPrimaryKeyFieldNames()[0],s={},o={},a=[],l={},h=i.getRowsObject().slice(),u=this.getBatchEditedRecords(n,h),d={},m=0!==Object.keys(u).length;if(i.getContent().querySelector(".e-emptyrow")||"reorder"===t.requestType||this.parent.groupSettings.columns.length)this.refreshContentRows(t);else{if(0===i.currentViewData.length)return;var v={},C=i.createElement(rt,{attrs:{role:"rowgroup"}}),S=i.currentViewData,A=[].slice.call(this.getTable().querySelector(rt).children);if(this.prevCurrentView.length){var _=this.prevCurrentView.length,M=S.length;if(_===M)for(var P=0;P<M;P++)"Batch"===this.parent.editSettings.mode&&A[P].classList.contains("e-insertedrow")?(A.splice(P,1),--P):(o[S[P][n]]=s[this.prevCurrentView[P][n]]=P,d[P]=S[P][n],v[h[P].uid]=A[P],l[P]=this.prevCurrentView[P][n]);else{for(P=0;P<M;P++)o[S[P][n]]=P,d[P]=S[P][n];for(P=0;P<_;P++)"Batch"===this.parent.editSettings.mode&&A[P].classList.contains("e-insertedrow")?(A.splice(P,1),--P):(v[h[P].uid]=A[P],s[this.prevCurrentView[P][n]]=P,l[P]=this.prevCurrentView[P][n])}}for(P=0;P<S.length;P++){var B=s[S[P][n]];if(f(B)){var ne=new Fh(this.serviceLocator,null,i),fe=this.generator.generateRows([S[P]]);a.push(fe[0]);var G=ne.render(fe[0],i.getColumns());C.appendChild(G),this.refreshImmutableContent(P,G,a[P])}else{var j=!1;if(this.parent.enableDeepCompare&&(j=this.objectEqualityChecker(this.prevCurrentView[B],S[P])),G=v[h[B].uid],a.push(h[B]),this.rowElements[B]&&this.rowElements[B].getAttribute("data-uid")===a[P].uid&&(m&&f(u[d[P]])||!m&&(j||this.prevCurrentView[B]===S[P]))){B!==P&&this.refreshImmutableContent(P,G,a[P]),C.appendChild(G);continue}(m&&!f(u[d[P]])||!this.parent.enableDeepCompare&&S[P]!==this.prevCurrentView[B]||this.parent.enableDeepCompare&&!j)&&h[B].setRowValue(S[P]),C.appendChild(G),this.refreshImmutableContent(P,G,a[P])}}if(this.rows=a,this.rowElements=[].slice.call(C.children),Be(this.getTable().querySelector(rt)),this.getTable().appendChild(C),this.parent.trigger(ph,{},function(){e.parent.allowTextWrap&&e.parent.notify(cu,{case:"textwrap"})}),t){var Ee=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(Ee,t)}}},r.prototype.objectEqualityChecker=function(t,e){for(var i=Object.keys(t),n=!0,s=0;s<i.length;s++)if(!(t[i[s]]===e[i[s]]||t[i[s]]instanceof Date&&e[i[s]]instanceof Date&&t[i[s]].getTime()===e[i[s]].getTime())){n=!1;break}return n},r.prototype.getBatchEditedRecords=function(t,e){var i={},n=this.parent.getBatchChanges(),s=[],o=[];Object.keys(n).length&&(s=n.changedRecords,o=n.addedRecords);var a={cancel:!1};this.parent.notify("immutable-batch-cancel",{rows:e,args:a}),o.length&&("Bottom"===this.parent.editSettings.newRowPosition?e.splice(e.length-1,o.length):a.cancel||e.splice(0,o.length));for(var l=0;l<s.length;l++)i[s[l][t]]=l;return i},r.prototype.refreshImmutableContent=function(t,e,i){i.isAltRow=!!this.parent.enableAltRow&&t%2!=0,i.isAltRow?e.classList.add("e-altrow"):e.classList.remove("e-altrow"),i.index=t,i.edit=void 0,i.isDirty=!1,e.setAttribute(Ai,t.toString()),e.setAttribute(hO,(t+1).toString()),this.updateCellIndex(e,t)},r.prototype.updateCellIndex=function(t,e){for(var i=0;i<t.cells.length;i++)t.cells[i].setAttribute("index",e.toString())},r}(),xG=function(){function r(t,e){var i=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(n){var s=i.parent,o=i.draggable.currentStateTarget,a=pe(o,"e-headercell");if(!s.allowReordering&&!s.allowGrouping||!f(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=i.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=o.classList.contains("e-headercell")?o:a;if(!h||!s.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var m,u=h.offsetHeight,d=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv");if(d){if(m=h.querySelector(".e-stackedheadercelldiv")?s.getStackedHeaderColumnByHeaderText(d.innerText.trim(),s.columns):s.getColumnByUid(d.getAttribute("e-mappinguid")),i.column=m,i.column.lockColumn)return!1;l.setAttribute("e-mappinguid",i.column.uid)}if(m&&!f(m.headerTemplate))if(f(m.headerTemplate))l.innerHTML=m.headerTemplate;else{var v=s.getColumnIndexByField(m.field);ca(l,m.getHeaderTemplate()(he({index:v},m),s,"headerTemplate"))}else l.innerHTML=d?m.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(u-6).toString()+"px",s.element.appendChild(l),l},this.dragStart=function(n){var s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",s.notify(DD,{target:i.draggable.currentStateTarget,column:i.column,event:n.event})},this.drag=function(n){var s=i.parent,o=n.target;if(o){var a=U(o,".e-grid"),l=i.parent.element.querySelector(".e-cloneproperties");if(!(a&&a.getAttribute("id")===s.element.getAttribute("id")||(ri(l,["e-notallowedcur"],["e-defaultcur"]),s.allowReordering&&(s.element.querySelector(".e-reorderuparrow").style.display="none",s.element.querySelector(".e-reorderdownarrow").style.display="none"),s.groupSettings.allowReordering)))return;s.notify(LS,{target:n.target,column:i.column,event:n.event})}},this.dragStop=function(n){var o,s=i.parent;s.element.querySelector(".e-gridpopup").style.display="none",(!pe(n.target,"e-headercell")&&!pe(n.target,"e-groupdroparea")||!s.allowReordering&&pe(n.target,"e-headercell")||!n.helper.getAttribute("e-mappinguid")&&pe(n.target,"e-groupdroparea"))&&(Be(n.helper),o=!0),s.notify("column-drag-stop",{target:n.target,event:n.event,column:i.column,cancel:o})},this.drop=function(n){var s=i.parent,o=n.droppedElement.getAttribute("e-mappinguid"),a=U(n.target,".e-grid");Be(n.droppedElement),!(a&&a.getAttribute("id")!==s.element.getAttribute("id")||!s.allowReordering&&!s.allowGrouping)&&s.notify(RD,{target:n.target,uid:o,droppedElement:n.droppedElement})},this.parent=t,this.serviceLocator=e,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.getFrozenLeftColumnsCount()&&!this.parent.getFrozenRightColumnsCount()&&this.parent.on(Uc,this.setVisible,this),this.parent.on(kD,this.colPosRefresh,this),this.parent.on(Ba,this.renderCustomToolbar,this),"Vertical"===this.parent.rowRenderingMode&&this.parent.on(Nr,this.updateCustomResponsiveToolbar,this))}return r.prototype.renderPanel=function(){var t=this.parent.element.querySelector("."+js),e=null!=t;t=e?t:this.parent.createElement("div",{className:"e-gridheader"});var i=e?t.querySelector("."+Ms):this.parent.createElement("div",{className:Ms});this.toggleStackClass(t),t.appendChild(i),this.setPanel(t),e||this.parent.element.appendChild(t)},r.prototype.renderTable=function(){var t=this.getPanel();t.appendChild(this.createHeaderTable()),this.setTable(t.querySelector("."+sr)),!this.parent.getFrozenColumns()&&!this.parent.getFrozenRightColumnsCount()&&!this.parent.getFrozenLeftColumnsCount()&&(this.initializeHeaderDrag(),this.initializeHeaderDrop()),this.parent.notify(xo,{rows:this.rows,args:{isFrozen:this.parent.isFrozenGrid()}})},r.prototype.getPanel=function(){return this.headerPanel},r.prototype.setPanel=function(t){this.headerPanel=t},r.prototype.getTable=function(){return this.headerTable},r.prototype.setTable=function(t){this.headerTable=t},r.prototype.getColGroup=function(){return this.colgroup},r.prototype.setColGroup=function(t){return this.colgroup=t},r.prototype.getRows=function(){return this.getTable().tHead.rows},r.prototype.createHeaderTable=function(){var t=this.createTable(),e=this.getPanel().querySelector("."+Ms);return e.appendChild(t),e},r.prototype.createHeader=function(t,e){void 0===t&&(t=null);var i=this.parent,n=i.isFrozenGrid();this.getTable()&&!n&&Be(this.getTable());var s=this.parent.createElement("table",{className:sr,attrs:{cellspacing:"0.25px",role:"grid"}}),o=e||(i.getFrozenLeftCount()?"frozen-left":"frozen-right"),a=this.createHeaderContent(o),l=a.thead,h=this.parent.createElement(rt,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var m,u=this.parent.createElement(Ti),d=this.parent.createElement("tr",{attrs:{role:"row"}}),v=this.rows=a.rows,C=0,S=v.length;C<S;C++)for(var A=0,_=v[C].cells.length;A<_;A++)m=this.parent.createElement("td"),d.appendChild(m);return(i.allowFiltering||i.allowSorting||i.allowGrouping)&&s.classList.add("e-sortfilter"),this.updateColGroup(u),h.appendChild(d),s.appendChild(this.setColGroup(u)),s.appendChild(l),s.appendChild(h),s.appendChild(this.caption),this.ariaService.setOptions(s,{colcount:i.getColumns().length.toString()}),s},r.prototype.createTable=function(t){return void 0===t&&(t=null),this.createHeader(t)},r.prototype.createHeaderContent=function(t){var e=this.parent,i=1,n=e.getFrozenMode(),s=e.getColumns(),o=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),a=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),l=new Fh(this.serviceLocator,Ot.Header,e);l.element=a;var u,h=[];this.colDepth=function p2(r){for(var t=0,e=0;e<r.length;e++){var i=Bse(r[e],0);t<i&&(t=i)}return t+1}(e.columns);for(var d=0,m=this.colDepth;d<m;d++)h[d]=this.generateRow(d),h[d].cells=[];"Right"!==n&&(h=this.ensureColumns(h)),h=this.getHeaderCells(h,t),"Right"===n&&(i=0,h=this.ensureColumns(h));var v=this.parent.getFrozenColumns();if(this.parent.isRowDragable()&&this.parent.isFrozenGrid()&&h[0].cells[i]){var C=h[0].cells[i].column.getFreezeTableName();"movable"===C||n===Zt&&C===or?"Right"===n?h[0].cells.pop():h[0].cells.shift():v||C!==rs?"Right"===n&&C===or&&(h[0].cells[h[0].cells.length-1].column.freeze="Right"):h[0].cells[0].column.freeze=C===rs?"Left":"Right"}for(d=0,m=this.colDepth;d<m;d++)u=l.render(h[d],s),this.parent.rowHeight&&u.querySelector(".e-headercell")&&(u.style.height=this.parent.rowHeight+"px"),o.appendChild(u);return{thead:o,rows:h}},r.prototype.updateColGroup=function(t){var i,e=this.parent.getColumns(),n=this.parent.getColumnIndexesInView();if(this.parent.enableColumnVirtualization&&this.parent.getFrozenColumns()&&this.parent.contentModule.isXaxis()&&(e=he([],this.parent.getColumns())).splice(0,this.parent.getFrozenColumns()),t.id=this.parent.element.id+Ti,this.parent.allowGrouping)for(var s=0,o=this.parent.groupSettings.columns.length;s<o;s++)this.parent.enableColumnVirtualization&&-1===n.indexOf(s)||(i=this.parent.createElement("col",{className:"e-group-intent"}),t.appendChild(i));for((this.parent.detailTemplate||this.parent.childGrid)&&(i=this.parent.createElement("col",{className:"e-detail-intent"}),t.appendChild(i)),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),s=0,o=e.length;s<o;s++)i=this.parent.createElement("col"),!1===e[s].visible&&Ft(i,{display:"none"}),t.appendChild(i);return this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&(i=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(i)),t},r.prototype.ensureColumns=function(t){for(var e=this.parent,i=this.parent.getColumnIndexesInView(),n=0,s=t.length;n<s;n++){if(e.allowGrouping)for(var o=0,a=e.groupSettings.columns.length;o<a;o++)this.parent.enableColumnVirtualization&&-1===i.indexOf(o)||t[n].cells.push(this.generateCell({},Ot.HeaderIndent));if(e.detailTemplate||e.childGrid){var l={};this.parent.notify(Yre,l),t[n].cells.push(this.generateCell(l,Ot.DetailHeader))}e.isRowDragable()&&t[n].cells.push(this.generateCell({},Ot.RowDragHIcon))}return t},r.prototype.getHeaderCells=function(t,e){var i=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),n=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var s=0;s<n.length;s++)this.lockColsRendered=!1,t=this.appendCells(n[s],t,0,0===s,!1,s===n.length-1,i,e,!1);s=0;for(var o=n.length;s<o;s++)this.notfrzIdx=0,this.lockColsRendered=!0,t=this.appendCells(n[s],t,0,0===s,!1,s===o-1,i,e,!1);return t},r.prototype.appendCells=function(t,e,i,n,s,o,a,l,h){var S,u=o?h?"e-laststackcell":"e-lastcell":"",d=this.parent.isFrozenGrid(),m=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,v=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered,C=this.parent.getContent().querySelector(".e-movablescrollbar");if(d&&C&&this.parent.enableColumnVirtualization&&(S=C.scrollLeft),t.columns){this.isFirstCol=!1;var A=this.getCellCnt(t,0);if(A){var _=this.getStackedLockColsCount(t,0),M=0===this.parent.lockcolPositionCount||!this.lockColsRendered&&0!==_||this.lockColsRendered&&A-_!=0,P=d&&this.ensureStackedFrozen(t.columns,l,!1);(!d&&M||P)&&e[i].cells.push(new ec({cellType:Ot.StackedHeader,column:t,colSpan:this.getColSpan(A,_,t.columns,l,d),className:n?"":s?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var B=0;B<t.columns.length;B++)e=this.appendCells(t.columns[B],e,i+1,n,0===B,B===t.columns.length-1&&o,a,l,!1);if(this.lockColsRendered){B=0;for(var j=t.columns.length;B<j;B++){n=n&&0===B;var G=this.isFirstCol=t.columns[B].visible&&!n,ne=B===j-1&&o;e=this.appendCells(t.columns[B],e,i+1,n,G&&!ne,ne,a,l,!0)}}}else(S&&S>0&&this.parent.contentModule.isXaxis()&&0!==this.parent.inViewIndexes[0]&&"movable"===t.getFreezeTableName()||!d&&m||d&&t.getFreezeTableName()===l&&v)&&e[i].cells.push(this.generateCell(t,Ot.Header,this.colDepth-i,(n?"":s?"e-firstcell":"")+u,i,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;return e},r.prototype.ensureStackedFrozen=function(t,e,i){for(var n=t.length,s=0;s<n;s++)if(t[s].columns)i=this.ensureStackedFrozen(t[s].columns,e,i);else if(t[s].getFreezeTableName()===e){i=!0;break}return i},r.prototype.getStackedLockColsCount=function(t,e){if(t.columns)for(var i=0;i<t.columns.length;i++)e=this.getStackedLockColsCount(t.columns[i],e);else t.lockColumn&&e++;return e},r.prototype.getColSpan=function(t,e,i,n,s){return s?t=this.getFrozenColSpan(i,n,0):this.parent.lockcolPositionCount&&(t=this.lockColsRendered?t-e:e),t},r.prototype.getFrozenColSpan=function(t,e,i){for(var n=t.length,s=0;s<n;s++)t[s].columns?i=this.getFrozenColSpan(t[s].columns,e,i):t[s].getFreezeTableName()===e&&t[s].visible&&i++;return i},r.prototype.generateRow=function(t){return new If({})},r.prototype.generateCell=function(t,e,i,n,s,o){var a={visible:t.visible,isDataCell:!1,isTemplate:!f(t.headerTemplate),rowID:"",column:t,cellType:e,rowSpan:i,className:n,index:s,colIndex:o};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new ec(a)},r.prototype.setVisible=function(t){for(var i,n,e=this.parent,s=e.getFrozenColumns(),o=0,a=t.length;o<a;o++){var l=t[o];if(n=e.getNormalizedColumnIndex(l.uid),i=l.visible?"":"none",s){var h=this.parent.isRowDragable()?s+1:s;Ft(n<h?this.getColGroup().children[n]:e.getHeaderContent().querySelector("."+Zn).querySelector(Ti).children[n-h],{display:i})}else Ft(this.getColGroup().children[n],{display:i})}this.refreshUI()},r.prototype.colPosRefresh=function(){this.refreshUI()},r.prototype.refreshUI=function(){var t=this.parent.isFrozenGrid(),e=this.parent.enableColumnVirtualization&&t,i=this.getPanel();this.toggleStackClass(i);var n=this.freezeReorder?this.headerPanel.querySelector("."+Zn).querySelector("."+sr):this.getTable(),s=this.parent.isFrozenGrid()?this.parent.getFrozenLeftCount()?"frozen-left":"frozen-right":void 0;if(e&&(n=this.parent.contentModule.getVirtualFreezeHeader(),s=this.parent.contentModule.isXaxis()?"movable":s),n){Be(n),n.removeChild(n.firstChild),n.removeChild(n.childNodes[0]);var o=this.parent.createElement(Ti),a=this.createHeaderContent(s);this.rows=a.rows,n.insertBefore(a.thead,n.firstChild),this.updateColGroup(o),n.insertBefore(this.setColGroup(o),n.firstChild),e||this.setTable(n),this.appendContent(n),this.parent.notify(OV,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),(!t||this.parent.enableColumnVirtualization&&t)&&this.initializeHeaderDrag();for(var l=[].slice.call(i.querySelectorAll("tr.e-columnheader")),h=0,u=l;h<u.length;h++){var m=[].slice.call(u[h].getElementsByClassName("e-grouptopleftcell"));m.length&&m[m.length-1].classList.add("e-lastgrouptopleftcell")}t||this.parent.notify(xo,{rows:this.rows,args:{isFrozen:t}}),this.parent.enableColumnVirtualization&&pe(n,Zn)&&this.parent.notify(xo,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&"Header"===this.parent.textWrapSettings.wrapMode&&du(l,!0)}},r.prototype.toggleStackClass=function(t){this.parent.columns.some(function(n){return!f(n.columns)})?t.classList.add("e-stackedheader"):t.classList.remove("e-stackedheader")},r.prototype.appendContent=function(t){this.getPanel().querySelector("."+Ms).appendChild(t)},r.prototype.getCellCnt=function(t,e){if(t.columns)for(var i=0,n=t.columns.length;i<n;i++)e=this.getCellCnt(t.columns[i],e);else t.visible&&e++;return e},r.prototype.initializeHeaderDrag=function(){!(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)||(this.draggable=new $p(this.parent.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}))},r.prototype.initializeHeaderDrop=function(){new Mw(this.parent.getHeaderContent(),{accept:".e-dragclone",drop:this.drop})},r.prototype.renderCustomToolbar=function(){var t=this,e=this.parent;if("Vertical"===e.rowRenderingMode&&!e.toolbar&&(e.allowSorting||e.allowFiltering&&"FilterBar"!==e.filterSettings.type)){for(var i=e.createElement("div",{className:"e-res-toolbar e-toolbar"}),n=e.createElement("div",{className:"e-toolbar-items"}),s=e.createElement("div",{className:"e-toolbar-left"}),o=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<o;a++){var l=e.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=1===o?this.parent.allowSorting?"sort":"filter":1===a?"sort":"filter",u=e.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),d=e.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});u.appendChild(d),new tS({cssClass:this.parent.cssClass?this.parent.cssClass:""}).appendTo(u),u.onclick=function(v){v.target.classList.contains("e-ressort-btn")||v.target.classList.contains("e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},l.appendChild(u),s.appendChild(l)}n.appendChild(s),i.appendChild(n),e.element.insertBefore(i,this.parent.element.querySelector("."+js))}else e.enableAdaptiveUI&&!e.toolbar&&e.getContent().classList.add("e-responsive-header")},r.prototype.updateCustomResponsiveToolbar=function(t){var e=this.parent.element.querySelector(".e-responsive-toolbar");"toolbar"===t.module&&(e?Be(e):this.renderCustomToolbar())},r}(),fh=function(){function r(t,e){this.localizer=e.getService("localization"),this.formatter=e.getService("valueFormatter"),this.parent=t,this.element=this.parent.createElement("TD",{className:tn,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("CheckBoxLabel")}})}return r.prototype.getGui=function(){return""},r.prototype.format=function(t,e,i){return f(t.format)||("number"===t.type&&isNaN(parseInt(e,10))&&(e=null),e=this.formatter.toView(e,t.getFormatter())),f(e)?"":e.toString()},r.prototype.evaluate=function(t,e,i,n,s,o){var a,l;if(e.column.template){var h=this.parent.isReact&&"string"!=typeof e.column.template,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=["index"],m=d2({},i,((a={})[jre]=s,a.column=e.column,a)),v=this.parent.element.id+e.column.uid,C="isStringTemplate";if(h||u){var S={index:n[d[0]]};e.column.getColumnTemplate()(he(S,m),this.parent,"columnTemplate",v,this.parent[C],null,t),this.parent.renderTemplates()}else l=e.column.getColumnTemplate()(he({index:n[d[0]]},m),this.parent,"template",v,this.parent[C],void 0,void 0,this.parent.root);return!h&&!u&&ca(t,l),this.parent.notify("template-result",{template:l}),l=null,t.setAttribute("aria-label",t.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+e.column.headerText),!1}return!0},r.prototype.invokeFormatter=function(t,e,i){return f(t.formatter)||(e=function NDe(r,t){return r.prototype&&t in r.prototype}(t.formatter,"getValue")?(new(0,t.formatter)).getValue(t,i):"function"==typeof t.formatter?t.formatter(t,i):t.formatter.getValue(t,i)),e},r.prototype.render=function(t,e,i,n,s){return this.refreshCell(t,e,i,s)},r.prototype.refreshTD=function(t,e,i,n){var s="Batch"===this.parent.editSettings.mode&&t.classList.contains("e-editedbatchcell");if(this.parent.isReact){t.innerHTML="";var o=t.cellIndex,a=t.parentElement;Be(t);var l=this.refreshCell(e,i,n,s);this.cloneAttributes(l,t),a.cells.length!==o-1?a.insertBefore(l,a.cells[o]):a.appendChild(l)}else{var h=this.refreshCell(e,i,n,s);t.innerHTML="",t.setAttribute("aria-label",h.getAttribute("aria-label"));for(var d=0,m=[].slice.call(h.childNodes);d<m.length;d++)t.appendChild(m[d])}},r.prototype.cloneAttributes=function(t,e){for(var s,i=e.attributes,n=i.length;n--;)t.setAttribute((s=i[n]).name,s.value)},r.prototype.refreshCell=function(t,e,i,n){var s,l,o=this.element.cloneNode(),a=t.column;t.isForeignKey&&(l=t.foreignKeyData[0]||((s={})[a.foreignKeyValue]=a.format?null:"",s));var h=this.getGui(),u=t.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,e,a);if(("date"===a.type||"datetime"===a.type)&&!f(u)&&(u=new Date(u)),h=(u=this.format(a,u,e)).toString(),"boolean"===a.type&&!a.displayAsCheckBox){var d="true"!==u&&"false"!==u?null:"true"===u?"True":"False";h=d?this.localizer.getConstant(d):h}var m=this.invokeFormatter(a,u,e);if(h=f(a.formatter)?h:f(m)?"":m.toString(),o.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+t.column.headerText),this.evaluate(o,t,e,i,l,n)&&"checkbox"!==a.type)this.appendHtml(o,h,a.getDomSetter?a.getDomSetter():"innerHTML");else if("checkbox"===a.type){o.classList.add(BS),o.setAttribute("aria-label",this.localizer.getConstant("CheckBoxLabel"));var v=Zb(this.parent.createElement,!1,{checked:u=!!this.parent.selectionSettings.persistSelection&&"true"===u,label:" "});this.parent.cssClass&&N([v],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+t.rowID,v.insertBefore(this.rowChkBox.cloneNode(),v.firstChild),o.appendChild(v)}if("Check"===this.parent.checkAllRows&&this.parent.enableVirtualization&&(t.isSelected=!0),this.setAttributes(o,t,i),"boolean"===a.type&&a.displayAsCheckBox){var C=isNaN(parseInt(u.toString(),10))?"true"===u:parseInt(u.toString(),10)>0;v=Zb(this.parent.createElement,!1,{checked:C,label:" "}),o.innerHTML="",o.classList.add("e-gridchkbox-cell"),v.classList.add("e-checkbox-disabled"),this.parent.cssClass&&N([v],[this.parent.cssClass]),o.appendChild(v),o.setAttribute("aria-label",C+this.localizer.getConstant("ColumnHeader")+t.column.headerText)}return o},r.prototype.appendHtml=function(t,e,i){return void 0===i&&(i="innerHTML"),t[i]=e,t},r.prototype.setAttributes=function(t,e,i){var n=e.column;this.buildAttributeFromCell(t,e,"checkbox"===n.type),kf(t,i),kf(t,e.attributes),n.customAttributes&&kf(t,n.customAttributes),"Vertical"===this.parent.rowRenderingMode&&kf(t,{"data-cell":n.headerText}),n.textAlign&&(t.style.textAlign=n.textAlign),"Clip"===n.clipMode||!n.clipMode&&"Clip"===this.parent.clipMode?t.classList.add("e-gridclip"):("EllipsisWithTooltip"===n.clipMode||!n.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==n.type&&t.classList.add("e-ellipsistooltip")},r.prototype.buildAttributeFromCell=function(t,e,i){var n={},o=[];e.colSpan&&(n.colSpan=e.colSpan),e.rowSpan&&(n.rowSpan=e.rowSpan),e.isTemplate&&o.push("e-templatecell"),e.isSelected&&(o.push.apply(o,["e-selectionbackground","e-active"]),i&&t.querySelector(".e-frame").classList.add("e-check")),e.isColumnSelected&&o.push.apply(o,["e-columnselection"]),e.cellType===Ot.Header?(n["data-colindex"]=e.colIndex,n[fse]=e.colIndex+1):f(e.index)||(n["data-colindex"]=e.index,n[fse]=e.index+1),e.visible||o.push("e-hide"),n.class=o,kf(t,n)},r.prototype.getValue=function(t,e,i){return i.valueAccessor(t,e,i)},r}(),fO=function(){function r(){}return r.prototype.setOptions=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++)HS(t,VS[i[n]],e[i[n]])},r.prototype.setExpand=function(t,e){HS(t,VS.expand,e)},r.prototype.setSort=function(t,e){HS(t,VS.sort,e,"boolean"==typeof e)},r.prototype.setBusy=function(t,e){HS(t,VS.busy,e),HS(t,VS.invalid,null,!0)},r.prototype.setGrabbed=function(t,e,i){HS(t,VS.grabbed,e,i)},r.prototype.setDropTarget=function(t,e){HS(t,VS.dropeffect,"copy",!e)},r}();function HS(r,t,e,i){i&&r?r.removeAttribute(t):r&&r.setAttribute(t,e)}var VS={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},jTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),vse=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell",attrs:{role:"columnheader",tabindex:"-1"}}),e.ariaService=new fO,e.hTxtEle=e.parent.createElement("span",{className:"e-headertext"}),e.sortEle=e.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),e.gui=e.parent.createElement("div"),e.chkAllBox=e.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":e.localizer.getConstant("CheckBoxLabel")}}),e}return jTe(t,r),t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,s,o)},t.prototype.refresh=function(e,i){this.clean(i);var n=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(e,i,n)},t.prototype.clean=function(e){e.innerHTML=""},t.prototype.prepareHeader=function(e,i,n){var h,s=e.column,o={},a="",l=this.getGui();if(ze(l,{"e-mappinguid":s.uid,class:"e-headercelldiv"}),f(s.headerValueAccessor)||(h=this.getValue(s.headerText,s)),"checkbox"!==s.type){var u=s.headerText;f(h)||(u=h);var d=this.hTxtEle.cloneNode();d[s.getDomSetter()]=u,l.appendChild(d)}else{s.editType="booleanedit";var m=Zb(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+s.uid,m.insertBefore(this.chkAllBox.cloneNode(),m.firstChild),this.parent.cssClass&&N([m],[this.parent.cssClass]),l.appendChild(m),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(i,e),this.appendHtml(i,l),i.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&s.allowFiltering&&!f(s.field)&&(!this.parent.showColumnMenu||!s.showColumnMenu)){ze(n,{"e-mappinguid":"e-flmenu-"+s.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),i.classList.add("e-fltr-icon");var v=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==v.length)for(var C=this.parent.getForeignKeyColumns(),S=0;S<this.parent.columns.length;S++)for(var A=0;A<this.parent.filterSettings.columns.length;A++)if(this.parent.filterSettings.columns[A].field===s.field||C.length&&s.foreignKeyValue===this.parent.filterSettings.columns[A].field){n.classList.add("e-filtered"),v.push(s.field);break}i.appendChild(n.cloneNode())}e.className&&i.classList.add(e.className),s.customAttributes&&kf(i,s.customAttributes),this.parent.allowSorting&&s.allowSorting&&(o.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&s.allowGrouping||this.parent.allowReordering&&s.allowReordering)&&(o.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),i=this.extendPrepareHeader(s,i);var _,M=this.parent,P=M.getColumnIndexByField(s.field);if(!f(s.headerTemplate)){var B=M.element.id+s.uid+"headerTemplate",j="isStringTemplate",G=s;if(this.parent.isReact&&"string"!=typeof s.headerTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact){var Ee={index:P};i.firstElementChild.innerHTML="",s.getHeaderTemplate()(he(Ee,G),M,"headerTemplate",B,this.parent[j],null,i.firstElementChild),this.parent.renderTemplates()}else _=s.getHeaderTemplate()(he({index:P},G),M,"headerTemplate",B,this.parent[j],void 0,void 0,this.parent.root),i.firstElementChild.innerHTML="",ca(i.firstElementChild,_)}if(this.ariaService.setOptions(i,o),!f(s.headerTextAlign)||!f(s.textAlign)){var Pe=s.headerTextAlign||s.textAlign;l.style.textAlign=Pe,"Right"===Pe||"Left"===Pe?i.classList.add("Right"===Pe?"e-rightalign":"e-leftalign"):"Center"===Pe&&i.classList.add("e-centeralign")}return"Clip"===s.clipMode||!s.clipMode&&"Clip"===this.parent.clipMode?i.classList.add("e-gridclip"):("EllipsisWithTooltip"===s.clipMode||!s.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&"checkbox"!==s.type&&i.classList.add("e-ellipsistooltip"),a&&i.setAttribute("aria-description",a),i.setAttribute("aria-rowspan",(f(e.rowSpan)?1:e.rowSpan).toString()),i.setAttribute("aria-colspan","1"),this.parent.trigger(mre,{cell:e,node:i}),i},t.prototype.getValue=function(e,i){return i.headerValueAccessor(e,i)},t.prototype.extendPrepareHeader=function(e,i){if(this.parent.showColumnMenu&&e.showColumnMenu&&!f(e.field)){var n=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),s=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==s.length)for(var o=0;o<this.parent.columns.length;o++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[a].field===e.field){n.classList.add("e-filtered"),s.push(e.field);break}i.classList.add("e-fltr-icon"),i.appendChild(n)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",i.appendChild(l)}return i},t.prototype.appendHtml=function(e,i){return e.appendChild(i),e},t}(fh),UTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),yse=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{role:"columnheader",tabindex:"-1"}}),e}return UTe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode(),o=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":e.column.uid}}),a=e.column;if(s.appendChild(o),f(a.headerTemplate)?this.appendHtml(o,a.headerText,a.getDomSetter()):ca(o,a.getHeaderTemplate()(a,this.parent,"headerTemplate")),e.column.toolTip&&s.setAttribute("title",e.column.toolTip),"Clip"===a.clipMode||!a.clipMode&&"Clip"===this.parent.clipMode?s.classList.add("e-gridclip"):("EllipsisWithTooltip"===a.clipMode||!a.clipMode&&"EllipsisWithTooltip"===this.parent.clipMode)&&s.classList.add("e-ellipsistooltip"),f(e.column.textAlign)||(o.style.textAlign=e.column.textAlign),e.column.customAttributes&&kf(s,e.column.customAttributes),s.setAttribute("colspan",e.colSpan.toString()),s.setAttribute("aria-colspan",e.colSpan.toString()),s.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=e.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",s.appendChild(l)}return e.className&&s.classList.add(e.className),this.parent.trigger(mre,{cell:e,node:s}),s},t}(fh),WTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),TG=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-indentcell"}),e}return WTe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return kf(n,e.attributes),n},t}(fh),bse=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qTe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.cellUid=0,e.element=e.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:e.parent.element.id+"captioncell",role:"gridcell",tabindex:"-1"}}),e}return bse(t,r),t.prototype.render=function(e,i){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var o,a,l,n=this.element.cloneNode(),s=this.parent;i.headerText=e.column.headerText,e.isForeignKey&&(a=this.format(e.column,e.column.valueAccessor("foreignKey",i,e.column)));for(var h=e.isForeignKey?a:e.column.enableGroupByFormat?i.key:this.format(e.column,e.column.valueAccessor("key",i,e.column)),u=0;u<s.aggregates.length;u++)for(var d=0;d<s.aggregates[u].columns.length;d++)if(s.getVisibleColumns()[0].field===s.aggregates[u].columns[d].field&&s.aggregates[u].columns[d].groupCaptionTemplate){l=s.aggregates[u].columns[d].groupCaptionTemplate.includes("$")?s.aggregates[u].columns[d].groupCaptionTemplate.split("$")[0]+i[s.getVisibleColumns()[0].field][s.aggregates[u].columns[d].type]+s.aggregates[u].columns[d].groupCaptionTemplate.split("}")[1]:s.aggregates[u].columns[d].groupCaptionTemplate;break}if(f(s.groupSettings.captionTemplate))n.innerHTML=s.groupSettings.enableLazyLoading?e.column.headerText+": "+h+(l?"   "+l:""):e.column.headerText+": "+h+" - "+i.count+" "+this.localizer.getConstant(i.count<2?"Item":"Items")+(l?"   "+l:"");else{var m=this.parent.isReact&&"string"!=typeof s.groupSettings.captionTemplate,v=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(m||v){var C=s.element.id+"captionTemplate";bl(s.groupSettings.captionTemplate)(i,this.parent,"captionTemplate",C,null,null,n),this.parent.renderTemplates()}else o=this.parent.isVue?bl(s.groupSettings.captionTemplate)(i,this.parent):bl(s.groupSettings.captionTemplate)(i);!m&&!v&&ca(n,o)}return n.setAttribute("colspan",e.colSpan.toString()),n.setAttribute("aria-label",n.innerHTML+this.localizer.getConstant("GroupCaption")),n.setAttribute("title",n.innerHTML),n},t}(fh),GTe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-groupcaption"}),e}return bse(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.innerHTML="&nbsp;",n.setAttribute("colspan",e.colSpan.toString()),n},t}(fh),KTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),$Te=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return KTe(t,r),t.prototype.render=function(e,i,n,s){var o=this.element.cloneNode();return o.setAttribute("ej-mappingname",i.field),o.setAttribute("ej-mappingvalue",i.key),o.setAttribute("aria-expanded",s?"true":"false"),o.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache?(e.cellType=Ot.Indent,o.className=s?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(o.className=s?"e-recordplusexpand":"e-recordpluscollapse",o.appendChild(this.parent.createElement("a",{className:s?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:s?"expanded":"collapsed"}}))),o},t}(TG),YTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ZTe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-grouptopleftcell"}),e}return YTe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),n},t}(fh),XTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),QTe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-detailheadercell"}),e}return XTe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),n},t}(fh),JTe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),eDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",role:"gridcell",tabindex:"-1"}}),e}return JTe(t,r),t.prototype.render=function(e,i,n){var s=this.element.cloneNode();return n&&!f(n.class)?(s.className="",s.className=n.class,s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"javascript:void(0);",title:"expanded"}}))):s.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"javascript:void(0);",title:"collapsed"}})),s},t}(fh),tDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),iDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{role:"gridcell",tabindex:"-1"}}),e}return tDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),e.isSelected&&(n.classList.add("e-selectionbackground"),n.classList.add("e-active")),n},t}(fh),nDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),rDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.element=e.parent.createElement("TH",{className:"e-rowdragheader"}),e}return nDe(t,r),t.prototype.render=function(e,i){var n=this.element.cloneNode();return n.appendChild(ti("div",{className:"e-emptycell"})),n},t}(fh),sDe=function(){function r(t,e){this.emptyGrid=!1,this.counter=0,this.parent=t,this.locator=e,this.data=new QV(t,e),this.l10n=e.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return r.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(zs.Header),this.contentRenderer=this.renderer.getRenderer(zs.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),"auto"!==this.parent.height&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},r.prototype.refresh=function(t){var e=this;void 0===t&&(t={requestType:"refresh"});var i=this.parent;i.notify(t.requestType+"-begin",t),i.trigger(dr,t,function(n){if(void 0===n&&(n={requestType:"refresh"}),n.cancel)i.notify(HV,n);else{if("delete"===n.requestType&&i.allowPaging){var s=n.data.length,o=i.pageSettings.totalRecordsCount-s;!(i.getCurrentViewRecords().length-s)&&o&&(i.pageSettings.currentPage-1)*i.pageSettings.pageSize===o&&(i.prevPageMoving=!0,i.setProperties({pageSettings:{totalRecordsCount:o,currentPage:Math.ceil(o/i.pageSettings.pageSize)}},!0),i.pagerModule.pagerObj.totalRecordsCount=o)}"reorder"===n.requestType&&e.parent.dataSource&&"result"in e.parent.dataSource||("paging"===n.requestType||"columnstate"===n.requestType||"reorder"===n.requestType)&&e.parent.groupSettings.enableLazyLoading&&e.parent.groupSettings.columns.length&&e.parent.contentModule.getGroupCache()[e.parent.pageSettings.currentPage]?e.contentRenderer.refreshContentRows(n):e.refreshDataManager(n)}})},r.prototype.resetTemplates=function(){var t=this.parent,e=t.getColumns();if(t.detailTemplate){var i=t.element.id+"detailTemplate";xd[i]=[],Ic(i)}t.groupSettings.captionTemplate&&Ic(t.element.id+"captionTemplate"),t.rowTemplate&&Ic(t.element.id+"rowTemplate"),t.toolbarTemplate&&Ic(t.element.id+"toolbarTemplate"),t.pageSettings.template&&Ic(t.element.id+"_template");for(var n=0;n<e.length;n++)e[n].template&&(xd[t.element.id+e[n].uid]=[],Ic(t.element.id+e[n].uid)),e[n].headerTemplate&&Ic(t.element.id+e[n].uid+"headerTemplate"),e[n].filterTemplate&&Ic(t.element.id+e[n].uid+"filterTemplate");for(var s="guid",o=0;o<t.aggregates.length;o++)for(var a=0;a<t.aggregates[o].columns.length;a++)t.aggregates[o].columns[a].footerTemplate&&Ic(t.element.id+t.aggregates[o].columns[a][s]+"footerTemplate"),t.aggregates[o].columns[a].groupFooterTemplate&&Ic(t.element.id+t.aggregates[o].columns[a][s]+"groupFooterTemplate"),t.aggregates[o].columns[a].groupCaptionTemplate&&Ic(t.element.id+t.aggregates[o].columns[a][s]+"groupCaptionTemplate")},r.prototype.refreshComplete=function(t){this.parent.trigger(zi,t)},r.prototype.refreshDataManager=function(t){var e=this;void 0===t&&(t={});var i=this.parent,n="Shimmer"===i.loadingIndicator.indicatorType&&"virtualscroll"!==t.requestType&&"infiniteScroll"!==t.requestType||("virtualscroll"===t.requestType||"infiniteScroll"===t.requestType)&&i.enableVirtualMaskRow;"virtualscroll"!==t.requestType&&!t.isCaptionCollapse&&!n&&this.parent.showSpinner(),n&&i.showMaskRow("virtualscroll"===t.requestType?t.virtualInfo.sentinelInfo.axis:"infiniteScroll"===t.requestType?t.direction:void 0),this.parent.notify("reset-infinite-blocks",t),this.emptyGrid=!1;var s,o=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+as),!0),o){var a=new ul;s=this.getFData(a,t)}if(s=s?s.then(function(h){var u=e.data.generateQuery().requiresCount();if(e.emptyGrid){var d=new ul;return d.resolve({result:[],count:0}),d.promise}return e.data.getData(t,u)}):this.data.getData(t,this.data.generateQuery().requiresCount()),this.parent.getForeignKeyColumns().length&&(!o||this.parent.searchSettings.key.length)){var l=new ul;s=s.then(function(h){return e.parent.notify(BV,{dataManager:s,result:h,promise:l,action:t}),l.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(s=s.then(function(h){return e.validateGroupRecords(h)})),s.then(function(h){return e.dataManagerSuccess(h,t)}).catch(function(h){return e.dataManagerFailure(h,t)})},r.prototype.getFData=function(t,e){return this.parent.notify(BV,{isComplex:!0,promise:t,action:e}),t.promise},r.prototype.isNeedForeignAction=function(){var t=this.parent;return!!(t.allowFiltering&&t.filterSettings.columns.length||t.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},r.prototype.foreignKey=function(t){var e=this;return t.some(function(i){return!(!e.parent.filterSettings.columns.some(function(s){return i.uid===s.uid})&&!e.parent.searchSettings.key.length)})},r.prototype.sendBulkRequest=function(t){var e=this;t.requestType="batchsave";var i=this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original),n=this.data.generateQuery().requiresCount();this.data.dataManager.dataSource.offline?this.refreshDataManager({requestType:"batchsave"}):i.then(function(s){e.data.getData(t,n).then(function(o){return e.dmSuccess(o,t)}).catch(function(o){return e.dmFailure(o,t)})}).catch(function(s){return e.dmFailure(s,t)})},r.prototype.dmSuccess=function(t,e){this.dataManagerSuccess(t,e)},r.prototype.dmFailure=function(t,e){this.dataManagerFailure(t,e)},r.prototype.renderEmptyRow=function(){this.emptyRow(!0)},r.prototype.emptyRow=function(t){var e=this.parent,i=this.contentRenderer.getTable().querySelector(rt);f(i)||Be(i),i=this.parent.createElement(rt,{attrs:{role:"rowgroup"}});var n=0;(e.detailTemplate||e.childGrid)&&++n;var s=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}});s.appendChild(this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(e.getVisibleColumns().length+n+e.groupSettings.columns.length).toString()}})),i.appendChild(s),this.contentRenderer.renderEmpty(i),t&&(this.parent.trigger(ph,{}),this.parent.notify(Yd,{rows:[new If({isDataRow:!0,cells:[new ec({isDataCell:!0,visible:!0})]})]}))},r.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},r.prototype.updateColumnType=function(t){for(var i,e=this.parent.getColumns(),n="customFormat",s="equalTo",o=t&&t.items?t.items[0]:t,a=this.locator.getService("valueFormatter"),l=0,h=e.length;l<h;l++){i=vs(e[l].field||"",o),f(e[l][n])||(e[l].format=e[l][n]),!f(e[l].validationRules)&&!f(e[l].validationRules[s])&&(e[l].validationRules[s][0]=this.parent.element.id+e[l].validationRules[s][0]),e[l].isForeignColumn()&&e[l].columnData&&(i=vs(e[l].foreignKeyValue||"",e[l].columnData[0])),f(i)?e[l].type=e[l].type||null:(this.isColTypeDef=!0,e[l].type||(e[l].type=i.getDay?i.getHours()>0||i.getMinutes()>0||i.getSeconds()>0||i.getMilliseconds()>0?"datetime":"date":typeof i));var u=new _S;e[l].format&&(e[l].format.skeleton||e[l].format.format&&"string"==typeof e[l].format.format)&&(e[l].setFormatter(u.getFormatFunction(he({},e[l].format))),e[l].setParser(u.getParserFunction(e[l].format))),"string"==typeof e[l].format?Pse(this.locator,e[l]):!e[l].format&&"number"===e[l].type&&e[l].setParser(a.getParserFunction({format:"n2"}))}},r.prototype.dataManagerSuccess=function(t,e){var i=this,n=this.parent;this.contentRenderer=this.renderer.getRenderer(zs.Content),this.headerRenderer=this.renderer.getRenderer(zs.Header),t.actionArgs=e;var s=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!n.groupSettings.enableLazyLoading&&("delete"===e.requestType||"save"===e.requestType&&"add"===this.parent.infiniteScrollModule.requestType&&!(n.sortSettings.columns.length||n.filterSettings.columns.length||this.parent.groupSettings.columns.length||n.searchSettings.key));n.trigger(LV,t,function(o){if(!o.cancel){o.result=f(o.result)?[]:o.result;var a=Object.keys(o.result).length;if(!i.parent.isDestroyed){if(!(n.getColumns().length||a||n.columns.length&&n.columns[0]instanceof Mh))return void n.hideSpinner();if(i.isInfiniteEnd(e)&&!a)return void i.parent.notify(GV,{e,result:t.result,count:t.count,agg:t.aggregates});if(i.parent.isEdit=!1,i.parent.notify("edit-reset",{}),i.parent.notify(MS,{}),e&&"infiniteScroll"!==e.requestType&&i.parent.notify("commandColumnDestroy",{type:"refreshCommandColumn"}),i.contentRenderer.prevCurrentView=i.parent.currentViewData.slice(),n.currentViewData=o.result,n.notify("refresh-infinite-current-view-data",{args:e,data:o.result}),o.count&&!n.allowPaging&&(n.enableVirtualization||n.enableInfiniteScrolling)&&(n.totalDataRecordsCount=o.count),!a&&o.count&&n.allowPaging&&e&&"delete"!==e.requestType)return i.parent.groupSettings.enableLazyLoading&&("grouping"===e.requestType||"ungrouping"===e.requestType)&&i.parent.notify(M8,e),n.prevPageMoving=!0,n.pageSettings.totalRecordsCount=o.count,"paging"!==e.requestType&&(n.pageSettings.currentPage=Math.ceil(o.count/n.pageSettings.pageSize)),void n.dataBind();if((!n.getColumns().length&&a||!i.isLayoutRendered)&&!ws(n)&&(n.removeMaskRow(),i.updatesOnInitialRender(o)),!i.isColTypeDef&&n.getCurrentViewRecords()&&i.updateColumnType(i.data.dataManager.dataSource.offline&&n.dataSource&&n.dataSource.length?n.dataSource[0]:n.getCurrentViewRecords()[0]),!i.parent.isInitialLoad&&i.parent.groupSettings.disablePageWiseAggregates&&!i.parent.groupSettings.columns.length&&(o.result=i.parent.dataSource instanceof Array?i.parent.dataSource:i.parent.currentViewData),(i.parent.isReact||i.parent.isVue)&&!f(e)&&"infiniteScroll"!==e.requestType&&!e.isFrozen&&TO(i.parent,["footerTemplate"]),i.parent.isAngular&&i.parent.allowGrouping&&i.parent.groupSettings.captionTemplate&&!(!f(e)&&"infiniteScroll"===e.requestType)&&i.parent.destroyTemplate(["groupSettings_captionTemplate"]),i.parent.notify(jc,he({count:o.count,result:o.result,aggregates:o.aggregates},e)),(n.groupSettings.columns.length||e&&"ungrouping"===e.requestType)&&e&&"filtering"!==e.requestType&&i.headerRenderer.refreshUI(),a)ws(n)&&(e.scrollTop={top:i.contentRenderer.content.scrollTop}),s?i.parent.notify(GV,{e,result:t.result,count:t.count,agg:t.aggregates}):i.parent.enableImmutableMode?i.contentRenderer.immutableModeRendering(e):i.contentRenderer.refreshContentRows(e);else{if(e&&e.isCaptionCollapse)return;if(!n.getColumns().length)return n.element.innerHTML="",void alert(i.l10n.getConstant("EmptyDataSourceError"));if(i.contentRenderer.setRowElements([]),i.contentRenderer.setRowObjects([]),i.ariaService.setBusy(i.parent.getContent().querySelector("."+as),!1),n.removeMaskRow(),i.renderEmptyRow(),e){var h=(e.requestType||"").toLowerCase()+"-complete";i.parent.notify(h,e),"batchsave"===e.requestType&&(e.cancel=!1,e.rows=[],e.isFrozen=0!==i.parent.getFrozenColumns()&&!e.isFrozen,i.parent.trigger(zi,e))}i.parent.hideSpinner()}i.parent.notify(qv,{}),i.setRowCount(i.parent.getCurrentViewRecords().length),"query"in t&&(i.parent.getDataModule().isQueryInvokedFromData=!1)}}})},r.prototype.dataManagerFailure=function(t,e){this.ariaService.setOptions(this.parent.getContent().querySelector("."+as),{busy:!1,invalid:!0}),this.setRowCount(1),this.parent.trigger(xD,{error:t}),this.parent.hideSpinner(),this.parent.removeMaskRow(),"save"!==e.requestType&&"delete"!==e.requestType&&"bulk-save"!==e.name&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:t}))},r.prototype.setRowCount=function(t){this.ariaService.setOptions(this.parent.getHeaderTable(),{rowcount:t?t.toString():"1"})},r.prototype.isInfiniteEnd=function(t){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&"delete"===t.requestType},r.prototype.updatesOnInitialRender=function(t){this.isLayoutRendered=!0,this.parent.columns.length<1&&this.buildColumns(t.result[0]),ND(this.parent.columns,null,this.parent),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(PS,{})},r.prototype.iterateComplexColumns=function(t,e,i){for(var n=Object.keys(t),s=0;s<n.length;s++)("object"!=typeof t[n[s]]||!t[n[s]]||t[n[s]]instanceof Date?[]:Object.keys(t[n[s]])).length?this.iterateComplexColumns(t[n[s]],e+(n[s]+"."),i):(i[this.counter]=e+n[s],this.counter++)},r.prototype.buildColumns=function(t){var e=[],i={};this.iterateComplexColumns(t,"",i);for(var n=Object.keys(i).filter(function(a){return"BlazId"!==i[a]}).map(function(a){return i[a]}),s=0,o=n.length;s<o;s++)e[s]={field:n[s]},this.parent.enableColumnVirtualization&&(e[s].width=f(e[s].width)?200:e[s].width);this.parent.setProperties({columns:e},!0)},r.prototype.instantiateRenderer=function(){this.renderer.addRenderer(zs.Header,new xG(this.parent,this.locator)),this.renderer.addRenderer(zs.Content,new pO(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(Ot.Header,new vse(this.parent,this.locator)),t.addCellRenderer(Ot.Data,new fh(this.parent,this.locator)),t.addCellRenderer(Ot.StackedHeader,new yse(this.parent,this.locator)),t.addCellRenderer(Ot.Indent,new TG(this.parent,this.locator)),t.addCellRenderer(Ot.GroupCaption,new qTe(this.parent,this.locator)),t.addCellRenderer(Ot.GroupCaptionEmpty,new GTe(this.parent,this.locator)),t.addCellRenderer(Ot.Expand,new $Te(this.parent,this.locator)),t.addCellRenderer(Ot.HeaderIndent,new ZTe(this.parent,this.locator)),t.addCellRenderer(Ot.StackedHeader,new yse(this.parent,this.locator)),t.addCellRenderer(Ot.DetailHeader,new QTe(this.parent,this.locator)),t.addCellRenderer(Ot.RowDragHIcon,new rDe(this.parent,this.locator)),t.addCellRenderer(Ot.DetailExpand,new eDe(this.parent,this.locator)),t.addCellRenderer(Ot.DetailFooterIntent,new TG(this.parent,this.locator)),t.addCellRenderer(Ot.RowDragIcon,new iDe(this.parent,this.locator))},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(this.parent.on(Df,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(zo,this.refresh,this),this.parent.on("refresh-complete",this.refreshComplete,this),this.parent.on("bulk-save",this.sendBulkRequest,this),this.parent.on(zre,function(){t.emptyGrid=!0},this),this.parent.on(PS,this.dynamicColumnChange,this))},r.prototype.validateGroupRecords=function(t){var e=this,i=t.result.length-1;if(i<0)return Promise.resolve(t);var n=t.result[0],s=t.result[i],o=[],a=function(A){for(var _=[n,s],M=0;M<_.length;M++)o.push(new kn("field","==",_[M].field).and(e.getPredicate("key","equal",_[M].key)));A.where(kn.or(o))},l=new ii;a(l);var u=new Qe(t.result).executeLocal(l),d=this.data.generateQuery(!0),m=[];if(this.data.isRemote()){for(var v=[n,s],C=0;C<v.length;C++)m.push(this.getPredicate(v[C].field,"equal",v[C].key));d.where(kn.or(m))}else a(d);var S=new ul;return this.data.getData({},d).then(function(A){e.updateGroupInfo(u,A.result),S.resolve(t)}).catch(function(A){return S.reject(A)}),S.promise},r.prototype.getPredicate=function(t,e,i){return i instanceof Date?EC({field:t,operator:e,value:i}):new kn(t,e,i)},r.prototype.updateGroupInfo=function(t,e){for(var i=new Qe(e),n=t,s=0;s<n.length;s++){var o=i.executeLocal((new ii).where(new kn("field","==",n[s].field).and(this.getPredicate("key","equal",n[s].key))))[0];n[s].count=o.count;var a=n[s].items,l=o.items;a.GroupGuid&&(n[s].items=this.updateGroupInfo(n[s].items,o.items));for(var h=this.parent.aggregates,u=0;u<h.length;u++)for(var d=h[u],m=0;m<d.columns.length;m++)for(var v=d.columns[m].type instanceof Array?d.columns[m].type:[d.columns[m].type],C=0;C<v.length;C++){var S=d.columns[m].field+" - "+v[C].toLowerCase(),A=a.level?l.records:o.items,_=this.parent;if("Custom"===v[C]){var M=a.level?l:o,P=d.columns[m].customAggregate;"string"==typeof P&&(P=Q(P,window)),n[s].aggregates[S]=P?P.call(_,M,d.columns[m]):""}else n[s].aggregates[S]=qe.aggregates[v[C].toLowerCase()](A,d.columns[m].field)}}return t},r}(),oDe=function(){function r(){this.cellRenderMap={}}return r.prototype.addCellRenderer=function(t,e){t="string"==typeof t?t:hl(Ot,t),f(this.cellRenderMap[t])&&(this.cellRenderMap[t]=e)},r.prototype.getCellRenderer=function(t){if(t="string"==typeof t?t:hl(Ot,t),f(this.cellRenderMap[t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[t]},r}(),Cse=function(){function r(t,e){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.evtHandlers=[{event:KV,handler:this.closeCustomDialog},{event:cG,handler:this.refreshCustomFilterOkBtn},{event:"render-responsive-cmenu",handler:this.renderResponsiveContextMenu},{event:"filter-cmenu-select",handler:this.renderCustomFilterDiv},{event:"custom-filter-close",handler:this.customExFilterClose},{event:"refresh-cutsom-filter-clear-button",handler:this.refreshCustomFilterClearBtn}],uo(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(zi,this.onActionCompleteFn)},r.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},r.prototype.renderCustomFilterDiv=function(){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),e=t.querySelector(".e-dlg-custom-header"),i=t.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",i.style.display="",e.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var n=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),n.appendChild(this.customExcelFilterParent)},r.prototype.renderResponsiveContextMenu=function(t){if(this.action===rr.isFilter){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),i=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),n=i.querySelector(".e-dlg-closeicon-btn"),s=i.querySelector(".e-dlg-custom-header");if(t.isOpen){e.firstChild.style.display="none",e.appendChild(t.target),n.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",s.innerHTML=t.header;var o=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});o.appendChild(a),this.backBtn=new tS({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(o),s.parentElement.insertBefore(o,s)}else this.backBtn&&!this.isCustomDlgRender&&(e.firstChild.style.display="",Be(this.backBtn.element),n.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),s.innerHTML=this.getHeaderTitle({action:rr.isFilter},t.col))}},r.prototype.refreshCustomFilterClearBtn=function(t){this.filterClearBtn&&(this.isFiltered=t.isFiltered,this.filterClearBtn.element.style.display=t.isFiltered?"":"none")},r.prototype.refreshCustomFilterOkBtn=function(t){this.saveBtn&&(this.saveBtn.disabled=t.disabled)},r.prototype.renderResponsiveContent=function(t){var e=this,i=this.parent;if(t)return this.filterParent=this.parent.createElement("div",{className:"e-mainfilterdiv e-default-filter",id:t.uid+"-main-filter"}),this.filterParent;var n=i.getColumns();this.customColumnDiv=i.createElement("div",{className:"columndiv",styles:"width: 100%"});var s=i.createElement("div",{className:"e-ressortbutton-parent"}),o=[],a=this.action===rr.isSort,l=this.action===rr.isFilter;if(l)for(var h=0;h<i.filterSettings.columns.length;h++)o.push(i.filterSettings.columns[h].field);for(h=0;h<n.length;h++)if(!(!n[h].visible||!n[h].allowSorting&&a||!n[h].allowFiltering&&l)){var u=i.createElement("div",{className:"e-responsivecoldiv"});u.setAttribute("data-e-mappingname",n[h].field),u.setAttribute("data-e-mappinguid",n[h].uid);var d=i.createElement("span",{innerHTML:n[h].headerText,className:"e-res-header-text"});if(u.appendChild(d),this.customColumnDiv.appendChild(u),a){var v=this.getSortedFieldsAndDirections("field").indexOf(n[h].field),C=i.createElement("button",{id:i.element.id+n[h].field+"sortbutton"}),S=s.cloneNode();S.appendChild(C),u.appendChild(S),new tS({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"}).appendTo(C);var _=void 0;f(this.parent.sortSettings.columns[v])||(_=this.parent.localeObj.getConstant("Ascending"===this.parent.sortSettings.columns[v].direction?"AscendingText":"DescendingText")),C.innerHTML=v>-1?_:this.parent.localeObj.getConstant("NoneText"),C.onclick=function(j){e.sortButtonClickHandler(j.target)}}if(l&&o.indexOf(n[h].field)>-1){var M=i.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),P=i.createElement("span",{className:"e-icons e-res-icon e-filterset"});P.setAttribute("colType",n[h].type),M.appendChild(P),u.appendChild(M)}}return T.add(this.customColumnDiv,"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},r.prototype.getSortedFieldsAndDirections=function(t){for(var e=[],i=0;i<this.parent.sortSettings.columns.length;i++)e.push(this.parent.sortSettings.columns[i][t]);return e},r.prototype.sortButtonClickHandler=function(t){if(t){var i=pe(t,"e-responsivecoldiv").getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(t));var n=t.textContent,s=n===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):n===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),o=s===this.parent.localeObj.getConstant("AscendingText")?"Ascending":s===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";t.innerHTML=s,this.setSortedCols(i,o)}},r.prototype.resetSortButtons=function(t){for(var e=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),i=0;i<e.length;i++)e[i]!==t&&(e[i].innerHTML="None")},r.prototype.setSortedCols=function(t,e){var n=this.getCurrentSortedFields().indexOf(t);this.parent.allowMultiSorting&&n>-1&&(this.sortedCols.splice(n,1),this.sortPredicate.splice(n,1)),this.isSortApplied=!0,"None"!==e&&(this.sortedCols.push(t),this.sortPredicate.push({field:t,direction:e}))},r.prototype.getCurrentSortedFields=function(){for(var t=[],e=0;e<this.sortedCols.length;e++)t.push(this.sortedCols[e]);return t},r.prototype.customFilterColumnClickHandler=function(t){if(this.action===rr.isFilter){var e=this.parent,i=t.target;if("FilterBar"!==e.filterSettings.type)if(i.classList.contains("e-responsivecoldiv")||i.parentElement.classList.contains("e-responsivecoldiv")){if((n=i.getAttribute("data-e-mappingname"))||(n=i.parentElement.getAttribute("data-e-mappingname")),n){var s=e.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(i.classList.contains("e-filterset")||i.parentElement.classList.contains("e-filtersetdiv")){var o=pe(i,"e-responsivecoldiv");if(o){var n=o.getAttribute("data-e-mappingname");("Menu"===(s=e.getColumnByField(n)).filter.type||!s.filter.type&&"Menu"===e.filterSettings.type)&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(i)}}}},r.prototype.showResponsiveDialog=function(t){if(this.isCustomDialog&&this.action===rr.isFilter&&!this.isRowResponsive)this.renderCustomFilterDialog();else{if(this.filteredCol=t,this.renderResponsiveDialog(t),this.parent.enableAdaptiveUI&&t&&(this.parent.filterModule.setFilterModel(t),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(t,void 0))),this.action===rr.isSort){var e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Sre,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},r.prototype.setTopToChildDialog=function(t){var e=t.querySelector(".e-dialog");if(e){var i=t.querySelector(".e-dlg-header-content").getBoundingClientRect().height;e.style.top=i+"px"}},r.prototype.renderCustomFilterDialog=function(t){var e=this.parent;if(this.action!==rr.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.parent.createElement("div",{id:e.element.id+"customfilter",className:this.parent.cssClass?"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(i),this.customFilterDlg=this.getDialogOptions(t,!0);var n={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Sre,n),!n.cancel&&(this.customFilterDlg.appendTo(i),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},r.prototype.getDialogOptions=function(t,e,i){var n=new _d({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(t),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""});return n.isStringTemplate=!0,e?(n.header=this.renderResponsiveHeader(t,void 0,!0),n.cssClass="e-customfilter"):(n.header=this.renderResponsiveHeader(t),n.cssClass="Vertical"===this.parent.rowRenderingMode&&this.action===rr.isFilter?"e-res"+i+" e-row-responsive-filter":"e-res"+i),n},r.prototype.renderResponsiveDialog=function(t){var e=this.parent;if(this.action!==rr.isFilter||"FilterBar"!==e.filterSettings.type){var i=this.action===rr.isFilter?"filter":"sort",n=this.parent.createElement("div",{id:e.element.id+"responsive"+i,className:this.parent.cssClass?"e-res"+i+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+i+"div e-responsive-dialog"});this.parent.element.appendChild(n),this.customResponsiveDlg=this.getDialogOptions(t,!1,i),this.customResponsiveDlg.appendTo(n)}},r.prototype.dialogCreated=function(){jse(this.parent)},r.prototype.dialogOpen=function(){if(this.action===rr.isSort&&this.parent.allowMultiSorting)for(var t=0;t<this.parent.sortSettings.columns.length;t++)this.sortedCols.push(this.parent.sortSettings.columns[t].field),this.sortPredicate.push({field:this.parent.sortSettings.columns[t].field,direction:this.parent.sortSettings.columns[t].direction})},r.prototype.beforeDialogClose=function(t){this.isDialogClose=t.element&&!t.element.querySelector(".e-xl-customfilterdiv")&&t.element.classList.contains("e-resfilterdiv"),this.action===rr.isFilter?t.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):t.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter():this.action===rr.isSort&&this.closeCustomDialog(),this.parent.off($V,this.keyHandler)},r.prototype.sortColumn=function(){if(this.isSortApplied){this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var t=0;t<this.sortPredicate.length;t++)this.parent.sortColumn(this.sortPredicate[t].field,this.sortPredicate[t].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()}else this.closeCustomDialog()},r.prototype.getHeaderTitle=function(t,e){var n,i=this.parent;return this.action===rr.isEdit?n=i.localeObj.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.action===rr.isAdd?n=i.localeObj.getConstant("AddFormTitle"):this.action===rr.isFilter?n=e?e.headerText||e.field:i.localeObj.getConstant("FilterButton"):this.action===rr.isSort&&(n=i.localeObj.getConstant("Sort")),n},r.prototype.getDialogName=function(t){var e;return t===rr.isAdd||t===rr.isEdit?e="dialogEdit_wrapper_title":t===rr.isFilter&&(e="responsive_filter_dialog_wrapper"),e},r.prototype.getButtonText=function(t){var e;return t===rr.isAdd||t===rr.isEdit?e="Save":(t===rr.isFilter||this.action===rr.isSort)&&(e="OKButton"),e},r.prototype.renderResponsiveHeader=function(t,e,i){var n=this,s=this.parent;s.on($V,this.keyHandler,this);var o=s.element.id+this.getDialogName(this.action),a=s.createElement("div",{className:"e-res-custom-element"}),l=s.createElement("div",{className:"e-dlg-custom-header",id:o});l.innerHTML=this.getHeaderTitle(e,t),a.appendChild(l);var h=s.createElement("button");i||(this.saveBtn=new tS({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=s.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(S){n.dialogHdrBtnClickHandler()});var u=this.action===rr.isSort,d=this.action===rr.isFilter;if(d||u){var m=u?"sort":"filter",v=s.createElement("button");if(this.filterClearBtn=new tS({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+m+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+m+"-clear-btn"}),d){var C=s.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});v.appendChild(C)}else v.innerHTML=s.localeObj.getConstant("Clear");a.appendChild(v),this.filterClearBtn.appendTo(v),v.onclick=function(S){pe(S.target,"e-customfilter")?(n.parent.filterModule.clearFiltering(),n.removeCustomDlgFilterEle()):d?n.filterClear():(n.resetSortButtons(),n.sortedCols=[],n.sortPredicate=[],n.isSortApplied=!0)},a.appendChild(v)}return i||a.appendChild(h),a},r.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},r.prototype.dialogHdrBtnClickHandler=function(){this.action===rr.isEdit||this.action===rr.isAdd?this.parent.endEdit():this.action===rr.isFilter?this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}):this.action===rr.isSort&&this.sortColumn()},r.prototype.closeCustomDialog=function(){this.isCustomDlgRender?Be(this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv")):(this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog())},r.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var t=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&t&&(this.customResponsiveDlg.destroy(),Be(t)),this.closeCustomFilter(),this.action===rr.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},r.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var t=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&t&&(this.customFilterDlg.destroy(),Be(t))}this.isCustomDialog=!1,this.isDialogClose=!1},r.prototype.removeCustomDlgFilterEle=function(t){if(t)t.parentElement.classList.contains("e-filtersetdiv")?Be(t.parentElement):Be(t);else for(var e=this.customColumnDiv.children,i=0;i<e.length;i++)(t=e[i].querySelector(".e-filtersetdiv"))&&(Be(t),i--)},r.prototype.keyHandler=function(t){13===t.keyCode&&(this.action===rr.isFilter&&t.target.classList.contains("e-searchinput")||this.action===rr.isEdit||this.action===rr.isAdd)&&this.dialogHdrBtnClickHandler()},r.prototype.editComplate=function(t){("save"===t.requestType||"cancel"===t.requestType)&&this.parent.off($V,this.keyHandler)},r.prototype.removeEventListener=function(){this.customColumnDiv&&T.remove(this.customColumnDiv,"click",this.customFilterColumnClickHandler),uo(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(zi,this.onActionCompleteFn)},r}(),aDe=function(){function r(){this.services={}}return r.prototype.register=function(t,e){f(this.services[t])&&(this.services[t]=e)},r.prototype.getService=function(t){if(f(this.services[t]))throw"The service "+t+" is not registered";return this.services[t]},r.prototype.registerAdaptiveService=function(t,e,i){e?(t.responsiveDialogRenderer=new Cse(t.parent,t.serviceLocator),t.responsiveDialogRenderer.action=i):t.responsiveDialogRenderer&&(t.responsiveDialogRenderer.removeEventListener(),t.responsiveDialogRenderer=void 0)},r}(),lDe=function(){function r(){this.rendererMap={}}return r.prototype.addRenderer=function(t,e){var i=hl(zs,t);f(this.rendererMap[i])&&(this.rendererMap[i]=e)},r.prototype.getRenderer=function(t){var e=hl(zs,t);if(f(this.rendererMap[e]))throw"The renderer "+e+" is not found";return this.rendererMap[e]},r}(),DG=function(){function r(t){this.parent=t}return r.prototype.setWidthToColumns=function(){var n,t=0,e=this.parent.getColumnIndexesInView(),i=!0;if(this.parent.allowGrouping)for(var s=this.parent.groupSettings.columns.length;t<s;t++)this.parent.enableColumnVirtualization&&-1===e.indexOf(t)?i=!1:this.setColumnWidth(new Mh({width:"30px"}),t);(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new Mh({width:"30px"}),t),t++),this.parent.isRowDragable()&&"Right"!==this.parent.getFrozenMode()&&(this.setColumnWidth(new Mh({width:"30px"}),t),t++);for(var o=this.parent.getColumns(),a=0;a<o.length;a++)this.setColumnWidth(o[a],i&&this.parent.enableColumnVirtualization?void 0:a+t);this.parent.isRowDragable()&&"Right"===this.parent.getFrozenMode()&&this.setColumnWidth(new Mh({width:"30px"}),o.length),n=this.getTableWidth(this.parent.getColumns()),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(n)},r.prototype.setMinwidthBycalculation=function(t){var e=0,i=this.parent.getColumns().filter(function(u){return f(u.width)||"auto"===u.width});if(i.length){e=f(this.parent.width)||"auto"===this.parent.width||"string"!=typeof this.parent.width||-1!==this.parent.width.indexOf("%")?this.parent.element.getBoundingClientRect().width-t:("string"==typeof this.parent.width?parseInt(this.parent.width,10):this.parent.width)-t;for(var n=0,s=0,o=i;s<o.length;s++){var a=o[s];n+=f(a.minWidth)?0:"string"==typeof a.minWidth?parseInt(a.minWidth,10):a.minWidth}for(var l=0;l<i.length;l++){0===t&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==i.length-1&&this.setUndefinedColumnWidth(i);var h=this.parent.getColumnIndexByField(i[l].field)+this.parent.getIndentCount();0!==t&&e<n?this.setWidth(i[l].minWidth,h):0!==t&&e>n&&this.setWidth("",h,!0)}}},r.prototype.setUndefinedColumnWidth=function(t){for(var e=0;e<t.length;e++)e!==t.length-1&&(t[e].width=200,this.setWidth(200,this.parent.getColumnIndexByField(t[e].field)))},r.prototype.setColumnWidth=function(t,e,i){if(!(this.parent.getColumns().length<1)){var n=f(e)?this.parent.getNormalizedColumnIndex(t.uid):e,s=this.getWidth(t),o=this.getTableWidth(this.parent.getColumns());null!==s&&(this.setWidth(s,n),"auto"!==this.parent.width&&-1===this.parent.width.toString().indexOf("%")&&this.setMinwidthBycalculation(o),(this.parent.allowResizing&&"resize"===i||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(XL,{index:n,width:s,column:t,module:i}))}},r.prototype.setWidth=function(t,e,i){this.parent.groupSettings.columns.length>e&&FG(this.parent)&&(t=(30/this.parent.element.offsetWidth*100).toFixed(1)+"%");var l,s=this.parent.getHeaderTable(),o=this.parent.getContentTable(),a=it(t),h=this.parent.getFrozenColumns(),u=this.parent.isRowDragable();h=h&&u?h+1:h;var B,d=this.parent.getHeaderContent().querySelector("."+Zn),m=this.parent.getContent().querySelector("."+zn),v=this.parent.getFrozenLeftColumnsCount(),C=this.parent.getFrozenRightColumnsCount(),S=this.parent.getMovableColumnsCount(),A=0!==v||0!==C;if(h&&e>=h){if(!d||!d.querySelector(Ti))return;l=d.querySelector(Ti+":not(.e-masked-colgroup)").children[e-h]}else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&d.scrollLeft>0)l=(_=d.querySelector(Ti)).children[_.children.length-1-e];else if(A){var M=void 0;if(v&&!C)M=(e=u?e-1:e)<v?s:d;else if(!v&&C)M=e>=S?s:d;else if(v&&C){e=u?e-1:e;var P=this.parent.getFrozenRightHeader();M=e<v?s:e<v+S?d:P}if(!(l=this.getColumnLevelFrozenColgroup(e,v,S,M)))return}else l=s.querySelector(Ti).children[e];if(l&&!i?l.style.width=a:l&&i&&(l.style.width=""),h&&e>=h)B=this.parent.getContent().querySelector("."+zn).querySelector(Ti+":not(.e-masked-colgroup)").children[e-h];else if(this.parent.enableColumnVirtualization&&h&&this.parent.contentModule.isXaxis()&&m.scrollLeft>0){var _;B=(_=this.parent.getContent().querySelector("."+zn).querySelector(Ti)).children[_.children.length-1-e]}else if(A){if(M=void 0,v&&!C&&(M=e<v?o:m),!v&&C&&(M=e>=S?o:m),v&&C){var j=this.parent.getContent().querySelector(".e-frozen-right-content");M=e<v?o:e<v+S?m:j}B=this.getColumnLevelFrozenColgroup(e,v,S,M)}else B=o.querySelector(Ti).children[e];if(B&&!i?B.style.width=a:B&&i&&(B.style.width=""),!this.parent.enableColumnVirtualization){for(var G=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),ne=[],fe=0;fe<G.length;fe++)if(pe(G[fe],"e-grid").id===this.parent.element.id)for(var Ee=0;Ee<G[fe].querySelector("colgroup").children.length;Ee++)ne.push(G[fe].querySelector("colgroup").children[Ee]);G.length&&ne.length&&(ne[e].style.width=a)}this.parent.isFrozenGrid()&&this.refreshFrozenScrollbar()},r.prototype.getColumnLevelFrozenColgroup=function(t,e,i,n){if(!n||!n.querySelector(Ti))return null;var s=this.parent.getColumns(),o=this.parent.isRowDragable(),a=this.parent.getFrozenMode(),h=[].slice.call(n.querySelector(Ti+":not(.e-masked-colgroup)").children);return"Right"===a&&o&&t===i+this.parent.getFrozenRightColumnsCount()?h[h.length-1]:o&&-1===t?h[0]:"Left"===s[t].freeze?h[o?t+1:t]:"Right"===s[t].freeze?h[t-(e+i)]:h[t-e]},r.prototype.refreshFrozenScrollbar=function(){var t={cancel:!1};if(this.parent.notify("prevent-frozen-scroll-refresh",t),!t.cancel){var e=wC(),i=this.parent.element.querySelector(".e-frozenscrollbar"),n=this.parent.element.querySelector(".e-movablescrollbar"),s=this.parent.getContent().querySelector("."+tc),o=this.parent.getContent().querySelector("."+zn),a=s.firstElementChild.getBoundingClientRect().width,l=o.firstElementChild.getBoundingClientRect().width;if("Right"===this.parent.getFrozenMode()&&(a+=e),i.style.width=a+"px",this.parent.getFrozenMode()===Zt){var h=this.parent.element.querySelector(".e-frozen-right-scrollbar"),u=this.parent.getContent().querySelector(".e-frozen-right-content").firstElementChild.getBoundingClientRect().width;"auto"!==this.parent.height&&(u+=e),h.style.width=u+"px"}else{if(this.parent.enableColumnVirtualization){var d=this.parent.getMovableVirtualContent().querySelector(".e-virtualtrack");d&&(l=d.scrollWidth)}"Right"!==this.parent.getFrozenMode()&&"auto"!==this.parent.height&&(l+=e)}n.firstElementChild.style.width=l+"px"}},r.prototype.getSiblingsHeight=function(t){return this.getHeightFromDirection(t,"previous")+this.getHeightFromDirection(t,"next")},r.prototype.getHeightFromDirection=function(t,e){for(var i=t[e+"ElementSibling"],n=0,s=[js,yC,"e-groupdroparea","e-gridpager","e-toolbar"];i;)s.some(function(o){return i.classList.contains(o)})&&(n+=i.offsetHeight),i=i[e+"ElementSibling"];return n},r.prototype.isWidthUndefined=function(){var t=this.parent.getColumns().filter(function(e){return f(e.width)&&f(e.minWidth)}).length;return this.parent.getColumns().length===t},r.prototype.getWidth=function(t){if(f(t.width)&&this.parent.allowResizing&&f(t.minWidth)&&!this.isWidthUndefined()&&(t.width=200),this.parent.isFrozenGrid()&&f(t.width)&&(t.getFreezeTableName()===rs||t.getFreezeTableName()===or)&&(t.width=200),!t.width)return null;var e=parseInt(t.width.toString(),10);return t.minWidth&&e<parseInt(t.minWidth.toString(),10)?t.minWidth:t.maxWidth&&e>parseInt(t.maxWidth.toString(),10)?t.maxWidth:t.width},r.prototype.getTableWidth=function(t){for(var e=0,i=0,n=t;i<n.length;i++){var s=n[i],o=this.getWidth(s);"auto"===s.width&&(o=0),!1!==s.visible&&null!==o&&(e+=parseInt(o.toString(),10))}return e},r.prototype.calcMovableOrFreezeColWidth=function(t){var e=this.parent.getColumns().slice(),i=this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenColumns(),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenRightColumnsCount();return"movable"===t?(s&&e.splice(i+n,e.length),i&&e.splice(0,i)):"freeze-left"===t?e.splice(i,e.length):"freeze-right"===t&&e.splice(0,i+n),it(this.getTableWidth(e))},r.prototype.setWidthToFrozenRightTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-right");t=this.isAutoResize()?"100%":t;var e=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector("."+sr+":not(.e-masked-table)"),i=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector("."+sr+":not(.e-masked-table)");e.style.width=t,i.style.width=t},r.prototype.setWidthToFrozenLeftTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze-left");t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t},r.prototype.setWidthToMovableTable=function(){var t="",e=this.parent.getColumns().filter(function(o){return f(o.width)}).length>=1,i=this.parent.getColumns().filter(function(o){return"auto"===o.width}).length>=1,n=this.parent.getHeaderContent().querySelector("."+Zn),s=this.parent.getContent().querySelector("."+zn);"number"!=typeof this.parent.width||e||i?!e&&!i&&(t=this.calcMovableOrFreezeColWidth("movable")):t=it(this.parent.width-parseInt(this.calcMovableOrFreezeColWidth("freeze").split("px")[0],10)-5),t=this.isAutoResize()?"100%":t,n.firstElementChild&&(n.firstElementChild.classList.contains("e-masked-table")?n.childNodes[1].style.width=t:n.firstElementChild.style.width=t),s.firstElementChild.classList.contains("e-masked-table")?s.childNodes[1].style.width=t:s.firstElementChild.style.width=t},r.prototype.setWidthToFrozenEditTable=function(){var t=this.calcMovableOrFreezeColWidth("freeze");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[0].style.width=t},r.prototype.setWidthToMovableEditTable=function(){var t=this.calcMovableOrFreezeColWidth("movable");t=this.isAutoResize()?"100%":t,this.parent.element.querySelectorAll(".e-table.e-inline-edit")[1].style.width=t},r.prototype.setWidthToTable=function(){var t=it(this.getTableWidth(this.parent.getColumns()));this.parent.isFrozenGrid()?((this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount())&&this.setWidthToFrozenLeftTable(),this.setWidthToMovableTable(),this.parent.getFrozenRightColumnsCount()&&this.setWidthToFrozenRightTable()):((this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new Mh({width:"30px"})),t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t);var e=this.parent.element.querySelector(".e-table.e-inline-edit");e&&this.parent.getFrozenColumns()?(this.setWidthToFrozenEditTable(),this.setWidthToMovableEditTable()):e&&(e.style.width=t)},r.prototype.isAutoResize=function(){return this.parent.allowResizing&&"Auto"===this.parent.resizeSettings.mode},r}(),gO=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),hDe=function(){function r(t){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=t,this.rowModelGen=new Xd(this.parent),this.addEventListener()}return r.prototype.focusCheck=function(t){var e=t.target;this.focusByClick=!0,this.skipFocus=e.classList.contains("e-grid")},r.prototype.onFocus=function(t){if(!(this.parent.isDestroyed||Z.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&t&&t.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&0===this.parent.frozenRows,this.parent.isFrozenGrid()),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&("Batch"!==this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[Af].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new If({isDataRow:!0})]}),this.getContent().selector,!1);var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.skipFocus&&(!t||t.target!==this.parent.element)&&(this.focus(t),this.skipFocus=!1)}},r.prototype.passiveFocus=function(t){this.parent.isDestroyed||t.target&&t.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,N([this.currentInfo.element],["e-focused","e-focus"]))},r.prototype.onBlur=function(t){(this.parent.isEdit||t&&(!t.relatedTarget||U(t.relatedTarget,".e-grid"))&&(!this.parent.element.classList.contains("e-childgrid")||this.parent.element.matches(":focus-within")))&&(!f(t.relatedTarget)||0!==parseInt(t.target.getAttribute("data-colindex"),10)||0!==parseInt(t.target.getAttribute("index"),10))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex())},r.prototype.setFirstFocusableTabIndex=function(){var t=this.parent;if(t.element.tabIndex=-1,t.allowGrouping&&t.groupSettings.showDropArea){var e=t.groupModule,i=e.getFocusableGroupedItems();i.length>0?(e.element.tabIndex=-1,i[0].tabIndex=0):e.element.tabIndex=0}else if(t.toolbar||t.toolbarTemplate){var n=t.toolbarModule.element,s=n.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");s.length>0?(n.tabIndex=-1,s[0].querySelector(".e-btn,.e-input").tabIndex=0):n.tabIndex=0}else if(t.getColumns().length&&(t.getHeaderContent().querySelector(".e-headercell").tabIndex=0,!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Zt?this.setActive(!1):this.setActive(!1,!0),!f(this.active))){var a=[0,0];0===this.active.matrix.matrix[a[0]][a[1]]&&(a=Wg(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}},r.prototype.setLastContentCellTabIndex=function(){var t=this.parent.getContentTable();t.rows[t.rows.length-1].lastElementChild.tabIndex=0},r.prototype.onClick=function(t,e){if(!pe(t.target,"e-filterbarcell")||!pe(t.target,"e-multiselect")&&!t.target.classList.contains("e-input-group-icon")){var i=!f(U(t.target,"."+Ps)),n=!f(U(t.target,"."+js));i=i&&n?!i:i;var s=!f(U(t.target,"."+tc))||!f(U(t.target,"."+Zd)),o=!1;if(this.parent.getFrozenMode()===Zt&&(o=!f(U(t.target,".e-frozen-right-content"))||!f(U(t.target,".e-frozen-right-header")),s=s&&!o),!(!i&&f(U(t.target,"."+js))||t.target.classList.contains(as))&&f(U(t.target,".e-unboundcell"))){if(this.setActive(i,s,o),!i&&f(U(t.target,"."+js)))return void this.clearOutline();var a={cancel:!1,byKey:!1,byClick:!f(t.target),clickArgs:t};if(this.parent.notify(AD,a),!a.cancel&&!U(t.target,".e-inline-edit")&&(this.setActive(i,s,o),this.getContent())){if(!1===this.getContent().onClick(t,e))return;this.parent.isFrozenGrid()&&n&&t.target===this.parent.getHeaderContent().firstChild&&-1===this.active.matrix.current[0]&&this.active.matrix.current[1]===this.active.matrix.columns&&(this.active.matrix.current=[0,0]),this.focus()}}}},r.prototype.onKeyPress=function(t){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.getFocusablePagerElements(this.parent.pagerModule.pagerObj.element,[]);if(this.parent.childGrid&&this.allowToPaging(t)&&i.length&&(i[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if("shiftTab"===t.action&&i.length&&i[0]===t.target)return this.setActive(!0),0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Wg(this.active.matrix.matrix,n,!1)),this.active.matrix.current=n,t.preventDefault(),void this.focus(t);if("tab"!==t.action||!this.parent.element.classList.contains("e-childgrid")||(this.parent.pageSettings.pageSizes||!i.length||i[i.length-1]!==t.target)&&this.parent.pagerModule.pagerObj.getDropDownPage()!==t.target)return void this.parent.pagerModule.pagerObj.changePagerFocus(t);var s=pe(this.parent.element,"e-detailcell");z([this.parent.element],["e-focus"]),z([s],["e-focused"]),s.tabIndex=-1}if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&(38===t.keyCode||t.shiftKey&&9===t.keyCode))return t.preventDefault(),void this.getFocusedElement().focus();if(0===this.parent.pagerModule.pagerObj.element.tabIndex&&9===t.keyCode)return t.preventDefault(),void this.parent.pagerModule.pagerObj.setPagerFocus();if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var o=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[o,a]}}if(!this.skipOn(t)){if(t.target&&pe(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()){var l=[].slice.call(this.parent.getContentTable().rows);t.target===l[l.length-1].lastElementChild&&(this.setActive(!0),this.setLastContentCellActive())}if("shiftTab"===t.action&&t.target&&(t.target===this.parent.element||pe(t.target,"e-toolbar")||pe(t.target,"e-groupdroparea"))){if(t.target===this.parent.element)return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t));if(pe(t.target,"e-groupdroparea"))return void(this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus()));if(pe(t.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var d=(u=this.parent.groupModule).getFocusableGroupedItems();t.preventDefault(),d.length>0?d[d.length-1].focus():u.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}}var m=!1;if("tab"===t.action&&t.target&&(t.target===this.parent.element||pe(t.target,"e-toolbar")||pe(t.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(t.target===this.parent.element||t.target.classList.contains("e-groupdroparea"))){var u;if((d=(u=this.parent.groupModule).getFocusableGroupedItems()).length>0)return t.preventDefault(),void d[0].focus();if(!t.target.classList.contains("e-groupdroparea"))return t.preventDefault(),void u.element.focus()}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(t.target===this.parent.element||pe(t.target,"e-groupdroparea")||t.target.classList.contains("e-toolbar"))){var v=this.parent.toolbarModule.element,C=v.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(C.length>0)return t.preventDefault(),void C[0].querySelector(".e-btn,.e-input").focus();if(!t.target.classList.contains("e-toolbar"))return t.preventDefault(),void v.focus()}(t.target===this.parent.element||pe(t.target,"e-toolbar")||pe(t.target,"e-groupdroparea"))&&(m=!0)}m&&(!this.parent.isFrozenGrid()||"Left"!==this.parent.getFrozenMode()&&this.parent.getFrozenMode()!==Zt?this.setActive(!(!this.parent.allowGrouping||this.parent.groupSettings.columns.length!==this.parent.columns.length)):this.setActive(!1,!0),this.active.matrix.current=[0,-1]),this.activeKey=t.action;var S={cancel:!1,byKey:!0,byClick:!1,keyArgs:t};if(this.parent.notify(AD,S),!S.cancel){var A=this.getContent().matrix.current;this.currentInfo.outline=!0;var _=this.getContent().jump(t.action,A);this.swap=_,_.swap&&(this.setActive(!_.toHeader,_.toFrozen,_.toFrozenRight),this.getContent().matrix.current=this.getContent().getNextCurrent(A,_,this.active,t.action),this.prevIndexes={}),this.setActiveByKey(t.action,this.getContent());var M=!this.content.lastIdxCell&&this.getContent().onKeyPress(t);if(t.target&&pe(t.target,"e-gridheader"))if(this.parent.isFrozenGrid()){if("shiftTab"===t.action&&A.toString()===this.active.matrix.current.toString()&&!_.swap)return void this.focusOutFromHeader(t)}else{if("tab"===t.action&&A.toString()===this.active.matrix.current.toString()){var n,P=Wg(this.active.matrix.matrix,this.active.matrix.current,!0);0===this.active.matrix.matrix[(n=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1])[0]][n[1]]&&(n=Wg(this.active.matrix.matrix,n,!1)),this.active.matrix.current.toString()===n.toString()?(M=!0,this.setActive(!0),0===this.active.matrix.matrix[(B=[0,0])[0]][B[1]]&&(B=Wg(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=B):this.active.matrix.current.toString()!==P.toString()&&(this.active.matrix.current=P)}if("shiftTab"===t.action&&A.toString()===this.active.matrix.current.toString()){var j=Wg(this.active.matrix.matrix,this.active.matrix.current,!1);if(j.toString()===this.active.matrix.current.toString())return void this.focusOutFromHeader(t);this.active.matrix.current.toString()!==j.toString()&&!M&&(M=!0,this.active.matrix.current=j)}}if(t.target&&pe(t.target,"e-gridcontent")&&!this.parent.isFrozenGrid()&&"shiftTab"===t.action&&A.toString()===this.active.matrix.current.toString()){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length)return void this.focusOutFromHeader(t);var B;0===this.active.matrix.matrix[(B=[0,0])[0]][B[1]]&&(B=Wg(this.active.matrix.matrix,[0,0],!0)),!M&&B.toString()===this.active.matrix.current.toString()&&(M=!0,this.setActive(!1),this.setLastContentCellActive())}if(!1===M){if(this.clearIndicator(),"shiftTab"===t.action&&A.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(t)&&A.toString()!==[0,0].toString()){if(t.preventDefault(),40===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerContainerFocus();if(9===t.keyCode)return void this.parent.pagerModule.pagerObj.setPagerFocus()}return void(this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t))}t.preventDefault(),this.focus(t)}}},r.prototype.setLastContentCellActive=function(){var t=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];0===this.active.matrix.matrix[t[0]][t[1]]&&(t=Wg(this.active.matrix.matrix,t,!1)),this.active.matrix.current=t},r.prototype.focusOutFromChildGrid=function(t){var e=pe(this.parent.element,"e-table"),i=pe(e,"e-grid").ej2_instances[0],n=pe(this.parent.element,"e-detailcell"),s=pe(this.parent.element,"e-detailrow").getAttribute("data-uid"),o=[].slice.call(i.getContentTable().rows),a=o.map(function(m){return m.getAttribute("data-uid")}).indexOf(s);if(!("tab"===t.action&&a>=o.length-1)){var l;if(z([this.parent.element],["e-focus"]),z([n],["e-focused"]),n.tabIndex=-1,t.preventDefault(),i.focusModule.removeFocus(),"shiftTab"===t.action){for(var u=o[a-1].cells,d=u.length-1;d>=0;d--)if(!(l=u[d]).classList.contains("e-hide")){i.focusModule.active.matrix.current=[a-1,d];break}}else l=o[a+1].cells[0],i.focusModule.active.matrix.current=[a+1,0];i.focusModule.currentInfo.element=l,i.focusModule.currentInfo.elementToFocus=l,N([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},r.prototype.focusOutFromHeader=function(t){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var e=this.parent.toolbarModule.element,i=e.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");return t.preventDefault(),void(i.length>0?i[i.length-1].querySelector(".e-btn,.e-input").focus():e.focus())}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var n=this.parent.groupModule,s=n.getFocusableGroupedItems();return t.preventDefault(),void(s.length>0?s[s.length-1].focus():n.element.focus())}this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus())},r.prototype.allowToPaging=function(t){return!("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40!==t.keyCode)},r.prototype.skipOn=function(t){var e=t.target;if(!e)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(t.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var i=this.parent.groupModule.getFocusableGroupedItems();if(pe(t.target,"e-groupheadercell")&&!(t.target===i[0]&&"shiftTab"===t.action||t.target===i[i.length-1]&&"tab"===t.action))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var s=this.parent.toolbarModule.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(pe(t.target,"e-toolbar-item")&&!(s.length>0&&(pe(t.target,"e-toolbar-item")===s[0]&&"shiftTab"===t.action||pe(t.target,"e-toolbar-item")===s[s.length-1]&&"tab"===t.action)))return!0}var o=U(e,"th")&&!U(e,"th").tabIndex;!t.target.classList.contains("e-filterbaroperator")||13!==t.keyCode&&27!==t.keyCode||U(t.target,".e-filterbarcell").querySelector("input").focus(),o&&null!==U(document.activeElement,".e-filterbarcell")&&this.removeFocus();var l=null!==U(document.activeElement,".e-filterbarcell");if(this.parent.enableHeaderFocus&&l){var h=this.active.matrix,u=h.current;l=h.matrix[u[0]].lastIndexOf(1)!==u[1]}return"delete"===t.action||"Batch"!==this.parent.editSettings.mode&&(this.parent.isEdit||["insert","f2"].indexOf(t.action)>-1)||l&&this.parent.enableHeaderFocus||l&&"tab"!==t.action&&"shiftTab"!==t.action||null!==U(document.activeElement,"#"+this.parent.element.id+"_searchbar")&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(t.action)>-1||null===U(e,"."+Ps)&&null===U(e,"."+js)&&!(t.target===this.parent.element||pe(t.target,"e-toolbar")||pe(t.target,"e-groupdroparea"))||"space"===t.action&&!e.classList.contains(BS)&&null===U(e,"."+BS)&&null===U(e,".e-headerchkcelldiv")||null!==U(e,".e-filter-popup")},r.prototype.focusVirtualElement=function(t){var e=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var i={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(Gv,i);var n=this.actions.some(function(o){return o===e.activeKey}),s=!!this.parent.contentModule&&this.parent.contentModule.selectedRowIndex>-1;i.isAdd||Object.keys(i.virtualData).length||n||i.isCancel||s?(this.parent.notify("reset-virtual-focus",{isCancel:!1}),i.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,n&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",t)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},r.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},r.prototype.getContent=function(){return this.active||this.content},r.prototype.setActive=function(t,e,i){this.active=t?e?this.fContent:i?this.frContent:this.content:e?this.fHeader:i?this.frHeader:this.header},r.prototype.setFocusedElement=function(t,e){var i=this;this.currentInfo.elementToFocus=t,setTimeout(function(){f(i.currentInfo.elementToFocus)||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling?i.focusVirtualElement(e):i.currentInfo.elementToFocus.focus())},0)},r.prototype.focus=function(t){this.parent.notify("virtaul-cell-focus",t),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)},r.prototype.removeFocus=function(t){!this.currentInfo.element||(z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1)},r.prototype.addOutline=function(){var t=this.getContent().getFocusInfo();t.element&&(N([t.element],["e-focused"]),N([t.elementToFocus],["e-focus"]))},r.prototype.focusHeader=function(){this.setActive(!1,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.focusContent=function(){this.setActive(!0,this.parent.isFrozenGrid()),this.resetFocus()},r.prototype.resetFocus=function(){var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.focus()},r.prototype.addFocus=function(t,e){if(this.currentInfo=t,this.currentInfo.outline=t.outline&&!f(e),this.isInfiniteScroll&&(this.currentInfo.outline=!0),t.element){var i=t.elementToFocus.classList.contains("e-focus");if(!i){this.currentInfo.outline&&N([t.element],["e-focused"]),N([t.elementToFocus],["e-focus"]),t.element.tabIndex=0,i||this.setFocusedElement(t.elementToFocus,e),this.parent.notify(PV,{element:t.elementToFocus,parent:t.element,indexes:this.getContent().matrix.current,byKey:!f(e),byClick:f(e),keyArgs:e,isJump:this.swap.swap,container:this.getContent().getInfo(e),outline:!f(e),swapInfo:this.swap});var n=this.getContent().matrix.current,o=n[1];this.prevIndexes={rowIndex:n[0],cellIndex:o},this.focusedColumnUid=this.parent.getColumnByIndex(o).uid,this.focusByClick=!1}}},r.prototype.refreshMatrix=function(t){var e=this;return function(i){t&&i.args&&i.args.isFrozen&&!e.fContent?e.fContent=new cDe(e.parent):t&&!e.frContent&&i.args&&i.args.renderFrozenRightContent?e.frContent=new pDe(e.parent):t&&!e.content&&(e.content=new i2(e.parent)),!t&&i.args&&i.args.isFrozen&&!e.fHeader?e.fHeader=new dDe(e.parent):!t&&i.args&&i.args.renderFrozenRightContent&&!e.frHeader?e.frHeader=new fDe(e.parent):!t&&!e.header&&(e.header=new IG(e.parent));var n=t?i.args&&i.args.isFrozen?e.fContent:i.args&&i.args.renderFrozenRightContent?e.frContent:e.content:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header,s=t?i.rows.slice(e.parent.frozenRows):i.rows,o=t?i.rows.slice(0,e.parent.frozenRows):i.rows;e.parent.isCollapseStateEnabled()&&t&&(s=s.filter(function(P){return!1!==P.visible}));var C,a=!f(e.parent.rowTemplate),l=n.matrix.generate(o,n.selector,a);if("batchAdd"===i.name&&e.parent.isFrozenGrid()){var u=e.parent.getMovableRowsObject().map(function(P){return P.clone()}),d=s.map(function(P){return P.clone()});if(e.fContent.matrix.generate(d,e.fContent.selector,a),e.content.matrix.generate(u,e.content.selector,a),e.parent.getFrozenMode()===Zt){var v=e.parent.getFrozenRightRowsObject().map(function(P){return P.clone()});e.frContent.matrix.generate(v,e.frContent.selector,a)}}else n.matrix.generate(s,n.selector,a);if(e.parent.isFrozenGrid()&&i.args&&"sorting"===i.args.requestType||n.generateRows(o,{matrix:l,handlerInstance:i.args&&i.args.isFrozen?e.fHeader:i.args&&i.args.renderFrozenRightContent?e.frHeader:e.header}),!Z.isDevice&&i&&i.args&&(!e.focusByClick&&"paging"===i.args.requestType&&!e.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(e.skipFocus=!1,e.parent.element.focus()),"grouping"===i.args.requestType&&(e.skipFocus=!0)),i&&i.args&&"virtualscroll"===i.args.requestType)if(e.currentInfo.uid){if(i.rows.some(function(P,B){return C=B,P.uid===e.currentInfo.uid})&&(e.content.matrix.current[0]=C,e.content.matrix.current[1]=e.parent.getColumnIndexByUid(e.focusedColumnUid)||0,A=e.getContent().getFocusInfo().elementToFocus)){var _=A.getBoundingClientRect(),M=e.parent.element.getBoundingClientRect();_.top>=0&&_.left>=0&&_.right<=Math.min(M.right,window.innerWidth||document.documentElement.clientWidth)&&_.bottom<=Math.min(M.bottom,window.innerHeight||document.documentElement.clientHeight)&&(e.isVirtualScroll=!0,e.focus())}}else if(i.args.focusElement&&i.args.focusElement.classList.contains("e-filtertext")){var A;(A=e.parent.element.querySelector("#"+i.args.focusElement.id))&&A.focus()}i&&i.args&&"infiniteScroll"===i.args.requestType&&(e.isInfiniteScroll=!0)}},r.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(T.add(this.parent.element,"mousedown",this.focusCheck,this),T.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(e){return t.passiveFocus(e)},!0),T.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Cs,handler:this.onKeyPress},{event:sl,handler:this.onClick},{event:Zr,handler:this.refMatrix},{event:rO,handler:this.refMatrix},{event:NS,handler:this.refMatrix},{event:xo,handler:this.refreshMatrix()},{event:hse,handler:this.restoreFocus},{event:FS,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:OS,handler:this.refMatrix},{event:jg,handler:this.refMatrix},{event:_V,handler:this.refMatrix},{event:"detailDataBound",handler:this.refMatrix},{event:Yd,handler:this.refMatrix},{event:PV,handler:this.internalCellFocus}],uo(this.parent,this.evtHandlers,!0,this))},r.prototype.filterfocus=function(){"FilterBar"!==this.parent.filterSettings.type&&this.restoreFocus()},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(T.remove(this.parent.element,"mousedown",this.focusCheck),T.remove(this.parent.element,"focus",this.onFocus),T.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),uo(this.parent,this.evtHandlers,!1))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.restoreFocus=function(){var t=this.parent.groupModule;this.parent.allowGrouping&&t&&t.groupSortFocus?t.groupSortFocus=!1:this.addFocus(this.getContent().getFocusInfo())},r.prototype.restoreFocusWithAction=function(t){if(!this.parent.enableInfiniteScrolling){var e=this.getContent().matrix,i=e.current;switch(t.requestType){case"grouping":case"ungrouping":i[1]=!i.length||this.parent.groupSettings.showGroupedColumn||f(e.matrix[i[0]])?"grouping"===t.requestType?i[1]+1:i[1]-1:e.matrix[i[0]].indexOf(1)}this.getContent().matrix.current=i;var n=this.parent.groupModule;if(this.parent.allowGrouping&&n&&n.groupCancelFocus){var s=n.getFocusableGroupedItems();return s.length?s[0].parentElement.getAttribute("ej-mappingname")===t.columnName?s[3].focus():s[0].focus():n.element.focus(),void(n.groupCancelFocus=!1)}this.addFocus(this.getContent().getFocusInfo())}},r.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},r.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},r.prototype.getPrevIndexes=function(){var t=this.forget;return this.forget=!1,t||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},r.prototype.forgetPrevious=function(){this.forget=!0},r.prototype.setActiveByKey=function(t,e){var i=this;if(this.parent.isFrozenGrid()||0!==this.parent.frozenRows){var n,s={home:function(){return{toHeader:!n.isContent,toFrozen:!0}},end:function(){return{toHeader:!n.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:i.parent.isFrozenGrid()}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(t in s){n=e.getInfo();var o=s[t]();this.setActive(!o.toHeader,o.toFrozen),this.getContent().matrix.current=e.matrix.current}}},r.prototype.internalCellFocus=function(t){if(t.byKey&&t.container.isContent&&"enter"===t.keyArgs.action&&(t.parent.classList.contains("e-detailcell")||t.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var e=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(e),this.currentInfo.skipAction=!0}},r}(),uDe=function(){function r(){this.matrix=[],this.current=[]}return r.prototype.set=function(t,e,i){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.columns)),this.matrix[t]=this.matrix[t]||[],this.matrix[t][e]=i?1:0},r.prototype.get=function(t,e,i,n,s){var o=e;if(t+i[0]<0)return[t,e];t=Math.max(0,Math.min(t+i[0],this.rows));var a=!0;if(f(this.matrix[t]))return null;if(e=Math.max(0,Math.min(e+i[1],this.matrix[t].length-1)),o+i[1]>this.matrix[t].length-1&&s(t,e,n))return[t,o];var l=this.first(this.matrix[t],e,i,!0,n),h=Q(t+"."+(e=null===l?o:l),this.matrix);if(t===this.rows&&("downArrow"===n||"enter"===n)&&(i[0]=-1),null===l){for(var u=0;u<this.rows;u++)if(this.matrix[u].some(function(d){return 1===d})){a=!1;break}if(a)return[t=this.current[0],e]}return this.inValid(h)||!s(t,e,n)?this.get(t,o,i,n,s):[t,e]},r.prototype.first=function(t,e,i,n,s){return(e<0||e===t.length)&&this.inValid(t[e])&&"upArrow"!==s&&"downArrow"!==s||!t.some(function(o){return 1===o})?null:this.inValid(t[e])?this.first(t,-1!==["upArrow","downArrow","shiftUp","shiftDown"].indexOf(s)?n?0:++e:e+i[1],i,!1,s):e},r.prototype.select=function(t,e){t=Math.max(0,Math.min(t,this.rows)),e=Math.max(0,Math.min(e,this.matrix[t].length-1)),this.current=[t,e]},r.prototype.generate=function(t,e,i){this.rows=t.length-1,this.matrix=[];for(var n=0;n<t.length;n++){var s=t[n].cells.filter(function(l){return!0!==l.isSpanned});this.columns=Math.max(s.length-1,0|this.columns);for(var o=0,a=0;a<s.length;a++)s[a].column&&s[a].column.columns?o=this.columnsCount(s[a].column.columns,o):o++,this.set(n,a,!1!==t[n].visible&&e(t[n],s[a],i));this.columns=Math.max(o-1,0|this.columns)}return this.matrix},r.prototype.columnsCount=function(t,e){for(var i=t,n=e,s=0;s<i.length;s++)i[s].columns?n=this.columnsCount(i[s].columns,n):n++;return n},r.prototype.inValid=function(t){return 0===t||void 0===t},r}(),i2=function(){function r(t){var e=this;this.matrix=new uDe,this.lastIdxCell=!1,this.parent=t,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(i){return{home:[e.matrix.current[0],-1,0,1],end:[e.matrix.current[0],e.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[e.matrix.rows,e.matrix.columns+1,0,-1]}[i]||null}}return r.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getContent().querySelector(".e-movablecontent .e-table"):this.parent.getContentTable()},r.prototype.onKeyPress=function(t){var i=this.getCurrentFromAction(t.action,this.keyActions[t.action],t.action in this.keyActions,t);if(i){if((["tab","shiftTab"].indexOf(t.action)>-1&&this.matrix.current||[]).toString()===i.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&("Batch"===this.parent.editSettings.mode&&this.parent.editSettings.allowAdding&&40===t.keyCode||40===t.keyCode)){if(i.toString()===[this.matrix.rows,this.matrix.columns].toString()||i.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===i.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&i.toString()===[0,1].toString())return!1;i=this.editNextRow(i[0],i[1],t.action)}this.matrix.select(i[0],i[1])}},r.prototype.editNextRow=function(t,e,i){var n=this.parent,s=n.editSettings.allowNextRowEdit&&(n.isEdit||n.isLastCellPrimaryKey),o=n.getColumnIndexByField(n.getVisibleColumns()[0].field),a=this.getTable().rows[t].cells[e];return"tab"===i&&s&&(t++,e=o+(this.getTable().rows[t].getElementsByClassName("e-indentcell").length+this.getTable().rows[t].getElementsByClassName("e-detailrowcollapse").length)),"shiftTab"===i&&s&&(t--,e=n.getColumnIndexByField(n.getVisibleColumns()[n.getVisibleColumns().length-1].field)),a.classList.contains(tn)||a.classList.contains("e-headercell")||a.classList.contains("e-groupcaption")||a.classList.contains("e-filterbarcell")?[t,e]:this.editNextRow(t,e,i)},r.prototype.getCurrentFromAction=function(t,e,i,n){if(void 0===e&&(e=[0,0]),!i&&!this.indexesByKey(t)||0===this.matrix.current.length)return null;if(!this.shouldFocusChange(n))return this.matrix.current;var s=this.indexesByKey(t)||this.matrix.current.concat(e),o=s[0],a=s[1],l=s[2],h=s[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&"enter"===t)for(var u=o;u<this.matrix.matrix.length;u++){var d=this.getTable().rows[u+1];if(d&&d.cells[a]&&d.cells[a].classList.contains("e-rowcell"))return[u+1,a];if(u===this.matrix.matrix.length-1)return[o,a]}if("ctrlEnd"===t){var m=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];0===this.matrix.matrix[m[0]][m[1]]&&(m=Wg(this.matrix.matrix,m,!1)),o=m[0],a=m[1]+1}return this.matrix.get(o,a,[l,h],t,this.validator())},r.prototype.onClick=function(t,e){var i=t.target;if(this.target=i,i=(i=i.classList.contains(tn)?i:U(i,"td"))||U(t.target,"td.e-detailrowcollapse")||U(t.target,"td.e-detailrowexpand"),!(i=(i=U(t.target,"td.e-detailcell")&&f(U(U(t.target,".e-grid"),"td.e-detailcell"))?null:i)&&U(i,"table").classList.contains(sr)?i:null))return!1;var n=[i.parentElement.rowIndex,i.cellIndex],s=n[0],o=n[1],a=this.matrix.current,l=a[0],h=a[1],u=Q(s+"."+o,this.matrix.matrix);if(this.matrix.inValid(u)||!e&&l===s&&h===o||!pe(t.target,tn)&&!pe(t.target,"e-groupcaption")&&!pe(t.target,"e-recordpluscollapse")&&!pe(t.target,"e-recordplusexpand")&&!pe(t.target,"e-detailrowcollapse")&&!pe(t.target,"e-detailrowexpand")&&!pe(t.target,"e-templatecell"))return!1;this.matrix.select(s,o)},r.prototype.getFocusInfo=function(){var t={},e=this.matrix.current,i=e[0],n=void 0===i?0:i,s=e[1],o=void 0===s?0:s;return this.matrix.current=[n,o],t.element=f(this.getTable().rows[n])?null:this.getTable().rows[n].cells[o],t.element&&(t.elementToFocus=t.element.classList.contains("e-unboundcell")||t.element.classList.contains("e-detailcell")?t.element:this.getFocusable(t.element),t.elementToFocus=t.element.classList.contains("e-detailcell")&&t.element.querySelector(".e-childgrid")?t.element.querySelector(".e-childgrid"):t.elementToFocus,t.outline=!0,t.uid=t.element.parentElement.getAttribute("data-uid")),t},r.prototype.getFocusable=function(t){var e='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',i=!f(U(t,".e-templatecell"));this.parent.isEdit&&(e='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var n=[].slice.call(t.querySelectorAll(e));return n.length?i&&n.length>1?this.target?this.target:t:n[0]:t},r.prototype.selector=function(t,e,i){var n=[Ot.Expand,Ot.GroupCaption,Ot.CaptionSummary,Ot.GroupSummary];return(t.isDataRow&&e.visible&&(e.isDataCell||e.isTemplate)||t.isDataRow&&e.cellType===Ot.DetailExpand&&f(e.visible)||!t.isDataRow&&n.indexOf(e.cellType)>-1&&!!(e.cellType!==Ot.GroupSummary&&e.cellType!==Ot.CaptionSummary||e.isDataCell&&e.visible)||e.column&&e.visible&&"checkbox"===e.column.type||e.cellType===Ot.CommandColumn||t.isDataRow&&i)&&!("delete"===t.edit&&t.isDirty)},r.prototype.nextRowFocusValidate=function(t){for(var e=t,i=t,n=this.matrix.rows;i<=n;i++){if(-1!==this.matrix.matrix[t].indexOf(1))return t;t+=1}return this.lastIdxCell=!0,e},r.prototype.previousRowFocusValidate=function(t){for(var e=t,i=t;i>=0;i--){if(-1!==this.matrix.matrix[t].indexOf(1))return t;if((t-=1)<0)return this.lastIdxCell=!0,e}return e},r.prototype.jump=function(t,e){var i=this.parent.getFrozenLeftCount()&&("leftArrow"===t||"shiftTab"===t)&&0===e[1]||e[0]<this.matrix.matrix.length-1&&"tab"===t&&"Left"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1),n=("rightArrow"===t||"tab"===t)&&e[1]===this.matrix.columns||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&e[1]===this.matrix.matrix[e[0]].indexOf(1),s=this.parent.getFrozenMode()===Zt&&n;"Right"===this.parent.getFrozenMode()&&(i=n),this.lastIdxCell=!1;var o=0!==this.parent.frozenRows&&"shiftEnter"===t,a=("upArrow"===t||o)&&0===e[0]||"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1);!this.parent.isFrozenGrid()&&"tab"===t&&e[1]===this.matrix.matrix[e[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==e[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1,i=this.parent.isFrozenGrid()),!this.parent.isFrozenGrid()&&"shiftTab"===t&&0!==e[0]&&this.matrix.matrix[e[0]].indexOf(1)===e[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[e[0]].length);var l=!1,h=document.activeElement.parentElement;return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&h.classList.contains(vn)&&(l=parseInt(h.getAttribute(Ai),10)>0),"shiftTab"===t&&"Right"===this.parent.getFrozenMode()&&0===e[0]&&e[1]===this.matrix.matrix[e[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:!l&&(("upArrow"===t||o)&&0===e[0]||i||s),toHeader:a,toFrozen:i,toFrozenRight:s}},r.prototype.getNextCurrent=function(t,e,i,n){void 0===t&&(t=[]);var s=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?(("leftArrow"===n||"shiftTab"===n)&&(s[0]=t[0],s[1]=this.matrix.matrix[s[0]].length),this.parent.getFrozenMode()===Zt&&("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),"Right"===this.parent.getFrozenMode()&&"tab"===n&&(s[0]=t[0]+1,s[1]=-1)):("rightArrow"===n||"tab"===n)&&(s[0]=t[0],s[1]=-1),("downArrow"===n||"enter"===n)&&(s[0]=-1,s[1]=t[1]),"shiftTab"===n&&"Left"===this.parent.getFrozenMode()&&(s[0]=t[0]-1,s[1]=this.matrix.matrix[s[0]].length),s},r.prototype.generateRows=function(t,e){var i,n=e.matrix,s=e.handlerInstance,o=s.matrix.matrix.length,a=this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type?o+1:o;s.matrix.matrix=s.matrix.matrix.slice(0,a),s.matrix.rows=a,(i=s.matrix.matrix).push.apply(i,n),s.matrix.rows+=n.length},r.prototype.getInfo=function(t){var e=this.getFocusInfo(),i=this.matrix.current,n=i[0],s=i[1],o=e.element.classList.contains(tn),a=o||t&&"enter"!==t.action&&(e.element.classList.contains("e-detailrowcollapse")||e.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(e.element.parentElement.getAttribute(Ai),10),n),Math.min(parseInt(e.element.getAttribute(Us),10),s)],h=l[0],u=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&o&&(h=this.parent.getDataRows().indexOf(e.element.parentElement)),{isContent:!0,isDataCell:o,indexes:[h,u],isSelectable:a}},r.prototype.validator=function(){var t=this.getTable();return function(e,i,n){if(!f(t.rows[e])){var s=void 0;i=t.querySelector(".e-emptyrow")?0:i;var o=0!==(s=t.rows[e].cells[0].classList.contains("e-editcell")?t.rows[e].cells[0].querySelectorAll("td")[i]:t.rows[e].cells[i]).getBoundingClientRect().width;if("enter"===n||"shiftEnter"===n)return o&&s.classList.contains(tn);if(("shiftUp"===n||"shiftDown"===n)&&s.classList.contains(tn))return o;if("shiftUp"!==n&&"shiftDown"!==n)return o}return!1}},r.prototype.shouldFocusChange=function(t){var e=this.matrix.current,i=e[0],n=void 0===i?-1:i,s=e[1],o=void 0===s?-1:s;if(n<0||o<0)return!0;var a=Q(n+".cells."+o,this.getTable().rows);return!a||"enter"!==t.action&&"shiftEnter"!==t.action||a.classList.contains(tn)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell")},r.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},r}(),IG=function(r){function t(e){return r.call(this,e)||this}return gO(t,r),t.prototype.getTable=function(){return this.parent.isFrozenGrid()?this.parent.getHeaderContent().querySelector(".e-movableheader .e-table"):this.parent.getHeaderTable()},t.prototype.onClick=function(e){var i=e.target;if(this.target=i,!(i=i.classList.contains("e-headercell")?i:U(i,"th"))&&0!==this.parent.frozenRows&&(i=e.target.classList.contains(tn)?e.target:U(e.target,"td")),e.target.classList.contains("e-columnheader")||e.target.querySelector(".e-stackedheadercell"))return!1;if(i){var n=[i.parentElement.rowIndex,i.cellIndex],a=Q(n[0]+"."+n[1],this.matrix.matrix);if(this.matrix.inValid(a))return!1;this.matrix.select(i.parentElement.rowIndex,i.cellIndex)}},t.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,n=i[0],s=void 0===n?0:n,o=i[1],a=void 0===o?0:o;return e.element=this.getTable().rows[s].cells[a],f(e.element)||(e.elementToFocus=this.getFocusable(e.element),e.outline=!e.element.classList.contains("e-filterbarcell")),e},t.prototype.selector=function(e,i){return i.visible&&(void 0!==i.column.field||i.isTemplate||!f(i.column.template))||"checkbox"===i.column.type||i.cellType===Ot.StackedHeader},t.prototype.jump=function(e,i){var n=this.parent.getFrozenLeftCount()&&("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||"Left"===this.parent.getFrozenMode()&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),s=("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||i[0]>0&&"shiftTab"===e&&"Right"===this.parent.getFrozenMode()&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=this.parent.getFrozenMode()===Zt&&s;"Right"===this.parent.getFrozenMode()&&(n=s);var l,h,a=0!==this.parent.frozenRows&&"enter"===e,u=n&&!("Left"===this.parent.getFrozenMode()&&"tab"===e&&i[0]===this.matrix.matrix.length-1)||o,d=this.parent.focusModule.fHeader&&this.parent.focusModule.fHeader.matrix.matrix,m=d&&!f(d[i[0]]);return this.parent.enableHeaderFocus&&"tab"===e&&(h=this.matrix.matrix.length-1===i[0],(l=i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&(this.matrix.current[0]=h?0:this.matrix.current[0]+1,this.matrix.current[1]=-1),this.parent.isFrozenGrid()&&h&&l&&(n=!0,u=!1)),"tab"===e&&"Left"===this.parent.getFrozenMode()&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:("downArrow"===e||a)&&i[0]===this.matrix.matrix.length-1||m&&(n||o)||"tab"===e&&h&&l,toHeader:u,toFrozen:n,toFrozenRight:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?(("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),this.parent.getFrozenMode()===Zt&&("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1)):("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"Left"===this.parent.getFrozenMode()&&"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),"Right"===this.parent.getFrozenMode()&&"tab"===s&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.generateRows=function(e){var i=this.matrix.matrix.length;if(this.parent.allowFiltering&&"FilterBar"===this.parent.filterSettings.type){this.matrix.rows=++this.matrix.rows;for(var n=e[0].cells,s=0,o="FixedHeaderFocus"===this.getHeaderType()&&"Right"!==this.parent.getFrozenMode()?rs:"FixedHeaderFocus"===this.getHeaderType()||"FixedRightHeaderFocus"===this.getHeaderType()?or:"movable",a=0;a<n.length;a++)n[a].column&&n[a].column.columns?s=this.checkFilterColumn(n[a].column.columns,i,s,o):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&n[a].column.freezeTable===o)&&(this.matrix.set(i,s,n[a].visible&&!1!==n[a].column.allowFiltering),s++)}},t.prototype.checkFilterColumn=function(e,i,n,s){for(var o=e,a=n,l=0;l<o.length;l++)o[l].columns?a=this.checkFilterColumn(o[l].columns,i,a,s):(!this.parent.isFrozenGrid()||this.parent.isFrozenGrid()&&o[l].freezeTable===s)&&(this.matrix.set(i,a,o[l].visible&&!1!==o[l].allowFiltering),a++);return a},t.prototype.getInfo=function(e){return he(r.prototype.getInfo.call(this,e),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(e){var i=this.matrix.current,n=i[0],s=i[1];if(n<0||s<0)return!0;var o=Q(n+".cells."+s,this.getTable().rows);return!o||"enter"!==e.action&&"altDownArrow"!==e.action||!o.classList.contains("e-headercell")},t.prototype.getHeaderType=function(){return"HeaderFocus"},t}(i2),cDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gO(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozencontent .e-table")},t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"shiftEnter"===e,s=("upArrow"===e||n)&&0===i[0]||"shiftTab"===e&&"Right"!==this.parent.getFrozenMode()&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1),o=("upArrow"===e||n)&&0===i[0],a="shiftTab"===e&&this.parent.getFrozenMode()===Zt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return"Right"===this.parent.getFrozenMode()?{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozen:o}:("shiftTab"===e&&0===i[0]&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&(this.matrix.current[0]=-1),{swap:s||("tab"===e||"rightArrow"===e)&&i[1]===this.matrix.columns||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1),toHeader:s,toFrozen:o,toFrozenRight:a})},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("tab"===s&&this.parent.enableHeaderFocus&&(o[0]=e[0],o[1]=-1),("leftArrow"===s||"shiftTab"===s)&&(o[0]=e[0],o[1]=n.matrix.columns+1)),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t}(i2),dDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gO(t,r),t.prototype.jump=function(e,i){var n=0!==this.parent.frozenRows&&"enter"===e,s=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,o=s&&!f(s[i[0]]);if("Right"===this.parent.getFrozenMode()){var a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||n||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||o&&a,h=("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h}}var u=i[0]>0&&"shiftTab"===e&&this.parent.getFrozenMode()===Zt&&i[1]===this.matrix.matrix[i[0]].indexOf(1);return{swap:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1||("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toHeader:("rightArrow"===e||"shiftRight"===e&&this.getGridSeletion()||"tab"===e)&&(i[1]===this.matrix.columns||i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)||"shiftTab"===e&&i[1]===this.matrix.matrix[i[0]].indexOf(1)&&i[0]>0,toFrozen:("downArrow"===e||n)&&i[0]===this.matrix.matrix.length-1,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozenheader .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return"Right"===this.parent.getFrozenMode()?(("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length)):("leftArrow"===s||"shiftLeft"===s&&this.getGridSeletion()||"shiftTab"===s)&&(o[0]=e[0],o[1]=this.matrix.matrix[o[0]].length),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"tab"===s&&"Right"!==this.parent.getFrozenMode()&&(o[0]=e[0]+1,o[1]=-1),o},t.prototype.getHeaderType=function(){return"FixedHeaderFocus"},t}(IG),wse=function(){function r(t){this.searchBox=t}return r.prototype.searchFocus=function(t){t.target.parentElement.classList.add("e-input-focus"),t.target.classList.contains("e-input")&&t.target.classList.contains("e-search")&&t.target.value&&t.target.parentElement.querySelector(".e-clear-icon").classList.remove("e-clear-icon-hide")},r.prototype.searchBlur=function(t){t.target.parentElement.classList.remove("e-input-focus"),t.target.classList.contains("e-search")&&t.relatedTarget&&!t.relatedTarget.classList.contains("e-sicon e-clear-icon")&&!t.relatedTarget.classList.contains("e-sicon")&&t.target.parentElement.querySelector(".e-clear-icon").classList.add("e-clear-icon-hide")},r.prototype.wireEvent=function(){this.searchBox&&(T.add(this.searchBox,"focus",this.searchFocus,this),T.add(this.searchBox,"blur",this.searchBlur,this))},r.prototype.unWireEvent=function(){this.searchBox&&(T.remove(this.searchBox,"focus",this.searchFocus),T.remove(this.searchBox,"blur",this.searchBlur))},r}(),pDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gO(t,r),t.prototype.getTable=function(){return this.parent.getContent().querySelector(".e-frozen-right-content .e-table")},t.prototype.jump=function(e,i){var s=("upArrow"===e||0!==this.parent.frozenRows&&"shiftEnter"===e)&&0===i[0],o=this.parent.getFrozenMode()===Zt&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1);return{swap:s||("shiftTab"===e||"leftArrow"===e)&&0===i[1]||"tab"===e&&i[0]<this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),toHeader:s,toFrozenRight:s,toFrozen:o}},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"tab"===s)&&(o[0]=e[0],o[1]=-1),("downArrow"===s||"enter"===s)&&(o[0]=-1,o[1]=e[1]),"shiftTab"===s&&(o[0]=e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t}(i2),fDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gO(t,r),t.prototype.jump=function(e,i){var n=this.parent.focusModule.header&&this.parent.focusModule.header.matrix.matrix,s=n&&!f(n[i[0]]),o=0!==this.parent.frozenRows&&"enter"===e,a=("leftArrow"===e||"shiftLeft"===e&&this.getGridSeletion()||"shiftTab"===e)&&(0===i[1]||i[1]===this.matrix.matrix[i[0]].indexOf(1))||i[0]<this.matrix.matrix.length-1&&"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),l=("downArrow"===e||o||"tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1))&&i[0]===this.matrix.matrix.length-1||s&&a,h="tab"===e&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1),u=("downArrow"===e||o)&&i[0]===this.matrix.matrix.length-1;return"tab"===e&&i[0]===this.matrix.matrix.length-1&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&(this.matrix.current[0]=-1),{swap:l,toHeader:a,toFrozen:h,toFrozenRight:u}},t.prototype.getTable=function(){return this.parent.getHeaderContent().querySelector(".e-frozen-right-header .e-table")},t.prototype.getNextCurrent=function(e,i,n,s){void 0===e&&(e=[]);var o=[];return("rightArrow"===s||"shiftRight"===s&&this.getGridSeletion()||"tab"===s)&&(o[0]=e[0],o[1]=-1),("upArrow"===s||"shiftEnter"===s)&&(o[0]=this.matrix.matrix.length,o[1]=e[1]),"shiftTab"===s&&(o[0]=-1===e[0]?this.matrix.matrix.length-1:e[0]-1,o[1]=this.matrix.matrix[o[0]].length),o},t.prototype.getHeaderType=function(){return"FixedRightHeaderFocus"},t}(IG),gDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zS=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},mDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return gDe(t,r),zS([E(12)],t.prototype,"pageSize",void 0),zS([E(8)],t.prototype,"pageCount",void 0),zS([E(1)],t.prototype,"currentPage",void 0),zS([E()],t.prototype,"totalRecordsCount",void 0),zS([E(!1)],t.prototype,"enableQueryString",void 0),zS([E(!1)],t.prototype,"pageSizes",void 0),zS([E(null)],t.prototype,"template",void 0),t}(Si),vDe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Sse=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},yDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return vDe(t,r),Sse([E("startsWith")],t.prototype,"operator",void 0),Sse([E(!1)],t.prototype,"ignoreAccent",void 0),t}(Si),n2=function(){return n2=Object.assign||function(r){for(var t,e=1,i=arguments.length;e<i;e++)for(var n in t=arguments[e])Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r},n2.apply(this,arguments)},Ese=function(){function r(t,e,i){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=t,this.selectionSettings=e,this.factory=i.getService("rendererFactory"),this.focus=i.getService("focus"),this.addEventListener(),this.wireEvents()}return r.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},r.prototype.onActionBegin=function(t,e){this.parent.trigger(e,this.fDataUpdate(t))},r.prototype.fDataUpdate=function(t){if(!(this.isMultiSelection||f(t.cellIndex)&&f(t.rowIndex))){var e=this.getRowObj(f(t.rowIndex)?f(t.cellIndex)?this.currentIndex:t.cellIndex.rowIndex:t.rowIndex);t.foreignKeyData=e.foreignKeyData}return t},r.prototype.onActionComplete=function(t,e){this.parent.trigger(e,this.fDataUpdate(t)),this.isMultiSelection=!1},r.prototype.getModuleName=function(){return"selection"},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+js)&&!t.querySelector("."+Ps)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),T.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),T.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},r.prototype.isEditing=function(){return("Normal"===this.parent.editSettings.mode||"Batch"===this.parent.editSettings.mode&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},r.prototype.getSelectedMovableRow=function(t){var e=this.parent;return e.isFrozenGrid()&&this.parent.getContent().querySelector("."+zn)?e.getMovableRowByIndex(t):null},r.prototype.getSelectedFrozenRightRow=function(t){var e=this.parent;return e.isFrozenGrid()&&e.getFrozenMode()===Zt&&e.getFrozenRightContent()?e.getFrozenRightRowByIndex(t):null},r.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent;if("Batch"===t.editSettings.mode&&t.editModule){var e=mO(this.parent.getCurrentViewRecords());e="Bottom"===t.editSettings.newRowPosition?e.concat(this.parent.editModule.getBatchChanges()[Af]):this.parent.editModule.getBatchChanges()[Af].concat(e);for(var i=this.parent.editModule.getBatchChanges()[bC],n=this.parent.getPrimaryKeyFieldNames()[0],s=0;s<i.length;s++)for(var o=0;o<e.length;o++)if(i[s][n]===e[o][n]){e.splice(o,1);break}return e}return t.getCurrentViewRecords()},r.prototype.selectRow=function(t,e){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection)this.addRowsToSelection([t]);else{var i=this.parent,n=i.getRowByIndex(t),s=n&&i.getRowObjectFromUID(n.getAttribute("data-uid"));if(!(this.isPartialSelection&&s&&s.isDataRow)||s.isSelectable){var l,o=this.getSelectedMovableRow(t),a=this.getSelectedFrozenRightRow(t);if(i.enableVirtualization&&t>-1){var u={selectedIndex:t,isAvailable:!0};this.parent.notify("select-virtual-Row",u);var d=i.isFrozenGrid()?i.contentModule.getRowObjectByIndex(t):null;if(!n||!i.getRowObjectFromUID(n.getAttribute("data-uid"))&&!d)return void(u.isAvailable&&!i.selectionSettings.persistSelection&&this.parent.getSelectedRecords().length>0&&this.clearRowSelection());l=d||i.getRowObjectFromUID(n.getAttribute("data-uid")).data}else l=this.getRowObj(t).data;if(this.isRowType()&&n&&!this.isEditing()){var v=n.hasAttribute("aria-selected");this.activeTarget(),e=e&&!(!this.selectedRowIndexes.length||1!==this.selectedRowIndexes.length)&&(!this.isKeyAction||!this.parent.isCheckBoxSelection)&&t===this.selectedRowIndexes[0],this.isKeyAction=!1;var C,S="cancel";e?this.rowSelectingCallBack(C,e,t,l,!1,v,S)(C):(C={data:l,rowIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:n,previousRow:i.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},C=this.addMovableArgs(C,o,a),this.parent.trigger(R8,this.fDataUpdate(C),this.rowSelectingCallBack(C,e,t,l,!1,v,S)))}}}},r.prototype.rowSelectingCallBack=function(t,e,i,n,s,o,a){var l=this;return function(h){f(h)||!0!==h[a]?(l.index=i,l.toggle=e,l.data=n,l.removed=s,o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode?(l.clearSelectedRow(i),l.selectRowCallBack()):!o&&l.selectionSettings.persistSelection&&"ResetOnRowClick"!==l.selectionSettings.checkboxMode&&l.selectRowCallBack(),"ResetOnRowClick"===l.selectionSettings.checkboxMode&&l.clearSelection(),(!l.selectionSettings.persistSelection||"ResetOnRowClick"===l.selectionSettings.checkboxMode||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())):l.disableInteracted()}},r.prototype.selectRowCallBack=function(){var e,t=this.parent,i=this.index,n=this.toggle,s=this.data,o=this.removed,a=t.getRowByIndex(i),l=this.getSelectedMovableRow(i),h=this.getSelectedFrozenRightRow(i);!n&&!o&&(this.selectedRowIndexes.indexOf(i)<=-1&&(this.updateRowSelection(a,i),this.selectMovableRow(l,h,i)),this.selectRowIndex(i)),n||(e={data:s,rowIndex:i,row:a,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:i},e=this.addMovableArgs(e,l,h),this.onActionComplete(e,TD)),this.isInteracted=!1,this.updateRowProps(i)},r.prototype.selectMovableRow=function(t,e,i){this.parent.isFrozenGrid()&&(this.updateRowSelection(t,i),this.parent.getFrozenMode()===Zt&&e&&this.updateRowSelection(e,i))},r.prototype.addMovableArgs=function(t,e,i){if(this.parent.isFrozenGrid()){var n={mRow:e,previousMovRow:this.parent.getMovableRows()[this.prevRowIndex]};this.parent.getFrozenMode()===Zt&&i&&(n.frozenRightRow=i,n.previousFrozenRightRow=this.parent.getFrozenRightDataRows()[this.prevRowIndex]),t=n2({},t,n)}return t},r.prototype.selectRowsByRange=function(t,e){this.selectRows(this.getCollectionFromIndexes(t,e)),this.selectRowIndex(e)},r.prototype.selectedDataUpdate=function(t,e,i,n,s){for(var o=0,a=n.length;o<a;o++){var l=this.parent.getDataRows()[n[o]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(n[o]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(t.push(h.data),i.push(l),e.push(h.foreignKeyData)):this.isPartialSelection&&s&&s.splice(s.indexOf(n[o]),1)}},r.prototype.selectRows=function(t){var e=this,i=this.parent,n=t.slice(),s=this.isSingleSel()?t[t.length-1]:t[0];this.isMultiSelection=!0;var o=[],a=[],l=this.getSelectedMovableRow(s),h=this.getSelectedFrozenRightRow(s),d=[];if(this.isRowType()&&!this.isEditing()){this.selectedDataUpdate(d,a,o,t,n),this.activeTarget();var m={cancel:!1,rowIndexes:n,row:o,rowIndex:s,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:d,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};m=this.addMovableArgs(m,l,h),this.parent.trigger(R8,this.fDataUpdate(m),function(v){if(f(v)||!0!==v.cancel){e.clearRow(),e.selectRowIndex(n.slice(-1)[0]);var C=function(M){if(e.updateRowSelection(i.getRowByIndex(M),M),i.isFrozenGrid()){var P=e.parent.getFrozenMode()===Zt?i.getFrozenRightRowByIndex(M):void 0;e.selectMovableRow(i.getMovableRowByIndex(M),P,M)}e.updateRowProps(s)};if(e.isSingleSel())C(s);else for(var S=0,A=n;S<A.length;S++)C(A[S]);v={rowIndexes:n,row:o,rowIndex:s,target:e.actualTarget,prevRow:i.getRows()[e.prevRowIndex],previousRowIndex:e.prevRowIndex,data:e.getSelectedRecords(),isInteracted:e.isInteracted,isHeaderCheckboxClicked:e.isHeaderCheckboxClicked,foreignKeyData:a},v=e.addMovableArgs(v,l,h),e.isRowSelected&&e.onActionComplete(v,TD),e.isInteracted=!1}else e.disableInteracted()})}},r.prototype.addRowsToSelection=function(t){var e=this.parent,n=this.target;this.isMultiSelection=!0;var s=[],o=[],a=[],l=e.getSelectedRowIndexes().concat(t),h=this.isSingleSel()?e.getRowByIndex(t[t.length-1]):e.getRowByIndex(t[0]),u=this.isSingleSel()?this.getSelectedMovableRow(t[t.length-1]):this.getSelectedMovableRow(t[0]),d=this.isSingleSel()?this.getSelectedFrozenRightRow(t[t.length-1]):this.getSelectedFrozenRightRow(t[0]);if(this.isRowType()&&!this.isEditing()||this.selectionSettings.checkboxOnly){var m,v=this.parent.getColumns().filter(function(P){return"checkbox"===P.type});this.isMultiCtrlRequest&&!v.length&&this.selectedDataUpdate(a,o,s,l);for(var C=0,S=t;C<S.length;C++){var A=S[C],_=this.getRowObj(A),M=this.selectedRowIndexes.indexOf(A)>-1;if(!(this.isPartialSelection&&_&&_.isDataRow)||_.isSelectable){if(this.selectRowIndex(A),M&&(v.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(vre,[A],[_.data],[h],[_.foreignKeyData],n),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(A),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),u&&(this.selectedRecords.splice(this.selectedRecords.indexOf(u),1),u.removeAttribute("aria-selected"),this.addRemoveClassesForRow(u,!1,null,"e-selectionbackground","e-active")),d&&(this.selectedRecords.splice(this.selectedRecords.indexOf(d),1),d.removeAttribute("aria-selected"),this.addRemoveClassesForRow(d,!1,null,"e-selectionbackground","e-active")),this.rowDeselect(kV,[A],[_.data],[h],[_.foreignKeyData],n,[u],void 0,[d]),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),m={cancel:!1,data:a.length?a:_.data,rowIndex:A,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:o.length?o:_.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,d),this.parent.trigger(R8,this.fDataUpdate(m)),!f(m)&&!0===m.cancel)return void this.disableInteracted();this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,A),this.selectMovableRow(u,d,A)}if(M||(m={data:a.length?a:_.data,rowIndex:A,row:s.length?s:h,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:o.length?o:_.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},m=this.addMovableArgs(m,u,d),this.onActionComplete(m,TD)),this.isInteracted=!1,this.updateRowProps(A),this.isSingleSel())break}}}},r.prototype.getCollectionFromIndexes=function(t,e){for(var i=[],n=t<=e?{i:t,max:e}:{i:e,max:t},s=n.i,o=n.max;s<=o;s++)i.push(s);return t>e&&i.reverse(),i},r.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},r.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&"Check"!==this.parent.checkAllRows||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},r.prototype.clearSelectedRow=function(t){if(this.toggle){var e=this.parent.getRowByIndex(t);this.disableUI||(e.removeAttribute("aria-selected"),this.addRemoveClassesForRow(e,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(e,!1),this.updateCheckBoxes(e),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(t),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(t)),1)}},r.prototype.updateRowProps=function(t){this.prevRowIndex=t,this.isRowSelected=this.selectedRowIndexes.length&&!0},r.prototype.getPkValue=function(t,e){return t&&qc(t)?vs(t,e):e[t]},r.prototype.updatePersistCollection=function(t,e){var i=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!f(t)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var n=this.getRowObj(t),s=n.data?this.getPkValue(this.primaryKey,n.data):null;if(null===s)return;n.isSelected=e,e&&!this.isPartialSelection||this.isPartialSelection&&n.isSelectable&&n.isSelected?(this.selectedRowState[s]=e,delete this.unSelectedRowState[s],this.persistSelectedData.some(function(o){return i.getPkValue(i.primaryKey,o)===s})||this.persistSelectedData.push(n.data)):this.updatePersistDelete(s)}},r.prototype.updatePersistDelete=function(t,e){var n,i=this;delete this.selectedRowState[t],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[t]=!0),this.persistSelectedData.some(function(o,a){return n=a,i.getPkValue(i.primaryKey,o)===t})&&(this.persistSelectedData.splice(n,1),e&&this.parent.partialSelectedRecords.splice(n,1))},r.prototype.updateCheckBoxes=function(t,e,i){if(!f(t)){var n=t.querySelector(".e-checkselect");f(n)||(CO(n.nextElementSibling,e),WS(n,e),(f(this.checkedTarget)||!f(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(i))}},r.prototype.updateRowSelection=function(t,e){if(t){this.selectedRowIndexes.push(e);var i=this.selectedRowIndexes.length;if(this.parent.isFrozenGrid()&&i>1&&this.selectedRowIndexes[i-2]===this.selectedRowIndexes[i-1]&&this.selectedRowIndexes.pop(),this.selectedRecords.push(t),t.setAttribute("aria-selected","true"),this.updatePersistCollection(t,!0),this.updateCheckBoxes(t,!0),this.addRemoveClassesForRow(t,!0,null,"e-selectionbackground","e-active"),!this.preventFocus){var n=this.focus.getPrevIndexes().cellIndex?t.cells[this.focus.getPrevIndexes().cellIndex]:t.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&2===this.mouseButton&&(n=this.parent.contextMenuModule.cell),!n)return;this.focus.onClick({target:n},!0)}}},r.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=mO(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!f(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var t=this.parent.element.querySelector(".e-gridpopup").querySelector("span");t.classList.contains("e-rowselect")&&t.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},r.prototype.clearRowSelection=function(){var t=this;if(this.isRowSelected){for(var e=this.parent,i=this.parent.getDataRows(),n=[],s=[],o=[],a=[],l=[],h=[],u=this.target,d=0,m=this.selectedRowIndexes.length;d<m;d++){var v="Batch"===this.parent.editSettings.mode?this.parent.getRows()[this.selectedRowIndexes[d]]:this.parent.getDataRows()[this.selectedRowIndexes[d]],C=this.getRowObj(v);if(C&&(n.push(C.data),s.push(v),l.push(this.selectedRowIndexes[d]),h.push(C.foreignKeyData)),e.isFrozenGrid()){var S=e.getMovableRows();if(S&&S.length&&o.push(S[this.selectedRowIndexes[d]]),e.getFrozenMode()===Zt){var A=e.getFrozenRightRows();A&&A.length&&a.push(A[this.selectedRowIndexes[d]])}}}this.selectionSettings.persistSelection&&"ResetOnRowClick"!==this.selectionSettings.checkboxMode&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(vre,l,n,s,h,u,o,function(){if(t.isCancelDeSelect&&(t.isRowClicked||t.checkSelectAllClicked||t.isInteracted&&!t.parent.isPersistSelection)){if(t.parent.isPersistSelection)if("Intermediate"===t.getCheckAllStatus(t.parent.element.querySelector(".e-checkselectall")))for(var _=0;_<t.selectedRecords.length;_++)t.updatePersistCollection(t.selectedRecords[_],!0);else t.parent.checkAllRows="Check",t.updatePersistSelectedData(!0);t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}else{for(var M=[].slice.call(i.filter(function(ne){return ne.hasAttribute("aria-selected")})),P=0;P<M.length;P++)t.disableUI||(M[P].removeAttribute("aria-selected"),t.addRemoveClassesForRow(M[P],!1,!0,"e-selectionbackground","e-active")),t.isPrevRowSelection||t.updatePersistCollection(M[P],!1),t.updateCheckBoxes(M[P]);_=0;for(var B=t.selectedRowIndexes.length;_<B;_++){var j=t.getSelectedMovableRow(t.selectedRowIndexes[_]);j&&(t.disableUI||(j.removeAttribute("aria-selected"),t.addRemoveClassesForRow(j,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(j),t.isPrevRowSelection||t.updatePersistCollection(j,!1));var G=t.getSelectedFrozenRightRow(t.selectedRowIndexes[_]);G&&(t.disableUI||(G.removeAttribute("aria-selected"),t.addRemoveClassesForRow(G,!1,!0,"e-selectionbackground","e-active")),t.updateCheckBoxes(G),t.isPrevRowSelection||t.updatePersistCollection(G,!1))}t.selectedRowIndexes=[],t.selectedRecords=[],t.isRowSelected=!1,t.selectRowIndex(-1),t.isPrevRowSelection=!1,t.rowDeselect(kV,l,n,s,h,u,o,void 0,a),t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))}},a)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},r.prototype.rowDeselect=function(t,e,i,n,s,o,a,l,h){var u=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&"space"===this.focus.activeKey)||!this.selectionSettings.persistSelection){var v={rowIndex:e[0],data:!this.selectionSettings.persistSelection||"Uncheck"!==this.parent.checkAllRows||1===e.length&&1===this.deSelectedData.length||"ResetOnRowClick"===this.selectionSettings.checkboxMode?i:this.deSelectedData,foreignKeyData:s,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};"rowDeselected"===t&&delete v.cancel;var C="row",_="rowIndexes",M="data",P="foreignKeyData";v[C]=n,v.target=this.actualTarget,this.actualTarget&&!f(U(this.actualTarget,"thead"))||e.length>1?(v.rowIndex=e[0],v[_]=e):1===e.length&&(v[M]=v[M][0],v[C]=v[C][0],v[P]=v[P][0],this.isAddRowsToSelection&&(v[_]=e)),this.parent.trigger(t,this.parent.isFrozenGrid()?n2({},v,{mRow:a,frozenRightRow:h}):v,function(j){u.isCancelDeSelect=j.cancel,(!u.isCancelDeSelect||!u.isRowClicked&&!u.isInteracted&&!u.checkSelectAllClicked)&&(u.updatePersistCollection(n[0],!1),u.updateCheckBoxes(n[0],void 0,e[0]),a&&u.updateCheckBoxes(a[0],void 0,e[0]),h&&u.updateCheckBoxes(h[0],void 0,e[0])),void 0!==l&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&void 0!==l&&l()},r.prototype.getRowObj=function(t){return void 0===t&&(t=this.currentIndex),f(t)?{}:("number"==typeof t&&(t=this.parent.getRowByIndex(t)),t&&this.parent.getRowObjectFromUID(t.getAttribute("data-uid"))||{})},r.prototype.getSelectedMovableCell=function(t){var e=this.parent,i=e.getColumnByIndex(t.cellIndex);return e.isFrozenGrid()&&"movable"===i.getFreezeTableName()?e.getMovableCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex)):null},r.prototype.selectCell=function(t,e){if(this.isCellType()){var s,i=this.parent,n=this.getSelectedMovableCell(t);n||(n=i.getCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex))),this.currentIndex=t.rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex];if(this.isCellType()&&n&&!this.isEditing()){var a=n.classList.contains("e-cellselectionbackground");(e=e&&!qt(this.prevCIdxs)&&t.rowIndex===this.prevCIdxs.rowIndex&&t.cellIndex===this.prevCIdxs.cellIndex&&a)?this.successCallBack(s,e,t,n,o)(s):((s={data:o,cellIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1}).currentCell=n,s.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(ZL,this.fDataUpdate(s),this.successCallBack(s,e,t,n,o)),this.cellselected=!0)}}},r.prototype.successCallBack=function(t,e,i,n,s){var o=this;return function(a){var h="currentCell";if((f(a)||!0!==a.cancel)&&(e||(a[h]=a[h]?a[h]:n),o.clearCell(),e||o.updateCellSelection(n,i.rowIndex,i.cellIndex),!e)){var u={data:s,cellIndex:i,currentCell:n,selectedRowCellIndex:o.selectedRowCellIndexes,previousRowCell:o.prevECIdxs?o.getCellIndex(o.prevECIdxs.rowIndex,o.prevECIdxs.cellIndex):void 0};u.previousRowCellIndex=o.prevECIdxs,o.updateCellProps(i,i),o.onActionComplete(u,RV)}}},r.prototype.getCellIndex=function(t,e){return this.parent.getFrozenColumns()&&e>=this.parent.getFrozenColumns()?this.parent.getMovableCellFromIndex(t,e):this.parent.getCellFromIndex(t,e)},r.prototype.selectCellsByRange=function(t,e){var i=this;if(this.isCellType()){var n=this.parent,s=this.getSelectedMovableCell(t),o=n.getFrozenColumns();s||(s=n.getCellFromIndex(t.rowIndex,t.cellIndex));var a,l,d,h=t,u=e=e||t;this.currentIndex=t.rowIndex;var v=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var C={data:v,cellIndex:t,currentCell:s,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};C.previousRowCellIndex=this.prevECIdxs,this.parent.trigger(ZL,this.fDataUpdate(C),function(A){if(f(A)||!0!==A.cancel){if(i.clearCell(),t.rowIndex>e.rowIndex){var _=t;t=e,e=_}for(var M=t.rowIndex;M<=e.rowIndex;M++){i.selectionSettings.cellSelectionMode.indexOf("Box")<0?(a=M===t.rowIndex?t.cellIndex:0,l=M===e.rowIndex?e.cellIndex:i.getLastColIndex(M)):(a=t.cellIndex,l=e.cellIndex),d=[];for(var P=a<l?a:l,B=a>l?a:l;P<=B;P++)(s=o?P<o?n.getCellFromIndex(M,P):n.getMovableCellFromIndex(M,P):n.getCellFromIndex(M,P))&&(d.push(P),i.updateCellSelection(s),i.addAttribute(s));i.selectedRowCellIndexes.push({rowIndex:M,cellIndexes:d})}var j={data:v,cellIndex:u,currentCell:n.getCellFromIndex(u.rowIndex,u.cellIndex),selectedRowCellIndex:i.selectedRowCellIndexes,previousRowCell:i.prevECIdxs?i.getCellIndex(i.prevECIdxs.rowIndex,i.prevECIdxs.cellIndex):void 0};j.previousRowCellIndex=i.prevECIdxs,i.isDragged||(i.onActionComplete(j,RV),i.cellselected=!0),i.updateCellProps(h,u)}})}}},r.prototype.selectCells=function(t){if(this.isCellType()){var e=this.parent,i=this.getSelectedMovableCell(t[0]),n=e.getFrozenColumns();i||(i=e.getCellFromIndex(t[0].rowIndex,t[0].cellIndexes[0])),this.currentIndex=t[0].rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){var o={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};o.previousRowCellIndex=this.prevECIdxs,this.onActionBegin(o,ZL);for(var l=0,h=t.length;l<h;l++)for(var u=0,d=t[l].cellIndexes.length;u<d;u++)(i=n?t[l].cellIndexes[u]<n?e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getMovableCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]):e.getCellFromIndex(t[l].rowIndex,t[l].cellIndexes[u]))&&(this.updateCellSelection(i),this.addAttribute(i),this.addRowCellIndex({rowIndex:t[l].rowIndex,cellIndex:t[l].cellIndexes[u]}));this.updateCellProps({rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]},{rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]});var m={data:s,cellIndex:t[0].cellIndexes[0],currentCell:i,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0};m.previousRowCellIndex=this.prevECIdxs,this.onActionComplete(m,RV)}}},r.prototype.addCellsToSelection=function(t){if(this.isCellType()){var i,n,e=this.parent;this.currentIndex=t[0].rowIndex;var o=this.getCurrentBatchRecordChanges()[this.currentIndex],a=e.getFrozenLeftCount(),l=e.getMovableColumnsCount();if(!this.isSingleSel()&&this.isCellType()&&!this.isEditing()){this.hideAutoFill();var u,h=e.getColumnByIndex(t[0].cellIndex);xC(this.parent,function(ne,fe){u=fe[t[0].rowIndex]},[h.getFreezeTableName()&&h.getFreezeTableName()!==rs?[]:e.getRowsObject(),"movable"===h.getFreezeTableName()?e.getMovableRowsObject():[],h.getFreezeTableName()===or?e.getFrozenRightRowsObject():[]]),e.groupSettings.columns.length>0&&(u=e.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var d=[],m=0,v=t;m<v.length;m++){for(var C=v[m],S=0,A=this.selectedRowCellIndexes.length;S<A;S++)if(this.selectedRowCellIndexes[S].rowIndex===C.rowIndex){n=S;break}(i=this.getSelectedMovableCell(C))||(i=e.getCellFromIndex(C.rowIndex,this.getColIndex(C.rowIndex,C.cellIndex)));var _="movable"===h.getFreezeTableName()?C.cellIndex-a:h.getFreezeTableName()===or?C.cellIndex-(a+l):C.cellIndex;d.push(e.groupSettings.columns.length>0?u.cells[_+e.groupSettings.columns.length].foreignKeyData:u.cells[_].foreignKeyData);var M={cancel:!1,data:o,cellIndex:t[0],isShiftPressed:this.isMultiShiftRequest,currentCell:i,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?e.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},P="previousRowCellIndex";M[P]=this.prevECIdxs;var B=n>-1;if(B){var j=this.selectedRowCellIndexes[n].cellIndexes;j.indexOf(C.cellIndex)>-1?(this.cellDeselect(yre,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],d),j.splice(j.indexOf(C.cellIndex),1),0===j.length&&this.selectedRowCellIndexes.splice(n,1),i.classList.remove("e-cellselectionbackground"),i.removeAttribute("aria-selected"),this.cellDeselect(bre,[{rowIndex:C.rowIndex,cellIndexes:[C.cellIndex]}],o,[i],d)):(B=!1,this.onActionBegin(M,ZL),this.addRowCellIndex({rowIndex:C.rowIndex,cellIndex:C.cellIndex}),this.updateCellSelection(i),this.addAttribute(i))}else{if(this.onActionBegin(M,ZL),!f(M)&&!0===M.cancel)return;this.updateCellSelection(i,C.rowIndex,C.cellIndex)}if(!B){var G={data:o,cellIndex:t[0],currentCell:i,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};G[P]=this.prevECIdxs,this.onActionComplete(G,RV),this.cellselected=!0}this.updateCellProps(C,C)}}}},r.prototype.getColIndex=function(t,e){var i=this.parent.isFrozenGrid(),n=this.parent.getColumnByIndex(e),s=Hse(this.parent,n,t);if(s)for(var o=0;o<s.length;o++)if(parseInt(s[o].getAttribute(Us),10)===e)return i&&("movable"===n.getFreezeTableName()?o+=this.parent.getFrozenLeftCount():n.getFreezeTableName()===or&&(o+=this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount())),o;return-1},r.prototype.getLastColIndex=function(t){var e=this.parent.getFrozenColumns()?this.parent.getMovableDataRows()[t].querySelectorAll("td.e-rowcell"):this.parent.getDataRows()[t].querySelectorAll("td.e-rowcell");return parseInt(e[e.length-1].getAttribute(Us),10)},r.prototype.clearCell=function(){this.clearCellSelection()},r.prototype.cellDeselect=function(t,e,i,n,s){n[0]&&n[0].classList.contains(BS)&&this.updateCheckBoxes(U(n[0],"tr"));var a={cells:n,data:i,cellIndexes:e,foreignKeyData:s,cancel:!1};this.parent.trigger(t,a),this.isPreventCellSelect=a.cancel},r.prototype.updateCellSelection=function(t,e,i){f(e)||this.addRowCellIndex({rowIndex:e,cellIndex:i}),t.classList.add("e-cellselectionbackground"),t.classList.contains(BS)&&this.updateCheckBoxes(U(t,"tr"),!0),this.addAttribute(t)},r.prototype.addAttribute=function(t){this.target=t,f(t)||(t.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:t},!0))},r.prototype.updateCellProps=function(t,e){this.prevCIdxs=t,this.prevECIdxs=e,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},r.prototype.addRowCellIndex=function(t){for(var e,i,n=0,s=this.selectedRowCellIndexes.length;n<s;n++)if(this.selectedRowCellIndexes[n].rowIndex===t.rowIndex){e=!0,i=n;break}e?this.selectedRowCellIndexes[i].cellIndexes.indexOf(t.cellIndex)<0&&this.selectedRowCellIndexes[i].cellIndexes.push(t.cellIndex):this.selectedRowCellIndexes.push({rowIndex:t.rowIndex,cellIndexes:[t.cellIndex]})},r.prototype.clearCellSelection=function(){if(this.isCellSelected){var t=this.parent,e=this.getSelectedCellsElement(),i=this.selectedRowCellIndexes,n=[],s=[],o=[],a=this.getCurrentBatchRecordChanges(),l=t.isFrozenGrid();this.hideAutoFill();for(var h=0,u=i.length;h<u;h++){n.push(a[i[h].rowIndex]);for(var d=this.getRowObj(i[h].rowIndex),m=0,v=i[h].cellIndexes.length;m<v;m++)if(l){var C=t.getColumnByIndex(i[h].cellIndexes[m]);s.push(BG(this.parent,C,i[h].rowIndex,i[h].cellIndexes[m]))}else d.cells&&o.push(d.cells[i[h].cellIndexes[m]].foreignKeyData),s.push(t.getCellFromIndex(i[h].rowIndex,i[h].cellIndexes[m]))}if(this.cellDeselect(yre,i,n,s,o),!0===this.isPreventCellSelect)return;for(h=0,u=e.length;h<u;h++)e[h].classList.remove("e-cellselectionbackground"),e[h].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(bre,i,n,s,o)}},r.prototype.getSelectedCellsElement=function(){var i,t=this.parent,e=t.getDataRows();t.isFrozenGrid()&&(i=t.getMovableDataRows(),e=t.addMovableRows(e,i),t.getFrozenMode()===Zt&&(e=t.addMovableRows(e,t.getFrozenRightDataRows())));for(var n=[],s=0,o=e.length;s<o;s++)n=n.concat([].slice.call(e[s].getElementsByClassName("e-cellselectionbackground")));return n},r.prototype.mouseMoveHandler=function(t){t.preventDefault();var l,e=this.parent.element.getBoundingClientRect(),i=this.x,n=this.y,s=CC(t),o=s.x-e.left,a=s.y-e.top,h=U(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=U(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),i>o&&(l=o,o=i,i=l),n>a&&(l=a,a=n,n=l),this.element.style.left=i+"px",this.element.style.top=n+"px",this.element.style.width=o-i+"px",this.element.style.height=a-n+"px"),h&&!t.ctrlKey&&!t.shiftKey){var u=parseInt(h.getAttribute(Ai),10);if(this.isCellDrag){var d=pe(t.target,tn);d&&(this.startAFCell=this.startCell,this.endAFCell=pe(t.target,tn),this.selectLikeExcel(t,u,parseInt(d.getAttribute(Us),10)))}else this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,u),this.isRowDragSelected=!0}},r.prototype.selectLikeExcel=function(t,e,i){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(t)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:e,cellIndex:i}),this.drawBorders())},r.prototype.drawBorders=function(){"BoxWithBorder"===this.selectionSettings.cellSelectionMode&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders()):this.showHideBorders("none")},r.prototype.isLastCell=function(t){var e=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return e[e.length-1]===t},r.prototype.isLastRow=function(t){var e=[].slice.call(U(t,rt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[e.length-1]},r.prototype.isFirstRow=function(t){var e=[].slice.call(U(t,rt).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===e[0]},r.prototype.isFirstCell=function(t){return[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"))[0]===t},r.prototype.setBorders=function(t,e,i){var n=[].slice.call(t.getElementsByClassName("e-cellselectionbackground")).filter(function(S){return""===S.style.display});if(n.length){var s=this.parent.isFrozenGrid(),o=n[0],a=n[n.length-1],l=o.getBoundingClientRect(),h=a.getBoundingClientRect(),u=o.offsetParent.getBoundingClientRect(),d=!this.isLastRow(a)||"1"!==i&&"2"!==i&&"5"!==i?0:2,m=this.parent.frozenRows&&("1"===i||"2"===i)&&this.isFirstRow(o)?1.5:0,v=s&&("2"===i||"4"===i)&&this.isFirstCell(o)?1:0,C=("Right"!==this.parent.getFrozenMode()||"1"!==i&&"3"!==i)&&(this.parent.getFrozenMode()!==Zt||"5"!==i&&"6"!==i)||!this.isFirstCell(o)?0:1;this.parent.enableRtl?(e.style.right=u.right-l.right-v+"px",e.style.width=l.right-h.left+v+1+"px"):(e.style.left=l.left-u.left-v-C+"px",e.style.width=h.right-l.left+v-C+1+"px"),e.style.top=l.top-u.top-m+"px",e.style.height=h.top-l.top>0?h.top-u.top+h.height+1-(l.top-u.top)-d+m+"px":h.height+m-d+1+"px",this.selectDirection+=i}else e.style.display="none"},r.prototype.positionBorders=function(){this.updateStartEndCells(),this.startCell&&this.bdrElement&&this.selectedRowCellIndexes.length&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.contentModule.getMovableContent(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Zt&&this.setBorders(this.parent.contentModule.getFrozenRightContent(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.headerModule.getMovableHeader(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Zt&&this.setBorders(this.parent.headerModule.getFrozenRightHeader(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},r.prototype.applyBothFrozenBorders=function(t){var e=this.parent.enableRtl;switch(t.length){case 6:this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right;break;case 4:t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom),t.includes("2")&&t.includes("4")&&t.includes("5")&&t.includes("6")&&(this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom);break;case 2:t.includes("1")&&(this.mcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),t.includes("2")&&(this.bdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),t.includes("3")&&(this.mhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),t.includes("4")&&(this.fhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=e?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),t.includes("5")&&(this.mcBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),t.includes("6")&&(this.mhBdrElement.style.borderWidth=e?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border)}},r.prototype.applyBorders=function(t){var e=this.parent.enableRtl;if(this.parent.getFrozenMode()===Zt)this.applyBothFrozenBorders(t);else switch(t.length){case 4:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=e?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=e?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=e?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=e?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=e?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=e?this.top_left:this.top_right);break;case 2:"Right"===this.parent.getFrozenMode()?(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=t.includes("2")?e?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=t.includes("1")?e?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:e?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:e?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border))}},r.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.contentModule.getMovableContent().appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Zt&&(this.frcBdrElement=this.parent.contentModule.getFrozenRightContent().appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.headerModule.getMovableHeader().appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Zt&&(this.frhBdrElement=this.parent.headerModule.getFrozenRightHeader().appendChild(ti("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},r.prototype.showHideBorders=function(t){this.bdrElement&&(this.bdrElement.style.display=t,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.display=t,this.parent.getFrozenMode()===Zt&&(this.frcBdrElement.style.display=t)),this.parent.frozenRows&&(this.fhBdrElement.style.display=t),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement.style.display=t,this.parent.getFrozenMode()===Zt&&(this.frhBdrElement.style.display=t)))},r.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},r.prototype.positionAFBorders=function(){if(this.startCell&&this.bdrAFLeft){var t=this.startAFCell.getBoundingClientRect(),e=this.endAFCell.getBoundingClientRect(),i=e.top-t.top>0?1:0,n=e.top-t.top>=0&&(pe(this.startAFCell,zn)||pe(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,s=(pe(this.startAFCell,zn)||pe(this.startAFCell,Zn))&&this.isFirstCell(this.startAFCell)?1:0,o=this.isLastRow(this.endAFCell)&&(pe(this.endAFCell,zn)||pe(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),d=this.startAFCell.offsetParent.parentElement.scrollTop-this.startAFCell.offsetTop,m=this.startAFCell.offsetParent.parentElement.scrollLeft-this.startAFCell.offsetLeft,v=this.parent.element.clientHeight,C=this.parent.element.clientWidth;d=d>0?Math.floor(d)-1:0,m=m>0?m:0;var S=t.left-l.left;if(this.parent.enableRtl){var _=pe(this.startAFCell,zn)||pe(this.startAFCell,Zn)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-e.right-2+e.width+"px",this.bdrAFLeft.style.width=C<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-t.right-s+_-1+"px",this.bdrAFTop.style.left=e.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-s+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=S-s+m-1+"px",this.bdrAFRight.style.left=e.left-l.left-2+e.width+"px",this.bdrAFRight.style.width=C<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=S+m-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-s+1+"px",C<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var A=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-C;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-A+"px"}if(this.bdrAFLeft.style.top=t.top-l.top-n+d+"px",this.bdrAFLeft.style.height=e.top-t.top>0?e.top-a.top+e.height+1-(t.top-a.top)+n-o-d+"px":e.height+n-o-d+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-i-1+"px",this.bdrAFBottom.style.width=v<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,v<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var M=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-v;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-M+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},r.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(ti("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(ti("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(ti("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(ti("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},r.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},r.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},r.prototype.updateValue=function(t,e,i){var n=this.createBeforeAutoFill(t,e,i);if(!n.cancel){var s=this.parent.getColumnByIndex(e);this.parent.editModule&&i&&this.parent.editModule.updateCell(t,s.field,"number"===s.type?parseFloat(n.value):n.value)}},r.prototype.createBeforeAutoFill=function(t,e,i){var s={column:this.parent.getColumnByIndex(e),value:i.innerText};return this.parent.trigger("beforeAutoFill",s),s},r.prototype.getAutoFillCells=function(t,e){var i=".e-cellselectionbackground",n=[].slice.call(this.parent.getDataRows()[t].querySelectorAll(i));return this.parent.isFrozenGrid()&&(n=n.concat([].slice.call(this.parent.getMovableDataRows()[t].querySelectorAll(i))),this.parent.getFrozenMode()===Zt&&(n=n.concat([].slice.call(this.parent.getFrozenRightDataRows()[t].querySelectorAll(i))))),n},r.prototype.selectLikeAutoFill=function(t,e){var i=parseInt(pe(this.startAFCell,vn).getAttribute(Ai),10),n=parseInt(this.startAFCell.getAttribute(Us),10),s=parseInt(pe(this.endAFCell,vn).getAttribute(Ai),10),o=parseInt(this.endAFCell.getAttribute(Us),10),a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case!e&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!pe(t.target,tn):this.startAFCell=this.parent.getCellFromIndex(i,n),this.endAFCell=this.parent.getCellFromIndex(i+a,n+l),this.drawAFBorders();break;case this.autoFillRLselection&&n+l<o&&o-n-l+1>s-i-a&&o-n-l+1>i-s:if(this.endAFCell=this.parent.getCellFromIndex(i+a,o),s=parseInt(pe(this.endAFCell,vn).getAttribute(Ai),10),o=parseInt(this.endAFCell.getAttribute(Us),10),e){for(var h=parseInt(this.endCell.getAttribute(Us),10),u=i;u<=s;u++)for(var d=this.getAutoFillCells(u,n),m=0,v=h+1;v<=o;v++)m>l&&(m=0),this.updateValue(u,v,d[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:this.startCellIndex},{rowIndex:s,cellIndex:o})}else this.drawAFBorders();break;case this.autoFillRLselection&&n>o&&n-o+1>s-i-a&&n-o+1>i-s:if(this.startAFCell=this.parent.getCellFromIndex(i,o),this.endAFCell=this.endCell,e){for(u=i;u<=i+a;u++)for((d=this.getAutoFillCells(u,n)).reverse(),m=0,v=this.startCellIndex-1;v>=o;v--)m>l&&(m=0),this.updateValue(u,v,d[m]),m++;this.selectCellsByRange({rowIndex:i,cellIndex:o},{rowIndex:i+a,cellIndex:this.startCellIndex+l})}else this.drawAFBorders();break;case i>s:if(this.startAFCell=this.parent.getCellFromIndex(s,n),this.endAFCell=this.endCell,e){var S=C=parseInt(this.endCell.parentElement.getAttribute(Ai),10);for(u=i-1;u>=s;u--)for(S===this.startIndex-1&&(S=C),d=this.getAutoFillCells(S,n),m=0,S--,v=this.startCellIndex;v<=this.startCellIndex+l;v++)this.updateValue(u,v,d[m]),m++;this.selectCellsByRange({rowIndex:s,cellIndex:n+l},{rowIndex:i+a,cellIndex:n})}else this.drawAFBorders();break;default:if(this.endAFCell=this.parent.getCellFromIndex(s,n+l),e){var C=parseInt(this.endCell.parentElement.getAttribute(Ai),10);for(S=this.startIndex,u=C+1;u<=s;u++){S===C+1&&(S=this.startIndex),d=this.getAutoFillCells(S,n),S++,m=0;for(var A=this.startCellIndex;A<=this.startCellIndex+l;A++)this.updateValue(u,A,d[m]),m++}this.selectCellsByRange({rowIndex:C-a,cellIndex:n},{rowIndex:s,cellIndex:n+l})}else this.drawAFBorders()}},r.prototype.mouseUpHandler=function(t){document.body.classList.remove("e-disableuserselect"),this.element&&Be(this.element),this.mUPTarget=this.isDragged&&1===this.selectedRowCellIndexes.length&&1===this.selectedRowCellIndexes[0].cellIndexes.length?pe(t.target,tn):null;var e=U(t.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&"Cell"===this.selectionSettings.mode&&e&&e.classList.contains(tn)){var n=parseInt(e.parentElement.getAttribute(Ai),10),s=parseInt(e.getAttribute(Us),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:n,cellIndex:s})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){var o=pe(t.target,tn);this.endAFCell=o||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(t,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.isAutoFillSel=!1}T.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&T.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),T.remove(document,"mouseup",this.mouseUpHandler)},r.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},r.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var t=parseInt(this.target.getAttribute(Us),10),e=parseInt(this.target.getAttribute("index"),10),n=this.getAutoFillCells(this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,t).filter(function(C){return""===C.style.display}),s=this.parent.getColumnByIndex(t),o="movable"===s.getFreezeTableName(),a=e<this.parent.frozenRows,l=this.parent.getFrozenMode()===Zt&&s.getFreezeTableName()===or;re("#"+this.parent.element.id+"_autofill",pe(this.target,sr))||(re("#"+this.parent.element.id+"_autofill",this.parent.element)&&re("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=ti("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",a?o?this.parent.headerModule.getMovableHeader().appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):o?this.parent.contentModule.getMovableContent().appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getFrozenRightHeader().appendChild(this.autofill):this.parent.getFrozenRightContent().appendChild(this.autofill)));var h=n[n.length-1];if(h&&h.offsetParent){var u=h.getBoundingClientRect(),d=h.offsetParent.getBoundingClientRect(),m=this.isLastCell(h)?4:0,v=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=d.right-u.right+u.width-4-m+"px":this.autofill.style.left=u.left-d.left+u.width-4-m+"px",this.autofill.style.top=u.top-d.top+u.height-5-v+"px"}this.autofill.style.display=""}else this.hideAutoFill()},r.prototype.mouseDownHandler=function(t){this.mouseButton=t.button;var n,e=t.target,i=this.parent,s=pe(e,"e-grid");if(!(s&&s.id!==i.element.id||pe(e,Ms)&&!this.parent.frozenRows||pe(e,"e-editedbatchcell")||pe(e,Va))){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),pe(e,tn)&&!t.shiftKey&&!t.ctrlKey){if(i.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,n=!0;else if(i.allowRowDragAndDrop&&!i.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||U(e,"td").classList.contains("e-selectionbackground"))return void(this.isDragged=!1);n=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),i.getContent().appendChild(this.element)}n&&this.enableDrag(t,!0)}this.updateStartEndCells(),(e.classList.contains("e-autofill")||e.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t))}},r.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=t[0],this.endCell=t[t.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ai),10),this.startCellIndex=parseInt(pe(this.startCell,tn).getAttribute(Us),10))},r.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ai),10),this.startCellIndex=parseInt(pe(this.startCell,tn).getAttribute(Us),10))},r.prototype.enableDrag=function(t,e){var i=this.parent;if(e){var n=U(t.target,"tr");this.startDIndex=parseInt(n.getAttribute(Ai),10),this.startDCellIndex=parseInt(pe(t.target,tn).getAttribute(Us),10)}document.body.classList.add("e-disableuserselect");var s=i.element.getBoundingClientRect(),o=CC(t);this.x=o.x-s.left,this.y=o.y-s.top,T.add(i.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&T.add(i.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),T.add(document,"mouseup",this.mouseUpHandler,this)},r.prototype.clearSelAfterRefresh=function(t){var e=this.parent.enableInfiniteScrolling&&"infiniteScroll"===t.requestType;if("virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&!e&&this.clearSelection(),("virtualscroll"===t.requestType||e)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var i=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),n=[];this.selectedRowState={},this.persistSelectedData=[];for(var s=0;s<i.length;s++){n.push(i[s].index);var o=this.getPkValue(this.primaryKey,i[s].data);this.selectedRowState[o]=!0,this.persistSelectedData.push(i[s].data)}this.selectedRowIndexes=n}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Nr,handler:this.enableAfterRender},{event:Ba,handler:this.initializeSelection},{event:"rowselected",handler:this.onActionComplete},{event:"cellselected",handler:this.onActionComplete},{event:Ha,handler:this.onPropertyChanged},{event:PV,handler:this.onCellFocused},{event:Wre,handler:this.clearSelAfterRefresh},{event:kD,handler:this.columnPositionChanged},{event:Zr,handler:this.initialEnd},{event:MV,handler:this.rowsRemoved},{event:xo,handler:this.refreshHeader},{event:dn,handler:this.destroy}],uo(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(dr,this.actionBeginFunction),this.parent.addEventListener(zi,this.actionCompleteFunction),this.addEventListener_checkbox())},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(uo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(dr,this.actionBeginFunction),this.parent.removeEventListener(zi,this.actionCompleteFunction),this.removeEventListener_checkbox())},r.prototype.wireEvents=function(){this.isMacOS=-1!==navigator.userAgent.indexOf("Mac OS"),this.isMacOS?(T.add(this.parent.element,"keydown",this.keyDownHandler,this),T.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||T.add(this.parent.element,"keydown",this.keyDownHandler,this)},r.prototype.unWireEvents=function(){this.isMacOS?(T.remove(this.parent.element,"keydown",this.keyDownHandler),T.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||T.remove(this.parent.element,"keydown",this.keyDownHandler)},r.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},r.prototype.refreshHeader=function(){this.setCheckAllState()},r.prototype.rowsRemoved=function(t){for(var e=0;e<t.records.length;e++){var i=this.getPkValue(this.primaryKey,t.records[e]);delete this.selectedRowState[i],--this.totalRecordsCount}this.setCheckAllState()},r.prototype.beforeFragAppend=function(t){"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&this.clearSelection()},r.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.initPerisistSelection())},r.prototype.render=function(t){T.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),T.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){var e=this.parent;!f(t.properties.type)&&"Single"===this.selectionSettings.type&&(this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()),(!f(t.properties.mode)||!f(t.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection(),this.parent.getColumns().filter(function(n){return"checkbox"===n.type}).length&&(e.isCheckBoxSelection="ResetOnRowClick"!==this.selectionSettings.checkboxMode),this.drawBorders()}},r.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},r.prototype.initialEnd=function(t){var e=this.parent.isFrozenGrid(),i=this.parent.getFrozenMode()===Zt;(!e||e&&!i&&!t.args.isFrozen||i&&t.args.renderFrozenRightContent)&&!this.selectedRowIndexes.length&&(this.parent.off(Zr,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},r.prototype.checkBoxSelectionChanged=function(){var t=this.parent;t.off(Zr,this.checkBoxSelectionChanged);var e=t.getColumns().filter(function(i){return"checkbox"===i.type});e.length>0&&(t.isCheckBoxSelection=!0,this.chkField=e[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,f(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(t.selectionSettings.type="Multiple",t.dataBind()):this.initPerisistSelection()),!t.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},r.prototype.initPerisistSelection=function(){var t=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(t.isPersistSelection=!1,this.selectedRowState={})},r.prototype.ensureCheckboxFieldSelection=function(){var t=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!t.enableVirtualization&&this.chkField&&(t.isPersistSelection&&0===Object.keys(this.selectedRowState).length||!t.isPersistSelection)){var e=this.parent.getDataModule(),i=(new ii).where(this.chkField,"equal",!0);i.params||(i.params=this.parent.query.params);var n=e.getData({},i),s=this;this.parent.showSpinner(),n.then(function(o){s.dataSuccess(o.result),s.refreshPersistSelection(),s.parent.hideSpinner()})}},r.prototype.dataSuccess=function(t){for(var e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);f(this.selectedRowState[i])&&t[e][this.chkField]&&(this.selectedRowState[i]=t[e][this.chkField])}this.persistSelectedData=t},r.prototype.setRowSelection=function(t){if(this.parent.getDataModule().isRemote())if(t)for(var m=Object.keys(this.selectedRowState),v=Object.keys(this.unSelectedRowState),C=0,S=this.parent.currentViewData;C<S.length;C++){var A=(h=S[C])[this.primaryKey].toString();-1===m.indexOf(A)&&-1===v.indexOf(A)&&(this.selectedRowState[h[this.primaryKey]]=!0)}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(t)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=0,n=this.parent.getRowsObject().filter(function(_){return _.isSelectable});i<n.length;i++)this.selectedRowState[this.getPkValue(this.primaryKey,n[i].data)]=!0;else{var o=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?o:o.records;a<l.length;a++)this.selectedRowState[this.getPkValue(this.primaryKey,h=l[a])]=!0;else for(var u=0,d=o;u<d.length;u++){var h;this.selectedRowState[this.getPkValue(this.primaryKey,h=d[u])]=!0}}else this.selectedRowState={}},r.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},r.prototype.refreshPersistSelection=function(){var t=this.parent.getRows();if(this.parent.isCheckBoxSelection&&this.parent.isFrozenGrid()&&(this.parent.getMovableContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getMovableRows()),this.parent.getFrozenMode()===Zt&&this.parent.getFrozenRightContentTbody().querySelector(".e-checkselect")&&(t=this.parent.getFrozenRightRows())),this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),null!==t&&t.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var n=[],s=0;s<t.length;s++){var o=this.getRowObj(t[s]),a=o&&o.data?this.getPkValue(this.primaryKey,o.data):null;if(null===a)return;if(!this.isPartialSelection||o.isSelectable){var l=void 0,h=t[s].querySelector(".e-checkselect");this.selectedRowState[a]||"Check"===this.parent.checkAllRows&&this.selectedRowState[a]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(a)<0||"Uncheck"===this.parent.checkAllRows&&this.chkAllCollec.indexOf(a)>0&&!this.parent.selectedRowIndex||"Intermediate"===this.parent.checkAllRows&&!f(this.chkField)&&o.data[this.chkField]?(n.push(parseInt(t[s].getAttribute(Ai),10)),l=!0):(l=!1,this.checkedTarget!==h&&this.parent.isCheckBoxSelection&&h&&CO(h.nextElementSibling,l)),this.updatePersistCollection(t[s],l)}}this.isSingleSel()&&n.length>0?this.selectRow(n[0],!0):this.selectRows(n)}this.parent.isCheckBoxSelection&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},r.prototype.actionBegin=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){var e=this.parent.element.querySelector(".e-edit-checkselect");if(!f(e)){var i=U(e,"."+Va);if(i){"Dialog"===this.parent.editSettings.mode&&(i=this.parent.element.querySelector(".e-dlgeditrow"));var n=this.getRowObj(i);if(!n)return;this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=n.isSelected=e.checked}else this.isCheckedOnAdd=e.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&("paging"===t.requestType&&this.parent.getDataModule().isRemote()&&(this.selectedRowIndexes=[]),("filtering"===t.requestType||"searching"===t.requestType)&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},r.prototype.actionComplete=function(t){if("save"===t.requestType&&this.parent.isPersistSelection){if("add"===t.action){if(this.isCheckedOnAdd){var e=this.parent.getRowObjectFromUID(this.parent.getRows()[t.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,e.data)]=e.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if("delete"===t.requestType&&this.parent.isPersistSelection){for(var n=t.data.slice(),s=0;s<n.length;s++){var o=this.getPkValue(this.primaryKey,n[s]);f(o)||this.updatePersistDelete(o,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if("paging"===t.requestType){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var a=this.parent.getRowsObject(),l=[];for(s=0;s<a.length;s++)a[s].isSelectable&&l.push(a[s].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},r.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),this.parent.getDataModule().isRemote()&&this.rmtHdrChkbxClicked&&("Intermediate"===this.parent.checkAllRows?this.setRowSelection(!0):"Uncheck"===this.parent.checkAllRows&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var t=this.parent.getRowsObject(),e=[],i=0;i<t.length;i++)t[i].isSelected&&e.push(i);e.length&&this.selectRows(e),this.initialRowSelection=!0}},r.prototype.updatePersistSelectedData=function(t){if(this.parent.isPersistSelection){for(var e=this.parent.getRows(),i=0;i<e.length;i++)this.updatePersistCollection(e[i],t);"Uncheck"===this.parent.checkAllRows?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()?this.persistSelectedData:[]):"Check"===this.parent.checkAllRows&&(this.setRowSelection(!0),this.persistSelectedData=this.parent.getDataModule().isRemote()||this.isPartialSelection?this.persistSelectedData:this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice())}},r.prototype.checkSelectAllAction=function(t){var e=this.getRenderer(),i=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),t&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(t),this.selectRowsByRange(e.getVirtualRowIndex(0),e.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(t),this.clearSelection()),this.chkAllCollec=[],!f(i)){var n=i.querySelector(".e-edit-checkselect");f(n)||CO(n.nextElementSibling,t)}},r.prototype.checkSelectAll=function(t){var e=this,i=this.getCheckAllStatus(t),n="Check"===i;this.isHeaderCheckboxClicked=!0,this.rmtHdrChkbxClicked=!(!this.parent.getDataModule().isRemote()||"Uncheck"!==i),"Intermediate"===i&&(n=this.getCurrentBatchRecordChanges().some(function(s){return e.getPkValue(e.primaryKey,s)in e.selectedRowState})),this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!n),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(t,!n)},r.prototype.getCheckAllStatus=function(t){var e=t?t.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList;return e.contains("e-check")?"Check":e.contains("e-uncheck")?"Uncheck":e.contains("e-stop")?"Intermediate":"None"},r.prototype.checkSelect=function(t){var e=U(this.checkedTarget,"."+tn),i=this.parent;this.isMultiCtrlRequest=!0;var n=0;if(this.isHeaderCheckboxClicked=!1,ws(i)){var s=e.parentElement.getAttribute("data-uid");n=i.getRows().map(function(o){return o.getAttribute("data-uid")}).indexOf(s)}else n=parseInt(e.parentElement.getAttribute(Ai),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Bl).length>0&&"Top"===this.parent.editSettings.newRowPosition&&++n,this.rowCellSelectionHandler(n,parseInt(e.getAttribute(Us),10)),this.moveIntoUncheckCollection(U(e,"."+vn)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"))},r.prototype.moveIntoUncheckCollection=function(t){if("Check"===this.parent.checkAllRows||"Uncheck"===this.parent.checkAllRows){var e=this.getRowObj(t),i=e&&e.data?this.getPkValue(this.primaryKey,e.data):null;if(!i)return;this.chkAllCollec.indexOf(i)<0?this.chkAllCollec.push(i):this.chkAllCollec.splice(this.chkAllCollec.indexOf(i),1)}},r.prototype.triggerChkChangeEvent=function(t,e){this.parent.trigger("checkBoxChange",{checked:e,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:t}),this.parent.isEdit||(this.checkedTarget=null)},r.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!this.parent.getDataModule().isRemote()&&this.parent.selectionSettings.persistSelection&&"Uncheck"!==this.parent.checkAllRows)for(var e=0,i=this.parent.getRowsObject().filter(function(s){return s.isSelectable});e<i.length;e++)this.selectedRowIndexes.push(i[e].index)},r.prototype.updateSelectedRowIndex=function(t){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.getDataModule().isRemote()&&!this.isPartialSelection)if("Check"===this.parent.checkAllRows){this.selectedRowIndexes=[];for(var e=this.getData().length,i=0;i<e;i++)this.selectedRowIndexes.push(i)}else if("Uncheck"===this.parent.checkAllRows)this.selectedRowIndexes=[];else{var n=this.parent.getRowByIndex(t);if(t&&n&&"false"===n.getAttribute("aria-selected")){var s=this.selectedRowIndexes.indexOf(t);this.selectedRowIndexes.splice(s,1)}}},r.prototype.isAllSelected=function(t){if(this.isPartialSelection){if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var e=this.parent.partialSelectedRecords,i=0;i<e.length;i++){var n=this.getPkValue(this.primaryKey,e[i]);if(!this.selectedRowState[n])return!1}return!0}return this.isSelectAllRowCount(t)}for(e=this.getData(),i=0;i<e.length;i++)if(n=this.getPkValue(this.primaryKey,e[i]),!this.selectedRowState[n])return!1;return!0},r.prototype.someDataSelected=function(){for(var t=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData(),e=0;e<t.length;e++){var i=this.getPkValue(this.primaryKey,t[e]);if(this.selectedRowState[i])return!1}return!0},r.prototype.setCheckAllState=function(t,e){if(this.parent.isCheckBoxSelection||"ResetOnRowClick"===this.parent.selectionSettings.checkboxMode){var i=!1,n=!1,s=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(s=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!this.parent.getDataModule().isRemote()&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(n=!0,i=this.isAllSelected(s));var o=this.getCheckAllBox();if(o){var a=o.nextElementSibling;z([a],["e-check","e-stop","e-uncheck"]),WS(o,!1),o.indeterminate=!1,i&&n&&this.getData().length||!n&&(s===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.enableVirtualization||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(s)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!this.parent.getDataModule().isRemote()&&this.getData().length&&s===this.getData().length||this.parent.getDataModule().isRemote()&&!this.isPartialSelection&&s===this.parent.totalDataRecordsCount||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(s))))?(N([a],["e-check"]),WS(o,!0),e&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&!this.parent.enableVirtualization||this.parent.enableVirtualization&&(!this.persistSelectedData.length&&!n||n&&this.someDataSelected())||0===s&&0===this.getCurrentBatchRecordChanges().length)&&!this.parent.allowPaging||this.parent.allowPaging&&(0===s||s&&n&&this.someDataSelected())?(N([a],["e-uncheck"]),e&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck",0===s&&0===this.getCurrentBatchRecordChanges().length?N([a.parentElement],["e-checkbox-disabled"]):z([a.parentElement],["e-checkbox-disabled"])):(N([a],["e-stop"]),this.parent.checkAllRows="Intermediate",o.indeterminate=!0),this.isPartialSelection&&(0===this.parent.getRowsObject().filter(function(h){return h.isSelectable}).length&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?N([a.parentElement],["e-checkbox-disabled"]):z([a.parentElement],["e-checkbox-disabled"])),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!this.parent.getDataModule().isRemote()&&this.updateSelectedRowIndex(t)}}},r.prototype.isSelectAllRowCount=function(t){var e=0,i=this.parent.getRowsObject();return this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)?(this.parent.getDataModule().isRemote()?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length)===i.length&&(e=i.filter(function(s){return s.isSelectable}).length)&&t===e:this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(e=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length)===this.totalRecordsCount&&this.parent.partialSelectedRecords.length&&t===this.parent.partialSelectedRecords.length:(e=i.filter(function(s){return s.isSelectable}).length)&&t===e},r.prototype.keyDownHandler=function(t){(("chrome"===Z.info.name||"safari"===Z.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===Z.info.name&&17===t.keyCode||"mozilla"===Z.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!0);var e=pe(t.target,"e-headercell"),i=pe(t.target,tn);(e?e.children[0].classList.contains("e-headerchkcelldiv"):i&&i.classList.contains("e-gridchkbox"))&&!this.parent.allowKeyboard&&32===t.keyCode&&t.preventDefault()},r.prototype.keyUpHandler=function(t){(("chrome"===Z.info.name||"safari"===Z.info.name)&&(91===t.keyCode||93===t.keyCode)||"opera"===Z.info.name&&17===t.keyCode||"mozilla"===Z.info.name&&224===t.keyCode)&&(this.cmdKeyPressed=!1)},r.prototype.clickHandler=function(t){var e=t.target;this.actualTarget=e,this.selectionSettings.persistSelection&&(this.deSelectedData=mO(this.persistSelectedData)),(pe(e,vn)||pe(e,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&e.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.isMultiCtrlRequest=t.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=t.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.popUpClickHandler(t);var i=!1;this.preventFocus=!0;var n,s=pe(e,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(s&&s.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&pe(e,vn)),this.selectionSettings.persistSelection&&this.isPartialSelection&&pe(e,"e-headerchkcelldiv")&&!e.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),s&&s.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(n=s.querySelector('input[type="checkbox"]'),i=!0),this.drawBorders(),this.updateAutoFillPosition(),((e=pe(e,tn))&&e.parentElement.classList.contains(vn)&&!this.parent.selectionSettings.checkboxOnly||i)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=e,f(n)){var o=this.parent,a=0;if(ws(o)){var l=e.parentElement.getAttribute("data-uid");a=o.getRows().map(function(h){return h.getAttribute("data-uid")}).indexOf(l)}else a=parseInt(e.parentElement.getAttribute(Ai),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(Bl).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(e))&&this.rowCellSelectionHandler(a,parseInt(e.getAttribute(Us),10)),this.parent.hoverFrozenRows(t),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(U(e,"."+vn)),this.setCheckAllState())}else this.checkedTarget=n,n.classList.contains("e-checkselectall")?this.checkSelectAll(n):this.checkSelect(n);!this.parent.isCheckBoxSelection&&Z.isDevice&&!this.isSingleSel()&&this.showPopup(t)}else t.target.classList.contains("e-headercell")&&!t.target.classList.contains("e-stackedheadercell")&&(l=t.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"),this.headerSelectionHandler(this.parent.getColumnIndexByUid(l)));this.isMultiCtrlRequest=!1,this.isMultiShiftRequest=!1,f(U(t.target,".e-unboundcell"))&&(this.preventFocus=!1)},r.prototype.popUpClickHandler=function(t){var e=t.target;U(e,".e-headercell")||t.target.classList.contains(tn)||U(e,".e-gridpopup")?e.classList.contains("e-rowselect")&&(e.classList.contains("e-spanclicked")?(e.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(e.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},r.prototype.showPopup=function(t){this.selectionSettings.enableSimpleMultiRowSelection||function Lse(r,t,e){var i=r.querySelector("span"),n=r.parentElement.getBoundingClientRect(),s=t.target.getBoundingClientRect();i.className=e,r.style.display="";var o=(f(t.clientY)?t.changedTouches[0].clientY:t.clientY)>r.offsetHeight+10;r.style.top=s.top-n.top+(o?-(r.offsetHeight+10):r.offsetHeight+10)+"px",r.style.left=function VDe(r,t,e,i){var n=r.offsetWidth/2,s=CC(t).x;return s-e.left<n?e.left-i:e.right-s<n?e.right-i-2*n:s-i-n}(r,t,s,n.left)+"px",o?(r.querySelector(".e-downtail").style.display="",r.querySelector(".e-uptail").style.display="none"):(r.querySelector(".e-downtail").style.display="none",r.querySelector(".e-uptail").style.display="")}(this.parent.element.querySelector(".e-gridpopup"),t,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>(this.parent.getFrozenColumns()?2:1)||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},r.prototype.rowCellSelectionHandler=function(t,e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?(this.isDragged||this.selectRow(t,this.selectionSettings.enableToggle),this.selectCell({rowIndex:t,cellIndex:e},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders()):this.isMultiShiftRequest?(this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!U(this.target,"."+tn).classList.contains(BS)?this.selectRowsByRange(qt(this.prevRowIndex)?t:this.prevRowIndex,t):this.addRowsToSelection([t]),this.selectCellsByRange(qt(this.prevCIdxs)?{rowIndex:t,cellIndex:e}:this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.updateAutoFillPosition(),this.drawBorders()):(this.addRowsToSelection([t]),this.addCellsToSelection([{rowIndex:t,cellIndex:e}]),this.showHideBorders("none")),this.isDragged=!1},r.prototype.onCellFocused=function(t){if(this.parent.frozenRows&&t.container.isHeader&&t.byKey)if("upArrow"===t.keyArgs.action)t.isJump=this.parent.allowFiltering?"INPUT"===t.element.tagName:"TH"===t.element.tagName;else if("downArrow"===t.keyArgs.action){var e=Number(t.element.parentElement.getAttribute(Ai));t.isJump=0===e}else"ctrlHome"===t.keyArgs.action&&(t.isJump=!0);var i=this.parent.isFrozenGrid()?(t.container.isHeader&&"TD"!==t.element.tagName&&t.isJump&&!this.selectionSettings.allowColumnSelection||(t.container.isContent||"TD"===t.element.tagName)&&!(t.container.isSelectable||"TD"===t.element.tagName))&&!(t.byKey&&"space"===t.keyArgs.action):(t.container.isHeader&&t.isJump||t.container.isContent&&!t.container.isSelectable)&&!(t.byKey&&"space"===t.keyArgs.action)&&!(t.element.classList.contains("e-detailrowexpand")||t.element.classList.contains("e-detailrowcollapse")),n=t.container.isHeader&&"TD"!==t.element.tagName&&!U(t.element,"."+tn)&&!(t.byKey&&"space"===t.keyArgs.action);if(t.byKey&&!i){var s=t.container.isContent?t.container.indexes:t.indexes,o=s[0],a=s[1],l=this.focus.getPrevIndexes();if(this.parent.frozenRows)if(t.container.isHeader&&("TD"===t.element.tagName||U(t.element,"."+tn))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;o-=h,l.rowIndex=f(l.rowIndex)?null:l.rowIndex-h}else o+=this.parent.frozenRows,l.rowIndex=0!==l.rowIndex&&f(l.rowIndex)?null:l.rowIndex+this.parent.frozenRows;if(this.parent.isFrozenGrid()){var u=Number(t.element.getAttribute(Us)),d=this.parent.getSelectedRowCellIndexes();d.length&&0===l.cellIndex&&(l.cellIndex=d[d.length-1].cellIndexes[0]),l.cellIndex=f(l.cellIndex)?null:l.cellIndex===a?u:u-1,a=u}if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(o=parseInt(t.element.parentElement.getAttribute("data-rowindex"),10)),!(n||-1===["ctrlPlusA","escape"].indexOf(t.keyArgs.action)&&"space"!==t.keyArgs.action&&o===l.rowIndex&&a===l.cellIndex)||this.selectionSettings.allowColumnSelection){this.preventFocus=!0;var m=this.getKeyColIndex(t);if(this.needColumnSelection&&(a=m),this.parent.element.classList.contains("e-gridcell-read")&&("tab"===t.keyArgs.action||"shiftTab"===t.keyArgs.action||"rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)){var v=this.target.getAttribute("aria-label");v=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",v)}switch(t.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=t.element,this.isKeyAction=!0,this.applyDownUpKey(o,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(o,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(o,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(o,a);break;case"home":case"end":a="end"===t.keyArgs.action?this.getLastColIndex(o):0,this.applyHomeEndKey(o,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(o,a);break;case"escape":this.clearSelection();break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(t.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(o)}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.updateAutoFillPosition()}}else i&&!this.parent.isCheckBoxSelection&&this.clearSelection()},r.prototype.getKeyColIndex=function(t){var e,i=null,n=t.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&pe(t.element,"e-columnheader"))if(this.needColumnSelection=!!t.container.isHeader,n){if("rightArrow"===t.keyArgs.action||"leftArrow"===t.keyArgs.action)return i;e=n.getAttribute("e-mappinguid");var s=this.getstackedColumns(this.parent.getColumnByUid(e).columns),o=this.parent.getColumnIndexByUid(s[s.length-1].uid),a=this.parent.getColumnIndexByUid(s[0].uid);i=this.prevColIndex>=o?a:o}else i=this.parent.getColumnIndexByUid(t.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return i},r.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},r.prototype.applySpaceSelection=function(t){t.classList.contains("e-checkselectall")?(this.checkedTarget=t,this.checkSelectAll(this.checkedTarget)):t.classList.contains("e-checkselect")&&(this.checkedTarget=t,this.checkSelect(this.checkedTarget))},r.prototype.applyDownUpKey=function(t,e){var i=this.parent;this.parent.isCheckBoxSelection&&"Check"===this.parent.checkAllRows&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.selectRow(t,!0),this.applyUpDown(i.selectedRowIndex)),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(e)},r.prototype.applyUpDown=function(t){if(!(t<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var e=parseInt(this.target.getAttribute(Us),10),i=this.parent.getFrozenColumns();if(i)this.target=e>=i?this.contentRenderer.getMovableRowByIndex(t).getElementsByClassName(tn)[e-i]:this.contentRenderer.getRowByIndex(t).getElementsByClassName(tn)[e];else{var n=this.contentRenderer.getRowByIndex(t);n&&(this.target=n.getElementsByClassName(tn)[e])}this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")&&(this.target.getAttribute("aria-label"),this.target.setAttribute("aria-label",this.target.innerHTML))}},r.prototype.applyRightLeftKey=function(t,e){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(e):this.isCellType()&&(this.selectCell({rowIndex:t,cellIndex:e},!0),this.addAttribute(this.target))},r.prototype.applyHomeEndKey=function(t,e){this.isCellType()?this.selectCell({rowIndex:t,cellIndex:e},!0):this.addAttribute(this.parent.getCellFromIndex(t,e))},r.prototype.shiftDownKey=function(t,e){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(qt(this.prevRowIndex)?this.selectRow(this.isPartialSelection?t:0,!0):(this.selectRowsByRange(this.prevRowIndex,t),this.applyUpDown(t))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.applyShiftLeftRightKey=function(t,e){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,e):this.selectCellsByRange(this.prevCIdxs,{rowIndex:t,cellIndex:e}),this.isMultiShiftRequest=!1},r.prototype.getstackedColumns=function(t){for(var e=[],i=0,n=t.length;i<n;i++)t[i].columns?this.getstackedColumns(t[i].columns):e.push(t[i]);return e},r.prototype.applyCtrlHomeEndKey=function(t,e){this.isRowType()&&(this.selectRow(t,!0),this.addAttribute(this.parent.getCellFromIndex(t,e))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:e},!0)},r.prototype.addRemoveClassesForRow=function(t,e,i){for(var n=[],s=3;s<arguments.length;s++)n[s-3]=arguments[s];if(t){var o=[].slice.call(t.getElementsByClassName(tn)),a=t.querySelector(".e-detailrowcollapse")||t.querySelector(".e-detailrowexpand"),l=t.querySelector(".e-rowdragdrop");a&&o.push(a),l&&o.push(l),Gc.apply(void 0,[o,e].concat(n))}this.getRenderer().setSelection(t?t.getAttribute("data-uid"):null,e,i)},r.prototype.isRowType=function(){return"Row"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isCellType=function(){return"Cell"===this.selectionSettings.mode||"Both"===this.selectionSettings.mode},r.prototype.isSingleSel=function(){return"Single"===this.selectionSettings.type},r.prototype.getRenderer=function(){return f(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(zs.Content)),this.contentRenderer},r.prototype.getSelectedRecords=function(){return!this.selectionSettings.persistSelection&&this.selectedRecords.length?this.parent.getRowsObject().filter(function(e){return e.isSelected}).map(function(e){return e.data}):this.persistSelectedData},r.prototype.selectColumn=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnByIndex(t),n=e.getColumnHeaderByUid(i.uid),s=n.classList.contains("e-columnselection");if(e.selectionSettings.allowColumnSelection){var o=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(t)>-1;if(this.clearColDependency(),!s||!this.selectionSettings.enableToggle||o){var a={columnIndex:t,headerCell:n,column:i,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,_8),a.cancel)return void this.disableInteracted();(!e.selectionSettings.enableToggle||t!==this.prevColIndex||!s||o)&&this.updateColSelection(n,t),this.onActionComplete({columnIndex:t,headerCell:n,column:i,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex},L8)}this.updateColProps(t)}}},r.prototype.selectColumnsByRange=function(t,e){var i=this.parent;if(!f(i.getColumns()[t])){var n=[];if("Single"===i.selectionSettings.type||f(e))n[0]=t;else for(var s=t<e,o=t;s?o<=e:o>=e;s?o++:o--)n.push(o);this.selectColumns(n)}},r.prototype.selectColumns=function(t){var e=this.parent,i=this.getselectedCols();if("Single"===e.selectionSettings.type&&(t=[t[0]]),e.selectionSettings.allowColumnSelection){this.clearColDependency();var n={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,_8),n.cancel)return void this.disableInteracted();for(var s=0,o=t.length;s<o;s++)this.updateColSelection(e.getColumnHeaderByUid(e.getColumnByIndex(t[s]).uid),t[s]);i=this.getselectedCols();var a={columnIndex:t[0],headerCell:i,columnIndexes:t,column:e.getColumnByIndex(t[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,L8),this.updateColProps(t[0])}},r.prototype.selectColumnWithExisting=function(t){var e=this.parent;if(!f(e.getColumns()[t])){var i=e.getColumnHeaderByUid(e.getColumnByIndex(t).uid),n=this.getselectedCols();if("Single"===e.selectionSettings.type&&this.clearColDependency(),e.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(t)>-1)this.clearColumnSelection(t);else{var s={columnIndex:t,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:e.getColumnByIndex(t),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(s,_8),s.cancel)return void this.disableInteracted();this.updateColSelection(i,t);var o={columnIndex:t,headerCell:n=this.getselectedCols(),column:e.getColumnByIndex(t),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,L8)}this.updateColProps(t)}}},r.prototype.clearColumnSelection=function(t){if(this.isColumnSelected){var e=this.parent;if(!f(t)&&-1===this.selectedColumnsIndexes.indexOf(t))return;var s,i=f(t)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:t,n=e.getColumnByIndex(i),o=e.getColumnByIndex(i),a={columnIndex:i,headerCell:s=n.getFreezeTableName()===or?e.getFrozenRightColumnHeaderByIndex(i):"movable"===n.getFreezeTableName()?e.getMovableColumnHeaderByIndex(i):e.getColumnHeaderByUid(o.uid),columnIndexes:this.selectedColumnsIndexes,column:o,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted};if(this.columnDeselect(a,"columnDeselecting"))return void this.disableInteracted();for(var h=f(t)?[].slice.call(e.getHeaderContent().getElementsByClassName("e-columnselection")):[s],u=this.getSelectedColumnCells(t),d=0,m=h.length;d<m;d++)Gc([h[d]],!1,"e-columnselection");for(d=0,m=u.length;d<m;d++)Gc([u[d]],!1,"e-columnselection");f(t)?(this.columnDeselect(a,"columnDeselected"),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(v){return v.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(t),1),this.parent.getColumns()[t].isSelected=!1)}},r.prototype.getselectedCols=function(){var e,t=this.parent;if(this.selectedColumnsIndexes.length>1){e=[];for(var i=0;i<this.selectedColumnsIndexes.length;i++)e.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[i]).uid))}else e=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return e},r.prototype.getSelectedColumnCells=function(t){var s,o,e=this.parent,i=!f(this.parent.rowTemplate),n=i?e.getRows():e.getDataRows();e.isFrozenGrid()&&e.getContent().querySelector("."+zn)&&(s=i?e.getMovableRows():e.getMovableDataRows(),n=e.addMovableRows(n,s),e.getFrozenMode()===Zt&&(o=i?e.getFrozenRightRows():e.getFrozenRightDataRows(),n=e.addMovableRows(n,o)));for(var a=[],l=f(t)?".e-columnselection":'[data-colindex="'+t+'"]',h=0,u=n.length;h<u;h++)a=a.concat([].slice.call(n[h].querySelectorAll(l)));return a},r.prototype.columnDeselect=function(t,e){return"columnDeselected"===e&&delete t.cancel,this.onActionComplete(t,e),t.cancel},r.prototype.updateColProps=function(t){this.prevColIndex=t,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},r.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},r.prototype.updateColSelection=function(t,e){if(!f(this.parent.getColumns()[e])){var a,i=this.parent.getFrozenLeftCount(),n=this.parent.getMovableColumnsCount(),s=this.parent.getColumnByIndex(e),o=!f(this.parent.rowTemplate);this.selectedColumnsIndexes.push(e),this.parent.getColumns()[e].isSelected=!0,s.getFreezeTableName()===or?(e-=i+n,a=o?this.parent.getFrozenRightRows():this.parent.getFrozenRightDataRows()):"movable"===s.getFreezeTableName()?(e-=i,a=o?this.parent.getMovableRows():this.parent.getMovableDataRows()):(e+=this.parent.getIndentCount(),a=o?this.parent.getRows():this.parent.getDataRows()),Gc([t],!0,"e-columnselection");for(var l=0,h=a.length;l<h;l++)a[l].classList.contains(vn)&&(!a[l].classList.contains(Va)&&!a[l].classList.contains(Bl)||"Normal"!==this.parent.editSettings.mode||f(a[l].querySelector("tr").childNodes[e])?f(a[l].childNodes[e])||Gc([a[l].childNodes[e]],!0,"e-columnselection"):Gc([a[l].querySelector("tr").childNodes[e]],!0,"e-columnselection"))}},r.prototype.headerSelectionHandler=function(t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(t):this.isMultiShiftRequest?this.selectColumnsByRange(qt(this.prevColIndex)?t:this.prevColIndex,t):this.selectColumnWithExisting(t)},r.prototype.addEventListener_checkbox=function(){var t=this;this.parent.on(jc,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(ph,this.onDataBoundFunction),this.parent.on(bG,this.onDataBoundFunction),this.parent.on(Zr,this.checkBoxSelectionChanged,this),this.parent.on(lG,this.initPerisistSelection,this),this.parent.on(Yd,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(zi,this.actionCompleteFunc),this.parent.on(sl,this.clickHandler,this),this.resizeEndFn=function(){t.updateAutoFillPosition(),t.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener("resizeStop",this.resizeEndFn)},r.prototype.removeEventListener_checkbox=function(){this.parent.off(jc,this.dataReady),this.parent.removeEventListener(ph,this.onDataBoundFunction),this.parent.removeEventListener(zi,this.actionCompleteFunc),this.parent.off(bG,this.onDataBoundFunction),this.parent.off(Yd,this.setCheckAllForEmptyGrid),this.parent.off(sl,this.clickHandler),this.parent.off(lG,this.initPerisistSelection)},r.prototype.setCheckAllForEmptyGrid=function(){var t=this.getCheckAllBox();t&&(this.parent.isCheckBoxSelection=!0,z([t.nextElementSibling],["e-check","e-stop","e-uncheck"]))},r.prototype.dataReady=function(t){this.isHeaderCheckboxClicked=!1,"virtualscroll"!==t.requestType&&!this.parent.isPersistSelection&&(!this.parent.enableInfiniteScrolling||"infiniteScroll"!==t.requestType)&&(this.disableUI=!this.parent.enableImmutableMode,this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},r.prototype.actionCompleteHandler=function(t){"save"===t.requestType&&this.parent.isPersistSelection&&this.refreshPersistSelection()},r.prototype.selectRowIndex=function(t){this.parent.isSelectedRowIndexUpdating=!0,this.parent.selectedRowIndex=f(this.parent.selectedRowIndex)||-1===this.parent.selectedRowIndex?t:-1},r.prototype.disableInteracted=function(){this.isInteracted=!1},r.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},r}(),xse=function(){function r(t){this.parent=t,this.addEventListener()}return r.prototype.search=function(t){var e=this.parent;t=f(t)?"":t,Jd(e)?e.notify(uu,{instance:this,handler:this.search,arg1:t}):t!==e.searchSettings.key?(e.searchSettings.key=t.toString(),e.dataBind()):this.refreshSearch&&e.refresh()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ha,this.onPropertyChanged,this),this.parent.on(kre,this.onSearchComplete,this),this.parent.on(dn,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(zi,this.actionCompleteFunc),this.parent.on(HV,this.cancelBeginEvent,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ha,this.onPropertyChanged),this.parent.off(kre,this.onSearchComplete),this.parent.off(dn,this.destroy),this.parent.removeEventListener(zi,this.actionCompleteFunc),this.parent.off(HV,this.cancelBeginEvent))},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(f(t.properties.key)?this.parent.notify(zo,{requestType:"searching",type:dr}):this.parent.notify(zo,{requestType:"searching",type:dr,searchString:this.parent.searchSettings.key}))},r.prototype.onSearchComplete=function(t){this.parent.trigger(zi,he(t,{searchString:this.parent.searchSettings.key,requestType:"searching",type:zi}))},r.prototype.onActionComplete=function(t){this.refreshSearch="searching"!==t.requestType},r.prototype.cancelBeginEvent=function(t){"searching"===t.requestType&&this.parent.setProperties({searchSettings:{key:""}},!0)},r.prototype.getModuleName=function(){return"search"},r}(),bDe=function(){function r(t){this.colName=[],this.isShowHide=!1,this.parent=t,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:jg,handler:this.batchChanges},{event:"cancelcnfrmDlg",handler:this.resetColumnState}],uo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||uo(this.parent,this.evtHandlers,!1)},r.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},r.prototype.show=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(MS,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!0;this.setVisible(n)},r.prototype.hide=function(t,e){var i=this.getToggleFields(t),n=this.getColumns(i,e);this.parent.notify(MS,{module:"edit"});for(var s=0;s<n.length;s++)n[s].visible=!1;this.setVisible(n)},r.prototype.getToggleFields=function(t){return"string"==typeof t?[t]:t},r.prototype.getColumns=function(t,e){var i=this;return jS(t,function(s){return jS(i.parent.columnModel,function(o){if(o[e]===s)return o})[0]})},r.prototype.batchActionPrevent=function(t,e){return void 0===e&&(e=[]),!Jd(this.parent)||(this.colName=t,this.changedCol=e,this.parent.closeEdit(),!1)},r.prototype.resetColumnState=function(){if(this.isShowHide)for(var t=0;t<this.colName.length;t++)this.colName[t].visible=!this.colName[t].visible},r.prototype.setVisible=function(t,e){var i=this;if(void 0===e&&(e=[]),this.isShowHide=!0,this.batchActionPrevent(t,e)){var n={requestType:"columnstate",cancel:!1,columns:e=e.length>0?e:t};this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(dr,n,function(o){var a=i.parent.getColumns();if(t=f(t)?a:t,o.cancel)return i.parent.notify("reset-columns",{showHideArgs:o}),void(t.length>0&&(t[0].visible=!0));ws(i.parent)&&i.parent.contentModule.emptyVcRows(),i.parent.allowSelection&&i.parent.getSelectedRecords().length&&!i.parent.selectionSettings.persistSelection&&i.parent.clearSelection(),i.parent.enableColumnVirtualization?t.filter(function(u){return a.some(function(d){return u.field===d.field})}).length&&i.parent.notify(Uc,t):i.parent.notify(Uc,t),i.parent.trigger(zi,{requestType:"columnstate",columns:e}),"All"!==i.parent.columnQueryMode&&i.parent.refresh()})}},r}(),Tse=function(){function r(t){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=t,this.widthService=new DG(t),this.addEventListener()}return r.prototype.getModuleName=function(){return"scroll"},r.prototype.setWidth=function(t){this.parent.element.style.width=it(this.parent.width),t&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element&&this.parent.toolbarModule.toolbar.refreshOverflow()},r.prototype.setHeight=function(){var t=0,e=this.parent.getContent().querySelector("."+as),i=this.parent.height;if(this.parent.isFrozenGrid()&&"auto"!==this.parent.height&&this.parent.height.toString().indexOf("%")<0&&(i=parseInt(i,10)-r.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&"auto"!==this.parent.height){var n=this.parent.getHeaderContent().querySelector(rt+":not(.e-masked-tbody)");t=n?n.offsetHeight:0,n&&t?t-=n.getElementsByClassName(Bl).length*this.parent.getRowHeight():!this.parent.isInitialLoad&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(i=parseInt(i,10)-this.parent.frozenRows*this.parent.getRowHeight()),e.style.height=it(i-t)}else e.style.height=it(i);this.ensureOverflow(e),this.parent.isFrozenGrid()&&this.refresh()},r.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),e=r.getScrollBarWidth()-this.getThreshold(),i=this.getCssProperties(),n="Right"===this.parent.getFrozenMode()||this.parent.getFrozenMode()===Zt?"0.5px":"1px";t.querySelector("."+Ms).style[i.border]=e>0?n:"0px",t.style[i.padding]=e>0?e+"px":"0px"},r.prototype.removePadding=function(t){var e=this.getCssProperties(t),i=this.parent.getHeaderContent().querySelector("."+Ms);i.style[e.border]="",i.parentElement.style[e.padding]="";var n=this.parent.getFooterContent();n&&n.classList.contains("e-footerpadding")&&n.classList.remove("e-footerpadding")},r.prototype.refresh=function(){if("100%"===this.parent.height){var t=this.parent.getContent();this.parent.element.style.height="100%";var e=this.widthService.getSiblingsHeight(t);t.style.height="calc(100% - "+e+"px)",this.parent.isFrozenGrid()&&(t.firstElementChild.style.height="calc(100% - "+wC()+"px)")}},r.prototype.getThreshold=function(){return"mozilla"===Z.info.name?.5:1},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Yd,this.wireEvents,this),this.parent.on(Zr,this.wireEvents,this),this.parent.on(Nr,this.onPropertyChanged,this),this.parent.on(q8,this.wireEvents,this),this.parent.on(xo,this.setScrollLeft,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Yd,this.wireEvents),this.parent.off(Zr,this.wireEvents),this.parent.off(Nr,this.onPropertyChanged),this.parent.off(q8,this.wireEvents),this.parent.off(xo,this.setScrollLeft))},r.prototype.setScrollLeft=function(){this.parent.isFrozenGrid()?this.parent.headerModule.getMovableHeader().scrollLeft=this.previousValues.left:this.parent.getHeaderContent().querySelector("."+Ms).scrollLeft=this.previousValues.left},r.prototype.onFrozenContentScroll=function(){var t=this;return function(e){null===t.content.querySelector(rt)||t.parent.isPreventScrollEvent||(!f(t.parent.infiniteScrollModule)&&t.parent.enableInfiniteScrolling&&t.parent.notify(qV,e),t.previousValues.top=e.target.scrollTop)}},r.prototype.onContentScroll=function(t){var e=this,i=t,n=i.classList.contains(Ms);return function(s){if(null!==e.content.querySelector(rt)&&!e.parent.isPreventScrollEvent){var o=s.target,a=o.scrollLeft;if(!f(e.parent.infiniteScrollModule)&&e.parent.enableInfiniteScrolling&&e.parent.notify(qV,{target:s.target,isLeft:e.previousValues.left!==a}),e.parent.groupSettings.columns.length&&e.parent.groupSettings.enableLazyLoading){var l=e.previousValues.top<e.parent.getContent().firstElementChild.scrollTop;e.parent.notify("lazy-load-scroll-handler",{scrollDown:l})}e.parent.notify("virtual-scroll-edit",{});var h=o.classList.contains("e-summarycontent");if(e.previousValues.left===a)return void(e.previousValues.top=n?o.scrollTop:e.previousValues.top);e.parent.notify("close-filter-dialog",s),i.scrollLeft=a,h&&(e.header.scrollLeft=a),e.previousValues.left=a,e.parent.notify("scroll",{left:a})}}},r.prototype.onCustomScrollbarScroll=function(t,e){var i=this,n=t,s=e;return function(o){if(null!==i.content.querySelector(rt)){var l=o.target.scrollLeft;i.previousValues.left!==l&&(n.scrollLeft=l,s.scrollLeft=l,i.previousValues.left=l,i.parent.notify("scroll",{left:l}))}}},r.prototype.onTouchScroll=function(t){var e=this,i=t;return function(n){if("mouse"!==n.pointerType){var s=e.parent.isFrozenGrid(),o=e.getPointXY(n),a=i.scrollLeft+(e.pageXY.x-o.x),l=s?e.parent.getHeaderContent().querySelector("."+Zn):e.parent.getHeaderContent().querySelector("."+Ms),h=s?e.parent.getContent().querySelector("."+zn):e.parent.getContent().querySelector("."+as);e.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a||(n.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,s&&(e.parent.getContent().querySelector(".e-movablescrollbar").scrollLeft=a),e.pageXY.x=o.x,e.previousValues.left=a)}}},r.prototype.setPageXY=function(){var t=this;return function(e){"mouse"!==e.pointerType&&(t.pageXY=t.getPointXY(e))}},r.prototype.getPointXY=function(t){var e={x:0,y:0};return t.touches&&t.touches.length?(e.x=t.touches[0].pageX,e.y=t.touches[0].pageY):(e.x=t.pageX,e.y=t.pageY),e},r.prototype.getScrollbleParent=function(t){if(null===t)return null;var e=f(t.tagName)?t.scrollingElement:t,i=document.defaultView.getComputedStyle(e,null).overflowY;return e.scrollHeight>e.clientHeight&&"hidden"!==i&&"visible"!==i||"HTML"===t.tagName||"BODY"===t.tagName?t:this.getScrollbleParent(t.parentNode)},r.prototype.addStickyListener=function(t){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),t&&this.parentElement?(this.eventElement="HTML"===this.parentElement.tagName||"BODY"===this.parentElement.tagName?document:this.parentElement,T.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(T.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},r.prototype.wireEvents=function(){var t=this;if(this.oneTimeReady){var e=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+as),this.header=this.parent.getHeaderContent().querySelector("."+Ms);var i=this.content.querySelector("."+zn),n=this.header.querySelector("."+Zn),s=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&(T.add(e?n:this.header,"touchstart pointerdown",this.setPageXY(),this),T.add(e?n:this.header,"touchmove pointermove",this.onTouchScroll(e?i:this.content),this)),this.parent.isFrozenGrid()?(T.add(s,"scroll",this.onCustomScrollbarScroll(i,n),this),T.add(i,"scroll",this.onCustomScrollbarScroll(s,n),this),T.add(n,"scroll",this.onCustomScrollbarScroll(s,i),this),T.add(this.content,"scroll",this.onFrozenContentScroll(),this),T.add(n,"touchstart pointerdown",this.setPageXY(),this),T.add(n,"touchmove pointermove",this.onTouchScroll(i),this),T.add(i,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(Z.userAgent.toLowerCase())&&Z.isDevice||T.add(i,"touchmove pointermove",this.onTouchScroll(n),this)):(T.add(this.content,"scroll",this.onContentScroll(this.header),this),T.add(this.header,"scroll",this.onContentScroll(this.content),this)),this.parent.aggregates.length&&T.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var a,l,h,o=this.parent.getContentTable();kse(function(){a=t.header.scrollLeft,l=o.scrollHeight,h=t.parent.getContent().clientHeight},function(){var u={cancel:!1};t.parent.notify("check-scroll-reset",u),!t.parent.enableVirtualization&&!t.parent.enableInfiniteScrolling&&(l<h&&(N(o.querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.isFrozenGrid()&&(N(t.parent.getContent().querySelector("."+zn).querySelectorAll("tr:last-child td"),"e-lastrowcell"),t.parent.getFrozenRightColumnsCount()&&N(t.parent.getContent().querySelector(".e-frozen-right-content").querySelectorAll("tr:last-child td"),"e-lastrowcell"))),u.cancel||((t.parent.frozenRows>0||t.parent.isFrozenGrid())&&t.header.querySelector("."+Zn)?t.header.querySelector("."+Zn).scrollLeft=t.previousValues.left:t.header.scrollLeft=t.previousValues.left,t.content.scrollLeft=t.previousValues.left,t.content.scrollTop=t.previousValues.top)),t.parent.enableColumnVirtualization||(t.content.scrollLeft=a),t.parent.isFrozenGrid()&&t.header.querySelector("."+Zn)&&(t.header.querySelector("."+Zn).scrollLeft=t.content.querySelector("."+zn).scrollLeft)}),this.parent.isPreventScrollEvent=!1},r.prototype.getCssProperties=function(t){var e={},i=f(t)?this.parent.enableRtl:t;return e.border=i?"borderLeftWidth":"borderRightWidth",e.padding=i?"paddingLeft":"paddingRight",e},r.prototype.ensureOverflow=function(t){t.style.overflowY="auto"===this.parent.height?"auto":"scroll"},r.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(this.setPadding(),this.oneTimeReady=!0,"auto"===this.parent.height&&this.removePadding(),this.wireEvents(),this.setHeight(),this.setWidth(!f(t.properties.width)))},r.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var t=this.parent.getContent().getClientRects()[0];if(t){var e=this.parent.getHeaderContent(),i=this.parent.element.querySelector(".e-toolbar"),n=this.parent.element.querySelector(".e-groupdroparea"),s=e.offsetHeight+(i?i.offsetHeight:0)+(n?n.offsetHeight:0),o=this.parentElement.getClientRects()[0].top,a=t.top-(o<0?0:o),l=t.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(a<s&&t.bottom>0){e.classList.add("e-sticky");var u=0;n&&this.parent.groupSettings.showDropArea&&(this.setSticky(n,u,t.width,l,!0),u+=n.getClientRects()[0].height),i&&(this.setSticky(i,u,t.width,l,!0),u+=i.getClientRects()[0].height),this.setSticky(e,u,t.width,l,!0),f(h)||(h.style.position="fixed")}else if(e.classList.contains("e-sticky")){this.setSticky(e,null,null,null,!1),i&&this.setSticky(i,null,null,null,!1),n&&this.setSticky(n,null,null,null,!1);var d=this.parent.element.querySelector(".e-ccdlg");d&&d.classList.remove("e-sticky"),f(h)||(h.style.position="absolute")}this.parent.notify("sticky-scroll-complete",{})}}},r.prototype.setSticky=function(t,e,i,n,s){s?(t.style.width=i+"px",t.classList.add("e-sticky")):t.classList.remove("e-sticky"),t.style.top=null!=e?e+"px":"",t.style.left=null!==n?parseInt(t.style.left,10)!==n?n+"px":t.style.left:""},r.prototype.destroy=function(){var t=this.parent.element;if(t&&(t.querySelector("."+js)||t.querySelector("."+Ps))){this.removeEventListener();var e=this.parent.getContent().querySelector("."+as);T.remove(e,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),z([this.parent.getHeaderContent().querySelector("."+Ms)],Ms),z([e],as),e.style.height="",this.parent.element.style.width=""}},r.getScrollBarWidth=function(){return wC()},r}(),Dse=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),Kv=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},CDe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.templateFn={},e}return Dse(t,r),t.prototype.setFormatter=function(e){this.formatFn=e},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(e){void 0===e&&(e={}),void 0!==this.footerTemplate&&(this.templateFn[hl(Ot,Ot.Summary)]={fn:Pi(this.footerTemplate,e),property:"footerTemplate"}),void 0!==this.groupFooterTemplate&&(this.templateFn[hl(Ot,Ot.GroupSummary)]={fn:Pi(this.groupFooterTemplate,e),property:"groupFooterTemplate"}),void 0!==this.groupCaptionTemplate&&(this.templateFn[hl(Ot,Ot.CaptionSummary)]={fn:Pi(this.groupCaptionTemplate,e),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(e){return this.templateFn[hl(Ot,e)]},t.prototype.setPropertiesSilent=function(e){this.setProperties(e,!0)},Kv([E()],t.prototype,"type",void 0),Kv([E()],t.prototype,"field",void 0),Kv([E()],t.prototype,"columnName",void 0),Kv([E()],t.prototype,"format",void 0),Kv([E()],t.prototype,"footerTemplate",void 0),Kv([E()],t.prototype,"groupFooterTemplate",void 0),Kv([E()],t.prototype,"groupCaptionTemplate",void 0),Kv([E()],t.prototype,"customAggregate",void 0),t}(Si),wDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return Dse(t,r),Kv([wo([],CDe)],t.prototype,"columns",void 0),t}(Si),SDe=function(){function r(t,e){this.copyContent="",this.isSelect=!1,this.parent=t,this.serviceLocator=e,this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Zr,this.initialEnd,this),this.parent.on(Cs,this.keyDownHandler,this),this.parent.on(sl,this.clickHandler,this),T.add(this.parent.element,"keydown",this.pasteHandler,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Cs,this.keyDownHandler),this.parent.off(Zr,this.initialEnd),this.parent.off(sl,this.clickHandler),T.remove(this.parent.element,"keydown",this.pasteHandler))},r.prototype.clickHandler=function(t){var e=t.target;e=pe(e,"e-rowcell")},r.prototype.pasteHandler=function(t){var e=this,i=this.parent,n=/(Mac)/i.test(navigator.platform);if(67===t.keyCode&&n&&t.metaKey&&!i.isEdit&&this.copy(),86===t.keyCode&&(t.ctrlKey||n&&t.metaKey)&&!i.isEdit){if(!U(document.activeElement,"."+tn)||!i.editSettings.allowEditing||"Batch"!==i.editSettings.mode||"Cell"!==i.selectionSettings.mode||"Flow"===i.selectionSettings.cellSelectionMode)return;this.activeElement=document.activeElement,this.clipBoardTextArea.value="";var o=window.scrollX,a=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){e.activeElement.focus(),window.scrollTo(o,a),e.paste(e.clipBoardTextArea.value,e.parent.getSelectedRowCellIndexes()[0].rowIndex,e.parent.getSelectedRowCellIndexes()[0].cellIndexes[0])},10)}},r.prototype.paste=function(t,e,i){var a,l,h,n=this.parent,s=i,o=e;if(n.editSettings.allowEditing&&"Batch"===n.editSettings.mode&&"Cell"===n.selectionSettings.mode&&"Flow"!==n.selectionSettings.cellSelectionMode){var d,v,C,u=t.split("\n"),m=n.getDataRows(),S=this.parent.isFrozenGrid();S&&(v=n.getMovableDataRows(),n.getFrozenRightColumnsCount()&&(C=n.getFrozenRightDataRows()));for(var A=0;A<u.length;A++){if(d=u[A].split("\t"),s=i,A===u.length-1&&""===u[A]||qt(n.getRowByIndex(o))){s++;break}for(var _=0;_<d.length;_++){if(h=n.getCellFromIndex(o,s),S){var P=v[o];h=!!m[o].querySelector('[data-colindex="'+s+'"]')||P.querySelector('[data-colindex="'+s+'"]'),C&&!h&&(h=C[o].querySelector('[data-colindex="'+s+'"]'))}if(!h){s++;break}if(l=(a=n.getColumnByIndex(s)).getParser()?a.getParser()(d[_]):d[_],a.allowEditing&&!a.isPrimaryKey&&!a.template){var j={column:a,data:l,rowIndex:o};this.parent.trigger("beforePaste",j),o=j.rowIndex,j.cancel||n.editModule&&("number"===a.type?this.parent.editModule.updateCell(o,a.field,parseFloat(j.data)):n.editModule.updateCell(o,a.field,j.data))}s++}o++}n.selectionModule.selectCellsByRange({rowIndex:e,cellIndex:i},{rowIndex:o-1,cellIndex:s-1});var G=this.parent.getCellFromIndex(o-1,s-1);G&&ri(G,["e-focus","e-focused"],[])}},r.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(Zr,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},r.prototype.keyDownHandler=function(t){"ctrlPlusC"===t.action?this.copy():"ctrlShiftPlusH"===t.action&&this.copy(!0)},r.prototype.setCopyData=function(t){if(""===window.getSelection().toString()){var e=this.parent.isFrozenGrid();this.clipBoardTextArea.value=this.copyContent="";var i=void 0,n=void 0,s=this.parent.getRows();if(e&&(i=this.parent.getMovableDataRows(),this.parent.getFrozenMode()===Zt&&(n=this.parent.getFrozenRightRows())),"Cell"!==this.parent.selectionSettings.mode){var o=this.parent.getSelectedRowIndexes().sort(function(v,C){return v-C});if(t){for(var a=[],l=0;l<this.parent.getVisibleColumns().length;l++)a[l]=this.parent.getVisibleColumns()[l].headerText;this.getCopyData(a,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<o.length;l++){l>0&&(this.copyContent+="\n");var h=[].slice.call(s[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"));e&&(h.push.apply(h,[].slice.call(i[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)"))),n&&h.push.apply(h,[].slice.call(n[o[l]].querySelectorAll(".e-rowcell:not(.e-hide)")))),this.getCopyData(h,!1,"\t",t)}}else{var u=this.checkBoxSelection();if(u.status){if(t){var d=[];for(l=0;l<u.colIndexes.length;l++)d.push(this.parent.getColumnHeaderByIndex(u.colIndexes[l]));this.getCopyData(d,!1,"\t",t),this.copyContent+="\n"}for(l=0;l<u.rowIndexes.length;l++)l>0&&(this.copyContent+="\n"),h=[].slice.call(s[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")),e&&(h.push.apply(h,[].slice.call(i[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground"))),n&&h.push.apply(h,[].slice.call(n[u.rowIndexes[l]].getElementsByClassName("e-cellselectionbackground")))),this.getCopyData(h,!1,"\t",t)}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,"\n",t)}var m={data:this.copyContent,cancel:!1};if(this.parent.trigger("beforeCopy",m),m.cancel)return;this.clipBoardTextArea.value=this.copyContent=m.data,Z.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},r.prototype.getCopyData=function(t,e,i,n){for(var s="string"!=typeof t[0],o=0;o<t.length;o++){if(n&&e){var a=parseInt(t[o].getAttribute(Us),10);this.copyContent+=this.parent.getColumns()[a].headerText+"\n"}s?t[o].classList.contains("e-hide")||(this.copyContent+=t[o].innerText):this.copyContent+=t[o],o<t.length-1&&(this.copyContent+=i)}},r.prototype.copy=function(t){document.queryCommandSupported("copy")&&(this.setCopyData(t),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},r.prototype.getModuleName=function(){return"clipboard"},r.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&Be(this.clipBoardTextArea)},r.prototype.checkBoxSelection=function(){var t=this.parent,e={status:!1};if("Cell"===t.selectionSettings.mode){var i=t.getSelectedRowCellIndexes(),n=void 0,s=[],o=void 0;for(o=0;o<i.length&&(i[o].cellIndexes.length&&s.push(i[o].rowIndex),!i[o].cellIndexes.length||(n||(n=JSON.stringify(i[o].cellIndexes.sort())),n===JSON.stringify(i[o].cellIndexes.sort())));o++);s.sort(function(a,l){return a-l}),o===i.length&&s[s.length-1]-s[0]==s.length-1&&(e={status:!0,rowIndexes:s,colIndexes:i[0].cellIndexes})}return e},r}(),nc=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),we=function(r,t,e,i){var o,n=arguments.length,s=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,t,e,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(t,e,s):o(t,e))||s);return n>3&&s&&Object.defineProperty(t,e,s),s},EDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E()],t.prototype,"field",void 0),we([E()],t.prototype,"direction",void 0),we([E(!1)],t.prototype,"isFromGroup",void 0),t}(Si),xDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([wo([],EDe)],t.prototype,"columns",void 0),we([E(!0)],t.prototype,"allowUnsort",void 0),t}(Si),TDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E()],t.prototype,"field",void 0),we([E()],t.prototype,"operator",void 0),we([E()],t.prototype,"value",void 0),we([E()],t.prototype,"matchCase",void 0),we([E(!1)],t.prototype,"ignoreAccent",void 0),we([E()],t.prototype,"predicate",void 0),we([E({})],t.prototype,"actualFilterValue",void 0),we([E({})],t.prototype,"actualOperator",void 0),we([E()],t.prototype,"type",void 0),we([E()],t.prototype,"ejpredicate",void 0),we([E()],t.prototype,"uid",void 0),we([E()],t.prototype,"isForeignKey",void 0),we([E()],t.prototype,"condition",void 0),t}(Si),DDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E(!1)],t.prototype,"enableCache",void 0),we([E(3)],t.prototype,"maxBlocks",void 0),we([E(3)],t.prototype,"initialBlocks",void 0),t}(Si),IDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([wo([],TDe)],t.prototype,"columns",void 0),we([E("FilterBar")],t.prototype,"type",void 0),we([E()],t.prototype,"mode",void 0),we([E(!0)],t.prototype,"showFilterBarStatus",void 0),we([E(1500)],t.prototype,"immediateModeDelay",void 0),we([E()],t.prototype,"operators",void 0),we([E(!1)],t.prototype,"ignoreAccent",void 0),we([E(!1)],t.prototype,"enableCaseSensitivity",void 0),we([E(!1)],t.prototype,"showFilterBarOperator",void 0),t}(Si),ADe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E("Row")],t.prototype,"mode",void 0),we([E("Flow")],t.prototype,"cellSelectionMode",void 0),we([E("Single")],t.prototype,"type",void 0),we([E(!1)],t.prototype,"checkboxOnly",void 0),we([E(!1)],t.prototype,"persistSelection",void 0),we([E("Default")],t.prototype,"checkboxMode",void 0),we([E(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),we([E(!0)],t.prototype,"enableToggle",void 0),we([E(!1)],t.prototype,"allowColumnSelection",void 0),t}(Si),kDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E([])],t.prototype,"fields",void 0),we([E("")],t.prototype,"key",void 0),we([E("contains")],t.prototype,"operator",void 0),we([E(!0)],t.prototype,"ignoreCase",void 0),we([E(!1)],t.prototype,"ignoreAccent",void 0),t}(Si),RDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E()],t.prototype,"targetID",void 0),t}(Si),_De=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E("Both")],t.prototype,"wrapMode",void 0),t}(Si),LDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E("Normal")],t.prototype,"mode",void 0),t}(Si),ODe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E(!0)],t.prototype,"showDropArea",void 0),we([E(!1)],t.prototype,"allowReordering",void 0),we([E(!1)],t.prototype,"showToggleButton",void 0),we([E(!1)],t.prototype,"showGroupedColumn",void 0),we([E(!0)],t.prototype,"showUngroupButton",void 0),we([E(!1)],t.prototype,"disablePageWiseAggregates",void 0),we([E([])],t.prototype,"columns",void 0),we([E()],t.prototype,"captionTemplate",void 0),we([E(!1)],t.prototype,"enableLazyLoading",void 0),t}(Si),PDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E(!1)],t.prototype,"allowAdding",void 0),we([E(!1)],t.prototype,"allowEditing",void 0),we([E(!1)],t.prototype,"allowDeleting",void 0),we([E("Normal")],t.prototype,"mode",void 0),we([E(!0)],t.prototype,"allowEditOnDblClick",void 0),we([E(!0)],t.prototype,"showConfirmDialog",void 0),we([E(!1)],t.prototype,"showDeleteConfirmDialog",void 0),we([E("")],t.prototype,"template",void 0),we([E("")],t.prototype,"headerTemplate",void 0),we([E("")],t.prototype,"footerTemplate",void 0),we([E("Top")],t.prototype,"newRowPosition",void 0),we([E({})],t.prototype,"dialog",void 0),we([E(!1)],t.prototype,"allowNextRowEdit",void 0),t}(Si),MDe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return nc(t,r),we([E("Spinner")],t.prototype,"indicatorType",void 0),t}(Si),r2=function(r){function t(i,n){var s=r.call(this,i,n)||this;return s.isPreventScrollEvent=!1,s.inViewIndexes=[],s.keyA=!1,s.frozenRightCount=0,s.frozenLeftCount=0,s.tablesCount=1,s.movableCount=0,s.visibleFrozenLeft=0,s.visibleFrozenRight=0,s.visibleMovable=0,s.frozenLeftColumns=[],s.frozenRightColumns=[],s.movableColumns=[],s.media={},s.isFreezeRefresh=!1,s.tableIndex=0,s.componentRefresh=Ji.prototype.refresh,s.isVirtualAdaptive=!1,s.vRows=[],s.vcRows=[],s.vGroupOffsets={},s.rowUid=0,s.currentViewData=[],s.isManualRefresh=!1,s.isAutoFitColumns=!1,s.enableDeepCompare=!1,s.totalDataRecordsCount=0,s.disableSelectedRecords=[],s.partialSelectedRecords=[],s.lockcolPositionCount=0,s.prevPageMoving=!1,s.pageTemplateChange=!1,s.isAutoGen=!1,s.mediaBindInstance={},s.commandDelIndex=void 0,s.asyncTimeOut=50,s.isExportGrid=!1,s.enableLogger=!0,s.needsID=!0,e.Inject(Ese),Nt("mergePersistData",s.mergePersistGridData,s),s}var e;return nc(t,r),e=t,t.prototype.getPersistData=function(){for(var i=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],n={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},s=0;s<i.length;s++)for(var o=this[i[s]],a=0,l=n[i[s]];a<l.length;a++)delete o[l[a]];var u=this.pageSettings.template,d=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:d},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!f(this.pagerTemplate);var m=this.addOnPersist(i);return d.template=u,this.setProperties({pageSettings:d},!0),m},t.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var i=[];return this.isDestroyed||(this.allowFiltering&&i.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&i.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&i.push({member:"PdfExport",args:[this]}),this.allowSorting&&i.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&i.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&i.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),i.push({member:"resize",args:[this]}),this.allowReordering&&i.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&i.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&i.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&i.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&i.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&i.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&i.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&i.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&i.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&i.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(i)),i},t.prototype.extendRequiredModules=function(i){this.enableInfiniteScrolling&&i.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&i.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&i.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&i.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&i.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&i.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&i.push({member:"logger",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new aDe,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Ji.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",EndsWith:"Ends With",Contains:"Contains",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",FilterMenuDialogARIA:"Filter menu dialog",ExcelFilterDialogARIA:"Excel filter dialog",DialogEditARIA:"Edit dialog",ColumnChooserDialogARIA:"Column chooser dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{datarole:"grid"}),kc({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new sDe(this,this.serviceLocator),this.searchModule=new xse(this),this.scrollModule=new Tse(this),this.notify(Df,{}),(!0===this.getDataModule().dataManager.dataSource.offline||void 0===this.getDataModule().dataManager.dataSource.url)&&(this.isVirtualAdaptive=!0),this.trigger("load"),ND(this.columns,this.enableColumnVirtualization,this),this.enablePersistence&&this.notify(Y8,{}),this.getMediaColumns(),o2(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),"Spinner"===this.loadingIndicator.indicatorType&&this.showSpinner(),this.notify(Ba,{}),"Shimmer"===this.loadingIndicator.indicatorType&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},t.prototype.showSpinner=function(){this.isExportGrid||rh(this.element)},t.prototype.hideSpinner=function(){this.isExportGrid||Ll(this.element)},t.prototype.showMaskRow=function(i,n){var s=this.getHeaderContent().firstChild,o=this.getContent().firstChild,a=this.getFooterContent();if(n){var l=n.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),u='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var d=0;d<h;d++){l.innerHTML+=u;var m=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));m[0].classList.add("e-mask-checkbox-filter-intent"),m[1].classList.add("e-mask-checkbox-filter-span-intent")}}else{if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(o.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var C=0===(v=o.getBoundingClientRect().height)?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:v,S=Math.ceil(C/this.getRowHeight());return"Vertical"!==this.rowRenderingMode&&(this.headerMaskTable=this.createEmptyMaskTable(s,1)),void(this.contentMaskTable=this.createEmptyMaskTable(o,S))}if(this.maskRowContentScroll=!(!this.enableVirtualization||!i),!(this.contentMaskTable||this.isFrozenGrid()&&this.enableColumnVirtualization&&"X"===i)){var A=o;if(this.isFrozenGrid()){if(!this.isInitialLoad&&!this.enableVirtualization&&this.frozenRows&&"auto"!==this.height){var v=A.getBoundingClientRect().height-this.frozenRows*this.getRowHeight();A.style.height=v+"px"}A=A.querySelector(".e-frozen-left-content, .e-frozen-right-content")}else this.enableVirtualization&&(A=A.querySelector(".e-virtualtable"));f(A.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(A,this.getContentMaskColumns(),i))}if(this.headerMaskTable||!(this.isFrozenGrid()||this.enableColumnVirtualization&&"X"===i)||this.isFrozenGrid()&&(this.enableVirtualization&&"Y"===i||this.enableColumnVirtualization&&"X"===i||this.enableInfiniteScrolling&&"down"===i)||(A=s,this.isFrozenGrid()?A=A.querySelector(".e-frozen-left-header, .e-frozen-right-header"):this.enableColumnVirtualization&&"X"===i&&(A=A.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(A,this.getContentMaskColumns(),i)),this.movableHeaderMaskTable||!this.isFrozenGrid()||this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i||(A=s.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(A=A.querySelector(".e-virtualtable")),this.movableHeaderMaskTable=this.createMaskTable(A,this.getMovableContentMaskColumns(),i)),!this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&!(this.enableVirtualization&&"Y"===i||this.enableInfiniteScrolling&&"down"===i)&&(this.rightHeaderMaskTable=this.createMaskTable(s.querySelector(".e-frozen-right-header"),this.getRightContentMaskColumns(),i)),!this.movableContentMaskTable&&this.isFrozenGrid()&&(A=o.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(A=A.querySelector(".e-virtualtable")),f(A.querySelector("tbody"))||(this.movableContentMaskTable=this.createMaskTable(A,this.getMovableContentMaskColumns(),i))),!this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&(this.rightContentMaskTable=this.createMaskTable(o.querySelector(".e-frozen-right-content"),this.getRightContentMaskColumns(),i)),a&&a.querySelector(".e-summaryrow")){var _=a.firstChild;if(!this.footerContentMaskTable){var M=_;this.isFrozenGrid()&&(M=M.querySelector(".e-frozen-left-footercontent, .e-frozen-right-footercontent")),this.footerContentMaskTable=this.createMaskTable(M)}this.isFrozenGrid()&&(this.movableFooterContentMaskTable||(this.movableFooterContentMaskTable=this.createMaskTable(_.querySelector(".e-movablefootercontent"))),"Left-Right"===this.getFrozenMode()&&!this.rightFooterContentMaskTable&&(this.rightFooterContentMaskTable=this.createMaskTable(_.querySelector(".e-frozen-right-footercontent"))))}this.enableVirtualization&&i||T.add(o,"scroll",this.translateMaskRow,this)}},t.prototype.getContentMaskColumns=function(){var i=this.getColumns();return this.isFrozenGrid()&&("Left"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode()?i=this.frozenColumns?i.slice(0,this.frozenColumns):this.getFrozenLeftColumns():"Right"===this.getFrozenMode()&&(i=this.getFrozenRightColumns())),i},t.prototype.getMovableContentMaskColumns=function(){var i=this.getColumns();return this.frozenColumns?i.slice(this.frozenColumns,i.length):this.getMovableColumns()},t.prototype.getRightContentMaskColumns=function(){return this.getFrozenRightColumns()},t.prototype.createEmptyMaskTable=function(i,n){var s=this.createElement("table",{className:"e-table e-masked-table"}),o=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<n;h++)o.appendChild(a.cloneNode(!0));return s.appendChild(o),i.appendChild(s),s},t.prototype.createMaskTable=function(i,n,s){var o=i,a=!!U(o,".e-gridheader"),l=!!U(o,".e-gridcontent"),h=!!U(o,".e-gridfooter"),u=this.getContent().firstChild,d=u.scrollHeight,m=o.querySelector("table");this.isFrozenGrid()&&(l&&(o.style.overflow="hidden"),o.style.position="relative");var v=m.cloneNode();v.removeAttribute("role"),v.removeAttribute("id"),v.removeAttribute("aria-multiselectable"),v.removeAttribute("aria-colcount"),v.removeAttribute("aria-rowcount"),v.style.position="absolute",v.style.zIndex="1",v.style.width=m.getBoundingClientRect().width+"px",a&&!(this.enableColumnVirtualization&&"X"===s)&&(v.style.transform="translate(0px,"+m.querySelector("thead").getBoundingClientRect().height+"px)"),v.setAttribute("class","e-table e-masked-table");var C=m.querySelector("colgroup").cloneNode(!0);if(C.removeAttribute("id"),C.setAttribute("class","e-masked-colgroup"),v.appendChild(C),a&&this.enableColumnVirtualization&&"X"===s){var S=this.createMaskRow(C,n),A=m.querySelector("thead"),_=[].slice.call(A.querySelectorAll("tr")),M=A.cloneNode();M.removeAttribute("role"),M.setAttribute("class","e-masked-thead");for(var P=_.length,B=0;B<P;B++)M.appendChild(S.cloneNode(!0)),M.childNodes[B].style.height=_[B].getBoundingClientRect().height+"px";v.appendChild(M)}var j=m.querySelector("tbody").cloneNode();j.removeAttribute("role"),j.setAttribute("class","e-masked-tbody");var G=m.querySelector("tbody");if(l||a&&this.isFrozenGrid()){var ne=u;if(P=a&&this.isFrozenGrid()?this.frozenRows:Math.ceil(ne.getBoundingClientRect().height/this.getRowHeight()),G.querySelector(".e-emptyrow")||!G.childNodes.length||l&&this.childGrid){var fe=(S=this.createMaskRow(C,n)).cloneNode(!0);for(fe.classList.add("e-altrow"),B=0;B<P;B++){var Ee=l&&this.isFrozenGrid()&&this.frozenRows?this.frozenRows+1:1;j.appendChild((B+Ee)%2==0?fe.cloneNode(!0):S.cloneNode(!0))}}else{_=[].slice.call(G.querySelectorAll('tr:not([style*="display:none"]):not([style*="display: none"])'));var ie=G.querySelector(".e-addedrow, .e-editedrow"),Ie=void 0;for(ie&&(Ie=_.indexOf(ie),ie.classList.contains("e-addedrow")?_.splice(Ie,2):_.splice(Ie,1)),P=a&&this.isFrozenGrid()||this.enableVirtualization&&s?_.length:P<=_.length?P:_.length,B=0;B<P;B++)j.appendChild(this.applyMaskRow(_[B].cloneNode(!0),_[B].getBoundingClientRect().height));if(ie&&ie.classList.contains("e-editedrow")){var Te=j.childNodes[Ie];Te.style.height=this.getRowHeight()+"px",Te.classList.add("e-row"),ie.classList.contains("e-altrow")&&Te.classList.add("e-altrow")}}}if(v.appendChild(j),h){var ce=m.querySelector("tfoot"),Re=ce.cloneNode();for(Re.setAttribute("class","e-masked-tfoot"),_=[].slice.call(ce.querySelectorAll("tr")),B=0;B<_.length;B++)Re.appendChild(this.applyMaskRow(_[B].cloneNode(!0),_[B].getBoundingClientRect().height));v.appendChild(Re)}if(o.insertBefore(v,o.firstChild),a&&this.isFrozenGrid()&&G.getBoundingClientRect().height<v.querySelector("tbody").getBoundingClientRect().height){var je=v.querySelector("tbody").getBoundingClientRect().height-G.getBoundingClientRect().height,be=this.createElement("div",{className:"e-masked-table-holder",attrs:{style:"height: "+je+"px;"}});o.appendChild(be)}else a&&this.isFrozenGrid()&&(!this.enableColumnVirtualization||"X"!==s)&&(v.style.height=o.getBoundingClientRect().height-m.querySelector("thead").getBoundingClientRect().height+"px");if(l&&(!this.enableVirtualization||!s)){var Me=d-v.getBoundingClientRect().height,He=u.scrollTop<=(Me=Me<0?0:Me)?u.scrollTop:Me;this.enableVirtualization&&(He-=OG(U(o,".e-virtualtable")).height),v.style.transform="translate(0px,"+He+"px)"}return v},t.prototype.applyMaskRow=function(i,n){var s=i;s.removeAttribute("role"),s.removeAttribute("aria-rowindex"),s.removeAttribute("data-rowindex"),s.removeAttribute("data-uid"),s.classList.add("e-masked-row"),s.style.height=n+"px";for(var o=[].slice.call(s.childNodes),a=0;a<o.length;a++){var l=o[a],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return s},t.prototype.createMaskRow=function(i,n){var s=i,o=n,a=this.createElement("tr",{className:"e-masked-row e-row"});"Vertical"!==this.rowRenderingMode&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,u=0;h<s.childNodes.length;h++){var d=s.childNodes[h],m=l.cloneNode();m.innerHTML=this.getShimmerTemplate(),d.classList.contains("e-group-intent")||d.classList.contains("e-detail-intent")||d.classList.contains("e-drag-intent")?d.classList.contains("e-group-intent")?m.firstChild.classList.add("e-mask-group-intent"):d.classList.contains("e-detail-intent")?m.firstChild.classList.add("e-mask-detail-intent"):d.classList.contains("e-drag-intent")&&m.firstChild.classList.add("e-mask-drag-intent"):("Vertical"===this.rowRenderingMode&&o[u]&&m.setAttribute("data-cell",o[u].headerText?o[u].headerText:o[u].field),"none"===d.style.display?m.classList.add("e-hide"):(m.style.textAlign=o[u]&&o[u].textAlign?o[u].textAlign.toLowerCase():this.enableRtl?"right":"left",o[u]&&("checkbox"===o[u].type||o[u].displayAsCheckBox)&&m.firstChild.classList.add("e-mask-checkbox-intent")),u++),a.appendChild(m)}return a},t.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},t.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var i=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),n=0;n<i.length;n++)i[n]&&i[n].classList.add("e-shimmer-wave")},t.prototype.translateMaskRow=function(i){for(var n=i.target,s=n.querySelectorAll(".e-masked-table"),o=0;o<s.length;o++){var a=s[o];if(a){var l=n.scrollHeight-a.getBoundingClientRect().height,h=n.scrollTop<=(l=l<0?0:l)?n.scrollTop:l;this.enableVirtualization&&(h-=OG(U(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},t.prototype.removeMaskRow=function(){var i=this.getContent().firstChild;T.remove(i,"scroll",this.translateMaskRow);for(var n=[this.headerMaskTable,this.movableHeaderMaskTable,this.rightHeaderMaskTable,this.contentMaskTable,this.movableContentMaskTable,this.rightContentMaskTable,this.footerContentMaskTable,this.movableFooterContentMaskTable,this.rightFooterContentMaskTable],s=0;s<n.length;s++){var o=n[s];if(o){if(this.isFrozenGrid()&&!U(o,".e-gridfooter")){var a=o.parentElement;if(a.style.overflow="",a.style.position="",U(o,".e-frozen-left-header")||U(o,".e-movableheader")||U(o,".e-frozen-right-header")){var l=a.querySelector(".e-masked-table-holder");l&&Be(l)}}Be(o)}}this.headerMaskTable=null,this.movableHeaderMaskTable=null,this.rightHeaderMaskTable=null,this.contentMaskTable=null,this.movableContentMaskTable=null,this.rightContentMaskTable=null,this.footerContentMaskTable=null,this.movableFooterContentMaskTable=null,this.rightFooterContentMaskTable=null},t.prototype.refreshMaskRow=function(){var i=this.getHeaderContent().firstChild,n=this.getContent().firstChild;if(this.isInitialLoad||this.getColumns().length){if(this.contentMaskTable){var s=n;this.isFrozenGrid()?s=s.querySelector(".e-frozen-left-content, .e-frozen-right-content"):this.enableVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)}this.headerMaskTable&&this.isFrozenGrid()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-left-header, .e-frozen-right-header")),this.movableHeaderMaskTable&&this.isFrozenGrid()&&(s=i.querySelector(".e-movableheader"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightHeaderMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(i.querySelector(".e-frozen-right-header")),this.movableContentMaskTable&&this.isFrozenGrid()&&(s=n.querySelector(".e-movablecontent"),this.enableColumnVirtualization&&(s=s.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(s)),this.rightContentMaskTable&&this.isFrozenGrid()&&"Left-Right"===this.getFrozenMode()&&this.refreshMaskRowColgroupWidth(n.querySelector(".e-frozen-right-content"))}},t.prototype.refreshMaskRowColgroupWidth=function(i){var n=i.querySelector("table:not(.e-masked-table)"),s=n.querySelector(Ti).cloneNode(!0),o=i.querySelector(".e-masked-table");s.removeAttribute("id"),s.setAttribute("class","e-masked-colgroup");for(var a=0;a<s.childNodes.length;a++)s.childNodes[a].removeAttribute("class");Be(o.querySelector(".e-masked-colgroup")),o.insertBefore(s,o.firstChild),o.style.width=n.getBoundingClientRect().width+"px"},t.prototype.updateStackedFilter=function(){this.allowFiltering&&"FilterBar"===this.filterSettings.type&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var i=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!f(i))for(var n=0;n<i.length;n++)!f(i[n].hideAtMedia)&&(f(i[n].visible)||i[n].visible)&&this.pushMediaColumn(i[n],n)}},t.prototype.pushMediaColumn=function(i,n){this.mediaCol.push(i),this.media[i.uid]=window.matchMedia(i.hideAtMedia),this.mediaQueryUpdate(n,this.media[i.uid]),this.mediaBindInstance[n]=this.mediaQueryUpdate.bind(this,n),this.media[i.uid].addListener(this.mediaBindInstance[n])},t.prototype.updateMediaColumns=function(i){if(!this.enableColumnVirtualization){for(var n=this.getColumnIndexByUid(i.uid),s=0;s<this.mediaCol.length;s++)if(i.uid===this.mediaCol[s].uid)return void this.mediaCol.splice(s,1);this.pushMediaColumn(i,n)}},t.prototype.mediaQueryUpdate=function(i,n){var s=this.getColumns()[i];this.mediaCol.some(function(o){return o.uid===s.uid})&&(s.visible=n.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,s.visible?this.showHider.show(s.headerText,"headerText"):this.showHider.hide(s.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var i=this.element.querySelector("."+yC);this.aggregates.length&&this.element.scrollHeight>this.height&&i&&N([i],["e-footerpadding"]),this.getColumns().filter(function(s){return"checkbox"===s.type}).length&&"ResetOnRowClick"===this.selectionSettings.checkboxMode&&(this.isCheckBoxSelection=!1),"Vertical"===this.rowRenderingMode&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),z([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh()},t.prototype.removeMediaListener=function(){for(var i=0;i<this.mediaCol.length;i++)this.media[this.mediaCol[i].uid].removeListener(this.mediaBindInstance[this.mediaCol[i].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var i=this.element;if(i){var n=!(!i.querySelector("."+js)||!i.querySelector("."+Ps));n&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(dn,{}),this.destroyDependentModules(),(this.isReact||this.isVue)&&this.destroyTemplate(["template"]),n&&r.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!Z.isIE&&(this.element.innerHTML="");for(var s=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],o=0;o<s.length;o++)this[s[o]]&&(this[s[o]]=null);this.element.innerHTML="",ri(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"]),this.isFreezeRefresh=!1}},t.prototype.destroyDependentModules=function(){var i=this.element;!i||!i.querySelector("."+js)&&!i.querySelector("."+Ps)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},t.prototype.setCSSClass=function(i){this.cssClass&&N([this.element],this.cssClass.split(" ")),i&&z([this.element],i.split(" "))},t.prototype.onPropertyChanged=function(i,n){var l,s=!1,o=!1,a=!1;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var u=Object.keys(i);u.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),o=!0);for(var d=0,m=u;d<m.length;d++){var v=m[d];switch(v){case"allowPaging":this.notify(Nr,{module:"pager",enable:this.allowPaging}),s=!0;break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Ha,{module:"pager",properties:i.pageSettings});break}this.notify(Ha,{module:"pager",properties:i.pageSettings}),(f(i.pageSettings.currentPage)&&f(i.pageSettings.pageSize)&&f(i.pageSettings.totalRecordsCount)||!f(n.pageSettings)&&i.pageSettings.currentPage!==n.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(s=!0);break;case"allowSorting":this.notify(Nr,{module:"sort",enable:this.allowSorting}),s=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(Nr,{module:"filter",enable:this.allowFiltering}),s=!0,"FilterBar"!==this.filterSettings.type&&this.refreshHeader();break;case"height":case"width":this.notify(Nr,{module:"scroll",properties:{width:i.width,height:i.height}});break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(Nr,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(Nr,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(n.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=bl(this.rowTemplate),s=!0;break;case"detailTemplate":this.detailTemplateFn=bl(this.detailTemplate),s=!0;break;case"allowGrouping":this.notify(Nr,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),s=!0,l=!0;break;case"enableInfiniteScrolling":case"childGrid":s=!0;break;case"toolbar":this.notify(Nr,{module:"toolbar"});break;case"groupSettings":this.notify(Ha,{module:"group",properties:i.groupSettings,oldProperties:n.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(s=!0),this.notify(Nr,{module:"aggregate",properties:i});break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),a=!0,o=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(s=!0),this.getDataModule().isQueryInvokedFromData=!1;break;default:this.extendedPropertyChange(v,i,o)}}l&&this.updateDefaultCursor(),o?a||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():s&&(this.notify(zo,{requestType:"refresh"}),s=!1,this.maintainSelection(i.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(i,n,s){switch(i){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=n.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),"auto"!==this.height&&(this.scrollModule.removePadding(!n.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=n.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=n.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=n.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),"FilterBar"===this.filterSettings.type&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify("rtl-updated",{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?N([this.element],"e-grid-min-height"):z([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(Nr,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(Nr,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(Nr,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(Nr,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Ha,{module:"filter",properties:n.filterSettings});break;case"searchSettings":this.notify(Ha,{module:"search",properties:n.searchSettings});break;case"sortSettings":this.notify(Ha,{module:"sort"});break;case"selectionSettings":this.notify(Ha,{module:"selection",properties:n.selectionSettings});break;case"editSettings":this.notify(Ha,{module:"edit",properties:n.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(cu,{case:"textwrap",isModeChg:"textWrapSettings"===i});break;case"dataSource":var o=this.getDataModule().getState();if(Object.getPrototypeOf(n).deepWatch)for(var a=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(n.dataSource);l<h.length;l++)this.setRowData(Q(a,this.dataSource[h[l]]),this.dataSource[h[l]]);else if(o.isPending){var u=f(this.dataSource)?[]:this.dataSource.result,d=o.group||[];for(l=0;l<d.length;l++)u=qe.group(u,d[l],o.aggregates||[]);this.dataSource={result:u,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),o.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(QL,{}),s||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(lG,{}));this.scrollRefresh();break;case"enableHover":(n.enableHover?N:z)([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(n.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(lO,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(pG,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(n.enableStickyHeader)}},t.prototype.maintainSelection=function(i){var n=this;if(-1!==i){var s=function(){n.selectRow(i),n.off(Zr,s)};this.on(Zr,s,this)}},t.prototype.setProperties=function(i,n){r.prototype.setProperties.call(this,i,n),i.filterSettings&&this.filterModule&&n&&this.filterModule.refreshFilter()},t.prototype.setTablesCount=function(){var i=this.getFrozenColumns(),n=this.getFrozenLeftColumnsCount(),s=this.getFrozenRightColumnsCount();!i||n||s?!i&&(n||s)&&(n&&!s||s&&!n?this.tablesCount=2:n&&s&&(this.tablesCount=3)):this.tablesCount=2},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){var i=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),n=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),s=this.getColumns();if(this.enableColumnVirtualization&&this.getFrozenColumns()){var o=this.contentModule.getHeaderCells();i=o.length?o:i}for(var a=0;a<i.length;a++){(this.allowGrouping||this.allowReordering||this.allowSorting)&&i[a].classList.add(s[a].allowReordering&&s[a].allowSorting&&s[a].allowGrouping?"e-mousepointer":"e-defaultcursor")}for(var h=0;h<n.length;h++)this.allowReordering&&n[h].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(i,n){for(var s=0,o=i.length;s<o;s++)i[s].columns?this.updateColumnModel(i[s].columns,!0):this.columnModel.push(i[s]);(f(n)||!n)&&(this.updateColumnLevelFrozen(),this.updateFrozenColumns(),this.updateLockableColumns())},t.prototype.updateColumnLevelFrozen=function(){var i=this.columnModel,n=[],s=[],o=[];if(this.frozenLeftCount||this.frozenRightCount){for(var a=0,l=i.length;a<l;a++){var h=i[a];"Left"===h.freeze?(h.freezeTable=rs,n.push(h)):"Right"===h.freeze?(h.freezeTable=or,s.push(h)):(h.freezeTable="movable",o.push(h))}this.columnModel=n.concat(o).concat(s)}},t.prototype.updateFrozenColumns=function(){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var i=this.columnModel,n=this.frozenColumns,s=this.getFrozenColumns(),o=0,a=0,l=i.length;a<l;a++){var h=i[a];n&&(h.freezeTable=a<n?rs:"movable"),h.isFrozen&&a>=n?(h.freezeTable=rs,i.splice(this.frozenColumns+o,0,i.splice(a,1)[0]),o++):s&&!n&&(h.freezeTable="movable")}},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return 0!==this.getFrozenColumns()||0!==this.getFrozenLeftColumnsCount()||0!==this.getFrozenRightColumnsCount()},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var i=this.columnModel,n=0,s=0,o=this.getFrozenColumns(),a=0;a<i.length;a++)i[a].lockColumn&&(a<o?(i.splice(n,0,i.splice(a,1)[0]),n++):(i.splice(o+s,0,i.splice(a,1)[0]),s++))},t.prototype.checkLockColumns=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.checkLockColumns(i[n].columns):i[n].lockColumn&&this.lockcolPositionCount++},t.prototype.getColumns=function(i){var n=this,s=this.inViewIndexes.map(function(h){return h-n.groupSettings.columns.length}).filter(function(h){return h>-1}),o=s.length;(!this.enableColumnVirtualization||f(this.columnModel)||0===this.columnModel.length||i)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=0===o?this.columnModel:this.columnModel.slice(s[0],s[o-1]+1);return this.contentModule&&this.enableColumnVirtualization&&this.isFrozenGrid()&&s.length&&s[0]>0&&(a=this.contentModule.ensureFrozenCols(a)),a},t.prototype.getStackedHeaderColumnByHeaderText=function(i,n){for(var s=0;s<n.length;s++){var o=n[s];if(o.field===i||o.headerText===i){this.stackedColumn=o;break}o.columns&&this.getStackedHeaderColumnByHeaderText(i,o.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(i){this.inViewIndexes=i},t.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(i){this.headerModule.setPanel(i)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(i){this.contentModule.setTable(i)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(i){this.contentModule.setPanel(i)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(i){this.headerModule.setTable(i)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(yC)[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(yC)[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(i){this.gridPager=i},t.prototype.getRowByIndex=function(i){return this.contentModule.getRowByIndex(i)},t.prototype.getMovableRowByIndex=function(i){return this.contentModule.getMovableRowByIndex(i)},t.prototype.getFrozenRowByIndex=function(i){return this.getFrozenDataRows()[i]},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(i){return this.contentModule.getFrozenRightRowByIndex(i)},t.prototype.getRowInfo=function(i){var n=i,s={target:i};if(!f(i)&&f(pe(n,"e-detailrowcollapse")&&f(pe(n,"e-recordplusexpand")))){var o=U(n,"."+tn);if(!o){var a=U(n,"."+vn);if(!f(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(Ai),10);s={row:a,rowData:l.data,rowIndex:h}}return s}var u=parseInt(o.getAttribute(Us),10);if(!f(o)&&!isNaN(u)){var d=U(o,"."+vn),m=(h=parseInt(d.getAttribute(Ai),10),this.getFrozenColumns()),v=this.columnModel[u].getFreezeTableName(),C=this.contentModule.getRows(),S=u+this.getIndentCount();this.isFrozenGrid()&&(v===rs?C=this.contentModule.getRows():"movable"===v?(S=u-m-this.frozenLeftCount,C=this.contentModule.getMovableRows()):v===or&&(S=u-(this.frozenLeftCount+this.movableCount),C=this.contentModule.getFrozenRightRows()));var A=C.filter(function(B){return B.uid===d.getAttribute("data-uid")}),_={},M=void 0;Object.keys(A).length&&(_=A[0].data,M=A[0].cells[S].column),s={cell:o,cellIndex:u,row:d,rowIndex:h,rowData:_,column:M,target:i}}}return s},t.prototype.getMovableRows=function(){return this.contentModule.getMovableRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getFrozenRightRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(i){if(f(this.getContentTable().querySelector(rt)))return[];var n=this.isFrozenGrid()?this.getFrozenLeftContentTbody():this.getContentTable().querySelector(rt),s=[].slice.call(n.children);if(this.frozenRows){var o=this.isFrozenGrid()?this.getHeaderContent().querySelector("."+Zd).querySelector(rt):this.getHeaderTable().querySelector(rt),a=[].slice.call(o.children);s=this.addMovableRows(a,s)}return this.generateDataRows(s,i)},t.prototype.addMovableRows=function(i,n){for(var s=0,o=n.length;s<o;s++)i.push(n[s]);return i},t.prototype.generateDataRows=function(i,n){for(var s=[],o=0,a=i.length;o<a;o++)i[o].classList.contains(vn)&&(!i[o].classList.contains("e-hiddenrow")||n)&&(this.isCollapseStateEnabled()?s[parseInt(i[o].getAttribute("data-rowindex"),10)]=i[o]:s.push(i[o]));return s},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(i){if(!this.isFrozenGrid())return[];var n=[].slice.call(this.getContent().querySelector("."+zn).querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+Zn).querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(i){var n=[].slice.call(this.getContent().querySelector("."+tc).querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector("."+Zd).querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(i){if("Right"!==this.getFrozenMode()&&"Left-Right"!==this.getFrozenMode())return[];var n=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(rt).children);if(this.frozenRows){var s=[].slice.call(this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(rt).children);n=this.addMovableRows(s,n)}return this.generateDataRows(n,i)},t.prototype.setCellValue=function(i,n,s){var a="data",l="index",u="Right"===this.getFrozenMode(),d=this.getPrimaryKeyFieldNames()[0],m=new fh(this,this.serviceLocator),v=this.getColumnIndexByField(n),C=this.getColumnByField(n),A=("movable"===C.getFreezeTableName()?this.contentModule.getMovableRows():"frozen-right"===C.getFreezeTableName()?this.getFrozenRightRowsObject():this.contentModule.getRows()).filter(function(fe){return Q(d,fe.data)===i})[0],_=A?this.element.querySelector("[data-uid="+A.uid+"]"):null;if(!f(_)){Nt(n,s,A[a]);var M=this.getFrozenLeftColumnsCount()||this.getFrozenColumns(),P=this.getMovableColumnsCount();this.isRowDragable()&&!u&&M++;var B=M+P,j=this.enableVirtualization?_.children[v]:this.getCellFromIndex(A[l],v);if(!f(j)){var G="movable"===C.getFreezeTableName()?M:"frozen-right"===C.getFreezeTableName()?B:0;this.groupSettings.columns.length&&(v+=this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&v++,this.isRowDragable()&&!u&&v++,m.refreshTD(j,A.cells[v-G],A[a],{index:A[l]}),this.aggregates.length>0&&(this.notify(Wv,{}),this.groupSettings.columns.length>0&&this.notify(mC,{})),!f(A)&&!f(A.changes)&&(A.changes[n]=s),this.trigger(k8,{cell:j,column:C,data:A[a]})}}},t.prototype.refreshReactColumnTemplateByUid=function(i){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){for(var s="cells",a=!(!n.childGrid||!n.element.querySelectorAll(".e-childgrid").length),l=a?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows(),h=n.getIndentCount(),u=0,d=!1,v=(n.getNormalizedColumnIndex(i),0);v<l.length;v++){var C=n.getRowObjectFromUID(l[v].getAttribute("data-uid"));if(a&&!C&&pe(l[v],"e-childgrid")){var S=pe(l[v],"e-childgrid").ej2_instances[0];C=S.getRowObjectFromUID(l[v].getAttribute("data-uid")),u=S.getIndentCount(),d=!0}if(C&&C.isDataRow&&!f(C.index)&&!l[v].classList.contains("e-editedrow"))for(var A=0;A<C[s].length;A++){var _=C[s][A];if(_.isTemplate){var M=new fh(n,n.serviceLocator),P=a?l[v].children[_.index+(d?u:h)]:n.getCellFromIndex(v,A-h);M.refreshTD(P,_,C.data,{index:C.index})}}d=!1}})},t.prototype.refreshReactHeaderTemplateByUid=function(i){if(this.isReact)for(var s=this.headerModule.rows,o=this.getNormalizedColumnIndex(i),a=0;a<s.length;a++){var l=s[a].cells[o];if(l&&l.column.uid===i){var h=new vse(this,this.serviceLocator),u=pe(this.element.querySelectorAll("[e-mappinguid="+i+"]")[0],"e-templatecell");h.refresh(l,u)}}},t.prototype.setRowData=function(i,n){var o=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(o=o.filter(function(A){return A.isDataRow}));var l=o.filter(function(A){return Q(a,A.data)===i})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l.uid+"]")):void 0;if(!f(l)&&h.length){if(l.changes=n,this.isFrozenGrid()){var u=pe(h[0],"e-table"),d=u.parentElement.matches(".e-frozen-left-header,.e-frozen-left-content")?"left":u.parentElement.matches(".e-frozen-right-header,.e-frozen-right-content")?"right":"movable",m=this.getMovableRowsObject()[l.index];if(this.setFrozenRowData(m,n),"left"===d){var v=this.getRowsObject()[l.index];this.setFrozenRowData(v,n)}if("right"===d||this.frozenRightColumns.length>0){var C=this.getFrozenRightRowsObject()[l.index];this.setFrozenRowData(C,n)}}else if(this.frozenRows){var S=this.getRowsObject()[l.index];this.setFrozenRowData(S,n)}else this.setFrozenRowData(l,n);this.aggregates.length>0&&(this.notify(Wv,{}),this.groupSettings.columns.length>0&&this.notify(mC,{}))}},t.prototype.setFrozenRowData=function(i,n){var s=new Fh(this.serviceLocator,null,this);i.changes=n,l2(i,this.getForeignKeyColumns(),i.changes),s.refresh(i,this.getColumns(),!0)},t.prototype.getCellFromIndex=function(i,n){return BG(this,this.getColumnByIndex(n),i,n)},t.prototype.getMovableCellFromIndex=function(i,n){if(!("Left-Right"===this.frozenName&&n>=this.movableCount)){var s=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableDataRows()[i]&&this.getMovableDataRows()[i].getElementsByClassName(tn)[n-s]}},t.prototype.getFrozenRightCellFromIndex=function(i,n){var s=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount(),o=this.getFrozenRightDataRows();return o[i]&&o[i].getElementsByClassName(tn)[n-s]},t.prototype.getColumnHeaderByIndex=function(i){return this.getHeaderTable().getElementsByClassName("e-headercell")[i]},t.prototype.getMovableColumnHeaderByIndex=function(i){var n=this.getFrozenColumns()||this.getFrozenLeftColumnsCount();return this.getMovableVirtualHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenRightColumnHeaderByIndex=function(i){var n=this.getFrozenLeftColumnsCount()+this.getMovableColumnsCount();return this.getFrozenRightHeader().getElementsByClassName("e-headercell")[i-n]},t.prototype.getFrozenLeftColumnHeaderByIndex=function(i){return this.getFrozenVirtualHeader().getElementsByClassName("e-headercell")[i]},t.prototype.getRowObjectFromUID=function(i,n,s){var o=this.contentModule.getRows(),a=this.rowObject(o,i);return this.isFrozenGrid()&&(!a||n||s)?((!(a=this.rowObject(this.contentModule.getMovableRows(),i))&&"Left-Right"===this.getFrozenMode()||s)&&(a=this.rowObject(this.contentModule.getFrozenRightRows(),i)),a):(f(a)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(a=this.rowObject(this.vRows,i)),a)},t.prototype.rowObject=function(i,n){if(i)for(var s=0,o=i;s<o.length;s++){var a=o[s];if(a.uid===n)return a}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){var i=[];return this.isFrozenGrid()&&(i=this.contentModule.getMovableRows()),i},t.prototype.getFrozenRightRowsObject=function(){var i=[];return("Right"===this.getFrozenMode()||"Left-Right"===this.getFrozenMode())&&(i=this.contentModule.getFrozenRightRows()),i},t.prototype.getColumnHeaderByField=function(i){var n=this.getColumnByField(i);return n?this.getColumnHeaderByUid(n.uid):void 0},t.prototype.getColumnHeaderByUid=function(i){var n=this.getHeaderContent().querySelector("[e-mappinguid="+i+"]");return n?n.parentElement:void 0},t.prototype.getColumnByIndex=function(i){var n;return this.getColumns().some(function(s,o){return n=s,o===i}),n},t.prototype.getColumnByField=function(i){return jS(this.getColumns(),function(n){if(n.field===i)return n})[0]},t.prototype.getColumnIndexByField=function(i){for(var n=this.getColumns(),s=0;s<n.length;s++)if(n[s].field===i)return s;return-1},t.prototype.getColumnByUid=function(i){return jS(this.getColumns().concat(this.getStackedColumns(this.columns)),function(n){if(n.uid===i)return n})[0]},t.prototype.getStackedColumns=function(i,n){void 0===n&&(n=[]);for(var s=0,o=i;s<o.length;s++){var a=o[s];a.columns&&(n.push(a),this.getStackedColumns(a.columns,n))}return n},t.prototype.getColumnIndexByUid=function(i){var n=jS(this.getColumns(),function(s,o){if(s.uid===i)return o})[0];return f(n)?-1:n},t.prototype.getUidByColumnField=function(i){return jS(this.getColumns(),function(n){if(n.field===i)return n.uid})[0]},t.prototype.getNormalizedColumnIndex=function(i){return this.getColumnIndexByUid(i)+this.getIndentCount()},t.prototype.getIndentCount=function(){var i=0;return this.allowGrouping&&(i+=this.groupSettings.columns.length),this.isDetail()&&i++,this.isRowDragable()&&f(this.rowDropSettings.targetID)&&i++,i},t.prototype.getColumnFieldNames=function(){for(var n,i=[],s=0,o=this.getColumns().length;s<o;s++)(n=this.getColumns()[s]).visible&&i.push(n.field);return i},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var i=[],n=0;n<this.columnModel.length;n++)this.columnModel[n].isPrimaryKey&&i.push(this.columnModel[n].field);return i},t.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var i=this,n=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(s){return n.push(i.getColumns()[s].uid)}),n},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(i,n){this.showHider.show(i,n=n||"headerText")},t.prototype.hideColumns=function(i,n){this.showHider.hide(i,n=n||"headerText")},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount},t.prototype.getMovableColumnsCount=function(){return this.movableCount},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.splitFrozenCount(this.columns),this.frozenColumns&&(this.frozenLeftCount||this.frozenRightCount)&&this.setProperties({frozenColumns:0},!0),this.setTablesCount(),this.frozenName=this.frozenLeftCount&&!this.frozenRightCount?"Left":this.frozenRightCount&&!this.frozenLeftCount?"Right":this.frozenLeftCount&&this.frozenRightCount?"Left-Right":this.frozenColumns&&this.frozenRows?"Left":void 0},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitFrozenCount=function(i){for(var n=0;n<i.length;n++)i[n].columns?this.splitFrozenCount(i[n].columns):"Right"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenRight++,this.frozenRightColumns.push(i[n]),this.frozenRightCount++):"Left"===i[n].freeze?(!1!==i[n].visible&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(i[n]),this.frozenLeftCount++):(!1!==i[n].visible&&this.visibleMovable++,this.movableColumns.push(i[n]),this.movableCount++)},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var i=0,n=this.columnModel,s=0;s<this.frozenColumns;s++)n[s].visible&&i++;if(this.frozenLeftCount||this.frozenRightCount)for(s=0;s<n.length;s++)n[s].visible&&("Left"===n[s].freeze||"Right"===n[s].freeze)&&i++;return i},t.prototype.getVisibleFrozenCount=function(i,n){if(!this.frozenLeftCount&&!this.frozenRightCount)for(var s=0,o=i.length;s<o;s++)i[s].columns?n=this.getVisibleFrozenCount(i[s].columns,n):i[s].isFrozen&&i[s].visible&&n++;return n},t.prototype.getFrozenCount=function(i,n,s){for(var o=0,a=i.length;o<a;o++)i[o].columns?n=this.getFrozenCount(i[o].columns,n,s):(i[o].isFrozen&&s>this.frozenColumns-1&&n++,s++);return n},t.prototype.goToPage=function(i){this.pagerModule&&this.pagerModule.goToPage(i)},t.prototype.updateExternalMessage=function(i){this.pagerModule&&this.pagerModule.updateExternalMessage(i)},t.prototype.sortColumn=function(i,n,s){this.sortModule&&this.sortModule.sortColumn(i,n,s)},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(i){this.sortModule&&this.sortModule.removeSortColumn(i)},t.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},t.prototype.filterByColumn=function(i,n,s,o,a,l,h,u){this.filterModule&&this.filterModule.filterByColumn(i,n,s,o,a,l,h,u)},t.prototype.clearFiltering=function(i){this.filterModule&&this.filterModule.clearFiltering(i)},t.prototype.removeFilteredColsByField=function(i,n){this.filterModule&&this.filterModule.removeFilteredColsByField(i,n)},t.prototype.selectRow=function(i,n){this.selectionModule&&this.selectionModule.selectRow(i,n)},t.prototype.selectRows=function(i){this.selectionModule&&this.selectionModule.selectRows(i)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(i,n){this.selectionModule&&this.selectionModule.selectCell(i,n)},t.prototype.selectCellsByRange=function(i,n){this.selectionModule.selectCellsByRange(i,n)},t.prototype.search=function(i){this.searchModule&&this.searchModule.search(i)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(i,n){this.editModule&&this.editModule.deleteRecord(i,n)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(i,n){this.editModule&&this.editModule.addRecord(i,n)},t.prototype.deleteRow=function(i){this.editModule&&this.editModule.deleteRow(i)},t.prototype.editCell=function(i,n){this.editModule&&this.editModule.editCell(i,n)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(i,n,s){this.editModule&&this.editModule.updateCell(i,n,s)},t.prototype.updateRow=function(i,n){this.editModule&&this.editModule.updateRow(i,n)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(i,n){this.toolbarModule&&this.toolbarModule.enableItems(i,n)},t.prototype.copy=function(i){this.clipboardModule&&this.clipboardModule.copy(i)},t.prototype.recalcIndentWidth=function(){var i=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())&&!this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")&&this.getContentTable()){var n=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,s=[].slice.call(this.getHeaderTable().querySelector(Ti).childNodes),o=[].slice.call(this.getContentTable().querySelector(Ti).childNodes),a=n/30,l="Right"===this.getFrozenMode()?this.frozenRightCount:0,h=this.element.offsetWidth,u=function(d,m){if(FG(i)){var v=(m/h*100).toFixed(1)+"%";s[d].style.width=v,o[d].style.width=v}else s[d].style.width=m+"px",o[d].style.width=m+"px";i.notify(XL,{index:d,width:m})};for(a>=1&&(n=30/a),n<1&&(n=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(n=30);l<this.groupSettings.columns.length;)u(l,n),l++;this.isDetail()&&(u(l,n),l++),this.isRowDragable()&&u(l,n),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.resetIndentWidth=function(){if(FG(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth()),("auto"===this.width||"string"==typeof this.width&&-1!==this.width.indexOf("%"))&&this.getColumns().filter(function(n){return(!n.width||"auto"===n.width)&&n.minWidth}).length>0){var i=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(i)}this.isFrozenGrid()&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&"Content"!==this.textWrapSettings.wrapMode&&this.notify(aO,{})},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(i,n){this.reorderModule&&this.reorderModule.reorderColumns(i,n)},t.prototype.reorderColumnByIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByIndex(i,n)},t.prototype.reorderColumnByTargetIndex=function(i,n){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(i,n)},t.prototype.reorderRows=function(i,n){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(i,n)},t.prototype.refreshDataSource=function(i){this.notify("refreshdataSource",i)},t.prototype.disableRowDD=function(i){var n=this.getHeaderTable(),s=this.getContentTable(),o=n.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=i?"none":"";Ft(n.querySelector(Ti).childNodes[0],{display:l}),Ft(s.querySelector(Ti).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var u=a[h].firstElementChild;i?N([u],"e-hide"):z([u],["e-hide"])}for(var d=0;d<n.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;d++)u=o[d],i?N([u],"e-hide"):z([u],["e-hide"])},t.prototype.autoFitColumns=function(i){this.resizeModule&&this.resizeModule.autoFitColumns(i)},t.prototype.createColumnchooser=function(i,n,s){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(i,n,s)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new DG(this)),this.serviceLocator.register("cellRendererFactory",new oDe),this.serviceLocator.register("rendererFactory",new lDe),this.serviceLocator.register("localization",this.localeObj=new es(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new _S(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new bDe(this)),this.serviceLocator.register("ariaService",this.ariaService=new fO),this.serviceLocator.register("focus",this.focusModule=new hDe(this))},t.prototype.processModel=function(){var s,o,i=this.groupSettings.columns,n=this.sortSettings.columns;if(this.allowGrouping)for(var a=function(m,v){o=0;for(var C=n.length;o<C;o++)if(n[o].field===i[m]){s=!0;break}if(s?l.allowSorting?l.sortedColumns.push(n[o].field):n[o].direction="Ascending":n.push({field:i[m],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var S=l.enableColumnVirtualization?l.columns.filter(function(A){return A.field===i[m]})[0]:l.getColumnByField(i[m]);S?S.visible=!1:l.log("initial_action",{moduleName:"group",columnName:i[m]})}},l=this,h=0,u=i.length;h<u;h++)a(h);if(!i.length)for(h=0;h<n.length;h++)this.sortedColumns.push(n[h].field);if(this.rowTemplateFn=bl(this.rowTemplate),this.detailTemplateFn=bl(this.detailTemplate),this.editTemplateFn=bl(this.editSettings.template),this.editHeaderTemplateFn=bl(this.editSettings.headerTemplate),this.editFooterTemplateFn=bl(this.editSettings.footerTemplate),!f(this.parentDetails)){var d=f(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",d,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(U8,this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){"Vertical"===this.rowRenderingMode?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},t.prototype.gridRender=function(){this.updateRTL(),"Vertical"===this.rowRenderingMode&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),Z.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&this.element.classList.add(this.cssClass),ri(this.element,["e-responsive","e-default"],[]);var i=this.serviceLocator.getService("rendererFactory");this.headerModule=i.getRenderer(zs.Header),this.contentModule=i.getRenderer(zs.Content),this.printModule=new Ise(this,this.scrollModule),this.clipboardModule=new SDe(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),"auto"!==this.height&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var i=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),n=this.createElement("div",{className:as,attrs:{tabIndex:"-1"}});Kt([n,this.createElement("div",{className:"e-uptail e-tail"})],i),n.appendChild(this.createElement("span")),Kt([n,this.createElement("div",{className:"e-downtail e-tail"})],i),this.element.appendChild(i)},t.prototype.updateGridLines=function(){switch(ri(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines")}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&"Vertical"!==this.gridLines&&"Both"!==this.gridLines?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var i=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":du(this.element,!1),du(this.getContent(),!1),du(i,!0);break;case"Content":du(this.getContent(),!0),du(this.element,!1),du(i,!1);break;default:du(this.element,!0),du(this.getContent(),!1),du(i,!1)}"Content"!==this.textWrapSettings.wrapMode&&this.notify(aO,{})}},t.prototype.removeTextWrap=function(){du(this.element,!1),du([].slice.call(this.element.getElementsByClassName("e-columnheader")),!1),du(this.getContent(),!1),"Content"!==this.textWrapSettings.wrapMode&&this.notify(aO,{})},t.prototype.createTooltip=function(){this.toolTipObj=new lB({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},t.prototype.freezeRefresh=function(){this.isFreezeRefresh=!0,this.enableVirtualization&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(i){var n=this.getHeaderTable(),s="e-gridheader",o=this.createTable(n,s,"header"),a=this.createTable(n,s,"content"),l=i.classList.contains("e-headercell")?o:a,h=i.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=i.className,l.querySelector(h).innerHTML=i.innerHTML;var u=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(o),document.body.removeChild(a),u>i.getBoundingClientRect().width},t.prototype.mouseMoveHandler=function(i){if(this.isEllipsisTooltip()){var n=pe(i.target,"e-ellipsistooltip");if((this.prevElement!==n||"mouseout"===i.type)&&this.toolTipObj.close(),n&&"mouseout"!==i.type&&(!Z.isDevice||-1===["A","BUTTON","INPUT"].indexOf(i.target.tagName))){if(n.getAttribute("aria-describedby"))return;if(this.getTooltipStatus(n)){var a=this.createElement("div");n.getElementsByClassName("e-headertext").length?(a.innerHTML=n.getElementsByClassName("e-headertext")[0].innerText,this.toolTipObj.content=a):(a.innerHTML=n.innerText,this.toolTipObj.content=a),this.prevElement=n,this.getColumns()[parseInt(n.getAttribute(Us),10)].disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(n)}}}this.hoverFrozenRows(i)},t.prototype.hoverFrozenRows=function(i){if(this.isFrozenGrid()){var n=pe(i.target,vn);if([].slice.call(this.element.getElementsByClassName("e-frozenhover")).length&&"mouseout"===i.type)for(var s=[].slice.call(this.element.getElementsByClassName("e-frozenhover")),o=0;o<s.length;o++)s[o].classList.remove("e-frozenhover");else if(n)for((s=[].slice.call(this.element.querySelectorAll('tr[data-rowindex="'+n.getAttribute(Ai)+'"]'))).splice(s.indexOf(n),1),o=0;o<s.length;o++)"true"!==n.getAttribute("aria-selected")&&s[o]?s[o].classList.add("e-frozenhover"):s[o]&&s[o].classList.remove("e-frozenhover")}},t.prototype.isEllipsisTooltip=function(){var i=this.getColumns();if("EllipsisWithTooltip"===this.clipMode)return!0;for(var n=0;n<i.length;n++)if("EllipsisWithTooltip"===i[n].clipMode)return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(i,n,s){var o=this.createElement("div");o.className=this.element.className,o.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=n;var l=this.createElement("table",{attrs:{role:"grid"}});l.className=i.className,l.style.cssText="table-layout: auto;width: auto";var h="header"===s?"th":"td",u=this.createElement("tr",{attrs:{role:"row"}}),d=this.createElement(h);return u.appendChild(d),l.appendChild(u),a.appendChild(l),o.appendChild(a),document.body.appendChild(o),o},t.prototype.onKeyPressed=function(i){("tab"===i.action||"shiftTab"===i.action)&&this.toolTipObj.close()},t.prototype.wireEvents=function(){T.add(this.element,"click",this.mouseClickHandler,this),T.add(this.element,"touchend",this.mouseClickHandler,this),T.add(this.element,"focusout",this.focusOutHandler,this),T.add(this.element,"dblclick",this.dblClickHandler,this),T.add(this.element,"keydown",this.keyPressHandler,this),T.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=-1===this.element.tabIndex?0:this.element.tabIndex),this.keyboardModule=new In(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),T.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),T.add(this.element,"mousemove",this.mouseMoveHandler,this),T.add(this.element,"mouseout",this.mouseMoveHandler,this),T.add(this.getContent(),"touchstart",this.tapEvent,this),T.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){T.remove(this.element,"click",this.mouseClickHandler),T.remove(this.element,"touchend",this.mouseClickHandler),T.remove(this.element,"focusout",this.focusOutHandler),T.remove(this.element,"dblclick",this.dblClickHandler),T.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),T.remove(this.element,"mousemove",this.mouseMoveHandler),T.remove(this.element,"mouseout",this.mouseMoveHandler),T.remove(this.element,"keydown",this.keyPressHandler),T.remove(this.getContent(),"touchstart",this.tapEvent),T.remove(document.body,"keydown",this.keyDownHandler),T.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on(jc,this.dataReady,this),this.on(Zr,this.recalcIndentWidth,this),this.on(xo,this.recalcIndentWidth,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(ph,this.dataBoundFunction),this.on(Cs,this.onKeyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off(jc,this.dataReady),this.off(Zr,this.recalcIndentWidth),this.off(xo,this.recalcIndentWidth),this.removeEventListener(ph,this.dataBoundFunction),this.off(Cs,this.onKeyPressed))},t.prototype.getCurrentViewRecords=function(){return ws(this)?f(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(i){if(!(this.isChildGrid(i)||pe(i.target,"e-gridpopup")&&i.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(i))&&((this.allowRowDragAndDrop||!pe(i.target,Ps)&&"TD"!==i.target.tagName)&&(this.allowGrouping||this.allowReordering||!pe(i.target,"e-gridheader"))||!i.touches)){pe(i.target,"e-gridheader")&&this.allowRowDragAndDrop&&!pe(i.target,"e-filterbarcell")&&i.preventDefault();var n=this.getRowInfo(i.target);n.cancel=!1;var o=!1,a=U(i.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));o=!!l&&l.isDataRow}o&&this.trigger("recordClick",n),this.notify(sl,i)}},t.prototype.checkEdit=function(i){var n=pe(i.target,vn),s="Batch"!==this.editSettings.mode&&this.isEdit&&n&&(n.classList.contains(Va)||n.classList.contains(Bl));return!pe(i.target,"e-unboundcelldiv")&&(s||pe(i.target,tn)&&pe(i.target,tn).classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(i){var n=pe(i.target,"e-grid");if(!f(n)&&n.id===this.element.id&&!U(i.target,".e-unboundcelldiv")){var s=!1,o=U(i.target,"tr");if(o&&o.getAttribute("data-uid")){var a=this.getRowObjectFromUID(o.getAttribute("data-uid"));s=!!a&&a.isDataRow}var l=this.getRowInfo(i.target);l.target=i.target,s&&this.trigger("recordDoubleClick",l),this.notify(JL,i)}},t.prototype.focusOutHandler=function(i){if(!this.isChildGrid(i)){pe(i.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var n=this.element.querySelector(".e-cancel:not(.e-hide)");n&&n.classList.add("e-hide");var s=i.relatedTarget,o=s?s.getAttribute("aria-owns"):null;(!s||!pe(s,"e-grid")&&(!f(o)&&o)!==i.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!Z.isDevice&&("Batch"===this.editSettings.mode&&!((pe(s,"e-ddl")||pe(s,"e-ddt"))&&pe(s,"e-input-group"))&&!f(pe(s,"e-input-group"))&&(this.editModule.saveCell(),this.notify(VV,{})),"Normal"===this.editSettings.mode&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(i){var n=pe(i.target,"e-grid");return!!(n&&n.id!==this.element.id||pe(i.target,"e-unboundcelldiv")&&f(n))},t.prototype.mergePersistGridData=function(i){var n=this.getLocalData();if(!f(n)&&""!==n||!f(i)){var s=f(i)?JSON.parse(n):i;this.enableVirtualization&&s.pageSettings&&(s.pageSettings.currentPage=1);var o=Object.keys(s);this.isProtectedOnChange=!0;for(var a=0,l=o;a<l.length;a++){var h=l[a];"object"!=typeof this[h]||f(this[h])?this[h]=s[h]:Array.isArray(this[h])&&"columns"===h?(o2(this[h]),this.mergeColumns(s[h],this[h]),this[h]=s[h]):he(this[h],s[h])}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(i,n){for(var s=i,o=function(h){var u=n.filter(function(d){return d.index===s[h].index})[0];f(u)||(u.columns&&u.columns.length?(a.mergeColumns(s[h].columns,u.columns),s[h]=he(u,s[h],{},!0)):s[h]=he(u,s[h],{},!0))},a=this,l=0;l<s.length;l++)o(l)},t.prototype.isDetail=function(){return!f(this.detailTemplate)||!f(this.childGrid)},t.prototype.isCommandColumn=function(i){var n=this;return i.some(function(s){return s.columns?n.isCommandColumn(s.columns):!(!s.commands&&!s.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(i){var n=this;return i.some(function(s){return s.columns?n.isForeignKeyEnabled(s.columns):!(!s.dataSource||!s.foreignKeyValue)})},t.prototype.keyPressHandler=function(i){var n=he(i,{cancel:!1});this.trigger("keyPressed",n),!0===n.cancel&&i.stopImmediatePropagation()},t.prototype.keyDownHandler=function(i){if(i.altKey){if(74===i.keyCode&&(this.keyA?(this.notify(oG,{target:i.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(z([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),87===i.keyCode){var n=this.focusModule;if(n){if(!this.currentViewData.length)return;n.focusContent(),n.addOutline()}}65===i.keyCode&&(this.keyA=!0),72===i.keyCode&&this.keyA&&(this.notify(oG,{target:i.target,collapse:!0}),this.keyA=!1)}13===i.keyCode&&this.notify($V,i)},t.prototype.keyActionHandler=function(i){this.isChildGrid(i)||this.isEdit&&"escape"!==i.action&&"enter"!==i.action&&"shiftEnter"!==i.action&&"tab"!==i.action&&"shiftTab"!==i.action||(this.keyPress=!0,this.allowKeyboard&&("ctrlPlusP"===i.action&&(i.preventDefault(),this.print()),this.notify(Cs,i)))},t.prototype.setInjectedModules=function(i){this.injectedModules=i},t.prototype.updateColumnObject=function(){ND(this.columns,this.enableColumnVirtualization,this),o2(this.columns),this.initForeignColumn(),this.notify(PS,{})},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(i){return i.isForeignColumn()})},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:function UDe(r){if(void 0!==bO)return bO;var t=ti("table",{className:sr,styles:"visibility: hidden",attrs:{role:"grid"}});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',r.appendChild(t);var e=t.querySelector("td").getBoundingClientRect();return r.removeChild(t),bO=Math.ceil(e.height)}(this.element)},t.prototype.refreshColumns=function(){this.setFrozenCount();var i=this.getContent().querySelector(".e-frozen-left-content"),n=this.getContent().querySelector(".e-frozen-right-content"),s=!this.frozenRightCount&&!this.frozenLeftCount;if(0===this.getFrozenColumns()&&(!i&&this.frozenLeftCount||!n&&this.frozenRightCount||i&&!this.frozenLeftCount||n&&!this.frozenRightCount))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(s&&(1===this.getFrozenColumns()&&!i||0===this.getFrozenColumns()&&i))this.tableIndex=0,this.tablesCount=1,this.enableColumnVirtualization&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.freezeRefresh();else if(this.isPreventScrollEvent=!0,this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()){var a=this.contentModule.getMovableContent().querySelector("."+sr);Be(a.querySelector(Ti));var l=this.getHeaderContent().querySelector("."+Zn).querySelector(Ti).cloneNode(!0);if(a.insertBefore(l,a.querySelector(rt)),"Left-Right"===this.getFrozenMode()){var h=this.contentModule.getFrozenRightContent().querySelector("."+sr);Be(h.querySelector(Ti));var u=this.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ti).cloneNode(!0);h.insertBefore(u,h.querySelector(rt))}}if(this.isFrozenGrid()){var d=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.headerModule.getMovableHeader().scrollLeft=d,this.contentModule.getMovableContent().scrollLeft=d}},t.prototype.excelExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!1,o):null},t.prototype.csvExport=function(i,n,s,o){return this.excelExportModule?this.excelExportModule.Map(this,i,n,s,!0,o):null},t.prototype.pdfExport=function(i,n,s,o){return this.pdfExportModule?this.pdfExportModule.Map(this,i,n,s,o):null},t.prototype.groupColumn=function(i){this.groupModule&&this.groupModule.groupColumn(i)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(i){this.groupModule&&this.groupModule.ungroupColumn(i)},t.prototype.openColumnChooser=function(i,n){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(i,n)},t.prototype.scrollRefresh=function(){var i=this,n=function(){i.scrollModule.refresh(),i.off(Zr,n)};this.on(Zr,n,this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(i){this.selectionModule&&this.selectionModule.selectCells(i)},t.prototype.selectRowsByRange=function(i,n){this.selectionModule&&this.selectionModule.selectRowsByRange(i,n)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(i){return this.getInjectedModules().indexOf(i)>=0},t.prototype.destroyTemplate=function(i,n){this.clearTemplate(i,n)},t.prototype.log=function(i,n){this.loggerModule&&this.loggerModule.log(i,n)},t.prototype.applyBiggerTheme=function(i){this.element.classList.contains("e-bigger")&&i.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){return this.getRowsObject()[this.getRows().length-1].data},t.prototype.hideScroll=function(){var i=this.getContent().querySelector("."+as),n=this.getContent().querySelector(".e-scrollbar");if(i.scrollHeight<=i.clientHeight&&(this.scrollModule.removePadding(),i.style.overflowY="auto"),this.isFrozenGrid()&&n){var s=this.getContent().querySelector(".e-movablescrollbar"),o=this.getContent().querySelector(".e-movablechild");n.style.display="flex",s.offsetWidth>=o.offsetWidth&&(n.style.display="none",this.notify(nO,0))}},t.prototype.getRowIndexByPrimaryKey=function(i){var n=this.getPrimaryKeyFieldNames()[0];i="object"==typeof i?i[n]:i;for(var s=this.getRowsObject(),o=0;o<s.length;o++)if(!s[o].isDetailRow&&!s[o].isCaptionRow){var a=s[o].data[n];if(n.split(".").length>1&&(a=HG(n,s[o].data)),a===i)return s[o].index}return-1},t.prototype.grabColumnByFieldFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].field&&(n=s[o]);return n},t.prototype.grabColumnByUidFromAllCols=function(i){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,o=0;o<s.length;o++)i===s[o].uid&&(n=s[o]);return n},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length){var i=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof Qe?this.renderModule.data.getData(this.dataSource,i):this.dataSource instanceof Qe?this.dataSource.executeLocal(i):new Qe(this.dataSource,i).executeLocal(i)}return[]},t.prototype.getUserAgent=function(){var i=Z.userAgent.toLowerCase();return/iphone|ipod|ipad/.test(i)},t.prototype.tapEvent=function(i){this.getUserAgent()&&(Kc.timer?(clearTimeout(Kc.timer),Kc.timer=null,this.dblClickHandler(i),this.notify(z8,i)):Kc.timer=setTimeout(function(){Kc.timer=null},300))},t.prototype.getRowUid=function(i){return""+i+this.rowUid++},t.prototype.getMovableVirtualContent=function(){return this.getContent().querySelector("."+zn)},t.prototype.getFrozenVirtualContent=function(){return this.getContent().querySelector("."+tc)},t.prototype.getMovableVirtualHeader=function(){return this.getHeaderContent().querySelector("."+Zn)},t.prototype.getFrozenVirtualHeader=function(){return this.getHeaderContent().querySelector("."+Zd)},t.prototype.getRowElementByUID=function(i){var n,s=[];if(this.isFrozenGrid()){var o=[].slice.call(this.getFrozenVirtualContent().querySelector(rt).children),a=[].slice.call(this.getMovableVirtualContent().querySelector(rt).children),l=[];if(3===this.tablesCount&&(l=[].slice.call(this.getContent().querySelector(".e-frozen-right-content").querySelector(rt).children)),this.frozenRows){if(s=(s=[].slice.call(this.getFrozenVirtualHeader().querySelector(rt).children)).concat([].slice.call(this.getMovableVirtualHeader().querySelector(rt).children)),3===this.tablesCount){var h=this.getHeaderContent().querySelector(".e-frozen-right-header");s=s.concat([].slice.call(h.querySelector(rt).children)).concat(l)}s=s.concat(o).concat(a)}else s=o.concat(a).concat(l)}else{var u=[].slice.call(this.getContent().querySelector(rt).children);s=this.frozenRows?(s=[].slice.call(this.getHeaderContent().querySelector(rt).children)).concat(u):u}for(var d=0,m=s;d<m.length;d++){var v=m[d];if(v.getAttribute("data-uid")===i){n=v;break}}return n},t.prototype.getHiddenColumns=function(){for(var i=[],n=0,s=this.columnModel;n<s.length;n++){var o=s[n];!1===o.visible&&i.push(o)}return i},t.prototype.calculatePageSizeByParentHeight=function(i){if(this.allowPaging&&(this.allowTextWrap&&"Header"===this.textWrapSettings.wrapMode||!this.allowTextWrap)){var n=0;if(-1!==i.indexOf("%")&&(i=parseInt(i,10)/100*this.element.clientHeight),i>this.getNoncontentHeight()+this.getRowHeight()&&(n=(i-this.getNoncontentHeight())/this.getRowHeight()),n>0)return Math.floor(n)}return 0},t.prototype.getNoncontentHeight=function(){var i=0;if(f(this.getHeaderContent().clientHeight)||(i+=this.getHeaderContent().clientHeight),this.toolbar&&!f(this.element.querySelector(".e-toolbar").clientHeight)&&(i+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!f(this.element.querySelector(".e-gridpager").clientHeight)&&(i+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!f(this.element.querySelector(".e-columnheader").clientHeight)&&(i+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!f(this.element.querySelector(".e-groupdroparea").clientHeight)&&(i+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!f(this.element.querySelector(".e-summaryrow").clientHeight))for(var n=0;n<this.element.getElementsByClassName("e-summaryrow").length;n++)i+=this.element.getElementsByClassName("e-summaryrow")[n].clientHeight;return i},t.prototype.getSummaryValues=function(i,n){return qe.aggregates[i.type.toLowerCase()](n,i.field)},t.prototype.serverExcelExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.serverPdfExport=function(i){this.isExcel=!1,this.exportGrid(i)},t.prototype.serverCsvExport=function(i){this.isExcel=!0,this.exportGrid(i)},t.prototype.exportGrid=function(i){var s=this.getDataModule().generateQuery(!0),o=(new Qh).processQuery(new Qe({url:""}),s),a=JSON.parse(o.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"]));l.filterSettings.columns=a.where,l.searchSettings.fields=a.search&&a.search[0].fields||[],l.sortSettings.columns=a.sorted,l.columns=this.setHeaderText(l.columns,["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"]);var u=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),d=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});d.value=JSON.stringify(l),u.method="POST",u.action=i,u.appendChild(d),document.body.appendChild(u),u.submit(),u.remove()},t.prototype.setHeaderText=function(i,n){for(var s=0;s<i.length;s++){var o=this.getColumnByUid(i[s].uid);i[s].headerText=o.headerText,f(o.template)||(i[s].template="true"),i[s].format&&(i[s].format=nIe(this.getFormat(i[s].format),i[s].type,this.isExcel)),i[s].columns&&this.setHeaderText(i[s].columns,n);for(var a=Object.keys(i[s]),l=0;l<a.length;l++)n.indexOf(a[l])<0&&delete i[s][a[l]]}return i},t.prototype.getFormat=function(i){return"object"==typeof i?f(i.format)?i.skeleton:i.format:i},t.prototype.isCollapseStateEnabled=function(){return!1===this.isExpanded},t.prototype.updateRowValue=function(i,n){var s={requestType:"save",data:n};this.showSpinner(),this.notify(eO,s),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var i=this.getDataModule().getForeignKeyDataState();i.isPending?(this.getDataModule().setForeignKeyDataState({}),i.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(i){var n=this.getColumnHeaderByField(i);if(n){var s=n.querySelector(".e-filtermenudiv"),o=this.element.querySelector(".e-filter-popup");if(s&&o){var a=this.element.getBoundingClientRect(),l=s.getBoundingClientRect();o&&(o.style.left=o.offsetWidth+l.right>a.right?(l.right-o.offsetWidth-a.left).toString()+"px":(l.right-a.left).toString()+"px")}}},t.prototype.renderTemplates=function(){this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact?(this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(),this.portals=void 0):(this.notify("reactTemplateRender",this.portals),this.renderReactTemplates())},t.prototype.batchUpdate=function(i){this.processRowChanges(i)},t.prototype.batchAsyncUpdate=function(i){this.processBulkRowChanges(i)},t.prototype.processBulkRowChanges=function(i){var n=this;if(this.dataToBeUpdated)for(var s=[Af,"changedRecords",bC],o=this.getPrimaryKeyFieldNames()[0],a=0;a<s.length;a++)i[s[a]]&&JDe(this,i,s[a],o);else this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i),setTimeout(function(){n.processRowChanges(n.dataToBeUpdated),n.dataToBeUpdated=null},this.asyncTimeOut)},t.prototype.processRowChanges=function(i){var n=this,s=this.getPrimaryKeyFieldNames()[0];i=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},i);var o=this.getDataModule().saveChanges(i,s,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?o.then(function(){n.setNewData()}):this.setNewData()},t.prototype.setNewData=function(){var i=this,n=JSON.parse(JSON.stringify(this.getCurrentViewRecords()));this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount()).then(function(o){i.bulkRefresh(o.result,n,o.count)})},t.prototype.deleteRowElement=function(i){var n=this.getRowElementByUID(i.uid),s=parseInt(n.getAttribute(Ai),10);Be(n),this.getFrozenColumns()&&Be(this.getMovableRows()[s])},t.prototype.bulkRefresh=function(i,n,s){for(var d,o=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(A){i.filter(function(_){return _[l]===a[A].data[l]}).length||(u.deleteRowElement(a[A]),a.splice(A,1),A--),d=A},u=this,m=0;m<a.length;m++)h(m),m=d;var v=function(A){var _;n.filter(function(M){M[l]===i[A][l]&&(M!==i[A]&&o.setRowData(i[A][l],i[A]),_=!0)}),_||C.renderRowElement(i[A],A)},C=this;for(m=0;m<i.length;m++)v(m);this.currentViewData=i;var S=[].slice.call(this.getContentTable().getElementsByClassName(vn));(function EO(r,t,e,i,n){for(var s=i||0,o=n||0;o<t.length;o++)if(t[o].isDataRow){t[o].index=s,t[o].isAltRow=!!r.enableAltRow&&s%2!=0,e[o].setAttribute(Ai,s.toString()),e[o].setAttribute(hO,(s+1).toString()),t[o].isAltRow?e[o].classList.add("e-altrow"):e[o].classList.remove("e-altrow");for(var a=0;a<e[o].cells.length;a++)e[o].cells[a].setAttribute("index",s.toString());s++}t.length||r.renderModule.emptyRow(!0)})(this,this.getRowsObject(),S),function BD(r){if(r.isFrozenGrid()){r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-movableheader .e-row, .e-movablecontent .e-row"));var t=r.getFrozenMode()===Zt?".e-frozen-left-header .e-row, .e-frozen-left-content .e-row":".e-frozenheader .e-row, .e-frozencontent .e-row";r.contentModule.freezeRowElements=[].slice.call(r.element.querySelectorAll(t)),r.getFrozenMode()===Zt&&(r.contentModule.frozenRightRowElements=[].slice.call(r.element.querySelectorAll(".e-frozen-right-header .e-row, .e-frozen-right-content .e-row")))}else r.contentModule.rowElements=[].slice.call(r.element.querySelectorAll(".e-row:not(.e-addedrow)"))}(this),this.allowPaging&&this.notify(Ha,{module:"pager",properties:{totalRecordsCount:s}})},t.prototype.renderRowElement=function(i,n){var h,s=new Fh(this.serviceLocator,null,this),a=new Xd(this).generateRows([i]),l=s.render(a[0],this.getColumns());this.addRowObject(a[0],n);var d=this.getContentTable().querySelector(rt);if(d.querySelector(".e-emptyrow")){var m=d.querySelector(".e-emptyrow");if(m.parentNode.removeChild(m),this.getFrozenColumns()){var v=this.getContent().querySelector("."+zn).querySelector(rt);v.firstElementChild.parentNode.removeChild(v.firstElementChild)}}this.getFrozenColumns()&&(h=function h2(r,t,e){t=t&&e&&e.isRowDragable()?t+1:t;for(var i=r.cloneNode(!0),n=0;n<t;n++)i.removeChild(i.children[0]);n=t;for(var s=r.childElementCount;n<s;n++)r.removeChild(r.children[r.childElementCount-1]);return i}(l,this.getFrozenColumns(),this),(this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector("."+Zn).querySelector(rt):this.getContent().querySelector("."+zn).querySelector(rt)).appendChild(h),"auto"===this.height&&this.notify(nO,{})),d=this.frozenRows&&n<this.frozenRows?this.getHeaderContent().querySelector(rt):this.getContent().querySelector(rt),(d=this.getContent().querySelector(rt)).appendChild(l)},t.prototype.addRowObject=function(i,n){var s=this.getFrozenColumns();if(s){var o=this.getMovableRowsObject(),a=i.clone();a.cells=a.cells.slice(s),i.cells=i.cells.slice(0,s),o.splice(n,1,a)}this.getRowsObject().splice(n,1,i)},t.prototype.updateVisibleExpandCollapseRows=function(){for(var i=this.getRowsObject(),n=0,s=i.length;n<s;n++)i[n].visible=!i[n].isDataRow&&!i[n].isAggregateRow||"none"!==this.getRowElementByUID(i[n].uid).style.display},t.prototype.getHeight=function(i){return Number.isInteger(i)||-1===i.indexOf("%")?Number.isInteger(i)||"auto"===this.height?this.height:parseInt(i,10):parseInt(i,10)/100*this.element.clientHeight},t.prototype.getFrozenRightContent=function(){return this.getContent().querySelector(".e-frozen-right-content")},t.prototype.getFrozenRightHeader=function(){return this.getHeaderContent().querySelector(".e-frozen-right-header")},t.prototype.getMovableHeaderTbody=function(){return this.getMovableVirtualHeader().querySelector(rt)},t.prototype.getMovableContentTbody=function(){return this.getMovableVirtualContent().querySelector(rt)},t.prototype.getFrozenHeaderTbody=function(){return this.getFrozenVirtualHeader().querySelector(rt)},t.prototype.getFrozenLeftContentTbody=function(){return this.getFrozenVirtualContent().querySelector(rt)},t.prototype.getFrozenRightHeaderTbody=function(){return this.getFrozenRightHeader().querySelector(rt)},t.prototype.getFrozenRightContentTbody=function(){var n;return this.getFrozenRightContent()&&(n=this.getFrozenRightContent().querySelector(rt)),n},t.prototype.showResponsiveCustomFilter=function(i){this.filterModule&&this.filterModule.showCustomFilter(i||"Vertical"===this.rowRenderingMode)},t.prototype.showResponsiveCustomSort=function(i){this.sortModule&&this.sortModule.showCustomSort(i||"Vertical"===this.rowRenderingMode)},t.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},t.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},t.prototype.getCurrentVisibleColumns=function(i){for(var n=[],o=0,a=i?this.getColumns():this.columnModel;o<a.length;o++){var l=a[o];l.visible&&n.push(l)}return n},t.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)},we([E()],t.prototype,"parentDetails",void 0),we([E([])],t.prototype,"columns",void 0),we([E(!0)],t.prototype,"enableAltRow",void 0),we([E(!0)],t.prototype,"enableHover",void 0),we([E(!1)],t.prototype,"enableAutoFill",void 0),we([E(!0)],t.prototype,"allowKeyboard",void 0),we([E(!1)],t.prototype,"enableStickyHeader",void 0),we([E(!1)],t.prototype,"allowTextWrap",void 0),we([rn({},_De)],t.prototype,"textWrapSettings",void 0),we([rn({},LDe)],t.prototype,"resizeSettings",void 0),we([E(!1)],t.prototype,"allowPaging",void 0),we([rn({},mDe)],t.prototype,"pageSettings",void 0),we([rn({},MDe)],t.prototype,"loadingIndicator",void 0),we([E(!0)],t.prototype,"enableVirtualMaskRow",void 0),we([E(!1)],t.prototype,"enableVirtualization",void 0),we([E(!1)],t.prototype,"enableColumnVirtualization",void 0),we([E(!1)],t.prototype,"enableInfiniteScrolling",void 0),we([rn({},kDe)],t.prototype,"searchSettings",void 0),we([E(!1)],t.prototype,"allowSorting",void 0),we([E("Ellipsis")],t.prototype,"clipMode",void 0),we([E(!0)],t.prototype,"allowMultiSorting",void 0),we([E(!1)],t.prototype,"allowExcelExport",void 0),we([E(!1)],t.prototype,"allowPdfExport",void 0),we([rn({},xDe)],t.prototype,"sortSettings",void 0),we([rn({},DDe)],t.prototype,"infiniteScrollSettings",void 0),we([E(!0)],t.prototype,"allowSelection",void 0),we([E(-1)],t.prototype,"selectedRowIndex",void 0),we([rn({},ADe)],t.prototype,"selectionSettings",void 0),we([E(!1)],t.prototype,"allowFiltering",void 0),we([E("Horizontal")],t.prototype,"rowRenderingMode",void 0),we([E(!1)],t.prototype,"enableAdaptiveUI",void 0),we([E(!1)],t.prototype,"allowReordering",void 0),we([E(!1)],t.prototype,"allowResizing",void 0),we([E(!1)],t.prototype,"allowRowDragAndDrop",void 0),we([rn({},RDe)],t.prototype,"rowDropSettings",void 0),we([rn({},IDe)],t.prototype,"filterSettings",void 0),we([E(!1)],t.prototype,"allowGrouping",void 0),we([E(!1)],t.prototype,"enableImmutableMode",void 0),we([E(!1)],t.prototype,"showColumnMenu",void 0),we([rn({},ODe)],t.prototype,"groupSettings",void 0),we([rn({},PDe)],t.prototype,"editSettings",void 0),we([wo([],wDe)],t.prototype,"aggregates",void 0),we([E(!1)],t.prototype,"showColumnChooser",void 0),we([rn({},yDe)],t.prototype,"columnChooserSettings",void 0),we([E(!1)],t.prototype,"enableHeaderFocus",void 0),we([E("auto")],t.prototype,"height",void 0),we([E("auto")],t.prototype,"width",void 0),we([E("Default")],t.prototype,"gridLines",void 0),we([E()],t.prototype,"rowTemplate",void 0),we([E()],t.prototype,"detailTemplate",void 0),we([E()],t.prototype,"childGrid",void 0),we([E()],t.prototype,"queryString",void 0),we([E("AllPages")],t.prototype,"printMode",void 0),we([E("Expanded")],t.prototype,"hierarchyPrintMode",void 0),we([E([])],t.prototype,"dataSource",void 0),we([E(null)],t.prototype,"rowHeight",void 0),we([E()],t.prototype,"query",void 0),we([E("USD")],t.prototype,"currencyCode",void 0),we([E()],t.prototype,"toolbar",void 0),we([E()],t.prototype,"contextMenuItems",void 0),we([E()],t.prototype,"columnMenuItems",void 0),we([E()],t.prototype,"toolbarTemplate",void 0),we([E()],t.prototype,"pagerTemplate",void 0),we([E(0)],t.prototype,"frozenRows",void 0),we([E(0)],t.prototype,"frozenColumns",void 0),we([E("")],t.prototype,"cssClass",void 0),we([E("All")],t.prototype,"columnQueryMode",void 0),we([E({})],t.prototype,"currentAction",void 0),we([E("20.3.59")],t.prototype,"ej2StatePersistenceVersion",void 0),we([q()],t.prototype,"created",void 0),we([q()],t.prototype,"destroyed",void 0),we([q()],t.prototype,"load",void 0),we([q()],t.prototype,"rowDataBound",void 0),we([q()],t.prototype,"queryCellInfo",void 0),we([q()],t.prototype,"headerCellInfo",void 0),we([q()],t.prototype,"actionBegin",void 0),we([q()],t.prototype,"actionComplete",void 0),we([q()],t.prototype,"actionFailure",void 0),we([q()],t.prototype,"dataBound",void 0),we([q()],t.prototype,"recordDoubleClick",void 0),we([q()],t.prototype,"recordClick",void 0),we([q()],t.prototype,"rowSelecting",void 0),we([q()],t.prototype,"rowSelected",void 0),we([q()],t.prototype,"rowDeselecting",void 0),we([q()],t.prototype,"rowDeselected",void 0),we([q()],t.prototype,"cellSelecting",void 0),we([q()],t.prototype,"cellSelected",void 0),we([q()],t.prototype,"cellDeselecting",void 0),we([q()],t.prototype,"cellDeselected",void 0),we([q()],t.prototype,"columnSelecting",void 0),we([q()],t.prototype,"columnSelected",void 0),we([q()],t.prototype,"columnDeselecting",void 0),we([q()],t.prototype,"columnDeselected",void 0),we([q()],t.prototype,"columnDragStart",void 0),we([q()],t.prototype,"columnDrag",void 0),we([q()],t.prototype,"columnDrop",void 0),we([q()],t.prototype,"printComplete",void 0),we([q()],t.prototype,"beforePrint",void 0),we([q()],t.prototype,"pdfQueryCellInfo",void 0),we([q()],t.prototype,"pdfHeaderQueryCellInfo",void 0),we([q()],t.prototype,"pdfAggregateQueryCellInfo",void 0),we([q()],t.prototype,"excelAggregateQueryCellInfo",void 0),we([q()],t.prototype,"exportDetailDataBound",void 0),we([q()],t.prototype,"excelQueryCellInfo",void 0),we([q()],t.prototype,"excelHeaderQueryCellInfo",void 0),we([q()],t.prototype,"beforeExcelExport",void 0),we([q()],t.prototype,"excelExportComplete",void 0),we([q()],t.prototype,"beforePdfExport",void 0),we([q()],t.prototype,"pdfExportComplete",void 0),we([q()],t.prototype,"rowDragStartHelper",void 0),we([q()],t.prototype,"detailDataBound",void 0),we([q()],t.prototype,"rowDragStart",void 0),we([q()],t.prototype,"rowDrag",void 0),we([q()],t.prototype,"rowDrop",void 0),we([q()],t.prototype,"toolbarClick",void 0),we([q()],t.prototype,"beforeOpenColumnChooser",void 0),we([q()],t.prototype,"beforeOpenAdaptiveDialog",void 0),we([q()],t.prototype,"batchAdd",void 0),we([q()],t.prototype,"batchDelete",void 0),we([q()],t.prototype,"batchCancel",void 0),we([q()],t.prototype,"beforeBatchAdd",void 0),we([q()],t.prototype,"beforeBatchDelete",void 0),we([q()],t.prototype,"beforeBatchSave",void 0),we([q()],t.prototype,"beginEdit",void 0),we([q()],t.prototype,"commandClick",void 0),we([q()],t.prototype,"cellEdit",void 0),we([q()],t.prototype,"cellSave",void 0),we([q()],t.prototype,"cellSaved",void 0),we([q()],t.prototype,"resizeStart",void 0),we([q()],t.prototype,"resizing",void 0),we([q()],t.prototype,"resizeStop",void 0),we([q()],t.prototype,"keyPressed",void 0),we([q()],t.prototype,"beforeDataBound",void 0),we([q()],t.prototype,"contextMenuOpen",void 0),we([q()],t.prototype,"contextMenuClick",void 0),we([q()],t.prototype,"columnMenuOpen",void 0),we([q()],t.prototype,"columnMenuClick",void 0),we([q()],t.prototype,"checkBoxChange",void 0),we([q()],t.prototype,"beforeCopy",void 0),we([q()],t.prototype,"beforePaste",void 0),we([q()],t.prototype,"beforeAutoFill",void 0),we([q()],t.prototype,"columnDataStateChange",void 0),we([q()],t.prototype,"dataStateChange",void 0),we([q()],t.prototype,"dataSourceChanged",void 0),we([q()],t.prototype,"exportGroupCaption",void 0),we([q()],t.prototype,"lazyLoadGroupExpand",void 0),we([q()],t.prototype,"lazyLoadGroupCollapse",void 0),e=we([si],t)}(Ji),Ise=function(){function r(t,e){this.isAsyncPrint=!1,this.defered=new ul,this.parent=t,!this.parent.isDestroyed&&(this.parent.on(Zr,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(dr,this.actionBeginFunction),this.parent.on(Yd,this.onEmpty.bind(this)),this.parent.on(K8,this.hierarchyPrint,this),this.scrollModule=e)}return r.prototype.isContentReady=function(){var t=this;return!this.isPrintGrid()||"None"!==this.parent.hierarchyPrintMode&&this.parent.childGrid?function(){t.defered.promise.then(function(){t.contentReady()}),t.isPrintGrid()&&t.hierarchyPrint()}:this.contentReady},r.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var t=window.printGridObj;t&&!t.element.querySelector("[aria-busy=true")&&t.printModule.defered.resolve()},r.prototype.print=function(){this.renderPrintGrid()},r.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},r.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},r.prototype.renderPrintGrid=function(){var t=this.parent,e=ti("div",{id:this.parent.element.id+"_print",className:t.element.className+" e-print-grid"});e.classList.remove("e-gridhover"),document.body.appendChild(e);for(var i=new r2(c2(t,t.hierarchyPrintMode)),n=0;n<i.columns.length;n++)i.columns[n]=he({},i.columns[n]),t.isFrozenGrid()&&!t.getFrozenColumns()&&(i.columns[n].freeze=void 0);this.parent.isAngular&&(i.viewContainerRef=this.parent.viewContainerRef),i.load=function(){},i.query=t.getQuery().clone(),window.printGridObj=i,i.isPrinting=!0;var s=i.getInjectedModules(),o=t.getInjectedModules();(!s||s.length!==o.length)&&i.setInjectedModules(o),t.notify("printGrid-Init",{element:e,printgrid:i}),this.parent.log("exporting_begin",this.getModuleName()),i.registeredTemplate=this.parent.registeredTemplate,i.isVue=this.parent.isVue,i.appendTo(e),i.trigger=t.trigger},r.prototype.contentReady=function(){if(this.isPrintGrid()){var t=this.parent;if(this.isAsyncPrint)return void this.printGrid();var e={requestType:"print",element:t.element,selectedRows:t.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:t.hierarchyPrintMode};if(this.isAsyncPrint||t.trigger(Cre,e),e.cancel)return void le(t.element);this.isAsyncPrint||this.printGrid()}},r.prototype.printGrid=function(){var t=this.parent;if("auto"!==t.height){var e=this.scrollModule.getCssProperties(),i=t.element.querySelector("."+as),n=t.element.querySelector("."+js);i.style.height="auto",i.style.overflowY="auto",n.style[e.padding]="",n.firstElementChild.style[e.border]=""}t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var s=0,o=[].slice.call(t.element.getElementsByClassName(as));s<o.length;s++)o[s].style.overflowX="hidden";for(var l=[].slice.call(t.element.getElementsByClassName("e-spin-show")),h=0,u=[].slice.call(l);h<u.length;h++)ri(u[h],["e-spin-hide"],["e-spin-show"]);this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj,t.trigger(wre,{element:t.element}),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},r.prototype.printGridElement=function(t){ri(t.element,["e-print-grid-layout"],["e-print-grid"]),t.isPrinting&&le(t.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=function gF(r,t){var e=document.createElement("div"),i=[].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("base, link, style")),n=[].slice.call(document.getElementsByTagName("body")[0].querySelectorAll("link, style"));if(n.length)for(var s=0,o=n.length;s<o;s++)i.push(n[s]);var a="";f(t)&&(t=window.open("","print","height=452,width=1024,tabbar=no")),e.appendChild(r.cloneNode(!0));var l=0;for(o=i.length;l<o;l++)a+=i[l].outerHTML;t.document.write("<!DOCTYPE html> <html><head>"+a+"</head><body>"+e.innerHTML+"<script> (function() { window.ready = true; })(); <\/script></body></html>"),t.document.close(),t.focus();var h=setInterval(function(){t.ready&&(t.print(),t.close(),clearInterval(h))},500);return t}(t.element,this.printWind)},r.prototype.removeColGroup=function(t){var e=t.groupSettings.columns.length,i=t.element,n="#"+t.element.id;if(e){for(var s=Ke(".e-groupcaption",i),o=s[e-1].getAttribute("colspan"),a=0;a<s.length;a++)s[a].setAttribute("colspan",o);var l=Ke("colgroup"+n+"colgroup",i),h=Ke(".e-content colgroup",i);this.hideColGroup(l,e),this.hideColGroup(h,e)}},r.prototype.hideColGroup=function(t,e){for(var i=0;i<t.length;i++)for(var n=0;n<e;n++)t[i].children[n].style.display="none"},r.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},r.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Zr,this.contentReady.bind(this)),this.parent.removeEventListener(dr,this.actionBeginFunction),this.parent.off(Yd,this.onEmpty.bind(this)),this.parent.off(K8,this.hierarchyPrint))},r.prototype.getModuleName=function(){return"print"},r.printGridProp=["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"].concat([Cre,wre,"load"]),r}();function Ase(r,t,e){return f(r)||""===r?"":qe.getObject(r,t)}function kse(r,t){requestAnimationFrame(function(){try{t(null,r())}catch(e){t(e)}})}var Wc=0;function HDe(r,t){Wc=0;var e="gSummary",n=t.groupSettings.columns.length,s="records",o="items",a=r[e],l=0,h="aggregatesCount";if(a===r.data.count)return t.groupSettings.columns.length&&!f(r[h])&&r[h]?1!==t.groupSettings.columns.length?Wc+=0!==r.indent&&a<2?r[e]*(n-r.indent+(n-r.indent)*r[h]):r[e]*(n-r.indent+(n-r.indent-1)*r[h])+r[h]:1===t.groupSettings.columns.length&&(Wc+=r[e]*(n-r.indent)+r[h]):t.groupSettings.columns.length&&(Wc+=1!==t.groupSettings.columns.length?r[e]*(t.groupSettings.columns.length-r.indent):r[e]),Wc;for(var u=0,d=r.data[o].length;u<d;u++){var m=r.data[o][u];Wc+=m[o].length+(n===t.columns.length||f(m[o][s])?0:m[o][s].length),l+=f(m[o][s])||f(r[h])?m[o].length:m[o][s].length,m[o].GroupGuid&&0!==m[o].childLevels&&_se(m)}return Wc+=r.data[o].length,f(r[h])||r[h]&&Wc&&0!==l&&(Wc+=(Wc-l)*r[h]+r[h]),Wc}function _se(r){for(var t="items",i=0,n=r[t].length;i<n;i++){var s=r[t][i];Wc+=s.count,0!==s[t].childLevels&&_se(s)}}function jS(r,t){for(var e=[],i=0,n=r.length;i<n;i++){var s=t(r[i],i);f(s)||e.push(s)}return e}function mO(r){for(var t=[],e=0;e<r.length;e++)t.push(he({},vO(r[e]),{},!0));return t}function bl(r){if(r)try{return document.querySelectorAll(r).length?Pi(document.querySelector(r).innerHTML.trim()):Pi(r)}catch{return Pi(r)}}function kf(r,t){var e={},i=["style","class"];he(e,t,{}),"style"in e&&(Ft(r,e[i[0]]),delete e[i[0]]),"class"in e&&(N([r],e[i[1]]),delete e[i[1]]),ze(r,e)}function o2(r,t){void 0===t&&(t=0);for(var e=0,i=r.length;e<i;e++)r[e].columns?(r[e].index=f(r[e].index)?t:r[e].index,t++,t=o2(r[e].columns,t)):(r[e].index=f(r[e].index)?t:r[e].index,t++);return t}function ND(r,t,e){for(var i=0,n=r.length;i<n;i++){var s=void 0;"string"==typeof r[i]?s=new Mh({field:r[i]},e):r[i]instanceof Mh&&!r[i].columns?s=r[i]:r[i].columns?(r[i].columns=ND(r[i].columns,null,e),s=new Mh(r[i],e)):s=new Mh(r[i],e),s.type&&"checkbox"===s.type.toLowerCase()&&(s.allowReordering=!1),s.headerText=f(s.headerText)?s.foreignKeyValue||s.field||"":s.headerText,s.foreignKeyField=s.foreignKeyField||s.field,s.valueAccessor=("string"==typeof s.valueAccessor?Q(s.valueAccessor,window):s.valueAccessor)||Ase,s.width=t&&f(s.width)?200:s.width,f(s.visible)&&(s.visible=!0),r[i]=s}return r}function vO(r){return r instanceof Si?Q("properties",r):r}function pe(r,t,e){for(var i=r;i&&!(e?i.id===t:i.classList.contains(t));)i=i.parentElement;return i}function kG(r){for(var t=[],e=0,i=r.length;e<i;e++)r[e].hasOwnProperty("properties")?t.push(r[e].properties):t.push(r[e]);return t}function CC(r){var t={};return t.x=f(r.clientX)?r.changedTouches[0].clientX:r.clientX,t.y=f(r.clientY)?r.changedTouches[0].clientY:r.clientY,t}var zDe=0;function Qd(r){return r+zDe++}function ca(r,t){for(var e=0,i=t.length;e<i;e++)r.appendChild(i===t.length?t[e]:t[0]);return r}function Ose(r,t,e,i){if("Custom"===r){var n=e.customAggregate;return"string"==typeof n&&(n=Q(n,window)),n?n.call(i,t,e):""}return e.field in t||t instanceof Array?qe.aggregates[r.toLowerCase()](t,e.field):null}var bO,_G=null;function wC(){if(null!==_G)return _G;var t,r=document.createElement("div");return r.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(r),t=r.offsetWidth-r.clientWidth|0,document.body.removeChild(r),_G=t}function qc(r){return r.split(".").length>1}function To(r){return void 0===r&&(r=""),r.replace(/\./g,"___")}function a2(r){return void 0===r&&(r=""),r.replace(/___/g,".")}function Ug(r,t,e){var i=pe(e,vn),n=!i||i&&!i.classList.contains("e-insertedrow");return"beginEdit"===t&&n?!(r.isIdentity||r.isPrimaryKey||!r.allowEditing):!("add"===t&&r.isIdentity||n&&!r.allowEditing&&!r.isIdentity&&!r.isPrimaryKey)}function Jd(r){var t=re("#"+r.element.id+"EditConfirm",r.element);return"Batch"===r.editSettings.mode&&Ke(".e-updatedtd",r.element).length&&r.editSettings.showConfirmDialog&&(!t||t.classList.contains("e-popup-close"))}function du(r,t){var e="e-wrap";r=r instanceof Array?r:[r];for(var i=0;i<r.length;i++)t?r[i].classList.add(e):r[i].classList.remove(e)}function Pse(r,t){var n,e=r.getService("valueFormatter");switch(("date"===t.type||"datetime"===t.type)&&(n={type:t.type,skeleton:t.format},"string"==typeof t.format&&"yMd"!==t.format&&(n.format=t.format)),t.type){case"date":case"datetime":t.setFormatter(e.getFormatFunction(n)),t.setParser(e.getParserFunction(n));break;case"number":t.setFormatter(e.getFormatFunction({format:t.format})),t.setParser(e.getParserFunction({format:t.format}))}}function Gc(r,t){for(var e=[],i=2;i<arguments.length;i++)e[i-2]=arguments[i];for(var n=0,s=r.length;n<s;n++)t?(ri(r[n],e.slice(),[]),r[n].setAttribute("aria-selected","true")):(ri(r[n],[],e.slice()),r[n].removeAttribute("aria-selected"))}function WS(r,t){r.checked=t}function LG(r,t,e){var i=ti("div",{className:e});return i.appendChild(t),i.setAttribute("uid",r),i}function CO(r,t){z([r],["e-check","e-stop","e-uncheck"]),r.classList.add(t?"e-check":"e-uncheck")}function l2(r,t,e){for(var i=0;i<t.length;i++)Nt(t[i].field,SC(t[i],e),r.foreignKeyData);var n=r.cells;for(i=0;i<n.length;i++)n[i].isForeignKey&&Nt("foreignKeyData",Q(n[i].column.field,r.foreignKeyData),n[i])}function SC(r,t,e,i){var n=r.foreignKeyField,s=f(e)?Ase(r.field,t):e;s=f(s)?"":s;var o=new ii,a=i||(r.dataSource instanceof Qe&&r.dataSource.dataSource.json.length?r.dataSource.dataSource.json:r.columnData);return s.getDay?o.where(EC({field:n,operator:"equal",value:s,matchCase:!1})):o.where(n,"==",s,!1),new Qe(a).executeLocal(o)}function wO(r,t){var e;return t.some(function(i){return e=i,i.foreignKeyValue===r})&&e}function EC(r,t){var e,i,n,s=he({},vO(r)),o=he({},vO(r));if(f(r.value)||""===r.value)return new kn(s.field,s.operator,s.value,!1);var a=new Date(r.value);if("equal"===r.operator||"notequal"===r.operator){"datetime"===t?(i=new Date(a.setSeconds(a.getSeconds()-1)),n=new Date(a.setSeconds(a.getSeconds()+2)),r.value=new Date(a.setSeconds(n.getSeconds()-1))):(i=new Date(a.setHours(0)-1),n=new Date(a.setHours(24))),s.value=i,o.value=n,"equal"===r.operator?(s.operator="greaterthan",o.operator="lessthan"):"notequal"===r.operator&&(s.operator="lessthanorequal",o.operator="greaterthanorequal");var l=new kn(s.field,s.operator,s.value,!1),h=new kn(o.field,o.operator,o.value,!1);e="equal"===r.operator?l.and(h):l.or(h)}else"date"===t&&("lessthanorequal"===r.operator||"greaterthan"===r.operator)&&(s.value=new Date(a.setHours(24)-1)),"string"==typeof s.value&&(s.value=new Date(s.value)),e=new kn(s.field,s.operator,s.value,!1);return r.setProperties?r.setProperties({ejpredicate:e},!0):r.ejpredicate=e,e}function ws(r){return r.enableVirtualization&&r.groupSettings.columns.length>0&&r.isVirtualAdaptive}function vs(r,t){if(void 0===r&&(r=""),r){for(var e=t,i=r.split("."),n=0;n<i.length&&!f(e);n++)e=e[i[n]];return e}}function c2(r,t){void 0===t&&(t="Expanded");var e={};if(!r)return e;for(var i=r.isFrozenGrid()&&!r.getFrozenColumns(),n=0,s=Ise.printGridProp;n<s.length;n++){var o=s[n];e[o]="columns"===o?kG(i?r.getColumns():r[o]):"allowPaging"===o?"CurrentPage"===r.printMode:vO(r[o])}return e.enableHover=!1,r.childGrid&&"None"!==t&&(e.expandedRows=function GDe(r,t){for(var i={},n=0,s=r.getRowsObject();n<s.length;n++){var o=s[n];if(o.isExpand&&!o.isDetailRow){var a=r.allowPaging&&"AllPages"===r.printMode?o.index+r.pageSettings.currentPage*r.pageSettings.pageSize-r.pageSettings.pageSize:o.index;i[a]={},i[a].isExpand=!0,i[a].gridModel=c2(o.childGrid,t),i[a].gridModel.query=r.childGrid.query}}return i}(r,t)),e}function d2(r,t,e,i){var n=r||{},s=arguments.length;i&&(s-=1);for(var o=1;o<s;o++)if(arguments[o])for(var a=arguments[o],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(KDe(a)):Object.keys(a),h=0;h<l.length;h++){var u=n[l[h]],d=a[l[h]];n[l[h]]=i&&(Nu(d)||Array.isArray(d))?Nu(d)?he({},u||{},d,i):he([],u||[],d,i):d}return n}function KDe(r){for(var t=[];Object.getPrototypeOf(r)&&Object.keys(Object.getPrototypeOf(r)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(r))),r=Object.getPrototypeOf(r);return t}function Bse(r,t){var e=t,i=[];if(r.columns){t++;for(var n=0;n<r.columns.length;n++)i[n]=Bse(r.columns[n],t);for(var s=0;s<i.length;s++)e<i[s]&&(e=i[s]);t=e}return t}var Kc=(()=>(function(r){r.timer=null}(Kc||(Kc={})),Kc))();function OG(r){var i=document.defaultView.getComputedStyle(r,null).getPropertyValue("transform").replace(/,/g,"");return{width:parseFloat(i.split(" ")[4]),height:parseFloat(i.split(" ")[5])}}function f2(r,t){if(r&&t){var e=U(r,"."+vn).getBoundingClientRect().height,i=U(t,"."+vn).getBoundingClientRect().height;e>i?t.style.height=e+"px":r.style.height=i+"px"}}function FG(r){for(var t=r.getVisibleColumns(),e=0,i=0,n=0;n<t.length;n++)qt(t[n].width)?i++:-1!==t[n].width.toString().indexOf("%")&&e++;return("auto"===r.width||"string"==typeof r.width&&-1!==r.width.indexOf("%"))&&!r.groupSettings.showGroupedColumn&&r.groupSettings.columns.length&&e&&!i}function JDe(r,t,e,i){var n=r.dataToBeUpdated[e].concat(t[e]).reduce(function(s,o){return s[o[i]]=void 0===s[o[i]]?o:Object.assign(s[o[i]],o),s},{});r.dataToBeUpdated[e]=Object.keys(n).map(function(s){return n[s]})}function g2(r,t,e){var i=r.getFrozenLeftCount(),n=r.getMovableColumnsCount(),s=r.getFrozenRightColumnsCount(),o=r.getFrozenMode(),a=r.isRowDragable()?1:0,l="Right"===o?i+n:i+n+a,h="Right"===o?i:i+a,u="Right"===o?t.length-s-a:s?t.length-s:t.length;return e===rs?t=t.slice(0,i?i+a:t.length):e===or?t=t.slice(l,t.length):"movable"===e&&(t=t.slice(h,u)),t}function xC(r,t,e,i,n){(e[0].length||i)&&(n?t(rs,e[0],n[0]):t(rs,e[0])),r.isFrozenGrid()&&(e[1].length||i)&&(n?t("movable",e[1],n[1]):t("movable",e[1])),(r.getFrozenMode()===Zt||"Right"===r.getFrozenMode())&&(e[2].length||i)&&(n?t(or,e[2],n[2]):t(or,e[2]))}function m2(r){return["Right"!==r.getFrozenMode()?r.getRowsObject():[],r.getMovableRowsObject(),r.getFrozenRightRowsObject()]}function NG(r,t,e){for(var n=r.children.length,s=0,o=0;o<n;o++,s++)o>=t&&o<e||(r.removeChild(r.children[s]),s--)}function Hse(r,t,e){return"movable"===t.getFreezeTableName()?[].slice.call(r.getMovableDataRows()[e].getElementsByClassName(tn)):t.getFreezeTableName()===or?[].slice.call(r.getFrozenRightDataRows()[e].getElementsByClassName(tn)):[].slice.call(r.getDataRows()[e].getElementsByClassName(tn))}function BG(r,t,e,i){var n=r.getFrozenLeftCount(),s=r.getMovableColumnsCount();return i="movable"===t.getFreezeTableName()?i-n:t.getFreezeTableName()===or?i-(n+s):i,Hse(r,t,e)[i]}function Vse(r,t,e,i,n,s,o){o||r.getFreezeTableName()===rs||!t&&r.getFreezeTableName()===or||1===s?e[To(r.field)]=r.validationRules:"movable"!==r.getFreezeTableName()&&r.getFreezeTableName()?r.getFreezeTableName()===or&&(n[To(r.field)]=r.validationRules):i[To(r.field)]=r.validationRules}function nIe(r,t,e){var i,n=new Vr;if("number"===t)try{i=n.getNumberPattern({format:r,currency:this.currency,useGrouping:!0},!0)}catch{i=r}else if("date"===t||"time"===t||"datetime"===t)try{if(f(i=n.getDatePattern({skeleton:r,type:t},e)))throw"error"}catch{try{i=n.getDatePattern({format:r,type:t},e)}catch{i=r}}else i=r;if("number"!==t){var o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};i=i.replace(/G|H|c|'| a|yy|y|EEEE|E/g,function(a){return o[a]})}return i}function jse(r){if(r.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),e=0;e<t.length;e++)t[e].classList.add("e-bigger")}function HG(r,t){for(var e,i=r.split(".").length,n=r.split("."),s=t,o=0;o<i;o++)s=e=s[n[o]];return e}function uo(r,t,e,i){for(var n=0,s=t;n<s.length;n++){var o=s[n];e?r.on(o.event,o.handler,i):r.off(o.event,o.handler)}}function xO(r,t,e,i){var n=To(t.field);return i=Object.assign(i,{id:r.element.id+n,name:n,"e-mappinguid":t.uid}),r.createElement("input",{className:e,attrs:i})}function Wse(r,t){var e;r.columnModel||r.getColumns();for(var i=0,n=r.columnModel;i<n.length;i++){var s=n[i];if(s.field===t){e=s;break}}return e}function TO(r,t){r.destroyTemplate(t),r.isReact&&r.renderTemplates()}function Wg(r,t,e){var i=r,n=t,s=!1;if(e)for(var o=n[0];o<i.length;o++)for(var a=i[o],l=0;l<a.length;l++){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}else for(o=n[0];o>=0;o--)for(l=(a=i[o]).length-1;l>=0;l--){if(s&&1===i[o][l])return[o,l];!s&&n.toString()===[o,l].toString()&&(s=!0)}return n}var TC=function(){function r(t){this.existingPredicate={},this.foreignKeyQuery=new ii,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.parent=t,this.id=this.parent.element.id,this.valueFormatter=new _S(this.parent.locale),this.cBoxTrue=Zb(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=Zb(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&N([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&N([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass])}return r.prototype.destroy=function(){this.closeDialog()},r.prototype.wireEvents=function(){T.add(this.dlg,"click",this.clickHandler,this),T.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Gx(this.searchBoxKeyUp,200);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&T.add(t,"keyup",this.searchHandler,this)},r.prototype.unWireEvents=function(){T.remove(this.dlg,"click",this.clickHandler),T.remove(this.dlg,"keyup",this.keyupHandler);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&T.remove(t,"keyup",this.searchHandler)},r.prototype.foreignKeyFilter=function(t,e,i){var n=this,s={},o=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(i)).then(function(l){n.options.column.columnData=l.result,n.parent.notify(_D,{predicate:s,column:n.options.column}),t.ejpredicate=s.predicate.predicates;for(var h=s.predicate.predicates,u=0;u<h.length;u++)o.push({field:h[u].field,predicate:"or",matchCase:h[u].ignoreCase,ignoreAccent:h[u].ignoreAccent,operator:h[u].operator,value:h[u].value,type:n.options.type});t.filterCollection=o.length?o:e.filter(function(d){return d.field=n.options.field}),n.options.handler(t)})},r.prototype.foreignFilter=function(t,e){var n=new kn(this.options.column.foreignKeyValue,this.options.isRemote?"string"===this.options.column.type?"contains":"equal":this.options.column.type?"contains":"equal",e,!0,this.options.ignoreAccent);this.foreignKeyFilter(t,[t.filterCollection],n)},r.prototype.searchBoxClick=function(t){var e=t.target;e.classList.contains("e-searchclear")&&(this.sInput.value=e.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},r.prototype.searchBoxKeyUp=function(t){!f(this.parent.loadingIndicator)&&"Shimmer"===this.parent.loadingIndicator.indicatorType&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon()},r.prototype.updateSearchIcon=function(){this.sInput.value.length?ri(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]):ri(this.sIcon,["e-search-icon"],["e-chkcancel-icon"])},r.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},r.prototype.updateDataSource=function(){var t=this.options.dataSource;if(!(t instanceof Qe))for(var i=0;i<t.length;i++)if("object"!=typeof t){var n={};n[this.options.field]=t[i],t[i]=n}},r.prototype.updateModel=function(t){this.options=t,this.existingPredicate=t.actualPredicate||{},this.options.dataSource=t.dataSource,this.options.dataManager=t.dataManager?t.dataManager:t.dataSource,this.updateDataSource(),this.options.type=t.type,this.options.format=t.format||"",this.options.ignoreAccent=t.ignoreAccent||!1,this.options.filteredColumns=t.filteredColumns||this.parent.filterSettings.columns,this.options.query=t.query||new ii,this.options.allowCaseSensitive=t.allowCaseSensitive||!1,this.options.uid=t.column.uid,this.options.disableHtmlEncode=t.column.disableHtmlEncode||!1,this.values={},this.localeObj=t.localeObj,this.isFiltered=t.filteredColumns.length},r.prototype.getAndSetChkElem=function(t){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!t.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var e={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};ke.createInput(e,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},r.prototype.showDialog=function(t){var e={requestType:"filterbeforeopen",columnName:this.options.field,columnType:this.options.type,cancel:!1};e.filterModel=this,this.parent.notify("cbox-filter-begin",e),e.cancel?t.cancel=e.cancel:(this.dialogObj=new _d({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!f(pe(t.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.dialogObj.isStringTemplate=!0,this.renderResponsiveFilter(t),this.dlg.setAttribute("aria-label",this.getLocalizedLabel("ExcelFilterDialogARIA")),t.isResponsiveFilter?document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv").appendChild(this.dlg):this.parent.element.appendChild(this.dlg),this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=t.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show(),this.dialogObj.element.querySelector(".e-dlg-content").appendChild(this.sBox),this.wireEvents(),f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType?(kc({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),rh(this.spinner)):this.parent.showMaskRow(void 0,this.dialogObj.element),this.getAllData())},r.prototype.renderResponsiveFilter=function(t){t.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},r.prototype.dialogCreated=function(t){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":Z.isDevice?this.dialogObj.position={X:"center",Y:"center"}:function Mse(r,t){var e=t.element.style.display;t.element.style.display="block";var i=t.width,n=TT(r,t.element);t.element.style.display=e,t.element.style.top=n.top+r.getBoundingClientRect().height-5+"px";var s=n.left-i+r.clientWidth;t.element.style.left=s<1?i+s-16+"px":s+-4+"px"}(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify("filterDialogCreated",t)},r.prototype.openDialog=function(t){this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t)},r.prototype.closeDialog=function(){if(this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var t=this.options.columns.filter(function(i){return i.getFilterItemTemplate()}),e=this.parent.registeredTemplate;t.length&&!f(e)&&e.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&void 0!==this.parent.destroyTemplate&&TO(this.parent,["filterItemTemplate"]),this.parent.notify("filter-menu-close",{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),Be(this.dlg),this.dlg=null,this.parent.notify(KV,{})}},r.prototype.clearFilter=function(t){var e={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(sO,e),!e.cancel&&this.options.handler({action:"clear-filter",field:t?t.field:this.options.field})},r.prototype.btnClick=function(t){if(this.filterState){if("input"===t.target.tagName.toLowerCase()&&t.target.classList.contains("e-searchinput")||13===t.keyCode)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var e=t.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===e?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===e&&this.clearFilter()}this.closeDialog()}else"input"!==t.target.tagName.toLowerCase()&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify("after-filter-column-menu-close",{})},r.prototype.fltrBtnHandler=function(){var o,t=this,e=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall)")),i=e,n="equal",s=this.dialogObj.element.querySelector(".e-dropdownlist");s&&(this.options.operator=n=s.ej2_instances[0].value),this.isMenuNotEqual="notequal"===this.options.operator,this.options.hideSearchbox||(o=this.searchBox.querySelector(".e-searchinput"));var l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:n,type:this.options.type,matchCase:this.options.allowCaseSensitive,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==e.length&&this.itemsCnt-e.length<e.length;h&&o&&""===o.value&&(n=this.isMenuNotEqual?"equal":"notequal",e=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=n);var u,v,C=[];if(e.length!==this.itemsCnt||o&&o.value&&""!==o.value){for(var S=0;S<e.length;S++){v=he({},{value:u=this.values[pe(e[S],"e-ftrchk").getAttribute("uid")]},l),u&&!u.toString().length&&(v.operator=h?"notequal":"equal"),""===u||f(u)?C=C.concat(r.generateNullValuePredicates(l)):C.push(v);var A={instance:this,handler:this.fltrBtnHandler,arg1:v.field,arg2:v.predicate,arg3:v.operator,arg4:v.matchCase,arg5:v.ignoreAccent,arg6:v.value,cancel:!1};if(this.parent.notify(sO,A),A.cancel)return}("date"===this.options.type||"datetime"===this.options.type)&&f(this.values[pe(i[i.length-1],"e-ftrchk").getAttribute("uid")])&&h&&C.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"and",value:null}),this.initiateFilter(C)}else this.options.filteredColumns.some(function(M){return t.options.field===M.field})&&this.clearFilter()},r.generateNullValuePredicates=function(t){var e=[];return"string"===t.type&&e.push({field:t.field,ignoreAccent:t.ignoreAccent,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:""}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:null}),e.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:void 0}),e},r.prototype.initiateFilter=function(t){var i,e=t[0];if(!f(e)){i=e.ejpredicate?e.ejpredicate:new kn(e.field,e.operator,e.value,!e.matchCase,e.ignoreAccent);for(var n=1;n<t.length;n++)i=void 0!==t[n].ejpredicate?i[t[n].predicate](t[n].ejpredicate):i[t[n].predicate](t[n].field,t[n].operator,t[n].value,!t[n].matchCase,t[n].ignoreAccent);var s={action:"filtering",filterCollection:t,field:this.options.field,ejpredicate:kn.or(i)};this.options.handler(s)}},r.prototype.isForeignColumn=function(t){return!!t.isForeignColumn&&t.isForeignColumn()},r.prototype.refreshCheckboxes=function(){var t=this,e=this.sInput.value,i=this.options.column,n=this.isForeignColumn(i)?this.foreignKeyQuery.clone():this.options.query.clone(),s=this.options.query.clone(),o=n.queries.filter(function(P){return P&&"onWhere"===P.fn})[0];n.queries=[],s.queries=[];var a="string"!==this.options.type&&parseFloat(e)?parseFloat(e):e,l=this.options.isRemote?"string"===this.options.type?"contains":"equal":this.options.type?"contains":"equal",h=!0,u=this.options.ignoreAccent,d=this.isForeignColumn(i)?i.foreignKeyValue:i.field;a=""===a||void 0===a?void 0:a;var C,m=[],v={field:d,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:u},S=this.options.dataManager.adaptor.getModuleName;if("boolean"===this.options.type&&(void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())?a="true":void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&(a="false"),void 0!==a&&-1!==this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())&&S?(S(),a=!0):void 0!==a&&-1!==this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())&&S&&(S(),a=!1),l="equal"),("date"===this.options.type||"datetime"===this.options.type)&&this.options.format){var A=new Vr,_="string"==typeof this.options.format?this.options.format:this.options.format.format;a=_&&A.parseDate(e,{format:_})||new Date(e)}this.addDistinct(n),this.parent.trigger(dr,{requestType:"filtersearchbegin",filterModel:this,columnName:d,column:i,operator:l,matchCase:h,ignoreAccent:u,filterChoiceCount:null,query:n,value:a},function(P){if(P.operator=P.operator,C=new kn(d,P.operator,a,P.matchCase,P.ignoreAccent),"date"===t.options.type||"datetime"===t.options.type){var B={field:d,operator:l="equal",value:a,matchCase:h,ignoreAccent:u};f(a)||(C=EC(B,t.options.type))}if(e&&"string"==typeof e&&t.isBlanks&&t.getLocalizedLabel("Blanks").toLowerCase().indexOf(e.toLowerCase())>=0){m=m.concat(r.generateNullValuePredicates(v));var j=r.generatePredicate(m);j.predicates.push(C),n.where(j)}else e.length?(C=f(o)?C:C.and(o.e),n.where(C)):f(o)||n.where(o.e);P.filterChoiceCount=f(P.filterChoiceCount)?1e3:P.filterChoiceCount;var G={};rh(t.spinner),t.renderEmpty=!1,t.isForeignColumn(i)&&e.length?("result"in i.dataSource?new Qe(i.dataSource.result):i.dataSource).executeQuery(n).then(function(fe){var Ee=t.options.column.columnData;t.options.column.columnData=fe.result,t.parent.notify(_D,{predicate:G,column:i}),G.predicate.predicates.length?s.where(G.predicate):t.renderEmpty=!0,t.options.column.columnData=Ee,s.take(P.filterChoiceCount),t.search(P,s)}):(n.take(P.filterChoiceCount),t.search(P,n))})},r.prototype.search=function(t,e){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,e):this.processSearch(e)},r.prototype.getPredicateFromCols=function(t){for(var e=r.getPredicate(t),i=[],n={},s=void 0!==this.parent.getForeignKeyColumns,o=s?this.parent.getForeignKeyColumns():[],a=0,l=Object.keys(e);a<l.length;a++){var h=l[a],u=void 0;s&&!this.parent.getColumnByField(h)&&(u=wO(h,o)),u?(this.parent.notify(_D,{predicate:n,column:u}),n.predicate.predicates.length&&i.push(kn.or(n.predicate.predicates))):i.push(e[h])}return i.length&&kn.and(i)},r.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new ii},r.prototype.getAllData=function(){var t=this;this.customQuery=!1;var e=this.getQuery();e.requiresCount(),this.addDistinct(e);var i={requestType:xre,query:e,filterChoiceCount:null};i.filterModel=this,this.parent.trigger(dr,i,function(s){s.filterChoiceCount=f(s.filterChoiceCount)?1e3:s.filterChoiceCount,e.take(s.filterChoiceCount),s.query.distincts.length||(t.customQuery=!0,t.queryGenerate(e)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(s,e):t.processDataOperation(e,!0)})},r.prototype.addDistinct=function(t){var e=qe.distinct(this.options.filteredColumns,"field");return e.indexOf(this.options.column.field)<=-1&&(e=e.concat(this.options.column.field)),t.distinct(e),t},r.prototype.filterEvent=function(t,e){var i=this,n=function MG(r,t){var e=function QDe(r){var t=new Qh,e=new Qe({url:"",adaptor:new Qh}),i=t.processQuery(e,r);return JSON.parse(i.data)}(t),i=new ul;return e.dataSource=i.resolve,e.action=r,{state:e,deffered:i}}(t,e);this.parent.trigger(iO,n.state),n.deffered.promise.then(function(o){i.dataSuccess(o)})},r.prototype.processDataOperation=function(t,e){var i=this;this.options.dataSource=this.options.dataSource instanceof Qe?this.options.dataSource:new Qe(this.options.dataSource);var n=[],s=[];if(this.isForeignColumn(this.options.column)&&e){var o="result"in this.options.column.dataSource?new Qe(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=t.params,n.push(o.executeQuery(this.foreignKeyQuery)),s.push(function(l){return i.foreignKeyData=l})}n.push(this.options.dataSource.executeQuery(t)),s.push(this.dataSuccess.bind(this));var a=0;Promise.all(n).then(function(l){for(var h=0;h<l.length;h++)s[a++](l[h].result)})},r.prototype.dataSuccess=function(t){this.fullData=t;var e={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify("beforeCheckboxRenderer",e),e.executeQuery){var i=new ii;this.customQuery||this.queryGenerate(i);var n=new Qe(e.dataSource).executeLocal(i);this.filteredData=r.getDistinct(n,this.options.field,this.options.column,this.foreignKeyData).records||[]}this.processDataSource(null,!0,e.executeQuery?this.filteredData:e.dataSource,e),this.sInput&&this.sInput.focus();var a={requestType:"filterafteropen",columnName:this.options.field,columnType:this.options.type};a.filterModel=this,this.parent.notify(LD,a),this.isCheckboxFilterTemplate&&Ll(this.spinner)},r.prototype.queryGenerate=function(t){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var e=this.parent.searchSettings,i=e.fields.length?e.fields:this.options.columns.map(function(l){return l.field});t.search(e.key,i,e.operator,e.ignoreCase,e.ignoreAccent)}if(this.options.filteredColumns.length){for(var n=[],s=0;s<this.options.filteredColumns.length;s++){var o=this.options.filteredColumns[s];this.options.uid?(o.uid=o.uid||this.parent.getColumnByField(o.field).uid,o.uid!==this.options.uid&&n.push(this.options.filteredColumns[s])):o.field!==this.options.field&&n.push(this.options.filteredColumns[s])}var a=this.getPredicateFromCols(n);a&&t.where(a)}},r.prototype.processDataSource=function(t,e,i,n){rh(this.spinner),this.updateResult();var s={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify("beforeCheckboxfilterRenderer",s),this.isCheckboxFilterTemplate=s.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate||this.createFilterItems(i,e,n)},r.prototype.processSearch=function(t){this.processDataOperation(t)},r.prototype.updateResult=function(){this.result={};var t=this.getPredicateFromCols(this.options.filteredColumns),e=new ii;t&&e.where(t),this.parent.notify("before-checkbox-renderer-query",{query:e});for(var n=0,s=new Qe(this.fullData).executeLocal(e);n<s.length;n++)this.result[vs(this.options.field,s[n])]=!0},r.prototype.clickHandler=function(t){var e=t.target;if(f(this.parent.loadingIndicator)||"Shimmer"!==this.parent.loadingIndicator.indicatorType||!pe(e,"e-mask-ftrchk")){var i=pe(e,"e-checkbox-wrapper");if(pe(e,"e-searchbox")&&this.searchBoxClick(t),i&&!this.isCheckboxFilterTemplate){var n=i.querySelector(".e-selectall");n?this.updateAllCBoxes(!n.classList.contains("e-check")):function Nse(r){var t=r.querySelector(".e-frame"),e=t.previousSibling;t.classList.contains("e-check")?(e.checked=!1,ri(t,["e-uncheck"],["e-check"])):(e.checked=!0,ri(t,["e-check"],["e-uncheck"]))}(i.parentElement),this.updateIndeterminatenBtn(),i.querySelector(".e-chk-hidden").focus()}this.setFocus(pe(i,"e-ftrchk"))}},r.prototype.keyupHandler=function(t){this.setFocus(pe(t.target,"e-ftrchk"))},r.prototype.setFocus=function(t){var e=this.dlg.querySelector(".e-chkfocus");e&&e.classList.remove("e-chkfocus"),t&&t.classList.add("e-chkfocus")},r.prototype.updateAllCBoxes=function(t){for(var i=0,n=[].slice.call(this.cBox.getElementsByClassName("e-frame"));i<n.length;i++){var s=n[i];CO(s,t),WS(s.previousSibling,t)}},r.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},r.prototype.createCheckbox=function(t,e,i){var n=e?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);WS(n.querySelector("input"),e);var s=n.querySelector(".e-label"),o=d2({},i,{column:this.options.column,parent:this.parent});return s[this.options.disableHtmlEncode?"textContent":"innerHTML"]=!f(t)&&t.toString().length?t:this.getLocalizedLabel("Blanks"),s.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),"boolean"==typeof t&&(s.innerHTML=this.getLocalizedLabel(!0===t?"FilterTrue":"FilterFalse")),N([s],["e-checkboxfiltertext"]),this.options.template&&i[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&(s.innerHTML="",this.parent.isReact&&this.options.column.filter&&"string"!=typeof this.options.column.filter.itemTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.options.template(o,this.parent,"filterItemTemplate",null,null,null,s),this.parent.renderTemplates()):ca(s,this.options.template(o,this.parent,"filterItemTemplate"))),n},r.prototype.updateIndeterminatenBtn=function(){var o,t=this.cBox.children.length-1,e=[],i=!1,n=this.cBox.querySelector(".e-selectall"),s=this.cBox.querySelectorAll(".e-check:not(.e-selectall)").length;this.options.isResponsiveFilter||((o=this.dialogObj.btnObj[0]).disabled=!1);var a=n.previousSibling;WS(a,!1),a.indeterminate=!1,t===s?(e=["e-check"],WS(a,!0)):s?(e=["e-stop"],a.indeterminate=!0):(e=["e-uncheck"],i=!0,o&&(o.disabled=!0)),o&&(this.filterState=!o.disabled,o.dataBind()),z([n],["e-check","e-stop","e-uncheck"]),N([n],e),this.parent.notify(cG,{disabled:i})},r.prototype.createFilterItems=function(t,e,i){var n,o,s=this.parent.createElement("div"),a=!1;this.options.isResponsiveFilter||(o=this.dialogObj.btnObj[0]);var l=-1,h="ejValue";i.executeQuery||(h=i.field);for(var u=0;u<t.length;u++){var d=Q(h,t[u]);(""===d||f(d))&&(l+=1)}if(this.itemsCnt=-1!==l?t.length-l:t.length,t.length&&!this.renderEmpty){var m=this.getLocalizedLabel("SelectAll"),v=this.cBox.querySelector(".e-checkfltrnmdiv");v&&v.classList.remove("e-checkfltrnmdiv");var C=this.createCheckbox(m,!1,((n={})[this.options.field]=m,n));this.parent.cssClass&&N([C],[this.parent.cssClass]);var S=LG(Qd("cbox"),C,"e-ftrchk");S.querySelector(".e-frame").classList.add("e-selectall"),s.appendChild(S);var A=new kn("field","equal",this.options.field);this.options.foreignKeyValue&&(A=A.or("field","equal",this.options.foreignKeyValue));var _=new Qe(this.options.filteredColumns).executeLocal((new ii).where(A)).length,M=void 0;for(u=0;u<t.length;u++){var P=Qd("cbox");this.values[P]=Q(h,t[u]);var B=Q(this.options.field,t[u]);this.options.formatFn&&(B=this.valueFormatter.toView(B,this.options.formatFn));var j={value:B,column:this.options.column,data:t[u]};if(this.parent.notify("filter-cbox-value",j),""===(B=j.value)||f(B)){if(M)continue;M=!0}var G=this.createCheckbox(B,this.getCheckedState(_,this.values[P]),Q("dataObj",t[u]));s.appendChild(LG(P,G,"e-ftrchk"))}this.cBox.innerHTML="",ca(this.cBox,[].slice.call(s.children)),this.updateIndeterminatenBtn(),o&&(o.disabled=!1),a=!1}else s.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),ca(this.cBox.children[0],[].slice.call(s.children)),o&&(o.disabled=!0),a=!0;o&&t.length&&(this.filterState=!o.disabled,o.dataBind());var ne={requestType:xre,dataSource:this.renderEmpty?[]:t};ne.filterModel=this,this.parent.notify(LD,ne),this.parent.notify(cG,{disabled:a}),Ll(this.spinner)},r.prototype.getCheckedState=function(t,e){if(!this.isFiltered||!t)return!0;var i=this.result[e];return"notequal"===this.options.operator?!i:i},r.getDistinct=function(t,e,i,n){for(var a,s=t.length,o=[],h={},u=!(!i||!i.isForeignColumn)&&i.isForeignColumn();s--;)if(!((a=vs(e,a=t[s]))in h)){var d={};if(d.ejValue=a,h[a]=!0,u){var m=SC(i,{},a,n)[0];Nt(jre,m,t[s]),a=Q(i.foreignKeyValue,m)}Nt(e,f(a)?null:a,d),Nt("dataObj",t[s],d),o.push(d)}return qe.group(qe.sort(o,e,qe.fnAscending),"ejValue")},r.getPredicate=function(t){for(var e=qe.distinct(t,"field",!0)||[],i=[],n={},s=0;s<e.length;s++)0!==(i=new Qe(t).executeLocal((new ii).where("field","equal",e[s].field))).length&&(n[e[s].field]=r.generatePredicate(i));return n},r.generatePredicate=function(t){var i,e=t?t.length:0,s=r.updateDateFilter(t[0]);s.ignoreAccent=!f(s.ignoreAccent)&&s.ignoreAccent,i="date"===s.type||"datetime"===s.type?EC(s,s.type):s.ejpredicate?s.ejpredicate:new kn(s.field,s.operator,s.value,!r.getCaseValue(s),s.ignoreAccent);for(var o=1;o<e;o++)t[o]=r.updateDateFilter(t[o]),e>2&&o>1&&"or"===t[o].predicate?i.predicates.push("date"===t[o].type||"datetime"===t[o].type?EC(t[o],t[o].type):new kn(t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent)):i="date"===t[o].type||"datetime"===t[o].type?"and"===t[o].predicate&&"equal"===t[o].operator?i.or(EC(t[o],t[o].type),t[o].type,t[o].ignoreAccent):i[t[o].predicate](EC(t[o],t[o].type),t[o].type,t[o].ignoreAccent):t[o].ejpredicate?i[t[o].predicate](t[o].ejpredicate):i[t[o].predicate](t[o].field,t[o].operator,t[o].value,!r.getCaseValue(t[o]),t[o].ignoreAccent);return i||null},r.getCaseValue=function(t){return f(t.matchCase)?!("string"===t.type||f(t.type)&&"string"==typeof t.value):t.matchCase},r.updateDateFilter=function(t){return("date"===t.type||"datetime"===t.type||t.value instanceof Date)&&(t.type=t.type||"date"),t},r}(),DC=function(){function r(t,e,i,n){var s=this;this.sortRequired=!0,this.groupSortFocus=!1,this.groupCancelFocus=!1,this.isAppliedGroup=!1,this.isAppliedUnGroup=!1,this.reorderingColumns=[],this.visualElement=ti("div",{className:"e-cloneproperties e-dragclone e-gdclone",styles:"line-height:23px",attrs:{action:"grouping"}}),this.helper=function(o){var a=s.parent,l=o.sender.target,h=l.classList.contains("e-groupheadercell")?l:pe(l,"e-groupheadercell");return!(!h||!l.classList.contains("e-drag")&&s.groupSettings.allowReordering)&&(s.column=a.getColumnByField(h.firstElementChild.getAttribute("ej-mappingname")),s.visualElement.textContent=h.textContent,s.visualElement.style.width=h.offsetWidth+2+"px",s.visualElement.style.height=h.offsetHeight+2+"px",s.visualElement.setAttribute("e-mappinguid",s.column.uid),a.element.appendChild(s.visualElement),s.visualElement)},this.dragStart=function(o){s.parent.element.classList.add("e-ungroupdrag")},this.drag=function(o){s.groupSettings.allowReordering&&s.animateDropper(o);var a=o.target,l=s.parent.element.querySelector(".e-cloneproperties");s.parent.trigger(LS,{target:a,draggableType:"headercell",column:s.column}),s.groupSettings.allowReordering||(ri(l,["e-defaultcur"],["e-notallowedcur"]),pe(a,Ps)||pe(a,"e-headercell")||ri(l,["e-notallowedcur"],["e-defaultcur"]))},this.dragStop=function(o){s.parent.element.classList.remove("e-ungroupdrag");var a=!(pe(o.target,Ps)||pe(o.target,"e-gridheader"));if(s.groupSettings.allowReordering&&a){if(Be(o.helper),pe(o.target,"e-groupdroparea"))s.rearrangeGroup();else if(!pe(o.target,"e-grid")){var l=s.parent.getColumnByUid(o.helper.getAttribute("e-mappinguid")).field;-1!==s.groupSettings.columns.indexOf(l)&&s.ungroupColumn(l)}}else a&&Be(o.helper)},this.animateDropper=function(o){var a=s.parent.element.querySelector(".e-cloneproperties").getAttribute("e-mappinguid"),l=s.parent.getColumnByUid(a).field,h=pe(o.target,"e-groupdroparea"),u=pe(o.target,"e-group-animator"),d=[].slice.call(s.element.getElementsByClassName("e-groupheadercell")).map(function(M){return M.querySelector("div").getAttribute("ej-mappingname")}),m=JSON.parse(JSON.stringify(d));if(u||h){if(u){var v=u.querySelector("div[ej-mappingname]").getAttribute("ej-mappingname"),C=+u.getAttribute("index");if(v!==l){var S=m.indexOf(l);-1!==S&&m.splice(S,1),m.splice(C+(-1!==C&&S===C?1:0),0,l)}}else h&&-1===m.indexOf(l)&&m.push(l);s.element.innerHTML="",m.length&&!s.element.classList.contains("e-grouped")&&s.element.classList.add("e-grouped"),s.reorderingColumns=m;for(var _=0;_<m.length;_++)s.addColToGroupDrop(m[_])}else s.addLabel(),s.removeColFromGroupDrop(l)},this.drop=function(o){var a=s.parent,l=a.getColumnByUid(o.droppedElement.getAttribute("e-mappinguid"));s.element.classList.remove("e-hover"),Be(o.droppedElement),s.aria.setDropTarget(s.parent.element.querySelector(".e-groupdroparea"),!1),s.aria.setGrabbed(s.parent.getHeaderTable().querySelector("[aria-grabbed=true]"),!1),f(l)||!1===l.allowGrouping||pe(a.getColumnHeaderByUid(l.uid),"e-grid").getAttribute("id")!==a.element.getAttribute("id")?s.parent.log("action_disabled_column",{moduleName:s.getModuleName(),columnName:l.headerText}):s.groupColumn(l.field)},this.contentRefresh=!0,this.aria=new fO,this.parent=t,this.groupSettings=e,this.serviceLocator=n,this.sortedColumns=i,this.focus=n.getService("focus"),this.addEventListener(),this.groupGenerator=new t2(this.parent)}return r.prototype.addLabel=function(){if(!this.element.getElementsByClassName("e-group-animator").length){var t=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=t,this.element.classList.remove("e-grouped")}},r.prototype.rearrangeGroup=function(){this.sortRequired=!1,this.updateModel()},r.prototype.columnDrag=function(t){this.groupSettings.allowReordering&&t.column.allowGrouping&&this.animateDropper(t);var e=this.parent.element.querySelector(".e-cloneproperties");ri(e,["e-defaultcur"],["e-notallowedcur"]),!pe(t.target,"e-groupdroparea")&&!(this.parent.allowReordering&&pe(t.target,"e-headercell"))&&ri(e,["e-notallowedcur"],["e-defaultcur"]),t.target.classList.contains("e-groupdroparea")?this.element.classList.add("e-hover"):this.element.classList.remove("e-hover")},r.prototype.columnDragStart=function(t){if(!t.target.classList.contains("e-stackedheadercell")){var e=this.parent.element.querySelector(".e-groupdroparea");this.aria.setDropTarget(e,t.column.allowGrouping);var i=t.target.classList.contains("e-headercell")?t.target:pe(t.target,"e-headercell");this.aria.setGrabbed(i,!0,!t.column.allowGrouping)}},r.prototype.columnDrop=function(t){var e=this.parent;if("grouping"===t.droppedElement.getAttribute("action")){var i=e.getColumnByUid(t.droppedElement.getAttribute("e-mappinguid"));if(f(i)||!1===i.allowGrouping||pe(e.getColumnHeaderByUid(i.uid),"e-grid").getAttribute("id")!==e.element.getAttribute("id"))return;this.ungroupColumn(i.field)}},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Nr,this.enableAfterRender,this),this.parent.on(M8,this.onActionComplete,this),this.parent.on(Lre,this.onActionComplete,this),this.parent.on(Ha,this.onPropertyChanged,this),this.parent.on(sl,this.clickHandler,this),this.parent.on(LS,this.columnDrag,this),this.parent.on(DD,this.columnDragStart,this),this.parent.on(RD,this.columnDrop,this),this.parent.on(ID,this.columnDrop,this),this.parent.on(xo,this.refreshSortIcons,this),this.parent.on(P8,this.refreshSortIcons,this),this.parent.on(Cs,this.keyPressHandler,this),this.parent.on(Zr,this.initialEnd,this),this.parent.on(Yd,this.initialEnd,this),this.parent.on(Ba,this.render,this),this.parent.on(mC,this.onGroupAggregates,this),this.parent.on(dn,this.destroy,this),this.parent.on("group-expand-collapse",this.updateExpand,this),this.parent.on("persist-data-changed",this.initialEnd,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ba,this.render),this.parent.off(Nr,this.enableAfterRender),this.parent.off(M8,this.onActionComplete),this.parent.off(Lre,this.onActionComplete),this.parent.off(Ha,this.onPropertyChanged),this.parent.off(sl,this.clickHandler),this.parent.off(LS,this.columnDrag),this.parent.off(DD,this.columnDragStart),this.parent.off(ID,this.columnDrop),this.parent.off(RD,this.columnDrop),this.parent.off(xo,this.refreshSortIcons),this.parent.off(P8,this.refreshSortIcons),this.parent.off(Cs,this.keyPressHandler),this.parent.off(mC,this.onGroupAggregates),this.parent.off(dn,this.destroy),this.parent.off("group-expand-collapse",this.updateExpand))},r.prototype.initialEnd=function(){var t=this.parent;if(this.parent.off(Zr,this.initialEnd),this.parent.off(Yd,this.initialEnd),this.parent.getColumns().length&&this.groupSettings.columns.length){this.contentRefresh=!1;for(var e=0,i=t.groupSettings.columns;e<i.length;e++)this.groupColumn(i[e]);this.contentRefresh=!0}},r.prototype.keyPressHandler=function(t){var e=this.parent;if(t.target&&pe(t.target,"e-groupheadercell")&&("tab"===t.action||"shiftTab"===t.action)){var i=this.getFocusableGroupedItems();if("tab"===t.action&&t.target===i[i.length-1]||"shiftTab"===t.action&&t.target===i[0])return;for(var n=0;n<i.length;n++)if(t.target===i[n])return t.preventDefault(),void i["tab"===t.action?n+1:n-1].focus()}if("ctrlSpace"===t.action||this.groupSettings.columns.length&&-1!==["altDownArrow","altUpArrow","ctrlDownArrow","ctrlUpArrow","enter"].indexOf(t.action))switch(t.preventDefault(),t.action){case"altDownArrow":case"altUpArrow":var o=e.allowSelection?e.getSelectedRowIndexes():[];if(o.length){var a=e.getContentTable().querySelector(rt).children,h=void 0;for(n=e.getDataRows()[o[o.length-1]].rowIndex;n>=0;n--)if(!a[n].classList.contains(vn)&&!a[n].classList.contains("e-detailrow")){h=a[n];break}this.expandCollapseRows(h.querySelector("altUpArrow"===t.action?".e-recordplusexpand":".e-recordpluscollapse"))}break;case"ctrlDownArrow":this.expandAll();break;case"ctrlUpArrow":this.collapseAll();break;case"enter":if(t.target.classList.contains("e-groupsort")){this.groupSortFocus=!0,this.applySortFromTarget(t.target);break}if(t.target.classList.contains("e-ungroupbutton")){this.groupCancelFocus=!0,this.unGroupFromTarget(t.target);break}if(this.parent.isEdit||null!==U(t.target,"#"+this.parent.element.id+"_searchbar")||pe(t.target,"e-pager"))return;var u=this.focus.getFocusedElement();(u.classList.contains("e-icon-grightarrow")||u.classList.contains("e-icon-gdownarrow"))&&(u=u.parentElement);var d=u?u.parentElement.querySelector('[class^="e-record"]'):null;if(!d)break;u.children.length&&(u.children[0].classList.contains("e-icon-grightarrow")||u.children[0].classList.contains("e-icon-gdownarrow"))&&this.expandCollapseRows(d);break;case"ctrlSpace":var m=e.focusModule.currentInfo.element;if(m&&m.classList.contains("e-headercell")){var v=e.getColumnByUid(m.firstElementChild.getAttribute("e-mappinguid"));v.field&&e.groupSettings.columns.indexOf(v.field)<0?this.groupColumn(v.field):this.ungroupColumn(v.field)}}},r.prototype.getFocusableGroupedItems=function(){var t=[];if(this.groupSettings.columns.length)for(var e=this.element.querySelectorAll(".e-groupheadercell"),i=0;i<e.length;i++)t.push(e[i].querySelector(".e-grouptext")),t.push(e[i].querySelector(".e-groupsort")),t.push(e[i].querySelector(".e-ungroupbutton"));return t},r.prototype.wireEvent=function(){T.add(this.element,"focusin",this.onFocusIn,this),T.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){T.remove(this.element,"focusin",this.onFocusIn),T.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){this.parent.focusModule.currentInfo&&this.parent.focusModule.currentInfo.element&&(z([this.parent.focusModule.currentInfo.element,this.parent.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.parent.focusModule.currentInfo.element.tabIndex=-1),this.addOrRemoveFocus(t)},r.prototype.onFocusOut=function(t){this.addOrRemoveFocus(t)},r.prototype.addOrRemoveFocus=function(t){if(t.target.classList.contains("e-groupdroparea")||t.target.classList.contains("e-grouptext")||t.target.classList.contains("e-groupsort")||t.target.classList.contains("e-ungroupbutton")){var e=t.target.classList.contains("e-grouptext")?t.target.parentElement.parentElement:t.target;"focusin"===t.type?(N([e],["e-focused","e-focus"]),t.target.tabIndex=0):(z([e],["e-focused","e-focus"]),t.target.tabIndex=-1)}},r.prototype.clickHandler=function(t){t.target.classList.contains("e-groupsort")&&(this.groupSortFocus=!0),t.target.classList.contains("e-ungroupbutton")&&(this.groupCancelFocus=!0);var e=pe(t.target,"e-recordplusexpand")||pe(t.target,"e-recordpluscollapse");e&&(e.children[0].classList.contains("e-icon-gdownarrow")||e.children[0].classList.contains("e-icon-grightarrow"))&&this.expandCollapseRows(t.target),this.applySortFromTarget(t.target),this.unGroupFromTarget(t.target),this.toogleGroupFromHeader(t.target)},r.prototype.unGroupFromTarget=function(t){t.classList.contains("e-ungroupbutton")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname"))},r.prototype.toogleGroupFromHeader=function(t){this.groupSettings.showToggleButton&&(t.classList.contains("e-grptogglebtn")?t.classList.contains("e-toggleungroup")?this.ungroupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):this.groupColumn(this.parent.getColumnByUid(t.parentElement.getAttribute("e-mappinguid")).field):t.classList.contains("e-toggleungroup")&&this.ungroupColumn(t.parentElement.getAttribute("ej-mappingname")))},r.prototype.applySortFromTarget=function(t){var e=this.parent,i=U(t,".e-groupheadercell");if(e.allowSorting&&i&&!t.classList.contains("e-ungroupbutton")&&!t.classList.contains("e-toggleungroup")){var n=i.firstElementChild.getAttribute("ej-mappingname");e.getColumnHeaderByField(n).getElementsByClassName("e-ascending").length?e.sortColumn(n,"Descending",!0):e.sortColumn(n,"Ascending",!0)}},r.prototype.expandCollapseRows=function(t){var e=pe(t,"e-recordplusexpand")||pe(t,"e-recordpluscollapse");if(e){var i=this.parent.getContentTable().querySelector(rt).children,n=void 0,s=void 0,o=void 0,a=this.parent,l=e.parentElement.getElementsByClassName("e-indentcell").length,h=e.parentElement.getAttribute("data-uid"),u=a.getRowObjectFromUID(h),d=!1;if(e.classList.contains("e-recordpluscollapse")?(N([e],"e-recordplusexpand"),z([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",e.firstElementChild.setAttribute("title","expanded"),d=!0,u.isExpand=!0,ws(a)&&this.updateVirtualRows(a,t,d,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionExpand(e.parentElement)):(n=!0,u.isExpand=!1,z([e],"e-recordplusexpand"),N([e],"e-recordpluscollapse"),e.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",e.firstElementChild.setAttribute("title","collapsed"),ws(a)&&this.updateVirtualRows(a,t,!n,o,s),this.parent.groupSettings.enableLazyLoading&&this.parent.contentModule.captionCollapse(e.parentElement)),this.aria.setExpand(e,d),!ws(a)&&!this.parent.groupSettings.enableLazyLoading){for(var m=a.getRowsObject(),v=m.indexOf(u),C={},S=a.enableInfiniteScrolling&&a.infiniteScrollSettings&&a.infiniteScrollSettings.enableCache&&m.length!==i.length?Array.from(i).indexOf(e.parentElement):void 0,A=v;A<m.length&&!(A>v&&m[A].indent===l);A++){if(m[A].isDetailRow){var _=m[A-1].isExpand&&m[A-1].visible;S&&S>0&&S<i.length?i[S].style.display=_?"":"none":f(S)&&(i[A].style.display=_?"":"none")}else if(!1===C[m[A].parentUid])m[A].visible=!1,S&&S>0&&S<i.length?i[S].style.display="none":f(S)&&(i[A].style.display="none");else{if(!(m[A].isDataRow||m[A].isCaptionRow||m[A].isDetailRow||m[A].isAggregateRow)&&(_=m[A].cells.some(function(P){return P.isDataCell&&P.visible}))===m[A].visible)continue;m[A].visible=!0,S&&S>0&&S<i.length?(i[S].style.display="",i[S].classList.remove("e-hide")):f(S)&&(i[A].style.display="",i[A].classList.remove("e-hide"))}m[A].isCaptionRow&&(C[m[A].uid]=m[A].isExpand&&m[A].visible),f(S)||S++}this.parent.notify(NS,{rows:this.parent.getRowsObject()})}(!this.parent.enableInfiniteScrolling||!this.parent.groupSettings.enableLazyLoading)&&this.parent.notify("infinite-group-collapse",{isCollapse:n,parentUid:h})}},r.prototype.updateVirtualRows=function(t,e,i,n,s){var o=t.getRowObjectFromUID(e.closest("tr").getAttribute("data-uid"));o.isExpand=i,function BDe(r){for(var t=[],e=r.vRows,i=0;i<e.length;i++)e[i].isDataRow?t.push(e[i]):e[i].isDataRow||(t.push(e[i]),!e[i].isExpand&&e[i].isCaptionRow&&(i+=HDe(e[i],r)));r.vcRows=t}(t),this.parent.notify("refresh-virtual-max-page",{}),(n=t.getDataModule().generateQuery(!1)).queries=t.getDataModule().aggregateQuery(t.getQuery().clone()).queries;var a={requestType:"virtualscroll",rowObject:o};t.contentModule&&(a.virtualInfo=t.contentModule.prevInfo),t.getDataModule().getData(a,n.requiresCount()).then(function(l){return t.renderModule.dataManagerSuccess(l,a)})},r.prototype.expandCollapse=function(t){if(this.parent.groupSettings.columns.length){t||this.parent.notify("initial-collapse",t);for(var n,e=this.parent.getContentTable().querySelector(rt).children,i=this.parent.getRowsObject(),s=0,o=e.length;s<o;s++)e[s].querySelectorAll(".e-recordplusexpand, .e-recordpluscollapse").length?((n=e[s].querySelector(t?".e-recordpluscollapse":".e-recordplusexpand"))&&(t?(n.className="e-recordplusexpand",n.firstElementChild.className="e-icons e-gdiagonaldown e-icon-gdownarrow",n.setAttribute("aria-expanded","true"),n.firstElementChild.setAttribute("title","expanded")):(n.className="e-recordpluscollapse",n.firstElementChild.className="e-icons e-gnextforward e-icon-grightarrow",n.setAttribute("aria-expanded","false"),n.firstElementChild.setAttribute("title","collapsed"))),e[s].firstElementChild.classList.contains("e-recordplusexpand")||e[s].firstElementChild.classList.contains("e-recordpluscollapse")||(e[s].style.display=t?"":"none")):e[s].style.display=t?"":"none",i[s].isCaptionRow&&(i[s].isExpand=!!t);this.parent.updateVisibleExpandCollapseRows(),this.parent.notify(NS,{rows:this.parent.getRowsObject()})}},r.prototype.expandAll=function(){this.expandCollapse(!0)},r.prototype.collapseAll=function(){this.expandCollapse(!1)},r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization"),this.renderGroupDropArea(),this.initDragAndDrop(),this.refreshToggleBtn(),this.wireEvent()},r.prototype.renderGroupDropArea=function(){var t=this.parent.element.querySelector(".e-groupdroparea");t&&Be(t),this.element=this.parent.createElement("div",{className:"e-groupdroparea",attrs:{tabindex:"-1"}}),this.groupSettings.allowReordering&&this.element.classList.add("e-group-animate"),this.updateGroupDropArea(),this.parent.element.insertBefore(this.element,this.parent.element.firstChild),this.groupSettings.showDropArea||(this.element.style.display="none")},r.prototype.updateGroupDropArea=function(t){if(this.groupSettings.showDropArea&&!this.groupSettings.columns.length){var e=this.l10n.getConstant("GroupDropArea");this.element.innerHTML=e,this.element.classList.remove("e-grouped")}else(this.element.innerHTML===this.l10n.getConstant("GroupDropArea")&&(1===this.groupSettings.columns.length||!this.isAppliedGroup&&!this.isAppliedUnGroup)||t)&&(this.element.innerHTML=""),this.element.classList.add("e-grouped")},r.prototype.initDragAndDrop=function(){this.initializeGHeaderDrop(),this.initializeGHeaderDrag()},r.prototype.initializeGHeaderDrag=function(){new $p(this.element,{dragTarget:this.groupSettings.allowReordering?".e-drag":".e-groupheadercell",distance:this.groupSettings.allowReordering?-10:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop})},r.prototype.initializeGHeaderDrop=function(){new Mw(this.element,{accept:".e-dragclone",drop:this.drop})},r.prototype.groupColumn=function(t){var e=this.parent,i=e.getColumnByField(t);f(i)||!1===i.allowGrouping||this.contentRefresh&&this.groupSettings.columns.indexOf(t)>-1?this.parent.log("action_disabled_column",{moduleName:this.getModuleName(),columnName:i.headerText}):Jd(e)?e.notify(uu,{instance:this,handler:this.groupColumn,arg1:t}):(i.visible=e.groupSettings.showGroupedColumn,this.colName=t,this.isAppliedGroup=!0,this.contentRefresh?this.updateModel():this.addColToGroupDrop(t),this.updateGroupDropArea(),this.isAppliedGroup=!1)},r.prototype.ungroupColumn=function(t){var e=this.parent,i=this.parent.enableColumnVirtualization?this.parent.columns.filter(function(a){return a.field===t})[0]:e.getColumnByField(t);if(!(f(i)||!1===i.allowGrouping||this.groupSettings.columns.indexOf(t)<0)){if(Jd(e))return void e.notify(uu,{instance:this,handler:this.ungroupColumn,arg1:t});i.visible=!0,this.colName=i.field;var n=JSON.parse(JSON.stringify(this.groupSettings.columns));if(n.splice(n.indexOf(this.colName),1),this.sortedColumns.indexOf(t)<0)for(var s=0,o=e.sortSettings.columns.length;s<o;s++)if(t===e.sortSettings.columns[s].field){e.sortSettings.columns.splice(s,1);break}this.groupSettings.allowReordering&&(this.reorderingColumns=n),this.groupSettings.columns=n,e.allowGrouping&&(this.isAppliedUnGroup=!0,this.parent.dataBind())}},r.prototype.updateModel=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));t=this.reorderingColumns.length?JSON.parse(JSON.stringify(this.reorderingColumns)):t,this.sortRequired&&(-1===t.indexOf(this.colName)&&t.push(this.colName),this.groupAddSortingQuery(this.colName)),this.sortRequired=!0,this.parent.groupSettings.columns=t,this.parent.dataBind()},r.prototype.onActionComplete=function(t){"grouping"===t.requestType?this.addColToGroupDrop(this.colName):this.removeColFromGroupDrop(this.colName);var e=this.groupSettings.columns.indexOf(this.colName)>-1?{columnName:this.colName,requestType:"grouping",type:zi}:{requestType:"ungrouping",type:zi};this.parent.trigger(zi,he(t,e)),this.colName=null},r.prototype.groupAddSortingQuery=function(t){for(var e=0;e<this.parent.sortSettings.columns.length&&this.parent.sortSettings.columns[e].field!==t;)e++;this.parent.sortSettings.columns.length===e?this.parent.sortSettings.columns.push({field:t,direction:"Ascending",isFromGroup:!0}):this.parent.allowSorting||(this.parent.sortSettings.columns[e].direction="Ascending")},r.prototype.createElement=function(t){var e=this.parent,i="Ascending",n=this.parent.createElement("div",{className:"e-grid-icon e-group-animator"}),s=this.parent.createElement("div",{className:"e-grid-icon e-groupheadercell"}),o=this.parent.createElement("div",{attrs:{"ej-mappingname":t}});qc(t)&&o.setAttribute("ej-complexname",To(t));var a=this.parent.getColumnByField(t),l=e.getColumnHeaderByUid(a.uid);return this.groupSettings.allowReordering&&o.appendChild(this.parent.createElement("span",{className:"e-drag e-icons e-icon-drag",innerHTML:"&nbsp;",attrs:{title:"Drag",tabindex:"-1","aria-label":this.l10n.getConstant("GroupedDrag")}})),o.appendChild(this.parent.createElement("span",{className:"e-grouptext",innerHTML:a.headerText,attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText}})),this.groupSettings.showToggleButton&&o.appendChild(this.parent.createElement("span",{className:"e-togglegroupbutton e-icons e-icon-ungroup e-toggleungroup",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupAria")}})),l.querySelectorAll(".e-ascending,.e-descending").length&&(i=l.querySelector(".e-ascending")?"Ascending":"Descending"),o.appendChild(this.parent.createElement("span",{className:"e-groupsort e-icons e-"+i.toLowerCase()+" e-icon-"+i.toLowerCase(),innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupedSortIcon")+a.headerText,role:"button"}})),o.appendChild(this.parent.createElement("span",{className:"e-ungroupbutton e-icons e-icon-hide",innerHTML:"&nbsp;",attrs:{title:this.l10n.getConstant("UnGroup"),tabindex:"-1","aria-label":this.l10n.getConstant("UnGroupIcon")+a.headerText,role:"button"},styles:this.groupSettings.showUngroupButton?"":"display:none"})),s.appendChild(o),this.groupSettings.allowReordering&&(n.appendChild(s),n.appendChild(this.createSeparator()),s=n),s},r.prototype.addColToGroupDrop=function(t){var e=qc(t)?this.parent.element.querySelector(".e-groupdroparea div[ej-complexname="+To(t)+"]"):this.parent.element.querySelector(".e-groupdroparea div[ej-mappingname="+t+"]");if(!(this.groupSettings.allowReordering&&e||f(this.parent.getColumnByField(t)))){var n=this.createElement(t);if(this.groupSettings.allowReordering){var s=this.element.getElementsByClassName("e-group-animator").length;n.setAttribute("index",s.toString())}this.element.appendChild(n);var o=this.parent.focusModule;o.setActive(!0);var a=[0,0];0===o.active.matrix.matrix[a[0]][a[1]]&&(a=Wg(o.active.matrix.matrix,a,!0)),o.active.matrix.current=a,o.active.getTable().rows[o.active.matrix.current[0]].cells[o.active.matrix.current[1]].focus()}},r.prototype.createSeparator=function(){return this.parent.createElement("span",{className:"e-nextgroup e-icons e-icon-next",innerHTML:"&nbsp;",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("GroupSeperator")},styles:this.groupSettings.showUngroupButton?"":"display:none"})},r.prototype.refreshToggleBtn=function(t){if(this.groupSettings.showToggleButton)for(var e=[].slice.call(this.parent.getHeaderTable().getElementsByClassName("e-headercelldiv")),i=0,n=e.length;i<n;i++)if(!e[i].classList.contains("e-emptycell")&&!e[i].classList.contains("e-headerchkcelldiv")){var s=this.parent.getColumnByUid(e[i].getAttribute("e-mappinguid"));(!this.parent.showColumnMenu||this.parent.showColumnMenu&&!s.showColumnMenu)&&(e[i].getElementsByClassName("e-grptogglebtn").length&&Be(e[i].querySelectorAll(".e-grptogglebtn")[0]),t||e[i].appendChild(this.parent.createElement("span",{className:"e-grptogglebtn e-icons "+(this.groupSettings.columns.indexOf(s.field)>-1?"e-toggleungroup e-icon-ungroup":"e-togglegroup e-icon-group"),attrs:{tabindex:"-1","aria-label":f(this.l10n)?this.parent.localeObj.getConstant("GroupButton"):this.l10n.getConstant("GroupButton")}})))}},r.prototype.removeColFromGroupDrop=function(t){if(!f(this.getGHeaderCell(t))){var e=this.getGHeaderCell(t);Be(this.groupSettings.allowReordering?pe(e,"e-group-animator"):e),this.updateGroupDropArea()}this.isAppliedUnGroup=!1},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=0,i=Object.keys(t.properties);e<i.length;e++){var n=i[e];switch(n){case"columns":var s=void 0;if(this.contentRefresh){if(this.isAppliedUnGroup)s={columnName:this.colName,requestType:"ungrouping",type:dr};else{if(!this.isAppliedGroup){this.updateGroupDropArea(!0);for(var o=0;o<this.parent.sortSettings.columns.length;o++)this.parent.sortSettings.columns[o].isFromGroup&&(this.parent.sortSettings.columns.splice(o,1),o--);for(var a=0;a<this.groupSettings.columns.length;a++)this.colName=this.groupSettings.columns[a],this.parent.getColumnByField(this.colName).visible=this.parent.groupSettings.showGroupedColumn,this.groupAddSortingQuery(this.colName),a<this.groupSettings.columns.length-1&&this.addColToGroupDrop(this.groupSettings.columns[a])}s={columnName:this.colName,requestType:t.properties[n].length?"grouping":"ungrouping",type:dr}}if(!this.groupSettings.showGroupedColumn){var h=t.oldProperties[n];for(a=0;a<h.length;a++)-1===t.properties[n].indexOf(h[a])&&(this.parent.getColumnByField(h[a]).visible=!0)}this.parent.notify(zo,s)}break;case"showDropArea":this.updateGroupDropArea(),this.groupSettings.showDropArea?(this.element.style.display="",this.parent.headerModule.refreshUI()):this.element.style.display="none";break;case"showGroupedColumn":this.updateGroupedColumn(this.groupSettings.showGroupedColumn),this.parent.notify(zo,{requestType:"refresh"});break;case"showUngroupButton":this.updateButtonVisibility(this.groupSettings.showUngroupButton,"e-ungroupbutton");break;case"showToggleButton":this.updateButtonVisibility(this.groupSettings.showToggleButton,"e-togglegroupbutton "),this.parent.refreshHeader();break;case"enableLazyLoading":this.parent.freezeRefresh()}}},r.prototype.updateGroupedColumn=function(t){for(var e=0;e<this.groupSettings.columns.length;e++)this.parent.getColumnByField(this.groupSettings.columns[e]).visible=t},r.prototype.updateButtonVisibility=function(t,e){for(var i=[].slice.call(this.element.getElementsByClassName(e)),n=0;n<i.length;n++)i[n].style.display=t?"":"none"},r.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&this.render()},r.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+js)&&!t.querySelector("."+Ps)||((this.parent.isDestroyed||!this.parent.allowGrouping)&&!this.parent.refreshing&&this.clearGrouping(),this.unWireEvent(),this.removeEventListener(),this.refreshToggleBtn(!0),this.element.parentNode&&Be(this.element))},r.prototype.clearGrouping=function(){var t=JSON.parse(JSON.stringify(this.groupSettings.columns));this.contentRefresh=!1;for(var e=0,i=t.length;e<i;e++)e===i-1&&(this.contentRefresh=!0),this.ungroupColumn(t[e]);this.contentRefresh=!0},r.prototype.getModuleName=function(){return"group"},r.prototype.refreshSortIcons=function(){var e,t=this.parent,i=t.sortSettings.columns,n=t.groupSettings.columns,s=this.parent.getColumns().map(function(l){return l.field});this.refreshToggleBtn();for(var o=0,a=i.length;o<a;o++)-1!==s.indexOf(i[o].field)&&(e=t.getColumnHeaderByField(i[o].field),!t.allowSorting&&(this.sortedColumns.indexOf(i[o].field)>-1||this.groupSettings.columns.indexOf(i[o].field)>-1)?(ri(e.querySelector(".e-sortfilterdiv"),["e-ascending","e-icon-ascending"],[]),i.length>1&&e.querySelector(".e-headercelldiv").appendChild(this.parent.createElement("span",{className:"e-sortnumber",innerHTML:(o+1).toString()}))):this.getGHeaderCell(i[o].field)&&this.getGHeaderCell(i[o].field).getElementsByClassName("e-groupsort").length&&("Ascending"===i[o].direction?ri(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-ascending","e-icon-ascending"],["e-descending","e-icon-descending"]):ri(this.getGHeaderCell(i[o].field).querySelector(".e-groupsort"),["e-descending","e-icon-descending"],["e-ascending","e-icon-ascending"])));for(o=0,a=n.length;o<a;o++)-1!==s.indexOf(n[o])&&t.getColumnHeaderByField(n[o]).setAttribute("aria-grouped","true")},r.prototype.getGHeaderCell=function(t){return this.element&&this.element.querySelector('[ej-mappingname="'+t+'"]')?this.element.querySelector('[ej-mappingname="'+t+'"]').parentElement:null},r.prototype.onGroupAggregates=function(t){var e=this.iterateGroupAggregates(t),i=this.groupGenerator.generateRows(e,{}),n=this.parent.getRowsObject().filter(function(u){return!u.isDataRow}),s=i.filter(function(u){return!u.isDataRow});(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate(["groupFooterTemplate","groupCaptionTemplate","footerTemplate"]);for(var o=0;o<s.length;o++){var a=s[o],l=a.cells.filter(function(u){return u.isDataCell});this.parent.notify("refresh-aggregate-cell",{cells:l,data:a.data,dataUid:n[o]?n[o].uid:""})}},r.prototype.iterateGroupAggregates=function(t){var e=t instanceof Array?t:[],i=this.parent.getRowsObject(),n=this.parent.getCurrentViewRecords(),s=[],o=i.map(function(ne){return"delete"===ne.edit&&s.push(ne.data),ne.changes instanceof Object?ne.changes:ne.data}),a=this.parent.getPrimaryKeyFieldNames()[0];o=0===e.length?o:e;var l=n.map(function(ne){var Ee,fe=qe.getObject(a,ne);return o.some(function(ie){return Ee=ie,fe===qe.getObject(a,ie)})?Ee:ne});if((!t.type||"cancel"!==t.type)&&s.length>0)for(var u=0;u<s.length;u++){var d=l.indexOf(s[u]);l.splice(d,1)}for(var m=[],v=this.parent.aggregates,C=0;C<v.length;C++)for(var S=v[C],A=0;A<S.columns.length;A++){var _;_={type:S.columns[A].type.toString().toLowerCase(),field:S.columns[A].field},m.push(_)}for(var P,j=this.parent.groupSettings.columns,G=0;G<j.length;G++)P=qe.group(P||l,j[G],m,null,null);return P},r.prototype.updateExpand=function(t){for(var e=t.uid,i=t.isExpand,n=this.parent.getRowsObject(),s=0;s<n.length;s++){var o=n[s];if(o.uid===e||f(e)){o.isExpand=i;for(var a=function(u){var d=n[u],m=void 0;if(d.parentUid!==o.uid&&(m=n.filter(function(v){return v.uid===d.parentUid})[0]),d.parentUid===o.uid?d.visible=o.isExpand:!f(m)&&d.parentUid===m.uid&&(m.isExpand&&!0===m.visible?d.visible=!0:m.isExpand&&!1===m.visible&&(d.visible=!1)),f(e))return"break"},l=s+1;l<n.length&&"break"!==a(l);l++);}}this.parent.notify(Zr,{rows:n,args:{isFrozen:!1,rows:n}})},r}(),xIe=function(){function r(t,e){this.predefinedItems={},this.isSearched=!1,this.items=["Add","Edit","Update","Delete","Cancel","Print","Search","ColumnChooser","PdfExport","ExcelExport","CsvExport","WordExport"],this.parent=t,this.gridID=t.element.id,this.serviceLocator=e,this.addEventListener()}return r.prototype.render=function(){this.l10n=this.serviceLocator.getService("localization");for(var e=this.parent.enableAdaptiveUI,i=["Edit","Delete","Update","Cancel"],n=0,s=["Add","Edit","Update","Delete","Cancel","Print","PdfExport","ExcelExport","WordExport","CsvExport"];n<s.length;n++){var o=s[n],a=o.toLowerCase(),l=a[0].toUpperCase()+a.slice(1);this.predefinedItems[o]={id:this.gridID+"_"+a,prefixIcon:"e-"+a,text:this.l10n.getConstant(l),tooltipText:this.l10n.getConstant(l)},e&&(this.predefinedItems[o].text="",this.predefinedItems[o].visible=-1===i.indexOf(o))}this.predefinedItems.Search={id:this.gridID+"_search",tooltipText:this.l10n.getConstant("Search"),align:"Right",cssClass:"e-search-wrapper",type:"Input"},this.predefinedItems.ColumnChooser={id:this.gridID+"_columnchooser",cssClass:"e-cc e-ccdiv e-cc-toolbar",suffixIcon:"e-columnchooser-btn",text:e?"":this.l10n.getConstant("Columnchooser"),tooltipText:this.l10n.getConstant("Columnchooser"),align:"Right"},"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&(this.predefinedItems.responsiveFilter={id:this.gridID+"_responsivefilter",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resfilter-icon",tooltipText:this.l10n.getConstant("FilterButton")}),this.parent.allowSorting&&(this.predefinedItems.responsiveSort={id:this.gridID+"_responsivesort",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-ressort-icon",tooltipText:this.l10n.getConstant("Sort")})),this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&(this.predefinedItems.responsiveBack={id:this.gridID+"_responsiveback",cssClass:"e-gridresponsiveicons e-icons",suffixIcon:"e-resback-icon",visible:!1}),this.createToolbar()},r.prototype.getToolbar=function(){return this.toolbar.element},r.prototype.destroy=function(){this.toolbar&&!this.toolbar.isDestroyed&&(this.toolbar.element?(this.toolbar.off("render-react-toolbar-template",this.addReactToolbarPortals),this.toolbar.destroy()):(this.parent.destroyTemplate(["toolbarTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),this.unWireEvent(),this.removeEventListener(),this.element.parentNode&&Be(this.element))},r.prototype.bindSearchEvents=function(){this.searchElement=re("#"+this.gridID+"_searchbar",this.element),this.wireEvent(),this.refreshToolbarItems(),this.parent.searchSettings&&this.updateSearchBox()},r.prototype.toolbarCreated=function(t){if(this.element.querySelector(".e-search-wrapper"))if(!this.parent.enableAdaptiveUI||t){var e=this.parent.cssClass?"e-input-group e-search "+this.parent.cssClass:"e-input-group e-search";this.element.querySelector(".e-search-wrapper").innerHTML='<div class="'+e+'" role="search">                    <input id="'+this.gridID+'_searchbar" class="e-input e-search" name="input" type="search"                     placeholder= "'+this.l10n.getConstant("Search")+'"/>                    <span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon e-clear-icon e-clear-icon-hide"                     tabindex="-1" title="'+this.l10n.getConstant("Clear")+'" aria-label= "clear" role= "clear"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search" role= "search"></span>                     </div>'}else this.element.querySelector(".e-search-wrapper").innerHTML='<span id="'+this.gridID+'_clearbutton" class="e-input-group-icon e-icons e-sicon e-clear-icon e-clear-icon-hide"                     tabindex="-1" title="'+this.l10n.getConstant("Clear")+'" aria-label= "clear"></span>                    <span id="'+this.gridID+'_searchbutton" class="e-input-group-icon e-search-icon e-icons"                     tabindex="-1" title="'+this.l10n.getConstant("Search")+'" aria-label= "search"></span>                     </div>';this.bindSearchEvents()},r.prototype.createToolbar=function(){var t=this.getItems();this.toolbar=new mee({items:t,clicked:this.toolbarClickHandler.bind(this),enablePersistence:this.parent.enablePersistence,enableRtl:this.parent.enableRtl,created:this.toolbarCreated.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""}),this.toolbar.isReact=this.parent.isReact,this.toolbar.on("render-react-toolbar-template",this.addReactToolbarPortals,this),this.toolbar.isStringTemplate=!0;var i="viewContainerRef";if(this.parent[i]&&(this.toolbar.registeredTemplate={},this.toolbar[i]=this.parent[i]),this.element=this.parent.createElement("div",{id:this.gridID+"_toolbarItems"}),this.parent.enableAdaptiveUI&&this.element.classList.add("e-res-toolbar"),this.parent.toolbarTemplate)if("string"==typeof this.parent.toolbarTemplate)this.toolbar.appendTo(this.parent.toolbarTemplate),this.element=this.toolbar.element;else{var a=this.parent.element.id+"toolbarTemplate";this.parent.isReact&&"string"!=typeof this.parent.toolbarTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(bl(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate",a,null,null,this.element),this.parent.renderTemplates()):ca(this.element,bl(this.parent.toolbarTemplate)({},this.parent,"toolbarTemplate"))}else this.toolbar.appendTo(this.element);this.parent.element.insertBefore(this.element,this.parent.getHeaderContent());var l=this.element.querySelector(".e-toolbar-left"),h=this.element.querySelector(".e-toolbar-center"),u=this.element.querySelector(".e-toolbar-right"),d=this.element.querySelector(".e-toolbar-items"),m=this.element,_=m?m.clientWidth:0;((l?l.clientWidth:0)>_||(h?h.clientWidth:0)>_||(u?u.clientWidth:0)>_||(d?d.clientWidth:0)>_)&&this.toolbar.refreshOverflow()},r.prototype.addReactToolbarPortals=function(t){this.parent.isReact&&t&&(this.parent.portals=this.parent.portals.concat(t),this.parent.renderTemplates())},r.prototype.renderResponsiveSearch=function(t){t?(this.toolbarCreated(!0),this.refreshResponsiveToolbarItems(vC.isSearch),this.searchElement=re("#"+this.gridID+"_searchbar",this.element),pe(this.searchElement,"e-toolbar-right").classList.add("e-responsive-right"),this.parent.searchSettings&&this.updateSearchBox(),this.searchBoxObj.searchFocus({target:this.searchElement}),this.searchElement.focus()):this.refreshResponsiveToolbarItems(vC.isInitial)},r.prototype.refreshResponsiveToolbarItems=function(t){if(t===vC.isInitial){for(var e=this.parent.element.id,i=[e+"_edit",e+"_delete"],n=this.parent.getSelectedRowIndexes(),s=[e+"_responsiveback",e+"_update",e+"_cancel"],o=0,a=this.toolbar.items;o<a.length;o++)(h=this.toolbar.element.querySelector((l=a[o]).template.length?l.template:"#"+l.id))&&(i.indexOf(l.id)>-1?n.length?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"):-1===s.indexOf(l.id)?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"));this.searchElement&&(pe(this.searchElement,"e-toolbar-right").classList.remove("e-responsive-right"),this.toolbarCreated(!1),this.unWireEvent(),this.searchElement=void 0)}if(t===vC.isSearch){i=[this.parent.element.id+"_responsiveback",this.parent.element.id+"_search"];for(var d=0,m=this.toolbar.items;d<m.length;d++){var l,h;(h=this.toolbar.element.querySelector("#"+(l=m[d]).id))&&(i.indexOf(l.id)>-1?h.parentElement.classList.remove("e-hidden"):h.parentElement.classList.add("e-hidden"))}}},r.prototype.refreshToolbarItems=function(t){var e=this.parent,i=[],n=[],s=e.editSettings,o=e.currentViewData&&e.currentViewData.length;s.allowAdding?i.push(this.gridID+"_add"):n.push(this.gridID+"_add"),s.allowEditing&&o?i.push(this.gridID+"_edit"):n.push(this.gridID+"_edit"),s.allowDeleting&&o?i.push(this.gridID+"_delete"):n.push(this.gridID+"_delete"),"Batch"===e.editSettings.mode?e.element.getElementsByClassName("e-updatedtd").length&&(s.allowAdding||s.allowEditing)?(i.push(this.gridID+"_update"),i.push(this.gridID+"_cancel")):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")):e.isEdit&&(s.allowAdding||s.allowEditing)?(i=[this.gridID+"_update",this.gridID+"_cancel"],n=[this.gridID+"_add",this.gridID+"_edit",this.gridID+"_delete"]):(n.push(this.gridID+"_update"),n.push(this.gridID+"_cancel")),this.enableItems(i,!0),this.enableItems(n,!1)},r.prototype.getItems=function(){var t=[],e=this.parent.toolbar||[];if("string"==typeof this.parent.toolbar)return[];"Vertical"===this.parent.rowRenderingMode&&(this.parent.allowFiltering&&"FilterBar"!==this.parent.filterSettings.type&&t.push(this.getItemObject("responsiveFilter")),this.parent.allowSorting&&t.push(this.getItemObject("responsiveSort")));for(var i=0,n=e;i<n.length;i++){var s=n[i];switch(typeof s){case"number":t.push(this.getItemObject(this.items[s]));break;case"string":t.push(this.getItemObject(s));break;default:t.push(this.getItem(s))}}return this.parent.enableAdaptiveUI&&this.parent.toolbar&&this.parent.toolbar.indexOf("Search")>-1&&t.push(this.getItemObject("responsiveBack")),t},r.prototype.getItem=function(t){var e=this.predefinedItems[t.text];return e?he(e,e,t):t},r.prototype.getItemObject=function(t){return this.predefinedItems[t]||{text:t,id:this.gridID+"_"+t}},r.prototype.enableItems=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=re("#"+n[i],this.element);o&&this.toolbar.enableItems(o.parentElement,e)}},r.prototype.toolbarClickHandler=function(t){var e=this,i=this.parent,n=this.gridID;he(t,{cancel:!1});var o=t.originalEvent;i.trigger("toolbarClick",t,function(a){if(a.originalEvent=a.originalEvent?a.originalEvent:o,!a.cancel)switch(!f(a.item)&&a.item.id){case n+"_print":i.print();break;case n+"_edit":i.startEdit();break;case n+"_update":i.endEdit();break;case n+"_cancel":i.closeEdit();break;case n+"_add":i.addRecord();break;case n+"_delete":i.deleteRecord();break;case n+"_search":a.originalEvent.target.id===n+"_searchbutton"&&e.searchElement?e.search():!i.enableAdaptiveUI||e.searchElement||!a.originalEvent.target.classList.contains("e-search-wrapper")&&a.originalEvent.target.id!==n+"_searchbutton"?a.originalEvent.target.id===n+"_clearbutton"&&e.searchElement&&(e.searchElement.value="",e.sIcon.classList.add("e-clear-icon-hide"),e.isSearched&&(e.parent.search(e.searchElement.value),e.isSearched=!1)):e.renderResponsiveSearch(!0);break;case n+"_columnchooser":var l=e.parent.element.querySelector(".e-ccdiv"),h=l.getBoundingClientRect(),u=l.getBoundingClientRect().left,d=a.originalEvent.target;h=l.getBoundingClientRect().top+l.offsetTop,i.createColumnchooser(u,h,d);break;case n+"_responsivefilter":i.showResponsiveCustomFilter();break;case n+"_responsivesort":i.showResponsiveCustomSort();break;case n+"_responsiveback":e.renderResponsiveSearch(!1)}})},r.prototype.modelChanged=function(t){"edit"===t.module&&this.refreshToolbarItems()},r.prototype.onPropertyChanged=function(t){t.module!==this.getModuleName()||!this.parent.toolbar||(this.element&&Be(this.element),this.render())},r.prototype.keyUpHandler=function(t){13===t.keyCode&&this.search(),this.searchElement&&(this.sIcon=this.searchElement.parentElement.querySelector(".e-clear-icon"),this.searchElement.value.length&&!f(this.sIcon)?this.sIcon.classList.remove("e-clear-icon-hide"):this.sIcon.classList.add("e-clear-icon-hide"))},r.prototype.search=function(){this.isSearched=!0,this.parent.search(this.searchElement.value)},r.prototype.updateSearchBox=function(){this.searchElement&&(this.searchElement.value=this.parent.searchSettings.key)},r.prototype.wireEvent=function(){this.searchElement&&(this.searchBoxObj=new wse(this.searchElement),T.add(this.searchElement,"keyup",this.keyUpHandler,this),this.searchBoxObj.wireEvent()),T.add(this.element,"focusin",this.onFocusIn,this),T.add(this.element,"focusout",this.onFocusOut,this)},r.prototype.unWireEvent=function(){this.searchElement&&(T.remove(this.searchElement,"keyup",this.keyUpHandler),this.searchBoxObj.unWireEvent()),T.remove(this.element,"focusin",this.onFocusIn),T.remove(this.element,"focusout",this.onFocusOut)},r.prototype.onFocusIn=function(t){var e=this.parent.focusModule.currentInfo;e&&e.element&&(z([e.element,e.elementToFocus],["e-focused","e-focus"]),e.element.tabIndex=-1),t.target.tabIndex=0},r.prototype.onFocusOut=function(t){t.target.tabIndex=-1},r.prototype.setFocusToolbarItem=function(t){var e=t.querySelector(".e-btn,.e-input");!e&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.classList.contains("e-search-wrapper")&&(e=t.querySelector("#"+this.gridID+"_searchbutton")),e.focus()},r.prototype.getFocusableToolbarItems=function(){return this.element.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)")},r.prototype.keyPressedHandler=function(t){if(t.target&&pe(t.target,"e-toolbar-item")){var e=pe(t.target,"e-toolbar-item"),i=this.getFocusableToolbarItems();if("tab"===t.action||"shiftTab"===t.action){if("tab"===t.action&&e===i[i.length-1]||"shiftTab"===t.action&&e===i[0])return;for(var n=0;n<i.length;n++)if(e===i[n])return t.preventDefault(),void this.setFocusToolbarItem(i["tab"===t.action?n+1:n-1])}"enter"===t.action&&this.parent.enableAdaptiveUI&&!this.searchElement&&t.target.id===this.gridID+"_searchbutton"&&this.renderResponsiveSearch(!0)}},r.prototype.reRenderToolbar=function(){this.element&&Be(this.element),this.render()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:lO,handler:this.reRenderToolbar},{event:Ba,handler:this.render},{event:Nr,handler:this.onPropertyChanged},{event:Ha,handler:this.updateSearchBox.bind(this)},{event:zo,handler:this.refreshToolbarItems},{event:qv,handler:this.refreshToolbarItems},{event:Ha,handler:this.modelChanged},{event:ph,handler:this.refreshToolbarItems},{event:sl,handler:this.removeResponsiveSearch},{event:pG,handler:this.reRenderToolbar},{event:dn,handler:this.destroy},{event:Cs,handler:this.keyPressedHandler}],uo(this.parent,this.evtHandlers,!0,this),this.rowSelectedFunction=this.rowSelected.bind(this),this.rowDeSelectedFunction=this.rowSelected.bind(this),this.parent.addEventListener(TD,this.rowSelectedFunction),this.parent.addEventListener(kV,this.rowDeSelectedFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(uo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(TD,this.rowSelectedFunction),this.parent.removeEventListener(kV,this.rowDeSelectedFunction))},r.prototype.removeResponsiveSearch=function(t){var e=t.target,i=e.classList.contains("e-search-icon")||e.classList.contains("e-search-wrapper");this.parent.enableAdaptiveUI&&!i&&this.searchElement&&!pe(t.target,"e-res-toolbar")&&this.renderResponsiveSearch(!1)},r.prototype.rowSelected=function(){this.parent.enableAdaptiveUI&&this.refreshResponsiveToolbarItems(vC.isInitial)},r.prototype.getModuleName=function(){return"toolbar"},r}(),roe=function(){function r(t){this.parent=t}return r.prototype.addNew=function(t,e){this.isEdit=!1;var i,n=function tIe(r){var t;return r.isFrozenGrid()&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getMovableHeaderTbody():r.getMovableContentTbody()),t}(this.parent),s=function iIe(r){var t;return r.getFrozenMode()===Zt&&(t=r.frozenRows&&"Top"===r.editSettings.newRowPosition?r.getFrozenRightHeaderTbody():r.getFrozenRightContentTbody()),t}(this.parent),o=this.parent.isFrozenGrid(),a=o&&this.parent.enableColumnVirtualization&&e.isScroll;if(i=this.parent.frozenRows&&"Top"===this.parent.editSettings.newRowPosition?a?this.parent.getMovableHeaderTbody():this.parent.getHeaderTable().querySelector(rt):a?this.parent.getMovableContentTbody():this.parent.getContentTable().querySelector(rt),e.row=this.parent.createElement("tr",{className:"e-row e-addedrow",attrs:{role:"row"}}),i.querySelector(".e-emptyrow")){var l=i.querySelector(".e-emptyrow");if(l.parentNode.removeChild(l),o&&!a){var h=this.parent.getContent().querySelector("."+zn).querySelector(rt);if(h.firstElementChild.parentNode.removeChild(h.firstElementChild),this.parent.getFrozenMode()===Zt){var u=this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(rt);u.firstElementChild.parentNode.removeChild(u.firstElementChild)}}}if("Top"===this.parent.editSettings.newRowPosition?i.insertBefore(e.row,i.firstChild):i.appendChild(e.row),e.row.appendChild(this.getEditElement(t,!1,void 0,e,!0)),this.parent.editModule.checkLastRow(e.row,e),o&&!a){var d=this.renderMovableform(e.row,e);if("Top"===this.parent.editSettings.newRowPosition?n.insertBefore(d,n.firstChild):n.appendChild(d),e.row.querySelector(".e-normaledit").setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),d.querySelector(".e-normaledit").setAttribute("colspan",""+(this.parent.getVisibleColumns().length-this.parent.getVisibleFrozenColumns())),s){var m=this.renderFrozenRightForm(e.row,e);"Top"===this.parent.editSettings.newRowPosition?s.insertBefore(m,s.firstChild):s.appendChild(m);var v=this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount();e.row.querySelector(".e-normaledit").setAttribute("colspan",v+""),m.querySelector(".e-normaledit").setAttribute("colspan",""+this.parent.getFrozenRightColumnsCount())}"auto"===this.parent.height&&this.parent.notify(nO,{})}},r.prototype.renderFrozenRightForm=function(t,e){var i=t.cloneNode(!0),n=e.frozenRightForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderRightFrozen(t,i),i.querySelector(Ti).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ti).innerHTML,i)},r.prototype.renderMovableform=function(t,e){var i=t.cloneNode(!0),n=e.movableForm=i.querySelector("form");return this.parent.editSettings.template?(n.innerHTML="",this.appendChildren(n,e.rowData,!1),i):(this.renderMovable(t,i),i.querySelector(Ti).innerHTML=this.parent.getHeaderContent().querySelector("."+Zn).querySelector(Ti).innerHTML,i)},r.prototype.updateFreezeEdit=function(t,e){return e=e.concat([].slice.call(this.getFreezeRow(t).querySelectorAll("td.e-rowcell"))),this.parent.getFrozenMode()===Zt&&(e=e.concat([].slice.call(this.getFreezeRightRow(t).querySelectorAll("td.e-rowcell")))),e},r.prototype.getFreezeRightRow=function(t){var e=parseInt(t.getAttribute(Ai),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getFrozenHeaderTbody(),s=this.parent.getFrozenRightHeaderTbody(),o=this.parent.getFrozenRightContentTbody();return i.contains(t)||n.contains(t)?this.parent.getFrozenRightRowByIndex(e):o.contains(t)||s.contains(t)?this.parent.getRowByIndex(e):t},r.prototype.getFreezeRow=function(t){if(this.parent.isFrozenGrid()){var e=parseInt(t.getAttribute(Ai),10),i=this.parent.getFrozenLeftContentTbody(),n=this.parent.getMovableContentTbody(),s=this.parent.getFrozenHeaderTbody(),o=this.parent.getMovableHeaderTbody();if(i.contains(t)||s.contains(t))return this.parent.getMovableRowByIndex(e);if(n.contains(t)||o.contains(t))return this.parent.getRowByIndex(e)}return t},r.prototype.update=function(t,e){this.isEdit=!0;var i=e.isCustomFormValidation,n=e.isScroll;!n&&(U(e.row,"."+zn)||U(e.row,"."+Zn))&&(e.row=this.getFreezeRow(e.row)),(U(e.row,".e-frozen-right-content")||U(e.row,".e-frozen-right-header"))&&(e.row=this.getFreezeRightRow(e.row));var s=this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&n,o=[].slice.call(e.row.querySelectorAll("td.e-rowcell"));e.row.innerHTML="",!s&&!i&&(o=this.updateFreezeEdit(e.row,o)),e.row.appendChild(this.getEditElement(t,!0,o,e,!0)),e.row.classList.add(Va),this.parent.editModule.checkLastRow(e.row,e),!s&&!i&&this.refreshFreezeEdit(e.row,e)},r.prototype.refreshFreezeEdit=function(t,e){var i=t.firstChild;this.parent.getVisibleFrozenColumns()&&this.parent.editSettings.template&&(i.querySelector(Ti).innerHTML=this.parent.getHeaderContent().querySelector("."+Zd).querySelector(Ti).innerHTML);var n,s,o=parseInt(t.getAttribute(Ai),10);if(this.parent.isFrozenGrid()){o<this.parent.frozenRows?(s=this.parent.getHeaderContent(),n="."+Zd):(s=this.parent.getContent(),n="."+tc);var a=i.cloneNode(!0),l=i.cloneNode(!0),h=e.movableForm=a.querySelector("form");this.parent.editSettings.template&&this.refreshEditForm(h,e.rowData);var u=void 0,d=void 0;s.querySelector(n).contains(t)?(u=this.parent.getMovableRowByIndex(o),this.updateFrozenCont(u,i,a),this.parent.getFrozenMode()===Zt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),d=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(d,i,l))):(u=this.parent.getRowByIndex(o),this.updateFrozenCont(u,a,i),this.parent.getFrozenMode()===Zt&&(e.frozenRightForm=l.querySelector("form"),this.refreshEditForm(e.frozenRightForm,e.rowData),d=this.parent.getFrozenRightRowByIndex(o),this.updateFrozenRightCont(d,l,i))),u.appendChild(a),u.classList.add(Va),this.parent.getFrozenMode()===Zt&&(d.appendChild(l),d.classList.add(Va),f2(e.frozenRightForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))),f2(e.movableForm.querySelector("td:not(.e-hide)"),e.form.querySelector("td:not(.e-hide)"))}},r.prototype.refreshEditForm=function(t,e){this.parent.editSettings.template&&(t.innerHTML="",this.appendChildren(t,e,!1))},r.prototype.updateFrozenRightCont=function(t,e,i){t.innerHTML="",this.renderRightFrozen(e,i),i.querySelector(Ti).innerHTML=this.parent.getHeaderContent().querySelector(".e-frozen-right-header").querySelector(Ti).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()-this.parent.getFrozenRightColumnsCount()+""),i.setAttribute("colspan",this.parent.getFrozenRightColumnsCount()+"")},r.prototype.updateFrozenCont=function(t,e,i){t.innerHTML="",this.renderMovable(e,i),i.querySelector(Ti).innerHTML=this.parent.getHeaderContent().querySelector("."+Zn).querySelector(Ti).innerHTML,e.setAttribute("colspan",this.parent.getVisibleFrozenColumns()+""),i.setAttribute("colspan",this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-this.parent.getVisibleFrozenColumns()+"")},r.prototype.renderRightFrozen=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=0,s=0;s<i.length;s++,n++)if(i[s].getFreezeTableName()===or){var o=n-this.parent.getMovableColumnsCount();e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[o])),n--}},r.prototype.renderMovable=function(t,e){e.querySelector("tr").innerHTML="";for(var i=this.parent.getColumns(),n=this.parent.isRowDragable()?1:0,s=0;s<i.length;s++,n++)"movable"===i[s].getFreezeTableName()&&(e.querySelector("tr").appendChild(t.querySelector("tr").removeChild(t.querySelector("tr").children[n])),n--)},r.prototype.getEditElement=function(t,e,i,n,s){var o=this.parent,a=0,l=f(o.detailTemplate)&&f(o.childGrid)?0:1;o.allowGrouping&&(a=o.groupSettings.columns.length);var h=this.parent.createElement("td",{className:"e-editcell e-normaledit",attrs:{colspan:(o.getCurrentVisibleColumns(this.parent.enableColumnVirtualization).length-o.getVisibleFrozenColumns()+this.parent.getIndentCount()).toString()}}),u=n.form=this.parent.createElement("form",{id:o.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template)return this.appendChildren(u,n.rowData,s),h.appendChild(u),h;var d=this.parent.createElement("table",{className:"e-table e-inline-edit",attrs:{cellspacing:"0.25",role:"grid"}});d.appendChild(o.getContentTable().querySelector(Ti).cloneNode(!0));var m=this.parent.createElement(rt,{attrs:{role:"rowgroup"}}),v=this.parent.createElement("tr",{attrs:{role:"row"}}),C=0;for(l&&v.insertBefore(this.parent.createElement("td",{className:"e-detailrowcollapse"}),v.firstChild),o.isRowDragable()&&v.appendChild(this.parent.createElement("td",{className:"e-dragindentcell"}));C<a;)v.appendChild(this.parent.createElement("td",{className:"e-indentcell"})),C++;var S=0;C=0;for(var A=o.isFrozenGrid()&&o.enableColumnVirtualization&&n.isScroll,_=n.isCustomFormValidation?this.parent.columnModel:o.getColumns();e&&S<i.length&&C<_.length||C<_.length;){var M=e?i[S].getAttribute("colspan"):null,P=_[C];if(A&&"movable"!==P.getFreezeTableName()||n.isCustomFormValidation&&(P.commands||P.commandsTemplate||!P.field))C++;else{var B=this.parent.createElement("td",{className:tn,attrs:{style:"text-align:"+(P.textAlign?P.textAlign:""),colspan:M||""}});P.visible?(B.appendChild(t[P.uid]),"Vertical"===this.parent.rowRenderingMode&&(kf(B,{"data-cell":P.headerText}),0===C&&B.classList.add("e-responsive-editcell")),"booleanedit"===P.editType?B.classList.add("e-boolcell"):(P.commands||P.commandsTemplate)&&N([B],"e-unboundcell")):B.classList.add("e-hide"),v.appendChild(B),C=M?C+parseInt(M,10):C+1,S++}}return m.appendChild(v),d.appendChild(m),u.appendChild(d),h.appendChild(u),h},r.prototype.removeEventListener=function(){},r.prototype.appendChildren=function(t,e,i){var n=he({},e,{isAdd:!this.isEdit,isFrozen:i},!0),s=this.parent.element.id+"editSettingsTemplate";this.parent.isReact&&"string"!=typeof this.parent.editSettings.template?(this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s,null,null,t),this.parent.renderTemplates()):ca(t,this.parent.getEditTemplate()(n,this.parent,"editSettingsTemplate",s))},r}(),LIe=function(){function r(t){this.parent=t}return r.prototype.update=function(t,e){if(this.parent.isReact&&e.columnObject&&e.columnObject.template){var i=e.cell.parentElement,n=e.cell.cloneNode(!0);i.insertBefore(n,e.cell),n.focus(),e.cell.remove(),e.cell=n}e.cell.innerHTML="",e.cell.appendChild(this.getEditElement(t,e)),e.cell.classList.remove("e-ellipsistooltip"),e.cell.classList.add("e-editedbatchcell"),ri(e.row,[Va,"e-batchrow"],[])},r.prototype.getEditElement=function(t,e){var n=this.parent.createElement("form",{id:this.parent.element.id+"EditForm",className:"e-gridform"});return n.appendChild(t[e.columnObject.uid]),"booleanedit"===e.columnObject.editType&&e.cell.classList.add("e-boolcell"),e.columnObject.editType||e.cell.classList.add("e-inputbox"),n},r.prototype.removeEventListener=function(){},r}(),OIe=function(){function r(t,e){this.parent=t,this.serviceLocator=e,!this.parent.isDestroyed&&(this.parent.on(NV,this.destroy,this),this.parent.on(dn,this.destroy,this))}return r.prototype.setLocaleObj=function(){this.l10n=this.serviceLocator.getService("localization")},r.prototype.addNew=function(t,e){this.isEdit=!1,this.createDialog(t,e)},r.prototype.update=function(t,e){this.isEdit=!0,this.createDialog(t,e)},r.prototype.createDialogHeader=function(t){var e=this.parent;if(this.parent.enableAdaptiveUI){var n=new Cse(this.parent,this.serviceLocator);return n.action=this.isEdit?rr.isEdit:rr.isAdd,n.renderResponsiveHeader(void 0,t)}return e.editSettings.headerTemplate?this.getDialogEditTemplateElement("HeaderTemplate",t):this.isEdit?this.l10n.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.l10n.getConstant("AddFormTitle")},r.prototype.createDialog=function(t,e){var i=this.parent;this.dialog=this.parent.createElement("div",{id:i.element.id+"_dialogEdit_wrapper",styles:"width: auto"}),i.enableAdaptiveUI&&this.dialog.classList.add("e-responsive-dialog"),i.element.appendChild(this.dialog),this.setLocaleObj(),this.dialog.setAttribute("aria-label",this.l10n.getConstant("DialogEdit")),this.dialogObj=new _d(he({header:this.createDialogHeader(e),isModal:!0,visible:!0,cssClass:this.parent.cssClass?"e-edit-dialog "+this.parent.cssClass:"e-edit-dialog",content:this.getEditElement(t,e),showCloseIcon:!0,allowDragging:!0,close:this.dialogClose.bind(this),created:this.dialogCreated.bind(this),closeOnEscape:!0,width:i.editSettings.template?"auto":"330px",target:e.target?e.target:document.body,animationSettings:{effect:"None"},footerTemplate:i.editSettings.footerTemplate?this.getDialogEditTemplateElement("FooterTemplate",e):null,buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.l10n.getConstant("SaveButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}]},i.editSettings.dialog&&i.editSettings.dialog.params||{})),e.dialog=this.dialogObj,this.dialogObj.isStringTemplate=!0,this.renderResponsiveDialog(),this.dialogObj.appendTo(this.dialog),function SO(r,t){r.classList.contains("e-bigger")&&t.classList.add("e-bigger")}(this.parent.element,this.dialogObj.element.parentElement),i.enableAdaptiveUI&&this.dialogObj.show(!0)},r.prototype.dialogCreated=function(){jse(this.parent)},r.prototype.renderResponsiveDialog=function(){var t=this;this.parent.enableAdaptiveUI&&(this.parent.adaptiveDlgTarget&&(this.dialogObj.target=this.parent.adaptiveDlgTarget),this.dialogObj.buttons=[{}],this.dialogObj.showCloseIcon=!0,this.dialogObj.visible=!1,this.dialogObj.width="100%",this.dialogObj.open=function(){t.dialogObj.element.style.maxHeight="100%"})},r.prototype.btnClick=function(t){this.l10n.getConstant("CancelButton").toLowerCase()===t.target.innerText.trim().toLowerCase()?this.dialogClose():this.parent.endEdit()},r.prototype.dialogClose=function(){this.parent.closeEdit()},r.prototype.destroy=function(t){for(var e=["template","headerTemplate","footerTemplate"],i=0;i<e.length;i++)if(this.parent.editSettings[e[i]]){e[i].charAt(0).toUpperCase(),e[i].slice(1);Pb()}this.parent.notify(V8,{}),this.parent.isEdit=!1,this.parent.notify(qv,{}),this.dialog&&!this.dialogObj.isDestroyed&&(this.dialogObj.destroy(),Be(this.dialog))},r.prototype.getDialogEditTemplateElement=function(t,e){var i=this.parent.createElement("div",{className:"e-dialog"+t}),n=he({},e.rowData,{isAdd:!this.isEdit},!0),s=this.parent.element.id+"editSettings"+t;return ca(i,("HeaderTemplate"===t?this.parent.getEditHeaderTemplate():this.parent.getEditFooterTemplate())(n,this.parent,"editSettings"+t,s)),Pb(),i},r.prototype.getEditElement=function(t,e){var n=this.parent,s=this.parent.createElement("div",{className:this.isEdit?Va:"e-insertedrow"}),o=e.form=this.parent.createElement("form",{id:n.element.id+"EditForm",className:"e-gridform"});if(this.parent.editSettings.template){var a=this.parent.element.id+"editSettingsTemplate",l=he({},e.rowData,{isAdd:!this.isEdit},!0);return this.parent.isReact&&"string"!=typeof this.parent.editSettings.template||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a,null,null,o),this.parent.renderTemplates()):ca(o,this.parent.getEditTemplate()(l,this.parent,"editSettingsTemplate",a)),Pb(),s.appendChild(o),s}for(var m=this.parent.createElement("table",{className:sr,attrs:{cellspacing:"6px",role:"grid"}}),v=this.parent.createElement(rt,{attrs:{role:"rowgroup"}}),C=n.getColumns(),S=0;S<C.length;S++)if(!(this.parent.editModule.checkColumnIsGrouped(C[S])||C[S].commands||C[S].commandsTemplate||"checkbox"===C[S].type)){var A=this.parent.createElement("tr",{attrs:{role:"row"}}),_=this.parent.createElement("td",{className:tn,attrs:{style:"text-align:"+(this.parent.enableRtl?"right":"left")+";width:190px"}});t[C[S].uid].classList.remove("e-input"),_.appendChild(t[C[S].uid]),A.appendChild(_),v.appendChild(A)}return m.appendChild(v),o.appendChild(m),s.appendChild(o),s},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(NV,this.destroy),this.parent.off(dn,this.destroy))},r}(),PIe=function(){function r(t,e){this.editType={Inline:roe,Normal:roe,Batch:LIe,Dialog:OIe},this.parent=t,this.serviceLocator=e,this.renderer=new this.editType[this.parent.editSettings.mode](t,e),this.focus=e.getService("focus")}return r.prototype.addNew=function(t){this.renderer.addNew(this.getEditElements(t),t),this.convertWidget(t)},r.prototype.update=function(t){this.renderer.update(this.getEditElements(t),t),t.isCustomFormValidation||(this.parent.notify("edit-form",t),this.convertWidget(t))},r.prototype.convertWidget=function(t){var i,n,o,a,e=this.parent,l=e.isFrozenGrid(),h="Right"===e.getFrozenMode()&&"Normal"===e.editSettings.mode?1:0,u="Dialog"===e.editSettings.mode?re("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document):e.element.getElementsByClassName("e-gridform")[h],d=l&&this.parent.enableColumnVirtualization&&t.isScroll;if(l&&"Normal"===e.editSettings.mode){var m=parseInt(t.row.getAttribute(Ai),10);e.frozenRows&&("add"===t.requestType&&"Top"===e.editSettings.newRowPosition||m<e.frozenRows)?(o=e.element.querySelector("."+Zn).querySelector(".e-gridform"),this.parent.getFrozenMode()===Zt&&(a=t.frozenRightForm)):(o=e.element.querySelector("."+zn).querySelector(".e-gridform"),this.parent.getFrozenMode()===Zt&&(a=t.frozenRightForm))}for(var C=0,S="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];C<S.length;C++){var A=S[C];if(!d||"movable"===A.getFreezeTableName()){if(this.parent.editSettings.template&&!f(A.field)){var _=he({},t);_.element=u.querySelector("[name="+To(A.field)+"]"),f(_.element)&&l&&(_.element=o.querySelector("[name="+To(A.field)+"]")),"string"==typeof A.edit.write?vs(A.edit.write,window)(_):A.edit.write(_);continue}if(!this.parent.editModule.checkColumnIsGrouped(A)&&!A.commands){A.valueAccessor(A.field,t.rowData,A),n=o&&"movable"===A.getFreezeTableName()&&"Normal"===e.editSettings.mode?o.querySelector("[e-mappinguid="+A.uid+"]"):a&&A.getFreezeTableName()===or&&"Normal"===e.editSettings.mode?a.querySelector("[e-mappinguid="+A.uid+"]"):u.querySelector("[e-mappinguid="+A.uid+"]");var M=A.edit.write;f(n)||("string"==typeof M?(M=vs(M,window))({rowData:t.rowData,element:n,column:A,requestType:t.requestType,row:t.row,foreignKeyData:A.isForeignColumn()&&vs(A.field,t.foreignKeyData)}):A.edit.write({rowData:t.rowData,element:n,column:A,requestType:t.requestType,row:t.row,foreignKeyData:A.isForeignColumn()&&vs(A.field,t.foreignKeyData)}),!i&&!n.getAttribute("disabled")&&!pe(n,"e-checkbox-disabled")&&(this.focusElement(n,t.type),i=!0))}}}if(l&&!this.parent.allowTextWrap&&("add"===t.requestType||"beginEdit"===t.requestType)&&"Dialog"!==this.parent.editSettings.mode&&!f(u)&&!f(o)){var P=o.querySelector("tr").children[0],B=u.querySelector("tr").children[0];B.offsetHeight>P.offsetHeight?(P.style.height=B.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=B.offsetHeight+"px")):(B.style.height=P.offsetHeight+"px",a&&(o.querySelector("tr").children[0].style.height=P.offsetHeight+"px"))}},r.prototype.focusElement=function(t,e){var i=this.parent.element.querySelector(".e-edit-checkselect");!f(i)&&i.nextElementSibling&&i.nextElementSibling.classList.add("e-focus"),"Batch"===this.parent.editSettings.mode?this.focus.onClick({target:U(t,"td")},!0):!this.parent.enableVirtualization||"Normal"!==this.parent.editSettings.mode||this.parent.enableVirtualization&&"Bottom"===this.parent.editSettings.newRowPosition&&pe(t,Bl)?t.focus():t.focus({preventScroll:!0}),t.classList.contains("e-defaultcell")&&t.setSelectionRange(t.value.length,t.value.length)},r.prototype.getEditElements=function(t){var e=this.parent,i={},n="Batch"!==e.editSettings.mode?e.getColumns():[e.getColumnByField(t.columnName)];if(t.isCustomFormValidation&&(n=this.parent.columnModel),this.parent.editSettings.template)return{};for(var s=e.isFrozenGrid()&&e.enableColumnVirtualization&&t.isScroll,o=0,a=n.length;o<a;o++){var l=n[o];if(!(this.parent.editModule.checkColumnIsGrouped(l)||s&&"movable"!==n[o].getFreezeTableName()||t.isCustomFormValidation&&(l.commands||l.commandsTemplate||!l.field))){if(l.commands||l.commandsTemplate){var h=this.serviceLocator.getService("cellRendererFactory"),u=new Xd(this.parent),d=h.getCellRenderer(Ot.CommandColumn),v=u.generateRows(t.rowData)[0].cells.filter(function(ie){return ie.rowID}),C=d.render(v[o],t.rowData,{index:t.row?t.row.getAttribute(Ai):0},this.parent.enableVirtualization);(S=C.firstElementChild).setAttribute("textAlign",C.getAttribute("textAlign")),i[l.uid]=S;continue}var A=l.valueAccessor(l.field,t.rowData,l),_={column:l,value:A,type:t.requestType,data:t.rowData},M=l.edit.create,P=void 0;if(l.editTemplate){P=this.parent.createElement("span",{attrs:{"e-mappinguid":l.uid}});var B=this.parent.element.id+l.uid+"editTemplate",j=d2({},t.rowData,{column:l});this.parent.isReact&&"string"!=typeof l.editTemplate||this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact?(l.getEditTemplate()(he({index:t.rowIndex},j),this.parent,"editTemplate",B,null,null,P),this.parent.renderTemplates()):ca(P,l.getEditTemplate()(he({index:t.rowIndex},j),this.parent,"editTemplate",B))}else{var S;"string"==typeof(P="string"==typeof M?(M=vs(M,window))(_):l.edit.create(_))&&((S=this.parent.createElement("div")).innerHTML=P,P=S.firstChild);var Ee="input"!==P.tagName&&P.querySelectorAll("input").length,Pe=To(l.field);ze(Ee?P.querySelector("input"):P,{name:Pe,"e-mappinguid":l.uid,id:e.element.id+Pe}),ri(P,["e-input","e-field"],[]),"Right"===l.textAlign&&P.classList.add("e-ralign"),((l.isPrimaryKey||l.isIdentity)&&"beginEdit"===t.requestType||l.isIdentity&&"add"===t.requestType)&&P.setAttribute("disabled","")}i[l.uid]=P}}return i},r.prototype.destroy=function(){this.renderer.removeEventListener()},r}(),qg=function(){function r(t){this.parent=t}return r.prototype.create=function(t){return xO(this.parent,t.column,"e-field",{type:"text"})},r.prototype.read=function(t){return t.ej2_instances[0].value},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.removeEventHandler&&this.removeEventHandler(),this.obj.destroy())},r}(),MIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),FIe=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.activeClasses=["e-selectionbackground","e-active"],e}return MIe(t,r),t.prototype.create=function(e){var n="e-field e-boolcell";return"checkbox"===e.column.type&&(n="e-field e-boolcell e-edit-checkselect"),this.removeEventHandler=this.removeEventListener,xO(this.parent,e.column,n,{type:"checkbox",value:e.value})},t.prototype.read=function(e){return e.checked},t.prototype.write=function(e){var i,n;if(f(e.row)||(i=e.row.querySelector(".e-edit-checkselect")),vs(e.column.field,e.rowData)&&(n=JSON.parse(vs(e.column.field,e.rowData).toString().toLowerCase())),!f(i)&&"checkbox"===e.column.type){if(this.editType=this.parent.editSettings.mode,this.editRow=e.row,"add"!==e.requestType){var s=this.parent.getRowObjectFromUID(e.row.getAttribute("data-uid"));n=!!s&&s.isSelected}Gc.apply(void 0,[[].slice.call(e.row.getElementsByClassName(tn)),n].concat(this.activeClasses))}this.obj=new dX(he({label:"Dialog"!==this.parent.editSettings.mode?" ":e.column.headerText,checked:n,disabled:!Ug(e.column,e.requestType,e.element),enableRtl:this.parent.enableRtl,cssClass:this.parent.cssClass?this.parent.cssClass:""},e.column.edit.params)),this.addEventListener(),this.obj.appendTo(e.element)},t.prototype.addEventListener=function(){this.cbChange=this.checkBoxChange.bind(this),this.obj.addEventListener("change",this.cbChange)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||this.obj.removeEventListener("change",this.cbChange)},t.prototype.checkBoxChange=function(e){if(this.editRow&&"Dialog"!==this.editType){var i=!1;e.checked?this.editRow.setAttribute("aria-selected",(i=!0).toString()):this.editRow.removeAttribute("aria-selected"),Gc.apply(void 0,[[].slice.call(this.editRow.getElementsByClassName(tn)),i].concat(this.activeClasses))}},t}(qg),NIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),BIe=function(r){function t(e){var i=r.call(this)||this;return i.parent=e,i.flag=!1,i.removeEventHandler=i.removeEventListener,i}return NIe(t,r),t.prototype.write=function(e){var i="Dialog"!==this.parent.editSettings.mode;this.column=e.column;var n=new kn(e.column.field,"notequal",null,!0,!1),s={};if(e.column.edit.params)for(var o=Object.keys(e.column.edit.params),a=0;a<o.length;a++)s[o[a]]="query"===o[a]?e.column.edit.params[o[a]].clone():e.column.edit.params[o[a]];this.obj=new gS(he({dataSource:this.parent.dataSource instanceof Qe?this.parent.dataSource:new Qe(this.parent.dataSource),query:(new ii).where(n).select(e.column.field),enabled:Ug(e.column,e.requestType,e.element),fields:{value:e.column.field},value:vs(e.column.field,e.rowData),enableRtl:this.parent.enableRtl,placeholder:i?"":e.column.headerText,popupHeight:"200px",floatLabelType:i?"Never":"Always",sortOrder:"Ascending",cssClass:this.parent.cssClass?this.parent.cssClass:null,close:this.dropDownClose.bind(this)},s)),this.parent.enableVirtualization&&(this.obj.dataSource=e.column.isForeignColumn()?[e.foreignKeyData[0]]:[e.rowData]),this.addEventListener(),this.obj.query.params=this.parent.query.params,this.obj.appendTo(e.element),e.element.setAttribute("name",To(e.column.field))},t.prototype.dropDownClose=function(e){},t.prototype.addEventListener=function(){this.ddCreated=this.dropdownCreated.bind(this),this.ddOpen=this.dropDownOpen.bind(this),this.ddBeforeOpen=this.dropdownBeforeOpen.bind(this),this.ddComplete=this.ddActionComplete.bind(this),this.obj.addEventListener(JV,this.ddCreated),this.obj.addEventListener("open",this.ddOpen),this.obj.addEventListener(gse,this.ddBeforeOpen),this.obj.addEventListener(zi,this.ddComplete)},t.prototype.removeEventListener=function(){this.obj.isDestroyed||(this.obj.removeEventListener(JV,this.ddCreated),this.obj.removeEventListener("open",this.ddOpen),this.obj.removeEventListener(gse,this.ddBeforeOpen),this.obj.removeEventListener(zi,this.ddComplete))},t.prototype.dropdownCreated=function(e){this.flag=!0},t.prototype.dropdownBeforeOpen=function(){this.parent.enableVirtualization&&(this.obj.dataSource=this.column.isForeignColumn()?this.column.dataSource instanceof Qe?this.column.dataSource:new Qe(this.column.dataSource):this.parent.dataSource instanceof Qe?this.parent.dataSource:new Qe(this.parent.dataSource))},t.prototype.ddActionComplete=function(e){e.result=qe.distinct(e.result,this.obj.fields.value,!0),this.flag&&this.column.dataSource&&!(this.column.edit.params&&this.column.edit.params.ddEditedData)&&("result"in this.column.dataSource?this.column.dataSource.result=e.result:this.column.dataSource instanceof Qe&&(this.column.dataSource.dataSource.json=e.result)),this.flag=!1},t.prototype.dropDownOpen=function(e){var i=pe(this.obj.element,"e-dialog");if("Dialog"===this.parent.editSettings.mode&&!f(i)){var n=re("#"+i.id,document).ej2_instances[0];e.popup.element.style.zIndex=(n.zIndex+1).toString()}},t}(qg),HIe=function(){function r(t){this.parent=t}return r.prototype.keyEventHandler=function(t){if(13===t.keyCode||9===t.keyCode){var e=document.createEvent("HTMLEvents");e.initEvent("change",!1,!0),this.dispatchEvent(e)}},r.prototype.create=function(t){return this.instances=new Vr(this.parent.locale),xO(this.parent,t.column,"e-field",{})},r.prototype.read=function(t){return this.obj.value},r.prototype.write=function(t){var e=t.column,i="Dialog"!==this.parent.editSettings.mode;this.obj=new VT(he({value:parseFloat(vs(t.column.field,t.rowData)),enableRtl:this.parent.enableRtl,placeholder:i?"":t.column.headerText,enabled:Ug(t.column,t.requestType,t.element),floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",locale:this.parent.locale,cssClass:this.parent.cssClass?this.parent.cssClass:null},e.edit.params)),t.element.setAttribute("name",To(t.column.field)),this.obj.appendTo(t.element),this.obj.element.addEventListener("keydown",this.keyEventHandler)},r.prototype.destroy=function(){this.obj&&!this.obj.isDestroyed&&(this.obj.element.removeEventListener("keydown",this.keyEventHandler),this.obj.destroy())},r}(),VIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),zIe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return VIe(t,r),t.prototype.create=function(e){var i={type:"text",value:f(e.value)?"":e.value,style:"text-align:"+e.column.textAlign};return xO(this.parent,e.column,"e-field e-input e-defaultcell",i)},t.prototype.read=function(e){return e.value},t.prototype.write=function(e){var i=e.column,n="Dialog"!==this.parent.editSettings.mode;this.obj=new uJ(he({element:e.element,floatLabelType:"Dialog"!==this.parent.editSettings.mode?"Never":"Always",enableRtl:this.parent.enableRtl,enabled:Ug(e.column,e.requestType,e.element),placeholder:n?"":e.column.headerText,cssClass:this.parent.cssClass?this.parent.cssClass:""},i.edit.params)),this.obj.appendTo(e.element)},t}(qg),soe=function(){function r(t,e,i){this.args={},this.currentVirtualData={},this.parent=t,this.renderer=i,this.serviceLocator=e,this.addEventListener()}return r.prototype.clickHandler=function(t){var e=t.target,i=this.parent;(pe(e,Ps)&&pe(pe(e,Ps),"e-grid").id===i.element.id||i.frozenRows&&pe(e,Ms))&&!pe(e,"e-unboundcelldiv")&&(this.rowIndex=pe(e,tn)?parseInt(e.parentElement.getAttribute(Ai),10):-1,i.isEdit&&i.editModule.endEdit())},r.prototype.dblClickHandler=function(t){pe(t.target,tn)&&this.parent.editSettings.allowEditOnDblClick&&this.parent.editModule.startEdit(pe(t.target,vn))},r.prototype.editComplete=function(t){switch(this.parent.isEdit=!1,t.requestType){case"save":(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection)&&"edit"!==t.action&&this.parent.selectRow(0),this.parent.trigger(zi,he(t,{requestType:"save",type:zi}));break;case"delete":this.parent.trigger(zi,he(t,{requestType:"delete",type:zi})),this.parent.isCheckBoxSelection||this.parent.selectRow(this.editRowIndex)}},r.prototype.getEditArgs=function(t,e,i){for(var n=this.parent.getPrimaryKeyFieldNames(),s=[],o=0;o<n.length;o++)s.push(vs(n[o],t));return{primaryKey:n,primaryKeyValue:s,requestType:"beginEdit",rowData:t,rowIndex:this.rowIndex,type:"edit",cancel:!1,foreignKeyData:e&&e.foreignKeyData,target:void 0,isScroll:i}},r.prototype.startEdit=function(t){var e=this,i=this.parent;if(this.rowIndex=this.editRowIndex=parseInt(t.getAttribute(Ai),10),!i.enableVirtualization&&!i.enableInfiniteScrolling||this.parent.element.querySelector('.e-row[data-rowindex="'+this.rowIndex+'"]')){var o={data:void 0,index:this.rowIndex,isScroll:!1};if(this.parent.notify("virtual-scroll-edit-action-begin",o),ws(i)){var a=i.getRowObjectFromUID(t.getAttribute("data-uid"));this.previousData=a.data}else this.previousData||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling?this.parent.enableVirtualization||(this.previousData=he({},{},i.getCurrentViewRecords()[this.rowIndex],!0)):this.previousData=o.data;var l=he({},{},o.data||this.previousData,!0);this.uid=t.getAttribute("data-uid");var h=i.getRowObjectFromUID(this.uid),u=this.getEditArgs(l,h,o.isScroll);u.row=t,u.isScroll?this.inlineEditHandler(u,t):(this.parent.notify(ZV,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),i.trigger("beginEdit",u,function(d){d.type="actionBegin",i.trigger(dr,d,function(m){m.cancel||e.inlineEditHandler(m,t)})}))}},r.prototype.inlineEditHandler=function(t,e){var i=this.parent;i.isEdit=!0,t.row=t.row?t.row:e,"Dialog"!==i.editSettings.mode&&i.clearSelection(),"Dialog"===i.editSettings.mode&&i.selectionModule&&(i.selectionModule.preventFocus=!0,t.row.classList.add("e-dlgeditrow")),this.renderer.update(t),this.uid=e.getAttribute("data-uid"),i.editModule.applyFormValidation(),t.type="actionComplete",i.trigger(zi,t),this.args=t,this.parent.allowTextWrap&&this.parent.notify(cu,{case:"textwrap"})},r.prototype.updateRow=function(t,e){var i=this,n=this.parent;this.editRowIndex=t;var s={requestType:"save",action:"edit",type:dr,data:e,cancel:!1,previousData:n.getCurrentViewRecords()[t],row:n.getRowByIndex(t)};if(n.showSpinner(),n.enableInfiniteScrolling){this.uid=s.row.getAttribute("data-uid");var o=parseInt(s.row.getAttribute("data-rowindex"),10);this.parent.notify("refresh-infinite-editrowindex",{index:o})}n.notify(eO,s),s.promise?s.promise.then(function(){return n.refresh()}).catch(function(a){return i.edFail(a)}):n.enableInfiniteScrolling||n.refresh()},r.prototype.editFormValidate=function(){var t=this.parent,e=t.editModule.editFormValidate(),i={prevData:this.previousData,isValid:!0,editIdx:this.editRowIndex,addIdx:this.addedRowIndex};return t.notify("validate-virtual-form",i),e&&i.isValid},r.prototype.endEdit=function(){var t=this,e=this.parent;if(this.parent.isEdit&&this.editFormValidate()){var i=he({},{},this.previousData,!0),n=he(this.args,{requestType:"save",type:dr,data:i,cancel:!1,previousData:this.previousData,selectedRow:e.selectedRowIndex,foreignKeyData:{}}),s="Right"===e.getFrozenMode()?1:0,o="Dialog"===e.editSettings.mode,a=re("#"+e.element.id+"_dialogEdit_wrapper",document),l=o?a.querySelector(".e-gridform"):e.element.getElementsByClassName("e-gridform")[s],h={virtualData:he({},{},this.previousData,!0),isAdd:!1,isScroll:!1,endEdit:!0};if(this.parent.notify(Gv,h),(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&"Normal"===this.parent.editSettings.mode&&Object.keys(h.virtualData).length?this.parent.isEdit&&(this.currentVirtualData=i=n.data=h.virtualData):i=e.editModule.getCurrentEditedData(l,i),e.isFrozenGrid()&&"Normal"===e.editSettings.mode){var u=e.getMovableVirtualHeader().querySelector(".e-gridform"),d=e.getMovableVirtualContent().querySelector(".e-gridform"),m=[u||d],v=void 0,C=void 0,S=[];e.getFrozenMode()===Zt&&(v=e.getFrozenRightHeader().querySelector(".e-gridform"),C=e.getFrozenRightContent().querySelector(".e-gridform"),S=[v||C]),xC(this.parent,function(_,M){for(var P=0,B=M;P<B.length;P++){var j=B[P];j&&(i=e.editModule.getCurrentEditedData(j,i))}},[[],m,S])}var A=[].slice.call(e.element.getElementsByClassName(Va)).length;if(!h.isAdd&&Object.keys(this.currentVirtualData).length&&!A&&(A=1),o?a.getElementsByClassName(Va).length:A)n.action="edit",e.trigger(dr,n,function(_){_.cancel||("Spinner"===t.parent.loadingIndicator.indicatorType&&e.showSpinner(),"Shimmer"===t.parent.loadingIndicator.indicatorType&&t.parent.showMaskRow(),e.notify(eO,_))});else if(n.action="add",n.selectedRow=0,n.index=this.addedRowIndex,e.notify(oO,{}),e.notify(zo,n),this.addedRowIndex=null,n.cancel)return}},r.prototype.destroyElements=function(){var t=this.parent;t.editModule.destroyWidgets(),t.editModule.destroyForm(),this.parent.notify(NV,{})},r.prototype.editHandler=function(t){var e=this;t.promise?t.promise.then(function(i){return e.edSucc(i,t)}).catch(function(i){return e.edFail(i)}):this.editSuccess(t.data,t)},r.prototype.edSucc=function(t,e){this.editSuccess(t,e)},r.prototype.edFail=function(t){this.editFailure(t)},r.prototype.updateCurrentViewData=function(t){!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&(this.parent.getCurrentViewRecords()[this.editRowIndex]=t)},r.prototype.requestSuccess=function(t){this.parent.editModule.formObj&&!this.parent.editModule.formObj.isDestroyed&&(this.destroyElements(),this.stopEditStatus(),"Dialog"===this.parent.editSettings.mode&&"add"!==t.action&&this.parent.selectionModule&&this.parent.element.querySelector(".e-dlgeditrow").classList.remove("e-dlgeditrow"))},r.prototype.editSuccess=function(t,e){f(t)||t instanceof Array||(e.data=he({},he({},e.rowData,e.data),t)),this.requestSuccess(e),this.parent.trigger(LV,e),e.type=zi,this.parent.isEdit=!1,this.refreshRow(e.data),this.parent.notify(oO,e),this.parent.editModule.checkLastRow(e.row),this.parent.editModule.isLastRow=!1,this.updateCurrentViewData(e.data),this.blazorTemplate(),this.editRowIndex=null,this.parent.trigger(zi,e),(!(this.parent.isCheckBoxSelection||"Multiple"===this.parent.selectionSettings.type)||!this.parent.isPersistSelection&&!this.parent.selectionSettings.checkboxOnly)&&"Dialog"!==this.parent.editSettings.mode&&this.parent.selectRow(this.rowIndex>-1?this.rowIndex:this.editRowIndex),this.parent.removeMaskRow(),this.parent.hideSpinner()},r.prototype.closeForm=function(){!this.cloneRow&&this.parent.isEdit&&this.stopEditStatus(),this.cloneRow&&(this.cloneRow.remove(),this.cloneRow=null,this.originalRow.classList.remove("e-hiddenrow")),this.parent.isFrozenGrid()&&this.cloneFrozen&&(this.cloneFrozen.remove(),this.frozen.classList.remove("e-hiddenrow"))},r.prototype.blazorTemplate=function(){var t=this.parent.getColumns();this.parent.editSettings.template&&"Normal"===this.parent.editSettings.mode&&Pb();for(var e=0;e<t.length;e++){var i=t[e];i.template&&Pb(),i.editTemplate&&Pb()}},r.prototype.editFailure=function(t){this.parent.removeMaskRow(),this.parent.trigger(xD,{error:t}),this.parent.hideSpinner(),this.parent.log("actionfailure",{error:t})},r.prototype.needRefresh=function(){var t=!0,e=this.parent.element.querySelector(".e-gridform");return(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&"Normal"===this.parent.editSettings.mode&&!e&&(t=!1),t},r.prototype.refreshRow=function(t){var e=this.parent.isFrozenGrid(),i=new Fh(this.serviceLocator,null,this.parent),n=this.parent.getRowObjectFromUID(this.uid);if(n){n.changes=t,this.parent.notify("refresh-virtual-cache",{data:t}),l2(n,this.parent.getForeignKeyColumns(),n.changes),this.needRefresh()&&i.refresh(n,this.parent.getColumns(),!0);var s=[].slice.call(this.parent.element.querySelectorAll('[data-rowindex="'+n.index+'"]'));if(e&&s.length)for(var o=0;o<s.length;o++){var a=s[o].getAttribute("data-uid");a!==this.uid&&((n=this.parent.getRowObjectFromUID(a)).changes=t,i.refresh(n,this.parent.getColumns(),!0),this.parent.editModule.checkLastRow(s[o]))}}},r.prototype.closeEdit=function(){var t=this;if(this.parent.isEdit){var e=this.parent,i=he(this.args,{requestType:"cancel",type:dr,cancel:!1,data:this.previousData,selectedRow:e.selectedRowIndex});e.notify("virtual-scroll-edit-cancel",i),this.blazorTemplate(),e.trigger(dr,i,function(n){if(!n.cancel){"Dialog"===t.parent.editSettings.mode&&t.parent.notify(NV,{}),e.isEdit=!1,t.stopEditStatus(),n.type=zi,"Dialog"!==e.editSettings.mode&&t.refreshRow(n.data);var s=e.groupSettings.enableLazyLoading&&e.groupSettings.columns.length&&!e.getContentTable().querySelector("tr.e-emptyrow");!e.getContentTable().querySelector("tr.e-emptyrow")&&!e.getContentTable().querySelector("tr.e-row")&&!s&&e.renderModule.emptyRow(),"Dialog"!==e.editSettings.mode&&e.selectRow(t.rowIndex),e.trigger(zi,n)}})}},r.prototype.addRecord=function(t,e){var i=this,n=this.parent;if(this.addedRowIndex=e=f(e)?0:e,t)n.notify(zo,{requestType:"save",type:dr,data:t,selectedRow:0,action:"add",index:e});else if(!n.isEdit){this.previousData={},this.uid="";var s=n.getColumns(),o={virtualData:{},isScroll:!1};this.parent.notify(Gv,o);for(var a=0;a<s.length;a++)o.isScroll&&"movable"!==s[a].getFreezeTableName()||s[a].field&&qe.setValue(s[a].field,s[a].defaultValue,this.previousData);var l={cancel:!1,foreignKeyData:{},requestType:"add",data:this.previousData,type:dr,index:e,rowData:this.previousData,target:void 0,isScroll:o.isScroll};(this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&Object.keys(o.virtualData).length&&(l.data=l.rowData=o.virtualData),l.isScroll?this.inlineAddHandler(l):(this.parent.notify(ZV,{uid:this.uid,prevData:this.previousData,argsCreator:this.getEditArgs.bind(this),renderer:this.renderer}),n.trigger(dr,l,function(h){h.cancel||i.inlineAddHandler(h)}))}},r.prototype.inlineAddHandler=function(t){var e=this.parent;e.isEdit=!0,"Dialog"!==e.editSettings.mode&&e.clearSelection(),this.renderer.addNew(t),e.editModule.applyFormValidation(),t.type=zi,t.row=e.element.querySelector("."+Bl),e.trigger(zi,t),this.args=t},r.prototype.deleteRecord=function(t,e){if(this.editRowIndex=this.parent.selectedRowIndex,e){e=e instanceof Array?e:[e];var i=this.parent,n=Object.keys(e).length;t=t||this.parent.getPrimaryKeyFieldNames()[0];for(var s=function(h){var u,d,m=i.currentViewData.some(function(v){return d=v,e[h]===vs(t,v)||e[h]===v});e[h]=m?d:e[h][t]?e[h]:((u={})[t]=e[h],u)},o=0;o<n;o++)s(o)}var a={requestType:"delete",type:dr,foreignKeyData:{},data:e||this.parent.getSelectedRecords(),tr:this.parent.getSelectedRows(),cancel:!1};if(f(this.parent.commandDelIndex)||(a.data[0]=this.parent.getRowObjectFromUID(this.parent.getRowByIndex(this.parent.commandDelIndex).getAttribute("data-uid")).data),this.parent.enableVirtualization&&a.data.length>1){var l=this.parent.getSelectedRows()[0].getAttribute("data-uid");a.data=[this.parent.getRowObjectFromUID(l).data]}this.parent.notify(zo,a)},r.prototype.stopEditStatus=function(){for(var t=this.parent,e=[].slice.call(t.element.getElementsByClassName(Bl)),i=[].slice.call(t.element.getElementsByClassName(Va)),n=0;n<e.length;n++)Be(e[n]);for(n=0;n<i.length;n++)i[n].classList.remove(Va)},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:Nre,handler:this.editHandler},{event:z8,handler:this.dblClickHandler},{event:sl,handler:this.clickHandler},{event:G8,handler:this.requestSuccess},{event:JL,handler:this.dblClickHandler},{event:"delete-complete",handler:this.editComplete},{event:"save-complete",handler:this.editComplete},{event:pG,handler:this.closeEdit},{event:"closeinline",handler:this.closeForm}],uo(this.parent,this.evtHandlers,!0,this))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||uo(this.parent,this.evtHandlers,!1)},r.prototype.destroy=function(){this.removeEventListener(),this.renderer.destroy()},r}(),jIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),ooe=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return jIe(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(soe),UIe=function(){function r(t,e,i){this.cellDetails={},this.originalCell={},this.cloneCell={},this.editNext=!1,this.preventSaveCell=!1,this.initialRender=!0,this.validationColObj=[],this.parent=t,this.serviceLocator=e,this.renderer=i,this.focus=e.getService("focus"),this.addEventListener()}return r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:sl,handler:this.clickHandler},{event:JL,handler:this.dblClickHandler},{event:AD,handler:this.onBeforeCellFocused},{event:PV,handler:this.onCellFocused},{event:z8,handler:this.dblClickHandler},{event:Cs,handler:this.keyDownHandler},{event:VV,handler:this.editNextValCell},{event:"closebatch",handler:this.closeForm},{event:dn,handler:this.destroy}],uo(this.parent,this.evtHandlers,!0,this),this.dataBoundFunction=this.dataBound.bind(this),this.batchCancelFunction=this.batchCancel.bind(this),this.parent.addEventListener(ph,this.dataBoundFunction),this.parent.addEventListener(jg,this.batchCancelFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(uo(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(ph,this.dataBoundFunction),this.parent.removeEventListener(jg,this.batchCancelFunction))},r.prototype.batchCancel=function(){this.parent.focusModule.restoreFocus()},r.prototype.dataBound=function(){this.parent.notify(qv,{})},r.prototype.destroy=function(){this.removeEventListener()},r.prototype.clickHandler=function(t){pe(t.target,this.parent.element.id+"_add",!0)||(this.parent.isEdit&&U(this.form,"td")!==U(t.target,"td")&&(this.saveCell(),this.editNextValCell()),pe(t.target,tn)&&!this.parent.isEdit&&this.setCellIdx(t.target))},r.prototype.dblClickHandler=function(t){var e=pe(t.target,tn),i=pe(t.target,vn),n=i&&parseInt(i.getAttribute(Ai),10),s=e&&parseInt(e.getAttribute(Us),10);!f(e)&&!f(n)&&!isNaN(s)&&!e.parentElement.classList.contains(Va)&&this.editCell(n,this.parent.getColumns()[s].field,this.isAddRow(n))},r.prototype.onBeforeCellFocused=function(t){this.parent.isEdit&&this.validateFormObj()&&(t.byClick||["tab","shiftTab","enter","shiftEnter"].indexOf(t.keyArgs.action)>-1)&&(t.cancel=!0,t.byClick?t.clickArgs.preventDefault():t.keyArgs.preventDefault())},r.prototype.onCellFocused=function(t){var e=this.parent.getFrozenLeftCount(),i=this.parent.getFrozenRightColumnsCount(),n=this.parent.getContent().querySelector("."+zn),s=this.parent.getHeaderContent().querySelector("."+Zn),o=!(t.container.isContent&&t.container.isDataCell||this.parent.frozenRows&&t.container.isHeader);if(!t.byKey||o||this.parent.isFrozenGrid()&&t.element&&U(t.element,".e-gridheader")&&!t.element.parentElement.hasAttribute("data-rowindex"))this.parent.isEdit&&o&&this.saveCell();else{var a=t.container.indexes,l=a[0],h=a[1];if(e&&(n.contains(t.element)||this.parent.frozenRows&&s.contains(t.element))&&(h+=e),i){var u=this.parent.getHeaderContent().querySelector(".e-frozen-right-header");(this.parent.getContent().querySelector(".e-frozen-right-content").contains(t.element)||this.parent.frozenRows&&u.contains(t.element))&&(h+=e+this.parent.getMovableColumnsCount())}this.parent.frozenRows&&t.container.isContent&&(l+=this.parent.frozenRows);var m=this.parent.isEdit;if(!this.parent.element.getElementsByClassName("e-popup-open").length)switch(m=m&&!this.validateFormObj(),t.keyArgs.action){case"tab":case"shiftTab":var v=this.parent.isRowDragable()&&this.parent.isDetail()?2:this.parent.isRowDragable()||this.parent.isDetail()?1:0,C=this.parent.getColumns()[h-v];C&&!this.parent.isEdit&&this.editCell(l,C.field),(m||this.parent.isLastCellPrimaryKey)&&this.editCellFromIndex(l,h);break;case"enter":case"shiftEnter":t.keyArgs.preventDefault();var S={cancel:!1,keyArgs:t.keyArgs};this.parent.notify("beforeFocusCellEdit",S),!S.cancel&&m&&this.editCell(l,this.cellDetails.column.field);break;case"f2":this.editCellFromIndex(l,h),this.focus.focus()}}},r.prototype.isAddRow=function(t){return this.parent.getDataRows()[t].classList.contains("e-insertedrow")},r.prototype.editCellFromIndex=function(t,e){this.cellDetails.rowIndex=t,this.cellDetails.cellIndex=e,this.editCell(t,this.parent.getColumns()[e].field,this.isAddRow(t))},r.prototype.closeEdit=function(){var t=this,e=this.parent,i=this.parent.getRowsObject(),n={cancel:!1,batchChanges:this.getBatchChanges()};if(e.notify("before-batch-cancel",n),!n.cancel){e.isEdit&&this.saveCell(!0),this.isAdded=!1,e.clearSelection();for(var l,s=m2(this.parent),o=function(d){var m=!1,v=i[d].isDirty;xC(a.parent,function(C,S){(m=t.removeBatchElementChanges(S[d],v))&&S.splice(d,1)},s),m&&d--,l=d},a=this,h=0;h<i.length;h++)o(h),h=l;e.getContentTable().querySelector("tr.e-row")||e.renderModule.renderEmptyRow();var u=this.parent.getRowsObject();this.parent.isFrozenGrid()?(this.parent.getRowsObject().length&&e.notify(jg,{rows:this.parent.getRowsObject(),args:{isFrozen:!0}}),this.parent.getMovableRowsObject().length&&e.notify(jg,{rows:this.parent.getMovableRowsObject()}),this.parent.getFrozenRightRowsObject().length&&e.notify(jg,{rows:this.parent.getFrozenRightRowsObject(),args:{renderFrozenRightContent:!0}})):e.notify(jg,{rows:this.parent.getRowsObject().length?this.parent.getRowsObject():[new If({isDataRow:!0,cells:[new ec({isDataCell:!0,visible:!0})]})]}),e.selectRow(this.cellDetails.rowIndex),this.refreshRowIdx(),e.notify(qv,{}),this.parent.notify(MS,{}),u={requestType:"batchCancel",rows:this.parent.getRowsObject()},e.trigger(jg,u)}},r.prototype.removeBatchElementChanges=function(t,e){var i=this.parent,n=new Fh(this.serviceLocator,null,this.parent),s=!1;if(e){t.isDirty=e;var o=i.getRowElementByUID(t.uid);if(o&&(o.classList.contains("e-insertedrow")?(Be(o),s=!0):(l2(t,this.parent.getForeignKeyColumns(),t.data),delete t.changes,delete t.edit,t.isDirty=!1,ri(o,[],["e-hiddenrow","e-updatedtd"]),n.refresh(t,i.getColumns(),!1)),this.parent.aggregates.length>0)){var l=[];l.type="cancel",this.parent.notify(Wv,l),this.parent.groupSettings.columns.length>0&&this.parent.notify(mC,l)}}return s},r.prototype.removeHideAndSelection=function(t){if(t.classList.contains("e-hiddenrow")){t.removeAttribute("aria-selected");for(var e=[].slice.call(t.getElementsByClassName("e-selectionbackground")),i=0;i<e.length;i++)z([e[i]],["e-selectionbackground","e-active"])}ri(t,[],["e-hiddenrow","e-updatedtd"])},r.prototype.deleteRecord=function(t,e){this.saveCell(),this.validateFormObj()&&this.saveCell(!0),this.isAdded=!1,this.bulkDelete(t,e),this.parent.aggregates.length>0&&(this.parent.notify(Wv,{}),this.parent.groupSettings.columns.length>0&&this.parent.notify(mC,{}))},r.prototype.addRecord=function(t){this.bulkAddRow(t)},r.prototype.endEdit=function(){this.parent.isEdit&&this.validateFormObj()||this.batchSave()},r.prototype.closeForm=function(){for(var t=0;t<Object.keys(this.originalCell).length;t++)for(var e=0;e<Object.keys(this.cloneCell).length;e++)Object.keys(this.originalCell)[t]===Object.keys(this.cloneCell)[e]&&(this.cloneCell[Object.keys(this.cloneCell)[e]].replaceWith(this.originalCell[Object.keys(this.originalCell)[t]]),this.originalCell[Object.keys(this.originalCell)[t]].classList.contains("e-selectionbackground")&&this.originalCell[Object.keys(this.originalCell)[t]].classList.remove("e-selectionbackground","e-cellselectionbackground","e-active"));this.cloneCell={},this.originalCell={}},r.prototype.validateFormObj=function(){return this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate()},r.prototype.batchSave=function(){var t=this.parent,e="deletedRecords";if(t.isCheckBoxSelection){var i=t.element.querySelector(".e-checkselectall").parentElement;i.classList.contains("e-checkbox-disabled")&&t.pageSettings.totalRecordsCount>t.currentViewData.length&&z([i],["e-checkbox-disabled"])}if(this.saveCell(),!(t.isEdit||this.editNextValCell()||t.isEdit)){var n=this.getBatchChanges();"Multiple"===this.parent.selectionSettings.type&&n[e].length&&this.parent.selectionSettings.persistSelection&&(n[e]=this.removeSelectedData,this.removeSelectedData=[]);var s={changedRecords:this.parent.getRowsObject().filter(function(a){return a.isDirty&&-1===["add","delete"].indexOf(a.edit)}).map(function(a){return a.data})};t.trigger("beforeBatchSave",{batchChanges:n,cancel:!1},function(a){a.cancel||(t.showSpinner(),t.notify("bulk-save",{changes:n,original:s}))})}},r.prototype.getBatchChanges=function(){for(var t={addedRecords:[],deletedRecords:[],changedRecords:[]},i=0,n=this.parent.getRowsObject();i<n.length;i++){var s=n[i];if(s.isDirty)switch(s.edit){case"add":t.addedRecords.push(s.changes);break;case"delete":t.deletedRecords.push(s.data);break;default:t.changedRecords.push(s.changes)}}return t},r.prototype.removeRowObjectFromUID=function(t){for(var e=this.parent.getRowsObject(),i=0,n=e.length;i<n&&e[i].uid!==t;i++);xC(this.parent,function(s,o){o.splice(i,1)},m2(this.parent))},r.prototype.addRowObject=function(t,e){var i=this.parent,n="Top"===i.editSettings.newRowPosition;xC(this.parent,function(s,o){var a=t.clone();i.isFrozenGrid()?e===s&&(n?o.unshift(a):o.push(a)):n?o.unshift(a):o.push(a)},m2(this.parent),!0)},r.prototype.bulkDelete=function(t,e){var i=this;this.removeSelectedData=[];var n=this.parent,s=n.selectedRowIndex,o=n.getSelectedRows(),a={primaryKey:this.parent.getPrimaryKeyFieldNames(),rowIndex:s,rowData:e||n.getSelectedRecords()[0],cancel:!1};a.row=e?n.editModule.deleteRowUid?n.getRowElementByUID(n.editModule.deleteRowUid):n.getRows()[n.getCurrentViewRecords().indexOf(e)]:e?n.getRows()[s]:o[0],a.row&&n.trigger("beforeBatchDelete",a,function(l){if(!l.cancel){if(i.removeSelectedData=n.getSelectedRecords(),n.clearSelection(),l.row=l.row?l.row:e?n.getRows()[s]:o[0],i.parent.isFrozenGrid()){e&&(s=parseInt(l.row.getAttribute(Ai),10),(o=[]).push(n.getRowByIndex(s)),o.push(n.getMovableRowByIndex(s)),n.getFrozenMode()===Zt&&o.push(n.getFrozenRightRowByIndex(s)));for(var h=0;h<o.length;h++){var u=o[h].getAttribute("data-uid");o[h].classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),Be(o[h])):((d=n.getRowObjectFromUID(u)).isDirty=!0,d.edit="delete",ri(o[h],["e-hiddenrow","e-updatedtd"],[]),n.frozenRows&&s<n.frozenRows&&n.getMovableDataRows().length>=n.frozenRows&&(n.getMovableHeaderTbody().appendChild(n.getMovableRowByIndex(n.frozenRows-1)),n.getFrozenHeaderTbody().appendChild(n.getRowByIndex(n.frozenRows-1)),n.getFrozenMode()===Zt&&n.getFrozenRightHeaderTbody().appendChild(n.getFrozenRightRowByIndex(n.frozenRows-1))),n.frozenRows&&s<n.frozenRows&&n.getDataRows().length>=n.frozenRows&&n.getHeaderTable().querySelector(rt).appendChild(n.getRowByIndex(n.frozenRows-1))),delete o[h]}}else if(i.parent.isFrozenGrid()||1!==o.length&&!e)for(h=0;h<o.length;h++){var m=o[h].getAttribute("data-uid");if(o[h].classList.contains("e-insertedrow"))i.removeRowObjectFromUID(m),Be(o[h]);else{ri(o[h],["e-hiddenrow","e-updatedtd"],[]);var v=n.getRowObjectFromUID(m);v.isDirty=!0,v.edit="delete",delete o[h]}}else{var d;u=l.row.getAttribute("data-uid"),u=e&&i.parent.editModule.deleteRowUid?u=i.parent.editModule.deleteRowUid:u,l.row.classList.contains("e-insertedrow")?(i.removeRowObjectFromUID(u),Be(l.row)):((d=n.getRowObjectFromUID(u)).isDirty=!0,d.edit="delete",ri(l.row,["e-hiddenrow","e-updatedtd"],[])),delete l.row}i.refreshRowIdx(),e&&(n.editModule.deleteRowUid=void 0,n.getSelectedRows().length&&(s=parseInt(n.getSelectedRows()[0].getAttribute(Ai),10))),n.isCheckBoxSelection||n.selectRow(s),n.trigger(_V,l),n.notify(_V,{rows:i.parent.getRowsObject()}),n.notify(qv,{})}})},r.prototype.refreshRowIdx=function(){for(var a,e=this.parent.getAllDataRows(!0),i=function eIe(r){return["Right"!==r.getFrozenMode()?r.getAllDataRows(!0):[],r.getAllMovableDataRows(!0),r.getAllFrozenRightDataRows(!0)]}(this.parent),n=m2(this.parent),s=function(d,m,v){e[d].classList.contains(vn)&&!e[d].classList.contains("e-hiddenrow")?(xC(o.parent,function(C,S,A){S[d].setAttribute(Ai,m.toString()),S[d].setAttribute(hO,(m+1).toString()),A[d].index=m},i,null,n),m++):xC(o.parent,function(C,S,A){S[d].removeAttribute(Ai),S[d].removeAttribute(hO),A[d].index=-1},i,null,n),a=m},o=this,l=0,h=0,u=e.length;l<u;l++)s(l,h),h=a},r.prototype.getIndexFromData=function(t){return function yO(r,t){for(var e=0,i=t.length;e<i;e++)if(t[e]===r)return e;return-1}(t,this.parent.getCurrentViewRecords())},r.prototype.bulkAddRow=function(t){var e=this,i=this.parent;if(i.editSettings.allowAdding&&(i.isEdit&&(this.saveCell(),this.parent.notify(VV,{})),!i.isEdit)){if(this.initialRender){for(var n=i.getVisibleColumns(),s=0;s<n.length;s++)if(n[s].validationRules&&n[s].validationRules.required){var o={field:n[s].field.slice(),cellIdx:s};this.validationColObj.push(o)}this.initialRender=!1}this.parent.element.classList.add("e-editing");var l={defaultData:t||this.getDefaultData(),primaryKey:i.getPrimaryKeyFieldNames(),cancel:!1};i.trigger("beforeBatchAdd",l,function(h){if(!h.cancel)if(e.isAdded=!0,i.clearSelection(),i.isFrozenGrid()){for(var u=e.parent.getMovableColumnsCount(),d=e.parent.getFrozenLeftCount(),m=e.parent.getFrozenRightColumnsCount(),v=i.getContentTable().querySelector(rt),C=u+d+m,S=void 0,A=[],_=[],M=void 0,P=void 0,B=void 0,j=void 0,G=void 0,ne=0;ne<C;){var fe=new Fh(e.serviceLocator,null,e.parent),Pe=new Xd(e.parent).generateRows([h.defaultData]);d>0?(S="frozen-left",C=(d=0)+m+u):u>0?(S="movable",C=d+m+(u=0)):(S="frozen-right",C=d+(m=0)+u);for(var ie=0;ie<Pe.length;ie++)Pe[ie].cells=g2(e.parent,Pe[ie].cells,S);"frozen-left"===S?(B=fe.render(Pe[0],i.getColumns())).classList.add("e-insertedrow"):"movable"===S?(j=fe.render(Pe[0],i.getColumns())).classList.add("e-insertedrow"):(G=fe.render(Pe[0],i.getColumns())).classList.add("e-insertedrow");for(var Ie=0;Ie<e.parent.groupSettings.columns.length;Ie++)B.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),B.firstChild),Pe[0].cells.unshift(new ec({cellType:Ot.Indent}));v.querySelector(".e-emptyrow")&&((Te=v.querySelector(".e-emptyrow")).parentNode.removeChild(Te),e.removeFrozenTbody()),"frozen-left"===S&&(v=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(rt):i.getContentTable().querySelector(rt),"Top"===e.parent.editSettings.newRowPosition?(v.insertBefore(B,v.firstChild),N([].slice.call(B.getElementsByClassName(tn)),["e-updatedtd"])):(v.appendChild(B),N([].slice.call(B.getElementsByClassName(tn)),["e-updatedtd"]))),("movable"===S||"frozen-right"===S)&&e.renderFrozenAddRow(j,G,S),Pe[0].isDirty=!0,Pe[0].changes=he({},{},Pe[0].data,!0),Pe[0].edit="add",e.addRowObject(Pe[0],S)}e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(OS,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}});var ce=e.getBatchChanges(),Re=e.getBottomIndex();i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:Re),t||(P=e.findNextEditableCell(0,!0),M=i.getColumns()[P],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:Re,M.field,!0)),e.parent.aggregates.length>0&&(t||ce[Af].length)&&e.parent.notify(Wv,{}),B&&(f2(j.querySelector("td:not(.e-hide)"),B.querySelector("td:not(.e-hide)")),A.push(B),_.push(B.cells)),A.push(j),_.push(j.cells),G&&(A.push(G),_.push(G.cells)),i.trigger(OS,{defaultData:h.defaultData,row:A,columnObject:M,columnIndex:P,primaryKey:h.primaryKey,cell:_})}else{for(fe=new Fh(e.serviceLocator,null,e.parent),Pe=new Xd(e.parent).generateRows([h.defaultData]),B=fe.render(Pe[0],i.getColumns()),M=void 0,P=void 0,ne=0;ne<e.parent.groupSettings.columns.length;ne++)B.insertBefore(e.parent.createElement("td",{className:"e-indentcell"}),B.firstChild),Pe[0].cells.unshift(new ec({cellType:Ot.Indent}));var Te;v=i.getContentTable().querySelector(rt),B.classList.add("e-insertedrow"),v.querySelector(".e-emptyrow")&&((Te=v.querySelector(".e-emptyrow")).parentNode.removeChild(Te),e.removeFrozenTbody()),v=i.frozenRows&&"Top"===i.editSettings.newRowPosition?i.getHeaderTable().querySelector(rt):i.getContentTable().querySelector(rt),"Top"===e.parent.editSettings.newRowPosition?v.insertBefore(B,v.firstChild):v.appendChild(B),N([].slice.call(B.getElementsByClassName(tn)),["e-updatedtd"]),Pe[0].isDirty=!0,Pe[0].changes=he({},{},Pe[0].data,!0),Pe[0].edit="add",e.addRowObject(Pe[0]),e.refreshRowIdx(),e.focus.forgetPrevious(),i.notify(OS,{rows:e.parent.getRowsObject(),args:{isFrozen:e.parent.isFrozenGrid()}}),ce=e.getBatchChanges(),Re=e.getBottomIndex(),i.selectRow("Top"===e.parent.editSettings.newRowPosition?0:Re),t||(P=e.findNextEditableCell(0,!0),M=i.getColumns()[P],e.editCell("Top"===e.parent.editSettings.newRowPosition?0:Re,M.field,!0)),e.parent.aggregates.length>0&&(t||ce[Af].length)&&e.parent.notify(Wv,{}),i.trigger(OS,{defaultData:h.defaultData,row:B,columnObject:M,columnIndex:P,primaryKey:h.primaryKey,cell:B.cells[P]})}})}},r.prototype.renderFrozenAddRow=function(t,e,i){var s,o,n=this.parent;"movable"===i&&(s=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getMovableHeaderTbody():this.parent.getContent().querySelector(".e-movablecontent").querySelector(rt),"Top"===n.editSettings.newRowPosition?s.insertBefore(t,s.firstChild):s.appendChild(t),N([].slice.call(t.getElementsByClassName(tn)),["e-updatedtd"])),"frozen-right"===i&&(o=n.frozenRows&&"Top"===n.editSettings.newRowPosition?this.parent.getFrozenRightHeaderTbody():this.parent.getContent().querySelector(".e-frozen-right-content").querySelector(rt),"Top"===n.editSettings.newRowPosition?o.insertBefore(e,o.firstChild):o.appendChild(e),N([].slice.call(e.getElementsByClassName(tn)),["e-updatedtd"]),f2(e.querySelector("td:not(.e-hide)"),t.querySelector("td:not(.e-hide)"))),"auto"===n.height&&n.notify(nO,{})},r.prototype.removeFrozenTbody=function(){var t=this.parent;if(t.isFrozenGrid()){var e=t.getContent().querySelector("."+zn).querySelector(rt);if(e.firstElementChild.parentNode.removeChild(e.firstElementChild),t.getFrozenMode()===Zt){var i=t.getContent().querySelector(".e-frozen-right-content").querySelector(rt);i.firstElementChild.parentNode.removeChild(i.firstElementChild)}}},r.prototype.renderMovable=function(t,e){var i=t.cloneNode(!0),n=this.parent.getMovableColumnsCount(),s=this.parent.getFrozenLeftCount(),o=this.parent.getFrozenRightColumnsCount();return NG(t,0,s),NG(i,s,o?i.children.length-o:i.children.length),NG(e,s+n,e.children.length),i},r.prototype.findNextEditableCell=function(t,e,i){for(var o,n=this.parent.getColumns(),s=n.length,a=t;a<s;a++){if(o=!!i&&f(n[a].validationRules),!e&&this.checkNPCell(n[a]))return a;if(e&&(!n[a].template||n[a].field)&&n[a].visible&&n[a].allowEditing&&(!n[a].isIdentity||!n[a].isPrimaryKey)&&!o)return a}return-1},r.prototype.checkNPCell=function(t){return!t.template&&t.visible&&!t.isPrimaryKey&&!t.isIdentity&&t.allowEditing},r.prototype.getDefaultData=function(){for(var e={},i={number:0,string:null,boolean:!1,date:null,datetime:null},n=0,s=this.parent.columnModel;n<s.length;n++){var o=s[n];o.field&&Nt(o.field,Object.keys(o).indexOf("defaultValue")>=0?o.defaultValue:i[o.type],e)}return e},r.prototype.setCellIdx=function(t){var e=0;this.parent.allowGrouping&&(e=this.parent.groupSettings.columns.length),this.cellDetails.cellIndex=t.cellIndex-e,this.cellDetails.rowIndex=parseInt(t.getAttribute("index"),10)},r.prototype.editCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e);this.index=t,this.field=e,this.isAdd=i;var o=n.isEdit&&!(this.cellDetails.column.field===e&&this.cellDetails.rowIndex===t&&this.parent.getDataRows().length-1!==t);n.editSettings.allowEditing&&(!o&&s.allowEditing?this.editCellExtend(t,e,i):o&&(this.editNext=!0,this.saveCell()))},r.prototype.editCellExtend=function(t,e,i){var n=this,s=this.parent,o=s.getColumnByField(e),a=s.getPrimaryKeyFieldNames();if(!s.isEdit){var l,h,u=he({},{},this.getDataByIndex(t),!0);if("movable"===o.getFreezeTableName()||o.getFreezeTableName()===or?(l="movable"===o.getFreezeTableName()?s.getMovableDataRows()[t]:s.getFrozenRightDataRows()[t],h=this.parent.getRowObjectFromUID(l.getAttribute("data-uid")),u=h.changes?he({},{},h.changes,!0):u):(l=s.getDataRows()[t],u=he({},{},this.getDataByIndex(t),!0)),a[0]===o.field&&!l.classList.contains("e-insertedrow")||o.columns||o.isPrimaryKey&&o.isIdentity||o.commands)return void(this.parent.isLastCellPrimaryKey=!0);this.parent.isLastCellPrimaryKey=!1,this.parent.element.classList.add("e-editing");var d=s.getRowObjectFromUID(l.getAttribute("data-uid")),m=[].slice.apply(l.cells),v={columnName:o.field,isForeignKey:!f(o.foreignKeyValue),primaryKey:a,rowData:u,validationRules:he({},o.validationRules?o.validationRules:{}),value:vs(o.field,u),type:i?"add":"edit",cancel:!1,foreignKeyData:d&&d.foreignKeyData};v.cell=m[this.getColIndex(m,this.getCellIdx(o.uid))],v.row=l,v.columnObject=o,v.cell&&s.trigger("cellEdit",v,function(C){C.cancel||(C.cell=C.cell?C.cell:m[n.getColIndex(m,n.getCellIdx(o.uid))],C.row=C.row?C.row:l,C.columnObject=C.columnObject?C.columnObject:o,C.columnObject.index=f(C.columnObject.index)?0:C.columnObject.index,n.cellDetails={rowData:u,column:o,value:C.value,isForeignKey:C.isForeignKey,rowIndex:t,cellIndex:parseInt(C.cell.getAttribute(Us),10),foreignKeyData:C.foreignKeyData},C.cell.classList.contains("e-updatedtd")&&(n.isColored=!0,C.cell.classList.remove("e-updatedtd")),s.isEdit=!0,s.clearSelection(),(!s.isCheckBoxSelection||!s.isPersistSelection)&&s.selectRow(n.cellDetails.rowIndex,!0),n.renderer.update(C),n.parent.notify("batcheditform-rendered",C),n.form=re("#"+s.element.id+"EditForm",s.element),s.editModule.applyFormValidation([o]),n.parent.element.querySelector(".e-gridpopup").style.display="none")})}},r.prototype.updateCell=function(t,e,i){var n=this.parent,s=n.getColumnByField(e),o=n.getColumnIndexByField(e);if(s&&!s.isPrimaryKey&&s.allowEditing){var a=BG(this.parent,s,t,o),l="movable"===s.getFreezeTableName()?this.parent.getMovableRowsObject()[t]:s.getFreezeTableName()===or?n.getFrozenRightRowsObject()[t]:n.getRowObjectFromUID(a.parentElement.getAttribute("data-uid"));this.refreshTD(a,s,l,i),this.parent.trigger(k8,{cell:this.newReactTd||a,column:s,data:l.changes})}},r.prototype.setChanges=function(t,e,i){var n;if(this.parent.isFrozenGrid()){var o=this.parent.getRowElementByUID(t.uid),a=parseInt(o.getAttribute(Ai),10);(n=this.parent.getRowsObject()[a]).changes||(n.changes=he({},{},t.data,!0)),f(e)||Nt(e,i,n.changes);var l=this.parent.getMovableRowsObject()[a];if(l.changes=he({},{},n.changes,!0),t.data[e]!==i&&(l.isDirty=!0,n.isDirty=!0),this.parent.getFrozenMode()===Zt){var h=this.parent.getFrozenRightRowsObject()[a];h.changes=he({},{},n.changes,!0),t.data[e]!==i&&(h.isDirty=!0)}}else if(t.changes||(t.changes=he({},{},t.data,!0)),f(e)||qe.setValue(e,i,t.changes),t.data[e]!==i){var s=this.parent.getColumnByField(e).type;"date"===s||"datetime"===s?new Date(t.data[e]).toString()!==new Date(i).toString()&&(t.isDirty=!0):t.isDirty=!0}},r.prototype.updateRow=function(t,e){for(var n=0,s=Object.keys(e);n<s.length;n++){var o=s[n];this.updateCell(t,o,e[o])}},r.prototype.getCellIdx=function(t){var e=this.parent.getColumnIndexByUid(t)+this.parent.groupSettings.columns.length;return(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&e++,this.parent.isRowDragable()&&e++,e},r.prototype.refreshTD=function(t,e,i,n){var o,s=new fh(this.parent,this.serviceLocator);n="number"!==e.type||f(n)?n:parseFloat(n),this.setChanges(i,e.field,n);var l,h,a=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();a=a&&this.parent.isRowDragable()?a+1:a,l2(i,this.parent.getForeignKeyColumns(),i.changes),o=a&&"movable"===e.getFreezeTableName()&&this.parent.getColumns().length===i.cells.length?i.cells.slice(a,i.cells.length):i.cells,this.parent.isReact&&(l=t.parentElement,h=t.cellIndex);var u=0;a&&(u="movable"===e.getFreezeTableName()&&"Right"!==this.parent.getFrozenMode()?a:e.getFreezeTableName()===or?this.parent.getFrozenLeftColumnsCount()+this.parent.getMovableColumnsCount():u),s.refreshTD(t,o[this.getCellIdx(e.uid)-u],i.changes,{index:this.getCellIdx(e.uid)}),this.parent.isReact?(this.newReactTd=l.cells[h],l.cells[h].classList.add("e-updatedtd")):t.classList.add("e-updatedtd"),t.classList.add("e-updatedtd"),this.parent.notify(qv,{})},r.prototype.getColIndex=function(t,e){var i=0;this.parent.allowGrouping&&this.parent.groupSettings.columns&&(i=this.parent.groupSettings.columns.length),(!f(this.parent.detailTemplate)||!f(this.parent.childGrid))&&i++,this.parent.isRowDragable()&&i++;for(var n=0;n<t.length;n++)if(parseInt(t[n].getAttribute(Us),10)===e-i)return n;return-1},r.prototype.editNextValCell=function(){var t=this.parent,e=t.element.querySelectorAll(".e-insertedrow"),i=1===e.length||(t.getFrozenColumns()>0||t.getFrozenRightColumnsCount()>0||t.getFrozenLeftColumnsCount()>0)&&(2===e.length||3===e.length);if(i&&this.isAdded&&!t.isEdit){for(var n=this.getBottomIndex(),s=this.cellDetails.cellIndex;s<t.getColumns().length;s++){if(t.isEdit)return;var o=this.findNextEditableCell(this.cellDetails.cellIndex+1,!0,!0),a=t.getColumns()[o];if(a){if("Bottom"===this.parent.editSettings.newRowPosition)this.editCell(n,a.field,!0);else{var l={index:0,column:a};this.parent.notify("next-cell-index",l),this.editCell(l.index,a.field,!0)}this.saveCell()}}t.isEdit||(this.isAdded=!1)}else if(i||!this.isAdded||t.isEdit||t.isFrozenGrid()){if(!i&&this.isAdded&&!t.isEdit&&t.isFrozenGrid()){var m=t.getFrozenLeftContentTbody()?t.getFrozenLeftContentTbody().querySelectorAll(".e-insertedrow"):void 0,v=t.getFrozenRightContentTbody()?t.getFrozenRightContentTbody().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableContentTbody().querySelectorAll(".e-insertedrow"),S=(h=0,t.getVisibleFrozenLeftCount()?t.getVisibleFrozenLeftCount():t.getFrozenColumns()),A=t.getVisibleFrozenRightCount(),_=t.getVisibleMovableCount();for("Bottom"===t.editSettings.newRowPosition?(u=this.getBatchChanges(),h=t.getCurrentViewRecords().length-u[bC].length):"Top"===t.editSettings.newRowPosition&&t.frozenRows&&(m=t.getFrozenHeaderTbody()?t.getFrozenHeaderTbody().querySelectorAll(".e-insertedrow"):void 0,v=t.getFrozenRightHeader()?t.getFrozenRightHeader().querySelectorAll(".e-insertedrow"):void 0,C=t.getMovableHeaderTbody().querySelectorAll(".e-insertedrow")),s=0;s<C.length&&!t.isEdit;s++,h++)for(d=0;d<this.validationColObj.length&&!t.isEdit;d++)S&&this.validationColObj[d].cellIdx<S?""===m[s].querySelectorAll("td")[this.validationColObj[d].cellIdx].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell()):A&&_<=this.validationColObj[d].cellIdx?""===v[s].querySelectorAll("td")[this.validationColObj[d].cellIdx-(_+S)].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell()):""===C[s].querySelectorAll("td")[this.validationColObj[d].cellIdx-S].innerText&&(this.editCell(h,this.validationColObj[d].field),t.editModule.formObj.validate()&&this.saveCell());t.isEdit||(this.isAdded=!1)}}else{var h=0;if("Bottom"===t.editSettings.newRowPosition){var u=this.getBatchChanges();h=t.getCurrentViewRecords().length-u[bC].length}for(s=0;s<e.length&&!t.isEdit;s++,h++)for(var d=0;d<this.validationColObj.length&&!t.isEdit;d++)""===e[s].querySelectorAll("td")[this.validationColObj[d].cellIdx].innerText&&(this.editCell(h,this.validationColObj[d].field),this.validateFormObj()&&this.saveCell());t.isEdit||(this.isAdded=!1)}},r.prototype.escapeCellEdit=function(){var t=this.generateCellArgs();t.value=t.previousValue,(t.value||!this.cellDetails.column.validationRules)&&this.successCallBack(t,t.cell.parentElement,t.column,!0)(t)},r.prototype.generateCellArgs=function(){var t=this.parent;this.parent.element.classList.remove("e-editing");var e=this.cellDetails.column,i={};i[e.field]=vs(e.field,this.cellDetails.rowData);var n=t.editModule.getCurrentEditedData(this.form,i),s=he({},n);n=he({},n,this.cellDetails.rowData);var o=vs(e.field,s);!f(e.field)&&!qt(o)&&Nt(e.field,o,n);var a={columnName:e.field,value:vs(e.field,n),rowData:this.cellDetails.rowData,column:e,previousValue:this.cellDetails.value,isForeignKey:this.cellDetails.isForeignKey,cancel:!1};return a.cell=this.form.parentElement,a.columnObject=e,a},r.prototype.saveCell=function(t){if(!this.preventSaveCell&&this.form){var e=this.parent;if(t||e.isEdit&&!this.validateFormObj()){this.preventSaveCell=!0;var i=this.generateCellArgs(),n=i.cell.parentElement,s=i.column;t?this.successCallBack(i,n,s)(i):(e.trigger("cellSave",i,this.successCallBack(i,n,s)),e.notify("batchedit-form",{formObj:this.form}))}}},r.prototype.successCallBack=function(t,e,i,n){var s=this;return function(o){var a=s.parent;if(o.cell=o.cell?o.cell:s.form.parentElement,o.columnObject=o.columnObject?o.columnObject:i,o.columnObject.index=f(o.columnObject.index)?0:o.columnObject.index,o.cancel){if(s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;s.editCellExtend(s.index,s.field,s.isAdd)}}else{a.editModule.destroyWidgets([i]),a.isEdit=!1,a.editModule.destroyForm(),s.parent.notify(MS,{});var l=pe(o.cell,zn)||pe(o.cell,Zn)?a.getRowObjectFromUID(e.getAttribute("data-uid"),!0):a.getRowObjectFromUID(e.getAttribute("data-uid"));if(a.getFrozenMode()===Zt&&(pe(o.cell,"e-frozen-right-header")||pe(o.cell,"e-frozen-right-content"))&&(l=a.getRowObjectFromUID(e.getAttribute("data-uid"),!1,!0)),s.refreshTD(o.cell,i,l,o.value),s.parent.isReact&&(o.cell=s.newReactTd),z([e],[Va,"e-batchrow"]),z([o.cell],["e-editedbatchcell","e-boolcell"]),(!f(o.value)&&o.value.toString()===(f(s.cellDetails.value)?"":s.cellDetails.value).toString()&&!s.isColored||f(o.value)&&f(l.data[i.field])&&f(s.cellDetails.value)&&!o.cell.parentElement.classList.contains("e-insertedrow"))&&o.cell.classList.remove("e-updatedtd"),f(n)&&a.trigger("cellSaved",o),a.notify(qv,{}),s.isColored=!1,s.parent.aggregates.length>0&&(s.parent.notify(Wv,{}),s.parent.groupSettings.columns.length>0&&!s.isAddRow(s.cellDetails.rowIndex)&&s.parent.notify(mC,{})),s.preventSaveCell=!1,s.editNext){if(s.editNext=!1,s.cellDetails.rowIndex===s.index&&s.cellDetails.column.field===s.field)return;var h=a.getColumnByField(s.field);h&&h.allowEditing&&s.editCellExtend(s.index,s.field,s.isAdd)}n&&a.notify(FS,{})}}},r.prototype.getDataByIndex=function(t){var e=this.parent.getRowObjectFromUID(this.parent.getDataRows()[t].getAttribute("data-uid"));return e.changes?e.changes:e.data},r.prototype.keyDownHandler=function(t){if(("tab"===t.action||"shiftTab"===t.action)&&this.parent.isEdit){var e=this.parent,i=this.getBottomIndex(),n=pe(t.target,tn);if(n){var s=n.querySelector(".e-field");if(s){var o=this.parent.getVisibleColumns();o["tab"===t.action?o.length-1:0].field===s.getAttribute("id").slice(this.parent.element.id.length)&&(this.cellDetails.rowIndex===i&&"tab"===t.action?"Top"===e.editSettings.newRowPosition?(e.editSettings.newRowPosition="Bottom",this.addRecord(),e.editSettings.newRowPosition="Top"):this.addRecord():this.saveCell())}}}},r.prototype.addCancelWhilePaging=function(){this.validateFormObj()&&(this.parent.notify(V8,{}),this.parent.isEdit=!1,this.isColored=!1)},r.prototype.getBottomIndex=function(){var t=this.getBatchChanges();return this.parent.getCurrentViewRecords().length+t[Af].length-t[bC].length-1},r}(),WIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),qIe=function(r){function t(e,i,n){var s=r.call(this,e,i)||this;return s.parent=e,s.serviceLocator=i,s.renderer=n,s}return WIe(t,r),t.prototype.closeEdit=function(){r.prototype.closeEdit.call(this)},t.prototype.addRecord=function(e,i){r.prototype.addRecord.call(this,e,i)},t.prototype.endEdit=function(){r.prototype.endEdit.call(this)},t.prototype.updateRow=function(e,i){r.prototype.updateRow.call(this,e,i)},t.prototype.deleteRecord=function(e,i){r.prototype.deleteRecord.call(this,e,i)},t.prototype.startEdit=function(e){r.prototype.startEdit.call(this,e)},t}(soe),GIe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),aoe=function(r){function t(){return null!==r&&r.apply(this,arguments)||this}return GIe(t,r),t.prototype.write=function(e){this.edit=this.parent.editModule,"datepickeredit"===e.column.editType?this.obj=new hV(he(loe(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params)):"datetimepickeredit"===e.column.editType&&(this.obj=new f8(he(loe(e,this.parent.editSettings.mode,this.parent.enableRtl,this.parent.cssClass,this),e.column.edit.params))),this.obj.appendTo(e.element)},t}(qg);function loe(r,t,e,i,n){var s="Dialog"!==t,o=function u2(r,t){var n="format",s="type";return(new Vr).getDatePattern("date"===t?"object"==typeof r?{type:r[s]?r[s]:"date",format:r[n]}:{type:"dateTime",skeleton:r}:"object"==typeof r?{type:r[s]?r[s]:"dateTime",format:r[n]}:{type:"dateTime",skeleton:r},!1)}(r.column.format,r.column.type),a=vs(r.column.field,r.rowData);return{floatLabelType:s?"Never":"Always",value:a=a?new Date(a):null,format:o,placeholder:s?"":r.column.headerText,enableRtl:e,enabled:Ug(r.column,r.requestType,r.element),cssClass:i||null,close:KIe.bind(n)}}function KIe(r){r.event&&"escape"===r.event.action&&(this.edit.editCellDialogClose=!0)}var $Ie=function(){function r(t){this.parent=t}return r.prototype.read=function(t,e){return e},r.prototype.write=function(){},r.prototype.destroy=function(){},r}(),YIe=function(){function r(t,e){this.editType={Inline:ooe,Normal:ooe,Batch:UIe,Dialog:qIe},this.editCellDialogClose=!1,this.parent=t,this.serviceLocator=e,this.l10n=this.serviceLocator.getService("localization"),this.addEventListener(),this.updateEditObj(),this.createAlertDlg(),this.createConfirmDlg()}return r.prototype.updateColTypeObj=function(){for(var t=this.parent.columnModel,e=0;e<t.length;e++)t[e].edit=he(this.parent.editSettings.template||t[e].editTemplate?new r.editCellType.templateedit(this.parent):new r.editCellType[t[e].editType&&r.editCellType[t[e].editType]?t[e].editType:"defaultedit"](this.parent,this.serviceLocator),t[e].edit||{});this.parent.log("primary_column_missing")},r.prototype.getModuleName=function(){return"edit"},r.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName())for(var e=this.parent,i=0,n=Object.keys(t.properties);i<n.length;i++)switch(n[i]){case"allowAdding":case"allowDeleting":case"allowEditing":(e.editSettings.allowAdding||e.editSettings.allowEditing||e.editSettings.allowDeleting)&&this.initialEnd();break;case"mode":this.updateEditObj(),e.isEdit=!1,e.refresh()}},r.prototype.updateEditObj=function(){this.editModule&&this.editModule.destroy(),this.renderer=new PIe(this.parent,this.serviceLocator),this.editModule=new this.editType[this.parent.editSettings.mode](this.parent,this.serviceLocator,this.renderer)},r.prototype.initialEnd=function(){this.updateColTypeObj()},r.prototype.startEdit=function(t){var e=this.parent;if(e.editSettings.allowEditing&&!e.isEdit&&"Batch"!==e.editSettings.mode){if(this.parent.element.classList.add("e-editing"),e.getSelectedRows().length)t||(t=e.getSelectedRows()[0]);else if(!t)return void this.showDialog("EditOperationAlert",this.alertDObj);this.isLastRow=t.rowIndex===this.parent.getContent().querySelector("tr:last-child").rowIndex,"none"!==t.style.display&&(this.editModule.startEdit(t),this.refreshToolbar(),e.element.querySelector(".e-gridpopup").style.display="none",this.parent.notify("start-edit",{}))}},r.prototype.checkLastRow=function(t,e){var i=this.isLastRow;"auto"!==this.parent.height&&"Bottom"===this.parent.editSettings.newRowPosition&&e&&"add"===e.requestType&&this.parent.getContent().firstElementChild.offsetHeight>this.parent.getContentTable().scrollHeight?N([].slice.call(t.getElementsByClassName(tn)),"e-lastrowadded"):i&&t&&t.classList&&N([].slice.call(t.getElementsByClassName(tn)),"e-lastrowcell")},r.prototype.closeEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&this.parent.element.getElementsByClassName("e-updatedtd").length?this.showDialog("CancelEdit",this.dialogObj):(this.parent.element.classList.remove("e-editing"),this.editModule.closeEdit(),this.refreshToolbar(),this.parent.notify(hse,{}))},r.prototype.refreshToolbar=function(){this.parent.notify(qv,{})},r.prototype.addRecord=function(t,e){if(this.parent.editSettings.allowAdding){var i={startEdit:!0};t||this.parent.notify("virtual-scroll-add-action-begin",i),i.startEdit&&(this.parent.element.classList.add("e-editing"),this.editModule.addRecord(t,e),this.refreshToolbar(),this.parent.notify("start-add",{}))}},r.prototype.deleteRecord=function(t,e){var i=this.parent;if(i.editSettings.allowDeleting){if(!e&&!i.getSelectedRecords().length&&f(i.commandDelIndex))return void this.showDialog("DeleteOperationAlert",this.alertDObj);if(i.editSettings.showDeleteConfirmDialog)return void this.showDialog("ConfirmDelete",this.dialogObj);this.editModule.deleteRecord(t,e)}},r.prototype.deleteRow=function(t){this.deleteRowUid=t.getAttribute("data-uid");var e=this.parent.getRowObjectFromUID(this.deleteRowUid);f(e)||this.deleteRecord(null,e.data)},r.prototype.endEdit=function(){"Batch"===this.parent.editSettings.mode&&this.parent.editSettings.showConfirmDialog&&(f(this.formObj)||this.formObj.validate())&&(this.parent.editModule.saveCell(),this.parent.notify(VV,{}),f(this.formObj)||this.formObj.validate())?this.showDialog("BatchSaveConfirm",this.dialogObj):this.endEditing()},r.prototype.updateCell=function(t,e,i){this.editModule.updateCell(t,e,i)},r.prototype.updateRow=function(t,e){this.editModule.updateRow(t,e)},r.prototype.batchCancel=function(){this.closeEdit()},r.prototype.batchSave=function(){this.endEdit()},r.prototype.editCell=function(t,e){this.editModule.editCell(t,e)},r.prototype.editFormValidate=function(){var t=!this.formObj||this.formObj.validate(),e=!this.mFormObj||this.mFormObj.validate(),i=!this.frFormObj||this.frFormObj.validate();return t&&e&&i},r.prototype.getBatchChanges=function(){return this.editModule.getBatchChanges?this.editModule.getBatchChanges():{}},r.prototype.getCurrentEditCellData=function(){var t=this.getCurrentEditedData(this.formObj.element,{});return t[Object.keys(t)[0]]},r.prototype.saveCell=function(){this.editModule.saveCell()},r.prototype.endEditing=function(){this.parent.element.classList.remove("e-editing"),this.editModule.endEdit(),this.refreshToolbar()},r.prototype.showDialog=function(t,e){e.content="<div>"+this.l10n.getConstant(t)+"</div>",e.dataBind(),e.show()},r.prototype.getValueFromType=function(t,e){var i=e;switch(t.type){case"number":i=isNaN(parseFloat(e))?null:parseFloat(e);break;case"boolean":"booleanedit"!==t.editType&&(i=e===this.l10n.getConstant("True")||!0===e);break;case"date":case"datetime":"datepickeredit"!==t.editType&&"datetimepickeredit"!==t.editType&&e&&e.length?i=new Date(e):""===e&&(i=null)}return i},r.prototype.destroyToolTip=function(){for(var e=0,i=[].slice.call(this.parent.element.getElementsByClassName("e-griderror"));e<i.length;e++)Be(i[e]);this.parent.getContent().firstElementChild.style.position="relative"},r.prototype.createConfirmDlg=function(){this.dialogObj=this.dlgWidget([{click:this.dlgOk.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.dlgCancel.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.l10n.getConstant("CancelButton")}}],"EditConfirm")},r.prototype.createAlertDlg=function(){this.alertDObj=this.dlgWidget([{click:this.alertClick.bind(this),buttonModel:{content:this.l10n.getConstant("OKButton"),cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",isPrimary:!0}}],"EditAlert")},r.prototype.alertClick=function(){this.alertDObj.hide()},r.prototype.dlgWidget=function(t,e){var i=this.parent.createElement("div",{id:this.parent.element.id+e});this.parent.element.appendChild(i);var n={showCloseIcon:!1,isModal:!0,visible:!1,closeOnEscape:!0,target:this.parent.element,width:"320px",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""};n.buttons=t;var s=new _d(n);return s.isStringTemplate=!0,s.appendTo(i),s},r.prototype.dlgCancel=function(){this.parent.focusModule.clearIndicator(),this.parent.focusModule.restoreFocus(),this.dialogObj.hide(),this.parent.notify("cancelcnfrmDlg",{})},r.prototype.dlgOk=function(){switch(this.dialogObj.element.querySelector(".e-dlg-content").firstElementChild.innerText){case this.l10n.getConstant("ConfirmDelete"):this.editModule.deleteRecord();break;case this.l10n.getConstant("CancelEdit"):this.editModule.closeEdit();break;case this.l10n.getConstant("BatchSaveConfirm"):this.endEditing();break;case this.l10n.getConstant("BatchSaveLostChanges"):"Batch"===this.parent.editSettings.mode&&this.editModule.addCancelWhilePaging(),this.executeAction()}this.dlgCancel()},r.prototype.destroyEditComponents=function(){this.parent.isEdit&&(this.destroyWidgets(),this.destroyForm()),this.destroy()},r.prototype.addEventListener=function(){this.parent.isDestroyed||(this.eventDetails=[{event:Ha,handler:this.onPropertyChanged},{event:Ba,handler:this.initialEnd},{event:Cs,handler:this.keyPressHandler},{event:PS,handler:this.updateColTypeObj},{event:MS,handler:this.destroyToolTip},{event:uu,handler:this.preventBatch},{event:V8,handler:this.destroyForm},{event:dn,handler:this.destroyEditComponents}],uo(this.parent,this.eventDetails,!0,this),this.actionBeginFunction=this.onActionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(dr,this.actionBeginFunction),this.parent.addEventListener(zi,this.actionCompleteFunction))},r.prototype.removeEventListener=function(){this.parent.isDestroyed||(uo(this.parent,this.eventDetails,!1),this.parent.removeEventListener(zi,this.actionCompleteFunction),this.parent.removeEventListener(dr,this.actionBeginFunction))},r.prototype.actionComplete=function(t){["add","beginEdit","save","delete","cancel"].indexOf(t.requestType)<0&&(this.parent.isEdit=!1),"batchsave"===t.requestType&&this.parent.focusModule.restoreFocus(),this.refreshToolbar()},r.prototype.getCurrentEditedData=function(t,e){var i=this.parent;if(i.editSettings.template){for(var n=[].slice.call(t.elements),s=0;s<n.length;s++)if((n[s].hasAttribute("name")&&"e-multi-hidden"!==n[s].className||n[s].classList.contains("e-multiselect"))&&("hidden"!==n[s].type||!pe(n[s],"e-switch-wrapper")&&!pe(n[s],"e-checkbox-wrapper"))){var o=n[s].hasAttribute("name")?a2(n[s].getAttribute("name")):a2(n[s].getAttribute("id")),a=i.getColumnByField(o)||{field:o,type:n[s].getAttribute("type")},l=void 0;"checkbox"===a.type||"boolean"===a.type?l=n[s].checked:n[s].value?(l=n[s].value,n[s].ej2_instances&&n[s].ej2_instances.length&&!f(n[s].ej2_instances[0].value)&&(n[s].blur(),l=n[s].ej2_instances[0].value)):n[s].ej2_instances&&(l=n[s].ej2_instances[0].value),a.edit&&"string"==typeof a.edit.read?l=Q(a.edit.read,window)(n[s],l):a.edit&&a.edit.read&&(l=a.edit.read(n[s],l)),l=i.editModule.getValueFromType(a,l),"radio"===n[s].type?n[s].checked&&qe.setValue(a.field,l,e):qe.setValue(a.field,l,e)}return e}for(var h=i.columnModel.filter(function(_){return _.editTemplate}),u=0;u<h.length;u++)if(t[To(h[u].field)]){var d=[].slice.call(t[To(h[u].field)]),m=(d=d.length?d:[t[To(h[u].field)]]).filter(function(_){return!f(_.ej2_instances)});for(0===m.length&&(m=d.filter(function(_){return _.hasAttribute("name")})),s=0;s<m.length;s++)l=this.getValue(h[u],m[s],e),qe.setValue(h[u].field,l,e)}for(var v=[].slice.call(t.getElementsByClassName("e-field")),C=0,S=v.length;C<S;C++){var A=i.getColumnByUid(v[C].getAttribute("e-mappinguid"));A&&A.field&&(l=this.getValue(A,v[C],e),qe.setValue(A.field,l,e))}return e},r.prototype.getValue=function(t,e,i){var n=e.ej2_instances?e.ej2_instances[0].value:e.value,s=this.parent,o=t.edit.read;return("checkbox"===t.type||"boolean"===t.type)&&(n=e.checked),"string"==typeof o?(o=Q(o,window),n=s.editModule.getValueFromType(t,o(e,n))):n=s.editModule.getValueFromType(t,t.edit.read(e,n)),f(i[t.field])&&""===n&&(n=i[t.field]),n},r.prototype.onActionBegin=function(t){if("columnstate"===t.requestType&&this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode)this.closeEdit();else{var e=this.parent.element.querySelector("."+Va),i=this.parent.element.querySelector("."+Bl);if(e&&this.parent.frozenRows&&"virtualscroll"===t.requestType&&parseInt(pe(e,vn).getAttribute(Ai),10)<this.parent.frozenRows)return;var s=-1===["filterafteropen","filterbeforeopen","filterchoicerequest","save","infiniteScroll","virtualscroll"].indexOf(t.requestType);(!this.parent.enableVirtualization&&"Batch"!==this.parent.editSettings.mode&&this.formObj&&!this.formObj.isDestroyed&&s&&!t.cancel||this.parent.enableVirtualization&&this.formObj&&!this.formObj.isDestroyed&&(e||i||"cancel"===t.requestType)&&s)&&(this.destroyWidgets(),this.destroyForm())}},r.prototype.destroyWidgets=function(t){this.parent.editSettings.template&&(this.parent.destroyTemplate(["editSettingsTemplate"]),this.parent.isReact&&this.parent.renderTemplates()),(t=t||this.parent.getCurrentVisibleColumns(this.parent.enableColumnVirtualization)).some(function(h){return!f(h.editTemplate)})&&(this.parent.destroyTemplate(["editTemplate"]),this.parent.isReact&&this.parent.renderTemplates());for(var i=0,n=t;i<n.length;i++){var s=n[i],o=s.edit.destroy;s.edit.destroy&&("string"==typeof o?(o=Q(o,window))():s.edit.destroy())}for(var a=[].slice.call(this.formObj.element.elements),l=0;l<a.length;l++)a[l].hasAttribute("name")&&a[l].ej2_instances&&a[l].ej2_instances.length&&!a[l].ej2_instances[0].isDestroyed&&a[l].ej2_instances[0].destroy()},r.prototype.destroyForm=function(){this.destroyToolTip();for(var t=[this.formObj,this.mFormObj,this.frFormObj,this.virtualFormObj],e=0;e<t.length;e++)t[e]&&t[e].element&&!t[e].isDestroyed&&t[e].destroy();this.destroyToolTip()},r.prototype.destroy=function(){var t=this.parent.element;if(t){var e=!(!t.querySelector("."+js)||!t.querySelector("."+Ps));e&&this.destroyForm(),this.removeEventListener();var i=this.dialogObj.element;i.childElementCount>0&&(this.dialogObj.destroy(),Be(i)),(i=this.alertDObj.element).childElementCount>0&&(this.alertDObj.destroy(),Be(i)),e&&this.editModule&&this.editModule.destroy()}},r.prototype.keyPressHandler=function(t){switch(t.action){case"insert":this.addRecord();break;case"delete":("INPUT"!==t.target.tagName||t.target.classList.contains("e-checkselect"))&&!document.querySelector(".e-popup-open.e-edit-dialog")&&this.deleteRecord();break;case"f2":this.startEdit();break;case"enter":!pe(t.target,"e-unboundcelldiv")&&"Batch"!==this.parent.editSettings.mode&&(pe(t.target,Ps)||this.parent.frozenRows&&pe(t.target,Ms))&&!document.getElementsByClassName("e-popup-open").length&&(t.preventDefault(),this.endEdit());break;case"escape":this.parent.isEdit&&!this.editCellDialogClose&&("Batch"===this.parent.editSettings.mode?this.editModule.escapeCellEdit():this.curretRowFocus(t)),this.editCellDialogClose&&(this.editCellDialogClose=!1);break;case"tab":case"shiftTab":this.curretRowFocus(t)}},r.prototype.curretRowFocus=function(t){if(this.parent.isEdit&&"Batch"!==this.parent.editSettings.mode){var e=pe(t.target,"e-editedrow")||pe(t.target,"e-addedrow");if(e){var i=e.classList.contains("e-addedrow")?"e-addedrow":"e-editedrow",n=[].slice.call(e.querySelectorAll(".e-input:not(.e-disabled)")),s=[].slice.call(e.querySelectorAll(".e-unboundcell"));if(s)for(var o=0;o<s.length;o++)n=n.concat([].slice.call(s[o].querySelectorAll(".e-btn:not(.e-hide)")));if(this.parent.isFrozenGrid())if(f(this.parent.frozenRows)||f(pe(t.target,"e-frozenheader"))&&f(pe(t.target,"e-movableheader"))){var h=this.parent.getContent().querySelector(".e-movablecontent ."+i);if(n.push.apply(n,[].slice.call(h.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var u=this.parent.getContent().querySelector(".e-frozen-right-content ."+i);n.push.apply(n,[].slice.call(u.querySelectorAll(".e-input:not(.e-disabled)")))}}else{var a=this.parent.getHeaderContent().querySelector(".e-movableheader ."+i);if(n.push.apply(n,[].slice.call(a.querySelectorAll(".e-input:not(.e-disabled)"))),"Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode()){var l=this.parent.getHeaderContent().querySelector(".e-frozen-right-header ."+i);n.push.apply(n,[].slice.call(l.querySelectorAll(".e-input:not(.e-disabled)")))}}var d=pe(t.target,"e-rowcell");if(d===pe(n[n.length-1],"e-rowcell")&&"tab"===t.action&&!d.classList.contains("e-unboundcell")||d===pe(n[0],"e-rowcell")&&"shiftTab"===t.action||"escape"===t.action){var m=e.getAttribute("data-uid"),v=this.parent.getRows();("Left-Right"===this.parent.getFrozenMode()||"Right"===this.parent.getFrozenMode())&&(v=this.parent.getFrozenRightRows()),(this.parent.getFrozenColumns()||"Left"===this.parent.getFrozenMode())&&(v=this.parent.getMovableRows());var C=v.map(function(S){return S.getAttribute("data-uid")}).indexOf(m);this.parent.frozenRows&&pe(e,"e-content")&&(C-=this.parent.frozenRows),e.classList.contains("e-addedrow")&&(C=0),"escape"===t.action?this.closeEdit():this.endEdit(),this.parent.focusModule.active&&(this.parent.focusModule.active.matrix.current=[C,0])}}}},r.prototype.preventBatch=function(t){this.preventObj=t,this.showDialog("BatchSaveLostChanges",this.dialogObj)},r.prototype.executeAction=function(){this.preventObj.handler.call(this.preventObj.instance,this.preventObj.arg1,this.preventObj.arg2,this.preventObj.arg3,this.preventObj.arg4,this.preventObj.arg5,this.preventObj.arg6,this.preventObj.arg7,this.preventObj.arg8)},r.prototype.applyFormValidation=function(t){var e=this.parent,i=e.isFrozenGrid(),n="Normal"===this.parent.editSettings.mode,s="Right"===this.parent.getFrozenMode()&&n?1:0,o="Dialog"!==this.parent.editSettings.mode?e.element.getElementsByClassName("e-gridform")[s]:re("#"+e.element.id+"_dialogEdit_wrapper .e-gridform",document),a="Right"===this.parent.getFrozenMode()&&n?0:1,l=e.element.getElementsByClassName("e-gridform")[a],h={},u={},d={};t=t||e.getColumns();for(var m=0;m<t.length;m++)!t[m].visible&&("Dialog"!==e.editSettings.mode||-1===e.groupSettings.columns.indexOf(t[m].field)&&"Dialog"===e.editSettings.mode)||t[m].validationRules&&Vse(t[m],a,h,u,d,t.length);if(i&&"Dialog"!==this.parent.editSettings.mode){if(this.parent.editModule.mFormObj=this.createFormObj(l,u),this.parent.getFrozenMode()===Zt){var v=e.element.getElementsByClassName("e-gridform")[2];this.parent.editModule.frFormObj=this.createFormObj(v,d)}}else h=he(h,u,d);this.parent.editModule.formObj=this.createFormObj(o,h)},r.prototype.createFormObj=function(t,e){var i=this;return new mve(t,{rules:e,locale:this.parent.locale,validationComplete:function(n){i.validationComplete(n)},customPlacement:function(n,s){var o=n.getAttribute("e-mappinguid"),a={column:i.parent.getColumnByUid(o),error:s,inputElement:n,value:n.value};i.valErrorPlacement(n,s),i.parent.notify("validation-custom-placement",a)}})},r.prototype.valErrorPlacement=function(t,e){if(this.parent.isEdit){var i=e.getAttribute("for"),n=this.getElemTable(t).querySelector("#"+i+"_Error");n?n.querySelector(".e-tip-content").innerHTML=e.outerHTML:this.createTooltip(t,e,i,"")}},r.prototype.getElemTable=function(t){var e,n,i=this.parent;if("Dialog"!==i.editSettings.mode){e=i.frozenRows&&i.frozenRows>(parseInt(U(t,"."+vn).getAttribute(Ai),10)||0);var s=t.name,o=void 0;s&&(o=Wse(this.parent,a2(s))),o&&i.isFrozenGrid()?"frozen-left"===o.getFreezeTableName()?n=e?i.getFrozenVirtualHeader().querySelector("table"):i.getFrozenVirtualContent().querySelector("table"):"frozen-right"===o.getFreezeTableName()?n=e?i.getFrozenRightHeader().querySelector("table"):i.getFrozenRightContent().querySelector("table"):"movable"===o.getFreezeTableName()&&(n=e?i.getMovableVirtualHeader().querySelector("table"):i.getMovableVirtualContent().querySelector("table")):n=e?i.getHeaderTable():i.getContentTable()}else n=re("#"+i.element.id+"_dialogEdit_wrapper",document);return n},r.prototype.resetElemPosition=function(t,e){var i=pe(e.element,tn);if(i){var n=i.getBoundingClientRect().right,s=t.getBoundingClientRect().right;s>n&&(t.style.left=t.offsetLeft-(s-n)+"px")}},r.prototype.validationComplete=function(t){if(this.parent.isEdit){var e=this.getElemTable(t.element).querySelector("#"+t.inputName+"_Error");e&&("failure"===t.status?(e.style.display="",this.resetElemPosition(e,t)):e.style.display="none")}},r.prototype.createTooltip=function(t,e,i,n){var s=this.parent.getColumnByField(i),o=this.parent.getFrozenMode()===Zt&&"Normal"===this.parent.editSettings.mode&&s.getFreezeTableName()===or?this.frFormObj.element:this.formObj.element,a=pe(t,"e-virtual-validation");a&&(o=this.virtualFormObj.element);var l=this.parent.getContent().firstElementChild,h=this.parent.getFrozenColumns()||this.parent.getFrozenLeftColumnsCount()||this.parent.getFrozenRightColumnsCount();h&&(l=this.parent.getMovableVirtualContent());var S,_,u=l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth,d="Dialog"!==this.parent.editSettings.mode,m=U(t,"."+tn),v=U(t,"."+vn),C=this.parent.getContent().querySelector("."+tc),A=!1,M=!1,P=Math.round(this.parent.getContent().clientHeight/this.parent.getRowHeight())-1,B=[].slice.call(C?this.parent.getFrozenVirtualContent().getElementsByClassName(vn):this.parent.getContent().getElementsByClassName(vn));if("Batch"===this.parent.editSettings.mode&&P>1&&B.length>=P&&B[B.length-1].getAttribute(Ai)===v.getAttribute(Ai)&&(M=!0),d){if(this.parent.frozenRows){var j=h?this.parent.getFrozenVirtualHeader().querySelector(rt).children:this.parent.getHeaderTable().querySelector(rt).children;A=(S=j.length>(parseInt(v.getAttribute(Ai),10)||0))&&parseInt(v.getAttribute(Ai),10)===j.length-1}(A||P>1&&B.length>=P&&("Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType||m.classList.contains("e-lastrowcell")&&!v.classList.contains(Bl))||M)&&(_=!0)}var G=d?S?this.parent.getHeaderTable():this.parent.getContentTable():re("#"+this.parent.element.id+"_dialogEdit_wrapper .e-dlg-content",document),ne=G.getBoundingClientRect(),fe=d?this.parent.element.getBoundingClientRect().left:ne.left,Ee=U(t,"td"),Pe=Ee?Ee.getBoundingClientRect():t.parentElement.getBoundingClientRect(),ie=this.parent.createElement("div",{className:"e-tooltip-wrap e-lib e-control e-popup e-griderror",id:i+"_Error",styles:"display:"+n+";top:"+((S?Pe.top+Pe.height:Pe.bottom-ne.top-(h?C.scrollTop:0))+G.scrollTop+9)+"px;left:"+(Pe.left-fe+G.scrollLeft+Pe.width/2)+"px;max-width:"+Pe.width+"px;text-align:center;"});this.parent.cssClass&&ie.classList.add(this.parent.cssClass),d&&ne.left<fe&&(ie.style.left=parseInt(ie.style.left,10)-ne.left+fe+"px");var Te,Ie=this.parent.createElement("div",{className:"e-tip-content"});if(Ie.appendChild(e),_?((Te=this.parent.createElement("div",{className:"e-arrow-tip e-tip-bottom"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-bottom"})),Te.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-bottom"}))):((Te=this.parent.createElement("div",{className:"e-arrow-tip e-tip-top"})).appendChild(this.parent.createElement("div",{className:"e-arrow-tip-outer e-tip-top"})),Te.appendChild(this.parent.createElement("div",{className:"e-arrow-tip-inner e-tip-top"}))),ie.appendChild(Ie),ie.appendChild(Te),a||!h&&!this.parent.frozenRows||"Dialog"===this.parent.editSettings.mode?a?this.virtualFormObj.element.appendChild(ie):this.formObj.element.appendChild(ie):(U(t,"Normal"===this.parent.editSettings.mode?".e-editcell":"."+sr).style.position=0===this.parent.currentViewData.length&&U(t,"."+zn)?"absolute":"relative",ie.style.position="absolute","Batch"===this.parent.editSettings.mode||U(t,"."+tc)||U(t,"."+Zd)||this.parent.frozenRows&&!h?o.appendChild(ie):this.mFormObj.element.appendChild(ie)),!_&&d&&l.getBoundingClientRect().bottom<Pe.bottom+Pe.height){var Re=this.parent.getContent().querySelector(".e-content");h&&0===this.parent.currentViewData.length&&0===Re.scrollTop?Re.scrollTop=ie.offsetHeight+Te.scrollHeight:l.scrollTop=l.scrollTop+ie.offsetHeight+Te.scrollHeight}var je=parseInt(document.defaultView.getComputedStyle(ie,null).getPropertyValue("font-size"),10);if(ie.getBoundingClientRect().width<Pe.width&&ie.querySelector("label").getBoundingClientRect().height/(1.2*je)>=2&&(ie.style.width=ie.style.maxWidth),ie.style.left=(h||this.parent.frozenRows)&&"Dialog"!==this.parent.editSettings.mode?Ee.offsetLeft+(Ee.offsetWidth/2-ie.offsetWidth/2)+"px":parseInt(ie.style.left,10)-ie.offsetWidth/2+"px",d&&!u&&!this.parent.allowPaging||h||this.parent.frozenRows){l.style.position="static";var be=TT(Ee,ie);ie.style.top=be.top+Pe.height+9+"px"}if(_){if(!u||h||"auto"===this.parent.height||this.parent.frozenRows||this.parent.enableVirtualization)ie.style.bottom=Pe.height+9+"px";else{var Me=l.scrollWidth>l.offsetWidth?wC():0;ie.style.bottom=this.parent.height-l.querySelector("table").offsetHeight-Me+Pe.height+9+"px"}if(B.length<P&&"Bottom"===this.parent.editSettings.newRowPosition&&this.editModule.args&&"add"===this.editModule.args.requestType){var Ut=(this.parent.frozenRows?this.parent.frozenRows+(B.length-1):B.length-1)*this.parent.getRowHeight(),Gt=this.parent.getContent().clientHeight-Ut;ie.style.bottom=Gt+9+"px"}ie.style.top=null}},r.prototype.checkColumnIsGrouped=function(t){return!(t.visible||this.parent.groupSettings.columns.indexOf(t.field)>-1)},r.AddEditors=function(t){r.editCellType=he(r.editCellType,t)},r.editCellType={dropdownedit:BIe,numericedit:HIe,datepickeredit:aoe,datetimepickeredit:aoe,booleanedit:FIe,defaultedit:zIe,templateedit:$Ie},r}(),hAe=function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var s in n)n.hasOwnProperty(s)&&(i[s]=n[s])})(t,e)};return function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),uAe=function(r){function t(e,i){var n=r.call(this,e,i)||this;return n.parent=e,n.serviceLocator=i,n.initEvent(),n}return hAe(t,r),t.prototype.initEvent=function(){this.parent.isDestroyed||(this.parent.on(U8,this.initForeignKeyColumns,this),this.parent.on(BV,this.getForeignKeyData,this),this.parent.on(_D,this.generateQueryFormData,this))},t.prototype.initForeignKeyColumns=function(e){for(var i=0;i<e.length;i++)e[i].dataSource=e[i].dataSource instanceof Qe?e[i].dataSource:f(e[i].dataSource)?new Qe:"result"in e[i].dataSource?e[i].dataSource:new Qe(e[i].dataSource)},t.prototype.eventfPromise=function(e,i,n,s){var o=this.getStateEventArgument(i),a=new ul,l=new ul;o.action=e.action;var h=this.parent.getDataModule();return!f(e.action)&&e.action.requestType&&!1!==h.foreignKeyDataState.isDataChanged?(h.setForeignKeyDataState({isPending:!0,resolver:l.resolve}),l.promise.then(function(){a.resolve(s.dataSource)}),o.setColumnData=this.parent.setForeignKeyData.bind(this.parent),this.parent.trigger("columnDataStateChange",o)):(h.setForeignKeyDataState({}),a.resolve(n)),a},t.prototype.getForeignKeyData=function(e){for(var i=this,n=e.column?[e.column]:this.parent.getForeignKeyColumns(),s=[],o=function(h){var u=void 0,d=e.isComplex?a.genarateColumnQuery(n[h]):a.genarateQuery(n[h],e.result.result,!1,!0);d.params=a.parent.query.params;var m=n[h].dataSource;u=m&&"result"in m?a.eventfPromise(e,d,m,n[h]).promise:!m.ready||m.dataSource.offline?m.executeQuery(d):m.ready.then(function(){return m.executeQuery(d)}),s.push(u)},a=this,l=0;l<n.length;l++)o(l);Promise.all(s).then(function(h){for(var u=0;u<h.length;u++)n[u].columnData=h[u].result,"dropdownedit"===n[u].editType&&"result"in n[u].dataSource&&(n[u].edit.params=he(n[u].edit.params,{dataSource:h[u].result,query:new ii,fields:{value:n[u].foreignKeyField||n[u].field,text:n[u].foreignKeyValue}}));e.promise.resolve(e.result)}).catch(function(h){return i.parent.log(["actionfailure","foreign_key_failure"]),e.promise&&e.promise.reject&&e.promise.reject(h),h})},t.prototype.generateQueryFormData=function(e){e.predicate.predicate=this.genarateQuery(e.column,e.column.columnData,!0)},t.prototype.genarateQuery=function(e,i,n,s){var o=this.parent,a=[],l=new ii,h=n?e.foreignKeyField:e.field;if(o.allowPaging||o.enableVirtualization||n){i=new Qe(o.allowGrouping&&o.groupSettings.columns.length&&!n?i.records:i).executeLocal((new ii).select(h));var u=qe.distinct(i,h,!1);h=n?e.field:e.foreignKeyField;for(var d=0;d<u.length;d++)a.push(u[d]&&u[d].getDay?EC({field:h,operator:"equal",value:u[d],matchCase:!1}):new kn(h,"equal",u[d],!1))}return s?a.length?l.where(kn.or(a)):l:a.length?kn.or(a):{predicates:[]}},t.prototype.genarateColumnQuery=function(e){var i=this.parent,n=new ii,s=this.isFiltered(e);if(s.isTrue&&(n=this.filterQuery(n,s.column,!0)),i.searchSettings.key.length){var o=i.searchSettings;e.dataSource instanceof Qe&&e.dataSource.adaptor.getModuleName&&"ODataV4Adaptor"===e.dataSource.adaptor.getModuleName()?n=this.searchQuery(n,e,!0):n.search(o.key,e.foreignKeyValue,o.operator,o.ignoreCase)}return n},t.prototype.isFiltered=function(e){var i=this.parent.filterSettings.columns.filter(function(n){return n.field===e.foreignKeyValue&&n.uid===e.uid});return{column:i,isTrue:!!i.length}},t.prototype.getModuleName=function(){return"foreignKey"},t.prototype.destroy=function(){this.destroyEvent()},t.prototype.destroyEvent=function(){this.parent.isDestroyed||(this.parent.off(U8,this.initForeignKeyColumns),this.parent.off(BV,this.getForeignKeyData),this.parent.off(_D,this.generateQueryFormData))},t}(QV);const xoe=["template"],Toe=["headerTemplate"],Doe=["commandsTemplate"],Ioe=["filterItemTemplate"],Aoe=["editTemplate"],koe=["filterTemplate"],xAe=["footerTemplate"],TAe=["groupFooterTemplate"],DAe=["groupCaptionTemplate"],IAe=["rowTemplate"],AAe=["detailTemplate"],kAe=["toolbarTemplate"],RAe=["pagerTemplate"],_Ae=["editSettingsTemplate"],LAe=["groupSettingsCaptionTemplate"];let OAe=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],PAe=[],MAe=(()=>{class r extends Fw{constructor(e){super(),this.viewContainerRef=e,Fb("currentInstance",this,this.viewContainerRef),this.registerEvents(PAe),this.directivePropList=OAe}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.s_b))},r.\u0275dir=b.lG2({type:r,selectors:[["e-stacked-column"]],contentQueries:function(e,i,n){if(1&e&&(b.Suo(n,xoe,5),b.Suo(n,Toe,5),b.Suo(n,Doe,5),b.Suo(n,Ioe,5),b.Suo(n,Aoe,5),b.Suo(n,koe,5)),2&e){let s;b.iGM(s=b.CRH())&&(i.template=s.first),b.iGM(s=b.CRH())&&(i.headerTemplate=s.first),b.iGM(s=b.CRH())&&(i.commandsTemplate=s.first),b.iGM(s=b.CRH())&&(i.filter_itemTemplate=s.first),b.iGM(s=b.CRH())&&(i.editTemplate=s.first),b.iGM(s=b.CRH())&&(i.filterTemplate=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[b.qOj]}),(0,bo.gn)([ea()],r.prototype,"template",void 0),(0,bo.gn)([ea()],r.prototype,"headerTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"commandsTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"filter_itemTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"editTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"filterTemplate",void 0),r})(),FAe=(()=>{class r extends Nw{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=b.lG2({type:r,selectors:[["e-stacked-columns"]],contentQueries:function(e,i,n){if(1&e&&b.Suo(n,MAe,4),2&e){let s;b.iGM(s=b.CRH())&&(i.children=s)}},features:[b.qOj]}),r})(),NAe=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],BAe=[],AO=(()=>{class r extends Fw{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],Fb("currentInstance",this,this.viewContainerRef),this.registerEvents(BAe),this.directivePropList=NAe}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.s_b))},r.\u0275dir=b.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(b.Suo(n,xoe,5),b.Suo(n,Toe,5),b.Suo(n,Doe,5),b.Suo(n,Ioe,5),b.Suo(n,Aoe,5),b.Suo(n,koe,5),b.Suo(n,FAe,5)),2&e){let s;b.iGM(s=b.CRH())&&(i.template=s.first),b.iGM(s=b.CRH())&&(i.headerTemplate=s.first),b.iGM(s=b.CRH())&&(i.commandsTemplate=s.first),b.iGM(s=b.CRH())&&(i.filter_itemTemplate=s.first),b.iGM(s=b.CRH())&&(i.editTemplate=s.first),b.iGM(s=b.CRH())&&(i.filterTemplate=s.first),b.iGM(s=b.CRH())&&(i.childColumns=s.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[b.qOj]}),(0,bo.gn)([ea()],r.prototype,"template",void 0),(0,bo.gn)([ea()],r.prototype,"headerTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"commandsTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"filter_itemTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"editTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"filterTemplate",void 0),r})(),kO=(()=>{class r extends Nw{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=b.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&b.Suo(n,AO,4),2&e){let s;b.iGM(s=b.CRH())&&(i.children=s)}},features:[b.qOj]}),r})(),HAe=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],VAe=[],RO=(()=>{class r extends Fw{constructor(e){super(),this.viewContainerRef=e,Fb("currentInstance",this,this.viewContainerRef),this.registerEvents(VAe),this.directivePropList=HAe}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.s_b))},r.\u0275dir=b.lG2({type:r,selectors:[["e-column"]],contentQueries:function(e,i,n){if(1&e&&(b.Suo(n,xAe,5),b.Suo(n,TAe,5),b.Suo(n,DAe,5)),2&e){let s;b.iGM(s=b.CRH())&&(i.footerTemplate=s.first),b.iGM(s=b.CRH())&&(i.groupFooterTemplate=s.first),b.iGM(s=b.CRH())&&(i.groupCaptionTemplate=s.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[b.qOj]}),(0,bo.gn)([ea()],r.prototype,"footerTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"groupFooterTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"groupCaptionTemplate",void 0),r})(),_O=(()=>{class r extends Nw{constructor(){super("columns")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=b.lG2({type:r,selectors:[["e-columns"]],contentQueries:function(e,i,n){if(1&e&&b.Suo(n,RO,4),2&e){let s;b.iGM(s=b.CRH())&&(i.children=s)}},features:[b.qOj]}),r})(),zAe=["columns"],jAe=[],UAe=(()=>{class r extends Fw{constructor(e){super(),this.viewContainerRef=e,this.tags=["columns"],Fb("currentInstance",this,this.viewContainerRef),this.registerEvents(jAe),this.directivePropList=zAe}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.s_b))},r.\u0275dir=b.lG2({type:r,selectors:[["e-aggregate"]],contentQueries:function(e,i,n){if(1&e&&b.Suo(n,_O,5),2&e){let s;b.iGM(s=b.CRH())&&(i.childColumns=s.first)}},inputs:{columns:"columns"},features:[b.qOj]}),r})(),WAe=(()=>{class r extends Nw{constructor(){super("aggregates")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275dir=b.lG2({type:r,selectors:[["e-aggregates"]],contentQueries:function(e,i,n){if(1&e&&b.Suo(n,UAe,4),2&e){let s;b.iGM(s=b.CRH())&&(i.children=s)}},features:[b.qOj]}),r})();const qAe=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],GAe=["dataSource"];let S2=(()=>{let r=class extends r2{constructor(e,i,n,s){super(),this.ngEle=e,this.srenderer=i,this.viewContainerRef=n,this.injector=s,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let o=this.injector.get("GridsFilter");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPage");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSelection");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSort");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsReorder");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsRowDD");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsDetailRow");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsToolbar");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsAggregate");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsSearch");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsVirtualScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsEdit");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsResize");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsExcelExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsPdfExport");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsCommandColumn");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsContextMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsFreeze");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnMenu");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsColumnChooser");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsForeignKey");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsInfiniteScroll");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}try{let o=this.injector.get("GridsLazyLoadGroup");-1===this.injectedModules.indexOf(o)&&this.injectedModules.push(o)}catch{}this.registerEvents(qAe),this.addTwoWay.call(this,GAe),Fb("currentInstance",this,this.viewContainerRef),this.context=new rR}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return r.\u0275fac=function(e){return new(e||r)(b.Y36(b.SBq),b.Y36(b.Qsj),b.Y36(b.s_b),b.Y36(b.zs3))},r.\u0275cmp=b.Xpm({type:r,selectors:[["ejs-grid"]],contentQueries:function(e,i,n){if(1&e&&(b.Suo(n,IAe,5),b.Suo(n,AAe,5),b.Suo(n,kAe,5),b.Suo(n,RAe,5),b.Suo(n,_Ae,5),b.Suo(n,LAe,5),b.Suo(n,kO,5),b.Suo(n,WAe,5)),2&e){let s;b.iGM(s=b.CRH())&&(i.rowTemplate=s.first),b.iGM(s=b.CRH())&&(i.detailTemplate=s.first),b.iGM(s=b.CRH())&&(i.toolbarTemplate=s.first),b.iGM(s=b.CRH())&&(i.pagerTemplate=s.first),b.iGM(s=b.CRH())&&(i.editSettings_template=s.first),b.iGM(s=b.CRH())&&(i.groupSettings_captionTemplate=s.first),b.iGM(s=b.CRH())&&(i.childColumns=s.first),b.iGM(s=b.CRH())&&(i.childAggregates=s.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",cssClass:"cssClass",currencyCode:"currencyCode",currentAction:"currentAction",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualMaskRow:"enableVirtualMaskRow",enableVirtualization:"enableVirtualization",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",loadingIndicator:"loadingIndicator",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[b.qOj],decls:0,vars:0,template:function(e,i){},encapsulation:2,changeDetection:0}),(0,bo.gn)([ea()],r.prototype,"rowTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"detailTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"toolbarTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"pagerTemplate",void 0),(0,bo.gn)([ea()],r.prototype,"editSettings_template",void 0),(0,bo.gn)([ea()],r.prototype,"groupSettings_captionTemplate",void 0),r=(0,bo.gn)([X3([rR])],r),r})(),KAe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[[Th]]}),r})();const $Ae={provide:"GridsGroup",useValue:DC},E2={provide:"GridsToolbar",useValue:xIe},x2={provide:"GridsEdit",useValue:YIe},YAe={provide:"GridsForeignKey",useValue:uAe};let ZAe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[[Th]]}),r})();var $G=te(4986),YG=te(6451),Roe=te(3099);function _oe(r,t=bg.y){return r=r??XAe,(0,Xa.e)((e,i)=>{let n,s=!0;e.subscribe((0,Lo.x)(i,o=>{const a=t(o);(s||!r(n,a))&&(s=!1,n=a,i.next(o))}))})}function XAe(r,t){return r===t}var QAe=te(5032),ls=te(880),Cl=te(2011),ZG=(te(1277),te(3942)),Rf=te(4859),vt=te(5861),pu=te(9681),J=te(2090),_f=te(1877);const Loe="@firebase/database";let XG="";function Poe(r){XG=r}class tke{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,J.Wl)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,J.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class ike{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,J.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const Moe=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const t=window[r];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new tke(t)}}catch{}return new ike},KS=Moe("localStorage"),QG=Moe("sessionStorage"),zD=new _f.Yd("@firebase/database"),Foe=function(){let r=1;return function(){return r++}}(),Noe=function(r){const t=(0,J.dS)(r),e=new J.gQ;e.update(t);const i=e.digest();return J.US.encodeByteArray(i)},LO=function(...r){let t="";for(let e=0;e<r.length;e++){const i=r[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=LO.apply(null,i):t+="object"==typeof i?(0,J.Wl)(i):i,t+=" "}return t};let $S=null,Boe=!0;const Hoe=function(r,t){(0,J.hu)(!t||!0===r||!1===r,"Can't turn on custom loggers persistently."),!0===r?(zD.logLevel=_f.in.VERBOSE,$S=zD.log.bind(zD),t&&QG.set("logging_enabled",!0)):"function"==typeof r?$S=r:($S=null,QG.remove("logging_enabled"))},Hl=function(...r){if(!0===Boe&&(Boe=!1,null===$S&&!0===QG.get("logging_enabled")&&Hoe(!0)),$S){const t=LO.apply(null,r);$S(t)}},OO=function(r){return function(...t){Hl(r,...t)}},JG=function(...r){const t="FIREBASE INTERNAL ERROR: "+LO(...r);zD.error(t)},Gg=function(...r){const t=`FIREBASE FATAL ERROR: ${LO(...r)}`;throw zD.error(t),new Error(t)},Bh=function(...r){const t="FIREBASE WARNING: "+LO(...r);zD.warn(t)},T2=function(r){return"number"==typeof r&&(r!=r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},Zv="[MIN_NAME]",Kg="[MAX_NAME]",YS=function(r,t){if(r===t)return 0;if(r===Zv||t===Kg)return-1;if(t===Zv||r===Kg)return 1;{const e=D2(r),i=D2(t);return null!==e?null!==i?e-i==0?r.length-t.length:e-i:-1:null!==i?1:r<t?-1:1}},ske=function(r,t){return r===t?0:r<t?-1:1},PO=function(r,t){if(t&&r in t)return t[r];throw new Error("Missing required key ("+r+") in object: "+(0,J.Wl)(t))},e7=function(r){if("object"!=typeof r||null===r)return(0,J.Wl)(r);const t=[];for(const i in r)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,J.Wl)(t[i]),e+=":",e+=e7(r[t[i]]);return e+="}",e},Voe=function(r,t){const e=r.length;if(e<=t)return[r];const i=[];for(let n=0;n<e;n+=t)i.push(r.substring(n,n+t>e?e:n+t));return i};function Vl(r,t){for(const e in r)r.hasOwnProperty(e)&&t(e,r[e])}const zoe=function(r){(0,J.hu)(!T2(r),"Invalid JSON number");const i=1023;let n,s,o,a,l;0===r?(s=0,o=0,n=1/r==-1/0?1:0):(n=r<0,(r=Math.abs(r))>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(r)/Math.LN2),i),s=a+i,o=Math.round(r*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(r/Math.pow(2,-1074))));const h=[];for(l=52;l;l-=1)h.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(n?1:0),h.reverse();const u=h.join("");let d="";for(l=0;l<64;l+=8){let m=parseInt(u.substr(l,8),2).toString(16);1===m.length&&(m="0"+m),d+=m}return d.toLowerCase()},hke=new RegExp("^-?(0*)\\d{1,10}$"),t7=2147483647,D2=function(r){if(hke.test(r)){const t=Number(r);if(t>=-2147483648&&t<=t7)return t}return null},jD=function(r){try{r()}catch(t){setTimeout(()=>{throw Bh("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},MO=function(r,t){const e=setTimeout(r,t);return"number"==typeof e&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):"object"==typeof e&&e.unref&&e.unref(),e};class cke{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){Bh(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class dke{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(n=>this.auth_=n)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(Hl("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bh(t)}}let FO=(()=>{class r{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return r.OWNER="owner",r})();const Koe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Xoe="long_polling";class n7{constructor(t,e,i,n,s=!1,o="",a=!1){this.secure=e,this.namespace=i,this.webSocketOnly=n,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=KS.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&KS.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Qoe(r,t,e){let i;if((0,J.hu)("string"==typeof t,"typeof type must == string"),(0,J.hu)("object"==typeof e,"typeof params must == object"),"websocket"===t)i=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else{if(t!==Xoe)throw new Error("Unknown connection type: "+t);i=(r.secure?"https://":"http://")+r.internalHost+"/.lp?"}(function pke(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams})(r)&&(e.ns=r.namespace);const n=[];return Vl(e,(s,o)=>{n.push(s+"="+o)}),i+n.join("&")}class fke{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,J.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,J.p$)(this.counters_)}}const r7={},s7={};function o7(r){const t=r.toString();return r7[t]||(r7[t]=new fke),r7[t]}class mke{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let n=0;n<i.length;++n)i[n]&&jD(()=>{this.onMessage_(i[n])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class IC{constructor(t,e,i,n,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=n,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=OO(t),this.stats_=o7(e),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),Qoe(e,Xoe,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new mke(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(r){if((0,J.Yr)()||"complete"===document.readyState)r();else{let t=!1;const e=function(){document.body?t||(t=!0,r()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new a7((...s)=>{const[o,a,l,h,u]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Koe.test(location.hostname)&&(i.r="f");const n=this.urlFn(i);this.log_("Connecting via long-poll to "+n),this.scriptTagHolder.addTag(n,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){IC.forceAllow_=!0}static forceDisallow(){IC.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!IC.forceAllow_&&(IC.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,J.Wl)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,J.h$)(e),n=Voe(i,1840);for(let s=0;s<n.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,J.Wl)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class a7{constructor(t,e,i,n){if(this.onDisconnect=i,this.urlFn=n,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=Foe(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=a7.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Hl("frame writing exception"),a.stack&&Hl(a.stack),Hl(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||Hl("No IE domain setting required")}catch{const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",n=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const o=this.pendingSegs.shift();i=i+"&seg"+n+"="+o.seg+"&ts"+n+"="+o.ts+"&d"+n+"="+o.d,n++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},n=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(n),i()})}addTag(t,e){(0,J.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const n=i.readyState;(!n||"loaded"===n||"complete"===n)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{Hl("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}let A2=null;typeof MozWebSocket<"u"?A2=MozWebSocket:typeof WebSocket<"u"&&(A2=WebSocket);let UD=(()=>{class r{constructor(e,i,n,s,o,a,l){this.connId=e,this.applicationId=n,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=OO(this.connId),this.stats_=o7(i),this.connURL=r.connectionURL_(i,a,l,s,n),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,n,s,o){const a={v:"5"};return!(0,J.Yr)()&&typeof location<"u"&&location.hostname&&Koe.test(location.hostname)&&(a.r="f"),i&&(a.s=i),n&&(a.ls=n),s&&(a.ac=s),o&&(a.p=o),Qoe(e,"websocket",a)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,KS.set("previous_websocket_failure",!0);try{let n;if((0,J.Yr)()){n={headers:{"User-Agent":`Firebase/5/${XG}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(n.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(n.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(n.proxy={origin:a})}this.mySock=new A2(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){r.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==A2&&!r.forceDisallow_}static previouslyFailed(){return KS.isInMemoryStorage||!0===KS.get("previous_websocket_failure")}markConnectionHealthy(){KS.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const n=(0,J.cI)(i);this.onMessage(n)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const n=this.extractFrameCount_(i);null!==n&&this.appendFrame_(n)}}send(e){this.resetKeepAlive();const i=(0,J.Wl)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const n=Voe(i,16384);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return r.responsesRequiredToBeHealthy=2,r.healthyTimeout=3e4,r})(),sae=(()=>{class r{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[IC,UD]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=UD&&UD.isAvailable();let n=i&&!UD.previouslyFailed();if(e.webSocketOnly&&(i||Bh("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[UD];else{const s=this.transports_=[];for(const o of r.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);r.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return r.globalTransportInitialized_=!1,r})();class dae{constructor(t,e,i,n,s,o,a,l,h,u){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=n,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=h,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=OO("c:"+this.id+":"),this.transportManager_=new sae(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const n=t.healthyTimeout||0;n>0&&(this.healthyTimeout_=MO(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(n)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=PO("t",t),i=PO("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=PO("t",t),i=PO("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=PO("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?JG("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JG("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,n=t.h;this.sessionId=t.s,this.repoInfo_.host=n,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&Bh("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),MO(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):MO(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(KS.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pae{put(t,e,i,n){}merge(t,e,i,n){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class fae{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,J.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let n=0;n<i.length;n++)i[n].callback.apply(i[n].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const n=this.getInitialEvent(t);n&&e.apply(i,n)}off(t,e,i){this.validateEventType_(t);const n=this.listeners_[t]||[];for(let s=0;s<n.length;s++)if(n[s].callback===e&&(!i||i===n[s].context))return void n.splice(s,1)}validateEventType_(t){(0,J.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class k2 extends fae{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new k2}getInitialEvent(t){return(0,J.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Ss{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let n=0;n<this.pieces_.length;n++)this.pieces_[n].length>0&&(this.pieces_[i]=this.pieces_[n],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function hs(){return new Ss("")}function Er(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function AC(r){return r.pieces_.length-r.pieceNum_}function Qs(r){let t=r.pieceNum_;return t<r.pieces_.length&&t++,new Ss(r.pieces_,t)}function h7(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function NO(r,t=0){return r.pieces_.slice(r.pieceNum_+t)}function vae(r){if(r.pieceNum_>=r.pieces_.length)return null;const t=[];for(let e=r.pieceNum_;e<r.pieces_.length-1;e++)t.push(r.pieces_[e]);return new Ss(t,0)}function jo(r,t){const e=[];for(let i=r.pieceNum_;i<r.pieces_.length;i++)e.push(r.pieces_[i]);if(t instanceof Ss)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let n=0;n<i.length;n++)i[n].length>0&&e.push(i[n])}return new Ss(e,0)}function xr(r){return r.pieceNum_>=r.pieces_.length}function fu(r,t){const e=Er(r),i=Er(t);if(null===e)return t;if(e===i)return fu(Qs(r),Qs(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+r+")")}function Bke(r,t){const e=NO(r,0),i=NO(t,0);for(let n=0;n<e.length&&n<i.length;n++){const s=YS(e[n],i[n]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function u7(r,t){if(AC(r)!==AC(t))return!1;for(let e=r.pieceNum_,i=t.pieceNum_;e<=r.pieces_.length;e++,i++)if(r.pieces_[e]!==t.pieces_[i])return!1;return!0}function tp(r,t){let e=r.pieceNum_,i=t.pieceNum_;if(AC(r)>AC(t))return!1;for(;e<r.pieces_.length;){if(r.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class Hke{constructor(t,e){this.errorPrefix_=e,this.parts_=NO(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,J.ug)(this.parts_[i]);yae(this)}}function yae(r){if(r.byteLength_>768)throw new Error(r.errorPrefix_+"has a key path longer than 768 bytes ("+r.byteLength_+").");if(r.parts_.length>32)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ZS(r))}function ZS(r){return 0===r.parts_.length?"":"in property '"+r.parts_.join(".")+"'"}class c7 extends fae{constructor(){let t,e;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new c7}getInitialEvent(t){return(0,J.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const BO=1e3;let _2,XS=(()=>{class r extends pae{constructor(e,i,n,s,o,a,l,h){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=h,this.id=r.nextPersistentConnectionId_++,this.log_=OO("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=BO,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,h&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");c7.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&k2.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,n){const s=++this.requestNumber_,o={r:s,a:e,b:i};this.log_((0,J.Wl)(o)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[s]=n)}get(e){this.initConnection_();const i=new J.BH,n={p:e._path.toString(),q:e._queryObject};return this.outstandingGets_.push({action:"g",request:n,onComplete:a=>{const l=a.d;"ok"===a.s?i.resolve(l):i.reject(l)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(e,i,n,s){this.initConnection_();const o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,J.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:i,query:e,tag:n};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(n)})}sendListen_(e){const i=e.query,n=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+n+" for "+s);const o={p:n};e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,l=>{const h=l.d,u=l.s;r.warnOnListenWarnings_(h,i),(this.listens.get(n)&&this.listens.get(n).get(s))===e&&(this.log_("listen response",l),"ok"!==u&&this.removeListen_(n,s),e.onComplete&&e.onComplete(u,h))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,J.r3)(e,"w")){const n=(0,J.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Bh(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,J.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,J.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(i,n,s=>{const o=s.s,a=s.d||"error";this.authToken_===e&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,n=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,n)})}unlisten(e,i){const n=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),(0,J.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,e._queryObject,i)}sendUnlisten_(e,i,n,s){this.log_("Unlisten on "+e+" for "+i);const o={p:e};s&&(o.q=n,o.t=s),this.sendRequest("n",o)}onDisconnectPut(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:n})}onDisconnectMerge(e,i,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:n})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,n,s){const o={p:i,d:n};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,i,n,s){this.putInternal("p",e,i,n,s)}merge(e,i,n,s){this.putInternal("m",e,i,n,s)}putInternal(e,i,n,s,o){this.initConnection_();const a={p:i,d:n};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,n,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,n=>{"ok"!==n.s&&this.log_("reportStats","Error sending stats: "+n.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,J.Wl)(e));const i=e.r,n=this.requestCBHash_[i];n&&(delete this.requestCBHash_[i],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):JG("Unrecognized action received from server: "+(0,J.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=BO,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=BO,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=BO),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,vt.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),n=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),o=e.id+":"+r.nextConnectionId_++,a=e.lastSessionId;let l=!1,h=null;const u=function(){h?h.close():(l=!0,s())};e.realtime_={close:u,sendRequest:function(v){(0,J.hu)(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)}};const m=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[v,C]=yield Promise.all([e.authTokenProvider_.getToken(m),e.appCheckTokenProvider_.getToken(m)]);l?Hl("getToken() completed but was canceled"):(Hl("getToken() completed. Creating connection."),e.authToken_=v&&v.accessToken,e.appCheckToken_=C&&C.token,h=new dae(o,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,n,s,S=>{Bh(S+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},a))}catch(v){e.log_("Failed to get token: "+v),l||(e.repoInfo_.nodeAdmin&&Bh(v),u())}}})()}interrupt(e){Hl("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hl("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=BO,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let n;n=i?i.map(o=>e7(o)).join("$"):"default";const s=this.removeListen_(e,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const n=new Ss(e).toString();let s;if(this.listens.has(n)){const o=this.listens.get(n);s=o.get(i),o.delete(i),0===o.size&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(e,i){Hl("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){Hl("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,J.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+XG.replace(/\./g,"-")]=1,(0,J.uI)()?e["framework.cordova"]=1:(0,J.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=k2.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&e}}return r.nextPersistentConnectionId_=0,r.nextConnectionId_=0,r})();class Or{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new Or(t,e)}}class R2{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new Or(Zv,t),n=new Or(Zv,e);return 0!==this.compare(i,n)}minPost(){return Or.MIN}}class wae extends R2{static get __EMPTY_NODE(){return _2}static set __EMPTY_NODE(t){_2=t}compare(t,e){return YS(t.name,e.name)}isDefinedOn(t){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return Or.MIN}maxPost(){return new Or(Kg,_2)}makePost(t,e){return(0,J.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Or(t,_2)}toString(){return".key"}}const $g=new wae;class L2{constructor(t,e,i,n,s=null){this.isReverse_=n,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(o=e?i(t.key,e):1,n&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let p7,Lf=(()=>{class r{constructor(e,i,n,s,o){this.key=e,this.value=i,this.color=n??r.RED,this.left=s??rc.EMPTY_NODE,this.right=o??rc.EMPTY_NODE}copy(e,i,n,s,o){return new r(e??this.key,i??this.value,n??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,n){let s=this;const o=n(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,i,n),null):0===o?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return rc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let n,s;if(n=this,i(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,i),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===i(e,n.key)){if(n.right.isEmpty())return rc.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,i))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return r.RED=!0,r.BLACK=!1,r})();class rc{constructor(t,e=rc.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new rc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Lf.BLACK,null,null))}remove(t){return new rc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Lf.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,n=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return n?n.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(n=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new L2(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new L2(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new L2(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new L2(this.root_,null,this.comparator_,!0,t)}}function Kke(r,t){return YS(r.name,t.name)}function d7(r,t){return YS(r,t)}rc.EMPTY_NODE=new class Gke{copy(t,e,i,n,s){return this}insert(t,e,i){return new Lf(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Sae=function(r){return"number"==typeof r?"number:"+zoe(r):"string:"+r},Eae=function(r){if(r.isLeafNode()){const t=r.val();(0,J.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,J.r3)(t,".sv"),"Priority must be a string or number.")}else(0,J.hu)(r===p7||r.isEmpty(),"priority of unexpected type.");(0,J.hu)(r===p7||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xae,Tae,Dae,WD=(()=>{class r{constructor(e,i=r.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Eae(this.priorityNode_)}static set __childrenNodeConstructor(e){xae=e}static get __childrenNodeConstructor(){return xae}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new r(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return xr(e)?this:".priority"===Er(e)?this.priorityNode_:r.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:r.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const n=Er(e);return null===n?i:i.isEmpty()&&".priority"!==n?this:((0,J.hu)(".priority"!==n||1===AC(e),".priority must be the last token in a path"),this.updateImmediateChild(n,r.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qs(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Sae(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?zoe(this.value_):this.value_,this.lazyHash_=Noe(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===r.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof r.__childrenNodeConstructor?-1:((0,J.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,n=typeof this.value_,s=r.VALUE_TYPE_ORDER.indexOf(i),o=r.VALUE_TYPE_ORDER.indexOf(n);return(0,J.hu)(s>=0,"Unknown leaf type: "+i),(0,J.hu)(o>=0,"Unknown leaf type: "+n),s===o?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return r.VALUE_TYPE_ORDER=["object","boolean","number","string"],r})();const co=new class Xke extends R2{compare(t,e){const i=t.node.getPriority(),n=e.node.getPriority(),s=i.compareTo(n);return 0===s?YS(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return Or.MIN}maxPost(){return new Or(Kg,new WD("[PRIORITY-POST]",Dae))}makePost(t,e){const i=Tae(t);return new Or(e,new WD("[PRIORITY-POST]",i))}toString(){return".priority"}},Qke=Math.log(2);class Jke{constructor(t){this.count=parseInt(Math.log(t+1)/Qke,10),this.current_=this.count-1;const n=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&n}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const O2=function(r,t,e,i){r.sort(t);const n=function(l,h){const u=h-l;let d,m;if(0===u)return null;if(1===u)return d=r[l],m=e?e(d):d,new Lf(m,d.node,Lf.BLACK,null,null);{const v=parseInt(u/2,10)+l,C=n(l,v),S=n(v+1,h);return d=r[v],m=e?e(d):d,new Lf(m,d.node,Lf.BLACK,C,S)}},a=function(l){let h=null,u=null,d=r.length;const m=function(C,S){const A=d-C,_=d;d-=C;const M=n(A+1,_),P=r[A],B=e?e(P):P;v(new Lf(B,P.node,S,null,M))},v=function(C){h?(h.left=C,h=C):(u=C,h=C)};for(let C=0;C<l.count;++C){const S=l.nextBitIsOne(),A=Math.pow(2,l.count-(C+1));S?m(A,Lf.BLACK):(m(A,Lf.BLACK),m(A,Lf.RED))}return u}(new Jke(r.length));return new rc(i||t,a)};let f7;const qD={};class Xv{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,J.hu)(qD&&co,"ChildrenNode.ts has not been loaded"),f7=f7||new Xv({".priority":qD},{".priority":co}),f7}get(t){const e=(0,J.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof rc?e:null}hasIndex(t){return(0,J.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,J.hu)(t!==$g,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let n=!1;const s=e.getIterator(Or.Wrap);let a,o=s.getNext();for(;o;)n=n||t.isDefinedOn(o.node),i.push(o),o=s.getNext();a=n?O2(i,t.getCompare()):qD;const l=t.toString(),h=Object.assign({},this.indexSet_);h[l]=t;const u=Object.assign({},this.indexes_);return u[l]=a,new Xv(u,h)}addToIndexes(t,e){const i=(0,J.UI)(this.indexes_,(n,s)=>{const o=(0,J.DV)(this.indexSet_,s);if((0,J.hu)(o,"Missing index implementation for "+s),n===qD){if(o.isDefinedOn(t.node)){const a=[],l=e.getIterator(Or.Wrap);let h=l.getNext();for(;h;)h.name!==t.name&&a.push(h),h=l.getNext();return a.push(t),O2(a,o.getCompare())}return qD}{const a=e.get(t.name);let l=n;return a&&(l=l.remove(new Or(t.name,a))),l.insert(t,t.node)}});return new Xv(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,J.UI)(this.indexes_,n=>{if(n===qD)return n;{const s=e.get(t.name);return s?n.remove(new Or(t.name,s)):n}});return new Xv(i,this.indexSet_)}}let HO,Xn=(()=>{class r{constructor(e,i,n){this.children_=e,this.priorityNode_=i,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Eae(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return HO||(HO=new r(new rc(d7),null,Xv.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||HO}updatePriority(e){return this.children_.isEmpty()?this:new r(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?HO:i}}getChild(e){const i=Er(e);return null===i?this:this.getImmediateChild(i).getChild(Qs(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,J.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const n=new Or(e,i);let s,o;i.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(e,i),o=this.indexMap_.addToIndexes(n,this.children_));const a=s.isEmpty()?HO:this.priorityNode_;return new r(s,a,o)}}updateChild(e,i){const n=Er(e);if(null===n)return i;{(0,J.hu)(".priority"!==Er(e)||1===AC(e),".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(Qs(e),i);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let n=0,s=0,o=!0;if(this.forEachChild(co,(a,l)=>{i[a]=l.val(e),n++,o&&r.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*n){const a=[];for(const l in i)a[l]=i[l];return a}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Sae(this.getPriority().val())+":"),this.forEachChild(co,(i,n)=>{const s=n.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":Noe(e)}return this.lazyHash_}getPredecessorChildName(e,i,n){const s=this.resolveIndex_(n);if(s){const o=s.getPredecessorKey(new Or(e,i));return o?o.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.minKey();return n&&n.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new Or(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const n=i.maxKey();return n&&n.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new Or(i,this.children_.get(i)):null}forEachChild(e,i){const n=this.resolveIndex_(e);return n?n.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,Or.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const n=this.resolveIndex_(i);if(n)return n.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,Or.Wrap);let o=s.peek();for(;null!=o&&i.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===VO?-1:0}withIndex(e){if(e===$g||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new r(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===$g||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const n=this.getIterator(co),s=i.getIterator(co);let o=n.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=n.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(e){return e===$g?null:this.indexMap_.get(e.toString())}}return r.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,r})();const VO=new class eRe extends Xn{constructor(){super(new rc(d7),Xn.EMPTY_NODE,Xv.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Xn.EMPTY_NODE}isEmpty(){return!1}};function da(r,t=null){if(null===r)return Xn.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),(0,J.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new WD(r,da(t));if(r instanceof Array){let e=Xn.EMPTY_NODE;return Vl(r,(i,n)=>{if((0,J.r3)(r,i)&&"."!==i.substring(0,1)){const s=da(n);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(da(t))}{const e=[];let i=!1;if(Vl(r,(o,a)=>{if("."!==o.substring(0,1)){const l=da(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),e.push(new Or(o,l)))}}),0===e.length)return Xn.EMPTY_NODE;const s=O2(e,Kke,o=>o.name,d7);if(i){const o=O2(e,co.getCompare());return new Xn(s,da(t),new Xv({".priority":o},{".priority":co}))}return new Xn(s,da(t),Xv.Default)}}Object.defineProperties(Or,{MIN:{value:new Or(Zv,Xn.EMPTY_NODE)},MAX:{value:new Or(Kg,VO)}}),wae.__EMPTY_NODE=Xn.EMPTY_NODE,WD.__childrenNodeConstructor=Xn,function $ke(r){p7=r}(VO),function Zke(r){Dae=r}(VO),function Yke(r){Tae=r}(da);class g7 extends R2{constructor(t){super(),this.indexPath_=t,(0,J.hu)(!xr(t)&&".priority"!==Er(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),n=this.extractChild(e.node),s=i.compareTo(n);return 0===s?YS(t.name,e.name):s}makePost(t,e){const i=da(t),n=Xn.EMPTY_NODE.updateChild(this.indexPath_,i);return new Or(e,n)}maxPost(){const t=Xn.EMPTY_NODE.updateChild(this.indexPath_,VO);return new Or(Kg,t)}toString(){return NO(this.indexPath_,0).join("/")}}const m7=new class iRe extends R2{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?YS(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return Or.MIN}maxPost(){return Or.MAX}makePost(t,e){const i=da(t);return new Or(e,i)}toString(){return".value"}},GD="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",nRe=function(){let r=0;const t=[];return function(e){const i=e===r;let n;r=e;const s=new Array(8);for(n=7;n>=0;n--)s[n]=GD.charAt(e%64),e=Math.floor(e/64);(0,J.hu)(0===e,"Cannot push at time == 0");let o=s.join("");if(i){for(n=11;n>=0&&63===t[n];n--)t[n]=0;t[n]++}else for(n=0;n<12;n++)t[n]=Math.floor(64*Math.random());for(n=0;n<12;n++)o+=GD.charAt(t[n]);return(0,J.hu)(20===o.length,"nextPushId: Length should be 20."),o}}(),kae=function(r){if(r===""+t7)return"-";const t=D2(r);if(null!=t)return""+(t+1);const e=new Array(r.length);for(let o=0;o<e.length;o++)e[o]=r.charAt(o);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Kg;const s=GD.charAt(GD.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},Rae=function(r){if("-2147483648"===r)return Zv;const t=D2(r);if(null!=t)return""+(t-1);const e=new Array(r.length);for(let i=0;i<e.length;i++)e[i]=r.charAt(i);return"-"===e[e.length-1]?1===e.length?""+t7:(delete e[e.length-1],e.join("")):(e[e.length-1]=GD.charAt(GD.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function _ae(r){return{type:"value",snapshotNode:r}}function KD(r,t){return{type:"child_added",snapshotNode:t,childName:r}}function zO(r,t){return{type:"child_removed",snapshotNode:t,childName:r}}function jO(r,t,e){return{type:"child_changed",snapshotNode:t,childName:r,oldSnap:e}}class y7{constructor(t){this.index_=t}updateChild(t,e,i,n,s,o){(0,J.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(e);return a.getChild(n).equals(i.getChild(n))&&a.isEmpty()===i.isEmpty()||(null!=o&&(i.isEmpty()?t.hasChild(e)?o.trackChildChange(zO(e,a)):(0,J.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(KD(e,i)):o.trackChildChange(jO(e,i,a))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(co,(n,s)=>{e.hasChild(n)||i.trackChildChange(zO(n,s))}),e.isLeafNode()||e.forEachChild(co,(n,s)=>{if(t.hasChild(n)){const o=t.getImmediateChild(n);o.equals(s)||i.trackChildChange(jO(n,s,o))}else i.trackChildChange(KD(n,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Xn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class UO{constructor(t){this.indexedFilter_=new y7(t.getIndex()),this.index_=t.getIndex(),this.startPost_=UO.getStartPost_(t),this.endPost_=UO.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,n,s,o){return this.matches(new Or(e,i))||(i=Xn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,n,s,o)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Xn.EMPTY_NODE);let n=e.withIndex(this.index_);n=n.updatePriority(Xn.EMPTY_NODE);const s=this;return e.forEachChild(co,(o,a)=>{s.matches(new Or(o,a))||(n=n.updateImmediateChild(o,Xn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class sRe{constructor(t){this.rangedFilter_=new UO(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,n,s,o){return this.rangedFilter_.matches(new Or(e,i))||(i=Xn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,n,s,o):this.fullLimitUpdateChild_(t,e,i,s,o)}updateFullNode(t,e,i){let n;if(e.isLeafNode()||e.isEmpty())n=Xn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;n=Xn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();let l;if(l=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!l)break;n=n.updateImmediateChild(a.name,a.node),o++}}else{let s,o,a,l;if(n=e.withIndex(this.index_),n=n.updatePriority(Xn.EMPTY_NODE),this.reverse_){l=n.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),o=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(m,v)=>d(v,m)}else l=n.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),o=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let h=0,u=!1;for(;l.hasNext();){const d=l.getNext();!u&&a(s,d)<=0&&(u=!0),u&&h<this.limit_&&a(d,o)<=0?h++:n=n.updateImmediateChild(d.name,Xn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,n,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,n,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(m,v)=>d(v,m)}else o=this.index_.getCompare();const a=t;(0,J.hu)(a.numChildren()===this.limit_,"");const l=new Or(e,i),h=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(e)){const d=a.getImmediateChild(e);let m=n.getChildAfterChild(this.index_,h,this.reverse_);for(;null!=m&&(m.name===e||a.hasChild(m.name));)m=n.getChildAfterChild(this.index_,m,this.reverse_);const v=null==m?1:o(m,l);if(u&&!i.isEmpty()&&v>=0)return s?.trackChildChange(jO(e,i,d)),a.updateImmediateChild(e,i);{s?.trackChildChange(zO(e,d));const S=a.updateImmediateChild(e,Xn.EMPTY_NODE);return null!=m&&this.rangedFilter_.matches(m)?(s?.trackChildChange(KD(m.name,m.node)),S.updateImmediateChild(m.name,m.node)):S}}return i.isEmpty()?t:u&&o(h,l)>=0?(null!=s&&(s.trackChildChange(zO(h.name,h.node)),s.trackChildChange(KD(e,i))),a.updateImmediateChild(e,i).updateImmediateChild(h.name,Xn.EMPTY_NODE)):t}}class P2{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=co}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zv}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kg}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===co}copy(){const t=new P2;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function b7(r,t,e){const i=r.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function C7(r,t,e){const i=r.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function M2(r,t){const e=r.copy();return e.index_=t,e}function Lae(r){const t={};if(r.isDefault())return t;let e;return r.index_===co?e="$priority":r.index_===m7?e="$value":r.index_===$g?e="$key":((0,J.hu)(r.index_ instanceof g7,"Unrecognized index type!"),e=r.index_.toString()),t.orderBy=(0,J.Wl)(e),r.startSet_&&(t.startAt=(0,J.Wl)(r.indexStartValue_),r.startNameSet_&&(t.startAt+=","+(0,J.Wl)(r.indexStartName_))),r.endSet_&&(t.endAt=(0,J.Wl)(r.indexEndValue_),r.endNameSet_&&(t.endAt+=","+(0,J.Wl)(r.indexEndName_))),r.limitSet_&&(r.isViewFromLeft()?t.limitToFirst=r.limit_:t.limitToLast=r.limit_),t}function Oae(r){const t={};if(r.startSet_&&(t.sp=r.indexStartValue_,r.startNameSet_&&(t.sn=r.indexStartName_)),r.endSet_&&(t.ep=r.indexEndValue_,r.endNameSet_&&(t.en=r.indexEndName_)),r.limitSet_){t.l=r.limit_;let e=r.viewFrom_;""===e&&(e=r.isViewFromLeft()?"l":"r"),t.vf=e}return r.index_!==co&&(t.i=r.index_.toString()),t}class F2 extends pae{constructor(t,e,i,n){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=n,this.log_=OO("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,J.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,n){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const o=F2.getListenId_(t,i),a={};this.listens_[o]=a;const l=Lae(t._queryParams);this.restRequest_(s+".json",l,(h,u)=>{let d=u;if(404===h&&(d=null,h=null),null===h&&this.onDataUpdate_(s,d,!1,i),(0,J.DV)(this.listens_,o)===a){let m;m=h?401===h?"permission_denied":"rest_error:"+h:"ok",n(m,null)}})}unlisten(t,e){const i=F2.getListenId_(t,e);delete this.listens_[i]}get(t){const e=Lae(t._queryParams),i=t._path.toString(),n=new J.BH;return this.restRequest_(i+".json",e,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(i,a,!1,null),n.resolve(a)):n.reject(new Error(a))}),n.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([n,s])=>{n&&n.accessToken&&(e.auth=n.accessToken),s&&s.token&&(e.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,J.xO)(e);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,J.cI)(a.responseText)}catch{Bh("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else 401!==a.status&&404!==a.status&&Bh("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}class cRe{constructor(){this.rootNode_=Xn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function N2(){return{value:null,children:new Map}}function $D(r,t,e){if(xr(t))r.value=e,r.children.clear();else if(null!==r.value)r.value=r.value.updateChild(t,e);else{const i=Er(t);r.children.has(i)||r.children.set(i,N2()),$D(r.children.get(i),t=Qs(t),e)}}function w7(r,t){if(xr(t))return r.value=null,r.children.clear(),!0;if(null!==r.value){if(r.value.isLeafNode())return!1;{const e=r.value;return r.value=null,e.forEachChild(co,(i,n)=>{$D(r,new Ss(i),n)}),w7(r,t)}}if(r.children.size>0){const e=Er(t);return t=Qs(t),r.children.has(e)&&w7(r.children.get(e),t)&&r.children.delete(e),0===r.children.size}return!0}function S7(r,t,e){null!==r.value?e(t,r.value):function dRe(r,t){r.children.forEach((e,i)=>{t(i,e)})}(r,(i,n)=>{S7(n,new Ss(t.toString()+"/"+i),e)})}class pRe{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&Vl(this.last_,(i,n)=>{e[i]=e[i]-n}),this.last_=t,e}}class mRe{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new pRe(t);const i=1e4+2e4*Math.random();MO(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;Vl(t,(n,s)=>{s>0&&(0,J.r3)(this.statsToReport_,n)&&(e[n]=s,i=!0)}),i&&this.server_.reportStats(e),MO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ip=(()=>(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(ip||(ip={})),ip))();function T7(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}class B2{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=ip.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(xr(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Ss(t));return new B2(hs(),e,this.revert)}}return(0,J.hu)(Er(this.path)===t,"operationForChild called for unrelated child."),new B2(Qs(this.path),this.affectedTree,this.revert)}}class WO{constructor(t,e){this.source=t,this.path=e,this.type=ip.LISTEN_COMPLETE}operationForChild(t){return xr(this.path)?new WO(this.source,hs()):new WO(this.source,Qs(this.path))}}class QS{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=ip.OVERWRITE}operationForChild(t){return xr(this.path)?new QS(this.source,hs(),this.snap.getImmediateChild(t)):new QS(this.source,Qs(this.path),this.snap)}}class YD{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=ip.MERGE}operationForChild(t){if(xr(this.path)){const e=this.children.subtree(new Ss(t));return e.isEmpty()?null:e.value?new QS(this.source,hs(),e.value):new YD(this.source,hs(),e)}return(0,J.hu)(Er(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new YD(this.source,Qs(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class kC{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(xr(t))return this.isFullyInitialized()&&!this.filtered_;const e=Er(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class vRe{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function qO(r,t,e,i,n,s){const o=i.filter(a=>a.type===e);o.sort((a,l)=>function CRe(r,t,e){if(null==t.childName||null==e.childName)throw(0,J.g5)("Should only compare child_ events.");const i=new Or(t.childName,t.snapshotNode),n=new Or(e.childName,e.snapshotNode);return r.index_.compare(i,n)}(r,a,l)),o.forEach(a=>{const l=function bRe(r,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,r.index_)),t}(r,a,s);n.forEach(h=>{h.respondsTo(a.type)&&t.push(h.createEvent(l,r.query_))})})}function H2(r,t){return{eventCache:r,serverCache:t}}function GO(r,t,e,i){return H2(new kC(t,e,i),r.serverCache)}function Mae(r,t,e,i){return H2(r.eventCache,new kC(t,e,i))}function V2(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function JS(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}let D7;class po{constructor(t,e=(()=>(D7||(D7=new rc(ske)),D7))()){this.value=t,this.children=e}static fromObject(t){let e=new po(null);return Vl(t,(i,n)=>{e=e.set(new Ss(i),n)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:hs(),value:this.value};if(xr(t))return null;{const i=Er(t),n=this.children.get(i);if(null!==n){const s=n.findRootMostMatchingPathAndValue(Qs(t),e);return null!=s?{path:jo(new Ss(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(xr(t))return this;{const e=Er(t),i=this.children.get(e);return null!==i?i.subtree(Qs(t)):new po(null)}}set(t,e){if(xr(t))return new po(e,this.children);{const i=Er(t),s=(this.children.get(i)||new po(null)).set(Qs(t),e),o=this.children.insert(i,s);return new po(this.value,o)}}remove(t){if(xr(t))return this.children.isEmpty()?new po(null):new po(null,this.children);{const e=Er(t),i=this.children.get(e);if(i){const n=i.remove(Qs(t));let s;return s=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&s.isEmpty()?new po(null):new po(this.value,s)}return this}}get(t){if(xr(t))return this.value;{const e=Er(t),i=this.children.get(e);return i?i.get(Qs(t)):null}}setTree(t,e){if(xr(t))return e;{const i=Er(t),s=(this.children.get(i)||new po(null)).setTree(Qs(t),e);let o;return o=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new po(this.value,o)}}fold(t){return this.fold_(hs(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((n,s)=>{i[n]=s.fold_(jo(t,n),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,hs(),e)}findOnPath_(t,e,i){const n=!!this.value&&i(e,this.value);if(n)return n;if(xr(t))return null;{const s=Er(t),o=this.children.get(s);return o?o.findOnPath_(Qs(t),jo(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,hs(),e)}foreachOnPath_(t,e,i){if(xr(t))return this;{this.value&&i(e,this.value);const n=Er(t),s=this.children.get(n);return s?s.foreachOnPath_(Qs(t),jo(e,n),i):new po(null)}}foreach(t){this.foreach_(hs(),t)}foreach_(t,e){this.children.inorderTraversal((i,n)=>{n.foreach_(jo(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class Of{constructor(t){this.writeTree_=t}static empty(){return new Of(new po(null))}}function KO(r,t,e){if(xr(t))return new Of(new po(e));{const i=r.writeTree_.findRootMostValueAndPath(t);if(null!=i){const n=i.path;let s=i.value;const o=fu(n,t);return s=s.updateChild(o,e),new Of(r.writeTree_.set(n,s))}{const n=new po(e),s=r.writeTree_.setTree(t,n);return new Of(s)}}}function I7(r,t,e){let i=r;return Vl(e,(n,s)=>{i=KO(i,jo(t,n),s)}),i}function Fae(r,t){if(xr(t))return Of.empty();{const e=r.writeTree_.setTree(t,new po(null));return new Of(e)}}function A7(r,t){return null!=eE(r,t)}function eE(r,t){const e=r.writeTree_.findRootMostValueAndPath(t);return null!=e?r.writeTree_.get(e.path).getChild(fu(e.path,t)):null}function Nae(r){const t=[],e=r.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(co,(i,n)=>{t.push(new Or(i,n))}):r.writeTree_.children.inorderTraversal((i,n)=>{null!=n.value&&t.push(new Or(i,n.value))}),t}function RC(r,t){if(xr(t))return r;{const e=eE(r,t);return new Of(null!=e?new po(e):r.writeTree_.subtree(t))}}function k7(r){return r.writeTree_.isEmpty()}function ZD(r,t){return Bae(hs(),r.writeTree_,t)}function Bae(r,t,e){if(null!=t.value)return e.updateChild(r,t.value);{let i=null;return t.children.inorderTraversal((n,s)=>{".priority"===n?((0,J.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=Bae(jo(r,n),s,e)}),!e.getChild(r).isEmpty()&&null!==i&&(e=e.updateChild(jo(r,".priority"),i)),e}}function z2(r,t){return Uae(t,r)}function DRe(r,t){if(r.snap)return tp(r.path,t);for(const e in r.children)if(r.children.hasOwnProperty(e)&&tp(jo(r.path,e),t))return!0;return!1}function ARe(r){return r.visible}function Hae(r,t,e){let i=Of.empty();for(let n=0;n<r.length;++n){const s=r[n];if(t(s)){const o=s.path;let a;if(s.snap)tp(e,o)?(a=fu(e,o),i=KO(i,a,s.snap)):tp(o,e)&&(a=fu(o,e),i=KO(i,hs(),s.snap.getChild(a)));else{if(!s.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(tp(e,o))a=fu(e,o),i=I7(i,a,s.children);else if(tp(o,e))if(a=fu(o,e),xr(a))i=I7(i,hs(),s.children);else{const l=(0,J.DV)(s.children,Er(a));if(l){const h=l.getChild(Qs(a));i=KO(i,hs(),h)}}}}}return i}function Vae(r,t,e,i,n){if(i||n){const s=RC(r.visibleWrites,t);return!n&&k7(s)?e:n||null!=e||A7(s,hs())?ZD(Hae(r.allWrites,function(h){return(h.visible||n)&&(!i||!~i.indexOf(h.writeId))&&(tp(h.path,t)||tp(t,h.path))},t),e||Xn.EMPTY_NODE):null}{const s=eE(r.visibleWrites,t);if(null!=s)return s;{const o=RC(r.visibleWrites,t);return k7(o)?e:null!=e||A7(o,hs())?ZD(o,e||Xn.EMPTY_NODE):null}}}function j2(r,t,e,i){return Vae(r.writeTree,r.treePath,t,e,i)}function R7(r,t){return function kRe(r,t,e){let i=Xn.EMPTY_NODE;const n=eE(r.visibleWrites,t);if(n)return n.isLeafNode()||n.forEachChild(co,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(e){const s=RC(r.visibleWrites,t);return e.forEachChild(co,(o,a)=>{const l=ZD(RC(s,new Ss(o)),a);i=i.updateImmediateChild(o,l)}),Nae(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}return Nae(RC(r.visibleWrites,t)).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}(r.writeTree,r.treePath,t)}function zae(r,t,e,i){return function RRe(r,t,e,i,n){(0,J.hu)(i||n,"Either existingEventSnap or existingServerSnap must exist");const s=jo(t,e);if(A7(r.visibleWrites,s))return null;{const o=RC(r.visibleWrites,s);return k7(o)?n.getChild(e):ZD(o,n.getChild(e))}}(r.writeTree,r.treePath,t,e,i)}function U2(r,t){return function LRe(r,t){return eE(r.visibleWrites,t)}(r.writeTree,jo(r.treePath,t))}function _7(r,t,e){return function _Re(r,t,e,i){const n=jo(t,e),s=eE(r.visibleWrites,n);return null!=s?s:i.isCompleteForChild(e)?ZD(RC(r.visibleWrites,n),i.getNode().getImmediateChild(e)):null}(r.writeTree,r.treePath,t,e)}function jae(r,t){return Uae(jo(r.treePath,t),r.writeTree)}function Uae(r,t){return{treePath:r,writeTree:t}}class FRe{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,J.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const n=this.changeMap.get(i);if(n){const s=n.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,jO(i,t.snapshotNode,n.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,zO(i,n.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,KD(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,J.g5)("Illegal combination of changes: "+t+" occurred after "+n);this.changeMap.set(i,jO(i,t.snapshotNode,n.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const Wae=new class NRe{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class L7{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new kC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _7(this.writes_,t,i)}}getChildAfterChild(t,e,i){const n=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:JS(this.viewCache_),s=function MRe(r,t,e,i,n,s){return function ORe(r,t,e,i,n,s,o){let a;const l=RC(r.visibleWrites,t),h=eE(l,hs());if(null!=h)a=h;else{if(null==e)return[];a=ZD(l,e)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=o.getCompare(),m=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let v=m.getNext();for(;v&&u.length<n;)0!==d(v,i)&&u.push(v),v=m.getNext();return u}}(r.writeTree,r.treePath,t,e,i,n,s)}(this.writes_,n,e,1,i,t);return 0===s.length?null:s[0]}}function qae(r,t,e,i,n,s){const o=t.eventCache;if(null!=U2(i,e))return t;{let a,l;if(xr(e))if((0,J.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const h=JS(t),d=R7(i,h instanceof Xn?h:Xn.EMPTY_NODE);a=r.filter.updateFullNode(t.eventCache.getNode(),d,s)}else{const h=j2(i,JS(t));a=r.filter.updateFullNode(t.eventCache.getNode(),h,s)}else{const h=Er(e);if(".priority"===h){(0,J.hu)(1===AC(e),"Can't have a priority with additional path components");const u=o.getNode();l=t.serverCache.getNode();const d=zae(i,e,u,l);a=null!=d?r.filter.updatePriority(u,d):o.getNode()}else{const u=Qs(e);let d;if(o.isCompleteForChild(h)){l=t.serverCache.getNode();const m=zae(i,e,o.getNode(),l);d=null!=m?o.getNode().getImmediateChild(h).updateChild(u,m):o.getNode().getImmediateChild(h)}else d=_7(i,h,t.serverCache);a=null!=d?r.filter.updateChild(o.getNode(),h,d,u,n,s):o.getNode()}}return GO(t,a,o.isFullyInitialized()||xr(e),r.filter.filtersNodes())}}function W2(r,t,e,i,n,s,o,a){const l=t.serverCache;let h;const u=o?r.filter:r.filter.getIndexedFilter();if(xr(e))h=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(e,i);h=u.updateFullNode(l.getNode(),v,null)}else{const v=Er(e);if(!l.isCompleteForPath(e)&&AC(e)>1)return t;const C=Qs(e),A=l.getNode().getImmediateChild(v).updateChild(C,i);h=".priority"===v?u.updatePriority(l.getNode(),A):u.updateChild(l.getNode(),v,A,C,Wae,null)}const d=Mae(t,h,l.isFullyInitialized()||xr(e),u.filtersNodes());return qae(r,d,e,n,new L7(n,d,s),a)}function O7(r,t,e,i,n,s,o){const a=t.eventCache;let l,h;const u=new L7(n,t,s);if(xr(e))h=r.filter.updateFullNode(t.eventCache.getNode(),i,o),l=GO(t,h,!0,r.filter.filtersNodes());else{const d=Er(e);if(".priority"===d)h=r.filter.updatePriority(t.eventCache.getNode(),i),l=GO(t,h,a.isFullyInitialized(),a.isFiltered());else{const m=Qs(e),v=a.getNode().getImmediateChild(d);let C;if(xr(m))C=i;else{const S=u.getCompleteChild(d);C=null!=S?".priority"===h7(m)&&S.getChild(vae(m)).isEmpty()?S:S.updateChild(m,i):Xn.EMPTY_NODE}l=v.equals(C)?t:GO(t,r.filter.updateChild(a.getNode(),d,C,m,u,o),a.isFullyInitialized(),r.filter.filtersNodes())}}return l}function Gae(r,t){return r.eventCache.isCompleteForChild(t)}function Kae(r,t,e){return e.foreach((i,n)=>{t=t.updateChild(i,n)}),t}function P7(r,t,e,i,n,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let h,l=t;h=xr(e)?i:new po(null).setTree(e,i);const u=t.serverCache.getNode();return h.children.inorderTraversal((d,m)=>{if(u.hasChild(d)){const C=Kae(0,t.serverCache.getNode().getImmediateChild(d),m);l=W2(r,l,new Ss(d),C,n,s,o,a)}}),h.children.inorderTraversal((d,m)=>{const v=!t.serverCache.isCompleteForChild(d)&&null===m.value;if(!u.hasChild(d)&&!v){const S=Kae(0,t.serverCache.getNode().getImmediateChild(d),m);l=W2(r,l,new Ss(d),S,n,s,o,a)}}),l}class GRe{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,n=new y7(i.getIndex()),s=function oRe(r){return r.loadsAllData()?new y7(r.getIndex()):r.hasLimit()?new sRe(r):new UO(r)}(i);this.processor_=function BRe(r){return{filter:r}}(s);const o=e.serverCache,a=e.eventCache,l=n.updateFullNode(Xn.EMPTY_NODE,o.getNode(),null),h=s.updateFullNode(Xn.EMPTY_NODE,a.getNode(),null),u=new kC(l,o.isFullyInitialized(),n.filtersNodes()),d=new kC(h,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=H2(d,u),this.eventGenerator_=new vRe(this.query_)}get query(){return this.query_}}function YRe(r,t){const e=JS(r.viewCache_);return e&&(r.query._queryParams.loadsAllData()||!xr(t)&&!e.getImmediateChild(Er(t)).isEmpty())?e.getChild(t):null}function $ae(r){return 0===r.eventRegistrations_.length}function Yae(r,t,e){const i=[];if(e){(0,J.hu)(null==t,"A cancel should cancel all event registrations.");const n=r.query._path;r.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(e,n);o&&i.push(o)})}if(t){let n=[];for(let s=0;s<r.eventRegistrations_.length;++s){const o=r.eventRegistrations_[s];if(o.matches(t)){if(t.hasAnyCallback()){n=n.concat(r.eventRegistrations_.slice(s+1));break}}else n.push(o)}r.eventRegistrations_=n}else r.eventRegistrations_=[];return i}function Zae(r,t,e,i){t.type===ip.MERGE&&null!==t.source.queryId&&((0,J.hu)(JS(r.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(V2(r.viewCache_),"Missing event cache, even though we have a server cache"));const n=r.viewCache_,s=function VRe(r,t,e,i,n){const s=new FRe;let o,a;if(e.type===ip.OVERWRITE){const h=e;h.source.fromUser?o=O7(r,t,h.path,h.snap,i,n,s):((0,J.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered()&&!xr(h.path),o=W2(r,t,h.path,h.snap,i,n,a,s))}else if(e.type===ip.MERGE){const h=e;h.source.fromUser?o=function jRe(r,t,e,i,n,s,o){let a=t;return i.foreach((l,h)=>{const u=jo(e,l);Gae(t,Er(u))&&(a=O7(r,a,u,h,n,s,o))}),i.foreach((l,h)=>{const u=jo(e,l);Gae(t,Er(u))||(a=O7(r,a,u,h,n,s,o))}),a}(r,t,h.path,h.children,i,n,s):((0,J.hu)(h.source.fromServer,"Unknown source."),a=h.source.tagged||t.serverCache.isFiltered(),o=P7(r,t,h.path,h.children,i,n,a,s))}else if(e.type===ip.ACK_USER_WRITE){const h=e;o=h.revert?function qRe(r,t,e,i,n,s){let o;if(null!=U2(i,e))return t;{const a=new L7(i,t,n),l=t.eventCache.getNode();let h;if(xr(e)||".priority"===Er(e)){let u;if(t.serverCache.isFullyInitialized())u=j2(i,JS(t));else{const d=t.serverCache.getNode();(0,J.hu)(d instanceof Xn,"serverChildren would be complete if leaf node"),u=R7(i,d)}h=r.filter.updateFullNode(l,u,s)}else{const u=Er(e);let d=_7(i,u,t.serverCache);null==d&&t.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),h=null!=d?r.filter.updateChild(l,u,d,Qs(e),a,s):t.eventCache.getNode().hasChild(u)?r.filter.updateChild(l,u,Xn.EMPTY_NODE,Qs(e),a,s):l,h.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=j2(i,JS(t)),o.isLeafNode()&&(h=r.filter.updateFullNode(h,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=U2(i,hs()),GO(t,h,o,r.filter.filtersNodes())}}(r,t,h.path,i,n,s):function URe(r,t,e,i,n,s,o){if(null!=U2(n,e))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(xr(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return W2(r,t,e,l.getNode().getChild(e),n,s,a,o);if(xr(e)){let h=new po(null);return l.getNode().forEachChild($g,(u,d)=>{h=h.set(new Ss(u),d)}),P7(r,t,e,h,n,s,a,o)}return t}{let h=new po(null);return i.foreach((u,d)=>{const m=jo(e,u);l.isCompleteForPath(m)&&(h=h.set(u,l.getNode().getChild(m)))}),P7(r,t,e,h,n,s,a,o)}}(r,t,h.path,h.affectedTree,i,n,s)}else{if(e.type!==ip.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+e.type);o=function WRe(r,t,e,i,n){const s=t.serverCache;return qae(r,Mae(t,s.getNode(),s.isFullyInitialized()||xr(e),s.isFiltered()),e,i,Wae,n)}(r,t,e.path,i,s)}const l=s.getChanges();return function zRe(r,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const n=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=V2(r);(e.length>0||!r.eventCache.isFullyInitialized()||n&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(_ae(V2(t)))}}(t,o,l),{viewCache:o,changes:l}}(r.processor_,n,t,e,i);return function HRe(r,t){(0,J.hu)(t.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(t.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}(r.processor_,s.viewCache),(0,J.hu)(s.viewCache.serverCache.isFullyInitialized()||!n.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=s.viewCache,Xae(r,s.changes,s.viewCache.eventCache.getNode(),null)}function Xae(r,t,e,i){return function yRe(r,t,e,i){const n=[],s=[];return t.forEach(o=>{"child_changed"===o.type&&r.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function rRe(r,t){return{type:"child_moved",snapshotNode:t,childName:r}}(o.childName,o.snapshotNode))}),qO(r,n,"child_removed",t,i,e),qO(r,n,"child_added",t,i,e),qO(r,n,"child_moved",s,i,e),qO(r,n,"child_changed",t,i,e),qO(r,n,"value",t,i,e),n}(r.eventGenerator_,t,e,i?[i]:r.eventRegistrations_)}let q2,K2;class Qae{constructor(){this.views=new Map}}function M7(r,t,e,i){const n=t.source.queryId;if(null!==n){const s=r.views.get(n);return(0,J.hu)(null!=s,"SyncTree gave us an op for an invalid query."),Zae(s,t,e,i)}{let s=[];for(const o of r.views.values())s=s.concat(Zae(o,t,e,i));return s}}function Jae(r,t,e,i,n){const o=r.views.get(t._queryIdentifier);if(!o){let a=j2(e,n?i:null),l=!1;a?l=!0:i instanceof Xn?(a=R7(e,i),l=!1):(a=Xn.EMPTY_NODE,l=!1);const h=H2(new kC(a,l,!1),new kC(i,n,!1));return new GRe(t,h)}return o}function ele(r){const t=[];for(const e of r.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function _C(r,t){let e=null;for(const i of r.views.values())e=e||YRe(i,t);return e}function tle(r,t){return t._queryParams.loadsAllData()?G2(r):r.views.get(t._queryIdentifier)}function ile(r,t){return null!=tle(r,t)}function LC(r){return null!=G2(r)}function G2(r){for(const t of r.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let s_e=1;class nle{constructor(t){this.listenProvider_=t,this.syncPointTree_=new po(null),this.pendingWriteTree_=function PRe(){return{visibleWrites:Of.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function F7(r,t,e,i,n){return function SRe(r,t,e,i,n){(0,J.hu)(i>r.lastWriteId,"Stacking an older write on top of newer ones"),void 0===n&&(n=!0),r.allWrites.push({path:t,snap:e,writeId:i,visible:n}),n&&(r.visibleWrites=KO(r.visibleWrites,t,e)),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i,n),n?XD(r,new QS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function OC(r,t,e=!1){const i=function xRe(r,t){for(let e=0;e<r.allWrites.length;e++){const i=r.allWrites[e];if(i.writeId===t)return i}return null}(r.pendingWriteTree_,t);if(function TRe(r,t){const e=r.allWrites.findIndex(a=>a.writeId===t);(0,J.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=r.allWrites[e];r.allWrites.splice(e,1);let n=i.visible,s=!1,o=r.allWrites.length-1;for(;n&&o>=0;){const a=r.allWrites[o];a.visible&&(o>=e&&DRe(a,i.path)?n=!1:tp(i.path,a.path)&&(s=!0)),o--}return!!n&&(s?(function IRe(r){r.visibleWrites=Hae(r.allWrites,ARe,hs()),r.lastWriteId=r.allWrites.length>0?r.allWrites[r.allWrites.length-1].writeId:-1}(r),!0):(i.snap?r.visibleWrites=Fae(r.visibleWrites,i.path):Vl(i.children,l=>{r.visibleWrites=Fae(r.visibleWrites,jo(i.path,l))}),!0))}(r.pendingWriteTree_,t)){let s=new po(null);return null!=i.snap?s=s.set(hs(),!0):Vl(i.children,o=>{s=s.set(new Ss(o),!0)}),XD(r,new B2(i.path,s,e))}return[]}function $O(r,t,e){return XD(r,new QS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function $2(r,t,e,i,n=!1){const s=t._path,o=r.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||ile(o,t))){const l=function i_e(r,t,e,i){const n=t._queryIdentifier,s=[];let o=[];const a=LC(r);if("default"===n)for(const[l,h]of r.views.entries())o=o.concat(Yae(h,e,i)),$ae(h)&&(r.views.delete(l),h.query._queryParams.loadsAllData()||s.push(h.query));else{const l=r.views.get(n);l&&(o=o.concat(Yae(l,e,i)),$ae(l)&&(r.views.delete(n),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!LC(r)&&s.push(new(function JRe(){return(0,J.hu)(q2,"Reference.ts has not been loaded"),q2}())(t._repo,t._path)),{removed:s,events:o}}(o,t,e,i);(function e_e(r){return 0===r.views.size})(o)&&(r.syncPointTree_=r.syncPointTree_.remove(s));const h=l.removed;if(a=l.events,!n){const u=-1!==h.findIndex(m=>m._queryParams.loadsAllData()),d=r.syncPointTree_.findOnPath(s,(m,v)=>LC(v));if(u&&!d){const m=r.syncPointTree_.subtree(s);if(!m.isEmpty()){const v=function d_e(r){return r.fold((t,e,i)=>{if(e&&LC(e))return[G2(e)];{let n=[];return e&&(n=ele(e)),Vl(i,(s,o)=>{n=n.concat(o)}),n}})}(m);for(let C=0;C<v.length;++C){const S=v[C],A=S.query,_=ale(r,S);r.listenProvider_.startListening(ZO(A),YO(r,A),_.hashFn,_.onComplete)}}}!d&&h.length>0&&!i&&(u?r.listenProvider_.stopListening(ZO(t),null):h.forEach(m=>{const v=r.queryToTagMap.get(Z2(m));r.listenProvider_.stopListening(ZO(m),v)}))}!function p_e(r,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const n=Z2(i),s=r.queryToTagMap.get(n);r.queryToTagMap.delete(n),r.tagToQueryMap.delete(s)}}}(r,h)}return a}function rle(r,t,e,i){const n=B7(r,i);if(null!=n){const s=H7(n),o=s.path,a=s.queryId,l=fu(o,t);return V7(r,o,new QS(T7(a),l,e))}return[]}function N7(r,t,e,i=!1){const n=t._path;let s=null,o=!1;r.syncPointTree_.foreachOnPath(n,(m,v)=>{const C=fu(m,n);s=s||_C(v,C),o=o||LC(v)});let l,a=r.syncPointTree_.get(n);a?(o=o||LC(a),s=s||_C(a,hs())):(a=new Qae,r.syncPointTree_=r.syncPointTree_.set(n,a)),null!=s?l=!0:(l=!1,s=Xn.EMPTY_NODE,r.syncPointTree_.subtree(n).foreachChild((v,C)=>{const S=_C(C,hs());S&&(s=s.updateImmediateChild(v,S))}));const h=ile(a,t);if(!h&&!t._queryParams.loadsAllData()){const m=Z2(t);(0,J.hu)(!r.queryToTagMap.has(m),"View does not exist, but we have a tag");const v=function f_e(){return s_e++}();r.queryToTagMap.set(m,v),r.tagToQueryMap.set(v,m)}let d=function t_e(r,t,e,i,n,s){const o=Jae(r,t,i,n,s);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,o),function ZRe(r,t){r.eventRegistrations_.push(t)}(o,e),function XRe(r,t){const e=r.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(co,(s,o)=>{i.push(KD(s,o))}),e.isFullyInitialized()&&i.push(_ae(e.getNode())),Xae(r,i,e.getNode(),t)}(o,e)}(a,t,e,z2(r.pendingWriteTree_,n),s,l);if(!h&&!o&&!i){const m=tle(a,t);d=d.concat(function g_e(r,t,e){const i=t._path,n=YO(r,t),s=ale(r,e),o=r.listenProvider_.startListening(ZO(t),n,s.hashFn,s.onComplete),a=r.syncPointTree_.subtree(i);if(n)(0,J.hu)(!LC(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((h,u,d)=>{if(!xr(h)&&u&&LC(u))return[G2(u).query];{let m=[];return u&&(m=m.concat(ele(u).map(v=>v.query))),Vl(d,(v,C)=>{m=m.concat(C)}),m}});for(let h=0;h<l.length;++h){const u=l[h];r.listenProvider_.stopListening(ZO(u),YO(r,u))}}return o}(r,t,m))}return d}function Y2(r,t,e){const n=r.pendingWriteTree_,s=r.syncPointTree_.findOnPath(t,(o,a)=>{const h=_C(a,fu(o,t));if(h)return h});return Vae(n,t,s,e,!0)}function XD(r,t){return sle(t,r.syncPointTree_,null,z2(r.pendingWriteTree_,hs()))}function sle(r,t,e,i){if(xr(r.path))return ole(r,t,e,i);{const n=t.get(hs());null==e&&null!=n&&(e=_C(n,hs()));let s=[];const o=Er(r.path),a=r.operationForChild(o),l=t.children.get(o);if(l&&a){const h=e?e.getImmediateChild(o):null,u=jae(i,o);s=s.concat(sle(a,l,h,u))}return n&&(s=s.concat(M7(n,r,i,e))),s}}function ole(r,t,e,i){const n=t.get(hs());null==e&&null!=n&&(e=_C(n,hs()));let s=[];return t.children.inorderTraversal((o,a)=>{const l=e?e.getImmediateChild(o):null,h=jae(i,o),u=r.operationForChild(o);u&&(s=s.concat(ole(u,a,l,h)))}),n&&(s=s.concat(M7(n,r,i,e))),s}function ale(r,t){const e=t.query,i=YO(r,e);return{hashFn:()=>(function KRe(r){return r.viewCache_.serverCache.getNode()}(t)||Xn.EMPTY_NODE).hash(),onComplete:n=>{if("ok"===n)return i?function h_e(r,t,e){const i=B7(r,e);if(i){const n=H7(i),s=n.path,o=n.queryId,a=fu(s,t);return V7(r,s,new WO(T7(o),a))}return[]}(r,e._path,i):function l_e(r,t){return XD(r,new WO({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(r,e._path);{const s=function lke(r,t){let e="Unknown Error";"too_big"===r?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===r?e="Client doesn't have permission to access the desired data.":"unavailable"===r&&(e="The service is unavailable");const i=new Error(r+" at "+t._path.toString()+": "+e);return i.code=r.toUpperCase(),i}(n,e);return $2(r,e,null,s)}}}}function YO(r,t){const e=Z2(t);return r.queryToTagMap.get(e)}function Z2(r){return r._path.toString()+"$"+r._queryIdentifier}function B7(r,t){return r.tagToQueryMap.get(t)}function H7(r){const t=r.indexOf("$");return(0,J.hu)(-1!==t&&t<r.length-1,"Bad queryKey."),{queryId:r.substr(t+1),path:new Ss(r.substr(0,t))}}function V7(r,t,e){const i=r.syncPointTree_.get(t);return(0,J.hu)(i,"Missing sync point for query tag that we're tracking"),M7(i,e,z2(r.pendingWriteTree_,t),null)}function ZO(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(function r_e(){return(0,J.hu)(K2,"Reference.ts has not been loaded"),K2}())(r._repo,r._path):r}class z7{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new z7(e)}node(){return this.node_}}class j7{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=jo(this.path_,t);return new j7(this.syncTree_,e)}node(){return Y2(this.syncTree_,this.path_)}}const lle=function(r,t,e){return r&&"object"==typeof r?((0,J.hu)(".sv"in r,"Unexpected leaf node or priority contents"),"string"==typeof r[".sv"]?v_e(r[".sv"],t,e):"object"==typeof r[".sv"]?y_e(r[".sv"],t):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2))):r},v_e=function(r,t,e){if("timestamp"===r)return e.timestamp;(0,J.hu)(!1,"Unexpected server value: "+r)},y_e=function(r,t,e){r.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const i=r.increment;"number"!=typeof i&&(0,J.hu)(!1,"Unexpected increment value: "+i);const n=t.node();if((0,J.hu)(null!==n&&typeof n<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!n.isLeafNode())return i;const o=n.getValue();return"number"!=typeof o?i:o+i},hle=function(r,t,e,i){return W7(t,new j7(e,r),i)},U7=function(r,t,e){return W7(r,new z7(t),e)};function W7(r,t,e){const i=r.getPriority().val(),n=lle(i,t.getImmediateChild(".priority"),e);let s;if(r.isLeafNode()){const o=r,a=lle(o.getValue(),t,e);return a!==o.getValue()||n!==o.getPriority().val()?new WD(a,da(n)):r}{const o=r;return s=o,n!==o.getPriority().val()&&(s=s.updatePriority(new WD(n))),o.forEachChild(co,(a,l)=>{const h=W7(l,t.getImmediateChild(a),e);h!==l&&(s=s.updateImmediateChild(a,h))}),s}}class q7{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function X2(r,t){let e=t instanceof Ss?t:new Ss(t),i=r,n=Er(e);for(;null!==n;){const s=(0,J.DV)(i.node.children,n)||{children:{},childCount:0};i=new q7(n,i,s),e=Qs(e),n=Er(e)}return i}function tE(r){return r.node.value}function G7(r,t){r.node.value=t,K7(r)}function ule(r){return r.node.childCount>0}function Q2(r,t){Vl(r.node.children,(e,i)=>{t(new q7(e,r,i))})}function cle(r,t,e,i){e&&!i&&t(r),Q2(r,n=>{cle(n,t,!0,i)}),e&&i&&t(r)}function XO(r){return new Ss(null===r.parent?r.name:XO(r.parent)+"/"+r.name)}function K7(r){null!==r.parent&&function w_e(r,t,e){const i=function b_e(r){return void 0===tE(r)&&!ule(r)}(e),n=(0,J.r3)(r.node.children,t);i&&n?(delete r.node.children[t],r.node.childCount--,K7(r)):!i&&!n&&(r.node.children[t]=e.node,r.node.childCount++,K7(r))}(r.parent,r.name,r)}const S_e=/[\[\].#$\/\u0000-\u001F\u007F]/,E_e=/[\[\].#$\u0000-\u001F\u007F]/,$7=10485760,J2=function(r){return"string"==typeof r&&0!==r.length&&!S_e.test(r)},dle=function(r){return"string"==typeof r&&0!==r.length&&!E_e.test(r)},QO=function(r){return null===r||"string"==typeof r||"number"==typeof r&&!T2(r)||r&&"object"==typeof r&&(0,J.r3)(r,".sv")},Yg=function(r,t,e,i){i&&void 0===t||JO((0,J.gK)(r,"value"),t,e)},JO=function(r,t,e){const i=e instanceof Ss?new Hke(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+ZS(i));if("function"==typeof t)throw new Error(r+"contains a function "+ZS(i)+" with contents = "+t.toString());if(T2(t))throw new Error(r+"contains "+t.toString()+" "+ZS(i));if("string"==typeof t&&t.length>$7/3&&(0,J.ug)(t)>$7)throw new Error(r+"contains a string greater than "+$7+" utf8 bytes "+ZS(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,s=!1;if(Vl(t,(o,a)=>{if(".value"===o)n=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!J2(o)))throw new Error(r+" contains an invalid key ("+o+") "+ZS(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Vke(r,t){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(t),r.byteLength_+=(0,J.ug)(t),yae(r)})(i,o),JO(r,a,i),function zke(r){const t=r.parts_.pop();r.byteLength_-=(0,J.ug)(t),r.parts_.length>0&&(r.byteLength_-=1)}(i)}),n&&s)throw new Error(r+' contains ".value" child '+ZS(i)+" in addition to actual children.")}},ple=function(r,t,e,i){if(i&&void 0===t)return;const n=(0,J.gK)(r,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(n+" must be an object containing the children to replace.");const s=[];Vl(t,(o,a)=>{const l=new Ss(o);if(JO(n,a,jo(e,l)),".priority"===h7(l)&&!QO(a))throw new Error(n+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(r,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=NO(i);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!J2(s[o]))throw new Error(r+"contains an invalid key ("+s[o]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Bke);let n=null;for(e=0;e<t.length;e++){if(i=t[e],null!==n&&tp(n,i))throw new Error(r+"contains a path "+n.toString()+" that is ancestor of another path "+i.toString());n=i}}(n,s)},Y7=function(r,t,e){if(!e||void 0!==t){if(T2(t))throw new Error((0,J.gK)(r,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!QO(t))throw new Error((0,J.gK)(r,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},eP=function(r,t,e,i){if(!(i&&void 0===e||J2(e)))throw new Error((0,J.gK)(r,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},tP=function(r,t,e,i){if(!(i&&void 0===e||dle(e)))throw new Error((0,J.gK)(r,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},np=function(r,t){if(".info"===Er(t))throw new Error(r+" failed = Can't modify data under /.info/")},fle=function(r,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!J2(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),dle(r)}(e))throw new Error((0,J.gK)(r,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class I_e{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ez(r,t){let e=null;for(let i=0;i<t.length;i++){const n=t[i],s=n.getPath();null!==e&&!u7(s,e.path)&&(r.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(n)}e&&r.eventLists_.push(e)}function gle(r,t,e){ez(r,e),mle(r,i=>u7(i,t))}function Yc(r,t,e){ez(r,e),mle(r,i=>tp(i,t)||tp(t,i))}function mle(r,t){r.recursionDepth_++;let e=!0;for(let i=0;i<r.eventLists_.length;i++){const n=r.eventLists_[i];n&&(t(n.path)?(A_e(r.eventLists_[i]),r.eventLists_[i]=null):e=!1)}e&&(r.eventLists_=[]),r.recursionDepth_--}function A_e(r){for(let t=0;t<r.events.length;t++){const e=r.events[t];if(null!==e){r.events[t]=null;const i=e.getEventRunner();$S&&Hl("event: "+e.toString()),jD(i)}}}const vle="repo_interrupt";class R_e{constructor(t,e,i,n){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new I_e,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=N2(),this.transactionQueueTree_=new q7,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function yle(r){const e=r.infoData_.getNode(new Ss(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function iP(r){return function(r){return(r=r||{}).timestamp=r.timestamp||(new Date).getTime(),r}({timestamp:yle(r)})}function ble(r,t,e,i,n){r.dataUpdateCount++;const s=new Ss(t);e=r.interceptServerDataCallback_?r.interceptServerDataCallback_(t,e):e;let o=[];if(n)if(i){const l=(0,J.UI)(e,h=>da(h));o=function u_e(r,t,e,i){const n=B7(r,i);if(n){const s=H7(n),o=s.path,a=s.queryId,l=fu(o,t),h=po.fromObject(e);return V7(r,o,new YD(T7(a),l,h))}return[]}(r.serverSyncTree_,s,l,n)}else{const l=da(e);o=rle(r.serverSyncTree_,s,l,n)}else if(i){const l=(0,J.UI)(e,h=>da(h));o=function a_e(r,t,e){const i=po.fromObject(e);return XD(r,new YD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(r.serverSyncTree_,s,l)}else{const l=da(e);o=$O(r.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=JD(r,s)),Yc(r.eventQueue_,a,o)}function Cle(r,t){Z7(r,"connected",t),!1===t&&function M_e(r){QD(r,"onDisconnectEvents");const t=iP(r),e=N2();S7(r.onDisconnect_,hs(),(n,s)=>{const o=hle(n,s,r.serverSyncTree_,t);$D(e,n,o)});let i=[];S7(e,hs(),(n,s)=>{i=i.concat($O(r.serverSyncTree_,n,s));const o=e9(r,n);JD(r,o)}),r.onDisconnect_=N2(),Yc(r.eventQueue_,hs(),i)}(r)}function Z7(r,t,e){const i=new Ss("/.info/"+t),n=da(e);r.infoData_.updateSnapshot(i,n);const s=$O(r.infoSyncTree_,i,n);Yc(r.eventQueue_,i,s)}function tz(r){return r.nextWriteId_++}function X7(r,t,e,i,n){QD(r,"set",{path:t.toString(),value:e,priority:i});const s=iP(r),o=da(e,i),a=Y2(r.serverSyncTree_,t),l=U7(o,a,s),h=tz(r),u=F7(r.serverSyncTree_,t,l,h,!0);ez(r.eventQueue_,u),r.server_.put(t.toString(),o.val(!0),(m,v)=>{const C="ok"===m;C||Bh("set at "+t+" failed: "+m);const S=OC(r.serverSyncTree_,h,!C);Yc(r.eventQueue_,t,S),PC(0,n,m,v)});const d=e9(r,t);JD(r,d),Yc(r.eventQueue_,d,[])}function F_e(r,t,e){r.server_.onDisconnectCancel(t.toString(),(i,n)=>{"ok"===i&&w7(r.onDisconnect_,t),PC(0,e,i,n)})}function wle(r,t,e,i){const n=da(e);r.server_.onDisconnectPut(t.toString(),n.val(!0),(s,o)=>{"ok"===s&&$D(r.onDisconnect_,t,n),PC(0,i,s,o)})}function Q7(r,t,e){let i;i=".info"===Er(t._path)?$2(r.infoSyncTree_,t,e):$2(r.serverSyncTree_,t,e),gle(r.eventQueue_,t._path,i)}function Sle(r){r.persistentConnection_&&r.persistentConnection_.interrupt(vle)}function QD(r,...t){let e="";r.persistentConnection_&&(e=r.persistentConnection_.id+":"),Hl(e,...t)}function PC(r,t,e,i){t&&jD(()=>{if("ok"===e)t(null);else{const n=(e||"error").toUpperCase();let s=n;i&&(s+=": "+i);const o=new Error(s);o.code=n,t(o)}})}function J7(r,t,e){return Y2(r.serverSyncTree_,t,e)||Xn.EMPTY_NODE}function iz(r,t=r.transactionQueueTree_){if(t||nz(r,t),tE(t)){const e=xle(r,t);(0,J.hu)(e.length>0,"Sending zero length transaction queue"),e.every(n=>0===n.status)&&function j_e(r,t,e){const i=e.map(h=>h.currentWriteId),n=J7(r,t,i);let s=n;const o=n.hash();for(let h=0;h<e.length;h++){const u=e[h];(0,J.hu)(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=fu(t,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;r.server_.put(l.toString(),a,h=>{QD(r,"transaction put response",{path:l.toString(),status:h});let u=[];if("ok"===h){const d=[];for(let m=0;m<e.length;m++)e[m].status=2,u=u.concat(OC(r.serverSyncTree_,e[m].currentWriteId)),e[m].onComplete&&d.push(()=>e[m].onComplete(null,!0,e[m].currentOutputSnapshotResolved)),e[m].unwatcher();nz(r,X2(r.transactionQueueTree_,t)),iz(r,r.transactionQueueTree_),Yc(r.eventQueue_,t,u);for(let m=0;m<d.length;m++)jD(d[m])}else{if("datastale"===h)for(let d=0;d<e.length;d++)e[d].status=3===e[d].status?4:0;else{Bh("transaction at "+l.toString()+" failed: "+h);for(let d=0;d<e.length;d++)e[d].status=4,e[d].abortReason=h}JD(r,t)}},o)}(r,XO(t),e)}else ule(t)&&Q2(t,e=>{iz(r,e)})}function JD(r,t){const e=Ele(r,t),i=XO(e);return function U_e(r,t,e){if(0===t.length)return;const i=[];let n=[];const o=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const l=t[a],h=fu(e,l.path);let d,u=!1;if((0,J.hu)(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)u=!0,d=l.abortReason,n=n.concat(OC(r.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=25)u=!0,d="maxretry",n=n.concat(OC(r.serverSyncTree_,l.currentWriteId,!0));else{const m=J7(r,l.path,o);l.currentInputSnapshot=m;const v=t[a].update(m.val());if(void 0!==v){JO("transaction failed: Data returned ",v,l.path);let C=da(v);"object"==typeof v&&null!=v&&(0,J.r3)(v,".priority")||(C=C.updatePriority(m.getPriority()));const A=l.currentWriteId,_=iP(r),M=U7(C,m,_);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=M,l.currentWriteId=tz(r),o.splice(o.indexOf(A),1),n=n.concat(F7(r.serverSyncTree_,l.path,M,l.currentWriteId,l.applyLocally)),n=n.concat(OC(r.serverSyncTree_,A,!0))}else u=!0,d="nodata",n=n.concat(OC(r.serverSyncTree_,l.currentWriteId,!0))}Yc(r.eventQueue_,e,n),n=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&i.push("nodata"===d?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(d),!1,null)))}nz(r,r.transactionQueueTree_);for(let a=0;a<i.length;a++)jD(i[a]);iz(r,r.transactionQueueTree_)}(r,xle(r,e),i),i}function Ele(r,t){let e,i=r.transactionQueueTree_;for(e=Er(t);null!==e&&void 0===tE(i);)i=X2(i,e),e=Er(t=Qs(t));return i}function xle(r,t){const e=[];return Tle(r,t,e),e.sort((i,n)=>i.order-n.order),e}function Tle(r,t,e){const i=tE(t);if(i)for(let n=0;n<i.length;n++)e.push(i[n]);Q2(t,n=>{Tle(r,n,e)})}function nz(r,t){const e=tE(t);if(e){let i=0;for(let n=0;n<e.length;n++)2!==e[n].status&&(e[i]=e[n],i++);e.length=i,G7(t,e.length>0?e:void 0)}Q2(t,i=>{nz(r,i)})}function e9(r,t){const e=XO(Ele(r,t)),i=X2(r.transactionQueueTree_,t);return function C_e(r,t,e){let i=e?r:r.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,n=>{t9(r,n)}),t9(r,i),cle(i,n=>{t9(r,n)}),e}function t9(r,t){const e=tE(t);if(e){const i=[];let n=[],s=-1;for(let o=0;o<e.length;o++)3===e[o].status||(1===e[o].status?((0,J.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):((0,J.hu)(0===e[o].status,"Unexpected transaction status in abort"),e[o].unwatcher(),n=n.concat(OC(r.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&i.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?G7(t,void 0):e.length=s+1,Yc(r.eventQueue_,XO(t),n);for(let o=0;o<i.length;o++)jD(i[o])}}const i9=function(r,t){const e=G_e(r),i=e.namespace;return"firebase.com"===e.domain&&Gg(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Gg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bh("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new n7(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Ss(e.pathString)}},G_e=function(r){let t="",e="",i="",n="",s="",o=!0,a="https",l=443;if("string"==typeof r){let h=r.indexOf("//");h>=0&&(a=r.substring(0,h-1),r=r.substring(h+2));let u=r.indexOf("/");-1===u&&(u=r.length);let d=r.indexOf("?");-1===d&&(d=r.length),t=r.substring(0,Math.min(u,d)),u<d&&(n=function W_e(r){let t="";const e=r.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let n=e[i];try{n=decodeURIComponent(n.replace(/\+/g," "))}catch{}t+="/"+n}return t}(r.substring(u,d)));const m=function q_e(r){const t={};"?"===r.charAt(0)&&(r=r.substring(1));for(const e of r.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bh(`Invalid query segment '${e}' in query '${r}'`)}return t}(r.substring(Math.min(r.length,d)));h=t.indexOf(":"),h>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(h+1),10)):h=t.length;const v=t.slice(0,h);if("localhost"===v.toLowerCase())e="localhost";else if(v.split(".").length<=2)e=v;else{const C=t.indexOf(".");i=t.substring(0,C).toLowerCase(),e=t.substring(C+1),s=i}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:e,subdomain:i,secure:o,scheme:a,pathString:n,namespace:s}};class Dle{constructor(t,e,i,n){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=n}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,J.Wl)(this.snapshot.exportVal())}}class Ile{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class n9{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,J.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class Ale{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new J.BH;return F_e(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){np("OnDisconnect.remove",this._path);const t=new J.BH;return wle(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){np("OnDisconnect.set",this._path),Yg("OnDisconnect.set",t,this._path,!1);const e=new J.BH;return wle(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){np("OnDisconnect.setWithPriority",this._path),Yg("OnDisconnect.setWithPriority",t,this._path,!1),Y7("OnDisconnect.setWithPriority",e,!1);const i=new J.BH;return function N_e(r,t,e,i,n){const s=da(e,i);r.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{"ok"===o&&$D(r.onDisconnect_,t,s),PC(0,n,o,a)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){np("OnDisconnect.update",this._path),ple("OnDisconnect.update",t,this._path,!1);const e=new J.BH;return function B_e(r,t,e,i){if((0,J.xb)(e))return Hl("onDisconnect().update() called with empty data.  Don't do anything."),void PC(0,i,"ok",void 0);r.server_.onDisconnectMerge(t.toString(),e,(n,s)=>{"ok"===n&&Vl(e,(o,a)=>{const l=da(a);$D(r.onDisconnect_,jo(t,o),l)}),PC(0,i,n,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class sc{constructor(t,e,i,n){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=n}get key(){return xr(this._path)?null:h7(this._path)}get ref(){return new rp(this._repo,this._path)}get _queryIdentifier(){const t=Oae(this._queryParams),e=e7(t);return"{}"===e?"default":e}get _queryObject(){return Oae(this._queryParams)}isEqual(t){if(!((t=(0,J.m9)(t))instanceof sc))return!1;const e=this._repo===t._repo,i=u7(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Nke(r){let t="";for(let e=r.pieceNum_;e<r.pieces_.length;e++)""!==r.pieces_[e]&&(t+="/"+encodeURIComponent(String(r.pieces_[e])));return t||"/"}(this._path)}}function rz(r,t){if(!0===r._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function MC(r){let t=null,e=null;if(r.hasStart()&&(t=r.getIndexStartValue()),r.hasEnd()&&(e=r.getIndexEndValue()),r.getIndex()===$g){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",n="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(r.hasStart()){if(r.getIndexStartName()!==Zv)throw new Error(i);if("string"!=typeof t)throw new Error(n)}if(r.hasEnd()){if(r.getIndexEndName()!==Kg)throw new Error(i);if("string"!=typeof e)throw new Error(n)}}else if(r.getIndex()===co){if(null!=t&&!QO(t)||null!=e&&!QO(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,J.hu)(r.getIndex()instanceof g7||r.getIndex()===m7,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sz(r){if(r.hasStart()&&r.hasEnd()&&r.hasLimit()&&!r.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class rp extends sc{constructor(t,e){super(t,e,new P2,!1)}get parent(){const t=vae(this._path);return null===t?null:new rp(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class iE{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Ss(t),i=nE(this.ref,t);return new iE(this._node.getChild(e),i,co)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,n)=>t(new iE(n,nE(this.ref,i),co)))}hasChild(t){const e=new Ss(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kle(r,t){return(r=(0,J.m9)(r))._checkNotDeleted("ref"),void 0!==t?nE(r._root,t):r._root}function Rle(r,t){(r=(0,J.m9)(r))._checkNotDeleted("refFromURL");const e=i9(t,r._repo.repoInfo_.nodeAdmin);fle("refFromURL",e);const i=e.repoInfo;return!r._repo.repoInfo_.isCustomHost()&&i.host!==r._repo.repoInfo_.host&&Gg("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+r._repo.repoInfo_.host+")"),kle(r,e.path.toString())}function nE(r,t){return null===Er((r=(0,J.m9)(r))._path)?function(r,t,e,i){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),tP("child","path",e,!1)}(0,0,t):tP("child","path",t,!1),new rp(r._repo,jo(r._path,t))}function r9(r,t){r=(0,J.m9)(r),np("set",r._path),Yg("set",t,r._path,!1);const e=new J.BH;return X7(r._repo,r._path,t,null,e.wrapCallback(()=>{})),e.promise}function X_e(r,t){ple("update",t,r._path,!1);const e=new J.BH;return function P_e(r,t,e,i){QD(r,"update",{path:t.toString(),value:e});let n=!0;const s=iP(r),o={};if(Vl(e,(a,l)=>{n=!1,o[a]=hle(jo(t,a),da(l),r.serverSyncTree_,s)}),n)Hl("update() called with empty data.  Don't do anything."),PC(0,i,"ok",void 0);else{const a=tz(r),l=function o_e(r,t,e,i){!function ERe(r,t,e,i){(0,J.hu)(i>r.lastWriteId,"Stacking an older merge on top of newer ones"),r.allWrites.push({path:t,children:e,writeId:i,visible:!0}),r.visibleWrites=I7(r.visibleWrites,t,e),r.lastWriteId=i}(r.pendingWriteTree_,t,e,i);const n=po.fromObject(e);return XD(r,new YD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n))}(r.serverSyncTree_,t,o,a);ez(r.eventQueue_,l),r.server_.merge(t.toString(),e,(h,u)=>{const d="ok"===h;d||Bh("update at "+t+" failed: "+h);const m=OC(r.serverSyncTree_,a,!d),v=m.length>0?JD(r,t):t;Yc(r.eventQueue_,v,m),PC(0,i,h,u)}),Vl(e,h=>{const u=e9(r,jo(t,h));JD(r,u)}),Yc(r.eventQueue_,t,[])}}(r._repo,r._path,t,e.wrapCallback(()=>{})),e.promise}function Q_e(r){r=(0,J.m9)(r);const t=new n9(()=>{}),e=new nP(t);return function O_e(r,t,e){const i=function c_e(r,t){const e=t._path;let i=null;r.syncPointTree_.foreachOnPath(e,(h,u)=>{const d=fu(h,e);i=i||_C(u,d)});let n=r.syncPointTree_.get(e);n?i=i||_C(n,hs()):(n=new Qae,r.syncPointTree_=r.syncPointTree_.set(e,n));const s=null!=i,o=s?new kC(i,!0,!1):null;return function $Re(r){return V2(r.viewCache_)}(Jae(n,t,z2(r.pendingWriteTree_,t._path),s?o.getNode():Xn.EMPTY_NODE,s))}(r.serverSyncTree_,t);return null!=i?Promise.resolve(i):r.server_.get(t).then(n=>{const s=da(n).withIndex(t._queryParams.getIndex());let o;if(N7(r.serverSyncTree_,t,e,!0),t._queryParams.loadsAllData())o=$O(r.serverSyncTree_,t._path,s);else{const a=YO(r.serverSyncTree_,t);o=rle(r.serverSyncTree_,t._path,s,a)}return Yc(r.eventQueue_,t._path,o),$2(r.serverSyncTree_,t,e,null,!0),s},n=>(QD(r,"get for query "+(0,J.Wl)(t)+" failed: "+n),Promise.reject(new Error(n))))}(r._repo,r,e).then(i=>new iE(i,new rp(r._repo,r._path),r._queryParams.getIndex()))}class nP{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new Dle("value",this,new iE(t.snapshotNode,new rp(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ile(this,t,e):null}matches(t){return t instanceof nP&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class oz{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Ile(this,t,e):null}createEvent(t,e){(0,J.hu)(null!=t.childName,"Child events should have a childName.");const i=nE(new rp(e._repo,e._path),t.childName),n=e._queryParams.getIndex();return new Dle(t.type,this,new iE(t.snapshotNode,i,n),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof oz&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function rP(r,t,e,i,n){let s;if("object"==typeof i&&(s=void 0,n=i),"function"==typeof i&&(s=i),n&&n.onlyOnce){const l=e,h=(u,d)=>{Q7(r._repo,r,a),l(u,d)};h.userCallback=e.userCallback,h.context=e.context,e=h}const o=new n9(e,s||void 0),a="value"===t?new nP(o):new oz(t,o);return function H_e(r,t,e){let i;i=".info"===Er(t._path)?N7(r.infoSyncTree_,t,e):N7(r.serverSyncTree_,t,e),gle(r.eventQueue_,t._path,i)}(r._repo,r,a),()=>Q7(r._repo,r,a)}function s9(r,t,e,i){return rP(r,"value",t,e,i)}function _le(r,t,e,i){return rP(r,"child_added",t,e,i)}function Lle(r,t,e,i){return rP(r,"child_changed",t,e,i)}function Ole(r,t,e,i){return rP(r,"child_moved",t,e,i)}function Ple(r,t,e,i){return rP(r,"child_removed",t,e,i)}function Mle(r,t,e){let i=null;const n=e?new n9(e):null;"value"===t?i=new nP(n):t&&(i=new oz(t,n)),Q7(r._repo,r,i)}class Pf{}class Fle extends Pf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Yg("endAt",this._value,t._path,!0);const e=C7(t._queryParams,this._value,this._key);if(sz(e),MC(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sc(t._repo,t._path,e,t._orderByCalled)}}class eLe extends Pf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Yg("endBefore",this._value,t._path,!1);const e=function uRe(r,t,e){let i,n;return r.index_===$g?("string"==typeof t&&(t=Rae(t)),n=C7(r,t,e)):(i=null==e?Zv:Rae(e),n=C7(r,t,i)),n.endBeforeSet_=!0,n}(t._queryParams,this._value,this._key);if(sz(e),MC(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new sc(t._repo,t._path,e,t._orderByCalled)}}class Nle extends Pf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Yg("startAt",this._value,t._path,!0);const e=b7(t._queryParams,this._value,this._key);if(sz(e),MC(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new sc(t._repo,t._path,e,t._orderByCalled)}}class nLe extends Pf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Yg("startAfter",this._value,t._path,!1);const e=function hRe(r,t,e){let i;if(r.index_===$g)"string"==typeof t&&(t=kae(t)),i=b7(r,t,e);else{let n;n=null==e?Kg:kae(e),i=b7(r,t,n)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(sz(e),MC(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new sc(t._repo,t._path,e,t._orderByCalled)}}class sLe extends Pf{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new sc(t._repo,t._path,function aRe(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class aLe extends Pf{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new sc(t._repo,t._path,function lRe(r,t){const e=r.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class hLe extends Pf{constructor(t){super(),this._path=t}_apply(t){rz(t,"orderByChild");const e=new Ss(this._path);if(xr(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new g7(e),n=M2(t._queryParams,i);return MC(n),new sc(t._repo,t._path,n,!0)}}class cLe extends Pf{_apply(t){rz(t,"orderByKey");const e=M2(t._queryParams,$g);return MC(e),new sc(t._repo,t._path,e,!0)}}class pLe extends Pf{_apply(t){rz(t,"orderByPriority");const e=M2(t._queryParams,co);return MC(e),new sc(t._repo,t._path,e,!0)}}class gLe extends Pf{_apply(t){rz(t,"orderByValue");const e=M2(t._queryParams,m7);return MC(e),new sc(t._repo,t._path,e,!0)}}class vLe extends Pf{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Yg("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Fle(this._value,this._key)._apply(new Nle(this._value,this._key)._apply(t))}}function Mf(r,...t){let e=(0,J.m9)(r);for(const i of t)e=i._apply(e);return e}(function QRe(r){(0,J.hu)(!q2,"__referenceConstructor has already been defined"),q2=r})(rp),function n_e(r){(0,J.hu)(!K2,"__referenceConstructor has already been defined"),K2=r}(rp);const o9={};function Hle(r,t,e,i,n){let s=i||r.options.databaseURL;void 0===s&&(r.options.projectId||Gg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hl("Using default host for project ",r.options.projectId),s=`${r.options.projectId}-default-rtdb.firebaseio.com`);let l,h,o=i9(s,n),a=o.repoInfo;typeof process<"u"&&process.env&&(h=process.env.FIREBASE_DATABASE_EMULATOR_HOST),h?(l=!0,s=`http://${h}?ns=${a.namespace}`,o=i9(s,n),a=o.repoInfo):l=!o.repoInfo.secure;const u=n&&l?new FO(FO.OWNER):new dke(r.name,r.options,t);fle("Invalid Firebase Database URL",o),xr(o.path)||Gg("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function SLe(r,t,e,i){let n=o9[t.name];n||(n={},o9[t.name]=n);let s=n[r.toURLString()];return s&&Gg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new R_e(r,false,e,i),n[r.toURLString()]=s,s}(a,r,u,new cke(r.name,e));return new xLe(d,r)}class xLe{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function __e(r,t,e){if(r.stats_=o7(r.repoInfo_),r.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)r.server_=new F2(r.repoInfo_,(i,n,s,o)=>{ble(r,i,n,s,o)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Cle(r,!0),0);else{if(typeof e<"u"&&null!==e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}r.persistentConnection_=new XS(r.repoInfo_,t,(i,n,s,o)=>{ble(r,i,n,s,o)},i=>{Cle(r,i)},i=>{!function L_e(r,t){Vl(t,(e,i)=>{Z7(r,e,i)})}(r,i)},r.authTokenProvider_,r.appCheckProvider_,e),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(i=>{r.server_.refreshAuthToken(i)}),r.appCheckProvider_.addTokenChangeListener(i=>{r.server_.refreshAppCheckToken(i.token)}),r.statsReporter_=function gke(r,t){const e=r.toString();return s7[e]||(s7[e]=t()),s7[e]}(r.repoInfo_,()=>new mRe(r.stats_,r.server_)),r.infoData_=new cRe,r.infoSyncTree_=new nle({startListening:(i,n,s,o)=>{let a=[];const l=r.infoData_.getNode(i._path);return l.isEmpty()||(a=$O(r.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Z7(r,"connected",!1),r.serverSyncTree_=new nle({startListening:(i,n,s,o)=>(r.server_.listen(i,s,n,(a,l)=>{const h=o(a,l);Yc(r.eventQueue_,i._path,h)}),[]),stopListening:(i,n)=>{r.server_.unlisten(i,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new rp(this._repo,hs())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function wLe(r,t){const e=o9[t];(!e||e[r.key]!==r)&&Gg(`Database ${t}(${r.repoInfo_}) has already been deleted.`),Sle(r),delete e[r.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Gg("Cannot call "+t+" on a deleted database.")}}function Vle(){sae.IS_TRANSPORT_INITIALIZED&&Bh("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function TLe(){Vle(),IC.forceDisallow()}function DLe(){Vle(),UD.forceDisallow(),IC.forceAllow()}function kLe(r,t){Hoe(r,t)}const _Le={".sv":"timestamp"};class PLe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}XS.prototype.simpleListen=function(r,t){this.sendRequest("q",{p:r},t)},XS.prototype.echo=function(r,t){this.sendRequest("echo",{d:r},t)},function RLe(r){Poe(pu.SDK_VERSION),(0,pu._registerComponent)(new Rf.wA("database",(t,{instanceIdentifier:e})=>Hle(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,pu.registerVersion)(Loe,"0.13.10",r),(0,pu.registerVersion)(Loe,"0.13.10","esm2017")}();const BLe=new _f.Yd("@firebase/database-compat"),jle=function(r){BLe.warn("FIREBASE WARNING: "+r)};class zLe{constructor(t){this._delegate=t}cancel(t){(0,J.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,J.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,J.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,J.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,J.Dv)("OnDisconnect.set",1,2,arguments.length),(0,J.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,J.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,J.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const n=this._delegate.setWithPriority(t,e);return i&&n.then(()=>i(null),s=>i(s)),n}update(t,e){if((0,J.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,jle("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,J.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),n=>e(n)),i}}class jLe{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,J.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class FC{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,J.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,J.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,J.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,J.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,J.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),tP("DataSnapshot.child","path",t,!1),new FC(this._database,this._delegate.child(t))}hasChild(t){return(0,J.Dv)("DataSnapshot.hasChild",1,1,arguments.length),tP("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,J.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,J.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,J.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new FC(this._database,e)))}hasChildren(){return(0,J.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,J.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,J.Dv)("DataSnapshot.ref",0,0,arguments.length),new Zc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class gh{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,n){var s;(0,J.Dv)("Query.on",2,4,arguments.length),(0,J.Wj)("Query.on","callback",e,!1);const o=gh.getCancelAndContextArgs_("Query.on",i,n),a=(h,u)=>{e.call(o.context,new FC(this.database,h),u)};a.userCallback=e,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(t){case"value":return s9(this._delegate,a,l),e;case"child_added":return _le(this._delegate,a,l),e;case"child_removed":return Ple(this._delegate,a,l),e;case"child_changed":return Lle(this._delegate,a,l),e;case"child_moved":return Ole(this._delegate,a,l),e;default:throw new Error((0,J.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,J.Dv)("Query.off",0,3,arguments.length),function(r,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,J.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,J.Wj)("Query.off","callback",e,!0),(0,J.lb)("Query.off","context",i,!0),e){const n=()=>{};n.userCallback=e,n.context=i,Mle(this._delegate,t,n)}else Mle(this._delegate,t)}get(){return Q_e(this._delegate).then(t=>new FC(this.database,t))}once(t,e,i,n){(0,J.Dv)("Query.once",1,4,arguments.length),(0,J.Wj)("Query.once","callback",e,!0);const s=gh.getCancelAndContextArgs_("Query.once",i,n),o=new J.BH,a=(h,u)=>{const d=new FC(this.database,h);e&&e.call(s.context,d,u),o.resolve(d)};a.userCallback=e,a.context=s.context;const l=h=>{s.cancel&&s.cancel.call(s.context,h),o.reject(h)};switch(t){case"value":s9(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":_le(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":Ple(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":Lle(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":Ole(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,J.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return(0,J.Dv)("Query.limitToFirst",1,1,arguments.length),new gh(this.database,Mf(this._delegate,function oLe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new sLe(r)}(t)))}limitToLast(t){return(0,J.Dv)("Query.limitToLast",1,1,arguments.length),new gh(this.database,Mf(this._delegate,function lLe(r){if("number"!=typeof r||Math.floor(r)!==r||r<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aLe(r)}(t)))}orderByChild(t){return(0,J.Dv)("Query.orderByChild",1,1,arguments.length),new gh(this.database,Mf(this._delegate,function uLe(r){if("$key"===r)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===r)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===r)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return tP("orderByChild","path",r,!1),new hLe(r)}(t)))}orderByKey(){return(0,J.Dv)("Query.orderByKey",0,0,arguments.length),new gh(this.database,Mf(this._delegate,function dLe(){return new cLe}()))}orderByPriority(){return(0,J.Dv)("Query.orderByPriority",0,0,arguments.length),new gh(this.database,Mf(this._delegate,function fLe(){return new pLe}()))}orderByValue(){return(0,J.Dv)("Query.orderByValue",0,0,arguments.length),new gh(this.database,Mf(this._delegate,function mLe(){return new gLe}()))}startAt(t=null,e){return(0,J.Dv)("Query.startAt",0,2,arguments.length),new gh(this.database,Mf(this._delegate,function iLe(r=null,t){return eP("startAt","key",t,!0),new Nle(r,t)}(t,e)))}startAfter(t=null,e){return(0,J.Dv)("Query.startAfter",0,2,arguments.length),new gh(this.database,Mf(this._delegate,function rLe(r,t){return eP("startAfter","key",t,!0),new nLe(r,t)}(t,e)))}endAt(t=null,e){return(0,J.Dv)("Query.endAt",0,2,arguments.length),new gh(this.database,Mf(this._delegate,function J_e(r,t){return eP("endAt","key",t,!0),new Fle(r,t)}(t,e)))}endBefore(t=null,e){return(0,J.Dv)("Query.endBefore",0,2,arguments.length),new gh(this.database,Mf(this._delegate,function tLe(r,t){return eP("endBefore","key",t,!0),new eLe(r,t)}(t,e)))}equalTo(t,e){return(0,J.Dv)("Query.equalTo",1,2,arguments.length),new gh(this.database,Mf(this._delegate,function yLe(r,t){return eP("equalTo","key",t,!0),new vLe(r,t)}(t,e)))}toString(){return(0,J.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,J.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,J.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof gh))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const n={cancel:void 0,context:void 0};if(e&&i)n.cancel=e,(0,J.Wj)(t,"cancel",n.cancel,!0),n.context=i,(0,J.lb)(t,"context",n.context,!0);else if(e)if("object"==typeof e&&null!==e)n.context=e;else{if("function"!=typeof e)throw new Error((0,J.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");n.cancel=e}return n}get ref(){return new Zc(this.database,new rp(this._delegate._repo,this._delegate._path))}}class Zc extends gh{constructor(t,e){super(t,new sc(e._repo,e._path,new P2,!1)),this.database=t,this._delegate=e}getKey(){return(0,J.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,J.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Zc(this.database,nE(this._delegate,t))}getParent(){(0,J.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Zc(this.database,t):null}getRoot(){return(0,J.Dv)("Reference.root",0,0,arguments.length),new Zc(this.database,this._delegate.root)}set(t,e){(0,J.Dv)("Reference.set",1,2,arguments.length),(0,J.Wj)("Reference.set","onComplete",e,!0);const i=r9(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}update(t,e){if((0,J.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const n={};for(let s=0;s<t.length;++s)n[""+s]=t[s];t=n,jle("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}np("Reference.update",this._delegate._path),(0,J.Wj)("Reference.update","onComplete",e,!0);const i=X_e(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}setWithPriority(t,e,i){(0,J.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,J.Wj)("Reference.setWithPriority","onComplete",i,!0);const n=function Z_e(r,t,e){if(np("setWithPriority",r._path),Yg("setWithPriority",t,r._path,!1),Y7("setWithPriority",e,!1),".length"===r.key||".keys"===r.key)throw"setWithPriority failed: "+r.key+" is a read-only object.";const i=new J.BH;return X7(r._repo,r._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&n.then(()=>i(null),s=>i(s)),n}remove(t){(0,J.Dv)("Reference.remove",0,1,arguments.length),(0,J.Wj)("Reference.remove","onComplete",t,!0);const e=function $_e(r){return np("remove",r._path),r9(r,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,J.Dv)("Reference.transaction",1,3,arguments.length),(0,J.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,J.Wj)("Reference.transaction","onComplete",e,!0),function(r,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,J.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const n=function MLe(r,t,e){var i;if(r=(0,J.m9)(r),np("Reference.transaction",r._path),".length"===r.key||".keys"===r.key)throw"Reference.transaction failed: "+r.key+" is a read-only object.";const n=null===(i=e?.applyLocally)||void 0===i||i,s=new J.BH,a=s9(r,()=>{});return function z_e(r,t,e,i,n,s){QD(r,"transaction on "+t);const o={path:t,update:e,onComplete:i,status:null,order:Foe(),applyLocally:s,retryCount:0,unwatcher:n,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=J7(r,t,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{JO("transaction failed: Data returned ",l,o.path),o.status=0;const h=X2(r.transactionQueueTree_,t),u=tE(h)||[];let d;u.push(o),G7(h,u),"object"==typeof l&&null!==l&&(0,J.r3)(l,".priority")?(d=(0,J.DV)(l,".priority"),(0,J.hu)(QO(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Y2(r.serverSyncTree_,t)||Xn.EMPTY_NODE).getPriority().val();const m=iP(r),v=da(l,d),C=U7(v,a,m);o.currentOutputSnapshotRaw=v,o.currentOutputSnapshotResolved=C,o.currentWriteId=tz(r);const S=F7(r.serverSyncTree_,t,C,o.currentWriteId,o.applyLocally);Yc(r.eventQueue_,t,S),iz(r,r.transactionQueueTree_)}}(r._repo,r._path,t,(l,h,u)=>{let d=null;l?s.reject(l):(d=new iE(u,new rp(r._repo,r._path),co),s.resolve(new PLe(h,d)))},a,n),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new jLe(s.committed,new FC(this.database,s.snapshot)));return e&&n.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),n}setPriority(t,e){(0,J.Dv)("Reference.setPriority",1,2,arguments.length),(0,J.Wj)("Reference.setPriority","onComplete",e,!0);const i=function Y_e(r,t){r=(0,J.m9)(r),np("setPriority",r._path),Y7("setPriority",t,!1);const e=new J.BH;return X7(r._repo,jo(r._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),n=>e(n)),i}push(t,e){(0,J.Dv)("Reference.push",0,2,arguments.length),(0,J.Wj)("Reference.push","onComplete",e,!0);const i=function K_e(r,t){r=(0,J.m9)(r),np("push",r._path),Yg("push",t,r._path,!0);const e=yle(r._repo),i=nRe(e),n=nE(r,i),s=nE(r,i);let o;return o=null!=t?r9(s,t).then(()=>s):Promise.resolve(s),n.then=o.then.bind(o),n.catch=o.then.bind(o,void 0),n}(this._delegate,t),n=i.then(o=>new Zc(this.database,o));e&&n.then(()=>e(null),o=>e(o));const s=new Zc(this.database,i);return s.then=n.then.bind(n),s.catch=n.catch.bind(n,void 0),s}onDisconnect(){return np("Reference.onDisconnect",this._delegate._path),new zLe(new Ale(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class sP{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:TLe,forceLongPolling:DLe}}useEmulator(t,e,i={}){!function zle(r,t,e,i={}){(r=(0,J.m9)(r))._checkNotDeleted("useEmulator"),r._instanceStarted&&Gg("Cannot call useEmulator() after instance has already been initialized.");const n=r._repoInternal;let s;if(n.repoInfo_.nodeAdmin)i.mockUserToken&&Gg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new FO(FO.OWNER);else if(i.mockUserToken){const o="string"==typeof i.mockUserToken?i.mockUserToken:(0,J.Sg)(i.mockUserToken,r.app.options.projectId);s=new FO(o)}!function CLe(r,t,e,i){r.repoInfo_=new n7(`${t}:${e}`,!1,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams),i&&(r.authTokenProvider_=i)}(n,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,J.Dv)("database.ref",0,1,arguments.length),t instanceof Zc){const e=Rle(this._delegate,t.toString());return new Zc(this,e)}{const e=kle(this._delegate,t);return new Zc(this,e)}}refFromURL(t){(0,J.Dv)("database.refFromURL",1,1,arguments.length);const i=Rle(this._delegate,t);return new Zc(this,i)}goOffline(){return(0,J.Dv)("database.goOffline",0,0,arguments.length),function ILe(r){(r=(0,J.m9)(r))._checkNotDeleted("goOffline"),Sle(r._repo)}(this._delegate)}goOnline(){return(0,J.Dv)("database.goOnline",0,0,arguments.length),function ALe(r){(r=(0,J.m9)(r))._checkNotDeleted("goOnline"),function V_e(r){r.persistentConnection_&&r.persistentConnection_.resume(vle)}(r._repo)}(this._delegate)}}sP.ServerValue={TIMESTAMP:function LLe(){return _Le}(),increment:r=>function OLe(r){return{".sv":{increment:r}}}(r)};var WLe=Object.freeze({__proto__:null,initStandalone:function ULe({app:r,url:t,version:e,customAuthImpl:i,namespace:n,nodeAdmin:s=!1}){Poe(e);const o=new Rf.zt("auth-internal",new Rf.H0("database-standalone"));return o.setComponent(new Rf.wA("auth-internal",()=>i,"PRIVATE")),{instance:new sP(Hle(r,o,void 0,t,s),r),namespace:n}}});const qLe=sP.ServerValue;!function GLe(r){r.INTERNAL.registerComponent(new Rf.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),n=t.getProvider("database").getImmediate({identifier:e});return new sP(n,i)},"PUBLIC").setServiceProps({Reference:Zc,Query:gh,Database:sP,DataSnapshot:FC,enableLogging:kLe,INTERNAL:WLe,ServerValue:qLe}).setMultipleInstances(!0)),r.registerVersion("@firebase/database-compat","0.2.10")}(ZG.Z);var az=te(5363),KLe=te(6063);class $Le extends Lu.x{constructor(t=1/0,e=1/0,i=KLe.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:n,_timestampProvider:s,_windowTime:o}=this;e||(i.push(t),!n&&i.push(s.now()+o)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:n}=this,s=n.slice();for(let o=0;o<s.length&&!t.closed;o+=i?1:2)t.next(s[o]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:n}=this,s=(n?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!n){const o=e.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function Ule(r,t,e){let i,n=!1;return r&&"object"==typeof r?({bufferSize:i=1/0,windowTime:t=1/0,refCount:n=!1,scheduler:e}=r):i=r??1/0,(0,Roe.B)({connector:()=>new $Le(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:n})}function Wle(r,t){return(0,dx.m)(t)?Qo(()=>r,t):Qo(()=>r)}var a9=te(9468);const h9=new Map,qle={activated:!1,tokenObservers:[]},JLe={initialized:!1,enabled:!1};function mh(r){return h9.get(r)||Object.assign({},qle)}function hz(){return JLe}class sOe{constructor(t,e,i,n,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=n,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=n,n>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,vt.Z)(function*(){e.stop();try{e.pending=new J.BH,yield function oOe(r){return new Promise(t=>{setTimeout(t,r)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new J.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const gu=new J.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Kle(r){if(!mh(r).activated)throw gu.create("use-before-activation",{appName:r.name})}function d9(r,t){return p9.apply(this,arguments)}function p9(){return p9=(0,vt.Z)(function*({url:r,body:t},e){var i,n;const s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){const v=yield o.getHeartbeatsHeader();v&&(s["X-Firebase-Client"]=v)}const a={method:"POST",body:JSON.stringify(t),headers:s};let l,h;try{l=yield fetch(r,a)}catch(v){throw gu.create("fetch-network-error",{originalErrorMessage:null===(i=v)||void 0===i?void 0:i.message})}if(200!==l.status)throw gu.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(v){throw gu.create("fetch-parse-error",{originalErrorMessage:null===(n=v)||void 0===n?void 0:n.message})}const u=h.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw gu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const d=1e3*Number(u[1]),m=Date.now();return{token:h.token,expireTimeMillis:m+d,issuedAtTimeMillis:m}}),p9.apply(this,arguments)}function uOe(r,t){const{projectId:e,appId:i,apiKey:n}=r.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${n}`,body:{debug_token:t}}}const oP="firebase-app-check-store";let dz=null;function Yle(){return dz||(dz=new Promise((r,t)=>{var e;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=n=>{r(n.target.result)},i.onerror=n=>{var s;t(gu.create("storage-open",{originalErrorMessage:null===(s=n.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=n=>{0===n.oldVersion&&n.target.result.createObjectStore(oP,{keyPath:"compositeKey"})}}catch(i){t(gu.create("storage-open",{originalErrorMessage:null===(e=i)||void 0===e?void 0:e.message}))}}),dz)}function f9(){return f9=(0,vt.Z)(function*(r,t){const i=(yield Yle()).transaction(oP,"readwrite"),s=i.objectStore(oP).put({compositeKey:r,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var h;a(gu.create("storage-set",{originalErrorMessage:null===(h=l.target.error)||void 0===h?void 0:h.message}))}})}),f9.apply(this,arguments)}const aP=new _f.Yd("@firebase/app-check");function v9(r,t){return(0,J.hl)()?function fOe(r,t){return function Zle(r,t){return f9.apply(this,arguments)}(function Qle(r){return`${r.options.appId}-${r.name}`}(r),t)}(r,t).catch(e=>{aP.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function Jle(){return hz().enabled}function ehe(){return b9.apply(this,arguments)}function b9(){return b9=(0,vt.Z)(function*(){const r=hz();if(r.enabled&&r.token)return r.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),b9.apply(this,arguments)}const COe={error:"UNKNOWN_ERROR"};function wOe(r){return J.US.encodeString(JSON.stringify(r),!1)}function pz(r){return C9.apply(this,arguments)}function C9(){return C9=(0,vt.Z)(function*(r,t=!1){const e=r.app;Kle(e);const i=mh(e);let s,n=i.token;if(n&&!eI(n)&&(i.token=void 0,n=void 0),!n){const l=yield i.cachedTokenPromise;l&&(eI(l)?n=l:yield v9(e,void 0))}if(!t&&n&&eI(n))return{token:n.token};let a,o=!1;if(Jle()){i.exchangeTokenPromise||(i.exchangeTokenPromise=d9(uOe(e,yield ehe()),r.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);const l=yield i.exchangeTokenPromise;return yield v9(e,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),n=yield mh(e).exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?aP.warn(l.message):aP.error(l),s=l}return n?s?a=eI(n)?{token:n.token,internalError:s}:nhe(s):(a={token:n.token},i.token=n,yield v9(e,n)):a=nhe(s),o&&ihe(e,a),a}),C9.apply(this,arguments)}function S9(r,t){const e=mh(r),i=e.tokenObservers.filter(n=>n.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=i}function the(r){const{app:t}=r,e=mh(t);let i=e.tokenRefresher;i||(i=function SOe(r){const{app:t}=r;return new sOe((0,vt.Z)(function*(){let i;if(i=mh(t).token?yield pz(r,!0):yield pz(r),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const e=mh(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(r),e.tokenRefresher=i),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function ihe(r,t){const e=mh(r).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch{}}function eI(r){return r.expireTimeMillis-Date.now()>0}function nhe(r){return{token:wOe(COe),error:r}}class EOe{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=mh(this.app);for(const e of t)S9(this.app,e.next);return Promise.resolve()}}const che="app-check-internal";!function NOe(){(0,pu._registerComponent)(new Rf.wA("app-check",r=>function xOe(r,t){return new EOe(r,t)}(r.getProvider("app").getImmediate(),r.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((r,t,e)=>{r.getProvider(che).initialize()})),(0,pu._registerComponent)(new Rf.wA(che,r=>function TOe(r){return{getToken:t=>pz(r,t),addTokenListener:t=>function w9(r,t,e,i){const{app:n}=r,s=mh(n);if(s.tokenObservers=[...s.tokenObservers,{next:e,error:i,type:t}],s.token&&eI(s.token)){const a=s.token;Promise.resolve().then(()=>{e({token:a.token}),the(r)}).catch(()=>{})}s.cachedTokenPromise.then(()=>the(r))}(r,"INTERNAL",t),removeTokenListener:t=>S9(r.app,t)}}(r.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,pu.registerVersion)("@firebase/app-check","0.5.17")}();class lP{constructor(){return(0,ls.vb)("app-check")}}typeof window<"u"&&window;var gz=te(127);const I9=new b.OlP("angularfire2.auth.use-emulator"),A9=new b.OlP("angularfire2.auth.settings"),k9=new b.OlP("angularfire2.auth.tenant-id"),R9=new b.OlP("angularfire2.auth.langugage-code"),_9=new b.OlP("angularfire2.auth.use-device-language"),L9=new b.OlP("angularfire.auth.persistence"),O9=(r,t,e,i,n,s,o,a)=>(0,Cl.cc)(`${r.name}.auth`,"AngularFireAuth",r.name,()=>{const l=t.runOutsideAngular(()=>r.auth());if(e&&l.useEmulator(...e),i&&(l.tenantId=i),l.languageCode=n,s&&l.useDeviceLanguage(),o)for(const[h,u]of Object.entries(o))l.settings[h]=u;return a&&l.setPersistence(a),l},[e,i,n,s,o,a]);let mz=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,v){const C=new Lu.x,S=Oi(void 0).pipe((0,az.Q)(o.outsideAngular),Qo(()=>s.runOutsideAngular(()=>Promise.resolve().then(te.bind(te,1277)))),(0,qi.U)(()=>(0,Cl.on)(e,s,i)),(0,qi.U)(A=>O9(A,s,a,h,u,d,l,m)),Ule({bufferSize:1,refCount:!1}));if($a(n))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Oi(null);else{S.pipe(Fp()).subscribe();const _=S.pipe(Qo(B=>B.getRedirectResult().then(j=>j,()=>null)),ls.iC,Ule({bufferSize:1,refCount:!1})),M=S.pipe(Qo(B=>new ba.y(j=>({unsubscribe:s.runOutsideAngular(()=>B.onAuthStateChanged(G=>j.next(G),G=>j.error(G),()=>j.complete()))})))),P=S.pipe(Qo(B=>new ba.y(j=>({unsubscribe:s.runOutsideAngular(()=>B.onIdTokenChanged(G=>j.next(G),G=>j.error(G),()=>j.complete()))}))));this.authState=_.pipe(Wle(M),(0,a9.R)(o.outsideAngular),(0,az.Q)(o.insideAngular)),this.user=_.pipe(Wle(P),(0,a9.R)(o.outsideAngular),(0,az.Q)(o.insideAngular)),this.idToken=this.user.pipe(Qo(B=>B?(0,Ur.D)(B.getIdToken()):Oi(null))),this.idTokenResult=this.user.pipe(Qo(B=>B?(0,Ur.D)(B.getIdTokenResult()):Oi(null))),this.credential=(0,YG.T)(_,C,this.authState.pipe(Rh(B=>!B))).pipe((0,qi.U)(B=>B?.user?B:null),(0,a9.R)(o.outsideAngular),(0,az.Q)(o.insideAngular))}return(0,Cl.pX)(this,S,s,{spy:{apply:(A,_,M)=>{(A.startsWith("signIn")||A.startsWith("createUser"))&&M.then(P=>C.next(P))}}})}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Cl.Dh),b.LFG(Cl.xv,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(ls.HU),b.LFG(I9,8),b.LFG(A9,8),b.LFG(k9,8),b.LFG(R9,8),b.LFG(_9,8),b.LFG(L9,8),b.LFG(lP,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),UOe=(()=>{class r{constructor(){gz.Z.registerVersion("angularfire",ls.q4.full,"auth-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[mz]}),r})();function phe(r){return null==r}function fhe(r){return"function"==typeof r.set}function ghe(r,t){return fhe(t)?t:r.ref(t)}function mhe(r,t){if(function WOe(r){return"string"==typeof r}(r))return t.stringCase();if(fhe(r))return t.firebaseCase();if(function qOe(r){return"function"==typeof r.exportVal}(r))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof r)}function hP(r,t,e="on",i=$G.z){return new ba.y(n=>{let s=null;return s=r[e](t,(o,a)=>{i.schedule(()=>{n.next({snapshot:o,prevKey:a})}),"once"===e&&i.schedule(()=>n.complete())},o=>{i.schedule(()=>n.error(o))}),"on"===e?{unsubscribe(){null!=s&&r.off(t,s)}}:{unsubscribe(){}}}).pipe((0,qi.U)(n=>{const{snapshot:s,prevKey:o}=n;let a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),(0,Roe.B)())}function vhe(r,t){const e=r.length;for(let i=0;i<e;i++)if(r[i].payload.key===t)return i;return-1}function $Oe(r,t){const{payload:e,prevKey:i,key:n}=t,s=vhe(r,n),o=function KOe(r,t){if(phe(t))return 0;{const e=vhe(r,t);return-1===e?r.length:e+1}}(r,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let a=null;t.payload.forEach(l=>{const h={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,r=[...r,h],!1})}return r;case"child_added":if(s>-1){const a=r[s-1];(a&&a.key||null)!==i&&(r=r.filter(l=>l.payload.key!==e.key)).splice(o,0,t)}else{if(null==i)return[t,...r];(r=r.slice()).splice(o,0,t)}return r;case"child_removed":return r.filter(a=>a.payload.key!==e.key);case"child_changed":return r.map(a=>a.payload.key===n?t:a);case"child_moved":if(s>-1){const a=r.splice(s,1)[0];return(r=r.slice()).splice(o,0,a),r}return r;default:return r}}function yhe(r){return(phe(r)||0===r.length)&&(r=["child_added","child_removed","child_changed","child_moved"]),r}function bhe(r,t,e){return function GOe(r,t,e){return hP(r,"value","once",e).pipe(Qo(i=>{const n=[Oi(i)];return t.forEach(s=>n.push(hP(r,s,"on",e))),(0,YG.T)(...n).pipe(Cg($Oe,[]))}),_oe())}(r,t=yhe(t),e)}function Che(r,t,e){const i=(t=yhe(t)).map(n=>hP(r,n,"on",e));return(0,YG.T)(...i)}function whe(r,t){return function(i,n){return mhe(i,{stringCase:()=>r.child(i)[t](n),firebaseCase:()=>i[t](n),snapshotCase:()=>i.ref[t](n)})}}function QOe(r){return function(e){return e?mhe(e,{stringCase:()=>r.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):r.remove()}}function She(r,t){return function(){return hP(r,"value","on",t)}}const tPe=new b.OlP("angularfire2.realtimeDatabaseURL"),iPe=new b.OlP("angularfire2.database.use-emulator");let tI=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,v,C,S,A){this.schedulers=a;const _=l,M=(0,Cl.on)(e,o,i);h&&O9(M,o,u,m,v,C,d,S),this.database=(0,Cl.cc)(`${M.name}.database.${n}`,"AngularFireDatabase",M.name,()=>{const P=o.runOutsideAngular(()=>M.database(n||void 0));return _&&P.useEmulator(..._),P},[_])}list(e,i){const n=this.schedulers.ngZone.runOutsideAngular(()=>ghe(this.database,e));let s=n;return i&&(s=i(n)),function JOe(r,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>r.ref);return{query:r,update:whe(i,"update"),set:whe(i,"set"),push:n=>i.push(n),remove:QOe(i),snapshotChanges:n=>bhe(r,n,e).pipe(ls.iC),stateChanges:n=>Che(r,n,e).pipe(ls.iC),auditTrail:n=>function YOe(r,t,e){return function XOe(r,t,e){return function ZOe(r,t){return hP(r,"value","on",t).pipe((0,qi.U)(e=>{let i;return e.payload.forEach(n=>(i=n.key,!1)),{data:e,lastKeyToLoad:i}}))}(r,e).pipe(function JAe(...r){const t=(0,Ru.jO)(r);return(0,Xa.e)((e,i)=>{const n=r.length,s=new Array(n);let o=r.map(()=>!1),a=!1;for(let l=0;l<n;l++)(0,Ih.Xf)(r[l]).subscribe((0,Lo.x)(i,h=>{s[l]=h,!a&&!o[l]&&(o[l]=!0,(a=o.every(bg.y))&&(o=null))},QAe.Z));e.subscribe((0,Lo.x)(i,l=>{if(a){const h=[l,...s];i.next(t?t(...h):h)}}))})}(t),(0,qi.U)(([n,s])=>{const o=n.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function eke(r){return(0,Xa.e)((t,e)=>{let i=!1,n=0;t.subscribe((0,Lo.x)(e,s=>(i||(i=!r(s,n++)))&&e.next(s)))})}(n=>-1===n.loadedKeys.indexOf(n.lastKeyToLoad)),(0,qi.U)(n=>n.actions))}(r,Che(r,t).pipe(Cg((n,s)=>[...n,s],[])),e)}(r,n,e).pipe(ls.iC),valueChanges:(n,s)=>bhe(r,n,e).pipe((0,qi.U)(a=>a.map(l=>s&&s.idField?Object.assign(Object.assign({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),ls.iC)}}(s,this)}object(e){return function ePe(r,t){return{query:r,snapshotChanges:()=>She(r,t.schedulers.outsideAngular)().pipe(ls.iC),update:e=>r.ref.update(e),set:e=>r.ref.set(e),remove:()=>r.ref.remove(),valueChanges:()=>She(r,t.schedulers.outsideAngular)().pipe(ls.iC,(0,qi.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ghe(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Cl.Dh),b.LFG(Cl.xv,8),b.LFG(tPe,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(ls.HU),b.LFG(iPe,8),b.LFG(mz,8),b.LFG(I9,8),b.LFG(A9,8),b.LFG(k9,8),b.LFG(R9,8),b.LFG(_9,8),b.LFG(L9,8),b.LFG(lP,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),nPe=(()=>{class r{constructor(){gz.Z.registerVersion("angularfire",ls.q4.full,"rtdb-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[tI]}),r})();class uP{}let vz=(()=>{class r extends Lu.x{constructor(e,i){super(),this._db=e,this.objectType=i,this.listSource=i.listSource,this.dataRef=e.list(this.listSource)}execute(e){this.getData(e).subscribe(i=>super.next(i))}getData(e){return this._db.list(this.listSource).snapshotChanges().pipe((0,qi.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}getList(e){return this._db.list(e).snapshotChanges().pipe((0,qi.U)(i=>({count:i.length,result:i.map(n=>({...n.payload.val(),key:n.payload.key}))})))}addData(e){return this.dataRef.push(e)}updateData(e,i){return this.dataRef.update(e,i)}deleteData(e){if(""!=e)return this.dataRef.remove(e)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(tI),b.LFG(uP))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class rPe extends uP{constructor(){super(...arguments),this.listSource="recipes"}}let sPe=(()=>{class r extends vz{constructor(e){super(e,new rPe)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(tI))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const oPe=["grid"],aPe=function(r){return{"e-error":r}};function lPe(r,t){if(1&r&&(b.TgZ(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),b._UZ(4,"input",13)(5,"span",14),b.TgZ(6,"label",15),b._uU(7," Description"),b.qZA()()(),b.TgZ(8,"div",11)(9,"div",16),b._UZ(10,"input",17)(11,"span",14),b.TgZ(12,"label",18),b._uU(13," Ethnicity"),b.qZA()()()()()),2&r){const e=t.$implicit,i=b.oxw();b.Q6J("formGroup",i.orderForm),b.xp6(3),b.Q6J("ngClass",b.VKq(4,aPe,e.invalid&&(e.dirty||e.touched))),b.xp6(1),b.uIk("disabled",e.isAdd?null:""),b.xp6(6),b.uIk("disabled",e.isAdd?null:"")}}let hPe=(()=>{class r{constructor(e){this.recipeService=e,this.submitClicked=!1,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete","Update","Cancel"],this.recipes=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.recipeService.execute(this.state)}dataStateChange(e){this.recipeService.execute(e)}dataSourceChanged(e){"add"===e.action?this.recipeService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.recipeService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.recipeService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}createFormGroup(e){return new Wm({description:new kp(e.description,_y.required),ethnicity:new kp(e.ethnicity),ingredients:new kp(e.ingredients,_y.required),instructions:new kp(e.instructions),meal_time:new kp(e.meal_time)})}dateValidator(){return e=>e.value&&e.value.getFullYear&&1900<=e.value.getFullYear()&&e.value.getFullYear()<=2099?null:{OrderDate:{value:e.value}}}actionBegin(e){("beginEdit"===e.requestType||"add"===e.requestType)&&(this.submitClicked=!1,this.orderForm=this.createFormGroup(e.data)),"save"===e.requestType&&(this.submitClicked=!0,this.orderForm.valid?e.data=this.orderForm.value:e.cancel=!0)}actionComplete(e){("beginEdit"===e.requestType||"add"===e.requestType)&&(Z.isDevice&&(e.dialog.height=window.innerHeight-90+"px",e.dialog.dataBind()),"beginEdit"===e.requestType?e.form.elements.namedItem("ingredients").focus():"add"===e.requestType&&e.form.elements.namedItem("description").focus())}get description(){return this.orderForm.get("description")}get ingredients(){return this.orderForm.get("ingredients")}get ethnicity(){return this.orderForm.get("ethnicity")}get instructions(){return this.orderForm.get("instructions")}get meal_time(){return this.orderForm.get("meal_time")}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(sPe))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-recipe"]],viewQuery:function(e,i){if(1&e&&b.Gf(oPe,5),2&e){let n;b.iGM(n=b.CRH())&&(i.grid=n.first)}},features:[b._Bn([E2,x2])],decls:12,vars:6,consts:[[1,"control-section"],["allowPaging","true",3,"dataSource","pageSettings","editSettings","toolbar","actionBegin","actionComplete","dataSourceChanged","dataStateChange"],["field","name","headerText","name","width","120"],["field","description","headerText","description","width","120"],["field","ethnicity","headerText","ethnicity","width","120"],["field","ingredients","headerText","ingredients","width","120"],["field","instructions","headerText","instructions","width","120"],["field","meal_time","headerText","meal_time","width","120"],["editSettingsTemplate",""],[3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-6"],[1,"e-float-input","e-control-wrapper",3,"ngClass"],["formControlName","description","data-msg-containerid","descriptionError","id","description","name","description","type","text"],[1,"e-float-line"],["for","description",1,"e-float-text","e-label-top"],[1,"e-float-input","e-control-wrapper"],["formControlName","ethnicity","data-msg-containerid","ethnicityError","id","ethnicity","name","ethnicity","type","text"],["for","ethnicity",1,"e-float-text","e-label-top"]],template:function(e,i){1&e&&(b.TgZ(0,"div",0)(1,"ejs-grid",1),b.NdJ("actionBegin",function(s){return i.actionBegin(s)})("actionComplete",function(s){return i.actionComplete(s)})("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),b.ALo(2,"async"),b.TgZ(3,"e-columns"),b._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7),b.qZA(),b.YNc(10,lPe,14,6,"ng-template",null,8,b.W1O),b.qZA()()),2&e&&(b.xp6(1),b.Q6J("dataSource",b.lcZ(2,4,i.recipes))("pageSettings",i.pageSettings)("editSettings",i.editSettings)("toolbar",i.toolbar))},dependencies:[Br,S2,AO,kO,RO,_O,ky,QE,Ny,$h,Ya,id],styles:["img[_ngcontent-%COMP%]{width:300px;height:200px;object-fit:cover}"]}),r})();class uPe extends uP{constructor(){super(...arguments),this.listSource="ingredients"}}let cPe=(()=>{class r extends vz{constructor(e){super(e,new uPe)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(tI))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const dPe=["grid"];let pPe=(()=>{class r{constructor(e){this.ingredientsService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.ingredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.ingredientsService.execute(this.state)}dataStateChange(e){this.ingredientsService.execute(e)}dataSourceChanged(e){"add"===e.action?this.ingredientsService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.ingredientsService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.ingredientsService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(cPe))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-ingredients"]],viewQuery:function(e,i){if(1&e&&b.Gf(dPe,5),2&e){let n;b.iGM(n=b.CRH())&&(i.grid=n.first)}},features:[b._Bn([E2,x2])],decls:9,vars:5,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","name"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"]],template:function(e,i){1&e&&(b.TgZ(0,"ejs-grid",0,1),b.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),b.ALo(2,"async"),b.TgZ(3,"e-columns"),b._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6),b.qZA()()),2&e&&b.Q6J("dataSource",b.lcZ(2,3,i.ingredients))("editSettings",i.editSettings)("toolbar",i.toolbar)},dependencies:[S2,AO,kO,RO,_O,id]}),r})(),fPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-contact"]],decls:25,vars:0,consts:[[1,"main"],[1,"container"],["action","https://nutrition-genius-default-rtdb.firebaseio.com/"],["for","fname"],["type","text","id","fname","name","firstname","placeholder","Your name.."],["for","lname"],["type","text","id","lname","name","lastname","placeholder","Your last name.."],["for","country"],["id","country","name","country"],["value","australia"],["value","canada"],["value","usa"],["for","subject"],["id","subject","name","subject","placeholder","Write something..",2,"height","200px"],["type","submit","value","Submit"]],template:function(e,i){1&e&&(b.TgZ(0,"html")(1,"div",0)(2,"p"),b._uU(3," Contact Us "),b.qZA()(),b.TgZ(4,"div",1)(5,"form",2)(6,"label",3),b._uU(7,"First Name"),b.qZA(),b._UZ(8,"input",4),b.TgZ(9,"label",5),b._uU(10,"Last Name"),b.qZA(),b._UZ(11,"input",6),b.TgZ(12,"label",7),b._uU(13,"Country"),b.qZA(),b.TgZ(14,"select",8)(15,"option",9),b._uU(16,"Australia"),b.qZA(),b.TgZ(17,"option",10),b._uU(18,"Canada"),b.qZA(),b.TgZ(19,"option",11),b._uU(20,"USA"),b.qZA()(),b.TgZ(21,"label",12),b._uU(22,"Subject"),b.qZA(),b._UZ(23,"textarea",13)(24,"input",14),b.qZA()()())},styles:["html[_ngcontent-%COMP%]{background-color:#fff}input[type=text][_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%;padding:12px;border:1px solid rgb(255,255,255);border-radius:4px;box-sizing:border-box;margin-top:6px;margin-bottom:16px;resize:vertical}input[type=submit][_ngcontent-%COMP%]{background-color:#303030;color:#fff;padding:12px 20px;border:none;border-radius:4px;cursor:pointer}input[type=submit][_ngcontent-%COMP%]:hover{background-color:aciablue}.container[_ngcontent-%COMP%]{border-radius:40px;background-color:#556b2fb1;padding:40px}p[_ngcontent-%COMP%]{font-weight:600;font-size:100px;align-items:center;font-family:Impact,Haettenschweiler,Arial Narrow Bold,sans-serif}"]}),r})(),gPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-main-profile"]],decls:69,vars:0,consts:[["id","container"],["id","header"],["href","/download/template/36","target","_blank"],["id","wrapper"],["id","content"],["id","navigation"],["id","extra"],["id","footer"]],template:function(e,i){1&e&&(b.TgZ(0,"div",0)(1,"div",1)(2,"h1"),b._uU(3,"Header"),b.qZA(),b.TgZ(4,"a",2),b._uU(5,"download this layout"),b.qZA()(),b.TgZ(6,"div",3)(7,"div",4)(8,"p")(9,"strong"),b._uU(10,"1. Main Content"),b.qZA()(),b.TgZ(11,"h3"),b._uU(12,"The Ultimate Guide to Flexbox "),b.qZA(),b.TgZ(13,"p"),b._uU(14,"The Flex Layout module is new layout module in CSS3 made to improve the items align, directions and order in the container even when they are with dynamic or even unknown size. The prime characteristic of the flex container is the ability to modify the width or height of its children to fill the available space in the best possible way on different screen sizes. "),b.qZA(),b.TgZ(15,"p"),b._uU(16,"Flexbox is relatively new, but it enjoys excellent browser support today (nearly 83% of browsers support Flexbox). Flexbox Layout is used for small application components, whereas CSS Grid Layout Module is aimed to handle the large scale layouts. "),b.qZA(),b.TgZ(17,"h3"),b._uU(18,"The Two axes of Flexbox"),b.qZA(),b.TgZ(19,"p"),b._uU(20,"When working with flexbox you need to think in terms of two axes \xe2\u20ac\u201d the main axis and the cross axis. The main axis is defined by the flex-direction property, and the cross axis runs perpendicular to it. Everything we do with flexbox refers back to these axes, so it is worth understanding how they work from the outset. "),b.qZA()()(),b.TgZ(21,"div",5)(22,"p")(23,"strong"),b._uU(24,"2. Navigation Menu"),b.qZA()(),b.TgZ(25,"h3"),b._uU(26,"Styling Flex Container"),b.qZA(),b.TgZ(27,"ul")(28,"li"),b._uU(29,"flex-direction"),b.qZA(),b.TgZ(30,"li"),b._uU(31,"flex-wrap"),b.qZA(),b.TgZ(32,"li"),b._uU(33,"justify-content"),b.qZA(),b.TgZ(34,"li"),b._uU(35,"align-content"),b.qZA(),b.TgZ(36,"li"),b._uU(37,"align-items"),b.qZA()(),b.TgZ(38,"h3"),b._uU(39,"Designing Flex Items "),b.qZA(),b.TgZ(40,"ul")(41,"li"),b._uU(42,"order"),b.qZA(),b.TgZ(43,"li"),b._uU(44,"align-self"),b.qZA(),b.TgZ(45,"li"),b._uU(46,"flex-grow"),b.qZA(),b.TgZ(47,"li"),b._uU(48,"flex-shrink"),b.qZA(),b.TgZ(49,"li"),b._uU(50,"flex-basis"),b.qZA()()(),b.TgZ(51,"div",6)(52,"p")(53,"strong"),b._uU(54,"3. Additional Stuff"),b.qZA()(),b.TgZ(55,"h3"),b._uU(56,"In this guide you will learn:"),b.qZA(),b.TgZ(57,"ul")(58,"li"),b._uU(59,"How to use CSS Flexbox to build modern layouts"),b.qZA(),b.TgZ(60,"li"),b._uU(61,"How to align items both vertically and horizontally"),b.qZA(),b.TgZ(62,"li"),b._uU(63,"How to order items within container"),b.qZA(),b.TgZ(64,"li"),b._uU(65,"And more"),b.qZA()()(),b.TgZ(66,"div",7)(67,"p"),b._uU(68,"Footer"),b.qZA()()())}}),r})();class mPe extends uP{constructor(){super(...arguments),this.listSource="meals"}}let vPe=(()=>{class r extends vz{constructor(e){super(e,new mPe)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(tI))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const yPe=["grid"];let bPe=(()=>{class r{constructor(e){this.mealService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.meal=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.mealService.execute(this.state)}dataStateChange(e){this.mealService.execute(e)}dataSourceChanged(e){"add"===e.action?this.mealService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.mealService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.mealService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(vPe))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-meals"]],viewQuery:function(e,i){if(1&e&&b.Gf(yPe,5),2&e){let n;b.iGM(n=b.CRH())&&(i.grid=n.first)}},features:[b._Bn([E2,x2])],decls:10,vars:7,consts:[[3,"dataSource","allowPaging","pageSettings","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","recipe"],["field","meal_time"],["field","calories"],["field","carbs"],["field","fat"],["field","protein"]],template:function(e,i){1&e&&(b.TgZ(0,"ejs-grid",0,1),b.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),b.ALo(2,"async"),b.TgZ(3,"e-columns"),b._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4)(7,"e-column",5)(8,"e-column",6)(9,"e-column",7),b.qZA()()),2&e&&b.Q6J("dataSource",b.lcZ(2,5,i.meal))("allowPaging",!0)("pageSettings",i.pageSettings)("editSettings",i.editSettings)("toolbar",i.toolbar)},dependencies:[S2,AO,kO,RO,_O,id]}),r})(),CPe=(()=>{class r{constructor(e){this.authService=e}onSubmit(e){console.log("Credentials entered"),this.authObservable=this.authService.signup(e.value.name,e.value.email,e.value.password),this.authObservable.subscribe(i=>{console.log(i)},i=>{console.log(i)}),e.resetForm()}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(Rk))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-sign-up-page"]],decls:14,vars:1,consts:[[1,"row"],[1,"col-12"],[3,"ngSubmit"],["authForm","ngForm"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","placeholder","Email","ngMode","","name","email","required","","email","",1,"form-control"],["id","basic-addon1",1,"input-group-text"],["type","text","placeholder","Password","ngMode","","name","password","required","","password","",1,"form-control"],["type","submit",1,"btn","btn-dark",3,"disabled","click"]],template:function(e,i){if(1&e){const n=b.EpF();b.TgZ(0,"div",0)(1,"div",1)(2,"form",2,3),b.NdJ("ngSubmit",function(){b.CHM(n);const o=b.MAs(3);return b.KtG(i.onSubmit(o))}),b.TgZ(4,"div",4)(5,"span",5),b._uU(6,"Email:"),b.qZA(),b._UZ(7,"input",6),b.qZA(),b.TgZ(8,"div",4)(9,"span",7),b._uU(10,"Password:"),b.qZA(),b._UZ(11,"input",8),b.qZA(),b.TgZ(12,"button",9),b.NdJ("click",function(){return i.buttonClicked="SignUp"}),b._uU(13," Signup "),b.qZA()()()()}if(2&e){const n=b.MAs(3);b.xp6(12),b.Q6J("disabled",!n.valid)}},dependencies:[md,Ny,gd]}),r})();class wPe extends uP{constructor(){super(...arguments),this.listSource="recipeIngredients"}}let SPe=(()=>{class r extends vz{constructor(e){super(e,new wPe)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(tI))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const EPe=["grid"],xPe=[{path:"",component:l3},{path:"Profile",component:uF},{path:"About",component:cF},{path:"Recipes",component:hPe},{path:"Ingredients",component:pPe},{path:"SignUpPage",component:CPe},{path:"Contact",component:fPe},{path:"Main",component:gPe},{path:"Meals",component:bPe},{path:"RecipeIngredient",component:(()=>{class r{constructor(e){this.recipeIngredientService=e,this.editSettings={allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Dialog"},this.toolbar=["Add","Edit","Delete"],this.recipeIngredients=e,this.state={skip:0,take:10},this.pageSettings={pageSize:10}}ngOnInit(){this.recipeIngredientService.execute(this.state),this.recipeIngredientService.getList("recipeIngredients").subscribe(e=>this.ingredientData=e.result.val()),console.log(this.ingredientData)}dataStateChange(e){this.recipeIngredientService.execute(e)}dataSourceChanged(e){"add"===e.action?this.recipeIngredientService.addData(e.data).subscribe(()=>{e.endEdit?.()}):"edit"===e.action?this.recipeIngredientService.updateData(e.data.key,e.data).subscribe(()=>{e.endEdit?.()},()=>{this.grid.closeEdit()}):"delete"===e.requestType&&this.recipeIngredientService.deleteData(e.data[0].key).subscribe(()=>{e.endEdit?.()})}}return r.\u0275fac=function(e){return new(e||r)(b.Y36(SPe))},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-recipe-ingredient"]],viewQuery:function(e,i){if(1&e&&b.Gf(EPe,5),2&e){let n;b.iGM(n=b.CRH())&&(i.grid=n.first)}},features:[b._Bn([E2,x2,YAe])],decls:7,vars:5,consts:[[3,"dataSource","editSettings","toolbar","dataSourceChanged","dataStateChange"],["grid",""],["field","key"],["field","recipe"],["field","amount"]],template:function(e,i){1&e&&(b.TgZ(0,"ejs-grid",0,1),b.NdJ("dataSourceChanged",function(s){return i.dataSourceChanged(s)})("dataStateChange",function(s){return i.dataStateChange(s)}),b.ALo(2,"async"),b.TgZ(3,"e-columns"),b._UZ(4,"e-column",2)(5,"e-column",3)(6,"e-column",4),b.qZA()()),2&e&&b.Q6J("dataSource",b.lcZ(2,3,i.recipeIngredients))("editSettings",i.editSettings)("toolbar",i.toolbar)},dependencies:[S2,AO,kO,RO,_O,id]}),r})()}];let TPe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({imports:[Dk.forRoot(xPe),Dk]}),r})(),DPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-nav-bar"]],decls:33,vars:0,consts:[[1,"navbar","navbar-expand-lg",2,"background-color","aliceblue"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["src","\\assets\\images\\NutritionGeniusLogo.png","width","100","height","100","alt","Nutrition Genius"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarCollapse",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarCollapse",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLink","","href","#",1,"nav-item","nav-link","active"],["routerLink","Profile","href","#",1,"nav-item","nav-link","active"],["routerLink","Recipes","href","#",1,"nav-item","nav-link","active"],["routerLink","Ingredients","href","#",1,"nav-item","nav-link","active"],["routerLink","Meals","href","#",1,"nav-item","nav-link","active"],[1,"nav-item","dropdown"],["href","#","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle","active"],[1,"dropdown-menu"],["routerLink","About","href","#",1,"dropdown-item"],["routerLink","Contact","href","#",1,"dropdown-item"],[1,"navbar-nav","ms-auto"],["type","button",1,"btn","me-3"],["routerLink","SignUpPage","href","#",1,"nav-item","nav-link","active"]],template:function(e,i){1&e&&(b.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),b._UZ(3,"img",3),b.qZA(),b.TgZ(4,"button",4),b._UZ(5,"span",5),b.qZA(),b.TgZ(6,"div",6)(7,"div",7)(8,"a",8),b._uU(9,"Home"),b.qZA(),b.TgZ(10,"a",9),b._uU(11,"Profile"),b.qZA(),b.TgZ(12,"a",10),b._uU(13,"Recipes"),b.qZA(),b.TgZ(14,"a",11),b._uU(15,"Ingredients"),b.qZA(),b.TgZ(16,"a",12),b._uU(17,"Meals"),b.qZA(),b.TgZ(18,"div",13)(19,"a",14),b._uU(20,"About"),b.qZA(),b.TgZ(21,"div",15)(22,"a",16),b._uU(23,"About Us"),b.qZA(),b.TgZ(24,"a",17),b._uU(25,"Contact"),b.qZA()()()(),b.TgZ(26,"div",18)(27,"button",19)(28,"a",9),b._uU(29,"Login"),b.qZA()(),b.TgZ(30,"button",19)(31,"a",20),b._uU(32,"Sign up"),b.qZA()()()()()())},dependencies:[xc],styles:[".btn[_ngcontent-%COMP%]{background-color:#556b2fa4;width:100px;height:50px}img[_ngcontent-%COMP%]{border-radius:50%}"]}),r})(),IPe=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-footer"]],decls:13,vars:0,consts:[[1,""],[1,"text-center","text-black",2,"background-color","aliceblue"],[1,"container","p-4","pb-0"],[1,"d-flex","justify-content-center","align-items-center"],[1,"me-3"],["type","button",1,"btn","btn-outline-dark","btn-rounded"],[1,"text-center","p-3",2,"background-color","rgba(0, 0, 0, 0.2)"],["href","https://mdbootstrap.com/",1,"text-white"]],template:function(e,i){1&e&&(b.TgZ(0,"section",0)(1,"footer",1)(2,"div",2)(3,"section",0)(4,"p",3)(5,"span",4),b._uU(6,"Register for free"),b.qZA(),b.TgZ(7,"button",5),b._uU(8," Sign up! "),b.qZA()()()(),b.TgZ(9,"div",6),b._uU(10," \xa9 2022 Copyright: "),b.TgZ(11,"a",7),b._uU(12,"Nutritiongenius.com"),b.qZA()()()())},styles:["footer[_ngcontent-%COMP%]{position:relative}"]}),r})(),APe=(()=>{class r{constructor(){this.title="nutrition-genius"}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=b.Xpm({type:r,selectors:[["app-root"]],decls:5,vars:0,template:function(e,i){1&e&&(b.TgZ(0,"app-nav-bar"),b._uU(1,"Loading..."),b.qZA(),b._UZ(2,"router-outlet"),b.TgZ(3,"app-footer"),b._uU(4,"Loading..."),b.qZA())},dependencies:[fw,DPe,IPe]}),r})();const Ehe="firebasestorage.googleapis.com",xhe="storageBucket";class pa extends J.ZR{constructor(t,e,i=0){super(P9(t),`Firebase Storage: ${e} (${P9(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pa.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return P9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function P9(r){return"storage/"+r}function M9(){return new pa("unknown","An unknown error occurred, please check the error payload for server response.")}function The(){return new pa("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Dhe(){return new pa("canceled","User canceled the upload/download.")}function Ihe(){return new pa("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iI(r){return new pa("invalid-argument",r)}function Ahe(){return new pa("app-deleted","The Firebase app was deleted.")}function khe(r){return new pa("invalid-root-operation","The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function cP(r,t){return new pa("invalid-format","String does not match format '"+r+"': "+t)}function dP(r){throw new pa("internal-error","Internal error: "+r)}class Hh{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=Hh.makeFromUrl(t,e)}catch{return new Hh(t,"")}if(""===i.path)return i;throw function HPe(r){return new pa("invalid-default-bucket","Invalid default bucket '"+r+"'.")}(t)}static makeFromUrl(t,e){let i=null;const n="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+n+"(/(.*))?$","i");function h(B){B.path_=decodeURIComponent(B.path)}const d=e.replace(/[.]/g,"\\."),P=[{regex:a,indices:{bucket:1,path:3},postModify:function s(B){"/"===B.path.charAt(B.path.length-1)&&(B.path_=B.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${d}/v[A-Za-z0-9_]+/b/${n}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:h},{regex:new RegExp(`^https?://${e===Ehe?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${n}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:h}];for(let B=0;B<P.length;B++){const j=P[B],G=j.regex.exec(t);if(G){let fe=G[j.indices.path];fe||(fe=""),i=new Hh(G[j.indices.bucket],fe),j.postModify(i);break}}if(null==i)throw function BPe(r){return new pa("invalid-url","Invalid URL '"+r+"'.")}(t);return i}}class WPe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function yz(r){return"string"==typeof r||r instanceof String}function Rhe(r){return F9()&&r instanceof Blob}function F9(){return typeof Blob<"u"&&!(0,J.UG)()}function N9(r,t,e,i){if(i<t)throw iI(`Invalid value for '${r}'. Expected ${t} or greater.`);if(i>e)throw iI(`Invalid value for '${r}'. Expected ${e} or less.`)}function Qv(r,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${r}`}function _he(r){const t=encodeURIComponent;let e="?";for(const i in r)r.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(r[i])+"&");return e=e.slice(0,-1),e}var NC=(()=>(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"}(NC||(NC={})),NC))();function Lhe(r,t){const e=r>=500&&r<600,n=-1!==[408,429].indexOf(r),s=-1!==t.indexOf(r);return e||n||s}class ZPe{constructor(t,e,i,n,s,o,a,l,h,u,d,m=!0){this.url_=t,this.method_=e,this.headers_=i,this.body_=n,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=u,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,C)=>{this.resolve_=v,this.reject_=C,this.start_()})}start_(){const e=(i,n)=>{const s=this.resolve_,o=this.reject_,a=n.connection;if(n.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function KPe(r){return void 0!==r}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=M9();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(n.canceled?this.appDelete_?Ahe():Dhe():The())};this.canceled_?e(0,new bz(!1,null,!0)):this.backoffId_=function qPe(r,t,e){let i=1,n=null,s=null,o=!1,a=0;function l(){return 2===a}let h=!1;function u(...A){h||(h=!0,t.apply(null,A))}function d(A){n=setTimeout(()=>{n=null,r(v,l())},A)}function m(){s&&clearTimeout(s)}function v(A,..._){if(h)return void m();if(A)return m(),void u.call(null,A,..._);if(l()||o)return m(),void u.call(null,A,..._);let P;i<64&&(i*=2),1===a?(a=2,P=0):P=1e3*(i+Math.random()),d(P)}let C=!1;function S(A){C||(C=!0,m(),!h&&(null!==n?(A||(a=2),clearTimeout(n),d(0)):A||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,S(!0)},e),S}((i,n)=>{if(n)return void i(!1,new bz(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===NC.NO_ERROR,l=s.getStatus();if((!a||Lhe(l,this.additionalRetryCodes_))&&this.retry){const u=s.getErrorCode()===NC.ABORT;return void i(!1,new bz(!1,null,u))}const h=-1!==this.successCodes_.indexOf(l);i(!0,new bz(h,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function GPe(r){r(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bz{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function nMe(...r){const t=function iMe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<r.length;i++)e.append(r[i]);return e.getBlob()}if(F9())return new Blob(r);throw new pa("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Xc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class B9{constructor(t,e){this.data=t,this.contentType=e||null}}function H9(r,t){switch(r){case Xc.RAW:return new B9(Ohe(t));case Xc.BASE64:case Xc.BASE64URL:return new B9(Phe(r,t));case Xc.DATA_URL:return new B9(function aMe(r){const t=new Mhe(r);return t.base64?Phe(Xc.BASE64,t.rest):function oMe(r){let t;try{t=decodeURIComponent(r)}catch{throw cP(Xc.DATA_URL,"Malformed data URL.")}return Ohe(t)}(t.rest)}(t),function lMe(r){return new Mhe(r).contentType}(t))}throw M9()}function Ohe(r){const t=[];for(let e=0;e<r.length;e++){let i=r.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<r.length-1&&56320==(64512&r.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&r.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function Phe(r,t){switch(r){case Xc.BASE64:{const n=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(n||s)throw cP(r,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case Xc.BASE64URL:{const n=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(n||s)throw cP(r,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function sMe(r){if(typeof atob>"u")throw function UPe(r){return new pa("unsupported-environment",`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(r)}(t)}catch(n){throw n.message.includes("polyfill")?n:cP(r,"Invalid character found")}const i=new Uint8Array(e.length);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return i}class Mhe{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw cP(Xc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function hMe(r,t){return r.length>=t.length&&r.substring(r.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Zg{constructor(t,e){let i=0,n="";Rhe(t)?(this.data_=t,i=t.size,n=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=n}size(){return this.size_}type(){return this.type_}slice(t,e){if(Rhe(this.data_)){const n=function rMe(r,t,e){return r.webkitSlice?r.webkitSlice(t,e):r.mozSlice?r.mozSlice(t,e):r.slice?r.slice(t,e):null}(this.data_,t,e);return null===n?null:new Zg(n)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Zg(i,!0)}}static getBlob(...t){if(F9()){const e=t.map(i=>i instanceof Zg?i.data_:i);return new Zg(nMe.apply(null,e))}{const e=t.map(o=>yz(o)?H9(Xc.RAW,o).data:o.data_);let i=0;e.forEach(o=>{i+=o.byteLength});const n=new Uint8Array(i);let s=0;return e.forEach(o=>{for(let a=0;a<o.length;a++)n[s++]=o[a]}),new Zg(n,!0)}}uploadData(){return this.data_}}function V9(r){let t;try{t=JSON.parse(r)}catch{return null}return function YPe(r){return"object"==typeof r&&!Array.isArray(r)}(t)?t:null}function Fhe(r){const t=r.lastIndexOf("/",r.length-2);return-1===t?r:r.slice(t+1)}function dMe(r,t){return t}class mu{constructor(t,e,i,n){this.server=t,this.local=e||t,this.writable=!!i,this.xform=n||dMe}}let Cz=null;function pP(){if(Cz)return Cz;const r=[];r.push(new mu("bucket")),r.push(new mu("generation")),r.push(new mu("metageneration")),r.push(new mu("name","fullPath",!0));const e=new mu("name");e.xform=function t(s,o){return function pMe(r){return!yz(r)||r.length<2?r:Fhe(r)}(o)},r.push(e);const n=new mu("size");return n.xform=function i(s,o){return void 0!==o?Number(o):o},r.push(n),r.push(new mu("timeCreated")),r.push(new mu("updated")),r.push(new mu("md5Hash",null,!0)),r.push(new mu("cacheControl",null,!0)),r.push(new mu("contentDisposition",null,!0)),r.push(new mu("contentEncoding",null,!0)),r.push(new mu("contentLanguage",null,!0)),r.push(new mu("contentType",null,!0)),r.push(new mu("metadata","customMetadata",!0)),Cz=r,Cz}function Nhe(r,t,e){const i=V9(t);return null===i?null:function gMe(r,t,e){const i={type:"file"},n=e.length;for(let s=0;s<n;s++){const o=e[s];i[o.local]=o.xform(i,t[o.server])}return function fMe(r,t){Object.defineProperty(r,"ref",{get:function e(){const s=new Hh(r.bucket,r.fullPath);return t._makeStorageReference(s)}})}(i,r),i}(r,i,e)}function z9(r,t){const e={},i=t.length;for(let n=0;n<i;n++){const s=t[n];s.writable&&(e[s.server]=r[s.local])}return JSON.stringify(e)}class Xg{constructor(t,e,i,n){this.url=t,this.method=e,this.handler=i,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Qg(r){if(!r)throw M9()}function wz(r,t){return function e(i,n){const s=Nhe(r,n,t);return Qg(null!==s),s}}function nI(r){return function t(e,i){let n;return n=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function FPe(){return new pa("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function MPe(){return new pa("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function PPe(r){return new pa("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===e.getStatus()?function NPe(r){return new pa("unauthorized","User does not have permission to access '"+r+"'.")}(r.path):i,n.status=e.getStatus(),n.serverResponse=i.serverResponse,n}}function fP(r){const t=nI(r);return function e(i,n){let s=t(i,n);return 404===i.getStatus()&&(s=function OPe(r){return new pa("object-not-found","Object '"+r+"' does not exist.")}(r.path)),s.serverResponse=n.serverResponse,s}}function Vhe(r,t,e){const n=Qv(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new Xg(n,"GET",wz(r,e),o);return a.errorHandler=fP(t),a}function wMe(r,t,e,i,n){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),n&&(s.maxResults=n);const a=Qv(t.bucketOnlyServerUrl(),r.host,r._protocol),h=r.maxOperationRetryTime,u=new Xg(a,"GET",function bMe(r,t){return function e(i,n){const s=function yMe(r,t,e){const i=V9(e);return null===i?null:function vMe(r,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e.prefixes)for(const n of e.prefixes){const s=n.replace(/\/$/,""),o=r._makeStorageReference(new Hh(t,s));i.prefixes.push(o)}if(e.items)for(const n of e.items){const s=r._makeStorageReference(new Hh(t,n.name));i.items.push(s)}return i}(r,t,i)}(r,t,n);return Qg(null!==s),s}}(r,t.bucket),h);return u.urlParams=s,u.errorHandler=nI(t),u}function jhe(r,t,e){const i=Object.assign({},e);return i.fullPath=r.path,i.size=t.size(),i.contentType||(i.contentType=function TMe(r,t){return r&&r.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class Sz{constructor(t,e,i,n){this.current=t,this.total=e,this.finalized=!!i,this.metadata=n||null}}function j9(r,t){let e=null;try{e=r.getResponseHeader("X-Goog-Upload-Status")}catch{Qg(!1)}return Qg(!!e&&-1!==(t||["active"]).indexOf(e)),e}const kMe={STATE_CHANGED:"state_changed"},vu={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U9(r){switch(r){case"running":case"pausing":case"canceling":return vu.RUNNING;case"paused":return vu.PAUSED;case"success":return vu.SUCCESS;case"canceled":return vu.CANCELED;default:return vu.ERROR}}class RMe{constructor(t,e,i){if(function $Pe(r){return"function"==typeof r}(t)||null!=e||null!=i)this.next=t,this.error=e??void 0,this.complete=i??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function rI(r){return(...t)=>{Promise.resolve().then(()=>r(...t))}}class LMe extends class _Me{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=NC.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=NC.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=NC.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,n){if(this.sent_)throw dP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==n)for(const s in n)n.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,n[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dP("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dP("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dP("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dP("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function Ff(){return new LMe}class Ghe{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=pP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=n=>{if(this._request=void 0,this._chunkMultiplier=1,n._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(Lhe(n.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();n=The()}this._error=n,this._transition("error")}},this._metadataErrorHandler=n=>{this._request=void 0,n._codeEquals("canceled")?this.completeTransitions_():(this._error=n,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((n,s)=>{this._resolve=n,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function DMe(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o=jhe(t,i,n),a={name:o.fullPath},l=Qv(s,r.host,r._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},d=z9(o,e),C=new Xg(l,"POST",function v(S){let A;j9(S);try{A=S.getResponseHeader("X-Goog-Upload-URL")}catch{Qg(!1)}return Qg(yz(A)),A},r.maxUploadRetryTime);return C.urlParams=a,C.headers=u,C.body=d,C.errorHandler=nI(t),C}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,Ff,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const n=function IMe(r,t,e,i){const l=new Xg(e,"POST",function s(h){const u=j9(h,["active","final"]);let d=null;try{d=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Qg(!1)}d||Qg(!1);const m=Number(d);return Qg(!isNaN(m)),new Sz(m,i.size(),"final"===u)},r.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=nI(t),l}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(n,Ff,e,i);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new Sz(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((n,s)=>{let o;try{o=function AMe(r,t,e,i,n,s,o,a){const l=new Sz(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw function zPe(){return new pa("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const h=l.total-l.current;let u=h;n>0&&(u=Math.min(u,n));const d=l.current;let v="";v=0===u?"finalize":h===u?"upload, finalize":"upload";const C={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${l.current}`},S=i.slice(d,d+u);if(null===S)throw Ihe();const P=new Xg(e,"POST",function A(B,j){const G=j9(B,["active","final"]),ne=l.current+u,fe=i.size();let Ee;return Ee="final"===G?wz(t,s)(B,j):null,new Sz(ne,fe,"final"===G,Ee)},t.maxUploadRetryTime);return P.headers=C,P.body=S.uploadData(),P.progressCallback=a||null,P.errorHandler=nI(r),P}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Ff,n,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=Vhe(this._ref.storage,this._ref._location,this._mappings),n=this._ref.storage._makeRequest(i,Ff,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function Uhe(r,t,e,i,n){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let P="";for(let B=0;B<2;B++)P+=Math.random().toString().slice(2);return P}();o["Content-Type"]="multipart/related; boundary="+l;const h=jhe(t,i,n),u=z9(h,e),v=Zg.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+l+"\r\nContent-Type: "+h.contentType+"\r\n\r\n",i,"\r\n--"+l+"--");if(null===v)throw Ihe();const C={name:h.fullPath},S=Qv(s,r.host,r._protocol),_=r.maxUploadRetryTime,M=new Xg(S,"POST",wz(r,e),_);return M.urlParams=C,M.headers=o,M.body=v.uploadData(),M.errorHandler=nI(t),M}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),n=this._ref.storage._makeRequest(i,Ff,t,e);this._request=n,n.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=Dhe(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=U9(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,n){const s=new RMe(e||void 0,i||void 0,n||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(U9(this._state)){case vu.SUCCESS:rI(this._resolve.bind(null,this.snapshot))();break;case vu.CANCELED:case vu.ERROR:rI(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(U9(this._state)){case vu.RUNNING:case vu.PAUSED:t.next&&rI(t.next.bind(t,this.snapshot))();break;case vu.SUCCESS:t.complete&&rI(t.complete.bind(t))();break;default:t.error&&rI(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class rE{constructor(t,e){this._service=t,this._location=e instanceof Hh?e:Hh.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new rE(t,e)}get root(){const t=new Hh(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Fhe(this._location.path)}get storage(){return this._service}get parent(){const t=function uMe(r){if(0===r.length)return null;const t=r.lastIndexOf("/");return-1===t?"":r.slice(0,t)}(this._location.path);if(null===t)return null;const e=new Hh(this._location.bucket,t);return new rE(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw khe(t)}}function $he(r,t,e){return W9.apply(this,arguments)}function W9(){return W9=(0,vt.Z)(function*(r,t,e){const n=yield Yhe(r,{pageToken:e});t.prefixes.push(...n.prefixes),t.items.push(...n.items),null!=n.nextPageToken&&(yield $he(r,t,n.nextPageToken))}),W9.apply(this,arguments)}function Yhe(r,t){null!=t&&"number"==typeof t.maxResults&&N9("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=wMe(r.storage,r._location,"/",e.pageToken,e.maxResults);return r.storage.makeRequestWithTokens(i,Ff)}function WMe(r){r._throwIfRoot("getDownloadURL");const t=function SMe(r,t,e){const n=Qv(t.fullServerUrl(),r.host,r._protocol),o=r.maxOperationRetryTime,a=new Xg(n,"GET",function CMe(r,t){return function e(i,n){const s=Nhe(r,n,t);return Qg(null!==s),function mMe(r,t,e,i){const n=V9(t);if(null===n||!yz(n.downloadTokens))return null;const s=n.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const d=r.fullPath;return Qv("/b/"+o(r.bucket)+"/o/"+o(d),e,i)+_he({alt:"media",token:h})})[0]}(s,n,r.host,r._protocol)}}(r,e),o);return a.errorHandler=fP(t),a}(r.storage,r._location,pP());return r.storage.makeRequestWithTokens(t,Ff).then(e=>{if(null===e)throw function jPe(){return new pa("no-download-url","The given file does not have any download URLs.")}();return e})}function Zhe(r,t){const e=function cMe(r,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===r.length?e:r+"/"+e}(r._location.path,t),i=new Hh(r._location.bucket,e);return new rE(r.storage,i)}function Xhe(r,t){if(r instanceof q9){const e=r;if(null==e._bucket)throw function VPe(){return new pa("no-default-bucket","No default bucket found. Did you set the '"+xhe+"' property when initializing the app?")}();const i=new rE(e,e._bucket);return null!=t?Xhe(i,t):i}return void 0!==t?Zhe(r,t):r}function $Me(r,t){if(t&&function GMe(r){return/^[A-Za-z]+:\/\//.test(r)}(t)){if(r instanceof q9)return function KMe(r,t){return new rE(r,t)}(r,t);throw iI("To use ref(service, url), the first argument must be a Storage instance.")}return Xhe(r,t)}function Qhe(r,t){const e=t?.[xhe];return null==e?null:Hh.makeFromBucketSpec(e,r)}class q9{constructor(t,e,i,n,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=n,this._firebaseVersion=s,this._bucket=null,this._host=Ehe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?Hh.makeFromBucketSpec(n,this._host):Qhe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?Hh.makeFromBucketSpec(this._url,t):Qhe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){N9("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){N9("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,vt.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,vt.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rE(this,t)}_makeRequest(t,e,i,n,s=!0){if(this._deleted)return new WPe(Ahe());{const o=function tMe(r,t,e,i,n,s,o=!0){const a=_he(r.urlParams),l=r.url+a,h=Object.assign({},r.headers);return function JPe(r,t){t&&(r["X-Firebase-GMPID"]=t)}(h,t),function XPe(r,t){null!==t&&t.length>0&&(r.Authorization="Firebase "+t)}(h,e),function QPe(r,t){r["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}(h,s),function eMe(r,t){null!==t&&(r["X-Firebase-AppCheck"]=t)}(h,i),new ZPe(l,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,n,o)}(t,this._appId,i,n,e,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(t,e){var i=this;return(0,vt.Z)(function*(){const[n,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,n,s).getPromise()})()}}const Jhe="@firebase/storage";function iue(r,t){return $Me(r=(0,J.m9)(r),t)}function r1e(r,{instanceIdentifier:t}){const e=r.getProvider("app").getImmediate(),i=r.getProvider("auth-internal"),n=r.getProvider("app-check-internal");return new q9(e,i,n,t,pu.SDK_VERSION)}!function s1e(){(0,pu._registerComponent)(new Rf.wA("storage",r1e,"PUBLIC").setMultipleInstances(!0)),(0,pu.registerVersion)(Jhe,"0.9.14",""),(0,pu.registerVersion)(Jhe,"0.9.14","esm2017")}();class Ez{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class rue{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ez(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new Ez(i,this,this._ref))},e)}on(t,e,i,n){let s;return e&&(s="function"==typeof e?o=>e(new Ez(o,this,this._ref)):{next:e.next?o=>e.next(new Ez(o,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,n||void 0)}}class sue{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new Jv(t,this._service))}get items(){return this._delegate.items.map(t=>new Jv(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Jv{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function n1e(r,t){return Zhe(r,t)}(this._delegate,t);return new Jv(e,this.storage)}get root(){return new Jv(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new Jv(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new rue(function ZMe(r,t,e){return function HMe(r,t,e){return r._throwIfRoot("uploadBytesResumable"),new Ghe(r,new Zg(t),e)}(r=(0,J.m9)(r),t,e)}(this._delegate,t,e),this)}putString(t,e=Xc.RAW,i){this._throwIfRoot("putString");const n=H9(e,t),s=Object.assign({},i);return null==s.contentType&&null!=n.contentType&&(s.contentType=n.contentType),new rue(new Ghe(this._delegate,new Zg(n.data,!0),s),this)}listAll(){return function e1e(r){return function zMe(r){const t={prefixes:[],items:[]};return $he(r,t).then(()=>t)}(r=(0,J.m9)(r))}(this._delegate).then(t=>new sue(t,this.storage))}list(t){return function JMe(r,t){return Yhe(r=(0,J.m9)(r),t)}(this._delegate,t||void 0).then(e=>new sue(e,this.storage))}getMetadata(){return function XMe(r){return function jMe(r){r._throwIfRoot("getMetadata");const t=Vhe(r.storage,r._location,pP());return r.storage.makeRequestWithTokens(t,Ff)}(r=(0,J.m9)(r))}(this._delegate)}updateMetadata(t){return function QMe(r,t){return function UMe(r,t){r._throwIfRoot("updateMetadata");const e=function EMe(r,t,e,i){const s=Qv(t.fullServerUrl(),r.host,r._protocol),a=z9(e,i),h=r.maxOperationRetryTime,u=new Xg(s,"PATCH",wz(r,i),h);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=fP(t),u}(r.storage,r._location,t,pP());return r.storage.makeRequestWithTokens(e,Ff)}(r=(0,J.m9)(r),t)}(this._delegate,t)}getDownloadURL(){return function t1e(r){return WMe(r=(0,J.m9)(r))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function i1e(r){return function qMe(r){r._throwIfRoot("deleteObject");const t=function xMe(r,t){const i=Qv(t.fullServerUrl(),r.host,r._protocol),a=new Xg(i,"DELETE",function o(l,h){},r.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=fP(t),a}(r.storage,r._location);return r.storage.makeRequestWithTokens(t,Ff)}(r=(0,J.m9)(r))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw khe(t)}}class oue{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(aue(t))throw iI("ref() expected a child path but got a URL, use refFromURL instead.");return new Jv(iue(this._delegate,t),this)}refFromURL(t){if(!aue(t))throw iI("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Hh.makeFromUrl(t,this._delegate.host)}catch{throw iI("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jv(iue(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function nue(r,t,e,i={}){!function YMe(r,t,e,i={}){r.host=`${t}:${e}`,r._protocol="http";const{mockUserToken:n}=i;n&&(r._overrideAuthToken="string"==typeof n?n:(0,J.Sg)(n,r.app.options.projectId))}(r,t,e,i)}(this._delegate,t,e,i)}}function aue(r){return/^[A-Za-z]+:\/\//.test(r)}function h1e(r,{instanceIdentifier:t}){const e=r.getProvider("app-compat").getImmediate(),i=r.getProvider("storage").getImmediate({identifier:t});return new oue(e,i)}function lue(r){const t=function c1e(r){return new ba.y(t=>{const e=o=>t.next(o);e(r.snapshot);const s=r.on("state_changed",e);return r.then(o=>{e(o),t.complete()},o=>{e(r.snapshot),(o=>{t.error(o)})(o)}),function(){s()}}).pipe(function kPe(r,t=$G.z){return(0,Xa.e)((e,i)=>{let n=null,s=null,o=null;const a=()=>{if(n){n.unsubscribe(),n=null;const h=s;s=null,i.next(h)}};function l(){const h=o+r,u=t.now();if(u<h)return n=this.schedule(void 0,h-u),void i.add(n);a()}e.subscribe((0,Lo.x)(i,h=>{s=h,o=t.now(),n||(n=t.schedule(l,r),i.add(n))},()=>{a(),i.complete()},void 0,()=>{s=n=null}))})}(0))}(r);return{task:r,then:r.then.bind(r),catch:r.catch.bind(r),pause:r.pause.bind(r),cancel:r.cancel.bind(r),resume:r.resume.bind(r),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,qi.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function xz(r){return{getDownloadURL:()=>Oi(void 0).pipe(ls.fc,Qo(()=>r.getDownloadURL()),ls.iC),getMetadata:()=>Oi(void 0).pipe(ls.fc,Qo(()=>r.getMetadata()),ls.iC),delete:()=>(0,Ur.D)(r.delete()),child:t=>xz(r.child(t)),updateMetadata:t=>(0,Ur.D)(r.updateMetadata(t)),put:(t,e)=>lue(r.put(t,e)),putString:(t,e,i)=>lue(r.putString(t,e,i)),list:t=>(0,Ur.D)(r.list(t)),listAll:()=>(0,Ur.D)(r.listAll())}}!function u1e(r){const t={TaskState:vu,TaskEvent:kMe,StringFormat:Xc,Storage:oue,Reference:Jv};r.INTERNAL.registerComponent(new Rf.wA("storage-compat",h1e,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),r.registerVersion("@firebase/storage-compat","0.1.22")}(ZG.Z);const d1e=new b.OlP("angularfire2.storageBucket"),p1e=new b.OlP("angularfire2.storage.maxUploadRetryTime"),f1e=new b.OlP("angularfire2.storage.maxOperationRetryTime"),g1e=new b.OlP("angularfire2.storage.use-emulator");let m1e=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d){const m=(0,Cl.on)(e,o,i);this.storage=(0,Cl.cc)(`${m.name}.storage.${n}`,"AngularFireStorage",m.name,()=>{const v=o.runOutsideAngular(()=>m.storage(n||void 0)),C=u;return C&&v.useEmulator(...C),l&&v.setMaxUploadRetryTime(l),h&&v.setMaxOperationRetryTime(h),v},[l,h])}ref(e){return xz(this.storage.ref(e))}refFromURL(e){return xz(this.storage.refFromURL(e))}upload(e,i,n){return xz(this.storage.ref(e)).put(i,n)}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Cl.Dh),b.LFG(Cl.xv,8),b.LFG(d1e,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(ls.HU),b.LFG(p1e,8),b.LFG(f1e,8),b.LFG(g1e,8),b.LFG(lP,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),v1e=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({}),r})(),y1e=(()=>{class r{constructor(){gz.Z.registerVersion("angularfire",ls.q4.full,"gcs-compat")}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[m1e],imports:[v1e]}),r})();function G9(){return(0,Xa.e)((r,t)=>{let e,i=!1;r.subscribe((0,Lo.x)(t,n=>{const s=e;e=n,i&&t.next([s,n]),i=!0}))})}var on,b1e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ey={},K9=K9||{},jn=b1e||self;function Tz(){}function Dz(r){var t=typeof r;return"array"==(t="object"!=t?t:r?Array.isArray(r)?"array":t:"null")||"object"==t&&"number"==typeof r.length}function gP(r){var t=typeof r;return"object"==t&&null!=r||"function"==t}var $9="closure_uid_"+(1e9*Math.random()>>>0),w1e=0;function S1e(r,t,e){return r.call.apply(r.bind,arguments)}function E1e(r,t,e){if(!r)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),r.apply(t,n)}}return function(){return r.apply(t,arguments)}}function Vh(r,t,e){return(Vh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S1e:E1e).apply(null,arguments)}function Iz(r,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),r.apply(this,i)}}function vh(r,t){function e(){}e.prototype=t.prototype,r.X=t.prototype,r.prototype=new e,r.prototype.constructor=r,r.Wb=function(i,n,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return t.prototype[n].apply(i,o)}}function BC(){this.s=this.s,this.o=this.o}BC.prototype.s=!1,BC.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function C1e(r){Object.prototype.hasOwnProperty.call(r,$9)&&r[$9]||(r[$9]=++w1e)}(this)},BC.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hue=Array.prototype.indexOf?function(r,t){return Array.prototype.indexOf.call(r,t,void 0)}:function(r,t){if("string"==typeof r)return"string"!=typeof t||1!=t.length?-1:r.indexOf(t,0);for(let e=0;e<r.length;e++)if(e in r&&r[e]===t)return e;return-1};function Y9(r){const t=r.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=r[i];return e}return[]}function uue(r,t){for(let e=1;e<arguments.length;e++){const i=arguments[e];if(Dz(i)){const n=r.length||0,s=i.length||0;r.length=n+s;for(let o=0;o<s;o++)r[n+o]=i[o]}else r.push(i)}}function zh(r,t){this.type=r,this.g=this.target=t,this.defaultPrevented=!1}zh.prototype.h=function(){this.defaultPrevented=!0};var T1e=function(){if(!jn.addEventListener||!Object.defineProperty)return!1;var r=!1,t=Object.defineProperty({},"passive",{get:function(){r=!0}});try{jn.addEventListener("test",Tz,t),jn.removeEventListener("test",Tz,t)}catch{}return r}();function Az(r){return/^[\s\xa0]*$/.test(r)}var cue=String.prototype.trim?function(r){return r.trim()}:function(r){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(r)[1]};function Z9(r,t){return r<t?-1:r>t?1:0}function kz(){var r=jn.navigator;return r&&(r=r.userAgent)?r:""}function Jg(r){return-1!=kz().indexOf(r)}function X9(r){return X9[" "](r),r}X9[" "]=Tz;var Rz,I1e=Jg("Opera"),sI=Jg("Trident")||Jg("MSIE"),due=Jg("Edge"),Q9=due||sI,pue=Jg("Gecko")&&!(-1!=kz().toLowerCase().indexOf("webkit")&&!Jg("Edge"))&&!(Jg("Trident")||Jg("MSIE"))&&!Jg("Edge"),A1e=-1!=kz().toLowerCase().indexOf("webkit")&&!Jg("Edge");function fue(){var r=jn.document;return r?r.documentMode:void 0}e:{var J9="",eK=function(){var r=kz();return pue?/rv:([^\);]+)(\)|;)/.exec(r):due?/Edge\/([\d\.]+)/.exec(r):sI?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):A1e?/WebKit\/(\S+)/.exec(r):I1e?/(?:Version)[ \/]?(\S+)/.exec(r):void 0}();if(eK&&(J9=eK?eK[1]:""),sI){var tK=fue();if(null!=tK&&tK>parseFloat(J9)){Rz=String(tK);break e}}Rz=J9}var k1e={};var _1e=jn.document&&sI&&(fue()||parseInt(Rz,10))||void 0;function mP(r,t){if(zh.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var e=this.type=r.type,i=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=t,t=r.relatedTarget){if(pue){e:{try{X9(t.nodeName);var n=!0;break e}catch{}n=!1}n||(t=null)}}else"mouseover"==e?t=r.fromElement:"mouseout"==e&&(t=r.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:L1e[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&mP.X.h.call(this)}}vh(mP,zh);var L1e={2:"touch",3:"pen",4:"mouse"};mP.prototype.h=function(){mP.X.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var vP="closure_listenable_"+(1e6*Math.random()|0),O1e=0;function P1e(r,t,e,i,n){this.listener=r,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ha=n,this.key=++O1e,this.ba=this.ea=!1}function _z(r){r.ba=!0,r.listener=null,r.proxy=null,r.src=null,r.ha=null}function nK(r,t,e){for(const i in r)t.call(e,r[i],i,r)}function mue(r){const t={};for(const e in r)t[e]=r[e];return t}const vue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yue(r,t){let e,i;for(let n=1;n<arguments.length;n++){for(e in i=arguments[n],i)r[e]=i[e];for(let s=0;s<vue.length;s++)e=vue[s],Object.prototype.hasOwnProperty.call(i,e)&&(r[e]=i[e])}}function Lz(r){this.src=r,this.g={},this.h=0}function rK(r,t){var e=t.type;if(e in r.g){var s,i=r.g[e],n=hue(i,t);(s=0<=n)&&Array.prototype.splice.call(i,n,1),s&&(_z(t),0==r.g[e].length&&(delete r.g[e],r.h--))}}function sK(r,t,e,i){for(var n=0;n<r.length;++n){var s=r[n];if(!s.ba&&s.listener==t&&s.capture==!!e&&s.ha==i)return n}return-1}Lz.prototype.add=function(r,t,e,i,n){var s=r.toString();(r=this.g[s])||(r=this.g[s]=[],this.h++);var o=sK(r,t,i,n);return-1<o?(t=r[o],e||(t.ea=!1)):((t=new P1e(t,this.src,s,!!i,n)).ea=e,r.push(t)),t};var oK="closure_lm_"+(1e6*Math.random()|0),aK={};function bue(r,t,e,i,n){if(i&&i.once)return wue(r,t,e,i,n);if(Array.isArray(t)){for(var s=0;s<t.length;s++)bue(r,t[s],e,i,n);return null}return e=cK(e),r&&r[vP]?r.N(t,e,gP(i)?!!i.capture:!!i,n):Cue(r,t,e,!1,i,n)}function Cue(r,t,e,i,n,s){if(!t)throw Error("Invalid event type");var o=gP(n)?!!n.capture:!!n,a=hK(r);if(a||(r[oK]=a=new Lz(r)),(e=a.add(t,e,i,o,s)).proxy)return e;if(i=function M1e(){const t=F1e;return function r(e){return t.call(r.src,r.listener,e)}}(),e.proxy=i,i.src=r,i.listener=e,r.addEventListener)T1e||(n=o),void 0===n&&(n=!1),r.addEventListener(t.toString(),i,n);else if(r.attachEvent)r.attachEvent(Eue(t.toString()),i);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(i)}return e}function wue(r,t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;s++)wue(r,t[s],e,i,n);return null}return e=cK(e),r&&r[vP]?r.O(t,e,gP(i)?!!i.capture:!!i,n):Cue(r,t,e,!0,i,n)}function Sue(r,t,e,i,n){if(Array.isArray(t))for(var s=0;s<t.length;s++)Sue(r,t[s],e,i,n);else i=gP(i)?!!i.capture:!!i,e=cK(e),r&&r[vP]?(r=r.i,(t=String(t).toString())in r.g&&-1<(e=sK(s=r.g[t],e,i,n))&&(_z(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete r.g[t],r.h--))):r&&(r=hK(r))&&(t=r.g[t.toString()],r=-1,t&&(r=sK(t,e,i,n)),(e=-1<r?t[r]:null)&&lK(e))}function lK(r){if("number"!=typeof r&&r&&!r.ba){var t=r.src;if(t&&t[vP])rK(t.i,r);else{var e=r.type,i=r.proxy;t.removeEventListener?t.removeEventListener(e,i,r.capture):t.detachEvent?t.detachEvent(Eue(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=hK(t))?(rK(e,r),0==e.h&&(e.src=null,t[oK]=null)):_z(r)}}}function Eue(r){return r in aK?aK[r]:aK[r]="on"+r}function F1e(r,t){if(r.ba)r=!0;else{t=new mP(t,this);var e=r.listener,i=r.ha||r.src;r.ea&&lK(r),r=e.call(i,t)}return r}function hK(r){return(r=r[oK])instanceof Lz?r:null}var uK="__closure_events_fn_"+(1e9*Math.random()>>>0);function cK(r){return"function"==typeof r?r:(r[uK]||(r[uK]=function(t){return r.handleEvent(t)}),r[uK])}function zl(){BC.call(this),this.i=new Lz(this),this.P=this,this.I=null}function yh(r,t){var e,i=r.I;if(i)for(e=[];i;i=i.I)e.push(i);if(r=r.P,i=t.type||t,"string"==typeof t)t=new zh(t,r);else if(t instanceof zh)t.target=t.target||r;else{var n=t;yue(t=new zh(i,r),n)}if(n=!0,e)for(var s=e.length-1;0<=s;s--){var o=t.g=e[s];n=Oz(o,i,!0,t)&&n}if(n=Oz(o=t.g=r,i,!0,t)&&n,n=Oz(o,i,!1,t)&&n,e)for(s=0;s<e.length;s++)n=Oz(o=t.g=e[s],i,!1,t)&&n}function Oz(r,t,e,i){if(!(t=r.i.g[String(t)]))return!0;t=t.concat();for(var n=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ba&&o.capture==e){var a=o.listener,l=o.ha||o.src;o.ea&&rK(r.i,o),n=!1!==a.call(l,i)&&n}}return n&&!i.defaultPrevented}vh(zl,BC),zl.prototype[vP]=!0,zl.prototype.removeEventListener=function(r,t,e,i){Sue(this,r,t,e,i)},zl.prototype.M=function(){if(zl.X.M.call(this),this.i){var t,r=this.i;for(t in r.g){for(var e=r.g[t],i=0;i<e.length;i++)_z(e[i]);delete r.g[t],r.h--}}this.I=null},zl.prototype.N=function(r,t,e,i){return this.i.add(String(r),t,!1,e,i)},zl.prototype.O=function(r,t,e,i){return this.i.add(String(r),t,!0,e,i)};var dK=jn.JSON.stringify;function N1e(){var r=Due;let t=null;return r.g&&(t=r.g,r.g=r.g.next,r.g||(r.h=null),t.next=null),t}var pK,xue=new class{constructor(r,t){this.i=r,this.j=t,this.h=0,this.g=null}get(){let r;return 0<this.h?(this.h--,r=this.g,this.g=r.next,r.next=null):r=this.i(),r}}(()=>new H1e,r=>r.reset());class H1e{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function V1e(r){jn.setTimeout(()=>{throw r},0)}function Tue(r,t){pK||function z1e(){var r=jn.Promise.resolve(void 0);pK=function(){r.then(j1e)}}(),fK||(pK(),fK=!0),Due.add(r,t)}var fK=!1,Due=new class B1e{constructor(){this.h=this.g=null}add(t,e){const i=xue.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function j1e(){for(var r;r=N1e();){try{r.h.call(r.g)}catch(e){V1e(e)}var t=xue;t.j(r),100>t.h&&(t.h++,r.next=t.g,t.g=r)}fK=!1}function Pz(r,t){zl.call(this),this.h=r||1,this.g=t||jn,this.j=Vh(this.lb,this),this.l=Date.now()}function gK(r){r.ca=!1,r.R&&(r.g.clearTimeout(r.R),r.R=null)}function mK(r,t,e){if("function"==typeof r)e&&(r=Vh(r,e));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Vh(r.handleEvent,r)}return 2147483647<Number(t)?-1:jn.setTimeout(r,t||0)}function Iue(r){r.g=mK(()=>{r.g=null,r.i&&(r.i=!1,Iue(r))},r.j);const t=r.h;r.h=null,r.m.apply(null,t)}vh(Pz,zl),(on=Pz.prototype).ca=!1,on.R=null,on.lb=function(){if(this.ca){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-r):(this.R&&(this.g.clearTimeout(this.R),this.R=null),yh(this,"tick"),this.ca&&(gK(this),this.start()))}},on.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},on.M=function(){Pz.X.M.call(this),gK(this),delete this.g};class U1e extends BC{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Iue(this)}M(){super.M(),this.g&&(jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yP(r){BC.call(this),this.h=r,this.g={}}vh(yP,BC);var Aue=[];function kue(r,t,e,i){Array.isArray(e)||(e&&(Aue[0]=e.toString()),e=Aue);for(var n=0;n<e.length;n++){var s=bue(t,e[n],i||r.handleEvent,!1,r.h||r);if(!s)break;r.g[s.key]=s}}function Rue(r){nK(r.g,function(t,e){this.g.hasOwnProperty(e)&&lK(t)},r),r.g={}}function Mz(){this.g=!0}function oI(r,t,e,i){r.info(function(){return"XMLHTTP TEXT ("+t+"): "+function K1e(r,t){if(!r.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(r=0;r<e.length;r++)if(Array.isArray(e[r])){var i=e[r];if(!(2>i.length)){var n=i[1];if(Array.isArray(n)&&!(1>n.length)){var s=n[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<n.length;o++)n[o]=""}}}return dK(e)}catch{return t}}(r,e)+(i?" "+i:"")})}yP.prototype.M=function(){yP.X.M.call(this),Rue(this)},yP.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mz.prototype.Aa=function(){this.g=!1},Mz.prototype.info=function(){};var sE={},_ue=null;function Fz(){return _ue=_ue||new zl}function Lue(r){zh.call(this,sE.Pa,r)}function bP(r){const t=Fz();yh(t,new Lue(t))}function Oue(r,t){zh.call(this,sE.STAT_EVENT,r),this.stat=t}function yu(r){const t=Fz();yh(t,new Oue(t,r))}function Pue(r,t){zh.call(this,sE.Qa,r),this.size=t}function CP(r,t){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return jn.setTimeout(function(){r()},t)}sE.Pa="serverreachability",vh(Lue,zh),sE.STAT_EVENT="statevent",vh(Oue,zh),sE.Qa="timingevent",vh(Pue,zh);var Nz={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Mue={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function vK(){}function Nue(){}vK.prototype.h=null;var CK,wP={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function yK(){zh.call(this,"d")}function bK(){zh.call(this,"c")}function Bz(){}function SP(r,t,e,i){this.l=r,this.j=t,this.m=e,this.U=i||1,this.S=new yP(this),this.O=$1e,this.T=new Pz(r=Q9?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Bue}function Bue(){this.i=null,this.g="",this.h=!1}vh(yK,zh),vh(bK,zh),vh(Bz,vK),Bz.prototype.g=function(){return new XMLHttpRequest},Bz.prototype.i=function(){return{}},CK=new Bz;var $1e=45e3,wK={},Hz={};function SK(r,t,e){r.K=1,r.v=Uz(ty(t)),r.s=e,r.P=!0,Hue(r,null)}function Hue(r,t){r.F=Date.now(),EP(r),r.A=ty(r.v);var e=r.A,i=r.U;Array.isArray(i)||(i=[String(i)]),Yue(e.i,"t",i),r.C=0,e=r.l.H,r.h=new Bue,r.g=bce(r.l,e?t:null,!r.s),0<r.N&&(r.L=new U1e(Vh(r.La,r,r.g),r.N)),kue(r.S,r.g,"readystatechange",r.ib),t=r.H?mue(r.H):{},r.s?(r.u||(r.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",r.g.da(r.A,r.u,r.s,t)):(r.u="GET",r.g.da(r.A,r.u,null,t)),bP(),function W1e(r,t,e,i,n,s){r.info(function(){if(r.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var h=a[l].split("=");if(1<h.length){var u=h[0];h=h[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+h+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+n+"]: "+t+"\n"+e+"\n"+o})}(r.j,r.u,r.A,r.m,r.U,r.s)}function Vue(r){return!!r.g&&"GET"==r.u&&2!=r.K&&r.l.Da}function zue(r,t,e){let n,i=!0;for(;!r.I&&r.C<e.length;){if(n=Y1e(r,e),n==Hz){4==t&&(r.o=4,yu(14),i=!1),oI(r.j,r.m,null,"[Incomplete Response]");break}if(n==wK){r.o=4,yu(15),oI(r.j,r.m,e,"[Invalid Chunk]"),i=!1;break}oI(r.j,r.m,n,null),EK(r,n)}Vue(r)&&n!=Hz&&n!=wK&&(r.h.g="",r.C=0),4!=t||0!=e.length||r.h.h||(r.o=1,yu(16),i=!1),r.i=r.i&&i,i?0<e.length&&!r.$&&(r.$=!0,(t=r.l).g==r&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+e.length),_K(t),t.K=!0,yu(11))):(oI(r.j,r.m,e,"[Invalid Chunked Response]"),oE(r),xP(r))}function Y1e(r,t){var e=r.C,i=t.indexOf("\n",e);return-1==i?Hz:(e=Number(t.substring(e,i)),isNaN(e)?wK:(i+=1)+e>t.length?Hz:(t=t.substr(i,e),r.C=i+e,t))}function EP(r){r.V=Date.now()+r.O,jue(r,r.O)}function jue(r,t){if(null!=r.B)throw Error("WatchDog timer not null");r.B=CP(Vh(r.gb,r),t)}function Vz(r){r.B&&(jn.clearTimeout(r.B),r.B=null)}function xP(r){0==r.l.G||r.I||gce(r.l,r)}function oE(r){Vz(r);var t=r.L;t&&"function"==typeof t.na&&t.na(),r.L=null,gK(r.T),Rue(r.S),r.g&&(t=r.g,r.g=null,t.abort(),t.na())}function EK(r,t){try{var e=r.l;if(0!=e.G&&(e.g==r||xK(e.h,r)))if(!r.J&&xK(e.h,r)&&3==e.G){try{var i=e.Fa.g.parse(t)}catch{i=null}if(Array.isArray(i)&&3==i.length){var n=i;if(0==n[0]){e:if(!e.u){if(e.g){if(!(e.g.F+3e3<r.F))break e;Yz(e),Kz(e)}RK(e),yu(18)}}else e.Ba=n[1],0<e.Ba-e.T&&37500>n[2]&&e.L&&0==e.A&&!e.v&&(e.v=CP(Vh(e.cb,e),6e3));if(1>=Que(e.h)&&e.ja){try{e.ja()}catch{}e.ja=void 0}}else lE(e,11)}else if((r.J||e.g==r)&&Yz(e),!Az(t))for(n=e.Fa.g.parse(t),t=0;t<n.length;t++){let h=n[t];if(e.T=h[0],h=h[1],2==e.G)if("c"==h[0]){e.I=h[1],e.ka=h[2];const u=h[3];null!=u&&(e.ma=u,e.j.info("VER="+e.ma));const d=h[4];null!=d&&(e.Ca=d,e.j.info("SVER="+e.Ca));const m=h[5];null!=m&&"number"==typeof m&&0<m&&(e.J=i=1.5*m,e.j.info("backChannelRequestTimeoutMs_="+i)),i=e;const v=r.g;if(v){const C=v.g?v.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(C){var s=i.h;s.g||-1==C.indexOf("spdy")&&-1==C.indexOf("quic")&&-1==C.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(TK(s,s.h),s.h=null))}if(i.D){const S=v.g?v.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(i.za=S,Uo(i.F,i.D,S))}}e.G=3,e.l&&e.l.xa(),e.$&&(e.P=Date.now()-r.F,e.j.info("Handshake RTT: "+e.P+"ms"));var o=r;if((i=e).sa=yce(i,i.H?i.ka:null,i.V),o.J){Jue(i.h,o);var a=o,l=i.J;l&&a.setTimeout(l),a.B&&(Vz(a),EP(a)),i.g=o}else pce(i);0<e.i.length&&$z(e)}else"stop"!=h[0]&&"close"!=h[0]||lE(e,7);else 3==e.G&&("stop"==h[0]||"close"==h[0]?"stop"==h[0]?lE(e,7):kK(e):"noop"!=h[0]&&e.l&&e.l.wa(h),e.A=0)}bP()}catch{}}function Uue(r,t){if(r.forEach&&"function"==typeof r.forEach)r.forEach(t,void 0);else if(Dz(r)||"string"==typeof r)Array.prototype.forEach.call(r,t,void 0);else for(var e=function X1e(r){if(r.oa&&"function"==typeof r.oa)return r.oa();if(!r.W||"function"!=typeof r.W){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Dz(r)||"string"==typeof r){var t=[];r=r.length;for(var e=0;e<r;e++)t.push(e);return t}t=[],e=0;for(const i in r)t[e++]=i;return t}}}(r),i=function Z1e(r){if(r.W&&"function"==typeof r.W)return r.W();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Dz(r)){for(var t=[],e=r.length,i=0;i<e;i++)t.push(r[i]);return t}for(i in t=[],e=0,r)t[e++]=r[i];return t}(r),n=i.length,s=0;s<n;s++)t.call(void 0,i[s],e&&e[s],r)}(on=SP.prototype).setTimeout=function(r){this.O=r},on.ib=function(r){r=r.target;const t=this.L;t&&3==iy(r)?t.l():this.La(r)},on.La=function(r){try{if(r==this.g)e:{const u=iy(this.g);var t=this.g.Ea();if(this.g.aa(),!(3>u)&&(3!=u||Q9||this.g&&(this.h.h||this.g.fa()||ace(this.g)))){this.I||4!=u||7==t||bP(),Vz(this);var e=this.g.aa();this.Y=e;t:if(Vue(this)){var i=ace(this.g);r="";var n=i.length,s=4==iy(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){oE(this),xP(this);var o="";break t}this.h.i=new jn.TextDecoder}for(t=0;t<n;t++)this.h.h=!0,r+=this.h.i.decode(i[t],{stream:s&&t==n-1});i.splice(0,n),this.h.g+=r,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=200==e,function q1e(r,t,e,i,n,s,o){r.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+n+"]: "+t+"\n"+e+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.U,u,e),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Az(a)){var h=a;break t}}h=null}if(!(e=h)){this.i=!1,this.o=3,yu(12),oE(this),xP(this);break e}oI(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,EK(this,e)}this.P?(zue(this,u,o),Q9&&this.i&&3==u&&(kue(this.S,this.T,"tick",this.hb),this.T.start())):(oI(this.j,this.m,o,null),EK(this,o)),4==u&&oE(this),this.i&&!this.I&&(4==u?gce(this.l,this):(this.i=!1,EP(this)))}else 400==e&&0<o.indexOf("Unknown SID")?(this.o=3,yu(12)):(this.o=0,yu(13)),oE(this),xP(this)}}}catch{}},on.hb=function(){if(this.g){var r=iy(this.g),t=this.g.fa();this.C<t.length&&(Vz(this),zue(this,r,t),this.i&&4!=r&&EP(this))}},on.cancel=function(){this.I=!0,oE(this)},on.gb=function(){this.B=null;const r=Date.now();0<=r-this.V?(function G1e(r,t){r.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(bP(),yu(17)),oE(this),this.o=2,xP(this)):jue(this,this.V-r)};var Wue=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aE(r,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof aE){this.h=void 0!==t?t:r.h,zz(this,r.j),this.s=r.s,this.g=r.g,jz(this,r.m),this.l=r.l,t=r.i;var e=new IP;e.i=t.i,t.g&&(e.g=new Map(t.g),e.h=t.h),que(this,e),this.o=r.o}else r&&(e=String(r).match(Wue))?(this.h=!!t,zz(this,e[1]||"",!0),this.s=TP(e[2]||""),this.g=TP(e[3]||"",!0),jz(this,e[4]),this.l=TP(e[5]||"",!0),que(this,e[6]||"",!0),this.o=TP(e[7]||"")):(this.h=!!t,this.i=new IP(null,this.h))}function ty(r){return new aE(r)}function zz(r,t,e){r.j=e?TP(t,!0):t,r.j&&(r.j=r.j.replace(/:$/,""))}function jz(r,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);r.m=t}else r.m=null}function que(r,t,e){t instanceof IP?(r.i=t,function rFe(r,t){t&&!r.j&&(HC(r),r.i=null,r.g.forEach(function(e,i){var n=i.toLowerCase();i!=n&&(Kue(this,i),Yue(this,n,e))},r)),r.j=t}(r.i,r.h)):(e||(t=DP(t,iFe)),r.i=new IP(t,r.h))}function Uo(r,t,e){r.i.set(t,e)}function Uz(r){return Uo(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function TP(r,t){return r?t?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function DP(r,t,e){return"string"==typeof r?(r=encodeURI(r).replace(t,J1e),e&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function J1e(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}aE.prototype.toString=function(){var r=[],t=this.j;t&&r.push(DP(t,Gue,!0),":");var e=this.g;return(e||"file"==t)&&(r.push("//"),(t=this.s)&&r.push(DP(t,Gue,!0),"@"),r.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&r.push(":",String(e))),(e=this.l)&&(this.g&&"/"!=e.charAt(0)&&r.push("/"),r.push(DP(e,"/"==e.charAt(0)?tFe:eFe,!0))),(e=this.i.toString())&&r.push("?",e),(e=this.o)&&r.push("#",DP(e,nFe)),r.join("")};var Gue=/[#\/\?@]/g,eFe=/[#\?:]/g,tFe=/[#\?]/g,iFe=/[#\?@]/g,nFe=/#/g;function IP(r,t){this.h=this.g=null,this.i=r||null,this.j=!!t}function HC(r){r.g||(r.g=new Map,r.h=0,r.i&&function Q1e(r,t){if(r){r=r.split("&");for(var e=0;e<r.length;e++){var i=r[e].indexOf("="),n=null;if(0<=i){var s=r[e].substring(0,i);n=r[e].substring(i+1)}else s=r[e];t(s,n?decodeURIComponent(n.replace(/\+/g," ")):"")}}}(r.i,function(t,e){r.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Kue(r,t){HC(r),t=aI(r,t),r.g.has(t)&&(r.i=null,r.h-=r.g.get(t).length,r.g.delete(t))}function $ue(r,t){return HC(r),t=aI(r,t),r.g.has(t)}function Yue(r,t,e){Kue(r,t),0<e.length&&(r.i=null,r.g.set(aI(r,t),Y9(e)),r.h+=e.length)}function aI(r,t){return t=String(t),r.j&&(t=t.toLowerCase()),t}function Zue(r){this.l=r||oFe,r=jn.PerformanceNavigationTiming?0<(r=jn.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(jn.g&&jn.g.Ga&&jn.g.Ga()&&jn.g.Ga().$b),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(on=IP.prototype).add=function(r,t){HC(this),this.i=null,r=aI(this,r);var e=this.g.get(r);return e||this.g.set(r,e=[]),e.push(t),this.h+=1,this},on.forEach=function(r,t){HC(this),this.g.forEach(function(e,i){e.forEach(function(n){r.call(t,n,i,this)},this)},this)},on.oa=function(){HC(this);const r=Array.from(this.g.values()),t=Array.from(this.g.keys()),e=[];for(let i=0;i<t.length;i++){const n=r[i];for(let s=0;s<n.length;s++)e.push(t[i])}return e},on.W=function(r){HC(this);let t=[];if("string"==typeof r)$ue(this,r)&&(t=t.concat(this.g.get(aI(this,r))));else{r=Array.from(this.g.values());for(let e=0;e<r.length;e++)t=t.concat(r[e])}return t},on.set=function(r,t){return HC(this),this.i=null,$ue(this,r=aI(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[t]),this.h+=1,this},on.get=function(r,t){return r&&0<(r=this.W(r)).length?String(r[0]):t},on.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],t=Array.from(this.g.keys());for(var e=0;e<t.length;e++){var i=t[e];const s=encodeURIComponent(String(i)),o=this.W(i);for(i=0;i<o.length;i++){var n=s;""!==o[i]&&(n+="="+encodeURIComponent(String(o[i]))),r.push(n)}}return this.i=r.join("&")};var oFe=10;function Xue(r){return!!r.h||!!r.g&&r.g.size>=r.j}function Que(r){return r.h?1:r.g?r.g.size:0}function xK(r,t){return r.h?r.h==t:!!r.g&&r.g.has(t)}function TK(r,t){r.g?r.g.add(t):r.h=t}function Jue(r,t){r.h&&r.h==t?r.h=null:r.g&&r.g.has(t)&&r.g.delete(t)}function ece(r){if(null!=r.h)return r.i.concat(r.h.D);if(null!=r.g&&0!==r.g.size){let t=r.i;for(const e of r.g.values())t=t.concat(e.D);return t}return Y9(r.i)}function DK(){}function aFe(){this.g=new DK}function lFe(r,t,e){const i=e||"";try{Uue(r,function(n,s){let o=n;gP(n)&&(o=dK(n)),t.push(i+s+"="+encodeURIComponent(o))})}catch(n){throw t.push(i+"type="+encodeURIComponent("_badmap")),n}}function Wz(r,t,e,i,n){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,n(i)}catch{}}function AP(r){this.l=r.ac||null,this.j=r.jb||!1}function qz(r,t){zl.call(this),this.D=r,this.u=t,this.m=void 0,this.readyState=IK,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Zue.prototype.cancel=function(){if(this.i=ece(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},DK.prototype.stringify=function(r){return jn.JSON.stringify(r,void 0)},DK.prototype.parse=function(r){return jn.JSON.parse(r,void 0)},vh(AP,vK),AP.prototype.g=function(){return new qz(this.l,this.j)},AP.prototype.i=function(r){return function(){return r}}({}),vh(qz,zl);var IK=0;function tce(r){r.j.read().then(r.Ta.bind(r)).catch(r.ga.bind(r))}function kP(r){r.readyState=4,r.l=null,r.j=null,r.A=null,RP(r)}function RP(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(on=qz.prototype).open=function(r,t){if(this.readyState!=IK)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=t,this.readyState=1,RP(this)},on.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(t.body=r),(this.D||jn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},on.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,kP(this)),this.readyState=IK},on.Wa=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,RP(this)),this.g&&(this.readyState=3,RP(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof jn.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tce(this)}else r.text().then(this.Va.bind(this),this.ga.bind(this))},on.Ta=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var t=r.value?r.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!r.done}))&&(this.response=this.responseText+=t)}r.done?kP(this):RP(this),3==this.readyState&&tce(this)}},on.Va=function(r){this.g&&(this.response=this.responseText=r,kP(this))},on.Ua=function(r){this.g&&(this.response=r,kP(this))},on.ga=function(){this.g&&kP(this)},on.setRequestHeader=function(r,t){this.v.append(r,t)},on.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},on.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],t=this.h.entries();for(var e=t.next();!e.done;)r.push((e=e.value)[0]+": "+e[1]),e=t.next();return r.join("\r\n")},Object.defineProperty(qz.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var uFe=jn.JSON.parse;function xa(r){zl.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ice,this.K=this.L=!1}vh(xa,zl);var ice="",cFe=/^https?$/i,dFe=["POST","PUT"];function nce(r,t){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=t,r.m=5,rce(r),Gz(r)}function rce(r){r.D||(r.D=!0,yh(r,"complete"),yh(r,"error"))}function sce(r){if(r.h&&typeof K9<"u"&&(!r.C[1]||4!=iy(r)||2!=r.aa()))if(r.v&&4==iy(r))mK(r.Ha,0,r);else if(yh(r,"readystatechange"),4==iy(r)){r.h=!1;try{const a=r.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===a){var n=String(r.H).match(Wue)[1]||null;if(!n&&jn.self&&jn.self.location){var s=jn.self.location.protocol;n=s.substr(0,s.length-1)}i=!cFe.test(n?n.toLowerCase():"")}e=i}if(e)yh(r,"complete"),yh(r,"success");else{r.m=6;try{var o=2<iy(r)?r.g.statusText:""}catch{o=""}r.j=o+" ["+r.aa()+"]",rce(r)}}finally{Gz(r)}}}function Gz(r,t){if(r.g){oce(r);const e=r.g,i=r.C[0]?Tz:null;r.g=null,r.C=null,t||yh(r,"ready");try{e.onreadystatechange=i}catch{}}}function oce(r){r.g&&r.K&&(r.g.ontimeout=null),r.A&&(jn.clearTimeout(r.A),r.A=null)}function iy(r){return r.g?r.g.readyState:0}function ace(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.J){case ice:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function lce(r){let t="";return nK(r,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}function AK(r,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=lce(e),"string"==typeof r?null!=e&&encodeURIComponent(String(e)):Uo(r,t,e))}function _P(r,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[r]||t}function hce(r){this.Ca=0,this.i=[],this.j=new Mz,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=_P("failFast",!1,r),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=_P("baseRetryDelayMs",5e3,r),this.bb=_P("retryDelaySeedMs",1e4,r),this.$a=_P("forwardChannelMaxRetries",2,r),this.ta=_P("forwardChannelRequestTimeoutMs",2e4,r),this.ra=r&&r.xmlHttpFactory||void 0,this.Da=r&&r.Zb||!1,this.J=void 0,this.H=r&&r.supportsCrossDomainXhr||!1,this.I="",this.h=new Zue(r&&r.concurrentRequestLimit),this.Fa=new aFe,this.O=r&&r.fastHandshake||!1,this.N=r&&r.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=r&&r.Xb||!1,r&&r.Aa&&this.j.Aa(),r&&r.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&r&&r.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function kK(r){if(uce(r),3==r.G){var t=r.U++,e=ty(r.F);Uo(e,"SID",r.I),Uo(e,"RID",t),Uo(e,"TYPE","terminate"),LP(r,e),(t=new SP(r,r.j,t,void 0)).K=2,t.v=Uz(ty(e)),e=!1,jn.navigator&&jn.navigator.sendBeacon&&(e=jn.navigator.sendBeacon(t.v.toString(),"")),!e&&jn.Image&&((new Image).src=t.v,e=!0),e||(t.g=bce(t.l,null),t.g.da(t.v)),t.F=Date.now(),EP(t)}vce(r)}function Kz(r){r.g&&(_K(r),r.g.cancel(),r.g=null)}function uce(r){Kz(r),r.u&&(jn.clearTimeout(r.u),r.u=null),Yz(r),r.h.cancel(),r.m&&("number"==typeof r.m&&jn.clearTimeout(r.m),r.m=null)}function $z(r){Xue(r.h)||r.m||(r.m=!0,Tue(r.Ja,r),r.C=0)}function cce(r,t){var e;e=t?t.m:r.U++;const i=ty(r.F);Uo(i,"SID",r.I),Uo(i,"RID",e),Uo(i,"AID",r.T),LP(r,i),r.o&&r.s&&AK(i,r.o,r.s),e=new SP(r,r.j,e,r.C+1),null===r.o&&(e.H=r.s),t&&(r.i=t.D.concat(r.i)),t=dce(r,e,1e3),e.setTimeout(Math.round(.5*r.ta)+Math.round(.5*r.ta*Math.random())),TK(r.h,e),SK(e,i,t)}function LP(r,t){r.ia&&nK(r.ia,function(e,i){Uo(t,i,e)}),r.l&&Uue({},function(e,i){Uo(t,i,e)})}function dce(r,t,e){e=Math.min(r.i.length,e);var i=r.l?Vh(r.l.Ra,r.l,r):null;e:{var n=r.i;let s=-1;for(;;){const o=["count="+e];-1==s?0<e?(s=n[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<e;l++){let h=n[l].h;const u=n[l].g;if(h-=s,0>h)s=Math.max(0,n[l].h-100),a=!1;else try{lFe(u,o,"req"+h+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return r=r.i.splice(0,e),t.D=r,i}function pce(r){r.g||r.u||(r.Z=1,Tue(r.Ia,r),r.A=0)}function RK(r){return!(r.g||r.u||3<=r.A||(r.Z++,r.u=CP(Vh(r.Ia,r),mce(r,r.A)),r.A++,0))}function _K(r){null!=r.B&&(jn.clearTimeout(r.B),r.B=null)}function fce(r){r.g=new SP(r,r.j,"rpc",r.Z),null===r.o&&(r.g.H=r.s),r.g.N=0;var t=ty(r.sa);Uo(t,"RID","rpc"),Uo(t,"SID",r.I),Uo(t,"CI",r.L?"0":"1"),Uo(t,"AID",r.T),Uo(t,"TYPE","xmlhttp"),LP(r,t),r.o&&r.s&&AK(t,r.o,r.s),r.J&&r.g.setTimeout(r.J);var e=r.g;r=r.ka,e.K=1,e.v=Uz(ty(t)),e.s=null,e.P=!0,Hue(e,r)}function Yz(r){null!=r.v&&(jn.clearTimeout(r.v),r.v=null)}function gce(r,t){var e=null;if(r.g==t){Yz(r),_K(r),r.g=null;var i=2}else{if(!xK(r.h,t))return;e=t.D,Jue(r.h,t),i=1}if(0!=r.G)if(r.pa=t.Y,t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var n=r.C;yh(i=Fz(),new Pue(i,e)),$z(r)}else pce(r);else if(3==(n=t.o)||0==n&&0<r.pa||!(1==i&&function fFe(r,t){return!(Que(r.h)>=r.h.j-(r.m?1:0)||(r.m?(r.i=t.D.concat(r.i),0):1==r.G||2==r.G||r.C>=(r.Za?0:r.$a)||(r.m=CP(Vh(r.Ja,r,t),mce(r,r.C)),r.C++,0)))}(r,t)||2==i&&RK(r)))switch(e&&0<e.length&&(t=r.h,t.i=t.i.concat(e)),n){case 1:lE(r,5);break;case 4:lE(r,10);break;case 3:lE(r,6);break;default:lE(r,2)}}function mce(r,t){let e=r.Xa+Math.floor(Math.random()*r.bb);return r.l||(e*=2),e*t}function lE(r,t){if(r.j.info("Error code "+t),2==t){var e=null;r.l&&(e=null);var i=Vh(r.kb,r);e||(e=new aE("//www.google.com/images/cleardot.gif"),jn.location&&"http"==jn.location.protocol||zz(e,"https"),Uz(e)),function hFe(r,t){const e=new Mz;if(jn.Image){const i=new Image;i.onload=Iz(Wz,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Iz(Wz,e,i,"TestLoadImage: error",!1,t),i.onabort=Iz(Wz,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Iz(Wz,e,i,"TestLoadImage: timeout",!1,t),jn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=r}else t(!1)}(e.toString(),i)}else yu(2);r.G=0,r.l&&r.l.va(t),vce(r),uce(r)}function vce(r){if(r.G=0,r.la=[],r.l){const t=ece(r.h);(0!=t.length||0!=r.i.length)&&(uue(r.la,t),uue(r.la,r.i),r.h.i.length=0,Y9(r.i),r.i.length=0),r.l.ua()}}function yce(r,t,e){var i=e instanceof aE?ty(e):new aE(e,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),jz(i,i.m);else{var n=jn.location;i=n.protocol,t=t?t+"."+n.hostname:n.hostname,n=+n.port;var s=new aE(null,void 0);i&&zz(s,i),t&&(s.g=t),n&&jz(s,n),e&&(s.l=e),i=s}return t=r.za,(e=r.D)&&t&&Uo(i,e,t),Uo(i,"VER",r.ma),LP(r,i),i}function bce(r,t,e){if(t&&!r.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new xa(e&&r.Da&&!r.ra?new AP({jb:!0}):r.ra)).Ka(r.H),t}function Cce(){}function Zz(){if(sI&&!(10<=Number(_1e)))throw Error("Environmental error: no available transport.")}function Qc(r,t){zl.call(this),this.g=new hce(t),this.l=r,this.h=t&&t.messageUrlParams||null,r=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(r?r["X-WebChannel-Content-Type"]=t.messageContentType:r={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(r?r["X-WebChannel-Client-Profile"]=t.ya:r={"X-WebChannel-Client-Profile":t.ya}),this.g.S=r,(r=t&&t.Yb)&&!Az(r)&&(this.g.o=r),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Az(t)&&(this.g.D=t,null!==(r=this.h)&&t in r&&t in(r=this.h)&&delete r[t]),this.j=new lI(this)}function wce(r){yK.call(this);var t=r.__sm__;if(t){e:{for(const e in t){r=e;break e}r=void 0}(this.i=r)&&(r=this.i,t=null!==t&&r in t?t[r]:void 0),this.data=t}else this.data=r}function Sce(){bK.call(this),this.status=1}function lI(r){this.g=r}(on=xa.prototype).Ka=function(r){this.L=r},on.da=function(r,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+r);t=t?t.toUpperCase():"GET",this.H=r,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():CK.g(),this.C=function Fue(r){return r.h||(r.h=r.i())}(this.u?this.u:CK),this.g.onreadystatechange=Vh(this.Ha,this);try{this.F=!0,this.g.open(t,String(r),!0),this.F=!1}catch(s){return void nce(this,s)}if(r=e||"",e=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var n in i)e.set(n,i[n]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())e.set(s,i.get(s))}i=Array.from(e.keys()).find(s=>"content-type"==s.toLowerCase()),n=jn.FormData&&r instanceof jn.FormData,!(0<=hue(dFe,t))||i||n||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of e)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oce(this),0<this.B&&((this.K=function pFe(r){return sI&&function R1e(){return function D1e(r){var t=k1e;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=r(9)}(function(){let r=0;const t=cue(String(Rz)).split("."),e=cue("9").split("."),i=Math.max(t.length,e.length);for(let o=0;0==r&&o<i;o++){var n=t[o]||"",s=e[o]||"";do{if(n=/(\d*)(\D*)(.*)/.exec(n)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==n[0].length&&0==s[0].length)break;r=Z9(0==n[1].length?0:parseInt(n[1],10),0==s[1].length?0:parseInt(s[1],10))||Z9(0==n[2].length,0==s[2].length)||Z9(n[2],s[2]),n=n[3],s=s[3]}while(0==r)}return 0<=r})}()&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vh(this.qa,this)):this.A=mK(this.qa,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(s){nce(this,s)}},on.qa=function(){typeof K9<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,yh(this,"timeout"),this.abort(8))},on.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,yh(this,"complete"),yh(this,"abort"),Gz(this))},on.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gz(this,!0)),xa.X.M.call(this)},on.Ha=function(){this.s||(this.F||this.v||this.l?sce(this):this.fb())},on.fb=function(){sce(this)},on.aa=function(){try{return 2<iy(this)?this.g.status:-1}catch{return-1}},on.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},on.Sa=function(r){if(this.g){var t=this.g.responseText;return r&&0==t.indexOf(r)&&(t=t.substring(r.length)),uFe(t)}},on.Ea=function(){return this.m},on.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(on=hce.prototype).ma=8,on.G=1,on.Ja=function(r){if(this.m)if(this.m=null,1==this.G){if(!r){this.U=Math.floor(1e5*Math.random()),r=this.U++;const n=new SP(this,this.j,r,void 0);let s=this.s;if(this.S&&(s?(s=mue(s),yue(s,this.S)):s=this.S),null!==this.o||this.N||(n.H=s,s=null),this.O)e:{for(var t=0,e=0;e<this.i.length;e++){var i=this.i[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.i.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=dce(this,n,t),Uo(e=ty(this.F),"RID",r),Uo(e,"CVER",22),this.D&&Uo(e,"X-HTTP-Session-Id",this.D),LP(this,e),s&&(this.N?t="headers="+encodeURIComponent(String(lce(s)))+"&"+t:this.o&&AK(e,this.o,s)),TK(this.h,n),this.Ya&&Uo(e,"TYPE","init"),this.O?(Uo(e,"$req",t),Uo(e,"SID","null"),n.Z=!0,SK(n,e,null)):SK(n,e,t),this.G=2}}else 3==this.G&&(r?cce(this,r):0==this.i.length||Xue(this.h)||cce(this))},on.Ia=function(){if(this.u=null,fce(this),this.$&&!(this.K||null==this.g||0>=this.P)){var r=2*this.P;this.j.info("BP detection timer enabled: "+r),this.B=CP(Vh(this.eb,this),r)}},on.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yu(10),Kz(this),fce(this))},on.cb=function(){null!=this.v&&(this.v=null,Kz(this),RK(this),yu(19))},on.kb=function(r){r?(this.j.info("Successfully pinged google.com"),yu(2)):(this.j.info("Failed to ping google.com"),yu(1))},(on=Cce.prototype).xa=function(){},on.wa=function(){},on.va=function(){},on.ua=function(){},on.Ra=function(){},Zz.prototype.g=function(r,t){return new Qc(r,t)},vh(Qc,zl),Qc.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var r=this.g,t=this.l,e=this.h||void 0;yu(0),r.V=t,r.ia=e||{},r.L=r.Y,r.F=yce(r,null,r.V),$z(r)},Qc.prototype.close=function(){kK(this.g)},Qc.prototype.u=function(r){var t=this.g;if("string"==typeof r){var e={};e.__data__=r,r=e}else this.v&&((e={}).__data__=dK(r),r=e);t.i.push(new class{constructor(r,t){this.h=r,this.g=t}}(t.ab++,r)),3==t.G&&$z(t)},Qc.prototype.M=function(){this.g.l=null,delete this.j,kK(this.g),delete this.g,Qc.X.M.call(this)},vh(wce,yK),vh(Sce,bK),vh(lI,Cce),lI.prototype.xa=function(){yh(this.g,"a")},lI.prototype.wa=function(r){yh(this.g,new wce(r))},lI.prototype.va=function(r){yh(this.g,new Sce)},lI.prototype.ua=function(){yh(this.g,"b")},Zz.prototype.createWebChannel=Zz.prototype.g,Qc.prototype.send=Qc.prototype.u,Qc.prototype.open=Qc.prototype.m,Qc.prototype.close=Qc.prototype.close,Nz.NO_ERROR=0,Nz.TIMEOUT=8,Nz.HTTP_ERROR=6,Mue.COMPLETE="complete",Nue.EventType=wP,wP.OPEN="a",wP.CLOSE="b",wP.ERROR="c",wP.MESSAGE="d",zl.prototype.listen=zl.prototype.N,xa.prototype.listenOnce=xa.prototype.O,xa.prototype.getLastError=xa.prototype.Oa,xa.prototype.getLastErrorCode=xa.prototype.Ea,xa.prototype.getStatus=xa.prototype.aa,xa.prototype.getResponseJson=xa.prototype.Sa,xa.prototype.getResponseText=xa.prototype.fa,xa.prototype.send=xa.prototype.da,xa.prototype.setWithCredentials=xa.prototype.Ka;var gFe=ey.createWebChannelTransport=function(){return new Zz},mFe=ey.getStatEventTarget=function(){return Fz()},LK=ey.ErrorCode=Nz,vFe=ey.EventType=Mue,yFe=ey.Event=sE,Ece=ey.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},bFe=ey.FetchXmlHttpFactory=AP,Xz=ey.WebChannel=Nue,CFe=ey.XhrIo=xa;const xce="@firebase/firestore";class jl{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}jl.UNAUTHENTICATED=new jl(null),jl.GOOGLE_CREDENTIALS=new jl("google-credentials-uid"),jl.FIRST_PARTY=new jl("first-party-uid"),jl.MOCK_USER=new jl("mock-user");let hI="9.14.0";const VC=new _f.Yd("@firebase/firestore");function OK(){return VC.logLevel}function $t(r,...t){if(VC.logLevel<=_f.in.DEBUG){const e=t.map(PK);VC.debug(`Firestore (${hI}): ${r}`,...e)}}function za(r,...t){if(VC.logLevel<=_f.in.ERROR){const e=t.map(PK);VC.error(`Firestore (${hI}): ${r}`,...e)}}function hE(r,...t){if(VC.logLevel<=_f.in.WARN){const e=t.map(PK);VC.warn(`Firestore (${hI}): ${r}`,...e)}}function PK(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Gi(r="Unexpected state"){const t=`FIRESTORE (${hI}) INTERNAL ASSERTION FAILED: `+r;throw za(t),new Error(t)}function Rn(r,t){r||Gi()}function Ci(r,t){return r}const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends J.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wl{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Tce{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class EFe{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(jl.UNAUTHENTICATED))}shutdown(){}}class xFe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class TFe{constructor(t){this.t=t,this.currentUser=jl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let n=this.i;const s=h=>this.i!==n?(n=this.i,e(h)):Promise.resolve();let o=new wl;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wl,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const h=o;t.enqueueRetryable((0,vt.Z)(function*(){yield h.promise,yield s(i.currentUser)}))},l=h=>{$t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?l(h):($t("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wl)}},0),a()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?($t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Rn("string"==typeof i.accessToken),new Tce(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Rn(null===t||"string"==typeof t),new jl(t)}}class DFe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n,this.type="FirstParty",this.user=jl.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Rn(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.p.set("Authorization",t),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class IFe{constructor(t,e,i,n){this.h=t,this.l=e,this.m=i,this.g=n}getToken(){return Promise.resolve(new DFe(this.h,this.l,this.m,this.g))}start(t,e){t.enqueueRetryable(()=>e(jl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dce{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AFe{constructor(t){this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(t,e){const i=s=>{null!=s.error&&$t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,$t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const n=s=>{$t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>n(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?n(s):$t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Rn("string"==typeof e.token),this.A=e.token,new Dce(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function kFe(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(r);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<r;i++)e[i]=Math.floor(256*Math.random());return e}class Ice{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const n=kFe(40);for(let s=0;s<n.length;++s)i.length<20&&n[s]<e&&(i+=t.charAt(n[s]%t.length))}return i}}function Un(r,t){return r<t?-1:r>t?1:0}function uI(r,t,e){return r.length===t.length&&r.every((i,n)=>e(i,t[n]))}function Ace(r){return r+"\0"}class Wo{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Bt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Bt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Bt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Bt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Wo.fromMillis(Date.now())}static fromDate(t){return Wo.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new Wo(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Un(this.nanoseconds,t.nanoseconds):Un(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class _n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new _n(t)}static min(){return new _n(new Wo(0,0))}static max(){return new _n(new Wo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class OP{constructor(t,e,i){void 0===e?e=0:e>t.length&&Gi(),void 0===i?i=t.length-e:i>t.length-e&&Gi(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===OP.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof OP?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let n=0;n<i;n++){const s=t.get(n),o=e.get(n);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Xr extends OP{construct(t,e,i){return new Xr(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new Bt(ut.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(n=>n.length>0))}return new Xr(e)}static emptyPath(){return new Xr([])}}const RFe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ta extends OP{construct(t,e,i){return new Ta(t,e,i)}static isValidIdentifier(t){return RFe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ta.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ta(["__name__"])}static fromServerFormat(t){const e=[];let i="",n=0;const s=()=>{if(0===i.length)throw new Bt(ut.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let o=!1;for(;n<t.length;){const a=t[n];if("\\"===a){if(n+1===t.length)throw new Bt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[n+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new Bt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=l,n+=2}else"`"===a?(o=!o,n++):"."!==a||o?(i+=a,n++):(s(),n++)}if(s(),o)throw new Bt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ta(e)}static emptyPath(){return new Ta([])}}class gi{constructor(t){this.path=t}static fromPath(t){return new gi(Xr.fromString(t))}static fromName(t){return new gi(Xr.fromString(t).popFirst(5))}static empty(){return new gi(Xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Xr.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Xr.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new gi(new Xr(t.slice()))}}class Qz{constructor(t,e,i,n){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=n}}function MK(r){return r.fields.find(t=>2===t.kind)}function uE(r){return r.fields.filter(t=>2!==t.kind)}Qz.UNKNOWN_ID=-1;class Jz{constructor(t,e){this.fieldPath=t,this.kind=e}}class PP{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new PP(0,Jc.min())}}function kce(r,t){const e=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,n=_n.fromTimestamp(1e9===i?new Wo(e+1,0):new Wo(e,i));return new Jc(n,gi.empty(),t)}function Rce(r){return new Jc(r.readTime,r.key,-1)}class Jc{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Jc(_n.min(),gi.empty(),-1)}static max(){return new Jc(_n.max(),gi.empty(),-1)}}function FK(r,t){let e=r.readTime.compareTo(t.readTime);return 0!==e?e:(e=gi.comparator(r.documentKey,t.documentKey),0!==e?e:Un(r.largestBatchId,t.largestBatchId))}const _ce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}function zC(r){return NK.apply(this,arguments)}function NK(){return NK=(0,vt.Z)(function*(r){if(r.code!==ut.FAILED_PRECONDITION||r.message!==_ce)throw r;$t("LocalStore","Unexpectedly lost primary lease")}),NK.apply(this,arguments)}class nt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Gi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new nt((i,n)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,n)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,n)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof nt?e:nt.resolve(e)}catch(e){return nt.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):nt.reject(e)}static resolve(t){return new nt((e,i)=>{e(t)})}static reject(t){return new nt((e,i)=>{i(t)})}static waitFor(t){return new nt((e,i)=>{let n=0,s=0,o=!1;t.forEach(a=>{++n,a.next(()=>{++s,o&&s===n&&e()},l=>i(l))}),o=!0,s===n&&e()})}static or(t){let e=nt.resolve(!1);for(const i of t)e=e.next(n=>n?nt.resolve(n):i());return e}static forEach(t,e){const i=[];return t.forEach((n,s)=>{i.push(e.call(this,n,s))}),this.waitFor(i)}static mapArray(t,e){return new nt((i,n)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;e(t[h]).next(u=>{o[h]=u,++a,a===s&&i(o)},u=>n(u))}})}static doWhile(t,e){return new nt((i,n)=>{const s=()=>{!0===t()?e().next(()=>{s()},n):i()};s()})}}class ej{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.P=new wl,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{e.error?this.P.reject(new MP(t,e.error)):this.P.resolve()},this.transaction.onerror=i=>{const n=BK(i.target.error);this.P.reject(new MP(t,n))}}static open(t,e,i,n){try{return new ej(e,t.transaction(n,i))}catch(s){throw new MP(e,s)}}get v(){return this.P.promise}abort(t){t&&this.P.reject(t),this.aborted||($t("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new PFe(e)}}class Nf{constructor(t,e,i){this.name=t,this.version=e,this.S=i,12.2===Nf.D((0,J.z$)())&&za("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return $t("SimpleDb","Removing database:",t),cE(window.indexedDB.deleteDatabase(t)).toPromise()}static C(){if(!(0,J.hl)())return!1;if(Nf.N())return!0;const t=(0,J.z$)(),e=Nf.D(t),i=0<e&&e<10,n=Nf.k(t),s=0<n&&n<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static N(){var t;return typeof process<"u"&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.O)}static M(t,e){return t.store(e)}static D(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(t){var e=this;return(0,vt.Z)(function*(){return e.db||($t("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,n)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=o=>{i(o.target.result)},s.onblocked=()=>{n(new MP(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;n("VersionError"===a.name?new Bt(ut.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new Bt(ut.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new MP(t,a))},s.onupgradeneeded=o=>{$t("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',o.oldVersion),e.S.$(o.target.result,s.transaction,o.oldVersion,e.version).next(()=>{$t("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.B&&(e.db.onversionchange=i=>e.B(i)),e.db})()}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,n){var s=this;return(0,vt.Z)(function*(){const o="readonly"===e;let a=0;for(;;){++a;try{s.db=yield s.F(t);const l=ej.open(s.db,t,o?"readonly":"readwrite",i),h=n(l).next(u=>(l.V(),u)).catch(u=>(l.abort(u),nt.reject(u))).toPromise();return h.catch(()=>{}),yield l.v,h}catch(l){const h=l,u="FirebaseError"!==h.name&&a<3;if($t("SimpleDb","Transaction failed with error:",h.message,"Retrying:",u),s.close(),!u)return Promise.reject(h)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class OFe{constructor(t){this.U=t,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(t){this.U=t}done(){this.q=!0}j(t){this.K=t}delete(){return cE(this.U.delete())}}class MP extends Bt{constructor(t,e){super(ut.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function jC(r){return"IndexedDbTransactionError"===r.name}class PFe{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?($t("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):($t("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),cE(i)}add(t){return $t("SimpleDb","ADD",this.store.name,t,t),cE(this.store.add(t))}get(t){return cE(this.store.get(t)).next(e=>(void 0===e&&(e=null),$t("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return $t("SimpleDb","DELETE",this.store.name,t),cE(this.store.delete(t))}count(){return $t("SimpleDb","COUNT",this.store.name),cE(this.store.count())}W(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const n=this.cursor(i),s=[];return this.H(n,(o,a)=>{s.push(a)}).next(()=>s)}{const n=this.store.getAll(i.range);return new nt((s,o)=>{n.onerror=a=>{o(a.target.error)},n.onsuccess=a=>{s(a.target.result)}})}}J(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new nt((n,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{n(o.target.result)}})}Y(t,e){$t("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.X=!1;const n=this.cursor(i);return this.H(n,(s,o,a)=>a.delete())}Z(t,e){let i;e?i=t:(i={},e=t);const n=this.cursor(i);return this.H(n,e)}tt(t){const e=this.cursor({});return new nt((i,n)=>{e.onerror=s=>{const o=BK(s.target.error);n(o)},e.onsuccess=s=>{const o=s.target.result;o?t(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}H(t,e){const i=[];return new nt((n,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{const a=o.target.result;if(!a)return void n();const l=new OFe(a),h=e(a.primaryKey,a.value,l);if(h instanceof nt){const u=h.catch(d=>(l.done(),nt.reject(d)));i.push(u)}l.isDone?n():null===l.G?a.continue():a.continue(l.G)}}).next(()=>nt.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.X?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function cE(r){return new nt((t,e)=>{r.onsuccess=i=>{t(i.target.result)},r.onerror=i=>{const n=BK(i.target.error);e(n)}})}let Oce=!1;function BK(r){const t=Nf.D((0,J.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(e)>=0){const i=new Bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oce||(Oce=!0,setTimeout(()=>{throw i},0)),i}}return r}class MFe{constructor(t,e){this.asyncQueue=t,this.et=e,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(t){var e=this;$t("IndexBackiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(0,vt.Z)(function*(){e.task=null;try{$t("IndexBackiller",`Documents written: ${yield e.et.st()}`)}catch(i){jC(i)?$t("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield zC(i)}yield e.nt(6e4)}))}}class FFe{constructor(t,e){this.localStore=t,this.persistence=e}st(t=50){var e=this;return(0,vt.Z)(function*(){return e.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>e.it(i,t))})()}it(t,e){const i=new Set;let n=e,s=!0;return nt.doWhile(()=>!0===s&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(null!==o&&!i.has(o))return $t("IndexBackiller",`Processing collection: ${o}`),this.rt(t,o,n).next(a=>{n-=a,i.add(o)});s=!1})).next(()=>e-n)}rt(t,e,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(n=>this.localStore.localDocuments.getNextDocuments(t,e,n,i).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.ot(n,s)).next(a=>($t("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}ot(t,e){let i=t;return e.changes.forEach((n,s)=>{const o=Rce(s);FK(o,i)>0&&(i=o)}),new Jc(i.readTime,i.documentKey,Math.max(e.batchId,t.largestBatchId))}}class oc{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>e.writeSequenceNumber(i))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}function Pce(r){let t=0;for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t++;return t}function dE(r,t){for(const e in r)Object.prototype.hasOwnProperty.call(r,e)&&t(e,r[e])}function Mce(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}oc.at=-1;class Da{constructor(t,e){this.comparator=t,this.root=e||bh.EMPTY}insert(t,e){return new Da(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,bh.BLACK,null,null))}remove(t){return new Da(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bh.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const n=this.comparator(t,i.key);if(0===n)return e+i.left.size;n<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new tj(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new tj(this.root,t,this.comparator,!1)}getReverseIterator(){return new tj(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new tj(this.root,t,this.comparator,!0)}}class tj{constructor(t,e,i,n){this.isReverse=n,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&n&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bh{constructor(t,e,i,n,s){this.key=t,this.value=e,this.color=i??bh.RED,this.left=n??bh.EMPTY,this.right=s??bh.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,n,s){return new bh(t??this.key,e??this.value,i??this.color,n??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let n=this;const s=i(t,n.key);return n=s<0?n.copy(null,null,null,n.left.insert(t,e,i),null):0===s?n.copy(null,e,null,null,null):n.copy(null,null,null,null,n.right.insert(t,e,i)),n.fixUp()}removeMin(){if(this.left.isEmpty())return bh.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,n=this;if(e(t,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===e(t,n.key)){if(n.right.isEmpty())return bh.EMPTY;i=n.right.min(),n=n.copy(i.key,i.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bh.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bh.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Gi();const t=this.left.check();if(t!==this.right.check())throw Gi();return t+(this.isRed()?0:1)}}bh.EMPTY=null,bh.RED=!0,bh.BLACK=!1,bh.EMPTY=new class{constructor(){this.size=0}get key(){throw Gi()}get value(){throw Gi()}get color(){throw Gi()}get left(){throw Gi()}get right(){throw Gi()}copy(r,t,e,i,n){return this}insert(r,t,e){return new bh(r,t)}remove(r,t){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ws{constructor(t){this.comparator=t,this.data=new Da(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const n=i.getNext();if(this.comparator(n.key,t[1])>=0)return;e(n.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Fce(this.data.getIterator())}getIteratorFrom(t){return new Fce(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof Ws)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(n,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Ws(this.comparator);return e.data=t,e}}class Fce{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cI(r){return r.hasNext()?r.getNext():void 0}class ed{constructor(t){this.fields=t,t.sort(Ta.comparator)}static empty(){return new ed([])}unionWith(t){let e=new Ws(Ta.comparator);for(const i of this.fields)e=e.add(i);for(const i of t)e=e.add(i);return new ed(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return uI(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Sl{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Sl(e)}static fromUint8Array(t){const e=function(i){let n="";for(let s=0;s<i.length;++s)n+=String.fromCharCode(i[s]);return n}(t);return new Sl(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Un(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Sl.EMPTY_BYTE_STRING=new Sl("");const BFe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function UC(r){if(Rn(!!r),"string"==typeof r){let t=0;const e=BFe.exec(r);if(Rn(!!e),e[1]){let n=e[1];n=(n+"000000000").substr(0,9),t=Number(n)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ia(r.seconds),nanos:Ia(r.nanos)}}function Ia(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function pE(r){return"string"==typeof r?Sl.fromBase64String(r):Sl.fromUint8Array(r)}function HK(r){var t,e;return"server_timestamp"===(null===(e=((null===(t=r?.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Nce(r){const t=r.mapValue.fields.__previous_value__;return HK(t)?Nce(t):t}function FP(r){const t=UC(r.mapValue.fields.__local_write_time__.timestampValue);return new Wo(t.seconds,t.nanos)}class HFe{constructor(t,e,i,n,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=n,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class WC{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new WC("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof WC&&t.projectId===this.projectId&&t.database===this.database}}function NP(r){return null==r}function BP(r){return 0===r&&1/r==-1/0}function Bce(r){return"number"==typeof r&&Number.isInteger(r)&&!BP(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const qC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ij={nullValue:"NULL_VALUE"};function fE(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?HK(r)?4:jce(r)?9007199254740991:10:Gi()}function em(r,t){if(r===t)return!0;const e=fE(r);if(e!==fE(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return FP(r).isEqual(FP(t));case 3:return function(i,n){if("string"==typeof i.timestampValue&&"string"==typeof n.timestampValue&&i.timestampValue.length===n.timestampValue.length)return i.timestampValue===n.timestampValue;const s=UC(i.timestampValue),o=UC(n.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return n=t,pE(r.bytesValue).isEqual(pE(n.bytesValue));case 7:return r.referenceValue===t.referenceValue;case 8:return function(i,n){return Ia(i.geoPointValue.latitude)===Ia(n.geoPointValue.latitude)&&Ia(i.geoPointValue.longitude)===Ia(n.geoPointValue.longitude)}(r,t);case 2:return function(i,n){if("integerValue"in i&&"integerValue"in n)return Ia(i.integerValue)===Ia(n.integerValue);if("doubleValue"in i&&"doubleValue"in n){const s=Ia(i.doubleValue),o=Ia(n.doubleValue);return s===o?BP(s)===BP(o):isNaN(s)&&isNaN(o)}return!1}(r,t);case 9:return uI(r.arrayValue.values||[],t.arrayValue.values||[],em);case 10:return function(i,n){const s=i.mapValue.fields||{},o=n.mapValue.fields||{};if(Pce(s)!==Pce(o))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(void 0===o[a]||!em(s[a],o[a])))return!1;return!0}(r,t);default:return Gi()}var n}function HP(r,t){return void 0!==(r.values||[]).find(e=>em(e,t))}function GC(r,t){if(r===t)return 0;const e=fE(r),i=fE(t);if(e!==i)return Un(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Un(r.booleanValue,t.booleanValue);case 2:return function(n,s){const o=Ia(n.integerValue||n.doubleValue),a=Ia(s.integerValue||s.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(r,t);case 3:return Hce(r.timestampValue,t.timestampValue);case 4:return Hce(FP(r),FP(t));case 5:return Un(r.stringValue,t.stringValue);case 6:return function(n,s){const o=pE(n),a=pE(s);return o.compareTo(a)}(r.bytesValue,t.bytesValue);case 7:return function(n,s){const o=n.split("/"),a=s.split("/");for(let l=0;l<o.length&&l<a.length;l++){const h=Un(o[l],a[l]);if(0!==h)return h}return Un(o.length,a.length)}(r.referenceValue,t.referenceValue);case 8:return function(n,s){const o=Un(Ia(n.latitude),Ia(s.latitude));return 0!==o?o:Un(Ia(n.longitude),Ia(s.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return function(n,s){const o=n.values||[],a=s.values||[];for(let l=0;l<o.length&&l<a.length;++l){const h=GC(o[l],a[l]);if(h)return h}return Un(o.length,a.length)}(r.arrayValue,t.arrayValue);case 10:return function(n,s){if(n===qC.mapValue&&s===qC.mapValue)return 0;if(n===qC.mapValue)return 1;if(s===qC.mapValue)return-1;const o=n.fields||{},a=Object.keys(o),l=s.fields||{},h=Object.keys(l);a.sort(),h.sort();for(let u=0;u<a.length&&u<h.length;++u){const d=Un(a[u],h[u]);if(0!==d)return d;const m=GC(o[a[u]],l[h[u]]);if(0!==m)return m}return Un(a.length,h.length)}(r.mapValue,t.mapValue);default:throw Gi()}}function Hce(r,t){if("string"==typeof r&&"string"==typeof t&&r.length===t.length)return Un(r,t);const e=UC(r),i=UC(t),n=Un(e.seconds,i.seconds);return 0!==n?n:Un(e.nanos,i.nanos)}function dI(r){return VK(r)}function VK(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const n=UC(i);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?pE(r.bytesValue).toBase64():"referenceValue"in r?gi.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(t=r.geoPointValue).latitude},${t.longitude})`:"arrayValue"in r?function(i){let n="[",s=!0;for(const o of i.values||[])s?s=!1:n+=",",n+=VK(o);return n+"]"}(r.arrayValue):"mapValue"in r?function(i){const n=Object.keys(i.fields||{}).sort();let s="{",o=!0;for(const a of n)o?o=!1:s+=",",s+=`${a}:${VK(i.fields[a])}`;return s+"}"}(r.mapValue):Gi();var t}function gE(r,t){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${t.path.canonicalString()}`}}function zK(r){return!!r&&"integerValue"in r}function VP(r){return!!r&&"arrayValue"in r}function Vce(r){return!!r&&"nullValue"in r}function zce(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nj(r){return!!r&&"mapValue"in r}function zP(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const t={mapValue:{fields:{}}};return dE(r.mapValue.fields,(e,i)=>t.mapValue.fields[e]=zP(i)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(r.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=zP(r.arrayValue.values[e]);return t}return Object.assign({},r)}function jce(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function VFe(r){return"nullValue"in r?ij:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?gE(WC.empty(),gi.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Gi()}function zFe(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?gE(WC.empty(),gi.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?qC:Gi()}function Uce(r,t){const e=GC(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?-1:!r.inclusive&&t.inclusive?1:0}function Wce(r,t){const e=GC(r.value,t.value);return 0!==e?e:r.inclusive&&!t.inclusive?1:!r.inclusive&&t.inclusive?-1:0}class Ch{constructor(t){this.value=t}static empty(){return new Ch({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!nj(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=zP(e)}setAll(t){let e=Ta.emptyPath(),i={},n=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){const l=this.getFieldsMap(e);this.applyChanges(l,i,n),i={},n=[],e=a.popLast()}o?i[a.lastSegment()]=zP(o):n.push(a.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,n)}delete(t){const e=this.field(t.popLast());nj(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return em(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let n=e.mapValue.fields[t.get(i)];nj(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=n),e=n}return e.mapValue.fields}applyChanges(t,e,i){dE(e,(n,s)=>t[n]=s);for(const n of i)delete t[n]}clone(){return new Ch(zP(this.value))}}function qce(r){const t=[];return dE(r.fields,(e,i)=>{const n=new Ta([e]);if(nj(i)){const s=qce(i.mapValue).fields;if(0===s.length)t.push(n);else for(const o of s)t.push(n.child(o))}else t.push(n)}),new ed(t)}class fo{constructor(t,e,i,n,s,o){this.key=t,this.documentType=e,this.version=i,this.readTime=n,this.data=s,this.documentState=o}static newInvalidDocument(t){return new fo(t,0,_n.min(),_n.min(),Ch.empty(),0)}static newFoundDocument(t,e,i){return new fo(t,1,e,_n.min(),i,0)}static newNoDocument(t,e){return new fo(t,2,e,_n.min(),Ch.empty(),0)}static newUnknownDocument(t,e){return new fo(t,3,e,_n.min(),Ch.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ch.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ch.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_n.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof fo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fo(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class jFe{constructor(t,e=null,i=[],n=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=n,this.limit=s,this.startAt=o,this.endAt=a,this.ht=null}}function Gce(r,t=null,e=[],i=[],n=null,s=null,o=null){return new jFe(r,t,e,i,n,s,o)}function mE(r){const t=Ci(r);if(null===t.ht){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(n=i).field.canonicalString()+n.op.toString()+dI(n.value);var n}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(n=i).field.canonicalString()+n.dir;var n}).join(","),NP(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>dI(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>dI(i)).join(",")),t.ht=e}return t.ht}function jP(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!XFe(r.orderBy[n],t.orderBy[n]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if((e=r.filters[n]).op!==(i=t.filters[n]).op||!e.field.isEqual(i.field)||!em(e.value,i.value))return!1;var e,i;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!Xce(r.startAt,t.startAt)&&Xce(r.endAt,t.endAt)}function rj(r){return gi.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function sj(r,t){return r.filters.filter(e=>e instanceof wh&&e.field.isEqual(t))}function Kce(r,t,e){let i=ij,n=!0;for(const s of sj(r,t)){let o=ij,a=!0;switch(s.op){case"<":case"<=":o=VFe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=ij}Uce({value:i,inclusive:n},{value:o,inclusive:a})<0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];Uce({value:i,inclusive:n},{value:o,inclusive:e.inclusive})<0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}function $ce(r,t,e){let i=qC,n=!0;for(const s of sj(r,t)){let o=qC,a=!0;switch(s.op){case">=":case">":o=zFe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qC}Wce({value:i,inclusive:n},{value:o,inclusive:a})>0&&(i=o,n=a)}if(null!==e)for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(t)){const o=e.position[s];Wce({value:i,inclusive:n},{value:o,inclusive:e.inclusive})>0&&(i=o,n=e.inclusive);break}return{value:i,inclusive:n}}class wh extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.lt(t,e,i):new WFe(t,e,i):"array-contains"===e?new KFe(t,i):"in"===e?new $Fe(t,i):"not-in"===e?new YFe(t,i):"array-contains-any"===e?new ZFe(t,i):new wh(t,e,i)}static lt(t,e,i){return"in"===e?new qFe(t,i):new GFe(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.ft(GC(e,this.value)):null!==e&&fE(this.value)===fE(e)&&this.ft(GC(e,this.value))}ft(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Gi()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class WFe extends wh{constructor(t,e,i){super(t,e,i),this.key=gi.fromName(i.referenceValue)}matches(t){const e=gi.comparator(t.key,this.key);return this.ft(e)}}class qFe extends wh{constructor(t,e){super(t,"in",e),this.keys=Yce(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class GFe extends wh{constructor(t,e){super(t,"not-in",e),this.keys=Yce(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Yce(r,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>gi.fromName(i.referenceValue))}class KFe extends wh{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return VP(e)&&HP(e.arrayValue,this.value)}}class $Fe extends wh{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&HP(this.value.arrayValue,e)}}class YFe extends wh{constructor(t,e){super(t,"not-in",e)}matches(t){if(HP(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!HP(this.value.arrayValue,e)}}class ZFe extends wh{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!VP(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>HP(this.value.arrayValue,i))}}class KC{constructor(t,e){this.position=t,this.inclusive=e}}class pI{constructor(t,e="asc"){this.field=t,this.dir=e}}function XFe(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}function Zce(r,t,e){let i=0;for(let n=0;n<r.position.length;n++){const s=t[n],o=r.position[n];if(i=s.field.isKeyField()?gi.comparator(gi.fromName(o.referenceValue),e.key):GC(o,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Xce(r,t){if(null===r)return null===t;if(null===t||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let e=0;e<r.position.length;e++)if(!em(r.position[e],t.position[e]))return!1;return!0}class ny{constructor(t,e=null,i=[],n=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=n,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this._t=null,this.wt=null}}function Qce(r,t,e,i,n,s,o,a){return new ny(r,t,e,i,n,s,o,a)}function fI(r){return new ny(r)}function Jce(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function jK(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function UK(r){for(const t of r.filters)if(t.dt())return t.field;return null}function WK(r){return null!==r.collectionGroup}function gI(r){const t=Ci(r);if(null===t._t){t._t=[];const e=UK(t),i=jK(t);if(null!==e&&null===i)e.isKeyField()||t._t.push(new pI(e)),t._t.push(new pI(Ta.keyField(),"asc"));else{let n=!1;for(const s of t.explicitOrderBy)t._t.push(s),s.field.isKeyField()&&(n=!0);if(!n){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new pI(Ta.keyField(),s))}}}return t._t}function bu(r){const t=Ci(r);if(!t.wt)if("F"===t.limitType)t.wt=Gce(t.path,t.collectionGroup,gI(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of gI(t))e.push(new pI(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new KC(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new KC(t.startAt.position,t.startAt.inclusive):null;t.wt=Gce(t.path,t.collectionGroup,e,t.filters,t.limit,i,n)}return t.wt}function oj(r,t,e){return new ny(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,e,r.startAt,r.endAt)}function UP(r,t){return jP(bu(r),bu(t))&&r.limitType===t.limitType}function ede(r){return`${mE(bu(r))}|lt:${r.limitType}`}function qK(r){return`Query(target=${function UFe(r){let t=r.path.canonicalString();return null!==r.collectionGroup&&(t+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(t+=`, filters: [${r.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${dI(i.value)}`;var i}).join(", ")}]`),NP(r.limit)||(t+=", limit: "+r.limit),r.orderBy.length>0&&(t+=`, orderBy: [${r.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),r.startAt&&(t+=", startAt: ",t+=r.startAt.inclusive?"b:":"a:",t+=r.startAt.position.map(e=>dI(e)).join(",")),r.endAt&&(t+=", endAt: ",t+=r.endAt.inclusive?"a:":"b:",t+=r.endAt.position.map(e=>dI(e)).join(",")),`Target(${t})`}(bu(r))}; limitType=${r.limitType})`}function GK(r,t){return t.isFoundDocument()&&function(e,i){const n=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):gi.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(r,t)&&function(e,i){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===i.data.field(n.field))return!1;return!0}(r,t)&&function(e,i){for(const n of e.filters)if(!n.matches(i))return!1;return!0}(r,t)&&(i=t,!((e=r).startAt&&!function(n,s,o){const a=Zce(n,s,o);return n.inclusive?a<=0:a<0}(e.startAt,gI(e),i)||e.endAt&&!function(n,s,o){const a=Zce(n,s,o);return n.inclusive?a>=0:a>0}(e.endAt,gI(e),i)));var e,i}function tde(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ide(r){return(t,e)=>{let i=!1;for(const n of gI(r)){const s=QFe(n,t,e);if(0!==s)return s;i=i||n.field.isKeyField()}return 0}}function QFe(r,t,e){const i=r.field.isKeyField()?gi.comparator(t.key,e.key):function(n,s,o){const a=s.data.field(n),l=o.data.field(n);return null!==a&&null!==l?GC(a,l):Gi()}(r.field,t,e);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Gi()}}function nde(r,t){if(r.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:BP(t)?"-0":t}}function rde(r){return{integerValue:""+r}}function sde(r,t){return Bce(t)?rde(t):nde(r,t)}class aj{constructor(){this._=void 0}}function JFe(r,t,e){return r instanceof mI?function(i,n){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return n&&(s.fields.__previous_value__=n),{mapValue:s}}(e,t):r instanceof vE?ade(r,t):r instanceof yE?lde(r,t):function(i,n){const s=ode(i,n),o=hde(s)+hde(i.yt);return zK(s)&&zK(i.yt)?rde(o):nde(i.It,o)}(r,t)}function eNe(r,t,e){return r instanceof vE?ade(r,t):r instanceof yE?lde(r,t):e}function ode(r,t){return r instanceof vI?zK(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class mI extends aj{}class vE extends aj{constructor(t){super(),this.elements=t}}function ade(r,t){const e=ude(t);for(const i of r.elements)e.some(n=>em(n,i))||e.push(i);return{arrayValue:{values:e}}}class yE extends aj{constructor(t){super(),this.elements=t}}function lde(r,t){let e=ude(t);for(const i of r.elements)e=e.filter(n=>!em(n,i));return{arrayValue:{values:e}}}class vI extends aj{constructor(t,e){super(),this.It=t,this.yt=e}}function hde(r){return Ia(r.integerValue||r.doubleValue)}function ude(r){return VP(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class WP{constructor(t,e){this.field=t,this.transform=e}}class iNe{constructor(t,e){this.version=t,this.transformResults=e}}class qo{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new qo}static exists(t){return new qo(void 0,t)}static updateTime(t){return new qo(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function lj(r,t){return void 0!==r.updateTime?t.isFoundDocument()&&t.version.isEqual(r.updateTime):void 0===r.exists||r.exists===t.isFoundDocument()}class hj{}function cde(r,t){if(!r.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return r.isNoDocument()?new bI(r.key,qo.none()):new yI(r.key,r.data,qo.none());{const e=r.data,i=Ch.empty();let n=new Ws(Ta.comparator);for(let s of t.fields)if(!n.has(s)){let o=e.field(s);null===o&&s.length>1&&(s=s.popLast(),o=e.field(s)),null===o?i.delete(s):i.set(s,o),n=n.add(s)}return new ry(r.key,i,new ed(n.toArray()),qo.none())}}function nNe(r,t,e){r instanceof yI?function(i,n,s){const o=i.value.clone(),a=fde(i.fieldTransforms,n,s.transformResults);o.setAll(a),n.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(r,t,e):r instanceof ry?function(i,n,s){if(!lj(i.precondition,n))return void n.convertToUnknownDocument(s.version);const o=fde(i.fieldTransforms,n,s.transformResults),a=n.data;a.setAll(pde(i)),a.setAll(o),n.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(r,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function qP(r,t,e,i){return r instanceof yI?function(n,s,o,a){if(!lj(n.precondition,s))return o;const l=n.value.clone(),h=gde(n.fieldTransforms,a,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(r,t,e,i):r instanceof ry?function(n,s,o,a){if(!lj(n.precondition,s))return o;const l=gde(n.fieldTransforms,a,s),h=s.data;return h.setAll(pde(n)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null===o?null:o.unionWith(n.fieldMask.fields).unionWith(n.fieldTransforms.map(u=>u.field))}(r,t,e,i):(o=e,lj(r.precondition,s=t)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function rNe(r,t){let e=null;for(const i of r.fieldTransforms){const n=t.data.field(i.field),s=ode(i.transform,n||null);null!=s&&(null===e&&(e=Ch.empty()),e.set(i.field,s))}return e||null}function dde(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=r.fieldTransforms)&&void 0===i||e&&i&&uI(e,i,(n,s)=>function tNe(r,t){return r.field.isEqual(t.field)&&(i=t.transform,(e=r.transform)instanceof vE&&i instanceof vE||e instanceof yE&&i instanceof yE?uI(e.elements,i.elements,em):e instanceof vI&&i instanceof vI?em(e.yt,i.yt):e instanceof mI&&i instanceof mI);var e,i}(n,s))))&&(0===r.type?r.value.isEqual(t.value):1!==r.type||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask));var e,i}class yI extends hj{constructor(t,e,i,n=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class ry extends hj{constructor(t,e,i,n,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=n,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pde(r){const t=new Map;return r.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=r.data.field(e);t.set(e,i)}}),t}function fde(r,t,e){const i=new Map;Rn(r.length===e.length);for(let n=0;n<e.length;n++){const s=r[n],o=s.transform,a=t.data.field(s.field);i.set(s.field,eNe(o,a,e[n]))}return i}function gde(r,t,e){const i=new Map;for(const n of r){const s=n.transform,o=e.data.field(n.field);i.set(n.field,JFe(s,o,t))}return i}class bI extends hj{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KK extends hj{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class sNe{constructor(t){this.count=t}}var ol,Qr;function mde(r){switch(r){default:return Gi();case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0}}function vde(r){if(void 0===r)return za("GRPC error has no .code"),ut.UNKNOWN;switch(r){case ol.OK:return ut.OK;case ol.CANCELLED:return ut.CANCELLED;case ol.UNKNOWN:return ut.UNKNOWN;case ol.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case ol.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case ol.INTERNAL:return ut.INTERNAL;case ol.UNAVAILABLE:return ut.UNAVAILABLE;case ol.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case ol.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case ol.NOT_FOUND:return ut.NOT_FOUND;case ol.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case ol.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case ol.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case ol.ABORTED:return ut.ABORTED;case ol.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case ol.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case ol.DATA_LOSS:return ut.DATA_LOSS;default:return Gi()}}(Qr=ol||(ol={}))[Qr.OK=0]="OK",Qr[Qr.CANCELLED=1]="CANCELLED",Qr[Qr.UNKNOWN=2]="UNKNOWN",Qr[Qr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qr[Qr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qr[Qr.NOT_FOUND=5]="NOT_FOUND",Qr[Qr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qr[Qr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qr[Qr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qr[Qr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qr[Qr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qr[Qr.ABORTED=10]="ABORTED",Qr[Qr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qr[Qr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qr[Qr.INTERNAL=13]="INTERNAL",Qr[Qr.UNAVAILABLE=14]="UNAVAILABLE",Qr[Qr.DATA_LOSS=15]="DATA_LOSS";class $C{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[n,s]of i)if(this.equalsFn(n,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),n=this.inner[i];if(void 0===n)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],t))return void(n[s]=[t,e]);n.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],t))return 1===i.length?delete this.inner[e]:i.splice(n,1),this.innerSize--,!0;return!1}forEach(t){dE(this.inner,(e,i)=>{for(const[n,s]of i)t(n,s)})}isEmpty(){return Mce(this.inner)}size(){return this.innerSize}}const oNe=new Da(gi.comparator);function ac(){return oNe}const yde=new Da(gi.comparator);function GP(...r){let t=yde;for(const e of r)t=t.insert(e.key,e);return t}function bde(r){let t=yde;return r.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function tm(){return KP()}function Cde(){return KP()}function KP(){return new $C(r=>r.toString(),(r,t)=>r.isEqual(t))}const aNe=new Da(gi.comparator),lNe=new Ws(gi.comparator);function ar(...r){let t=lNe;for(const e of r)t=t.add(e);return t}const hNe=new Ws(Un);function uj(){return hNe}class $P{constructor(t,e,i,n,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=n,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){const n=new Map;return n.set(t,YP.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new $P(_n.min(),n,uj(),ac(),ar())}}class YP{constructor(t,e,i,n,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=n,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new YP(i,e,ar(),ar(),ar())}}class cj{constructor(t,e,i,n){this.Tt=t,this.removedTargetIds=e,this.key=i,this.Et=n}}class wde{constructor(t,e){this.targetId=t,this.At=e}}class Sde{constructor(t,e,i=Sl.EMPTY_BYTE_STRING,n=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=n}}class Ede{constructor(){this.Rt=0,this.bt=Tde(),this.Pt=Sl.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(t){t.approximateByteSize()>0&&(this.Vt=!0,this.Pt=t)}xt(){let t=ar(),e=ar(),i=ar();return this.bt.forEach((n,s)=>{switch(s){case 0:t=t.add(n);break;case 2:e=e.add(n);break;case 1:i=i.add(n);break;default:Gi()}}),new YP(this.Pt,this.vt,t,e,i)}Nt(){this.Vt=!1,this.bt=Tde()}kt(t,e){this.Vt=!0,this.bt=this.bt.insert(t,e)}Ot(t){this.Vt=!0,this.bt=this.bt.remove(t)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class uNe{constructor(t){this.Bt=t,this.Lt=new Map,this.Ut=ac(),this.qt=xde(),this.Kt=new Ws(Un)}Gt(t){for(const e of t.Tt)t.Et&&t.Et.isFoundDocument()?this.Qt(e,t.Et):this.jt(e,t.key,t.Et);for(const e of t.removedTargetIds)this.jt(e,t.key,t.Et)}Wt(t){this.forEachTarget(t,e=>{const i=this.zt(e);switch(t.state){case 0:this.Ht(e)&&i.Ct(t.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(t.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(e);break;case 3:this.Ht(e)&&(i.$t(),i.Ct(t.resumeToken));break;case 4:this.Ht(e)&&(this.Jt(e),i.Ct(t.resumeToken));break;default:Gi()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Lt.forEach((i,n)=>{this.Ht(n)&&e(n)})}Yt(t){const e=t.targetId,i=t.At.count,n=this.Xt(e);if(n){const s=n.target;if(rj(s))if(0===i){const o=new gi(s.path);this.jt(e,o,fo.newNoDocument(o,_n.min()))}else Rn(1===i);else this.Zt(e)!==i&&(this.Jt(e),this.Kt=this.Kt.add(e))}}te(t){const e=new Map;this.Lt.forEach((s,o)=>{const a=this.Xt(o);if(a){if(s.current&&rj(a.target)){const l=new gi(a.target.path);null!==this.Ut.get(l)||this.ee(o,l)||this.jt(o,l,fo.newNoDocument(l,t))}s.Dt&&(e.set(o,s.xt()),s.Nt())}});let i=ar();this.qt.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Xt(l);return!h||2===h.purpose||(a=!1,!1)}),a&&(i=i.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(t));const n=new $P(t,e,this.Kt,this.Ut,i);return this.Ut=ac(),this.qt=xde(),this.Kt=new Ws(Un),n}Qt(t,e){if(!this.Ht(t))return;const i=this.ee(t,e.key)?2:0;this.zt(t).kt(e.key,i),this.Ut=this.Ut.insert(e.key,e),this.qt=this.qt.insert(e.key,this.ne(e.key).add(t))}jt(t,e,i){if(!this.Ht(t))return;const n=this.zt(t);this.ee(t,e)?n.kt(e,1):n.Ot(e),this.qt=this.qt.insert(e,this.ne(e).delete(t)),i&&(this.Ut=this.Ut.insert(e,i))}removeTarget(t){this.Lt.delete(t)}Zt(t){const e=this.zt(t).xt();return this.Bt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Mt(t){this.zt(t).Mt()}zt(t){let e=this.Lt.get(t);return e||(e=new Ede,this.Lt.set(t,e)),e}ne(t){let e=this.qt.get(t);return e||(e=new Ws(Un),this.qt=this.qt.insert(t,e)),e}Ht(t){const e=null!==this.Xt(t);return e||$t("WatchChangeAggregator","Detected inactive target",t),e}Xt(t){const e=this.Lt.get(t);return e&&e.St?null:this.Bt.se(t)}Jt(t){this.Lt.set(t,new Ede),this.Bt.getRemoteKeysForTarget(t).forEach(e=>{this.jt(t,e,null)})}ee(t,e){return this.Bt.getRemoteKeysForTarget(t).has(e)}}function xde(){return new Da(gi.comparator)}function Tde(){return new Da(gi.comparator)}const cNe={asc:"ASCENDING",desc:"DESCENDING"},dNe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class pNe{constructor(t,e){this.databaseId=t,this.gt=e}}function ZP(r,t){return r.gt?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dde(r,t){return r.gt?t.toBase64():t.toUint8Array()}function fNe(r,t){return ZP(r,t.toTimestamp())}function Ul(r){return Rn(!!r),_n.fromTimestamp(function(t){const e=UC(t);return new Wo(e.seconds,e.nanos)}(r))}function $K(r,t){return(e=r,new Xr(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function Ide(r){const t=Xr.fromString(r);return Rn(Mde(t)),t}function XP(r,t){return $K(r.databaseId,t.path)}function im(r,t){const e=Ide(t);if(e.get(1)!==r.databaseId.projectId)throw new Bt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+r.databaseId.projectId);if(e.get(3)!==r.databaseId.database)throw new Bt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+r.databaseId.database);return new gi(kde(e))}function YK(r,t){return $K(r.databaseId,t)}function Ade(r){const t=Ide(r);return 4===t.length?Xr.emptyPath():kde(t)}function QP(r){return new Xr(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function kde(r){return Rn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function Rde(r,t,e){return{name:XP(r,t),fields:e.value.mapValue.fields}}function _de(r,t,e){const i=im(r,t.name),n=Ul(t.updateTime),s=new Ch({mapValue:{fields:t.fields}}),o=fo.newFoundDocument(i,n,s);return e&&o.setHasCommittedMutations(),e?o.setHasCommittedMutations():o}function JP(r,t){let e;if(t instanceof yI)e={update:Rde(r,t.key,t.value)};else if(t instanceof bI)e={delete:XP(r,t.key)};else if(t instanceof ry)e={update:Rde(r,t.key,t.data),updateMask:ENe(t.fieldMask)};else{if(!(t instanceof KK))return Gi();e={verify:XP(r,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(n,s){const o=s.transform;if(o instanceof mI)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof vE)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof yE)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof vI)return{fieldPath:s.field.canonicalString(),increment:o.yt};throw Gi()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(n=t.precondition).updateTime?{updateTime:fNe(r,n.updateTime)}:void 0!==n.exists?{exists:n.exists}:Gi()),e;var n}function ZK(r,t){const e=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?qo.updateTime(Ul(n.updateTime)):void 0!==n.exists?qo.exists(n.exists):qo.none():qo.none(),i=t.updateTransforms?t.updateTransforms.map(n=>function(s,o){let a=null;"setToServerValue"in o?(Rn("REQUEST_TIME"===o.setToServerValue),a=new mI):"appendMissingElements"in o?a=new vE(o.appendMissingElements.values||[]):"removeAllFromArray"in o?a=new yE(o.removeAllFromArray.values||[]):"increment"in o?a=new vI(s,o.increment):Gi();const l=Ta.fromServerFormat(o.fieldPath);return new WP(l,a)}(r,n)):[];var n;if(t.update){const n=im(r,t.update.name),s=new Ch({mapValue:{fields:t.update.fields}});if(t.updateMask){const o=new ed((t.updateMask.fieldPaths||[]).map(h=>Ta.fromServerFormat(h)));return new ry(n,s,o,e,i)}return new yI(n,s,e,i)}if(t.delete){const n=im(r,t.delete);return new bI(n,e)}if(t.verify){const n=im(r,t.verify);return new KK(n,e)}return Gi()}function Lde(r,t){return{documents:[YK(r,t.path)]}}function XK(r,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=YK(r,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=YK(r,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const n=function(l){if(0===l.length)return;const h=l.map(u=>function(d){if("=="===d.op){if(zce(d.value))return{unaryFilter:{field:CI(d.field),op:"IS_NAN"}};if(Vce(d.value))return{unaryFilter:{field:CI(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(zce(d.value))return{unaryFilter:{field:CI(d.field),op:"IS_NOT_NAN"}};if(Vce(d.value))return{unaryFilter:{field:CI(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:CI(d.field),op:CNe(d.op),value:d.value}}}(u));return 1===h.length?h[0]:{compositeFilter:{op:"AND",filters:h}}}(t.filters);n&&(e.structuredQuery.where=n);const s=function(l){if(0!==l.length)return l.map(h=>{return{field:CI((u=h).field),direction:bNe(u.dir)};var u})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const o=(h=t.limit,r.gt||NP(h)?h:{value:h});var h,a,l;return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(e.structuredQuery.endAt={before:!(l=t.endAt).inclusive,values:l.position}),e}function Ode(r){let t=Ade(r.parent);const e=r.structuredQuery,i=e.from?e.from.length:0;let n=null;if(i>0){Rn(1===i);const u=e.from[0];u.allDescendants?n=u.collectionId:t=t.child(u.collectionId)}let s=[];e.where&&(s=Pde(e.where));let o=[];e.orderBy&&(o=e.orderBy.map(u=>{return new pI(wI((d=u).field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let a=null;e.limit&&(a=function(u){let d;return d="object"==typeof u?u.value:u,NP(d)?null:d}(e.limit));let l=null;var u;e.startAt&&(l=new KC((u=e.startAt).values||[],!!u.before));let h=null;return e.endAt&&(h=function(u){return new KC(u.values||[],!u.before)}(e.endAt)),Qce(t,n,o,s,a,"F",l,h)}function Pde(r){return r?void 0!==r.unaryFilter?[SNe(r)]:void 0!==r.fieldFilter?[wNe(r)]:void 0!==r.compositeFilter?r.compositeFilter.filters.map(t=>Pde(t)).reduce((t,e)=>t.concat(e)):Gi():[]}function bNe(r){return cNe[r]}function CNe(r){return dNe[r]}function CI(r){return{fieldPath:r.canonicalString()}}function wI(r){return Ta.fromServerFormat(r.fieldPath)}function wNe(r){return wh.create(wI(r.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Gi()}}(r.fieldFilter.op),r.fieldFilter.value)}function SNe(r){switch(r.unaryFilter.op){case"IS_NAN":const t=wI(r.unaryFilter.field);return wh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=wI(r.unaryFilter.field);return wh.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=wI(r.unaryFilter.field);return wh.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const n=wI(r.unaryFilter.field);return wh.create(n,"!=",{nullValue:"NULL_VALUE"});default:return Gi()}}function ENe(r){const t=[];return r.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Mde(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}function Cu(r){let t="";for(let e=0;e<r.length;e++)t.length>0&&(t=Fde(t)),t=xNe(r.get(e),t);return Fde(t)}function xNe(r,t){let e=t;const i=r.length;for(let n=0;n<i;n++){const s=r.charAt(n);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function Fde(r){return r+"\x01\x01"}function nm(r){const t=r.length;if(Rn(t>=2),2===t)return Rn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),Xr.emptyPath();const e=t-2,i=[];let n="";for(let s=0;s<t;){const o=r.indexOf("\x01",s);switch((o<0||o>e)&&Gi(),r.charAt(o+1)){case"\x01":const a=r.substring(s,o);let l;0===n.length?l=a:(n+=a,l=n,n=""),i.push(l);break;case"\x10":n+=r.substring(s,o),n+="\0";break;case"\x11":n+=r.substring(s,o+1);break;default:Gi()}s=o+2}return new Xr(i)}const Nde=["userId","batchId"];function dj(r,t){return[r,Cu(t)]}function Bde(r,t,e){return[r,Cu(t),e]}const TNe={},DNe=["prefixPath","collectionGroup","readTime","documentId"],INe=["prefixPath","collectionGroup","documentId"],ANe=["collectionGroup","readTime","prefixPath","documentId"],kNe=["canonicalId","targetId"],RNe=["targetId","path"],_Ne=["path","targetId"],LNe=["collectionId","parent"],ONe=["indexId","uid"],PNe=["uid","sequenceNumber"],MNe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FNe=["indexId","uid","orderedDocumentKey"],NNe=["userId","collectionPath","documentId"],BNe=["userId","collectionPath","largestBatchId"],HNe=["userId","collectionGroup","largestBatchId"],Hde=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VNe=[...Hde,"documentOverlays"],Vde=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zde=Vde,zNe=[...zde,"indexConfiguration","indexState","indexEntries"];class QK extends Lce{constructor(t,e){super(),this.ie=t,this.currentSequenceNumber=e}}function Wl(r,t){const e=Ci(r);return Nf.M(e.ie,t)}class JK{constructor(t,e,i,n){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=n}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let n=0;n<this.mutations.length;n++){const s=this.mutations[n];s.key.isEqual(t.key)&&nNe(s,t,i[n])}}applyToLocalView(t,e){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(e=qP(i,t,e,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(e=qP(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const i=Cde();return this.mutations.forEach(n=>{const s=t.get(n.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=e.has(n.key)?null:a;const l=cde(o,a);null!==l&&i.set(n.key,l),o.isValidDocument()||o.convertToNoDocument(_n.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ar())}isEqual(t){return this.batchId===t.batchId&&uI(this.mutations,t.mutations,(e,i)=>dde(e,i))&&uI(this.baseMutations,t.baseMutations,(e,i)=>dde(e,i))}}class e${constructor(t,e,i,n){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=n}static from(t,e,i){Rn(t.mutations.length===i.length);let n=aNe;const s=t.mutations;for(let o=0;o<s.length;o++)n=n.insert(s[o].key,i[o].version);return new e$(t,e,i,n)}}class t${constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class YC{constructor(t,e,i,n,s=_n.min(),o=_n.min(),a=Sl.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=n,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(t){return new YC(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new YC(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new YC(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class jde{constructor(t){this.re=t}}function Ude(r,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:pj(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:XP(n=r.re,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:ZP(n,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:bE(t.version)};else{if(!t.isUnknownDocument())return Gi();i.unknownDocument={path:e.path.toArray(),version:bE(t.version)}}var n,s;return i}function pj(r){const t=r.toTimestamp();return[t.seconds,t.nanoseconds]}function bE(r){const t=r.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function CE(r){const t=new Wo(r.seconds,r.nanoseconds);return _n.fromTimestamp(t)}function wE(r,t){const e=(t.baseMutations||[]).map(s=>ZK(r.re,s));for(let s=0;s<t.mutations.length-1;++s){const o=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(o.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>ZK(r.re,s)),n=Wo.fromMillis(t.localWriteTimeMs);return new JK(t.batchId,n,e,i)}function eM(r){const t=CE(r.readTime),e=void 0!==r.lastLimboFreeSnapshotVersion?CE(r.lastLimboFreeSnapshotVersion):_n.min();let i;var n;return void 0!==r.query.documents?(Rn(1===(n=r.query).documents.length),i=bu(fI(Ade(n.documents[0])))):i=bu(Ode(r.query)),new YC(i,r.targetId,0,r.lastListenSequenceNumber,t,e,Sl.fromBase64String(r.resumeToken))}function Wde(r,t){const e=bE(t.snapshotVersion),i=bE(t.lastLimboFreeSnapshotVersion);let n;n=rj(t.target)?Lde(r.re,t.target):XK(r.re,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:mE(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function i$(r){const t=Ode({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?oj(t,t.limit,"L"):t}function n$(r,t){return new t$(t.largestBatchId,ZK(r.re,t.overlayMutation))}function qde(r,t){const e=t.path.lastSegment();return[r,Cu(t.path.popLast()),e]}function Gde(r,t,e,i){return{indexId:r,uid:t.uid||"",sequenceNumber:e,readTime:bE(i.readTime),documentKey:Cu(i.documentKey.path),largestBatchId:i.largestBatchId}}class UNe{getBundleMetadata(t,e){return Kde(t).get(e).next(i=>{if(i)return{id:(n=i).bundleId,createTime:CE(n.createTime),version:n.version};var n})}saveBundleMetadata(t,e){return Kde(t).put({bundleId:(i=e).id,createTime:bE(Ul(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return $de(t).get(e).next(i=>{if(i)return{name:(n=i).name,query:i$(n.bundledQuery),readTime:CE(n.readTime)};var n})}saveNamedQuery(t,e){return $de(t).put({name:(i=e).name,readTime:bE(Ul(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Kde(r){return Wl(r,"bundles")}function $de(r){return Wl(r,"namedQueries")}class fj{constructor(t,e){this.It=t,this.userId=e}static oe(t,e){return new fj(t,e.uid||"")}getOverlay(t,e){return tM(t).get(qde(this.userId,e)).next(i=>i?n$(this.It,i):null)}getOverlays(t,e){const i=tm();return nt.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){const n=[];return i.forEach((s,o)=>{const a=new t$(e,o);n.push(this.ue(t,a))}),nt.waitFor(n)}removeOverlaysForBatchId(t,e,i){const n=new Set;e.forEach(o=>n.add(Cu(o.getCollectionPath())));const s=[];return n.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(tM(t).Y("collectionPathOverlayIndex",a))}),nt.waitFor(s)}getOverlaysForCollection(t,e,i){const n=tm(),s=Cu(e),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return tM(t).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const h=n$(this.It,l);n.set(h.getKey(),h)}return n})}getOverlaysForCollectionGroup(t,e,i,n){const s=tm();let o;const a=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return tM(t).Z({index:"collectionGroupOverlayIndex",range:a},(l,h,u)=>{const d=n$(this.It,h);s.size()<n||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}ue(t,e){return tM(t).put(function(i,n,s){const[o,a,l]=qde(n,s.mutation.key);return{userId:n,collectionPath:a,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:JP(i.re,s.mutation)}}(this.It,this.userId,e))}}function tM(r){return Wl(r,"documentOverlays")}class SE{constructor(){}ce(t,e){this.ae(t,e),e.he()}ae(t,e){if("nullValue"in t)this.le(e,5);else if("booleanValue"in t)this.le(e,10),e.fe(t.booleanValue?1:0);else if("integerValue"in t)this.le(e,15),e.fe(Ia(t.integerValue));else if("doubleValue"in t){const i=Ia(t.doubleValue);isNaN(i)?this.le(e,13):(this.le(e,15),BP(i)?e.fe(0):e.fe(i))}else if("timestampValue"in t){const i=t.timestampValue;this.le(e,20),"string"==typeof i?e.de(i):(e.de(`${i.seconds||""}`),e.fe(i.nanos||0))}else if("stringValue"in t)this._e(t.stringValue,e),this.we(e);else if("bytesValue"in t)this.le(e,30),e.me(pE(t.bytesValue)),this.we(e);else if("referenceValue"in t)this.ge(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.le(e,45),e.fe(i.latitude||0),e.fe(i.longitude||0)}else"mapValue"in t?jce(t)?this.le(e,Number.MAX_SAFE_INTEGER):(this.ye(t.mapValue,e),this.we(e)):"arrayValue"in t?(this.pe(t.arrayValue,e),this.we(e)):Gi()}_e(t,e){this.le(e,25),this.Ie(t,e)}Ie(t,e){e.de(t)}ye(t,e){const i=t.fields||{};this.le(e,55);for(const n of Object.keys(i))this._e(n,e),this.ae(i[n],e)}pe(t,e){const i=t.values||[];this.le(e,50);for(const n of i)this.ae(n,e)}ge(t,e){this.le(e,37),gi.fromName(t).path.forEach(i=>{this.le(e,60),this.Ie(i,e)})}le(t,e){t.fe(e)}we(t){t.fe(2)}}function WNe(r){if(0===r)return 8;let t=0;return r>>4==0&&(t+=4,r<<=4),r>>6==0&&(t+=2,r<<=2),r>>7==0&&(t+=1),t}function Yde(r){const t=64-function(e){let i=0;for(let n=0;n<8;++n){const s=WNe(255&e[n]);if(i+=s,8!==s)break}return i}(r);return Math.ceil(t/8)}SE.Te=new SE;class qNe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Ae(i.value),i=e.next();this.Re()}be(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.Pe(i.value),i=e.next();this.ve()}Ve(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const n=e.codePointAt(0);this.Ae(240|n>>>18),this.Ae(128|63&n>>>12),this.Ae(128|63&n>>>6),this.Ae(128|63&n)}}this.Re()}Se(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const n=e.codePointAt(0);this.Pe(240|n>>>18),this.Pe(128|63&n>>>12),this.Pe(128|63&n>>>6),this.Pe(128|63&n)}}this.ve()}De(t){const e=this.Ce(t),i=Yde(e);this.xe(1+i),this.buffer[this.position++]=255&i;for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=255&e[n]}Ne(t){const e=this.Ce(t),i=Yde(e);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let n=e.length-i;n<e.length;++n)this.buffer[this.position++]=~(255&e[n])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(t){this.xe(t.length),this.buffer.set(t,this.position),this.position+=t.length}$e(){return this.buffer.slice(0,this.position)}Ce(t){const e=function(n){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,n,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let n=1;n<e.length;++n)e[n]^=i?255:0;return e}Ae(t){const e=255&t;0===e?(this.Oe(0),this.Oe(255)):255===e?(this.Oe(255),this.Oe(0)):this.Oe(e)}Pe(t){const e=255&t;0===e?(this.Fe(0),this.Fe(255)):255===e?(this.Fe(255),this.Fe(0)):this.Fe(t)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(t){this.xe(1),this.buffer[this.position++]=t}Fe(t){this.xe(1),this.buffer[this.position++]=~t}xe(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const n=new Uint8Array(i);n.set(this.buffer),this.buffer=n}}class GNe{constructor(t){this.Be=t}me(t){this.Be.Ee(t)}de(t){this.Be.Ve(t)}fe(t){this.Be.De(t)}he(){this.Be.ke()}}class KNe{constructor(t){this.Be=t}me(t){this.Be.be(t)}de(t){this.Be.Se(t)}fe(t){this.Be.Ne(t)}he(){this.Be.Me()}}class iM{constructor(){this.Be=new qNe,this.Le=new GNe(this.Be),this.Ue=new KNe(this.Be)}seed(t){this.Be.seed(t)}qe(t){return 0===t?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class EE{constructor(t,e,i,n){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=n}Ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new EE(this.indexId,this.documentKey,this.arrayValue,i)}}function xE(r,t){let e=r.indexId-t.indexId;return 0!==e?e:(e=Zde(r.arrayValue,t.arrayValue),0!==e?e:(e=Zde(r.directionalValue,t.directionalValue),0!==e?e:gi.comparator(r.documentKey,t.documentKey)))}function Zde(r,t){for(let e=0;e<r.length&&e<t.length;++e){const i=r[e]-t[e];if(0!==i)return i}return r.length-t.length}class $Ne{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];for(const e of t.filters){const i=e;i.dt()?this.je=i:this.Qe.push(i)}}We(t){const e=MK(t);if(void 0!==e&&!this.ze(e))return!1;const i=uE(t);let n=0,s=0;for(;n<i.length&&this.ze(i[n]);++n);if(n===i.length)return!0;if(void 0!==this.je){const o=i[n];if(!this.He(this.je,o)||!this.Je(this.Ge[s++],o))return!1;++n}for(;n<i.length;++n){const o=i[n];if(s>=this.Ge.length||!this.Je(this.Ge[s++],o))return!1}return!0}ze(t){for(const e of this.Qe)if(this.He(e,t))return!0;return!1}He(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Je(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class YNe{constructor(){this.Ye=new r$}addToCollectionParentIndex(t,e){return this.Ye.add(e),nt.resolve()}getCollectionParents(t,e){return nt.resolve(this.Ye.getEntries(e))}addFieldIndex(t,e){return nt.resolve()}deleteFieldIndex(t,e){return nt.resolve()}getDocumentsMatchingTarget(t,e){return nt.resolve(null)}getIndexType(t,e){return nt.resolve(0)}getFieldIndexes(t,e){return nt.resolve([])}getNextCollectionGroupToUpdate(t){return nt.resolve(null)}getMinOffset(t,e){return nt.resolve(Jc.min())}getMinOffsetFromCollectionGroup(t,e){return nt.resolve(Jc.min())}updateCollectionGroup(t,e,i){return nt.resolve()}updateIndexEntries(t,e){return nt.resolve()}}class r${constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e]||new Ws(Xr.comparator),s=!n.has(i);return this.index[e]=n.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),n=this.index[e];return n&&n.has(i)}getEntries(t){return(this.index[t]||new Ws(Xr.comparator)).toArray()}}const gj=new Uint8Array(0);class ZNe{constructor(t,e){this.user=t,this.databaseId=e,this.Xe=new r$,this.Ze=new $C(i=>mE(i),(i,n)=>jP(i,n)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Xe.has(e)){const i=e.lastSegment(),n=e.popLast();t.addOnCommittedListener(()=>{this.Xe.add(e)});const s={collectionId:i,parent:Cu(n)};return Xde(t).put(s)}return nt.resolve()}getCollectionParents(t,e){const i=[],n=IDBKeyRange.bound([e,""],[Ace(e),""],!1,!0);return Xde(t).W(n).next(s=>{for(const o of s){if(o.collectionId!==e)break;i.push(nm(o.parent))}return i})}addFieldIndex(t,e){const i=mj(t),n={indexId:(o=e).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])};var o;delete n.indexId;const s=i.add(n);if(e.indexState){const o=rM(t);return s.next(a=>{o.put(Gde(a,this.user,e.indexState.sequenceNumber,e.indexState.offset))})}return s.next()}deleteFieldIndex(t,e){const i=mj(t),n=rM(t),s=nM(t);return i.delete(e.indexId).next(()=>n.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=nM(t);let n=!0;const s=new Map;return nt.forEach(this.tn(e),o=>this.en(t,o).next(a=>{n&&(n=!!a),s.set(o,a)})).next(()=>{if(n){let o=ar();const a=[];return nt.forEach(s,(l,h)=>{var u;$t("IndexedDbIndexManager",`Using index ${u=l,`id=${u.indexId}|cg=${u.collectionGroup}|f=${u.fields.map(P=>`${P.fieldPath}:${P.kind}`).join(",")}`} to execute ${mE(e)}`);const d=function(P,B){const j=MK(B);if(void 0===j)return null;for(const G of sj(P,j.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(h,l),m=function(P,B){const j=new Map;for(const G of uE(B))for(const ne of sj(P,G.fieldPath))switch(ne.op){case"==":case"in":j.set(G.fieldPath.canonicalString(),ne.value);break;case"not-in":case"!=":return j.set(G.fieldPath.canonicalString(),ne.value),Array.from(j.values())}return null}(h,l),v=function(P,B){const j=[];let G=!0;for(const ne of uE(B)){const fe=0===ne.kind?Kce(P,ne.fieldPath,P.startAt):$ce(P,ne.fieldPath,P.startAt);j.push(fe.value),G&&(G=fe.inclusive)}return new KC(j,G)}(h,l),C=function(P,B){const j=[];let G=!0;for(const ne of uE(B)){const fe=0===ne.kind?$ce(P,ne.fieldPath,P.endAt):Kce(P,ne.fieldPath,P.endAt);j.push(fe.value),G&&(G=fe.inclusive)}return new KC(j,G)}(h,l),S=this.nn(l,h,v),A=this.nn(l,h,C),_=this.sn(l,h,m),M=this.rn(l.indexId,d,S,v.inclusive,A,C.inclusive,_);return nt.forEach(M,P=>i.J(P,e.limit).next(B=>{B.forEach(j=>{const G=gi.fromSegments(j.documentKey);o.has(G)||(o=o.add(G),a.push(G))})}))}).next(()=>a)}return nt.resolve(null)})}tn(t){let e=this.Ze.get(t);return e||(e=[t],this.Ze.set(t,e),e)}rn(t,e,i,n,s,o,a){const l=(null!=e?e.length:1)*Math.max(i.length,s.length),h=l/(null!=e?e.length:1),u=[];for(let d=0;d<l;++d){const m=e?this.on(e[d/h]):gj,v=this.un(t,m,i[d%h],n),C=this.cn(t,m,s[d%h],o),S=a.map(A=>this.un(t,m,A,!0));u.push(...this.createRange(v,C,S))}return u}un(t,e,i,n){const s=new EE(t,gi.empty(),e,i);return n?s:s.Ke()}cn(t,e,i,n){const s=new EE(t,gi.empty(),e,i);return n?s.Ke():s}en(t,e){const i=new $Ne(e),n=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,n).next(s=>{let o=null;for(const a of s)i.We(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let i=2;return nt.forEach(this.tn(e),n=>this.en(t,n).next(s=>{s?0!==i&&s.fields.length<function(o){let a=new Ws(Ta.comparator),l=!1;for(const h of o.filters){const u=h;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?l=!0:a=a.add(u.field))}for(const h of o.orderBy)h.field.isKeyField()||(a=a.add(h.field));return a.size+(l?1:0)}(n)&&(i=1):i=0})).next(()=>i)}an(t,e){const i=new iM;for(const n of uE(t)){const s=e.data.field(n.fieldPath);if(null==s)return null;const o=i.qe(n.kind);SE.Te.ce(s,o)}return i.$e()}on(t){const e=new iM;return SE.Te.ce(t,e.qe(0)),e.$e()}hn(t,e){const i=new iM;return SE.Te.ce(gE(this.databaseId,e),i.qe(function(n){const s=uE(n);return 0===s.length?0:s[s.length-1].kind}(t))),i.$e()}sn(t,e,i){if(null===i)return[];let n=[];n.push(new iM);let s=0;for(const o of uE(t)){const a=i[s++];for(const l of n)if(this.ln(e,o.fieldPath)&&VP(a))n=this.fn(n,o,a);else{const h=l.qe(o.kind);SE.Te.ce(a,h)}}return this.dn(n)}nn(t,e,i){return this.sn(t,e,i.position)}dn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].$e();return e}fn(t,e,i){const n=[...t],s=[];for(const o of i.arrayValue.values||[])for(const a of n){const l=new iM;l.seed(a.$e()),SE.Te.ce(o,l.qe(e.kind)),s.push(l)}return s}ln(t,e){return!!t.filters.find(i=>i instanceof wh&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=mj(t),n=rM(t);return(e?i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.W()).next(s=>{const o=[];return nt.forEach(s,a=>n.get([a.indexId,this.uid]).next(l=>{o.push(function(h,u){const d=u?new PP(u.sequenceNumber,new Jc(CE(u.readTime),new gi(nm(u.documentKey)),u.largestBatchId)):PP.empty(),m=h.fields.map(([v,C])=>new Jz(Ta.fromServerFormat(v),C));return new Qz(h.indexId,h.collectionGroup,m,d)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,n)=>{const s=i.indexState.sequenceNumber-n.indexState.sequenceNumber;return 0!==s?s:Un(i.collectionGroup,n.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const n=mj(t),s=rM(t);return this._n(t).next(o=>n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(a=>nt.forEach(a,l=>s.put(Gde(l.indexId,this.user,o,i)))))}updateIndexEntries(t,e){const i=new Map;return nt.forEach(e,(n,s)=>{const o=i.get(n.collectionGroup);return(o?nt.resolve(o):this.getFieldIndexes(t,n.collectionGroup)).next(a=>(i.set(n.collectionGroup,a),nt.forEach(a,l=>this.wn(t,n,l).next(h=>{const u=this.mn(s,l);return h.isEqual(u)?nt.resolve():this.gn(t,s,l,h,u)}))))})}yn(t,e,i,n){return nM(t).put({indexId:n.indexId,uid:this.uid,arrayValue:n.arrayValue,directionalValue:n.directionalValue,orderedDocumentKey:this.hn(i,e.key),documentKey:e.key.path.toArray()})}pn(t,e,i,n){return nM(t).delete([n.indexId,this.uid,n.arrayValue,n.directionalValue,this.hn(i,e.key),e.key.path.toArray()])}wn(t,e,i){const n=nM(t);let s=new Ws(xE);return n.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,e)])},(o,a)=>{s=s.add(new EE(i.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}mn(t,e){let i=new Ws(xE);const n=this.an(e,t);if(null==n)return i;const s=MK(e);if(null!=s){const o=t.data.field(s.fieldPath);if(VP(o))for(const a of o.arrayValue.values||[])i=i.add(new EE(e.indexId,t.key,this.on(a),n))}else i=i.add(new EE(e.indexId,t.key,gj,n));return i}gn(t,e,i,n,s){$t("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const o=[];return function(a,l,h,u,d){const m=a.getIterator(),v=l.getIterator();let C=cI(m),S=cI(v);for(;C||S;){let A=!1,_=!1;if(C&&S){const M=h(C,S);M<0?_=!0:M>0&&(A=!0)}else null!=C?_=!0:A=!0;A?(u(S),S=cI(v)):_?(d(C),C=cI(m)):(C=cI(m),S=cI(v))}}(n,s,xE,a=>{o.push(this.yn(t,e,i,a))},a=>{o.push(this.pn(t,e,i,a))}),nt.waitFor(o)}_n(t){let e=1;return rM(t).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,n,s)=>{s.done(),e=n.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((o,a)=>xE(o,a)).filter((o,a,l)=>!a||0!==xE(o,l[a-1]));const n=[];n.push(t);for(const o of i){const a=xE(o,t),l=xE(o,e);if(0===a)n[0]=t.Ke();else if(a>0&&l<0)n.push(o),n.push(o.Ke());else if(l>0)break}n.push(e);const s=[];for(let o=0;o<n.length;o+=2)s.push(IDBKeyRange.bound([n[o].indexId,this.uid,n[o].arrayValue,n[o].directionalValue,gj,[]],[n[o+1].indexId,this.uid,n[o+1].arrayValue,n[o+1].directionalValue,gj,[]]));return s}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Qde)}getMinOffset(t,e){return nt.mapArray(this.tn(e),i=>this.en(t,i).next(n=>n||Gi())).next(Qde)}}function Xde(r){return Wl(r,"collectionParents")}function nM(r){return Wl(r,"indexEntries")}function mj(r){return Wl(r,"indexConfiguration")}function rM(r){return Wl(r,"indexState")}function Qde(r){Rn(0!==r.length);let t=r[0].indexState.offset,e=t.largestBatchId;for(let i=1;i<r.length;i++){const n=r[i].indexState.offset;FK(n,t)<0&&(t=n),e<n.largestBatchId&&(e=n.largestBatchId)}return new Jc(t.readTime,t.documentKey,e)}const Jde={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lc{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new lc(t,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function epe(r,t,e){const i=r.store("mutations"),n=r.store("documentMutations"),s=[],o=IDBKeyRange.only(e.batchId);let a=0;const l=i.Z({range:o},(u,d,m)=>(a++,m.delete()));s.push(l.next(()=>{Rn(1===a)}));const h=[];for(const u of e.mutations){const d=Bde(t,u.key.path,e.batchId);s.push(n.delete(d)),h.push(u.key)}return nt.waitFor(s).next(()=>h)}function vj(r){if(!r)return 0;let t;if(r.document)t=r.document;else if(r.unknownDocument)t=r.unknownDocument;else{if(!r.noDocument)throw Gi();t=r.noDocument}return JSON.stringify(t).length}lc.DEFAULT_COLLECTION_PERCENTILE=10,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lc.DEFAULT=new lc(41943040,lc.DEFAULT_COLLECTION_PERCENTILE,lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lc.DISABLED=new lc(-1,0,0);class yj{constructor(t,e,i,n){this.userId=t,this.It=e,this.indexManager=i,this.referenceDelegate=n,this.In={}}static oe(t,e,i,n){Rn(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new yj(s,e,i,n)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ZC(t).Z({index:"userMutationsIndex",range:i},(n,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,i,n){const s=SI(t),o=ZC(t);return o.add({}).next(a=>{Rn("number"==typeof a);const l=new JK(a,e,i,n),h=function(m,v,C){const S=C.baseMutations.map(_=>JP(m.re,_)),A=C.mutations.map(_=>JP(m.re,_));return{userId:v,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:S,mutations:A}}(this.It,this.userId,l),u=[];let d=new Ws((m,v)=>Un(m.canonicalString(),v.canonicalString()));for(const m of n){const v=Bde(this.userId,m.key.path,a);d=d.add(m.key.path.popLast()),u.push(o.put(h)),u.push(s.put(v,TNe))}return d.forEach(m=>{u.push(this.indexManager.addToCollectionParentIndex(t,m))}),t.addOnCommittedListener(()=>{this.In[a]=l.keys()}),nt.waitFor(u).next(()=>l)})}lookupMutationBatch(t,e){return ZC(t).get(e).next(i=>i?(Rn(i.userId===this.userId),wE(this.It,i)):null)}Tn(t,e){return this.In[e]?nt.resolve(this.In[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const n=i.keys();return this.In[e]=n,n}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ZC(t).Z({index:"userMutationsIndex",range:n},(o,a,l)=>{a.userId===this.userId&&(Rn(a.batchId>=i),s=wE(this.It,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ZC(t).Z({index:"userMutationsIndex",range:e,reverse:!0},(n,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ZC(t).W("userMutationsIndex",e).next(i=>i.map(n=>wE(this.It,n)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=dj(this.userId,e.path),n=IDBKeyRange.lowerBound(i),s=[];return SI(t).Z({range:n},(o,a,l)=>{const[h,u,d]=o,m=nm(u);if(h===this.userId&&e.path.isEqual(m))return ZC(t).get(d).next(v=>{if(!v)throw Gi();Rn(v.userId===this.userId),s.push(wE(this.It,v))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ws(Un);const n=[];return e.forEach(s=>{const o=dj(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=SI(t).Z({range:a},(h,u,d)=>{const[m,v,C]=h,S=nm(v);m===this.userId&&s.path.isEqual(S)?i=i.add(C):d.done()});n.push(l)}),nt.waitFor(n).next(()=>this.En(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1,s=dj(this.userId,i),o=IDBKeyRange.lowerBound(s);let a=new Ws(Un);return SI(t).Z({range:o},(l,h,u)=>{const[d,m,v]=l,C=nm(m);d===this.userId&&i.isPrefixOf(C)?C.length===n&&(a=a.add(v)):u.done()}).next(()=>this.En(t,a))}En(t,e){const i=[],n=[];return e.forEach(s=>{n.push(ZC(t).get(s).next(o=>{if(null===o)throw Gi();Rn(o.userId===this.userId),i.push(wE(this.It,o))}))}),nt.waitFor(n).next(()=>i)}removeMutationBatch(t,e){return epe(t.ie,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this.An(e.batchId)}),nt.forEach(i,n=>this.referenceDelegate.markPotentiallyOrphaned(t,n))))}An(t){delete this.In[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return nt.resolve();const i=IDBKeyRange.lowerBound([this.userId]),n=[];return SI(t).Z({range:i},(s,o,a)=>{if(s[0]===this.userId){const l=nm(s[1]);n.push(l)}else a.done()}).next(()=>{Rn(0===n.length)})})}containsKey(t,e){return tpe(t,this.userId,e)}Rn(t){return ipe(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function tpe(r,t,e){const i=dj(t,e.path),n=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return SI(r).Z({range:s,X:!0},(a,l,h)=>{const[u,d,m]=a;u===t&&d===n&&(o=!0),h.done()}).next(()=>o)}function ZC(r){return Wl(r,"mutations")}function SI(r){return Wl(r,"documentMutations")}function ipe(r){return Wl(r,"mutationQueues")}class TE{constructor(t){this.bn=t}next(){return this.bn+=2,this.bn}static Pn(){return new TE(0)}static vn(){return new TE(-1)}}class XNe{constructor(t,e){this.referenceDelegate=t,this.It=e}allocateTargetId(t){return this.Vn(t).next(e=>{const i=new TE(e.highestTargetId);return e.highestTargetId=i.next(),this.Sn(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.Vn(t).next(e=>_n.fromTimestamp(new Wo(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.Vn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.Vn(t).next(n=>(n.highestListenSequenceNumber=e,i&&(n.lastRemoteSnapshotVersion=i.toTimestamp()),e>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e),this.Sn(t,n)))}addTargetData(t,e){return this.Dn(t,e).next(()=>this.Vn(t).next(i=>(i.targetCount+=1,this.Cn(e,i),this.Sn(t,i))))}updateTargetData(t,e){return this.Dn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>EI(t).delete(e.targetId)).next(()=>this.Vn(t)).next(i=>(Rn(i.targetCount>0),i.targetCount-=1,this.Sn(t,i)))}removeTargets(t,e,i){let n=0;const s=[];return EI(t).Z((o,a)=>{const l=eM(a);l.sequenceNumber<=e&&null===i.get(l.targetId)&&(n++,s.push(this.removeTargetData(t,l)))}).next(()=>nt.waitFor(s)).next(()=>n)}forEachTarget(t,e){return EI(t).Z((i,n)=>{const s=eM(n);e(s)})}Vn(t){return npe(t).get("targetGlobalKey").next(e=>(Rn(null!==e),e))}Sn(t,e){return npe(t).put("targetGlobalKey",e)}Dn(t,e){return EI(t).put(Wde(this.It,e))}Cn(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.Vn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=mE(e),n=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return EI(t).Z({range:n,index:"queryTargetsIndex"},(o,a,l)=>{const h=eM(a);jP(e,h.target)&&(s=h,l.done())}).next(()=>s)}addMatchingKeys(t,e,i){const n=[],s=XC(t);return e.forEach(o=>{const a=Cu(o.path);n.push(s.put({targetId:i,path:a})),n.push(this.referenceDelegate.addReference(t,i,o))}),nt.waitFor(n)}removeMatchingKeys(t,e,i){const n=XC(t);return nt.forEach(e,s=>{const o=Cu(s.path);return nt.waitFor([n.delete([i,o]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=XC(t),n=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(n)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),n=XC(t);let s=ar();return n.Z({range:i,X:!0},(o,a,l)=>{const h=nm(o[1]),u=new gi(h);s=s.add(u)}).next(()=>s)}containsKey(t,e){const i=Cu(e.path),n=IDBKeyRange.bound([i],[Ace(i)],!1,!0);let s=0;return XC(t).Z({index:"documentTargetsIndex",X:!0,range:n},([o,a],l,h)=>{0!==o&&(s++,h.done())}).next(()=>s>0)}se(t,e){return EI(t).get(e).next(i=>i?eM(i):null)}}function EI(r){return Wl(r,"targets")}function npe(r){return Wl(r,"targetGlobal")}function XC(r){return Wl(r,"targetDocuments")}function rpe([r,t],[e,i]){const n=Un(r,e);return 0===n?Un(t,i):n}class QNe{constructor(t){this.xn=t,this.buffer=new Ws(rpe),this.Nn=0}kn(){return++this.Nn}On(t){const e=[t,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();rpe(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class JNe{constructor(t,e,i){this.garbageCollector=t,this.asyncQueue=e,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(t){var e=this;$t("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(0,vt.Z)(function*(){e.Mn=null;try{yield e.localStore.collectGarbage(e.garbageCollector)}catch(i){jC(i)?$t("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield zC(i)}yield e.Fn(3e5)}))}}class eBe{constructor(t,e){this.$n=t,this.params=e}calculateTargetCount(t,e){return this.$n.Bn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return nt.resolve(oc.at);const i=new QNe(e);return this.$n.forEachTarget(t,n=>i.On(n.sequenceNumber)).next(()=>this.$n.Ln(t,n=>i.On(n))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.$n.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.$n.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector","Garbage collection skipped; disabled"),nt.resolve(Jde)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?($t("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Jde):this.Un(t,e))}getCacheSize(t){return this.$n.getCacheSize(t)}Un(t,e){let i,n,s,o,a,l,h;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?($t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),n=this.params.maximumSequenceNumbersToCollect):n=d,o=Date.now(),this.nthSequenceNumber(t,n))).next(d=>(i=d,a=Date.now(),this.removeTargets(t,i,e))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(t,i))).next(d=>(h=Date.now(),OK()<=_f.in.DEBUG&&$t("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${n} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${d} documents in `+(h-l)+`ms\nTotal Duration: ${h-u}ms`),nt.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:s,documentsRemoved:d})))}}class tBe{constructor(t,e){this.db=t,this.garbageCollector=new eBe(this,e)}Bn(t){const e=this.qn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(n=>i+n))}qn(t){let e=0;return this.Ln(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Ln(t,e){return this.Kn(t,(i,n)=>e(n))}addReference(t,e,i){return bj(t,i)}removeReference(t,e,i){return bj(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return bj(t,e)}Gn(t,e){return function(i,n){let s=!1;return ipe(i).tt(o=>tpe(i,o,n).next(a=>(a&&(s=!0),nt.resolve(!a)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[];let s=0;return this.Kn(t,(o,a)=>{if(a<=e){const l=this.Gn(t,o).next(h=>{if(!h)return s++,i.getEntry(t,o).next(()=>(i.removeEntry(o,_n.min()),XC(t).delete([0,Cu(o.path)])))});n.push(l)}}).next(()=>nt.waitFor(n)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return bj(t,e)}Kn(t,e){const i=XC(t);let n,s=oc.at;return i.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:h})=>{0===o?(s!==oc.at&&e(new gi(nm(n)),s),s=h,n=l):s=oc.at}).next(()=>{s!==oc.at&&e(new gi(nm(n)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function bj(r,t){return XC(r).put((i=r.currentSequenceNumber,{targetId:0,path:Cu(t.path),sequenceNumber:i}));var i}class spe{constructor(){this.changes=new $C(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fo.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?nt.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class iBe{constructor(t){this.It=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return DE(t).put(i)}removeEntry(t,e,i){return DE(t).delete(function(n,s){const o=n.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],pj(s),o[o.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Qn(t,i)))}getEntry(t,e){let i=fo.newInvalidDocument(e);return DE(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sM(e))},(n,s)=>{i=this.jn(e,s)}).next(()=>i)}Wn(t,e){let i={size:0,document:fo.newInvalidDocument(e)};return DE(t).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sM(e))},(n,s)=>{i={document:this.jn(e,s),size:vj(s)}}).next(()=>i)}getEntries(t,e){let i=ac();return this.zn(t,e,(n,s)=>{const o=this.jn(n,s);i=i.insert(n,o)}).next(()=>i)}Hn(t,e){let i=ac(),n=new Da(gi.comparator);return this.zn(t,e,(s,o)=>{const a=this.jn(s,o);i=i.insert(s,a),n=n.insert(s,vj(o))}).next(()=>({documents:i,Jn:n}))}zn(t,e,i){if(e.isEmpty())return nt.resolve();let n=new Ws(hpe);e.forEach(l=>n=n.add(l));const s=IDBKeyRange.bound(sM(n.first()),sM(n.last())),o=n.getIterator();let a=o.getNext();return DE(t).Z({index:"documentKeyIndex",range:s},(l,h,u)=>{const d=gi.fromSegments([...h.prefixPath,h.collectionGroup,h.documentId]);for(;a&&hpe(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,h),a=o.hasNext()?o.getNext():null),a?u.j(sM(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(t,e,i){const n=[e.popLast().toArray(),e.lastSegment(),pj(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return DE(t).W(IDBKeyRange.bound(n,s,!0)).next(o=>{let a=ac();for(const l of o){const h=this.jn(gi.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(h.key,h)}return a})}getAllFromCollectionGroup(t,e,i,n){let s=ac();const o=lpe(e,i),a=lpe(e,Jc.max());return DE(t).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,h,u)=>{const d=this.jn(gi.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);s=s.insert(d.key,d),s.size===n&&u.done()}).next(()=>s)}newChangeBuffer(t){return new nBe(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return ape(t).get("remoteDocumentGlobalKey").next(e=>(Rn(!!e),e))}Qn(t,e){return ape(t).put("remoteDocumentGlobalKey",e)}jn(t,e){if(e){const i=function jNe(r,t){let e;if(t.document)e=_de(r.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=gi.fromSegments(t.noDocument.path),n=CE(t.noDocument.readTime);e=fo.newNoDocument(i,n),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Gi();{const i=gi.fromSegments(t.unknownDocument.path),n=CE(t.unknownDocument.version);e=fo.newUnknownDocument(i,n)}}return t.readTime&&e.setReadTime(function(i){const n=new Wo(i[0],i[1]);return _n.fromTimestamp(n)}(t.readTime)),e}(this.It,e);if(!i.isNoDocument()||!i.version.isEqual(_n.min()))return i}return fo.newInvalidDocument(t)}}function ope(r){return new iBe(r)}class nBe extends spe{constructor(t,e){super(),this.Yn=t,this.trackRemovals=e,this.Xn=new $C(i=>i.toString(),(i,n)=>i.isEqual(n))}applyChanges(t){const e=[];let i=0,n=new Ws((s,o)=>Un(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Xn.get(s);if(e.push(this.Yn.removeEntry(t,s,a.readTime)),o.isValidDocument()){const l=Ude(this.Yn.It,o);n=n.add(s.path.popLast()),i+=vj(l)-a.size,e.push(this.Yn.addEntry(t,s,l))}else if(i-=a.size,this.trackRemovals){const l=Ude(this.Yn.It,o.convertToNoDocument(_n.min()));e.push(this.Yn.addEntry(t,s,l))}}),n.forEach(s=>{e.push(this.Yn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Yn.updateMetadata(t,i)),nt.waitFor(e)}getFromCache(t,e){return this.Yn.Wn(t,e).next(i=>(this.Xn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Yn.Hn(t,e).next(({documents:i,Jn:n})=>(n.forEach((s,o)=>{this.Xn.set(s,{size:o,readTime:i.get(s).readTime})}),i))}}function ape(r){return Wl(r,"remoteDocumentGlobal")}function DE(r){return Wl(r,"remoteDocumentsV14")}function sM(r){const t=r.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function lpe(r,t){const e=t.documentKey.path.toArray();return[r,pj(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function hpe(r,t){const e=r.path.toArray(),i=t.path.toArray();let n=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(n=Un(e[s],i[s]),n)return n;return n=Un(e.length,i.length),n||(n=Un(e[e.length-2],i[i.length-2]),n||Un(e[e.length-1],i[i.length-1]))}class rBe{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}class upe{constructor(t,e,i,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=n}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(n=>(i=n,this.getBaseDocument(t,e,i))).next(n=>(null!==i&&qP(i.mutation,n,ed.empty(),Wo.now()),n))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,ar()).next(()=>i))}getLocalViewOfDocuments(t,e,i=ar()){const n=tm();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,i).next(s=>{let o=GP();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const i=tm();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,ar()))}populateOverlays(t,e,i){const n=[];return i.forEach(s=>{e.has(s)||n.push(s)}),this.documentOverlayCache.getOverlays(t,n).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,n){let s=ac();const o=KP(),a=KP();return e.forEach((l,h)=>{const u=i.get(h.key);n.has(h.key)&&(void 0===u||u.mutation instanceof ry)?s=s.insert(h.key,h):void 0!==u&&(o.set(h.key,u.mutation.getFieldMask()),qP(u.mutation,h,u.mutation.getFieldMask(),Wo.now()))}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((h,u)=>o.set(h,u)),e.forEach((h,u)=>{var d;return a.set(h,new rBe(u,null!==(d=o.get(h))&&void 0!==d?d:null))}),a))}recalculateAndSaveOverlays(t,e){const i=KP();let n=new Da((o,a)=>o-a),s=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=e.get(l);if(null===h)return;let u=i.get(l)||ed.empty();u=a.applyToLocalView(h,u),i.set(l,u);const d=(n.get(a.batchId)||ar()).add(l);n=n.insert(a.batchId,d)})}).next(()=>{const o=[],a=n.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,u=l.value,d=Cde();u.forEach(m=>{if(!s.has(m)){const v=cde(e.get(m),i.get(m));null!==v&&d.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,h,d))}return nt.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i){return gi.isDocumentKey((n=e).path)&&null===n.collectionGroup&&0===n.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):WK(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i):this.getDocumentsMatchingCollectionQuery(t,e,i);var n}getNextDocuments(t,e,i,n){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,n).next(s=>{const o=n-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,n-s.size):nt.resolve(tm());let a=-1,l=s;return o.next(h=>nt.forEach(h,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?nt.resolve():this.getBaseDocument(t,u,d).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(t,h,s)).next(()=>this.computeViews(t,l,h,ar())).next(u=>({batchId:a,changes:bde(u)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new gi(e)).next(i=>{let n=GP();return i.isFoundDocument()&&(n=n.insert(i.key,i)),n})}getDocumentsMatchingCollectionGroupQuery(t,e,i){const n=e.collectionGroup;let s=GP();return this.indexManager.getCollectionParents(t,n).next(o=>nt.forEach(o,a=>{const l=(h=e,u=a.child(n),new ny(u,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt));var h,u;return this.getDocumentsMatchingCollectionQuery(t,l,i).next(h=>{h.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(t,e,i){let n;return this.remoteDocumentCache.getAllFromCollection(t,e.path,i).next(s=>(n=s,this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId))).next(s=>{s.forEach((a,l)=>{const h=l.getKey();null===n.get(h)&&(n=n.insert(h,fo.newInvalidDocument(h)))});let o=GP();return n.forEach((a,l)=>{const h=s.get(a);void 0!==h&&qP(h.mutation,l,ed.empty(),Wo.now()),GK(e,l)&&(o=o.insert(a,l))}),o})}getBaseDocument(t,e,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(t,e):nt.resolve(fo.newInvalidDocument(e))}}class sBe{constructor(t){this.It=t,this.Zn=new Map,this.ts=new Map}getBundleMetadata(t,e){return nt.resolve(this.Zn.get(e))}saveBundleMetadata(t,e){var i;return this.Zn.set(e.id,{id:(i=e).id,version:i.version,createTime:Ul(i.createTime)}),nt.resolve()}getNamedQuery(t,e){return nt.resolve(this.ts.get(e))}saveNamedQuery(t,e){return this.ts.set(e.name,{name:(i=e).name,query:i$(i.bundledQuery),readTime:Ul(i.readTime)}),nt.resolve();var i}}class oBe{constructor(){this.overlays=new Da(gi.comparator),this.es=new Map}getOverlay(t,e){return nt.resolve(this.overlays.get(e))}getOverlays(t,e){const i=tm();return nt.forEach(e,n=>this.getOverlay(t,n).next(s=>{null!==s&&i.set(n,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((n,s)=>{this.ue(t,e,s)}),nt.resolve()}removeOverlaysForBatchId(t,e,i){const n=this.es.get(i);return void 0!==n&&(n.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),nt.resolve()}getOverlaysForCollection(t,e,i){const n=tm(),s=e.length+1,o=new gi(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!e.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>i&&n.set(l.getKey(),l)}return nt.resolve(n)}getOverlaysForCollectionGroup(t,e,i,n){let s=new Da((h,u)=>h-u);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===e&&h.largestBatchId>i){let u=s.get(h.largestBatchId);null===u&&(u=tm(),s=s.insert(h.largestBatchId,u)),u.set(h.getKey(),h)}}const a=tm(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,u)=>a.set(h,u)),!(a.size()>=n)););return nt.resolve(a)}ue(t,e,i){const n=this.overlays.get(i.key);if(null!==n){const o=this.es.get(n.largestBatchId).delete(i.key);this.es.set(n.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new t$(e,i));let s=this.es.get(e);void 0===s&&(s=ar(),this.es.set(e,s)),this.es.set(e,s.add(i.key))}}class s${constructor(){this.ns=new Ws(ql.ss),this.rs=new Ws(ql.os)}isEmpty(){return this.ns.isEmpty()}addReference(t,e){const i=new ql(t,e);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.cs(new ql(t,e))}hs(t,e){t.forEach(i=>this.removeReference(i,e))}ls(t){const e=new gi(new Xr([])),i=new ql(e,t),n=new ql(e,t+1),s=[];return this.rs.forEachInRange([i,n],o=>{this.cs(o),s.push(o.key)}),s}fs(){this.ns.forEach(t=>this.cs(t))}cs(t){this.ns=this.ns.delete(t),this.rs=this.rs.delete(t)}ds(t){const e=new gi(new Xr([])),i=new ql(e,t),n=new ql(e,t+1);let s=ar();return this.rs.forEachInRange([i,n],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new ql(t,0),i=this.ns.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class ql{constructor(t,e){this.key=t,this._s=e}static ss(t,e){return gi.comparator(t.key,e.key)||Un(t._s,e._s)}static os(t,e){return Un(t._s,e._s)||gi.comparator(t.key,e.key)}}class aBe{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.ws=1,this.gs=new Ws(ql.ss)}checkEmpty(t){return nt.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,i,n){const s=this.ws;this.ws++;const o=new JK(s,e,i,n);this.mutationQueue.push(o);for(const a of n)this.gs=this.gs.add(new ql(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return nt.resolve(o)}lookupMutationBatch(t,e){return nt.resolve(this.ys(e))}getNextMutationBatchAfterBatchId(t,e){const n=this.ps(e+1),s=n<0?0:n;return nt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return nt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(t){return nt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new ql(e,0),n=new ql(e,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,n],o=>{const a=this.ys(o._s);s.push(a)}),nt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ws(Un);return e.forEach(n=>{const s=new ql(n,0),o=new ql(n,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,o],a=>{i=i.add(a._s)})}),nt.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,n=i.length+1;let s=i;gi.isDocumentKey(s)||(s=s.child(""));const o=new ql(new gi(s),0);let a=new Ws(Un);return this.gs.forEachWhile(l=>{const h=l.key.path;return!!i.isPrefixOf(h)&&(h.length===n&&(a=a.add(l._s)),!0)},o),nt.resolve(this.Is(a))}Is(t){const e=[];return t.forEach(i=>{const n=this.ys(i);null!==n&&e.push(n)}),e}removeMutationBatch(t,e){Rn(0===this.Ts(e.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return nt.forEach(e.mutations,n=>{const s=new ql(n.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,n.key)}).next(()=>{this.gs=i})}An(t){}containsKey(t,e){const i=new ql(e,0),n=this.gs.firstAfterOrEqual(i);return nt.resolve(e.isEqual(n&&n.key))}performConsistencyCheck(t){return nt.resolve()}Ts(t,e){return this.ps(t)}ps(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}ys(t){const e=this.ps(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}class lBe{constructor(t){this.Es=t,this.docs=new Da(gi.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,n=this.docs.get(i),s=n?n.size:0,o=this.Es(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return nt.resolve(i?i.document.mutableCopy():fo.newInvalidDocument(e))}getEntries(t,e){let i=ac();return e.forEach(n=>{const s=this.docs.get(n);i=i.insert(n,s?s.document.mutableCopy():fo.newInvalidDocument(n))}),nt.resolve(i)}getAllFromCollection(t,e,i){let n=ac();const s=new gi(e.child("")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!e.isPrefixOf(a.path))break;a.path.length>e.length+1||FK(Rce(l),i)<=0||(n=n.insert(l.key,l.mutableCopy()))}return nt.resolve(n)}getAllFromCollectionGroup(t,e,i,n){Gi()}As(t,e){return nt.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new hBe(this)}getSize(t){return nt.resolve(this.size)}}class hBe extends spe{constructor(t){super(),this.Yn=t}applyChanges(t){const e=[];return this.changes.forEach((i,n)=>{n.isValidDocument()?e.push(this.Yn.addEntry(t,n)):this.Yn.removeEntry(i)}),nt.waitFor(e)}getFromCache(t,e){return this.Yn.getEntry(t,e)}getAllFromCache(t,e){return this.Yn.getEntries(t,e)}}class uBe{constructor(t){this.persistence=t,this.Rs=new $C(e=>mE(e),jP),this.lastRemoteSnapshotVersion=_n.min(),this.highestTargetId=0,this.bs=0,this.Ps=new s$,this.targetCount=0,this.vs=TE.Pn()}forEachTarget(t,e){return this.Rs.forEach((i,n)=>e(n)),nt.resolve()}getLastRemoteSnapshotVersion(t){return nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return nt.resolve(this.bs)}allocateTargetId(t){return this.highestTargetId=this.vs.next(),nt.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.bs&&(this.bs=e),nt.resolve()}Dn(t){this.Rs.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.vs=new TE(e),this.highestTargetId=e),t.sequenceNumber>this.bs&&(this.bs=t.sequenceNumber)}addTargetData(t,e){return this.Dn(e),this.targetCount+=1,nt.resolve()}updateTargetData(t,e){return this.Dn(e),nt.resolve()}removeTargetData(t,e){return this.Rs.delete(e.target),this.Ps.ls(e.targetId),this.targetCount-=1,nt.resolve()}removeTargets(t,e,i){let n=0;const s=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=e&&null===i.get(a.targetId)&&(this.Rs.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),n++)}),nt.waitFor(s).next(()=>n)}getTargetCount(t){return nt.resolve(this.targetCount)}getTargetData(t,e){const i=this.Rs.get(e)||null;return nt.resolve(i)}addMatchingKeys(t,e,i){return this.Ps.us(e,i),nt.resolve()}removeMatchingKeys(t,e,i){this.Ps.hs(e,i);const n=this.persistence.referenceDelegate,s=[];return n&&e.forEach(o=>{s.push(n.markPotentiallyOrphaned(t,o))}),nt.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Ps.ls(e),nt.resolve()}getMatchingKeysForTargetId(t,e){const i=this.Ps.ds(e);return nt.resolve(i)}containsKey(t,e){return nt.resolve(this.Ps.containsKey(e))}}class cpe{constructor(t,e){this.Vs={},this.overlays={},this.Ss=new oc(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new uBe(this),this.indexManager=new YNe,this.remoteDocumentCache=new lBe(i=>this.referenceDelegate.xs(i)),this.It=new jde(e),this.Ns=new sBe(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new oBe,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Vs[t.toKey()];return i||(i=new aBe(e,this.referenceDelegate),this.Vs[t.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(t,e,i){$t("MemoryPersistence","Starting transaction:",t);const n=new cBe(this.Ss.next());return this.referenceDelegate.ks(),i(n).next(s=>this.referenceDelegate.Os(n).next(()=>s)).toPromise().then(s=>(n.raiseOnCommittedEvent(),s))}Ms(t,e){return nt.or(Object.values(this.Vs).map(i=>()=>i.containsKey(t,e)))}}class cBe extends Lce{constructor(t){super(),this.currentSequenceNumber=t}}class Cj{constructor(t){this.persistence=t,this.Fs=new s$,this.$s=null}static Bs(t){return new Cj(t)}get Ls(){if(this.$s)return this.$s;throw Gi()}addReference(t,e,i){return this.Fs.addReference(i,e),this.Ls.delete(i.toString()),nt.resolve()}removeReference(t,e,i){return this.Fs.removeReference(i,e),this.Ls.add(i.toString()),nt.resolve()}markPotentiallyOrphaned(t,e){return this.Ls.add(e.toString()),nt.resolve()}removeTarget(t,e){this.Fs.ls(e.targetId).forEach(n=>this.Ls.add(n.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(n=>{n.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ks(){this.$s=new Set}Os(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nt.forEach(this.Ls,i=>{const n=gi.fromPath(i);return this.Us(t,n).next(s=>{s||e.removeEntry(n,_n.min())})}).next(()=>(this.$s=null,e.apply(t)))}updateLimboDocument(t,e){return this.Us(t,e).next(i=>{i?this.Ls.delete(e.toString()):this.Ls.add(e.toString())})}xs(t){return 0}Us(t,e){return nt.or([()=>nt.resolve(this.Fs.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Ms(t,e)])}}class dBe{constructor(t){this.It=t}$(t,e,i,n){const s=new ej("createOrUpgrade",e);var a;i<1&&n>=1&&(t.createObjectStore("owner"),(a=t).createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nde,{unique:!0}),a.createObjectStore("documentMutations"),dpe(t),function(a){a.createObjectStore("remoteDocuments")}(t));let o=nt.resolve();return i<3&&n>=3&&(0!==i&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(t),dpe(t)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:_n.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(s))),i<4&&n>=4&&(0!==i&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(h=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nde,{unique:!0});const u=l.store("mutations"),d=h.map(m=>u.put(m));return nt.waitFor(d)})}(t,s))),o=o.next(()=>{!function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&n>=5&&(o=o.next(()=>this.qs(s))),i<6&&n>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(t),this.Ks(s)))),i<7&&n>=7&&(o=o.next(()=>this.Gs(s))),i<8&&n>=8&&(o=o.next(()=>this.Qs(t,s))),i<9&&n>=9&&(o=o.next(()=>{!function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&n>=10&&(o=o.next(()=>this.js(s))),i<11&&n>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&n>=12&&(o=o.next(()=>{!function(a){const l=a.createObjectStore("documentOverlays",{keyPath:NNe});l.createIndex("collectionPathOverlayIndex",BNe,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",HNe,{unique:!1})}(t)})),i<13&&n>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:DNe});l.createIndex("documentKeyIndex",INe),l.createIndex("collectionGroupIndex",ANe)}(t)).next(()=>this.Ws(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&n>=14&&(o=o.next(()=>this.zs(t,s))),i<15&&n>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:ONe}).createIndex("sequenceNumberIndex",PNe,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:MNe}).createIndex("documentKeyIndex",FNe,{unique:!1})}(t))),o}Ks(t){let e=0;return t.store("remoteDocuments").Z((i,n)=>{e+=vj(n)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.W().next(n=>nt.forEach(n,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>nt.forEach(a,l=>{Rn(l.userId===s.userId);const h=wE(this.It,l);return epe(t,s.userId,h).next(()=>{})}))}))}Gs(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(n=>{const s=[];return i.Z((o,a)=>{const l=new Xr(o),h=[0,Cu(l)];s.push(e.get(h).next(u=>u?nt.resolve():e.put({targetId:0,path:Cu(l),sequenceNumber:n.highestListenSequenceNumber})))}).next(()=>nt.waitFor(s))})}Qs(t,e){t.createObjectStore("collectionParents",{keyPath:LNe});const i=e.store("collectionParents"),n=new r$,s=o=>{if(n.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Cu(l)})}};return e.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Xr(o);return s(l.popLast())}).next(()=>e.store("documentMutations").Z({X:!0},([o,a,l],h)=>{const u=nm(a);return s(u.popLast())}))}js(t){const e=t.store("targets");return e.Z((i,n)=>{const s=eM(n),o=Wde(this.It,s);return e.put(o)})}Ws(t,e){const i=e.store("remoteDocuments"),n=[];return i.Z((s,o)=>{const a=e.store("remoteDocumentsV14"),l=(h=o,h.document?new gi(Xr.fromString(h.document.name).popFirst(5)):h.noDocument?gi.fromSegments(h.noDocument.path):h.unknownDocument?gi.fromSegments(h.unknownDocument.path):Gi()).path.toArray();var h;const u={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};n.push(a.put(u))}).next(()=>nt.waitFor(n))}zs(t,e){const i=e.store("mutations"),n=ope(this.It),s=new cpe(Cj.Bs,this.It.re);return i.W().next(o=>{const a=new Map;return o.forEach(l=>{var h;let u=null!==(h=a.get(l.userId))&&void 0!==h?h:ar();wE(this.It,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),nt.forEach(a,(l,h)=>{const u=new jl(h),d=fj.oe(this.It,u),m=s.getIndexManager(u),v=yj.oe(u,this.It,m,s.referenceDelegate);return new upe(n,v,d,m).recalculateAndSaveOverlaysForDocumentKeys(new QK(e,oc.at),l).next()})})}}function dpe(r){r.createObjectStore("targetDocuments",{keyPath:RNe}).createIndex("documentTargetsIndex",_Ne,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",kNe,{unique:!0}),r.createObjectStore("targetGlobal")}const o$="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class a${constructor(t,e,i,n,s,o,a,l,h,u,d=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Hs=s,this.window=o,this.document=a,this.Js=h,this.Ys=u,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=m=>Promise.resolve(),!a$.C())throw new Bt(ut.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tBe(this,n),this.ii=e+"main",this.It=new jde(l),this.ri=new Nf(this.ii,this.Xs,new dBe(this.It)),this.Cs=new XNe(this.referenceDelegate,this.It),this.remoteDocumentCache=ope(this.It),this.Ns=new UNe,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===u&&za("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Bt(ut.FAILED_PRECONDITION,o$);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.Cs.getHighestSequenceNumber(t))}).then(t=>{this.Ss=new oc(t,this.Js)}).then(()=>{this.Ds=!0}).catch(t=>(this.ri&&this.ri.close(),Promise.reject(t)))}li(t){var e=this;return this.si=function(){var i=(0,vt.Z)(function*(n){if(e.started)return t(n)});return function(n){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ri.L(function(){var e=(0,vt.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Hs.enqueueAndForget((0,vt.Z)(function*(){e.started&&(yield e.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>wj(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(t).next(e=>{e||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(t)).next(e=>this.isPrimary&&!e?this._i(t).next(()=>!1):!!e&&this.wi(t).next(()=>!0))).catch(t=>{if(jC(t))return $t("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return $t("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Hs.enqueueRetryable(()=>this.si(t)),this.isPrimary=t})}fi(t){return oM(t).get("owner").next(e=>nt.resolve(this.mi(e)))}gi(t){return wj(t).delete(this.clientId)}yi(){var t=this;return(0,vt.Z)(function*(){if(t.isPrimary&&!t.pi(t.ni,18e5)){t.ni=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const n=Wl(i,"clientMetadata");return n.W().next(s=>{const o=t.Ii(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return nt.forEach(a,l=>n.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(t.oi)for(const i of e)t.oi.removeItem(t.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(t){return!!t&&t.ownerId===this.clientId}di(t){return this.Ys?nt.resolve(!0):oM(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)){if(this.mi(e)&&this.networkEnabled)return!0;if(!this.mi(e)){if(!e.allowTabSynchronization)throw new Bt(ut.FAILED_PRECONDITION,o$);return!1}}return!(!this.networkEnabled||!this.inForeground)||wj(t).W().next(i=>void 0===this.Ii(i,5e3).find(n=>{if(this.clientId!==n.clientId){const o=!this.inForeground&&n.inForeground,a=this.networkEnabled===n.networkEnabled;if(!this.networkEnabled&&n.networkEnabled||o&&a)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&$t("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,vt.Z)(function*(){t.Ds=!1,t.Ai(),t.ei&&(t.ei.cancel(),t.ei=null),t.Ri(),t.bi(),yield t.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new QK(e,oc.at);return t._i(i).next(()=>t.gi(i))}),t.ri.close(),t.Pi()})()}Ii(t,e){return t.filter(i=>this.pi(i.updateTimeMs,e)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",t=>wj(t).W().next(e=>this.Ii(e,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(t,e){return yj.oe(t,this.It,e,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new ZNe(t,this.It.re.databaseId)}getDocumentOverlayCache(t){return fj.oe(this.It,t)}getBundleCache(){return this.Ns}runTransaction(t,e,i){$t("IndexedDbPersistence","Starting transaction:",t);const n="readonly"===e?"readonly":"readwrite",s=15===(o=this.Xs)?zNe:14===o?zde:13===o?Vde:12===o?VNe:11===o?Hde:void Gi();var o;let a;return this.ri.runTransaction(t,n,s,l=>(a=new QK(l,this.Ss?this.Ss.next():oc.at),"readwrite-primary"===e?this.fi(a).next(h=>!!h||this.di(a)).next(h=>{if(!h)throw za(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Bt(ut.FAILED_PRECONDITION,_ce);return i(a)}).next(h=>this.wi(a).next(()=>h)):this.Vi(a).next(()=>i(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(t){return oM(t).get("owner").next(e=>{if(null!==e&&this.pi(e.leaseTimestampMs,5e3)&&!this.Ei(e.ownerId)&&!this.mi(e)&&!(this.Ys||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Bt(ut.FAILED_PRECONDITION,o$)})}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oM(t).put("owner",e)}static C(){return Nf.C()}_i(t){const e=oM(t);return e.get("owner").next(i=>this.mi(i)?($t("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):nt.resolve())}pi(t,e){const i=Date.now();return!(t<i-e||t>i&&(za(`Detected an update time that is in the future: ${t} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,J.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(t){var e;try{const i=null!==(null===(e=this.oi)||void 0===e?void 0:e.getItem(this.Ti(t)));return $t("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return za("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(t){za("Failed to set zombie client id.",t)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function oM(r){return Wl(r,"owner")}function wj(r){return Wl(r,"clientMetadata")}function l$(r,t){let e=r.projectId;return r.isDefaultDatabase||(e+="."+r.database),"firestore/"+t+"/"+e+"/"}class h${constructor(t,e,i,n){this.targetId=t,this.fromCache=e,this.Si=i,this.Di=n}static Ci(t,e){let i=ar(),n=ar();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:n=n.add(s.doc.key)}return new h$(t,e.fromCache,i,n)}}class ppe{constructor(){this.xi=!1}initialize(t,e){this.Ni=t,this.indexManager=e,this.xi=!0}getDocumentsMatchingQuery(t,e,i,n){return this.ki(t,e).next(s=>s||this.Oi(t,e,n,i)).next(s=>s||this.Mi(t,e))}ki(t,e){if(Jce(e))return nt.resolve(null);let i=bu(e);return this.indexManager.getIndexType(t,i).next(n=>0===n?null:(null!==e.limit&&1===n&&(e=oj(e,null,"F"),i=bu(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{const o=ar(...s);return this.Ni.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(l=>{const h=this.Fi(e,a);return this.$i(e,h,o,l.readTime)?this.ki(t,oj(e,null,"F")):this.Bi(t,h,e,l)}))})))}Oi(t,e,i,n){return Jce(e)||n.isEqual(_n.min())?this.Mi(t,e):this.Ni.getDocuments(t,i).next(s=>{const o=this.Fi(e,s);return this.$i(e,o,i,n)?this.Mi(t,e):(OK()<=_f.in.DEBUG&&$t("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qK(e)),this.Bi(t,o,e,kce(n,-1)))})}Fi(t,e){let i=new Ws(ide(t));return e.forEach((n,s)=>{GK(t,s)&&(i=i.add(s))}),i}$i(t,e,i,n){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(n)>0)}Mi(t,e){return OK()<=_f.in.DEBUG&&$t("QueryEngine","Using full collection scan to execute query:",qK(e)),this.Ni.getDocumentsMatchingQuery(t,e,Jc.min())}Bi(t,e,i,n){return this.Ni.getDocumentsMatchingQuery(t,i,n).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}class pBe{constructor(t,e,i,n){this.persistence=t,this.Li=e,this.It=n,this.Ui=new Da(Un),this.qi=new $C(s=>mE(s),jP),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(i)}Qi(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new upe(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.Ui))}}function fpe(r,t,e,i){return new pBe(r,t,e,i)}function gpe(r,t){return u$.apply(this,arguments)}function u$(){return u$=(0,vt.Z)(function*(r,t){const e=Ci(r);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let n;return e.mutationQueue.getAllMutationBatches(i).next(s=>(n=s,e.Qi(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=ar();for(const h of n){o.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}for(const h of s){a.push(h.batchId);for(const u of h.mutations)l=l.add(u.key)}return e.localDocuments.getDocuments(i,l).next(h=>({ji:h,removedBatchIds:o,addedBatchIds:a}))})})}),u$.apply(this,arguments)}function fBe(r,t){const e=Ci(r);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const n=t.batch.keys(),s=e.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,h){const u=l.batch,d=u.keys();let m=nt.resolve();return d.forEach(v=>{m=m.next(()=>h.getEntry(a,v)).next(C=>{const S=l.docVersions.get(v);Rn(null!==S),C.version.compareTo(S)<0&&(u.applyToRemoteDocument(C,l),C.isValidDocument()&&(C.setReadTime(l.commitVersion),h.addEntry(C)))})}),m.next(()=>o.mutationQueue.removeMutationBatch(a,u))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,n,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(o){let a=ar();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(t))).next(()=>e.localDocuments.getDocuments(i,n))})}function mpe(r){const t=Ci(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Cs.getLastRemoteSnapshotVersion(e))}function gBe(r,t){const e=Ci(r),i=t.snapshotVersion;let n=e.Ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.Gi.newChangeBuffer({trackRemovals:!0});n=e.Ui;const a=[];t.targetChanges.forEach((u,d)=>{const m=n.get(d);if(!m)return;a.push(e.Cs.removeMatchingKeys(s,u.removedDocuments,d).next(()=>e.Cs.addMatchingKeys(s,u.addedDocuments,d)));let v=m.withSequenceNumber(s.currentSequenceNumber);var C,S,A;t.targetMismatches.has(d)?v=v.withResumeToken(Sl.EMPTY_BYTE_STRING,_n.min()).withLastLimboFreeSnapshotVersion(_n.min()):u.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(u.resumeToken,i)),n=n.insert(d,v),S=v,A=u,(0===(C=m).resumeToken.approximateByteSize()||S.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=3e8||A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0)&&a.push(e.Cs.updateTargetData(s,v))});let l=ac(),h=ar();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(vpe(s,o,t.documentUpdates).next(u=>{l=u.Wi,h=u.zi})),!i.isEqual(_n.min())){const u=e.Cs.getLastRemoteSnapshotVersion(s).next(d=>e.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return nt.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(e.Ui=n,s))}function vpe(r,t,e){let i=ar(),n=ar();return e.forEach(s=>i=i.add(s)),t.getEntries(r,i).next(s=>{let o=ac();return e.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(n=n.add(a)),l.isNoDocument()&&l.version.isEqual(_n.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||0===l.version.compareTo(h.version)&&h.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):$t("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Wi:o,zi:n}})}function mBe(r,t){const e=Ci(r);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function xI(r,t){const e=Ci(r);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let n;return e.Cs.getTargetData(i,t).next(s=>s?(n=s,nt.resolve(n)):e.Cs.allocateTargetId(i).next(o=>(n=new YC(t,o,0,i.currentSequenceNumber),e.Cs.addTargetData(i,n).next(()=>n))))}).then(i=>{const n=e.Ui.get(i.targetId);return(null===n||i.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.Ui=e.Ui.insert(i.targetId,i),e.qi.set(t,i.targetId)),i})}function TI(r,t,e){return c$.apply(this,arguments)}function c$(){return c$=(0,vt.Z)(function*(r,t,e){const i=Ci(r),n=i.Ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,n)))}catch(o){if(!jC(o))throw o;$t("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.Ui=i.Ui.remove(t),i.qi.delete(n.target)}),c$.apply(this,arguments)}function Sj(r,t,e){const i=Ci(r);let n=_n.min(),s=ar();return i.persistence.runTransaction("Execute query","readonly",o=>function(a,l,h){const u=Ci(a),d=u.qi.get(h);return void 0!==d?nt.resolve(u.Ui.get(d)):u.Cs.getTargetData(l,h)}(i,o,bu(t)).next(a=>{if(a)return n=a.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Li.getDocumentsMatchingQuery(o,t,e?n:_n.min(),e?s:ar())).next(a=>(Cpe(i,tde(t),a),{documents:a,Hi:s})))}function ype(r,t){const e=Ci(r),i=Ci(e.Cs),n=e.Ui.get(t);return n?Promise.resolve(n.target):e.persistence.runTransaction("Get target data","readonly",s=>i.se(s,t).next(o=>o?o.target:null))}function bpe(r,t){const e=Ci(r),i=e.Ki.get(t)||_n.min();return e.persistence.runTransaction("Get new document changes","readonly",n=>e.Gi.getAllFromCollectionGroup(n,t,kce(i,-1),Number.MAX_SAFE_INTEGER)).then(n=>(Cpe(e,t,n),n))}function Cpe(r,t,e){let i=r.Ki.get(t)||_n.min();e.forEach((n,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),r.Ki.set(t,i)}function d$(){return d$=(0,vt.Z)(function*(r,t,e,i){const n=Ci(r);let s=ar(),o=ac();for(const h of e){const u=t.Ji(h.metadata.name);h.document&&(s=s.add(u));const d=t.Yi(h);d.setReadTime(t.Xi(h.metadata.readTime)),o=o.insert(u,d)}const a=n.Gi.newChangeBuffer({trackRemovals:!0}),l=yield xI(n,(h=i,bu(fI(Xr.fromString(`__bundle__/docs/${h}`)))));var h;return n.persistence.runTransaction("Apply bundle documents","readwrite",h=>vpe(h,a,o).next(u=>(a.apply(h),u)).next(u=>n.Cs.removeMatchingKeysForTargetId(h,l.targetId).next(()=>n.Cs.addMatchingKeys(h,s,l.targetId)).next(()=>n.localDocuments.getLocalViewOfDocuments(h,u.Wi,u.zi)).next(()=>u.Wi)))}),d$.apply(this,arguments)}function yBe(r,t){return p$.apply(this,arguments)}function p$(){return p$=(0,vt.Z)(function*(r,t,e=ar()){const i=yield xI(r,bu(i$(t.bundledQuery))),n=Ci(r);return n.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ul(t.readTime);if(i.snapshotVersion.compareTo(o)>=0)return n.Ns.saveNamedQuery(s,t);const a=i.withResumeToken(Sl.EMPTY_BYTE_STRING,o);return n.Ui=n.Ui.insert(a.targetId,a),n.Cs.updateTargetData(s,a).next(()=>n.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>n.Cs.addMatchingKeys(s,e,i.targetId)).next(()=>n.Ns.saveNamedQuery(s,t))})}),p$.apply(this,arguments)}function wpe(r,t){return`firestore_clients_${r}_${t}`}function Spe(r,t,e){let i=`firestore_mutations_${r}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function f$(r,t){return`firestore_targets_${r}_${t}`}class Ej{constructor(t,e,i,n){this.user=t,this.batchId=e,this.state=i,this.error=n}static Zi(t,e,i){const n=JSON.parse(i);let s,o="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return o&&n.error&&(o="string"==typeof n.error.message&&"string"==typeof n.error.code,o&&(s=new Bt(n.error.code,n.error.message))),o?new Ej(t,e,n.state,s):(za("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class aM{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static Zi(t,e){const i=JSON.parse(e);let n,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(n=new Bt(i.error.code,i.error.message))),s?new aM(t,i.state,n):(za("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}tr(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class xj{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Zi(t,e){const i=JSON.parse(e);let n="object"==typeof i&&i.activeTargetIds instanceof Array,s=uj();for(let o=0;n&&o<i.activeTargetIds.length;++o)n=Bce(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return n?new xj(t,s):(za("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class g${constructor(t,e){this.clientId=t,this.onlineState=e}static Zi(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new g$(e.clientId,e.onlineState):(za("SharedClientState",`Failed to parse online state: ${t}`),null)}}class m${constructor(){this.activeTargetIds=uj()}er(t){this.activeTargetIds=this.activeTargetIds.add(t)}nr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}tr(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class v${constructor(t,e,i,n,s){this.window=t,this.Hs=e,this.persistenceKey=i,this.sr=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Da(Un),this.started=!1,this.cr=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=wpe(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new m$),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,vt.Z)(function*(){const e=yield t.syncEngine.vi();for(const n of e){if(n===t.sr)continue;const s=t.getItem(wpe(t.persistenceKey,n));if(s){const o=xj.Zi(n,s);o&&(t.ur=t.ur.insert(o.clientId,o))}}t.gr();const i=t.storage.getItem(t.wr);if(i){const n=t.yr(i);n&&t.pr(n)}for(const n of t.cr)t.rr(n);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.hr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(t){let e=!1;return this.ur.forEach((i,n)=>{n.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Tr(t,"pending")}updateMutationState(t,e,i){this.Tr(t,e,i),this.Er(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(f$(this.persistenceKey,t));if(i){const n=aM.Zi(t,i);n&&(e=n.state)}}return this.Ar.er(t),this.gr(),e}removeLocalQueryTarget(t){this.Ar.nr(t),this.gr()}isLocalQueryTarget(t){return this.Ar.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(f$(this.persistenceKey,t))}updateQueryState(t,e,i){this.Rr(t,e,i)}handleUserChange(t,e,i){e.forEach(n=>{this.Er(n)}),this.currentUser=t,i.forEach(n=>{this.addPendingMutation(n)})}setOnlineState(t){this.br(t)}notifyBundleLoaded(t){this.Pr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return $t("SharedClientState","READ",t,e),e}setItem(t,e){$t("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){$t("SharedClientState","REMOVE",t),this.storage.removeItem(t)}rr(t){var e=this;const i=t;if(i.storageArea===this.storage){if($t("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void za("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,vt.Z)(function*(){if(e.started){if(null!==i.key)if(e.lr.test(i.key)){if(null==i.newValue){const n=e.vr(i.key);return e.Vr(n,null)}{const n=e.Sr(i.key,i.newValue);if(n)return e.Vr(n.clientId,n)}}else if(e.dr.test(i.key)){if(null!==i.newValue){const n=e.Dr(i.key,i.newValue);if(n)return e.Cr(n)}}else if(e._r.test(i.key)){if(null!==i.newValue){const n=e.Nr(i.key,i.newValue);if(n)return e.kr(n)}}else if(i.key===e.wr){if(null!==i.newValue){const n=e.yr(i.newValue);if(n)return e.pr(n)}}else if(i.key===e.hr){const n=function(s){let o=oc.at;if(null!=s)try{const a=JSON.parse(s);Rn("number"==typeof a),o=a}catch(a){za("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(i.newValue);n!==oc.at&&e.sequenceNumberHandler(n)}else if(i.key===e.mr){const n=e.Or(i.newValue);yield Promise.all(n.map(s=>e.syncEngine.Mr(s)))}}else e.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(t,e,i){const n=new Ej(this.currentUser,t,e,i),s=Spe(this.persistenceKey,this.currentUser,t);this.setItem(s,n.tr())}Er(t){const e=Spe(this.persistenceKey,this.currentUser,t);this.removeItem(e)}br(t){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:t}))}Rr(t,e,i){const n=f$(this.persistenceKey,t),s=new aM(t,e,i);this.setItem(n,s.tr())}Pr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.mr,e)}vr(t){const e=this.lr.exec(t);return e?e[1]:null}Sr(t,e){const i=this.vr(t);return xj.Zi(i,e)}Dr(t,e){const i=this.dr.exec(t),n=Number(i[1]);return Ej.Zi(new jl(void 0!==i[2]?i[2]:null),n,e)}Nr(t,e){const i=this._r.exec(t),n=Number(i[1]);return aM.Zi(n,e)}yr(t){return g$.Zi(t)}Or(t){return JSON.parse(t)}Cr(t){var e=this;return(0,vt.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.Fr(t.batchId,t.state,t.error);$t("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}kr(t){return this.syncEngine.$r(t.targetId,t.state,t.error)}Vr(t,e){const i=e?this.ur.insert(t,e):this.ur.remove(t),n=this.Ir(this.ur),s=this.Ir(i),o=[],a=[];return s.forEach(l=>{n.has(l)||o.push(l)}),n.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=i})}pr(t){this.ur.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ir(t){let e=uj();return t.forEach((i,n)=>{e=e.unionWith(n.activeTargetIds)}),e}}class Epe{constructor(){this.Lr=new m$,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Lr.er(t),this.Ur[t]||"not-current"}updateQueryState(t,e,i){this.Ur[t]=e}removeLocalQueryTarget(t){this.Lr.nr(t)}isLocalQueryTarget(t){return this.Lr.activeTargetIds.has(t)}clearQueryState(t){delete this.Ur[t]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(t){return this.Lr.activeTargetIds.has(t)}start(){return this.Lr=new m$,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class bBe{qr(t){}shutdown(){}}class xpe{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(t){this.Wr.push(t)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){$t("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Wr)t(0)}jr(){$t("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Wr)t(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const CBe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wBe{constructor(t){this.Hr=t.Hr,this.Jr=t.Jr}Yr(t){this.Xr=t}Zr(t){this.eo=t}onMessage(t){this.no=t}close(){this.Jr()}send(t){this.Hr(t)}so(){this.Xr()}io(t){this.eo(t)}ro(t){this.no(t)}}class SBe extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.oo=(t.ssl?"https":"http")+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(t,e,i,n,s){const o=this.ho(t,e);$t("RestConnection","Sending: ",o,i);const a={};return this.lo(a,n,s),this.fo(t,o,a,i).then(l=>($t("RestConnection","Received: ",l),l),l=>{throw hE("RestConnection",`${t} failed with error: `,l,"url: ",o,"request:",i),l})}_o(t,e,i,n,s,o){return this.ao(t,e,i,n,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+hI,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((n,s)=>t[s]=n),i&&i.headers.forEach((n,s)=>t[s]=n)}ho(t,e){return`${this.oo}/v1/${e}:${CBe[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,n){return new Promise((s,o)=>{const a=new CFe;a.setWithCredentials(!0),a.listenOnce(vFe.COMPLETE,()=>{var h;try{switch(a.getLastErrorCode()){case LK.NO_ERROR:const u=a.getResponseJson();$t("Connection","XHR received:",JSON.stringify(u)),s(u);break;case LK.TIMEOUT:$t("Connection",'RPC "'+t+'" timed out'),o(new Bt(ut.DEADLINE_EXCEEDED,"Request time out"));break;case LK.HTTP_ERROR:const d=a.getStatus();if($t("Connection",'RPC "'+t+'" failed with status:',d,"response text:",a.getResponseText()),d>0){let m=a.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=null===(h=m)||void 0===h?void 0:h.error;if(v&&v.status&&v.message){const C=function(S){const A=S.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(A)>=0?A:ut.UNKNOWN}(v.status);o(new Bt(C,v.message))}else o(new Bt(ut.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Bt(ut.UNAVAILABLE,"Connection failed."));break;default:Gi()}}finally{$t("Connection",'RPC "'+t+'" completed.')}});const l=JSON.stringify(n);a.send(e,"POST",l,i,15)})}wo(t,e,i){const n=[this.oo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=gFe(),o=mFe(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new bFe({})),this.lo(a.initMessageHeaders,e,i),a.encodeInitMessageHeaders=!0;const l=n.join("");$t("Connection","Creating WebChannel: "+l,a);const h=s.createWebChannel(l,a);let u=!1,d=!1;const m=new wBe({Hr:C=>{d?$t("Connection","Not sending because WebChannel is closed:",C):(u||($t("Connection","Opening WebChannel transport."),h.open(),u=!0),$t("Connection","WebChannel sending:",C),h.send(C))},Jr:()=>h.close()}),v=(C,S,A)=>{C.listen(S,_=>{try{A(_)}catch(M){setTimeout(()=>{throw M},0)}})};return v(h,Xz.EventType.OPEN,()=>{d||$t("Connection","WebChannel transport opened.")}),v(h,Xz.EventType.CLOSE,()=>{d||(d=!0,$t("Connection","WebChannel transport closed"),m.io())}),v(h,Xz.EventType.ERROR,C=>{d||(d=!0,hE("Connection","WebChannel transport errored:",C),m.io(new Bt(ut.UNAVAILABLE,"The operation could not be completed")))}),v(h,Xz.EventType.MESSAGE,C=>{var S;if(!d){const A=C.data[0];Rn(!!A);const _=A,M=_.error||(null===(S=_[0])||void 0===S?void 0:S.error);if(M){$t("Connection","WebChannel received error:",M);const P=M.status;let B=function(G){const ne=ol[G];if(void 0!==ne)return vde(ne)}(P),j=M.message;void 0===B&&(B=ut.INTERNAL,j="Unknown error status: "+P+" with message "+M.message),d=!0,m.io(new Bt(B,j)),h.close()}else $t("Connection","WebChannel received:",A),m.ro(A)}}),v(o,yFe.STAT_EVENT,C=>{C.stat===Ece.PROXY?$t("Connection","Detected buffering proxy"):C.stat===Ece.NOPROXY&&$t("Connection","Detected no buffering proxy")}),setTimeout(()=>{m.so()},0),m}}function Tpe(){return typeof window<"u"?window:null}function Tj(){return typeof document<"u"?document:null}function lM(r){return new pNe(r,!0)}class y${constructor(t,e,i=1e3,n=1.5,s=6e4){this.Hs=t,this.timerId=e,this.mo=i,this.yo=n,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),n=Math.max(0,e-i);n>0&&$t("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,n,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Dpe{constructor(t,e,i,n,s,o,a,l){this.Hs=t,this.vo=i,this.Vo=n,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new y$(t,e)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,vt.Z)(function*(){t.No()&&(yield t.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(t){this.Lo(),this.stream.send(t)}$o(){var t=this;return(0,vt.Z)(function*(){if(t.ko())return t.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(t,e){var i=this;return(0,vt.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==t?i.xo.reset():e&&e.code===ut.RESOURCE_EXHAUSTED?(za(e.toString()),za("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):e&&e.code===ut.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.Zr(e)})()}qo(){}auth(){this.state=1;const t=this.Ko(this.So),e=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,n])=>{this.So===e&&this.Go(i,n)},i=>{t(()=>{const n=new Bt(ut.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(n)})})}Go(t,e){const i=this.Ko(this.So);this.stream=this.jo(t,e),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(n=>{i(()=>this.Qo(n))}),this.stream.onMessage(n=>{i(()=>this.onMessage(n))})}Oo(){var t=this;this.state=5,this.xo.Ro((0,vt.Z)(function*(){t.state=0,t.start()}))}Qo(t){return $t("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Ko(t){return e=>{this.Hs.enqueueAndForget(()=>this.So===t?e():($t("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EBe extends Dpe{constructor(t,e,i,n,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,n,o),this.It=s}jo(t,e){return this.connection.wo("Listen",t,e)}onMessage(t){this.xo.reset();const e=function mNe(r,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(l=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===l?1:"REMOVE"===l?2:"CURRENT"===l?3:"RESET"===l?4:Gi(),n=t.targetChange.targetIds||[],s=function(l,h){return l.gt?(Rn(void 0===h||"string"==typeof h),Sl.fromBase64String(h||"")):(Rn(void 0===h||h instanceof Uint8Array),Sl.fromUint8Array(h||new Uint8Array))}(r,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const h=void 0===l.code?ut.UNKNOWN:vde(l.code);return new Bt(h,l.message||"")}(o);e=new Sde(i,n,s,a||null)}else if("documentChange"in t){const i=t.documentChange,n=im(r,i.document.name),s=Ul(i.document.updateTime),o=new Ch({mapValue:{fields:i.document.fields}}),a=fo.newFoundDocument(n,s,o);e=new cj(i.targetIds||[],i.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const i=t.documentDelete,n=im(r,i.document),s=i.readTime?Ul(i.readTime):_n.min(),o=fo.newNoDocument(n,s);e=new cj([],i.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const i=t.documentRemove,n=im(r,i.document);e=new cj([],i.removedTargetIds||[],n,null)}else{if(!("filter"in t))return Gi();{const i=t.filter,s=new sNe(i.count||0);e=new wde(i.targetId,s)}}var l;return e}(this.It,t),i=function(n){if(!("targetChange"in n))return _n.min();const s=n.targetChange;return s.targetIds&&s.targetIds.length?_n.min():s.readTime?Ul(s.readTime):_n.min()}(t);return this.listener.Wo(e,i)}zo(t){const e={};e.database=QP(this.It),e.addTarget=function(n,s){let o;const a=s.target;return o=rj(a)?{documents:Lde(n,a)}:{query:XK(n,a)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=Dde(n,s.resumeToken):s.snapshotVersion.compareTo(_n.min())>0&&(o.readTime=ZP(n,s.snapshotVersion.toTimestamp())),o}(this.It,t);const i=function yNe(r,t){const e=function(i,n){switch(n){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Gi()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Bo(e)}Ho(t){const e={};e.database=QP(this.It),e.removeTarget=t,this.Bo(e)}}class xBe extends Dpe{constructor(t,e,i,n,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,n,o),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(t,e){return this.connection.wo("Write",t,e)}onMessage(t){if(Rn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Jo){this.xo.reset();const e=function vNe(r,t){return r&&r.length>0?(Rn(void 0!==t),r.map(e=>function(i,n){let s=Ul(i.updateTime?i.updateTime:n);return s.isEqual(_n.min())&&(s=Ul(n)),new iNe(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Ul(t.commitTime);return this.listener.Zo(i,e)}return Rn(!t.writeResults||0===t.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const t={};t.database=QP(this.It),this.Bo(t)}Xo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>JP(this.It,i))};this.Bo(e)}}class TBe extends class{}{constructor(t,e,i,n){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.It=n,this.nu=!1}su(){if(this.nu)throw new Bt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}ao(t,e,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.ao(t,e,i,n,s)).catch(n=>{throw"FirebaseError"===n.name?(n.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),n):new Bt(ut.UNKNOWN,n.toString())})}_o(t,e,i,n){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection._o(t,e,i,s,o,n)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Bt(ut.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class IBe{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(t){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.lu(),this.iu=0,"Online"===t&&(this.ou=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}au(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(za(e),this.ou=!1):$t("OnlineStateTracker",e)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class ABe{constructor(t,e,i,n,s){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(a=>{i.enqueueAndForget((0,vt.Z)(function*(){var l;sy(o)&&($t("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,vt.Z)(function*(h){const u=Ci(h);u._u.add(4),yield DI(u),u.gu.set("Unknown"),u._u.delete(4),yield hM(u)}),function(h){return l.apply(this,arguments)})(o))}))}),this.gu=new IBe(i,n)}}function hM(r){return C$.apply(this,arguments)}function C$(){return C$=(0,vt.Z)(function*(r){if(sy(r))for(const t of r.wu)yield t(!0)}),C$.apply(this,arguments)}function DI(r){return w$.apply(this,arguments)}function w$(){return w$=(0,vt.Z)(function*(r){for(const t of r.wu)yield t(!1)}),w$.apply(this,arguments)}function Dj(r,t){const e=Ci(r);e.du.has(t.targetId)||(e.du.set(t.targetId,t),x$(e)?E$(e):AI(e).ko()&&S$(e,t))}function uM(r,t){const e=Ci(r),i=AI(e);e.du.delete(t),i.ko()&&Ipe(e,t),0===e.du.size&&(i.ko()?i.Fo():sy(e)&&e.gu.set("Unknown"))}function S$(r,t){r.yu.Mt(t.targetId),AI(r).zo(t)}function Ipe(r,t){r.yu.Mt(t),AI(r).Ho(t)}function E$(r){r.yu=new uNe({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),se:t=>r.du.get(t)||null}),AI(r).start(),r.gu.uu()}function x$(r){return sy(r)&&!AI(r).No()&&r.du.size>0}function sy(r){return 0===Ci(r)._u.size}function Ape(r){r.yu=void 0}function kBe(r){return T$.apply(this,arguments)}function T$(){return T$=(0,vt.Z)(function*(r){r.du.forEach((t,e)=>{S$(r,t)})}),T$.apply(this,arguments)}function RBe(r,t){return D$.apply(this,arguments)}function D$(){return D$=(0,vt.Z)(function*(r,t){Ape(r),x$(r)?(r.gu.hu(t),E$(r)):r.gu.set("Unknown")}),D$.apply(this,arguments)}function _Be(r,t,e){return I$.apply(this,arguments)}function I$(){return I$=(0,vt.Z)(function*(r,t,e){if(r.gu.set("Online"),t instanceof Sde&&2===t.state&&t.cause)try{yield(i=(0,vt.Z)(function*(n,s){const o=s.cause;for(const a of s.targetIds)n.du.has(a)&&(yield n.remoteSyncer.rejectListen(a,o),n.du.delete(a),n.yu.removeTarget(a))}),function(n,s){return i.apply(this,arguments)})(r,t)}catch(i){$t("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Ij(r,i)}else if(t instanceof cj?r.yu.Gt(t):t instanceof wde?r.yu.Yt(t):r.yu.Wt(t),!e.isEqual(_n.min()))try{const i=yield mpe(r.localStore);e.compareTo(i)>=0&&(yield function(n,s){const o=n.yu.te(s);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const h=n.du.get(l);h&&n.du.set(l,h.withResumeToken(a.resumeToken,s))}}),o.targetMismatches.forEach(a=>{const l=n.du.get(a);if(!l)return;n.du.set(a,l.withResumeToken(Sl.EMPTY_BYTE_STRING,l.snapshotVersion)),Ipe(n,a);const h=new YC(l.target,a,1,l.sequenceNumber);S$(n,h)}),n.remoteSyncer.applyRemoteEvent(o)}(r,e))}catch(i){$t("RemoteStore","Failed to raise snapshot:",i),yield Ij(r,i)}var i}),I$.apply(this,arguments)}function Ij(r,t,e){return A$.apply(this,arguments)}function A$(){return A$=(0,vt.Z)(function*(r,t,e){if(!jC(t))throw t;r._u.add(1),yield DI(r),r.gu.set("Offline"),e||(e=()=>mpe(r.localStore)),r.asyncQueue.enqueueRetryable((0,vt.Z)(function*(){$t("RemoteStore","Retrying IndexedDB access"),yield e(),r._u.delete(1),yield hM(r)}))}),A$.apply(this,arguments)}function kpe(r,t){return t().catch(e=>Ij(r,e,t))}function II(r){return k$.apply(this,arguments)}function k$(){return k$=(0,vt.Z)(function*(r){const t=Ci(r),e=QC(t);let i=t.fu.length>0?t.fu[t.fu.length-1].batchId:-1;for(;LBe(t);)try{const n=yield mBe(t.localStore,i);if(null===n){0===t.fu.length&&e.Fo();break}i=n.batchId,OBe(t,n)}catch(n){yield Ij(t,n)}Rpe(t)&&_pe(t)}),k$.apply(this,arguments)}function LBe(r){return sy(r)&&r.fu.length<10}function OBe(r,t){r.fu.push(t);const e=QC(r);e.ko()&&e.Yo&&e.Xo(t.mutations)}function Rpe(r){return sy(r)&&!QC(r).No()&&r.fu.length>0}function _pe(r){QC(r).start()}function PBe(r){return R$.apply(this,arguments)}function R$(){return R$=(0,vt.Z)(function*(r){QC(r).eu()}),R$.apply(this,arguments)}function MBe(r){return _$.apply(this,arguments)}function _$(){return _$=(0,vt.Z)(function*(r){const t=QC(r);for(const e of r.fu)t.Xo(e.mutations)}),_$.apply(this,arguments)}function FBe(r,t,e){return L$.apply(this,arguments)}function L$(){return L$=(0,vt.Z)(function*(r,t,e){const i=r.fu.shift(),n=e$.from(i,t,e);yield kpe(r,()=>r.remoteSyncer.applySuccessfulWrite(n)),yield II(r)}),L$.apply(this,arguments)}function NBe(r,t){return O$.apply(this,arguments)}function O$(){return O$=(0,vt.Z)(function*(r,t){var e;t&&QC(r).Yo&&(yield(e=(0,vt.Z)(function*(i,n){if(mde(s=n.code)&&s!==ut.ABORTED){const o=i.fu.shift();QC(i).Mo(),yield kpe(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,n)),yield II(i)}var s}),function(i,n){return e.apply(this,arguments)})(r,t)),Rpe(r)&&_pe(r)}),O$.apply(this,arguments)}function Lpe(r,t){return P$.apply(this,arguments)}function P$(){return P$=(0,vt.Z)(function*(r,t){const e=Ci(r);e.asyncQueue.verifyOperationInProgress(),$t("RemoteStore","RemoteStore received new credentials");const i=sy(e);e._u.add(3),yield DI(e),i&&e.gu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e._u.delete(3),yield hM(e)}),P$.apply(this,arguments)}function M$(r,t){return F$.apply(this,arguments)}function F$(){return F$=(0,vt.Z)(function*(r,t){const e=Ci(r);t?(e._u.delete(2),yield hM(e)):t||(e._u.add(2),yield DI(e),e.gu.set("Unknown"))}),F$.apply(this,arguments)}function AI(r){return r.pu||(r.pu=function(t,e,i){const n=Ci(t);return n.su(),new EBe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.It,i)}(r.datastore,r.asyncQueue,{Yr:kBe.bind(null,r),Zr:RBe.bind(null,r),Wo:_Be.bind(null,r)}),r.wu.push(function(){var t=(0,vt.Z)(function*(e){e?(r.pu.Mo(),x$(r)?E$(r):r.gu.set("Unknown")):(yield r.pu.stop(),Ape(r))});return function(e){return t.apply(this,arguments)}}())),r.pu}function QC(r){return r.Iu||(r.Iu=function(t,e,i){const n=Ci(t);return n.su(),new xBe(e,n.connection,n.authCredentials,n.appCheckCredentials,n.It,i)}(r.datastore,r.asyncQueue,{Yr:PBe.bind(null,r),Zr:NBe.bind(null,r),tu:MBe.bind(null,r),Zo:FBe.bind(null,r)}),r.wu.push(function(){var t=(0,vt.Z)(function*(e){e?(r.Iu.Mo(),yield II(r)):(yield r.Iu.stop(),r.fu.length>0&&($t("RemoteStore",`Stopping write stream with ${r.fu.length} pending writes`),r.fu=[]))});return function(e){return t.apply(this,arguments)}}())),r.Iu}class N${constructor(t,e,i,n,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=n,this.removalCallback=s,this.deferred=new wl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(t,e,i,n,s){const o=Date.now()+i,a=new N$(t,e,o,n,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bt(ut.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kI(r,t){if(za("AsyncQueue",`${t}: ${r}`),jC(r))return new Bt(ut.UNAVAILABLE,`${t}: ${r}`);throw r}class RI{constructor(t){this.comparator=t?(e,i)=>t(e,i)||gi.comparator(e.key,i.key):(e,i)=>gi.comparator(e.key,i.key),this.keyedMap=GP(),this.sortedSet=new Da(this.comparator)}static emptySet(t){return new RI(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof RI)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const n=e.getNext().key,s=i.getNext().key;if(!n.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new RI;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class Ope{constructor(){this.Tu=new Da(gi.comparator)}track(t){const e=t.doc.key,i=this.Tu.get(e);i?0!==t.type&&3===i.type?this.Tu=this.Tu.insert(e,t):3===t.type&&1!==i.type?this.Tu=this.Tu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Tu=this.Tu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Tu=this.Tu.remove(e):1===t.type&&2===i.type?this.Tu=this.Tu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Tu=this.Tu.insert(e,{type:2,doc:t.doc}):Gi():this.Tu=this.Tu.insert(e,t)}Eu(){const t=[];return this.Tu.inorderTraversal((e,i)=>{t.push(i)}),t}}class _I{constructor(t,e,i,n,s,o,a,l,h){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=n,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(t,e,i,n,s){const o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new _I(t,e,RI.emptySet(e),o,i,n,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&UP(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let n=0;n<e.length;n++)if(e[n].type!==i[n].type||!e[n].doc.isEqual(i[n].doc))return!1;return!0}}class BBe{constructor(){this.Au=void 0,this.listeners=[]}}class HBe{constructor(){this.queries=new $C(t=>ede(t),UP),this.onlineState="Unknown",this.Ru=new Set}}function B$(r,t){return H$.apply(this,arguments)}function H$(){return H$=(0,vt.Z)(function*(r,t){const e=Ci(r),i=t.query;let n=!1,s=e.queries.get(i);if(s||(n=!0,s=new BBe),n)try{s.Au=yield e.onListen(i)}catch(o){const a=kI(o,`Initialization of query '${qK(t.query)}' failed`);return void t.onError(a)}e.queries.set(i,s),s.listeners.push(t),t.bu(e.onlineState),s.Au&&t.Pu(s.Au)&&j$(e)}),H$.apply(this,arguments)}function V$(r,t){return z$.apply(this,arguments)}function z$(){return z$=(0,vt.Z)(function*(r,t){const e=Ci(r),i=t.query;let n=!1;const s=e.queries.get(i);if(s){const o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),n=0===s.listeners.length)}if(n)return e.queries.delete(i),e.onUnlisten(i)}),z$.apply(this,arguments)}function VBe(r,t){const e=Ci(r);let i=!1;for(const n of t){const o=e.queries.get(n.query);if(o){for(const a of o.listeners)a.Pu(n)&&(i=!0);o.Au=n}}i&&j$(e)}function zBe(r,t,e){const i=Ci(r),n=i.queries.get(t);if(n)for(const s of n.listeners)s.onError(e);i.queries.delete(t)}function j$(r){r.Ru.forEach(t=>{t.next()})}class U${constructor(t,e,i){this.query=t,this.vu=e,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(t){if(!this.options.includeMetadataChanges){const i=[];for(const n of t.docChanges)3!==n.type&&i.push(n);t=new _I(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Vu?this.Du(t)&&(this.vu.next(t),e=!0):this.Cu(t,this.onlineState)&&(this.xu(t),e=!0),this.Su=t,e}onError(t){this.vu.error(t)}bu(t){this.onlineState=t;let e=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,t)&&(this.xu(this.Su),e=!0),e}Cu(t,e){return!t.fromCache||(!this.options.Nu||!("Offline"!==e))&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}Du(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(t){t=_I.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Vu=!0,this.vu.next(t)}}class jBe{constructor(t,e){this.ku=t,this.byteLength=e}Ou(){return"metadata"in this.ku}}class Ppe{constructor(t){this.It=t}Ji(t){return im(this.It,t)}Yi(t){return t.metadata.exists?_de(this.It,t.document,!1):fo.newNoDocument(this.Ji(t.metadata.name),this.Xi(t.metadata.readTime))}Xi(t){return Ul(t)}}class UBe{constructor(t,e,i){this.Mu=t,this.localStore=e,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mpe(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.ku.namedQuery)this.queries.push(t.ku.namedQuery);else if(t.ku.documentMetadata){this.documents.push({metadata:t.ku.documentMetadata}),t.ku.documentMetadata.exists||++e;const i=Xr.fromString(t.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.ku.document&&(this.documents[this.documents.length-1].document=t.ku.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new Ppe(this.It);for(const n of t)if(n.metadata.queries){const s=i.Ji(n.metadata.name);for(const o of n.metadata.queries){const a=(e.get(o)||ar()).add(s);e.set(o,a)}}return e}complete(){var t=this;return(0,vt.Z)(function*(){const e=yield function vBe(r,t,e,i){return d$.apply(this,arguments)}(t.localStore,new Ppe(t.It),t.documents,t.Mu.id),i=t.$u(t.documents);for(const n of t.queries)yield yBe(t.localStore,n,i.get(n.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function Mpe(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Fpe{constructor(t){this.key=t}}class Npe{constructor(t){this.key=t}}class Bpe{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=ar(),this.mutatedKeys=ar(),this.Gu=ide(t),this.Qu=new RI(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new Ope,n=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,o=n,a=!1;const l="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,h="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(t.inorderTraversal((u,d)=>{const m=n.get(u),v=GK(this.query,d)?d:null,C=!!m&&this.mutatedKeys.has(m.key),S=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;m&&v?m.data.isEqual(v.data)?C!==S&&(i.track({type:3,doc:v}),A=!0):this.Hu(m,v)||(i.track({type:2,doc:v}),A=!0,(l&&this.Gu(v,l)>0||h&&this.Gu(v,h)<0)&&(a=!0)):!m&&v?(i.track({type:0,doc:v}),A=!0):m&&!v&&(i.track({type:1,doc:m}),A=!0,(l||h)&&(a=!0)),A&&(v?(o=o.add(v),s=S?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const u="F"===this.query.limitType?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{Qu:o,zu:i,$i:a,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const n=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Eu();s.sort((h,u)=>function(d,m){const v=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Gi()}};return v(d)-v(m)}(h.type,u.type)||this.Gu(h.doc,u.doc)),this.Ju(i);const o=e?this.Yu():[],a=0===this.Ku.size&&this.current?1:0,l=a!==this.qu;return this.qu=a,0!==s.length||l?{snapshot:new _I(this.query,t.Qu,n,s,t.mutatedKeys,0===a,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ope,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=ar(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new Npe(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new Fpe(i))}),e}tc(t){this.Uu=t.Hi,this.Ku=ar();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ec(){return _I.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class WBe{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class qBe{constructor(t){this.key=t,this.nc=!1}}class GBe{constructor(t,e,i,n,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=n,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new $C(a=>ede(a),UP),this.rc=new Map,this.oc=new Set,this.uc=new Da(gi.comparator),this.cc=new Map,this.ac=new s$,this.hc={},this.lc=new Map,this.fc=TE.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function KBe(r,t){return W$.apply(this,arguments)}function W$(){return W$=(0,vt.Z)(function*(r,t){const e=pY(r);let i,n;const s=e.ic.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),n=s.view.ec();else{const o=yield xI(e.localStore,bu(t));e.isPrimaryClient&&Dj(e.remoteStore,o);const a=e.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,n=yield q$(e,t,i,"current"===a,o.resumeToken)}return n}),W$.apply(this,arguments)}function q$(r,t,e,i,n){return G$.apply(this,arguments)}function G$(){return G$=(0,vt.Z)(function*(r,t,e,i,n){r._c=(d,m,v)=>{return(C=(0,vt.Z)(function*(S,A,_,M){let P=A.view.Wu(_);P.$i&&(P=yield Sj(S.localStore,A.query,!1).then(({documents:G})=>A.view.Wu(G,P)));const B=M&&M.targetChanges.get(A.targetId),j=A.view.applyChanges(P,S.isPrimaryClient,B);return iY(S,A.targetId,j.Xu),j.snapshot}),function(S,A,_,M){return C.apply(this,arguments)})(r,d,m,v);var C};const s=yield Sj(r.localStore,t,!0),o=new Bpe(t,s.Hi),a=o.Wu(s.documents),l=YP.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==r.onlineState,n),h=o.applyChanges(a,r.isPrimaryClient,l);iY(r,e,h.Xu);const u=new WBe(t,e,o);return r.ic.set(t,u),r.rc.has(e)?r.rc.get(e).push(t):r.rc.set(e,[t]),h.snapshot}),G$.apply(this,arguments)}function $Be(r,t){return K$.apply(this,arguments)}function K$(){return K$=(0,vt.Z)(function*(r,t){const e=Ci(r),i=e.ic.get(t),n=e.rc.get(i.targetId);if(n.length>1)return e.rc.set(i.targetId,n.filter(s=>!UP(s,t))),void e.ic.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield TI(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),uM(e.remoteStore,i.targetId),LI(e,i.targetId)}).catch(zC))):(LI(e,i.targetId),yield TI(e.localStore,i.targetId,!0))}),K$.apply(this,arguments)}function $$(){return $$=(0,vt.Z)(function*(r,t,e){const i=fY(r);try{const n=yield function(s,o){const a=Ci(s),l=Wo.now(),h=o.reduce((m,v)=>m.add(v.key),ar());let u,d;return a.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ac(),C=ar();return a.Gi.getEntries(m,h).next(S=>{v=S,v.forEach((A,_)=>{_.isValidDocument()||(C=C.add(A))})}).next(()=>a.localDocuments.getOverlayedDocuments(m,v)).next(S=>{u=S;const A=[];for(const _ of o){const M=rNe(_,u.get(_.key).overlayedDocument);null!=M&&A.push(new ry(_.key,M,qce(M.value.mapValue),qo.exists(!0)))}return a.mutationQueue.addMutationBatch(m,l,A,o)}).next(S=>{d=S;const A=S.applyToLocalDocumentSet(u,C);return a.documentOverlayCache.saveOverlays(m,S.batchId,A)})}).then(()=>({batchId:d.batchId,changes:bde(u)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(n.batchId),function(s,o,a){let l=s.hc[s.currentUser.toKey()];l||(l=new Da(Un)),l=l.insert(o,a),s.hc[s.currentUser.toKey()]=l}(i,n.batchId,e),yield oy(i,n.changes),yield II(i.remoteStore)}catch(n){const s=kI(n,"Failed to persist write");e.reject(s)}}),$$.apply(this,arguments)}function Hpe(r,t){return Y$.apply(this,arguments)}function Y$(){return Y$=(0,vt.Z)(function*(r,t){const e=Ci(r);try{const i=yield gBe(e.localStore,t);t.targetChanges.forEach((n,s)=>{const o=e.cc.get(s);o&&(Rn(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1),n.addedDocuments.size>0?o.nc=!0:n.modifiedDocuments.size>0?Rn(o.nc):n.removedDocuments.size>0&&(Rn(o.nc),o.nc=!1))}),yield oy(e,i,t)}catch(i){yield zC(i)}}),Y$.apply(this,arguments)}function Vpe(r,t,e){const i=Ci(r);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const n=[];i.ic.forEach((s,o)=>{const a=o.view.bu(t);a.snapshot&&n.push(a.snapshot)}),function(s,o){const a=Ci(s);a.onlineState=o;let l=!1;a.queries.forEach((h,u)=>{for(const d of u.listeners)d.bu(o)&&(l=!0)}),l&&j$(a)}(i.eventManager,t),n.length&&i.sc.Wo(n),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function ZBe(r,t,e){return Z$.apply(this,arguments)}function Z$(){return Z$=(0,vt.Z)(function*(r,t,e){const i=Ci(r);i.sharedClientState.updateQueryState(t,"rejected",e);const n=i.cc.get(t),s=n&&n.key;if(s){let o=new Da(gi.comparator);o=o.insert(s,fo.newNoDocument(s,_n.min()));const a=ar().add(s),l=new $P(_n.min(),new Map,new Ws(Un),o,a);yield Hpe(i,l),i.uc=i.uc.remove(s),i.cc.delete(t),nY(i)}else yield TI(i.localStore,t,!1).then(()=>LI(i,t,e)).catch(zC)}),Z$.apply(this,arguments)}function XBe(r,t){return X$.apply(this,arguments)}function X$(){return X$=(0,vt.Z)(function*(r,t){const e=Ci(r),i=t.batch.batchId;try{const n=yield fBe(e.localStore,t);tY(e,i,null),eY(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield oy(e,n)}catch(n){yield zC(n)}}),X$.apply(this,arguments)}function QBe(r,t,e){return Q$.apply(this,arguments)}function Q$(){return Q$=(0,vt.Z)(function*(r,t,e){const i=Ci(r);try{const n=yield function(s,o){const a=Ci(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return a.mutationQueue.lookupMutationBatch(l,o).next(u=>(Rn(null!==u),h=u.keys(),a.mutationQueue.removeMutationBatch(l,u))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,h,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>a.localDocuments.getDocuments(l,h))})}(i.localStore,t);tY(i,t,e),eY(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield oy(i,n)}catch(n){yield zC(n)}}),Q$.apply(this,arguments)}function J$(){return J$=(0,vt.Z)(function*(r,t){const e=Ci(r);sy(e.remoteStore)||$t("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const o=Ci(s);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(e.localStore);if(-1===i)return void t.resolve();const n=e.lc.get(i)||[];n.push(t),e.lc.set(i,n)}catch(i){const n=kI(i,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}),J$.apply(this,arguments)}function eY(r,t){(r.lc.get(t)||[]).forEach(e=>{e.resolve()}),r.lc.delete(t)}function tY(r,t,e){const i=Ci(r);let n=i.hc[i.currentUser.toKey()];if(n){const s=n.get(t);s&&(e?s.reject(e):s.resolve(),n=n.remove(t)),i.hc[i.currentUser.toKey()]=n}}function LI(r,t,e=null){r.sharedClientState.removeLocalQueryTarget(t);for(const i of r.rc.get(t))r.ic.delete(i),e&&r.sc.wc(i,e);r.rc.delete(t),r.isPrimaryClient&&r.ac.ls(t).forEach(i=>{r.ac.containsKey(i)||zpe(r,i)})}function zpe(r,t){r.oc.delete(t.path.canonicalString());const e=r.uc.get(t);null!==e&&(uM(r.remoteStore,e),r.uc=r.uc.remove(t),r.cc.delete(e),nY(r))}function iY(r,t,e){for(const i of e)i instanceof Fpe?(r.ac.addReference(i.key,t),eHe(r,i)):i instanceof Npe?($t("SyncEngine","Document no longer in limbo: "+i.key),r.ac.removeReference(i.key,t),r.ac.containsKey(i.key)||zpe(r,i.key)):Gi()}function eHe(r,t){const e=t.key,i=e.path.canonicalString();r.uc.get(e)||r.oc.has(i)||($t("SyncEngine","New document in limbo: "+e),r.oc.add(i),nY(r))}function nY(r){for(;r.oc.size>0&&r.uc.size<r.maxConcurrentLimboResolutions;){const t=r.oc.values().next().value;r.oc.delete(t);const e=new gi(Xr.fromString(t)),i=r.fc.next();r.cc.set(i,new qBe(e)),r.uc=r.uc.insert(e,i),Dj(r.remoteStore,new YC(bu(fI(e.path)),i,2,oc.at))}}function oy(r,t,e){return rY.apply(this,arguments)}function rY(){return rY=(0,vt.Z)(function*(r,t,e){const i=Ci(r),n=[],s=[],o=[];var a;i.ic.isEmpty()||(i.ic.forEach((a,l)=>{o.push(i._c(l,t,e).then(h=>{if((h||e)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,h?.fromCache?"not-current":"current"),h){n.push(h);const u=h$.Ci(l.targetId,h);s.push(u)}}))}),yield Promise.all(o),i.sc.Wo(n),yield(a=(0,vt.Z)(function*(l,h){const u=Ci(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>nt.forEach(h,m=>nt.forEach(m.Si,v=>u.persistence.referenceDelegate.addReference(d,m.targetId,v)).next(()=>nt.forEach(m.Di,v=>u.persistence.referenceDelegate.removeReference(d,m.targetId,v)))))}catch(d){if(!jC(d))throw d;$t("LocalStore","Failed to update sequence numbers: "+d)}for(const d of h){const m=d.targetId;if(!d.fromCache){const v=u.Ui.get(m),S=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);u.Ui=u.Ui.insert(m,S)}}}),function(l,h){return a.apply(this,arguments)})(i.localStore,s))}),rY.apply(this,arguments)}function tHe(r,t){return sY.apply(this,arguments)}function sY(){return sY=(0,vt.Z)(function*(r,t){const e=Ci(r);if(!e.currentUser.isEqual(t)){$t("SyncEngine","User change. New user:",t.toKey());const i=yield gpe(e.localStore,t);e.currentUser=t,(n=e).lc.forEach(o=>{o.forEach(a=>{a.reject(new Bt(ut.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),n.lc.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield oy(e,i.ji)}var n}),sY.apply(this,arguments)}function iHe(r,t){const e=Ci(r),i=e.cc.get(t);if(i&&i.nc)return ar().add(i.key);{let n=ar();const s=e.rc.get(t);if(!s)return n;for(const o of s){const a=e.ic.get(o);n=n.unionWith(a.view.ju)}return n}}function nHe(r,t){return oY.apply(this,arguments)}function oY(){return oY=(0,vt.Z)(function*(r,t){const e=Ci(r),i=yield Sj(e.localStore,t.query,!0),n=t.view.tc(i);return e.isPrimaryClient&&iY(e,t.targetId,n.Xu),n}),oY.apply(this,arguments)}function rHe(r,t){return aY.apply(this,arguments)}function aY(){return aY=(0,vt.Z)(function*(r,t){const e=Ci(r);return bpe(e.localStore,t).then(i=>oy(e,i))}),aY.apply(this,arguments)}function sHe(r,t,e,i){return lY.apply(this,arguments)}function lY(){return lY=(0,vt.Z)(function*(r,t,e,i){const n=Ci(r),s=yield function(o,a){const l=Ci(o),h=Ci(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",u=>h.Tn(u,a).next(d=>d?l.localDocuments.getDocuments(u,d):nt.resolve(null)))}(n.localStore,t);var a;null!==s?("pending"===e?yield II(n.remoteStore):"acknowledged"===e||"rejected"===e?(tY(n,t,i||null),eY(n,t),a=t,Ci(Ci(n.localStore).mutationQueue).An(a)):Gi(),yield oy(n,s)):$t("SyncEngine","Cannot apply mutation batch with id: "+t)}),lY.apply(this,arguments)}function hY(){return hY=(0,vt.Z)(function*(r,t){const e=Ci(r);if(pY(e),fY(e),!0===t&&!0!==e.dc){const i=e.sharedClientState.getAllActiveQueryTargets(),n=yield jpe(e,i.toArray());e.dc=!0,yield M$(e.remoteStore,!0);for(const s of n)Dj(e.remoteStore,s)}else if(!1===t&&!1!==e.dc){const i=[];let n=Promise.resolve();e.rc.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?i.push(o):n=n.then(()=>(LI(e,o),TI(e.localStore,o,!0))),uM(e.remoteStore,o)}),yield n,yield jpe(e,i),function(s){const o=Ci(s);o.cc.forEach((a,l)=>{uM(o.remoteStore,l)}),o.ac.fs(),o.cc=new Map,o.uc=new Da(gi.comparator)}(e),e.dc=!1,yield M$(e.remoteStore,!1)}}),hY.apply(this,arguments)}function jpe(r,t,e){return uY.apply(this,arguments)}function uY(){return uY=(0,vt.Z)(function*(r,t,e){const i=Ci(r),n=[],s=[];for(const o of t){let a;const l=i.rc.get(o);if(l&&0!==l.length){a=yield xI(i.localStore,bu(l[0]));for(const h of l){const u=i.ic.get(h),d=yield nHe(i,u);d.snapshot&&s.push(d.snapshot)}}else{const h=yield ype(i.localStore,o);a=yield xI(i.localStore,h),yield q$(i,Upe(h),o,!1,a.resumeToken)}n.push(a)}return i.sc.Wo(s),n}),uY.apply(this,arguments)}function Upe(r){return Qce(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function aHe(r){const t=Ci(r);return Ci(Ci(t.localStore).persistence).vi()}function lHe(r,t,e,i){return cY.apply(this,arguments)}function cY(){return cY=(0,vt.Z)(function*(r,t,e,i){const n=Ci(r);if(n.dc)return void $t("SyncEngine","Ignoring unexpected query state notification.");const s=n.rc.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const o=yield bpe(n.localStore,tde(s[0])),a=$P.createSynthesizedRemoteEventForCurrentChange(t,"current"===e,Sl.EMPTY_BYTE_STRING);yield oy(n,o,a);break}case"rejected":yield TI(n.localStore,t,!0),LI(n,t,i);break;default:Gi()}}),cY.apply(this,arguments)}function hHe(r,t,e){return dY.apply(this,arguments)}function dY(){return dY=(0,vt.Z)(function*(r,t,e){const i=pY(r);if(i.dc){for(const n of t){if(i.rc.has(n)){$t("SyncEngine","Adding an already active target "+n);continue}const s=yield ype(i.localStore,n),o=yield xI(i.localStore,s);yield q$(i,Upe(s),o.targetId,!1,o.resumeToken),Dj(i.remoteStore,o)}for(const n of e)i.rc.has(n)&&(yield TI(i.localStore,n,!1).then(()=>{uM(i.remoteStore,n),LI(i,n)}).catch(zC))}}),dY.apply(this,arguments)}function pY(r){const t=Ci(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=Hpe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iHe.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZBe.bind(null,t),t.sc.Wo=VBe.bind(null,t.eventManager),t.sc.wc=zBe.bind(null,t.eventManager),t}function fY(r){const t=Ci(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=XBe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=QBe.bind(null,t),t}class Wpe{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,vt.Z)(function*(){e.It=lM(t.databaseInfo.databaseId),e.sharedClientState=e.gc(t),e.persistence=e.yc(t),yield e.persistence.start(),e.localStore=e.Ic(t),e.gcScheduler=e.Tc(t,e.localStore),e.indexBackfillerScheduler=e.Ec(t,e.localStore)})()}Tc(t,e){return null}Ec(t,e){return null}Ic(t){return fpe(this.persistence,new ppe,t.initialUser,this.It)}yc(t){return new cpe(Cj.Bs,this.It)}gc(t){return new Epe}terminate(){var t=this;return(0,vt.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class qpe extends Wpe{constructor(t,e,i){super(),this.Ac=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,vt.Z)(function*(){yield e().call(i,t),yield i.Ac.initialize(i,t),yield fY(i.Ac.syncEngine),yield II(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(t){return fpe(this.persistence,new ppe,t.initialUser,this.It)}Tc(t,e){return new JNe(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue,e)}Ec(t,e){const i=new FFe(e,this.persistence);return new MFe(t.asyncQueue,i)}yc(t){const e=l$(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?lc.withCacheSize(this.cacheSizeBytes):lc.DEFAULT;return new a$(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,Tpe(),Tj(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(t){return new Epe}}class cHe extends qpe{constructor(t,e){super(t,e,!1),this.Ac=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,vt.Z)(function*(){yield e().call(i,t);const n=i.Ac.syncEngine;i.sharedClientState instanceof v$&&(i.sharedClientState.syncEngine={Fr:sHe.bind(null,n),$r:lHe.bind(null,n),Br:hHe.bind(null,n),vi:aHe.bind(null,n),Mr:rHe.bind(null,n)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,vt.Z)(function*(o){yield function oHe(r,t){return hY.apply(this,arguments)}(i.Ac.syncEngine,o),i.gcScheduler&&(o&&!i.gcScheduler.started?i.gcScheduler.start():o||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(o&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():o||i.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}gc(t){const e=Tpe();if(!v$.C(e))throw new Bt(ut.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=l$(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new v$(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class gY{initialize(t,e){var i=this;return(0,vt.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=n=>Vpe(i.syncEngine,n,1),i.remoteStore.remoteSyncer.handleCredentialChange=tHe.bind(null,i.syncEngine),yield M$(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new HBe}createDatastore(t){const e=lM(t.databaseInfo.databaseId),i=new SBe(t.databaseInfo);return new TBe(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,n=t.asyncQueue,s=a=>Vpe(this.syncEngine,a,0),o=xpe.C()?new xpe:new bBe,new ABe(e,i,n,s,o);var e,i,n,s,o}createSyncEngine(t,e){return function(i,n,s,o,a,l,h){const u=new GBe(i,n,s,o,a,l);return h&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return function(){var t=(0,vt.Z)(function*(e){const i=Ci(e);$t("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield DI(i),i.mu.shutdown(),i.gu.set("Unknown")});return function(e){return t.apply(this,arguments)}}()(this.remoteStore)}}function mY(r,t,e){if(!e)throw new Bt(ut.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function Gpe(r,t,e,i){if(!0===t&&!0===i)throw new Bt(ut.INVALID_ARGUMENT,`${r} and ${e} cannot be used together.`)}function Kpe(r){if(!gi.isDocumentKey(r))throw new Bt(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function $pe(r){if(gi.isDocumentKey(r))throw new Bt(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Aj(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const t=(e=r).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof r?"a function":Gi()}function zr(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new Bt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Aj(r);throw new Bt(ut.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return r}function Ype(r,t){if(t<=0)throw new Bt(ut.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${t}.`)}const Zpe=new Map;class Xpe{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Bt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Bt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Gpe("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class cM{constructor(t,e,i,n){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xpe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Bt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new Bt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xpe(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new EFe;switch(e.type){case"gapi":return new IFe(e.client,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Bt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=Zpe.get(t);e&&($t("ComponentProvider","Removing Datastore"),Zpe.delete(t),e.terminate())}(this),Promise.resolve()}}class Do{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rm(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Do(this.firestore,t,this._key)}}class jh{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new jh(this.firestore,t,this._query)}}class rm extends jh{constructor(t,e,i){super(t,e,fI(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Do(this.firestore,null,new gi(t))}withConverter(t){return new rm(this.firestore,t,this._path)}}function Jpe(r,t,...e){if(r=(0,J.m9)(r),mY("collection","path",t),r instanceof cM){const i=Xr.fromString(t,...e);return $pe(i),new rm(r,null,i)}{if(!(r instanceof Do||r instanceof rm))throw new Bt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xr.fromString(t,...e));return $pe(i),new rm(r.firestore,null,i)}}function kj(r,t,...e){if(r=(0,J.m9)(r),1===arguments.length&&(t=Ice.R()),mY("doc","path",t),r instanceof cM){const i=Xr.fromString(t,...e);return Kpe(i),new Do(r,null,new gi(i))}{if(!(r instanceof Do||r instanceof rm))throw new Bt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Xr.fromString(t,...e));return Kpe(i),new Do(r.firestore,r instanceof rm?r.converter:null,new gi(i))}}function efe(r,t){return r=(0,J.m9)(r),t=(0,J.m9)(t),(r instanceof Do||r instanceof rm)&&(t instanceof Do||t instanceof rm)&&r.firestore===t.firestore&&r.path===t.path&&r.converter===t.converter}function vY(r,t){return r=(0,J.m9)(r),t=(0,J.m9)(t),r instanceof jh&&t instanceof jh&&r.firestore===t.firestore&&UP(r._query,t._query)&&r.converter===t.converter}function tfe(r,t=10240){let e=0;return{read:()=>(0,vt.Z)(function*(){if(e<r.byteLength){const i={value:r.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,vt.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Rj{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Rc(this.observer.next,t)}error(t){this.observer.error?this.Rc(this.observer.error,t):za("Uncaught Error in snapshot listener:",t.toString())}bc(){this.muted=!0}Rc(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class pHe{constructor(t,e){this.Pc=t,this.It=e,this.metadata=new wl,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var t=this;return(0,vt.Z)(function*(){return t.metadata.promise})()}mc(){var t=this;return(0,vt.Z)(function*(){return yield t.getMetadata(),t.Vc()})()}Vc(){var t=this;return(0,vt.Z)(function*(){const e=yield t.Sc();if(null===e)return null;const i=t.vc.decode(e),n=Number(i);isNaN(n)&&t.Dc(`length string (${i}) is not valid number`);const s=yield t.Cc(n);return new jBe(JSON.parse(s),e.length+n)})()}xc(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Sc(){var t=this;return(0,vt.Z)(function*(){for(;t.xc()<0&&!(yield t.Nc()););if(0===t.buffer.length)return null;const e=t.xc();e<0&&t.Dc("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Cc(t){var e=this;return(0,vt.Z)(function*(){for(;e.buffer.length<t;)(yield e.Nc())&&e.Dc("Reached the end of bundle when more is expected.");const i=e.vc.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}Dc(t){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${t}`)}Nc(){var t=this;return(0,vt.Z)(function*(){const e=yield t.Pc.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class mHe{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,vt.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new Bt(ut.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(n=(0,vt.Z)(function*(s,o){const a=Ci(s),l=QP(a.It)+"/documents",h={documents:o.map(v=>XP(a.It,v))},u=yield a._o("BatchGetDocuments",l,h,o.length),d=new Map;u.forEach(v=>{const C=function gNe(r,t){return"found"in t?function(e,i){Rn(!!i.found);const n=im(e,i.found.name),s=Ul(i.found.updateTime),o=new Ch({mapValue:{fields:i.found.fields}});return fo.newFoundDocument(n,s,o)}(r,t):"missing"in t?function(e,i){Rn(!!i.missing),Rn(!!i.readTime);const n=im(e,i.missing),s=Ul(i.readTime);return fo.newNoDocument(n,s)}(r,t):Gi()}(a.It,v);d.set(C.key.toString(),C)});const m=[];return o.forEach(v=>{const C=d.get(v.toString());Rn(!!C),m.push(C)}),m}),function(s,o){return n.apply(this,arguments)})(e.datastore,t);var n;return i.forEach(n=>e.recordVersion(n)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new bI(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,vt.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,n)=>{const s=gi.fromPath(n);t.mutations.push(new KK(s,t.precondition(s)))}),yield(i=(0,vt.Z)(function*(n,s){const o=Ci(n),a=QP(o.It)+"/documents",l={writes:s.map(h=>JP(o.It,h))};yield o.ao("Commit",a,l)}),function(n,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Gi();e=_n.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new Bt(ut.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(_n.min())?qo.exists(!1):qo.updateTime(e):qo.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(_n.min()))throw new Bt(ut.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qo.updateTime(e)}return qo.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class vHe{constructor(t,e,i,n,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=n,this.deferred=s,this.kc=i.maxAttempts,this.xo=new y$(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var t=this;this.xo.Ro((0,vt.Z)(function*(){const e=new mHe(t.datastore),i=t.Mc(e);i&&i.then(n=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(n)}).catch(s=>{t.Fc(s)}))}).catch(n=>{t.Fc(n)})}))}Mc(t){try{const e=this.updateFunction(t);return!NP(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Fc(t){this.kc>0&&this.$c(t)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(t)}$c(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!mde(e)}return!1}}class yHe{constructor(t,e,i,n){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=n,this.user=jl.UNAUTHENTICATED,this.clientId=Ice.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var o=(0,vt.Z)(function*(a){$t("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(i,o=>($t("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}getConfiguration(){var t=this;return(0,vt.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new wl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,vt.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const n=kI(i,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}function ife(r,t){return yY.apply(this,arguments)}function yY(){return yY=(0,vt.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress(),$t("FirestoreClient","Initializing OfflineComponentProvider");const e=yield r.getConfiguration();yield t.initialize(e);let i=e.initialUser;r.setCredentialChangeListener(function(){var n=(0,vt.Z)(function*(s){i.isEqual(s)||(yield gpe(t.localStore,s),i=s)});return function(s){return n.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r.offlineComponents=t}),yY.apply(this,arguments)}function nfe(r,t){return bY.apply(this,arguments)}function bY(){return bY=(0,vt.Z)(function*(r,t){r.asyncQueue.verifyOperationInProgress();const e=yield CY(r);$t("FirestoreClient","Initializing OnlineComponentProvider");const i=yield r.getConfiguration();yield t.initialize(e,i),r.setCredentialChangeListener(n=>Lpe(t.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>Lpe(t.remoteStore,s)),r.onlineComponents=t}),bY.apply(this,arguments)}function CY(r){return wY.apply(this,arguments)}function wY(){return wY=(0,vt.Z)(function*(r){return r.offlineComponents||($t("FirestoreClient","Using default OfflineComponentProvider"),yield ife(r,new Wpe)),r.offlineComponents}),wY.apply(this,arguments)}function _j(r){return SY.apply(this,arguments)}function SY(){return SY=(0,vt.Z)(function*(r){return r.onlineComponents||($t("FirestoreClient","Using default OnlineComponentProvider"),yield nfe(r,new gY)),r.onlineComponents}),SY.apply(this,arguments)}function rfe(r){return CY(r).then(t=>t.persistence)}function Lj(r){return CY(r).then(t=>t.localStore)}function EY(r){return _j(r).then(t=>t.remoteStore)}function xY(r){return _j(r).then(t=>t.syncEngine)}function OI(r){return TY.apply(this,arguments)}function TY(){return TY=(0,vt.Z)(function*(r){const t=yield _j(r),e=t.eventManager;return e.onListen=KBe.bind(null,t.syncEngine),e.onUnlisten=$Be.bind(null,t.syncEngine),e}),TY.apply(this,arguments)}function ofe(r,t,e={}){const i=new wl;return r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return function(n,s,o,a,l){const h=new Rj({next:d=>{s.enqueueAndForget(()=>V$(n,u));const m=d.docs.has(o);!m&&d.fromCache?l.reject(new Bt(ut.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&d.fromCache&&a&&"server"===a.source?l.reject(new Bt(ut.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new U$(fI(o.path),h,{includeMetadataChanges:!0,Nu:!0});return B$(n,u)}(yield OI(r),r.asyncQueue,t,e,i)})),i.promise}function afe(r,t,e={}){const i=new wl;return r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return function(n,s,o,a,l){const h=new Rj({next:d=>{s.enqueueAndForget(()=>V$(n,u)),d.fromCache&&"server"===a.source?l.reject(new Bt(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),u=new U$(o,h,{includeMetadataChanges:!0,Nu:!0});return B$(n,u)}(yield OI(r),r.asyncQueue,t,e,i)})),i.promise}class DHe{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new y$(this,"async_queue_retry"),this.Wc=()=>{const e=Tj();e&&$t("AsyncQueue","Visibility state changed to "+e.visibilityState),this.xo.Po()};const t=Tj();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.zc(),this.Hc(t)}enterRestrictedMode(t){if(!this.Uc){this.Uc=!0,this.Qc=t||!1;const e=Tj();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Wc)}}enqueue(t){if(this.zc(),this.Uc)return new Promise(()=>{});const e=new wl;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Lc.push(t),this.Jc()))}Jc(){var t=this;return(0,vt.Z)(function*(){if(0!==t.Lc.length){try{yield t.Lc[0](),t.Lc.shift(),t.xo.reset()}catch(e){if(!jC(e))throw e;$t("AsyncQueue","Operation failed with retryable error: "+e)}t.Lc.length>0&&t.xo.Ro(()=>t.Jc())}})()}Hc(t){const e=this.Bc.then(()=>(this.Gc=!0,t().catch(i=>{throw this.Kc=i,this.Gc=!1,za("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=e,e}enqueueAfterDelay(t,e,i){this.zc(),this.jc.indexOf(t)>-1&&(e=0);const n=N$.createAndSchedule(this,t,e,i,s=>this.Yc(s));return this.qc.push(n),n}zc(){this.Kc&&Gi()}verifyOperationInProgress(){}Xc(){var t=this;return(0,vt.Z)(function*(){let e;do{e=t.Bc,yield e}while(e!==t.Bc)})()}Zc(t){for(const e of this.qc)if(e.timerId===t)return!0;return!1}ta(t){return this.Xc().then(()=>{this.qc.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.qc)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Xc()})}ea(t){this.jc.push(t)}Yc(t){const e=this.qc.indexOf(t);this.qc.splice(e,1)}}function DY(r){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const n of["next","error","complete"])if(n in i&&"function"==typeof i[n])return!0;return!1}(r)}class IHe{constructor(){this._progressObserver={},this._taskCompletionResolver=new wl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class Io extends cM{constructor(t,e,i,n){super(t,e,i,n),this.type="firestore",this._queue=new DHe,this._persistenceKey=n?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||lfe(this),this._firestoreClient.terminate()}}function ja(r){return r._firestoreClient||lfe(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function lfe(r){var t;const e=r._freezeSettings(),i=(s=(null===(t=r._app)||void 0===t?void 0:t.options.appId)||"",new HFe(r._databaseId,s,r._persistenceKey,(a=e).host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams));var s,a;r._firestoreClient=new yHe(r._authCredentials,r._appCheckCredentials,r._queue,i)}function hfe(r,t,e){const i=new wl;return r.asyncQueue.enqueue((0,vt.Z)(function*(){try{yield ife(r,e),yield nfe(r,t),i.resolve()}catch(n){const s=n;if(!("FirebaseError"===(o=s).name?o.code===ut.FAILED_PRECONDITION||o.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code))throw s;hE("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var o})).then(()=>i.promise)}function ufe(r){if(r._initialized||r._terminated)throw new Bt(ut.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sm{constructor(t){this._byteString=t}static fromBase64String(t){try{return new sm(Sl.fromBase64String(t))}catch(e){throw new Bt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new sm(Sl.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class ay{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new Bt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ta(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class IE{constructor(t){this._methodName=t}}class Oj{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Bt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Bt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Un(this._lat,t._lat)||Un(this._long,t._long)}}const NHe=/^__.*__$/;class BHe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new ry(t,this.data,this.fieldMask,e,this.fieldTransforms):new yI(t,this.data,e,this.fieldTransforms)}}class cfe{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new ry(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function dfe(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Gi()}}class Pj{constructor(t,e,i,n,s,o){this.settings=t,this.databaseId=e,this.It=i,this.ignoreUndefinedProperties=n,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(t){return new Pj(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.ua(t),n}ca(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),n=this.ia({path:i,oa:!1});return n.na(),n}aa(t){return this.ia({path:void 0,oa:!0})}ha(t){return Nj(t,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}na(){if(this.path)for(let t=0;t<this.path.length;t++)this.ua(this.path.get(t))}ua(t){if(0===t.length)throw this.ha("Document fields must not be empty");if(dfe(this.sa)&&NHe.test(t))throw this.ha('Document fields cannot begin and end with "__"')}}class HHe{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.It=i||lM(t)}da(t,e,i,n=!1){return new Pj({sa:t,methodName:e,fa:i,path:Ta.emptyPath(),oa:!1,la:n},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function AE(r){const t=r._freezeSettings(),e=lM(r._databaseId);return new HHe(r._databaseId,!!t.ignoreUndefinedProperties,e)}function Mj(r,t,e,i,n,s={}){const o=r.da(s.merge||s.mergeFields?2:0,t,e,n);RY("Data must be an object, but it was:",o,i);const a=gfe(i,o);let l,h;if(s.merge)l=new ed(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const m=_Y(t,d,e);if(!o.contains(m))throw new Bt(ut.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);vfe(u,m)||u.push(m)}l=new ed(u),h=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,h=o.fieldTransforms;return new BHe(new Ch(a),l,h)}class dM extends IE{_toFieldTransform(t){if(2!==t.sa)throw t.ha(1===t.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof dM}}function pfe(r,t,e){return new Pj({sa:3,fa:t.settings.fa,methodName:r._methodName,oa:e},t.databaseId,t.It,t.ignoreUndefinedProperties)}class IY extends IE{_toFieldTransform(t){return new WP(t.path,new mI)}isEqual(t){return t instanceof IY}}class VHe extends IE{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=pfe(this,t,!0),i=this._a.map(s=>kE(s,e)),n=new vE(i);return new WP(t.path,n)}isEqual(t){return this===t}}class zHe extends IE{constructor(t,e){super(t),this._a=e}_toFieldTransform(t){const e=pfe(this,t,!0),i=this._a.map(s=>kE(s,e)),n=new yE(i);return new WP(t.path,n)}isEqual(t){return this===t}}class jHe extends IE{constructor(t,e){super(t),this.wa=e}_toFieldTransform(t){const e=new vI(t.It,sde(t.It,this.wa));return new WP(t.path,e)}isEqual(t){return this===t}}function AY(r,t,e,i){const n=r.da(1,t,e);RY("Data must be an object, but it was:",n,i);const s=[],o=Ch.empty();dE(i,(l,h)=>{const u=Fj(t,l,e);h=(0,J.m9)(h);const d=n.ca(u);if(h instanceof dM)s.push(u);else{const m=kE(h,d);null!=m&&(s.push(u),o.set(u,m))}});const a=new ed(s);return new cfe(o,a,n.fieldTransforms)}function kY(r,t,e,i,n,s){const o=r.da(1,t,e),a=[_Y(t,i,e)],l=[n];if(s.length%2!=0)throw new Bt(ut.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(_Y(t,s[m])),l.push(s[m+1]);const h=[],u=Ch.empty();for(let m=a.length-1;m>=0;--m)if(!vfe(h,a[m])){const v=a[m];let C=l[m];C=(0,J.m9)(C);const S=o.ca(v);if(C instanceof dM)h.push(v);else{const A=kE(C,S);null!=A&&(h.push(v),u.set(v,A))}}const d=new ed(h);return new cfe(u,d,o.fieldTransforms)}function ffe(r,t,e,i=!1){return kE(e,r.da(i?4:3,t))}function kE(r,t){if(mfe(r=(0,J.m9)(r)))return RY("Unsupported field value:",t,r),gfe(r,t);if(r instanceof IE)return function(e,i){if(!dfe(i.sa))throw i.ha(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(i);n&&i.fieldTransforms.push(n)}(r,t),null;if(void 0===r&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,i){const n=[];let s=0;for(const o of e){let a=kE(o,i.aa(s));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),s++}return{arrayValue:{values:n}}}(r,t)}return function(e,i){if(null===(e=(0,J.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return sde(i.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Wo.fromDate(e);return{timestampValue:ZP(i.It,n)}}if(e instanceof Wo){const n=new Wo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ZP(i.It,n)}}if(e instanceof Oj)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sm)return{bytesValue:Dde(i.It,e._byteString)};if(e instanceof Do){const n=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(n))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:$K(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ha(`Unsupported field value: ${Aj(e)}`)}(r,t)}function gfe(r,t){const e={};return Mce(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dE(r,(i,n)=>{const s=kE(n,t.ra(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function mfe(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Wo||r instanceof Oj||r instanceof sm||r instanceof Do||r instanceof IE)}function RY(r,t,e){if(!mfe(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=Aj(e);throw t.ha("an object"===i?r+" a custom object":r+" "+i)}var i}function _Y(r,t,e){if((t=(0,J.m9)(t))instanceof ay)return t._internalPath;if("string"==typeof t)return Fj(r,t);throw Nj("Field path arguments must be of type string or ",r,!1,void 0,e)}const UHe=new RegExp("[~\\*/\\[\\]]");function Fj(r,t,e){if(t.search(UHe)>=0)throw Nj(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,e);try{return new ay(...t.split("."))._internalPath}catch{throw Nj(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,e)}}function Nj(r,t,e,i,n){const s=i&&!i.isEmpty(),o=void 0!==n;let a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${n}`),l+=")"),new Bt(ut.INVALID_ARGUMENT,a+r+l)}function vfe(r,t){return r.some(e=>e.isEqual(t))}class pM{constructor(t,e,i,n,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=n,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Do(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new WHe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Bj("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class WHe extends pM{data(){return super.data()}}function Bj(r,t){return"string"==typeof t?Fj(r,t):t instanceof ay?t._internalPath:t._delegate._internalPath}function yfe(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Bt(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fM{}function JC(r,...t){for(const e of t)r=e._apply(r);return r}class qHe extends fM{constructor(t,e,i){super(),this.ma=t,this.ga=e,this.ya=i,this.type="where"}_apply(t){const e=AE(t.firestore),i=function(n,s,o,a,l,h,u){let d;if(l.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new Bt(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){xfe(u,h);const v=[];for(const C of u)v.push(Efe(a,n,C));d={arrayValue:{values:v}}}else d=Efe(a,n,u)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||xfe(u,h),d=ffe(o,"where",u,"in"===h||"not-in"===h);const m=wh.create(l,h,d);return function(v,C){if(C.dt()){const A=UK(v);if(null!==A&&!A.isEqual(C.field))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${A.toString()}' and '${C.field.toString()}'`);const _=jK(v);null!==_&&Tfe(0,C.field,_)}const S=function(A,_){for(const M of A.filters)if(_.indexOf(M.op)>=0)return M.op;return null}(v,function(A){switch(A){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(C.op));if(null!==S)throw new Bt(ut.INVALID_ARGUMENT,S===C.op?`Invalid query. You cannot use more than one '${C.op.toString()}' filter.`:`Invalid query. You cannot use '${C.op.toString()}' filters with '${S.toString()}' filters.`)}(n,m),m}(t._query,0,e,t.firestore._databaseId,this.ma,this.ga,this.ya);return new jh(t.firestore,t.converter,function(n,s){const o=n.filters.concat([s]);return new ny(n.path,n.collectionGroup,n.explicitOrderBy.slice(),o,n.limit,n.limitType,n.startAt,n.endAt)}(t._query,i))}}class KHe extends fM{constructor(t,e){super(),this.ma=t,this.pa=e,this.type="orderBy"}_apply(t){const e=function(i,n,s){if(null!==i.startAt)throw new Bt(ut.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Bt(ut.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new pI(n,s);return function(a,l){if(null===jK(a)){const h=UK(a);null!==h&&Tfe(0,h,l.field)}}(i,o),o}(t._query,this.ma,this.pa);return new jh(t.firestore,t.converter,function(i,n){const s=i.explicitOrderBy.concat([n]);return new ny(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class bfe extends fM{constructor(t,e,i){super(),this.type=t,this.Ia=e,this.Ta=i}_apply(t){return new jh(t.firestore,t.converter,oj(t._query,this.Ia,this.Ta))}}class Cfe extends fM{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=Sfe(t,this.type,this.Ea,this.Aa);return new jh(t.firestore,t.converter,(n=e,new ny((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,n,i.endAt)));var i,n}}class wfe extends fM{constructor(t,e,i){super(),this.type=t,this.Ea=e,this.Aa=i}_apply(t){const e=Sfe(t,this.type,this.Ea,this.Aa);return new jh(t.firestore,t.converter,(n=e,new ny((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,n)));var i,n}}function Sfe(r,t,e,i){if(e[0]=(0,J.m9)(e[0]),e[0]instanceof pM)return function(n,s,o,a,l){if(!a)throw new Bt(ut.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const h=[];for(const u of gI(n))if(u.field.isKeyField())h.push(gE(s,a.key));else{const d=a.data.field(u.field);if(HK(d))throw new Bt(ut.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const m=u.field.canonicalString();throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}h.push(d)}return new KC(h,l)}(r._query,r.firestore._databaseId,t,e[0]._document,i);{const n=AE(r.firestore);return function(s,o,a,l,h,u){const d=s.explicitOrderBy;if(h.length>d.length)throw new Bt(ut.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<h.length;v++){const C=h[v];if(d[v].field.isKeyField()){if("string"!=typeof C)throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof C}`);if(!WK(s)&&-1!==C.indexOf("/"))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${C}' contains a slash.`);const S=s.path.child(Xr.fromString(C));if(!gi.isDocumentKey(S))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${S}' is not because it contains an odd number of segments.`);const A=new gi(S);m.push(gE(o,A))}else{const S=ffe(a,l,C);m.push(S)}}return new KC(m,u)}(r._query,r.firestore._databaseId,n,t,e,i)}}function Efe(r,t,e){if("string"==typeof(e=(0,J.m9)(e))){if(""===e)throw new Bt(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WK(t)&&-1!==e.indexOf("/"))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Xr.fromString(e));if(!gi.isDocumentKey(i))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return gE(r,new gi(i))}if(e instanceof Do)return gE(r,e._key);throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Aj(e)}.`)}function xfe(r,t){if(!Array.isArray(r)||0===r.length)throw new Bt(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(r.length>10)throw new Bt(ut.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function Tfe(r,t,e){if(!e.isEqual(t))throw new Bt(ut.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}class LY{convertValue(t,e="none"){switch(fE(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ia(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(pE(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Gi()}}convertObject(t,e){const i={};return dE(t.fields,(n,s)=>{i[n]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new Oj(Ia(t.latitude),Ia(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Nce(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(FP(t));default:return null}}convertTimestamp(t){const e=UC(t);return new Wo(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Xr.fromString(t);Rn(Mde(i));const n=new WC(i.get(1),i.get(3)),s=new gi(i.popFirst(5));return n.isEqual(e)||za(`Document ${s} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function Hj(r,t,e){let i;return i=r?e&&(e.merge||e.mergeFields)?r.toFirestore(t,e):r.toFirestore(t):t,i}class tVe extends LY{constructor(t){super(),this.firestore=t}convertBytes(t){return new sm(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Do(this.firestore,null,e)}}class RE{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ly extends pM{constructor(t,e,i,n,s,o){super(t,e,i,n,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new gM(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(Bj("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class gM extends ly{data(t={}){return super.data(t)}}class e0{constructor(t,e,i,n){this._firestore=t,this._userDataWriter=e,this._snapshot=n,this.metadata=new RE(n.hasPendingWrites,n.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new gM(this._firestore,this._userDataWriter,i.key,i,new RE(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Bt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,n){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(o=>({type:"added",doc:new gM(i._firestore,i._userDataWriter,o.doc.key,o.doc,new RE(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>n||3!==o.type).map(o=>{const a=new gM(i._firestore,i._userDataWriter,o.doc.key,o.doc,new RE(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,h=-1;return 0!==o.type&&(l=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),h=s.indexOf(o.doc.key)),{type:iVe(o.type),doc:a,oldIndex:l,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function iVe(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Gi()}}function Dfe(r,t){return r instanceof ly&&t instanceof ly?r._firestore===t._firestore&&r._key.isEqual(t._key)&&(null===r._document?null===t._document:r._document.isEqual(t._document))&&r._converter===t._converter:r instanceof e0&&t instanceof e0&&r._firestore===t._firestore&&vY(r.query,t.query)&&r.metadata.isEqual(t.metadata)&&r._snapshot.isEqual(t._snapshot)}class t0 extends LY{constructor(t){super(),this.firestore=t}convertBytes(t){return new sm(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Do(this.firestore,null,e)}}function Ife(r,t,e){r=zr(r,Do);const i=zr(r.firestore,Io),n=Hj(r.converter,t,e);return PI(i,[Mj(AE(i),"setDoc",r._key,n,null!==r.converter,e).toMutation(r._key,qo.none())])}function Afe(r,t,e,...i){r=zr(r,Do);const n=zr(r.firestore,Io),s=AE(n);let o;return o="string"==typeof(t=(0,J.m9)(t))||t instanceof ay?kY(s,"updateDoc",r._key,t,e,i):AY(s,"updateDoc",r._key,t),PI(n,[o.toMutation(r._key,qo.exists(!0))])}function kfe(r,...t){var e,i,n;r=(0,J.m9)(r);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||DY(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(DY(t[o])){const d=t[o];t[o]=null===(e=d.next)||void 0===e?void 0:e.bind(d),t[o+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),t[o+2]=null===(n=d.complete)||void 0===n?void 0:n.bind(d)}let l,h,u;if(r instanceof Do)h=zr(r.firestore,Io),u=fI(r._key.path),l={next:d=>{t[o]&&t[o](OY(h,r,d))},error:t[o+1],complete:t[o+2]};else{const d=zr(r,jh);h=zr(d.firestore,Io),u=d._query;const m=new t0(h);l={next:v=>{t[o]&&t[o](new e0(h,m,d,v))},error:t[o+1],complete:t[o+2]},yfe(r._query)}return function(d,m,v,C){const S=new Rj(C),A=new U$(m,S,v);return d.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return B$(yield OI(d),A)})),()=>{S.bc(),d.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return V$(yield OI(d),A)}))}}(ja(h),u,a,l)}function PI(r,t){return function(e,i){const n=new wl;return e.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return function YBe(r,t,e){return $$.apply(this,arguments)}(yield xY(e),i,n)})),n.promise}(ja(r),t)}function OY(r,t,e){const i=e.docs.get(t._key),n=new t0(r);return new ly(r,n,t._key,i,new RE(e.hasPendingWrites,e.fromCache),t.converter)}const dVe={maxAttempts:5};class Rfe{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=AE(t)}set(t,e,i){this._verifyNotCommitted();const n=n0(t,this._firestore),s=Hj(n.converter,e,i),o=Mj(this._dataReader,"WriteBatch.set",n._key,s,null!==n.converter,i);return this._mutations.push(o.toMutation(n._key,qo.none())),this}update(t,e,i,...n){this._verifyNotCommitted();const s=n0(t,this._firestore);let o;return o="string"==typeof(e=(0,J.m9)(e))||e instanceof ay?kY(this._dataReader,"WriteBatch.update",s._key,e,i,n):AY(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,qo.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=n0(t,this._firestore);return this._mutations=this._mutations.concat(new bI(e._key,qo.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Bt(ut.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function n0(r,t){if((r=(0,J.m9)(r)).firestore!==t)throw new Bt(ut.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class pVe extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=AE(t)}get(t){const e=n0(t,this._firestore),i=new tVe(this._firestore);return this._transaction.lookup([e._key]).then(n=>{if(!n||1!==n.length)return Gi();const s=n[0];if(s.isFoundDocument())return new pM(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new pM(this._firestore,i,e._key,null,e.converter);throw Gi()})}set(t,e,i){const n=n0(t,this._firestore),s=Hj(n.converter,e,i),o=Mj(this._dataReader,"Transaction.set",n._key,s,null!==n.converter,i);return this._transaction.set(n._key,o),this}update(t,e,i,...n){const s=n0(t,this._firestore);let o;return o="string"==typeof(e=(0,J.m9)(e))||e instanceof ay?kY(this._dataReader,"Transaction.update",s._key,e,i,n):AY(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this}delete(t){const e=n0(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=n0(t,this._firestore),i=new t0(this._firestore);return super.get(t).then(n=>new ly(this._firestore,i,e._key,n._document,new RE(!1,!1),e.converter))}}function PY(r,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Bt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return t}function Lfe(){if(typeof Uint8Array>"u")throw new Bt("unimplemented","Uint8Arrays are not available in this environment.")}function Ofe(){if(!function NFe(){return typeof atob<"u"}())throw new Bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,t=!0){hI=pu.SDK_VERSION,(0,pu._registerComponent)(new Rf.wA("firestore",(e,{instanceIdentifier:i,options:n})=>{const s=e.getProvider("app").getImmediate(),o=new Io(new TFe(e.getProvider("auth-internal")),new AFe(e.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Bt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new WC(a.options.projectId,l)}(s,i),s);return n=Object.assign({useFetchStreams:t},n),o._setSettings(n),o},"PUBLIC").setMultipleInstances(!0)),(0,pu.registerVersion)(xce,"3.7.3",r),(0,pu.registerVersion)(xce,"3.7.3","esm2017")}();class mM{constructor(t){this._delegate=t}static fromBase64String(t){return Ofe(),new mM(sm.fromBase64String(t))}static fromUint8Array(t){return Lfe(),new mM(sm.fromUint8Array(t))}toBase64(){return Ofe(),this._delegate.toBase64()}toUint8Array(){return Lfe(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function MY(r){return function SVe(r,t){if("object"!=typeof r||null===r)return!1;const e=r;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(r,["next","error","complete"])}class EVe{enableIndexedDbPersistence(t,e){return function kHe(r,t){ufe(r=zr(r,Io));const e=ja(r),i=r._freezeSettings(),n=new gY;return hfe(e,n,new qpe(n,i.cacheSizeBytes,t?.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function RHe(r){ufe(r=zr(r,Io));const t=ja(r),e=r._freezeSettings(),i=new gY;return hfe(t,i,new cHe(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function _He(r){if(r._initialized&&!r._terminated)throw new Bt(ut.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new wl;return r._queue.enqueueAndForgetEvenWhileRestricted((0,vt.Z)(function*(){try{yield(e=(0,vt.Z)(function*(i){if(!Nf.C())return Promise.resolve();const n=i+"main";yield Nf.delete(n)}),function(i){return e.apply(this,arguments)})(l$(r._databaseId,r._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class Pfe{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof WC||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&hE("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function Qpe(r,t,e,i={}){var n;const s=(r=zr(r,cM))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&hE("Host has been set in both settings() and useEmulator(), emulator host will be used"),r._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let o,a;if("string"==typeof i.mockUserToken)o=i.mockUserToken,a=jl.MOCK_USER;else{o=(0,J.Sg)(i.mockUserToken,null===(n=r._app)||void 0===n?void 0:n.options.projectId);const l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new Bt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new jl(l)}r._authCredentials=new xFe(new Tce(o,a))}}(this._delegate,t,e,i)}enableNetwork(){return function OHe(r){return function bHe(r){return r.asyncQueue.enqueue((0,vt.Z)(function*(){const t=yield rfe(r),e=yield EY(r);return t.setNetworkEnabled(!0),function(i){const n=Ci(i);return n._u.delete(0),hM(n)}(e)}))}(ja(r=zr(r,Io)))}(this._delegate)}disableNetwork(){return function PHe(r){return function CHe(r){return r.asyncQueue.enqueue((0,vt.Z)(function*(){const t=yield rfe(r),e=yield EY(r);return t.setNetworkEnabled(!1),(i=(0,vt.Z)(function*(n){const s=Ci(n);s._u.add(0),yield DI(s),s.gu.set("Offline")}),function(n){return i.apply(this,arguments)})(e);var i}))}(ja(r=zr(r,Io)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,Gpe("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function LHe(r){return function(t){const e=new wl;return t.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return function JBe(r,t){return J$.apply(this,arguments)}(yield xY(t),e)})),e.promise}(ja(r=zr(r,Io)))}(this._delegate)}onSnapshotsInSync(t){return function cVe(r,t){return function EHe(r,t){const e=new Rj(t);return r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return i=yield OI(r),n=e,Ci(i).Ru.add(n),void n.next();var i,n})),()=>{e.bc(),r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return i=yield OI(r),n=e,void Ci(i).Ru.delete(n);var i,n}))}}(ja(r=zr(r,Io)),DY(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new Bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new MI(this,Jpe(this._delegate,t))}catch(e){throw wu(e,"collection()","Firestore.collection()")}}doc(t){try{return new sp(this,kj(this._delegate,t))}catch(e){throw wu(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Su(this,function dHe(r,t){if(r=zr(r,cM),mY("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Bt(ut.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jh(r,null,(e=t,new ny(Xr.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw wu(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function fVe(r,t,e){r=zr(r,Io);const i=Object.assign(Object.assign({},dVe),e);return function(n){if(n.maxAttempts<1)throw new Bt(ut.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(n,s,o){const a=new wl;return n.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){const l=yield function sfe(r){return _j(r).then(t=>t.datastore)}(n);new vHe(n.asyncQueue,l,o,s,a).run()})),a.promise}(ja(r),n=>t(new pVe(r,n)),i)}(this._delegate,e=>t(new Mfe(this,e)))}batch(){return ja(this._delegate),new Ffe(new Rfe(this._delegate,t=>PI(this._delegate,t)))}loadBundle(t){return function MHe(r,t){const e=ja(r=zr(r,Io)),i=new IHe;return function xHe(r,t,e,i){const n=function(s,o){let a;return a="string"==typeof s?(new TextEncoder).encode(s):s,l=function(l,h){if(l instanceof Uint8Array)return tfe(l,h);if(l instanceof ArrayBuffer)return tfe(new Uint8Array(l),h);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),new pHe(l,o);var l}(e,lM(t));r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){!function uHe(r,t,e){const i=Ci(r);var n;(n=(0,vt.Z)(function*(s,o,a){try{const l=yield o.getMetadata();if(yield function(m,v){const C=Ci(m),S=Ul(v.createTime);return C.persistence.runTransaction("hasNewerBundle","readonly",A=>C.Ns.getBundleMetadata(A,v.id)).then(A=>!!A&&A.createTime.compareTo(S)>=0)}(s.localStore,l))return yield o.close(),a._completeWith({taskState:"Success",documentsLoaded:(m=l).totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}),Promise.resolve(new Set);a._updateProgress(Mpe(l));const h=new UBe(l,s.localStore,o.It);let u=yield o.mc();for(;u;){const m=yield h.Fu(u);m&&a._updateProgress(m),u=yield o.mc()}const d=yield h.complete();return yield oy(s,d.Lu,void 0),yield function(m,v){const C=Ci(m);return C.persistence.runTransaction("Save bundle","readwrite",S=>C.Ns.saveBundleMetadata(S,v))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.Bu)}catch(l){return hE("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}var m}),function(s,o,a){return n.apply(this,arguments)})(i,t,e).then(n=>{i.sharedClientState.notifyBundleLoaded(n)})}(yield xY(r),n,i)}))}(e,r._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function FHe(r,t){return function THe(r,t){return r.asyncQueue.enqueue((0,vt.Z)(function*(){return function(e,i){const n=Ci(e);return n.persistence.runTransaction("Get named query","readonly",s=>n.Ns.getNamedQuery(s,i))}(yield Lj(r),t)}))}(ja(r=zr(r,Io)),t).then(e=>e?new jh(r,null,e.query):null)}(this._delegate,t).then(e=>e?new Su(this,e):null)}}class Vj extends LY{constructor(t){super(),this.firestore=t}convertBytes(t){return new mM(new sm(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return sp.forKey(e,this.firestore,null)}}class Mfe{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Vj(t)}get(t){const e=LE(t);return this._delegate.get(e).then(i=>new vM(this._firestore,new ly(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const n=LE(t);return i?(PY("Transaction.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=LE(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=LE(t);return this._delegate.delete(e),this}}class Ffe{constructor(t){this._delegate=t}set(t,e,i){const n=LE(t);return i?(PY("WriteBatch.set",i),this._delegate.set(n,e,i)):this._delegate.set(n,e),this}update(t,e,i,...n){const s=LE(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...n),this}delete(t){const e=LE(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class _E{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new gM(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yM(this._firestore,i),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=_E.INSTANCES;let n=i.get(t);n||(n=new WeakMap,i.set(t,n));let s=n.get(e);return s||(s=new _E(t,new Vj(t),e),n.set(e,s)),s}}_E.INSTANCES=new WeakMap;class sp{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Vj(t)}static forPath(t,e,i){if(t.length%2!=0)throw new Bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new sp(e,new Do(e._delegate,i,new gi(t)))}static forKey(t,e,i){return new sp(e,new Do(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new MI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new MI(this.firestore,Jpe(this._delegate,t))}catch(e){throw wu(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,J.m9)(t))instanceof Do&&efe(this._delegate,t)}set(t,e){e=PY("DocumentReference.set",e);try{return e?Ife(this._delegate,t,e):Ife(this._delegate,t)}catch(i){throw wu(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?Afe(this._delegate,t):Afe(this._delegate,t,e,...i)}catch(n){throw wu(n,"updateDoc()","DocumentReference.update()")}}delete(){return function hVe(r){return PI(zr(r.firestore,Io),[new bI(r._key,qo.none())])}(this._delegate)}onSnapshot(...t){const e=Nfe(t),i=Bfe(t,n=>new vM(this.firestore,new ly(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)));return kfe(this._delegate,e,i)}get(t){let e;return e="cache"===t?.source?function rVe(r){r=zr(r,Do);const t=zr(r.firestore,Io),e=ja(t),i=new t0(t);return function wHe(r,t){const e=new wl;return r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return(i=(0,vt.Z)(function*(n,s,o){try{const a=yield function(l,h){const u=Ci(l);return u.persistence.runTransaction("read document","readonly",d=>u.localDocuments.getDocument(d,h))}(n,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new Bt(ut.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=kI(a,`Failed to get document '${s} from cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield Lj(r),t,e);var i})),e.promise}(e,r._key).then(n=>new ly(t,i,r._key,n,new RE(null!==n&&n.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===t?.source?function sVe(r){r=zr(r,Do);const t=zr(r.firestore,Io);return ofe(ja(t),r._key,{source:"server"}).then(e=>OY(t,r,e))}(this._delegate):function nVe(r){r=zr(r,Do);const t=zr(r.firestore,Io);return ofe(ja(t),r._key).then(e=>OY(t,r,e))}(this._delegate),e.then(i=>new vM(this.firestore,new ly(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new sp(this.firestore,this._delegate.withConverter(t?_E.getInstance(this.firestore,t):null))}}function wu(r,t,e){return r.message=r.message.replace(t,e),r}function Nfe(r){for(const t of r)if("object"==typeof t&&!MY(t))return t;return{}}function Bfe(r,t){var e,i;let n;return n=MY(r[0])?r[0]:MY(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:s=>{n.next&&n.next(t(s))},error:null===(e=n.error)||void 0===e?void 0:e.bind(n),complete:null===(i=n.complete)||void 0===i?void 0:i.bind(n)}}class vM{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new sp(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Dfe(this._delegate,t._delegate)}}class yM extends vM{data(t){const e=this._delegate.data(t);return function SFe(r,t){r||Gi()}(void 0!==e),e}}class Su{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Vj(t)}where(t,e,i){try{return new Su(this.firestore,JC(this._delegate,function GHe(r,t,e){const i=t,n=Bj("where",r);return new qHe(n,i,e)}(t,e,i)))}catch(n){throw wu(n,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Su(this.firestore,JC(this._delegate,function $He(r,t="asc"){const e=t,i=Bj("orderBy",r);return new KHe(i,e)}(t,e)))}catch(i){throw wu(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Su(this.firestore,JC(this._delegate,function YHe(r){return Ype("limit",r),new bfe("limit",r,"F")}(t)))}catch(e){throw wu(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Su(this.firestore,JC(this._delegate,function ZHe(r){return Ype("limitToLast",r),new bfe("limitToLast",r,"L")}(t)))}catch(e){throw wu(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Su(this.firestore,JC(this._delegate,function XHe(...r){return new Cfe("startAt",r,!0)}(...t)))}catch(e){throw wu(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Su(this.firestore,JC(this._delegate,function QHe(...r){return new Cfe("startAfter",r,!1)}(...t)))}catch(e){throw wu(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Su(this.firestore,JC(this._delegate,function JHe(...r){return new wfe("endBefore",r,!1)}(...t)))}catch(e){throw wu(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Su(this.firestore,JC(this._delegate,function eVe(...r){return new wfe("endAt",r,!0)}(...t)))}catch(e){throw wu(e,"endAt()","Query.endAt()")}}isEqual(t){return vY(this._delegate,t._delegate)}get(t){let e;return e="cache"===t?.source?function aVe(r){r=zr(r,jh);const t=zr(r.firestore,Io),e=ja(t),i=new t0(t);return function SHe(r,t){const e=new wl;return r.asyncQueue.enqueueAndForget((0,vt.Z)(function*(){return(i=(0,vt.Z)(function*(n,s,o){try{const a=yield Sj(n,s,!0),l=new Bpe(s,a.Hi),h=l.Wu(a.documents),u=l.applyChanges(h,!1);o.resolve(u.snapshot)}catch(a){const l=kI(a,`Failed to execute query '${s} against cache`);o.reject(l)}}),function(n,s,o){return i.apply(this,arguments)})(yield Lj(r),t,e);var i})),e.promise}(e,r._query).then(n=>new e0(t,i,r,n))}(this._delegate):"server"===t?.source?function lVe(r){r=zr(r,jh);const t=zr(r.firestore,Io),e=ja(t),i=new t0(t);return afe(e,r._query,{source:"server"}).then(n=>new e0(t,i,r,n))}(this._delegate):function oVe(r){r=zr(r,jh);const t=zr(r.firestore,Io),e=ja(t),i=new t0(t);return yfe(r._query),afe(e,r._query).then(n=>new e0(t,i,r,n))}(this._delegate),e.then(i=>new FY(this.firestore,new e0(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=Nfe(t),i=Bfe(t,n=>new FY(this.firestore,new e0(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)));return kfe(this._delegate,e,i)}withConverter(t){return new Su(this.firestore,this._delegate.withConverter(t?_E.getInstance(this.firestore,t):null))}}class TVe{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new yM(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class FY{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Su(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new yM(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new TVe(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new yM(this._firestore,i))})}isEqual(t){return Dfe(this._delegate,t._delegate)}}class MI extends Su{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new sp(this.firestore,t):null}doc(t){try{return new sp(this.firestore,void 0===t?kj(this._delegate):kj(this._delegate,t))}catch(e){throw wu(e,"doc()","CollectionReference.doc()")}}add(t){return function uVe(r,t){const e=zr(r.firestore,Io),i=kj(r),n=Hj(r.converter,t);return PI(e,[Mj(AE(r.firestore),"addDoc",i._key,n,null!==r.converter,{}).toMutation(i._key,qo.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new sp(this.firestore,e))}isEqual(t){return efe(this._delegate,t._delegate)}withConverter(t){return new MI(this.firestore,this._delegate.withConverter(t?_E.getInstance(this.firestore,t):null))}}function LE(r){return zr(r,Do)}class NY{constructor(...t){this._delegate=new ay(...t)}static documentId(){return new NY(Ta.keyField().canonicalString())}isEqual(t){return(t=(0,J.m9)(t))instanceof ay&&this._delegate._internalPath.isEqual(t._internalPath)}}class OE{constructor(t){this._delegate=t}static serverTimestamp(){const t=function mVe(){return new IY("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new OE(t)}static delete(){const t=function gVe(){return new dM("deleteField")}();return t._methodName="FieldValue.delete",new OE(t)}static arrayUnion(...t){const e=function vVe(...r){return new VHe("arrayUnion",r)}(...t);return e._methodName="FieldValue.arrayUnion",new OE(e)}static arrayRemove(...t){const e=function yVe(...r){return new zHe("arrayRemove",r)}(...t);return e._methodName="FieldValue.arrayRemove",new OE(e)}static increment(t){const e=function bVe(r){return new jHe("increment",r)}(t);return e._methodName="FieldValue.increment",new OE(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const DVe={Firestore:Pfe,GeoPoint:Oj,Timestamp:Wo,Blob:mM,Transaction:Mfe,WriteBatch:Ffe,DocumentReference:sp,DocumentSnapshot:vM,Query:Su,QueryDocumentSnapshot:yM,QuerySnapshot:FY,CollectionReference:MI,FieldPath:NY,FieldValue:OE,setLogLevel:function xVe(r){!function wFe(r){VC.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};function Hfe(r,t){return function kVe(r,t=$G.z){return new ba.y(e=>{let i;return null!=t?t.schedule(()=>{i=r.onSnapshot({includeMetadataChanges:!0},e)}):i=r.onSnapshot({includeMetadataChanges:!0},e),()=>{i?.()}})}(r,t)}function BY(r,t){return Hfe(r,t).pipe((0,qi.U)(e=>({payload:e,type:"query"})))}function zj(r,t){return BY(r,t).pipe(rw(void 0),G9(),(0,qi.U)(([e,i])=>{const n=i.payload.docChanges(),s=n.map(o=>({type:o.type,payload:o}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((o,a)=>{const l=n.find(u=>u.doc.ref.isEqual(o.ref)),h=e?.payload.docs.find(u=>u.ref.isEqual(o.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(o.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:a,newIndex:a,type:"modified",doc:o}})}),s}))}function Vfe(r,t,e){return zj(r,e).pipe(Cg((i,n)=>function _Ve(r,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(r=function LVe(r,t){switch(t.type){case"added":if(!r[t.newIndex]||!r[t.newIndex].doc.ref.isEqual(t.doc.ref))return HY(r,t.newIndex,0,t);break;case"modified":if(null==r[t.oldIndex]||r[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=r.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return HY(r,t.newIndex,1,t)}break;case"removed":if(r[t.oldIndex]&&r[t.oldIndex].doc.ref.isEqual(t.doc.ref))return HY(r,t.oldIndex,1)}return r}(r,i))}),r}(i,n.map(s=>s.payload),t),[]),_oe(),(0,qi.U)(i=>i.map(n=>({type:n.type,payload:n}))))}function HY(r,t,e,...i){const n=r.slice();return n.splice(t,e,...i),n}function zfe(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}!function AVe(r){(function IVe(r,t){r.INTERNAL.registerComponent(new Rf.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return t(i,n)},"PUBLIC").setServiceProps(Object.assign({},DVe)))})(r,(t,e)=>new Pfe(t,e,new EVe)),r.registerVersion("@firebase/firestore-compat","0.2.3")}(ZG.Z);class jfe{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=zj(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,qi.U)(i=>i.filter(n=>t.indexOf(n.type)>-1)))),e.pipe(rw(void 0),G9(),Rh(([i,n])=>n.length>0||!i),(0,qi.U)(([i,n])=>n),ls.iC)}auditTrail(t){return this.stateChanges(t).pipe(Cg((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=zfe(t);return Vfe(this.query,e,this.afs.schedulers.outsideAngular).pipe(ls.iC)}valueChanges(t={}){return BY(this.query,this.afs.schedulers.outsideAngular).pipe((0,qi.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),ls.iC)}get(t){return(0,Ur.D)(this.query.get(t)).pipe(ls.iC)}add(t){return this.ref.add(t)}doc(t){return new Ufe(this.ref.doc(t),this.afs)}}class Ufe{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:n,query:s}=Gfe(i,e);return new jfe(n,s,this.afs)}snapshotChanges(){return function RVe(r,t){return Hfe(r,t).pipe(rw(void 0),G9(),(0,qi.U)(([e,i])=>i.exists?e?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ls.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,qi.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ur.D)(this.ref.get(t)).pipe(ls.iC)}}class OVe{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?zj(this.query,this.afs.schedulers.outsideAngular).pipe((0,qi.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),Rh(e=>e.length>0),ls.iC):zj(this.query,this.afs.schedulers.outsideAngular).pipe(ls.iC)}auditTrail(t){return this.stateChanges(t).pipe(Cg((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=zfe(t);return Vfe(this.query,e,this.afs.schedulers.outsideAngular).pipe(ls.iC)}valueChanges(t={}){return BY(this.query,this.afs.schedulers.outsideAngular).pipe((0,qi.U)(i=>i.payload.docs.map(n=>t.idField?Object.assign({[t.idField]:n.id},n.data()):n.data())),ls.iC)}get(t){return(0,Ur.D)(this.query.get(t)).pipe(ls.iC)}}const Wfe=new b.OlP("angularfire2.enableFirestorePersistence"),qfe=new b.OlP("angularfire2.firestore.persistenceSettings"),PVe=new b.OlP("angularfire2.firestore.settings"),MVe=new b.OlP("angularfire2.firestore.use-emulator");function Gfe(r,t=(e=>e)){return{query:t(r),ref:r}}let FVe=(()=>{class r{constructor(e,i,n,s,o,a,l,h,u,d,m,v,C,S,A,_,M){this.schedulers=l;const P=(0,Cl.on)(e,a,i),B=u;d&&O9(P,a,m,C,S,A,v,_),[this.firestore,this.persistenceEnabled$]=(0,Cl.cc)(`${P.name}.firestore`,"AngularFirestore",P.name,()=>{const j=a.runOutsideAngular(()=>P.firestore());if(s&&j.settings(s),B&&j.useEmulator(...B),n&&!$a(o)){const G=()=>{try{return(0,Ur.D)(j.enablePersistence(h||void 0).then(()=>!0,()=>!1))}catch(ne){return typeof console<"u"&&console.warn(ne),Oi(!1)}};return[j,a.runOutsideAngular(G)]}return[j,Oi(!1)]},[s,B,n])}collection(e,i){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:o}=Gfe(n,i),a=this.schedulers.ngZone.run(()=>s);return new jfe(a,o,this)}collectionGroup(e,i){const n=i||(o=>o),s=this.firestore.collectionGroup(e);return new OVe(n(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>i);return new Ufe(n,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(e){return new(e||r)(b.LFG(Cl.Dh),b.LFG(Cl.xv,8),b.LFG(Wfe,8),b.LFG(PVe,8),b.LFG(b.Lbi),b.LFG(b.R0b),b.LFG(ls.HU),b.LFG(qfe,8),b.LFG(MVe,8),b.LFG(mz,8),b.LFG(I9,8),b.LFG(A9,8),b.LFG(k9,8),b.LFG(R9,8),b.LFG(_9,8),b.LFG(L9,8),b.LFG(lP,8))},r.\u0275prov=b.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})(),NVe=(()=>{class r{constructor(){gz.Z.registerVersion("angularfire",ls.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:r,providers:[{provide:Wfe,useValue:!0},{provide:qfe,useValue:e}]}}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r}),r.\u0275inj=b.cJS({providers:[FVe]}),r})(),BVe=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=b.oAB({type:r,bootstrap:[APe]}),r.\u0275inj=b.cJS({providers:[$Ae],imports:[y0,TPe,KAe,ZAe,u5,Cl.hO.initializeApp(uv_firebase),UOe,NVe,y1e,nPe,bA,Zm]}),r})();Xx("ORg4AjUWIQA/Gnt2VVhjQlFac1lJXGFWfVJpTGpQdk5xdV9DaVZUTWY/P1ZhSXxRd0djWn9XcXJXRWVcUkU="),xy().bootstrapModule(BVe).catch(r=>console.error(r))},6148:(Wi,kt,te)=>{te.d(kt,{IH:()=>qa,Gb:()=>Ko});var b=te(5861),Ve=te(9681),oe=te(1877),$e=te(2090),ot=te(4859);te(2833);const et="analytics",ct="firebase_id",Ce="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fe="https://www.googletagmanager.com/gtag/js",_t=new oe.Yd("@firebase/analytics");function bt(X){return Promise.all(X.map(ye=>ye.catch(ae=>ae)))}function Ct(X,ye){const ae=document.createElement("script");ae.src=`${Fe}?l=${X}&id=${ye}`,ae.async=!0,document.head.appendChild(ae)}function dt(X,ye,ae,Ye,yt,li){return st.apply(this,arguments)}function st(){return(st=(0,b.Z)(function*(X,ye,ae,Ye,yt,li){const Ri=Ye[yt];try{if(Ri)yield ye[Ri];else{const At=(yield bt(ae)).find(Ht=>Ht.measurementId===yt);At&&(yield ye[At.appId])}}catch(Hi){_t.error(Hi)}X("config",yt,li)})).apply(this,arguments)}function Mi(X,ye,ae,Ye,yt){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,b.Z)(function*(X,ye,ae,Ye,yt){try{let li=[];if(yt&&yt.send_to){let Ri=yt.send_to;Array.isArray(Ri)||(Ri=[Ri]);const Hi=yield bt(ae);for(const At of Ri){const Ht=Hi.find(jr=>jr.measurementId===At),Zi=Ht&&ye[Ht.appId];if(!Zi){li=[];break}li.push(Zi)}}0===li.length&&(li=Object.values(ye)),yield Promise.all(li),X("event",Ye,yt||{})}catch(li){_t.error(li)}})).apply(this,arguments)}function Et(X){const ye=window.document.getElementsByTagName("script");for(const ae of Object.values(ye))if(ae.src&&ae.src.includes(Fe)&&ae.src.includes(X))return ae;return null}const Vt=new $e.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ue=new class Oe{constructor(ye={},ae=1e3){this.throttleMetadata=ye,this.intervalMillis=ae}getThrottleMetadata(ye){return this.throttleMetadata[ye]}setThrottleMetadata(ye,ae){this.throttleMetadata[ye]=ae}deleteThrottleMetadata(ye){delete this.throttleMetadata[ye]}};function Xe(X){return new Headers({Accept:"application/json","x-goog-api-key":X})}function Ge(X){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,b.Z)(function*(X){var ye;const{appId:ae,apiKey:Ye}=X,yt={method:"GET",headers:Xe(Ye)},li=Ce.replace("{app-id}",ae),Ri=yield fetch(li,yt);if(200!==Ri.status&&304!==Ri.status){let Hi="";try{const At=yield Ri.json();null!==(ye=At.error)&&void 0!==ye&&ye.message&&(Hi=At.error.message)}catch{}throw Vt.create("config-fetch-failed",{httpStatus:Ri.status,responseMessage:Hi})}return Ri.json()})).apply(this,arguments)}function zt(X){return ji.apply(this,arguments)}function ji(){return(ji=(0,b.Z)(function*(X,ye=Ue,ae){const{appId:Ye,apiKey:yt,measurementId:li}=X.options;if(!Ye)throw Vt.create("no-app-id");if(!yt){if(li)return{measurementId:li,appId:Ye};throw Vt.create("no-api-key")}const Ri=ye.getThrottleMetadata(Ye)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Hi=new Es;return setTimeout((0,b.Z)(function*(){Hi.abort()}),void 0!==ae?ae:6e4),Jn({appId:Ye,apiKey:yt,measurementId:li},Ri,Hi,ye)})).apply(this,arguments)}function Jn(X,ye,ae){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,b.Z)(function*(X,{throttleEndTimeMillis:ye,backoffCount:ae},Ye,yt=Ue){var li,Ri;const{appId:Hi,measurementId:At}=X;try{yield oi(Ye,ye)}catch(Ht){if(At)return _t.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${At} provided in the "measurementId" field in the local Firebase config. [${null===(li=Ht)||void 0===li?void 0:li.message}]`),{appId:Hi,measurementId:At};throw Ht}try{const Ht=yield Ge(X);return yt.deleteThrottleMetadata(Hi),Ht}catch(Ht){const Zi=Ht;if(!yr(Zi)){if(yt.deleteThrottleMetadata(Hi),At)return _t.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${At} provided in the "measurementId" field in the local Firebase config. [${Zi?.message}]`),{appId:Hi,measurementId:At};throw Ht}const jr=503===Number(null===(Ri=Zi?.customData)||void 0===Ri?void 0:Ri.httpStatus)?(0,$e.$s)(ae,yt.intervalMillis,30):(0,$e.$s)(ae,yt.intervalMillis),xs={throttleEndTimeMillis:Date.now()+jr,backoffCount:ae+1};return yt.setThrottleMetadata(Hi,xs),_t.debug(`Calling attemptFetch again in ${jr} millis`),Jn(X,xs,Ye,yt)}})).apply(this,arguments)}function oi(X,ye){return new Promise((ae,Ye)=>{const yt=Math.max(ye-Date.now(),0),li=setTimeout(ae,yt);X.addEventListener(()=>{clearTimeout(li),Ye(Vt.create("fetch-throttle",{throttleEndTimeMillis:ye}))})})}function yr(X){if(!(X instanceof $e.ZR&&X.customData))return!1;const ye=Number(X.customData.httpStatus);return 429===ye||500===ye||503===ye||504===ye}class Es{constructor(){this.listeners=[]}addEventListener(ye){this.listeners.push(ye)}abort(){this.listeners.forEach(ye=>ye())}}let br,Aa;function Js(){return(Js=(0,b.Z)(function*(X,ye,ae,Ye,yt){if(yt&&yt.global)X("event",ae,Ye);else{const li=yield ye;X("event",ae,Object.assign(Object.assign({},Ye),{send_to:li}))}})).apply(this,arguments)}function mo(X){Aa=X}function Kl(X){br=X}function pi(){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,b.Z)(function*(){var X;if(!(0,$e.hl)())return _t.warn(Vt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,$e.eu)()}catch(ye){return _t.warn(Vt.create("indexeddb-unavailable",{errorInfo:null===(X=ye)||void 0===X?void 0:X.toString()}).message),!1}return!0})).apply(this,arguments)}function ys(){return(ys=(0,b.Z)(function*(X,ye,ae,Ye,yt,li,Ri){var Hi;const At=zt(X);At.then(Cr=>{ae[Cr.measurementId]=Cr.appId,X.options.measurementId&&Cr.measurementId!==X.options.measurementId&&_t.warn(`The measurement ID in the local Firebase config (${X.options.measurementId}) does not match the measurement ID fetched from the server (${Cr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Cr=>_t.error(Cr)),ye.push(At);const Ht=pi().then(Cr=>{if(Cr)return Ye.getId()}),[Zi,jr]=yield Promise.all([At,Ht]);Et(li)||Ct(li,Zi.measurementId),Aa&&(yt("consent","default",Aa),mo(void 0)),yt("js",new Date);const xs=null!==(Hi=Ri?.config)&&void 0!==Hi?Hi:{};return xs.origin="firebase",xs.update=!0,null!=jr&&(xs[ct]=jr),yt("config",Zi.measurementId,xs),br&&(yt("set",br),Kl(void 0)),Zi.measurementId})).apply(this,arguments)}class ka{constructor(ye){this.app=ye}_delete(){return delete eo[this.app.options.appId],Promise.resolve()}}let eo={},cs=[];const Fs={};let _i,xn,pr="dataLayer",Dr=!1;function pn(X,ye,ae){!function ko(){const X=[];if((0,$e.ru)()&&X.push("This is a browser extension environment."),(0,$e.zI)()||X.push("Cookies are not available."),X.length>0){const ye=X.map((Ye,yt)=>`(${yt+1}) ${Ye}`).join(" "),ae=Vt.create("invalid-analytics-context",{errorInfo:ye});_t.warn(ae.message)}}();const Ye=X.options.appId;if(!Ye)throw Vt.create("no-app-id");if(!X.options.apiKey){if(!X.options.measurementId)throw Vt.create("no-api-key");_t.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${X.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=eo[Ye])throw Vt.create("already-exists",{id:Ye});if(!Dr){!function di(X){let ye=[];Array.isArray(window[X])?ye=window[X]:window[X]=ye}(pr);const{wrappedGtag:li,gtagCore:Ri}=function gt(X,ye,ae,Ye,yt){let li=function(...Ri){window[Ye].push(arguments)};return window[yt]&&"function"==typeof window[yt]&&(li=window[yt]),window[yt]=function Rt(X,ye,ae,Ye){function li(){return(li=(0,b.Z)(function*(Ri,Hi,At){try{"event"===Ri?yield Mi(X,ye,ae,Hi,At):"config"===Ri?yield dt(X,ye,ae,Ye,Hi,At):"consent"===Ri?X("consent","update",At):X("set",Hi)}catch(Ht){_t.error(Ht)}})).apply(this,arguments)}return function yt(Ri,Hi,At){return li.apply(this,arguments)}}(li,X,ye,ae),{gtagCore:li,wrappedGtag:window[yt]}}(eo,cs,Fs,pr,"gtag");xn=li,_i=Ri,Dr=!0}return eo[Ye]=function El(X,ye,ae,Ye,yt,li,Ri){return ys.apply(this,arguments)}(X,cs,Fs,ye,_i,pr,ae),new ka(X)}function qa(X=(0,Ve.getApp)()){X=(0,$e.m9)(X);const ye=(0,Ve._getProvider)(X,et);return ye.isInitialized()?ye.getImmediate():function Kn(X,ye={}){const ae=(0,Ve._getProvider)(X,et);if(ae.isInitialized()){const yt=ae.getImmediate();if((0,$e.vZ)(ye,ae.getOptions()))return yt;throw Vt.create("already-initialized")}return ae.initialize({options:ye})}(X)}function Ko(){return er.apply(this,arguments)}function er(){return(er=(0,b.Z)(function*(){if((0,$e.ru)()||!(0,$e.zI)()||!(0,$e.hl)())return!1;try{return yield(0,$e.eu)()}catch{return!1}})).apply(this,arguments)}const Tn="@firebase/analytics";!function de(){(0,Ve._registerComponent)(new ot.wA(et,(ye,{options:ae})=>pn(ye.getProvider("app").getImmediate(),ye.getProvider("installations-internal").getImmediate(),ae),"PUBLIC")),(0,Ve._registerComponent)(new ot.wA("analytics-internal",function X(ye){try{const ae=ye.getProvider(et).getImmediate();return{logEvent:(Ye,yt,li)=>function an(X,ye,ae,Ye){X=(0,$e.m9)(X),function lr(X,ye,ae,Ye,yt){return Js.apply(this,arguments)}(xn,eo[X.app.options.appId],ye,ae,Ye).catch(yt=>_t.error(yt))}(ae,Ye,yt,li)}}catch(ae){throw Vt.create("interop-component-reg-failed",{reason:ae})}},"PRIVATE")),(0,Ve.registerVersion)(Tn,"0.8.4"),(0,Ve.registerVersion)(Tn,"0.8.4","esm2017")}()},5867:(Wi,kt,te)=>{te.d(kt,{C6:()=>b.getApps,Mq:()=>b.getApp,ZF:()=>b.initializeApp});var b=te(9681);(0,b.registerVersion)("firebase","9.14.0","app")},127:(Wi,kt,te)=>{te.d(kt,{Z:()=>b.Z});var b=te(3942);b.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(Wi,kt,te)=>{te.r(kt);var b=te(5861),Ve=te(3942),oe=te(2090),$e=te(9681),ot=te(1877),ht=te(655),et=te(4859);const Ct=function _t(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},di=function bt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},dt=new oe.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Mi=new ot.Yd("@firebase/auth");function Ei(k,...x){Mi.logLevel<=ot.in.ERROR&&Mi.error(`Auth (${$e.SDK_VERSION}): ${k}`,...x)}function Rt(k,...x){throw Vt(k,...x)}function gt(k,...x){return Vt(k,...x)}function Et(k,x,I){const L=Object.assign(Object.assign({},di()),{[x]:I});return new oe.LL("auth","Firebase",L).create(x,{appName:k.name})}function Jt(k,x,I){if(!(x instanceof I))throw I.name!==x.constructor.name&&Rt(k,"argument-error"),Et(k,"argument-error",`Type of ${x.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Vt(k,...x){if("string"!=typeof k){const I=x[0],L=[...x.slice(1)];return L[0]&&(L[0].appName=k.name),k._errorFactory.create(I,...L)}return dt.create(k,...x)}function ge(k,x,...I){if(!k)throw Vt(x,...I)}function ft(k){const x="INTERNAL ASSERTION FAILED: "+k;throw Ei(x),new Error(x)}function Oe(k,x){k||ft(x)}const Ue=new Map;function Xe(k){Oe(k instanceof Function,"Expected a class definition");let x=Ue.get(k);return x?(Oe(x instanceof k,"Instance stored in cache mismatched with class"),x):(x=new k,Ue.set(k,x),x)}function zt(){var k;return typeof self<"u"&&(null===(k=self.location)||void 0===k?void 0:k.href)||""}function ji(){return"http:"===Jn()||"https:"===Jn()}function Jn(){var k;return typeof self<"u"&&(null===(k=self.location)||void 0===k?void 0:k.protocol)||null}class yr{constructor(x,I){this.shortDelay=x,this.longDelay=I,Oe(I>x,"Short delay should be less than long delay!"),this.isMobile=(0,oe.uI)()||(0,oe.b$)()}get(){return function Sn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ji()||(0,oe.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Es(k,x){Oe(k.emulator,"Emulator should always be set here");const{url:I}=k.emulator;return x?`${I}${x.startsWith("/")?x.slice(1):x}`:I}class br{static initialize(x,I,L){this.fetchImpl=x,I&&(this.headersImpl=I),L&&(this.responseImpl=L)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ft("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ft("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ft("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Js=new yr(3e4,6e4);function nn(k,x){return k.tenantId&&!x.tenantId?Object.assign(Object.assign({},x),{tenantId:k.tenantId}):x}function Mn(k,x,I,L){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,b.Z)(function*(k,x,I,L,W={}){return Gl(k,W,(0,b.Z)(function*(){let $={},De={};L&&("GET"===x?De=L:$={body:JSON.stringify(L)});const lt=(0,oe.xO)(Object.assign({key:k.config.apiKey},De)).slice(1),Xt=yield k._getAdditionalHeaders();return Xt["Content-Type"]="application/json",k.languageCode&&(Xt["X-Firebase-Locale"]=k.languageCode),br.fetch()(go(k,k.config.apiHost,I,lt),Object.assign({method:x,headers:Xt,referrerPolicy:"no-referrer"},$))}))})).apply(this,arguments)}function Gl(k,x,I){return Go.apply(this,arguments)}function Go(){return(Go=(0,b.Z)(function*(k,x,I){k._canInitEmulator=!1;const L=Object.assign(Object.assign({},lr),x);try{const W=new Aa(k),$=yield Promise.race([I(),W.promise]);W.clearNetworkTimeout();const De=yield $.json();if("needConfirmation"in De)throw mo(k,"account-exists-with-different-credential",De);if($.ok&&!("errorMessage"in De))return De;{const lt=$.ok?De.errorMessage:De.error.message,[Xt,Di]=lt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Xt)throw mo(k,"credential-already-in-use",De);if("EMAIL_EXISTS"===Xt)throw mo(k,"email-already-in-use",De);if("USER_DISABLED"===Xt)throw mo(k,"user-disabled",De);const hn=L[Xt]||Xt.toLowerCase().replace(/[_\s]+/g,"-");if(Di)throw Et(k,hn,Di);Rt(k,hn)}}catch(W){if(W instanceof oe.ZR)throw W;Rt(k,"network-request-failed")}})).apply(this,arguments)}function us(k,x,I,L){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,b.Z)(function*(k,x,I,L,W={}){const $=yield Mn(k,x,I,L,W);return"mfaPendingCredential"in $&&Rt(k,"multi-factor-auth-required",{_serverResponse:$}),$})).apply(this,arguments)}function go(k,x,I,L){const W=`${x}${I}?${L}`;return k.config.emulator?Es(k.config,W):`${k.config.apiScheme}://${W}`}class Aa{constructor(x){this.auth=x,this.timer=null,this.promise=new Promise((I,L)=>{this.timer=setTimeout(()=>L(gt(this.auth,"network-request-failed")),Js.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function mo(k,x,I){const L={appName:k.name};I.email&&(L.email=I.email),I.phoneNumber&&(L.phoneNumber=I.phoneNumber);const W=gt(k,x,L);return W.customData._tokenResponse=I,W}function pi(){return(pi=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:delete",x)})).apply(this,arguments)}function Jr(k,x){return El.apply(this,arguments)}function El(){return(El=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function ys(k,x){return ka.apply(this,arguments)}function ka(){return(ka=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:lookup",x)})).apply(this,arguments)}function eo(k){if(k)try{const x=new Date(Number(k));if(!isNaN(x.getTime()))return x.toUTCString()}catch{}}function pr(){return(pr=(0,b.Z)(function*(k,x=!1){const I=(0,oe.m9)(k),L=yield I.getIdToken(x),W=_i(L);ge(W&&W.exp&&W.auth_time&&W.iat,I.auth,"internal-error");const $="object"==typeof W.firebase?W.firebase:void 0,De=$?.sign_in_provider;return{claims:W,token:L,authTime:eo(Ki(W.auth_time)),issuedAtTime:eo(Ki(W.iat)),expirationTime:eo(Ki(W.exp)),signInProvider:De||null,signInSecondFactor:$?.sign_in_second_factor||null}})).apply(this,arguments)}function Ki(k){return 1e3*Number(k)}function _i(k){var x;const[I,L,W]=k.split(".");if(void 0===I||void 0===L||void 0===W)return Ei("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,oe.tV)(L);return $?JSON.parse($):(Ei("Failed to decode base64 JWT payload"),null)}catch($){return Ei("Caught error parsing JWT payload as JSON",null===(x=$)||void 0===x?void 0:x.toString()),null}}function Dr(k,x){return qs.apply(this,arguments)}function qs(){return(qs=(0,b.Z)(function*(k,x,I=!1){if(I)return x;try{return yield x}catch(L){throw L instanceof oe.ZR&&ko(L)&&k.auth.currentUser===k&&(yield k.auth.signOut()),L}})).apply(this,arguments)}function ko({code:k}){return"auth/user-disabled"===k||"auth/user-token-expired"===k}class pn{constructor(x){this.user=x,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(x){var I;if(x){const L=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),L}{this.errorBackoff=3e4;const W=(null!==(I=this.user.stsTokenManager.expirationTime)&&void 0!==I?I:0)-Date.now()-3e5;return Math.max(0,W)}}schedule(x=!1){var I=this;if(!this.isRunning)return;const L=this.getInterval(x);this.timerId=setTimeout((0,b.Z)(function*(){yield I.iteration()}),L)}iteration(){var x=this;return(0,b.Z)(function*(){var I;try{yield x.user.getIdToken(!0)}catch(L){return void("auth/network-request-failed"===(null===(I=L)||void 0===I?void 0:I.code)&&x.schedule(!0))}x.schedule()})()}}class qa{constructor(x,I){this.createdAt=x,this.lastLoginAt=I,this._initializeTime()}_initializeTime(){this.lastSignInTime=eo(this.lastLoginAt),this.creationTime=eo(this.createdAt)}_copy(x){this.createdAt=x.createdAt,this.lastLoginAt=x.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kn(k){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,b.Z)(function*(k){var x;const I=k.auth,L=yield k.getIdToken(),W=yield Dr(k,ys(I,{idToken:L}));ge(W?.users.length,I,"internal-error");const $=W.users[0];k._notifyReloadListener($);const De=null!==(x=$.providerUserInfo)&&void 0!==x&&x.length?fi($.providerUserInfo):[],lt=ga(k.providerData,De),hn=!!k.isAnonymous&&!(k.email&&$.passwordHash||lt?.length),un={uid:$.localId,displayName:$.displayName||null,photoURL:$.photoUrl||null,email:$.email||null,emailVerified:$.emailVerified||!1,phoneNumber:$.phoneNumber||null,tenantId:$.tenantId||null,providerData:lt,metadata:new qa($.createdAt,$.lastLoginAt),isAnonymous:hn};Object.assign(k,un)})).apply(this,arguments)}function Gs(){return(Gs=(0,b.Z)(function*(k){const x=(0,oe.m9)(k);yield Kn(x),yield x.auth._persistUserIfCurrent(x),x.auth._notifyListenersIfCurrent(x)})).apply(this,arguments)}function ga(k,x){return[...k.filter(L=>!x.some(W=>W.providerId===L.providerId)),...x]}function fi(k){return k.map(x=>{var{providerId:I}=x,L=(0,ht._T)(x,["providerId"]);return{providerId:I,uid:L.rawId||"",displayName:L.displayName||null,email:L.email||null,phoneNumber:L.phoneNumber||null,photoURL:L.photoUrl||null}})}function wi(){return(wi=(0,b.Z)(function*(k,x){const I=yield Gl(k,{},(0,b.Z)(function*(){const L=(0,oe.xO)({grant_type:"refresh_token",refresh_token:x}).slice(1),{tokenApiHost:W,apiKey:$}=k.config,De=go(k,W,"/v1/token",`key=${$}`),lt=yield k._getAdditionalHeaders();return lt["Content-Type"]="application/x-www-form-urlencoded",br.fetch()(De,{method:"POST",headers:lt,body:L})}));return{accessToken:I.access_token,expiresIn:I.expires_in,refreshToken:I.refresh_token}})).apply(this,arguments)}class an{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(x){ge(x.idToken,"internal-error"),ge(typeof x.idToken<"u","internal-error"),ge(typeof x.refreshToken<"u","internal-error");const I="expiresIn"in x&&typeof x.expiresIn<"u"?Number(x.expiresIn):function xn(k){const x=_i(k);return ge(x,"internal-error"),ge(typeof x.exp<"u","internal-error"),ge(typeof x.iat<"u","internal-error"),Number(x.exp)-Number(x.iat)}(x.idToken);this.updateTokensAndExpiration(x.idToken,x.refreshToken,I)}getToken(x,I=!1){var L=this;return(0,b.Z)(function*(){return ge(!L.accessToken||L.refreshToken,x,"user-token-expired"),I||!L.accessToken||L.isExpired?L.refreshToken?(yield L.refresh(x,L.refreshToken),L.accessToken):null:L.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(x,I){var L=this;return(0,b.Z)(function*(){const{accessToken:W,refreshToken:$,expiresIn:De}=yield function It(k,x){return wi.apply(this,arguments)}(x,I);L.updateTokensAndExpiration(W,$,Number(De))})()}updateTokensAndExpiration(x,I,L){this.refreshToken=I||null,this.accessToken=x||null,this.expirationTime=Date.now()+1e3*L}static fromJSON(x,I){const{refreshToken:L,accessToken:W,expirationTime:$}=I,De=new an;return L&&(ge("string"==typeof L,"internal-error",{appName:x}),De.refreshToken=L),W&&(ge("string"==typeof W,"internal-error",{appName:x}),De.accessToken=W),$&&(ge("number"==typeof $,"internal-error",{appName:x}),De.expirationTime=$),De}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(x){this.accessToken=x.accessToken,this.refreshToken=x.refreshToken,this.expirationTime=x.expirationTime}_clone(){return Object.assign(new an,this.toJSON())}_performRefresh(){return ft("not implemented")}}function ln(k,x){ge("string"==typeof k||typeof k>"u","internal-error",{appName:x})}class Tn{constructor(x){var{uid:I,auth:L,stsTokenManager:W}=x,$=(0,ht._T)(x,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=I,this.auth=L,this.stsTokenManager=W,this.accessToken=W.accessToken,this.displayName=$.displayName||null,this.email=$.email||null,this.emailVerified=$.emailVerified||!1,this.phoneNumber=$.phoneNumber||null,this.photoURL=$.photoURL||null,this.isAnonymous=$.isAnonymous||!1,this.tenantId=$.tenantId||null,this.providerData=$.providerData?[...$.providerData]:[],this.metadata=new qa($.createdAt||void 0,$.lastLoginAt||void 0)}getIdToken(x){var I=this;return(0,b.Z)(function*(){const L=yield Dr(I,I.stsTokenManager.getToken(I.auth,x));return ge(L,I.auth,"internal-error"),I.accessToken!==L&&(I.accessToken=L,yield I.auth._persistUserIfCurrent(I),I.auth._notifyListenersIfCurrent(I)),L})()}getIdTokenResult(x){return function Fs(k){return pr.apply(this,arguments)}(this,x)}reload(){return function er(k){return Gs.apply(this,arguments)}(this)}_assign(x){this!==x&&(ge(this.uid===x.uid,this.auth,"internal-error"),this.displayName=x.displayName,this.photoURL=x.photoURL,this.email=x.email,this.emailVerified=x.emailVerified,this.phoneNumber=x.phoneNumber,this.isAnonymous=x.isAnonymous,this.tenantId=x.tenantId,this.providerData=x.providerData.map(I=>Object.assign({},I)),this.metadata._copy(x.metadata),this.stsTokenManager._assign(x.stsTokenManager))}_clone(x){return new Tn(Object.assign(Object.assign({},this),{auth:x,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(x){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=x,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(x){this.reloadListener?this.reloadListener(x):this.reloadUserInfo=x}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(x,I=!1){var L=this;return(0,b.Z)(function*(){let W=!1;x.idToken&&x.idToken!==L.stsTokenManager.accessToken&&(L.stsTokenManager.updateFromServerResponse(x),W=!0),I&&(yield Kn(L)),yield L.auth._persistUserIfCurrent(L),W&&L.auth._notifyListenersIfCurrent(L)})()}delete(){var x=this;return(0,b.Z)(function*(){const I=yield x.getIdToken();return yield Dr(x,function Kl(k,x){return pi.apply(this,arguments)}(x.auth,{idToken:I})),x.stsTokenManager.clearRefreshToken(),x.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(x=>Object.assign({},x)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(x,I){var L,W,$,De,lt,Xt,Di,hn;const un=null!==(L=I.displayName)&&void 0!==L?L:void 0,Ca=null!==(W=I.email)&&void 0!==W?W:void 0,kh=null!==($=I.phoneNumber)&&void 0!==$?$:void 0,Qy=null!==(De=I.photoURL)&&void 0!==De?De:void 0,bA=null!==(lt=I.tenantId)&&void 0!==lt?lt:void 0,Zm=null!==(Xt=I._redirectEventId)&&void 0!==Xt?Xt:void 0,CA=null!==(Di=I.createdAt)&&void 0!==Di?Di:void 0,BM=null!==(hn=I.lastLoginAt)&&void 0!==hn?hn:void 0,{uid:wA,emailVerified:HM,isAnonymous:VM,providerData:hx,stsTokenManager:ux}=I;ge(wA&&ux,x,"internal-error");const cx=an.fromJSON(this.name,ux);ge("string"==typeof wA,x,"internal-error"),ln(un,x.name),ln(Ca,x.name),ge("boolean"==typeof HM,x,"internal-error"),ge("boolean"==typeof VM,x,"internal-error"),ln(kh,x.name),ln(Qy,x.name),ln(bA,x.name),ln(Zm,x.name),ln(CA,x.name),ln(BM,x.name);const Oi=new Tn({uid:wA,auth:x,email:Ca,emailVerified:HM,displayName:un,isAnonymous:VM,photoURL:Qy,phoneNumber:kh,tenantId:bA,stsTokenManager:cx,createdAt:CA,lastLoginAt:BM});return hx&&Array.isArray(hx)&&(Oi.providerData=hx.map(Za=>Object.assign({},Za))),Zm&&(Oi._redirectEventId=Zm),Oi}static _fromIdTokenResponse(x,I,L=!1){return(0,b.Z)(function*(){const W=new an;W.updateFromServerResponse(I);const $=new Tn({uid:I.localId,auth:x,stsTokenManager:W,isAnonymous:L});return yield Kn($),$})()}}const de=(()=>{class k{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.Z)(function*(){return!0})()}_set(I,L){var W=this;return(0,b.Z)(function*(){W.storage[I]=L})()}_get(I){var L=this;return(0,b.Z)(function*(){const W=L.storage[I];return void 0===W?null:W})()}_remove(I){var L=this;return(0,b.Z)(function*(){delete L.storage[I]})()}_addListener(I,L){}_removeListener(I,L){}}return k.type="NONE",k})();function X(k,x,I){return`firebase:${k}:${x}:${I}`}class ye{constructor(x,I,L){this.persistence=x,this.auth=I,this.userKey=L;const{config:W,name:$}=this.auth;this.fullUserKey=X(this.userKey,W.apiKey,$),this.fullPersistenceKey=X("persistence",W.apiKey,$),this.boundEventHandler=I._onStorageEvent.bind(I),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(x){return this.persistence._set(this.fullUserKey,x.toJSON())}getCurrentUser(){var x=this;return(0,b.Z)(function*(){const I=yield x.persistence._get(x.fullUserKey);return I?Tn._fromJSON(x.auth,I):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(x){var I=this;return(0,b.Z)(function*(){if(I.persistence===x)return;const L=yield I.getCurrentUser();return yield I.removeCurrentUser(),I.persistence=x,L?I.setCurrentUser(L):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(x,I,L="authUser"){return(0,b.Z)(function*(){if(!I.length)return new ye(Xe(de),x,L);const W=(yield Promise.all(I.map(function(){var Di=(0,b.Z)(function*(hn){if(yield hn._isAvailable())return hn});return function(hn){return Di.apply(this,arguments)}}()))).filter(Di=>Di);let $=W[0]||Xe(de);const De=X(L,x.config.apiKey,x.name);let lt=null;for(const Di of I)try{const hn=yield Di._get(De);if(hn){const un=Tn._fromJSON(x,hn);Di!==$&&(lt=un),$=Di;break}}catch{}const Xt=W.filter(Di=>Di._shouldAllowMigration);return $._shouldAllowMigration&&Xt.length?($=Xt[0],lt&&(yield $._set(De,lt.toJSON())),yield Promise.all(I.map(function(){var Di=(0,b.Z)(function*(hn){if(hn!==$)try{yield hn._remove(De)}catch{}});return function(hn){return Di.apply(this,arguments)}}())),new ye($,x,L)):new ye($,x,L)})()}}function ae(k){const x=k.toLowerCase();if(x.includes("opera/")||x.includes("opr/")||x.includes("opios/"))return"Opera";if(Ri(x))return"IEMobile";if(x.includes("msie")||x.includes("trident/"))return"IE";if(x.includes("edge/"))return"Edge";if(Ye(x))return"Firefox";if(x.includes("silk/"))return"Silk";if(At(x))return"Blackberry";if(Ht(x))return"Webos";if(yt(x))return"Safari";if((x.includes("chrome/")||li(x))&&!x.includes("edge/"))return"Chrome";if(Hi(x))return"Android";{const L=k.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===L?.length)return L[1]}return"Other"}function Ye(k=(0,oe.z$)()){return/firefox\//i.test(k)}function yt(k=(0,oe.z$)()){const x=k.toLowerCase();return x.includes("safari/")&&!x.includes("chrome/")&&!x.includes("crios/")&&!x.includes("android")}function li(k=(0,oe.z$)()){return/crios\//i.test(k)}function Ri(k=(0,oe.z$)()){return/iemobile/i.test(k)}function Hi(k=(0,oe.z$)()){return/android/i.test(k)}function At(k=(0,oe.z$)()){return/blackberry/i.test(k)}function Ht(k=(0,oe.z$)()){return/webos/i.test(k)}function Zi(k=(0,oe.z$)()){return/iphone|ipad|ipod/i.test(k)||/macintosh/i.test(k)&&/mobile/i.test(k)}function $l(k=(0,oe.z$)()){return Zi(k)||Hi(k)||Ht(k)||At(k)||/windows phone/i.test(k)||Ri(k)}function Sh(k,x=[]){let I;switch(k){case"Browser":I=ae((0,oe.z$)());break;case"Worker":I=`${ae((0,oe.z$)())}-${k}`;break;default:I=k}const L=x.length?x.join(","):"FirebaseCore-web";return`${I}/JsCore/${$e.SDK_VERSION}/${L}`}class Eu{constructor(x){this.auth=x,this.queue=[]}pushCallback(x,I){const L=$=>new Promise((De,lt)=>{try{De(x($))}catch(Xt){lt(Xt)}});L.onAbort=I,this.queue.push(L);const W=this.queue.length-1;return()=>{this.queue[W]=()=>Promise.resolve()}}runMiddleware(x){var I=this;return(0,b.Z)(function*(){var L;if(I.auth.currentUser===x)return;const W=[];try{for(const $ of I.queue)yield $(x),$.onAbort&&W.push($.onAbort)}catch($){W.reverse();for(const De of W)try{De()}catch{}throw I.auth._errorFactory.create("login-blocked",{originalMessage:null===(L=$)||void 0===L?void 0:L.message})}})()}}class An{constructor(x,I,L){this.app=x,this.heartbeatServiceProvider=I,this.config=L,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pt(this),this.idTokenSubscription=new pt(this),this.beforeStateQueue=new Eu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=x.name,this.clientVersion=L.sdkClientVersion}_initializeWithPersistence(x,I){var L=this;return I&&(this._popupRedirectResolver=Xe(I)),this._initializationPromise=this.queue((0,b.Z)(function*(){var W,$;if(!L._deleted&&(L.persistenceManager=yield ye.create(L,x),!L._deleted)){if(null!==(W=L._popupRedirectResolver)&&void 0!==W&&W._shouldInitProactively)try{yield L._popupRedirectResolver._initialize(L)}catch{}yield L.initializeCurrentUser(I),L.lastNotifiedUid=(null===($=L.currentUser)||void 0===$?void 0:$.uid)||null,!L._deleted&&(L._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var x=this;return(0,b.Z)(function*(){if(x._deleted)return;const I=yield x.assertedPersistence.getCurrentUser();if(x.currentUser||I){if(x.currentUser&&I&&x.currentUser.uid===I.uid)return x._currentUser._assign(I),void(yield x.currentUser.getIdToken());yield x._updateCurrentUser(I,!0)}})()}initializeCurrentUser(x){var I=this;return(0,b.Z)(function*(){var L;const W=yield I.assertedPersistence.getCurrentUser();let $=W,De=!1;if(x&&I.config.authDomain){yield I.getOrInitRedirectPersistenceManager();const lt=null===(L=I.redirectUser)||void 0===L?void 0:L._redirectEventId,Xt=$?._redirectEventId,Di=yield I.tryRedirectSignIn(x);(!lt||lt===Xt)&&Di?.user&&($=Di.user,De=!0)}if(!$)return I.directlySetCurrentUser(null);if(!$._redirectEventId){if(De)try{yield I.beforeStateQueue.runMiddleware($)}catch(lt){$=W,I._popupRedirectResolver._overrideRedirectResult(I,()=>Promise.reject(lt))}return $?I.reloadAndSetCurrentUserOrClear($):I.directlySetCurrentUser(null)}return ge(I._popupRedirectResolver,I,"argument-error"),yield I.getOrInitRedirectPersistenceManager(),I.redirectUser&&I.redirectUser._redirectEventId===$._redirectEventId?I.directlySetCurrentUser($):I.reloadAndSetCurrentUserOrClear($)})()}tryRedirectSignIn(x){var I=this;return(0,b.Z)(function*(){let L=null;try{L=yield I._popupRedirectResolver._completeRedirectFn(I,x,!0)}catch{yield I._setRedirectUser(null)}return L})()}reloadAndSetCurrentUserOrClear(x){var I=this;return(0,b.Z)(function*(){var L;try{yield Kn(x)}catch(W){if("auth/network-request-failed"!==(null===(L=W)||void 0===L?void 0:L.code))return I.directlySetCurrentUser(null)}return I.directlySetCurrentUser(x)})()}useDeviceLanguage(){this.languageCode=function oi(){if(typeof navigator>"u")return null;const k=navigator;return k.languages&&k.languages[0]||k.language||null}()}_delete(){var x=this;return(0,b.Z)(function*(){x._deleted=!0})()}updateCurrentUser(x){var I=this;return(0,b.Z)(function*(){const L=x?(0,oe.m9)(x):null;return L&&ge(L.auth.config.apiKey===I.config.apiKey,I,"invalid-user-token"),I._updateCurrentUser(L&&L._clone(I))})()}_updateCurrentUser(x,I=!1){var L=this;return(0,b.Z)(function*(){if(!L._deleted)return x&&ge(L.tenantId===x.tenantId,L,"tenant-id-mismatch"),I||(yield L.beforeStateQueue.runMiddleware(x)),L.queue((0,b.Z)(function*(){yield L.directlySetCurrentUser(x),L.notifyAuthListeners()}))})()}signOut(){var x=this;return(0,b.Z)(function*(){return yield x.beforeStateQueue.runMiddleware(null),(x.redirectPersistenceManager||x._popupRedirectResolver)&&(yield x._setRedirectUser(null)),x._updateCurrentUser(null,!0)})()}setPersistence(x){var I=this;return this.queue((0,b.Z)(function*(){yield I.assertedPersistence.setPersistence(Xe(x))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(x){this._errorFactory=new oe.LL("auth","Firebase",x())}onAuthStateChanged(x,I,L){return this.registerStateListener(this.authStateSubscription,x,I,L)}beforeAuthStateChanged(x,I){return this.beforeStateQueue.pushCallback(x,I)}onIdTokenChanged(x,I,L){return this.registerStateListener(this.idTokenSubscription,x,I,L)}toJSON(){var x;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(x=this._currentUser)||void 0===x?void 0:x.toJSON()}}_setRedirectUser(x,I){var L=this;return(0,b.Z)(function*(){const W=yield L.getOrInitRedirectPersistenceManager(I);return null===x?W.removeCurrentUser():W.setCurrentUser(x)})()}getOrInitRedirectPersistenceManager(x){var I=this;return(0,b.Z)(function*(){if(!I.redirectPersistenceManager){const L=x&&Xe(x)||I._popupRedirectResolver;ge(L,I,"argument-error"),I.redirectPersistenceManager=yield ye.create(I,[Xe(L._redirectPersistence)],"redirectUser"),I.redirectUser=yield I.redirectPersistenceManager.getCurrentUser()}return I.redirectPersistenceManager})()}_redirectUserForId(x){var I=this;return(0,b.Z)(function*(){var L,W;return I._isInitialized&&(yield I.queue((0,b.Z)(function*(){}))),(null===(L=I._currentUser)||void 0===L?void 0:L._redirectEventId)===x?I._currentUser:(null===(W=I.redirectUser)||void 0===W?void 0:W._redirectEventId)===x?I.redirectUser:null})()}_persistUserIfCurrent(x){var I=this;return(0,b.Z)(function*(){if(x===I.currentUser)return I.queue((0,b.Z)(function*(){return I.directlySetCurrentUser(x)}))})()}_notifyListenersIfCurrent(x){x===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var x,I;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const L=null!==(I=null===(x=this.currentUser)||void 0===x?void 0:x.uid)&&void 0!==I?I:null;this.lastNotifiedUid!==L&&(this.lastNotifiedUid=L,this.authStateSubscription.next(this.currentUser))}registerStateListener(x,I,L,W){if(this._deleted)return()=>{};const $="function"==typeof I?I:I.next.bind(I),De=this._isInitialized?Promise.resolve():this._initializationPromise;return ge(De,this,"internal-error"),De.then(()=>$(this.currentUser)),"function"==typeof I?x.addObserver(I,L,W):x.addObserver(I)}directlySetCurrentUser(x){var I=this;return(0,b.Z)(function*(){I.currentUser&&I.currentUser!==x&&I._currentUser._stopProactiveRefresh(),x&&I.isProactiveRefreshEnabled&&x._startProactiveRefresh(),I.currentUser=x,x?yield I.assertedPersistence.setCurrentUser(x):yield I.assertedPersistence.removeCurrentUser()})()}queue(x){return this.operations=this.operations.then(x,x),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(x){!x||this.frameworks.includes(x)||(this.frameworks.push(x),this.frameworks.sort(),this.clientVersion=Sh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var x=this;return(0,b.Z)(function*(){var I;const L={"X-Client-Version":x.clientVersion};x.app.options.appId&&(L["X-Firebase-gmpid"]=x.app.options.appId);const W=yield null===(I=x.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===I?void 0:I.getHeartbeatsHeader();return W&&(L["X-Firebase-Client"]=W),L})()}}function _e(k){return(0,oe.m9)(k)}class pt{constructor(x){this.auth=x,this.observer=null,this.addObserver=(0,oe.ne)(I=>this.observer=I)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Li(k){const x=k.indexOf(":");return x<0?"":k.substr(0,x+1)}function hr(k){if(!k)return null;const x=Number(k);return isNaN(x)?null:x}class Pr{constructor(x,I){this.providerId=x,this.signInMethod=I}toJSON(){return ft("not implemented")}_getIdTokenResponse(x){return ft("not implemented")}_linkToIdToken(x,I){return ft("not implemented")}_getReauthenticationResolver(x){return ft("not implemented")}}function Ga(k,x){return $o.apply(this,arguments)}function $o(){return($o=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:resetPassword",nn(k,x))})).apply(this,arguments)}function Br(k,x){return am.apply(this,arguments)}function am(){return(am=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function lm(k,x){return hc.apply(this,arguments)}function hc(){return(hc=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:update",nn(k,x))})).apply(this,arguments)}function uc(){return(uc=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithPassword",nn(k,x))})).apply(this,arguments)}function Uh(k,x){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:sendOobCode",nn(k,x))})).apply(this,arguments)}function ma(k,x){return ap.apply(this,arguments)}function ap(){return(ap=(0,b.Z)(function*(k,x){return Uh(k,x)})).apply(this,arguments)}function Ra(k,x){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,b.Z)(function*(k,x){return Uh(k,x)})).apply(this,arguments)}function td(k,x){return xu.apply(this,arguments)}function xu(){return(xu=(0,b.Z)(function*(k,x){return Uh(k,x)})).apply(this,arguments)}function Hf(k,x){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,b.Z)(function*(k,x){return Uh(k,x)})).apply(this,arguments)}function uy(){return(uy=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithEmailLink",nn(k,x))})).apply(this,arguments)}function Vf(){return(Vf=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithEmailLink",nn(k,x))})).apply(this,arguments)}class zf extends Pr{constructor(x,I,L,W=null){super("password",L),this._email=x,this._password=I,this._tenantId=W}static _fromEmailAndPassword(x,I){return new zf(x,I,"password")}static _fromEmailAndCode(x,I,L=null){return new zf(x,I,"emailLink",L)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x;if(I?.email&&I?.password){if("password"===I.signInMethod)return this._fromEmailAndPassword(I.email,I.password);if("emailLink"===I.signInMethod)return this._fromEmailAndCode(I.email,I.password,I.tenantId)}return null}_getIdTokenResponse(x){var I=this;return(0,b.Z)(function*(){switch(I.signInMethod){case"password":return function op(k,x){return uc.apply(this,arguments)}(x,{returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function hy(k,x){return uy.apply(this,arguments)}(x,{email:I._email,oobCode:I._password});default:Rt(x,"internal-error")}})()}_linkToIdToken(x,I){var L=this;return(0,b.Z)(function*(){switch(L.signInMethod){case"password":return Br(x,{idToken:I,returnSecureToken:!0,email:L._email,password:L._password});case"emailLink":return function hm(k,x){return Vf.apply(this,arguments)}(x,{idToken:I,email:L._email,oobCode:L._password});default:Rt(x,"internal-error")}})()}_getReauthenticationResolver(x){return this._getIdTokenResponse(x)}}function Ro(k,x){return cy.apply(this,arguments)}function cy(){return(cy=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithIdp",nn(k,x))})).apply(this,arguments)}class Eh extends Pr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(x){const I=new Eh(x.providerId,x.signInMethod);return x.idToken||x.accessToken?(x.idToken&&(I.idToken=x.idToken),x.accessToken&&(I.accessToken=x.accessToken),x.nonce&&!x.pendingToken&&(I.nonce=x.nonce),x.pendingToken&&(I.pendingToken=x.pendingToken)):x.oauthToken&&x.oauthTokenSecret?(I.accessToken=x.oauthToken,I.secret=x.oauthTokenSecret):Rt("argument-error"),I}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:L,signInMethod:W}=I,$=(0,ht._T)(I,["providerId","signInMethod"]);if(!L||!W)return null;const De=new Eh(L,W);return De.idToken=$.idToken||void 0,De.accessToken=$.accessToken||void 0,De.secret=$.secret,De.nonce=$.nonce,De.pendingToken=$.pendingToken||null,De}_getIdTokenResponse(x){return Ro(x,this.buildRequest())}_linkToIdToken(x,I){const L=this.buildRequest();return L.idToken=I,Ro(x,L)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,Ro(x,I)}buildRequest(){const x={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)x.pendingToken=this.pendingToken;else{const I={};this.idToken&&(I.id_token=this.idToken),this.accessToken&&(I.access_token=this.accessToken),this.secret&&(I.oauth_token_secret=this.secret),I.providerId=this.providerId,this.nonce&&!this.pendingToken&&(I.nonce=this.nonce),x.postBody=(0,oe.xO)(I)}return x}}function dy(k,x){return id.apply(this,arguments)}function id(){return(id=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:sendVerificationCode",nn(k,x))})).apply(this,arguments)}function fy(){return(fy=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithPhoneNumber",nn(k,x))})).apply(this,arguments)}function r0(){return(r0=(0,b.Z)(function*(k,x){const I=yield us(k,"POST","/v1/accounts:signInWithPhoneNumber",nn(k,x));if(I.temporaryProof)throw mo(k,"account-exists-with-different-credential",I);return I})).apply(this,arguments)}const gy={USER_NOT_FOUND:"user-not-found"};function s0(){return(s0=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithPhoneNumber",nn(k,Object.assign(Object.assign({},x),{operation:"REAUTH"})),gy)})).apply(this,arguments)}class Tu extends Pr{constructor(x){super("phone","phone"),this.params=x}static _fromVerification(x,I){return new Tu({verificationId:x,verificationCode:I})}static _fromTokenResponse(x,I){return new Tu({phoneNumber:x,temporaryProof:I})}_getIdTokenResponse(x){return function py(k,x){return fy.apply(this,arguments)}(x,this._makeVerificationRequest())}_linkToIdToken(x,I){return function FI(k,x){return r0.apply(this,arguments)}(x,Object.assign({idToken:I},this._makeVerificationRequest()))}_getReauthenticationResolver(x){return function NI(k,x){return s0.apply(this,arguments)}(x,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:x,phoneNumber:I,verificationId:L,verificationCode:W}=this.params;return x&&I?{temporaryProof:x,phoneNumber:I}:{sessionInfo:L,code:W}}toJSON(){const x={providerId:this.providerId};return this.params.phoneNumber&&(x.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(x.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(x.verificationCode=this.params.verificationCode),this.params.verificationId&&(x.verificationId=this.params.verificationId),x}static fromJSON(x){"string"==typeof x&&(x=JSON.parse(x));const{verificationId:I,verificationCode:L,phoneNumber:W,temporaryProof:$}=x;return L||I||W||$?new Tu({verificationId:I,verificationCode:L,phoneNumber:W,temporaryProof:$}):null}}class jf{constructor(x){var I,L,W,$,De,lt;const Xt=(0,oe.zd)((0,oe.pd)(x)),Di=null!==(I=Xt.apiKey)&&void 0!==I?I:null,hn=null!==(L=Xt.oobCode)&&void 0!==L?L:null,un=function um(k){switch(k){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(W=Xt.mode)&&void 0!==W?W:null);ge(Di&&hn&&un,"argument-error"),this.apiKey=Di,this.operation=un,this.code=hn,this.continueUrl=null!==($=Xt.continueUrl)&&void 0!==$?$:null,this.languageCode=null!==(De=Xt.languageCode)&&void 0!==De?De:null,this.tenantId=null!==(lt=Xt.tenantId)&&void 0!==lt?lt:null}static parseLink(x){const I=function ME(k){const x=(0,oe.zd)((0,oe.pd)(k)).link,I=x?(0,oe.zd)((0,oe.pd)(x)).deep_link_id:null,L=(0,oe.zd)((0,oe.pd)(k)).deep_link_id;return(L?(0,oe.zd)((0,oe.pd)(L)).link:null)||L||I||x||k}(x);try{return new jf(I)}catch{return null}}}let xh=(()=>{class k{constructor(){this.providerId=k.PROVIDER_ID}static credential(I,L){return zf._fromEmailAndPassword(I,L)}static credentialWithLink(I,L){const W=jf.parseLink(L);return ge(W,"argument-error"),zf._fromEmailAndCode(I,W.code,W.tenantId)}}return k.PROVIDER_ID="password",k.EMAIL_PASSWORD_SIGN_IN_METHOD="password",k.EMAIL_LINK_SIGN_IN_METHOD="emailLink",k})();class Du{constructor(x){this.providerId=x,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(x){this.defaultLanguageCode=x}setCustomParameters(x){return this.customParameters=x,this}getCustomParameters(){return this.customParameters}}class Iu extends Du{constructor(){super(...arguments),this.scopes=[]}addScope(x){return this.scopes.includes(x)||this.scopes.push(x),this}getScopes(){return[...this.scopes]}}class cc extends Iu{static credentialFromJSON(x){const I="string"==typeof x?JSON.parse(x):x;return ge("providerId"in I&&"signInMethod"in I,"argument-error"),Eh._fromParams(I)}credential(x){return this._credential(Object.assign(Object.assign({},x),{nonce:x.rawNonce}))}_credential(x){return ge(x.idToken||x.accessToken,"argument-error"),Eh._fromParams(Object.assign(Object.assign({},x),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(x){return cc.oauthCredentialFromTaggedObject(x)}static credentialFromError(x){return cc.oauthCredentialFromTaggedObject(x.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{oauthIdToken:I,oauthAccessToken:L,oauthTokenSecret:W,pendingToken:$,nonce:De,providerId:lt}=x;if(!L&&!W&&!I&&!$||!lt)return null;try{return new cc(lt)._credential({idToken:I,accessToken:L,nonce:De,pendingToken:$})}catch{return null}}}let lp=(()=>{class k extends Iu{constructor(){super("facebook.com")}static credential(I){return Eh._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.FACEBOOK_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return k.credentialFromTaggedObject(I)}static credentialFromError(I){return k.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return k.credential(I.oauthAccessToken)}catch{return null}}}return k.FACEBOOK_SIGN_IN_METHOD="facebook.com",k.PROVIDER_ID="facebook.com",k})(),Uf=(()=>{class k extends Iu{constructor(){super("google.com"),this.addScope("profile")}static credential(I,L){return Eh._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.GOOGLE_SIGN_IN_METHOD,idToken:I,accessToken:L})}static credentialFromResult(I){return k.credentialFromTaggedObject(I)}static credentialFromError(I){return k.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthIdToken:L,oauthAccessToken:W}=I;if(!L&&!W)return null;try{return k.credential(L,W)}catch{return null}}}return k.GOOGLE_SIGN_IN_METHOD="google.com",k.PROVIDER_ID="google.com",k})(),cm=(()=>{class k extends Iu{constructor(){super("github.com")}static credential(I){return Eh._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.GITHUB_SIGN_IN_METHOD,accessToken:I})}static credentialFromResult(I){return k.credentialFromTaggedObject(I)}static credentialFromError(I){return k.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I||!("oauthAccessToken"in I)||!I.oauthAccessToken)return null;try{return k.credential(I.oauthAccessToken)}catch{return null}}}return k.GITHUB_SIGN_IN_METHOD="github.com",k.PROVIDER_ID="github.com",k})();class Th extends Pr{constructor(x,I){super(x,x),this.pendingToken=I}_getIdTokenResponse(x){return Ro(x,this.buildRequest())}_linkToIdToken(x,I){const L=this.buildRequest();return L.idToken=I,Ro(x,L)}_getReauthenticationResolver(x){const I=this.buildRequest();return I.autoCreate=!1,Ro(x,I)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(x){const I="string"==typeof x?JSON.parse(x):x,{providerId:L,signInMethod:W,pendingToken:$}=I;return L&&W&&$&&L===W?new Th(L,$):null}static _create(x,I){return new Th(x,I)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rd extends Du{constructor(x){ge(x.startsWith("saml."),"argument-error"),super(x)}static credentialFromResult(x){return rd.samlCredentialFromTaggedObject(x)}static credentialFromError(x){return rd.samlCredentialFromTaggedObject(x.customData||{})}static credentialFromJSON(x){const I=Th.fromJSON(x);return ge(I,"argument-error"),I}static samlCredentialFromTaggedObject({_tokenResponse:x}){if(!x)return null;const{pendingToken:I,providerId:L}=x;if(!I||!L)return null;try{return Th._create(L,I)}catch{return null}}}let _a=(()=>{class k extends Iu{constructor(){super("twitter.com")}static credential(I,L){return Eh._fromParams({providerId:k.PROVIDER_ID,signInMethod:k.TWITTER_SIGN_IN_METHOD,oauthToken:I,oauthTokenSecret:L})}static credentialFromResult(I){return k.credentialFromTaggedObject(I)}static credentialFromError(I){return k.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{oauthAccessToken:L,oauthTokenSecret:W}=I;if(!L||!W)return null;try{return k.credential(L,W)}catch{return null}}}return k.TWITTER_SIGN_IN_METHOD="twitter.com",k.PROVIDER_ID="twitter.com",k})();function sd(k,x){return Wf.apply(this,arguments)}function Wf(){return(Wf=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signUp",nn(k,x))})).apply(this,arguments)}class $a{constructor(x){this.user=x.user,this.providerId=x.providerId,this._tokenResponse=x._tokenResponse,this.operationType=x.operationType}static _fromIdTokenResponse(x,I,L,W=!1){return(0,b.Z)(function*(){const $=yield Tn._fromIdTokenResponse(x,L,W),De=FE(L);return new $a({user:$,providerId:De,_tokenResponse:L,operationType:I})})()}static _forOperation(x,I,L){return(0,b.Z)(function*(){yield x._updateTokensIfNecessary(L,!0);const W=FE(L);return new $a({user:x,providerId:W,_tokenResponse:L,operationType:I})})()}}function FE(k){return k.providerId?k.providerId:"phoneNumber"in k?"phone":null}function $s(){return($s=(0,b.Z)(function*(k){var x;const I=_e(k);if(yield I._initializationPromise,null!==(x=I.currentUser)&&void 0!==x&&x.isAnonymous)return new $a({user:I.currentUser,providerId:null,operationType:"signIn"});const L=yield sd(I,{returnSecureToken:!0}),W=yield $a._fromIdTokenResponse(I,"signIn",L,!0);return yield I._updateCurrentUser(W.user),W})).apply(this,arguments)}class qf extends oe.ZR{constructor(x,I,L,W){var $;super(I.code,I.message),this.operationType=L,this.user=W,Object.setPrototypeOf(this,qf.prototype),this.customData={appName:x.name,tenantId:null!==($=x.tenantId)&&void 0!==$?$:void 0,_serverResponse:I.customData._serverResponse,operationType:L}}static _fromErrorAndOperation(x,I,L,W){return new qf(x,I,L,W)}}function od(k,x,I,L){return("reauthenticate"===x?I._getReauthenticationResolver(k):I._getIdTokenResponse(k)).catch($=>{throw"auth/multi-factor-auth-required"===$.code?qf._fromErrorAndOperation(k,$,x,L):$})}function dc(k){return new Set(k.map(({providerId:x})=>x).filter(x=>!!x))}function my(){return(my=(0,b.Z)(function*(k,x){const I=(0,oe.m9)(k);yield $n(!0,I,x);const{providerUserInfo:L}=yield Jr(I.auth,{idToken:yield I.getIdToken(),deleteProvider:[x]}),W=dc(L||[]);return I.providerData=I.providerData.filter($=>W.has($.providerId)),W.has("phone")||(I.phoneNumber=null),yield I.auth._persistUserIfCurrent(I),I})).apply(this,arguments)}function Tl(k,x){return pc.apply(this,arguments)}function pc(){return(pc=(0,b.Z)(function*(k,x,I=!1){const L=yield Dr(k,x._linkToIdToken(k.auth,yield k.getIdToken()),I);return $a._forOperation(k,"link",L)})).apply(this,arguments)}function $n(k,x,I){return vy.apply(this,arguments)}function vy(){return(vy=(0,b.Z)(function*(k,x,I){yield Kn(x);const W=!1===k?"provider-already-linked":"no-such-provider";ge(dc(x.providerData).has(I)===k,x.auth,W)})).apply(this,arguments)}function ad(k,x){return pm.apply(this,arguments)}function pm(){return(pm=(0,b.Z)(function*(k,x,I=!1){var L;const{auth:W}=k,$="reauthenticate";try{const De=yield Dr(k,od(W,$,x,k),I);ge(De.idToken,W,"internal-error");const lt=_i(De.idToken);ge(lt,W,"internal-error");const{sub:Xt}=lt;return ge(k.uid===Xt,W,"user-mismatch"),$a._forOperation(k,$,De)}catch(De){throw"auth/user-not-found"===(null===(L=De)||void 0===L?void 0:L.code)&&Rt(W,"user-mismatch"),De}})).apply(this,arguments)}function Wh(k,x){return Gf.apply(this,arguments)}function Gf(){return(Gf=(0,b.Z)(function*(k,x,I=!1){const L="signIn",W=yield od(k,L,x),$=yield $a._fromIdTokenResponse(k,L,W);return I||(yield k._updateCurrentUser($.user)),$})).apply(this,arguments)}function hp(k,x){return Y.apply(this,arguments)}function Y(){return(Y=(0,b.Z)(function*(k,x){return Wh(_e(k),x)})).apply(this,arguments)}function ee(k,x){return xe.apply(this,arguments)}function xe(){return(xe=(0,b.Z)(function*(k,x){const I=(0,oe.m9)(k);return yield $n(!1,I,x.providerId),Tl(I,x)})).apply(this,arguments)}function tt(k,x){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,b.Z)(function*(k,x){return ad((0,oe.m9)(k),x)})).apply(this,arguments)}function ai(k,x){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,b.Z)(function*(k,x){return us(k,"POST","/v1/accounts:signInWithCustomToken",nn(k,x))})).apply(this,arguments)}function to(){return(to=(0,b.Z)(function*(k,x){const I=_e(k),L=yield ai(I,{token:x,returnSecureToken:!0}),W=yield $a._fromIdTokenResponse(I,"signIn",L);return yield I._updateCurrentUser(W.user),W})).apply(this,arguments)}class xt{constructor(x,I){this.factorId=x,this.uid=I.mfaEnrollmentId,this.enrollmentTime=new Date(I.enrolledAt).toUTCString(),this.displayName=I.displayName}static _fromServerResponse(x,I){return"phoneInfo"in I?Xi._fromServerResponse(x,I):Rt(x,"internal-error")}}class Xi extends xt{constructor(x){super("phone",x),this.phoneNumber=x.phoneInfo}static _fromServerResponse(x,I){return new Xi(I)}}function Dn(k,x,I){var L;ge((null===(L=I.url)||void 0===L?void 0:L.length)>0,k,"invalid-continue-uri"),ge(typeof I.dynamicLinkDomain>"u"||I.dynamicLinkDomain.length>0,k,"invalid-dynamic-link-domain"),x.continueUrl=I.url,x.dynamicLinkDomain=I.dynamicLinkDomain,x.canHandleCodeInApp=I.handleCodeInApp,I.iOS&&(ge(I.iOS.bundleId.length>0,k,"missing-ios-bundle-id"),x.iOSBundleId=I.iOS.bundleId),I.android&&(ge(I.android.packageName.length>0,k,"missing-android-pkg-name"),x.androidInstallApp=I.android.installApp,x.androidMinimumVersionCode=I.android.minimumVersion,x.androidPackageName=I.android.packageName)}function Ts(){return(Ts=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k),W={requestType:"PASSWORD_RESET",email:x};I&&Dn(L,W,I),yield Ra(L,W)})).apply(this,arguments)}function Dh(){return(Dh=(0,b.Z)(function*(k,x,I){yield Ga((0,oe.m9)(k),{oobCode:x,newPassword:I})})).apply(this,arguments)}function Kf(){return(Kf=(0,b.Z)(function*(k,x){yield lm((0,oe.m9)(k),{oobCode:x})})).apply(this,arguments)}function cp(k,x){return fc.apply(this,arguments)}function fc(){return(fc=(0,b.Z)(function*(k,x){const I=(0,oe.m9)(k),L=yield Ga(I,{oobCode:x}),W=L.requestType;switch(ge(W,I,"internal-error"),W){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ge(L.newEmail,I,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ge(L.mfaInfo,I,"internal-error");default:ge(L.email,I,"internal-error")}let $=null;return L.mfaInfo&&($=xt._fromServerResponse(_e(I),L.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.newEmail:L.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===L.requestType?L.email:L.newEmail)||null,multiFactorInfo:$},operation:W}})).apply(this,arguments)}function mc(){return(mc=(0,b.Z)(function*(k,x){const{data:I}=yield cp((0,oe.m9)(k),x);return I.email})).apply(this,arguments)}function vo(){return(vo=(0,b.Z)(function*(k,x,I){const L=_e(k),W=yield sd(L,{returnSecureToken:!0,email:x,password:I}),$=yield $a._fromIdTokenResponse(L,"signIn",W);return yield L._updateCurrentUser($.user),$})).apply(this,arguments)}function pp(){return(pp=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k),W={requestType:"EMAIL_SIGNIN",email:x};ge(I.handleCodeInApp,L,"argument-error"),I&&Dn(L,W,I),yield td(L,W)})).apply(this,arguments)}function a0(){return(a0=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k),W=xh.credentialWithLink(x,I||zt());return ge(W._tenantId===(L.tenantId||null),L,"tenant-id-mismatch"),hp(L,W)})).apply(this,arguments)}function wM(k,x){return NE.apply(this,arguments)}function NE(){return(NE=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:createAuthUri",nn(k,x))})).apply(this,arguments)}function fm(){return(fm=(0,b.Z)(function*(k,x){const L={identifier:x,continueUri:ji()?zt():"http://localhost"},{signinMethods:W}=yield wM((0,oe.m9)(k),L);return W||[]})).apply(this,arguments)}function gm(){return(gm=(0,b.Z)(function*(k,x){const I=(0,oe.m9)(k),W={requestType:"VERIFY_EMAIL",idToken:yield k.getIdToken()};x&&Dn(I.auth,W,x);const{email:$}=yield ma(I.auth,W);$!==k.email&&(yield k.reload())})).apply(this,arguments)}function l0(){return(l0=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k),$={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield k.getIdToken(),newEmail:x};I&&Dn(L.auth,$,I);const{email:De}=yield Hf(L.auth,$);De!==k.email&&(yield k.reload())})).apply(this,arguments)}function HE(k,x){return h0.apply(this,arguments)}function h0(){return(h0=(0,b.Z)(function*(k,x){return Mn(k,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function u0(){return(u0=(0,b.Z)(function*(k,{displayName:x,photoURL:I}){if(void 0===x&&void 0===I)return;const L=(0,oe.m9)(k),$={idToken:yield L.getIdToken(),displayName:x,photoUrl:I,returnSecureToken:!0},De=yield Dr(L,HE(L.auth,$));L.displayName=De.displayName||null,L.photoURL=De.photoUrl||null;const lt=L.providerData.find(({providerId:Xt})=>"password"===Xt);lt&&(lt.displayName=L.displayName,lt.photoURL=L.photoURL),yield L._updateTokensIfNecessary(De)})).apply(this,arguments)}function $f(k,x,I){return c0.apply(this,arguments)}function c0(){return(c0=(0,b.Z)(function*(k,x,I){const{auth:L}=k,$={idToken:yield k.getIdToken(),returnSecureToken:!0};x&&($.email=x),I&&($.password=I);const De=yield Dr(k,Br(L,$));yield k._updateTokensIfNecessary(De,!0)})).apply(this,arguments)}class Zl{constructor(x,I,L={}){this.isNewUser=x,this.providerId=I,this.profile=L}}class Ns extends Zl{constructor(x,I,L,W){super(x,I,L),this.username=W}}class jI extends Zl{constructor(x,I){super(x,"facebook.com",I)}}class UI extends Ns{constructor(x,I){super(x,"github.com",I,"string"==typeof I?.login?I?.login:null)}}class WI extends Zl{constructor(x,I){super(x,"google.com",I)}}class qI extends Ns{constructor(x,I,L){super(x,"twitter.com",I,L)}}function yy(k){const{user:x,_tokenResponse:I}=k;return x.isAnonymous&&!I?{providerId:null,isNewUser:!1,profile:null}:function va(k){var x,I;if(!k)return null;const{providerId:L}=k,W=k.rawUserInfo?JSON.parse(k.rawUserInfo):{},$=k.isNewUser||"identitytoolkit#SignupNewUserResponse"===k.kind;if(!L&&k?.idToken){const De=null===(I=null===(x=_i(k.idToken))||void 0===x?void 0:x.firebase)||void 0===I?void 0:I.sign_in_provider;if(De)return new Zl($,"anonymous"!==De&&"custom"!==De?De:null)}if(!L)return null;switch(L){case"facebook.com":return new jI($,W);case"github.com":return new UI($,W);case"google.com":return new WI($,W);case"twitter.com":return new qI($,W,k.screenName||null);case"custom":case"anonymous":return new Zl($,null);default:return new Zl($,L,W)}}(I)}class gp{constructor(x,I,L){this.type=x,this.credential=I,this.auth=L}static _fromIdtoken(x,I){return new gp("enroll",x,I)}static _fromMfaPendingCredential(x){return new gp("signin",x)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(x){var I,L;if(x?.multiFactorSession){if(null!==(I=x.multiFactorSession)&&void 0!==I&&I.pendingCredential)return gp._fromMfaPendingCredential(x.multiFactorSession.pendingCredential);if(null!==(L=x.multiFactorSession)&&void 0!==L&&L.idToken)return gp._fromIdtoken(x.multiFactorSession.idToken)}return null}}class g0{constructor(x,I,L){this.session=x,this.hints=I,this.signInResolver=L}static _fromError(x,I){const L=_e(x),W=I.customData._serverResponse,$=(W.mfaInfo||[]).map(lt=>xt._fromServerResponse(L,lt));ge(W.mfaPendingCredential,L,"internal-error");const De=gp._fromMfaPendingCredential(W.mfaPendingCredential);return new g0(De,$,function(){var lt=(0,b.Z)(function*(Xt){const Di=yield Xt._process(L,De);delete W.mfaInfo,delete W.mfaPendingCredential;const hn=Object.assign(Object.assign({},W),{idToken:Di.idToken,refreshToken:Di.refreshToken});switch(I.operationType){case"signIn":const un=yield $a._fromIdTokenResponse(L,I.operationType,hn);return yield L._updateCurrentUser(un.user),un;case"reauthenticate":return ge(I.user,L,"internal-error"),$a._forOperation(I.user,I.operationType,hn);default:Rt(L,"internal-error")}});return function(Xt){return lt.apply(this,arguments)}}())}resolveSignIn(x){var I=this;return(0,b.Z)(function*(){return I.signInResolver(x)})()}}function m0(k,x){return Mn(k,"POST","/v2/accounts/mfaEnrollment:start",nn(k,x))}class GI{constructor(x){this.user=x,this.enrolledFactors=[],x._onReload(I=>{I.mfaInfo&&(this.enrolledFactors=I.mfaInfo.map(L=>xt._fromServerResponse(x.auth,L)))})}static _fromUser(x){return new GI(x)}getSession(){var x=this;return(0,b.Z)(function*(){return gp._fromIdtoken(yield x.user.getIdToken(),x.user.auth)})()}enroll(x,I){var L=this;return(0,b.Z)(function*(){const W=x,$=yield L.getSession(),De=yield Dr(L.user,W._process(L.user.auth,$,I));return yield L.user._updateTokensIfNecessary(De),L.user.reload()})()}unenroll(x){var I=this;return(0,b.Z)(function*(){var L;const W="string"==typeof x?x:x.uid,$=yield I.user.getIdToken(),De=yield Dr(I.user,function jE(k,x){return Mn(k,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(k,x))}(I.user.auth,{idToken:$,mfaEnrollmentId:W}));I.enrolledFactors=I.enrolledFactors.filter(({uid:lt})=>lt!==W),yield I.user._updateTokensIfNecessary(De);try{yield I.user.reload()}catch(lt){if("auth/user-token-expired"!==(null===(L=lt)||void 0===L?void 0:L.code))throw lt}})()}}const Cy=new WeakMap,Cm="__sak";class wy{constructor(x,I){this.storageRetriever=x,this.type=I}_isAvailable(){try{return this.storage?(this.storage.setItem(Cm,"1"),this.storage.removeItem(Cm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(x,I){return this.storage.setItem(x,JSON.stringify(I)),Promise.resolve()}_get(x){const I=this.storage.getItem(x);return Promise.resolve(I?JSON.parse(I):null)}_remove(x){return this.storage.removeItem(x),Promise.resolve()}get storage(){return this.storageRetriever()}}const Em=(()=>{class k extends wy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(I,L)=>this.onStorageEvent(I,L),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function wm(){const k=(0,oe.z$)();return yt(k)||Zi(k)}()&&function os(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=$l(),this._shouldAllowMigration=!0}forAllChangedKeys(I){for(const L of Object.keys(this.listeners)){const W=this.storage.getItem(L),$=this.localCache[L];W!==$&&I(L,$,W)}}onStorageEvent(I,L=!1){if(!I.key)return void this.forAllChangedKeys((lt,Xt,Di)=>{this.notifyListeners(lt,Di)});const W=I.key;if(L?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const lt=this.storage.getItem(W);if(I.newValue!==lt)null!==I.newValue?this.storage.setItem(W,I.newValue):this.storage.removeItem(W);else if(this.localCache[W]===I.newValue&&!L)return}const $=()=>{const lt=this.storage.getItem(W);!L&&this.localCache[W]===lt||this.notifyListeners(W,lt)},De=this.storage.getItem(W);!function Cr(){return(0,oe.w1)()&&10===document.documentMode}()||De===I.newValue||I.newValue===I.oldValue?$():setTimeout($,10)}notifyListeners(I,L){this.localCache[I]=L;const W=this.listeners[I];if(W)for(const $ of Array.from(W))$(L&&JSON.parse(L))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((I,L,W)=>{this.onStorageEvent(new StorageEvent("storage",{key:I,oldValue:L,newValue:W}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(I,L){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[I]||(this.listeners[I]=new Set,this.localCache[I]=this.storage.getItem(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(I,L){var W=()=>super._set,$=this;return(0,b.Z)(function*(){yield W().call($,I,L),$.localCache[I]=JSON.stringify(L)})()}_get(I){var L=()=>super._get,W=this;return(0,b.Z)(function*(){const $=yield L().call(W,I);return W.localCache[I]=JSON.stringify($),$})()}_remove(I){var L=()=>super._remove,W=this;return(0,b.Z)(function*(){yield L().call(W,I),delete W.localCache[I]})()}}return k.type="LOCAL",k})(),ku=(()=>{class k extends wy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(I,L){}_removeListener(I,L){}}return k.type="SESSION",k})();let qE=(()=>{class k{constructor(I){this.eventTarget=I,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(I){const L=this.receivers.find($=>$.isListeningto(I));if(L)return L;const W=new k(I);return this.receivers.push(W),W}isListeningto(I){return this.eventTarget===I}handleEvent(I){var L=this;return(0,b.Z)(function*(){const W=I,{eventId:$,eventType:De,data:lt}=W.data,Xt=L.handlersMap[De];if(!Xt?.size)return;W.ports[0].postMessage({status:"ack",eventId:$,eventType:De});const Di=Array.from(Xt).map(function(){var un=(0,b.Z)(function*(Ca){return Ca(W.origin,lt)});return function(Ca){return un.apply(this,arguments)}}()),hn=yield function Sy(k){return Promise.all(k.map(function(){var x=(0,b.Z)(function*(I){try{return{fulfilled:!0,value:yield I}}catch(L){return{fulfilled:!1,reason:L}}});return function(I){return x.apply(this,arguments)}}()))}(Di);W.ports[0].postMessage({status:"done",eventId:$,eventType:De,response:hn})})()}_subscribe(I,L){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[I]||(this.handlersMap[I]=new Set),this.handlersMap[I].add(L)}_unsubscribe(I,L){this.handlersMap[I]&&L&&this.handlersMap[I].delete(L),(!L||0===this.handlersMap[I].size)&&delete this.handlersMap[I],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return k.receivers=[],k})();function Tm(k="",x=10){let I="";for(let L=0;L<x;L++)I+=Math.floor(10*Math.random());return k+I}class KI{constructor(x){this.target=x,this.handlers=new Set}removeMessageHandler(x){x.messageChannel&&(x.messageChannel.port1.removeEventListener("message",x.onMessage),x.messageChannel.port1.close()),this.handlers.delete(x)}_send(x,I,L=50){var W=this;return(0,b.Z)(function*(){const $=typeof MessageChannel<"u"?new MessageChannel:null;if(!$)throw new Error("connection_unavailable");let De,lt;return new Promise((Xt,Di)=>{const hn=Tm("",20);$.port1.start();const un=setTimeout(()=>{Di(new Error("unsupported_event"))},L);lt={messageChannel:$,onMessage(Ca){const kh=Ca;if(kh.data.eventId===hn)switch(kh.data.status){case"ack":clearTimeout(un),De=setTimeout(()=>{Di(new Error("timeout"))},3e3);break;case"done":clearTimeout(De),Xt(kh.data.response);break;default:clearTimeout(un),clearTimeout(De),Di(new Error("invalid_response"))}}},W.handlers.add(lt),$.port1.addEventListener("message",lt.onMessage),W.target.postMessage({eventType:x,eventId:hn,data:I},[$.port2])}).finally(()=>{lt&&W.removeMessageHandler(lt)})})()}}function _o(){return window}function v0(){return typeof _o().WorkerGlobalScope<"u"&&"function"==typeof _o().importScripts}function Im(){return(Im=(0,b.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Zf="firebaseLocalStorageDb",Xf="firebaseLocalStorage",y0="fbase_key";class Am{constructor(x){this.request=x}toPromise(){return new Promise((x,I)=>{this.request.addEventListener("success",()=>{x(this.request.result)}),this.request.addEventListener("error",()=>{I(this.request.error)})})}}function km(k,x){return k.transaction([Xf],x?"readwrite":"readonly").objectStore(Xf)}function Qf(){const k=indexedDB.open(Zf,1);return new Promise((x,I)=>{k.addEventListener("error",()=>{I(k.error)}),k.addEventListener("upgradeneeded",()=>{const L=k.result;try{L.createObjectStore(Xf,{keyPath:y0})}catch(W){I(W)}}),k.addEventListener("success",(0,b.Z)(function*(){const L=k.result;L.objectStoreNames.contains(Xf)?x(L):(L.close(),yield function SM(){const k=indexedDB.deleteDatabase(Zf);return new Am(k).toPromise()}(),x(yield Qf()))}))})}function mp(k,x,I){return b0.apply(this,arguments)}function b0(){return(b0=(0,b.Z)(function*(k,x,I){const L=km(k,!0).put({[y0]:x,value:I});return new Am(L).toPromise()})).apply(this,arguments)}function C0(){return(C0=(0,b.Z)(function*(k,x){const I=km(k,!1).get(x),L=yield new Am(I).toPromise();return void 0===L?null:L.value})).apply(this,arguments)}function Jf(k,x){const I=km(k,!0).delete(x);return new Am(I).toPromise()}const eg=(()=>{class k{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var I=this;return(0,b.Z)(function*(){return I.db||(I.db=yield Qf()),I.db})()}_withRetries(I){var L=this;return(0,b.Z)(function*(){let W=0;for(;;)try{const $=yield L._openDb();return yield I($)}catch($){if(W++>3)throw $;L.db&&(L.db.close(),L.db=void 0)}})()}initializeServiceWorkerMessaging(){var I=this;return(0,b.Z)(function*(){return v0()?I.initializeReceiver():I.initializeSender()})()}initializeReceiver(){var I=this;return(0,b.Z)(function*(){I.receiver=qE._getInstance(function xy(){return v0()?self:null}()),I.receiver._subscribe("keyChanged",function(){var L=(0,b.Z)(function*(W,$){return{keyProcessed:(yield I._poll()).includes($.key)}});return function(W,$){return L.apply(this,arguments)}}()),I.receiver._subscribe("ping",function(){var L=(0,b.Z)(function*(W,$){return["keyChanged"]});return function(W,$){return L.apply(this,arguments)}}())})()}initializeSender(){var I=this;return(0,b.Z)(function*(){var L,W;if(I.activeServiceWorker=yield function Dm(){return Im.apply(this,arguments)}(),!I.activeServiceWorker)return;I.sender=new KI(I.activeServiceWorker);const $=yield I.sender._send("ping",{},800);!$||(null===(L=$[0])||void 0===L?void 0:L.fulfilled)&&(null===(W=$[0])||void 0===W?void 0:W.value.includes("keyChanged"))&&(I.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(I){var L=this;return(0,b.Z)(function*(){if(L.sender&&L.activeServiceWorker&&function Ey(){var k;return(null===(k=navigator?.serviceWorker)||void 0===k?void 0:k.controller)||null}()===L.activeServiceWorker)try{yield L.sender._send("keyChanged",{key:I},L.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.Z)(function*(){try{if(!indexedDB)return!1;const I=yield Qf();return yield mp(I,Cm,"1"),yield Jf(I,Cm),!0}catch{}return!1})()}_withPendingWrite(I){var L=this;return(0,b.Z)(function*(){L.pendingWrites++;try{yield I()}finally{L.pendingWrites--}})()}_set(I,L){var W=this;return(0,b.Z)(function*(){return W._withPendingWrite((0,b.Z)(function*(){return yield W._withRetries($=>mp($,I,L)),W.localCache[I]=L,W.notifyServiceWorker(I)}))})()}_get(I){var L=this;return(0,b.Z)(function*(){const W=yield L._withRetries($=>function KE(k,x){return C0.apply(this,arguments)}($,I));return L.localCache[I]=W,W})()}_remove(I){var L=this;return(0,b.Z)(function*(){return L._withPendingWrite((0,b.Z)(function*(){return yield L._withRetries(W=>Jf(W,I)),delete L.localCache[I],L.notifyServiceWorker(I)}))})()}_poll(){var I=this;return(0,b.Z)(function*(){const L=yield I._withRetries(De=>{const lt=km(De,!1).getAll();return new Am(lt).toPromise()});if(!L)return[];if(0!==I.pendingWrites)return[];const W=[],$=new Set;for(const{fbase_key:De,value:lt}of L)$.add(De),JSON.stringify(I.localCache[De])!==JSON.stringify(lt)&&(I.notifyListeners(De,lt),W.push(De));for(const De of Object.keys(I.localCache))I.localCache[De]&&!$.has(De)&&(I.notifyListeners(De,null),W.push(De));return W})()}notifyListeners(I,L){this.localCache[I]=L;const W=this.listeners[I];if(W)for(const $ of Array.from(W))$(L)}startPolling(){var I=this;this.stopPolling(),this.pollTimer=setInterval((0,b.Z)(function*(){return I._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(I,L){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[I]||(this.listeners[I]=new Set,this._get(I)),this.listeners[I].add(L)}_removeListener(I,L){this.listeners[I]&&(this.listeners[I].delete(L),0===this.listeners[I].size&&delete this.listeners[I]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return k.type="LOCAL",k})();function Ty(k,x){return Mn(k,"POST","/v2/accounts/mfaSignIn:start",nn(k,x))}function vp(){return(vp=(0,b.Z)(function*(k){return(yield Mn(k,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function w0(k){return new Promise((x,I)=>{const L=document.createElement("script");L.setAttribute("src",k),L.onload=x,L.onerror=W=>{const $=gt("internal-error");$.customData=W,I($)},L.type="text/javascript",L.charset="UTF-8",function _m(){var k,x;return null!==(x=null===(k=document.getElementsByTagName("head"))||void 0===k?void 0:k[0])&&void 0!==x?x:document}().appendChild(L)})}function S0(k){return`__${k}${Math.floor(1e6*Math.random())}`}const E0=1e12;class bs{constructor(x){this.auth=x,this.counter=E0,this._widgets=new Map}render(x,I){const L=this.counter;return this._widgets.set(L,new EM(x,this.auth.name,I||{})),this.counter++,L}reset(x){var I;const L=x||E0;null===(I=this._widgets.get(L))||void 0===I||I.delete(),this._widgets.delete(L)}getResponse(x){var I;return(null===(I=this._widgets.get(x||E0))||void 0===I?void 0:I.getResponse())||""}execute(x){var I=this;return(0,b.Z)(function*(){var L;return null===(L=I._widgets.get(x||E0))||void 0===L||L.execute(),""})()}}class EM{constructor(x,I,L){this.params=L,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const W="string"==typeof x?document.getElementById(x):x;ge(W,"argument-error",{appName:I}),this.container=W,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function qj(k){const x=[],I="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<k;L++)x.push(I.charAt(Math.floor(Math.random()*I.length)));return x.join("")}(50);const{callback:x,"expired-callback":I}=this.params;if(x)try{x(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,I)try{I()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $I=S0("rcb"),Gj=new yr(3e4,6e4);class $j{constructor(){var x;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(x=_o().grecaptcha)||void 0===x||!x.render)}load(x,I=""){return ge(function Yj(k){return k.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(k)}(I),x,"argument-error"),this.shouldResolveImmediately(I)?Promise.resolve(_o().grecaptcha):new Promise((L,W)=>{const $=_o().setTimeout(()=>{W(gt(x,"network-request-failed"))},Gj.get());_o()[$I]=()=>{_o().clearTimeout($),delete _o()[$I];const lt=_o().grecaptcha;if(!lt)return void W(gt(x,"internal-error"));const Xt=lt.render;lt.render=(Di,hn)=>{const un=Xt(Di,hn);return this.counter++,un},this.hostLanguage=I,L(lt)},w0(`https://www.google.com/recaptcha/api.js??${(0,oe.xO)({onload:$I,render:"explicit",hl:I})}`).catch(()=>{clearTimeout($),W(gt(x,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(x){var I;return!(null===(I=_o().grecaptcha)||void 0===I||!I.render)&&(x===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Iy{load(x){return(0,b.Z)(function*(){return new bs(x)})()}clearedOneInstance(){}}const xM="recaptcha",TM={theme:"light",type:"image"};class ya{constructor(x,I=Object.assign({},TM),L){this.parameters=I,this.type=xM,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_e(L),this.isInvisible="invisible"===this.parameters.size,ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const W="string"==typeof x?document.getElementById(x):x;ge(W,this.auth,"argument-error"),this.container=W,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Iy:new $j,this.validateStartingState()}verify(){var x=this;return(0,b.Z)(function*(){x.assertNotDestroyed();const I=yield x.render(),L=x.getAssertedRecaptcha();return L.getResponse(I)||new Promise($=>{const De=lt=>{!lt||(x.tokenChangeListeners.delete(De),$(lt))};x.tokenChangeListeners.add(De),x.isInvisible&&L.execute(I)})})()}render(){try{this.assertNotDestroyed()}catch(x){return Promise.reject(x)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(x=>{throw this.renderPromise=null,x})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(x=>{this.container.removeChild(x)})}validateStartingState(){ge(!this.parameters.sitekey,this.auth,"argument-error"),ge(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ge(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(x){return I=>{if(this.tokenChangeListeners.forEach(L=>L(I)),"function"==typeof x)x(I);else if("string"==typeof x){const L=_o()[x];"function"==typeof L&&L(I)}}}assertNotDestroyed(){ge(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var x=this;return(0,b.Z)(function*(){if(yield x.init(),!x.widgetId){let I=x.container;if(!x.isInvisible){const L=document.createElement("div");I.appendChild(L),I=L}x.widgetId=x.getAssertedRecaptcha().render(I,x.parameters)}return x.widgetId})()}init(){var x=this;return(0,b.Z)(function*(){ge(ji()&&!v0(),x.auth,"internal-error"),yield function Ur(){let k=null;return new Promise(x=>{"complete"!==document.readyState?(k=()=>x(),window.addEventListener("load",k)):x()}).catch(x=>{throw k&&window.removeEventListener("load",k),x})}(),x.recaptcha=yield x._recaptchaLoader.load(x.auth,x.auth.languageCode||void 0);const I=yield function Rm(k){return vp.apply(this,arguments)}(x.auth);ge(I,x.auth,"internal-error"),x.parameters.sitekey=I})()}getAssertedRecaptcha(){return ge(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ba{constructor(x,I){this.verificationId=x,this.onConfirmation=I}confirm(x){const I=Tu._fromVerification(this.verificationId,x);return this.onConfirmation(I)}}function x0(){return(x0=(0,b.Z)(function*(k,x,I){const L=_e(k),W=yield Ih(L,x,(0,oe.m9)(I));return new ba(W,$=>hp(L,$))})).apply(this,arguments)}function Gh(){return(Gh=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k);yield $n(!1,L,"phone");const W=yield Ih(L.auth,x,(0,oe.m9)(I));return new ba(W,$=>ee(L,$))})).apply(this,arguments)}function tg(){return(tg=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k),W=yield Ih(L.auth,x,(0,oe.m9)(I));return new ba(W,$=>tt(L,$))})).apply(this,arguments)}function Ih(k,x,I){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,b.Z)(function*(k,x,I){var L;const W=yield I.verify();try{let $;if(ge("string"==typeof W,k,"argument-error"),ge(I.type===xM,k,"argument-error"),$="string"==typeof x?{phoneNumber:x}:x,"session"in $){const De=$.session;if("phoneNumber"in $)return ge("enroll"===De.type,k,"internal-error"),(yield m0(k,{idToken:De.credential,phoneEnrollmentInfo:{phoneNumber:$.phoneNumber,recaptchaToken:W}})).phoneSessionInfo.sessionInfo;{ge("signin"===De.type,k,"internal-error");const lt=(null===(L=$.multiFactorHint)||void 0===L?void 0:L.uid)||$.multiFactorUid;return ge(lt,k,"missing-multi-factor-info"),(yield Ty(k,{mfaPendingCredential:De.credential,mfaEnrollmentId:lt,phoneSignInInfo:{recaptchaToken:W}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:De}=yield dy(k,{phoneNumber:$.phoneNumber,recaptchaToken:W});return De}}finally{I._reset()}})).apply(this,arguments)}function qi(){return(qi=(0,b.Z)(function*(k,x){yield Tl((0,oe.m9)(k),x)})).apply(this,arguments)}let Ay=(()=>{class k{constructor(I){this.providerId=k.PROVIDER_ID,this.auth=_e(I)}verifyPhoneNumber(I,L){return Ih(this.auth,I,(0,oe.m9)(L))}static credential(I,L){return Tu._fromVerification(I,L)}static credentialFromResult(I){return k.credentialFromTaggedObject(I)}static credentialFromError(I){return k.credentialFromTaggedObject(I.customData||{})}static credentialFromTaggedObject({_tokenResponse:I}){if(!I)return null;const{phoneNumber:L,temporaryProof:W}=I;return L&&W?Tu._fromTokenResponse(L,W):null}}return k.PROVIDER_ID="phone",k.PHONE_SIGN_IN_METHOD="phone",k})();function ig(k,x){return x?Xe(x):(ge(k._popupRedirectResolver,k,"argument-error"),k._popupRedirectResolver)}class Om extends Pr{constructor(x){super("custom","custom"),this.params=x}_getIdTokenResponse(x){return Ro(x,this._buildIdpRequest())}_linkToIdToken(x,I){return Ro(x,this._buildIdpRequest(I))}_getReauthenticationResolver(x){return Ro(x,this._buildIdpRequest())}_buildIdpRequest(x){const I={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return x&&(I.idToken=x),I}}function Dl(k){return Wh(k.auth,new Om(k),k.bypassAuthState)}function D0(k){const{auth:x,user:I}=k;return ge(I,x,"internal-error"),ad(I,new Om(k),k.bypassAuthState)}function yp(k){return cd.apply(this,arguments)}function cd(){return(cd=(0,b.Z)(function*(k){const{auth:x,user:I}=k;return ge(I,x,"internal-error"),Tl(I,new Om(k),k.bypassAuthState)})).apply(this,arguments)}class Ah{constructor(x,I,L,W,$=!1){this.auth=x,this.resolver=L,this.user=W,this.bypassAuthState=$,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(I)?I:[I]}execute(){var x=this;return new Promise(function(){var I=(0,b.Z)(function*(L,W){x.pendingPromise={resolve:L,reject:W};try{x.eventManager=yield x.resolver._initialize(x.auth),yield x.onExecution(),x.eventManager.registerConsumer(x)}catch($){x.reject($)}});return function(L,W){return I.apply(this,arguments)}}())}onAuthEvent(x){var I=this;return(0,b.Z)(function*(){const{urlResponse:L,sessionId:W,postBody:$,tenantId:De,error:lt,type:Xt}=x;if(lt)return void I.reject(lt);const Di={auth:I.auth,requestUri:L,sessionId:W,tenantId:De||void 0,postBody:$||void 0,user:I.user,bypassAuthState:I.bypassAuthState};try{I.resolve(yield I.getIdpTask(Xt)(Di))}catch(hn){I.reject(hn)}})()}onError(x){this.reject(x)}getIdpTask(x){switch(x){case"signInViaPopup":case"signInViaRedirect":return Dl;case"linkViaPopup":case"linkViaRedirect":return yp;case"reauthViaPopup":case"reauthViaRedirect":return D0;default:Rt(this.auth,"internal-error")}}resolve(x){Oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(x),this.unregisterAndCleanUp()}reject(x){Oe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(x),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const YI=new yr(2e3,1e4);function I0(){return(I0=(0,b.Z)(function*(k,x,I){const L=_e(k);Jt(k,x,Du);const W=ig(L,I);return new Ql(L,"signInViaPopup",x,W).executeNotNull()})).apply(this,arguments)}function A0(){return(A0=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k);Jt(L.auth,x,Du);const W=ig(L.auth,I);return new Ql(L.auth,"reauthViaPopup",x,W,L).executeNotNull()})).apply(this,arguments)}function Pm(){return(Pm=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k);Jt(L.auth,x,Du);const W=ig(L.auth,I);return new Ql(L.auth,"linkViaPopup",x,W,L).executeNotNull()})).apply(this,arguments)}let Ql=(()=>{class k extends Ah{constructor(I,L,W,$,De){super(I,L,$,De),this.provider=W,this.authWindow=null,this.pollId=null,k.currentPopupAction&&k.currentPopupAction.cancel(),k.currentPopupAction=this}executeNotNull(){var I=this;return(0,b.Z)(function*(){const L=yield I.execute();return ge(L,I.auth,"internal-error"),L})()}onExecution(){var I=this;return(0,b.Z)(function*(){Oe(1===I.filter.length,"Popup operations only handle one event");const L=Tm();I.authWindow=yield I.resolver._openPopup(I.auth,I.provider,I.filter[0],L),I.authWindow.associatedEvent=L,I.resolver._originValidation(I.auth).catch(W=>{I.reject(W)}),I.resolver._isIframeWebStorageSupported(I.auth,W=>{W||I.reject(gt(I.auth,"web-storage-unsupported"))}),I.pollUserCancellation()})()}get eventId(){var I;return(null===(I=this.authWindow)||void 0===I?void 0:I.associatedEvent)||null}cancel(){this.reject(gt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,k.currentPopupAction=null}pollUserCancellation(){const I=()=>{var L,W;this.pollId=null!==(W=null===(L=this.authWindow)||void 0===L?void 0:L.window)&&void 0!==W&&W.closed?window.setTimeout(()=>{this.pollId=null,this.reject(gt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(I,YI.get())};I()}}return k.currentPopupAction=null,k})();const Bs=new Map;class _u extends Ah{constructor(x,I,L=!1){super(x,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],I,void 0,L),this.eventId=null}execute(){var x=()=>super.execute,I=this;return(0,b.Z)(function*(){let L=Bs.get(I.auth._key());if(!L){try{const $=(yield function Ry(k,x){return _y.apply(this,arguments)}(I.resolver,I.auth))?yield x().call(I):null;L=()=>Promise.resolve($)}catch(W){L=()=>Promise.reject(W)}Bs.set(I.auth._key(),L)}return I.bypassAuthState||Bs.set(I.auth._key(),()=>Promise.resolve(null)),L()})()}onAuthEvent(x){var I=()=>super.onAuthEvent,L=this;return(0,b.Z)(function*(){if("signInViaRedirect"===x.type)return I().call(L,x);if("unknown"!==x.type){if(x.eventId){const W=yield L.auth._redirectUserForId(x.eventId);if(W)return L.user=W,I().call(L,x);L.resolve(null)}}else L.resolve(null)})()}onExecution(){return(0,b.Z)(function*(){})()}cleanUp(){}}function _y(){return(_y=(0,b.Z)(function*(k,x){const I=R0(x),L=pd(k);if(!(yield L._isAvailable()))return!1;const W="true"===(yield L._get(I));return yield L._remove(I),W})).apply(this,arguments)}function Ly(k,x){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,b.Z)(function*(k,x){return pd(k)._set(R0(x),"true")})).apply(this,arguments)}function dd(k,x){Bs.set(k._key(),x)}function pd(k){return Xe(k._redirectPersistence)}function R0(k){return X("pendingRedirect",k.config.apiKey,k.name)}function bp(){return(bp=(0,b.Z)(function*(k,x,I){const L=_e(k);Jt(k,x,Du);const W=ig(L,I);return yield Ly(W,L),W._openRedirect(L,x,"signInViaRedirect")})).apply(this,arguments)}function My(){return(My=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k);Jt(L.auth,x,Du);const W=ig(L.auth,I);yield Ly(W,L.auth);const $=yield Fy(L);return W._openRedirect(L.auth,x,"reauthViaRedirect",$)})).apply(this,arguments)}function rg(){return(rg=(0,b.Z)(function*(k,x,I){const L=(0,oe.m9)(k);Jt(L.auth,x,Du);const W=ig(L.auth,I);yield $n(!1,L,x.providerId),yield Ly(W,L.auth);const $=yield Fy(L);return W._openRedirect(L.auth,x,"linkViaRedirect",$)})).apply(this,arguments)}function og(){return(og=(0,b.Z)(function*(k,x){return yield _e(k)._initializationPromise,bc(k,x,!1)})).apply(this,arguments)}function bc(k,x){return Mm.apply(this,arguments)}function Mm(){return(Mm=(0,b.Z)(function*(k,x,I=!1){const L=_e(k),W=ig(L,x),De=yield new _u(L,W,I).execute();return De&&!I&&(delete De.user._redirectEventId,yield L._persistUserIfCurrent(De.user),yield L._setRedirectUser(null,x)),De})).apply(this,arguments)}function Fy(k){return fd.apply(this,arguments)}function fd(){return(fd=(0,b.Z)(function*(k){const x=Tm(`${k.uid}:::`);return k._redirectEventId=x,yield k.auth._setRedirectUser(k),yield k.auth._persistUserIfCurrent(k),x})).apply(this,arguments)}class Nm{constructor(x){this.auth=x,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(x){this.consumers.add(x),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,x)&&(this.sendToConsumer(this.queuedRedirectEvent,x),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(x){this.consumers.delete(x)}onEvent(x){if(this.hasEventBeenHandled(x))return!1;let I=!1;return this.consumers.forEach(L=>{this.isEventForConsumer(x,L)&&(I=!0,this.sendToConsumer(x,L),this.saveEventToCache(x))}),this.hasHandledPotentialRedirect||!function Cp(k){switch(k.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return L0(k);default:return!1}}(x)||(this.hasHandledPotentialRedirect=!0,I||(this.queuedRedirectEvent=x,I=!0)),I}sendToConsumer(x,I){var L;if(x.error&&!L0(x)){const W=(null===(L=x.error.code)||void 0===L?void 0:L.split("auth/")[1])||"internal-error";I.onError(gt(this.auth,W))}else I.onAuthEvent(x)}isEventForConsumer(x,I){const L=null===I.eventId||!!x.eventId&&x.eventId===I.eventId;return I.filter.includes(x.type)&&L}hasEventBeenHandled(x){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bm(x))}saveEventToCache(x){this.cachedEventUids.add(Bm(x)),this.lastProcessedEventTime=Date.now()}}function Bm(k){return[k.type,k.eventId,k.sessionId,k.tenantId].filter(x=>x).join("-")}function L0({type:k,error:x}){return"unknown"===k&&"auth/no-auth-event"===x?.code}function wp(k){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,b.Z)(function*(k,x={}){return Mn(k,"GET","/v1/projects",x)})).apply(this,arguments)}const Sp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,O0=/^https?/;function JI(){return(JI=(0,b.Z)(function*(k){if(k.config.emulator)return;const{authorizedDomains:x}=yield wp(k);for(const I of x)try{if(QE(I))return}catch{}Rt(k,"unauthorized-domain")})).apply(this,arguments)}function QE(k){const x=zt(),{protocol:I,hostname:L}=new URL(x);if(k.startsWith("chrome-extension://")){const De=new URL(k);return""===De.hostname&&""===L?"chrome-extension:"===I&&k.replace("chrome-extension://","")===x.replace("chrome-extension://",""):"chrome-extension:"===I&&De.hostname===L}if(!O0.test(I))return!1;if(Sp.test(k))return L===k;const W=k.replace(/\./g,"\\.");return new RegExp("^(.+\\."+W+"|"+W+")$","i").test(L)}const Ny=new yr(3e4,6e4);function By(){const k=_o().___jsl;if(k?.H)for(const x of Object.keys(k.H))if(k.H[x].r=k.H[x].r||[],k.H[x].L=k.H[x].L||[],k.H[x].r=[...k.H[x].L],k.CP)for(let I=0;I<k.CP.length;I++)k.CP[I]=null}let Hm=null;function P0(k){return Hm=Hm||function Ep(k){return new Promise((x,I)=>{var L,W,$;function De(){By(),gapi.load("gapi.iframes",{callback:()=>{x(gapi.iframes.getContext())},ontimeout:()=>{By(),I(gt(k,"network-request-failed"))},timeout:Ny.get()})}if(null!==(W=null===(L=_o().gapi)||void 0===L?void 0:L.iframes)&&void 0!==W&&W.Iframe)x(gapi.iframes.getContext());else{if(null===($=_o().gapi)||void 0===$||!$.load){const lt=S0("iframefcb");return _o()[lt]=()=>{gapi.load?De():I(gt(k,"network-request-failed"))},w0(`https://apis.google.com/js/api.js?onload=${lt}`).catch(Xt=>I(Xt))}De()}}).catch(x=>{throw Hm=null,x})}(k),Hm}const JE=new yr(5e3,15e3),Xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ex=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AM(k){const x=k.config;ge(x.authDomain,k,"auth-domain-config-required");const I=x.emulator?Es(x,"emulator/auth/iframe"):`https://${k.config.authDomain}/__/auth/iframe`,L={apiKey:x.apiKey,appName:k.name,v:$e.SDK_VERSION},W=ex.get(k.config.apiHost);W&&(L.eid=W);const $=k._getFrameworks();return $.length&&(L.fw=$.join(",")),`${I}?${(0,oe.xO)(L).slice(1)}`}function Vm(){return Vm=(0,b.Z)(function*(k){const x=yield P0(k),I=_o().gapi;return ge(I,k,"internal-error"),x.open({where:document.body,url:AM(k),messageHandlersFilter:I.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xj,dontclear:!0},L=>new Promise(function(){var W=(0,b.Z)(function*($,De){yield L.restyle({setHideOnLeave:!1});const lt=gt(k,"network-request-failed"),Xt=_o().setTimeout(()=>{De(lt)},JE.get());function Di(){_o().clearTimeout(Xt),$(L)}L.ping(Di).then(Di,()=>{De(lt)})});return function($,De){return W.apply(this,arguments)}}()))}),Vm.apply(this,arguments)}const M0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tp{constructor(x){this.window=x,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function lg(k,x,I,L,W,$){ge(k.config.authDomain,k,"auth-domain-config-required"),ge(k.config.apiKey,k,"invalid-api-key");const De={apiKey:k.config.apiKey,appName:k.name,authType:I,redirectUrl:L,v:$e.SDK_VERSION,eventId:W};if(x instanceof Du){x.setDefaultLanguage(k.languageCode),De.providerId=x.providerId||"",(0,oe.xb)(x.getCustomParameters())||(De.customParameters=JSON.stringify(x.getCustomParameters()));for(const[Xt,Di]of Object.entries($||{}))De[Xt]=Di}if(x instanceof Iu){const Xt=x.getScopes().filter(Di=>""!==Di);Xt.length>0&&(De.scopes=Xt.join(","))}k.tenantId&&(De.tid=k.tenantId);const lt=De;for(const Xt of Object.keys(lt))void 0===lt[Xt]&&delete lt[Xt];return`${function tx({config:k}){return k.emulator?Es(k,"emulator/auth/handler"):`https://${k.authDomain}/__/auth/handler`}(k)}?${(0,oe.xO)(lt).slice(1)}`}const jm="webStorageSupport";class Kh extends class nx{constructor(x){this.factorId=x}_process(x,I,L){switch(I.type){case"enroll":return this._finalizeEnroll(x,I.credential,L);case"signin":return this._finalizeSignIn(x,I.credential);default:return ft("unexpected MultiFactorSessionType")}}}{constructor(x){super("phone"),this.credential=x}static _fromCredential(x){return new Kh(x)}_finalizeEnroll(x,I,L){return function by(k,x){return Mn(k,"POST","/v2/accounts/mfaEnrollment:finalize",nn(k,x))}(x,{idToken:I,displayName:L,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(x,I){return function Dy(k,x){return Mn(k,"POST","/v2/accounts/mfaSignIn:finalize",nn(k,x))}(x,{mfaPendingCredential:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hg=(()=>{class k{constructor(){}static assertion(I){return Kh._fromCredential(I)}}return k.FACTOR_ID="phone",k})();var Wm="@firebase/auth",RM="0.20.11";class Qj{constructor(x){this.auth=x,this.internalListeners=new Map}getUid(){var x;return this.assertAuthConfigured(),(null===(x=this.auth.currentUser)||void 0===x?void 0:x.uid)||null}getToken(x){var I=this;return(0,b.Z)(function*(){return I.assertAuthConfigured(),yield I.auth._initializationPromise,I.auth.currentUser?{accessToken:yield I.auth.currentUser.getIdToken(x)}:null})()}addAuthTokenListener(x){if(this.assertAuthConfigured(),this.internalListeners.has(x))return;const I=this.auth.onIdTokenChanged(L=>{var W;x((null===(W=L)||void 0===W?void 0:W.stsTokenManager.accessToken)||null)});this.internalListeners.set(x,I),this.updateProactiveRefresh()}removeAuthTokenListener(x){this.assertAuthConfigured();const I=this.internalListeners.get(x);!I||(this.internalListeners.delete(x),I(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Cc(){return window}function Ap(){return(Ap=(0,b.Z)(function*(k,x,I){var L;const{BuildInfo:W}=Cc();Oe(x.sessionId,"AuthEvent did not contain a session ID");const $=yield zy(x.sessionId),De={};return Zi()?De.ibi=W.packageName:Hi()?De.apn=W.packageName:Rt(k,"operation-not-supported-in-this-environment"),W.displayName&&(De.appDisplayName=W.displayName),De.sessionId=$,lg(k,I,x.type,void 0,null!==(L=x.eventId)&&void 0!==L?L:void 0,De)})).apply(this,arguments)}function Vy(){return(Vy=(0,b.Z)(function*(k){const{BuildInfo:x}=Cc(),I={};Zi()?I.iosBundleId=x.packageName:Hi()?I.androidPackageName=x.packageName:Rt(k,"operation-not-supported-in-this-environment"),yield wp(k,I)})).apply(this,arguments)}function rA(){return(rA=(0,b.Z)(function*(k,x,I){const{cordova:L}=Cc();let W=()=>{};try{yield new Promise(($,De)=>{let lt=null;function Xt(){var un;$();const Ca=null===(un=L.plugins.browsertab)||void 0===un?void 0:un.close;"function"==typeof Ca&&Ca(),"function"==typeof I?.close&&I.close()}function Di(){lt||(lt=window.setTimeout(()=>{De(gt(k,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Di()}x.addPassiveListener(Xt),document.addEventListener("resume",Di,!1),Hi()&&document.addEventListener("visibilitychange",hn,!1),W=()=>{x.removePassiveListener(Xt),document.removeEventListener("resume",Di,!1),document.removeEventListener("visibilitychange",hn,!1),lt&&window.clearTimeout(lt)}})}finally{W()}})).apply(this,arguments)}function zy(k){return jy.apply(this,arguments)}function jy(){return(jy=(0,b.Z)(function*(k){const x=rx(k),I=yield crypto.subtle.digest("SHA-256",x);return Array.from(new Uint8Array(I)).map(W=>W.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function rx(k){if(Oe(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const x=new ArrayBuffer(k.length),I=new Uint8Array(x);for(let L=0;L<k.length;L++)I[L]=k.charCodeAt(L);return I}(0,oe.Pz)("authIdTokenMaxAge"),function Jj(k){(0,$e._registerComponent)(new et.wA("auth",(x,{options:I})=>{const L=x.getProvider("app").getImmediate(),W=x.getProvider("heartbeat"),{apiKey:$,authDomain:De}=L.options;return((lt,Xt)=>{ge($&&!$.includes(":"),"invalid-api-key",{appName:lt.name}),ge(!De?.includes(":"),"argument-error",{appName:lt.name});const Di={apiKey:$,authDomain:De,clientPlatform:k,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sh(k)},hn=new An(lt,Xt,Di);return function Wt(k,x){const I=x?.persistence||[],L=(Array.isArray(I)?I:[I]).map(Xe);x?.errorMap&&k._updateErrorMap(x.errorMap),k._initializeWithPersistence(L,x?.popupRedirectResolver)}(hn,I),hn})(L,W)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((x,I,L)=>{x.getProvider("auth-internal").initialize()})),(0,$e._registerComponent)(new et.wA("auth-internal",x=>{const I=_e(x.getProvider("auth").getImmediate());return new Qj(I)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,$e.registerVersion)(Wm,RM,function _M(k){switch(k){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(k)),(0,$e.registerVersion)(Wm,RM,"esm2017")}("Browser");class H0 extends Nm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(x=>{this.resolveInialized=x})}addPassiveListener(x){this.passiveListeners.add(x)}removePassiveListener(x){this.passiveListeners.delete(x)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(x){return this.resolveInialized(),this.passiveListeners.forEach(I=>I(x)),super.onEvent(x)}initialized(){var x=this;return(0,b.Z)(function*(){yield x.initPromise})()}}function oA(k){return z0.apply(this,arguments)}function z0(){return(z0=(0,b.Z)(function*(k){const x=yield Uy()._get(pg(k));return x&&(yield Uy()._remove(pg(k))),x})).apply(this,arguments)}function gd(){const k=[],x="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<20;I++){const L=Math.floor(Math.random()*x.length);k.push(x.charAt(L))}return k.join("")}function Uy(){return Xe(Em)}function pg(k){return X("authEvent",k.config.apiKey,k.name)}function Wy(k){if(!k?.includes("?"))return{};const[x,...I]=k.split("?");return(0,oe.zd)(I.join("?"))}function lA(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:gt("no-auth-event")}}function Gm(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function md(k=(0,oe.z$)()){return!("file:"!==Gm()&&"ionic:"!==Gm()&&"capacitor:"!==Gm()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function W0(){try{const k=self.localStorage,x=Tm();if(k)return k.setItem(x,"1"),k.removeItem(x),!function dA(k=(0,oe.z$)()){return function U0(){return(0,oe.w1)()&&11===document?.documentMode}()||function lx(k=(0,oe.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,oe.hl)()}catch{return qy()&&(0,oe.hl)()}return!1}function qy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Km(){return(function cA(){return"http:"===Gm()||"https:"===Gm()}()||(0,oe.ru)()||md())&&!function j0(){return(0,oe.b$)()||(0,oe.UG)()}()&&W0()&&!qy()}function Gy(){return md()&&typeof document<"u"}function $m(){return($m=(0,b.Z)(function*(){return!!Gy()&&new Promise(k=>{const x=setTimeout(()=>{k(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(x),k(!0)})})})).apply(this,arguments)}const al={LOCAL:"local",NONE:"none",SESSION:"session"},fg=ge,$h="persistence";function Rp(k){return gg.apply(this,arguments)}function gg(){return(gg=(0,b.Z)(function*(k){yield k._initializationPromise;const x=Ym(),I=X($h,k.config.apiKey,k.name);x&&x.setItem(I,k._getPersistence())})).apply(this,arguments)}function Ym(){var k;try{return(null===(k=function q0(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const Ky=ge;class Ya{constructor(){this.browserResolver=Xe(class ix{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ku,this._completeRedirectFn=bc,this._overrideRedirectResult=dd}_openPopup(x,I,L,W){var $=this;return(0,b.Z)(function*(){var De;Oe(null===(De=$.eventManagers[x._key()])||void 0===De?void 0:De.manager,"_initialize() not called before _openPopup()");const lt=lg(x,I,L,zt(),W);return function Dp(k,x,I,L=500,W=600){const $=Math.max((window.screen.availHeight-W)/2,0).toString(),De=Math.max((window.screen.availWidth-L)/2,0).toString();let lt="";const Xt=Object.assign(Object.assign({},M0),{width:L.toString(),height:W.toString(),top:$,left:De}),Di=(0,oe.z$)().toLowerCase();I&&(lt=li(Di)?"_blank":I),Ye(Di)&&(x=x||"http://localhost",Xt.scrollbars="yes");const hn=Object.entries(Xt).reduce((Ca,[kh,Qy])=>`${Ca}${kh}=${Qy},`,"");if(function xs(k=(0,oe.z$)()){var x;return Zi(k)&&!(null===(x=window.navigator)||void 0===x||!x.standalone)}(Di)&&"_self"!==lt)return function zm(k,x){const I=document.createElement("a");I.href=k,I.target=x;const L=document.createEvent("MouseEvent");L.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),I.dispatchEvent(L)}(x||"",lt),new Tp(null);const un=window.open(x||"",lt,hn);ge(un,k,"popup-blocked");try{un.focus()}catch{}return new Tp(un)}(x,lt,Tm())})()}_openRedirect(x,I,L,W){var $=this;return(0,b.Z)(function*(){return yield $._originValidation(x),function vc(k){_o().location.href=k}(lg(x,I,L,zt(),W)),new Promise(()=>{})})()}_initialize(x){const I=x._key();if(this.eventManagers[I]){const{manager:W,promise:$}=this.eventManagers[I];return W?Promise.resolve(W):(Oe($,"If manager is not set, promise should be"),$)}const L=this.initAndGetManager(x);return this.eventManagers[I]={promise:L},L.catch(()=>{delete this.eventManagers[I]}),L}initAndGetManager(x){var I=this;return(0,b.Z)(function*(){const L=yield function tA(k){return Vm.apply(this,arguments)}(x),W=new Nm(x);return L.register("authEvent",$=>(ge($?.authEvent,x,"invalid-auth-event"),{status:W.onEvent($.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),I.eventManagers[x._key()]={manager:W},I.iframes[x._key()]=L,W})()}_isIframeWebStorageSupported(x,I){this.iframes[x._key()].send(jm,{type:jm},W=>{var $;const De=null===($=W?.[0])||void 0===$?void 0:$[jm];void 0!==De&&I(!!De),Rt(x,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(x){const I=x._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function IM(k){return JI.apply(this,arguments)}(x)),this.originValidationPromises[I]}get _shouldInitProactively(){return $l()||yt()||Zi()}}),this.cordovaResolver=Xe(class ox{constructor(){this._redirectPersistence=ku,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bc,this._overrideRedirectResult=dd}_initialize(x){var I=this;return(0,b.Z)(function*(){const L=x._key();let W=I.eventManagers.get(L);return W||(W=new H0(x),I.eventManagers.set(L,W),I.attachCallbackListeners(x,W)),W})()}_openPopup(x){Rt(x,"operation-not-supported-in-this-environment")}_openRedirect(x,I,L,W){var $=this;return(0,b.Z)(function*(){!function PM(k){var x,I,L,W,$,De,lt,Xt,Di,hn;const un=Cc();ge("function"==typeof(null===(x=un?.universalLinks)||void 0===x?void 0:x.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ge(typeof(null===(I=un?.BuildInfo)||void 0===I?void 0:I.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ge("function"==typeof(null===($=null===(W=null===(L=un?.cordova)||void 0===L?void 0:L.plugins)||void 0===W?void 0:W.browsertab)||void 0===$?void 0:$.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge("function"==typeof(null===(Xt=null===(lt=null===(De=un?.cordova)||void 0===De?void 0:De.plugins)||void 0===lt?void 0:lt.browsertab)||void 0===Xt?void 0:Xt.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ge("function"==typeof(null===(hn=null===(Di=un?.cordova)||void 0===Di?void 0:Di.InAppBrowser)||void 0===hn?void 0:hn.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(x);const De=yield $._initialize(x);yield De.initialized(),De.resetRedirect(),function k0(){Bs.clear()}(),yield $._originValidation(x);const lt=function V0(k,x,I=null){return{type:x,eventId:I,urlResponse:null,sessionId:gd(),postBody:null,tenantId:k.tenantId,error:gt(k,"no-auth-event")}}(x,L,W);yield function sA(k,x){return Uy()._set(pg(k),x)}(x,lt);const Xt=yield function wc(k,x,I){return Ap.apply(this,arguments)}(x,lt,I),Di=yield function B0(k){const{cordova:x}=Cc();return new Promise(I=>{x.plugins.browsertab.isAvailable(L=>{let W=null;L?x.plugins.browsertab.openUrl(k):W=x.InAppBrowser.open(k,function jr(k=(0,oe.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(k)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(k)}()?"_blank":"_system","location=yes"),I(W)})})}(Xt);return function OM(k,x,I){return rA.apply(this,arguments)}(x,De,Di)})()}_isIframeWebStorageSupported(x,I){throw new Error("Method not implemented.")}_originValidation(x){const I=x._key();return this.originValidationPromises[I]||(this.originValidationPromises[I]=function N0(k){return Vy.apply(this,arguments)}(x)),this.originValidationPromises[I]}attachCallbackListeners(x,I){const{universalLinks:L,handleOpenURL:W,BuildInfo:$}=Cc(),De=setTimeout((0,b.Z)(function*(){yield oA(x),I.onEvent(lA())}),500),lt=function(){var hn=(0,b.Z)(function*(un){clearTimeout(De);const Ca=yield oA(x);let kh=null;Ca&&un?.url&&(kh=function dg(k,x){var I,L;const W=function Zo(k){const x=Wy(k),I=x.link?decodeURIComponent(x.link):void 0,L=Wy(I).link,W=x.deep_link_id?decodeURIComponent(x.deep_link_id):void 0;return Wy(W).link||W||L||I||k}(x);if(W.includes("/__/auth/callback")){const $=Wy(W),De=$.firebaseError?function kp(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent($.firebaseError)):null,lt=null===(L=null===(I=De?.code)||void 0===I?void 0:I.split("auth/"))||void 0===L?void 0:L[1],Xt=lt?gt(lt):null;return Xt?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:Xt,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:W,postBody:null}}return null}(Ca,un.url)),I.onEvent(kh||lA())});return function(Ca){return hn.apply(this,arguments)}}();typeof L<"u"&&"function"==typeof L.subscribe&&L.subscribe(null,lt);const Xt=W,Di=`${$.packageName.toLowerCase()}://`;Cc().handleOpenURL=function(){var hn=(0,b.Z)(function*(un){if(un.toLowerCase().startsWith(Di)&&lt({url:un}),"function"==typeof Xt)try{Xt(un)}catch(Ca){console.error(Ca)}});return function(un){return hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ku,this._completeRedirectFn=bc,this._overrideRedirectResult=dd}_initialize(x){var I=this;return(0,b.Z)(function*(){return yield I.selectUnderlyingResolver(),I.assertedUnderlyingResolver._initialize(x)})()}_openPopup(x,I,L,W){var $=this;return(0,b.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openPopup(x,I,L,W)})()}_openRedirect(x,I,L,W){var $=this;return(0,b.Z)(function*(){return yield $.selectUnderlyingResolver(),$.assertedUnderlyingResolver._openRedirect(x,I,L,W)})()}_isIframeWebStorageSupported(x,I){this.assertedUnderlyingResolver._isIframeWebStorageSupported(x,I)}_originValidation(x){return this.assertedUnderlyingResolver._originValidation(x)}get _shouldInitProactively(){return Gy()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ky(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var x=this;return(0,b.Z)(function*(){if(x.underlyingResolver)return;const I=yield function pA(){return $m.apply(this,arguments)}();x.underlyingResolver=I?x.cordovaResolver:x.browserResolver})()}}function K0(k){return k.unwrap()}function gA(k){return Y0(k)}function Y0(k){const{_tokenResponse:x}=k instanceof oe.ZR?k.customData:k;if(!x)return null;if(!(k instanceof oe.ZR)&&"temporaryProof"in x&&"phoneNumber"in x)return Ay.credentialFromResult(k);const I=x.providerId;if(!I||"password"===I)return null;let L;switch(I){case"google.com":L=Uf;break;case"facebook.com":L=lp;break;case"github.com":L=cm;break;case"twitter.com":L=_a;break;default:const{oauthIdToken:W,oauthAccessToken:$,oauthTokenSecret:De,pendingToken:lt,nonce:Xt}=x;return $||De||W||lt?lt?I.startsWith("saml.")?Th._create(I,lt):Eh._fromParams({providerId:I,signInMethod:I,pendingToken:lt,idToken:W,accessToken:$}):new cc(I).credential({idToken:W,accessToken:$,rawNonce:Xt}):null}return k instanceof oe.ZR?L.credentialFromError(k):L.credentialFromResult(k)}function Xo(k,x){return x.catch(I=>{throw I instanceof oe.ZR&&function $0(k,x){var I,L;const W=null===(I=x.customData)||void 0===I?void 0:I._tokenResponse;if("auth/multi-factor-auth-required"===(null===(L=x)||void 0===L?void 0:L.code))x.resolver=new NM(k,function bm(k,x){var I;const L=(0,oe.m9)(k),W=x;return ge(x.customData.operationType,L,"argument-error"),ge(null===(I=W.customData._serverResponse)||void 0===I?void 0:I.mfaPendingCredential,L,"argument-error"),g0._fromError(L,W)}(k,x));else if(W){const $=Y0(x),De=x;$&&(De.credential=$,De.tenantId=W.tenantId||void 0,De.email=W.email||void 0,De.phoneNumber=W.phoneNumber||void 0)}}(k,I),I}).then(I=>{const W=I.user;return{operationType:I.operationType,credential:gA(I),additionalUserInfo:yy(I),user:Yh.getOrCreate(W)}})}function Yy(k,x){return Z0.apply(this,arguments)}function Z0(){return(Z0=(0,b.Z)(function*(k,x){const I=yield x;return{verificationId:I.verificationId,confirm:L=>Xo(k,I.confirm(L))}})).apply(this,arguments)}class NM{constructor(x,I){this.resolver=I,this.auth=function $y(k){return k.wrapped()}(x)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(x){return Xo(K0(this.auth),this.resolver.resolveSignIn(x))}}class Yh{constructor(x){this._delegate=x,this.multiFactor=function Yf(k){const x=(0,oe.m9)(k);return Cy.has(x)||Cy.set(x,GI._fromUser(x)),Cy.get(x)}(x)}static getOrCreate(x){return Yh.USER_MAP.has(x)||Yh.USER_MAP.set(x,new Yh(x)),Yh.USER_MAP.get(x)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(x){return this._delegate.getIdTokenResult(x)}getIdToken(x){return this._delegate.getIdToken(x)}linkAndRetrieveDataWithCredential(x){return this.linkWithCredential(x)}linkWithCredential(x){var I=this;return(0,b.Z)(function*(){return Xo(I.auth,ee(I._delegate,x))})()}linkWithPhoneNumber(x,I){var L=this;return(0,b.Z)(function*(){return Yy(L.auth,function Xl(k,x,I){return Gh.apply(this,arguments)}(L._delegate,x,I))})()}linkWithPopup(x){var I=this;return(0,b.Z)(function*(){return Xo(I.auth,function ky(k,x,I){return Pm.apply(this,arguments)}(I._delegate,x,Ya))})()}linkWithRedirect(x){var I=this;return(0,b.Z)(function*(){return yield Rp(_e(I.auth)),function XE(k,x,I){return function QI(k,x,I){return rg.apply(this,arguments)}(k,x,I)}(I._delegate,x,Ya)})()}reauthenticateAndRetrieveDataWithCredential(x){return this.reauthenticateWithCredential(x)}reauthenticateWithCredential(x){var I=this;return(0,b.Z)(function*(){return Xo(I.auth,tt(I._delegate,x))})()}reauthenticateWithPhoneNumber(x,I){return Yy(this.auth,function T0(k,x,I){return tg.apply(this,arguments)}(this._delegate,x,I))}reauthenticateWithPopup(x){return Xo(this.auth,function ZI(k,x,I){return A0.apply(this,arguments)}(this._delegate,x,Ya))}reauthenticateWithRedirect(x){var I=this;return(0,b.Z)(function*(){return yield Rp(_e(I.auth)),function Py(k,x,I){return function ng(k,x,I){return My.apply(this,arguments)}(k,x,I)}(I._delegate,x,Ya)})()}sendEmailVerification(x){return function HI(k,x){return gm.apply(this,arguments)}(this._delegate,x)}unlink(x){var I=this;return(0,b.Z)(function*(){return yield function xl(k,x){return my.apply(this,arguments)}(I._delegate,x),I})()}updateEmail(x){return function VE(k,x){return $f((0,oe.m9)(k),x,null)}(this._delegate,x)}updatePassword(x){return function mm(k,x){return $f((0,oe.m9)(k),null,x)}(this._delegate,x)}updatePhoneNumber(x){return function Lo(k,x){return qi.apply(this,arguments)}(this._delegate,x)}updateProfile(x){return function zI(k,x){return u0.apply(this,arguments)}(this._delegate,x)}verifyBeforeUpdateEmail(x,I){return function VI(k,x,I){return l0.apply(this,arguments)}(this._delegate,x,I)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Yh.USER_MAP=new WeakMap;const _p=ge;let X0=(()=>{class k{constructor(I,L){if(this.app=I,L.isInitialized())return this._delegate=L.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:W}=I.options;_p(W,"invalid-api-key",{appName:I.name}),_p(W,"invalid-api-key",{appName:I.name});const $=typeof window<"u"?Ya:void 0;this._delegate=L.initialize({options:{persistence:Lp(W,I.name),popupRedirectResolver:$}}),this._delegate._updateErrorMap(Ct),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Yh.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(I){this._delegate.languageCode=I}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(I){this._delegate.tenantId=I}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(I,L){!function jt(k,x,I){const L=_e(k);ge(L._canInitEmulator,L,"emulator-config-failed"),ge(/^https?:\/\//.test(x),L,"invalid-emulator-scheme");const W=!!I?.disableWarnings,$=Li(x),{host:De,port:lt}=function Fn(k){const x=Li(k),I=/(\/\/)?([^?#/]+)/.exec(k.substr(x.length));if(!I)return{host:"",port:null};const L=I[2].split("@").pop()||"",W=/^(\[[^\]]+\])(:|$)/.exec(L);if(W){const $=W[1];return{host:$,port:hr(L.substr($.length+1))}}{const[$,De]=L.split(":");return{host:$,port:hr(De)}}}(x);L.config.emulator={url:`${$}//${De}${null===lt?"":`:${lt}`}/`},L.settings.appVerificationDisabledForTesting=!0,L.emulatorConfig=Object.freeze({host:De,port:lt,protocol:$.replace(":",""),options:Object.freeze({disableWarnings:W})}),W||function Ks(){function k(){const x=document.createElement("p"),I=x.style;x.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",x.classList.add("firebase-emulator-warning"),document.body.appendChild(x)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",k):k())}()}(this._delegate,I,L)}applyActionCode(I){return function La(k,x){return Kf.apply(this,arguments)}(this._delegate,I)}checkActionCode(I){return cp(this._delegate,I)}confirmPasswordReset(I,L){return function up(k,x,I){return Dh.apply(this,arguments)}(this._delegate,I,L)}createUserWithEmailAndPassword(I,L){var W=this;return(0,b.Z)(function*(){return Xo(W._delegate,function dp(k,x,I){return vo.apply(this,arguments)}(W._delegate,I,L))})()}fetchProvidersForEmail(I){return this.fetchSignInMethodsForEmail(I)}fetchSignInMethodsForEmail(I){return function BE(k,x){return fm.apply(this,arguments)}(this._delegate,I)}isSignInWithEmailLink(I){return function ld(k,x){return"EMAIL_SIGNIN"===jf.parseLink(x)?.operation}(0,I)}getRedirectResult(){var I=this;return(0,b.Z)(function*(){_p(Km(),I._delegate,"operation-not-supported-in-this-environment");const L=yield function sg(k,x){return og.apply(this,arguments)}(I._delegate,Ya);return L?Xo(I._delegate,Promise.resolve(L)):{credential:null,user:null}})()}addFrameworkForLogging(I){!function FM(k,x){_e(k)._logFramework(x)}(this._delegate,I)}onAuthStateChanged(I,L,W){const{next:$,error:De,complete:lt}=Zy(I,L,W);return this._delegate.onAuthStateChanged($,De,lt)}onIdTokenChanged(I,L,W){const{next:$,error:De,complete:lt}=Zy(I,L,W);return this._delegate.onIdTokenChanged($,De,lt)}sendSignInLinkToEmail(I,L){return function o0(k,x,I){return pp.apply(this,arguments)}(this._delegate,I,L)}sendPasswordResetEmail(I,L){return function qh(k,x,I){return Ts.apply(this,arguments)}(this._delegate,I,L||void 0)}setPersistence(I){var L=this;return(0,b.Z)(function*(){let W;switch(function fA(k,x){fg(Object.values(al).includes(x),k,"invalid-persistence-type"),(0,oe.b$)()?fg(x!==al.SESSION,k,"unsupported-persistence-type"):(0,oe.UG)()?fg(x===al.NONE,k,"unsupported-persistence-type"):qy()?fg(x===al.NONE||x===al.LOCAL&&(0,oe.hl)(),k,"unsupported-persistence-type"):fg(x===al.NONE||W0(),k,"unsupported-persistence-type")}(L._delegate,I),I){case al.SESSION:W=ku;break;case al.LOCAL:W=(yield Xe(eg)._isAvailable())?eg:Em;break;case al.NONE:W=de;break;default:return Rt("argument-error",{appName:L._delegate.name})}return L._delegate.setPersistence(W)})()}signInAndRetrieveDataWithCredential(I){return this.signInWithCredential(I)}signInAnonymously(){return Xo(this._delegate,function bM(k){return $s.apply(this,arguments)}(this._delegate))}signInWithCredential(I){return Xo(this._delegate,hp(this._delegate,I))}signInWithCustomToken(I){return Xo(this._delegate,function tr(k,x){return to.apply(this,arguments)}(this._delegate,I))}signInWithEmailAndPassword(I,L){return Xo(this._delegate,function Au(k,x,I){return hp((0,oe.m9)(k),xh.credential(x,I))}(this._delegate,I,L))}signInWithEmailLink(I,L){return Xo(this._delegate,function CM(k,x,I){return a0.apply(this,arguments)}(this._delegate,I,L))}signInWithPhoneNumber(I,L){return Yy(this._delegate,function DM(k,x,I){return x0.apply(this,arguments)}(this._delegate,I,L))}signInWithPopup(I){var L=this;return(0,b.Z)(function*(){return _p(Km(),L._delegate,"operation-not-supported-in-this-environment"),Xo(L._delegate,function ZE(k,x,I){return I0.apply(this,arguments)}(L._delegate,I,Ya))})()}signInWithRedirect(I){var L=this;return(0,b.Z)(function*(){return _p(Km(),L._delegate,"operation-not-supported-in-this-environment"),yield Rp(L._delegate),function yo(k,x,I){return function _0(k,x,I){return bp.apply(this,arguments)}(k,x,I)}(L._delegate,I,Ya)})()}updateCurrentUser(I){return this._delegate.updateCurrentUser(I)}verifyPasswordResetCode(I){return function gc(k,x){return mc.apply(this,arguments)}(this._delegate,I)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=al,k})();function Zy(k,x,I){let L=k;"function"!=typeof k&&({next:L,error:x,complete:I}=k);const W=L;return{next:De=>W(De&&Yh.getOrCreate(De)),error:x,complete:I}}function Lp(k,x){const I=function G0(k,x){const I=Ym();if(!I)return[];const L=X($h,k,x);switch(I.getItem(L)){case al.NONE:return[de];case al.LOCAL:return[eg,ku];case al.SESSION:return[ku];default:return[]}}(k,x);if(typeof self<"u"&&!I.includes(eg)&&I.push(eg),typeof window<"u")for(const L of[Em,ku])I.includes(L)||I.push(L);return I.includes(de)||I.push(de),I}class Xy{constructor(){this.providerId="phone",this._delegate=new Ay(K0(Ve.Z.auth()))}static credential(x,I){return Ay.credential(x,I)}verifyPhoneNumber(x,I){return this._delegate.verifyPhoneNumber(x,I)}unwrap(){return this._delegate}}Xy.PHONE_SIGN_IN_METHOD=Ay.PHONE_SIGN_IN_METHOD,Xy.PROVIDER_ID=Ay.PROVIDER_ID;const mA=ge;class vA{constructor(x,I,L=Ve.Z.app()){var W;mA(null===(W=L.options)||void 0===W?void 0:W.apiKey,"invalid-api-key",{appName:L.name}),this._delegate=new ya(x,I,L.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function yA(k){k.INTERNAL.registerComponent(new et.wA("auth-compat",x=>{const I=x.getProvider("app-compat").getImmediate(),L=x.getProvider("auth");return new X0(I,L)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:xh,FacebookAuthProvider:lp,GithubAuthProvider:cm,GoogleAuthProvider:Uf,OAuthProvider:cc,SAMLAuthProvider:rd,PhoneAuthProvider:Xy,PhoneMultiFactorGenerator:hg,RecaptchaVerifier:vA,TwitterAuthProvider:_a,Auth:X0,AuthCredential:Pr,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.2.24")}(Ve.Z)},9751:(Wi,kt,te)=>{te.d(kt,{y:()=>ct});var b=te(930),Ve=te(727),oe=te(8822),$e=te(9635),ot=te(2416),ht=te(576),et=te(2806);let ct=(()=>{class Fe{constructor(bt){bt&&(this._subscribe=bt)}lift(bt){const Ct=new Fe;return Ct.source=this,Ct.operator=bt,Ct}subscribe(bt,Ct,di){const dt=function Ce(Fe){return Fe&&Fe instanceof b.Lv||function ve(Fe){return Fe&&(0,ht.m)(Fe.next)&&(0,ht.m)(Fe.error)&&(0,ht.m)(Fe.complete)}(Fe)&&(0,Ve.Nn)(Fe)}(bt)?bt:new b.Hp(bt,Ct,di);return(0,et.x)(()=>{const{operator:st,source:Mi}=this;dt.add(st?st.call(dt,Mi):Mi?this._subscribe(dt):this._trySubscribe(dt))}),dt}_trySubscribe(bt){try{return this._subscribe(bt)}catch(Ct){bt.error(Ct)}}forEach(bt,Ct){return new(Ct=at(Ct))((di,dt)=>{const st=new b.Hp({next:Mi=>{try{bt(Mi)}catch(Ei){dt(Ei),st.unsubscribe()}},error:dt,complete:di});this.subscribe(st)})}_subscribe(bt){var Ct;return null===(Ct=this.source)||void 0===Ct?void 0:Ct.subscribe(bt)}[oe.L](){return this}pipe(...bt){return(0,$e.U)(bt)(this)}toPromise(bt){return new(bt=at(bt))((Ct,di)=>{let dt;this.subscribe(st=>dt=st,st=>di(st),()=>Ct(dt))})}}return Fe.create=_t=>new Fe(_t),Fe})();function at(Fe){var _t;return null!==(_t=Fe??ot.v.Promise)&&void 0!==_t?_t:Promise}},7579:(Wi,kt,te)=>{te.d(kt,{x:()=>et});var b=te(9751),Ve=te(727);const $e=(0,te(3888).d)(at=>function(){at(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=te(8737),ht=te(2806);let et=(()=>{class at extends b.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Ce){const Fe=new ct(this,this);return Fe.operator=Ce,Fe}_throwIfClosed(){if(this.closed)throw new $e}next(Ce){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Fe of this.currentObservers)Fe.next(Ce)}})}error(Ce){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Ce;const{observers:Fe}=this;for(;Fe.length;)Fe.shift().error(Ce)}})}complete(){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Ce}=this;for(;Ce.length;)Ce.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Ce;return(null===(Ce=this.observers)||void 0===Ce?void 0:Ce.length)>0}_trySubscribe(Ce){return this._throwIfClosed(),super._trySubscribe(Ce)}_subscribe(Ce){return this._throwIfClosed(),this._checkFinalizedStatuses(Ce),this._innerSubscribe(Ce)}_innerSubscribe(Ce){const{hasError:Fe,isStopped:_t,observers:bt}=this;return Fe||_t?Ve.Lc:(this.currentObservers=null,bt.push(Ce),new Ve.w0(()=>{this.currentObservers=null,(0,ot.P)(bt,Ce)}))}_checkFinalizedStatuses(Ce){const{hasError:Fe,thrownError:_t,isStopped:bt}=this;Fe?Ce.error(_t):bt&&Ce.complete()}asObservable(){const Ce=new b.y;return Ce.source=this,Ce}}return at.create=(ve,Ce)=>new ct(ve,Ce),at})();class ct extends et{constructor(ve,Ce){super(),this.destination=ve,this.source=Ce}next(ve){var Ce,Fe;null===(Fe=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.next)||void 0===Fe||Fe.call(Ce,ve)}error(ve){var Ce,Fe;null===(Fe=null===(Ce=this.destination)||void 0===Ce?void 0:Ce.error)||void 0===Fe||Fe.call(Ce,ve)}complete(){var ve,Ce;null===(Ce=null===(ve=this.destination)||void 0===ve?void 0:ve.complete)||void 0===Ce||Ce.call(ve)}_subscribe(ve){var Ce,Fe;return null!==(Fe=null===(Ce=this.source)||void 0===Ce?void 0:Ce.subscribe(ve))&&void 0!==Fe?Fe:Ve.Lc}}},930:(Wi,kt,te)=>{te.d(kt,{Hp:()=>di,Lv:()=>Fe});var b=te(576),Ve=te(727),oe=te(2416),$e=te(7849),ot=te(5032);const ht=at("C",void 0,void 0);function at(Rt,gt,Et){return{kind:Rt,value:gt,error:Et}}var ve=te(3410),Ce=te(2806);class Fe extends Ve.w0{constructor(gt){super(),this.isStopped=!1,gt?(this.destination=gt,(0,Ve.Nn)(gt)&&gt.add(this)):this.destination=Ei}static create(gt,Et,Jt){return new di(gt,Et,Jt)}next(gt){this.isStopped?Mi(function ct(Rt){return at("N",Rt,void 0)}(gt),this):this._next(gt)}error(gt){this.isStopped?Mi(function et(Rt){return at("E",void 0,Rt)}(gt),this):(this.isStopped=!0,this._error(gt))}complete(){this.isStopped?Mi(ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(gt){this.destination.next(gt)}_error(gt){try{this.destination.error(gt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _t=Function.prototype.bind;function bt(Rt,gt){return _t.call(Rt,gt)}class Ct{constructor(gt){this.partialObserver=gt}next(gt){const{partialObserver:Et}=this;if(Et.next)try{Et.next(gt)}catch(Jt){dt(Jt)}}error(gt){const{partialObserver:Et}=this;if(Et.error)try{Et.error(gt)}catch(Jt){dt(Jt)}else dt(gt)}complete(){const{partialObserver:gt}=this;if(gt.complete)try{gt.complete()}catch(Et){dt(Et)}}}class di extends Fe{constructor(gt,Et,Jt){let Vt;if(super(),(0,b.m)(gt)||!gt)Vt={next:gt??void 0,error:Et??void 0,complete:Jt??void 0};else{let ge;this&&oe.v.useDeprecatedNextContext?(ge=Object.create(gt),ge.unsubscribe=()=>this.unsubscribe(),Vt={next:gt.next&&bt(gt.next,ge),error:gt.error&&bt(gt.error,ge),complete:gt.complete&&bt(gt.complete,ge)}):Vt=gt}this.destination=new Ct(Vt)}}function dt(Rt){oe.v.useDeprecatedSynchronousErrorHandling?(0,Ce.O)(Rt):(0,$e.h)(Rt)}function Mi(Rt,gt){const{onStoppedNotification:Et}=oe.v;Et&&ve.z.setTimeout(()=>Et(Rt,gt))}const Ei={closed:!0,next:ot.Z,error:function st(Rt){throw Rt},complete:ot.Z}},727:(Wi,kt,te)=>{te.d(kt,{Lc:()=>ht,w0:()=>ot,Nn:()=>et});var b=te(576);const oe=(0,te(3888).d)(at=>function(Ce){at(this),this.message=Ce?`${Ce.length} errors occurred during unsubscription:\n${Ce.map((Fe,_t)=>`${_t+1}) ${Fe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Ce});var $e=te(8737);class ot{constructor(ve){this.initialTeardown=ve,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ve;if(!this.closed){this.closed=!0;const{_parentage:Ce}=this;if(Ce)if(this._parentage=null,Array.isArray(Ce))for(const bt of Ce)bt.remove(this);else Ce.remove(this);const{initialTeardown:Fe}=this;if((0,b.m)(Fe))try{Fe()}catch(bt){ve=bt instanceof oe?bt.errors:[bt]}const{_finalizers:_t}=this;if(_t){this._finalizers=null;for(const bt of _t)try{ct(bt)}catch(Ct){ve=ve??[],Ct instanceof oe?ve=[...ve,...Ct.errors]:ve.push(Ct)}}if(ve)throw new oe(ve)}}add(ve){var Ce;if(ve&&ve!==this)if(this.closed)ct(ve);else{if(ve instanceof ot){if(ve.closed||ve._hasParent(this))return;ve._addParent(this)}(this._finalizers=null!==(Ce=this._finalizers)&&void 0!==Ce?Ce:[]).push(ve)}}_hasParent(ve){const{_parentage:Ce}=this;return Ce===ve||Array.isArray(Ce)&&Ce.includes(ve)}_addParent(ve){const{_parentage:Ce}=this;this._parentage=Array.isArray(Ce)?(Ce.push(ve),Ce):Ce?[Ce,ve]:ve}_removeParent(ve){const{_parentage:Ce}=this;Ce===ve?this._parentage=null:Array.isArray(Ce)&&(0,$e.P)(Ce,ve)}remove(ve){const{_finalizers:Ce}=this;Ce&&(0,$e.P)(Ce,ve),ve instanceof ot&&ve._removeParent(this)}}ot.EMPTY=(()=>{const at=new ot;return at.closed=!0,at})();const ht=ot.EMPTY;function et(at){return at instanceof ot||at&&"closed"in at&&(0,b.m)(at.remove)&&(0,b.m)(at.add)&&(0,b.m)(at.unsubscribe)}function ct(at){(0,b.m)(at)?at():at.unsubscribe()}},2416:(Wi,kt,te)=>{te.d(kt,{v:()=>b});const b={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Wi,kt,te)=>{te.d(kt,{E:()=>Ve});const Ve=new(te(9751).y)(ot=>ot.complete())},8996:(Wi,kt,te)=>{te.d(kt,{D:()=>gt});var b=te(8421),Ve=te(5363),oe=te(9468),ht=te(9751),ct=te(2202),at=te(576),ve=te(9672);function Fe(Et,Jt){if(!Et)throw new Error("Iterable cannot be null");return new ht.y(Vt=>{(0,ve.f)(Vt,Jt,()=>{const ge=Et[Symbol.asyncIterator]();(0,ve.f)(Vt,Jt,()=>{ge.next().then(ft=>{ft.done?Vt.complete():Vt.next(ft.value)})},0,!0)})})}var _t=te(3670),bt=te(8239),Ct=te(1144),di=te(6495),dt=te(2206),st=te(4532),Mi=te(3260);function gt(Et,Jt){return Jt?function Rt(Et,Jt){if(null!=Et){if((0,_t.c)(Et))return function $e(Et,Jt){return(0,b.Xf)(Et).pipe((0,oe.R)(Jt),(0,Ve.Q)(Jt))}(Et,Jt);if((0,Ct.z)(Et))return function et(Et,Jt){return new ht.y(Vt=>{let ge=0;return Jt.schedule(function(){ge===Et.length?Vt.complete():(Vt.next(Et[ge++]),Vt.closed||this.schedule())})})}(Et,Jt);if((0,bt.t)(Et))return function ot(Et,Jt){return(0,b.Xf)(Et).pipe((0,oe.R)(Jt),(0,Ve.Q)(Jt))}(Et,Jt);if((0,dt.D)(Et))return Fe(Et,Jt);if((0,di.T)(Et))return function Ce(Et,Jt){return new ht.y(Vt=>{let ge;return(0,ve.f)(Vt,Jt,()=>{ge=Et[ct.h](),(0,ve.f)(Vt,Jt,()=>{let ft,Oe;try{({value:ft,done:Oe}=ge.next())}catch(Ue){return void Vt.error(Ue)}Oe?Vt.complete():Vt.next(ft)},0,!0)}),()=>(0,at.m)(ge?.return)&&ge.return()})}(Et,Jt);if((0,Mi.L)(Et))return function Ei(Et,Jt){return Fe((0,Mi.Q)(Et),Jt)}(Et,Jt)}throw(0,st.z)(Et)}(Et,Jt):(0,b.Xf)(Et)}},8421:(Wi,kt,te)=>{te.d(kt,{Xf:()=>_t});var b=te(655),Ve=te(1144),oe=te(8239),$e=te(9751),ot=te(3670),ht=te(2206),et=te(4532),ct=te(6495),at=te(3260),ve=te(576),Ce=te(7849),Fe=te(8822);function _t(Rt){if(Rt instanceof $e.y)return Rt;if(null!=Rt){if((0,ot.c)(Rt))return function bt(Rt){return new $e.y(gt=>{const Et=Rt[Fe.L]();if((0,ve.m)(Et.subscribe))return Et.subscribe(gt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Rt);if((0,Ve.z)(Rt))return function Ct(Rt){return new $e.y(gt=>{for(let Et=0;Et<Rt.length&&!gt.closed;Et++)gt.next(Rt[Et]);gt.complete()})}(Rt);if((0,oe.t)(Rt))return function di(Rt){return new $e.y(gt=>{Rt.then(Et=>{gt.closed||(gt.next(Et),gt.complete())},Et=>gt.error(Et)).then(null,Ce.h)})}(Rt);if((0,ht.D)(Rt))return st(Rt);if((0,ct.T)(Rt))return function dt(Rt){return new $e.y(gt=>{for(const Et of Rt)if(gt.next(Et),gt.closed)return;gt.complete()})}(Rt);if((0,at.L)(Rt))return function Mi(Rt){return st((0,at.Q)(Rt))}(Rt)}throw(0,et.z)(Rt)}function st(Rt){return new $e.y(gt=>{(function Ei(Rt,gt){var Et,Jt,Vt,ge;return(0,b.mG)(this,void 0,void 0,function*(){try{for(Et=(0,b.KL)(Rt);!(Jt=yield Et.next()).done;)if(gt.next(Jt.value),gt.closed)return}catch(ft){Vt={error:ft}}finally{try{Jt&&!Jt.done&&(ge=Et.return)&&(yield ge.call(Et))}finally{if(Vt)throw Vt.error}}gt.complete()})})(Rt,gt).catch(Et=>gt.error(Et))})}},6451:(Wi,kt,te)=>{te.d(kt,{T:()=>ht});var b=te(8189),Ve=te(8421),oe=te(515),$e=te(7669),ot=te(8996);function ht(...et){const ct=(0,$e.yG)(et),at=(0,$e._6)(et,1/0),ve=et;return ve.length?1===ve.length?(0,Ve.Xf)(ve[0]):(0,b.J)(at)((0,ot.D)(ve,ct)):oe.E}},5403:(Wi,kt,te)=>{te.d(kt,{x:()=>Ve});var b=te(930);function Ve($e,ot,ht,et,ct){return new oe($e,ot,ht,et,ct)}class oe extends b.Lv{constructor(ot,ht,et,ct,at,ve){super(ot),this.onFinalize=at,this.shouldUnsubscribe=ve,this._next=ht?function(Ce){try{ht(Ce)}catch(Fe){ot.error(Fe)}}:super._next,this._error=ct?function(Ce){try{ct(Ce)}catch(Fe){ot.error(Fe)}finally{this.unsubscribe()}}:super._error,this._complete=et?function(){try{et()}catch(Ce){ot.error(Ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ot;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ht}=this;super.unsubscribe(),!ht&&(null===(ot=this.onFinalize)||void 0===ot||ot.call(this))}}}},4004:(Wi,kt,te)=>{te.d(kt,{U:()=>oe});var b=te(4482),Ve=te(5403);function oe($e,ot){return(0,b.e)((ht,et)=>{let ct=0;ht.subscribe((0,Ve.x)(et,at=>{et.next($e.call(ot,at,ct++))}))})}},8189:(Wi,kt,te)=>{te.d(kt,{J:()=>oe});var b=te(5577),Ve=te(4671);function oe($e=1/0){return(0,b.z)(Ve.y,$e)}},5577:(Wi,kt,te)=>{te.d(kt,{z:()=>ct});var b=te(4004),Ve=te(8421),oe=te(4482),$e=te(9672),ot=te(5403),et=te(576);function ct(at,ve,Ce=1/0){return(0,et.m)(ve)?ct((Fe,_t)=>(0,b.U)((bt,Ct)=>ve(Fe,bt,_t,Ct))((0,Ve.Xf)(at(Fe,_t))),Ce):("number"==typeof ve&&(Ce=ve),(0,oe.e)((Fe,_t)=>function ht(at,ve,Ce,Fe,_t,bt,Ct,di){const dt=[];let st=0,Mi=0,Ei=!1;const Rt=()=>{Ei&&!dt.length&&!st&&ve.complete()},gt=Jt=>st<Fe?Et(Jt):dt.push(Jt),Et=Jt=>{bt&&ve.next(Jt),st++;let Vt=!1;(0,Ve.Xf)(Ce(Jt,Mi++)).subscribe((0,ot.x)(ve,ge=>{_t?.(ge),bt?gt(ge):ve.next(ge)},()=>{Vt=!0},void 0,()=>{if(Vt)try{for(st--;dt.length&&st<Fe;){const ge=dt.shift();Ct?(0,$e.f)(ve,Ct,()=>Et(ge)):Et(ge)}Rt()}catch(ge){ve.error(ge)}}))};return at.subscribe((0,ot.x)(ve,gt,()=>{Ei=!0,Rt()})),()=>{di?.()}}(Fe,_t,at,Ce)))}},5363:(Wi,kt,te)=>{te.d(kt,{Q:()=>$e});var b=te(9672),Ve=te(4482),oe=te(5403);function $e(ot,ht=0){return(0,Ve.e)((et,ct)=>{et.subscribe((0,oe.x)(ct,at=>(0,b.f)(ct,ot,()=>ct.next(at),ht),()=>(0,b.f)(ct,ot,()=>ct.complete(),ht),at=>(0,b.f)(ct,ot,()=>ct.error(at),ht)))})}},3099:(Wi,kt,te)=>{te.d(kt,{B:()=>ot});var b=te(8421),Ve=te(7579),oe=te(930),$e=te(4482);function ot(et={}){const{connector:ct=(()=>new Ve.x),resetOnError:at=!0,resetOnComplete:ve=!0,resetOnRefCountZero:Ce=!0}=et;return Fe=>{let _t,bt,Ct,di=0,dt=!1,st=!1;const Mi=()=>{bt?.unsubscribe(),bt=void 0},Ei=()=>{Mi(),_t=Ct=void 0,dt=st=!1},Rt=()=>{const gt=_t;Ei(),gt?.unsubscribe()};return(0,$e.e)((gt,Et)=>{di++,!st&&!dt&&Mi();const Jt=Ct=Ct??ct();Et.add(()=>{di--,0===di&&!st&&!dt&&(bt=ht(Rt,Ce))}),Jt.subscribe(Et),!_t&&di>0&&(_t=new oe.Hp({next:Vt=>Jt.next(Vt),error:Vt=>{st=!0,Mi(),bt=ht(Ei,at,Vt),Jt.error(Vt)},complete:()=>{dt=!0,Mi(),bt=ht(Ei,ve),Jt.complete()}}),(0,b.Xf)(gt).subscribe(_t))})(Fe)}}function ht(et,ct,...at){if(!0===ct)return void et();if(!1===ct)return;const ve=new oe.Hp({next:()=>{ve.unsubscribe(),et()}});return ct(...at).subscribe(ve)}},9468:(Wi,kt,te)=>{te.d(kt,{R:()=>Ve});var b=te(4482);function Ve(oe,$e=0){return(0,b.e)((ot,ht)=>{ht.add(oe.schedule(()=>ot.subscribe(ht),$e))})}},8505:(Wi,kt,te)=>{te.d(kt,{b:()=>ot});var b=te(576),Ve=te(4482),oe=te(5403),$e=te(4671);function ot(ht,et,ct){const at=(0,b.m)(ht)||et||ct?{next:ht,error:et,complete:ct}:ht;return at?(0,Ve.e)((ve,Ce)=>{var Fe;null===(Fe=at.subscribe)||void 0===Fe||Fe.call(at);let _t=!0;ve.subscribe((0,oe.x)(Ce,bt=>{var Ct;null===(Ct=at.next)||void 0===Ct||Ct.call(at,bt),Ce.next(bt)},()=>{var bt;_t=!1,null===(bt=at.complete)||void 0===bt||bt.call(at),Ce.complete()},bt=>{var Ct;_t=!1,null===(Ct=at.error)||void 0===Ct||Ct.call(at,bt),Ce.error(bt)},()=>{var bt,Ct;_t&&(null===(bt=at.unsubscribe)||void 0===bt||bt.call(at)),null===(Ct=at.finalize)||void 0===Ct||Ct.call(at)}))}):$e.y}},4408:(Wi,kt,te)=>{te.d(kt,{o:()=>ot});var b=te(727);class Ve extends b.w0{constructor(et,ct){super()}schedule(et,ct=0){return this}}const oe={setInterval(ht,et,...ct){const{delegate:at}=oe;return at?.setInterval?at.setInterval(ht,et,...ct):setInterval(ht,et,...ct)},clearInterval(ht){const{delegate:et}=oe;return(et?.clearInterval||clearInterval)(ht)},delegate:void 0};var $e=te(8737);class ot extends Ve{constructor(et,ct){super(et,ct),this.scheduler=et,this.work=ct,this.pending=!1}schedule(et,ct=0){if(this.closed)return this;this.state=et;const at=this.id,ve=this.scheduler;return null!=at&&(this.id=this.recycleAsyncId(ve,at,ct)),this.pending=!0,this.delay=ct,this.id=this.id||this.requestAsyncId(ve,this.id,ct),this}requestAsyncId(et,ct,at=0){return oe.setInterval(et.flush.bind(et,this),at)}recycleAsyncId(et,ct,at=0){if(null!=at&&this.delay===at&&!1===this.pending)return ct;oe.clearInterval(ct)}execute(et,ct){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const at=this._execute(et,ct);if(at)return at;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(et,ct){let ve,at=!1;try{this.work(et)}catch(Ce){at=!0,ve=Ce||new Error("Scheduled action threw falsy error")}if(at)return this.unsubscribe(),ve}unsubscribe(){if(!this.closed){const{id:et,scheduler:ct}=this,{actions:at}=ct;this.work=this.state=this.scheduler=null,this.pending=!1,(0,$e.P)(at,this),null!=et&&(this.id=this.recycleAsyncId(ct,et,null)),this.delay=null,super.unsubscribe()}}}},7565:(Wi,kt,te)=>{te.d(kt,{v:()=>oe});var b=te(6063);class Ve{constructor(ot,ht=Ve.now){this.schedulerActionCtor=ot,this.now=ht}schedule(ot,ht=0,et){return new this.schedulerActionCtor(this,ot).schedule(et,ht)}}Ve.now=b.l.now;class oe extends Ve{constructor(ot,ht=Ve.now){super(ot,ht),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ot){const{actions:ht}=this;if(this._active)return void ht.push(ot);let et;this._active=!0;do{if(et=ot.execute(ot.state,ot.delay))break}while(ot=ht.shift());if(this._active=!1,et){for(;ot=ht.shift();)ot.unsubscribe();throw et}}}},4986:(Wi,kt,te)=>{te.d(kt,{z:()=>oe});var b=te(4408);const oe=new(te(7565).v)(b.o)},6063:(Wi,kt,te)=>{te.d(kt,{l:()=>b});const b={now:()=>(b.delegate||Date).now(),delegate:void 0}},3410:(Wi,kt,te)=>{te.d(kt,{z:()=>b});const b={setTimeout(Ve,oe,...$e){const{delegate:ot}=b;return ot?.setTimeout?ot.setTimeout(Ve,oe,...$e):setTimeout(Ve,oe,...$e)},clearTimeout(Ve){const{delegate:oe}=b;return(oe?.clearTimeout||clearTimeout)(Ve)},delegate:void 0}},2202:(Wi,kt,te)=>{te.d(kt,{h:()=>Ve});const Ve=function b(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Wi,kt,te)=>{te.d(kt,{L:()=>b});const b="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Wi,kt,te)=>{te.d(kt,{_6:()=>ht,jO:()=>$e,yG:()=>ot});var b=te(576);function oe(et){return et[et.length-1]}function $e(et){return(0,b.m)(oe(et))?et.pop():void 0}function ot(et){return function Ve(et){return et&&(0,b.m)(et.schedule)}(oe(et))?et.pop():void 0}function ht(et,ct){return"number"==typeof oe(et)?et.pop():ct}},8737:(Wi,kt,te)=>{function b(Ve,oe){if(Ve){const $e=Ve.indexOf(oe);0<=$e&&Ve.splice($e,1)}}te.d(kt,{P:()=>b})},3888:(Wi,kt,te)=>{function b(Ve){const $e=Ve(ot=>{Error.call(ot),ot.stack=(new Error).stack});return $e.prototype=Object.create(Error.prototype),$e.prototype.constructor=$e,$e}te.d(kt,{d:()=>b})},2806:(Wi,kt,te)=>{te.d(kt,{O:()=>$e,x:()=>oe});var b=te(2416);let Ve=null;function oe(ot){if(b.v.useDeprecatedSynchronousErrorHandling){const ht=!Ve;if(ht&&(Ve={errorThrown:!1,error:null}),ot(),ht){const{errorThrown:et,error:ct}=Ve;if(Ve=null,et)throw ct}}else ot()}function $e(ot){b.v.useDeprecatedSynchronousErrorHandling&&Ve&&(Ve.errorThrown=!0,Ve.error=ot)}},9672:(Wi,kt,te)=>{function b(Ve,oe,$e,ot=0,ht=!1){const et=oe.schedule(function(){$e(),ht?Ve.add(this.schedule(null,ot)):this.unsubscribe()},ot);if(Ve.add(et),!ht)return et}te.d(kt,{f:()=>b})},4671:(Wi,kt,te)=>{function b(Ve){return Ve}te.d(kt,{y:()=>b})},1144:(Wi,kt,te)=>{te.d(kt,{z:()=>b});const b=Ve=>Ve&&"number"==typeof Ve.length&&"function"!=typeof Ve},2206:(Wi,kt,te)=>{te.d(kt,{D:()=>Ve});var b=te(576);function Ve(oe){return Symbol.asyncIterator&&(0,b.m)(oe?.[Symbol.asyncIterator])}},576:(Wi,kt,te)=>{function b(Ve){return"function"==typeof Ve}te.d(kt,{m:()=>b})},3670:(Wi,kt,te)=>{te.d(kt,{c:()=>oe});var b=te(8822),Ve=te(576);function oe($e){return(0,Ve.m)($e[b.L])}},6495:(Wi,kt,te)=>{te.d(kt,{T:()=>oe});var b=te(2202),Ve=te(576);function oe($e){return(0,Ve.m)($e?.[b.h])}},8239:(Wi,kt,te)=>{te.d(kt,{t:()=>Ve});var b=te(576);function Ve(oe){return(0,b.m)(oe?.then)}},3260:(Wi,kt,te)=>{te.d(kt,{L:()=>$e,Q:()=>oe});var b=te(655),Ve=te(576);function oe(ot){return(0,b.FC)(this,arguments,function*(){const et=ot.getReader();try{for(;;){const{value:ct,done:at}=yield(0,b.qq)(et.read());if(at)return yield(0,b.qq)(void 0);yield yield(0,b.qq)(ct)}}finally{et.releaseLock()}})}function $e(ot){return(0,Ve.m)(ot?.getReader)}},4482:(Wi,kt,te)=>{te.d(kt,{A:()=>Ve,e:()=>oe});var b=te(576);function Ve($e){return(0,b.m)($e?.lift)}function oe($e){return ot=>{if(Ve(ot))return ot.lift(function(ht){try{return $e(ht,this)}catch(et){this.error(et)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Wi,kt,te)=>{function b(){}te.d(kt,{Z:()=>b})},9635:(Wi,kt,te)=>{te.d(kt,{U:()=>oe,z:()=>Ve});var b=te(4671);function Ve(...$e){return oe($e)}function oe($e){return 0===$e.length?b.y:1===$e.length?$e[0]:function(ht){return $e.reduce((et,ct)=>ct(et),ht)}}},7849:(Wi,kt,te)=>{te.d(kt,{h:()=>oe});var b=te(2416),Ve=te(3410);function oe($e){Ve.z.setTimeout(()=>{const{onUnhandledError:ot}=b.v;if(!ot)throw $e;ot($e)})}},4532:(Wi,kt,te)=>{function b(Ve){return new TypeError(`You provided ${null!==Ve&&"object"==typeof Ve?"an invalid object":`'${Ve}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}te.d(kt,{z:()=>b})},655:(Wi,kt,te)=>{function $e(Oe,Ue){var Xe={};for(var Ge in Oe)Object.prototype.hasOwnProperty.call(Oe,Ge)&&Ue.indexOf(Ge)<0&&(Xe[Ge]=Oe[Ge]);if(null!=Oe&&"function"==typeof Object.getOwnPropertySymbols){var Wt=0;for(Ge=Object.getOwnPropertySymbols(Oe);Wt<Ge.length;Wt++)Ue.indexOf(Ge[Wt])<0&&Object.prototype.propertyIsEnumerable.call(Oe,Ge[Wt])&&(Xe[Ge[Wt]]=Oe[Ge[Wt]])}return Xe}function ot(Oe,Ue,Xe,Ge){var ji,Wt=arguments.length,zt=Wt<3?Ue:null===Ge?Ge=Object.getOwnPropertyDescriptor(Ue,Xe):Ge;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)zt=Reflect.decorate(Oe,Ue,Xe,Ge);else for(var Jn=Oe.length-1;Jn>=0;Jn--)(ji=Oe[Jn])&&(zt=(Wt<3?ji(zt):Wt>3?ji(Ue,Xe,zt):ji(Ue,Xe))||zt);return Wt>3&&zt&&Object.defineProperty(Ue,Xe,zt),zt}function ct(Oe,Ue,Xe,Ge){return new(Xe||(Xe=Promise))(function(zt,ji){function Jn(yr){try{oi(Ge.next(yr))}catch(Es){ji(Es)}}function Sn(yr){try{oi(Ge.throw(yr))}catch(Es){ji(Es)}}function oi(yr){yr.done?zt(yr.value):function Wt(zt){return zt instanceof Xe?zt:new Xe(function(ji){ji(zt)})}(yr.value).then(Jn,Sn)}oi((Ge=Ge.apply(Oe,Ue||[])).next())})}function dt(Oe){return this instanceof dt?(this.v=Oe,this):new dt(Oe)}function st(Oe,Ue,Xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Wt,Ge=Xe.apply(Oe,Ue||[]),zt=[];return Wt={},ji("next"),ji("throw"),ji("return"),Wt[Symbol.asyncIterator]=function(){return this},Wt;function ji(br){Ge[br]&&(Wt[br]=function(lr){return new Promise(function(Js,nn){zt.push([br,lr,Js,nn])>1||Jn(br,lr)})})}function Jn(br,lr){try{!function Sn(br){br.value instanceof dt?Promise.resolve(br.value.v).then(oi,yr):Es(zt[0][2],br)}(Ge[br](lr))}catch(Js){Es(zt[0][3],Js)}}function oi(br){Jn("next",br)}function yr(br){Jn("throw",br)}function Es(br,lr){br(lr),zt.shift(),zt.length&&Jn(zt[0][0],zt[0][1])}}function Ei(Oe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Xe,Ue=Oe[Symbol.asyncIterator];return Ue?Ue.call(Oe):(Oe=function Fe(Oe){var Ue="function"==typeof Symbol&&Symbol.iterator,Xe=Ue&&Oe[Ue],Ge=0;if(Xe)return Xe.call(Oe);if(Oe&&"number"==typeof Oe.length)return{next:function(){return Oe&&Ge>=Oe.length&&(Oe=void 0),{value:Oe&&Oe[Ge++],done:!Oe}}};throw new TypeError(Ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(Oe),Xe={},Ge("next"),Ge("throw"),Ge("return"),Xe[Symbol.asyncIterator]=function(){return this},Xe);function Ge(zt){Xe[zt]=Oe[zt]&&function(ji){return new Promise(function(Jn,Sn){!function Wt(zt,ji,Jn,Sn){Promise.resolve(Sn).then(function(oi){zt({value:oi,done:Jn})},ji)}(Jn,Sn,(ji=Oe[zt](ji)).done,ji.value)})}}}te.d(kt,{FC:()=>st,KL:()=>Ei,_T:()=>$e,gn:()=>ot,mG:()=>ct,qq:()=>dt})},4650:(Wi,kt,te)=>{te.d(kt,{$8M:()=>Dy,$Z:()=>WA,AFp:()=>ER,ALo:()=>rR,AaK:()=>ct,CHM:()=>Dn,CRH:()=>oT,CZH:()=>Kw,CqO:()=>Dk,D6c:()=>XR,EJc:()=>IR,EpF:()=>xk,F4k:()=>nF,FYo:()=>W,FiY:()=>sg,G48:()=>ZN,Gf:()=>cR,GfV:()=>Xt,Gpc:()=>Ce,JOm:()=>Sc,KtG:()=>qh,LFG:()=>yo,LSH:()=>ox,Lbi:()=>PN,Lck:()=>j3,MAs:()=>Ek,MMx:()=>Jk,NdJ:()=>Ik,OlP:()=>bs,PXZ:()=>eu,Q6J:()=>Vx,QGY:()=>Tk,QP$:()=>li,Qsj:()=>$,R0b:()=>zu,RDi:()=>AM,Rgc:()=>gv,SBq:()=>x,Sil:()=>ST,Suo:()=>Bb,TTD:()=>Iu,TgZ:()=>zx,VKq:()=>cN,W1O:()=>hT,X6Q:()=>YN,XFs:()=>pi,Xpm:()=>It,Xts:()=>j0,Y36:()=>iv,YKP:()=>Xk,YNc:()=>Hx,Yjl:()=>ye,Yz7:()=>lr,Z0I:()=>Ua,ZZ4:()=>PT,_Bn:()=>Zk,_UZ:()=>Ux,_Vd:()=>mg,_c5:()=>YR,_uU:()=>EF,aQg:()=>Kb,c2e:()=>DR,cJS:()=>nn,cg1:()=>ti,dDg:()=>Yp,dqk:()=>xn,eFA:()=>$N,ekj:()=>it,eoX:()=>WN,f3M:()=>bp,g9A:()=>TR,h0i:()=>Lb,hGG:()=>ZR,iGM:()=>sT,ifc:()=>_i,ip1:()=>CT,jDz:()=>iT,kL8:()=>z,lG2:()=>X,lcZ:()=>gN,lqb:()=>Ya,lri:()=>So,n5z:()=>yc,oAB:()=>Tn,oxw:()=>aF,q4F:()=>Di,qLn:()=>Jy,qOj:()=>gk,qZA:()=>jx,rWj:()=>kd,sBO:()=>Fa,sIi:()=>Cw,s_b:()=>oR,soG:()=>Yw,tb:()=>wT,tp0:()=>bc,uIk:()=>Ck,vHH:()=>Ct,vpe:()=>Ma,wAp:()=>mi,xp6:()=>mx,z2F:()=>Ub,zSh:()=>Rp,zs3:()=>tv});var b=te(7579),Ve=te(727),oe=te(9751),$e=te(6451),ot=te(3099);function ht(c){for(let p in c)if(c[p]===ht)return p;throw Error("Could not find renamed property on target object.")}function et(c,p){for(const g in p)p.hasOwnProperty(g)&&!c.hasOwnProperty(g)&&(c[g]=p[g])}function ct(c){if("string"==typeof c)return c;if(Array.isArray(c))return"["+c.map(ct).join(", ")+"]";if(null==c)return""+c;if(c.overriddenName)return`${c.overriddenName}`;if(c.name)return`${c.name}`;const p=c.toString();if(null==p)return""+p;const g=p.indexOf("\n");return-1===g?p:p.substring(0,g)}function at(c,p){return null==c||""===c?null===p?"":p:null==p||""===p?c:c+" "+p}const ve=ht({__forward_ref__:ht});function Ce(c){return c.__forward_ref__=Ce,c.toString=function(){return ct(this())},c}function Fe(c){return _t(c)?c():c}function _t(c){return"function"==typeof c&&c.hasOwnProperty(ve)&&c.__forward_ref__===Ce}class Ct extends Error{constructor(p,g){super(function di(c,p){return`NG0${Math.abs(c)}${p?": "+p.trim():""}`}(p,g)),this.code=p}}function dt(c){return"string"==typeof c?c:null==c?"":String(c)}function gt(c,p){throw new Ct(-201,!1)}function Sn(c,p){null==c&&function oi(c,p,g,y){throw new Error(`ASSERTION ERROR: ${c}`+(null==y?"":` [Expected=> ${g} ${y} ${p} <=Actual]`))}(p,c,null,"!=")}function lr(c){return{token:c.token,providedIn:c.providedIn||null,factory:c.factory,value:void 0}}function nn(c){return{providers:c.providers||[],imports:c.imports||[]}}function Mn(c){return Gl(c,go)||Gl(c,mo)}function Ua(c){return null!==Mn(c)}function Gl(c,p){return c.hasOwnProperty(p)?c[p]:null}function Wa(c){return c&&(c.hasOwnProperty(Aa)||c.hasOwnProperty(Kl))?c[Aa]:null}const go=ht({\u0275prov:ht}),Aa=ht({\u0275inj:ht}),mo=ht({ngInjectableDef:ht}),Kl=ht({ngInjectorDef:ht});var pi=(()=>((pi=pi||{})[pi.Default=0]="Default",pi[pi.Host=1]="Host",pi[pi.Self=2]="Self",pi[pi.SkipSelf=4]="SkipSelf",pi[pi.Optional=8]="Optional",pi))();let Jr;function ys(c){const p=Jr;return Jr=c,p}function ka(c,p,g){const y=Mn(c);return y&&"root"==y.providedIn?void 0===y.value?y.value=y.factory():y.value:g&pi.Optional?null:void 0!==p?p:void gt(ct(c))}function cs(c){return{toString:c}.toString()}var Fs=(()=>((Fs=Fs||{})[Fs.OnPush=0]="OnPush",Fs[Fs.Default=1]="Default",Fs))(),_i=(()=>{return(c=_i||(_i={}))[c.Emulated=0]="Emulated",c[c.None=2]="None",c[c.ShadowDom=3]="ShadowDom",_i;var c})();const xn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ko={},pn=[],qa=ht({\u0275cmp:ht}),Kn=ht({\u0275dir:ht}),Ko=ht({\u0275pipe:ht}),er=ht({\u0275mod:ht}),Gs=ht({\u0275fac:ht}),ga=ht({__NG_ELEMENT_ID__:ht});let fi=0;function It(c){return cs(()=>{const g=!0===c.standalone,y={},w={type:c.type,providersResolver:null,decls:c.decls,vars:c.vars,factory:null,template:c.template||null,consts:c.consts||null,ngContentSelectors:c.ngContentSelectors,hostBindings:c.hostBindings||null,hostVars:c.hostVars||0,hostAttrs:c.hostAttrs||null,contentQueries:c.contentQueries||null,declaredInputs:y,inputs:null,outputs:null,exportAs:c.exportAs||null,onPush:c.changeDetection===Fs.OnPush,directiveDefs:null,pipeDefs:null,standalone:g,dependencies:g&&c.dependencies||null,getStandaloneInjector:null,selectors:c.selectors||pn,viewQuery:c.viewQuery||null,features:c.features||null,data:c.data||{},encapsulation:c.encapsulation||_i.Emulated,id:"c"+fi++,styles:c.styles||pn,_:null,setInput:null,schemas:c.schemas||null,tView:null},D=c.dependencies,R=c.features;return w.inputs=de(c.inputs,y),w.outputs=de(c.outputs),R&&R.forEach(O=>O(w)),w.directiveDefs=D?()=>("function"==typeof D?D():D).map(an).filter(ln):null,w.pipeDefs=D?()=>("function"==typeof D?D():D).map(yt).filter(ln):null,w})}function an(c){return ae(c)||Ye(c)}function ln(c){return null!==c}function Tn(c){return cs(()=>({type:c.type,bootstrap:c.bootstrap||pn,declarations:c.declarations||pn,imports:c.imports||pn,exports:c.exports||pn,transitiveCompileScopes:null,schemas:c.schemas||null,id:c.id||null}))}function de(c,p){if(null==c)return ko;const g={};for(const y in c)if(c.hasOwnProperty(y)){let w=c[y],D=w;Array.isArray(w)&&(D=w[1],w=w[0]),g[w]=y,p&&(p[w]=D)}return g}const X=It;function ye(c){return{type:c.type,name:c.name,factory:null,pure:!1!==c.pure,standalone:!0===c.standalone,onDestroy:c.type.prototype.ngOnDestroy||null}}function ae(c){return c[qa]||null}function Ye(c){return c[Kn]||null}function yt(c){return c[Ko]||null}function li(c){const p=ae(c)||Ye(c)||yt(c);return null!==p&&p.standalone}function Ri(c,p){const g=c[er]||null;if(!g&&!0===p)throw new Error(`Type ${ct(c)} does not have '\u0275mod' property.`);return g}function Ra(c){return Array.isArray(c)&&"object"==typeof c[1]}function Yo(c){return Array.isArray(c)&&!0===c[1]}function td(c){return 0!=(8&c.flags)}function xu(c){return 2==(2&c.flags)}function Hf(c){return 1==(1&c.flags)}function Ka(c){return null!==c.template}function hy(c){return 0!=(256&c[2])}function xh(c,p){return c.hasOwnProperty(Gs)?c[Gs]:null}class Du{constructor(p,g,y){this.previousValue=p,this.currentValue=g,this.firstChange=y}isFirstChange(){return this.firstChange}}function Iu(){return cc}function cc(c){return c.type.prototype.ngOnChanges&&(c.setInput=Uf),lp}function lp(){const c=dm(this),p=c?.current;if(p){const g=c.previous;if(g===ko)c.previous=p;else for(let y in p)g[y]=p[y];c.current=null,this.ngOnChanges(p)}}function Uf(c,p,g,y){const w=dm(c)||function Th(c,p){return c[cm]=p}(c,{previous:ko,current:null}),D=w.current||(w.current={}),R=w.previous,O=this.declaredInputs[g],F=R[O];D[O]=new Du(F&&F.currentValue,p,R===ko),c[y]=p}Iu.ngInherit=!0;const cm="__ngSimpleChanges__";function dm(c){return c[cm]||null}function $s(c){for(;Array.isArray(c);)c=c[0];return c}function xl(c,p){return $s(p[c.index])}function Tl(c,p){return c.data[p]}function pc(c,p){return c[p]}function $n(c,p){const g=p[c];return Ra(g)?g:g[0]}function ad(c){return 64==(64&c[2])}function Wh(c,p){return null==p?null:c[p]}function Gf(c){c[18]=0}function hp(c,p){c[5]+=p;let g=c,y=c[3];for(;null!==y&&(1===p&&1===g[5]||-1===p&&0===g[5]);)y[5]+=p,g=y,y=y[3]}const Y={lFrame:zI(null),bindingsEnabled:!0};function Fi(){return Y.bindingsEnabled}function xt(){return Y.lFrame.lView}function Xi(){return Y.lFrame.tView}function Dn(c){return Y.lFrame.contextLView=c,c[8]}function qh(c){return Y.lFrame.contextLView=null,c}function Ts(){let c=up();for(;null!==c&&64===c.type;)c=c.parent;return c}function up(){return Y.lFrame.currentTNode}function La(c,p){const g=Y.lFrame;g.currentTNode=c,g.isParent=p}function Kf(){return Y.lFrame.isParent}function vo(){const c=Y.lFrame;let p=c.bindingRootIndex;return-1===p&&(p=c.bindingRootIndex=c.tView.bindingStartIndex),p}function pp(){return Y.lFrame.bindingIndex++}function wM(c,p){const g=Y.lFrame;g.bindingIndex=g.bindingRootIndex=c,BE(p)}function BE(c){Y.lFrame.currentDirectiveIndex=c}function HI(){return Y.lFrame.currentQueryIndex}function gm(c){Y.lFrame.currentQueryIndex=c}function VI(c){const p=c[1];return 2===p.type?p.declTNode:1===p.type?c[6]:null}function l0(c,p,g){if(g&pi.SkipSelf){let w=p,D=c;for(;!(w=w.parent,null!==w||g&pi.Host||(w=VI(D),null===w||(D=D[15],10&w.type))););if(null===w)return!1;p=w,c=D}const y=Y.lFrame=h0();return y.currentTNode=p,y.lView=c,!0}function HE(c){const p=h0(),g=c[1];Y.lFrame=p,p.currentTNode=g.firstChild,p.lView=c,p.tView=g,p.contextLView=c,p.bindingIndex=g.bindingStartIndex,p.inI18n=!1}function h0(){const c=Y.lFrame,p=null===c?null:c.child;return null===p?zI(c):p}function zI(c){const p={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:c,child:null,inI18n:!1};return null!==c&&(c.child=p),p}function u0(){const c=Y.lFrame;return Y.lFrame=c.parent,c.currentTNode=null,c.lView=null,c}const VE=u0;function mm(){const c=u0();c.isParent=!0,c.tView=null,c.selectedIndex=-1,c.contextLView=null,c.elementDepthCount=0,c.currentDirectiveIndex=-1,c.currentNamespace=null,c.bindingRootIndex=-1,c.bindingIndex=-1,c.currentQueryIndex=0}function va(){return Y.lFrame.selectedIndex}function Zl(c){Y.lFrame.selectedIndex=c}function Ns(){const c=Y.lFrame;return Tl(c.tView,c.selectedIndex)}function vm(c,p){for(let g=p.directiveStart,y=p.directiveEnd;g<y;g++){const D=c.data[g].type.prototype,{ngAfterContentInit:R,ngAfterContentChecked:O,ngAfterViewInit:F,ngAfterViewChecked:V,ngOnDestroy:K}=D;R&&(c.contentHooks||(c.contentHooks=[])).push(-g,R),O&&((c.contentHooks||(c.contentHooks=[])).push(g,O),(c.contentCheckHooks||(c.contentCheckHooks=[])).push(g,O)),F&&(c.viewHooks||(c.viewHooks=[])).push(-g,F),V&&((c.viewHooks||(c.viewHooks=[])).push(g,V),(c.viewCheckHooks||(c.viewCheckHooks=[])).push(g,V)),null!=K&&(c.destroyHooks||(c.destroyHooks=[])).push(g,K)}}function ym(c,p,g){f0(c,p,3,g)}function fp(c,p,g,y){(3&c[2])===g&&f0(c,p,g,y)}function p0(c,p){let g=c[2];(3&g)===p&&(g&=2047,g+=1,c[2]=g)}function f0(c,p,g,y){const D=y??-1,R=p.length-1;let O=0;for(let F=void 0!==y?65535&c[18]:0;F<R;F++)if("number"==typeof p[F+1]){if(O=p[F],null!=y&&O>=y)break}else p[F]<0&&(c[18]+=65536),(O<D||-1==D)&&(zE(c,g,p,F),c[18]=(4294901760&c[18])+F+2),F++}function zE(c,p,g,y){const w=g[y]<0,D=g[y+1],O=c[w?-g[y]:g[y]];if(w){if(c[2]>>11<c[18]>>16&&(3&c[2])===p){c[2]+=2048;try{D.call(O)}finally{}}}else try{D.call(O)}finally{}}class ud{constructor(p,g,y){this.factory=p,this.resolving=!1,this.canSeeViewProviders=g,this.injectImpl=y}}function Yf(c,p,g){let y=0;for(;y<g.length;){const w=g[y];if("number"==typeof w){if(0!==w)break;y++;const D=g[y++],R=g[y++],O=g[y++];c.setAttribute(p,R,O,D)}else{const D=w,R=g[++y];wy(D)?c.setProperty(p,D,R):c.setAttribute(p,D,R),y++}}return y}function Cm(c){return 3===c||4===c||6===c}function wy(c){return 64===c.charCodeAt(0)}function wm(c,p){if(null!==p&&0!==p.length)if(null===c||0===c.length)c=p.slice();else{let g=-1;for(let y=0;y<p.length;y++){const w=p[y];"number"==typeof w?g=w:0===g||UE(c,g,w,null,-1===g||2===g?p[++y]:null)}}return c}function UE(c,p,g,y,w){let D=0,R=c.length;if(-1===p)R=-1;else for(;D<c.length;){const O=c[D++];if("number"==typeof O){if(O===p){R=-1;break}if(O>p){R=D-1;break}}}for(;D<c.length;){const O=c[D];if("number"==typeof O)break;if(O===g){if(null===y)return void(null!==w&&(c[D+1]=w));if(y===c[D+1])return void(c[D+2]=w)}D++,null!==y&&D++,null!==w&&D++}-1!==R&&(c.splice(R,0,p),D=R+1),c.splice(D++,0,g),null!==y&&c.splice(D++,0,y),null!==w&&c.splice(D++,0,w)}function WE(c){return-1!==c}function Sm(c){return 32767&c}function xm(c,p){let g=function Em(c){return c>>16}(c),y=p;for(;g>0;)y=y[15],g--;return y}let ku=!0;function Sy(c){const p=ku;return ku=c,p}let _o=0;const vc={};function Dm(c,p){const g=Ey(c,p);if(-1!==g)return g;const y=p[1];y.firstCreatePass&&(c.injectorIndex=p.length,Im(y.data,c),Im(p,null),Im(y.blueprint,null));const w=xy(c,p),D=c.injectorIndex;if(WE(w)){const R=Sm(w),O=xm(w,p),F=O[1].data;for(let V=0;V<8;V++)p[D+V]=O[R+V]|F[R+V]}return p[D+8]=w,D}function Im(c,p){c.push(0,0,0,0,0,0,0,0,p)}function Ey(c,p){return-1===c.injectorIndex||c.parent&&c.parent.injectorIndex===c.injectorIndex||null===p[c.injectorIndex+8]?-1:c.injectorIndex}function xy(c,p){if(c.parent&&-1!==c.parent.injectorIndex)return c.parent.injectorIndex;let g=0,y=null,w=p;for(;null!==w;){if(y=Ty(w),null===y)return-1;if(g++,w=w[15],-1!==y.injectorIndex)return y.injectorIndex|g<<16}return-1}function Zf(c,p,g){!function v0(c,p,g){let y;"string"==typeof g?y=g.charCodeAt(0)||0:g.hasOwnProperty(ga)&&(y=g[ga]),null==y&&(y=g[ga]=_o++);const w=255&y;p.data[c+(w>>5)]|=1<<w}(c,p,g)}function Xf(c,p,g){if(g&pi.Optional||void 0!==c)return c;gt()}function y0(c,p,g,y){if(g&pi.Optional&&void 0===y&&(y=null),0==(g&(pi.Self|pi.Host))){const w=c[9],D=ys(void 0);try{return w?w.get(p,y,g&pi.Optional):ka(p,y,g&pi.Optional)}finally{ys(D)}}return Xf(y,0,g)}function Am(c,p,g,y=pi.Default,w){if(null!==c){if(1024&p[2]){const R=function eg(c,p,g,y,w){let D=c,R=p;for(;null!==D&&null!==R&&1024&R[2]&&!(256&R[2]);){const O=km(D,R,g,y|pi.Self,vc);if(O!==vc)return O;let F=D.parent;if(!F){const V=R[21];if(V){const K=V.get(g,vc,y);if(K!==vc)return K}F=Ty(R),R=R[15]}D=F}return w}(c,p,g,y,vc);if(R!==vc)return R}const D=km(c,p,g,y,vc);if(D!==vc)return D}return y0(p,g,y,w)}function km(c,p,g,y,w){const D=function b0(c){if("string"==typeof c)return c.charCodeAt(0)||0;const p=c.hasOwnProperty(ga)?c[ga]:void 0;return"number"==typeof p?p>=0?255&p:$E:p}(g);if("function"==typeof D){if(!l0(p,c,y))return y&pi.Host?Xf(w,0,y):y0(p,g,y,w);try{const R=D(y);if(null!=R||y&pi.Optional)return R;gt()}finally{VE()}}else if("number"==typeof D){let R=null,O=Ey(c,p),F=-1,V=y&pi.Host?p[16][6]:null;for((-1===O||y&pi.SkipSelf)&&(F=-1===O?xy(c,p):p[O+8],-1!==F&&C0(y,!1)?(R=p[1],O=Sm(F),p=xm(F,p)):O=-1);-1!==O;){const K=p[1];if(KE(D,O,K.data)){const se=SM(O,p,g,R,y,V);if(se!==vc)return se}F=p[O+8],-1!==F&&C0(y,p[1].data[O+8]===V)&&KE(D,O,p)?(R=K,O=Sm(F),p=xm(F,p)):O=-1}}return w}function SM(c,p,g,y,w,D){const R=p[1],O=R.data[c+8],K=Qf(O,R,g,null==y?xu(O)&&ku:y!=R&&0!=(3&O.type),w&pi.Host&&D===O);return null!==K?mp(p,R,K,O):vc}function Qf(c,p,g,y,w){const D=c.providerIndexes,R=p.data,O=1048575&D,F=c.directiveStart,K=D>>20,Se=w?O+K:c.directiveEnd;for(let We=y?O:O+K;We<Se;We++){const wt=R[We];if(We<F&&g===wt||We>=F&&wt.type===g)return We}if(w){const We=R[F];if(We&&Ka(We)&&We.type===g)return F}return null}function mp(c,p,g,y){let w=c[g];const D=p.data;if(function gp(c){return c instanceof ud}(w)){const R=w;R.resolving&&function Mi(c,p){const g=p?`. Dependency path: ${p.join(" > ")} > ${c}`:"";throw new Ct(-200,`Circular dependency in DI detected for ${c}${g}`)}(function st(c){return"function"==typeof c?c.name||c.toString():"object"==typeof c&&null!=c&&"function"==typeof c.type?c.type.name||c.type.toString():dt(c)}(D[g]));const O=Sy(R.canSeeViewProviders);R.resolving=!0;const F=R.injectImpl?ys(R.injectImpl):null;l0(c,y,pi.Default);try{w=c[g]=R.factory(void 0,D,c,y),p.firstCreatePass&&g>=y.directiveStart&&function d0(c,p,g){const{ngOnChanges:y,ngOnInit:w,ngDoCheck:D}=p.type.prototype;if(y){const R=cc(p);(g.preOrderHooks||(g.preOrderHooks=[])).push(c,R),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,R)}w&&(g.preOrderHooks||(g.preOrderHooks=[])).push(0-c,w),D&&((g.preOrderHooks||(g.preOrderHooks=[])).push(c,D),(g.preOrderCheckHooks||(g.preOrderCheckHooks=[])).push(c,D))}(g,D[g],p)}finally{null!==F&&ys(F),Sy(O),R.resolving=!1,VE()}}return w}function KE(c,p,g){return!!(g[p+(c>>5)]&1<<c)}function C0(c,p){return!(c&pi.Self||c&pi.Host&&p)}class Jf{constructor(p,g){this._tNode=p,this._lView=g}get(p,g,y){return Am(this._tNode,this._lView,p,y,g)}}function $E(){return new Jf(Ts(),xt())}function yc(c){return cs(()=>{const p=c.prototype.constructor,g=p[Gs]||YE(p),y=Object.prototype;let w=Object.getPrototypeOf(c.prototype).constructor;for(;w&&w!==y;){const D=w[Gs]||YE(w);if(D&&D!==g)return D;w=Object.getPrototypeOf(w)}return D=>new D})}function YE(c){return _t(c)?()=>{const p=YE(Fe(c));return p&&p()}:xh(c)}function Ty(c){const p=c[1],g=p.type;return 2===g?p.declTNode:1===g?c[6]:null}function Dy(c){return function GE(c,p){if("class"===p)return c.classes;if("style"===p)return c.styles;const g=c.attrs;if(g){const y=g.length;let w=0;for(;w<y;){const D=g[w];if(Cm(D))break;if(0===D)w+=2;else if("number"==typeof D)for(w++;w<y&&"string"==typeof g[w];)w++;else{if(D===p)return g[w+1];w+=2}}}return null}(Ts(),c)}const vp="__parameters__";function Lm(c,p,g){return cs(()=>{const y=function S0(c){return function(...g){if(c){const y=c(...g);for(const w in y)this[w]=y[w]}}}(p);function w(...D){if(this instanceof w)return y.apply(this,D),this;const R=new w(...D);return O.annotation=R,O;function O(F,V,K){const se=F.hasOwnProperty(vp)?F[vp]:Object.defineProperty(F,vp,{value:[]})[vp];for(;se.length<=K;)se.push(null);return(se[K]=se[K]||[]).push(R),F}}return g&&(w.prototype=Object.create(g.prototype)),w.prototype.ngMetadataName=c,w.annotationCls=w,w})}class bs{constructor(p,g){this._desc=p,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof g?this.__NG_ELEMENT_ID__=g:void 0!==g&&(this.\u0275prov=lr({token:this,providedIn:g.providedIn||"root",factory:g.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Xl(c,p){void 0===p&&(p=c);for(let g=0;g<c.length;g++){let y=c[g];Array.isArray(y)?(p===c&&(p=c.slice(0,g)),Xl(y,p)):p!==c&&p.push(y)}return p}function Gh(c,p){c.forEach(g=>Array.isArray(g)?Gh(g,p):p(g))}function T0(c,p,g){p>=c.length?c.push(g):c.splice(p,0,g)}function tg(c,p){return p>=c.length-1?c.pop():c.splice(p,1)[0]}function Dl(c,p,g){let y=yp(c,p);return y>=0?c[1|y]=g:(y=~y,function qi(c,p,g,y){let w=c.length;if(w==p)c.push(g,y);else if(1===w)c.push(y,c[0]),c[0]=g;else{for(w--,c.push(c[w-1],c[w]);w>p;)c[w]=c[w-2],w--;c[p]=g,c[p+1]=y}}(c,y,p,g)),y}function D0(c,p){const g=yp(c,p);if(g>=0)return c[1|g]}function yp(c,p){return function Ah(c,p,g){let y=0,w=c.length>>g;for(;w!==y;){const D=y+(w-y>>1),R=c[D<<g];if(p===R)return D<<g;R>p?w=D:y=D+1}return~(w<<g)}(c,p,1)}const Bs={},_u="__NG_DI_FLAG__",Ry="ngTempTokenPath",Ly=/\n/gm,k0="__source";let dd;function pd(c){const p=dd;return dd=c,p}function R0(c,p=pi.Default){if(void 0===dd)throw new Ct(-203,!1);return null===dd?ka(c,void 0,p):dd.get(c,p&pi.Optional?null:void 0,p)}function yo(c,p=pi.Default){return(function El(){return Jr}()||R0)(Fe(c),p)}function bp(c,p=pi.Default){return"number"!=typeof p&&(p=0|(p.optional&&8)|(p.host&&1)|(p.self&&2)|(p.skipSelf&&4)),yo(c,p)}function Py(c){const p=[];for(let g=0;g<c.length;g++){const y=Fe(c[g]);if(Array.isArray(y)){if(0===y.length)throw new Ct(900,!1);let w,D=pi.Default;for(let R=0;R<y.length;R++){const O=y[R],F=My(O);"number"==typeof F?-1===F?w=O.token:D|=F:w=O}p.push(yo(w,D))}else p.push(yo(y))}return p}function ng(c,p){return c[_u]=p,c.prototype[_u]=p,c}function My(c){return c[_u]}const sg=ng(Lm("Optional"),8),bc=ng(Lm("SkipSelf"),4);let ex;function AM(c){ex=c}class lg{constructor(p){this.changingThisBreaksApplicationSecurity=p}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Kh(c){return c instanceof lg?c.changingThisBreaksApplicationSecurity:c}const Cc=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Zo=(()=>((Zo=Zo||{})[Zo.NONE=0]="NONE",Zo[Zo.HTML=1]="HTML",Zo[Zo.STYLE=2]="STYLE",Zo[Zo.SCRIPT=3]="SCRIPT",Zo[Zo.URL=4]="URL",Zo[Zo.RESOURCE_URL=5]="RESOURCE_URL",Zo))();function ox(c){const p=function md(){const c=xt();return c&&c[12]}();return p?p.sanitize(Zo.URL,c)||"":function hg(c,p){const g=function Wm(c){return c instanceof lg&&c.getTypeName()||null}(c);if(null!=g&&g!==p){if("ResourceURL"===g&&"URL"===p)return!0;throw new Error(`Required a safe ${p}, got a ${g} (see https://g.co/ng/security#xss)`)}return g===p}(c,"URL")?Kh(c):function cg(c){return(c=String(c)).match(Cc)?c:"unsafe:"+c}(dt(c))}const j0=new bs("ENVIRONMENT_INITIALIZER"),U0=new bs("INJECTOR",-1),lx=new bs("INJECTOR_DEF_TYPES");class dA{get(p,g=Bs){if(g===Bs){const y=new Error(`NullInjectorError: No provider for ${ct(p)}!`);throw y.name="NullInjectorError",y}return g}}function W0(...c){return{\u0275providers:qy(0,c)}}function qy(c,...p){const g=[],y=new Set;let w;return Gh(p,D=>{const R=D;Gy(R,g,[],y)&&(w||(w=[]),w.push(R))}),void 0!==w&&Km(w,g),g}function Km(c,p){for(let g=0;g<c.length;g++){const{providers:w}=c[g];Gh(w,D=>{p.push(D)})}}function Gy(c,p,g,y){if(!(c=Fe(c)))return!1;let w=null,D=Wa(c);const R=!D&&ae(c);if(D||R){if(R&&!R.standalone)return!1;w=c}else{const F=c.ngModule;if(D=Wa(F),!D)return!1;w=F}const O=y.has(w);if(R){if(O)return!1;if(y.add(w),R.dependencies){const F="function"==typeof R.dependencies?R.dependencies():R.dependencies;for(const V of F)Gy(V,p,g,y)}}else{if(!D)return!1;{if(null!=D.imports&&!O){let V;y.add(w);try{Gh(D.imports,K=>{Gy(K,p,g,y)&&(V||(V=[]),V.push(K))})}finally{}void 0!==V&&Km(V,p)}if(!O){const V=xh(w)||(()=>new w);p.push({provide:w,useFactory:V,deps:pn},{provide:lx,useValue:w,multi:!0},{provide:j0,useValue:()=>yo(w),multi:!0})}const F=D.providers;null==F||O||Gh(F,K=>{p.push(K)})}}return w!==c&&void 0!==c.providers}const $m=ht({provide:String,useValue:ht});function q0(c){return null!==c&&"object"==typeof c&&$m in c}function $h(c){return"function"==typeof c}const Rp=new bs("Set Injector scope."),gg={},G0={};let Ym;function Ky(){return void 0===Ym&&(Ym=new dA),Ym}class Ya{}class K0 extends Ya{constructor(p,g,y,w){super(),this.parent=g,this.source=y,this.scopes=w,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_p(p,R=>this.processProvider(R)),this.records.set(U0,Xo(void 0,this)),w.has("environment")&&this.records.set(Ya,Xo(void 0,this));const D=this.records.get(Rp);null!=D&&"string"==typeof D.value&&this.scopes.add(D.value),this.injectorDefTypes=new Set(this.get(lx.multi,pn,pi.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const p of this._ngOnDestroyHooks)p.ngOnDestroy();for(const p of this._onDestroyHooks)p()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(p){this._onDestroyHooks.push(p)}runInContext(p){this.assertNotDestroyed();const g=pd(this),y=ys(void 0);try{return p()}finally{pd(g),ys(y)}}get(p,g=Bs,y=pi.Default){this.assertNotDestroyed();const w=pd(this),D=ys(void 0);try{if(!(y&pi.SkipSelf)){let O=this.records.get(p);if(void 0===O){const F=function NM(c){return"function"==typeof c||"object"==typeof c&&c instanceof bs}(p)&&Mn(p);O=F&&this.injectableDefInScope(F)?Xo($y(p),gg):null,this.records.set(p,O)}if(null!=O)return this.hydrate(p,O)}return(y&pi.Self?Ky():this.parent).get(p,g=y&pi.Optional&&g===Bs?null:g)}catch(R){if("NullInjectorError"===R.name){if((R[Ry]=R[Ry]||[]).unshift(ct(p)),w)throw R;return function XE(c,p,g,y){const w=c[Ry];throw p[k0]&&w.unshift(p[k0]),c.message=function QI(c,p,g,y=null){c=c&&"\n"===c.charAt(0)&&"\u0275"==c.charAt(1)?c.slice(2):c;let w=ct(p);if(Array.isArray(p))w=p.map(ct).join(" -> ");else if("object"==typeof p){let D=[];for(let R in p)if(p.hasOwnProperty(R)){let O=p[R];D.push(R+":"+("string"==typeof O?JSON.stringify(O):ct(O)))}w=`{${D.join(", ")}}`}return`${g}${y?"("+y+")":""}[${w}]: ${c.replace(Ly,"\n  ")}`}("\n"+c.message,w,g,y),c.ngTokenPath=w,c[Ry]=null,c}(R,p,"R3InjectorError",this.source)}throw R}finally{ys(D),pd(w)}}resolveInjectorInitializers(){const p=pd(this),g=ys(void 0);try{const y=this.get(j0.multi,pn,pi.Self);for(const w of y)w()}finally{pd(p),ys(g)}}toString(){const p=[],g=this.records;for(const y of g.keys())p.push(ct(y));return`R3Injector[${p.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ct(205,!1)}processProvider(p){let g=$h(p=Fe(p))?p:Fe(p&&p.provide);const y=function $0(c){return q0(c)?Xo(void 0,c.useValue):Xo(Y0(c),gg)}(p);if($h(p)||!0!==p.multi)this.records.get(g);else{let w=this.records.get(g);w||(w=Xo(void 0,gg,!0),w.factory=()=>Py(w.multi),this.records.set(g,w)),g=p,w.multi.push(p)}this.records.set(g,y)}hydrate(p,g){return g.value===gg&&(g.value=G0,g.value=g.factory()),"object"==typeof g.value&&g.value&&function Z0(c){return null!==c&&"object"==typeof c&&"function"==typeof c.ngOnDestroy}(g.value)&&this._ngOnDestroyHooks.add(g.value),g.value}injectableDefInScope(p){if(!p.providedIn)return!1;const g=Fe(p.providedIn);return"string"==typeof g?"any"===g||this.scopes.has(g):this.injectorDefTypes.has(g)}}function $y(c){const p=Mn(c),g=null!==p?p.factory:xh(c);if(null!==g)return g;if(c instanceof bs)throw new Ct(204,!1);if(c instanceof Function)return function gA(c){const p=c.length;if(p>0)throw function Ih(c,p){const g=[];for(let y=0;y<c;y++)g.push(p);return g}(p,"?"),new Ct(204,!1);const g=function Go(c){const p=c&&(c[go]||c[mo]);if(p){const g=function us(c){if(c.hasOwnProperty("name"))return c.name;const p=(""+c).match(/^function\s*([^\s(]+)/);return null===p?"":p[1]}(c);return console.warn(`DEPRECATED: DI is instantiating a token "${g}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${g}" class.`),p}return null}(c);return null!==g?()=>g.factory(c):()=>new c}(c);throw new Ct(204,!1)}function Y0(c,p,g){let y;if($h(c)){const w=Fe(c);return xh(w)||$y(w)}if(q0(c))y=()=>Fe(c.useValue);else if(function fg(c){return!(!c||!c.useFactory)}(c))y=()=>c.useFactory(...Py(c.deps||[]));else if(function al(c){return!(!c||!c.useExisting)}(c))y=()=>yo(Fe(c.useExisting));else{const w=Fe(c&&(c.useClass||c.provide));if(!function Yy(c){return!!c.deps}(c))return xh(w)||$y(w);y=()=>new w(...Py(c.deps))}return y}function Xo(c,p,g=!1){return{factory:c,value:p,multi:g?[]:void 0}}function Yh(c){return!!c.\u0275providers}function _p(c,p){for(const g of c)Array.isArray(g)?_p(g,p):Yh(g)?_p(g.\u0275providers,p):p(g)}class Zy{}class vA{resolveComponentFactory(p){throw function Lp(c){const p=Error(`No component factory found for ${ct(c)}. Did you add it to @NgModule.entryComponents?`);return p.ngComponent=c,p}(p)}}let mg=(()=>{class c{}return c.NULL=new vA,c})();function yA(){return k(Ts(),xt())}function k(c,p){return new x(xl(c,p))}let x=(()=>{class c{constructor(g){this.nativeElement=g}}return c.__NG_ELEMENT_ID__=yA,c})();function I(c){return c instanceof x?c.nativeElement:c}class W{}let $=(()=>{class c{}return c.__NG_ELEMENT_ID__=()=>function De(){const c=xt(),g=$n(Ts().index,c);return(Ra(g)?g:c)[11]}(),c})(),lt=(()=>{class c{}return c.\u0275prov=lr({token:c,providedIn:"root",factory:()=>null}),c})();class Xt{constructor(p){this.full=p,this.major=p.split(".")[0],this.minor=p.split(".")[1],this.patch=p.split(".").slice(2).join(".")}}const Di=new Xt("14.2.2"),hn={};function Rh(c){return c.ngOriginalError}class Jy{constructor(){this._console=console}handleError(p){const g=this._findOriginalError(p);this._console.error("ERROR",p),g&&this._console.error("ORIGINAL ERROR",g)}_findOriginalError(p){let g=p&&Rh(p);for(;g&&Rh(g);)g=Rh(g);return g||null}}const eb=new Map;let vg=0;const Oo="__ngContext__";function Qa(c,p){Ra(p)?(c[Oo]=p[20],function n5(c){eb.set(c[20],c)}(p)):c[Oo]=p}function yg(c){return c instanceof Function?c():c}var Sc=(()=>((Sc=Sc||{})[Sc.Important=1]="Important",Sc[Sc.DashCase=2]="DashCase",Sc))();function ew(c,p){return undefined(c,p)}function tw(c){const p=c[3];return Yo(p)?p[3]:p}function ZM(c){return Ou(c[13])}function Lu(c){return Ou(c[4])}function Ou(c){for(;null!==c&&!Yo(c);)c=c[4];return c}function Pp(c,p,g,y,w){if(null!=y){let D,R=!1;Yo(y)?D=y:Ra(y)&&(R=!0,y=y[0]);const O=$s(y);0===c&&null!==g?null==w?RA(p,g,O):yd(p,g,O,w||null,!0):1===c&&null!==g?yd(p,g,O,w||null,!0):2===c?function Qm(c,p,g){const y=Ec(c,p);y&&function Fp(c,p,g,y){c.removeChild(p,g,y)}(c,y,p,g)}(p,O,R):3===c&&p.destroyNode(O),null!=D&&function r1(c,p,g,y,w){const D=g[7];D!==$s(g)&&Pp(p,c,y,D,w);for(let O=10;O<g.length;O++){const F=g[O];sw(F[1],F,c,p,y,D)}}(p,c,D,g,w)}}function IA(c,p,g){return c.createElement(p,g)}function ib(c,p){const g=c[9],y=g.indexOf(p),w=p[3];512&p[2]&&(p[2]&=-513,hp(w,-1)),g.splice(y,1)}function Mp(c,p){if(c.length<=10)return;const g=10+p,y=c[g];if(y){const w=y[17];null!==w&&w!==c&&ib(w,y),p>0&&(c[g-1][4]=y[4]);const D=tg(c,10+p);!function JM(c,p){sw(c,p,p[11],2,null,null),p[0]=null,p[6]=null}(y[1],y);const R=D[19];null!==R&&R.detachView(D[1]),y[3]=null,y[4]=null,y[2]&=-65}return y}function kA(c,p){if(!(128&p[2])){const g=p[11];g.destroyNode&&sw(c,p,g,3,null,null),function AA(c){let p=c[13];if(!p)return nw(c[1],c);for(;p;){let g=null;if(Ra(p))g=p[13];else{const y=p[10];y&&(g=y)}if(!g){for(;p&&!p[4]&&p!==c;)Ra(p)&&nw(p[1],p),p=p[3];null===p&&(p=c),Ra(p)&&nw(p[1],p),g=p&&p[4]}p=g}}(p)}}function nw(c,p){if(!(128&p[2])){p[2]&=-65,p[2]|=128,function Qo(c,p){let g;if(null!=c&&null!=(g=c.destroyHooks))for(let y=0;y<g.length;y+=2){const w=p[g[y]];if(!(w instanceof ud)){const D=g[y+1];if(Array.isArray(D))for(let R=0;R<D.length;R+=2){const O=w[D[R]],F=D[R+1];try{F.call(O)}finally{}}else try{D.call(w)}finally{}}}}(c,p),function t1(c,p){const g=c.cleanup,y=p[7];let w=-1;if(null!==g)for(let D=0;D<g.length-1;D+=2)if("string"==typeof g[D]){const R=g[D+1],O="function"==typeof R?R(p):$s(p[R]),F=y[w=g[D+2]],V=g[D+3];"boolean"==typeof V?O.removeEventListener(g[D],F,V):V>=0?y[w=V]():y[w=-V].unsubscribe(),D+=2}else{const R=y[w=g[D+1]];g[D].call(R)}if(null!==y){for(let D=w+1;D<y.length;D++)(0,y[D])();p[7]=null}}(c,p),1===p[1].type&&p[11].destroy();const g=p[17];if(null!==g&&Yo(p[3])){g!==p[3]&&ib(g,p);const y=p[19];null!==y&&y.detachView(c)}!function qM(c){eb.delete(c[20])}(p)}}function nb(c,p,g){return function rw(c,p,g){let y=p;for(;null!==y&&40&y.type;)y=(p=y).parent;if(null===y)return g[0];if(2&y.flags){const w=c.data[y.directiveStart].encapsulation;if(w===_i.None||w===_i.Emulated)return null}return xl(y,g)}(c,p.parent,g)}function yd(c,p,g,y,w){c.insertBefore(p,g,y,w)}function RA(c,p,g){c.appendChild(p,g)}function i1(c,p,g,y,w){null!==y?yd(c,p,g,y,w):RA(c,p,g)}function Ec(c,p){return c.parentNode(p)}let _A=function fx(c,p,g){return 40&c.type?xl(c,g):null};function rb(c,p,g,y){const w=nb(c,y,p),D=p[11],O=function Cg(c,p,g){return _A(c,p,g)}(y.parent||p[6],y,p);if(null!=w)if(Array.isArray(g))for(let F=0;F<g.length;F++)i1(D,w,g[F],O,!1);else i1(D,w,g,O,!1)}function Wn(c,p){if(null!==p){const g=p.type;if(3&g)return xl(p,c);if(4&g)return OA(-1,c[p.index]);if(8&g){const y=p.child;if(null!==y)return Wn(c,y);{const w=c[p.index];return Yo(w)?OA(-1,w):$s(w)}}if(32&g)return ew(p,c)()||$s(c[p.index]);{const y=sb(c,p);return null!==y?Array.isArray(y)?y[0]:Wn(tw(c[16]),y):Wn(c,p.next)}}return null}function sb(c,p){return null!==p?c[16][6].projection[p.projection]:null}function OA(c,p){const g=10+c+1;if(g<p.length){const y=p[g],w=y[1].firstChild;if(null!==w)return Wn(y,w)}return p[7]}function PA(c,p,g,y,w,D,R){for(;null!=g;){const O=y[g.index],F=g.type;if(R&&0===p&&(O&&Qa($s(O),y),g.flags|=4),64!=(64&g.flags))if(8&F)PA(c,p,g.child,y,w,D,!1),Pp(p,c,w,O,D);else if(32&F){const V=ew(g,y);let K;for(;K=V();)Pp(p,c,w,K,D);Pp(p,c,w,O,D)}else 16&F?MA(c,p,y,g,w,D):Pp(p,c,w,O,D);g=R?g.projectionNext:g.next}}function sw(c,p,g,y,w,D){PA(g,y,c.firstChild,p,w,D,!1)}function MA(c,p,g,y,w,D){const R=g[16],F=R[6].projection[y.projection];if(Array.isArray(F))for(let V=0;V<F.length;V++)Pp(p,c,w,F[V],D);else PA(c,p,F,R[3],w,D,!0)}function f5(c,p,g){c.setAttribute(p,"style",g)}function Pa(c,p,g){""===g?c.removeAttribute(p,"class"):c.setAttribute(p,"class",g)}function Np(c,p,g){let y=c.length;for(;;){const w=c.indexOf(p,g);if(-1===w)return w;if(0===w||c.charCodeAt(w-1)<=32){const D=p.length;if(w+D===y||c.charCodeAt(w+D)<=32)return w}g=w+1}}const a1="ng-template";function g5(c,p,g){let y=0;for(;y<c.length;){let w=c[y++];if(g&&"class"===w){if(w=c[y],-1!==Np(w.toLowerCase(),p,0))return!0}else if(1===w){for(;y<c.length&&"string"==typeof(w=c[y++]);)if(w.toLowerCase()===p)return!0;return!1}}return!1}function FA(c){return 4===c.type&&c.value!==a1}function l1(c,p,g){return p===(4!==c.type||g?c.value:a1)}function m5(c,p,g){let y=4;const w=c.attrs||[],D=function gx(c){for(let p=0;p<c.length;p++)if(Cm(c[p]))return p;return c.length}(w);let R=!1;for(let O=0;O<p.length;O++){const F=p[O];if("number"!=typeof F){if(!R)if(4&y){if(y=2|1&y,""!==F&&!l1(c,F,g)||""===F&&1===p.length){if(Pu(y))return!1;R=!0}}else{const V=8&y?F:p[++O];if(8&y&&null!==c.attrs){if(!g5(c.attrs,V,g)){if(Pu(y))return!1;R=!0}continue}const se=v5(8&y?"class":F,w,FA(c),g);if(-1===se){if(Pu(y))return!1;R=!0;continue}if(""!==V){let Se;Se=se>D?"":w[se+1].toLowerCase();const We=8&y?Se:null;if(We&&-1!==Np(We,V,0)||2&y&&V!==Se){if(Pu(y))return!1;R=!0}}}}else{if(!R&&!Pu(y)&&!Pu(F))return!1;if(R&&Pu(F))continue;R=!1,y=F|1&y}}return Pu(y)||R}function Pu(c){return 0==(1&c)}function v5(c,p,g,y){if(null===p)return-1;let w=0;if(y||!g){let D=!1;for(;w<p.length;){const R=p[w];if(R===c)return w;if(3===R||6===R)D=!0;else{if(1===R||2===R){let O=p[++w];for(;"string"==typeof O;)O=p[++w];continue}if(4===R)break;if(0===R){w+=4;continue}}w+=D?1:2}return-1}return function Jm(c,p){let g=c.indexOf(4);if(g>-1)for(g++;g<c.length;){const y=c[g];if("number"==typeof y)return-1;if(y===p)return g;g++}return-1}(p,c)}function NA(c,p,g=!1){for(let y=0;y<p.length;y++)if(m5(c,p[y],g))return!0;return!1}function ob(c,p){return c?":not("+p.trim()+")":p}function y5(c){let p=c[0],g=1,y=2,w="",D=!1;for(;g<c.length;){let R=c[g];if("string"==typeof R)if(2&y){const O=c[++g];w+="["+R+(O.length>0?'="'+O+'"':"")+"]"}else 8&y?w+="."+R:4&y&&(w+=" "+R);else""!==w&&!Pu(R)&&(p+=ob(D,w),w=""),y=R,D=D||!Pu(y);g++}return""!==w&&(p+=ob(D,w)),p}const Pn={};function mx(c){u1(Xi(),xt(),va()+c,!1)}function u1(c,p,g,y){if(!y)if(3==(3&p[2])){const D=c.preOrderCheckHooks;null!==D&&ym(p,D,g)}else{const D=c.preOrderHooks;null!==D&&fp(p,D,0,g)}Zl(g)}function p1(c,p=null,g=null,y){const w=f1(c,p,g,y);return w.resolveInjectorInitializers(),w}function f1(c,p=null,g=null,y,w=new Set){const D=[g||pn,W0(c)];return y=y||("object"==typeof c?void 0:ct(c)),new K0(D,p||Ky(),y||null,w)}let tv=(()=>{class c{static create(g,y){if(Array.isArray(g))return p1({name:""},y,g,"");{const w=g.name??"";return p1({name:w},g.parent,g.providers,w)}}}return c.THROW_IF_NOT_FOUND=Bs,c.NULL=new dA,c.\u0275prov=lr({token:c,providedIn:"any",factory:()=>yo(U0)}),c.__NG_ELEMENT_ID__=-1,c})();function iv(c,p=pi.Default){const g=xt();return null===g?yo(c,p):Am(Ts(),g,Fe(c),p)}function WA(){throw new Error("invalid")}function cb(c,p){return c<<17|p<<2}function ll(c){return c>>17&32767}function qA(c){return 2|c}function Bp(c){return(131068&c)>>2}function GA(c,p){return-131069&c|p<<2}function KA(c){return 1|c}function _5(c,p){const g=c.contentQueries;if(null!==g)for(let y=0;y<g.length;y+=2){const w=g[y],D=g[y+1];if(-1!==D){const R=c.data[D];gm(w),R.contentQueries(2,p[D],D)}}}function fb(c,p,g,y,w,D,R,O,F,V,K){const se=p.blueprint.slice();return se[0]=w,se[2]=76|y,(null!==K||c&&1024&c[2])&&(se[2]|=1024),Gf(se),se[3]=se[15]=c,se[8]=g,se[10]=R||c&&c[10],se[11]=O||c&&c[11],se[12]=F||c&&c[12]||null,se[9]=V||c&&c[9]||null,se[6]=D,se[20]=function UY(){return vg++}(),se[21]=K,se[16]=2==p.type?c[16]:se,se}function gb(c,p,g,y,w){let D=c.data[p];if(null===D)D=function ek(c,p,g,y,w){const D=up(),R=Kf(),F=c.data[p]=function O5(c,p,g,y,w,D){return{type:g,index:y,insertBeforeIndex:null,injectorIndex:p?p.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:w,attrs:D,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:p,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,R?D:D&&D.parent,g,p,y,w);return null===c.firstChild&&(c.firstChild=F),null!==D&&(R?null==D.child&&null!==F.parent&&(D.child=F):null===D.next&&(D.next=F)),F}(c,p,g,y,w),function CM(){return Y.lFrame.inI18n}()&&(D.flags|=64);else if(64&D.type){D.type=g,D.value=y,D.attrs=w;const R=function Dh(){const c=Y.lFrame,p=c.currentTNode;return c.isParent?p:p.parent}();D.injectorIndex=null===R?-1:R.injectorIndex}return La(D,!0),D}function mb(c,p,g,y){if(0===g)return-1;const w=p.length;for(let D=0;D<g;D++)p.push(y),c.blueprint.push(y),c.data.push(null);return w}function gw(c,p,g){HE(p);try{const y=c.viewQuery;null!==y&&Sb(1,y,g);const w=c.template;null!==w&&tk(c,p,w,1,g),c.firstCreatePass&&(c.firstCreatePass=!1),c.staticContentQueries&&_5(c,p),c.staticViewQueries&&Sb(2,c.viewQuery,g);const D=c.components;null!==D&&function uZ(c,p){for(let g=0;g<p.length;g++)W5(c,p[g])}(p,D)}catch(y){throw c.firstCreatePass&&(c.incompleteFirstPass=!0,c.firstCreatePass=!1),y}finally{p[2]&=-5,mm()}}function eh(c,p,g,y){const w=p[2];if(128!=(128&w)){HE(p);try{Gf(p),function o0(c){return Y.lFrame.bindingIndex=c}(c.bindingStartIndex),null!==g&&tk(c,p,g,2,y);const R=3==(3&w);if(R){const V=c.preOrderCheckHooks;null!==V&&ym(p,V,null)}else{const V=c.preOrderHooks;null!==V&&fp(p,V,0,null),p0(p,0)}if(function Lx(c){for(let p=ZM(c);null!==p;p=Lu(p)){if(!p[2])continue;const g=p[9];for(let y=0;y<g.length;y++){const w=g[y],D=w[3];0==(512&w[2])&&hp(D,1),w[2]|=512}}}(p),function hk(c){for(let p=ZM(c);null!==p;p=Lu(p))for(let g=10;g<p.length;g++){const y=p[g],w=y[1];ad(y)&&eh(w,y,w.template,y[8])}}(p),null!==c.contentQueries&&_5(c,p),R){const V=c.contentCheckHooks;null!==V&&ym(p,V)}else{const V=c.contentHooks;null!==V&&fp(p,V,1),p0(p,1)}!function lZ(c,p){const g=c.hostBindingOpCodes;if(null!==g)try{for(let y=0;y<g.length;y++){const w=g[y];if(w<0)Zl(~w);else{const D=w,R=g[++y],O=g[++y];wM(R,D),O(2,p[D])}}}finally{Zl(-1)}}(c,p);const O=c.components;null!==O&&function hZ(c,p){for(let g=0;g<p.length;g++)U5(c,p[g])}(p,O);const F=c.viewQuery;if(null!==F&&Sb(2,F,y),R){const V=c.viewCheckHooks;null!==V&&ym(p,V)}else{const V=c.viewHooks;null!==V&&fp(p,V,2),p0(p,2)}!0===c.firstUpdatePass&&(c.firstUpdatePass=!1),p[2]&=-41,512&p[2]&&(p[2]&=-513,hp(p[3],-1))}finally{mm()}}}function tk(c,p,g,y,w){const D=va(),R=2&y;try{Zl(-1),R&&p.length>22&&u1(c,p,22,!1),g(y,w)}finally{Zl(D)}}function ik(c,p,g){!Fi()||(function ok(c,p,g,y){const w=g.directiveStart,D=g.directiveEnd;c.firstCreatePass||Dm(g,p),Qa(y,p);const R=g.initialInputs;for(let O=w;O<D;O++){const F=c.data[O],V=Ka(F);V&&z5(p,g,F);const K=mp(p,c,O,g);Qa(K,p),null!==R&&H1(0,O-w,K,F,0,R),V&&($n(g.index,p)[8]=K)}}(c,p,g,xl(g,p)),128==(128&g.flags)&&function _x(c,p,g){const y=g.directiveStart,w=g.directiveEnd,D=g.index,R=function NE(){return Y.lFrame.currentDirectiveIndex}();try{Zl(D);for(let O=y;O<w;O++){const F=c.data[O],V=p[O];BE(O),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&rv(F,V)}}finally{Zl(-1),BE(R)}}(c,p,g))}function nk(c,p,g=xl){const y=p.localNames;if(null!==y){let w=p.index+1;for(let D=0;D<y.length;D+=2){const R=y[D+1],O=-1===R?g(p,c):c[R];c[w++]=O}}}function rk(c){const p=c.tView;return null===p||p.incompleteFirstPass?c.tView=yb(1,null,c.template,c.decls,c.vars,c.directiveDefs,c.pipeDefs,c.viewQuery,c.schemas,c.consts):p}function yb(c,p,g,y,w,D,R,O,F,V){const K=22+y,se=K+w,Se=function L5(c,p){const g=[];for(let y=0;y<p;y++)g.push(y<c?null:Pn);return g}(K,se),We="function"==typeof V?V():V;return Se[1]={type:c,blueprint:Se,template:g,queries:null,viewQuery:O,declTNode:p,data:Se.slice().fill(null,K),bindingStartIndex:K,expandoStartIndex:se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof D?D():D,pipeRegistry:"function"==typeof R?R():R,firstChild:null,schemas:F,consts:We,incompleteFirstPass:!1}}function Cb(c,p,g,y){const w=Eb(p);null===g?w.push(y):(w.push(g),c.firstCreatePass&&dk(c).push(y,w.length-1))}function P1(c,p,g){for(let y in c)if(c.hasOwnProperty(y)){const w=c[y];(g=null===g?{}:g).hasOwnProperty(y)?g[y].push(p,w):g[y]=[p,w]}return g}function wb(c,p){const y=p.directiveEnd,w=c.data,D=p.attrs,R=[];let O=null,F=null;for(let V=p.directiveStart;V<y;V++){const K=w[V],se=K.inputs,Se=null===D||FA(p)?null:j5(se,D);R.push(Se),O=P1(se,V,O),F=P1(K.outputs,V,F)}null!==O&&(O.hasOwnProperty("class")&&(p.flags|=16),O.hasOwnProperty("style")&&(p.flags|=32)),p.initialInputs=R,p.inputs=O,p.outputs=F}function M1(c,p){const g=$n(p,c);16&g[2]||(g[2]|=32)}function sk(c,p,g,y){let w=!1;if(Fi()){const D=function B5(c,p,g){const y=c.directiveRegistry;let w=null;if(y)for(let D=0;D<y.length;D++){const R=y[D];NA(g,R.selectors,!1)&&(w||(w=[]),Zf(Dm(g,p),c,R.type),Ka(R)?(F1(c,g),w.unshift(R)):w.push(R))}return w}(c,p,g),R=null===y?null:{"":-1};if(null!==D){w=!0,N1(g,c.data.length,D.length);for(let K=0;K<D.length;K++){const se=D[K];se.providersResolver&&se.providersResolver(se)}let O=!1,F=!1,V=mb(c,p,D.length,null);for(let K=0;K<D.length;K++){const se=D[K];g.mergedAttrs=wm(g.mergedAttrs,se.hostAttrs),B1(c,g,p,V,se),V5(V,se,R),null!==se.contentQueries&&(g.flags|=8),(null!==se.hostBindings||null!==se.hostAttrs||0!==se.hostVars)&&(g.flags|=128);const Se=se.type.prototype;!O&&(Se.ngOnChanges||Se.ngOnInit||Se.ngDoCheck)&&((c.preOrderHooks||(c.preOrderHooks=[])).push(g.index),O=!0),!F&&(Se.ngOnChanges||Se.ngDoCheck)&&((c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(g.index),F=!0),V++}wb(c,g)}R&&function H5(c,p,g){if(p){const y=c.localNames=[];for(let w=0;w<p.length;w+=2){const D=g[p[w+1]];if(null==D)throw new Ct(-301,!1);y.push(p[w],D)}}}(g,y,R)}return g.mergedAttrs=wm(g.mergedAttrs,g.attrs),w}function F5(c,p,g,y,w,D){const R=D.hostBindings;if(R){let O=c.hostBindingOpCodes;null===O&&(O=c.hostBindingOpCodes=[]);const F=~p.index;(function N5(c){let p=c.length;for(;p>0;){const g=c[--p];if("number"==typeof g&&g<0)return g}return 0})(O)!=F&&O.push(F),O.push(y,w,R)}}function rv(c,p){null!==c.hostBindings&&c.hostBindings(1,p)}function F1(c,p){p.flags|=2,(c.components||(c.components=[])).push(p.index)}function V5(c,p,g){if(g){if(p.exportAs)for(let y=0;y<p.exportAs.length;y++)g[p.exportAs[y]]=c;Ka(p)&&(g[""]=c)}}function N1(c,p,g){c.flags|=1,c.directiveStart=p,c.directiveEnd=p+g,c.providerIndexes=p}function B1(c,p,g,y,w){c.data[y]=w;const D=w.factory||(w.factory=xh(w.type)),R=new ud(D,Ka(w),iv);c.blueprint[y]=R,g[y]=R,F5(c,p,0,y,mb(c,g,w.hostVars,Pn),w)}function z5(c,p,g){const y=xl(p,c),w=rk(g),D=c[10],R=sv(c,fb(c,w,null,g.onPush?32:16,y,p,D,D.createRenderer(y,g),null,null,null));c[p.index]=R}function wd(c,p,g,y,w,D){const R=xl(c,p);!function ak(c,p,g,y,w,D,R){if(null==D)c.removeAttribute(p,w,g);else{const O=null==R?dt(D):R(D,y||"",w);c.setAttribute(p,w,O,g)}}(p[11],R,D,c.value,g,y,w)}function H1(c,p,g,y,w,D){const R=D[p];if(null!==R){const O=y.setInput;for(let F=0;F<R.length;){const V=R[F++],K=R[F++],se=R[F++];null!==O?y.setInput(g,se,V,K):g[K]=se}}}function j5(c,p){let g=null,y=0;for(;y<p.length;){const w=p[y];if(0!==w)if(5!==w){if("number"==typeof w)break;c.hasOwnProperty(w)&&(null===g&&(g=[]),g.push(w,c[w],p[y+1])),y+=2}else y+=2;else y+=4}return g}function lk(c,p,g,y){return new Array(c,!0,!1,p,null,0,y,g,null,null)}function U5(c,p){const g=$n(p,c);if(ad(g)){const y=g[1];48&g[2]?eh(y,g,y.template,g[8]):g[5]>0&&uk(g)}}function uk(c){for(let y=ZM(c);null!==y;y=Lu(y))for(let w=10;w<y.length;w++){const D=y[w];if(ad(D))if(512&D[2]){const R=D[1];eh(R,D,R.template,D[8])}else D[5]>0&&uk(D)}const g=c[1].components;if(null!==g)for(let y=0;y<g.length;y++){const w=$n(g[y],c);ad(w)&&w[5]>0&&uk(w)}}function W5(c,p){const g=$n(p,c),y=g[1];(function q5(c,p){for(let g=p.length;g<c.blueprint.length;g++)p.push(c.blueprint[g])})(y,g),gw(y,g,g[8])}function sv(c,p){return c[13]?c[14][4]=p:c[13]=p,c[14]=p,p}function Ox(c){for(;c;){c[2]|=32;const p=tw(c);if(hy(c)&&!p)return c;c=p}return null}function vw(c,p,g,y=!0){const w=p[10];w.begin&&w.begin();try{eh(c,p,c.template,g)}catch(R){throw y&&j1(p,R),R}finally{w.end&&w.end()}}function Sb(c,p,g){gm(0),p(c,g)}function Eb(c){return c[7]||(c[7]=[])}function dk(c){return c.cleanup||(c.cleanup=[])}function j1(c,p){const g=c[9],y=g?g.get(Jy,null):null;y&&y.handleError(p)}function pk(c,p,g,y,w){for(let D=0;D<g.length;){const R=g[D++],O=g[D++],F=p[R],V=c.data[R];null!==V.setInput?V.setInput(F,w,y,O):F[O]=w}}function Px(c,p,g){let y=g?c.styles:null,w=g?c.classes:null,D=0;if(null!==p)for(let R=0;R<p.length;R++){const O=p[R];"number"==typeof O?D=O:1==D?w=at(w,O):2==D&&(y=at(y,O+": "+p[++R]+";"))}g?c.styles=y:c.stylesWithoutHost=y,g?c.classes=w:c.classesWithoutHost=w}function ov(c,p,g,y,w=!1){for(;null!==g;){const D=p[g.index];if(null!==D&&y.push($s(D)),Yo(D))for(let O=10;O<D.length;O++){const F=D[O],V=F[1].firstChild;null!==V&&ov(F[1],F,V,y)}const R=g.type;if(8&R)ov(c,p,g.child,y);else if(32&R){const O=ew(g,p);let F;for(;F=O();)y.push(F)}else if(16&R){const O=sb(p,g);if(Array.isArray(O))y.push(...O);else{const F=tw(p[16]);ov(F[1],F,O,y,!0)}}g=w?g.projectionNext:g.next}return y}class yw{constructor(p,g){this._lView=p,this._cdRefInjectingView=g,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const p=this._lView,g=p[1];return ov(g,p,g.firstChild,[])}get context(){return this._lView[8]}set context(p){this._lView[8]=p}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const p=this._lView[3];if(Yo(p)){const g=p[8],y=g?g.indexOf(this):-1;y>-1&&(Mp(p,y),tg(g,y))}this._attachedToViewContainer=!1}kA(this._lView[1],this._lView)}onDestroy(p){Cb(this._lView[1],this._lView,null,p)}markForCheck(){Ox(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){vw(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function c5(c,p){sw(c,p,p[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(p){if(this._attachedToViewContainer)throw new Ct(902,!1);this._appRef=p}}class K5 extends yw{constructor(p){super(p),this._view=p}detectChanges(){const p=this._view;vw(p[1],p,p[8],!1)}checkNoChanges(){}get context(){return null}}class fk extends mg{constructor(p){super(),this.ngModule=p}resolveComponentFactory(p){const g=ae(p);return new bw(g,this.ngModule)}}function U1(c){const p=[];for(let g in c)c.hasOwnProperty(g)&&p.push({propName:c[g],templateName:g});return p}class Y5{constructor(p,g){this.injector=p,this.parentInjector=g}get(p,g,y){const w=this.injector.get(p,hn,y);return w!==hn||g===hn?w:this.parentInjector.get(p,g,y)}}class bw extends Zy{constructor(p,g){super(),this.componentDef=p,this.ngModule=g,this.componentType=p.type,this.selector=function ev(c){return c.map(y5).join(",")}(p.selectors),this.ngContentSelectors=p.ngContentSelectors?p.ngContentSelectors:[],this.isBoundToModule=!!g}get inputs(){return U1(this.componentDef.inputs)}get outputs(){return U1(this.componentDef.outputs)}create(p,g,y,w){let D=(w=w||this.ngModule)instanceof Ya?w:w?.injector;D&&null!==this.componentDef.getStandaloneInjector&&(D=this.componentDef.getStandaloneInjector(D)||D);const R=D?new Y5(p,D):p,O=R.get(W,null);if(null===O)throw new Ct(407,!1);const F=R.get(lt,null),V=O.createRenderer(null,this.componentDef),K=this.componentDef.selectors[0][0]||"div",se=y?function bb(c,p,g){return c.selectRootElement(p,g===_i.ShadowDom)}(V,y,this.componentDef.encapsulation):IA(O.createRenderer(null,this.componentDef),K,function $5(c){const p=c.toLowerCase();return"svg"===p?"svg":"math"===p?"math":null}(K)),Se=this.componentDef.onPush?288:272,We=yb(0,null,null,1,0,null,null,null,null,null),wt=fb(null,We,null,Se,null,null,O,V,F,R,null);let Yt,ui;HE(wt);try{const Ni=function G1(c,p,g,y,w,D){const R=g[1];g[22]=c;const F=gb(R,22,2,"#host",null),V=F.mergedAttrs=p.hostAttrs;null!==V&&(Px(F,V,!0),null!==c&&(Yf(w,c,V),null!==F.classes&&Pa(w,c,F.classes),null!==F.styles&&f5(w,c,F.styles)));const K=y.createRenderer(c,p),se=fb(g,rk(p),null,p.onPush?32:16,g[22],F,y,K,D||null,null,null);return R.firstCreatePass&&(Zf(Dm(F,g),R,p.type),F1(R,F),N1(F,g.length,1)),sv(g,se),g[22]=se}(se,this.componentDef,wt,O,V);if(se)if(y)Yf(V,se,["ng-version",Di.full]);else{const{attrs:fn,classes:Lt}=function b5(c){const p=[],g=[];let y=1,w=2;for(;y<c.length;){let D=c[y];if("string"==typeof D)2===w?""!==D&&p.push(D,c[++y]):8===w&&g.push(D);else{if(!Pu(w))break;w=D}y++}return{attrs:p,classes:g}}(this.componentDef.selectors[0]);fn&&Yf(V,se,fn),Lt&&Lt.length>0&&Pa(V,se,Lt.join(" "))}if(ui=Tl(We,22),void 0!==g){const fn=ui.projection=[];for(let Lt=0;Lt<this.ngContentSelectors.length;Lt++){const En=g[Lt];fn.push(null!=En?Array.from(En):null)}}Yt=function K1(c,p,g,y){const w=g[1],D=function M5(c,p,g){const y=Ts();c.firstCreatePass&&(g.providersResolver&&g.providersResolver(g),B1(c,y,p,mb(c,p,1,null),g),wb(c,y));const w=mp(p,c,y.directiveStart,y);Qa(w,p);const D=xl(y,p);return D&&Qa(D,p),w}(w,g,p);if(c[8]=g[8]=D,null!==y)for(const O of y)O(D,p);if(p.contentQueries){const O=Ts();p.contentQueries(1,D,O.directiveStart)}const R=Ts();return!w.firstCreatePass||null===p.hostBindings&&null===p.hostAttrs||(Zl(R.index),F5(g[1],R,0,R.directiveStart,R.directiveEnd,p),rv(p,D)),D}(Ni,this.componentDef,wt,[$1]),gw(We,wt,null)}finally{mm()}return new q1(this.componentType,Yt,k(ui,wt),wt,ui)}}class q1 extends class X0{}{constructor(p,g,y,w,D){super(),this.location=y,this._rootLView=w,this._tNode=D,this.instance=g,this.hostView=this.changeDetectorRef=new K5(w),this.componentType=p}setInput(p,g){const y=this._tNode.inputs;let w;if(null!==y&&(w=y[p])){const D=this._rootLView;pk(D[1],D,w,p,g),M1(D,this._tNode.index)}}get injector(){return new Jf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(p){this.hostView.onDestroy(p)}}function $1(){const c=Ts();vm(xt()[1],c)}function gk(c){let p=function Y1(c){return Object.getPrototypeOf(c.prototype).constructor}(c.type),g=!0;const y=[c];for(;p;){let w;if(Ka(c))w=p.\u0275cmp||p.\u0275dir;else{if(p.\u0275cmp)throw new Ct(903,!1);w=p.\u0275dir}if(w){if(g){y.push(w);const R=c;R.inputs=mk(c.inputs),R.declaredInputs=mk(c.declaredInputs),R.outputs=mk(c.outputs);const O=w.hostBindings;O&&Z1(c,O);const F=w.viewQuery,V=w.contentQueries;if(F&&Q5(c,F),V&&J5(c,V),et(c.inputs,w.inputs),et(c.declaredInputs,w.declaredInputs),et(c.outputs,w.outputs),Ka(w)&&w.data.animation){const K=c.data;K.animation=(K.animation||[]).concat(w.data.animation)}}const D=w.features;if(D)for(let R=0;R<D.length;R++){const O=D[R];O&&O.ngInherit&&O(c),O===gk&&(g=!1)}}p=Object.getPrototypeOf(p)}!function X5(c){let p=0,g=null;for(let y=c.length-1;y>=0;y--){const w=c[y];w.hostVars=p+=w.hostVars,w.hostAttrs=wm(w.hostAttrs,g=wm(g,w.hostAttrs))}}(y)}function mk(c){return c===ko?{}:c===pn?[]:c}function Q5(c,p){const g=c.viewQuery;c.viewQuery=g?(y,w)=>{p(y,w),g(y,w)}:p}function J5(c,p){const g=c.contentQueries;c.contentQueries=g?(y,w,D)=>{p(y,w,D),g(y,w,D)}:p}function Z1(c,p){const g=c.hostBindings;c.hostBindings=g?(y,w)=>{p(y,w),g(y,w)}:p}let yk=null;function av(){if(!yk){const c=xn.Symbol;if(c&&c.iterator)yk=c.iterator;else{const p=Object.getOwnPropertyNames(Map.prototype);for(let g=0;g<p.length;++g){const y=p[g];"entries"!==y&&"size"!==y&&Map.prototype[y]===Map.prototype.entries&&(yk=y)}}}return yk}function Cw(c){return!!Fx(c)&&(Array.isArray(c)||!(c instanceof Map)&&av()in c)}function Fx(c){return null!==c&&("function"==typeof c||"object"==typeof c)}function Al(c,p,g){return!Object.is(c[p],g)&&(c[p]=g,!0)}function Ck(c,p,g,y){const w=xt();return Al(w,pp(),p)&&(Xi(),wd(Ns(),w,c,p,g,y)),Ck}function Hx(c,p,g,y,w,D,R,O){const F=xt(),V=Xi(),K=c+22,se=V.firstCreatePass?function Ab(c,p,g,y,w,D,R,O,F){const V=p.consts,K=gb(p,c,4,R||null,Wh(V,O));sk(p,g,K,Wh(V,F)),vm(p,K);const se=K.tViews=yb(2,K,y,w,D,p.directiveRegistry,p.pipeRegistry,null,p.schemas,V);return null!==p.queries&&(p.queries.template(p,K),se.queries=p.queries.embeddedTView(K)),K}(K,V,F,p,g,y,w,D,R):V.data[K];La(se,!1);const Se=F[11].createComment("");rb(V,F,Se,se),Qa(Se,F),sv(F,F[K]=lk(Se,F,Se,se)),Hf(se)&&ik(V,F,se),null!=R&&nk(F,se,O)}function Ek(c){return pc(function gc(){return Y.lFrame.contextLView}(),22+c)}function Vx(c,p,g){const y=xt();return Al(y,pp(),p)&&function Zh(c,p,g,y,w,D,R,O){const F=xl(p,g);let K,V=p.inputs;!O&&null!=V&&(K=V[y])?(pk(c,g,K,y,w),xu(p)&&M1(g,p.index)):3&p.type&&(y=function mw(c){return"class"===c?"className":"for"===c?"htmlFor":"formaction"===c?"formAction":"innerHtml"===c?"innerHTML":"readonly"===c?"readOnly":"tabindex"===c?"tabIndex":c}(y),w=null!=R?R(w,p.value||"",y):w,D.setProperty(F,y,w))}(Xi(),Ns(),y,c,p,y[11],g,!1),Vx}function Ew(c,p,g,y,w){const R=w?"class":"style";pk(c,g,p.inputs[R],R,y)}function zx(c,p,g,y){const w=xt(),D=Xi(),R=22+c,O=w[11],F=w[R]=IA(O,p,function yy(){return Y.lFrame.currentNamespace}()),V=D.firstCreatePass?function r3(c,p,g,y,w,D,R){const O=p.consts,V=gb(p,c,2,w,Wh(O,D));return sk(p,g,V,Wh(O,R)),null!==V.attrs&&Px(V,V.attrs,!1),null!==V.mergedAttrs&&Px(V,V.mergedAttrs,!0),null!==p.queries&&p.queries.elementStart(p,V),V}(R,D,w,0,p,g,y):D.data[R];La(V,!0);const K=V.mergedAttrs;null!==K&&Yf(O,F,K);const se=V.classes;null!==se&&Pa(O,F,se);const Se=V.styles;return null!==Se&&f5(O,F,Se),64!=(64&V.flags)&&rb(D,w,F,V),0===function tt(){return Y.lFrame.elementDepthCount}()&&Qa(F,w),function Mt(){Y.lFrame.elementDepthCount++}(),Hf(V)&&(ik(D,w,V),function vb(c,p,g){if(td(p)){const w=p.directiveEnd;for(let D=p.directiveStart;D<w;D++){const R=c.data[D];R.contentQueries&&R.contentQueries(1,g[D],D)}}}(D,V,w)),null!==y&&nk(w,V),zx}function jx(){let c=Ts();Kf()?function cp(){Y.lFrame.isParent=!1}():(c=c.parent,La(c,!1));const p=c;!function ai(){Y.lFrame.elementDepthCount--}();const g=Xi();return g.firstCreatePass&&(vm(g,c),td(c)&&g.queries.elementEnd(c)),null!=p.classesWithoutHost&&function by(c){return 0!=(16&c.flags)}(p)&&Ew(g,p,xt(),p.classesWithoutHost,!0),null!=p.stylesWithoutHost&&function jE(c){return 0!=(32&c.flags)}(p)&&Ew(g,p,xt(),p.stylesWithoutHost,!1),jx}function Ux(c,p,g,y){return zx(c,p,g,y),jx(),Ux}function xk(){return xt()}function Tk(c){return!!c&&"function"==typeof c.then}function nF(c){return!!c&&"function"==typeof c.subscribe}const Dk=nF;function Ik(c,p,g,y){const w=xt(),D=Xi(),R=Ts();return function sF(c,p,g,y,w,D,R,O){const F=Hf(y),K=c.firstCreatePass&&dk(c),se=p[8],Se=Eb(p);let We=!0;if(3&y.type||O){const ui=xl(y,p),Ni=O?O(ui):ui,fn=Se.length,Lt=O?Wr=>O($s(Wr[y.index])):y.index;let En=null;if(!O&&F&&(En=function a3(c,p,g,y){const w=c.cleanup;if(null!=w)for(let D=0;D<w.length-1;D+=2){const R=w[D];if(R===g&&w[D+1]===y){const O=p[7],F=w[D+2];return O.length>F?O[F]:null}"string"==typeof R&&(D+=2)}return null}(c,p,w,y.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=D,En.__ngLastListenerFn__=D,We=!1;else{D=Ak(y,p,se,D,!1);const Wr=g.listen(Ni,w,D);Se.push(D,Wr),K&&K.push(w,Lt,fn,fn+1)}}else D=Ak(y,p,se,D,!1);const wt=y.outputs;let Yt;if(We&&null!==wt&&(Yt=wt[w])){const ui=Yt.length;if(ui)for(let Ni=0;Ni<ui;Ni+=2){const Is=p[Yt[Ni]][Yt[Ni+1]].subscribe(D),Dg=Se.length;Se.push(D,Is),K&&K.push(w,y.index,Dg,-(Dg+1))}}}(D,w,w[11],R,c,p,0,y),Ik}function oF(c,p,g,y){try{return!1!==g(y)}catch(w){return j1(c,w),!1}}function Ak(c,p,g,y,w){return function D(R){if(R===Function)return y;Ox(2&c.flags?$n(c.index,p):p);let F=oF(p,0,y,R),V=D.__ngNextListenerFn__;for(;V;)F=oF(p,0,V,R)&&F,V=V.__ngNextListenerFn__;return w&&!1===F&&(R.preventDefault(),R.returnValue=!1),F}}function aF(c=1){return function $f(c){return(Y.lFrame.contextLView=function c0(c,p){for(;c>0;)p=p[15],c--;return p}(c,Y.lFrame.contextLView))[8]}(c)}function fF(c,p,g,y,w){const D=c[g+1],R=null===p;let O=y?ll(D):Bp(D),F=!1;for(;0!==O&&(!1===F||R);){const K=c[O+1];Q(c[O],p)&&(F=!0,c[O+1]=y?KA(K):qA(K)),O=y?ll(K):Bp(K)}F&&(c[g+1]=y?qA(D):KA(D))}function Q(c,p){return null===c||null==p||(Array.isArray(c)?c[1]:c)===p||!(!Array.isArray(c)||"string"!=typeof p)&&yp(c,p)>=0}function it(c,p){return function Ed(c,p,g,y){const w=xt(),D=Xi(),R=function ld(c){const p=Y.lFrame,g=p.bindingIndex;return p.bindingIndex=p.bindingIndex+c,g}(2);D.firstUpdatePass&&function yF(c,p,g,y){const w=c.data;if(null===w[g+1]){const D=w[va()],R=function vF(c,p){return p>=c.expandoStartIndex}(c,g);(function Pk(c,p){return 0!=(c.flags&(p?16:32))})(D,y)&&null===p&&!R&&(p=!1),p=function bF(c,p,g,y){const w=function fm(c){const p=Y.lFrame.currentDirectiveIndex;return-1===p?null:c[p]}(c);let D=y?p.residualClasses:p.residualStyles;if(null===w)0===(y?p.classBindings:p.styleBindings)&&(g=th(g=_k(null,c,p,g,y),p.attrs,y),D=null);else{const R=p.directiveStylingLast;if(-1===R||c[R]!==w)if(g=_k(w,c,p,g,y),null===D){let F=function CF(c,p,g){const y=g?p.classBindings:p.styleBindings;if(0!==Bp(y))return c[ll(y)]}(c,p,y);void 0!==F&&Array.isArray(F)&&(F=_k(null,c,p,F[1],y),F=th(F,p.attrs,y),function Ys(c,p,g,y){c[ll(g?p.classBindings:p.styleBindings)]=y}(c,p,y,F))}else D=function c3(c,p,g){let y;const w=p.directiveEnd;for(let D=1+p.directiveStylingLast;D<w;D++)y=th(y,c[D].hostAttrs,g);return th(y,p.attrs,g)}(c,p,y)}return void 0!==D&&(y?p.residualClasses=D:p.residualStyles=D),g}(w,D,p,y),function vZ(c,p,g,y,w,D){let R=D?p.classBindings:p.styleBindings,O=ll(R),F=Bp(R);c[y]=g;let K,V=!1;if(Array.isArray(g)){const se=g;K=se[1],(null===K||yp(se,K)>0)&&(V=!0)}else K=g;if(w)if(0!==F){const Se=ll(c[O+1]);c[y+1]=cb(Se,O),0!==Se&&(c[Se+1]=GA(c[Se+1],y)),c[O+1]=function E1(c,p){return 131071&c|p<<17}(c[O+1],y)}else c[y+1]=cb(O,0),0!==O&&(c[O+1]=GA(c[O+1],y)),O=y;else c[y+1]=cb(F,0),0===O?O=y:c[F+1]=GA(c[F+1],y),F=y;V&&(c[y+1]=qA(c[y+1])),fF(c,K,y,!0),fF(c,K,y,!1),function Wx(c,p,g,y,w){const D=w?c.residualClasses:c.residualStyles;null!=D&&"string"==typeof p&&yp(D,p)>=0&&(g[y+1]=KA(g[y+1]))}(p,K,c,y,D),R=cb(O,F),D?p.classBindings=R:p.styleBindings=R}(w,D,p,g,R,y)}}(D,c,R,y),p!==Pn&&Al(w,R,p)&&function Ok(c,p,g,y,w,D,R,O){if(!(3&p.type))return;const F=c.data,V=F[O+1];Kx(function x1(c){return 1==(1&c)}(V)?wF(F,p,g,w,Bp(V),R):void 0)||(Kx(D)||function dw(c){return 2==(2&c)}(V)&&(D=wF(F,null,g,w,O,R)),function s1(c,p,g,y,w){if(p)w?c.addClass(g,y):c.removeClass(g,y);else{let D=-1===y.indexOf("-")?void 0:Sc.DashCase;null==w?c.removeStyle(g,y,D):("string"==typeof w&&w.endsWith("!important")&&(w=w.slice(0,-10),D|=Sc.Important),c.setStyle(g,y,w,D))}}(y,R,function dc(c,p){return $s(p[c])}(va(),g),w,D))}(D,D.data[va()],w,w[11],c,w[R+1]=function SF(c,p){return null==c||("string"==typeof p?c+=p:"object"==typeof c&&(c=ct(Kh(c)))),c}(p,g),y,R)}(c,p,null,!0),it}function _k(c,p,g,y,w){let D=null;const R=g.directiveEnd;let O=g.directiveStylingLast;for(-1===O?O=g.directiveStart:O++;O<R&&(D=p[O],y=th(y,D.hostAttrs,w),D!==c);)O++;return null!==c&&(g.directiveStylingLast=O),y}function th(c,p,g){const y=g?1:2;let w=-1;if(null!==p)for(let D=0;D<p.length;D++){const R=p[D];"number"==typeof R?w=R:w===y&&(Array.isArray(c)||(c=void 0===c?[]:["",c]),Dl(c,R,!!g||p[++D]))}return void 0===c?null:c}function wF(c,p,g,y,w,D){const R=null===p;let O;for(;w>0;){const F=c[w],V=Array.isArray(F),K=V?F[1]:F,se=null===K;let Se=g[w+1];Se===Pn&&(Se=se?pn:void 0);let We=se?D0(Se,y):K===y?Se:void 0;if(V&&!Kx(We)&&(We=D0(F,y)),Kx(We)&&(O=We,R))return O;const wt=c[w+1];w=R?ll(wt):Bp(wt)}if(null!==p){let F=D?p.residualClasses:p.residualStyles;null!=F&&(O=D0(F,y))}return O}function Kx(c){return void 0!==c}function EF(c,p=""){const g=xt(),y=Xi(),w=c+22,D=y.firstCreatePass?gb(y,w,1,p,null):y.data[w],R=g[w]=function bg(c,p){return c.createText(p)}(g[11],p);rb(y,g,R,D),La(D,!1)}const dv=void 0;var Z=["en",[["a","p"],["AM","PM"],dv],[["AM","PM"],dv,dv],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dv,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dv,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dv,"{1} 'at' {0}",dv],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BF(c){const g=Math.floor(Math.abs(c)),y=c.toString().replace(/^[^.]*\.?/,"").length;return 1===g&&0===y?1:5}];let T={};function ti(c){const p=function Kt(c){return c.toLowerCase().replace(/_/g,"-")}(c);let g=jk(p);if(g)return g;const y=p.split("-")[0];if(g=jk(y),g)return g;if("en"===y)return Z;throw new Ct(701,!1)}function z(c){return ti(c)[mi.PluralCase]}function jk(c){return c in T||(T[c]=xn.ng&&xn.ng.common&&xn.ng.common.locales&&xn.ng.common.locales[c]),T[c]}var mi=(()=>((mi=mi||{})[mi.LocaleId=0]="LocaleId",mi[mi.DayPeriodsFormat=1]="DayPeriodsFormat",mi[mi.DayPeriodsStandalone=2]="DayPeriodsStandalone",mi[mi.DaysFormat=3]="DaysFormat",mi[mi.DaysStandalone=4]="DaysStandalone",mi[mi.MonthsFormat=5]="MonthsFormat",mi[mi.MonthsStandalone=6]="MonthsStandalone",mi[mi.Eras=7]="Eras",mi[mi.FirstDayOfWeek=8]="FirstDayOfWeek",mi[mi.WeekendRange=9]="WeekendRange",mi[mi.DateFormat=10]="DateFormat",mi[mi.TimeFormat=11]="TimeFormat",mi[mi.DateTimeFormat=12]="DateTimeFormat",mi[mi.NumberSymbols=13]="NumberSymbols",mi[mi.NumberFormats=14]="NumberFormats",mi[mi.CurrencyCode=15]="CurrencyCode",mi[mi.CurrencySymbol=16]="CurrencySymbol",mi[mi.CurrencyName=17]="CurrencyName",mi[mi.Currencies=18]="Currencies",mi[mi.Directionality=19]="Directionality",mi[mi.PluralCase=20]="PluralCase",mi[mi.ExtraData=21]="ExtraData",mi))();const Be="en-US";let v3=Be;function Dc(c,p,g,y,w){if(c=Fe(c),Array.isArray(c))for(let D=0;D<c.length;D++)Dc(c[D],p,g,y,w);else{const D=Xi(),R=xt();let O=$h(c)?c:Fe(c.provide),F=Y0(c);const V=Ts(),K=1048575&V.providerIndexes,se=V.directiveStart,Se=V.providerIndexes>>20;if($h(c)||!c.multi){const We=new ud(F,w,iv),wt=Ja(O,p,w?K:K+Se,se);-1===wt?(Zf(Dm(V,R),D,O),$k(D,c,p.length),p.push(O),V.directiveStart++,V.directiveEnd++,w&&(V.providerIndexes+=1048576),g.push(We),R.push(We)):(g[wt]=We,R[wt]=We)}else{const We=Ja(O,p,K+Se,se),wt=Ja(O,p,K,K+Se),Yt=We>=0&&g[We],ui=wt>=0&&g[wt];if(w&&!ui||!w&&!Yt){Zf(Dm(V,R),D,O);const Ni=function z3(c,p,g,y,w){const D=new ud(c,g,iv);return D.multi=[],D.index=p,D.componentProviders=0,tN(D,w,y&&!g),D}(w?V3:H3,g.length,w,y,F);!w&&ui&&(g[wt].providerFactory=Ni),$k(D,c,p.length,0),p.push(O),V.directiveStart++,V.directiveEnd++,w&&(V.providerIndexes+=1048576),g.push(Ni),R.push(Ni)}else $k(D,c,We>-1?We:wt,tN(g[w?wt:We],F,!w&&y));!w&&y&&ui&&g[wt].componentProviders++}}}function $k(c,p,g,y){const w=$h(p),D=function fA(c){return!!c.useClass}(p);if(w||D){const F=(D?Fe(p.useClass):p).prototype.ngOnDestroy;if(F){const V=c.destroyHooks||(c.destroyHooks=[]);if(!w&&p.multi){const K=V.indexOf(g);-1===K?V.push(g,[y,F]):V[K+1].push(y,F)}else V.push(g,F)}}}function tN(c,p,g){return g&&c.componentProviders++,c.multi.push(p)-1}function Ja(c,p,g,y){for(let w=g;w<y;w++)if(p[w]===c)return w;return-1}function H3(c,p,g,y){return Yk(this.multi,[])}function V3(c,p,g,y){const w=this.multi;let D;if(this.providerFactory){const R=this.providerFactory.componentProviders,O=mp(g,g[1],this.providerFactory.index,y);D=O.slice(0,R),Yk(w,D);for(let F=R;F<O.length;F++)D.push(O[F])}else D=[],Yk(w,D);return D}function Yk(c,p){for(let g=0;g<c.length;g++)p.push((0,c[g])());return p}function Zk(c,p=[]){return g=>{g.providersResolver=(y,w)=>function eN(c,p,g){const y=Xi();if(y.firstCreatePass){const w=Ka(c);Dc(g,y.data,y.blueprint,w,!0),Dc(p,y.data,y.blueprint,w,!1)}}(y,w?w(c):c,p)}}class Lb{}class Xk{}function j3(c,p){return new nN(c,p??null)}class nN extends Lb{constructor(p,g){super(),this._parent=g,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fk(this);const y=Ri(p);this._bootstrapComponents=yg(y.bootstrap),this._r3Injector=f1(p,g,[{provide:Lb,useValue:this},{provide:mg,useValue:this.componentFactoryResolver}],ct(p),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(p)}get injector(){return this._r3Injector}destroy(){const p=this._r3Injector;!p.destroyed&&p.destroy(),this.destroyCbs.forEach(g=>g()),this.destroyCbs=null}onDestroy(p){this.destroyCbs.push(p)}}class Qk extends Xk{constructor(p){super(),this.moduleType=p}create(p){return new nN(this.moduleType,p)}}class U3 extends Lb{constructor(p,g,y){super(),this.componentFactoryResolver=new fk(this),this.instance=null;const w=new K0([...p,{provide:Lb,useValue:this},{provide:mg,useValue:this.componentFactoryResolver}],g||Ky(),y,new Set(["environment"]));this.injector=w,w.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(p){this.injector.onDestroy(p)}}function Jk(c,p,g=null){return new U3(c,p,g).injector}let W3=(()=>{class c{constructor(g){this._injector=g,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(g){if(!g.standalone)return null;if(!this.cachedInjectors.has(g.id)){const y=qy(0,g.type),w=y.length>0?Jk([y],this._injector,`Standalone[${g.type.name}]`):null;this.cachedInjectors.set(g.id,w)}return this.cachedInjectors.get(g.id)}ngOnDestroy(){try{for(const g of this.cachedInjectors.values())null!==g&&g.destroy()}finally{this.cachedInjectors.clear()}}}return c.\u0275prov=lr({token:c,providedIn:"environment",factory:()=>new c(yo(Ya))}),c})();function iT(c){c.getStandaloneInjector=p=>p.get(W3).getOrCreateStandaloneInjector(c)}function cN(c,p,g,y){return Fb(xt(),vo(),c,p,g,y)}function Fb(c,p,g,y,w,D){const R=p+g;return Al(c,R,w)?function Mu(c,p,g){return c[p]=g}(c,R+1,D?y.call(D,w):y(w)):function Mb(c,p){const g=c[p];return g===Pn?void 0:g}(c,R+1)}function rR(c,p){const g=Xi();let y;const w=c+22;g.firstCreatePass?(y=function kZ(c,p){if(p)for(let g=p.length-1;g>=0;g--){const y=p[g];if(c===y.name)return y}}(p,g.pipeRegistry),g.data[w]=y,y.onDestroy&&(g.destroyHooks||(g.destroyHooks=[])).push(w,y.onDestroy)):y=g.data[w];const D=y.factory||(y.factory=xh(y.type)),R=ys(iv);try{const O=Sy(!1),F=D();return Sy(O),function gZ(c,p,g,y){g>=c.data.length&&(c.data[g]=null,c.blueprint[g]=null),p[g]=y}(g,xt(),w,F),F}finally{ys(R)}}function gN(c,p,g){const y=c+22,w=xt(),D=pc(w,y);return function kn(c,p){return c[1].data[p].pure}(w,y)?Fb(w,vo(),p,D.transform,g,D):D.transform(g)}function qe(c){return p=>{setTimeout(c,void 0,p)}}const Ma=class mN extends b.x{constructor(p=!1){super(),this.__isAsync=p}emit(p){super.next(p)}subscribe(p,g,y){let w=p,D=g||(()=>null),R=y;if(p&&"object"==typeof p){const F=p;w=F.next?.bind(F),D=F.error?.bind(F),R=F.complete?.bind(F)}this.__isAsync&&(D=qe(D),w&&(w=qe(w)),R&&(R=qe(R)));const O=super.subscribe({next:w,error:D,complete:R});return p instanceof Ve.w0&&p.add(O),O}};function t6(){return this._results[av()]()}class nT{constructor(p=!1){this._emitDistinctChangesOnly=p,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const g=av(),y=nT.prototype;y[g]||(y[g]=t6)}get changes(){return this._changes||(this._changes=new Ma)}get(p){return this._results[p]}map(p){return this._results.map(p)}filter(p){return this._results.filter(p)}find(p){return this._results.find(p)}reduce(p,g){return this._results.reduce(p,g)}forEach(p){this._results.forEach(p)}some(p){return this._results.some(p)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(p,g){const y=this;y.dirty=!1;const w=Xl(p);(this._changesDetected=!function x0(c,p,g){if(c.length!==p.length)return!1;for(let y=0;y<c.length;y++){let w=c[y],D=p[y];if(g&&(w=g(w),D=g(D)),D!==w)return!1}return!0}(y._results,w,g))&&(y._results=w,y.length=w.length,y.last=w[this.length-1],y.first=w[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gv=(()=>{class c{}return c.__NG_ELEMENT_ID__=_Z,c})();const Qh=gv,Nb=class extends Qh{constructor(p,g,y){super(),this._declarationLView=p,this._declarationTContainer=g,this.elementRef=y}createEmbeddedView(p,g){const y=this._declarationTContainer.tViews,w=fb(this._declarationLView,y,p,16,null,y.declTNode,null,null,null,null,g||null);w[17]=this._declarationLView[this._declarationTContainer.index];const R=this._declarationLView[19];return null!==R&&(w[19]=R.createEmbeddedView(y)),gw(y,w,p),new yw(w)}};function _Z(){return sR(Ts(),xt())}function sR(c,p){return 4&c.type?new Nb(p,c,k(c,p)):null}let oR=(()=>{class c{}return c.__NG_ELEMENT_ID__=i6,c})();function i6(){return ul(Ts(),xt())}const n6=oR,r6=class extends n6{constructor(p,g,y){super(),this._lContainer=p,this._hostTNode=g,this._hostLView=y}get element(){return k(this._hostTNode,this._hostLView)}get injector(){return new Jf(this._hostTNode,this._hostLView)}get parentInjector(){const p=xy(this._hostTNode,this._hostLView);if(WE(p)){const g=xm(p,this._hostLView),y=Sm(p);return new Jf(g[1].data[y+8],g)}return new Jf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(p){const g=vN(this._lContainer);return null!==g&&g[p]||null}get length(){return this._lContainer.length-10}createEmbeddedView(p,g,y){let w,D;"number"==typeof y?w=y:null!=y&&(w=y.index,D=y.injector);const R=p.createEmbeddedView(g||{},D);return this.insert(R,w),R}createComponent(p,g,y,w,D){const R=p&&!function ba(c){return"function"==typeof c}(p);let O;if(R)O=g;else{const se=g||{};O=se.index,y=se.injector,w=se.projectableNodes,D=se.environmentInjector||se.ngModuleRef}const F=R?p:new bw(ae(p)),V=y||this.parentInjector;if(!D&&null==F.ngModule){const Se=(R?V:this.parentInjector).get(Ya,null);Se&&(D=Se)}const K=F.create(V,w,void 0,D);return this.insert(K.hostView,O),K}insert(p,g){const y=p._lView,w=y[1];if(function pm(c){return Yo(c[3])}(y)){const K=this.indexOf(p);if(-1!==K)this.detach(K);else{const se=y[3],Se=new r6(se,se[6],se[3]);Se.detach(Se.indexOf(p))}}const D=this._adjustIndex(g),R=this._lContainer;!function e1(c,p,g,y){const w=10+y,D=g.length;y>0&&(g[w-1][4]=p),y<D-10?(p[4]=g[w],T0(g,10+y,p)):(g.push(p),p[4]=null),p[3]=g;const R=p[17];null!==R&&g!==R&&function d5(c,p){const g=c[9];p[16]!==p[3][3][16]&&(c[2]=!0),null===g?c[9]=[p]:g.push(p)}(R,p);const O=p[19];null!==O&&O.insertView(c),p[2]|=64}(w,y,R,D);const O=OA(D,R),F=y[11],V=Ec(F,R[7]);return null!==V&&function iw(c,p,g,y,w,D){y[0]=w,y[6]=p,sw(c,y,g,1,w,D)}(w,R[6],F,y,V,O),p.attachToViewContainerRef(),T0(Qe(R),D,p),p}move(p,g){return this.insert(p,g)}indexOf(p){const g=vN(this._lContainer);return null!==g?g.indexOf(p):-1}remove(p){const g=this._adjustIndex(p,-1),y=Mp(this._lContainer,g);y&&(tg(Qe(this._lContainer),g),kA(y[1],y))}detach(p){const g=this._adjustIndex(p,-1),y=Mp(this._lContainer,g);return y&&null!=tg(Qe(this._lContainer),g)?new yw(y):null}_adjustIndex(p,g=0){return p??this.length+g}};function vN(c){return c[8]}function Qe(c){return c[8]||(c[8]=[])}function ul(c,p){let g;const y=p[c.index];if(Yo(y))g=y;else{let w;if(8&c.type)w=$s(y);else{const D=p[11];w=D.createComment("");const R=xl(c,p);yd(D,Ec(D,R),w,function p5(c,p){return c.nextSibling(p)}(D,R),!1)}p[c.index]=g=lk(y,p,w,c),sv(p,g)}return new r6(g,c,p)}class lR{constructor(p){this.queryList=p,this.matches=null}clone(){return new lR(this.queryList)}setDirty(){this.queryList.setDirty()}}class yN{constructor(p=[]){this.queries=p}createEmbeddedView(p){const g=p.queries;if(null!==g){const y=null!==p.contentQueries?p.contentQueries[0]:g.length,w=[];for(let D=0;D<y;D++){const R=g.getByIndex(D);w.push(this.queries[R.indexInDeclarationView].clone())}return new yN(w)}return null}insertView(p){this.dirtyQueriesWithMatches(p)}detachView(p){this.dirtyQueriesWithMatches(p)}dirtyQueriesWithMatches(p){for(let g=0;g<this.queries.length;g++)null!==lT(p,g).matches&&this.queries[g].setDirty()}}class Bw{constructor(p,g,y=null){this.predicate=p,this.flags=g,this.read=y}}class rT{constructor(p=[]){this.queries=p}elementStart(p,g){for(let y=0;y<this.queries.length;y++)this.queries[y].elementStart(p,g)}elementEnd(p){for(let g=0;g<this.queries.length;g++)this.queries[g].elementEnd(p)}embeddedTView(p){let g=null;for(let y=0;y<this.length;y++){const w=null!==g?g.length:0,D=this.getByIndex(y).embeddedTView(p,w);D&&(D.indexInDeclarationView=y,null!==g?g.push(D):g=[D])}return null!==g?new rT(g):null}template(p,g){for(let y=0;y<this.queries.length;y++)this.queries[y].template(p,g)}getByIndex(p){return this.queries[p]}get length(){return this.queries.length}track(p){this.queries.push(p)}}class hR{constructor(p,g=-1){this.metadata=p,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=g}elementStart(p,g){this.isApplyingToNode(g)&&this.matchTNode(p,g)}elementEnd(p){this._declarationNodeIndex===p.index&&(this._appliesToNextNode=!1)}template(p,g){this.elementStart(p,g)}embeddedTView(p,g){return this.isApplyingToNode(p)?(this.crossesNgTemplate=!0,this.addMatch(-p.index,g),new hR(this.metadata)):null}isApplyingToNode(p){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const g=this._declarationNodeIndex;let y=p.parent;for(;null!==y&&8&y.type&&y.index!==g;)y=y.parent;return g===(null!==y?y.index:-1)}return this._appliesToNextNode}matchTNode(p,g){const y=this.metadata.predicate;if(Array.isArray(y))for(let w=0;w<y.length;w++){const D=y[w];this.matchTNodeWithReadOption(p,g,Ac(g,D)),this.matchTNodeWithReadOption(p,g,Qf(g,p,D,!1,!1))}else y===gv?4&g.type&&this.matchTNodeWithReadOption(p,g,-1):this.matchTNodeWithReadOption(p,g,Qf(g,p,y,!1,!1))}matchTNodeWithReadOption(p,g,y){if(null!==y){const w=this.metadata.read;if(null!==w)if(w===x||w===oR||w===gv&&4&g.type)this.addMatch(g.index,-2);else{const D=Qf(g,p,w,!1,!1);null!==D&&this.addMatch(g.index,D)}else this.addMatch(g.index,y)}}addMatch(p,g){null===this.matches?this.matches=[p,g]:this.matches.push(p,g)}}function Ac(c,p){const g=c.localNames;if(null!==g)for(let y=0;y<g.length;y+=2)if(g[y]===p)return g[y+1];return null}function Bu(c,p,g,y){return-1===g?function OZ(c,p){return 11&c.type?k(c,p):4&c.type?sR(c,p):null}(p,c):-2===g?function uR(c,p,g){return g===x?k(p,c):g===gv?sR(p,c):g===oR?ul(p,c):void 0}(c,p,y):mp(c,c[1],g,p)}function bN(c,p,g,y){const w=p[19].queries[y];if(null===w.matches){const D=c.data,R=g.matches,O=[];for(let F=0;F<R.length;F+=2){const V=R[F];O.push(V<0?null:Bu(p,D[V],R[F+1],g.metadata.read))}w.matches=O}return w.matches}function ih(c,p,g,y){const w=c.queries.getByIndex(g),D=w.matches;if(null!==D){const R=bN(c,p,w,g);for(let O=0;O<D.length;O+=2){const F=D[O];if(F>0)y.push(R[O/2]);else{const V=D[O+1],K=p[-F];for(let se=10;se<K.length;se++){const Se=K[se];Se[17]===Se[3]&&ih(Se[1],Se,V,y)}if(null!==K[9]){const se=K[9];for(let Se=0;Se<se.length;Se++){const We=se[Se];ih(We[1],We,V,y)}}}}}return y}function sT(c){const p=xt(),g=Xi(),y=HI();gm(y+1);const w=lT(g,y);if(c.dirty&&function vy(c){return 4==(4&c[2])}(p)===(2==(2&w.metadata.flags))){if(null===w.matches)c.reset([]);else{const D=w.crossesNgTemplate?ih(g,p,y,[]):bN(g,p,w,y);c.reset(D,I),c.notifyOnChanges()}return!0}return!1}function cR(c,p,g){const y=Xi();y.firstCreatePass&&(aT(y,new Bw(c,p,g),-1),2==(2&p)&&(y.staticViewQueries=!0)),Hw(y,xt(),p)}function Bb(c,p,g,y){const w=Xi();if(w.firstCreatePass){const D=Ts();aT(w,new Bw(p,g,y),D.index),function pR(c,p){const g=c.contentQueries||(c.contentQueries=[]);p!==(g.length?g[g.length-1]:-1)&&g.push(c.queries.length-1,p)}(w,c),2==(2&g)&&(w.staticContentQueries=!0)}Hw(w,xt(),g)}function oT(){return function dR(c,p){return c[19].queries[p].queryList}(xt(),HI())}function Hw(c,p,g){const y=new nT(4==(4&g));Cb(c,p,y,y.destroy),null===p[19]&&(p[19]=new yN),p[19].queries.push(new lR(y))}function aT(c,p,g){null===c.queries&&(c.queries=new rT),c.queries.track(new hR(p,g))}function lT(c,p){return c.queries.getByIndex(p)}function hT(c,p){return sR(c,p)}function yT(...c){}const CT=new bs("Application Initializer");let Kw=(()=>{class c{constructor(g){this.appInits=g,this.resolve=yT,this.reject=yT,this.initialized=!1,this.done=!1,this.donePromise=new Promise((y,w)=>{this.resolve=y,this.reject=w})}runInitializers(){if(this.initialized)return;const g=[],y=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let w=0;w<this.appInits.length;w++){const D=this.appInits[w]();if(Tk(D))g.push(D);else if(Dk(D)){const R=new Promise((O,F)=>{D.subscribe({complete:O,error:F})});g.push(R)}}Promise.all(g).then(()=>{y()}).catch(w=>{this.reject(w)}),0===g.length&&y(),this.initialized=!0}}return c.\u0275fac=function(g){return new(g||c)(yo(CT,8))},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const ER=new bs("AppId",{providedIn:"root",factory:function xR(){return`${$w()}${$w()}${$w()}`}});function $w(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const TR=new bs("Platform Initializer"),PN=new bs("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),wT=new bs("appBootstrapListener");let DR=(()=>{class c{log(g){console.log(g)}warn(g){console.warn(g)}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();const Yw=new bs("LocaleId",{providedIn:"root",factory:()=>bp(Yw,pi.Optional|pi.SkipSelf)||function NN(){return typeof $localize<"u"&&$localize.locale||Be}()}),IR=new bs("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class AR{constructor(p,g){this.ngModuleFactory=p,this.componentFactories=g}}let ST=(()=>{class c{compileModuleSync(g){return new Qk(g)}compileModuleAsync(g){return Promise.resolve(this.compileModuleSync(g))}compileModuleAndAllComponentsSync(g){const y=this.compileModuleSync(g),D=yg(Ri(g).declarations).reduce((R,O)=>{const F=ae(O);return F&&R.push(new bw(F)),R},[]);return new AR(y,D)}compileModuleAndAllComponentsAsync(g){return Promise.resolve(this.compileModuleAndAllComponentsSync(g))}clearCache(){}clearCacheFor(g){}getModuleId(g){}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();const HZ=(()=>Promise.resolve(0))();function jN(c){typeof Zone>"u"?HZ.then(()=>{c&&c.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",c)}class zu{constructor({enableLongStackTrace:p=!1,shouldCoalesceEventChangeDetection:g=!1,shouldCoalesceRunChangeDetection:y=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ma(!1),this.onMicrotaskEmpty=new Ma(!1),this.onStable=new Ma(!1),this.onError=new Ma(!1),typeof Zone>"u")throw new Ct(908,!1);Zone.assertZonePatched();const w=this;if(w._nesting=0,w._outer=w._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const D=Zone.AsyncStackTaggingZoneSpec;w._inner=w._inner.fork(new D("Angular"))}Zone.TaskTrackingZoneSpec&&(w._inner=w._inner.fork(new Zone.TaskTrackingZoneSpec)),p&&Zone.longStackTraceZoneSpec&&(w._inner=w._inner.fork(Zone.longStackTraceZoneSpec)),w.shouldCoalesceEventChangeDetection=!y&&g,w.shouldCoalesceRunChangeDetection=y,w.lastRequestAnimationFrameId=-1,w.nativeRequestAnimationFrame=function m6(){let c=xn.requestAnimationFrame,p=xn.cancelAnimationFrame;if(typeof Zone<"u"&&c&&p){const g=c[Zone.__symbol__("OriginalDelegate")];g&&(c=g);const y=p[Zone.__symbol__("OriginalDelegate")];y&&(p=y)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:p}}().nativeRequestAnimationFrame,function mv(c){const p=()=>{!function Ad(c){c.isCheckStableRunning||-1!==c.lastRequestAnimationFrameId||(c.lastRequestAnimationFrameId=c.nativeRequestAnimationFrame.call(xn,()=>{c.fakeTopEventTask||(c.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{c.lastRequestAnimationFrameId=-1,Vb(c),c.isCheckStableRunning=!0,UN(c),c.isCheckStableRunning=!1},void 0,()=>{},()=>{})),c.fakeTopEventTask.invoke()}),Vb(c))}(c)};c._inner=c._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(g,y,w,D,R,O)=>{try{return zb(c),g.invokeTask(w,D,R,O)}finally{(c.shouldCoalesceEventChangeDetection&&"eventTask"===D.type||c.shouldCoalesceRunChangeDetection)&&p(),xT(c)}},onInvoke:(g,y,w,D,R,O,F)=>{try{return zb(c),g.invoke(w,D,R,O,F)}finally{c.shouldCoalesceRunChangeDetection&&p(),xT(c)}},onHasTask:(g,y,w,D)=>{g.hasTask(w,D),y===w&&("microTask"==D.change?(c._hasPendingMicrotasks=D.microTask,Vb(c),UN(c)):"macroTask"==D.change&&(c.hasPendingMacrotasks=D.macroTask))},onHandleError:(g,y,w,D)=>(g.handleError(w,D),c.runOutsideAngular(()=>c.onError.emit(D)),!1)})}(w)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!zu.isInAngularZone())throw new Ct(909,!1)}static assertNotInAngularZone(){if(zu.isInAngularZone())throw new Ct(909,!1)}run(p,g,y){return this._inner.run(p,g,y)}runTask(p,g,y,w){const D=this._inner,R=D.scheduleEventTask("NgZoneEvent: "+w,p,v6,yT,yT);try{return D.runTask(R,g,y)}finally{D.cancelTask(R)}}runGuarded(p,g,y){return this._inner.runGuarded(p,g,y)}runOutsideAngular(p){return this._outer.run(p)}}const v6={};function UN(c){if(0==c._nesting&&!c.hasPendingMicrotasks&&!c.isStable)try{c._nesting++,c.onMicrotaskEmpty.emit(null)}finally{if(c._nesting--,!c.hasPendingMicrotasks)try{c.runOutsideAngular(()=>c.onStable.emit(null))}finally{c.isStable=!0}}}function Vb(c){c.hasPendingMicrotasks=!!(c._hasPendingMicrotasks||(c.shouldCoalesceEventChangeDetection||c.shouldCoalesceRunChangeDetection)&&-1!==c.lastRequestAnimationFrameId)}function zb(c){c._nesting++,c.isStable&&(c.isStable=!1,c.onUnstable.emit(null))}function xT(c){c._nesting--,UN(c)}class TT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ma,this.onMicrotaskEmpty=new Ma,this.onStable=new Ma,this.onError=new Ma}run(p,g,y){return p.apply(g,y)}runGuarded(p,g,y){return p.apply(g,y)}runOutsideAngular(p){return p()}runTask(p,g,y,w){return p.apply(g,y)}}const So=new bs(""),kd=new bs("");let DT,Yp=(()=>{class c{constructor(g,y,w){this._ngZone=g,this.registry=y,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,DT||(function qN(c){DT=c}(w),w.addToWindow(y)),this._watchAngularEvents(),g.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{zu.assertNotInAngularZone(),jN(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())jN(()=>{for(;0!==this._callbacks.length;){let g=this._callbacks.pop();clearTimeout(g.timeoutId),g.doneCb(this._didWork)}this._didWork=!1});else{let g=this.getPendingTasks();this._callbacks=this._callbacks.filter(y=>!y.updateCb||!y.updateCb(g)||(clearTimeout(y.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(g=>({source:g.source,creationLocation:g.creationLocation,data:g.data})):[]}addCallback(g,y,w){let D=-1;y&&y>0&&(D=setTimeout(()=>{this._callbacks=this._callbacks.filter(R=>R.timeoutId!==D),g(this._didWork,this.getPendingTasks())},y)),this._callbacks.push({doneCb:g,timeoutId:D,updateCb:w})}whenStable(g,y,w){if(w&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(g,y,w),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(g){this.registry.registerApplication(g,this)}unregisterApplication(g){this.registry.unregisterApplication(g)}findProviders(g,y,w){return[]}}return c.\u0275fac=function(g){return new(g||c)(yo(zu),yo(WN),yo(kd))},c.\u0275prov=lr({token:c,factory:c.\u0275fac}),c})(),WN=(()=>{class c{constructor(){this._applications=new Map}registerApplication(g,y){this._applications.set(g,y)}unregisterApplication(g){this._applications.delete(g)}unregisterAllApplications(){this._applications.clear()}getTestability(g){return this._applications.get(g)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(g,y=!0){return DT?.findTestabilityInTree(this,g,y)??null}}return c.\u0275fac=function(g){return new(g||c)},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})(),Rd=null;const IT=new bs("AllowMultipleToken"),jb=new bs("PlatformDestroyListeners");class eu{constructor(p,g){this.name=p,this.token=g}}function $N(c,p,g=[]){const y=`Platform: ${p}`,w=new bs(y);return(D=[])=>{let R=AT();if(!R||R.injector.get(IT,!1)){const O=[...g,...D,{provide:w,useValue:!0}];c?c(O):function _R(c){if(Rd&&!Rd.get(IT,!1))throw new Ct(400,!1);Rd=c;const p=c.get(PR);(function KN(c){const p=c.get(TR,null);p&&p.forEach(g=>g())})(c)}(function OR(c=[],p){return tv.create({name:p,providers:[{provide:Rp,useValue:"platform"},{provide:jb,useValue:new Set([()=>Rd=null])},...c]})}(O,y))}return function LR(c){const p=AT();if(!p)throw new Ct(401,!1);return p}()}}function AT(){return Rd?.get(PR)??null}let PR=(()=>{class c{constructor(g){this._injector=g,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(g,y){const w=function FR(c,p){let g;return g="noop"===c?new TT:("zone.js"===c?void 0:c)||new zu(p),g}(y?.ngZone,function MR(c){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!c||!c.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!c||!c.ngZoneRunCoalescing)||!1}}(y)),D=[{provide:zu,useValue:w}];return w.run(()=>{const R=tv.create({providers:D,parent:this.injector,name:g.moduleType.name}),O=g.create(R),F=O.injector.get(Jy,null);if(!F)throw new Ct(402,!1);return w.runOutsideAngular(()=>{const V=w.onError.subscribe({next:K=>{F.handleError(K)}});O.onDestroy(()=>{Wb(this._modules,O),V.unsubscribe()})}),function NR(c,p,g){try{const y=g();return Tk(y)?y.catch(w=>{throw p.runOutsideAngular(()=>c.handleError(w)),w}):y}catch(y){throw p.runOutsideAngular(()=>c.handleError(y)),y}}(F,w,()=>{const V=O.injector.get(Kw);return V.runInitializers(),V.donePromise.then(()=>(function y3(c){Sn(c,"Expected localeId to be defined"),"string"==typeof c&&(v3=c.toLowerCase().replace(/_/g,"-"))}(O.injector.get(Yw,Be)||Be),this._moduleDoBootstrap(O),O))})})}bootstrapModule(g,y=[]){const w=BR({},y);return function RR(c,p,g){const y=new Qk(g);return Promise.resolve(y)}(0,0,g).then(D=>this.bootstrapModuleFactory(D,w))}_moduleDoBootstrap(g){const y=g.injector.get(Ub);if(g._bootstrapComponents.length>0)g._bootstrapComponents.forEach(w=>y.bootstrap(w));else{if(!g.instance.ngDoBootstrap)throw new Ct(403,!1);g.instance.ngDoBootstrap(y)}this._modules.push(g)}onDestroy(g){this._destroyListeners.push(g)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ct(404,!1);this._modules.slice().forEach(y=>y.destroy()),this._destroyListeners.forEach(y=>y());const g=this._injector.get(jb,null);g&&(g.forEach(y=>y()),g.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return c.\u0275fac=function(g){return new(g||c)(yo(tv))},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"platform"}),c})();function BR(c,p){return Array.isArray(p)?p.reduce(BR,c):{...c,...p}}let Ub=(()=>{class c{constructor(g,y,w){this._zone=g,this._injector=y,this._exceptionHandler=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const D=new oe.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),R=new oe.y(O=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{zu.assertNotInAngularZone(),jN(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{zu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{F.unsubscribe(),V.unsubscribe()}});this.isStable=(0,$e.T)(D,R.pipe((0,ot.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(g,y){const w=g instanceof Zy;if(!this._injector.get(Kw).done)throw!w&&li(g),new Ct(405,false);let R;R=w?g:this._injector.get(mg).resolveComponentFactory(g),this.componentTypes.push(R.componentType);const O=function vv(c){return c.isBoundToModule}(R)?void 0:this._injector.get(Lb),V=R.create(tv.NULL,[],y||R.selector,O),K=V.location.nativeElement,se=V.injector.get(So,null);return se?.registerApplication(K),V.onDestroy(()=>{this.detachView(V.hostView),Wb(this.components,V),se?.unregisterApplication(K)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new Ct(101,!1);try{this._runningTick=!0;for(let g of this._views)g.detectChanges()}catch(g){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(g))}finally{this._runningTick=!1}}attachView(g){const y=g;this._views.push(y),y.attachToAppRef(this)}detachView(g){const y=g;Wb(this._views,y),y.detachFromAppRef()}_loadComponent(g){this.attachView(g.hostView),this.tick(),this.components.push(g),this._injector.get(wT,[]).concat(this._bootstrapListeners).forEach(w=>w(g))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(g=>g()),this._views.slice().forEach(g=>g.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(g){return this._destroyListeners.push(g),()=>Wb(this._destroyListeners,g)}destroy(){if(this._destroyed)throw new Ct(406,!1);const g=this._injector;g.destroy&&!g.destroyed&&g.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return c.\u0275fac=function(g){return new(g||c)(yo(zu),yo(Ya),yo(Jy))},c.\u0275prov=lr({token:c,factory:c.\u0275fac,providedIn:"root"}),c})();function Wb(c,p){const g=c.indexOf(p);g>-1&&c.splice(g,1)}let Zw=!0,Xw=!1;function YN(){return Xw=!0,Zw}function ZN(){if(Xw)throw new Error("Cannot enable prod mode after platform setup.");Zw=!1}let Fa=(()=>{class c{}return c.__NG_ELEMENT_ID__=kl,c})();function kl(c){return function zR(c,p,g){if(xu(c)&&!g){const y=$n(c.index,p);return new yw(y,y)}return 47&c.type?new yw(p[16],p):null}(Ts(),xt(),16==(16&c))}class Gb{constructor(){}supports(p){return Cw(p)}create(p){return new WR(p)}}const UR=(c,p)=>p;class WR{constructor(p){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=p||UR}forEachItem(p){let g;for(g=this._itHead;null!==g;g=g._next)p(g)}forEachOperation(p){let g=this._itHead,y=this._removalsHead,w=0,D=null;for(;g||y;){const R=!y||g&&g.currentIndex<OT(y,w,D)?g:y,O=OT(R,w,D),F=R.currentIndex;if(R===y)w--,y=y._nextRemoved;else if(g=g._next,null==R.previousIndex)w++;else{D||(D=[]);const V=O-w,K=F-w;if(V!=K){for(let Se=0;Se<V;Se++){const We=Se<D.length?D[Se]:D[Se]=0,wt=We+Se;K<=wt&&wt<V&&(D[Se]=We+1)}D[R.previousIndex]=K-V}}O!==F&&p(R,O,F)}}forEachPreviousItem(p){let g;for(g=this._previousItHead;null!==g;g=g._nextPrevious)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachMovedItem(p){let g;for(g=this._movesHead;null!==g;g=g._nextMoved)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}forEachIdentityChange(p){let g;for(g=this._identityChangesHead;null!==g;g=g._nextIdentityChange)p(g)}diff(p){if(null==p&&(p=[]),!Cw(p))throw new Ct(900,!1);return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let w,D,R,g=this._itHead,y=!1;if(Array.isArray(p)){this.length=p.length;for(let O=0;O<this.length;O++)D=p[O],R=this._trackByFn(O,D),null!==g&&Object.is(g.trackById,R)?(y&&(g=this._verifyReinsertion(g,D,R,O)),Object.is(g.item,D)||this._addIdentityChange(g,D)):(g=this._mismatch(g,D,R,O),y=!0),g=g._next}else w=0,function Mx(c,p){if(Array.isArray(c))for(let g=0;g<c.length;g++)p(c[g]);else{const g=c[av()]();let y;for(;!(y=g.next()).done;)p(y.value)}}(p,O=>{R=this._trackByFn(w,O),null!==g&&Object.is(g.trackById,R)?(y&&(g=this._verifyReinsertion(g,O,R,w)),Object.is(g.item,O)||this._addIdentityChange(g,O)):(g=this._mismatch(g,O,R,w),y=!0),g=g._next,w++}),this.length=w;return this._truncate(g),this.collection=p,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let p;for(p=this._previousItHead=this._itHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._additionsHead;null!==p;p=p._nextAdded)p.previousIndex=p.currentIndex;for(this._additionsHead=this._additionsTail=null,p=this._movesHead;null!==p;p=p._nextMoved)p.previousIndex=p.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(p,g,y,w){let D;return null===p?D=this._itTail:(D=p._prev,this._remove(p)),null!==(p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._reinsertAfter(p,D,w)):null!==(p=null===this._linkedRecords?null:this._linkedRecords.get(y,w))?(Object.is(p.item,g)||this._addIdentityChange(p,g),this._moveAfter(p,D,w)):p=this._addAfter(new Tg(g,y),D,w),p}_verifyReinsertion(p,g,y,w){let D=null===this._unlinkedRecords?null:this._unlinkedRecords.get(y,null);return null!==D?p=this._reinsertAfter(D,p._prev,w):p.currentIndex!=w&&(p.currentIndex=w,this._addToMoves(p,w)),p}_truncate(p){for(;null!==p;){const g=p._next;this._addToRemovals(this._unlink(p)),p=g}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(p,g,y){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(p);const w=p._prevRemoved,D=p._nextRemoved;return null===w?this._removalsHead=D:w._nextRemoved=D,null===D?this._removalsTail=w:D._prevRemoved=w,this._insertAfter(p,g,y),this._addToMoves(p,y),p}_moveAfter(p,g,y){return this._unlink(p),this._insertAfter(p,g,y),this._addToMoves(p,y),p}_addAfter(p,g,y){return this._insertAfter(p,g,y),this._additionsTail=null===this._additionsTail?this._additionsHead=p:this._additionsTail._nextAdded=p,p}_insertAfter(p,g,y){const w=null===g?this._itHead:g._next;return p._next=w,p._prev=g,null===w?this._itTail=p:w._prev=p,null===g?this._itHead=p:g._next=p,null===this._linkedRecords&&(this._linkedRecords=new qR),this._linkedRecords.put(p),p.currentIndex=y,p}_remove(p){return this._addToRemovals(this._unlink(p))}_unlink(p){null!==this._linkedRecords&&this._linkedRecords.remove(p);const g=p._prev,y=p._next;return null===g?this._itHead=y:g._next=y,null===y?this._itTail=g:y._prev=g,p}_addToMoves(p,g){return p.previousIndex===g||(this._movesTail=null===this._movesTail?this._movesHead=p:this._movesTail._nextMoved=p),p}_addToRemovals(p){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qR),this._unlinkedRecords.put(p),p.currentIndex=null,p._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=p,p._prevRemoved=null):(p._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=p),p}_addIdentityChange(p,g){return p.item=g,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=p:this._identityChangesTail._nextIdentityChange=p,p}}class Tg{constructor(p,g){this.item=p,this.trackById=g,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LT{constructor(){this._head=null,this._tail=null}add(p){null===this._head?(this._head=this._tail=p,p._nextDup=null,p._prevDup=null):(this._tail._nextDup=p,p._prevDup=this._tail,p._nextDup=null,this._tail=p)}get(p,g){let y;for(y=this._head;null!==y;y=y._nextDup)if((null===g||g<=y.currentIndex)&&Object.is(y.trackById,p))return y;return null}remove(p){const g=p._prevDup,y=p._nextDup;return null===g?this._head=y:g._nextDup=y,null===y?this._tail=g:y._prevDup=g,null===this._head}}class qR{constructor(){this.map=new Map}put(p){const g=p.trackById;let y=this.map.get(g);y||(y=new LT,this.map.set(g,y)),y.add(p)}get(p,g){const w=this.map.get(p);return w?w.get(p,g):null}remove(p){const g=p.trackById;return this.map.get(g).remove(p)&&this.map.delete(g),p}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function OT(c,p,g){const y=c.previousIndex;if(null===y)return y;let w=0;return g&&y<g.length&&(w=g[y]),y+p+w}class Qp{constructor(){}supports(p){return p instanceof Map||Fx(p)}create(){return new S6}}class S6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(p){let g;for(g=this._mapHead;null!==g;g=g._next)p(g)}forEachPreviousItem(p){let g;for(g=this._previousMapHead;null!==g;g=g._nextPrevious)p(g)}forEachChangedItem(p){let g;for(g=this._changesHead;null!==g;g=g._nextChanged)p(g)}forEachAddedItem(p){let g;for(g=this._additionsHead;null!==g;g=g._nextAdded)p(g)}forEachRemovedItem(p){let g;for(g=this._removalsHead;null!==g;g=g._nextRemoved)p(g)}diff(p){if(p){if(!(p instanceof Map||Fx(p)))throw new Ct(900,!1)}else p=new Map;return this.check(p)?this:null}onDestroy(){}check(p){this._reset();let g=this._mapHead;if(this._appendAfter=null,this._forEach(p,(y,w)=>{if(g&&g.key===w)this._maybeAddToChanges(g,y),this._appendAfter=g,g=g._next;else{const D=this._getOrCreateRecordForKey(w,y);g=this._insertBeforeOrAppend(g,D)}}),g){g._prev&&(g._prev._next=null),this._removalsHead=g;for(let y=g;null!==y;y=y._nextRemoved)y===this._mapHead&&(this._mapHead=null),this._records.delete(y.key),y._nextRemoved=y._next,y.previousValue=y.currentValue,y.currentValue=null,y._prev=null,y._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(p,g){if(p){const y=p._prev;return g._next=p,g._prev=y,p._prev=g,y&&(y._next=g),p===this._mapHead&&(this._mapHead=g),this._appendAfter=p,p}return this._appendAfter?(this._appendAfter._next=g,g._prev=this._appendAfter):this._mapHead=g,this._appendAfter=g,null}_getOrCreateRecordForKey(p,g){if(this._records.has(p)){const w=this._records.get(p);this._maybeAddToChanges(w,g);const D=w._prev,R=w._next;return D&&(D._next=R),R&&(R._prev=D),w._next=null,w._prev=null,w}const y=new E6(p);return this._records.set(p,y),y.currentValue=g,this._addToAdditions(y),y}_reset(){if(this.isDirty){let p;for(this._previousMapHead=this._mapHead,p=this._previousMapHead;null!==p;p=p._next)p._nextPrevious=p._next;for(p=this._changesHead;null!==p;p=p._nextChanged)p.previousValue=p.currentValue;for(p=this._additionsHead;null!=p;p=p._nextAdded)p.previousValue=p.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(p,g){Object.is(g,p.currentValue)||(p.previousValue=p.currentValue,p.currentValue=g,this._addToChanges(p))}_addToAdditions(p){null===this._additionsHead?this._additionsHead=this._additionsTail=p:(this._additionsTail._nextAdded=p,this._additionsTail=p)}_addToChanges(p){null===this._changesHead?this._changesHead=this._changesTail=p:(this._changesTail._nextChanged=p,this._changesTail=p)}_forEach(p,g){p instanceof Map?p.forEach(g):Object.keys(p).forEach(y=>g(p[y],y))}}class E6{constructor(p){this.key=p,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GR(){return new PT([new Gb])}let PT=(()=>{class c{constructor(g){this.factories=g}static create(g,y){if(null!=y){const w=y.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:y=>c.create(g,y||GR()),deps:[[c,new bc,new sg]]}}find(g){const y=this.factories.find(w=>w.supports(g));if(null!=y)return y;throw new Ct(901,!1)}}return c.\u0275prov=lr({token:c,providedIn:"root",factory:GR}),c})();function KR(){return new Kb([new Qp])}let Kb=(()=>{class c{constructor(g){this.factories=g}static create(g,y){if(y){const w=y.factories.slice();g=g.concat(w)}return new c(g)}static extend(g){return{provide:c,useFactory:y=>c.create(g,y||KR()),deps:[[c,new bc,new sg]]}}find(g){const y=this.factories.find(w=>w.supports(g));if(y)return y;throw new Ct(901,!1)}}return c.\u0275prov=lr({token:c,providedIn:"root",factory:KR}),c})();const YR=$N(null,"core",[]);let ZR=(()=>{class c{constructor(g){}}return c.\u0275fac=function(g){return new(g||c)(yo(Ub))},c.\u0275mod=Tn({type:c}),c.\u0275inj=nn({}),c})();function XR(c){return"boolean"==typeof c?c:null!=c&&"false"!==c}},3942:(Wi,kt,te)=>{te.d(kt,{Z:()=>Ct});var b=te(2090),Ve=te(4859),oe=te(9681),$e=te(1877);class ot{constructor(dt,st){this._delegate=dt,this.firebase=st,(0,oe._addComponent)(dt,new Ve.wA("app-compat",()=>this,"PUBLIC")),this.container=dt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(dt){this._delegate.automaticDataCollectionEnabled=dt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(dt=>{this._delegate.checkDestroyed(),dt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,oe.deleteApp)(this._delegate)))}_getService(dt,st=oe._DEFAULT_ENTRY_NAME){var Mi;this._delegate.checkDestroyed();const Ei=this._delegate.container.getProvider(dt);return!Ei.isInitialized()&&"EXPLICIT"===(null===(Mi=Ei.getComponent())||void 0===Mi?void 0:Mi.instantiationMode)&&Ei.initialize(),Ei.getImmediate({identifier:st})}_removeServiceInstance(dt,st=oe._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(dt).clearInstance(st)}_addComponent(dt){(0,oe._addComponent)(this._delegate,dt)}_addOrOverwriteComponent(dt){(0,oe._addOrOverwriteComponent)(this._delegate,dt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const et=new b.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ve=function at(){const di=function ct(di){const dt={},st={__esModule:!0,initializeApp:function Rt(Vt,ge={}){const ft=oe.initializeApp(Vt,ge);if((0,b.r3)(dt,ft.name))return dt[ft.name];const Oe=new di(ft,st);return dt[ft.name]=Oe,Oe},app:Ei,registerVersion:oe.registerVersion,setLogLevel:oe.setLogLevel,onLog:oe.onLog,apps:null,SDK_VERSION:oe.SDK_VERSION,INTERNAL:{registerComponent:function Et(Vt){const ge=Vt.name,ft=ge.replace("-compat","");if(oe._registerComponent(Vt)&&"PUBLIC"===Vt.type){const Oe=(Ue=Ei())=>{if("function"!=typeof Ue[ft])throw et.create("invalid-app-argument",{appName:ge});return Ue[ft]()};void 0!==Vt.serviceProps&&(0,b.ZB)(Oe,Vt.serviceProps),st[ft]=Oe,di.prototype[ft]=function(...Ue){return this._getService.bind(this,ge).apply(this,Vt.multipleInstances?Ue:[])}}return"PUBLIC"===Vt.type?st[ft]:null},removeApp:function Mi(Vt){delete dt[Vt]},useAsService:function Jt(Vt,ge){return"serverAuth"===ge?null:ge},modularAPIs:oe}};function Ei(Vt){if(!(0,b.r3)(dt,Vt=Vt||oe._DEFAULT_ENTRY_NAME))throw et.create("no-app",{appName:Vt});return dt[Vt]}return st.default=st,Object.defineProperty(st,"apps",{get:function gt(){return Object.keys(dt).map(Vt=>dt[Vt])}}),Ei.App=di,st}(ot);return di.INTERNAL=Object.assign(Object.assign({},di.INTERNAL),{createFirebaseNamespace:at,extendNamespace:function dt(st){(0,b.ZB)(di,st)},createSubscribe:b.ne,ErrorFactory:b.LL,deepExtend:b.ZB}),di}(),Ce=new $e.Yd("@firebase/app-compat");if((0,b.jU)()&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const di=self.firebase.SDK_VERSION;di&&di.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ct=ve;!function bt(di){(0,oe.registerVersion)("@firebase/app-compat","0.1.39",di)}()},9681:(Wi,kt,te)=>{te.r(kt),te.d(kt,{FirebaseError:()=>$e.ZR,SDK_VERSION:()=>Wa,_DEFAULT_ENTRY_NAME:()=>Sn,_addComponent:()=>br,_addOrOverwriteComponent:()=>lr,_apps:()=>yr,_clearComponents:()=>Ua,_components:()=>Es,_getProvider:()=>nn,_registerComponent:()=>Js,_removeServiceInstance:()=>Mn,deleteApp:()=>Kl,getApp:()=>Aa,getApps:()=>mo,initializeApp:()=>go,onLog:()=>El,registerVersion:()=>Jr,setLogLevel:()=>ys});var b=te(5861),Ve=te(4859),oe=te(1877),$e=te(2090),ot=te(8766);class ht{constructor(It){this.container=It}getPlatformInfoString(){return this.container.getProviders().map(wi=>{if(function et(fi){return"VERSION"===fi.getComponent()?.type}(wi)){const an=wi.getImmediate();return`${an.library}/${an.version}`}return null}).filter(wi=>wi).join(" ")}}const ct="@firebase/app",ve=new oe.Yd("@firebase/app"),Sn="[DEFAULT]",oi={[ct]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},yr=new Map,Es=new Map;function br(fi,It){try{fi.container.addComponent(It)}catch(wi){ve.debug(`Component ${It.name} failed to register with FirebaseApp ${fi.name}`,wi)}}function lr(fi,It){fi.container.addOrOverwriteComponent(It)}function Js(fi){const It=fi.name;if(Es.has(It))return ve.debug(`There were multiple attempts to register component ${It}.`),!1;Es.set(It,fi);for(const wi of yr.values())br(wi,fi);return!0}function nn(fi,It){const wi=fi.container.getProvider("heartbeat").getImmediate({optional:!0});return wi&&wi.triggerHeartbeat(),fi.container.getProvider(It)}function Mn(fi,It,wi=Sn){nn(fi,It).clearInstance(wi)}function Ua(){Es.clear()}const Go=new $e.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class us{constructor(It,wi,an){this._isDeleted=!1,this._options=Object.assign({},It),this._config=Object.assign({},wi),this._name=wi.name,this._automaticDataCollectionEnabled=wi.automaticDataCollectionEnabled,this._container=an,this.container.addComponent(new Ve.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(It){this.checkDestroyed(),this._automaticDataCollectionEnabled=It}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(It){this._isDeleted=It}checkDestroyed(){if(this.isDeleted)throw Go.create("app-deleted",{appName:this._name})}}const Wa="9.14.0";function go(fi,It={}){let wi=fi;"object"!=typeof It&&(It={name:It});const an=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},It),ln=an.name;if("string"!=typeof ln||!ln)throw Go.create("bad-app-name",{appName:String(ln)});if(wi||(wi=(0,$e.aH)()),!wi)throw Go.create("no-options");const Tn=yr.get(ln);if(Tn){if((0,$e.vZ)(wi,Tn.options)&&(0,$e.vZ)(an,Tn.config))return Tn;throw Go.create("duplicate-app",{appName:ln})}const me=new Ve.H0(ln);for(const X of Es.values())me.addComponent(X);const de=new us(wi,an,me);return yr.set(ln,de),de}function Aa(fi=Sn){const It=yr.get(fi);if(!It&&fi===Sn)return go();if(!It)throw Go.create("no-app",{appName:fi});return It}function mo(){return Array.from(yr.values())}function Kl(fi){return pi.apply(this,arguments)}function pi(){return(pi=(0,b.Z)(function*(fi){const It=fi.name;yr.has(It)&&(yr.delete(It),yield Promise.all(fi.container.getProviders().map(wi=>wi.delete())),fi.isDeleted=!0)})).apply(this,arguments)}function Jr(fi,It,wi){var an;let ln=null!==(an=oi[fi])&&void 0!==an?an:fi;wi&&(ln+=`-${wi}`);const Tn=ln.match(/\s|\//),me=It.match(/\s|\//);if(Tn||me){const de=[`Unable to register library "${ln}" with version "${It}":`];return Tn&&de.push(`library name "${ln}" contains illegal characters (whitespace or "/")`),Tn&&me&&de.push("and"),me&&de.push(`version name "${It}" contains illegal characters (whitespace or "/")`),void ve.warn(de.join(" "))}Js(new Ve.wA(`${ln}-version`,()=>({library:ln,version:It}),"VERSION"))}function El(fi,It){if(null!==fi&&"function"!=typeof fi)throw Go.create("invalid-log-argument");(0,oe.Am)(fi,It)}function ys(fi){(0,oe.Ub)(fi)}const cs="firebase-heartbeat-store";let Fs=null;function pr(){return Fs||(Fs=(0,ot.X3)("firebase-heartbeat-database",1,{upgrade:(fi,It)=>{0===It&&fi.createObjectStore(cs)}}).catch(fi=>{throw Go.create("idb-open",{originalErrorMessage:fi.message})})),Fs}function _i(){return(_i=(0,b.Z)(function*(fi){var It;try{return(yield pr()).transaction(cs).objectStore(cs).get(qs(fi))}catch(wi){if(wi instanceof $e.ZR)ve.warn(wi.message);else{const an=Go.create("idb-get",{originalErrorMessage:null===(It=wi)||void 0===It?void 0:It.message});ve.warn(an.message)}}})).apply(this,arguments)}function xn(fi,It){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,b.Z)(function*(fi,It){var wi;try{const ln=(yield pr()).transaction(cs,"readwrite");return yield ln.objectStore(cs).put(It,qs(fi)),ln.done}catch(an){if(an instanceof $e.ZR)ve.warn(an.message);else{const ln=Go.create("idb-set",{originalErrorMessage:null===(wi=an)||void 0===wi?void 0:wi.message});ve.warn(ln.message)}}})).apply(this,arguments)}function qs(fi){return`${fi.name}!${fi.options.appId}`}class qa{constructor(It){this.container=It,this._heartbeatsCache=null;const wi=this.container.getProvider("app").getImmediate();this._storage=new er(wi),this._heartbeatsCachePromise=this._storage.read().then(an=>(this._heartbeatsCache=an,an))}triggerHeartbeat(){var It=this;return(0,b.Z)(function*(){const an=It.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ln=Kn();if(null===It._heartbeatsCache&&(It._heartbeatsCache=yield It._heartbeatsCachePromise),It._heartbeatsCache.lastSentHeartbeatDate!==ln&&!It._heartbeatsCache.heartbeats.some(Tn=>Tn.date===ln))return It._heartbeatsCache.heartbeats.push({date:ln,agent:an}),It._heartbeatsCache.heartbeats=It._heartbeatsCache.heartbeats.filter(Tn=>{const me=new Date(Tn.date).valueOf();return Date.now()-me<=2592e6}),It._storage.overwrite(It._heartbeatsCache)})()}getHeartbeatsHeader(){var It=this;return(0,b.Z)(function*(){if(null===It._heartbeatsCache&&(yield It._heartbeatsCachePromise),null===It._heartbeatsCache||0===It._heartbeatsCache.heartbeats.length)return"";const wi=Kn(),{heartbeatsToSend:an,unsentEntries:ln}=function Ko(fi,It=1024){const wi=[];let an=fi.slice();for(const ln of fi){const Tn=wi.find(me=>me.agent===ln.agent);if(Tn){if(Tn.dates.push(ln.date),Gs(wi)>It){Tn.dates.pop();break}}else if(wi.push({agent:ln.agent,dates:[ln.date]}),Gs(wi)>It){wi.pop();break}an=an.slice(1)}return{heartbeatsToSend:wi,unsentEntries:an}}(It._heartbeatsCache.heartbeats),Tn=(0,$e.L)(JSON.stringify({version:2,heartbeats:an}));return It._heartbeatsCache.lastSentHeartbeatDate=wi,ln.length>0?(It._heartbeatsCache.heartbeats=ln,yield It._storage.overwrite(It._heartbeatsCache)):(It._heartbeatsCache.heartbeats=[],It._storage.overwrite(It._heartbeatsCache)),Tn})()}}function Kn(){return(new Date).toISOString().substring(0,10)}class er{constructor(It){this.app=It,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.Z)(function*(){return!!(0,$e.hl)()&&(0,$e.eu)().then(()=>!0).catch(()=>!1)})()}read(){var It=this;return(0,b.Z)(function*(){return(yield It._canUseIndexedDBPromise)&&(yield function Ki(fi){return _i.apply(this,arguments)}(It.app))||{heartbeats:[]}})()}overwrite(It){var wi=this;return(0,b.Z)(function*(){var an;if(yield wi._canUseIndexedDBPromise){const Tn=yield wi.read();return xn(wi.app,{lastSentHeartbeatDate:null!==(an=It.lastSentHeartbeatDate)&&void 0!==an?an:Tn.lastSentHeartbeatDate,heartbeats:It.heartbeats})}})()}add(It){var wi=this;return(0,b.Z)(function*(){var an;if(yield wi._canUseIndexedDBPromise){const Tn=yield wi.read();return xn(wi.app,{lastSentHeartbeatDate:null!==(an=It.lastSentHeartbeatDate)&&void 0!==an?an:Tn.lastSentHeartbeatDate,heartbeats:[...Tn.heartbeats,...It.heartbeats]})}})()}}function Gs(fi){return(0,$e.L)(JSON.stringify({version:2,heartbeats:fi})).length}!function ga(fi){Js(new Ve.wA("platform-logger",It=>new ht(It),"PRIVATE")),Js(new Ve.wA("heartbeat",It=>new qa(It),"PRIVATE")),Jr(ct,"0.8.4",fi),Jr(ct,"0.8.4","esm2017"),Jr("fire-js","")}("")},4859:(Wi,kt,te)=>{te.d(kt,{H0:()=>ct,wA:()=>oe,zt:()=>ot});var b=te(5861),Ve=te(2090);class oe{constructor(ve,Ce,Fe){this.name=ve,this.instanceFactory=Ce,this.type=Fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ve){return this.instantiationMode=ve,this}setMultipleInstances(ve){return this.multipleInstances=ve,this}setServiceProps(ve){return this.serviceProps=ve,this}setInstanceCreatedCallback(ve){return this.onInstanceCreated=ve,this}}const $e="[DEFAULT]";class ot{constructor(ve,Ce){this.name=ve,this.container=Ce,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ve){const Ce=this.normalizeInstanceIdentifier(ve);if(!this.instancesDeferred.has(Ce)){const Fe=new Ve.BH;if(this.instancesDeferred.set(Ce,Fe),this.isInitialized(Ce)||this.shouldAutoInitialize())try{const _t=this.getOrInitializeService({instanceIdentifier:Ce});_t&&Fe.resolve(_t)}catch{}}return this.instancesDeferred.get(Ce).promise}getImmediate(ve){var Ce;const Fe=this.normalizeInstanceIdentifier(ve?.identifier),_t=null!==(Ce=ve?.optional)&&void 0!==Ce&&Ce;if(!this.isInitialized(Fe)&&!this.shouldAutoInitialize()){if(_t)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Fe})}catch(bt){if(_t)return null;throw bt}}getComponent(){return this.component}setComponent(ve){if(ve.name!==this.name)throw Error(`Mismatching Component ${ve.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ve,this.shouldAutoInitialize()){if(function et(at){return"EAGER"===at.instantiationMode}(ve))try{this.getOrInitializeService({instanceIdentifier:$e})}catch{}for(const[Ce,Fe]of this.instancesDeferred.entries()){const _t=this.normalizeInstanceIdentifier(Ce);try{const bt=this.getOrInitializeService({instanceIdentifier:_t});Fe.resolve(bt)}catch{}}}}clearInstance(ve=$e){this.instancesDeferred.delete(ve),this.instancesOptions.delete(ve),this.instances.delete(ve)}delete(){var ve=this;return(0,b.Z)(function*(){const Ce=Array.from(ve.instances.values());yield Promise.all([...Ce.filter(Fe=>"INTERNAL"in Fe).map(Fe=>Fe.INTERNAL.delete()),...Ce.filter(Fe=>"_delete"in Fe).map(Fe=>Fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ve=$e){return this.instances.has(ve)}getOptions(ve=$e){return this.instancesOptions.get(ve)||{}}initialize(ve={}){const{options:Ce={}}=ve,Fe=this.normalizeInstanceIdentifier(ve.instanceIdentifier);if(this.isInitialized(Fe))throw Error(`${this.name}(${Fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const _t=this.getOrInitializeService({instanceIdentifier:Fe,options:Ce});for(const[bt,Ct]of this.instancesDeferred.entries())Fe===this.normalizeInstanceIdentifier(bt)&&Ct.resolve(_t);return _t}onInit(ve,Ce){var Fe;const _t=this.normalizeInstanceIdentifier(Ce),bt=null!==(Fe=this.onInitCallbacks.get(_t))&&void 0!==Fe?Fe:new Set;bt.add(ve),this.onInitCallbacks.set(_t,bt);const Ct=this.instances.get(_t);return Ct&&ve(Ct,_t),()=>{bt.delete(ve)}}invokeOnInitCallbacks(ve,Ce){const Fe=this.onInitCallbacks.get(Ce);if(Fe)for(const _t of Fe)try{_t(ve,Ce)}catch{}}getOrInitializeService({instanceIdentifier:ve,options:Ce={}}){let Fe=this.instances.get(ve);if(!Fe&&this.component&&(Fe=this.component.instanceFactory(this.container,{instanceIdentifier:(at=ve,at===$e?void 0:at),options:Ce}),this.instances.set(ve,Fe),this.instancesOptions.set(ve,Ce),this.invokeOnInitCallbacks(Fe,ve),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ve,Fe)}catch{}var at;return Fe||null}normalizeInstanceIdentifier(ve=$e){return this.component?this.component.multipleInstances?ve:$e:ve}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ct{constructor(ve){this.name=ve,this.providers=new Map}addComponent(ve){const Ce=this.getProvider(ve.name);if(Ce.isComponentSet())throw new Error(`Component ${ve.name} has already been registered with ${this.name}`);Ce.setComponent(ve)}addOrOverwriteComponent(ve){this.getProvider(ve.name).isComponentSet()&&this.providers.delete(ve.name),this.addComponent(ve)}getProvider(ve){if(this.providers.has(ve))return this.providers.get(ve);const Ce=new ot(ve,this);return this.providers.set(ve,Ce),Ce}getProviders(){return Array.from(this.providers.values())}}},2833:(Wi,kt,te)=>{var b=te(5861),Ve=te(9681),oe=te(4859),$e=te(2090),ot=te(8766);const ht="@firebase/installations",et="0.5.16",at=`w:${et}`,ve="FIS_v2",di=new $e.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dt(_e){return _e instanceof $e.ZR&&_e.code.includes("request-failed")}function st({projectId:_e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${_e}/installations`}function Mi(_e){return{token:_e.token,requestStatus:2,expiresIn:ge(_e.expiresIn),creationTime:Date.now()}}function Ei(_e,pt){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,b.Z)(function*(_e,pt){const Li=(yield pt.json()).error;return di.create("request-failed",{requestName:_e,serverCode:Li.code,serverMessage:Li.message,serverStatus:Li.status})})).apply(this,arguments)}function gt({apiKey:_e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_e})}function Et(_e,{refreshToken:pt}){const jt=gt(_e);return jt.append("Authorization",function ft(_e){return`${ve} ${_e}`}(pt)),jt}function Jt(_e){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,b.Z)(function*(_e){const pt=yield _e();return pt.status>=500&&pt.status<600?_e():pt})).apply(this,arguments)}function ge(_e){return Number(_e.replace("s","000"))}function Oe(_e,pt){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,b.Z)(function*({appConfig:_e,heartbeatServiceProvider:pt},{fid:jt}){const Li=st(_e),Fn=gt(_e),hr=pt.getImmediate({optional:!0});if(hr){const $o=yield hr.getHeartbeatsHeader();$o&&Fn.append("x-firebase-client",$o)}const Pr={method:"POST",headers:Fn,body:JSON.stringify({fid:jt,authVersion:ve,appId:_e.appId,sdkVersion:at})},Ga=yield Jt(()=>fetch(Li,Pr));if(Ga.ok){const $o=yield Ga.json();return{fid:$o.fid||jt,registrationStatus:2,refreshToken:$o.refreshToken,authToken:Mi($o.authToken)}}throw yield Ei("Create Installation",Ga)})).apply(this,arguments)}function Xe(_e){return new Promise(pt=>{setTimeout(pt,_e)})}const Wt=/^[cdef][\w-]{21}$/;function ji(){try{const _e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_e),_e[0]=112+_e[0]%16;const jt=function Jn(_e){return function Ge(_e){return btoa(String.fromCharCode(..._e)).replace(/\+/g,"-").replace(/\//g,"_")}(_e).substr(0,22)}(_e);return Wt.test(jt)?jt:""}catch{return""}}function Sn(_e){return`${_e.appName}!${_e.appId}`}const oi=new Map;function yr(_e,pt){const jt=Sn(_e);lr(jt,pt),function Js(_e,pt){const jt=function Mn(){return!nn&&"BroadcastChannel"in self&&(nn=new BroadcastChannel("[Firebase] FID Change"),nn.onmessage=_e=>{lr(_e.data.key,_e.data.fid)}),nn}();jt&&jt.postMessage({key:_e,fid:pt}),function Ua(){0===oi.size&&nn&&(nn.close(),nn=null)}()}(jt,pt)}function lr(_e,pt){const jt=oi.get(_e);if(jt)for(const Li of jt)Li(pt)}let nn=null;const us="firebase-installations-store";let Wa=null;function go(){return Wa||(Wa=(0,ot.X3)("firebase-installations-database",1,{upgrade:(_e,pt)=>{0===pt&&_e.createObjectStore(us)}})),Wa}function Aa(_e,pt){return mo.apply(this,arguments)}function mo(){return(mo=(0,b.Z)(function*(_e,pt){const jt=Sn(_e),Fn=(yield go()).transaction(us,"readwrite"),hr=Fn.objectStore(us),Ks=yield hr.get(jt);return yield hr.put(pt,jt),yield Fn.done,(!Ks||Ks.fid!==pt.fid)&&yr(_e,pt.fid),pt})).apply(this,arguments)}function Kl(_e){return pi.apply(this,arguments)}function pi(){return(pi=(0,b.Z)(function*(_e){const pt=Sn(_e),Li=(yield go()).transaction(us,"readwrite");yield Li.objectStore(us).delete(pt),yield Li.done})).apply(this,arguments)}function Jr(_e,pt){return El.apply(this,arguments)}function El(){return(El=(0,b.Z)(function*(_e,pt){const jt=Sn(_e),Fn=(yield go()).transaction(us,"readwrite"),hr=Fn.objectStore(us),Ks=yield hr.get(jt),Pr=pt(Ks);return void 0===Pr?yield hr.delete(jt):yield hr.put(Pr,jt),yield Fn.done,Pr&&(!Ks||Ks.fid!==Pr.fid)&&yr(_e,Pr.fid),Pr})).apply(this,arguments)}function ys(_e){return ka.apply(this,arguments)}function ka(){return(ka=(0,b.Z)(function*(_e){let pt;const jt=yield Jr(_e.appConfig,Li=>{const Fn=eo(Li),hr=cs(_e,Fn);return pt=hr.registrationPromise,hr.installationEntry});return""===jt.fid?{installationEntry:yield pt}:{installationEntry:jt,registrationPromise:pt}})).apply(this,arguments)}function eo(_e){return Dr(_e||{fid:ji(),registrationStatus:0})}function cs(_e,pt){if(0===pt.registrationStatus){if(!navigator.onLine)return{installationEntry:pt,registrationPromise:Promise.reject(di.create("app-offline"))};const jt={fid:pt.fid,registrationStatus:1,registrationTime:Date.now()},Li=function Fs(_e,pt){return pr.apply(this,arguments)}(_e,jt);return{installationEntry:jt,registrationPromise:Li}}return 1===pt.registrationStatus?{installationEntry:pt,registrationPromise:Ki(_e)}:{installationEntry:pt}}function pr(){return(pr=(0,b.Z)(function*(_e,pt){try{const jt=yield Oe(_e,pt);return Aa(_e.appConfig,jt)}catch(jt){throw dt(jt)&&409===jt.customData.serverCode?yield Kl(_e.appConfig):yield Aa(_e.appConfig,{fid:pt.fid,registrationStatus:0}),jt}})).apply(this,arguments)}function Ki(_e){return _i.apply(this,arguments)}function _i(){return(_i=(0,b.Z)(function*(_e){let pt=yield xn(_e.appConfig);for(;1===pt.registrationStatus;)yield Xe(100),pt=yield xn(_e.appConfig);if(0===pt.registrationStatus){const{installationEntry:jt,registrationPromise:Li}=yield ys(_e);return Li||jt}return pt})).apply(this,arguments)}function xn(_e){return Jr(_e,pt=>{if(!pt)throw di.create("installation-not-found");return Dr(pt)})}function Dr(_e){return function qs(_e){return 1===_e.registrationStatus&&_e.registrationTime+1e4<Date.now()}(_e)?{fid:_e.fid,registrationStatus:0}:_e}function ko(_e,pt){return pn.apply(this,arguments)}function pn(){return(pn=(0,b.Z)(function*({appConfig:_e,heartbeatServiceProvider:pt},jt){const Li=qa(_e,jt),Fn=Et(_e,jt),hr=pt.getImmediate({optional:!0});if(hr){const $o=yield hr.getHeartbeatsHeader();$o&&Fn.append("x-firebase-client",$o)}const Pr={method:"POST",headers:Fn,body:JSON.stringify({installation:{sdkVersion:at,appId:_e.appId}})},Ga=yield Jt(()=>fetch(Li,Pr));if(Ga.ok)return Mi(yield Ga.json());throw yield Ei("Generate Auth Token",Ga)})).apply(this,arguments)}function qa(_e,{fid:pt}){return`${st(_e)}/${pt}/authTokens:generate`}function Kn(_e){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,b.Z)(function*(_e,pt=!1){let jt;const Li=yield Jr(_e.appConfig,hr=>{if(!wi(hr))throw di.create("not-registered");const Ks=hr.authToken;if(!pt&&an(Ks))return hr;if(1===Ks.requestStatus)return jt=er(_e,pt),hr;{if(!navigator.onLine)throw di.create("app-offline");const Pr=Tn(hr);return jt=fi(_e,Pr),Pr}});return jt?yield jt:Li.authToken})).apply(this,arguments)}function er(_e,pt){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,b.Z)(function*(_e,pt){let jt=yield ga(_e.appConfig);for(;1===jt.authToken.requestStatus;)yield Xe(100),jt=yield ga(_e.appConfig);const Li=jt.authToken;return 0===Li.requestStatus?Kn(_e,pt):Li})).apply(this,arguments)}function ga(_e){return Jr(_e,pt=>{if(!wi(pt))throw di.create("not-registered");return function me(_e){return 1===_e.requestStatus&&_e.requestTime+1e4<Date.now()}(pt.authToken)?Object.assign(Object.assign({},pt),{authToken:{requestStatus:0}}):pt})}function fi(_e,pt){return It.apply(this,arguments)}function It(){return(It=(0,b.Z)(function*(_e,pt){try{const jt=yield ko(_e,pt),Li=Object.assign(Object.assign({},pt),{authToken:jt});return yield Aa(_e.appConfig,Li),jt}catch(jt){if(!dt(jt)||401!==jt.customData.serverCode&&404!==jt.customData.serverCode){const Li=Object.assign(Object.assign({},pt),{authToken:{requestStatus:0}});yield Aa(_e.appConfig,Li)}else yield Kl(_e.appConfig);throw jt}})).apply(this,arguments)}function wi(_e){return void 0!==_e&&2===_e.registrationStatus}function an(_e){return 2===_e.requestStatus&&!function ln(_e){const pt=Date.now();return pt<_e.creationTime||_e.creationTime+_e.expiresIn<pt+36e5}(_e)}function Tn(_e){const pt={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_e),{authToken:pt})}function X(){return(X=(0,b.Z)(function*(_e){const pt=_e,{installationEntry:jt,registrationPromise:Li}=yield ys(pt);return Li?Li.catch(console.error):Kn(pt).catch(console.error),jt.fid})).apply(this,arguments)}function ae(){return(ae=(0,b.Z)(function*(_e,pt=!1){const jt=_e;return yield Ye(jt),(yield Kn(jt,pt)).token})).apply(this,arguments)}function Ye(_e){return yt.apply(this,arguments)}function yt(){return(yt=(0,b.Z)(function*(_e){const{registrationPromise:pt}=yield ys(_e);pt&&(yield pt)})).apply(this,arguments)}function Cr(_e){return di.create("missing-app-config-values",{valueName:_e})}const $l="installations",Sh=_e=>{const pt=_e.getProvider("app").getImmediate(),jt=function xs(_e){if(!_e||!_e.options)throw Cr("App Configuration");if(!_e.name)throw Cr("App Name");const pt=["projectId","apiKey","appId"];for(const jt of pt)if(!_e.options[jt])throw Cr(jt);return{appName:_e.name,projectId:_e.options.projectId,apiKey:_e.options.apiKey,appId:_e.options.appId}}(pt);return{app:pt,appConfig:jt,heartbeatServiceProvider:(0,Ve._getProvider)(pt,"heartbeat"),_delete:()=>Promise.resolve()}},Eu=_e=>{const pt=_e.getProvider("app").getImmediate(),jt=(0,Ve._getProvider)(pt,$l).getImmediate();return{getId:()=>function de(_e){return X.apply(this,arguments)}(jt),getToken:Fn=>function ye(_e){return ae.apply(this,arguments)}(jt,Fn)}};(function An(){(0,Ve._registerComponent)(new oe.wA($l,Sh,"PUBLIC")),(0,Ve._registerComponent)(new oe.wA("installations-internal",Eu,"PRIVATE"))})(),(0,Ve.registerVersion)(ht,et),(0,Ve.registerVersion)(ht,et,"esm2017")},1877:(Wi,kt,te)=>{te.d(kt,{Am:()=>at,Ub:()=>ct,Yd:()=>et,in:()=>Ve});const b=[];var Ve=(()=>{return(ve=Ve||(Ve={}))[ve.DEBUG=0]="DEBUG",ve[ve.VERBOSE=1]="VERBOSE",ve[ve.INFO=2]="INFO",ve[ve.WARN=3]="WARN",ve[ve.ERROR=4]="ERROR",ve[ve.SILENT=5]="SILENT",Ve;var ve})();const oe={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},$e=Ve.INFO,ot={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},ht=(ve,Ce,...Fe)=>{if(Ce<ve.logLevel)return;const _t=(new Date).toISOString(),bt=ot[Ce];if(!bt)throw new Error(`Attempted to log a message with an invalid logType (value: ${Ce})`);console[bt](`[${_t}]  ${ve.name}:`,...Fe)};class et{constructor(Ce){this.name=Ce,this._logLevel=$e,this._logHandler=ht,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(Ce){if(!(Ce in Ve))throw new TypeError(`Invalid value "${Ce}" assigned to \`logLevel\``);this._logLevel=Ce}setLogLevel(Ce){this._logLevel="string"==typeof Ce?oe[Ce]:Ce}get logHandler(){return this._logHandler}set logHandler(Ce){if("function"!=typeof Ce)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Ce}get userLogHandler(){return this._userLogHandler}set userLogHandler(Ce){this._userLogHandler=Ce}debug(...Ce){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...Ce),this._logHandler(this,Ve.DEBUG,...Ce)}log(...Ce){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...Ce),this._logHandler(this,Ve.VERBOSE,...Ce)}info(...Ce){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...Ce),this._logHandler(this,Ve.INFO,...Ce)}warn(...Ce){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...Ce),this._logHandler(this,Ve.WARN,...Ce)}error(...Ce){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...Ce),this._logHandler(this,Ve.ERROR,...Ce)}}function ct(ve){b.forEach(Ce=>{Ce.setLogLevel(ve)})}function at(ve,Ce){for(const Fe of b){let _t=null;Ce&&Ce.level&&(_t=oe[Ce.level]),Fe.userLogHandler=null===ve?null:(bt,Ct,...di)=>{const dt=di.map(st=>{if(null==st)return null;if("string"==typeof st)return st;if("number"==typeof st||"boolean"==typeof st)return st.toString();if(st instanceof Error)return st.message;try{return JSON.stringify(st)}catch{return null}}).filter(st=>st).join(" ");Ct>=(_t??bt.logLevel)&&ve({level:Ve[Ct].toLowerCase(),message:dt,args:di,type:bt.name})}}}},8766:(Wi,kt,te)=>{te.d(kt,{Lj:()=>Rt,X3:()=>Ei});var b=te(5861);let oe,$e;const et=new WeakMap,ct=new WeakMap,at=new WeakMap,ve=new WeakMap,Ce=new WeakMap;let bt={get(ge,ft,Oe){if(ge instanceof IDBTransaction){if("done"===ft)return ct.get(ge);if("objectStoreNames"===ft)return ge.objectStoreNames||at.get(ge);if("store"===ft)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return st(ge[ft])},set:(ge,ft,Oe)=>(ge[ft]=Oe,!0),has:(ge,ft)=>ge instanceof IDBTransaction&&("done"===ft||"store"===ft)||ft in ge};function dt(ge){return"function"==typeof ge?function di(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ht(){return $e||($e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...ft){return ge.apply(Mi(this),ft),st(et.get(this))}:function(...ft){return st(ge.apply(Mi(this),ft))}:function(ft,...Oe){const Ue=ge.call(Mi(this),ft,...Oe);return at.set(Ue,ft.sort?ft.sort():[ft]),st(Ue)}}(ge):(ge instanceof IDBTransaction&&function _t(ge){if(ct.has(ge))return;const ft=new Promise((Oe,Ue)=>{const Xe=()=>{ge.removeEventListener("complete",Ge),ge.removeEventListener("error",Wt),ge.removeEventListener("abort",Wt)},Ge=()=>{Oe(),Xe()},Wt=()=>{Ue(ge.error||new DOMException("AbortError","AbortError")),Xe()};ge.addEventListener("complete",Ge),ge.addEventListener("error",Wt),ge.addEventListener("abort",Wt)});ct.set(ge,ft)}(ge),((ge,ft)=>ft.some(Oe=>ge instanceof Oe))(ge,function ot(){return oe||(oe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,bt):ge)}function st(ge){if(ge instanceof IDBRequest)return function Fe(ge){const ft=new Promise((Oe,Ue)=>{const Xe=()=>{ge.removeEventListener("success",Ge),ge.removeEventListener("error",Wt)},Ge=()=>{Oe(st(ge.result)),Xe()},Wt=()=>{Ue(ge.error),Xe()};ge.addEventListener("success",Ge),ge.addEventListener("error",Wt)});return ft.then(Oe=>{Oe instanceof IDBCursor&&et.set(Oe,ge)}).catch(()=>{}),Ce.set(ft,ge),ft}(ge);if(ve.has(ge))return ve.get(ge);const ft=dt(ge);return ft!==ge&&(ve.set(ge,ft),Ce.set(ft,ge)),ft}const Mi=ge=>Ce.get(ge);function Ei(ge,ft,{blocked:Oe,upgrade:Ue,blocking:Xe,terminated:Ge}={}){const Wt=indexedDB.open(ge,ft),zt=st(Wt);return Ue&&Wt.addEventListener("upgradeneeded",ji=>{Ue(st(Wt.result),ji.oldVersion,ji.newVersion,st(Wt.transaction))}),Oe&&Wt.addEventListener("blocked",()=>Oe()),zt.then(ji=>{Ge&&ji.addEventListener("close",()=>Ge()),Xe&&ji.addEventListener("versionchange",()=>Xe())}).catch(()=>{}),zt}function Rt(ge,{blocked:ft}={}){const Oe=indexedDB.deleteDatabase(ge);return ft&&Oe.addEventListener("blocked",()=>ft()),st(Oe).then(()=>{})}const gt=["get","getKey","getAll","getAllKeys","count"],Et=["put","add","delete","clear"],Jt=new Map;function Vt(ge,ft){if(!(ge instanceof IDBDatabase)||ft in ge||"string"!=typeof ft)return;if(Jt.get(ft))return Jt.get(ft);const Oe=ft.replace(/FromIndex$/,""),Ue=ft!==Oe,Xe=Et.includes(Oe);if(!(Oe in(Ue?IDBIndex:IDBObjectStore).prototype)||!Xe&&!gt.includes(Oe))return;const Ge=function(){var Wt=(0,b.Z)(function*(zt,...ji){const Jn=this.transaction(zt,Xe?"readwrite":"readonly");let Sn=Jn.store;return Ue&&(Sn=Sn.index(ji.shift())),(yield Promise.all([Sn[Oe](...ji),Xe&&Jn.done]))[0]});return function(ji){return Wt.apply(this,arguments)}}();return Jt.set(ft,Ge),Ge}!function Ct(ge){bt=ge(bt)}(ge=>({...ge,get:(ft,Oe,Ue)=>Vt(ft,Oe)||ge.get(ft,Oe,Ue),has:(ft,Oe)=>!!Vt(ft,Oe)||ge.has(ft,Oe)}))},5861:(Wi,kt,te)=>{function b(oe,$e,ot,ht,et,ct,at){try{var ve=oe[ct](at),Ce=ve.value}catch(Fe){return void ot(Fe)}ve.done?$e(Ce):Promise.resolve(Ce).then(ht,et)}function Ve(oe){return function(){var $e=this,ot=arguments;return new Promise(function(ht,et){var ct=oe.apply($e,ot);function at(Ce){b(ct,ht,et,at,ve,"next",Ce)}function ve(Ce){b(ct,ht,et,at,ve,"throw",Ce)}at(void 0)})}}te.d(kt,{Z:()=>Ve})}},Wi=>{Wi(Wi.s=1880)}]);